[{"url": "https://api.github.com/repos/ansible-community/molecule/issues/3898", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3898/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3898/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3898/events", "html_url": "https://github.com/ansible-community/molecule/pull/3898", "id": 1685039395, "node_id": "PR_kwDOAsPDRs5PM5Ca", "number": 3898, "title": "Use api to get driver schema file", "user": {"login": "apatard", "id": 2619394, "node_id": "MDQ6VXNlcjI2MTkzOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2619394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apatard", "html_url": "https://github.com/apatard", "followers_url": "https://api.github.com/users/apatard/followers", "following_url": "https://api.github.com/users/apatard/following{/other_user}", "gists_url": "https://api.github.com/users/apatard/gists{/gist_id}", "starred_url": "https://api.github.com/users/apatard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apatard/subscriptions", "organizations_url": "https://api.github.com/users/apatard/orgs", "repos_url": "https://api.github.com/users/apatard/repos", "events_url": "https://api.github.com/users/apatard/events{/privacy}", "received_events_url": "https://api.github.com/users/apatard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-26T13:29:17Z", "updated_at": "2023-04-28T12:32:29Z", "closed_at": "2023-04-28T12:32:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3898", "html_url": "https://github.com/ansible-community/molecule/pull/3898", "diff_url": "https://github.com/ansible-community/molecule/pull/3898.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3898.patch", "merged_at": "2023-04-28T12:32:28Z"}, "body": "Current code is assuming that the molecule driver are inside a molecule_$driver python resource, which is not the case. For instance, vagrant plugin is in molecule_plugins.\r\n\r\nAs a solution:\r\n- extend driver class to provide a schema_file() member, allowing to return a path to the driver.json file,\r\n- replace schema_v3 code to use molecule api and get the schema file path thanks to the new schema_file().", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3898/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3898/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3896", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3896/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3896/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3896/events", "html_url": "https://github.com/ansible-community/molecule/pull/3896", "id": 1684154866, "node_id": "PR_kwDOAsPDRs5PJ8Nx", "number": 3896, "title": "Add `subprocess-run-check`", "user": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-04-26T02:23:38Z", "updated_at": "2023-04-26T13:49:01Z", "closed_at": "2023-04-26T13:49:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3896", "html_url": "https://github.com/ansible-community/molecule/pull/3896", "diff_url": "https://github.com/ansible-community/molecule/pull/3896.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3896.patch", "merged_at": "2023-04-26T13:48:59Z"}, "body": "The `subprocess-run-check` indicates that the check parameter for the `subprocess.run()` function is not explicitly defined, and it defaults to False. This can potentially lead to unexpected behavior if the command exits with a non-zero status code.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3896/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3896/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3894", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3894/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3894/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3894/events", "html_url": "https://github.com/ansible-community/molecule/pull/3894", "id": 1681341211, "node_id": "PR_kwDOAsPDRs5PAcc0", "number": 3894, "title": "Fix `tree` example in use case document", "user": {"login": "akira6592", "id": 16851744, "node_id": "MDQ6VXNlcjE2ODUxNzQ0", "avatar_url": "https://avatars.githubusercontent.com/u/16851744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akira6592", "html_url": "https://github.com/akira6592", "followers_url": "https://api.github.com/users/akira6592/followers", "following_url": "https://api.github.com/users/akira6592/following{/other_user}", "gists_url": "https://api.github.com/users/akira6592/gists{/gist_id}", "starred_url": "https://api.github.com/users/akira6592/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akira6592/subscriptions", "organizations_url": "https://api.github.com/users/akira6592/orgs", "repos_url": "https://api.github.com/users/akira6592/repos", "events_url": "https://api.github.com/users/akira6592/events{/privacy}", "received_events_url": "https://api.github.com/users/akira6592/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-24T13:58:49Z", "updated_at": "2023-04-28T15:37:58Z", "closed_at": "2023-04-28T12:33:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3894", "html_url": "https://github.com/ansible-community/molecule/pull/3894", "diff_url": "https://github.com/ansible-community/molecule/pull/3894.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3894.patch", "merged_at": "2023-04-28T12:33:07Z"}, "body": "Fixed `monolith-repo` tree in use case document.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3894/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3894/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3893", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3893/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3893/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3893/events", "html_url": "https://github.com/ansible-community/molecule/pull/3893", "id": 1681323062, "node_id": "PR_kwDOAsPDRs5PAYd7", "number": 3893, "title": "Add `unidiomatic-typecheck` check", "user": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-04-24T13:50:27Z", "updated_at": "2023-04-24T13:58:32Z", "closed_at": "2023-04-24T13:58:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3893", "html_url": "https://github.com/ansible-community/molecule/pull/3893", "diff_url": "https://github.com/ansible-community/molecule/pull/3893.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3893.patch", "merged_at": "2023-04-24T13:58:31Z"}, "body": "The  `unidiomatic-typecheck` ensures that we are using the `isinstance()` built-in function for type checking which is more idiomatic in Python for type-checking as compared to the `type()` built-in function ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3893/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3892", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3892/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3892/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3892/events", "html_url": "https://github.com/ansible-community/molecule/pull/3892", "id": 1681229521, "node_id": "PR_kwDOAsPDRs5PAEKA", "number": 3892, "title": "Add `unnecessary-lambda` check", "user": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-04-24T13:01:44Z", "updated_at": "2023-04-24T13:10:42Z", "closed_at": "2023-04-24T13:10:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3892", "html_url": "https://github.com/ansible-community/molecule/pull/3892", "diff_url": "https://github.com/ansible-community/molecule/pull/3892.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3892.patch", "merged_at": "2023-04-24T13:10:41Z"}, "body": "The `unnecessary-lambda` check ensures that we are not using a lambda function unnecessarily in our Python code, where a regular function or a built-in function could be used instead, which ultimately helps to make our code more readable and efficient.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3892/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3892/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3889", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3889/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3889/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3889/events", "html_url": "https://github.com/ansible-community/molecule/pull/3889", "id": 1678801280, "node_id": "PR_kwDOAsPDRs5O4IVE", "number": 3889, "title": "Address ruff S, EXE skips", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-21T16:39:09Z", "updated_at": "2023-04-21T16:47:21Z", "closed_at": "2023-04-21T16:47:19Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3889", "html_url": "https://github.com/ansible-community/molecule/pull/3889", "diff_url": "https://github.com/ansible-community/molecule/pull/3889.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3889.patch", "merged_at": "2023-04-21T16:47:19Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3889/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3889/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3887", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3887/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3887/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3887/events", "html_url": "https://github.com/ansible-community/molecule/pull/3887", "id": 1678792161, "node_id": "PR_kwDOAsPDRs5O4GaU", "number": 3887, "title": "More ruff fixes", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-21T16:30:06Z", "updated_at": "2023-04-21T16:37:46Z", "closed_at": "2023-04-21T16:37:45Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3887", "html_url": "https://github.com/ansible-community/molecule/pull/3887", "diff_url": "https://github.com/ansible-community/molecule/pull/3887.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3887.patch", "merged_at": "2023-04-21T16:37:45Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3887/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3887/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3886", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3886/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3886/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3886/events", "html_url": "https://github.com/ansible-community/molecule/pull/3886", "id": 1678770740, "node_id": "PR_kwDOAsPDRs5O4B78", "number": 3886, "title": "Fix colors when displaying plugin versions", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-21T16:11:32Z", "updated_at": "2023-04-21T16:28:36Z", "closed_at": "2023-04-21T16:28:35Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3886", "html_url": "https://github.com/ansible-community/molecule/pull/3886", "diff_url": "https://github.com/ansible-community/molecule/pull/3886.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3886.patch", "merged_at": "2023-04-21T16:28:35Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3886/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3885", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3885/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3885/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3885/events", "html_url": "https://github.com/ansible-community/molecule/pull/3885", "id": 1678527661, "node_id": "PR_kwDOAsPDRs5O3NXN", "number": 3885, "title": "Add `raise-missing-from` rule", "user": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-04-21T13:29:32Z", "updated_at": "2023-04-21T13:55:14Z", "closed_at": "2023-04-21T13:55:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3885", "html_url": "https://github.com/ansible-community/molecule/pull/3885", "diff_url": "https://github.com/ansible-community/molecule/pull/3885.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3885.patch", "merged_at": "2023-04-21T13:55:13Z"}, "body": "The `raise-missing-from` error occurs when we catch an exception and raise a new exception with the original exception as the cause, but we do not explicitly use the `from` clause to include the original exception as the cause in the new exception. Hence to fix this, we can use the `from` clause when raising the new exception to explicitly specify the original exception as the cause. This would make the work easier to trace the original cause of the error when debugging.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3885/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3884", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3884/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3884/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3884/events", "html_url": "https://github.com/ansible-community/molecule/pull/3884", "id": 1678158621, "node_id": "PR_kwDOAsPDRs5O197g", "number": 3884, "title": "Add `no-else-return`, `no-else-raise` & `logging-not-lazy` check", "user": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-04-21T08:58:23Z", "updated_at": "2023-04-21T09:28:56Z", "closed_at": "2023-04-21T09:28:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3884", "html_url": "https://github.com/ansible-community/molecule/pull/3884", "diff_url": "https://github.com/ansible-community/molecule/pull/3884.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3884.patch", "merged_at": "2023-04-21T09:28:55Z"}, "body": "The `no-else-raise` check ensures that there is no unnecessary `else` statement in the code block following a `raise ` statement. As the raise statement causes an exception to be thrown, any code following the raise statement will not be executed, which makes the else block redundant and hence this check ensures that there is no else block after a raise statement. It helps to make our code readable amd modular.\r\n\r\nThe `no-else-return` is a linting error that usually appears when you have an else statement immediately following a `return` statement in a function. The check suggests that you should remove the \"else\" statement and de-indent the code inside it. This ensures that the code inside the \"else\" block is not executed unnecessarily and will also make the code more concise and easier to read.\r\n\r\nThe `logging-not-lazy` check ensures that using lazy `%` formatting, you can avoid the \"logging-not-lazy\" error and ensure that the logging messages are formatted correctly according to the logging conventions in Python.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3884/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3882", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3882/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3882/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3882/events", "html_url": "https://github.com/ansible-community/molecule/pull/3882", "id": 1676674388, "node_id": "PR_kwDOAsPDRs5Ow_HR", "number": 3882, "title": "Add `implicit-str-concat` & `inconsistent-return-statements` check", "user": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-04-20T12:58:23Z", "updated_at": "2023-04-20T13:17:33Z", "closed_at": "2023-04-20T13:11:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3882", "html_url": "https://github.com/ansible-community/molecule/pull/3882", "diff_url": "https://github.com/ansible-community/molecule/pull/3882.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3882.patch", "merged_at": "2023-04-20T13:11:37Z"}, "body": "The `implicit-str-concat` rule ensures that the string concatenation is done implicitly in an assignment statement using an explicit operator, such as `+` or other methods like string-formatting, etc. This can improve code readability and reduce the likelihood of introducing errors related to string concatenation.\r\n\r\nThe `inconsistent-return-statements` rule raises an error when a function has multiple return statements, and some of them return an expression while others do not. This can lead to unexpected behavior and make the code harder to understand. The check ensures that the function has consistent return statements and that it always returns an expression or none of them return an expression, making the code more predictable and easier to understand.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3882/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3880", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3880/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3880/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3880/events", "html_url": "https://github.com/ansible-community/molecule/pull/3880", "id": 1676426134, "node_id": "PR_kwDOAsPDRs5OwJYq", "number": 3880, "title": "Add `consider-using-in` check", "user": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Ruchip16", "id": 72685035, "node_id": "MDQ6VXNlcjcyNjg1MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/72685035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ruchip16", "html_url": "https://github.com/Ruchip16", "followers_url": "https://api.github.com/users/Ruchip16/followers", "following_url": "https://api.github.com/users/Ruchip16/following{/other_user}", "gists_url": "https://api.github.com/users/Ruchip16/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ruchip16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ruchip16/subscriptions", "organizations_url": "https://api.github.com/users/Ruchip16/orgs", "repos_url": "https://api.github.com/users/Ruchip16/repos", "events_url": "https://api.github.com/users/Ruchip16/events{/privacy}", "received_events_url": "https://api.github.com/users/Ruchip16/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-04-20T10:12:07Z", "updated_at": "2023-04-20T10:45:54Z", "closed_at": "2023-04-20T10:44:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3880", "html_url": "https://github.com/ansible-community/molecule/pull/3880", "diff_url": "https://github.com/ansible-community/molecule/pull/3880.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3880.patch", "merged_at": "2023-04-20T10:44:09Z"}, "body": "The `consider-using-in` check ensures that we are using the `in` keyword when multiple comparisons are made with the same variable using the logical OR (or) operator. Using `in` keyword instead of multiple comparisons with `or` operator can help improve code readability and maintainability, and it can also help avoid potential issues with precedence and logic in complex conditions.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3880/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3880/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3879", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3879/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3879/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3879/events", "html_url": "https://github.com/ansible-community/molecule/pull/3879", "id": 1676317825, "node_id": "PR_kwDOAsPDRs5Ovxxw", "number": 3879, "title": "Refactor dependency locks", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-20T09:08:04Z", "updated_at": "2023-04-20T11:49:16Z", "closed_at": "2023-04-20T11:49:14Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3879", "html_url": "https://github.com/ansible-community/molecule/pull/3879", "diff_url": "https://github.com/ansible-community/molecule/pull/3879.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3879.patch", "merged_at": "2023-04-20T11:49:14Z"}, "body": "Fixes: #3702\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3879/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3865", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3865/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3865/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3865/events", "html_url": "https://github.com/ansible-community/molecule/issues/3865", "id": 1664405065, "node_id": "I_kwDOAsPDRs5jNM5J", "number": 3865, "title": "Molecule produces error when using tags", "user": {"login": "sparsick", "id": 976007, "node_id": "MDQ6VXNlcjk3NjAwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/976007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sparsick", "html_url": "https://github.com/sparsick", "followers_url": "https://api.github.com/users/sparsick/followers", "following_url": "https://api.github.com/users/sparsick/following{/other_user}", "gists_url": "https://api.github.com/users/sparsick/gists{/gist_id}", "starred_url": "https://api.github.com/users/sparsick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sparsick/subscriptions", "organizations_url": "https://api.github.com/users/sparsick/orgs", "repos_url": "https://api.github.com/users/sparsick/repos", "events_url": "https://api.github.com/users/sparsick/events{/privacy}", "received_events_url": "https://api.github.com/users/sparsick/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-04-12T11:46:59Z", "updated_at": "2023-04-12T13:57:02Z", "closed_at": "2023-04-12T13:56:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && .venv/bin/molecule --version\r\nansible [core 2.14.4]\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/sparsick/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3/dist-packages/ansible\r\n  ansible collection location = /home/sparsick/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.10.6 (main, Mar 10 2023, 10:55:28) [GCC 11.3.0] (/usr/bin/python3)\r\n  jinja version = 3.0.3\r\n  libyaml = True\r\nmolecule 5.0.0a1.dev12 using python 3.10 \r\n    ansible:2.14.4\r\n    delegated:5.0.0a1.dev12 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used: testinfra, ansible-lint\r\n\r\n# Desired Behavior\r\n I created two scenarios.  One that should test a role with set tags and one that should test a role without tags. \r\n\r\nThe scenario with tags has a molecule.yml where following config_options are set:\r\n\r\n```yaml\r\nconfig_options:\r\n    tags:\r\n      run: tag1\r\n```\r\n\r\nMy expectation is that the scenario with tag runs successfully when calling 'molecule test -s tag1'\r\n\r\nThe whole sample code : https://github.com/sparsick/ansible-molecule-tags/tree/4eb464c9743fb0cec5569349e6b8536984926c8d\r\n\r\n# Actual Behaviour\r\n\r\nScenario without tags runs successfully when calling (as expected)\r\n\r\n````\r\nmolecule test\r\n````\r\n\r\nScenario with tags produces an error in step converge when calling\r\n````\r\nmolecule test -s tag1\r\n````\r\nerror message:\r\n```\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nfatal: [instance]: FAILED! => {\"ansible_facts\": {}, \"changed\": false, \"failed_modules\": {\"ansible.legacy.setup\": {\"ansible_facts\": {\"discovered_interpreter_python\": \"/usr/bin/python\"}, \"failed\": true, \"module_stderr\": \"/bin/sh: 1: /usr/bin/python: not found\\n\", \"module_stdout\": \"\", \"msg\": \"The module failed to execute correctly, you probably need to set the interpreter.\\nSee stdout/stderr for the exact error\", \"rc\": 127}}, \"msg\": \"The following modules failed to execute: ansible.legacy.setup\\n\"}\r\n\r\nPLAY RECAP *********************************************************************\r\ninstance                   : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nWARNING  Retrying execution failure 2 of: ansible-playbook --inventory /home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/inventory --skip-tags molecule-notest,notest /home/sparsick/dev/workspace/ansible-molecule-tags/molecule/tag1/converge.yml\r\nCRITICAL Ansible return code was 2, command was: ['ansible-playbook', '--inventory', '/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/inventory', '--skip-tags', 'molecule-notest,notest', '/home/sparsick/dev/workspace/ansible-molecule-tags/molecule/tag1/converge.yml']\r\nWARNING  An error occurred during the test sequence action: 'converge'. Cleaning up.\r\nINFO     Running tag1 > cleanup\r\nWARNING  Skipping, cleanup playbook not configured.\r\nINFO     Running tag1 > destroy\r\n\r\n```\r\n\r\nOutput of the debug message:\r\n\r\n```\r\nINFO     Running tag1 > converge\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /home/sparsick/.cache/ansible-compat/d3b0ca/collections:/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/collections:/home/sparsick/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/sparsick/dev/workspace/ansible-molecule-tags/.venv/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/filter:/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/plugins/filter:/home/sparsick/dev/workspace/ansible-molecule-tags/plugins/filter:/home/sparsick/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_LIBRARY: /home/sparsick/dev/workspace/ansible-molecule-tags/.venv/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/modules:/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/library:/home/sparsick/dev/workspace/ansible-molecule-tags/library:/home/sparsick/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /home/sparsick/.cache/ansible-compat/d3b0ca/roles:/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/roles:/home/sparsick/dev/workspace:/home/sparsick/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/sparsick/dev/workspace/ansible-molecule-tags/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/sparsick/.cache/molecule/ansible-molecule-tags/tag1\r\nMOLECULE_FILE: /home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /home/sparsick/dev/workspace/ansible-molecule-tags\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/sparsick/dev/workspace/ansible-molecule-tags/molecule/tag1\r\nMOLECULE_SCENARIO_NAME: tag1\r\nMOLECULE_STATE_FILE: /home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/state.yml\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/sparsick/dev/workspace/ansible-molecule-tags/molecule/tag1/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/home/sparsick/.cache/ansible-compat/d3b0ca/collections:/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/collections:/home/sparsick/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/sparsick/dev/workspace/ansible-molecule-tags/.venv/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/filter:/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/plugins/filter:/home/sparsick/dev/workspace/ansible-molecule-tags/plugins/filter:/home/sparsick/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_FORCE_COLOR=1 ANSIBLE_LIBRARY=/home/sparsick/dev/workspace/ansible-molecule-tags/.venv/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/modules:/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/library:/home/sparsick/dev/workspace/ansible-molecule-tags/library:/home/sparsick/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/home/sparsick/.cache/ansible-compat/d3b0ca/roles:/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/roles:/home/sparsick/dev/workspace:/home/sparsick/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/sparsick/dev/workspace/ansible-molecule-tags/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1 MOLECULE_FILE=/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/instance_config.yml MOLECULE_INVENTORY_FILE=/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/home/sparsick/dev/workspace/ansible-molecule-tags MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/sparsick/dev/workspace/ansible-molecule-tags/molecule/tag1 MOLECULE_SCENARIO_NAME=tag1 MOLECULE_STATE_FILE=/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/state.yml MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/sparsick/dev/workspace/ansible-molecule-tags/molecule/tag1/tests\r\n\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nfatal: [instance]: FAILED! => {\"ansible_facts\": {}, \"changed\": false, \"failed_modules\": {\"ansible.legacy.setup\": {\"ansible_facts\": {\"discovered_interpreter_python\": \"/usr/bin/python\"}, \"failed\": true, \"module_stderr\": \"/bin/sh: 1: /usr/bin/python: not found\\n\", \"module_stdout\": \"\", \"msg\": \"The module failed to execute correctly, you probably need to set the interpreter.\\nSee stdout/stderr for the exact error\", \"rc\": 127}}, \"msg\": \"The following modules failed to execute: ansible.legacy.setup\\n\"}\r\n\r\nPLAY RECAP *********************************************************************\r\ninstance                   : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nWARNING  Retrying execution failure 2 of: ansible-playbook --diff --inventory /home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/inventory --skip-tags molecule-notest,notest /home/sparsick/dev/workspace/ansible-molecule-tags/molecule/tag1/converge.yml\r\nCRITICAL Ansible return code was 2, command was: ['ansible-playbook', '--diff', '--inventory', '/home/sparsick/.cache/molecule/ansible-molecule-tags/tag1/inventory', '--skip-tags', 'molecule-notest,notest', '/home/sparsick/dev/workspace/ansible-molecule-tags/molecule/tag1/converge.yml']\r\nWARNING  An error occurred during the test sequence action: 'converge'. Cleaning up.\r\n\r\n```\r\n\r\nI follow some hints from this[ discussion page ](https://github.com/ansible-community/molecule/discussions/2449). \r\n\r\nAll produces the same error message.\r\n\r\nThe hints were like `molecule test -s tag1 -- --tags tag1` or set the tags as System env.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3865/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3865/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3863", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3863/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3863/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3863/events", "html_url": "https://github.com/ansible-community/molecule/pull/3863", "id": 1662626641, "node_id": "PR_kwDOAsPDRs5OCA8u", "number": 3863, "title": "fix link to monorepo under faq", "user": {"login": "ahmedwonolo", "id": 102168038, "node_id": "U_kgDOBhb15g", "avatar_url": "https://avatars.githubusercontent.com/u/102168038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahmedwonolo", "html_url": "https://github.com/ahmedwonolo", "followers_url": "https://api.github.com/users/ahmedwonolo/followers", "following_url": "https://api.github.com/users/ahmedwonolo/following{/other_user}", "gists_url": "https://api.github.com/users/ahmedwonolo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahmedwonolo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahmedwonolo/subscriptions", "organizations_url": "https://api.github.com/users/ahmedwonolo/orgs", "repos_url": "https://api.github.com/users/ahmedwonolo/repos", "events_url": "https://api.github.com/users/ahmedwonolo/events{/privacy}", "received_events_url": "https://api.github.com/users/ahmedwonolo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-11T14:31:40Z", "updated_at": "2023-04-17T06:55:54Z", "closed_at": "2023-04-17T06:55:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3863", "html_url": "https://github.com/ansible-community/molecule/pull/3863", "diff_url": "https://github.com/ansible-community/molecule/pull/3863.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3863.patch", "merged_at": "2023-04-17T06:55:53Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3863/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3844", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3844/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3844/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3844/events", "html_url": "https://github.com/ansible-community/molecule/issues/3844", "id": 1625896527, "node_id": "I_kwDOAsPDRs5g6TZP", "number": 3844, "title": "Broken links in documentation on the \"getting started\" page", "user": {"login": "dtufood-kihen", "id": 51867617, "node_id": "MDQ6VXNlcjUxODY3NjE3", "avatar_url": "https://avatars.githubusercontent.com/u/51867617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtufood-kihen", "html_url": "https://github.com/dtufood-kihen", "followers_url": "https://api.github.com/users/dtufood-kihen/followers", "following_url": "https://api.github.com/users/dtufood-kihen/following{/other_user}", "gists_url": "https://api.github.com/users/dtufood-kihen/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtufood-kihen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtufood-kihen/subscriptions", "organizations_url": "https://api.github.com/users/dtufood-kihen/orgs", "repos_url": "https://api.github.com/users/dtufood-kihen/repos", "events_url": "https://api.github.com/users/dtufood-kihen/events{/privacy}", "received_events_url": "https://api.github.com/users/dtufood-kihen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-15T16:49:19Z", "updated_at": "2023-04-20T08:24:00Z", "closed_at": "2023-04-20T08:24:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm not sure if this is the correct please to report issues with the documentation website.\r\n\r\nBut these links on the [Getting Started Guide](https://molecule.readthedocs.io/en/latest/getting-started/) webpage in the docs is broken in the [Inspecting the molecule.yml](https://molecule.readthedocs.io/en/latest/getting-started/#inspecting-the-moleculeyml) section\r\n\r\n- [dependency](https://molecule.readthedocs.io/configuration/#dependency)\r\n- [driver](https://molecule.readthedocs.io/configuration/#driver)\r\n- [platforms](https://molecule.readthedocs.io/configuration/#platforms)\r\n- [provisioner](https://molecule.readthedocs.io/configuration/#provisioner)\r\n- [verifier](https://molecule.readthedocs.io/configuration/#verifier)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3844/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3844/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3835", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3835/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3835/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3835/events", "html_url": "https://github.com/ansible-community/molecule/issues/3835", "id": 1601675993, "node_id": "I_kwDOAsPDRs5fd6LZ", "number": 3835, "title": "Documentation for verifier is missing and 404 page rendering wrong", "user": {"login": "marcidy", "id": 5845312, "node_id": "MDQ6VXNlcjU4NDUzMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/5845312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcidy", "html_url": "https://github.com/marcidy", "followers_url": "https://api.github.com/users/marcidy/followers", "following_url": "https://api.github.com/users/marcidy/following{/other_user}", "gists_url": "https://api.github.com/users/marcidy/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcidy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcidy/subscriptions", "organizations_url": "https://api.github.com/users/marcidy/orgs", "repos_url": "https://api.github.com/users/marcidy/repos", "events_url": "https://api.github.com/users/marcidy/events{/privacy}", "received_events_url": "https://api.github.com/users/marcidy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-02-27T17:57:51Z", "updated_at": "2023-04-20T08:16:47Z", "closed_at": "2023-04-20T08:16:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using firefox 102.7.0 esr 64bit.  The doc at https://molecule.readthedocs.io/configuration/#verifier is 404, and the 404 page renders really poorly.  Everything is fullscreen width.  Here's the burger menu:\r\n![image](https://user-images.githubusercontent.com/5845312/221644727-562e7ab7-e22e-40fe-bddf-8f8246fcb9ce.png)\r\n\r\nThat's my full screen browser window!", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3835/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3835/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3833", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3833/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3833/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3833/events", "html_url": "https://github.com/ansible-community/molecule/pull/3833", "id": 1598578825, "node_id": "PR_kwDOAsPDRs5KsqL0", "number": 3833, "title": "Fix documentation", "user": {"login": "ziegenberg", "id": 856916, "node_id": "MDQ6VXNlcjg1NjkxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/856916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziegenberg", "html_url": "https://github.com/ziegenberg", "followers_url": "https://api.github.com/users/ziegenberg/followers", "following_url": "https://api.github.com/users/ziegenberg/following{/other_user}", "gists_url": "https://api.github.com/users/ziegenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziegenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziegenberg/subscriptions", "organizations_url": "https://api.github.com/users/ziegenberg/orgs", "repos_url": "https://api.github.com/users/ziegenberg/repos", "events_url": "https://api.github.com/users/ziegenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/ziegenberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-02-24T12:55:08Z", "updated_at": "2023-03-14T14:04:28Z", "closed_at": "2023-03-14T14:03:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3833", "html_url": "https://github.com/ansible-community/molecule/pull/3833", "diff_url": "https://github.com/ansible-community/molecule/pull/3833.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3833.patch", "merged_at": "2023-03-14T14:03:57Z"}, "body": "I fixed some minor documentation errors. Besides that, I also capitalized the navigation entries \"Home\" and \"Using\" and removed the duplicate `pymdownx.superfences` entry in the `markdown_extensions` dict from the `mkdocs.yml` config.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3833/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3824", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3824/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3824/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3824/events", "html_url": "https://github.com/ansible-community/molecule/pull/3824", "id": 1574376803, "node_id": "PR_kwDOAsPDRs5JbzYg", "number": 3824, "title": "Remove embedded dockerfile", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-07T13:53:20Z", "updated_at": "2023-02-07T14:00:19Z", "closed_at": "2023-02-07T14:00:17Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3824", "html_url": "https://github.com/ansible-community/molecule/pull/3824", "diff_url": "https://github.com/ansible-community/molecule/pull/3824.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3824.patch", "merged_at": "2023-02-07T14:00:17Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3824/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3824/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3816", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3816/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3816/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3816/events", "html_url": "https://github.com/ansible-community/molecule/pull/3816", "id": 1551036322, "node_id": "PR_kwDOAsPDRs5IOSGx", "number": 3816, "title": "Better indentation in verify template", "user": {"login": "muellerbe", "id": 1748373, "node_id": "MDQ6VXNlcjE3NDgzNzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1748373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muellerbe", "html_url": "https://github.com/muellerbe", "followers_url": "https://api.github.com/users/muellerbe/followers", "following_url": "https://api.github.com/users/muellerbe/following{/other_user}", "gists_url": "https://api.github.com/users/muellerbe/gists{/gist_id}", "starred_url": "https://api.github.com/users/muellerbe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muellerbe/subscriptions", "organizations_url": "https://api.github.com/users/muellerbe/orgs", "repos_url": "https://api.github.com/users/muellerbe/repos", "events_url": "https://api.github.com/users/muellerbe/events{/privacy}", "received_events_url": "https://api.github.com/users/muellerbe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-20T15:23:44Z", "updated_at": "2023-02-07T16:09:34Z", "closed_at": "2023-02-07T16:09:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3816", "html_url": "https://github.com/ansible-community/molecule/pull/3816", "diff_url": "https://github.com/ansible-community/molecule/pull/3816.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3816.patch", "merged_at": "2023-02-07T16:09:23Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3816/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3816/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3813", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3813/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3813/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3813/events", "html_url": "https://github.com/ansible-community/molecule/pull/3813", "id": 1535416692, "node_id": "PR_kwDOAsPDRs5Hfe6z", "number": 3813, "title": "Upgrade linters", "user": {"login": "pre-commit-ci[bot]", "id": 66853113, "node_id": "MDM6Qm90NjY4NTMxMTM=", "avatar_url": "https://avatars.githubusercontent.com/in/68672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pre-commit-ci%5Bbot%5D", "html_url": "https://github.com/apps/pre-commit-ci", "followers_url": "https://api.github.com/users/pre-commit-ci%5Bbot%5D/followers", "following_url": "https://api.github.com/users/pre-commit-ci%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/pre-commit-ci%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/pre-commit-ci%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pre-commit-ci%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/pre-commit-ci%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/pre-commit-ci%5Bbot%5D/repos", "events_url": "https://api.github.com/users/pre-commit-ci%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/pre-commit-ci%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-16T19:51:15Z", "updated_at": "2023-02-07T11:39:25Z", "closed_at": "2023-02-07T11:35:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3813", "html_url": "https://github.com/ansible-community/molecule/pull/3813", "diff_url": "https://github.com/ansible-community/molecule/pull/3813.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3813.patch", "merged_at": "2023-02-07T11:35:54Z"}, "body": "<!--pre-commit.ci start-->\nupdates:\n- [github.com/adrienverge/yamllint.git: v1.28.0 \u2192 v1.29.0](https://github.com/adrienverge/yamllint.git/compare/v1.28.0...v1.29.0)\n- [github.com/PyCQA/pylint: v2.15.10 \u2192 v2.16.0b0](https://github.com/PyCQA/pylint/compare/v2.15.10...v2.16.0b0)\n<!--pre-commit.ci end-->", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3813/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3813/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3812", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3812/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3812/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3812/events", "html_url": "https://github.com/ansible-community/molecule/pull/3812", "id": 1534976263, "node_id": "PR_kwDOAsPDRs5Hd_8Y", "number": 3812, "title": "Documentation: Improve group names", "user": {"login": "ltog", "id": 4726277, "node_id": "MDQ6VXNlcjQ3MjYyNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/4726277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ltog", "html_url": "https://github.com/ltog", "followers_url": "https://api.github.com/users/ltog/followers", "following_url": "https://api.github.com/users/ltog/following{/other_user}", "gists_url": "https://api.github.com/users/ltog/gists{/gist_id}", "starred_url": "https://api.github.com/users/ltog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ltog/subscriptions", "organizations_url": "https://api.github.com/users/ltog/orgs", "repos_url": "https://api.github.com/users/ltog/repos", "events_url": "https://api.github.com/users/ltog/events{/privacy}", "received_events_url": "https://api.github.com/users/ltog/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-16T13:52:58Z", "updated_at": "2023-02-07T16:16:54Z", "closed_at": "2023-02-07T16:16:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3812", "html_url": "https://github.com/ansible-community/molecule/pull/3812", "diff_url": "https://github.com/ansible-community/molecule/pull/3812.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3812.patch", "merged_at": "2023-02-07T16:16:53Z"}, "body": "This PR improves the readability of the documentation regarding two aspects:\r\n\r\n1. Make it more clear that below `group_vars`, you have to put names of groups.\r\n2. Show that `all` can be used for variables that concern all groups. ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3812/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3811", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3811/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3811/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3811/events", "html_url": "https://github.com/ansible-community/molecule/pull/3811", "id": 1534522215, "node_id": "PR_kwDOAsPDRs5Hcdlf", "number": 3811, "title": "Replace sphinx documentation with mkdocs", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-16T08:44:45Z", "updated_at": "2023-02-07T15:34:48Z", "closed_at": "2023-02-07T15:34:46Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3811", "html_url": "https://github.com/ansible-community/molecule/pull/3811", "diff_url": "https://github.com/ansible-community/molecule/pull/3811.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3811.patch", "merged_at": "2023-02-07T15:34:46Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3811/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3805", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3805/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3805/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3805/events", "html_url": "https://github.com/ansible-community/molecule/pull/3805", "id": 1524568498, "node_id": "PR_kwDOAsPDRs5G7Aoe", "number": 3805, "title": "Document molecule-plugins package", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-08T16:01:18Z", "updated_at": "2023-01-11T11:47:13Z", "closed_at": "2023-01-11T11:47:12Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3805", "html_url": "https://github.com/ansible-community/molecule/pull/3805", "diff_url": "https://github.com/ansible-community/molecule/pull/3805.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3805.patch", "merged_at": "2023-01-11T11:47:12Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3805/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3805/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3800", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3800/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3800/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3800/events", "html_url": "https://github.com/ansible-community/molecule/pull/3800", "id": 1519713204, "node_id": "PR_kwDOAsPDRs5GqkVL", "number": 3800, "title": "Update test dependencies", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-04T23:11:52Z", "updated_at": "2023-01-05T11:16:29Z", "closed_at": "2023-01-05T11:16:29Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3800", "html_url": "https://github.com/ansible-community/molecule/pull/3800", "diff_url": "https://github.com/ansible-community/molecule/pull/3800.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3800.patch", "merged_at": "2023-01-05T11:16:29Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3800/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3800/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3798", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3798/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3798/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3798/events", "html_url": "https://github.com/ansible-community/molecule/pull/3798", "id": 1519621902, "node_id": "PR_kwDOAsPDRs5GqQBU", "number": 3798, "title": "Fix rpm building", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-04T21:49:00Z", "updated_at": "2023-01-04T22:27:13Z", "closed_at": "2023-01-04T22:27:12Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3798", "html_url": "https://github.com/ansible-community/molecule/pull/3798", "diff_url": "https://github.com/ansible-community/molecule/pull/3798.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3798.patch", "merged_at": "2023-01-04T22:27:12Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3798/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3797", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3797/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3797/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3797/events", "html_url": "https://github.com/ansible-community/molecule/pull/3797", "id": 1519494439, "node_id": "PR_kwDOAsPDRs5Gpz9Y", "number": 3797, "title": "Bump test dependencies", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-04T19:52:27Z", "updated_at": "2023-01-04T21:35:16Z", "closed_at": "2023-01-04T21:35:16Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3797", "html_url": "https://github.com/ansible-community/molecule/pull/3797", "diff_url": "https://github.com/ansible-community/molecule/pull/3797.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3797.patch", "merged_at": "2023-01-04T21:35:16Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3797/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3796", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3796/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3796/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3796/events", "html_url": "https://github.com/ansible-community/molecule/pull/3796", "id": 1517256406, "node_id": "PR_kwDOAsPDRs5GiJ9c", "number": 3796, "title": "Fixed typo in `docs/ci.rst`", "user": {"login": "mitchellroe", "id": 51406825, "node_id": "MDQ6VXNlcjUxNDA2ODI1", "avatar_url": "https://avatars.githubusercontent.com/u/51406825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mitchellroe", "html_url": "https://github.com/mitchellroe", "followers_url": "https://api.github.com/users/mitchellroe/followers", "following_url": "https://api.github.com/users/mitchellroe/following{/other_user}", "gists_url": "https://api.github.com/users/mitchellroe/gists{/gist_id}", "starred_url": "https://api.github.com/users/mitchellroe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mitchellroe/subscriptions", "organizations_url": "https://api.github.com/users/mitchellroe/orgs", "repos_url": "https://api.github.com/users/mitchellroe/repos", "events_url": "https://api.github.com/users/mitchellroe/events{/privacy}", "received_events_url": "https://api.github.com/users/mitchellroe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-03T11:22:56Z", "updated_at": "2023-01-04T21:44:03Z", "closed_at": "2023-01-04T21:44:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3796", "html_url": "https://github.com/ansible-community/molecule/pull/3796", "diff_url": "https://github.com/ansible-community/molecule/pull/3796.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3796.patch", "merged_at": "2023-01-04T21:44:03Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3796/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3796/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3795", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3795/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3795/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3795/events", "html_url": "https://github.com/ansible-community/molecule/pull/3795", "id": 1513779480, "node_id": "PR_kwDOAsPDRs5GWc8-", "number": 3795, "title": "Add support for custom driver name", "user": {"login": "gciavarrini", "id": 15085664, "node_id": "MDQ6VXNlcjE1MDg1NjY0", "avatar_url": "https://avatars.githubusercontent.com/u/15085664?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gciavarrini", "html_url": "https://github.com/gciavarrini", "followers_url": "https://api.github.com/users/gciavarrini/followers", "following_url": "https://api.github.com/users/gciavarrini/following{/other_user}", "gists_url": "https://api.github.com/users/gciavarrini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gciavarrini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gciavarrini/subscriptions", "organizations_url": "https://api.github.com/users/gciavarrini/orgs", "repos_url": "https://api.github.com/users/gciavarrini/repos", "events_url": "https://api.github.com/users/gciavarrini/events{/privacy}", "received_events_url": "https://api.github.com/users/gciavarrini/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-29T14:17:21Z", "updated_at": "2023-04-04T06:53:28Z", "closed_at": "2023-01-11T11:50:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3795", "html_url": "https://github.com/ansible-community/molecule/pull/3795", "diff_url": "https://github.com/ansible-community/molecule/pull/3795.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3795.patch", "merged_at": "2023-01-11T11:50:48Z"}, "body": "This PR aims to add support for using custom driver name.\r\n\r\nThe proposed solution patches the `molecule.json` schema to allow driver names starting with `molecule_`, `molecule-`, `custom_`, or `custom-`.\r\n\r\nThis PR adds tests for the proposed feature as well.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3795/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3795/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3783", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3783/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3783/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3783/events", "html_url": "https://github.com/ansible-community/molecule/issues/3783", "id": 1497043330, "node_id": "I_kwDOAsPDRs5ZOxGC", "number": 3783, "title": "Impossible to use a custom driver", "user": {"login": "gciavarrini", "id": 15085664, "node_id": "MDQ6VXNlcjE1MDg1NjY0", "avatar_url": "https://avatars.githubusercontent.com/u/15085664?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gciavarrini", "html_url": "https://github.com/gciavarrini", "followers_url": "https://api.github.com/users/gciavarrini/followers", "following_url": "https://api.github.com/users/gciavarrini/following{/other_user}", "gists_url": "https://api.github.com/users/gciavarrini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gciavarrini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gciavarrini/subscriptions", "organizations_url": "https://api.github.com/users/gciavarrini/orgs", "repos_url": "https://api.github.com/users/gciavarrini/repos", "events_url": "https://api.github.com/users/gciavarrini/events{/privacy}", "received_events_url": "https://api.github.com/users/gciavarrini/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-14T17:00:45Z", "updated_at": "2023-02-17T08:13:12Z", "closed_at": "2023-02-17T08:13:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n```shell\r\nansible [core 2.12.10]\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/gloria/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/gloria/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.10.8 (main, Nov 14 2022, 00:00:00) [GCC 12.2.1 20220819 (Red Hat 12.2.1-2)]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.0 using python 3.10 \r\n    ansible:2.12.10\r\n    delegated:4.0.0 from molecule\r\n    custom-driver-name:0.0.4 from custom_driver_name\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWe are developing a custom molecule driver.\r\nUnfortunately, at the moment, it seems no possible to use it.\r\n\r\nThe reasons that pushed us to create a custom driver are:\r\n* It is possible to import a driver in multiple project (no code duplication)\r\n* The delegated driver needs to be re-implemented every time\r\n* If the custom driver needs to be modified, all the modifications will be available in all the projects that use it.\r\n\r\n# Actual Behaviour\r\n\r\nFirst, we install the custom driver: \r\n\r\n`pip install custom_driver_name`\r\n\r\nThen, we check that it is listed among the molecule drivers\r\n\r\n```bash\r\n>> molecule drivers\r\n\u2576\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \r\ndelegated \r\ncustom_driver_name                                                                                                                                                                                                                                                                                                                   \r\n```\r\n\r\nBut then, when we try to use it from `molecule <command> -d custom_driver_name` the following error is shown:\r\n\r\n`Error: Invalid value for '--driver-name' / '-d': 'custom_driver_name is not one of 'delegated', 'docker', 'podman'.`\r\n\r\nThis is error is due to a [validation fail](https://github.com/ansible-community/molecule/blob/b457d5f1c531fe27e7c2d775fc37b4d31a862cdc/src/molecule/config.py#L458)\r\n\r\n# Possible solution\r\nA possible solution is to define a prefix (e.g. `custom-`) or a set of prefix (e.g. `custom-`, `molecule-`, ... ) that make possible the validation. This will make the validation more flexible while maintaining the guarantee that the user is not misspelling standard driver names. \r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3783/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3783/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3778", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3778/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3778/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3778/events", "html_url": "https://github.com/ansible-community/molecule/pull/3778", "id": 1486542733, "node_id": "PR_kwDOAsPDRs5E5PUy", "number": 3778, "title": "Reorder heading and reformat badges", "user": {"login": "mamercad", "id": 6192266, "node_id": "MDQ6VXNlcjYxOTIyNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6192266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mamercad", "html_url": "https://github.com/mamercad", "followers_url": "https://api.github.com/users/mamercad/followers", "following_url": "https://api.github.com/users/mamercad/following{/other_user}", "gists_url": "https://api.github.com/users/mamercad/gists{/gist_id}", "starred_url": "https://api.github.com/users/mamercad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mamercad/subscriptions", "organizations_url": "https://api.github.com/users/mamercad/orgs", "repos_url": "https://api.github.com/users/mamercad/repos", "events_url": "https://api.github.com/users/mamercad/events{/privacy}", "received_events_url": "https://api.github.com/users/mamercad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-09T10:56:52Z", "updated_at": "2023-01-04T22:21:32Z", "closed_at": "2023-01-04T22:16:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3778", "html_url": "https://github.com/ansible-community/molecule/pull/3778", "diff_url": "https://github.com/ansible-community/molecule/pull/3778.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3778.patch", "merged_at": "2023-01-04T22:16:00Z"}, "body": "Place the heading first ([MD041](https://github.com/DavidAnson/markdownlint/blob/main/doc/Rules.md#md041---first-line-in-a-file-should-be-a-top-level-heading)) and put the badges on a single line (so there's not such a large empty portion at the top of the `README.md`).\r\n\r\n<img width=\"922\" alt=\"image\" src=\"https://user-images.githubusercontent.com/6192266/210152577-9656772a-c5aa-4b6c-a1ec-732018159b61.png\">\r\n\r\n(Note the large amount of empty space)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3778/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3771", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3771/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3771/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3771/events", "html_url": "https://github.com/ansible-community/molecule/pull/3771", "id": 1477330781, "node_id": "PR_kwDOAsPDRs5EYpPM", "number": 3771, "title": "fix/v5", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-05T20:02:42Z", "updated_at": "2023-01-04T22:18:26Z", "closed_at": "2023-01-04T22:18:23Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3771", "html_url": "https://github.com/ansible-community/molecule/pull/3771", "diff_url": "https://github.com/ansible-community/molecule/pull/3771.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3771.patch", "merged_at": null}, "body": "- Remove support for python3.8\n- Bump test dependencies\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3771/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3771/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3765", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3765/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3765/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3765/events", "html_url": "https://github.com/ansible-community/molecule/pull/3765", "id": 1472386846, "node_id": "PR_kwDOAsPDRs5EHeCv", "number": 3765, "title": "Extend schema validation", "user": {"login": "zhan9san", "id": 32819197, "node_id": "MDQ6VXNlcjMyODE5MTk3", "avatar_url": "https://avatars.githubusercontent.com/u/32819197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhan9san", "html_url": "https://github.com/zhan9san", "followers_url": "https://api.github.com/users/zhan9san/followers", "following_url": "https://api.github.com/users/zhan9san/following{/other_user}", "gists_url": "https://api.github.com/users/zhan9san/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhan9san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhan9san/subscriptions", "organizations_url": "https://api.github.com/users/zhan9san/orgs", "repos_url": "https://api.github.com/users/zhan9san/repos", "events_url": "https://api.github.com/users/zhan9san/events{/privacy}", "received_events_url": "https://api.github.com/users/zhan9san/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2022-12-02T06:34:58Z", "updated_at": "2023-04-24T04:56:42Z", "closed_at": "2023-04-19T17:30:31Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3765", "html_url": "https://github.com/ansible-community/molecule/pull/3765", "diff_url": "https://github.com/ansible-community/molecule/pull/3765.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3765.patch", "merged_at": "2023-04-19T17:30:31Z"}, "body": "Signed-off-by: Jack Zhang <jack4zhang@gmail.com>\r\n\r\nWith this PR, the schema can be defined in driver itself. And it make some private driver work as well.\r\n\r\nRelated to #3689 and https://github.com/ansible-community/molecule/pull/3638#issuecomment-1333523469\r\n\r\n@dmlb2000 @ssbarnea @meffie\r\n\r\nCould you help review it?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3765/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3765/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3764", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3764/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3764/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3764/events", "html_url": "https://github.com/ansible-community/molecule/pull/3764", "id": 1472142075, "node_id": "PR_kwDOAsPDRs5EGqCN", "number": 3764, "title": "Fix running tox:dockerfile with docker secretservice enabled", "user": {"login": "zeitounator", "id": 176776, "node_id": "MDQ6VXNlcjE3Njc3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/176776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zeitounator", "html_url": "https://github.com/zeitounator", "followers_url": "https://api.github.com/users/zeitounator/followers", "following_url": "https://api.github.com/users/zeitounator/following{/other_user}", "gists_url": "https://api.github.com/users/zeitounator/gists{/gist_id}", "starred_url": "https://api.github.com/users/zeitounator/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zeitounator/subscriptions", "organizations_url": "https://api.github.com/users/zeitounator/orgs", "repos_url": "https://api.github.com/users/zeitounator/repos", "events_url": "https://api.github.com/users/zeitounator/events{/privacy}", "received_events_url": "https://api.github.com/users/zeitounator/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-02T00:32:18Z", "updated_at": "2022-12-02T00:58:46Z", "closed_at": "2022-12-02T00:58:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3764", "html_url": "https://github.com/ansible-community/molecule/pull/3764", "diff_url": "https://github.com/ansible-community/molecule/pull/3764.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3764.patch", "merged_at": "2022-12-02T00:58:46Z"}, "body": "This PR fixes issue #3758 which was later migrated to discussion #3759.\r\n\r\nAs a short summary of the posts above.\r\n\r\nThe problem happens when you have configured `secretservice` as your `credstore` in your docker configfile (e.g. `~/.docker.config.json`)\r\n\r\nrunning `tox -e dockerfile` launches the playbook `src/molecule/data/validate-dockerfile.yml` which then fails at image build taks with error \r\n> ansible_collections.community.docker.plugins.module_utils._api.credentials.errors.StoreError: Credentials store docker-credential-secretservice exited with \"Cannot autolaunch D-Bus without X11 $DISPLAY\"\r\n\r\nPassing the `DISPLAY` environment variable to tox fixes the issue.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3764/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3758", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3758/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3758/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3758/events", "html_url": "https://github.com/ansible-community/molecule/issues/3758", "id": 1468366476, "node_id": "I_kwDOAsPDRs5XhX6M", "number": 3758, "title": "\"Cannot autolaunch D-Bus without X11 $DISPLAY\" while running tox test on dockerfile", "user": {"login": "zeitounator", "id": 176776, "node_id": "MDQ6VXNlcjE3Njc3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/176776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zeitounator", "html_url": "https://github.com/zeitounator", "followers_url": "https://api.github.com/users/zeitounator/followers", "following_url": "https://api.github.com/users/zeitounator/following{/other_user}", "gists_url": "https://api.github.com/users/zeitounator/gists{/gist_id}", "starred_url": "https://api.github.com/users/zeitounator/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zeitounator/subscriptions", "organizations_url": "https://api.github.com/users/zeitounator/orgs", "repos_url": "https://api.github.com/users/zeitounator/repos", "events_url": "https://api.github.com/users/zeitounator/events{/privacy}", "received_events_url": "https://api.github.com/users/zeitounator/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-29T16:38:40Z", "updated_at": "2022-11-29T17:16:56Z", "closed_at": "2022-11-29T17:16:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible [core 2.14.0]\r\n  config file = None\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/user/Sources/molecule/.venv/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/user/Sources/molecule/.venv/bin/ansible\r\n  python version = 3.9.5 (default, Nov 23 2021, 15:27:38) [GCC 9.3.0] (/home/user/Sources/molecule/.venv/bin/python)\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nINFO     Found config file /home/user/Sources/molecule/.config/molecule/config.yml\r\nmolecule 4.0.4.dev28 using python 3.9 \r\n    ansible:2.14.0\r\n    delegated:4.0.4.dev28 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip (editable inside a venv)\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\ntox as configured in the molecule source tree\r\n\r\n# Desired Behavior\r\n\r\nRunning `tox` should run all tests and succeed (as long as current branch is ok). This includes dockerfile tests\r\n\r\n# Actual Behaviour\r\n\r\nAll of the below happens by simply running `tox`\r\n\r\nI have the following configuration for my docker client (i.e. only relevant part) in `~/.docker/config.json`\r\n```json\r\n{\r\n        \"auths\": {},\r\n        \"credsStore\": \"secretservice\"\r\n}\r\n```\r\nThis instruct docker to store the credentials in my local linux keystore whenever I issue a `docker login` rather than in clear text inside the json file.\r\n\r\nFor a reason I did not yet understand and although none of the relevant builds require credentials for a any docker registry while running tox dockerfile tests, all image builds fail with the following error message (abridged) regardless of the origin of their base image.\r\n> TASK [Test Dockerfile template] ***********************************************************************<br/>\r\n> An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible_collections.community.docker.plugins.module_utils._api.credentials.errors.StoreError: Credentials store docker-credential-secretservice exited with \"Cannot autolaunch D-Bus without X11 $DISPLAY\".\r\n\r\n\r\nThe workaround solution is actually trivial but I have no idea at this point if it is acceptable. I could fix by just adding a line to `tox.ini`, i.e.:\r\n```ini\r\n# do not put * in passenv as it may break builds do to reduced isolation\r\npassenv =\r\n    DISPLAY\r\n    [... rest of existing env in file ...]\r\n```\r\nLet me know if this would be an acceptable change and also if you want a PR for this. Else I can give any other needed information if you need more details.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3758/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3758/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3750", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3750/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3750/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3750/events", "html_url": "https://github.com/ansible-community/molecule/pull/3750", "id": 1463505513, "node_id": "PR_kwDOAsPDRs5Dp62b", "number": 3750, "title": "Add some FQCNs", "user": {"login": "muellerbe", "id": 1748373, "node_id": "MDQ6VXNlcjE3NDgzNzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1748373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muellerbe", "html_url": "https://github.com/muellerbe", "followers_url": "https://api.github.com/users/muellerbe/followers", "following_url": "https://api.github.com/users/muellerbe/following{/other_user}", "gists_url": "https://api.github.com/users/muellerbe/gists{/gist_id}", "starred_url": "https://api.github.com/users/muellerbe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muellerbe/subscriptions", "organizations_url": "https://api.github.com/users/muellerbe/orgs", "repos_url": "https://api.github.com/users/muellerbe/repos", "events_url": "https://api.github.com/users/muellerbe/events{/privacy}", "received_events_url": "https://api.github.com/users/muellerbe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-24T15:22:58Z", "updated_at": "2022-11-25T07:35:46Z", "closed_at": "2022-11-24T15:53:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3750", "html_url": "https://github.com/ansible-community/molecule/pull/3750", "diff_url": "https://github.com/ansible-community/molecule/pull/3750.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3750.patch", "merged_at": "2022-11-24T15:53:50Z"}, "body": "Fixes: #3481\r\n\r\nI found some more places without FQCN", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3750/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3733", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3733/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3733/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3733/events", "html_url": "https://github.com/ansible-community/molecule/issues/3733", "id": 1444542613, "node_id": "I_kwDOAsPDRs5WGfiV", "number": 3733, "title": "Environment variables in the `image` param to a platform are not properly interpolated while creating the instance container when `pre_build_image` is `false`", "user": {"login": "natefoo", "id": 286969, "node_id": "MDQ6VXNlcjI4Njk2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/natefoo", "html_url": "https://github.com/natefoo", "followers_url": "https://api.github.com/users/natefoo/followers", "following_url": "https://api.github.com/users/natefoo/following{/other_user}", "gists_url": "https://api.github.com/users/natefoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/natefoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/natefoo/subscriptions", "organizations_url": "https://api.github.com/users/natefoo/orgs", "repos_url": "https://api.github.com/users/natefoo/repos", "events_url": "https://api.github.com/users/natefoo/events{/privacy}", "received_events_url": "https://api.github.com/users/natefoo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-10T20:49:19Z", "updated_at": "2023-01-05T17:06:08Z", "closed_at": "2022-11-11T16:44:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.14.0]\r\n  config file = None\r\n  configured module search path = ['/home/nate/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/nate/.virtualenvs/moleculedev/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/nate/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/nate/.virtualenvs/moleculedev/bin/ansible\r\n  python version = 3.10.6 (main, Nov  2 2022, 18:53:38) [GCC 11.3.0] (/home/nate/.virtualenvs/moleculedev/bin/python)\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.4.dev16 using python 3.10\r\n    ansible:2.14.0\r\n    delegated:4.0.4.dev16 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip (`pip install -e '.[docker]'`)\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nI'd like to use an environment variable in the `image` param to a platform (using the docker driver) for a Github action matrix to test on different images. Jeff Geerling does this in many roles, for example geerlingguy.postgresql [workflow](https://github.com/geerlingguy/ansible-role-postgresql/blob/master/.github/workflows/ci.yml) and [molecule.yml](https://github.com/geerlingguy/ansible-role-postgresql/blob/master/molecule/default/molecule.yml).\r\n\r\nI prefer to build the image at runtime (`pre_build_image: false`) rather than prebuilding as Jeff does.\r\n\r\n# Actual Behaviour\r\n\r\nEnvironment variables in the `image` param to a platform are not properly interpolated while creating the instance container when `pre_build_image` is `false`.\r\n\r\n**`molecule.yml`**:\r\n```yaml\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nplatforms:\r\n  - name: molecule-test\r\n    image: ${FROM_IMAGE:-centos:7}\r\n    command: \"\"\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:rw\r\n    privileged: true\r\n    dockerfile: Dockerfile.j2\r\n    pre_build_image: false\r\nprovisioner:\r\n  name: ansible\r\n  log: true\r\nverifier:\r\n  name: ansible\r\n```\r\n\r\n**`Dockerfile.j2`**:\r\n```dockerfile\r\nFROM {{ item.image }}\r\nCMD [\"/usr/lib/systemd/systemd\"]\r\n```\r\n\r\n**`molecule create`**:\r\n```console\r\n$ ANSIBLE_STDOUT_CALLBACK=debug molecule --debug create\r\nANSIBLE_STDOUT_CALLBACK=debug molecule --debug create\r\nDEBUG    Validating schema /home/nate/ansible/molecule-test/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, create, prepare\r\nINFO     Performing prerun with role_name_check=0...\r\nINFO     Set ANSIBLE_LIBRARY=/home/nate/.cache/ansible-compat/435e6d/modules:/home/nate/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/nate/.cache/ansible-compat/435e6d/collections:/home/nate/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/nate/.cache/ansible-compat/435e6d/roles:/home/nate/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nINFO     Sanity checks: 'docker'\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /home/nate/.cache/ansible-compat/435e6d/collections:/home/nate/.cache/molecule/molecule-test/default/collections:/home/nate/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /home/nate/.cache/molecule/molecule-test/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/nate/ansible/molecule/src/molecule/provisioner/ansible/plugins/filter:/home/nate/.cache/molecule/molecule-test/default/plugins/filter:/home/nate/ansible/molecule-test/plugins/filter:/home/nate/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_LIBRARY: /home/nate/ansible/molecule/src/molecule/provisioner/ansible/plugins/modules:/home/nate/.cache/molecule/molecule-test/default/library:/home/nate/ansible/molecule-test/library:/home/nate/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /home/nate/.cache/ansible-compat/435e6d/roles:/home/nate/.cache/molecule/molecule-test/default/roles:/home/nate/ansible:/home/nate/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nANSIBLE_STDOUT_CALLBACK: debug\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/nate/ansible/molecule-test/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/nate/.cache/molecule/molecule-test/default\r\nMOLECULE_FILE: /home/nate/.cache/molecule/molecule-test/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/nate/.cache/molecule/molecule-test/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/nate/.cache/molecule/molecule-test/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /home/nate/ansible/molecule-test\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/nate/ansible/molecule-test/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/nate/.cache/molecule/molecule-test/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/nate/ansible/molecule-test/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/home/nate/.cache/ansible-compat/435e6d/collections:/home/nate/.cache/molecule/molecule-test/default/collections:/home/nate/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/home/nate/.cache/molecule/molecule-test/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/nate/ansible/molecule/src/molecule/provisioner/ansible/plugins/filter:/home/nate/.cache/molecule/molecule-test/default/plugins/filter:/home/nate/ansible/molecule-test/plugins/filter:/home/nate/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_FORCE_COLOR=1 ANSIBLE_LIBRARY=/home/nate/ansible/molecule/src/molecule/provisioner/ansible/plugins/modules:/home/nate/.cache/molecule/molecule-test/default/library:/home/nate/ansible/molecule-test/library:/home/nate/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/home/nate/.cache/ansible-compat/435e6d/roles:/home/nate/.cache/molecule/molecule-test/default/roles:/home/nate/ansible:/home/nate/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles ANSIBLE_STDOUT_CALLBACK=debug MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/nate/ansible/molecule-test/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/nate/.cache/molecule/molecule-test/default MOLECULE_FILE=/home/nate/.cache/molecule/molecule-test/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/nate/.cache/molecule/molecule-test/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/nate/.cache/molecule/molecule-test/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/home/nate/ansible/molecule-test MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/nate/ansible/molecule-test/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/nate/.cache/molecule/molecule-test/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/home/nate/ansible/molecule-test/molecule/default/tests\r\n\r\n\r\nPLAY [Create] ******************************************************************\r\n\r\nTASK [Set async_dir for HOME env] **********************************************\r\nok: [localhost]\r\n\r\nTASK [Log into a Docker registry] **********************************************\r\nskipping: [localhost] => (item=None)\r\nskipping: [localhost]\r\n\r\nTASK [Check presence of custom Dockerfiles] ************************************\r\nok: [localhost] => (item={'command': '', 'dockerfile': 'Dockerfile.j2', 'image': 'centos:7', 'name': 'molecule-test', 'pre_build_image': False, 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw']})\r\n\r\nTASK [Create Dockerfiles from image names] *************************************\r\n--- before\r\n+++ after: /home/nate/.ansible/tmp/ansible-local-688129puqlvf0v/tmpalentp1a/Dockerfile.j2\r\n@@ -0,0 +1,2 @@\r\n+FROM centos:7\r\n+CMD [\"/usr/lib/systemd/systemd\"]\r\n\r\nchanged: [localhost] => (item={'command': '', 'dockerfile': 'Dockerfile.j2', 'image': 'centos:7', 'name': 'molecule-test', 'pre_build_image': False, 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw']})\r\n\r\nTASK [Synchronization the context] *********************************************\r\n.d..t...... ./\r\n>f+++++++++ Dockerfile.j2\r\n>f.st...... molecule.yml\r\nchanged: [localhost] => (item={'command': '', 'dockerfile': 'Dockerfile.j2', 'image': 'centos:7', 'name': 'molecule-test', 'pre_build_image': False, 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw']})\r\n\r\nTASK [Discover local Docker images] ********************************************\r\nok: [localhost] => (item={'diff': [{'before': '', 'after_header': '/home/nate/.ansible/tmp/ansible-local-688129puqlvf0v/tmpalentp1a/Dockerfile.j2', 'after': 'FROM centos:7\\nCMD [\"/usr/lib/systemd/systemd\"]\\n'}], 'dest': '/home/nate/.cache/molecule/molecule-test/default/Dockerfile_centos_7', 'src': '/home/nate/.ansible/tmp/ansible-tmp-1668112848.056438-688180-166340275842266/source', 'md5sum': '742914a9cf3a9bf93f36ce7686525f2d', 'checksum': '024826b29182fd8e68f1577cac33f8c39710295c', 'changed': True, 'uid': 1000, 'gid': 1000, 'owner': 'nate', 'group': 'nate', 'mode': '0600', 'state': 'file', 'size': 47, 'invocation': {'module_args': {'src': '/home/nate/.ansible/tmp/ansible-tmp-1668112848.056438-688180-166340275842266/source', 'dest': '/home/nate/.cache/molecule/molecule-test/default/Dockerfile_centos_7', 'mode': '0600', 'follow': False, '_original_basename': 'Dockerfile.j2', 'checksum': '024826b29182fd8e68f1577cac33f8c39710295c', 'backup': False, 'force': True, 'unsafe_writes': False, 'content': None, 'validate': None, 'directory_mode': None, 'remote_src': None, 'local_follow': None, 'owner': None, 'group': None, 'seuser': None, 'serole': None, 'selevel': None, 'setype': None, 'attributes': None}}, 'failed': False, 'item': {'command': '', 'dockerfile': 'Dockerfile.j2', 'image': 'centos:7', 'name': 'molecule-test', 'pre_build_image': False, 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw']}, 'ansible_loop_var': 'item', 'i': 0, 'ansible_index_var': 'i'})\r\n\r\nTASK [Build an Ansible compatible image (new)] *********************************\r\nchanged: [localhost] => (item=molecule_local/centos:7)\r\n\r\nTASK [Create docker network(s)] ************************************************\r\nskipping: [localhost]\r\n\r\nTASK [Determine the CMD directives] ********************************************\r\nok: [localhost] => (item={'name': 'molecule-test', 'image': '${FROM_IMAGE:-centos:7}', 'command': '', 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw'], 'privileged': True, 'dockerfile': 'Dockerfile.j2', 'pre_build_image': False})\r\n\r\nTASK [Create molecule instance(s)] *********************************************\r\nchanged: [localhost] => (item=molecule-test)\r\n\r\nTASK [Wait for instance(s) creation to complete] *******************************\r\nfailed: [localhost] (item={'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '805836826211.688378', 'results_file': '/home/nate/.ansible_async/805836826211.688378', 'changed': True, 'item': {'name': 'molecule-test', 'image': '${FROM_IMAGE:-centos:7}', 'command': '', 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw'], 'privileged': True, 'dockerfile': 'Dockerfile.j2', 'pre_build_image': False}, 'ansible_loop_var': 'item'}) => {\r\n    \"ansible_job_id\": \"805836826211.688378\",\r\n    \"ansible_loop_var\": \"item\",\r\n    \"attempts\": 2,\r\n    \"changed\": false,\r\n    \"finished\": 1,\r\n    \"item\": {\r\n        \"ansible_job_id\": \"805836826211.688378\",\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": true,\r\n        \"failed\": 0,\r\n        \"finished\": 0,\r\n        \"item\": {\r\n            \"command\": \"\",\r\n            \"dockerfile\": \"Dockerfile.j2\",\r\n            \"image\": \"${FROM_IMAGE:-centos:7}\",\r\n            \"name\": \"molecule-test\",\r\n            \"pre_build_image\": false,\r\n            \"privileged\": true,\r\n            \"volumes\": [\r\n                \"/sys/fs/cgroup:/sys/fs/cgroup:rw\"\r\n            ]\r\n        },\r\n        \"results_file\": \"/home/nate/.ansible_async/805836826211.688378\",\r\n        \"started\": 1\r\n    },\r\n    \"results_file\": \"/home/nate/.ansible_async/805836826211.688378\",\r\n    \"started\": 1\r\n}\r\n\r\nMSG:\r\n\r\nError pulling image molecule_local/${FROM_IMAGE:-centos:7} - 400 Client Error for http+docker://localhost/v1.41/images/create?tag=7%7D&fromImage=molecule_local%2F%24%7BFROM_IMAGE: Bad Request (\"invalid reference format: repository name must be lowercase\")\r\nFAILED - RETRYING: [localhost]: Wait for instance(s) creation to complete (300 retries left).\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=8    changed=4    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0\r\n\r\nWARNING  Retrying execution failure 2 of: ansible-playbook --diff --inventory /home/nate/.cache/molecule/molecule-test/default/inventory --skip-tags molecule-notest,notest /home/nate/.virtualenvs/moleculedev/lib/python3.10/site-packages/molecule_docker/playbooks/create.yml\r\nCRITICAL Ansible return code was 2, command was: ['ansible-playbook', '--diff', '--inventory', '/home/nate/.cache/molecule/molecule-test/default/inventory', '--skip-tags', 'molecule-notest,notest', '/home/nate/.virtualenvs/moleculedev/lib/python3.10/site-packages/molecule_docker/playbooks/create.yml']\r\n```\r\n\r\nMolecule successfully created the image:\r\n\r\n```console\r\n$ docker images molecule_local/centos:7\r\nREPOSITORY              TAG       IMAGE ID       CREATED              SIZE\r\nmolecule_local/centos   7         7863c9c5566b   About a minute ago   204MB\r\n```\r\n\r\nAnd if I update my platform to reference the local image and set `pre_built_image` to `true`:\r\n\r\n```yaml\r\nplatforms:\r\n  - name: molecule-test\r\n    image: molecule_local/${FROM_IMAGE:-centos:7}\r\n    command: \"\"\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:rw\r\n    privileged: true\r\n    dockerfile: Dockerfile.j2\r\n    pre_build_image: true\r\n```\r\n\r\nIt properly interpolates the variable and creates the instance container:\r\n\r\n```console\r\n$ molecule create\r\nWARNING  The scenario config file ('/home/nate/ansible/molecule-test/molecule/default/molecule.yml') has been modified since the scenario was created. If recent changes are important, reset the scenario with 'molecule destroy' to clean up created items or 'molecule reset' to clear current configuration.\r\nINFO     default scenario test matrix: dependency, create, prepare\r\nINFO     Performing prerun with role_name_check=0...\r\nINFO     Set ANSIBLE_LIBRARY=/home/nate/.cache/ansible-compat/435e6d/modules:/home/nate/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/nate/.cache/ansible-compat/435e6d/collections:/home/nate/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/nate/.cache/ansible-compat/435e6d/roles:/home/nate/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nINFO     Sanity checks: 'docker'\r\n\r\nPLAY [Create] ******************************************************************\r\n\r\nTASK [Set async_dir for HOME env] **********************************************\r\nok: [localhost]\r\n\r\nTASK [Log into a Docker registry] **********************************************\r\nskipping: [localhost] => (item=None)\r\nskipping: [localhost]\r\n\r\nTASK [Check presence of custom Dockerfiles] ************************************\r\nok: [localhost] => (item={'command': '', 'dockerfile': 'Dockerfile.j2', 'image': 'molecule_local/centos:7', 'name': 'molecule-test', 'pre_build_image': True, 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw']})\r\n\r\nTASK [Create Dockerfiles from image names] *************************************\r\nskipping: [localhost] => (item={'command': '', 'dockerfile': 'Dockerfile.j2', 'image': 'molecule_local/centos:7', 'name': 'molecule-test', 'pre_build_image': True, 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw']})\r\nskipping: [localhost]\r\n\r\nTASK [Synchronization the context] *********************************************\r\nskipping: [localhost] => (item={'command': '', 'dockerfile': 'Dockerfile.j2', 'image': 'molecule_local/centos:7', 'name': 'molecule-test', 'pre_build_image': True, 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw']})\r\nskipping: [localhost]\r\n\r\nTASK [Discover local Docker images] ********************************************\r\nok: [localhost] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'item': {'command': '', 'dockerfile': 'Dockerfile.j2', 'image': 'molecule_local/centos:7', 'name': 'molecule-test', 'pre_build_image': True, 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw']}, 'ansible_loop_var': 'item', 'i': 0, 'ansible_index_var': 'i'})\r\n\r\nTASK [Build an Ansible compatible image (new)] *********************************\r\nskipping: [localhost] => (item=molecule_local/molecule_local/centos:7)\r\nskipping: [localhost]\r\n\r\nTASK [Create docker network(s)] ************************************************\r\nskipping: [localhost]\r\n\r\nTASK [Determine the CMD directives] ********************************************\r\nok: [localhost] => (item={'command': '', 'dockerfile': 'Dockerfile.j2', 'image': 'molecule_local/centos:7', 'name': 'molecule-test', 'pre_build_image': True, 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw']})\r\n\r\nTASK [Create molecule instance(s)] *********************************************\r\nchanged: [localhost] => (item=molecule-test)\r\n\r\nTASK [Wait for instance(s) creation to complete] *******************************\r\nFAILED - RETRYING: [localhost]: Wait for instance(s) creation to complete (300 retries left).\r\nchanged: [localhost] => (item={'failed': 0, 'started': 1, 'finished': 0, 'ansible_job_id': '523555483669.688684', 'results_file': '/home/nate/.ansible_async/523555483669.688684', 'changed': True, 'item': {'command': '', 'dockerfile': 'Dockerfile.j2', 'image': 'molecule_local/centos:7', 'name': 'molecule-test', 'pre_build_image': True, 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:rw']}, 'ansible_loop_var': 'item'})\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=6    changed=2    unreachable=0    failed=0    skipped=5    rescued=0    ignored=0\r\n\r\nINFO     Running default > prepare\r\nWARNING  Skipping, prepare playbook not configured.\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3733/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3733/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3730", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3730/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3730/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3730/events", "html_url": "https://github.com/ansible-community/molecule/pull/3730", "id": 1440279495, "node_id": "PR_kwDOAsPDRs5CbaZW", "number": 3730, "title": "Allow side_effect and verify to have parameters", "user": {"login": "ehartmann", "id": 112486, "node_id": "MDQ6VXNlcjExMjQ4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/112486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehartmann", "html_url": "https://github.com/ehartmann", "followers_url": "https://api.github.com/users/ehartmann/followers", "following_url": "https://api.github.com/users/ehartmann/following{/other_user}", "gists_url": "https://api.github.com/users/ehartmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehartmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehartmann/subscriptions", "organizations_url": "https://api.github.com/users/ehartmann/orgs", "repos_url": "https://api.github.com/users/ehartmann/repos", "events_url": "https://api.github.com/users/ehartmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ehartmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-11-08T14:10:51Z", "updated_at": "2022-12-05T14:57:14Z", "closed_at": "2022-12-05T14:57:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3730", "html_url": "https://github.com/ansible-community/molecule/pull/3730", "diff_url": "https://github.com/ansible-community/molecule/pull/3730.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3730.patch", "merged_at": "2022-12-05T14:57:14Z"}, "body": "Fix #3729", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3730/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3730/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3729", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3729/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3729/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3729/events", "html_url": "https://github.com/ansible-community/molecule/issues/3729", "id": 1440272579, "node_id": "I_kwDOAsPDRs5V2NDD", "number": 3729, "title": "Schema validation does not allow to specify side_effects and verify script", "user": {"login": "ehartmann", "id": 112486, "node_id": "MDQ6VXNlcjExMjQ4Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/112486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehartmann", "html_url": "https://github.com/ehartmann", "followers_url": "https://api.github.com/users/ehartmann/followers", "following_url": "https://api.github.com/users/ehartmann/following{/other_user}", "gists_url": "https://api.github.com/users/ehartmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehartmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehartmann/subscriptions", "organizations_url": "https://api.github.com/users/ehartmann/orgs", "repos_url": "https://api.github.com/users/ehartmann/repos", "events_url": "https://api.github.com/users/ehartmann/events{/privacy}", "received_events_url": "https://api.github.com/users/ehartmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-08T14:07:47Z", "updated_at": "2022-12-05T14:57:15Z", "closed_at": "2022-12-05T14:57:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.13.5]\r\n  config file = /home/eric/.ansible.cfg\r\n  configured module search path = ['/home/eric/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/eric/.local/share/virtualenvs/ansible-role-teleport-4MgnzAtB/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/eric/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/eric/.local/share/virtualenvs/ansible-role-teleport-4MgnzAtB/bin/ansible\r\n  python version = 3.10.8 (main, Nov  1 2022, 14:18:21) [GCC 12.2.0]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.3 using python 3.10 \r\n    ansible:2.13.5\r\n    delegated:4.0.3 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nThe schema validation should not block the usage of `side_effect` with parameters (https://molecule.readthedocs.io/en/latest/configuration.html#molecule.scenario.Scenario) in a test sequence : \r\n```yaml\r\nscenario:\r\n  name: default\r\n  test_sequence:\r\n    - dependency\r\n    - lint\r\n    - cleanup\r\n    - destroy\r\n    - syntax\r\n    - lin\r\n    - create\r\n    - prepare\r\n    - converge\r\n    - idempotence\r\n    - side_effect ../common/side_effects/create_admin_user.yml\r\n    - verify\r\n    - cleanup\r\n    - destroy\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nAs soon as we add the Ansible script to the `side_effect` or `verify`, molecule is refusing this configuration.\r\nHere is the result :\r\n```\r\n> molecule test\r\nCRITICAL Failed to validate /home/eric/my_role/molecule/default/molecule.yml\r\n\r\n[\"'side_effect ../common/side_effects/create_admin_user.yml' is not one of ['check', 'cleanup', 'converge', 'create', 'dependency', 'destroy', 'idempotence', 'lint', 'prepare', {'type': 'string', 'pattern': 'side_effect .*'}, 'syntax', 'test', 'verify']\"]\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3729/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3729/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3727", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3727/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3727/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3727/events", "html_url": "https://github.com/ansible-community/molecule/pull/3727", "id": 1437057867, "node_id": "PR_kwDOAsPDRs5CQuXz", "number": 3727, "title": "Fix moved libera channel", "user": {"login": "staticdev", "id": 1446633, "node_id": "MDQ6VXNlcjE0NDY2MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1446633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/staticdev", "html_url": "https://github.com/staticdev", "followers_url": "https://api.github.com/users/staticdev/followers", "following_url": "https://api.github.com/users/staticdev/following{/other_user}", "gists_url": "https://api.github.com/users/staticdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/staticdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/staticdev/subscriptions", "organizations_url": "https://api.github.com/users/staticdev/orgs", "repos_url": "https://api.github.com/users/staticdev/repos", "events_url": "https://api.github.com/users/staticdev/events{/privacy}", "received_events_url": "https://api.github.com/users/staticdev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-05T14:44:58Z", "updated_at": "2022-11-06T15:56:38Z", "closed_at": "2022-11-06T15:56:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3727", "html_url": "https://github.com/ansible-community/molecule/pull/3727", "diff_url": "https://github.com/ansible-community/molecule/pull/3727.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3727.patch", "merged_at": "2022-11-06T15:56:38Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3727/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3727/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3725", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3725/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3725/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3725/events", "html_url": "https://github.com/ansible-community/molecule/pull/3725", "id": 1434187930, "node_id": "PR_kwDOAsPDRs5CHLJn", "number": 3725, "title": "Accept any string for \"network_mode\" in molecule.json schema", "user": {"login": "fredflev", "id": 42792052, "node_id": "MDQ6VXNlcjQyNzkyMDUy", "avatar_url": "https://avatars.githubusercontent.com/u/42792052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fredflev", "html_url": "https://github.com/fredflev", "followers_url": "https://api.github.com/users/fredflev/followers", "following_url": "https://api.github.com/users/fredflev/following{/other_user}", "gists_url": "https://api.github.com/users/fredflev/gists{/gist_id}", "starred_url": "https://api.github.com/users/fredflev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fredflev/subscriptions", "organizations_url": "https://api.github.com/users/fredflev/orgs", "repos_url": "https://api.github.com/users/fredflev/repos", "events_url": "https://api.github.com/users/fredflev/events{/privacy}", "received_events_url": "https://api.github.com/users/fredflev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-03T06:47:16Z", "updated_at": "2022-11-06T15:57:21Z", "closed_at": "2022-11-06T15:57:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3725", "html_url": "https://github.com/ansible-community/molecule/pull/3725", "diff_url": "https://github.com/ansible-community/molecule/pull/3725.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3725.patch", "merged_at": "2022-11-06T15:57:21Z"}, "body": "As mentioned by @felixfontein in https://github.com/ansible-community/molecule/pull/3724 `network_mode` can be any network name specified by a user and should not be limited to a specific set of strings or string patterns. \r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3725/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3724", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3724/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3724/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3724/events", "html_url": "https://github.com/ansible-community/molecule/pull/3724", "id": 1434168611, "node_id": "PR_kwDOAsPDRs5CHHBZ", "number": 3724, "title": "Add \"default\" as a valid docker \"network_mode\" in molecule.json schema", "user": {"login": "fredflev", "id": 42792052, "node_id": "MDQ6VXNlcjQyNzkyMDUy", "avatar_url": "https://avatars.githubusercontent.com/u/42792052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fredflev", "html_url": "https://github.com/fredflev", "followers_url": "https://api.github.com/users/fredflev/followers", "following_url": "https://api.github.com/users/fredflev/following{/other_user}", "gists_url": "https://api.github.com/users/fredflev/gists{/gist_id}", "starred_url": "https://api.github.com/users/fredflev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fredflev/subscriptions", "organizations_url": "https://api.github.com/users/fredflev/orgs", "repos_url": "https://api.github.com/users/fredflev/repos", "events_url": "https://api.github.com/users/fredflev/events{/privacy}", "received_events_url": "https://api.github.com/users/fredflev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-03T06:19:13Z", "updated_at": "2022-11-04T06:01:50Z", "closed_at": "2022-11-03T06:26:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3724", "html_url": "https://github.com/ansible-community/molecule/pull/3724", "diff_url": "https://github.com/ansible-community/molecule/pull/3724.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3724.patch", "merged_at": "2022-11-03T06:26:42Z"}, "body": "As per discussion in: https://github.com/ansible-community/molecule/discussions/3723\r\n\r\nWithout the change in this PR, the molecule schema validation step fails and throw this \"not so obvious\" error: \r\n\r\n```console\r\nmolecule --debug syntax                                        \r\nDEBUG    Validating schema /Users/My_User/ansible-role/molecule/default/molecule.yml.\r\nCRITICAL Failed to validate /Users/My_User/ansible-role/molecule/default/molecule.yml\r\n\r\n[\"'default' is not valid under any of the given schemas\"]\r\n```\r\n\r\nAnd reference in: https://docs.ansible.com/ansible/latest/collections/community/docker/docker_container_module.html#parameter-network_mode", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3724/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3721", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3721/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3721/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3721/events", "html_url": "https://github.com/ansible-community/molecule/pull/3721", "id": 1431547903, "node_id": "PR_kwDOAsPDRs5B-Rnh", "number": 3721, "title": "JSON Schema: Allow additionalProperties in ProvisionerConfigOptionsSshConnectionModel ", "user": {"login": "fredflev", "id": 42792052, "node_id": "MDQ6VXNlcjQyNzkyMDUy", "avatar_url": "https://avatars.githubusercontent.com/u/42792052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fredflev", "html_url": "https://github.com/fredflev", "followers_url": "https://api.github.com/users/fredflev/followers", "following_url": "https://api.github.com/users/fredflev/following{/other_user}", "gists_url": "https://api.github.com/users/fredflev/gists{/gist_id}", "starred_url": "https://api.github.com/users/fredflev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fredflev/subscriptions", "organizations_url": "https://api.github.com/users/fredflev/orgs", "repos_url": "https://api.github.com/users/fredflev/repos", "events_url": "https://api.github.com/users/fredflev/events{/privacy}", "received_events_url": "https://api.github.com/users/fredflev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-01T14:43:27Z", "updated_at": "2022-11-01T15:12:59Z", "closed_at": "2022-11-01T15:05:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3721", "html_url": "https://github.com/ansible-community/molecule/pull/3721", "diff_url": "https://github.com/ansible-community/molecule/pull/3721.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3721.patch", "merged_at": "2022-11-01T15:05:16Z"}, "body": "Based on the discussion in the following [issue](https://github.com/ansible-community/molecule/issues/3714)\r\n\r\nThis change allow a molecule user to set any additional  [ssh_connection options](https://docs.ansible.com/ansible/latest/collections/ansible/builtin/ssh_connection.html) needed for the provisioner object in `molecule.yml`.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3721/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3721/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3714", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3714/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3714/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3714/events", "html_url": "https://github.com/ansible-community/molecule/issues/3714", "id": 1429202517, "node_id": "I_kwDOAsPDRs5VL-ZV", "number": 3714, "title": "Schema validation: fails for \"molecule.yml\" : `pipelining: true` not allowed as an option to `ssh_connection` in the provisioner schema ", "user": {"login": "fredflev", "id": 42792052, "node_id": "MDQ6VXNlcjQyNzkyMDUy", "avatar_url": "https://avatars.githubusercontent.com/u/42792052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fredflev", "html_url": "https://github.com/fredflev", "followers_url": "https://api.github.com/users/fredflev/followers", "following_url": "https://api.github.com/users/fredflev/following{/other_user}", "gists_url": "https://api.github.com/users/fredflev/gists{/gist_id}", "starred_url": "https://api.github.com/users/fredflev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fredflev/subscriptions", "organizations_url": "https://api.github.com/users/fredflev/orgs", "repos_url": "https://api.github.com/users/fredflev/repos", "events_url": "https://api.github.com/users/fredflev/events{/privacy}", "received_events_url": "https://api.github.com/users/fredflev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-31T03:41:42Z", "updated_at": "2022-11-01T15:14:26Z", "closed_at": "2022-11-01T15:14:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n\r\n```console\r\nansible [core 2.13.5]\r\n  config file = /Users/REDACTED/.ansible.cfg\r\n  configured module search path = ['/Users/REDACTED/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/REDACTED/workspace/.venv/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /Users/REDACTED/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/REDACTED/workspace/.venv/bin/ansible\r\n  python version = 3.10.8 (main, Oct 13 2022, 10:17:43) [Clang 14.0.0 (clang-1400.0.29.102)]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.3 using python 3.10 \r\n    ansible:2.13.5\r\n    delegated:4.0.3 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nNo error when running schema validation with the following provisioner config in `molecule.yml`\r\n\r\n```\r\nprovisioner:\r\n  config_options:\r\n    ssh_connection:\r\n      pipelining: true\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nSchema validation fails: \r\n\r\n```console\r\nmolecule -vvv test  \r\nDEBUG    Validating schema /Users/REDACTED_USER/REDACTED_ROLE_NAME/molecule/default/molecule.yml.\r\nCRITICAL Failed to validate /Users/REDACTED_USER/REDACTED_ROLE_NAME/molecule/default/molecule.yml\r\n\r\n[\"Additional properties are not allowed ('pipelining' was unexpected)\"]\r\n```\r\n\r\nRemoving `pipelining: true` from `molecule.yml` let me run molecule without issue since the schema validation does not fail anymore.\r\n\r\n```\r\n    ssh_connection:\r\n      pipelining: true\r\n```\r\n\r\nIt seems that `pipelining` is not one of the valid option in the schema and adding it or maybe setting  `\"additionalProperties\": true` would fix the config validation issue I am now running into since schema validation has been implemented/moved into molecule.\r\n\r\nhttps://github.com/ansible-community/molecule/blob/f8d08dff973e8e65cdac81a804cdb8015925fabe/src/molecule/data/molecule.json#L416-L429\r\n\r\nREM: It seems a bit restrictive to only allow. `control_path` and `scp_if_ssh`  as ssh_connection properties.\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3714/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3714/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3713", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3713/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3713/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3713/events", "html_url": "https://github.com/ansible-community/molecule/pull/3713", "id": 1428565850, "node_id": "PR_kwDOAsPDRs5B0VBW", "number": 3713, "title": "Help messages when config does not match state file", "user": {"login": "scottalreadytaken", "id": 33366995, "node_id": "MDQ6VXNlcjMzMzY2OTk1", "avatar_url": "https://avatars.githubusercontent.com/u/33366995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottalreadytaken", "html_url": "https://github.com/scottalreadytaken", "followers_url": "https://api.github.com/users/scottalreadytaken/followers", "following_url": "https://api.github.com/users/scottalreadytaken/following{/other_user}", "gists_url": "https://api.github.com/users/scottalreadytaken/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottalreadytaken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottalreadytaken/subscriptions", "organizations_url": "https://api.github.com/users/scottalreadytaken/orgs", "repos_url": "https://api.github.com/users/scottalreadytaken/repos", "events_url": "https://api.github.com/users/scottalreadytaken/events{/privacy}", "received_events_url": "https://api.github.com/users/scottalreadytaken/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-30T02:49:02Z", "updated_at": "2022-11-01T13:56:27Z", "closed_at": "2022-11-01T13:56:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3713", "html_url": "https://github.com/ansible-community/molecule/pull/3713", "diff_url": "https://github.com/ansible-community/molecule/pull/3713.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3713.patch", "merged_at": "2022-11-01T13:56:26Z"}, "body": "This is a proposal to add messages that help users understand when changes to the molecule.yml file might not take effect.\r\n\r\nIt expands on the ideas in #3429 among others. \r\n\r\nFor example issues occurred with the below:\r\n1. I start off using the podman driver. \r\n2. I switch to libvirt and attempt to converge but there is an error - By chance libvirt on my system is not setup correctly\r\n3. I don't want to fix libvirt right now so I change back to using the podman\r\n4. I attempt to converge again but I'm still receiving errors relating to libvirt. Why? The state file is holding the libvirt setting but as a new user I don't necessarily know this. It took some time to discover the cache files and remove them but now the molecule reset command is available this solution is easy to apply if you know about it. \r\n5. Since we can easily compare the settings in each location it's easy to warn about any discrepancy. \r\n\r\nIn this case the warning is:\r\n`Driver 'libvirt' is currently in use but the scenario config has changed and now defines 'podman'. To change drivers, run 'molecule destroy' for converged scenarios or 'molecule reset' otherwise.`\r\n\r\nI've also adopted the idea from another discussion thread that a warning could be displayed if the date modified on the molecule.yml has changed since the state file was first written. \r\nThe generic warning is:\r\n`The scenario config file ('/home/example/molecule.yml') has been modified since the scenario was created. If recent changes are important, reset the scenario with 'molecule destroy' to clean up created items or 'molecule reset' to clear current configuration.`\r\n\r\nThe driver comparison is probably in the right place because it's right after the check added for #3429 but I'm unsure if the check for the molecule.yml is the best check or in the best location. I'd be able to change it to whatever consensus suggests. \r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3713/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3713/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3710", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3710/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3710/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3710/events", "html_url": "https://github.com/ansible-community/molecule/issues/3710", "id": 1425198977, "node_id": "I_kwDOAsPDRs5U8s-B", "number": 3710, "title": "molecule schema validation doesnt recognize credentials field for docker registry", "user": {"login": "avictor0826", "id": 29988241, "node_id": "MDQ6VXNlcjI5OTg4MjQx", "avatar_url": "https://avatars.githubusercontent.com/u/29988241?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avictor0826", "html_url": "https://github.com/avictor0826", "followers_url": "https://api.github.com/users/avictor0826/followers", "following_url": "https://api.github.com/users/avictor0826/following{/other_user}", "gists_url": "https://api.github.com/users/avictor0826/gists{/gist_id}", "starred_url": "https://api.github.com/users/avictor0826/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avictor0826/subscriptions", "organizations_url": "https://api.github.com/users/avictor0826/orgs", "repos_url": "https://api.github.com/users/avictor0826/repos", "events_url": "https://api.github.com/users/avictor0826/events{/privacy}", "received_events_url": "https://api.github.com/users/avictor0826/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-27T07:57:14Z", "updated_at": "2022-10-29T10:33:41Z", "closed_at": "2022-10-29T10:33:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n[root@b986aafc8d59 ~]# ansible --version && molecule --version\r\nansible [core 2.13.5]\r\n  config file = /home/gitlab-runner/ansible.cfg\r\n  configured module search path = ['/home/gitlab-runner/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /home/gitlab-runner/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.9.2 (default, Mar  3 2021, 09:23:36) [GCC 4.8.5 20150623 (Red Hat 4.8.5-44)]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.3 using python 3.9\r\n    ansible:2.13.5\r\n    delegated:4.0.3 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n-  pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nA snippet of molecule.yml we use\r\n\r\n```---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint: |\r\n        yamllint . && ansible-lint .\r\nplatforms:\r\n  - name: httpd_test_instance\r\n    image: middleware/centos-scl-httpd\r\n    registry:\r\n      url: docker.company.com\r\n      credentials:\r\n        username: foo\r\n        password: baar\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    privileged: true\r\n    command: \"/usr/sbin/init\"\r\nprovisioner:\r\n  name: ansible\r\n....\r\n```\r\n\r\nMolecule.yml schema validation should recognize the `credentials` field and a `molecule lint` should not error out\r\n\r\n# Actual Behaviour\r\n\r\nWhen i run `molecule lint` i get the below failure message\r\n\r\n```\r\n[root@b986aafc8d59 java]# molecule --debug lint\r\nDEBUG    Validating schema /home/user1/roles/httpd/molecule/default/molecule.yml.\r\nCRITICAL Failed to validate /home/user1/roles/httpd/molecule/default/molecule.yml\r\n\r\n[\"Additional properties are not allowed ('credentials' was unexpected)\"]\r\n```\r\n\r\nThe issue is because the `molecule.json` [here](https://github.com/ansible-community/molecule/blob/v4.0.3/src/molecule/data/molecule.json#L3-L13) doesnt recognize `credentials` as a field nor does it allow additionalProperties\r\n\r\nthe `registry.credentials` is an allowed, if not expected, field in the cookiecutter `create.yml` in the `molecule-docker` as given [here](https://github.com/ansible-community/molecule-docker/blob/main/src/molecule_docker/playbooks/create.yml#L18-L20)\r\n\r\nSince we use a docker registry which doesnt have anonymous access, it is necessary for us to furnish the credentials. Even if this could be done by having a seperate `create.yml` it would mean a lot of work refactoring the roles and also we want to stick with the cookiecutter playbooks for molecule testings to keep ourselves up to date with the newest features.\r\n\r\n# Proposed fix\r\n\r\nAdd the `credentials` into the molecule schema so that it is recognized in the `molecule.json`\r\nOr we could set the `\"additionalProperties\": true,` to allow these fields\r\n\r\n\r\nPlease let me know if there is any other details required or any help required in fixing this.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3710/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3710/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3707", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3707/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3707/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3707/events", "html_url": "https://github.com/ansible-community/molecule/issues/3707", "id": 1424079362, "node_id": "I_kwDOAsPDRs5U4boC", "number": 3707, "title": "ssh_connection - Additional properties are not allowed ('retries', 'ssh_args' were unexpected)", "user": {"login": "isuftin", "id": 928288, "node_id": "MDQ6VXNlcjkyODI4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/928288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/isuftin", "html_url": "https://github.com/isuftin", "followers_url": "https://api.github.com/users/isuftin/followers", "following_url": "https://api.github.com/users/isuftin/following{/other_user}", "gists_url": "https://api.github.com/users/isuftin/gists{/gist_id}", "starred_url": "https://api.github.com/users/isuftin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/isuftin/subscriptions", "organizations_url": "https://api.github.com/users/isuftin/orgs", "repos_url": "https://api.github.com/users/isuftin/repos", "events_url": "https://api.github.com/users/isuftin/events{/privacy}", "received_events_url": "https://api.github.com/users/isuftin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-10-26T13:58:16Z", "updated_at": "2022-10-28T16:47:30Z", "closed_at": "2022-10-26T14:22:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible [core 2.13.5]\r\n  config file = /Users/isuftin/.ansible.cfg\r\n  configured module search path = ['/Users/isuftin/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/isuftin/.pyenv/versions/3.9.10/envs/ctek-development/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/isuftin/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/isuftin/.pyenv/versions/ctek-development/bin/ansible\r\n  python version = 3.9.10 (main, Jan 31 2022, 16:09:50) [Clang 12.0.0 (clang-1200.0.32.29)]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nINFO     Found config file /Users/isuftin/Development/CTek/internal/ctek/automation/ansible/roles/stig/.config/molecule/config.yml\r\nmolecule 4.0.3 using python 3.9 \r\n    ansible:2.13.5\r\n    delegated:4.0.3 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n    ec2:0.4 from molecule_ec2\r\n    vagrant:1.0.0 from molecule_vagrant\r\n```\r\n\r\nMolecule installation method (one of): pip \r\n\r\nAnsible installation method (one of): pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nNo configuration errors\r\n\r\n# Actual Behaviour\r\n\r\nWith Molecule 4.0.3, I am seeing an error coming back which I haven't seen in previous versions:\r\n```\r\nINFO     Found config file /my/role/.config/molecule/config.yml\r\nCRITICAL Failed to validate /my/role/molecule/my_scenario/molecule.yml\r\n\r\n[\"Additional properties are not allowed ('retries', 'ssh_args' were unexpected)\"]\r\n```\r\n\r\nconfig.yml:\r\n```yaml\r\n---\r\n# This is common configuration for all concrete molecule scenarios\r\ndependency:\r\n  name: galaxy\r\n  options:\r\n    role-file: ${ANSIBLE_MOLECULE_ROLE_FILE}\r\n    requirements-file: ${ANSIBLE_MOLECULE_COLLECTIONS_FILE}\r\n    force: True\r\n\r\nlint: |\r\n  set -e\r\n  yamllint .\r\n  ansible-lint --project-dir .\r\n  flake8 --exclude \"molecule/**/tests/*\"\r\n\r\ndriver:\r\n  name: ec2\r\n\r\nprovisioner:\r\n  name: ansible\r\n  log: True\r\n  config_options:\r\n    defaults:\r\n      bin_ansible_callbacks: True\r\n      callbacks_enabled: ${ANSIBLE_CALLBACKS}\r\n      display_args_to_stdout: True\r\n      pipelining: True\r\n      show_custom_stats: True\r\n      stdout_callback: ${ANSIBLE_STDOUT_CALLBACK}\r\n      timeout: ${ANSIBLE_CONNECTION_TIMEOUT}\r\n      use_persistent_connections: True\r\n      verbosity: ${ANSIBLE_STDOUT_VERBOSITY}\r\n      fact_caching: jsonfile\r\n      fact_caching_connection: ${MOLECULE_EPHEMERAL_DIRECTORY}/facts_cache\r\n      fact_caching_timeout: 7200\r\n    diff:\r\n      always: True\r\n    galaxy:\r\n      display_progress: False\r\n    ssh_connection:\r\n      ssh_args: ${SSH_ARGS}\r\n      retries: ${SSH_RETRIES}\r\n  playbooks:\r\n    converge: ../common/converge.yml\r\n\r\nverifier:\r\n  name: testinfra\r\n  directory: '../common/tests'\r\n  options:\r\n    v: True\r\n    junit-xml: junit.xml\r\n    s: true\r\n    r: fEs\r\n\r\n```\r\n\r\nsenario YAML:\r\n```yaml\r\n\r\nplatforms:\r\n  - name: '${MOLECULE_SCENARIO_NAME}-${ROLE_NAME}-${MOLECULE_ANSIBLE_VERSION:-localtest}'\r\n    region: ${AWS_REGION}\r\n    vpc_id: ${AWS_VPC_ID}\r\n    vpc_subnet_id: ${AWS_SUBNET}\r\n    instance_type: ${AWS_INSTANCE_TYPE}\r\n    security_groups: ${AWS_SECURITY_GROUPS}\r\n    aws_iam_role: ${AWS_IAM_ROLE}\r\n    tags:\r\n      wma:project_id: enterprise\r\n      wma:molecule_pipeline_id: ${CI_PIPELINE_ID:-manual}\r\n      wma:ansible_managed: 'true'\r\n      Name: Ansible Molecule - ${MOLECULE_SCENARIO_NAME}-${ROLE_NAME}-${MOLECULE_ANSIBLE_VERSION:-localtest}\r\n    key_inject_method: ec2\r\n    image: ${MY_AMI}\r\n\r\nprovisioner:\r\n  env:\r\n    SSH_USERNAME: ec2-user\r\n  inventory:\r\n    links:\r\n      host_vars: ../common/ec2/host_vars\r\n  playbooks:\r\n    create: ../common/ec2/create.yml\r\n    destroy: ../common/ec2/destroy.yml\r\n```\r\n\r\nIf I comment out the `ssh_connection` params under provisioner, this works fine. However, I thought that this was valid configuration as per https://github.com/ansible/ansible/blob/5037dc4e69b140a2f5345711fe9318d3fdea730e/lib/ansible/constants.py#L300-L304\r\n\r\nAm I doing it wrong or is this a regression in Molecule in 4.0.3?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3707/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3707/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3706", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3706/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3706/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3706/events", "html_url": "https://github.com/ansible-community/molecule/pull/3706", "id": 1423933213, "node_id": "PR_kwDOAsPDRs5Bk5jI", "number": 3706, "title": "Re-add credentials to Docker registry schema", "user": {"login": "TheLastProject", "id": 1885159, "node_id": "MDQ6VXNlcjE4ODUxNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1885159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TheLastProject", "html_url": "https://github.com/TheLastProject", "followers_url": "https://api.github.com/users/TheLastProject/followers", "following_url": "https://api.github.com/users/TheLastProject/following{/other_user}", "gists_url": "https://api.github.com/users/TheLastProject/gists{/gist_id}", "starred_url": "https://api.github.com/users/TheLastProject/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TheLastProject/subscriptions", "organizations_url": "https://api.github.com/users/TheLastProject/orgs", "repos_url": "https://api.github.com/users/TheLastProject/repos", "events_url": "https://api.github.com/users/TheLastProject/events{/privacy}", "received_events_url": "https://api.github.com/users/TheLastProject/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-10-26T12:22:32Z", "updated_at": "2022-12-28T14:39:22Z", "closed_at": "2022-10-27T11:05:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3706", "html_url": "https://github.com/ansible-community/molecule/pull/3706", "diff_url": "https://github.com/ansible-community/molecule/pull/3706.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3706.patch", "merged_at": "2022-10-27T11:05:11Z"}, "body": "This allows logging into a registry again like Molecule 4.0.1 allowed\r\n\r\nI noticed that upgrading from molecule 4.0.1 to 4.0.2 at work broke our ability to use containers on a private Docker registry (in our case, a private GitLab registry).\r\n\r\nThe specific error message we started receiving was:\r\n```\r\n[\"Additional properties are not allowed ('credentials' was unexpected)\"]\r\n```\r\n\r\nI came to the conclusion this was most likely broken by accident given:\r\n1. The option does work (removing the option from our `molecule.yml` gave us permission errors)\r\n2. There was nothing in the CHANGELOG about Docker registries\r\n3. Comparing release 4.0.1 to 4.0.2 showed nothing related to Docker registries either: https://github.com/ansible-community/molecule/compare/v4.0.1...v4.0.2\r\n4. The old schema on release 4.0.1 contained these options: https://github.com/ansible-community/molecule/blob/v4.0.1/src/molecule/model/schema_v3.py#L245-L258\r\n5. This feature previously received fixes: https://github.com/ansible-community/molecule/issues/1331", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3706/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3706/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3705", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3705/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3705/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3705/events", "html_url": "https://github.com/ansible-community/molecule/issues/3705", "id": 1423876317, "node_id": "I_kwDOAsPDRs5U3qDd", "number": 3705, "title": "Molecule can't find docker process on mac with latest docker desktop 4.13.0 version, due to lack of docker.sock symlink", "user": {"login": "CameronMcAuley", "id": 11678597, "node_id": "MDQ6VXNlcjExNjc4NTk3", "avatar_url": "https://avatars.githubusercontent.com/u/11678597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CameronMcAuley", "html_url": "https://github.com/CameronMcAuley", "followers_url": "https://api.github.com/users/CameronMcAuley/followers", "following_url": "https://api.github.com/users/CameronMcAuley/following{/other_user}", "gists_url": "https://api.github.com/users/CameronMcAuley/gists{/gist_id}", "starred_url": "https://api.github.com/users/CameronMcAuley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CameronMcAuley/subscriptions", "organizations_url": "https://api.github.com/users/CameronMcAuley/orgs", "repos_url": "https://api.github.com/users/CameronMcAuley/repos", "events_url": "https://api.github.com/users/CameronMcAuley/events{/privacy}", "received_events_url": "https://api.github.com/users/CameronMcAuley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-26T11:35:53Z", "updated_at": "2022-11-08T09:48:17Z", "closed_at": "2022-11-08T09:48:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible [core 2.13.5]\r\n  config file = None\r\n  configured module search path = ['/Users/cameronmc/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /Users/cameronmc/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.10.8 (main, Oct 13 2022, 10:18:28) [Clang 13.0.0 (clang-1300.0.29.30)]\r\n  jinja version = 3.1.2\r\n  libyaml = False\r\nmolecule 4.0.2 using python 3.10\r\n    ansible:2.13.5\r\n    delegated:4.0.2 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n\r\nOS: macOS Big Sur Version 11.6\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- ansible-lint\r\n- docker\r\n\r\n# Desired Behavior\r\n\r\n1. Install molecule and molecule-docker via pip on OSX\r\n2. Install latest version of Docker Desktop on OSX, and run it\r\n3. Create a basic ansible role with `molecule init role acme.my_new_role --driver-name docker`\r\n4. Test the role with `molecule test`\r\n5. molecule should find that docker is running and create the container\r\n\r\n# Actual Behaviour\r\n\r\n- The latest version of Docker Desktop (4.13.0) has the following release notes:\r\n```By default Docker will not create the /var/run/docker.sock symlink on the host and use the docker-desktop CLI context instead.```\r\n(see: https://docs.docker.com/desktop/release-notes/)\r\n- An important note is that this only seems to be an issue with a **fresh install of docker desktop.** If you upgrade your current version from 4.12.0 to 4.13.0 it seems the location of docker.sock does not change.\r\n- Molecule can not find `/var/run/docker.sock` as it is instead located at `/Users/<USER>/.docker/run/docker.sock` (i.e there was no symlink created). Therefore the following exception occurs when running `molecule test`\r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 703, in urlopen\r\n    httplib_response = self._make_request(\r\n  File \"/usr/local/lib/python3.10/site-packages/urllib3/connectionpool.py\", line 398, in _make_request\r\n    conn.request(method, url, **httplib_request_kw)\r\n  File \"/usr/local/Cellar/python@3.10/3.10.8/Frameworks/Python.framework/Versions/3.10/lib/python3.10/http/client.py\", line 1282, in request\r\n    self._send_request(method, url, body, headers, encode_chunked)\r\n  File \"/usr/local/Cellar/python@3.10/3.10.8/Frameworks/Python.framework/Versions/3.10/lib/python3.10/http/client.py\", line 1328, in _send_request\r\n    self.endheaders(body, encode_chunked=encode_chunked)\r\n  File \"/usr/local/Cellar/python@3.10/3.10.8/Frameworks/Python.framework/Versions/3.10/lib/python3.10/http/client.py\", line 1277, in endheaders\r\n    self._send_output(message_body, encode_chunked=encode_chunked)\r\n  File \"/usr/local/Cellar/python@3.10/3.10.8/Frameworks/Python.framework/Versions/3.10/lib/python3.10/http/client.py\", line 1037, in _send_output\r\n    self.send(msg)\r\n  File \"/usr/local/Cellar/python@3.10/3.10.8/Frameworks/Python.framework/Versions/3.10/lib/python3.10/http/client.py\", line 975, in send\r\n    self.connect()\r\n  File \"/usr/local/lib/python3.10/site-packages/docker/transport/unixconn.py\", line 30, in connect\r\n    sock.connect(self.unix_socket)\r\nFileNotFoundError: [Errno 2] No such file or directory\r\n```\r\n\r\n# How I resolved\r\n\r\n- I uninstalled Docker Desktop 4.13.0 completely. IMPORTANT: You need to uninstall it via the 'Uninstall' button within Docker Desktop app. (Bug Icon on the top menu bar opens 'Troubleshoot' menu, then click uninstall. After this I removed Docker from applications. You need to uninstall via the app as otherwise when you reinstall an older version it will still have this new docker.sock location)\r\n- I installed Docker Desktop 4.12.0. This version creates docker.sock symlink /var/run/docker.sock and therefore molecule finds the docker process.\r\n\r\n# What needs to be changed\r\n- I am not certain if this can be resolved in molecule's code or if this is an issue with the `docker` python module version. Molecule installs docker 6.0.0 by default when installed via `pip3 install molecule-docker`. Maybe there is a new version of the docker package that looks at the correct location.\r\n- If  /var/run/docker.sock can not be found, it should instead be searched for at `/Users/<USER>/.docker/run/docker.sock`\r\n- Maybe DOCKER_HOST default could be modified?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3702", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3702/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3702/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3702/events", "html_url": "https://github.com/ansible-community/molecule/issues/3702", "id": 1423338422, "node_id": "I_kwDOAsPDRs5U1mu2", "number": 3702, "title": "Clarify how dependencies are defined", "user": {"login": "PyDeps", "id": 109138844, "node_id": "U_kgDOBoFTnA", "avatar_url": "https://avatars.githubusercontent.com/u/109138844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PyDeps", "html_url": "https://github.com/PyDeps", "followers_url": "https://api.github.com/users/PyDeps/followers", "following_url": "https://api.github.com/users/PyDeps/following{/other_user}", "gists_url": "https://api.github.com/users/PyDeps/gists{/gist_id}", "starred_url": "https://api.github.com/users/PyDeps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PyDeps/subscriptions", "organizations_url": "https://api.github.com/users/PyDeps/orgs", "repos_url": "https://api.github.com/users/PyDeps/repos", "events_url": "https://api.github.com/users/PyDeps/events{/privacy}", "received_events_url": "https://api.github.com/users/PyDeps/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-10-26T02:24:16Z", "updated_at": "2023-04-20T11:49:16Z", "closed_at": "2023-04-20T11:49:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, In **molecule**, inappropriate dependency versioning constraints can cause risks.\r\n\r\nBelow are the dependencies and version constraints that the project is using\r\n\r\n```\r\nalabaster==0.7.12\r\nansi2html==1.8.0\r\nansible-compat==2.2.0\r\nansible-core==2.13.4\r\nansible-pygments==0.1.1\r\narrow==1.2.3\r\nattrs==22.1.0\r\nbabel==2.10.3\r\nbinaryornot==0.4.4\r\ncertifi==2022.6.15\r\ncffi==1.15.1\r\nchardet==5.0.0\r\ncharset-normalizer==2.1.1\r\nclick==8.1.3\r\nclick-help-colors==0.9.1\r\ncommonmark==0.9.1\r\ncookiecutter==2.1.1\r\ncoverage==6.4.4\r\ncryptography==37.0.4\r\ndistro==1.7.0\r\ndocutils==0.17.1\r\nenrich==1.2.7\r\nexecnet==1.9.0\r\nfilelock==3.8.0\r\nidna==3.3\r\nimagesize==1.4.1\r\nimportlib-metadata==4.12.0\r\nimportlib-resources==5.9.0\r\niniconfig==1.1.1\r\njinja2==3.1.2\r\njinja2-time==0.2.0\r\njsonschema==4.16.0\r\nmarkupsafe==2.1.1\r\nmore-itertools==8.14.0\r\npackaging==21.3\r\npexpect==4.8.0\r\npkgutil-resolve-name==1.3.10\r\npluggy==1.0.0\r\nptyprocess==0.7.0\r\npy==1.11.0\r\npycparser==2.21\r\npygments==2.13.0\r\npyparsing==3.0.9\r\npyrsistent==0.18.1\r\npytest==7.1.3\r\npytest-cov==3.0.0\r\npytest-forked==1.4.0\r\npytest-html==3.1.1\r\npytest-metadata==2.0.2\r\npytest-mock==3.8.2\r\npytest-plus==0.2\r\npytest-testinfra==6.8.0\r\npytest-xdist==2.5.0\r\npython-dateutil==2.8.2\r\npython-slugify==6.1.2\r\npytz==2022.2.1\r\npyyaml==6.0\r\nrequests==2.28.1\r\nresolvelib==0.8.1\r\nrich==12.5.1\r\nsimplejson==3.17.6\r\nsix==1.16.0\r\nsnowballstemmer==2.2.0\r\nsphinx==5.1.1\r\nsphinx-ansible-theme==0.9.1\r\nsphinx-notfound-page==0.8.3\r\nsphinx-rtd-theme==1.0.0\r\nsphinxcontrib-applehelp==1.0.2\r\nsphinxcontrib-devhelp==1.0.2\r\nsphinxcontrib-htmlhelp==2.0.0\r\nsphinxcontrib-jsmath==1.0.1\r\nsphinxcontrib-qthelp==1.0.3\r\nsphinxcontrib-serializinghtml==1.1.5\r\nsubprocess-tee==0.3.5\r\ntext-unidecode==1.3\r\ntomli==2.0.1\r\ntyping-extensions==4.3.0\r\nurllib3==1.26.12\r\nzipp==3.8.1\r\n```\r\n\r\nThe version constraint **==** will introduce the risk of dependency conflicts because the scope of dependencies is too strict.\r\nThe version constraint **No Upper Bound** and **\\*** will introduce the risk of the missing API Error because the latest version of the dependencies may remove some APIs.\r\n\r\nAfter further analysis, in this project,\r\nThe version constraint of dependency **ansible-compat** can be changed to *>=0.2.0,<=2.2.1*.\r\nThe version constraint of dependency **cookiecutter** can be changed to *>=0.5,<=2.1.1*.\r\nThe version constraint of dependency **enrich** can be changed to *>=1.1,<=1.2.7*.\r\nThe version constraint of dependency **jsonschema** can be changed to *>=2.0.0,<=4.6.0*.\r\nThe version constraint of dependency **pluggy** can be changed to *>=0.3.0,<=1.0.0.dev0*.\r\nThe version constraint of dependency **rich** can be changed to *>=0.2.0,<=12.6.0a2*.\r\n\r\nThe above modification suggestions can reduce the dependency conflicts as much as possible, \r\nand introduce the latest version as much as possible without calling Error in the projects.\r\n\r\nThe invocation of the current project includes all the following methods.\r\n\r\n<details><summary>The calling methods from the ansible-compat</summary>\r\n <pre>ansible_compat.runtime.Runtime\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the cookiecutter</summary>\r\n <pre>cookiecutter.main.cookiecutter\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the enrich</summary>\r\n <pre>enrich.logging.RichHandler\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the jsonschema</summary>\r\n <pre>jsonschema.validate\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the pluggy</summary>\r\n <pre>pluggy.PluginManager.load_setuptools_entrypoints\r\npluggy.PluginManager.get_plugins\r\npluggy.PluginManager\r\npluggy.PluginManager.get_name\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the rich</summary>\r\n <pre>rich.theme.Theme\r\nrich.table.Table.add_column\r\nrich.table.Table\r\nrich.table.Table.add_row\r\nrich.syntax.Syntax\r\n</pre>\r\n</details>\r\n<details><summary>The calling methods from the all methods</summary>\r\n <pre>self.options.get\r\nmolecule.command.base.execute_cmdline_scenarios\r\nself.Shell.super.__init__\r\nself._load_file\r\ncommand\r\nself._config.state.reset\r\nrich.syntax.Syntax\r\nos.environ.get\r\nApp\r\nsysexit\r\ninspect.getfile\r\nt.from_string.from_string\r\ncollections.defaultdict\r\nself.__str__\r\nmerge_dicts\r\noptions.get\r\nrepr\r\nb.items\r\nRole.execute\r\nself._verify\r\nsetattr\r\nwarnings.warn\r\nos.removedirs\r\nmolecule.util.safe_load_file\r\ndata.items\r\nself._get_defaults\r\npathlib.Path\r\nsubprocess.run\r\nconsole_options.copy\r\nmolecule.command.base.get_configs\r\nd.Path.mkdir\r\nInvalidInterpolation\r\nsuper\r\nuuid.uuid4\r\nself.options.get.get\r\nself.config.get\r\nself._config.write\r\nmolecule.util.dict2args\r\ncopy.deepcopy\r\nmo.group.startswith\r\nself._get_ssh_connection_options.append\r\nself.__dict__.get\r\nmolecule.config.Config\r\ndict\r\nself._get_instance_config.get\r\nrich.table.Table.add_column\r\nos.path.expanduser.seek\r\ncopy.deepcopy.keys\r\nself._interpolate\r\nlist.append\r\ntask_line.re.search.groups\r\nmolecule.scenarios.Scenarios.sequence\r\ninvoker.execute\r\nos.getcwd.split\r\njinja2.Environment\r\nself._get_config\r\nself._config.provisioner.abs_path\r\nself._config.provisioner.converge\r\n_verify_configs\r\nmolecule.config.molecule_directory\r\nsysexit_with_message\r\nmolecule.scenario.Scenario\r\nx.startswith\r\nlogging.getLogger.setLevel\r\nself.connection_options\r\nvalue.str.lower\r\nself._write_state_file\r\nself._get_plugin_directory\r\nself.__module__.split\r\nself._reget_config\r\nfrozenset.union\r\nself.AnsibleGalaxyBase.super.__init__\r\nself._default_to_regular.items\r\nmolecule_prepender\r\nsafe_dump\r\nyaml.safe_load\r\nmolecule.command.base.click_command_ex\r\nself._resolve_template_dir\r\nlogging.getLogger.critical\r\nstr.items\r\nmolecule.scenarios.Scenarios._get_matrix\r\nself.Ansible.super.__init__\r\nself._combine\r\nmolecule.util.safe_load_file.items\r\nt.from_string.render\r\nself.api.verifiers.get\r\nmolecule.text.strip_ansi_escape\r\nscenario_names.collections.Counter.items\r\nself._config.driver.get_playbook\r\nLOG_LEVEL_LUT.get\r\nmolecule.interpolation.Interpolator\r\nself._vivify\r\npluggy.PluginManager.get_plugins\r\nself._created\r\nself._get_modules_directories\r\nre.sub\r\nself._config.driver.login_cmd_template.format\r\ntype.__call__.after_init\r\nmolecule.api.drivers\r\nmolecule.util.merge\r\nself.filter_options\r\nself._config.provisioner.syntax\r\nself._config.state.change_state\r\nfilter\r\nmolecule.util.verbose_flag\r\nline.startswith\r\nopen_file\r\nmolecule.util.render_template\r\nmolecule.version\r\nUserListMap.append\r\n_print_tabulate_data\r\nexecute_subcommand\r\nself._config.provisioner.destroy\r\nos.path.join\r\nself._link_or_update_vars\r\nmolecule.text.underscore\r\nself._validate\r\nlist\r\nmolecule.text.camelize\r\nclick.Choice\r\nself._remove_vars\r\nself._get_bundled_driver_playbook\r\nget_configs\r\nmolecule.logger.set_log_level\r\ncollections.Counter\r\nlogging.getLogger.warning\r\nself._default_to_regular.modules_dir\r\nos.path.isdir\r\nvalue.str.lower.strip\r\nself._get_playbook\r\nsorted\r\nmolecule_directory\r\nself._default_data\r\ncmd_args.get\r\nfunctools.wraps\r\natexit.register\r\nos.makedirs\r\ntext.splitlines\r\ntime.time\r\nresult.append\r\nc.get\r\nself._config.provisioner.verify\r\nmain.add_command\r\nmolecule.scenarios.Scenarios\r\nmolecule.provisioner.ansible.Ansible\r\nenrich.logging.RichHandler\r\nsubprocess.CalledProcessError\r\nself._command_args.api.verifiers.template_dir\r\na.lower.lower\r\nmolecule.platforms.Platforms\r\nos.path.basename\r\nmolecule.util.abs_path.extend\r\nmolecule.dependency.ansible_galaxy.AnsibleGalaxy\r\nmolecule.state.State\r\nmolecule.util.abs_path.append\r\nkey.env.split\r\nfcntl.lockf\r\nsuper.execute\r\nself.args.get\r\nUserListMap\r\nsys.exit\r\nself._command_args.api.drivers.template_dir\r\nmolecule.util.print_as_yaml\r\nenumerate\r\nself._get_filter_plugin_directory\r\nclick.option\r\ncommand_args.get\r\nos.path.abspath\r\nglob.glob\r\nlen\r\nprint\r\nre.search\r\nansible_env.copy.items\r\nself._get_config_template\r\nmap\r\nstring.replace.lower\r\nmolecule.api.verifiers\r\nmolecule.util.abs_path\r\npluggy.PluginManager.load_setuptools_entrypoints\r\nmolecule.util._filter_platforms\r\nlist.extend\r\nto_bool\r\nisinstance\r\njson.load\r\ntype.__call__\r\nmapping.get\r\nshutil.rmtree\r\nscenario._remove_scenario_state_directory\r\nself._verify_inventory\r\nself._config.driver.status\r\nself._non_idempotent_tasks\r\nself._config.dependency.execute\r\nstring.self.templater.substitute\r\nbool\r\nTypeError\r\nshould_do_markup\r\nstream.read\r\nwarnings.filterwarnings\r\nos.popen.read.split\r\nos.popen.read\r\nfnmatch.fnmatch\r\nself._get_ansible_playbook.execute\r\nos.getcwd\r\nsuper.__init_subclass__\r\nself.AnsibleGalaxy.super.__init__\r\nmolecule.scenarios.Scenarios.print_matrix\r\nrich.table.Table\r\nself._has_requirements_file\r\nparallelize\r\nself._process_templates\r\nself.links.items\r\ndriver.required_collections.items\r\nos.path.isabs\r\nmolecule.dependency.shell.Shell\r\nos.umask\r\nmolecule.logger.get_section_loggers\r\nself.Delegated.super.__init__\r\nScenario.execute\r\nx.rstrip\r\nos.mkdir\r\nlogging.getLogger.debug\r\nephemeral_directory\r\nself._config.provisioner.check\r\nself.add_cli_arg\r\nplatform.get\r\nint\r\nself._config.driver.required_collections.items\r\nlogging.getLogger.addHandler\r\nself._config.config.get\r\nself.abs_path\r\nself.SafeDumper.super.increase_indent\r\nenv.items.copy\r\nrich.syntax.Syntax.append\r\nwarnings.catch_warnings\r\ninit.add_command\r\nself.host_vars.items\r\nself._get_state_file\r\nos.environ.split\r\nmolecule.command.base._get_subcommand\r\nself._write_inventory\r\nos.unlink\r\nos.path.expanduser.write\r\nself._config.command_args.get\r\nmapping.get.startswith\r\nmolecule.util._parallelize_platforms\r\nstr.__lt__\r\nself._get_driver_name\r\nos.getenv\r\nself._config.provisioner.prepare\r\nself.UserListMap.super.__getitem__\r\nfrozenset\r\nre.compile\r\n_print_yaml_data\r\nself._add_or_update_vars\r\nsys.stdout.isatty\r\nmolecule.util.lookup_config_file\r\nzip\r\nfind_vcs_root\r\nmolecule.util.open_file\r\nmolecule.model.schema_v3.validate\r\nctx.obj.get\r\njoin\r\npluggy.PluginManager.get_name\r\nclick.argument\r\nansible_env.copy.update\r\nself._get_hostname\r\nmolecule.util.merge_dicts.get\r\nself._get_ssh_connection_options\r\nmolecule.util.safe_load\r\nimportlib.metadata.version\r\nmolecule.util.BakedCommand\r\nmolecule.util.write_file\r\nword.split\r\ndata.decode.decode\r\nx.capitalize\r\nos.walk\r\nself._config.driver.login_options\r\nself._is_idempotent\r\nself.UserListMap.super.append\r\nmolecule.text.strip_ansi_escape.split\r\nlogging.getLogger\r\nos.path.islink\r\nmolecule.util.validate_parallel_cmd_args\r\ndriver.reset\r\nk.prefix.replace\r\nstr\r\nmolecule.console.console.export_html\r\nRole\r\nmolecule.util.boolean\r\nmo.group\r\nself._config.runtime.require_collection\r\nrange\r\nos.path.dirname\r\nos.path.isfile\r\nUserListMap.sort\r\nmolecule.config.command.execute\r\nself._config.verifier.execute\r\nm.group\r\nexecute_scenario\r\nmolecule.app.app.runtime.exec\r\ntime.sleep\r\nSystemExit\r\ncopy.deepcopy.pop\r\nself._get_ansible_playbook\r\nrich.style.Style\r\ndict.items\r\nmolecule.shell.main\r\nself._get_instance_config\r\nenrich.console.Console\r\nself._config.provisioner.manage_inventory\r\nstrip\r\ntraceback.format_exc\r\npackaging.version.Version\r\nself._get_data\r\nos.path.expanduser\r\nself._config.provisioner.cleanup\r\nmolecule.console.should_do_markup\r\nansible_compat.runtime.Runtime\r\nstatus_list.append\r\nsafe_load\r\nself._converged\r\nset_env_from_file\r\nself._scenarios.pop\r\nself._filter_for_scenario\r\njsonschema.validate\r\nmolecule.util.merge_dicts\r\nself._get_playbook_directory\r\nstring.replace.replace\r\nself._validate_template_dir\r\nany\r\nscenario.prune\r\nself._default_to_regular\r\nself._absolute_path_for\r\nrich.table.Table.add_row\r\nself.bake\r\nself._config.driver.sanity_checks\r\nwrapper\r\nre.match\r\nself._data.get\r\nmolecule.util.filter_verbose_permutation\r\nscenario.config.command_args.get\r\nmolecule.util.sysexit_with_message\r\nos.path.exists\r\nmolecule.command.base.execute_subcommand\r\nself._config.provisioner.write_config\r\nself._config.config.copy\r\nmolecule.interpolation.Interpolator.interpolate\r\nres.append\r\nScenario\r\nself.execute_with_retries\r\nself._setup\r\nself._filter_for_scenario.sort\r\nglob_str.replace.replace\r\nmolecule.util.run_command\r\nre.compile.match\r\nself._config.state.converged.str.lower\r\nos.path.expanduser.read\r\nmolecule.dependency.ansible_galaxy.collections.Collections\r\nrich.theme.Theme\r\nmolecule.text.title\r\np\r\nlogging.getLogger.info\r\nmolecule.util.bool2args\r\npluggy.PluginManager\r\nself._config.state.created.str.lower\r\nprint_debug\r\nRuntimeError\r\nopen\r\nmolecule.util.safe_dump\r\nself._config.provisioner.create\r\nnext\r\nstatuses.extend\r\nself._get_login\r\ncookiecutter.main.cookiecutter\r\nctx.exit\r\nlogging.getLogger.error\r\nprint_environment_vars\r\nclick.command\r\nfunc\r\ncopy.copy\r\nself._get_ansible_playbook.add_cli_arg\r\ncopy.copy.keys\r\nself.Login.super.__init__\r\nrole_name.split\r\nmolecule.status.Status\r\nshlex.split\r\ninvoker._has_requirements_file\r\nstring.split\r\ngetattr\r\nos.path.expanduser.close\r\nmolecule.dependency.ansible_galaxy.roles.Roles\r\nmolecule.logger.configure\r\nmolecule.util.os_walk\r\nself._normalize_playbook\r\nmolecule.util.sysexit\r\nclick.group\r\nself.pattern.sub\r\nmolecule.console.console.print\r\nsubcommand_and_args.split\r\nos.remove\r\nos.symlink\r\nself.templater\r\nm.group.upper\r\nself.command_args.get\r\nself._invalid\r\nyaml.dump\r\nline.re.search.groups\r\nself.Delegated.super._created\r\nself._config.provisioner.side_effect\r\nmolecule.provisioner.ansible_playbook.AnsiblePlaybook\r\nos.popen\r\nself.name.__hash__\r\nmolecule.command.base.click_group_ex\r\nmo.group.partition\r\nself._config.driver.ansible_connection_options\r\ndatetime.date.today\r\nself._config.project_directory.rsplit\r\nscenario.config.runtime.prepare_environment\r\nmolecule.provisioner.ansible_playbooks.AnsiblePlaybooks\r\n</pre>\r\n</details>\r\n\r\n@developer\r\nCould please help me check this issue?\r\nMay I pull a request to fix it?\r\nThank you very much.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3702/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3702/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3700", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3700/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3700/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3700/events", "html_url": "https://github.com/ansible-community/molecule/pull/3700", "id": 1422538796, "node_id": "PR_kwDOAsPDRs5BgQcL", "number": 3700, "title": "Add support for cgroupns_mode", "user": {"login": "zhan9san", "id": 32819197, "node_id": "MDQ6VXNlcjMyODE5MTk3", "avatar_url": "https://avatars.githubusercontent.com/u/32819197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhan9san", "html_url": "https://github.com/zhan9san", "followers_url": "https://api.github.com/users/zhan9san/followers", "following_url": "https://api.github.com/users/zhan9san/following{/other_user}", "gists_url": "https://api.github.com/users/zhan9san/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhan9san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhan9san/subscriptions", "organizations_url": "https://api.github.com/users/zhan9san/orgs", "repos_url": "https://api.github.com/users/zhan9san/repos", "events_url": "https://api.github.com/users/zhan9san/events{/privacy}", "received_events_url": "https://api.github.com/users/zhan9san/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-10-25T14:13:52Z", "updated_at": "2022-10-27T02:53:43Z", "closed_at": "2022-10-25T14:29:48Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3700", "html_url": "https://github.com/ansible-community/molecule/pull/3700", "diff_url": "https://github.com/ansible-community/molecule/pull/3700.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3700.patch", "merged_at": "2022-10-25T14:29:48Z"}, "body": "Related to #3665\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3700/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3698", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3698/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3698/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3698/events", "html_url": "https://github.com/ansible-community/molecule/issues/3698", "id": 1422110221, "node_id": "I_kwDOAsPDRs5Uw64N", "number": 3698, "title": "Don't run the cron scheduled tox github workflow on forks", "user": {"login": "zeitounator", "id": 176776, "node_id": "MDQ6VXNlcjE3Njc3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/176776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zeitounator", "html_url": "https://github.com/zeitounator", "followers_url": "https://api.github.com/users/zeitounator/followers", "following_url": "https://api.github.com/users/zeitounator/following{/other_user}", "gists_url": "https://api.github.com/users/zeitounator/gists{/gist_id}", "starred_url": "https://api.github.com/users/zeitounator/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zeitounator/subscriptions", "organizations_url": "https://api.github.com/users/zeitounator/orgs", "repos_url": "https://api.github.com/users/zeitounator/repos", "events_url": "https://api.github.com/users/zeitounator/events{/privacy}", "received_events_url": "https://api.github.com/users/zeitounator/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-10-25T08:55:56Z", "updated_at": "2022-10-25T10:11:08Z", "closed_at": "2022-10-25T10:11:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "*Note: Not really a bug (but didn't know where else to put it), more of an annoyance and not related to molecule itself but to the CI.*\r\n\r\nThe following describes when to run the tox workflow in github actions\r\nhttps://github.com/ansible-community/molecule/blob/6fdc8478662353ea8017d06f5027d8fc3e8d3ec8/.github/workflows/tox.yml#L3-L13\r\n\r\nThe cron schedule is triggered everywhere regardless of the actual repo. So it it also starts in each fork and most probably fails everywhere [as it does in my current fork](https://github.com/zeitounator/molecule/actions/workflows/tox.yml) and sending mail alerts for failure if configured.\r\n\r\nI see two problems with this:\r\n- it is annoying for the owner of the fork\r\n- it is consuming computing resources for somethings that does not need to happen at all\r\n\r\n[Reading a bit on the subject](https://github.com/orgs/community/discussions/26684), it seems there is not yet any clean and straightforward way to fix that. The only workarround for the moment is to put a condition on each job in the workflow looking something like:\r\n```yaml\r\njobs:\r\n  build:\r\n    if: >- \r\n      (github.event_name == 'schedule' && github.repository == 'ansible-community/molecule')\r\n      || (github.event_name != 'schedule')\r\n```\r\nwhich is definitively ugly and inefficient (needs to be repeated on each job in the workflow...)\r\n\r\nThere is [a suggestion](https://github.com/community/community/discussions/16109) to enhance the schedule declaration with new keywords but it has not been picked-up nor answered yet.\r\n\r\nI did not produce a PR as I feel the current workaround is not satisfactory. But I'm happy to do so. Just tell me.\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\nN/A: CI based\r\n\r\nMolecule installation method (one of):\r\nN/A: CI based\r\n\r\nAnsible installation method (one of):\r\nN/A: CI based\r\n\r\nDetail any linters or test runners used:\r\nNone\r\n\r\n# Desired Behavior\r\n\r\nThe cron scheduled tox workflow does not run on forked repositories\r\n\r\n# Actual Behaviour\r\n\r\nThe cron scheduled tox workflow is running every day on forked repositories (and alerting for failure, at least on my fork)\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3698/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3691", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3691/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3691/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3691/events", "html_url": "https://github.com/ansible-community/molecule/issues/3691", "id": 1421007542, "node_id": "I_kwDOAsPDRs5Ustq2", "number": 3691, "title": "Using env in a molecule.yml isn't processed as it's marked as an array", "user": {"login": "Bokazan", "id": 89727990, "node_id": "MDQ6VXNlcjg5NzI3OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/89727990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bokazan", "html_url": "https://github.com/Bokazan", "followers_url": "https://api.github.com/users/Bokazan/followers", "following_url": "https://api.github.com/users/Bokazan/following{/other_user}", "gists_url": "https://api.github.com/users/Bokazan/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bokazan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bokazan/subscriptions", "organizations_url": "https://api.github.com/users/Bokazan/orgs", "repos_url": "https://api.github.com/users/Bokazan/repos", "events_url": "https://api.github.com/users/Bokazan/events{/privacy}", "received_events_url": "https://api.github.com/users/Bokazan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-24T15:20:32Z", "updated_at": "2022-10-25T15:01:49Z", "closed_at": "2022-10-25T15:01:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\nUsing env in a molecule.yml isn't processed as it's marked as an array. Adding a - to the list doesn't solve it either.\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n  python version = 3.8.10 (default, Jun 22 2022, 20:18:18) [GCC 9.4.0]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.2 using python 3.8 \r\n    ansible:2.13.5\r\n    delegated:4.0.2 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip3 using a cloudinit config\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip using a cloudinit config\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nBefore the latest patch, the molecule container was created fine and ansible ran fine on the created container.\r\n\r\n# Actual Behaviour\r\n\r\nWe are using an openldap container (docker.io/osixia/openldap:1.4.0) which requires several environment inputs:\r\n\r\n    env:\r\n      LDAP_ORGANISATION: \"blabla\"\r\n      LDAP_DOMAIN: \"bla.local\"\r\n      LDAP_ADMIN_PASSWORD: \"reallygoodpassword\"\r\n      LDAP_READONLY_USER: \"true\"\r\n      LDAP_READONLY_USER_USERNAME: \"bla_user\"\r\n      LDAP_READONLY_USER_PASSWORD: \"reallygoodpassword\"\r\n \r\nWhen the run starts we see an error that this list isn't an array. \r\n\r\n _CRITICAL Failed to validate /default/molecule.yml_\r\n  \r\n _[\"{'LDAP_ORGANISATION': 'blabla', 'LDAP_DOMAIN': 'bla.local', 'LDAP_ADMIN_PASSWORD': 'reallygoodpassword', 'LDAP_READONLY_USER': 'true', 'LDAP_READONLY_USER_USERNAME': 'bla_user', 'LDAP_READONLY_USER_PASSWORD': 'reallygoodpassword'} is not of type 'array'\"]_\r\n\r\nSo we added a \"-\"  in front:\r\n\r\n    env:\r\n      - LDAP_ORGANISATION: \"blabla\"\r\n      - LDAP_DOMAIN: \"bla.local\"\r\n      - LDAP_ADMIN_PASSWORD: \"reallygoodpassword\"\r\n      - LDAP_READONLY_USER: \"true\"\r\n      - LDAP_READONLY_USER_USERNAME: \"bla_user\"\r\n      - LDAP_READONLY_USER_PASSWORD: \"reallygoodpassword\"\r\n \r\nThe molecule run starts, however the container creation now fails with the error:\r\n\r\n_argument 'env' is of type <class 'list'> and we were unable to convert to dict: <class 'list'> cannot be converted to a dict_\r\n\r\nWe also tried to put the env vars into a separate env.yml file, but this didn't work either.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3691/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3691/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3690", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3690/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3690/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3690/events", "html_url": "https://github.com/ansible-community/molecule/pull/3690", "id": 1416851946, "node_id": "PR_kwDOAsPDRs5BNTX2", "number": 3690, "title": "Platform `env` expects a dict of vars", "user": {"login": "zeitounator", "id": 176776, "node_id": "MDQ6VXNlcjE3Njc3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/176776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zeitounator", "html_url": "https://github.com/zeitounator", "followers_url": "https://api.github.com/users/zeitounator/followers", "following_url": "https://api.github.com/users/zeitounator/following{/other_user}", "gists_url": "https://api.github.com/users/zeitounator/gists{/gist_id}", "starred_url": "https://api.github.com/users/zeitounator/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zeitounator/subscriptions", "organizations_url": "https://api.github.com/users/zeitounator/orgs", "repos_url": "https://api.github.com/users/zeitounator/repos", "events_url": "https://api.github.com/users/zeitounator/events{/privacy}", "received_events_url": "https://api.github.com/users/zeitounator/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-20T15:38:13Z", "updated_at": "2022-10-23T11:57:30Z", "closed_at": "2022-10-21T08:43:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3690", "html_url": "https://github.com/ansible-community/molecule/pull/3690", "diff_url": "https://github.com/ansible-community/molecule/pull/3690.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3690.patch", "merged_at": "2022-10-21T08:43:53Z"}, "body": "Fixes #3684", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3690/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3689", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3689/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3689/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3689/events", "html_url": "https://github.com/ansible-community/molecule/issues/3689", "id": 1415457803, "node_id": "I_kwDOAsPDRs5UXiwL", "number": 3689, "title": "Move Driver JSONSchema Validation to Drivers.", "user": {"login": "dmlb2000", "id": 1504962, "node_id": "MDQ6VXNlcjE1MDQ5NjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1504962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmlb2000", "html_url": "https://github.com/dmlb2000", "followers_url": "https://api.github.com/users/dmlb2000/followers", "following_url": "https://api.github.com/users/dmlb2000/following{/other_user}", "gists_url": "https://api.github.com/users/dmlb2000/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmlb2000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmlb2000/subscriptions", "organizations_url": "https://api.github.com/users/dmlb2000/orgs", "repos_url": "https://api.github.com/users/dmlb2000/repos", "events_url": "https://api.github.com/users/dmlb2000/events{/privacy}", "received_events_url": "https://api.github.com/users/dmlb2000/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2022-10-19T19:10:04Z", "updated_at": "2023-04-19T17:40:06Z", "closed_at": "2023-04-19T17:40:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.13.5]\r\n  config file = None\r\n  configured module search path = ['/home/dmlb2000/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/dmlb2000/.virtualenvs/ansible-azure/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/dmlb2000/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/dmlb2000/.virtualenvs/ansible-azure/bin/ansible\r\n  python version = 3.10.7 (main, Sep  7 2022, 00:00:00) [GCC 12.2.1 20220819 (Red Hat 12.2.1-1)]\r\n  jinja version = 3.0.3\r\n  libyaml = True\r\nmolecule 4.0.1 using python 3.10\r\n    ansible:2.13.5\r\n    azurevm:0.3.1.dev4 from molecule_azurevm\r\n    delegated:4.0.1 from molecule\r\n    podman:2.0.3 from molecule_podman requiring collections: containers.podman>=1.7.0 ansible.posix>=1.3.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nInternal or private drivers are useful for companies and organizations to test against their internal services and configurations. These drivers often embed internal names and services to access credentials that will never be available for open source usage. However, these drivers are very useful internally standardizing testing environments.\r\n\r\n# Actual Behaviour\r\n\r\nThe JSONSchema validation is insufficient to include JSONSchema provided by private or internal molecule drivers and in its current (4.0.2) implementation breaks the usage of these drivers.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3689/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3689/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3688", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3688/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3688/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3688/events", "html_url": "https://github.com/ansible-community/molecule/issues/3688", "id": 1414952151, "node_id": "I_kwDOAsPDRs5UVnTX", "number": 3688, "title": "Testinfra Verifier Doesnt Support the \"directory Option\"", "user": {"login": "schwatvogel", "id": 572536, "node_id": "MDQ6VXNlcjU3MjUzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/572536?v=4", "gravatar_id": "", "url": "https://api.github.com/users/schwatvogel", "html_url": "https://github.com/schwatvogel", "followers_url": "https://api.github.com/users/schwatvogel/followers", "following_url": "https://api.github.com/users/schwatvogel/following{/other_user}", "gists_url": "https://api.github.com/users/schwatvogel/gists{/gist_id}", "starred_url": "https://api.github.com/users/schwatvogel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/schwatvogel/subscriptions", "organizations_url": "https://api.github.com/users/schwatvogel/orgs", "repos_url": "https://api.github.com/users/schwatvogel/repos", "events_url": "https://api.github.com/users/schwatvogel/events{/privacy}", "received_events_url": "https://api.github.com/users/schwatvogel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-19T13:13:07Z", "updated_at": "2022-10-21T08:46:49Z", "closed_at": "2022-10-21T08:46:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.13.4]\r\n  config file = None\r\n  configured module search path = ['/Users/xxx/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/xxx/projects/xxx/venv/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/xxx/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/xxx/projects/xxx/venv/bin/ansible\r\n  python version = 3.9.12 (main, Mar 26 2022, 15:44:31) [Clang 13.1.6 (clang-1316.0.21.2)]\r\n  jinja version = 3.1.1\r\n  libyaml = True\r\n\r\nmolecule 4.0.2 using python 3.9\r\n    ansible:2.13.4\r\n    delegated:4.0.2 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nTestinfa Provider should read `directory: ` config option to be able to use shared Test for all scenarios:\r\n\r\nExcerpt from molecule.yml\r\n```yaml\r\n....\r\nverifier:\r\n  name: testinfra\r\n  directory: ../../tests\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n % molecule check\r\nCRITICAL Failed to validate /Users/xxx/projects/xxxg/molecule/default/molecule.yml\r\n\r\n[\"Additional properties are not allowed ('directory' was unexpected)\"]\r\n```\r\nIt is still referenced as a valid Parameter [here](https://github.com/ansible-community/molecule/blob/20f5407758eb614549da35b7d7a77f81f2cea18a/src/molecule/verifier/testinfra.py#L69) and used in the code later on. But not in the unit tests [here](https://github.com/ansible-community/molecule/blob/14b2b2fef32667721fdbfbc11a157ebd2606e497/src/molecule/test/unit/model/v2/test_verifier_section.py#L27)\r\n```python\r\n@pytest.fixture\r\ndef _model_verifier_section_data():\r\n    return {\r\n        \"verifier\": {\r\n            \"name\": \"testinfra\",\r\n            \"enabled\": True,\r\n            \"options\": {\"foo\": \"bar\"},\r\n            \"env\": {\"FOO\": \"foo\", \"FOO_BAR\": \"foo_bar\"},\r\n            \"additional_files_or_dirs\": [\"foo\"],\r\n        }\r\n    }\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3688/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3688/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3687", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3687/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3687/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3687/events", "html_url": "https://github.com/ansible-community/molecule/pull/3687", "id": 1413719080, "node_id": "PR_kwDOAsPDRs5BCtow", "number": 3687, "title": "Fix schema", "user": {"login": "jsf9k", "id": 5521725, "node_id": "MDQ6VXNlcjU1MjE3MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5521725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsf9k", "html_url": "https://github.com/jsf9k", "followers_url": "https://api.github.com/users/jsf9k/followers", "following_url": "https://api.github.com/users/jsf9k/following{/other_user}", "gists_url": "https://api.github.com/users/jsf9k/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsf9k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsf9k/subscriptions", "organizations_url": "https://api.github.com/users/jsf9k/orgs", "repos_url": "https://api.github.com/users/jsf9k/repos", "events_url": "https://api.github.com/users/jsf9k/events{/privacy}", "received_events_url": "https://api.github.com/users/jsf9k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-18T19:13:31Z", "updated_at": "2022-10-24T15:35:53Z", "closed_at": "2022-10-19T01:49:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3687", "html_url": "https://github.com/ansible-community/molecule/pull/3687", "diff_url": "https://github.com/ansible-community/molecule/pull/3687.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3687.patch", "merged_at": "2022-10-19T01:49:01Z"}, "body": "_I am creating this new PR after rebasing @davedittrich's PR #3667.  I rebased the PR branch from #3667 onto `main`, but then @davedittrich closed his PR so I am opening this new one._\r\n\r\n**Description compiled from the original PR:**\r\nPR #3638 removed a central part of the schema that broke `pytest-testinfra`. I spent a little time looking into it and it looked like the schema validation is more a \"does it parse\" than \"does it support all possible attributes.\"\r\n\r\nA unit test was also broken in #3638: [`src/molecule/test/unit/model/v2/test_verifier_section.py`](https://github.com/ansible-community/molecule/pull/3638/files).\r\n\r\nResolves #3686.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3687/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3686", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3686/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3686/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3686/events", "html_url": "https://github.com/ansible-community/molecule/issues/3686", "id": 1412101534, "node_id": "I_kwDOAsPDRs5UKvWe", "number": 3686, "title": "Directory attribute disallowed for verifier", "user": {"login": "jsf9k", "id": 5521725, "node_id": "MDQ6VXNlcjU1MjE3MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5521725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsf9k", "html_url": "https://github.com/jsf9k", "followers_url": "https://api.github.com/users/jsf9k/followers", "following_url": "https://api.github.com/users/jsf9k/following{/other_user}", "gists_url": "https://api.github.com/users/jsf9k/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsf9k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsf9k/subscriptions", "organizations_url": "https://api.github.com/users/jsf9k/orgs", "repos_url": "https://api.github.com/users/jsf9k/repos", "events_url": "https://api.github.com/users/jsf9k/events{/privacy}", "received_events_url": "https://api.github.com/users/jsf9k/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-17T19:30:28Z", "updated_at": "2022-10-19T01:49:03Z", "closed_at": "2022-10-19T01:49:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible [core 2.12.9]\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/jeremy_frasier/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/jeremy_frasier/.pyenv/versions/3.10.7/envs/ansible-role-clamav/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/jeremy_frasier/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/jeremy_frasier/.pyenv/versions/ansible-role-clamav/bin/ansible\r\n  python version = 3.10.7 (main, Sep  8 2022, 13:34:47) [GCC 12.2.0]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.2 using python 3.10 \r\n    ansible:2.12.9\r\n    delegated:4.0.2 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nJust `molecule` + `testinfra`.\r\n\r\n# Desired Behavior\r\n\r\nThe `molecule` schema check [should allow for a `directory` key immediately under `verifier` in the `molecule.yml` file](https://molecule.readthedocs.io/en/latest/configuration.html#testinfra).\r\n\r\n# Actual Behaviour\r\n\r\nThe `molecule` schema check incorrectly reports an error when there is a `directory` key immediately under `verifier` in the `molecule.yml` file.\r\n\r\nPlease see [here](https://github.com/cisagov/ansible-role-clamav/actions/runs/3266214506/jobs/5369624546) for an example of the erroneous behavior.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3686/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3686/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3684", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3684/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3684/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3684/events", "html_url": "https://github.com/ansible-community/molecule/issues/3684", "id": 1411507406, "node_id": "I_kwDOAsPDRs5UIeTO", "number": 3684, "title": "molecule.yml: platforms[].env cannot be a dictionary", "user": {"login": "ollie1", "id": 4852828, "node_id": "MDQ6VXNlcjQ4NTI4Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/4852828?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ollie1", "html_url": "https://github.com/ollie1", "followers_url": "https://api.github.com/users/ollie1/followers", "following_url": "https://api.github.com/users/ollie1/following{/other_user}", "gists_url": "https://api.github.com/users/ollie1/gists{/gist_id}", "starred_url": "https://api.github.com/users/ollie1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ollie1/subscriptions", "organizations_url": "https://api.github.com/users/ollie1/orgs", "repos_url": "https://api.github.com/users/ollie1/repos", "events_url": "https://api.github.com/users/ollie1/events{/privacy}", "received_events_url": "https://api.github.com/users/ollie1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-17T12:39:49Z", "updated_at": "2022-10-21T08:43:55Z", "closed_at": "2022-10-21T08:43:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```bash\r\n$ ansible --version && molecule --version\r\nansible [core 2.13.2]\r\n  config file = None\r\n  configured module search path = ['/home/runner/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.8/site-packages/ansible\r\n  ansible collection location = /home/runner/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.13 (default, Jun 24 2022, 15:27:57) [GCC 8.5.0 20210514 (Red Hat 8.5.0-13)]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.2 using python 3.8 \r\n    ansible:2.13.2\r\n    delegated:4.0.2 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nMolecule 4.0.2 should work with the same molecule.yml as 4.0.1\r\n\r\n# Actual Behaviour\r\n\r\nTo reproduce, generate a standard molecule role as follows:\r\n```bash\r\nmolecule init role acme.myrole -d docker\r\n```\r\n\r\nModify molecule.yml to add env as follows\r\n```yml\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nplatforms:\r\n  - name: instance\r\n    image: quay.io/centos/centos:stream8\r\n    pre_build_image: true\r\n    env:\r\n      http_proxy: http://127.0.0.1:8080\r\nprovisioner:\r\n  name: ansible\r\nverifier:\r\n  name: ansible\r\n```\r\n\r\nRun `molecule create`, and observe that an error is shown.\r\n```bash\r\n$ molecule create\r\nCRITICAL Failed to validate /runner/home/username/myrole/molecule/default/molecule.yml\r\n\r\n[\"{'http_proxy': 'http://127.0.0.1:8080'} is not of type 'array'\"]\r\n```\r\n\r\nIn molecule 4.0.1, this works as expected. In 4.0.2 this behaviour has broken, and we must change the env keys in our molecule.yml to an array.  If this is intentional, it's a breaking change and it should be mentioned it in the release note - hopefully it's just a bug caused by the json schema changes.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3684/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3684/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3681", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3681/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3681/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3681/events", "html_url": "https://github.com/ansible-community/molecule/pull/3681", "id": 1408305368, "node_id": "PR_kwDOAsPDRs5Aw0C-", "number": 3681, "title": "Support ANSIBLE_COLLECTIONS_PATH environment var", "user": {"login": "nre-ableton", "id": 16208985, "node_id": "MDQ6VXNlcjE2MjA4OTg1", "avatar_url": "https://avatars.githubusercontent.com/u/16208985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nre-ableton", "html_url": "https://github.com/nre-ableton", "followers_url": "https://api.github.com/users/nre-ableton/followers", "following_url": "https://api.github.com/users/nre-ableton/following{/other_user}", "gists_url": "https://api.github.com/users/nre-ableton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nre-ableton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nre-ableton/subscriptions", "organizations_url": "https://api.github.com/users/nre-ableton/orgs", "repos_url": "https://api.github.com/users/nre-ableton/repos", "events_url": "https://api.github.com/users/nre-ableton/events{/privacy}", "received_events_url": "https://api.github.com/users/nre-ableton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-10-13T19:16:15Z", "updated_at": "2022-10-24T18:06:52Z", "closed_at": "2022-10-19T15:22:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3681", "html_url": "https://github.com/ansible-community/molecule/pull/3681", "diff_url": "https://github.com/ansible-community/molecule/pull/3681.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3681.patch", "merged_at": "2022-10-19T15:22:57Z"}, "body": "This commit adds supports for reading ANSIBLE_COLLECTIONS_PATH from the environment, in a similar manner to how ANSIBLE_ROLES_PATH is handled.\r\n\r\n\u2014---\r\n\r\nFixes https://github.com/ansible-community/molecule/issues/3663", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3681/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3681/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3680", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3680/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3680/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3680/events", "html_url": "https://github.com/ansible-community/molecule/pull/3680", "id": 1406286712, "node_id": "PR_kwDOAsPDRs5AqBj7", "number": 3680, "title": "Use FQCN at any point I found", "user": {"login": "muellerbe", "id": 1748373, "node_id": "MDQ6VXNlcjE3NDgzNzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1748373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muellerbe", "html_url": "https://github.com/muellerbe", "followers_url": "https://api.github.com/users/muellerbe/followers", "following_url": "https://api.github.com/users/muellerbe/following{/other_user}", "gists_url": "https://api.github.com/users/muellerbe/gists{/gist_id}", "starred_url": "https://api.github.com/users/muellerbe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muellerbe/subscriptions", "organizations_url": "https://api.github.com/users/muellerbe/orgs", "repos_url": "https://api.github.com/users/muellerbe/repos", "events_url": "https://api.github.com/users/muellerbe/events{/privacy}", "received_events_url": "https://api.github.com/users/muellerbe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-12T14:08:34Z", "updated_at": "2022-11-24T15:21:53Z", "closed_at": "2022-10-13T02:02:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3680", "html_url": "https://github.com/ansible-community/molecule/pull/3680", "diff_url": "https://github.com/ansible-community/molecule/pull/3680.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3680.patch", "merged_at": "2022-10-13T02:02:38Z"}, "body": "Fixes: #3481\r\n\r\nI found some places without FQCN, here they are ;)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3680/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3680/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3678", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3678/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3678/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3678/events", "html_url": "https://github.com/ansible-community/molecule/issues/3678", "id": 1401620799, "node_id": "I_kwDOAsPDRs5Tiwk_", "number": 3678, "title": "Following getting started fails to complete", "user": {"login": "brianbruggeman", "id": 1350114, "node_id": "MDQ6VXNlcjEzNTAxMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1350114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianbruggeman", "html_url": "https://github.com/brianbruggeman", "followers_url": "https://api.github.com/users/brianbruggeman/followers", "following_url": "https://api.github.com/users/brianbruggeman/following{/other_user}", "gists_url": "https://api.github.com/users/brianbruggeman/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianbruggeman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianbruggeman/subscriptions", "organizations_url": "https://api.github.com/users/brianbruggeman/orgs", "repos_url": "https://api.github.com/users/brianbruggeman/repos", "events_url": "https://api.github.com/users/brianbruggeman/events{/privacy}", "received_events_url": "https://api.github.com/users/brianbruggeman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-10-07T20:08:46Z", "updated_at": "2023-01-17T10:38:01Z", "closed_at": "2022-10-12T16:41:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible [core 2.13.4]\r\n  config file = <redacted>/repos/mine/molecule-test/ansible.cfg\r\n  configured module search path = ['<redacted>/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = <redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/ansible\r\n  ansible collection location = <redacted>/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = <redacted>/.virtualenvs/mol-test/bin/ansible\r\n  python version = 3.10.6 (main, Aug 30 2022, 05:12:36) [Clang 13.1.6 (clang-1316.0.21.2.5)]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.1 using python 3.10 \r\n    ansible:2.13.4\r\n    delegated:4.0.1 from molecule\r\n    docker:2.1.0 from molecule_docker requiring collections: community.docker>=3.0.2 ansible.posix>=1.4.0\r\n```\r\n\r\nMolecule installation method:  pip\r\n\r\nAnsible installation method: pip\r\n\r\n# Desired Behavior\r\n\r\nI am following the documentation provided for [getting started with molecule](https://molecule.readthedocs.io/en/latest/getting-started.html).\r\n\r\nFirst step is:\r\n```\r\nmolecule init role acme.my_new_role --driver-name docker\r\n```\r\n\r\nMy expectation is that this behavior is (more or less) identical to molecule 3.4, which had a fantastic DX.  It should produce a skeleton role that I can then update.\r\n\r\n\r\n# Actual Behaviour\r\n\r\nImmediately, there's an attempt to ssh.  Of course the folder is created, but the failure condition provided below doesn't really elucidate what's happening.\r\n\r\n```\r\nmolecule init role acme.my_new_role --driver-name docker\r\n\r\nlocalhost | UNREACHABLE!: Failed to connect to the host via ssh: ssh: connect to host localhost port 22: Connection refused\r\nWARNING  Retrying execution failure 4 of: ansible localhost -o -m lineinfile -a path=my_new_role/meta/main.yml line=\"  namespace: acme\" insertafter=\"  author: your name\"\r\nTraceback (most recent call last):\r\n  File \"<redacted>/.virtualenvs/mol-test/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"<redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/click/core.py\", line 1130, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"<redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/click/core.py\", line 1055, in main\r\n    rv = self.invoke(ctx)\r\n  File \"<redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/click/core.py\", line 1657, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"<redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/click/core.py\", line 1657, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"<redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/click/core.py\", line 1404, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"<redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/click/core.py\", line 760, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"<redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"<redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/molecule/command/init/role.py\", line 180, in role\r\n    r.execute()\r\n  File \"<redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/molecule/command/init/role.py\", line 104, in execute\r\n    util.run_command(cmd, check=True)\r\n  File \"<redacted>/.virtualenvs/mol-test/lib/python3.10/site-packages/molecule/util.py\", line 157, in run_command\r\n    raise CalledProcessError(\r\nsubprocess.CalledProcessError: Command '['ansible', 'localhost', '-o', '-m', 'lineinfile', '-a', 'path=my_new_role/meta/main.yml line=\"  namespace: acme\" insertafter=\"  author: your name\"']' returned non-zero exit status 4.\r\n```\r\n\r\nAs an aside, I really wish ansible-galaxy was opt-in.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3678/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3678/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3671", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3671/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3671/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3671/events", "html_url": "https://github.com/ansible-community/molecule/pull/3671", "id": 1386215164, "node_id": "PR_kwDOAsPDRs4_nShT", "number": 3671, "title": "Schema fix", "user": {"login": "apatard", "id": 2619394, "node_id": "MDQ6VXNlcjI2MTkzOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2619394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apatard", "html_url": "https://github.com/apatard", "followers_url": "https://api.github.com/users/apatard/followers", "following_url": "https://api.github.com/users/apatard/following{/other_user}", "gists_url": "https://api.github.com/users/apatard/gists{/gist_id}", "starred_url": "https://api.github.com/users/apatard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apatard/subscriptions", "organizations_url": "https://api.github.com/users/apatard/orgs", "repos_url": "https://api.github.com/users/apatard/repos", "events_url": "https://api.github.com/users/apatard/events{/privacy}", "received_events_url": "https://api.github.com/users/apatard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-26T14:47:02Z", "updated_at": "2022-09-30T10:05:50Z", "closed_at": "2022-09-30T10:05:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3671", "html_url": "https://github.com/ansible-community/molecule/pull/3671", "diff_url": "https://github.com/ansible-community/molecule/pull/3671.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3671.patch", "merged_at": "2022-09-30T10:05:50Z"}, "body": "Commit \"Adopt molecule config JSON schema (https://github.com/ansible-community/molecule/pull/3668)\" (https://github.com/ansible-community/molecule/commit/acb9ae0827573593a0a674e04db025a4392e82ba)\r\nhas imported the molecule schema into data/ but everything is using\r\nsrc/molecule/schemas/ as directory for the schema.\r\n\r\nSo:\r\n- Replace src/molecule/schemas/molecule.json content with the one\r\n  from src/molecule/data/. The replacement was partial as the local\r\n  schema handles in a better way the MoleculeDependencyModel. The\r\n  new schema was allowing to use the \"shell\" dependency with an\r\n  empty command.\r\n- Update schema $id to point to the correct location\r\n- Fix test link to point to the correct schema file.\r\n\r\nSigned-off-by: Arnaud Patard <apatard@hupstream.com>", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3671/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3671/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3670", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3670/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3670/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3670/events", "html_url": "https://github.com/ansible-community/molecule/pull/3670", "id": 1385435103, "node_id": "PR_kwDOAsPDRs4_kx04", "number": 3670, "title": "Bump ansible-compat from 2.2.0 to 2.2.1", "user": {"login": "dependabot[bot]", "id": 49699333, "node_id": "MDM6Qm90NDk2OTkzMzM=", "avatar_url": "https://avatars.githubusercontent.com/in/29110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dependabot%5Bbot%5D", "html_url": "https://github.com/apps/dependabot", "followers_url": "https://api.github.com/users/dependabot%5Bbot%5D/followers", "following_url": "https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dependabot%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/dependabot%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/dependabot%5Bbot%5D/repos", "events_url": "https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/dependabot%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 3698525886, "node_id": "LA_kwDOAsPDRs7ccwa-", "url": "https://api.github.com/repos/ansible-community/molecule/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "Pull requests that update a dependency file"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-09-26T05:16:30Z", "updated_at": "2022-10-16T13:39:42Z", "closed_at": "2022-10-16T13:39:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3670", "html_url": "https://github.com/ansible-community/molecule/pull/3670", "diff_url": "https://github.com/ansible-community/molecule/pull/3670.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3670.patch", "merged_at": "2022-10-16T13:39:41Z"}, "body": "Bumps [ansible-compat](https://github.com/ansible-community/ansible-compat) from 2.2.0 to 2.2.1.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/ansible-community/ansible-compat/releases\">ansible-compat's releases</a>.</em></p>\n<blockquote>\n<h2>v2.2.1</h2>\n<h2>Bugfixes</h2>\n<ul>\n<li>Avoid galaxy install failure with already symlinked collections (<a href=\"https://github-redirect.dependabot.com/ansible-community/ansible-compat/issues/166\">#166</a>) <a href=\"https://github.com/ssbarnea\"><code>@\u200bssbarnea</code></a></li>\n<li>Avoid python warning about unknown warning category (<a href=\"https://github-redirect.dependabot.com/ansible-community/ansible-compat/issues/164\">#164</a>) <a href=\"https://github.com/ssbarnea\"><code>@\u200bssbarnea</code></a></li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/ansible/ansible-compat/commit/eb771f5492cd79439ffaf2593b29929bb5d95f2e\"><code>eb771f5</code></a> Avoid galaxy install failure with already symlinked collections (<a href=\"https://github-redirect.dependabot.com/ansible-community/ansible-compat/issues/166\">#166</a>)</li>\n<li><a href=\"https://github.com/ansible/ansible-compat/commit/a986b493dae17405e20899007dd9b41d6c46bea4\"><code>a986b49</code></a> chore: pre-commit autoupdate (<a href=\"https://github-redirect.dependabot.com/ansible-community/ansible-compat/issues/163\">#163</a>)</li>\n<li><a href=\"https://github.com/ansible/ansible-compat/commit/7e231399dbbeb9aa964bf8b98651cc20e5a6eb9d\"><code>7e23139</code></a> Bump test dependencies (<a href=\"https://github-redirect.dependabot.com/ansible-community/ansible-compat/issues/161\">#161</a>)</li>\n<li><a href=\"https://github.com/ansible/ansible-compat/commit/6be53f1d9e193e317c5f7b98c4ccdeb00361b877\"><code>6be53f1</code></a> Split GHA jobs for old oversion (<a href=\"https://github-redirect.dependabot.com/ansible-community/ansible-compat/issues/167\">#167</a>)</li>\n<li><a href=\"https://github.com/ansible/ansible-compat/commit/aac5ae2bd68bcf09d1dd7c37066072df30d98c2c\"><code>aac5ae2</code></a> Avoid python warning about unknown warning category (<a href=\"https://github-redirect.dependabot.com/ansible-community/ansible-compat/issues/164\">#164</a>)</li>\n<li><a href=\"https://github.com/ansible/ansible-compat/commit/f6b38717e1203529924a6b04c4f19d35149da61b\"><code>f6b3871</code></a> chore: pre-commit autoupdate (<a href=\"https://github-redirect.dependabot.com/ansible-community/ansible-compat/issues/160\">#160</a>)</li>\n<li>See full diff in <a href=\"https://github.com/ansible-community/ansible-compat/compare/v2.2.0...v2.2.1\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=ansible-compat&package-manager=pip&previous-version=2.2.0&new-version=2.2.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3670/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3670/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3668", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3668/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3668/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3668/events", "html_url": "https://github.com/ansible-community/molecule/pull/3668", "id": 1384614368, "node_id": "PR_kwDOAsPDRs4_igGL", "number": 3668, "title": "Adopt molecule config JSON schema", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-09-24T09:56:35Z", "updated_at": "2022-09-24T20:10:31Z", "closed_at": "2022-09-24T13:32:54Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3668", "html_url": "https://github.com/ansible-community/molecule/pull/3668", "diff_url": "https://github.com/ansible-community/molecule/pull/3668.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3668.patch", "merged_at": "2022-09-24T13:32:54Z"}, "body": "We move official location for Molecule Config JSON Schema inside molecule project itself. This will be followed by updates on JSON Schema Store and on vscode-ansible extension, and removal from ansible/schemas project. We already did the same with navigator and lint project, as it makes the maintenance easier.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3668/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3667", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3667/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3667/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3667/events", "html_url": "https://github.com/ansible-community/molecule/pull/3667", "id": 1384525641, "node_id": "PR_kwDOAsPDRs4_iPaB", "number": 3667, "title": "Put 'directory' attribute back into schema", "user": {"login": "davedittrich", "id": 1874225, "node_id": "MDQ6VXNlcjE4NzQyMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1874225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davedittrich", "html_url": "https://github.com/davedittrich", "followers_url": "https://api.github.com/users/davedittrich/followers", "following_url": "https://api.github.com/users/davedittrich/following{/other_user}", "gists_url": "https://api.github.com/users/davedittrich/gists{/gist_id}", "starred_url": "https://api.github.com/users/davedittrich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davedittrich/subscriptions", "organizations_url": "https://api.github.com/users/davedittrich/orgs", "repos_url": "https://api.github.com/users/davedittrich/repos", "events_url": "https://api.github.com/users/davedittrich/events{/privacy}", "received_events_url": "https://api.github.com/users/davedittrich/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1585146637, "node_id": "MDU6TGFiZWwxNTg1MTQ2NjM3", "url": "https://api.github.com/repos/ansible-community/molecule/labels/needs-update", "name": "needs-update", "color": "fff9b2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-09-24T05:09:15Z", "updated_at": "2022-10-23T19:10:25Z", "closed_at": "2022-10-18T17:49:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3667", "html_url": "https://github.com/ansible-community/molecule/pull/3667", "diff_url": "https://github.com/ansible-community/molecule/pull/3667.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3667.patch", "merged_at": null}, "body": "PR https://github.com/ansible-community/molecule/pull/3638 removed a central part of the schema that broke `pytest-testinfra`. I am assuming that a test for this was also removed, hence the unnoticed regression. I spent a little time looking into it and it looked like the schema validation is more a \"does it parse\" than \"does it support all possible attributes.\"", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3667/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3667/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3665", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3665/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3665/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3665/events", "html_url": "https://github.com/ansible-community/molecule/pull/3665", "id": 1379170876, "node_id": "PR_kwDOAsPDRs4_QziU", "number": 3665, "title": "Support for cgroupns parameter", "user": {"login": "bngsudheer", "id": 33030, "node_id": "MDQ6VXNlcjMzMDMw", "avatar_url": "https://avatars.githubusercontent.com/u/33030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bngsudheer", "html_url": "https://github.com/bngsudheer", "followers_url": "https://api.github.com/users/bngsudheer/followers", "following_url": "https://api.github.com/users/bngsudheer/following{/other_user}", "gists_url": "https://api.github.com/users/bngsudheer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bngsudheer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bngsudheer/subscriptions", "organizations_url": "https://api.github.com/users/bngsudheer/orgs", "repos_url": "https://api.github.com/users/bngsudheer/repos", "events_url": "https://api.github.com/users/bngsudheer/events{/privacy}", "received_events_url": "https://api.github.com/users/bngsudheer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-09-20T10:18:09Z", "updated_at": "2022-10-25T08:45:26Z", "closed_at": "2022-10-25T08:45:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3665", "html_url": "https://github.com/ansible-community/molecule/pull/3665", "diff_url": "https://github.com/ansible-community/molecule/pull/3665.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3665.patch", "merged_at": null}, "body": "So that values like --cgroupns=host can be used to spin up container with systemd support.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3665/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3663", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3663/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3663/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3663/events", "html_url": "https://github.com/ansible-community/molecule/issues/3663", "id": 1377827615, "node_id": "I_kwDOAsPDRs5SH_sf", "number": 3663, "title": "Molecule doesn't respect `ANSIBLE_ROLES_PATH` or `ANSIBLE_COLLECTIONS_PATH`", "user": {"login": "nre-ableton", "id": 16208985, "node_id": "MDQ6VXNlcjE2MjA4OTg1", "avatar_url": "https://avatars.githubusercontent.com/u/16208985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nre-ableton", "html_url": "https://github.com/nre-ableton", "followers_url": "https://api.github.com/users/nre-ableton/followers", "following_url": "https://api.github.com/users/nre-ableton/following{/other_user}", "gists_url": "https://api.github.com/users/nre-ableton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nre-ableton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nre-ableton/subscriptions", "organizations_url": "https://api.github.com/users/nre-ableton/orgs", "repos_url": "https://api.github.com/users/nre-ableton/repos", "events_url": "https://api.github.com/users/nre-ableton/events{/privacy}", "received_events_url": "https://api.github.com/users/nre-ableton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-09-19T11:46:02Z", "updated_at": "2022-10-19T15:22:58Z", "closed_at": "2022-10-19T15:22:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Molecule calls `ansible-galaxy <role/collection> install ...`, but it doesn't pass along values for either `ANSIBLE_ROLES_PATH` or `ANSIBLE_COLLECTIONS_PATH` when doing so. As a result, roles/collections are always installed to `~/.cache/ansible-compat/<hash>`.\r\n\r\nFurthermore, in molecule 4.0.0 (specifically in https://github.com/ansible-community/molecule/pull/3514), the behavior was also changed to insert this cache dir ahead of any other entries. As such, when molecule runs, it looks something like this:\r\n\r\n```\r\n$ export ANSIBLE_ROLES_PATH=/caches/ansible/roles\r\n$ export ANSIBLE_COLLECTIONS_PATH=/caches/ansible/collections\r\n$ molecule converge\r\nINFO     default scenario test matrix: dependency, create, prepare, converge\r\nINFO     Performing prerun with role_name_check=0...\r\nINFO     Running ansible-galaxy role install -vr requirements.yml --roles-path /home/nre/.cache/ansible-compat/ff4dc6/roles\r\nINFO     Running ansible-galaxy collection install -vr requirements.yml -p /home/nre/.cache/ansible-compat/ff4dc6/collections\r\nINFO     Set ANSIBLE_LIBRARY=/home/nre/.cache/ansible-compat/ff4dc6/modules:/home/nre/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/nre/.cache/ansible-compat/ff4dc6/collections:/caches/ansible/collections:/caches/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/nre/.cache/ansible-compat/ff4dc6/roles:/caches/ansible/roles:/caches/ansible/roles\r\n```\r\n\r\nThis behavior causes trouble on our CI systems where we have a separate partition for caches and build all projects under the same directory name (`/jenkins/workspace`), which always hashes to the same value. We could possibly work around the first issue by calling `ansible-galaxy ... install` manually, but molecule doesn't look at data in these custom paths, so it doesn't work.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3663/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3654", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3654/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3654/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3654/events", "html_url": "https://github.com/ansible-community/molecule/issues/3654", "id": 1362524671, "node_id": "I_kwDOAsPDRs5RNnn_", "number": 3654, "title": "Unable to dial down Ansible log output", "user": {"login": "davestephens", "id": 668464, "node_id": "MDQ6VXNlcjY2ODQ2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/668464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davestephens", "html_url": "https://github.com/davestephens", "followers_url": "https://api.github.com/users/davestephens/followers", "following_url": "https://api.github.com/users/davestephens/following{/other_user}", "gists_url": "https://api.github.com/users/davestephens/gists{/gist_id}", "starred_url": "https://api.github.com/users/davestephens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davestephens/subscriptions", "organizations_url": "https://api.github.com/users/davestephens/orgs", "repos_url": "https://api.github.com/users/davestephens/repos", "events_url": "https://api.github.com/users/davestephens/events{/privacy}", "received_events_url": "https://api.github.com/users/davestephens/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-09-05T22:47:21Z", "updated_at": "2022-09-28T11:38:04Z", "closed_at": "2022-09-28T11:37:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible [core 2.12.7]\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/david/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/david/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.10.6 (main, Aug  2 2022, 00:00:00) [GCC 12.1.1 20220507 (Red Hat 12.1.1-1)]\r\n  jinja version = 3.0.3\r\n  libyaml = True\r\nmolecule 4.0.1 using python 3.10 \r\n    ansible:2.12.7\r\n    delegated:4.0.1 from molecule\r\n    docker:2.0.0 from molecule_docker requiring collections: community.docker>=3.0.0-a2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI'd like to be able to dial down the log verbosity during runs. I understand from the docs that it should be possible.\r\n\r\nSo my log output should be:\r\n\r\n```\r\nINFO     Running default > prepare\r\nINFO     Running default > converge\r\nINFO     Running default > idempotence\r\n```\r\n...and so on\r\n\r\n# Actual Behaviour\r\n\r\nThe log output is like this:\r\n```\r\nINFO     Running default > prepare\r\n<very long ansible-playbook output>\r\nINFO     Running default > converge\r\n<very long ansible-playbook output>\r\nINFO     Running default > idempotence\r\n<very long ansible-playbook output>\r\n```\r\n...and so on\r\n\r\nI've tried the `--no-debug` switch, as well as adding the following:\r\n\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  log: false\r\n```\r\nNone of the above seems to work.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3654/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3654/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3646", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3646/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3646/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3646/events", "html_url": "https://github.com/ansible-community/molecule/pull/3646", "id": 1356177923, "node_id": "PR_kwDOAsPDRs4-EcLs", "number": 3646, "title": "Downgrade log level when linking Ansible variables", "user": {"login": "sleiner", "id": 6379313, "node_id": "MDQ6VXNlcjYzNzkzMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/6379313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sleiner", "html_url": "https://github.com/sleiner", "followers_url": "https://api.github.com/users/sleiner/followers", "following_url": "https://api.github.com/users/sleiner/following{/other_user}", "gists_url": "https://api.github.com/users/sleiner/gists{/gist_id}", "starred_url": "https://api.github.com/users/sleiner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sleiner/subscriptions", "organizations_url": "https://api.github.com/users/sleiner/orgs", "repos_url": "https://api.github.com/users/sleiner/repos", "events_url": "https://api.github.com/users/sleiner/events{/privacy}", "received_events_url": "https://api.github.com/users/sleiner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-30T18:59:15Z", "updated_at": "2022-09-01T07:21:19Z", "closed_at": "2022-09-01T04:39:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3646", "html_url": "https://github.com/ansible-community/molecule/pull/3646", "diff_url": "https://github.com/ansible-community/molecule/pull/3646.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3646.patch", "merged_at": "2022-09-01T04:39:23Z"}, "body": "When using the linking feature for Ansible vars, I noticed that it makes the output for sequences with many steps (like test) quite noisy. See this screenshot for example:\r\n\r\n<img width=\"1224\" alt=\"image\" src=\"https://user-images.githubusercontent.com/6379313/187520063-f813bbe4-51f8-4d2f-9a91-7f01fd032ac0.png\">\r\n\r\nSince the symlinks are explicitly requested in `molecule.yml`, I would argue that these messages do not have to be this prominent. As far as I see, they are mainly useful when debugging. So I propose changing the log level to `DEBUG` here.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3646/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3638", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3638/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3638/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3638/events", "html_url": "https://github.com/ansible-community/molecule/pull/3638", "id": 1343863762, "node_id": "PR_kwDOAsPDRs49bqCd", "number": 3638, "title": "Replace cerberus with jsonschema for configuration validation", "user": {"login": "zhan9san", "id": 32819197, "node_id": "MDQ6VXNlcjMyODE5MTk3", "avatar_url": "https://avatars.githubusercontent.com/u/32819197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhan9san", "html_url": "https://github.com/zhan9san", "followers_url": "https://api.github.com/users/zhan9san/followers", "following_url": "https://api.github.com/users/zhan9san/following{/other_user}", "gists_url": "https://api.github.com/users/zhan9san/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhan9san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhan9san/subscriptions", "organizations_url": "https://api.github.com/users/zhan9san/orgs", "repos_url": "https://api.github.com/users/zhan9san/repos", "events_url": "https://api.github.com/users/zhan9san/events{/privacy}", "received_events_url": "https://api.github.com/users/zhan9san/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-08-19T02:44:46Z", "updated_at": "2022-12-02T08:51:36Z", "closed_at": "2022-09-04T16:10:41Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3638", "html_url": "https://github.com/ansible-community/molecule/pull/3638", "diff_url": "https://github.com/ansible-community/molecule/pull/3638.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3638.patch", "merged_at": "2022-09-04T16:10:41Z"}, "body": "Fixes: #3637  Remove `cerberus`, use `jsonschema` instead.\r\n\r\n@ssbarnea \r\nCould you kindly review this PR?\r\n\r\nI tried to make this PR smaller, but it seems not.\r\n\r\nFeel free to leave your comments.\r\n\r\n### Schema Definition\r\n\r\nAs the definition of schemas between `cerberus` and `jsonschema` are different, all schemas are redefined and consolidated into one `src/molecule/schemas/molecule.json`.\r\n\r\n`ansible-lint` will sync the schemas from https://github.com/ansible/schemas, but for `molecule`, I think there is no need to sync it from another repo. So `src/molecule/schemas/molecule.json` makes the maintenance convenient.\r\n\r\n#### JSON Schema\r\n\r\n`ansible-lint`: [\"http://json-schema.org/draft-07/schema\",](https://github.com/ansible/schemas/blob/b59b7354023f6e0cd8a87425af1663c96f808064/f/ansible-galaxy.json#L450)\r\n\r\n`https://json-schema.org/draft/2020-12/schema` is used in this PR.\r\n\r\nThis new draft supports [Unevaluated Properties](https://json-schema.org/understanding-json-schema/reference/object.html#unevaluated-properties), and it has more power than `additionalProperties`.\r\nSo it is used in `MoleculeDependencyModel` schema.\r\n\r\n### _preflight\r\n\r\n`_preflight` and related test functions are deleted as well, because I think it is redundant.\r\n\r\n### Validation Errors\r\n\r\nFor simplicity, only the first error would be showed. It is not user-friendly.\r\nBut currently, the PR is too big to review, so I suggest we can optimize it later to show all errors via `iter_errors`, if needed.\r\n\r\n### Unit test\r\n\r\nSome unit tests are deleted for simplicity. We can add more in another PR, if needed.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3638/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3638/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3637", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3637/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3637/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3637/events", "html_url": "https://github.com/ansible-community/molecule/issues/3637", "id": 1338349790, "node_id": "I_kwDOAsPDRs5PxZje", "number": 3637, "title": "Remove cerberus dependency from molecule", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "zhan9san", "id": 32819197, "node_id": "MDQ6VXNlcjMyODE5MTk3", "avatar_url": "https://avatars.githubusercontent.com/u/32819197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhan9san", "html_url": "https://github.com/zhan9san", "followers_url": "https://api.github.com/users/zhan9san/followers", "following_url": "https://api.github.com/users/zhan9san/following{/other_user}", "gists_url": "https://api.github.com/users/zhan9san/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhan9san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhan9san/subscriptions", "organizations_url": "https://api.github.com/users/zhan9san/orgs", "repos_url": "https://api.github.com/users/zhan9san/repos", "events_url": "https://api.github.com/users/zhan9san/events{/privacy}", "received_events_url": "https://api.github.com/users/zhan9san/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "zhan9san", "id": 32819197, "node_id": "MDQ6VXNlcjMyODE5MTk3", "avatar_url": "https://avatars.githubusercontent.com/u/32819197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhan9san", "html_url": "https://github.com/zhan9san", "followers_url": "https://api.github.com/users/zhan9san/followers", "following_url": "https://api.github.com/users/zhan9san/following{/other_user}", "gists_url": "https://api.github.com/users/zhan9san/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhan9san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhan9san/subscriptions", "organizations_url": "https://api.github.com/users/zhan9san/orgs", "repos_url": "https://api.github.com/users/zhan9san/repos", "events_url": "https://api.github.com/users/zhan9san/events{/privacy}", "received_events_url": "https://api.github.com/users/zhan9san/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-08-14T21:08:38Z", "updated_at": "2022-10-16T13:24:23Z", "closed_at": "2022-09-04T16:11:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As https://github.com/pyeve/cerberus is no longer actively maintained we should aim to remove it from molecule ASAP, preferably replacing it with python-jsonschema validator, which is already used by many of our projects.\r\n\r\nIf anyone wants to work in this, please let me know. I will do my best to provide support.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3637/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3637/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3632", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3632/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3632/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3632/events", "html_url": "https://github.com/ansible-community/molecule/issues/3632", "id": 1331066072, "node_id": "I_kwDOAsPDRs5PVnTY", "number": 3632, "title": "Host debian 11 running molecule on Debian 11 (Failed to connect to bus: No such file or directory)", "user": {"login": "staticdev", "id": 1446633, "node_id": "MDQ6VXNlcjE0NDY2MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1446633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/staticdev", "html_url": "https://github.com/staticdev", "followers_url": "https://api.github.com/users/staticdev/followers", "following_url": "https://api.github.com/users/staticdev/following{/other_user}", "gists_url": "https://api.github.com/users/staticdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/staticdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/staticdev/subscriptions", "organizations_url": "https://api.github.com/users/staticdev/orgs", "repos_url": "https://api.github.com/users/staticdev/repos", "events_url": "https://api.github.com/users/staticdev/events{/privacy}", "received_events_url": "https://api.github.com/users/staticdev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-08-07T16:48:40Z", "updated_at": "2022-10-26T20:07:21Z", "closed_at": "2022-10-26T20:05:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible [core 2.13.2]\r\n  config file = None\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/user/.local/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/user/.local/bin/ansible\r\n  python version = 3.9.2 (default, Feb 28 2021, 17:03:44) [GCC 10.2.1 20210110]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.1 using python 3.10 \r\n    ansible:2.13.2\r\n    delegated:4.0.1 from molecule\r\n    docker:2.0.0 from molecule_docker requiring collections: community.docker>=3.0.0-a2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used: yamllint and ansible-lint\r\n\r\n# Desired Behavior\r\n\r\nI try to run a molecule that works on GA (on Debian 11), it works there on Debian11. \r\n\r\n# Actual Behaviour\r\n\r\nWhen I try locally it does not work:\r\n\r\nExample:\r\n\r\n```sh\r\ngit clone git@github.com:geerlingguy/ansible-role-mysql.git && cd ansible-role-mysql\r\n# change `molecule.yml` image to `geerlingguy/docker-debian11-ansible:latest`\r\nmolecule test\r\n```\r\n\r\nI get:\r\n\r\n```sh\r\nTASK [geerlingguy.mysql : Ensure MySQL is started and enabled on boot.] ********\r\nfatal: [instance]: FAILED! => {\"changed\": false, \"cmd\": \"/bin/systemctl\", \"msg\": \"Failed to connect to bus: No such file or directory\", \"rc\": 1, \"stderr\": \"Failed to connect to bus: No such file or directory\\n\", \"stderr_lines\": [\"Failed to connect to bus: No such file or directory\"], \"stdout\": \"\", \"stdout_lines\": []}\r\n```\r\n\r\nI tried:\r\n\r\n1. Running directly the example above\r\n2. Updating `molecule.yml` `command: ${MOLECULE_DOCKER_COMMAND:-\"\"}` to `/sbin/init`. Same result.\r\n3. Changing volumes to `/sys/fs/cgroup:/sys/fs/cgroup:rw` instead of `ro` as described [here](https://github.com/geerlingguy/docker-debian11-ansible/issues/4). Same result.\r\n4. Adding to `molecule.yml` all from the [documentation](https://molecule.readthedocs.io/en/latest/examples.html#systemd-container).\r\n\r\n```\r\nplatforms:\r\n  - name: instance\r\n    image: geerlingguy/docker-debian11\r\n    command: /sbin/init\r\n    tmpfs:\r\n      - /run\r\n      - /tmp\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n```\r\n\r\nSame result.\r\n\r\nOutput of `1.` with `molecule --debug test`: \r\n\r\n[o.txt](https://github.com/ansible-community/molecule/files/9277166/o.txt)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3632/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3629", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3629/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3629/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3629/events", "html_url": "https://github.com/ansible-community/molecule/issues/3629", "id": 1322637359, "node_id": "I_kwDOAsPDRs5O1dgv", "number": 3629, "title": "molecule init role fails to create standalone role", "user": {"login": "deogracia", "id": 553342, "node_id": "MDQ6VXNlcjU1MzM0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/553342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deogracia", "html_url": "https://github.com/deogracia", "followers_url": "https://api.github.com/users/deogracia/followers", "following_url": "https://api.github.com/users/deogracia/following{/other_user}", "gists_url": "https://api.github.com/users/deogracia/gists{/gist_id}", "starred_url": "https://api.github.com/users/deogracia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deogracia/subscriptions", "organizations_url": "https://api.github.com/users/deogracia/orgs", "repos_url": "https://api.github.com/users/deogracia/repos", "events_url": "https://api.github.com/users/deogracia/events{/privacy}", "received_events_url": "https://api.github.com/users/deogracia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-07-29T20:10:45Z", "updated_at": "2022-11-17T20:02:42Z", "closed_at": "2022-10-25T15:35:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```shell\r\nansible --version && molecule --version\r\nansible [core 2.13.2]\r\n  config file = None\r\n  configured module search path = ['/home/vagrant/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/vagrant/venv/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /home/vagrant/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/vagrant/venv/bin/ansible\r\n  python version = 3.9.2 (default, Feb 28 2021, 17:03:44) [GCC 10.2.1 20210110]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.1 using python 3.9 \r\n    ansible:2.13.2\r\n    delegated:4.0.1 from molecule\r\n    docker:2.0.0 from molecule_docker requiring collections: community.docker>=3.0.0-a2\r\n```\r\n\r\nMolecule installation method:\r\n\r\n- pip\r\n\r\nAnsible installation method:\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule init role role_A` should create role when `ansible-galaxy init role_A`\r\n\r\n# Actual Behaviour\r\n\r\n```shell\r\nansible-galaxy init a-b-c\r\n- Role a-b-c was created successfully\r\nansible-galaxy init a_b_c\r\n- Role a_b_c was created successfully\r\nmolecule init role a_b_c\r\nCRITICAL Outside collections you must mention role namespace like: molecule init role 'acme.myrole'. Be sure you use only lowercase characters and underlines. See https://galaxy.ansible.com/docs/contributing/creating_role.html\r\nmolecule init role a-b-c\r\nCRITICAL Outside collections you must mention role namespace like: molecule init role 'acme.myrole'. Be sure you use only lowercase characters and underlines. See https://galaxy.ansible.com/docs/contributing/creating_role.html\r\n```\r\nMolecule debug's option doesn't help\r\n\r\n```shell\r\nmolecule --debug init role a_b_c \r\nCRITICAL Outside collections you must mention role namespace like: molecule init role 'acme.myrole'. Be sure you use only lowercase characters and underlines. See https://galaxy.ansible.com/docs/contributing/creating_role.html\r\nmolecule --debug init role a-b-c \r\nCRITICAL Outside collections you must mention role namespace like: molecule init role 'acme.myrole'. Be sure you use only lowercase characters and underlines. See https://galaxy.ansible.com/docs/contributing/creating_role.html\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3629/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3629/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3622", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3622/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3622/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3622/events", "html_url": "https://github.com/ansible-community/molecule/issues/3622", "id": 1308205338, "node_id": "I_kwDOAsPDRs5N-aEa", "number": 3622, "title": "* community.docker:>=3.0.0-a2 (direct request)", "user": {"login": "hylaride", "id": 17935338, "node_id": "MDQ6VXNlcjE3OTM1MzM4", "avatar_url": "https://avatars.githubusercontent.com/u/17935338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hylaride", "html_url": "https://github.com/hylaride", "followers_url": "https://api.github.com/users/hylaride/followers", "following_url": "https://api.github.com/users/hylaride/following{/other_user}", "gists_url": "https://api.github.com/users/hylaride/gists{/gist_id}", "starred_url": "https://api.github.com/users/hylaride/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hylaride/subscriptions", "organizations_url": "https://api.github.com/users/hylaride/orgs", "repos_url": "https://api.github.com/users/hylaride/repos", "events_url": "https://api.github.com/users/hylaride/events{/privacy}", "received_events_url": "https://api.github.com/users/hylaride/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-18T16:26:41Z", "updated_at": "2022-07-18T17:28:25Z", "closed_at": "2022-07-18T17:28:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n\r\n```\r\nansible [core 2.13.1]\r\n  config file = None\r\n  configured module search path = ['/Users/christopher/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/christopher/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/christopher/.pyenv/shims/versions/3.9.9/bin/ansible\r\n  python version = 3.9.9 (main, Feb  7 2022, 15:13:51) [Clang 13.0.0 (clang-1300.0.29.30)]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.0 using python 3.9 \r\n    ansible:2.13.1\r\n    delegated:4.0.0 from molecule\r\n    docker:2.0.0 from molecule_docker requiring collections: community.docker>=3.0.0-a2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI specifically installed molecule-docker 2.0.0.\r\n\r\nI would like molecule to run with with molecule-docker 2.0.0.  I'm doing this so that I can specify the platform so that I can run x86 containers on my m1 Mac.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\nINFO     Running ansible-galaxy collection install -v community.docker:>=3.0.0-a2\r\nWARNING  Retrying execution failure 1 of: ansible-galaxy collection install -v community.docker:>=3.0.0-a2\r\nERROR    Command returned 1 code:\r\nNo config file found; using defaults\r\nStarting galaxy collection install process\r\nProcess install dependency map\r\n\r\nERROR! Failed to resolve the requested dependencies map. Could not satisfy the following requirements:\r\n* community.docker:>=3.0.0-a2 (direct request)\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/click/core.py\", line 1130, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/click/core.py\", line 1055, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/click/core.py\", line 1657, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/click/core.py\", line 1404, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/click/core.py\", line 760, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/molecule/command/dependency.py\", line 91, in dependency\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/molecule/command/base.py\", line 121, in execute_cmdline_scenarios\r\n    execute_scenario(scenario)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/molecule/command/base.py\", line 165, in execute_scenario\r\n    execute_subcommand(scenario.config, action)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/molecule/command/base.py\", line 154, in execute_subcommand\r\n    return command(config).execute(args)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/molecule/logger.py\", line 188, in wrapper\r\n    rt = func(*args, **kwargs)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/molecule/command/dependency.py\", line 74, in execute\r\n    self._config.dependency.execute()\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/molecule/dependency/ansible_galaxy/__init__.py\", line 76, in execute\r\n    invoker.execute()\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/molecule/dependency/ansible_galaxy/base.py\", line 120, in execute\r\n    super().execute()\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/molecule/dependency/base.py\", line 92, in execute\r\n    self._config.runtime.require_collection(name, version)\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/ansible_compat/runtime.py\", line 398, in require_collection\r\n    self.install_collection(f\"{name}:>={version}\")\r\n  File \"/Users/christopher/.pyenv/shims/versions/3.9.9/lib/python3.9/site-packages/ansible_compat/runtime.py\", line 222, in install_collection\r\n    raise InvalidPrerequisiteError(msg)\r\nansible_compat.errors.InvalidPrerequisiteError: Command returned 1 code:\r\nNo config file found; using defaults\r\nStarting galaxy collection install process\r\nProcess install dependency map\r\n\r\nERROR! Failed to resolve the requested dependencies map. Could not satisfy the following requirements:\r\n* community.docker:>=3.0.0-a2 (direct request)\r\n\r\nmake: *** [dependency] Error 1\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3622/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3622/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3621", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3621/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3621/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3621/events", "html_url": "https://github.com/ansible-community/molecule/pull/3621", "id": 1307699332, "node_id": "PR_kwDOAsPDRs47jgLU", "number": 3621, "title": "Add support for Python 3.11", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-18T09:55:39Z", "updated_at": "2022-07-18T11:19:19Z", "closed_at": "2022-07-18T11:19:17Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3621", "html_url": "https://github.com/ansible-community/molecule/pull/3621", "diff_url": "https://github.com/ansible-community/molecule/pull/3621.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3621.patch", "merged_at": "2022-07-18T11:19:17Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3621/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3605", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3605/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3605/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3605/events", "html_url": "https://github.com/ansible-community/molecule/pull/3605", "id": 1279847637, "node_id": "PR_kwDOAsPDRs46Gt08", "number": 3605, "title": "Document description for action arguments (verify and side_effect)", "user": {"login": "amarao", "id": 652496, "node_id": "MDQ6VXNlcjY1MjQ5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/652496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amarao", "html_url": "https://github.com/amarao", "followers_url": "https://api.github.com/users/amarao/followers", "following_url": "https://api.github.com/users/amarao/following{/other_user}", "gists_url": "https://api.github.com/users/amarao/gists{/gist_id}", "starred_url": "https://api.github.com/users/amarao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amarao/subscriptions", "organizations_url": "https://api.github.com/users/amarao/orgs", "repos_url": "https://api.github.com/users/amarao/repos", "events_url": "https://api.github.com/users/amarao/events{/privacy}", "received_events_url": "https://api.github.com/users/amarao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-06-22T09:28:20Z", "updated_at": "2022-07-20T15:16:03Z", "closed_at": "2022-06-23T12:54:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3605", "html_url": "https://github.com/ansible-community/molecule/pull/3605", "diff_url": "https://github.com/ansible-community/molecule/pull/3605.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3605.patch", "merged_at": "2022-06-23T12:54:21Z"}, "body": "Adding docs for action arguments.\r\n\r\nShould fix #3591\r\n\r\nI'm not familiar with syntax and hope it's done right.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3605/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3605/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3604", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3604/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3604/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3604/events", "html_url": "https://github.com/ansible-community/molecule/pull/3604", "id": 1278870950, "node_id": "PR_kwDOAsPDRs46DUod", "number": 3604, "title": "Added clarifications about customizing docker images", "user": {"login": "timblaktu", "id": 12355715, "node_id": "MDQ6VXNlcjEyMzU1NzE1", "avatar_url": "https://avatars.githubusercontent.com/u/12355715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timblaktu", "html_url": "https://github.com/timblaktu", "followers_url": "https://api.github.com/users/timblaktu/followers", "following_url": "https://api.github.com/users/timblaktu/following{/other_user}", "gists_url": "https://api.github.com/users/timblaktu/gists{/gist_id}", "starred_url": "https://api.github.com/users/timblaktu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timblaktu/subscriptions", "organizations_url": "https://api.github.com/users/timblaktu/orgs", "repos_url": "https://api.github.com/users/timblaktu/repos", "events_url": "https://api.github.com/users/timblaktu/events{/privacy}", "received_events_url": "https://api.github.com/users/timblaktu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-06-21T18:27:55Z", "updated_at": "2022-08-15T11:16:38Z", "closed_at": "2022-07-06T09:00:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3604", "html_url": "https://github.com/ansible-community/molecule/pull/3604", "diff_url": "https://github.com/ansible-community/molecule/pull/3604.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3604.patch", "merged_at": "2022-07-06T09:00:29Z"}, "body": "Provides some clarification about how docker image customization works. This info had to be gleaned from the source code and external sources like reddit and SO. \r\n\r\nI hope this community feedback will be adopted to ease adoption of future molecule users.\r\n\r\nResolves #3603.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3604/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3604/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3603", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3603/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3603/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3603/events", "html_url": "https://github.com/ansible-community/molecule/issues/3603", "id": 1278726080, "node_id": "I_kwDOAsPDRs5MN8_A", "number": 3603, "title": "Provide basic information about Dockerfile template and pre_build_image driver option", "user": {"login": "timblaktu", "id": 12355715, "node_id": "MDQ6VXNlcjEyMzU1NzE1", "avatar_url": "https://avatars.githubusercontent.com/u/12355715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timblaktu", "html_url": "https://github.com/timblaktu", "followers_url": "https://api.github.com/users/timblaktu/followers", "following_url": "https://api.github.com/users/timblaktu/following{/other_user}", "gists_url": "https://api.github.com/users/timblaktu/gists{/gist_id}", "starred_url": "https://api.github.com/users/timblaktu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timblaktu/subscriptions", "organizations_url": "https://api.github.com/users/timblaktu/orgs", "repos_url": "https://api.github.com/users/timblaktu/repos", "events_url": "https://api.github.com/users/timblaktu/events{/privacy}", "received_events_url": "https://api.github.com/users/timblaktu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-21T16:57:05Z", "updated_at": "2022-07-06T09:00:29Z", "closed_at": "2022-07-06T09:00:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "As is evident here and around the web[^1], there are major gaps in the molecule documentation; this issue is to fix the biggest offender that caused me several days ramping up on using it to do the simplest of things (test a playbook with the docker driver):\r\n\r\nFiguring out what docker image is used for each scenario, and how dependencies get installed on it.\r\n\r\nThe goal of this issue and subsequent PR is to fill in the minimal documentation gaps that would have demystified this use case. \r\n\r\nRelated to #2854.\r\nRelated to #3591.\r\nRelated to [#3600](https://github.com/ansible-community/molecule/pull/3600).\r\n\r\n[^1]: Scouring the web for answers found just examples and blog posts around the internet where people have reverse-engineered how it works from the source code. There are numerous reports by other molecule newbies that have been similarly frustrated, but I don't see any evidence of why this has never been changed/adopted?\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3603/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3603/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3600", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3600/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3600/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3600/events", "html_url": "https://github.com/ansible-community/molecule/pull/3600", "id": 1277163809, "node_id": "PR_kwDOAsPDRs459jVM", "number": 3600, "title": "Fix undocumented env vars", "user": {"login": "gardar", "id": 455556, "node_id": "MDQ6VXNlcjQ1NTU1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/455556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gardar", "html_url": "https://github.com/gardar", "followers_url": "https://api.github.com/users/gardar/followers", "following_url": "https://api.github.com/users/gardar/following{/other_user}", "gists_url": "https://api.github.com/users/gardar/gists{/gist_id}", "starred_url": "https://api.github.com/users/gardar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gardar/subscriptions", "organizations_url": "https://api.github.com/users/gardar/orgs", "repos_url": "https://api.github.com/users/gardar/repos", "events_url": "https://api.github.com/users/gardar/events{/privacy}", "received_events_url": "https://api.github.com/users/gardar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-20T16:32:59Z", "updated_at": "2022-07-20T15:15:47Z", "closed_at": "2022-06-28T13:01:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3600", "html_url": "https://github.com/ansible-community/molecule/pull/3600", "diff_url": "https://github.com/ansible-community/molecule/pull/3600.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3600.patch", "merged_at": "2022-06-28T13:01:10Z"}, "body": "* Adds description for `MOLECULE_` env vars that was missing\r\n* Adds default paths to all env vars that contain a path.\r\n\r\n#### PR Type\r\n\r\n    * Docs Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3600/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 2, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3600/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3593", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3593/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3593/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3593/events", "html_url": "https://github.com/ansible-community/molecule/issues/3593", "id": 1275996290, "node_id": "I_kwDOAsPDRs5MDiiC", "number": 3593, "title": "Ansible Interpreter discovery not working with pyenv/poetry/molecule/docker", "user": {"login": "timblaktu", "id": 12355715, "node_id": "MDQ6VXNlcjEyMzU1NzE1", "avatar_url": "https://avatars.githubusercontent.com/u/12355715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timblaktu", "html_url": "https://github.com/timblaktu", "followers_url": "https://api.github.com/users/timblaktu/followers", "following_url": "https://api.github.com/users/timblaktu/following{/other_user}", "gists_url": "https://api.github.com/users/timblaktu/gists{/gist_id}", "starred_url": "https://api.github.com/users/timblaktu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timblaktu/subscriptions", "organizations_url": "https://api.github.com/users/timblaktu/orgs", "repos_url": "https://api.github.com/users/timblaktu/repos", "events_url": "https://api.github.com/users/timblaktu/events{/privacy}", "received_events_url": "https://api.github.com/users/timblaktu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-06-19T08:54:39Z", "updated_at": "2022-06-20T23:59:37Z", "closed_at": "2022-06-20T21:29:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n```\r\n> ansible --version && molecule --version\r\nansible [core 2.12.6]\r\n  config file = /home/tim/src/timblaktu-cm/ansible/ansible.cfg\r\n  configured module search path = ['/home/tim/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/tim/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/bin/ansible\r\n  python version = 3.10.0 (default, Oct 12 2021, 11:25:19) [GCC 8.3.0]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 4.0.0 using python 3.10\r\n    ansible:2.12.6\r\n    delegated:4.0.0 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n- poetry\r\n\r\nAnsible installation method (one of):\r\n- poetry\r\n\r\n### Summary\r\n\r\nAs noted over in https://github.com/ansible-community/molecule-docker/issues/151 and https://github.com/ansible/ansible/issues/78090, ansible is not able to find the python interpreter when run from a simple \"deb10-headless\" molecule scenario using docker driver:\r\n\r\n```molecule.yml\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nplatforms:\r\n  - name: instance\r\n    image: debian:buster\r\n    pre_build_image: true\r\nprovisioner:\r\n  name: ansible\r\nverifier:\r\n  name: ansible  # TODO: pytest-testinfra\r\n```\r\n\r\nAfter successfully creating the container using `molecule create --scenario-name deb10-headless`, and confirming success with:\r\n\r\n```\r\n> molecule list --scenario-name deb10-headless\r\nINFO     Running deb10-headless > list\r\n                \u2577             \u2577                  \u2577                \u2577         \u2577\r\n  Instance Name \u2502 Driver Name \u2502 Provisioner Name \u2502 Scenario Name  \u2502 Created \u2502 Converged\r\n\u2576\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574\r\n  instance      \u2502 docker      \u2502 ansible          \u2502 deb10-headless \u2502 true    \u2502 false\r\n                \u2575             \u2575                  \u2575                \u2575         \u2575\r\n\r\n> docker container ls\r\nCONTAINER ID   IMAGE           COMMAND                  CREATED       STATUS       PORTS     NAMES\r\n252bf11e0d1d   debian:buster   \"bash -c 'while true\u2026\"   2 hours ago   Up 2 hours             instance\r\n```\r\n\r\nI get error output from `molecule --verbose converge --scenario-name deb10-headless`:\r\n\r\n```\r\nTASK [Gathering Facts] *********************************************************\r\ntask path: /home/tim/src/timblaktu-cm/ansible/tblack-deb10-headless.yml:8\r\n<instance> ESTABLISH DOCKER CONNECTION FOR USER: root\r\n<instance> EXEC ['/usr/bin/docker', '-H=unix:///mnt/wsl/shared-docker/docker.sock', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c 'echo ~ && sleep 0'\"]\r\n<instance> EXEC ['/usr/bin/docker', '-H=unix:///mnt/wsl/shared-docker/docker.sock', b'exec', b'-i', 'instance', '/bin/sh', '-c', '/bin/sh -c \\'( umask 77 && mkdir -p \"` echo /root/.ansible/tmp `\"&& mkdir \"` echo /root/.ansible/tmp/ansible-tmp-1655759232.9442172-20889-87937448235310 `\" && echo ansible-tmp-1655759232.9442172-20889-87937448235310=\"` echo /root/.ansible/tmp/ansible-tmp-1655759232.9442172-20889-87937448235310 `\" ) && sleep 0\\'']\r\nUsing module file /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/lib/python3.10/site-packages/ansible/modules/setup.py\r\n<instance> PUT /home/tim/.ansible/tmp/ansible-local-2088466y_h2kc/tmppuqtmyv1 TO /root/.ansible/tmp/ansible-tmp-1655759232.9442172-20889-87937448235310/AnsiballZ_setup.py\r\n<instance> EXEC ['/usr/bin/docker', '-H=unix:///mnt/wsl/shared-docker/docker.sock', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1655759232.9442172-20889-87937448235310/ /root/.ansible/tmp/ansible-tmp-1655759232.9442172-20889-87937448235310/AnsiballZ_setup.py && sleep 0'\"]\r\n<instance> EXEC ['/usr/bin/docker', '-H=unix:///mnt/wsl/shared-docker/docker.sock', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c '/home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/bin/python /root/.ansible/tmp/ansible-tmp-1655759232.9442172-20889-87937448235310/AnsiballZ_setup.py && sleep 0'\"]\r\n<instance> EXEC ['/usr/bin/docker', '-H=unix:///mnt/wsl/shared-docker/docker.sock', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1655759232.9442172-20889-87937448235310/ > /dev/null 2>&1 && sleep 0'\"]\r\nfatal: [instance]: FAILED! => {\r\n    \"ansible_facts\": {},\r\n    \"changed\": false,\r\n    \"failed_modules\": {\r\n        \"ansible.legacy.setup\": {\r\n            \"failed\": true,\r\n            \"module_stderr\": \"/bin/sh: 1: /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/bin/python: not found\\n\",\r\n            \"module_stdout\": \"\",\r\n            \"msg\": \"The module failed to execute correctly, you probably need to set the interpreter.\\nSee stdout/stderr for the exact error\",\r\n            \"rc\": 127\r\n        }\r\n    },\r\n    \"msg\": \"The following modules failed to execute: ansible.legacy.setup\\n\"\r\n}\r\n\r\nPLAY RECAP *********************************************************************\r\ninstance                   : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nWARNING  Retrying execution failure 2 of: ansible-playbook --inventory /home/tim/.cache/molecule/ansible/deb10-headless/inventory --skip-tags molecule-notest,notest /home/tim/src/timblaktu-cm/ansible/molecule/deb10-headless/converge.yml\r\nCRITICAL Ansible return code was 2, command was: ['ansible-playbook', '--inventory', '/home/tim/.cache/molecule/ansible/deb10-headless/inventory', '--skip-tags', 'molecule-notest,notest', '/home/tim/src/timblaktu-cm/ansible/molecule/deb10-headless/converge.yml']\r\n```\r\n\r\nEven though I'm telling ansible explicitly this path using:\r\n\r\n```\r\nexport ANSIBLE_PYTHON_INTERPRETER=\"$(which python)\"\r\n```\r\n\r\n(and if I don't specify this env var, the error still happens but it complains about the path /usr/bin/python.)\r\n\r\nThe active python interpreter on my path is a poetry venv shim:\r\n\r\n```\r\n> which python\r\n/home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/bin/python\r\n```\r\n\r\n.. which points to a pyenv-installed interpreter binary:\r\n\r\n```\r\n> ll /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/bin/python\r\nlrwxrwxrwx 1 tim tim 47 Jun 18 11:21 /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/bin/python -> /home/tim/.pyenv/versions/3.10.0/bin/python3.10*\r\n```\r\n\r\nI suspect this is a molecule issue (or perhaps me misusing molecule) because I can successfully run ansible in this environment to gather localhost facts:\r\n\r\n```\r\n> ansible -m setup localhost                                                                            (1 results) [1047/64866][WARNING]: No inventory was parsed, only implicit localhost is available\r\nlocalhost | SUCCESS => {\r\n    \"ansible_facts\": {\r\n    .\r\n    .\r\n```\r\n\r\nI understand from https://github.com/ansible/ansible/issues/74045 that this is thought to be caused by an _implicit localhost_, but since I'm specifying `ANSIBLE_PYTHON_INTERPRETER` explicitly, and I'm using the molecule-docker driver which generates an inventory file to pass to the playbook, and since the error I'm getting clearly indicates ansible is using this path, I believe this to be another problem.\r\n\r\n### Ansible Version\r\n\r\n```console\r\n$ ansible --version\r\nansible [core 2.12.6]\r\n  config file = /home/tim/src/timblaktu-cm/ansible/ansible.cfg\r\n  configured module search path = ['/home/tim/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/tim/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/bin/ansible\r\n  python version = 3.10.0 (default, Oct 12 2021, 11:25:19) [GCC 8.3.0]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\n```\r\n\r\n\r\n### Ansible Configuration\r\n\r\n```console\r\n# if using a version older than ansible-core 2.12 you should omit the '-t all'\r\n$ ansible-config dump --only-changed -t all\r\nDEFAULT_FORKS(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = 20\r\nDEFAULT_LOG_PATH(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = /home/tim/src/timblaktu-cm/ansible/ansible.log\r\nDEFAULT_MANAGED_STR(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = #Ansible managed by user {uid} on {host} from template file:\r\n\r\nDEFAULT_POLL_INTERVAL(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = 5\r\nDEFAULT_ROLES_PATH(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = ['/etc/ansible/roles', '/home/tim/src/timblaktu-cm/ansible/roles', '/home/tim/.ansible/collections/ansib>DEFAULT_STDOUT_CALLBACK(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = debug\r\nHOST_KEY_CHECKING(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = False\r\nINTERPRETER_PYTHON(env: ANSIBLE_PYTHON_INTERPRETER) = /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/bin/python\r\nRETRY_FILES_ENABLED(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = False\r\n\r\nBECOME:\r\n======\r\n\r\nCACHE:\r\n=====\r\n\r\nCALLBACK:\r\n========\r\n\r\nCLICONF:\r\n=======\r\n\r\nCONNECTION:\r\n==========\r\n\r\nparamiko_ssh:\r\n____________\r\nhost_key_checking(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = False\r\n\r\nssh:\r\n___\r\nhost_key_checking(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = False\r\npipelining(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = False\r\nssh_args(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = -o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no\r\n\r\nHTTPAPI:\r\n=======\r\n\r\nINVENTORY:\r\n=========\r\n\r\nLOOKUP:\r\n======\r\n\r\nNETCONF:\r\n=======\r\n\r\nSHELL:\r\n=====\r\n\r\nsh:\r\n__\r\nworld_readable_temp(/home/tim/src/timblaktu-cm/ansible/ansible.cfg) = True\r\n\r\nVARS:\r\n====\r\n```\r\n\r\n\r\n### OS / Environment\r\n\r\nDebian 11.2 in WSL\r\n\r\nVirtual Environment Versions:\r\n\r\n```\r\n> poetry show\r\nansible            5.9.0     Radically simple IT automation\r\nansible-compat     2.1.0     Ansible compatibility goodies\r\nansible-core       2.12.6    Radically simple IT automation\r\narrow              1.2.2     Better dates & times for Python\r\nattrs              21.4.0    Classes Without Boilerplate\r\nbinaryornot        0.4.4     Ultra-lightweight pure Python package to check if a file is binary or text.\r\ncerberus           1.3.2     Lightweight, extensible schema and data validation tool for Python dictionaries.\r\ncertifi            2022.6.15 Python package for providing Mozilla's CA Bundle.\r\ncffi               1.15.0    Foreign Function Interface for Python calling C code.\r\nchardet            4.0.0     Universal encoding detector for Python 2 and 3\r\ncharset-normalizer 2.0.12    The Real First Universal Charset Detector. Open, modern and actively maintained alternative to Chardet.\r\nclick              8.1.3     Composable command line interface toolkit\r\nclick-help-colors  0.9.1     Colorization of help messages in Click\r\ncommonmark         0.9.1     Python parser for the CommonMark Markdown spec\r\ncookiecutter       2.1.1     A command-line utility that creates projects from project templates, e.g. creating a Python package project from a Python package project te...\r\ncryptography       37.0.2    cryptography is a package which provides cryptographic recipes and primitives to Python developers.\r\ndistro             1.7.0     Distro - an OS platform information API\r\ndocker             5.0.3     A Python library for the Docker Engine API.\r\nenrich             1.2.7     enrich\r\nidna               3.3       Internationalized Domain Names in Applications (IDNA)\r\niniconfig          1.1.1     iniconfig: brain-dead simple config-ini parsing\r\njinja2             3.1.2     A very fast and expressive template engine.\r\njinja2-time        0.2.0     Jinja2 Extension for Dates and Times\r\njsonschema         4.6.0     An implementation of JSON Schema validation for Python\r\nmarkupsafe         2.1.1     Safely add untrusted strings to HTML/XML markup.\r\nmolecule           4.0.0     Molecule aids in the development and testing of Ansible roles\r\nmolecule-docker    1.1.0     Molecule aids in the development and testing of Ansible roles\r\npackaging          21.3      Core utilities for Python packages\r\npluggy             1.0.0     plugin and hook calling mechanisms for python\r\npy                 1.11.0    library with cross-python path, ini-parsing, io, code, log facilities\r\npycparser          2.21      C parser in Python\r\npygments           2.12.0    Pygments is a syntax highlighting package written in Python.\r\npyparsing          3.0.9     pyparsing module - Classes and methods to define and execute parsing grammars\r\npyrsistent         0.18.1    Persistent/Functional/Immutable data structures\r\npytest             7.1.2     pytest: simple powerful testing with Python\r\npython-dateutil    2.8.2     Extensions to the standard Python datetime module\r\npython-slugify     6.1.2     A Python slugify application that also handles Unicode\r\npyyaml             6.0       YAML parser and emitter for Python\r\nrequests           2.28.0    Python HTTP for Humans.\r\nresolvelib         0.5.5     Resolve abstract dependencies into concrete ones\r\nrich               12.4.4    Render rich text, tables, progress bars, syntax highlighting, markdown and more to the terminal\r\nselinux            0.2.1     shim selinux module\r\nsix                1.16.0    Python 2 and 3 compatibility utilities\r\nsubprocess-tee     0.3.5     subprocess-tee\r\ntext-unidecode     1.3       The most basic Text::Unidecode port\r\ntomli              2.0.1     A lil' TOML parser\r\nurllib3            1.26.9    HTTP library with thread-safe connection pooling, file post, and more.\r\nwebsocket-client   1.3.2     WebSocket client for Python with low level API options\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nInside my `poetry shell`, run `molecule converge` on the molecule scenario containing this test playbook:\r\n\r\n<!--- A SIMPLE MOLECULE TEST/CONVERGE PLAYBOOK -->\r\n```yaml (paste below)\r\n---\r\n- name: Converge\r\n  hosts: all\r\n  tasks:\r\n    - name: \"Import Main Playbook to be Tested\"\r\n      import_playbook:\r\n        name: \"../../some-other-playbook-to-test.yml\"\r\n```\r\n\r\n\r\n### Expected Results\r\n\r\nI expected ansible to be able to find and run the python interpreter pointer to by ANSIBLE_INTERPRETER_PATH, which i set explicitly using:\r\n\r\n```\r\nexport ANSIBLE_PYTHON_INTERPRETER=\"$(which python)\"\r\n```\r\n\r\nwhich works just fine manually in the same shell I ran molecule from:\r\n\r\n```\r\n> /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/bin/python\r\nPython 3.10.0 (default, Oct 12 2021, 11:25:19) [GCC 8.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>>\r\n```\r\n\r\n### Actual Results\r\n\r\n```console\r\nTASK [Gathering Facts] *********************************************************\r\nfatal: [instance]: FAILED! => {\"ansible_facts\": {}, \"changed\": false, \"failed_modules\": {\"ansible.legacy.setup\": {\"failed\": true, \"module_stderr\": \"/bin/sh: 1: /home/tim/.cache/pypoetry/virtualenvs/timblaktu-cm-ansible-X34RCiD6-py3.10/bin/python: not found\\n\", \"module_stdout\": \"\", \"msg\": \"The module failed to execute correctly, you probably need to set the interpreter.\\nSee stdout/stderr for the exact error\", \"rc\": 127}}, \"msg\": \"The following modules failed to execute: ansible.legacy.setup\\n\"}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3593/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3593/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3591", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3591/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3591/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3591/events", "html_url": "https://github.com/ansible-community/molecule/issues/3591", "id": 1274744709, "node_id": "I_kwDOAsPDRs5L-w-F", "number": 3591, "title": "No doc for #3467", "user": {"login": "nkakouros", "id": 11805218, "node_id": "MDQ6VXNlcjExODA1MjE4", "avatar_url": "https://avatars.githubusercontent.com/u/11805218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nkakouros", "html_url": "https://github.com/nkakouros", "followers_url": "https://api.github.com/users/nkakouros/followers", "following_url": "https://api.github.com/users/nkakouros/following{/other_user}", "gists_url": "https://api.github.com/users/nkakouros/gists{/gist_id}", "starred_url": "https://api.github.com/users/nkakouros/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nkakouros/subscriptions", "organizations_url": "https://api.github.com/users/nkakouros/orgs", "repos_url": "https://api.github.com/users/nkakouros/repos", "events_url": "https://api.github.com/users/nkakouros/events{/privacy}", "received_events_url": "https://api.github.com/users/nkakouros/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-17T08:37:25Z", "updated_at": "2022-06-23T12:54:21Z", "closed_at": "2022-06-23T12:54:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "The new feature added in #3467 is not documented in the docs. \r\n\r\nThe new feature:\r\n\r\n> provide[s] alternative location for\r\n> tests or side effects playbook in test sequence like this:\r\n> \r\n>  ```\r\n>  test_sequence:\r\n>     - create\r\n>     - converge\r\n>     - verify\r\n>     - side_effect side_effect1.yml\r\n>     - verify tests_for_effect1/\r\n>     - side_effect side_effect2.yml\r\n>     - verify tests_for_effect2/\r\n>  ```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3591/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3589", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3589/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3589/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3589/events", "html_url": "https://github.com/ansible-community/molecule/issues/3589", "id": 1272941447, "node_id": "I_kwDOAsPDRs5L34uH", "number": 3589, "title": "Incorrect warning message on `molecule lint`", "user": {"login": "rohankrishnadev", "id": 1734018, "node_id": "MDQ6VXNlcjE3MzQwMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1734018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohankrishnadev", "html_url": "https://github.com/rohankrishnadev", "followers_url": "https://api.github.com/users/rohankrishnadev/followers", "following_url": "https://api.github.com/users/rohankrishnadev/following{/other_user}", "gists_url": "https://api.github.com/users/rohankrishnadev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohankrishnadev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohankrishnadev/subscriptions", "organizations_url": "https://api.github.com/users/rohankrishnadev/orgs", "repos_url": "https://api.github.com/users/rohankrishnadev/repos", "events_url": "https://api.github.com/users/rohankrishnadev/events{/privacy}", "received_events_url": "https://api.github.com/users/rohankrishnadev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-16T01:41:08Z", "updated_at": "2022-06-16T12:50:48Z", "closed_at": "2022-06-16T12:50:38Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```bash\r\nansible [core 2.12.6]\r\n  config file = None\r\n  configured module search path = ['/Users/rohan/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/rohan/Documents/py_env/molecule/lib/python3.8/site-packages/ansible\r\n  ansible collection location = /Users/rohan/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/rohan/Documents/py_env/molecule/bin/ansible\r\n  python version = 3.8.9 (default, Apr 13 2022, 08:48:07) [Clang 13.1.6 (clang-1316.0.21.2.5)]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 3.6.1 using python 3.8\r\n    ansible:2.12.6\r\n    delegated:3.6.1 from molecule\r\n    hetznercloud:1.3.0 from molecule_hetznercloud\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- yamllint\r\n- ansible-lint\r\n\r\n# Desired Behavior\r\n\r\nThe error message should reflect actual schema values instead of the first match.\r\n\r\n# Actual Behaviour\r\nI'm running macOS Monterey. I've installed `molecule` and `ansible` as follows:\r\n\r\n```bash\r\npython3 -m venv ~/Documents/py_env/molecule\r\nsource ~/Documents/py_env/molecule/bin/activate\r\npip install wheel\r\npip install ansible ansible-lint yamllint molecule molecule-hetznercloud\r\ndeactivate\r\nsource ~/Documents/py_env/molecule/bin/activate\r\ncd ~/Projects/ansible-roles/\r\nmolecule init role rohankrishnadev.git --driver-name hetznercloud\r\ncd git\r\n```\r\n\r\nThe content of my `meta/main.yml` file is as follows:\r\n```yaml\r\ngalaxy_info:\r\n  author: Rohan Krishnadev\r\n  namespace: rohankrishnadev\r\n  description: Ansible role to install and configure git on the system\r\n  company: none\r\n  license: MIT\r\n  min_ansible_version: 2.1\r\n  platforms:\r\n  - name: Fedora\r\n    versions:\r\n    - 36\r\n  - name: Ubuntu\r\n    versions:\r\n    - 20.04\r\n```\r\n\r\nWhen I run `molecule lint` I receive a `warning` stating `schema: 36 is not one of ['6.1', '7.1', '7.2', 'all'] (schema[meta])`. It shows me the versions value for `AIXPlatformModel`. The correct behaviour would be to show me the values for `FedoraPlatformModel` from [https://github.com/ansible/schemas/blob/main/f/ansible-meta.json](https://github.com/ansible/schemas/blob/main/f/ansible-meta.json).\r\n\r\nOutput of running `molecule --debug lint`\r\n```bash\r\n(molecule) git % molecule --debug lint\r\nDEBUG    Validating schema /Users/rohan/Projects/ansible-roles/git/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, lint\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/Users/rohan/.cache/ansible-compat/9a881b/modules:/Users/rohan/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/rohan/.cache/ansible-compat/9a881b/collections:/Users/rohan/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/Users/rohan/.cache/ansible-compat/9a881b/roles:/Users/rohan/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Using /Users/rohan/.cache/ansible-compat/9a881b/roles/rohankrishnadev.git symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > lint\r\nWARNING  Listing 1 violation(s) that are fatal\r\nschema: 36 is not one of ['6.1', '7.1', '7.2', 'all'] (schema[meta])\r\nmeta/main.yml:1  Returned errors will not include exact line numbers, but they will mention\r\nthe schema name being used as a tag, like ``playbook-schema``,\r\n``tasks-schema``.\r\n\r\nThis rule is not skippable and stops further processing of the file.\r\n\r\nSchema bugs should be reported towards (https://github.com/ansible/schemas) project instead of ansible-lint.\r\n\r\nIf incorrect schema was picked, you might want to either:\r\n\r\n* move the file to standard location, so its file is detected correctly.\r\n* use ``kinds:`` option in linter config to help it pick correct file type.\r\n\r\n\r\nYou can skip specific rules or tags by adding them to your configuration file:\r\n# .config/ansible-lint.yml\r\nwarn_list:  # or 'skip_list' to silence them completely\r\n  - experimental  # all rules tagged as experimental\r\n\r\nFinished with 0 failure(s), 1 warning(s) on 6 files.\r\n(molecule) git % \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3589/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3589/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3587", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3587/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3587/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3587/events", "html_url": "https://github.com/ansible-community/molecule/issues/3587", "id": 1269990316, "node_id": "I_kwDOAsPDRs5LsoOs", "number": 3587, "title": "`verify` stage does not inherit role defaults", "user": {"login": "konstruktoid", "id": 7956715, "node_id": "MDQ6VXNlcjc5NTY3MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/7956715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/konstruktoid", "html_url": "https://github.com/konstruktoid", "followers_url": "https://api.github.com/users/konstruktoid/followers", "following_url": "https://api.github.com/users/konstruktoid/following{/other_user}", "gists_url": "https://api.github.com/users/konstruktoid/gists{/gist_id}", "starred_url": "https://api.github.com/users/konstruktoid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/konstruktoid/subscriptions", "organizations_url": "https://api.github.com/users/konstruktoid/orgs", "repos_url": "https://api.github.com/users/konstruktoid/repos", "events_url": "https://api.github.com/users/konstruktoid/events{/privacy}", "received_events_url": "https://api.github.com/users/konstruktoid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-06-13T21:43:18Z", "updated_at": "2022-06-17T08:51:24Z", "closed_at": "2022-06-17T08:50:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```bash\r\nansible [core 2.14.0.dev0]\r\n  config file = None\r\n  configured module search path = ['[...]/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.9/site-packages/ansible\r\n  ansible collection location = [...]/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.9.13 (main, May 24 2022, 21:28:31) [Clang 13.1.6 (clang-1316.0.21.2)] (/usr/local/opt/python@3.9/bin/python3.9)\r\n  jinja version = 3.0.2\r\n  libyaml = True\r\n```\r\n\r\n```bash\r\nmolecule 4.0.0a1.dev12 using python 3.9\r\n    ansible:2.14.0.dev0\r\n    delegated:4.0.0a1.dev12 from molecule\r\n    podman:1.0.1 from molecule_podman requiring collections: containers.podman>=1.7.0 ansible.posix>=1.3.0\r\n    vagrant:1.0.1.dev14 from molecule_vagrant\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip installation of github main\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip installation of github main\r\n\r\nDetail any linters or test runners used:\r\n\r\n```yaml\r\nlint: |\r\n  set -e\r\n  ansible-lint\r\n```\r\n\r\n# Desired Behavior\r\n\r\nThe verification stage should inherit role defaults.\r\n\r\n# Actual Behaviour\r\n\r\nThe verification stage does not inherit role defaults, causing an `is undefined` error.\r\n\r\n```bash\r\n.\r\n\u251c\u2500\u2500 README.md\r\n\u251c\u2500\u2500 defaults\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 molecule\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 default\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 INSTALL.rst\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 converge.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 verify.yml\r\n\u251c\u2500\u2500 tasks\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u2514\u2500\u2500 templates\r\n\r\n6 directories, 7 files\r\n```\r\n\r\n`defaults/main/main.yml`:\r\n```yaml\r\n---\r\nmessage: \"shiny_pikachu\"\r\nanother_message: \"psychic_mewtwo\"\r\nchange_message: false\r\n...\r\n```\r\n\r\n`tasks/main.yml`:\r\n```yaml\r\n---\r\n- name: print message\r\n  ansible.builtin.debug:\r\n    msg: \"{{ item }}\"\r\n  with_items:\r\n    - \"{{ message }}\"\r\n    - \"{{ another_message }}\"\r\n    - \"{{ change_message }}\"\r\n\r\n- name: assert jammy01\r\n  ansible.builtin.assert:\r\n    that:\r\n      - message ==  \"shiny_pikachu\"\r\n  when: ansible_hostname == \"jammy01\"\r\n\r\n- name: assert jammy02\r\n  ansible.builtin.assert:\r\n    that:\r\n      - message ==  \"replaced_message\"\r\n  when: ansible_hostname == \"jammy02\"\r\n\r\n- name: assert jammy03\r\n  ansible.builtin.assert:\r\n    that:\r\n      - another_message ==  \"psychic_mewtwo\"\r\n  when: ansible_hostname == \"jammy03\"\r\n\r\n- name: write a message\r\n  ansible.builtin.lineinfile:\r\n    path: '/tmp/pokedex'\r\n    line: \"{{ message }}\"\r\n    state: present\r\n    create: true\r\n    mode: \"0666\"\r\n  when: not change_message\r\n\r\n- name: write another message\r\n  ansible.builtin.lineinfile:\r\n    path: '/tmp/pokedex'\r\n    line: \"{{ another_message }}\"\r\n    state: present\r\n    create: true\r\n    mode: \"0666\"\r\n  when: change_message\r\n...\r\n```\r\n\r\n`molecule/default/molecule.yml`:\r\n```yaml\r\n---\r\ndependency:\r\n  name: galaxy\r\n  enabled: true\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\n  provider_options:\r\n    linked_clone: false\r\nprovisioner:\r\n  name: ansible\r\n  config_options:\r\n    defaults:\r\n      callback_whitelist: profile_tasks\r\n  log: true\r\n  inventory:\r\n    host_vars:\r\n      jammy02:\r\n        change_message: true\r\n        message: \"replaced_message\"\r\n      jammy03:\r\n        change_message: true\r\nplatforms:\r\n  - name: jammy01\r\n    box: \"ubuntu/jammy64\"\r\n    config_options:\r\n      vm.boot_timeout: 600\r\n      synced_folder: false\r\n    provider_raw_config_args:\r\n      - \"customize ['modifyvm', :id, '--uart1', '0x3F8', '4']\"\r\n      - \"customize ['modifyvm', :id, '--uartmode1', 'file', File::NULL]\"\r\n    instance_raw_config_args:\r\n      - 'vbguest.installer_options = { allow_kernel_upgrade: true }'\r\n    memory: 1024\r\n  - name: jammy02\r\n    box: \"ubuntu/jammy64\"\r\n    config_options:\r\n      vm.boot_timeout: 600\r\n      synced_folder: false\r\n    provider_raw_config_args:\r\n      - \"customize ['modifyvm', :id, '--uart1', '0x3F8', '4']\"\r\n      - \"customize ['modifyvm', :id, '--uartmode1', 'file', File::NULL]\"\r\n    instance_raw_config_args:\r\n      - 'vbguest.installer_options = { allow_kernel_upgrade: true }'\r\n    memory: 1024\r\n  - name: jammy03\r\n    box: \"ubuntu/jammy64\"\r\n    config_options:\r\n      vm.boot_timeout: 600\r\n      synced_folder: false\r\n    provider_raw_config_args:\r\n      - \"customize ['modifyvm', :id, '--uart1', '0x3F8', '4']\"\r\n      - \"customize ['modifyvm', :id, '--uartmode1', 'file', File::NULL]\"\r\n    instance_raw_config_args:\r\n      - 'vbguest.installer_options = { allow_kernel_upgrade: true }'\r\n    memory: 1024\r\nverifier:\r\n  name: ansible\r\nlint: |\r\n  set -e\r\n  ansible-lint\r\nscenario:\r\n  name: default\r\n[...]\r\n```\r\n\r\n`molecule/default/verify.yml`:\r\n```yaml\r\n# message: \"shiny_pikachu\"\r\n# another_message: \"psychic_mewtwo\"\r\n# change_message: false\r\n\r\n#    host_vars:\r\n#      jammy02:\r\n#        change_message: true\r\n#        message: \"replaced_message\"\r\n#      jammy03:\r\n#        change_message: true\r\n---\r\n- name: Verify\r\n  hosts: all\r\n  tasks:\r\n    - name: verification - print message\r\n      ansible.builtin.debug:\r\n        msg: \"{{ item }}\"\r\n      with_items:\r\n        - \"{{ message }}\"\r\n        - \"{{ another_message }}\"\r\n        - \"{{ change_message }}\"\r\n\r\n    - name: verification - assert jammy01\r\n      ansible.builtin.assert:\r\n        that:\r\n          - message ==  \"shiny_pikachu\"\r\n      when: ansible_hostname == \"jammy01\"\r\n\r\n    - name: verification - assert jammy02\r\n      ansible.builtin.assert:\r\n        that:\r\n          - message ==  \"replaced_message\"\r\n      when: ansible_hostname == \"jammy02\"\r\n\r\n    - name: verification - assert jammy03\r\n      ansible.builtin.assert:\r\n        that:\r\n          - message ==  \"psychic_mewtwo\"\r\n      when: ansible_hostname == \"jammy03\"\r\n...\r\n```\r\n\r\n```bash\r\nWARNING: PATH altered to include /usr/local/opt/python@3.9/bin\r\n[WARNING]: You are running the development version of Ansible. You should only\r\nrun Ansible from \"devel\" if you are modifying the Ansible engine, or trying out\r\nfeatures under development. This is a rapidly changing source of code and can\r\nbecome unstable at any point.\r\n[WARNING]: You are running the development version of Ansible. You should only\r\nrun Ansible from \"devel\" if you are modifying the Ansible engine, or trying out\r\nfeatures under development. This is a rapidly changing source of code and can\r\nbecome unstable at any point.\r\n[WARNING]: You are running the development version of Ansible. You should only\r\nrun Ansible from \"devel\" if you are modifying the Ansible engine, or trying out\r\nfeatures under development. This is a rapidly changing source of code and can\r\nbecome unstable at any point.\r\n[DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names \r\nto new standard, use callbacks_enabled instead. This feature will be removed \r\nfrom ansible-core in version 2.15. Deprecation warnings can be disabled by \r\nsetting deprecation_warnings=False in ansible.cfg.\r\n\r\nPLAY [Destroy] *****************************************************************\r\n\r\nTASK [Destroy molecule instance(s)] ********************************************\r\nMonday 13 June 2022  23:28:32 +0200 (0:00:00.023)       0:00:00.023 ***********\r\nok: [localhost]\r\n\r\nTASK [Populate instance config] ************************************************\r\nMonday 13 June 2022  23:28:40 +0200 (0:00:07.838)       0:00:07.862 ***********\r\nok: [localhost]\r\n\r\nTASK [Dump instance config] ****************************************************\r\nMonday 13 June 2022  23:28:40 +0200 (0:00:00.085)       0:00:07.947 ***********\r\nskipping: [localhost]\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=2    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\n\r\nMonday 13 June 2022  23:28:40 +0200 (0:00:00.080)       0:00:08.028 ***********\r\n===============================================================================\r\nDestroy molecule instance(s) -------------------------------------------- 7.84s\r\nPopulate instance config ------------------------------------------------ 0.09s\r\nDump instance config ---------------------------------------------------- 0.08s\r\n[WARNING]: You are running the development version of Ansible. You should only\r\nrun Ansible from \"devel\" if you are modifying the Ansible engine, or trying out\r\nfeatures under development. This is a rapidly changing source of code and can\r\nbecome unstable at any point.\r\n[DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names \r\nto new standard, use callbacks_enabled instead. This feature will be removed \r\nfrom ansible-core in version 2.15. Deprecation warnings can be disabled by \r\nsetting deprecation_warnings=False in ansible.cfg.\r\n\r\nplaybook: [...]/issue-molecule-defaults/molecule/default/converge.yml\r\n[WARNING]: You are running the development version of Ansible. You should only\r\nrun Ansible from \"devel\" if you are modifying the Ansible engine, or trying out\r\nfeatures under development. This is a rapidly changing source of code and can\r\nbecome unstable at any point.\r\n[DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names \r\nto new standard, use callbacks_enabled instead. This feature will be removed \r\nfrom ansible-core in version 2.15. Deprecation warnings can be disabled by \r\nsetting deprecation_warnings=False in ansible.cfg.\r\n\r\nPLAY [Create] ******************************************************************\r\n\r\nTASK [Create molecule instance(s)] *********************************************\r\nMonday 13 June 2022  23:28:42 +0200 (0:00:00.023)       0:00:00.023 ***********\r\nchanged: [localhost]\r\n\r\nTASK [Populate instance config dict] *******************************************\r\nMonday 13 June 2022  23:30:39 +0200 (0:01:57.232)       0:01:57.255 ***********\r\nok: [localhost] => (item={'Host': 'jammy01', 'HostName': '127.0.0.1', 'User': 'vagrant', 'Port': '2201', 'UserKnownHostsFile': '/dev/null', 'StrictHostKeyChecking': 'no', 'PasswordAuthentication': 'no', 'IdentityFile': '[...]/.cache/molecule/issue-molecule-defaults/default/.vagrant/machines/jammy01/virtualbox/private_key', 'IdentitiesOnly': 'yes', 'LogLevel': 'FATAL'})\r\nok: [localhost] => (item={'Host': 'jammy02', 'HostName': '127.0.0.1', 'User': 'vagrant', 'Port': '2202', 'UserKnownHostsFile': '/dev/null', 'StrictHostKeyChecking': 'no', 'PasswordAuthentication': 'no', 'IdentityFile': '[...]/.cache/molecule/issue-molecule-defaults/default/.vagrant/machines/jammy02/virtualbox/private_key', 'IdentitiesOnly': 'yes', 'LogLevel': 'FATAL'})\r\nok: [localhost] => (item={'Host': 'jammy03', 'HostName': '127.0.0.1', 'User': 'vagrant', 'Port': '2203', 'UserKnownHostsFile': '/dev/null', 'StrictHostKeyChecking': 'no', 'PasswordAuthentication': 'no', 'IdentityFile': '[...]/.cache/molecule/issue-molecule-defaults/default/.vagrant/machines/jammy03/virtualbox/private_key', 'IdentitiesOnly': 'yes', 'LogLevel': 'FATAL'})\r\n\r\nTASK [Convert instance config dict to a list] **********************************\r\nMonday 13 June 2022  23:30:39 +0200 (0:00:00.172)       0:01:57.428 ***********\r\nok: [localhost]\r\n\r\nTASK [Dump instance config] ****************************************************\r\nMonday 13 June 2022  23:30:39 +0200 (0:00:00.082)       0:01:57.511 ***********\r\nchanged: [localhost]\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nMonday 13 June 2022  23:30:40 +0200 (0:00:01.156)       0:01:58.668 ***********\r\n===============================================================================\r\nCreate molecule instance(s) ------------------------------------------- 117.23s\r\nDump instance config ---------------------------------------------------- 1.16s\r\nPopulate instance config dict ------------------------------------------- 0.17s\r\nConvert instance config dict to a list ---------------------------------- 0.08s\r\n[WARNING]: You are running the development version of Ansible. You should only\r\nrun Ansible from \"devel\" if you are modifying the Ansible engine, or trying out\r\nfeatures under development. This is a rapidly changing source of code and can\r\nbecome unstable at any point.\r\n[DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names \r\nto new standard, use callbacks_enabled instead. This feature will be removed \r\nfrom ansible-core in version 2.15. Deprecation warnings can be disabled by \r\nsetting deprecation_warnings=False in ansible.cfg.\r\n\r\nPLAY [Prepare] *****************************************************************\r\n\r\nTASK [Bootstrap python for Ansible] ********************************************\r\nMonday 13 June 2022  23:30:42 +0200 (0:00:00.042)       0:00:00.042 ***********\r\nok: [jammy02]\r\nok: [jammy03]\r\nok: [jammy01]\r\n\r\nPLAY RECAP *********************************************************************\r\njammy01                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\njammy02                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\njammy03                    : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nMonday 13 June 2022  23:30:44 +0200 (0:00:01.266)       0:00:01.309 ***********\r\n===============================================================================\r\nBootstrap python for Ansible -------------------------------------------- 1.27s\r\n[WARNING]: You are running the development version of Ansible. You should only\r\nrun Ansible from \"devel\" if you are modifying the Ansible engine, or trying out\r\nfeatures under development. This is a rapidly changing source of code and can\r\nbecome unstable at any point.\r\n[DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names \r\nto new standard, use callbacks_enabled instead. This feature will be removed \r\nfrom ansible-core in version 2.15. Deprecation warnings can be disabled by \r\nsetting deprecation_warnings=False in ansible.cfg.\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nMonday 13 June 2022  23:30:45 +0200 (0:00:00.059)       0:00:00.059 ***********\r\nok: [jammy02]\r\nok: [jammy01]\r\nok: [jammy03]\r\n\r\nTASK [Include issue-molecule-defaults] *****************************************\r\nMonday 13 June 2022  23:30:47 +0200 (0:00:01.969)       0:00:02.028 ***********\r\n\r\nTASK [issue-molecule-defaults : print message] *********************************\r\nMonday 13 June 2022  23:30:47 +0200 (0:00:00.132)       0:00:02.161 ***********\r\nok: [jammy01] => (item=shiny_pikachu) => {\r\n    \"msg\": \"shiny_pikachu\"\r\n}\r\nok: [jammy01] => (item=psychic_mewtwo) => {\r\n    \"msg\": \"psychic_mewtwo\"\r\n}\r\nok: [jammy01] => (item=False) => {\r\n    \"msg\": false\r\n}\r\nok: [jammy02] => (item=replaced_message) => {\r\n    \"msg\": \"replaced_message\"\r\n}\r\nok: [jammy02] => (item=psychic_mewtwo) => {\r\n    \"msg\": \"psychic_mewtwo\"\r\n}\r\nok: [jammy03] => (item=shiny_pikachu) => {\r\n    \"msg\": \"shiny_pikachu\"\r\n}\r\nok: [jammy02] => (item=True) => {\r\n    \"msg\": true\r\n}\r\nok: [jammy03] => (item=psychic_mewtwo) => {\r\n    \"msg\": \"psychic_mewtwo\"\r\n}\r\nok: [jammy03] => (item=True) => {\r\n    \"msg\": true\r\n}\r\n\r\nTASK [issue-molecule-defaults : assert jammy01] ********************************\r\nMonday 13 June 2022  23:30:47 +0200 (0:00:00.141)       0:00:02.302 ***********\r\nskipping: [jammy02]\r\nok: [jammy01] => {\r\n    \"changed\": false,\r\n    \"msg\": \"All assertions passed\"\r\n}\r\nskipping: [jammy03]\r\n\r\nTASK [issue-molecule-defaults : assert jammy02] ********************************\r\nMonday 13 June 2022  23:30:47 +0200 (0:00:00.080)       0:00:02.383 ***********\r\nskipping: [jammy01]\r\nok: [jammy02] => {\r\n    \"changed\": false,\r\n    \"msg\": \"All assertions passed\"\r\n}\r\nskipping: [jammy03]\r\n\r\nTASK [issue-molecule-defaults : assert jammy03] ********************************\r\nMonday 13 June 2022  23:30:47 +0200 (0:00:00.087)       0:00:02.470 ***********\r\nskipping: [jammy01]\r\nskipping: [jammy02]\r\nok: [jammy03] => {\r\n    \"changed\": false,\r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [issue-molecule-defaults : write a message] *******************************\r\nMonday 13 June 2022  23:30:47 +0200 (0:00:00.116)       0:00:02.587 ***********\r\nskipping: [jammy02]\r\nskipping: [jammy03]\r\nchanged: [jammy01]\r\n\r\nTASK [issue-molecule-defaults : write another message] *************************\r\nMonday 13 June 2022  23:30:48 +0200 (0:00:00.677)       0:00:03.265 ***********\r\nskipping: [jammy01]\r\nchanged: [jammy02]\r\nchanged: [jammy03]\r\n\r\nPLAY RECAP *********************************************************************\r\njammy01                    : ok=4    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0\r\njammy02                    : ok=4    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0\r\njammy03                    : ok=4    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0\r\n\r\nMonday 13 June 2022  23:30:49 +0200 (0:00:00.586)       0:00:03.851 ***********\r\n===============================================================================\r\nGathering Facts --------------------------------------------------------- 1.97s\r\nissue-molecule-defaults : write a message ------------------------------- 0.68s\r\nissue-molecule-defaults : write another message ------------------------- 0.59s\r\nissue-molecule-defaults : print message --------------------------------- 0.14s\r\nInclude issue-molecule-defaults ----------------------------------------- 0.13s\r\nissue-molecule-defaults : assert jammy03 -------------------------------- 0.12s\r\nissue-molecule-defaults : assert jammy02 -------------------------------- 0.09s\r\nissue-molecule-defaults : assert jammy01 -------------------------------- 0.08s\r\n[WARNING]: You are running the development version of Ansible. You should only\r\nrun Ansible from \"devel\" if you are modifying the Ansible engine, or trying out\r\nfeatures under development. This is a rapidly changing source of code and can\r\nbecome unstable at any point.\r\n[DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names \r\nto new standard, use callbacks_enabled instead. This feature will be removed \r\nfrom ansible-core in version 2.15. Deprecation warnings can be disabled by \r\nsetting deprecation_warnings=False in ansible.cfg.\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nMonday 13 June 2022  23:30:50 +0200 (0:00:00.060)       0:00:00.060 ***********\r\nok: [jammy02]\r\nok: [jammy01]\r\nok: [jammy03]\r\n\r\nTASK [Include issue-molecule-defaults] *****************************************\r\nMonday 13 June 2022  23:30:51 +0200 (0:00:01.639)       0:00:01.700 ***********\r\n\r\nTASK [issue-molecule-defaults : print message] *********************************\r\nMonday 13 June 2022  23:30:51 +0200 (0:00:00.129)       0:00:01.829 ***********\r\nok: [jammy01] => (item=shiny_pikachu) => {\r\n    \"msg\": \"shiny_pikachu\"\r\n}\r\nok: [jammy01] => (item=psychic_mewtwo) => {\r\n    \"msg\": \"psychic_mewtwo\"\r\n}\r\nok: [jammy02] => (item=replaced_message) => {\r\n    \"msg\": \"replaced_message\"\r\n}\r\nok: [jammy01] => (item=False) => {\r\n    \"msg\": false\r\n}\r\nok: [jammy02] => (item=psychic_mewtwo) => {\r\n    \"msg\": \"psychic_mewtwo\"\r\n}\r\nok: [jammy03] => (item=shiny_pikachu) => {\r\n    \"msg\": \"shiny_pikachu\"\r\n}\r\nok: [jammy02] => (item=True) => {\r\n    \"msg\": true\r\n}\r\nok: [jammy03] => (item=psychic_mewtwo) => {\r\n    \"msg\": \"psychic_mewtwo\"\r\n}\r\nok: [jammy03] => (item=True) => {\r\n    \"msg\": true\r\n}\r\n\r\nTASK [issue-molecule-defaults : assert jammy01] ********************************\r\nMonday 13 June 2022  23:30:52 +0200 (0:00:00.145)       0:00:01.975 ***********\r\nok: [jammy01] => {\r\n    \"changed\": false,\r\n    \"msg\": \"All assertions passed\"\r\n}\r\nskipping: [jammy02]\r\nskipping: [jammy03]\r\n\r\nTASK [issue-molecule-defaults : assert jammy02] ********************************\r\nMonday 13 June 2022  23:30:52 +0200 (0:00:00.089)       0:00:02.064 ***********\r\nskipping: [jammy01]\r\nok: [jammy02] => {\r\n    \"changed\": false,\r\n    \"msg\": \"All assertions passed\"\r\n}\r\nskipping: [jammy03]\r\n\r\nTASK [issue-molecule-defaults : assert jammy03] ********************************\r\nMonday 13 June 2022  23:30:52 +0200 (0:00:00.092)       0:00:02.157 ***********\r\nskipping: [jammy01]\r\nskipping: [jammy02]\r\nok: [jammy03] => {\r\n    \"changed\": false,\r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [issue-molecule-defaults : write a message] *******************************\r\nMonday 13 June 2022  23:30:52 +0200 (0:00:00.113)       0:00:02.270 ***********\r\nskipping: [jammy02]\r\nskipping: [jammy03]\r\nok: [jammy01]\r\n\r\nTASK [issue-molecule-defaults : write another message] *************************\r\nMonday 13 June 2022  23:30:53 +0200 (0:00:00.667)       0:00:02.938 ***********\r\nskipping: [jammy01]\r\nok: [jammy02]\r\nok: [jammy03]\r\n\r\nPLAY RECAP *********************************************************************\r\njammy01                    : ok=4    changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0\r\njammy02                    : ok=4    changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0\r\njammy03                    : ok=4    changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0\r\n\r\nMonday 13 June 2022  23:30:53 +0200 (0:00:00.705)       0:00:03.643 ***********\r\n===============================================================================\r\nGathering Facts --------------------------------------------------------- 1.64s\r\nissue-molecule-defaults : write another message ------------------------- 0.71s\r\nissue-molecule-defaults : write a message ------------------------------- 0.67s\r\nissue-molecule-defaults : print message --------------------------------- 0.15s\r\nInclude issue-molecule-defaults ----------------------------------------- 0.13s\r\nissue-molecule-defaults : assert jammy03 -------------------------------- 0.11s\r\nissue-molecule-defaults : assert jammy02 -------------------------------- 0.09s\r\nissue-molecule-defaults : assert jammy01 -------------------------------- 0.09s\r\n[WARNING]: You are running the development version of Ansible. You should only\r\nrun Ansible from \"devel\" if you are modifying the Ansible engine, or trying out\r\nfeatures under development. This is a rapidly changing source of code and can\r\nbecome unstable at any point.\r\n[DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names \r\nto new standard, use callbacks_enabled instead. This feature will be removed \r\nfrom ansible-core in version 2.15. Deprecation warnings can be disabled by \r\nsetting deprecation_warnings=False in ansible.cfg.\r\n\r\nPLAY [Verify] ******************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nMonday 13 June 2022  23:30:54 +0200 (0:00:00.017)       0:00:00.017 ***********\r\nok: [jammy02]\r\nok: [jammy03]\r\nok: [jammy01]\r\n\r\nTASK [verification - print message] ********************************************\r\nMonday 13 June 2022  23:30:56 +0200 (0:00:01.589)       0:00:01.606 ***********\r\nfatal: [jammy01]: FAILED! => {\"msg\": \"'message' is undefined\"}\r\nfatal: [jammy02]: FAILED! => {\"msg\": \"'another_message' is undefined\"}\r\nfatal: [jammy03]: FAILED! => {\"msg\": \"'message' is undefined\"}\r\n\r\nPLAY RECAP *********************************************************************\r\njammy01                    : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\njammy02                    : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\njammy03                    : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nMonday 13 June 2022  23:30:56 +0200 (0:00:00.080)       0:00:01.687 ***********\r\n===============================================================================\r\nGathering Facts --------------------------------------------------------- 1.59s\r\nverification - print message -------------------------------------------- 0.08s\r\n[WARNING]: You are running the development version of Ansible. You should only\r\nrun Ansible from \"devel\" if you are modifying the Ansible engine, or trying out\r\nfeatures under development. This is a rapidly changing source of code and can\r\nbecome unstable at any point.\r\n[DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names \r\nto new standard, use callbacks_enabled instead. This feature will be removed \r\nfrom ansible-core in version 2.15. Deprecation warnings can be disabled by \r\nsetting deprecation_warnings=False in ansible.cfg.\r\n\r\nPLAY [Destroy] *****************************************************************\r\n\r\nTASK [Destroy molecule instance(s)] ********************************************\r\nMonday 13 June 2022  23:30:57 +0200 (0:00:00.023)       0:00:00.023 ***********\r\nchanged: [localhost]\r\n\r\nTASK [Populate instance config] ************************************************\r\nMonday 13 June 2022  23:31:31 +0200 (0:00:34.137)       0:00:34.160 ***********\r\nok: [localhost]\r\n\r\nTASK [Dump instance config] ****************************************************\r\nMonday 13 June 2022  23:31:31 +0200 (0:00:00.084)       0:00:34.244 ***********\r\nchanged: [localhost]\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nMonday 13 June 2022  23:31:32 +0200 (0:00:01.110)       0:00:35.356 ***********\r\n===============================================================================\r\nDestroy molecule instance(s) ------------------------------------------- 34.14s\r\nDump instance config ---------------------------------------------------- 1.11s\r\nPopulate instance config ------------------------------------------------ 0.08s\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3587/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3586", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3586/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3586/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3586/events", "html_url": "https://github.com/ansible-community/molecule/pull/3586", "id": 1269608050, "node_id": "PR_kwDOAsPDRs45kjdS", "number": 3586, "title": "Fixes for recent pylint versions", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-13T15:24:52Z", "updated_at": "2022-06-13T15:31:14Z", "closed_at": "2022-06-13T15:31:12Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3586", "html_url": "https://github.com/ansible-community/molecule/pull/3586", "diff_url": "https://github.com/ansible-community/molecule/pull/3586.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3586.patch", "merged_at": "2022-06-13T15:31:12Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3586/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3581", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3581/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3581/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3581/events", "html_url": "https://github.com/ansible-community/molecule/issues/3581", "id": 1267710533, "node_id": "I_kwDOAsPDRs5Lj7pF", "number": 3581, "title": "ERROR! the role 'acme.myrole' was not found. \"symlink to current repository\" not used?!", "user": {"login": "maartenq", "id": 8597591, "node_id": "MDQ6VXNlcjg1OTc1OTE=", "avatar_url": "https://avatars.githubusercontent.com/u/8597591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maartenq", "html_url": "https://github.com/maartenq", "followers_url": "https://api.github.com/users/maartenq/followers", "following_url": "https://api.github.com/users/maartenq/following{/other_user}", "gists_url": "https://api.github.com/users/maartenq/gists{/gist_id}", "starred_url": "https://api.github.com/users/maartenq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maartenq/subscriptions", "organizations_url": "https://api.github.com/users/maartenq/orgs", "repos_url": "https://api.github.com/users/maartenq/repos", "events_url": "https://api.github.com/users/maartenq/events{/privacy}", "received_events_url": "https://api.github.com/users/maartenq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-10T15:35:06Z", "updated_at": "2022-06-17T09:33:56Z", "closed_at": "2022-06-17T09:33:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible [core 2.12.6]\r\n  config file = None\r\n  configured module search path = ['/Users/maarten/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/maarten/.pyenv/versions/3.10.4/envs/test/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /Users/maarten/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/maarten/.pyenv/versions/test/bin/ansible\r\n  python version = 3.10.4 (main, Jun  4 2022, 20:32:38) [Clang 13.0.0 (clang-1300.0.29.30)]\r\n  jinja version = 3.1.2\r\n  libyaml = True\r\nmolecule 3.6.1 using python 3.10\r\n    ansible:2.12.6\r\n    delegated:3.6.1 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\ntest setup:\r\n```\r\n\u276f pwd\r\n/Users/maarten/test\r\n\u276f pyenv virtualenv test\r\n\u276f pyenv activate test\r\n\u276f pip install -U pip setuptools\r\n\u276f pip install  \"molecule[docker]\" ansible\r\n\u276f pyenv which molecule\r\n/Users/maarten/.pyenv/versions/test/bin/molecule\r\n\u276f rm -rf ~/.cache/molecule\r\n\u276f molecule init role -d docker acme.myrole\r\n\u276f cd myrole\r\n\u276f cat << EOF > meta/main.yml\r\ngalaxy_info:\r\n  author: My Name\r\n  role_name: myrole\r\n  namespace: acme\r\n  description: My role description\r\n  license: MIT\r\nEOF\r\n\u276f molecule create\r\n```\r\n\r\nDetail any linters or test runners used:\r\n- none\r\n\r\n# Desired Behavior\r\n\r\nHave `molecule converge` find the role without  setting the `ANSIBLE_ROLES_PATH` environment variable on command line explicitly:\r\n```\r\n\r\n\u276f  ANSIBLE_ROLES_PATH=/Users/maarten/.cache/ansible-compat/a8f7d1/roles:/Users/maarten/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles molecule --debug converge\r\nDEBUG    Validating schema /Users/maarten/test/myrole/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, create, prepare, converge\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/Users/maarten/.cache/ansible-compat/a8f7d1/modules:/Users/maarten/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/maarten/.cache/ansible-compat/a8f7d1/collections:/Users/maarten/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Using /Users/maarten/.cache/ansible-compat/a8f7d1/roles/acme.myrole symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running default > prepare\r\nWARNING  Skipping, prepare playbook not configured.\r\nINFO     Running default > converge\r\nINFO     Sanity checks: 'docker'\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /Users/maarten/.cache/molecule/myrole/default/collections:/Users/maarten/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /Users/maarten/.cache/molecule/myrole/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/maarten/.pyenv/versions/3.10.4/envs/test/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/maarten/.cache/molecule/myrole/default/plugins/filter:/Users/maarten/test/myrole/plugins/filter:/Users/maarten/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_LIBRARY: /Users/maarten/.pyenv/versions/3.10.4/envs/test/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/maarten/.cache/molecule/myrole/default/library:/Users/maarten/test/myrole/library:/Users/maarten/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /Users/maarten/.cache/molecule/myrole/default/roles:/Users/maarten/test:/Users/maarten/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/maarten/.cache/ansible-compat/a8f7d1/roles:/Users/maarten/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /Users/maarten/test/myrole/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/maarten/.cache/molecule/myrole/default\r\nMOLECULE_FILE: /Users/maarten/.cache/molecule/myrole/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/maarten/.cache/molecule/myrole/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/maarten/.cache/molecule/myrole/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /Users/maarten/test/myrole\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/maarten/test/myrole/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/maarten/.cache/molecule/myrole/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/maarten/test/myrole/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/Users/maarten/.cache/molecule/myrole/default/collections:/Users/maarten/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/Users/maarten/.cache/molecule/myrole/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/maarten/.pyenv/versions/3.10.4/envs/test/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/maarten/.cache/molecule/myrole/default/plugins/filter:/Users/maarten/test/myrole/plugins/filter:/Users/maarten/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_FORCE_COLOR=1 ANSIBLE_LIBRARY=/Users/maarten/.pyenv/versions/3.10.4/envs/test/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/maarten/.cache/molecule/myrole/default/library:/Users/maarten/test/myrole/library:/Users/maarten/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/Users/maarten/.cache/molecule/myrole/default/roles:/Users/maarten/test:/Users/maarten/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/maarten/.cache/ansible-compat/a8f7d1/roles:/Users/maarten/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/Users/maarten/test/myrole/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/maarten/.cache/molecule/myrole/default MOLECULE_FILE=/Users/maarten/.cache/molecule/myrole/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/maarten/.cache/molecule/myrole/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/maarten/.cache/molecule/myrole/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/Users/maarten/test/myrole MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/maarten/test/myrole/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/maarten/.cache/molecule/myrole/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/maarten/test/myrole/molecule/default/tests\r\n\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nok: [instance]\r\n\r\nTASK [Include acme.myrole] *****************************************************\r\n\r\nPLAY RECAP *********************************************************************\r\ninstance                   : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n``` \r\n\r\n# Actual Behaviour\r\n\r\nConverge (without setting the `ANSIBLE_ROLES_PATH` environment variable on command line explicitly):\r\n```\r\n\u276f molecule --debug converge\r\nDEBUG    Validating schema /Users/maarten/test/myrole/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, create, prepare, converge\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/Users/maarten/.cache/ansible-compat/a8f7d1/modules:/Users/maarten/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/maarten/.cache/ansible-compat/a8f7d1/collections:/Users/maarten/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/Users/maarten/.cache/ansible-compat/a8f7d1/roles:/Users/maarten/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Using /Users/maarten/.cache/ansible-compat/a8f7d1/roles/acme.myrole symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running default > prepare\r\nWARNING  Skipping, prepare playbook not configured.\r\nINFO     Running default > converge\r\nINFO     Sanity checks: 'docker'\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /Users/maarten/.cache/molecule/myrole/default/collections:/Users/maarten/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /Users/maarten/.cache/molecule/myrole/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/maarten/.pyenv/versions/3.10.4/envs/test/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/maarten/.cache/molecule/myrole/default/plugins/filter:/Users/maarten/test/myrole/plugins/filter:/Users/maarten/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_LIBRARY: /Users/maarten/.pyenv/versions/3.10.4/envs/test/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/maarten/.cache/molecule/myrole/default/library:/Users/maarten/test/myrole/library:/Users/maarten/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: '/Users/maarten/.cache/molecule/myrole/default/roles:/Users/maarten/test:/Users/maarten/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:'\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /Users/maarten/test/myrole/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/maarten/.cache/molecule/myrole/default\r\nMOLECULE_FILE: /Users/maarten/.cache/molecule/myrole/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/maarten/.cache/molecule/myrole/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/maarten/.cache/molecule/myrole/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /Users/maarten/test/myrole\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/maarten/test/myrole/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/maarten/.cache/molecule/myrole/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/maarten/test/myrole/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/Users/maarten/.cache/molecule/myrole/default/collections:/Users/maarten/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/Users/maarten/.cache/molecule/myrole/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/maarten/.pyenv/versions/3.10.4/envs/test/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/maarten/.cache/molecule/myrole/default/plugins/filter:/Users/maarten/test/myrole/plugins/filter:/Users/maarten/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_FORCE_COLOR=1 ANSIBLE_LIBRARY=/Users/maarten/.pyenv/versions/3.10.4/envs/test/lib/python3.10/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/maarten/.cache/molecule/myrole/default/library:/Users/maarten/test/myrole/library:/Users/maarten/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/Users/maarten/.cache/molecule/myrole/default/roles:/Users/maarten/test:/Users/maarten/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles: MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/Users/maarten/test/myrole/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/maarten/.cache/molecule/myrole/default MOLECULE_FILE=/Users/maarten/.cache/molecule/myrole/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/maarten/.cache/molecule/myrole/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/maarten/.cache/molecule/myrole/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/Users/maarten/test/myrole MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/maarten/test/myrole/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/maarten/.cache/molecule/myrole/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/maarten/test/myrole/molecule/default/tests\r\n\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nok: [instance]\r\n\r\nTASK [Include acme.myrole] *****************************************************\r\nERROR! the role 'acme.myrole' was not found in /Users/maarten/test/myrole/molecule/default/roles:/Users/maarten/.cache/molecule/myrole/default/roles:/Users/maarten/test:/Users/maarten/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/maarten/test/myrole:/Users/maarten/test/myrole/molecule/default\r\n\r\nThe error appears to be in '/Users/maarten/test/myrole/molecule/default/converge.yml': line 7, column 15, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\n\r\nThe offending line appears to be:\r\n\r\n      include_role:\r\n        name: \"acme.myrole\"\r\n              ^ here\r\n\r\nPLAY RECAP *********************************************************************\r\ninstance                   : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nWARNING  Retrying execution failure 2 of: ansible-playbook --diff --inventory /Users/maarten/.cache/molecule/myrole/default/inventory --skip-tags molecule-notest,notest /Users/maarten/test/myrole/molecule/default/converge.yml\r\nCRITICAL Ansible return code was 2, command was: ['ansible-playbook', '--diff', '--inventory', '/Users/maarten/.cache/molecule/myrole/default/inventory', '--skip-tags', 'molecule-notest,notest', '/Users/maarten/test/myrole/molecule/default/converge.yml'][\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3581/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3581/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3571", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3571/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3571/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3571/events", "html_url": "https://github.com/ansible-community/molecule/pull/3571", "id": 1256058664, "node_id": "PR_kwDOAsPDRs443EFV", "number": 3571, "title": "doc: update doc on inventory/host section for provisioner", "user": {"login": "amarao", "id": 652496, "node_id": "MDQ6VXNlcjY1MjQ5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/652496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amarao", "html_url": "https://github.com/amarao", "followers_url": "https://api.github.com/users/amarao/followers", "following_url": "https://api.github.com/users/amarao/following{/other_user}", "gists_url": "https://api.github.com/users/amarao/gists{/gist_id}", "starred_url": "https://api.github.com/users/amarao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amarao/subscriptions", "organizations_url": "https://api.github.com/users/amarao/orgs", "repos_url": "https://api.github.com/users/amarao/repos", "events_url": "https://api.github.com/users/amarao/events{/privacy}", "received_events_url": "https://api.github.com/users/amarao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-01T13:50:18Z", "updated_at": "2022-06-13T15:43:49Z", "closed_at": "2022-06-13T15:43:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3571", "html_url": "https://github.com/ansible-community/molecule/pull/3571", "diff_url": "https://github.com/ansible-community/molecule/pull/3571.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3571.patch", "merged_at": "2022-06-13T15:43:48Z"}, "body": "1. Fix incorrect example, as 'hosts' should be two times, first\r\n   time as a name for for 'inventory' section, and second, as\r\n   normal Ansible `hosts` stanza in the group.\r\n\r\n2. Add well-known fact about incompatibility of sections of\r\n   inventory and links.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3571/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3571/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3565", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3565/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3565/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3565/events", "html_url": "https://github.com/ansible-community/molecule/pull/3565", "id": 1255045405, "node_id": "PR_kwDOAsPDRs44zckz", "number": 3565, "title": "Do not gather facts on newly created scenarios", "user": {"login": "zhan9san", "id": 32819197, "node_id": "MDQ6VXNlcjMyODE5MTk3", "avatar_url": "https://avatars.githubusercontent.com/u/32819197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhan9san", "html_url": "https://github.com/zhan9san", "followers_url": "https://api.github.com/users/zhan9san/followers", "following_url": "https://api.github.com/users/zhan9san/following{/other_user}", "gists_url": "https://api.github.com/users/zhan9san/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhan9san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhan9san/subscriptions", "organizations_url": "https://api.github.com/users/zhan9san/orgs", "repos_url": "https://api.github.com/users/zhan9san/repos", "events_url": "https://api.github.com/users/zhan9san/events{/privacy}", "received_events_url": "https://api.github.com/users/zhan9san/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-01T05:54:30Z", "updated_at": "2022-06-01T06:44:03Z", "closed_at": "2022-06-01T06:43:16Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3565", "html_url": "https://github.com/ansible-community/molecule/pull/3565", "diff_url": "https://github.com/ansible-community/molecule/pull/3565.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3565.patch", "merged_at": "2022-06-01T06:43:16Z"}, "body": "Fix #3564 \r\n\r\n### Before\r\n\r\n```shell\r\n$ molecule converge\r\nINFO     default scenario test matrix: dependency, create, prepare, converge\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/Users/jackzhang/.cache/ansible-compat/b4d3f4/modules:/Users/jackzhang/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/jackzhang/.cache/ansible-compat/b4d3f4/collections:/Users/jackzhang/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/Users/jackzhang/.cache/ansible-compat/b4d3f4/roles:/Users/jackzhang/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Using /Users/jackzhang/.cache/ansible-compat/b4d3f4/roles/acme.my_new_role symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running default > prepare\r\nWARNING  Skipping, prepare playbook not configured.\r\nINFO     Running default > converge\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nfatal: [instance]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: ssh: Could not resolve hostname instance: nodename nor servname provided, or not known\", \"unreachable\": true}\r\n\r\nPLAY RECAP *********************************************************************\r\ninstance                   : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nWARNING  Retrying execution failure 4 of: ansible-playbook --inventory /Users/jackzhang/.cache/molecule/my_new_role/default/inventory --skip-tags molecule-notest,notest /Users/jackzhang/tmp/my_new_role/molecule/default/converge.yml\r\nCRITICAL Ansible return code was 4, command was: ['ansible-playbook', '--inventory', '/Users/jackzhang/.cache/molecule/my_new_role/default/inventory', '--skip-tags', 'molecule-notest,notest', '/Users/jackzhang/tmp/my_new_role/molecule/default/converge.yml']\r\n\r\n$ echo $?\r\n4\r\n```\r\n\r\n\r\n### After\r\n\r\n```shell\r\n$ molecule converge\r\nINFO     default scenario test matrix: dependency, create, prepare, converge\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/Users/jackzhang/.cache/ansible-compat/b4d3f4/modules:/Users/jackzhang/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/jackzhang/.cache/ansible-compat/b4d3f4/collections:/Users/jackzhang/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/Users/jackzhang/.cache/ansible-compat/b4d3f4/roles:/Users/jackzhang/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Using /Users/jackzhang/.cache/ansible-compat/b4d3f4/roles/acme.my_new_role symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running default > prepare\r\nWARNING  Skipping, prepare playbook not configured.\r\nINFO     Running default > converge\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Include acme.my_new_role] ************************************************\r\n\r\nPLAY RECAP *********************************************************************\r\n\r\n$ echo $?\r\n0\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3565/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3564", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3564/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3564/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3564/events", "html_url": "https://github.com/ansible-community/molecule/issues/3564", "id": 1255041267, "node_id": "I_kwDOAsPDRs5Kzmjz", "number": 3564, "title": "molecule converge failed with init role", "user": {"login": "zhan9san", "id": 32819197, "node_id": "MDQ6VXNlcjMyODE5MTk3", "avatar_url": "https://avatars.githubusercontent.com/u/32819197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhan9san", "html_url": "https://github.com/zhan9san", "followers_url": "https://api.github.com/users/zhan9san/followers", "following_url": "https://api.github.com/users/zhan9san/following{/other_user}", "gists_url": "https://api.github.com/users/zhan9san/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhan9san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhan9san/subscriptions", "organizations_url": "https://api.github.com/users/zhan9san/orgs", "repos_url": "https://api.github.com/users/zhan9san/repos", "events_url": "https://api.github.com/users/zhan9san/events{/privacy}", "received_events_url": "https://api.github.com/users/zhan9san/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-01T05:52:02Z", "updated_at": "2022-06-01T06:43:16Z", "closed_at": "2022-06-01T06:43:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```shell\r\nansible --version && molecule --version\r\nansible [core 2.13.0]\r\n  config file = None\r\n  configured module search path = ['/Users/jackzhang/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/jackzhang/.pyenv/versions/3.9.7/envs/v-397/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/jackzhang/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/jackzhang/.pyenv/versions/v-397/bin/ansible\r\n  python version = 3.9.7 (default, Oct 28 2021, 19:01:53) [Clang 12.0.5 (clang-1205.0.22.11)]\r\n  jinja version = 3.1.1\r\n  libyaml = True\r\nmolecule 3.6.1 using python 3.9\r\n    ansible:2.13.0\r\n    delegated:3.6.1 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nRun `molecule converge` successfully\r\n\r\n```\r\nmolecule init role acme.my_new_role\r\ncd my_new_role\r\nmolecule converge\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](https://stackoverflow.com/help/mcve) with\r\noutput of running `molecule --debug`.\r\n\r\n```shell\r\n$ molecule converge\r\nINFO     default scenario test matrix: dependency, create, prepare, converge\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/Users/jackzhang/.cache/ansible-compat/b4d3f4/modules:/Users/jackzhang/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/jackzhang/.cache/ansible-compat/b4d3f4/collections:/Users/jackzhang/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/Users/jackzhang/.cache/ansible-compat/b4d3f4/roles:/Users/jackzhang/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Using /Users/jackzhang/.cache/ansible-compat/b4d3f4/roles/acme.my_new_role symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running default > prepare\r\nWARNING  Skipping, prepare playbook not configured.\r\nINFO     Running default > converge\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nfatal: [instance]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: ssh: Could not resolve hostname instance: nodename nor servname provided, or not known\", \"unreachable\": true}\r\n\r\nPLAY RECAP *********************************************************************\r\ninstance                   : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nWARNING  Retrying execution failure 4 of: ansible-playbook --inventory /Users/jackzhang/.cache/molecule/my_new_role/default/inventory --skip-tags molecule-notest,notest /Users/jackzhang/tmp/my_new_role/molecule/default/converge.yml\r\nCRITICAL Ansible return code was 4, command was: ['ansible-playbook', '--inventory', '/Users/jackzhang/.cache/molecule/my_new_role/default/inventory', '--skip-tags', 'molecule-notest,notest', '/Users/jackzhang/tmp/my_new_role/molecule/default/converge.yml']\r\n```\r\n\r\nExit status\r\n\r\n```shell\r\n$ echo $?\r\n4\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3564/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3562", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3562/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3562/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3562/events", "html_url": "https://github.com/ansible-community/molecule/issues/3562", "id": 1254215338, "node_id": "I_kwDOAsPDRs5Kwc6q", "number": 3562, "title": "molecule is not able to load the module utilities", "user": {"login": "gyuvaraj10", "id": 8053219, "node_id": "MDQ6VXNlcjgwNTMyMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8053219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gyuvaraj10", "html_url": "https://github.com/gyuvaraj10", "followers_url": "https://api.github.com/users/gyuvaraj10/followers", "following_url": "https://api.github.com/users/gyuvaraj10/following{/other_user}", "gists_url": "https://api.github.com/users/gyuvaraj10/gists{/gist_id}", "starred_url": "https://api.github.com/users/gyuvaraj10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gyuvaraj10/subscriptions", "organizations_url": "https://api.github.com/users/gyuvaraj10/orgs", "repos_url": "https://api.github.com/users/gyuvaraj10/repos", "events_url": "https://api.github.com/users/gyuvaraj10/events{/privacy}", "received_events_url": "https://api.github.com/users/gyuvaraj10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-31T18:06:44Z", "updated_at": "2022-06-17T16:27:52Z", "closed_at": "2022-06-17T16:27:43Z", "author_association": "NONE", "active_lock_reason": "off-topic", "body": "### Discussed in https://github.com/ansible-community/molecule/discussions/3561\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **gyuvaraj10** May 31, 2022</sup>\r\nI have module utilities in my root project folder under \"library\" and the module_utils property is configured in ansible.cfg under root directory. Now when I run <molecule test> command, the molecule is not able to understand the module utilities directory and throwing the following error.\r\n\r\nRoot Project folder:\r\n![image](https://user-images.githubusercontent.com/8053219/171254699-f5e2770c-f25c-41e9-ad1b-e97a38489ad1.png)\r\n\r\nansible.cfg:\r\n![image](https://user-images.githubusercontent.com/8053219/171254842-36290dd5-d5c2-43e8-b010-609b23c94aad.png)\r\n\r\nmolecule.yml:\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: delegated\r\n  options:\r\n     managed: False\r\n     ansible_connection_option:\r\n        ansible_connection: local\r\nplatforms:\r\n  - name: instance\r\nprovisioner:\r\n  name: ansible\r\n  log: True\r\n  config_options:\r\n    defaults:\r\n      module_utils: ../../../library\r\n  env:\r\n    ANSIBLE_CONFIG: ../../../ansible.cfg\r\n    ANSIBLE_ROLES_PATH: $ANSIBLE_ROLES_PATH:../../../../roles\r\n    ANSIBLE_LIBRARY: $ANSIBLE_LIBRARY:../../../../library\r\n  options:\r\n    vvv: True\r\n  inventory:\r\n     links:\r\n       group_vars: ../../../../group_vars/\r\n       hosts: ../../../../inventories/single-machine/hosts\r\n       host_vars: ../../../../inventories/single-machine/host_vars/\r\nverifier:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\n\r\n\r\nmolecule test: **output:**\r\nfatal: [localhost]: FAILED! => {\"msg\": \"Could not find imported module support code for ansible.modules.start_on_demand_backup.  Looked for (['ansible.module_utils.aws_deployment_util.AWSDeploymentUtility', 'ansible.module_utils.aws_deployment_util'])\"}\r\n\r\n\r\n\r\nNote: none of the configuration added to ansible.cfg is available to molecule.</div>", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3562/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3562/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3560", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3560/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3560/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3560/events", "html_url": "https://github.com/ansible-community/molecule/pull/3560", "id": 1253918160, "node_id": "PR_kwDOAsPDRs44vpQ-", "number": 3560, "title": "Bump ansible-compat from 2.0.2 to 2.1.0", "user": {"login": "dependabot[bot]", "id": 49699333, "node_id": "MDM6Qm90NDk2OTkzMzM=", "avatar_url": "https://avatars.githubusercontent.com/in/29110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dependabot%5Bbot%5D", "html_url": "https://github.com/apps/dependabot", "followers_url": "https://api.github.com/users/dependabot%5Bbot%5D/followers", "following_url": "https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dependabot%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/dependabot%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/dependabot%5Bbot%5D/repos", "events_url": "https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/dependabot%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 3698525886, "node_id": "LA_kwDOAsPDRs7ccwa-", "url": "https://api.github.com/repos/ansible-community/molecule/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "Pull requests that update a dependency file"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2022-05-31T14:02:26Z", "updated_at": "2022-06-01T06:58:51Z", "closed_at": "2022-06-01T06:58:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3560", "html_url": "https://github.com/ansible-community/molecule/pull/3560", "diff_url": "https://github.com/ansible-community/molecule/pull/3560.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3560.patch", "merged_at": "2022-06-01T06:58:51Z"}, "body": "This bump also required updating one test as the role installation\r\nlocation changed from older versions.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3560/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3547", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3547/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3547/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3547/events", "html_url": "https://github.com/ansible-community/molecule/issues/3547", "id": 1245026033, "node_id": "I_kwDOAsPDRs5KNZbx", "number": 3547, "title": "Release schedule for  v3.6.2?", "user": {"login": "amarao", "id": 652496, "node_id": "MDQ6VXNlcjY1MjQ5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/652496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amarao", "html_url": "https://github.com/amarao", "followers_url": "https://api.github.com/users/amarao/followers", "following_url": "https://api.github.com/users/amarao/following{/other_user}", "gists_url": "https://api.github.com/users/amarao/gists{/gist_id}", "starred_url": "https://api.github.com/users/amarao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amarao/subscriptions", "organizations_url": "https://api.github.com/users/amarao/orgs", "repos_url": "https://api.github.com/users/amarao/repos", "events_url": "https://api.github.com/users/amarao/events{/privacy}", "received_events_url": "https://api.github.com/users/amarao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-05-23T11:33:58Z", "updated_at": "2022-09-28T10:36:40Z", "closed_at": "2022-05-31T12:35:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Sorry for bringing up this topic as a bug, but I've tried all other ways of communication without success.\r\n\r\nWhat are release plans for 3.6.2? There are few bugs in 3.6.1, which was patched and accepted in master, but those changes wasn't released yet.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3547/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3547/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3546", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3546/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3546/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3546/events", "html_url": "https://github.com/ansible-community/molecule/pull/3546", "id": 1238060507, "node_id": "PR_kwDOAsPDRs437WLf", "number": 3546, "title": "Use verifier env in ansible verifier", "user": {"login": "zhan9san", "id": 32819197, "node_id": "MDQ6VXNlcjMyODE5MTk3", "avatar_url": "https://avatars.githubusercontent.com/u/32819197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhan9san", "html_url": "https://github.com/zhan9san", "followers_url": "https://api.github.com/users/zhan9san/followers", "following_url": "https://api.github.com/users/zhan9san/following{/other_user}", "gists_url": "https://api.github.com/users/zhan9san/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhan9san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhan9san/subscriptions", "organizations_url": "https://api.github.com/users/zhan9san/orgs", "repos_url": "https://api.github.com/users/zhan9san/repos", "events_url": "https://api.github.com/users/zhan9san/events{/privacy}", "received_events_url": "https://api.github.com/users/zhan9san/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-17T04:46:51Z", "updated_at": "2022-05-23T07:23:31Z", "closed_at": "2022-05-23T07:23:31Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3546", "html_url": "https://github.com/ansible-community/molecule/pull/3546", "diff_url": "https://github.com/ansible-community/molecule/pull/3546.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3546.patch", "merged_at": "2022-05-23T07:23:31Z"}, "body": "Fix #3527 \r\n\r\n@ssbarnea  Could you kindly review this PR?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3546/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3546/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3544", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3544/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3544/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3544/events", "html_url": "https://github.com/ansible-community/molecule/issues/3544", "id": 1234456751, "node_id": "I_kwDOAsPDRs5JlFCv", "number": 3544, "title": "'molecule lint' seems to process role's files twice.", "user": {"login": "jghal", "id": 53056391, "node_id": "MDQ6VXNlcjUzMDU2Mzkx", "avatar_url": "https://avatars.githubusercontent.com/u/53056391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jghal", "html_url": "https://github.com/jghal", "followers_url": "https://api.github.com/users/jghal/followers", "following_url": "https://api.github.com/users/jghal/following{/other_user}", "gists_url": "https://api.github.com/users/jghal/gists{/gist_id}", "starred_url": "https://api.github.com/users/jghal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jghal/subscriptions", "organizations_url": "https://api.github.com/users/jghal/orgs", "repos_url": "https://api.github.com/users/jghal/repos", "events_url": "https://api.github.com/users/jghal/events{/privacy}", "received_events_url": "https://api.github.com/users/jghal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-05-12T20:37:20Z", "updated_at": "2022-06-01T08:40:00Z", "closed_at": "2022-06-01T08:40:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```shell\r\n[/work/cloudeng-ci-agent/integration-tests/ansible/myrole]\r\n$ ansible --version\r\nansible [core 2.12.5]\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  ansible collection location = /root/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.10 (default, May  6 2021, 00:05:59) [GCC 10.2.1 20201203]\r\n  jinja version = 3.1.2\r\n  libyaml = False\r\n[/work/cloudeng-ci-agent/integration-tests/ansible/myrole]\r\n$ molecule --version\r\nmolecule 3.6.1 using python 3.8 \r\n    ansible:2.12.5\r\n    azure:0.5.0 from molecule_azure\r\n    delegated:3.6.1 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n    ec2:0.4 from molecule_ec2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nRunning `molecule lint` with ansible-lint specified as linter in _molecule/\\<scenario\\>/molecule.yml_ should only show files once.\r\n\r\n# Actual Behaviour\r\n\r\nThe role's files are listed twice in the lint output.\r\n\r\nEDIT: I do not see the duplicated output when running `ansible-lint` directly from the same directory.\r\n\r\n# How to reproduce\r\n\r\nInit a new role\r\n\r\n```shell\r\n$ molecule init role test.myrole --driver-name docker\r\n```\r\n\r\nEnable lint in _myrole/molecule/default/molecule.yml\r\n\r\n```yaml\r\nlint: |\r\n  ansible-lint\r\n```\r\n\r\nRun `molecule lint` \r\n\r\n```\r\n$ molecule lint\r\nINFO     default scenario test matrix: dependency, lint\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/root/.cache/ansible-compat/a8f7d1/modules:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/root/.cache/ansible-compat/a8f7d1/collections:/root/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/root/.cache/ansible-compat/a8f7d1/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Using /root/.ansible/roles/test.myrole symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > lint\r\nWARNING  Loading custom .yamllint config file, this extends our internal yamllint config.\r\nWARNING  Listing 10 violation(s) that are fatal\r\nmeta-incorrect: Should change default metadata: author\r\n../../../../../root/.ansible/roles/test.myrole/meta/main.yml:1\r\n\r\nmeta-incorrect: Should change default metadata: company\r\n../../../../../root/.ansible/roles/test.myrole/meta/main.yml:1\r\n\r\nmeta-incorrect: Should change default metadata: license\r\n../../../../../root/.ansible/roles/test.myrole/meta/main.yml:1\r\n\r\nmeta-no-info: Role info should contain platforms\r\n../../../../../root/.ansible/roles/test.myrole/meta/main.yml:1\r\n\r\nmeta-incorrect: Should change default metadata: author\r\nmeta/main.yml:1\r\n\r\nmeta-incorrect: Should change default metadata: company\r\nmeta/main.yml:1\r\n\r\nmeta-incorrect: Should change default metadata: license\r\nmeta/main.yml:1\r\n\r\nmeta-no-info: Role info should contain platforms\r\nmeta/main.yml:1\r\n\r\nfqcn-builtins: Use FQCN for builtin actions.\r\nmolecule/default/converge.yml:5 Task/Handler: Include test.myrole\r\n\r\nfqcn-builtins: Use FQCN for builtin actions.\r\nmolecule/default/verify.yml:8 Task/Handler: Example assertion\r\n\r\nYou can skip specific rules or tags by adding them to your configuration file:\r\n# .config/ansible-lint.yml\r\nwarn_list:  # or 'skip_list' to silence them completely\r\n  - fqcn-builtins  # Use FQCN for builtin actions.\r\n  - meta-incorrect  # meta/main.yml default values should be changed.\r\n  - meta-no-info  # meta/main.yml should contain relevant info.\r\n\r\nFinished with 10 failure(s), 0 warning(s) on 18 files.\r\nWARNING  Retrying execution failure 2 of: a n s i b l e - l i n t \r\n\r\nCRITICAL Lint failed with error code 2\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3544/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3544/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3527", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3527/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3527/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3527/events", "html_url": "https://github.com/ansible-community/molecule/issues/3527", "id": 1214714630, "node_id": "I_kwDOAsPDRs5IZxMG", "number": 3527, "title": "Ansible Verifier does not pass its env variables to the verify step", "user": {"login": "gmuloc", "id": 3007422, "node_id": "MDQ6VXNlcjMwMDc0MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3007422?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gmuloc", "html_url": "https://github.com/gmuloc", "followers_url": "https://api.github.com/users/gmuloc/followers", "following_url": "https://api.github.com/users/gmuloc/following{/other_user}", "gists_url": "https://api.github.com/users/gmuloc/gists{/gist_id}", "starred_url": "https://api.github.com/users/gmuloc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gmuloc/subscriptions", "organizations_url": "https://api.github.com/users/gmuloc/orgs", "repos_url": "https://api.github.com/users/gmuloc/repos", "events_url": "https://api.github.com/users/gmuloc/events{/privacy}", "received_events_url": "https://api.github.com/users/gmuloc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-04-25T15:48:54Z", "updated_at": "2022-05-23T07:23:31Z", "closed_at": "2022-05-23T07:23:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.12.3]\r\n  config file = None\r\n  configured module search path = ['/Users/g/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/g/.pyenv/versions/3.10.3/envs/ansible-avd/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /Users/g/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/g/.pyenv/versions/ansible-avd/bin/ansible\r\n  python version = 3.10.3 (main, Mar 18 2022, 09:31:01) [Clang 13.0.0 (clang-1300.0.29.30)]\r\n  jinja version = 3.0.3\r\n  libyaml = False\r\nmolecule 3.4.1 using python 3.10\r\n    ansible:2.12.3\r\n    delegated:3.4.1 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nenv variables given to the verifier are usable in the verify playbook. i.e. in the output below the debug message should read `VERIFIER`\r\n\r\n# Actual Behaviour\r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](https://stackoverflow.com/help/mcve) with\r\noutput of running `molecule --debug`.\r\n\r\nThe current Ansible Verifier is calling the Provisionner `verify` function: https://github.com/amarao/molecule/blob/master/src/molecule/verifier/ansible.py#L83. This means that env variables given to the verifier section are not used but rather the ones from the provisionner are:\r\n\r\n\r\n```\r\ng% cat molecule/default/molecule.yml\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: delegated\r\nplatforms:\r\n  - name: instance\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    DEMO: \"PROVISIONER\"\r\nverifier:\r\n  name: ansible\r\n  env:\r\n    DEMO: \"VERIFIER\"\r\ng% cat molecule/default/verify.yml\r\n---\r\n# This is an example playbook to execute Ansible tests.\r\n\r\n- name: Verify\r\n  hosts: all\r\n  gather_facts: false\r\n  tasks:\r\n  - name: Example assertion\r\n    debug:\r\n      msg: \"{{ lookup('env', 'DEMO') }}\"\r\n\r\n```\r\n\r\nwill result in:\r\n\r\n```\r\ng% molecule verify\r\n[...]\r\nPLAY [Verify] ******************************************************************\r\n\r\nTASK [Example assertion] *******************************************************\r\nok: [instance] => {\r\n    \"msg\": \"PROVISIONER\"\r\n}\r\n``` \r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3527/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3527/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3521", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3521/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3521/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3521/events", "html_url": "https://github.com/ansible-community/molecule/pull/3521", "id": 1213480891, "node_id": "PR_kwDOAsPDRs42rSTB", "number": 3521, "title": "Missing `f` prefix on f-strings fix", "user": {"login": "code-review-doctor", "id": 72647856, "node_id": "MDQ6VXNlcjcyNjQ3ODU2", "avatar_url": "https://avatars.githubusercontent.com/u/72647856?v=4", "gravatar_id": "", "url": "https://api.github.com/users/code-review-doctor", "html_url": "https://github.com/code-review-doctor", "followers_url": "https://api.github.com/users/code-review-doctor/followers", "following_url": "https://api.github.com/users/code-review-doctor/following{/other_user}", "gists_url": "https://api.github.com/users/code-review-doctor/gists{/gist_id}", "starred_url": "https://api.github.com/users/code-review-doctor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/code-review-doctor/subscriptions", "organizations_url": "https://api.github.com/users/code-review-doctor/orgs", "repos_url": "https://api.github.com/users/code-review-doctor/repos", "events_url": "https://api.github.com/users/code-review-doctor/events{/privacy}", "received_events_url": "https://api.github.com/users/code-review-doctor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-23T23:52:29Z", "updated_at": "2022-04-24T09:00:17Z", "closed_at": "2022-04-24T09:00:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3521", "html_url": "https://github.com/ansible-community/molecule/pull/3521", "diff_url": "https://github.com/ansible-community/molecule/pull/3521.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3521.patch", "merged_at": "2022-04-24T09:00:17Z"}, "body": "Fixes #3520", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3521/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3521/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3516", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3516/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3516/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3516/events", "html_url": "https://github.com/ansible-community/molecule/pull/3516", "id": 1209078361, "node_id": "PR_kwDOAsPDRs42diWY", "number": 3516, "title": "Fix wrong environment variables being passed to ansible compat (#3404)", "user": {"login": "marblenix", "id": 6401427, "node_id": "MDQ6VXNlcjY0MDE0Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/6401427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marblenix", "html_url": "https://github.com/marblenix", "followers_url": "https://api.github.com/users/marblenix/followers", "following_url": "https://api.github.com/users/marblenix/following{/other_user}", "gists_url": "https://api.github.com/users/marblenix/gists{/gist_id}", "starred_url": "https://api.github.com/users/marblenix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marblenix/subscriptions", "organizations_url": "https://api.github.com/users/marblenix/orgs", "repos_url": "https://api.github.com/users/marblenix/repos", "events_url": "https://api.github.com/users/marblenix/events{/privacy}", "received_events_url": "https://api.github.com/users/marblenix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-04-20T02:18:42Z", "updated_at": "2022-04-28T10:49:06Z", "closed_at": "2022-04-21T16:24:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3516", "html_url": "https://github.com/ansible-community/molecule/pull/3516", "diff_url": "https://github.com/ansible-community/molecule/pull/3516.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3516.patch", "merged_at": "2022-04-21T16:24:23Z"}, "body": "You can find a  demo of this error here:\r\nhttps://github.com/marblenix/molecule-bug-demo-3404/commits/main\r\n\r\nIn the body of each commit, details the commands that are needed to be run to reproduce the error with minimal setup, with the last one pushing a requirements.txt file to this branch. To see the error, it's recommended to be working on a machine that hasn't had `ansible-galaxy collection install` run on it before. If you are unable to reproduce the issue locally, try removing the cached roles and collections folders.\r\n\r\n```sh\r\npython3 -m venv .venv; source .venv/bin/activate\r\npip install pip wheel; pip install 'ansible-lint[core,yamllint]' 'molecule[docker,lint]'\r\nmolecule init role acme.my_new_role --driver-name docker\r\ncd my_new_role\r\n\r\npip install --upgrade --force \\\r\n        git+https://github.com/ansible-community/molecule@main \\\r\n        git+https://github.com/ansible/ansible-compat@main \\\r\n        git+https://github.com/ansible/ansible@devel\r\nmolecule test\r\n```\r\n\r\nTo test my changes, run:\r\n\r\n```sh\r\npip install --upgrade --force git+https://github.com/marblenix/molecule@main\r\n```\r\n\r\nI ran the test suite by enabling actions on my fork. The tox parts failed when it needed the secrets, but the unit tests themselves still passed. https://github.com/marblenix/molecule/actions/runs/2193046395\r\n\r\nPlease note, this **_will not_** solve the issue with #3513. It does allow for a workaround to this bug by adding the following to a requirements.yml file:\r\n\r\n```yaml\r\ncollections:\r\n  - community.docker\r\n```\r\n\r\n--\r\n\r\nThe exact cause of this issue is this line here in ansible-compat: https://github.com/ansible/ansible-compat/blob/05d94d4d1b484b05c53c9b5844e4187d9872c258/src/ansible_compat/runtime.py#L515\r\n\r\nThe problem is ansible-compat is adding these environment variables to the runtime, and molecule is adding its own variables to the provisioner. Combining them seems to resolve the issue just fine.\r\n\r\nTo verify that this specific problem is resolved, run tests like so: `molecule --debug -v test`. The very last output of `DEBUG: SHELL REPLAY:` should include a line about ANSIBLE_COLLECTIONS_PATH being in `~/.cache/ansible-compat/DEADBEEF/collections:...`", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3516/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3516/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3515", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3515/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3515/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3515/events", "html_url": "https://github.com/ansible-community/molecule/issues/3515", "id": 1208559898, "node_id": "I_kwDOAsPDRs5ICSka", "number": 3515, "title": "Molecule doesn't handle 'delegate_to'", "user": {"login": "Zeodius", "id": 68427141, "node_id": "MDQ6VXNlcjY4NDI3MTQx", "avatar_url": "https://avatars.githubusercontent.com/u/68427141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zeodius", "html_url": "https://github.com/Zeodius", "followers_url": "https://api.github.com/users/Zeodius/followers", "following_url": "https://api.github.com/users/Zeodius/following{/other_user}", "gists_url": "https://api.github.com/users/Zeodius/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zeodius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zeodius/subscriptions", "organizations_url": "https://api.github.com/users/Zeodius/orgs", "repos_url": "https://api.github.com/users/Zeodius/repos", "events_url": "https://api.github.com/users/Zeodius/events{/privacy}", "received_events_url": "https://api.github.com/users/Zeodius/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-19T15:58:40Z", "updated_at": "2022-04-20T09:58:36Z", "closed_at": "2022-04-20T09:58:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.12.4]\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/x/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.9/dist-packages/ansible\r\n  ansible collection location = /home/x/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.9.2 (default, Feb 28 2021, 17:03:44) [GCC 10.2.1 20210110]\r\n  jinja version = 3.0.3\r\n  libyaml = True\r\nmolecule 3.6.1 using python 3.9 \r\n    ansible:2.12.4\r\n    delegated:3.6.1 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n    proxmox:0.3.0 from molecule_proxmox\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nRunning on Debian 11.2 VM on Proxmox\r\n\r\n# Desired Behavior\r\n\r\nAnsible task delegation ('**delegate_to**') should work when running tasks with Molecule\r\n\r\n# Actual Behaviour\r\n\r\nWhen we run a task which uses \"delegate_to\", Molecule return \"Could not resolve hostname **IP]**\" even though it's not an hostname but an actual **IP address** which doesn't require any resolution. As you may have noticed, there is a closing bracket at the end of the Ip address returned by Molecule, i'm guessing this is the cause of this issue.\r\n\r\n# Exemple\r\n\r\nThe code used as an exemple to reproduce this issue  :\r\n\r\n```\r\n---\r\n\r\n- name: \"Exemple : Distant file creation with delegate_to\"\r\n  file:\r\n    path: \"/tmp/{{ ansible_hostname }}\"\r\n    state: touch\r\n  delegate_to: \"ansible@172.16.0.42\"\r\n\r\n```\r\n\r\nThe play :\r\n\r\n```\r\n> molecule --debug converge -s debian9\r\nDEBUG    Validating schema /home/ansible/ansible/roles/tests/molecule/debian9/molecule.yml.\r\nINFO     debian9 scenario test matrix: prepare, create, converge\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/home/ansible/.cache/ansible-compat/5e4a17/modules:/home/ansible/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/ansible/.cache/ansible-compat/5e4a17/collections:/home/ansible/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/ansible/.cache/ansible-compat/5e4a17/roles:/home/ansible/ansible/roles\r\nINFO     Using /home/ansible/ansible/roles/ox.tests symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running debian9 > prepare\r\nWARNING  Skipping, instances already prepared.\r\nINFO     Running debian9 > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running debian9 > converge\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /home/ansible/.cache/molecule/tests/debian9/collections:/home/ansible/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /home/ansible/.cache/molecule/tests/debian9/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/ansible/.local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/home/ansible/.cache/molecule/tests/debian9/plugins/filter:/home/ansible/ansible/roles/tests/plugins/filter:/home/ansible/.ansible/plugins/filter:/usr/share/ansible/plugins/filter:/home/ansible/ansible/playbooks/filter_plugins:/plugins/filter:/filter/plugins:/home/ansible/ansible/roles/tests/molecule/debian9/~/.ansible/plugins/filter:/usr/share/ansible/plugins/modules\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_LIBRARY: /home/ansible/.local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/home/ansible/.local/lib/python3.9/site-packages/molecule_proxmox/modules:/home/ansible/.cache/molecule/tests/debian9/library:/home/ansible/ansible/roles/tests/library:/home/ansible/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: '/home/ansible/.cache/molecule/tests/debian9/roles:/home/ansible/ansible/roles:/home/ansible/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:'\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: proxmox\r\nMOLECULE_ENV_FILE: /home/ansible/ansible/roles/tests/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/ansible/.cache/molecule/tests/debian9\r\nMOLECULE_FILE: /home/ansible/.cache/molecule/tests/debian9/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/ansible/.cache/molecule/tests/debian9/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/ansible/.cache/molecule/tests/debian9/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /home/ansible/ansible/roles/tests\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/ansible/ansible/roles/tests/molecule/debian9\r\nMOLECULE_SCENARIO_NAME: debian9\r\nMOLECULE_STATE_FILE: /home/ansible/.cache/molecule/tests/debian9/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/ansible/ansible/roles/tests/molecule/debian9/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/home/ansible/.cache/molecule/tests/debian9/collections:/home/ansible/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/home/ansible/.cache/molecule/tests/debian9/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/ansible/.local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/home/ansible/.cache/molecule/tests/debian9/plugins/filter:/home/ansible/ansible/roles/tests/plugins/filter:/home/ansible/.ansible/plugins/filter:/usr/share/ansible/plugins/filter:/home/ansible/ansible/playbooks/filter_plugins:/plugins/filter:/filter/plugins:/home/ansible/ansible/roles/tests/molecule/debian9/~/.ansible/plugins/filter:/usr/share/ansible/plugins/modules ANSIBLE_FORCE_COLOR=1 ANSIBLE_LIBRARY=/home/ansible/.local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/home/ansible/.local/lib/python3.9/site-packages/molecule_proxmox/modules:/home/ansible/.cache/molecule/tests/debian9/library:/home/ansible/ansible/roles/tests/library:/home/ansible/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/home/ansible/.cache/molecule/tests/debian9/roles:/home/ansible/ansible/roles:/home/ansible/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles: MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=proxmox MOLECULE_ENV_FILE=/home/ansible/ansible/roles/tests/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/ansible/.cache/molecule/tests/debian9 MOLECULE_FILE=/home/ansible/.cache/molecule/tests/debian9/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/ansible/.cache/molecule/tests/debian9/instance_config.yml MOLECULE_INVENTORY_FILE=/home/ansible/.cache/molecule/tests/debian9/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/home/ansible/ansible/roles/tests MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/ansible/ansible/roles/tests/molecule/debian9 MOLECULE_SCENARIO_NAME=debian9 MOLECULE_STATE_FILE=/home/ansible/.cache/molecule/tests/debian9/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/home/ansible/ansible/roles/tests/molecule/debian9/tests\r\n\r\nPLAY [Print hosts] *************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nok: [deb9-molecule-back03]\r\nok: [deb9-molecule-back02]\r\nok: [deb9-molecule-back01]\r\n\r\nTASK [debug] *******************************************************************\r\nok: [deb9-molecule-back01] => {\r\n    \"msg\": [\r\n        \"172.16.0.42\"\r\n    ]\r\n}\r\nok: [deb9-molecule-back02] => {\r\n    \"msg\": [\r\n        \"172.16.0.49\"\r\n    ]\r\n}\r\nok: [deb9-molecule-back03] => {\r\n    \"msg\": [\r\n        \"172.16.0.72\"\r\n    ]\r\n}\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nok: [deb9-molecule-back03]\r\nok: [deb9-molecule-back01]\r\nok: [deb9-molecule-back02]\r\n\r\nTASK [Include tests] ***********************************************************\r\nskipping: [deb9-molecule-back03]\r\n\r\nTASK [tests : Exemple : Distant file creation with delegate_to] ****************\r\nfatal: [deb9-molecule-back02 -> ansible@172.16.0.42]: FAILED! => {\"msg\": \"failed to transfer file to /home/ansible/.ansible/tmp/ansible-local-72728252cd4wdy/tmp8hr7hkqg /tmp/.ansible-ansible/tmp/ansible-tmp-1650383026.0394306-727369-133359855328533/AnsiballZ_file.py:\\n\\nssh: Could not resolve hostname 172.16.0.42]: Name or service not known\\r\\nlost connection\\n\"}\r\nfatal: [deb9-molecule-back01 -> ansible@172.16.0.42]: FAILED! => {\"msg\": \"failed to transfer file to /home/ansible/.ansible/tmp/ansible-local-72728252cd4wdy/tmp61hj2dk2 /tmp/.ansible-ansible/tmp/ansible-tmp-1650383026.030443-727368-243768521236495/AnsiballZ_file.py:\\n\\nssh: Could not resolve hostname 172.16.0.42]: Name or service not known\\r\\nlost connection\\n\"}\r\n\r\nPLAY RECAP *********************************************************************\r\ndeb9-molecule-back01       : ok=3    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0\r\ndeb9-molecule-back02       : ok=3    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0\r\ndeb9-molecule-back03       : ok=3    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\n\r\n```\r\n\r\nThere seems to be some sort of parcing issue with the host value from ansible's python SSH connection plugin.\r\n\r\nThe file in question : /usr/local/lib/python3.9/dist-packages/ansible/plugins/connection/ssh.py\r\n\r\nIn the function \"_file_transport_command\" the \"host\" variable is set with brackets around it's actual value :\r\n\r\n    @_ssh_retry\r\n        def _file_transport_command(self, in_path, out_path, sftp_action):\r\n            # scp and sftp require square brackets for IPv6 addresses, but  \r\n            # accept them for hostnames and IPv4 addresses too.  \r\n            host = '[%s]' % self.host\r\n _line 1173 in this version_\r\n\r\nIt behaves normally with Ansible but not with Molecule as described.\r\nThough if i remove those brackets in this file, everything work as expected:\r\n\r\n```\r\n> molecule converge -s debian9\r\nDEBUG    Validating schema /home/ansible/ansible/roles/tests/molecule/debian9/molecule.yml.\r\nINFO     debian9 scenario test matrix: prepare, create, converge\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/home/ansible/.cache/ansible-compat/5e4a17/modules:/home/ansible/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/ansible/.cache/ansible-compat/5e4a17/collections:/home/ansible/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/ansible/.cache/ansible-compat/5e4a17/roles:/home/ansible/ansible/roles\r\nINFO     Using /home/ansible/ansible/roles/ox.tests symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running debian9 > prepare\r\nWARNING  Skipping, instances already prepared.\r\nINFO     Running debian9 > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running debian9 > converge\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /home/ansible/.cache/molecule/tests/debian9/collections:/home/ansible/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /home/ansible/.cache/molecule/tests/debian9/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/ansible/.local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/home/ansible/.cache/molecule/tests/debian9/plugins/filter:/home/ansible/ansible/roles/tests/plugins/filter:/home/ansible/.ansible/plugins/filter:/usr/share/ansible/plugins/filter:/home/ansible/ansible/playbooks/filter_plugins:/plugins/filter:/filter/plugins:/home/ansible/ansible/roles/tests/molecule/debian9/~/.ansible/plugins/filter:/usr/share/ansible/plugins/modules\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_LIBRARY: /home/ansible/.local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/home/ansible/.local/lib/python3.9/site-packages/molecule_proxmox/modules:/home/ansible/.cache/molecule/tests/debian9/library:/home/ansible/ansible/roles/tests/library:/home/ansible/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: '/home/ansible/.cache/molecule/tests/debian9/roles:/home/ansible/ansible/roles:/home/ansible/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:'\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: proxmox\r\nMOLECULE_ENV_FILE: /home/ansible/ansible/roles/tests/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/ansible/.cache/molecule/tests/debian9\r\nMOLECULE_FILE: /home/ansible/.cache/molecule/tests/debian9/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/ansible/.cache/molecule/tests/debian9/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/ansible/.cache/molecule/tests/debian9/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /home/ansible/ansible/roles/tests\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/ansible/ansible/roles/tests/molecule/debian9\r\nMOLECULE_SCENARIO_NAME: debian9\r\nMOLECULE_STATE_FILE: /home/ansible/.cache/molecule/tests/debian9/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/ansible/ansible/roles/tests/molecule/debian9/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/home/ansible/.cache/molecule/tests/debian9/collections:/home/ansible/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/home/ansible/.cache/molecule/tests/debian9/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/ansible/.local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/home/ansible/.cache/molecule/tests/debian9/plugins/filter:/home/ansible/ansible/roles/tests/plugins/filter:/home/ansible/.ansible/plugins/filter:/usr/share/ansible/plugins/filter:/home/ansible/ansible/playbooks/filter_plugins:/plugins/filter:/filter/plugins:/home/ansible/ansible/roles/tests/molecule/debian9/~/.ansible/plugins/filter:/usr/share/ansible/plugins/modules ANSIBLE_FORCE_COLOR=1 ANSIBLE_LIBRARY=/home/ansible/.local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/home/ansible/.local/lib/python3.9/site-packages/molecule_proxmox/modules:/home/ansible/.cache/molecule/tests/debian9/library:/home/ansible/ansible/roles/tests/library:/home/ansible/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/home/ansible/.cache/molecule/tests/debian9/roles:/home/ansible/ansible/roles:/home/ansible/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles: MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=proxmox MOLECULE_ENV_FILE=/home/ansible/ansible/roles/tests/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/ansible/.cache/molecule/tests/debian9 MOLECULE_FILE=/home/ansible/.cache/molecule/tests/debian9/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/ansible/.cache/molecule/tests/debian9/instance_config.yml MOLECULE_INVENTORY_FILE=/home/ansible/.cache/molecule/tests/debian9/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/home/ansible/ansible/roles/tests MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/ansible/ansible/roles/tests/molecule/debian9 MOLECULE_SCENARIO_NAME=debian9 MOLECULE_STATE_FILE=/home/ansible/.cache/molecule/tests/debian9/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/home/ansible/ansible/roles/tests/molecule/debian9/tests\r\n\r\nPLAY [Print hosts] *************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nok: [deb9-molecule-back01]\r\nok: [deb9-molecule-back03]\r\nok: [deb9-molecule-back02]\r\n\r\nTASK [debug] *******************************************************************\r\nok: [deb9-molecule-back01] => {\r\n    \"msg\": [\r\n        \"172.16.0.42\"\r\n    ]\r\n}\r\nok: [deb9-molecule-back02] => {\r\n    \"msg\": [\r\n        \"172.16.0.49\"\r\n    ]\r\n}\r\nok: [deb9-molecule-back03] => {\r\n    \"msg\": [\r\n        \"172.16.0.72\"\r\n    ]\r\n}\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nok: [deb9-molecule-back03]\r\nok: [deb9-molecule-back01]\r\nok: [deb9-molecule-back02]\r\n\r\nTASK [Include tests] ***********************************************************\r\nskipping: [deb9-molecule-back03]\r\n\r\nTASK [tests : Exemple : Distant file creation with delegate_to] ****************\r\n--- before\r\n+++ after\r\n@@ -1,6 +1,6 @@\r\n {\r\n-    \"atime\": 1650381574.0,\r\n-    \"mtime\": 1650381574.0,\r\n+    \"atime\": 1650382732.734792,\r\n+    \"mtime\": 1650382732.734792,\r\n     \"path\": \"/tmp/debian9\",\r\n-    \"state\": \"file\"\r\n+    \"state\": \"touch\"\r\n }\r\n\r\nchanged: [deb9-molecule-back02 -> ansible@172.16.0.42]\r\n--- before\r\n+++ after\r\n@@ -1,6 +1,6 @@\r\n {\r\n-    \"atime\": 1650382732.0,\r\n-    \"mtime\": 1650382732.0,\r\n+    \"atime\": 1650382732.743862,\r\n+    \"mtime\": 1650382732.743862,\r\n     \"path\": \"/tmp/debian9\",\r\n-    \"state\": \"file\"\r\n+    \"state\": \"touch\"\r\n }\r\n\r\nchanged: [deb9-molecule-back01 -> ansible@172.16.0.42]\r\n\r\nPLAY RECAP *********************************************************************\r\ndeb9-molecule-back01       : ok=4    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\ndeb9-molecule-back02       : ok=4    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\ndeb9-molecule-back03       : ok=3    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3515/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3514", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3514/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3514/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3514/events", "html_url": "https://github.com/ansible-community/molecule/pull/3514", "id": 1206078058, "node_id": "PR_kwDOAsPDRs42UH4U", "number": 3514, "title": "Insert cache_dir into ANSIBLE_ROLES_PATH and ANSIBLE_COLLECTIONS_PATH", "user": {"login": "zhan9san", "id": 32819197, "node_id": "MDQ6VXNlcjMyODE5MTk3", "avatar_url": "https://avatars.githubusercontent.com/u/32819197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhan9san", "html_url": "https://github.com/zhan9san", "followers_url": "https://api.github.com/users/zhan9san/followers", "following_url": "https://api.github.com/users/zhan9san/following{/other_user}", "gists_url": "https://api.github.com/users/zhan9san/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhan9san/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhan9san/subscriptions", "organizations_url": "https://api.github.com/users/zhan9san/orgs", "repos_url": "https://api.github.com/users/zhan9san/repos", "events_url": "https://api.github.com/users/zhan9san/events{/privacy}", "received_events_url": "https://api.github.com/users/zhan9san/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2022-04-16T10:20:50Z", "updated_at": "2022-06-01T08:41:29Z", "closed_at": "2022-06-01T08:35:50Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3514", "html_url": "https://github.com/ansible-community/molecule/pull/3514", "diff_url": "https://github.com/ansible-community/molecule/pull/3514.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3514.patch", "merged_at": "2022-06-01T08:35:50Z"}, "body": "Fix #3495 and #3464 \r\n\r\nBefore:\r\n\r\nThere is a conflict if someone installs a role from Ansible Galaxy and want to use `molecule test` to debug the same role in another directory.\r\n\r\nThe first part of `ANSIBLE_ROLES_PATH` is `~/.ansible/roles`.\r\nA role installed by `ansible-galaxy`, would be in `~/.ansible/roles` by default.\r\n`molecule test` would try to create a symlink at `~/.ansible/roles` as well. \r\n\r\nBecause the role fqrn is the same, the `molecule test` would fail, referring to https://github.com/ansible-community/molecule/issues/3495#issuecomment-1091390551\r\n\r\nAfter:\r\nThe role installed by `ansible-galaxy` is still in the first default `ANSIBLE_ROLES_PATH`, `~/.ansible/roles`.\r\nThe role created by 'molecule test' would be in `cache_dir`, e.g. `/Users/xxx/.cache/ansible-compat/496064/roles`\r\n\r\nAnd this `cache_dir` would be inserted into the roles search path, `ANSIBLE_ROLES_PATH`.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3514/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3513", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3513/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3513/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3513/events", "html_url": "https://github.com/ansible-community/molecule/issues/3513", "id": 1205068430, "node_id": "I_kwDOAsPDRs5H0-KO", "number": 3513, "title": "Molecule is failing when refreshing Collections cache", "user": {"login": "MonolithProjects", "id": 19806716, "node_id": "MDQ6VXNlcjE5ODA2NzE2", "avatar_url": "https://avatars.githubusercontent.com/u/19806716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MonolithProjects", "html_url": "https://github.com/MonolithProjects", "followers_url": "https://api.github.com/users/MonolithProjects/followers", "following_url": "https://api.github.com/users/MonolithProjects/following{/other_user}", "gists_url": "https://api.github.com/users/MonolithProjects/gists{/gist_id}", "starred_url": "https://api.github.com/users/MonolithProjects/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MonolithProjects/subscriptions", "organizations_url": "https://api.github.com/users/MonolithProjects/orgs", "repos_url": "https://api.github.com/users/MonolithProjects/repos", "events_url": "https://api.github.com/users/MonolithProjects/events{/privacy}", "received_events_url": "https://api.github.com/users/MonolithProjects/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-14T22:31:55Z", "updated_at": "2022-05-07T20:26:25Z", "closed_at": "2022-05-07T20:26:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.12.4]\r\n  config file = None\r\n  configured module search path = ['/home/mike/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/mike/.local/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/mike/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/mike/.local/bin/ansible\r\n  python version = 3.10.2 (main, Jan 17 2022, 00:00:00) [GCC 11.2.1 20211203 (Red Hat 11.2.1-7)]\r\n  jinja version = 3.0.3\r\n  libyaml = True\r\nmolecule 3.6.1 using python 3.10 \r\n    ansible:2.12.4\r\n    delegated:3.6.1 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nRunning locally on Fedora 35\r\n\r\n# Desired Behavior\r\n\r\nSecond molecule command will not fail.\r\n\r\n# Actual Behaviour\r\n\r\nWhen i run molecule (any command) for Ansible Collection which has more than one dependencies in galaxy.yml for a first time, everything works fine. When i after that re-run molecule (the same or different molecule command), molecule fails when refreshing collections cache. \r\n\r\nSo basically the molecule is failing when there is no change in the collections cache.\r\n\r\nAs a workaround for this issue i am forced to manually delete the ansible cache before i run the command. Second options is to temporally comment out the dependencies in galaxy.yml after the cache was created.\r\n\r\nThis error came with Molecule `3.6.1`. Older versions works fine.\r\n\r\n## Example\r\n```sh\r\n\u276f git clone git@github.com:lablabs/ansible-collection-wireguard.git\r\nCloning into 'ansible-collection-wireguard'...\r\nWarning: Permanently added 'github.com' (ED25519) to the list of known hosts.\r\nremote: Enumerating objects: 213, done.\r\nremote: Counting objects: 100% (148/148), done.\r\nremote: Compressing objects: 100% (75/75), done.\r\nremote: Total 213 (delta 67), reused 116 (delta 49), pack-reused 65\r\nReceiving objects: 100% (213/213), 51.35 KiB | 559.00 KiB/s, done.\r\nResolving deltas: 100% (78/78), done.\r\n\r\n\u276f cd ansible-collection-wireguard/\r\n\r\n\u276f molecule create\r\nINFO     default scenario test matrix: dependency, create, prepare\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/home/mike/.cache/ansible-compat/ce17b6/modules:/home/mike/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/mike/.cache/ansible-compat/ce17b6/collections:/home/mike/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/mike/.cache/ansible-compat/ce17b6/roles:roles:/home/mike/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Running ansible-galaxy collection install -v --force -p /home/mike/.cache/ansible-compat/ce17b6/collections .\r\nINFO     Running default > dependency\r\nINFO     Running ansible-galaxy collection install -v community.docker:>=1.9.1\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running default > prepare\r\nWARNING  Skipping, instances already prepared.\r\n\r\n\u276f molecule create\r\nINFO     default scenario test matrix: dependency, create, prepare\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/home/mike/.cache/ansible-compat/ce17b6/modules:/home/mike/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/mike/.cache/ansible-compat/ce17b6/collections:/home/mike/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/mike/.cache/ansible-compat/ce17b6/roles:roles:/home/mike/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Running ansible-galaxy collection install -v --force -p /home/mike/.cache/ansible-compat/ce17b6/collections .\r\nWARNING  Retrying execution failure 250 of: ansible-galaxy collection install -v --force -p /home/mike/.cache/ansible-compat/ce17b6/collections .\r\nERROR    Command returned 250 code:\r\nNo config file found; using defaults\r\nStarting galaxy collection install process\r\nProcess install dependency map\r\nto see the full traceback, use -vvv\r\n\r\nERROR! Unexpected Exception, this is probably a bug: 'NoneType' object has no attribute 'items'\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/mike/.local/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/lib/python3.10/site-packages/click/core.py\", line 1137, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/lib/python3.10/site-packages/click/core.py\", line 1062, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/lib/python3.10/site-packages/click/core.py\", line 1668, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/lib/python3.10/site-packages/click/core.py\", line 1404, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/lib/python3.10/site-packages/click/core.py\", line 763, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/usr/lib/python3.10/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/mike/.local/lib/python3.10/site-packages/molecule/command/create.py\", line 119, in create\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/home/mike/.local/lib/python3.10/site-packages/molecule/command/base.py\", line 111, in execute_cmdline_scenarios\r\n    scenario.config.runtime.prepare_environment(install_local=True)\r\n  File \"/home/mike/.local/lib/python3.10/site-packages/ansible_compat/runtime.py\", line 325, in prepare_environment\r\n    self.install_collection_from_disk(\".\", destination=destination)\r\n  File \"/home/mike/.local/lib/python3.10/site-packages/ansible_compat/runtime.py\", line 229, in install_collection_from_disk\r\n    self.install_collection(path, destination=destination, force=True)\r\n  File \"/home/mike/.local/lib/python3.10/site-packages/ansible_compat/runtime.py\", line 222, in install_collection\r\n    raise InvalidPrerequisiteError(msg)\r\nansible_compat.errors.InvalidPrerequisiteError: Command returned 250 code:\r\nNo config file found; using defaults\r\nStarting galaxy collection install process\r\nProcess install dependency map\r\nto see the full traceback, use -vvv\r\n\r\nERROR! Unexpected Exception, this is probably a bug: 'NoneType' object has no attribute 'items'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3503", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3503/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3503/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3503/events", "html_url": "https://github.com/ansible-community/molecule/pull/3503", "id": 1200562724, "node_id": "PR_kwDOAsPDRs42CC2V", "number": 3503, "title": "Use FQCN for builtin actions", "user": {"login": "ziegenberg", "id": 856916, "node_id": "MDQ6VXNlcjg1NjkxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/856916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziegenberg", "html_url": "https://github.com/ziegenberg", "followers_url": "https://api.github.com/users/ziegenberg/followers", "following_url": "https://api.github.com/users/ziegenberg/following{/other_user}", "gists_url": "https://api.github.com/users/ziegenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziegenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziegenberg/subscriptions", "organizations_url": "https://api.github.com/users/ziegenberg/orgs", "repos_url": "https://api.github.com/users/ziegenberg/repos", "events_url": "https://api.github.com/users/ziegenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/ziegenberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-11T21:31:40Z", "updated_at": "2022-04-12T13:11:59Z", "closed_at": "2022-04-12T13:11:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3503", "html_url": "https://github.com/ansible-community/molecule/pull/3503", "diff_url": "https://github.com/ansible-community/molecule/pull/3503.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3503.patch", "merged_at": "2022-04-12T13:11:49Z"}, "body": "Fixes: #3481", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3503/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3501", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3501/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3501/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3501/events", "html_url": "https://github.com/ansible-community/molecule/pull/3501", "id": 1196956898, "node_id": "PR_kwDOAsPDRs412tuL", "number": 3501, "title": "Allow mixing links and inventory variables", "user": {"login": "cinek810", "id": 6598679, "node_id": "MDQ6VXNlcjY1OTg2Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/6598679?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cinek810", "html_url": "https://github.com/cinek810", "followers_url": "https://api.github.com/users/cinek810/followers", "following_url": "https://api.github.com/users/cinek810/following{/other_user}", "gists_url": "https://api.github.com/users/cinek810/gists{/gist_id}", "starred_url": "https://api.github.com/users/cinek810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cinek810/subscriptions", "organizations_url": "https://api.github.com/users/cinek810/orgs", "repos_url": "https://api.github.com/users/cinek810/repos", "events_url": "https://api.github.com/users/cinek810/events{/privacy}", "received_events_url": "https://api.github.com/users/cinek810/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1585146637, "node_id": "MDU6TGFiZWwxNTg1MTQ2NjM3", "url": "https://api.github.com/repos/ansible-community/molecule/labels/needs-update", "name": "needs-update", "color": "fff9b2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-04-08T07:39:20Z", "updated_at": "2022-06-15T08:42:52Z", "closed_at": "2022-06-15T08:42:52Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3501", "html_url": "https://github.com/ansible-community/molecule/pull/3501", "diff_url": "https://github.com/ansible-community/molecule/pull/3501.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3501.patch", "merged_at": null}, "body": "Previous logic allowed either link or direct specification in molecule.yml, while it's very convenient to link to group_vars containing some common values and set other (specific to molecule test) as host_vars.\r\n\r\nFixes: #2759", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3501/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3499", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3499/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3499/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3499/events", "html_url": "https://github.com/ansible-community/molecule/pull/3499", "id": 1195424905, "node_id": "PR_kwDOAsPDRs41xp0C", "number": 3499, "title": "Change ansible-lint version since version 6.0.0 and greater doesn't work", "user": {"login": "opeco17", "id": 46510874, "node_id": "MDQ6VXNlcjQ2NTEwODc0", "avatar_url": "https://avatars.githubusercontent.com/u/46510874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/opeco17", "html_url": "https://github.com/opeco17", "followers_url": "https://api.github.com/users/opeco17/followers", "following_url": "https://api.github.com/users/opeco17/following{/other_user}", "gists_url": "https://api.github.com/users/opeco17/gists{/gist_id}", "starred_url": "https://api.github.com/users/opeco17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/opeco17/subscriptions", "organizations_url": "https://api.github.com/users/opeco17/orgs", "repos_url": "https://api.github.com/users/opeco17/repos", "events_url": "https://api.github.com/users/opeco17/events{/privacy}", "received_events_url": "https://api.github.com/users/opeco17/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-04-07T02:16:38Z", "updated_at": "2022-04-13T23:40:34Z", "closed_at": "2022-04-13T10:23:40Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3499", "html_url": "https://github.com/ansible-community/molecule/pull/3499", "diff_url": "https://github.com/ansible-community/molecule/pull/3499.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3499.patch", "merged_at": "2022-04-13T10:23:40Z"}, "body": "Closes #3498\r\n\r\nmolecule with version 3.4 depends on `prerun` module in `ansible-lint` but `ansible-lint` with version 6.0.0 and greater doesn't have `prerun` module.\r\nWe should restrict the version of `ansible-lint`.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3499/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3499/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3498", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3498/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3498/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3498/events", "html_url": "https://github.com/ansible-community/molecule/issues/3498", "id": 1195407935, "node_id": "I_kwDOAsPDRs5HQHo_", "number": 3498, "title": "ModuleNotFoundError: No module named 'ansiblelint.prerun'", "user": {"login": "opeco17", "id": 46510874, "node_id": "MDQ6VXNlcjQ2NTEwODc0", "avatar_url": "https://avatars.githubusercontent.com/u/46510874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/opeco17", "html_url": "https://github.com/opeco17", "followers_url": "https://api.github.com/users/opeco17/followers", "following_url": "https://api.github.com/users/opeco17/following{/other_user}", "gists_url": "https://api.github.com/users/opeco17/gists{/gist_id}", "starred_url": "https://api.github.com/users/opeco17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/opeco17/subscriptions", "organizations_url": "https://api.github.com/users/opeco17/orgs", "repos_url": "https://api.github.com/users/opeco17/repos", "events_url": "https://api.github.com/users/opeco17/events{/privacy}", "received_events_url": "https://api.github.com/users/opeco17/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-07T02:03:16Z", "updated_at": "2022-04-13T10:27:02Z", "closed_at": "2022-04-13T10:27:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible [core 2.12.4]\r\n  config file = None\r\n  configured module search path = ['/Users/opeco17/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/opeco17/workspace/venv/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/opeco17/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/opeco17/workspace/venv/bin/ansible\r\n  python version = 3.9.7 (default, Sep  3 2021, 12:45:31) [Clang 12.0.0 (clang-1200.0.32.29)]\r\n  jinja version = 3.1.1\r\n  libyaml = True\r\nmolecule 3.4.0 using python 3.9 \r\n    ansible:2.12.4\r\n    delegated:3.4.0 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule create` command should work without errors\r\n\r\n# Actual Behaviour\r\n\r\nWhen I tried to run `molecule create` command, following error occured\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/opeco17/workspace/venv/bin/molecule\", line 5, in <module>\r\n    from molecule.__main__ import main\r\n  File \"/Users/opeco17/workspace/venv/lib/python3.9/site-packages/molecule/__main__.py\", line 22, in <module>\r\n    from molecule.shell import main\r\n  File \"/Users/opeco17/workspace/venv/lib/python3.9/site-packages/molecule/shell.py\", line 29, in <module>\r\n    from molecule import command, logger\r\n  File \"/Users/opeco17/workspace/venv/lib/python3.9/site-packages/molecule/command/__init__.py\", line 27, in <module>\r\n    from molecule.command import base  # noqa\r\n  File \"/Users/opeco17/workspace/venv/lib/python3.9/site-packages/molecule/command/base.py\", line 31, in <module>\r\n    from ansiblelint.prerun import prepare_environment\r\nModuleNotFoundError: No module named 'ansiblelint.prerun'\r\n```\r\n\r\nBecause ansible-lint with version 6.0.0 and greater doesn't have `prerun` module, it's necessary to add a restriction to ansible-lint version like following.\r\n\r\n```\r\nansible-lint >= 5.1.1 < 6.0.0\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3498/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3495", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3495/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3495/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3495/events", "html_url": "https://github.com/ansible-community/molecule/issues/3495", "id": 1191938378, "node_id": "I_kwDOAsPDRs5HC4lK", "number": 3495, "title": "Can't get my role to run locally anymore (OSError: [Errno 22] Invalid argument)", "user": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-04-04T15:10:13Z", "updated_at": "2022-05-23T08:22:59Z", "closed_at": "2022-05-23T08:22:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible [core 2.12.3]\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/Users/jgeerling/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/jgeerling/Library/Python/3.8/lib/python/site-packages/ansible\r\n  ansible collection location = /Users/jgeerling/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/jgeerling/Library/Python/3.8/bin/ansible\r\n  python version = 3.8.9 (default, Feb 18 2022, 07:45:33) [Clang 13.1.6 (clang-1316.0.21.2)]\r\n  jinja version = 3.0.3\r\n  libyaml = False\r\nmolecule 3.6.1 using python 3.9 \r\n    ansible:2.12.3\r\n    delegated:3.6.1 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nN/A, run locally on macOS 12.3.1\r\n\r\n# Desired Behavior\r\n\r\nIf I run `molecule test` inside one of my Ansible roles, I can run `molecule test` successfully.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n$ git clone https://github.com/geerlingguy/ansible-role-docker.git\r\n$ molecule test\r\n$ molecule test\r\nINFO     default scenario test matrix: dependency, lint, cleanup, destroy, syntax, create, prepare, converge, idempotence, side_effect, verify, cleanup, destroy\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/Users/jgeerling/.cache/ansible-compat/320470/modules:/Users/jgeerling/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/Users/jgeerling/.cache/ansible-compat/320470/collections:/Users/jgeerling/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/Users/jgeerling/.cache/ansible-compat/320470/roles:/Users/jgeerling/Dropbox/VMs/roles\r\nTraceback (most recent call last):\r\n  File \"/opt/homebrew/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/opt/homebrew/lib/python3.9/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/opt/homebrew/lib/python3.9/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/opt/homebrew/lib/python3.9/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/opt/homebrew/lib/python3.9/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/opt/homebrew/lib/python3.9/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/opt/homebrew/lib/python3.9/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/opt/homebrew/lib/python3.9/site-packages/molecule/command/test.py\", line 161, in test\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args, ansible_args)\r\n  File \"/opt/homebrew/lib/python3.9/site-packages/molecule/command/base.py\", line 111, in execute_cmdline_scenarios\r\n    scenario.config.runtime.prepare_environment(install_local=True)\r\n  File \"/opt/homebrew/lib/python3.9/site-packages/ansible_compat/runtime.py\", line 334, in prepare_environment\r\n    self._install_galaxy_role(self.project_dir, ignore_errors=True)\r\n  File \"/opt/homebrew/lib/python3.9/site-packages/ansible_compat/runtime.py\", line 494, in _install_galaxy_role\r\n    if not exists or os.readlink(link_path) != str(target):\r\nOSError: [Errno 22] Invalid argument: '/Users/jgeerling/Dropbox/VMs/roles/geerlingguy.docker'\r\n```\r\n\r\nI have my global Ansible roles directory symlinked to `/Users/jgeerling/Dropbox/VMs/roles` for convenience:\r\n\r\n```\r\n$ ls -lah /etc/ansible/roles\r\nlrwxr-xr-x  1 root  wheel    34B Mar 22 15:01 /etc/ansible/roles -> /Users/jgeerling/Dropbox/VMs/roles\r\n```\r\n\r\nAnd in my case, I have my roles checked out to directories matching the galaxy names (e.g. `geerlingguy.docker` insteaad of `ansible-role-docker`), but that doesn't seem to matter, as the same failure occurs if I check out the role into any directory on my system.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3495/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3492", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3492/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3492/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3492/events", "html_url": "https://github.com/ansible-community/molecule/issues/3492", "id": 1188287617, "node_id": "I_kwDOAsPDRs5G09SB", "number": 3492, "title": "Molecule failes when use ansible vault.", "user": {"login": "linuxpld", "id": 18667738, "node_id": "MDQ6VXNlcjE4NjY3NzM4", "avatar_url": "https://avatars.githubusercontent.com/u/18667738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linuxpld", "html_url": "https://github.com/linuxpld", "followers_url": "https://api.github.com/users/linuxpld/followers", "following_url": "https://api.github.com/users/linuxpld/following{/other_user}", "gists_url": "https://api.github.com/users/linuxpld/gists{/gist_id}", "starred_url": "https://api.github.com/users/linuxpld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linuxpld/subscriptions", "organizations_url": "https://api.github.com/users/linuxpld/orgs", "repos_url": "https://api.github.com/users/linuxpld/repos", "events_url": "https://api.github.com/users/linuxpld/events{/privacy}", "received_events_url": "https://api.github.com/users/linuxpld/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-31T15:45:10Z", "updated_at": "2022-06-01T08:42:27Z", "closed_at": "2022-06-01T08:42:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version                                                                                                                                                     \r\nansible [core 2.12.4]\r\n  config file = None\r\n  configured module search path = ['/Users/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/user/Git/python-ansible/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/user/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/user/Git/python-ansible/bin/ansible\r\n  python version = 3.9.12 (main, Mar 30 2022, 14:33:51) [Clang 13.1.6 (clang-1316.0.21.2)]\r\n  jinja version = 3.0.3\r\n  libyaml = True\r\n\r\nmolecule 3.5.1 using python 3.9 \r\n    ansible:2.12.4\r\n    delegated:3.5.1 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n    vagrant:1.0.0 from molecule_vagrant\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n\r\nIn `molecule.yml` file, I have. \r\n\r\n```\r\nlint: |\r\n  set -e\r\n  yamllint .\r\n  ansible-lint .\r\n```\r\nIt behaves the same if no linter\r\n\r\n# Desired Behavior\r\n\r\nAccording to this closed issue [#1286 ](https://github.com/ansible-community/molecule/issues/1286), I should be able to define variables in the molecule.yml and give the path to the vault file it should work but It seems it doesn't work.\r\n\r\n# Actual Behaviour\r\n\r\nIn `molecule.yml` file, I have\r\n\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  config_options:\r\n    defaults:\r\n      vault_password_file: \"~/.ansible/vault/vault.pw\"\r\n  inventory:\r\n    group_vars:\r\n     password:\r\n        device_key: !vault |\r\n          $ANSIBLE_VAULT;1.1;AES256\r\n          38343932366663626637313537663530343735363335303131306661393037383731646133393866\r\n          6361353536623536653966376361373732353933613934610a353532356530633032636361386165\r\n          62353464366462653039326565393335393236663233623833306266373566363738373035306439\r\n          6633323637313037340a653963636633373433653930666532663636643563343566336262636532\r\n          6637\r\n```\r\n\r\nMolecule fails to execute with the following error:\r\n```\r\nmolecule --debug test                                                                                                                                                                              \r\nTraceback (most recent call last):\r\n  File \"/Users/user/Git/python-ansible/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/command/test.py\", line 159, in test\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args, ansible_args)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/command/base.py\", line 97, in execute_cmdline_scenarios\r\n    get_configs(args, command_args, ansible_args, glob_str), scenario_name\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/command/base.py\", line 184, in get_configs\r\n    configs = [\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/command/base.py\", line 185, in <listcomp>\r\n    config.Config(\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/config.py\", line 63, in __call__\r\n    obj = type.__call__(cls, *args, **kwargs)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/config.py\", line 105, in __init__\r\n    self.config = self._get_config()\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/config.py\", line 258, in _get_config\r\n    return self._combine(keep_string=MOLECULE_KEEP_STRING)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/config.py\", line 302, in _combine\r\n    self._preflight(s)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/config.py\", line 418, in _preflight\r\n    errors, data = schema_v3.pre_validate(data, env, MOLECULE_KEEP_STRING)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/model/schema_v3.py\", line 372, in pre_validate\r\n    data = util.safe_load(stream)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/molecule/util.py\", line 245, in safe_load\r\n    return yaml.safe_load(string) or {}\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/yaml/__init__.py\", line 162, in safe_load\r\n    return load(stream, SafeLoader)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/yaml/__init__.py\", line 114, in load\r\n    return loader.get_single_data()\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/yaml/constructor.py\", line 51, in get_single_data\r\n    return self.construct_document(node)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/yaml/constructor.py\", line 60, in construct_document\r\n    for dummy in generator:\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/yaml/constructor.py\", line 413, in construct_yaml_map\r\n    value = self.construct_mapping(node)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/yaml/constructor.py\", line 218, in construct_mapping\r\n    return super().construct_mapping(node, deep=deep)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/yaml/constructor.py\", line 143, in construct_mapping\r\n    value = self.construct_object(value_node, deep=deep)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/yaml/constructor.py\", line 100, in construct_object\r\n    data = constructor(self, node)\r\n  File \"/Users/user/Git/python-ansible/lib/python3.9/site-packages/yaml/constructor.py\", line 427, in construct_undefined\r\n    raise ConstructorError(None, None,\r\nyaml.constructor.ConstructorError: could not determine a constructor for the tag '!vault'\r\n  in \"<unicode string>\", line 34, column 21:\r\n            device_key: !vault |\r\n                        ^\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3492/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3486", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3486/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3486/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3486/events", "html_url": "https://github.com/ansible-community/molecule/issues/3486", "id": 1188218843, "node_id": "I_kwDOAsPDRs5G0sfb", "number": 3486, "title": "Drop cookiecutter from molecule", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/34", "html_url": "https://github.com/ansible-community/molecule/milestone/34", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/34/labels", "id": 7565020, "node_id": "MI_kwDOAsPDRs4Ac27c", "number": 34, "title": "4.0.0", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "open", "created_at": "2022-01-12T11:17:08Z", "updated_at": "2023-01-04T20:07:26Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2022-03-31T14:56:19Z", "updated_at": "2022-06-01T07:57:42Z", "closed_at": "2022-06-01T07:57:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As the future of cookiecutter project seems to be not sure I would like to propose dropping it before it becomes a real issue, even a security one (yep current release 1.7.3 from pypi being affected by one command injection security issue).\r\n\r\nI personally reached a point where I am ok with any of the following approaches:\r\n\r\n* use either ansible playbooks for templating\r\n* removal of init functionality (templating)\r\n\r\nI am fully aware that some people might like this but I do not think that the maintenance burden justifies keeping that feature, especially as its interaction with molecule provisioner plugins makes it even more problematic to use and debug.\r\n\r\nAs this is likely to count as a major change, it should be planned for v4 which is already on main branch. If anyone is interesting in helping with this task, please let me know.\r\n\r\n## References\r\n\r\n* https://github.com/cookiecutter/cookiecutter/issues/1555\r\n* https://github.com/cookiecutter/cookiecutter/issues/1636\r\n* https://github.com/cookiecutter/cookiecutter/issues/1642", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3486/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3481", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3481/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3481/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3481/events", "html_url": "https://github.com/ansible-community/molecule/issues/3481", "id": 1186566382, "node_id": "I_kwDOAsPDRs5GuZDu", "number": 3481, "title": "'molecule init' doesn't comply with documented 'molecule lint' configuration", "user": {"login": "Fixmetal", "id": 8530144, "node_id": "MDQ6VXNlcjg1MzAxNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8530144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fixmetal", "html_url": "https://github.com/Fixmetal", "followers_url": "https://api.github.com/users/Fixmetal/followers", "following_url": "https://api.github.com/users/Fixmetal/following{/other_user}", "gists_url": "https://api.github.com/users/Fixmetal/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fixmetal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fixmetal/subscriptions", "organizations_url": "https://api.github.com/users/Fixmetal/orgs", "repos_url": "https://api.github.com/users/Fixmetal/repos", "events_url": "https://api.github.com/users/Fixmetal/events{/privacy}", "received_events_url": "https://api.github.com/users/Fixmetal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-30T14:39:58Z", "updated_at": "2022-04-12T13:11:49Z", "closed_at": "2022-04-12T13:11:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible [core 2.12.2]\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/enomis/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/enomis/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.10.3 (main, Mar 18 2022, 00:00:00) [GCC 11.2.1 20220127 (Red Hat 11.2.1-9)]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\n\r\n$ molecule --version\r\nmolecule 3.6.1 using python 3.10 \r\n    ansible:2.12.2\r\n    delegated:3.6.1 from molecule\r\n    podman:1.1.0 from molecule_podman requiring collections: containers.podman>=1.7.0 ansible.posix>=1.3.0\r\n\r\n```\r\n\r\nMolecule installation method:\r\n\r\n- pip\r\n\r\nAnsible installation method:\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- yamllint\r\n- ansible-lint\r\n- flake8\r\n\r\n```\r\n$ ansible-lint --version\r\nansible-lint 6.0.1 using ansible 2.12.2\r\n$ flake8 --version\r\n4.0.1 (mccabe: 0.6.1, pycodestyle: 2.8.0, pyflakes: 2.4.0) CPython 3.10.3 on Linux\r\n$ yamllint --version\r\nyamllint 1.26.3\r\n```\r\n# Desired Behavior\r\n\r\nWhen creating a new role I would expect molecule to create a consistent skeleton for itself that complies with FQCN at the very least. This is because, as stated by doc:\r\n```\r\nMolecule supports only the latest two major versions of Ansible (N/N-1), meaning that if the latest version is 2.9.x, we will also test our code with 2.8.x.\r\n```\r\n\r\nSo as of today, I'm expecting it to support these (if I'm mistaken here I'd suggest a more clear specification in the doc):\r\n- ansible-core 2.12\r\n- ansible-core 2.11\r\n- ansible 5.5\r\n- ansible 5.4\r\n\r\nAfter applying as suggested about linting by the https://github.com/ansible-community/molecule/blob/v3.6.1/docs/configuration.rst#lint and populating proper info to `meta/main.yml` linter shouldn't complain at all, like:\r\n\r\n```\r\n$ cat molecule/default/molecule.yml \r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: delegated\r\nplatforms:\r\n  - name: instance\r\nprovisioner:\r\n  name: ansible\r\nverifier:\r\n  name: ansible\r\nlint: |\r\n  set -e\r\n  yamllint .\r\n  ansible-lint\r\n  flake8\r\n\r\n$ molecule lint\r\nINFO     default scenario test matrix: dependency, lint\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/home/enomis/.cache/ansible-compat/7778e3/modules:/home/enomis/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/enomis/.cache/ansible-compat/7778e3/collections:/home/enomis/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/enomis/.cache/ansible-compat/7778e3/roles:/home/enomis/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Using /home/enomis/.ansible/roles/acme.test symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > lint\r\nWARNING  Loading custom .yamllint config file, this extends our internal yamllint config.\r\n$ echo $?\r\n0\r\n$\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n`molecule lint` also checks `molecule` directory, generating these errors:\r\n\r\n- FQCNs not used in Molecule skeleton\r\n- Handler not used in default `destroy.yml` file\r\n\r\n\r\n```\r\n$ molecule --debug lint\r\nDEBUG    Validating schema /tmp/test/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, lint\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/home/enomis/.cache/ansible-compat/9f86d0/modules:/home/enomis/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/enomis/.cache/ansible-compat/9f86d0/collections:/home/enomis/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/enomis/.cache/ansible-compat/9f86d0/roles:/tmp/test:.\r\nINFO     Using /tmp/test/acme.test symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > lint\r\nWARNING  Loading custom .yamllint config file, this extends our internal yamllint config.\r\nWARNING  Listing 8 violation(s) that are fatal\r\nfqcn-builtins: Use FQCN for builtin actions.\r\nmolecule/default/converge.yml:5 Task/Handler: Include acme.test\r\n\r\nfqcn-builtins: Use FQCN for builtin actions.\r\nmolecule/default/create.yml:13 Task/Handler: Populate instance config dict\r\n\r\nfqcn-builtins: Use FQCN for builtin actions.\r\nmolecule/default/create.yml:24 Task/Handler: Convert instance config dict to a list\r\n\r\nfqcn-builtins: Use FQCN for builtin actions.\r\nmolecule/default/create.yml:28 Task/Handler: Dump instance config\r\n\r\nfqcn-builtins: Use FQCN for builtin actions.\r\nmolecule/default/destroy.yml:12 Task/Handler: Populate instance config\r\n\r\nfqcn-builtins: Use FQCN for builtin actions.\r\nmolecule/default/destroy.yml:16 Task/Handler: Dump instance config\r\n\r\nno-handler: Tasks that run when changed should likely be handlers.\r\nmolecule/default/destroy.yml:16 Task/Handler: Dump instance config\r\n\r\nfqcn-builtins: Use FQCN for builtin actions.\r\nmolecule/default/verify.yml:8 Task/Handler: Example assertion\r\n\r\nYou can skip specific rules or tags by adding them to your configuration file:\r\n# .config/ansible-lint.yml\r\nwarn_list:  # or 'skip_list' to silence them completely\r\n  - fqcn-builtins  # Use FQCN for builtin actions.\r\n  - no-handler  # Tasks that run when changed should likely be handlers.\r\n\r\nFinished with 8 failure(s), 0 warning(s) on 19 files.\r\nWARNING  Retrying execution failure 2 of: s e t   - e \r\n y a m l l i n t   . \r\n a n s i b l e - l i n t \r\n f l a k e 8 \r\n\r\nCRITICAL Lint failed with error code 2\r\n$ echo $?\r\n1\r\n$\r\n```\r\n\r\n# Steps to reproduce:\r\n```\r\nmolecule init role acme.test\r\ncd acme.test\r\ncat<<EOF>>molecule/default/molecule.yml \r\nlint: |\r\n  set -e\r\n  yamllint .\r\n  ansible-lint\r\n  flake8\r\nEOF\r\n<EDIT meta/main.yml w/Author, Description, Platforms>\r\nmolecule lint\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3481/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3481/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3480", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3480/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3480/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3480/events", "html_url": "https://github.com/ansible-community/molecule/pull/3480", "id": 1183587354, "node_id": "PR_kwDOAsPDRs41Kd8O", "number": 3480, "title": "Replace toolset container image with creator-ee in the documentation", "user": {"login": "ziegenberg", "id": 856916, "node_id": "MDQ6VXNlcjg1NjkxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/856916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziegenberg", "html_url": "https://github.com/ziegenberg", "followers_url": "https://api.github.com/users/ziegenberg/followers", "following_url": "https://api.github.com/users/ziegenberg/following{/other_user}", "gists_url": "https://api.github.com/users/ziegenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziegenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziegenberg/subscriptions", "organizations_url": "https://api.github.com/users/ziegenberg/orgs", "repos_url": "https://api.github.com/users/ziegenberg/repos", "events_url": "https://api.github.com/users/ziegenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/ziegenberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-28T15:10:57Z", "updated_at": "2022-03-31T13:33:50Z", "closed_at": "2022-03-31T13:32:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3480", "html_url": "https://github.com/ansible-community/molecule/pull/3480", "diff_url": "https://github.com/ansible-community/molecule/pull/3480.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3480.patch", "merged_at": "2022-03-31T13:32:13Z"}, "body": "The documentation still mentions the previous toolset image. The project https://github.com/ansible-community/toolset is archived and the `quay.io/ansible/toolset` image is deprecated. It is superseded by the `creator-ee` container from https://github.com/ansible/creator-ee and available at `quay.io/ansible/creator-ee`.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3480/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3480/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3479", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3479/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3479/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3479/events", "html_url": "https://github.com/ansible-community/molecule/pull/3479", "id": 1183330545, "node_id": "PR_kwDOAsPDRs41JoDk", "number": 3479, "title": "change IRC room from `ansible-molecule` to `ansible-devtools`", "user": {"login": "ziegenberg", "id": 856916, "node_id": "MDQ6VXNlcjg1NjkxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/856916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziegenberg", "html_url": "https://github.com/ziegenberg", "followers_url": "https://api.github.com/users/ziegenberg/followers", "following_url": "https://api.github.com/users/ziegenberg/following{/other_user}", "gists_url": "https://api.github.com/users/ziegenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziegenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziegenberg/subscriptions", "organizations_url": "https://api.github.com/users/ziegenberg/orgs", "repos_url": "https://api.github.com/users/ziegenberg/repos", "events_url": "https://api.github.com/users/ziegenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/ziegenberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-28T11:59:24Z", "updated_at": "2022-04-11T21:07:04Z", "closed_at": "2022-03-31T13:32:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3479", "html_url": "https://github.com/ansible-community/molecule/pull/3479", "diff_url": "https://github.com/ansible-community/molecule/pull/3479.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3479.patch", "merged_at": "2022-03-31T13:32:43Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3479/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3472", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3472/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3472/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3472/events", "html_url": "https://github.com/ansible-community/molecule/pull/3472", "id": 1175237628, "node_id": "PR_kwDOAsPDRs40u3ky", "number": 3472, "title": "Replace hardcoded github links by an extlink #3472", "user": {"login": "ziegenberg", "id": 856916, "node_id": "MDQ6VXNlcjg1NjkxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/856916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziegenberg", "html_url": "https://github.com/ziegenberg", "followers_url": "https://api.github.com/users/ziegenberg/followers", "following_url": "https://api.github.com/users/ziegenberg/following{/other_user}", "gists_url": "https://api.github.com/users/ziegenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziegenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziegenberg/subscriptions", "organizations_url": "https://api.github.com/users/ziegenberg/orgs", "repos_url": "https://api.github.com/users/ziegenberg/repos", "events_url": "https://api.github.com/users/ziegenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/ziegenberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-03-21T11:18:16Z", "updated_at": "2022-04-11T21:06:59Z", "closed_at": "2022-03-31T16:01:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3472", "html_url": "https://github.com/ansible-community/molecule/pull/3472", "diff_url": "https://github.com/ansible-community/molecule/pull/3472.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3472.patch", "merged_at": null}, "body": "Building the docs locally failed with several error messages like. Warnings during build are treated as error:\r\n\r\n```\r\ndocs/ci.rst:11:hardcoded link 'https://github.com/features/actions' could be replaced by an extlink (try using ':gh:`features/actions`' instead)\r\ndocs/ci.rst:332:hardcoded link 'https://github.com/ansible-community/molecule/issues/1567#issuecomment-436876722' could be replaced by an extlink (try using ':gh:`ansible-community/molecule/issues/1567#issuecomment-436876722`' instead)\r\ndocs/contributing.rst:11:hardcoded link 'https://github.com/ansible-community/molecule/projects' could be replaced by an extlink (try using ':gh:`ansible-community/molecule/projects`' instead)\r\ndocs/contributing.rst:12:hardcoded link 'https://github.com/ansible/community/wiki/molecule' could be replaced by an extlink (try using ':gh:`ansible/community/wiki/molecule`' instead)\r\ndocs/contributing.rst:32:hardcoded link 'https://github.com/ansible-community/molecule/issues/new/choose' could be replaced by an extlink (try using ':gh:`ansible-community/molecule/issues/new/choose`' instead)\r\ndocs/contributing.rst:37:hardcoded link 'https://github.com/ansible-community/molecule/blob/main/DCO_1_1.md' could be replaced by an extlink (try using ':gh:`ansible-community/molecule/blob/main/DCO_1_1.md`' instead)\r\ndocs/contributing.rst:51:hardcoded link 'https://github.com/ansible-community/molecule/blob/main/.github/CODE_OF_CONDUCT.md' could be replaced by an extlink (try using ':gh:`ansible-community/molecule/blob/main/.github/CODE_OF_CONDUCT.md`' instead)\r\ndocs/contributing.rst:58:hardcoded link 'https://github.com/ansible/community/wiki/Molecule#join-the-discussion' could be replaced by an extlink (try using ':gh:`ansible/community/wiki/Molecule#join-the-discussion`' instead)\r\ndocs/contributing.rst:58:hardcoded link 'https://github.com/ansible/community/wiki/Molecule#meetings' could be replaced by an extlink (try using ':gh:`ansible/community/wiki/Molecule#meetings`' instead)\r\ndocs/contributing.rst:185:hardcoded link 'https://github.com/retr0h' could be replaced by an extlink (try using ':gh:`retr0h`' instead)\r\ndocs/contributing.rst:185:hardcoded link 'https://github.com/ansible-community/molecule/graphs/contributors' could be replaced by an extlink (try using ':gh:`ansible-community/molecule/graphs/contributors`' instead)\r\ndocs/contributing.rst:185:hardcoded link 'https://github.com/ansible/community/wiki/Molecule' could be replaced by an extlink (try using ':gh:`ansible/community/wiki/Molecule`' instead)\r\ndocs/examples.rst:10:hardcoded link 'https://github.com/ansible-community/toolset' could be replaced by an extlink (try using ':gh:`ansible-community/toolset`' instead)\r\ndocs/faq.rst:53:hardcoded link 'https://github.com/kireledan/molecule/tree/playbook_proto' could be replaced by an extlink (try using ':gh:`kireledan/molecule/tree/playbook_proto`' instead)\r\ndocs/faq.rst:74:hardcoded link 'https://github.com/nylas/ansible-test' could be replaced by an extlink (try using ':gh:`nylas/ansible-test`' instead)\r\ndocs/faq.rst:74:hardcoded link 'https://github.com/nylas/ansible-test/issues/14' could be replaced by an extlink (try using ':gh:`nylas/ansible-test/issues/14`' instead)\r\ndocs/installation.rst:149:hardcoded link 'https://github.com/ansible-community/toolset' could be replaced by an extlink (try using ':gh:`ansible-community/toolset`' instead)\r\n```\r\n\r\nThis commit replaced the hardcoded links by an extlink", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3472/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3468", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3468/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3468/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3468/events", "html_url": "https://github.com/ansible-community/molecule/pull/3468", "id": 1170814954, "node_id": "PR_kwDOAsPDRs40haar", "number": 3468, "title": "fix broken molecule login", "user": {"login": "amarao", "id": 652496, "node_id": "MDQ6VXNlcjY1MjQ5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/652496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amarao", "html_url": "https://github.com/amarao", "followers_url": "https://api.github.com/users/amarao/followers", "following_url": "https://api.github.com/users/amarao/following{/other_user}", "gists_url": "https://api.github.com/users/amarao/gists{/gist_id}", "starred_url": "https://api.github.com/users/amarao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amarao/subscriptions", "organizations_url": "https://api.github.com/users/amarao/orgs", "repos_url": "https://api.github.com/users/amarao/repos", "events_url": "https://api.github.com/users/amarao/events{/privacy}", "received_events_url": "https://api.github.com/users/amarao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-16T10:20:52Z", "updated_at": "2022-03-20T10:32:57Z", "closed_at": "2022-03-20T10:32:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3468", "html_url": "https://github.com/ansible-community/molecule/pull/3468", "diff_url": "https://github.com/ansible-community/molecule/pull/3468.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3468.patch", "merged_at": "2022-03-20T10:32:56Z"}, "body": "Fixes #3435\r\n\r\nUse of ansible runtime prevents of use interactive stdin/stdout,\r\nand lack of split causing traces like this:\r\n\r\nFileNotFoundError: [Errno 2] No such file or directory: '/usr/bin/env /bin/podman exec -e COLUMNS=254 -e LINES=60 -e TERM=bash -e TERM=xterm -ti mariadb_104 bash'\r\n(because molecule tries to run whole command line as binary name\r\nwithout arguments).", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3468/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3468/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3464", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3464/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3464/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3464/events", "html_url": "https://github.com/ansible-community/molecule/issues/3464", "id": 1165756938, "node_id": "I_kwDOAsPDRs5FfAoK", "number": 3464, "title": "Allow configuration of install_local bool in prerun", "user": {"login": "Nubly", "id": 24597035, "node_id": "MDQ6VXNlcjI0NTk3MDM1", "avatar_url": "https://avatars.githubusercontent.com/u/24597035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nubly", "html_url": "https://github.com/Nubly", "followers_url": "https://api.github.com/users/Nubly/followers", "following_url": "https://api.github.com/users/Nubly/following{/other_user}", "gists_url": "https://api.github.com/users/Nubly/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nubly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nubly/subscriptions", "organizations_url": "https://api.github.com/users/Nubly/orgs", "repos_url": "https://api.github.com/users/Nubly/repos", "events_url": "https://api.github.com/users/Nubly/events{/privacy}", "received_events_url": "https://api.github.com/users/Nubly/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-03-10T21:43:48Z", "updated_at": "2022-06-01T10:08:13Z", "closed_at": "2022-06-01T10:08:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```shell\r\n(ansible-2.12.x) [nubly@ansible_host test_role]$ ansible --version && molecule --version\r\nansible [core 2.12.3]\r\n  config file = /home/nubly/Git/ansible/ansible.cfg\r\n  configured module search path = ['/home/nubly/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/nubly/.venvs/ansible-2.12.x/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /home/nubly/Git/ansible/collections\r\n  executable location = /home/nubly/.venvs/ansible-2.12.x/bin/ansible\r\n  python version = 3.9.2 (default, Jan 19 2022, 12:26:41) [GCC 11.1.0]\r\n  jinja version = 3.0.3\r\n  libyaml = True\r\nmolecule 3.6.1 using python 3.9\r\n    ansible:2.12.3\r\n    delegated:3.6.1 from molecule\r\n    podman:1.1.0 from molecule_podman requiring collections: containers.podman>=1.7.0 ansible.posix>=1.3.0\r\n```\r\n\r\nMolecule installation method:\r\n- `pip`\r\n\r\nAnsible installation method:\r\n- `pip`\r\n\r\nDetail any linters or test runners used:\r\n- `molecule`\r\n- `ansible-lint`\r\n- `yamllint`\r\n- `flake8`\r\n\r\n# Desired Behavior\r\n\r\nNo symlink being left within the roles dir post-molecule action. Perhaps by way of a configuration option, or a flag.\r\n\r\n# Actual Behaviour\r\n```shell\r\n(ansible-2.12.x) [nubly@ansible_host test_role]$ molecule dependency\r\nINFO     default scenario test matrix: dependency\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/home/nubly/.cache/ansible-compat/b09132/modules:/home/nubly/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/nubly/.cache/ansible-compat/b09132/collections:/home/nubly/Git/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/nubly/.cache/ansible-compat/b09132/roles:/home/nubly/Git/ansible/roles/external:/home/nubly/Git/ansible/roles/internal:/home/nubly/.venvs/ansible-2.12.x/share/ansible/roles\r\nINFO     Using /home/nubly/Git/ansible/roles/internal/test.test_role symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\n\r\n(ansible-2.12.x) [nubly@ansible_host test_role]$ ls -l ../\r\ntotal 0\r\ndrwxr-xr-x  7 nubly root 124 Mar  9 16:13 test_role\r\nlrwxrwxrwx  1 nubly root  73 Mar 10 13:19 test.test_role -> /home/nubly/Git/ansible/roles/test_role\r\n```\r\n# Misc Info\r\nThis was discussed a bit in issue #3404 and pull request #3409.\r\n\r\nMy ansible environment consists of a large amount of roles within the same directory.\r\n\r\nAll roles which I have developed only depend on other roles I have developed, and thus there really isn't a need for me to use a namespace as I also do not publish them to Galaxy. It's a bit silly for me to have to worry about Galaxy naming requirements when I will not publish anything from my environment to Galaxy.\r\n\r\nSince the `install_local` boolean was hardcoded `True` within #3409, on every Molecule action in which the prerun takes place, Molecule is creating symlinks\r\nto roles which are already installed in the `ANSIBLE_ROLES_PATH` as a result of the `prepare_environment()` function continuing past the `install_local` check and then calling `_install_galaxy_role`.\r\n\r\n[The `_install_galaxy_role` function](https://github.com/ansible-community/ansible-compat/blob/main/src/ansible_compat/runtime.py#L439) is also the only reason I am using a namespace, as it exits with an error by default if my role names are not up to spec even though they don't have to be.\r\n\r\nAt first, I thought that I could change my role directory naming convention to `$namespace.$role_name` to prevent this, but then I was met with [ansible-compat #97](https://github.com/ansible-community/ansible-compat/issues/97).\r\n\r\nI still want to be able to install requirements from `requirements.yml`, and as such I am unable to explicitly disable the prerun. However, I'd like to be able to disable the Galaxy role installation steps as I know that my any/all roles needed in my roles are present in my roles path and able to be found, as setting the boolean within the code to False results in my tests still running as they should.\r\n\r\nI'd like to be able to specify a flag from CLI or configuration option within `molecule.yml` or some other applicable file to allow the value of the `install_local` boolean to be configured within Molecule's prerun, thereby allowing configuration of the creation of these symlinks (and installation of Galaxy roles). There was a small amount of discussion on this on [#3409](https://github.com/ansible-community/molecule/pull/3409#discussion_r802489585).", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3464/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3464/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3462", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3462/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3462/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3462/events", "html_url": "https://github.com/ansible-community/molecule/issues/3462", "id": 1162582885, "node_id": "I_kwDOAsPDRs5FS5tl", "number": 3462, "title": "molecule login broken since 3.6.0", "user": {"login": "udondan", "id": 6443408, "node_id": "MDQ6VXNlcjY0NDM0MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/6443408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/udondan", "html_url": "https://github.com/udondan", "followers_url": "https://api.github.com/users/udondan/followers", "following_url": "https://api.github.com/users/udondan/following{/other_user}", "gists_url": "https://api.github.com/users/udondan/gists{/gist_id}", "starred_url": "https://api.github.com/users/udondan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/udondan/subscriptions", "organizations_url": "https://api.github.com/users/udondan/orgs", "repos_url": "https://api.github.com/users/udondan/repos", "events_url": "https://api.github.com/users/udondan/events{/privacy}", "received_events_url": "https://api.github.com/users/udondan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-03-08T12:12:44Z", "updated_at": "2022-10-08T10:39:29Z", "closed_at": "2022-04-11T20:23:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```bash\r\n# molecule --version\r\nmolecule 3.6.1 using python 3.7 \r\n    ansible:2.9.13\r\n    delegated:3.6.1 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n    ec2:0.4 from molecule_ec2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nWhen running `molecule login` it should work\r\n\r\n# Actual Behaviour\r\n\r\nSine Molecule 3.6.0 it doesn't. \r\n\r\n```bash\r\n# molecule login -h foo\r\nINFO     Running default > login\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/login.py\", line 166, in login\r\n    base.execute_subcommand(scenario.config, subcommand)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/base.py\", line 149, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/logger.py\", line 188, in wrapper\r\n    rt = func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/login.py\", line 101, in execute\r\n    self._get_login(hostname)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/login.py\", line 146, in _get_login\r\n    app.runtime.exec(cmd)\r\n  File \"/usr/local/lib/python3.7/site-packages/ansible_compat/runtime.py\", line 145, in exec\r\n    cwd=cwd,\r\n  File \"/usr/lib64/python3.7/subprocess.py\", line 488, in run\r\n    with Popen(*popenargs, **kwargs) as process:\r\n  File \"/usr/lib64/python3.7/subprocess.py\", line 800, in __init__\r\n    restore_signals, start_new_session)\r\n  File \"/usr/lib64/python3.7/subprocess.py\", line 1551, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg, err_filename)\r\nFileNotFoundError: [Errno 2] No such file or directory: '/usr/bin/env ssh 1.2.3.4 -l ec2-user -p 22 -i /molecule-cache/ssh_key -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o ForwardX11=no -o LogLevel=ERROR -o IdentitiesOnly=yes -o StrictHostKeyChecking=no': '/usr/bin/env ssh 1.2.3.4 -l ec2-user -p 22 -i /molecule-cache/ssh_key -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o ForwardX11=no -o LogLevel=ERROR -o IdentitiesOnly=yes -o StrictHostKeyChecking=no'\r\n```\r\nApparently it checks for the command to be present as file.\r\n\r\nI verified this works until 3.5.2 and is broken in 3.6.0 and 3.6.1. Looking at the changelog, my best guess is this is caused by #3237", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3462/reactions", "total_count": 8, "+1": 8, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3462/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3461", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3461/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3461/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3461/events", "html_url": "https://github.com/ansible-community/molecule/issues/3461", "id": 1159768279, "node_id": "I_kwDOAsPDRs5FIKjX", "number": 3461, "title": "Regression: Docs Aren't Generated From Python Source", "user": {"login": "justin-f-perez", "id": 7209967, "node_id": "MDQ6VXNlcjcyMDk5Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/7209967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/justin-f-perez", "html_url": "https://github.com/justin-f-perez", "followers_url": "https://api.github.com/users/justin-f-perez/followers", "following_url": "https://api.github.com/users/justin-f-perez/following{/other_user}", "gists_url": "https://api.github.com/users/justin-f-perez/gists{/gist_id}", "starred_url": "https://api.github.com/users/justin-f-perez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/justin-f-perez/subscriptions", "organizations_url": "https://api.github.com/users/justin-f-perez/orgs", "repos_url": "https://api.github.com/users/justin-f-perez/repos", "events_url": "https://api.github.com/users/justin-f-perez/events{/privacy}", "received_events_url": "https://api.github.com/users/justin-f-perez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-03-04T15:30:18Z", "updated_at": "2022-03-21T17:05:30Z", "closed_at": "2022-03-21T17:05:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n- docs\r\n\r\n# Molecule and Ansible details\r\n\r\nlatest/NA\r\n\r\n# Desired Behavior\r\n\r\nrst docs in python source code are rendered by the documentation generation system.\r\n\r\n# Actual Behaviour\r\nLarge amounts of documentation from the python source code are simply missing from latest that were not missing in previous versions. Code blocks in `.rst` files similar to this apparently render to an empty string:\r\n```\r\n.. autoclass:: molecule.some.module.Class()\r\n   :undoc-members:\r\n```\r\nI have on several occasions found myself reading raw rst in the source code or referencing old documentation which is inconvenient and error-prone. In some instances, \"missing\" docs could be due to pieces of molecule being spun out into their own repositories (e.g., docker/podman drivers; related: #2854 ). However, even docs native to this repository seem to be missing.\r\n\r\nTake for example the [create command](https://github.com/ansible-community/molecule/blob/main/src/molecule/command/create.py) documented in [molecule command line reference](https://molecule.readthedocs.io/en/latest/usage.html) rendered from  [this usage.rst](https://github.com/ansible-community/molecule/blob/main/docs/usage.rst) file.\r\n\r\nHere is an old version of the [rendered docs for the create command](https://molecule.readthedocs.io/en/v2/usage.html#create), the [corresponding usage.rst](https://github.com/ansible-community/molecule/blame/2.0.0.rc5/doc/source/usage.rst#L148), and the [corresponding python source](https://github.com/ansible-community/molecule/blob/2.0.0.rc5/molecule/command/create.py). The rst bits from the python source are properly rendered, and the generated documentation is much more complete.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3461/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3459", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3459/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3459/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3459/events", "html_url": "https://github.com/ansible-community/molecule/pull/3459", "id": 1157415458, "node_id": "PR_kwDOAsPDRs4z1ybB", "number": 3459, "title": "Fix additional_files_or_dirs in skip check", "user": {"login": "skeetmtp", "id": 2316424, "node_id": "MDQ6VXNlcjIzMTY0MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2316424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skeetmtp", "html_url": "https://github.com/skeetmtp", "followers_url": "https://api.github.com/users/skeetmtp/followers", "following_url": "https://api.github.com/users/skeetmtp/following{/other_user}", "gists_url": "https://api.github.com/users/skeetmtp/gists{/gist_id}", "starred_url": "https://api.github.com/users/skeetmtp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skeetmtp/subscriptions", "organizations_url": "https://api.github.com/users/skeetmtp/orgs", "repos_url": "https://api.github.com/users/skeetmtp/repos", "events_url": "https://api.github.com/users/skeetmtp/events{/privacy}", "received_events_url": "https://api.github.com/users/skeetmtp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-02T16:23:59Z", "updated_at": "2022-03-20T10:10:10Z", "closed_at": "2022-03-20T10:10:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3459", "html_url": "https://github.com/ansible-community/molecule/pull/3459", "diff_url": "https://github.com/ansible-community/molecule/pull/3459.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3459.patch", "merged_at": "2022-03-20T10:10:10Z"}, "body": "Issue: When no tests are found in `self.directory` but actually there is test in `additional_files_or_dirs` the whole `Testinfra.execute()` is skipped.\r\nThis commit fix this corner case by skipping `Testinfra.execute()` only if there is no tests neither in `self.directory` nor in `additional_files_or_dirs`", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3459/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3459/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3454", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3454/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3454/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3454/events", "html_url": "https://github.com/ansible-community/molecule/pull/3454", "id": 1155512348, "node_id": "PR_kwDOAsPDRs4zvN6F", "number": 3454, "title": "Remove paramiko dependency", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 3622991147, "node_id": "LA_kwDOAsPDRs7X8nUr", "url": "https://api.github.com/repos/ansible-community/molecule/labels/AAP", "name": "AAP", "color": "E99695", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-01T15:58:19Z", "updated_at": "2022-03-01T17:22:32Z", "closed_at": "2022-03-01T17:22:31Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3454", "html_url": "https://github.com/ansible-community/molecule/pull/3454", "diff_url": "https://github.com/ansible-community/molecule/pull/3454.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3454.patch", "merged_at": "2022-03-01T17:22:31Z"}, "body": "As paramiko is not used by molecule core we should not\nlist it as a dependency.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3454/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3454/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3446", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3446/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3446/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3446/events", "html_url": "https://github.com/ansible-community/molecule/pull/3446", "id": 1137988239, "node_id": "PR_kwDOAsPDRs4y0mz3", "number": 3446, "title": "docs: ansible-lint is not a molecule dep", "user": {"login": "justin-f-perez", "id": 7209967, "node_id": "MDQ6VXNlcjcyMDk5Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/7209967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/justin-f-perez", "html_url": "https://github.com/justin-f-perez", "followers_url": "https://api.github.com/users/justin-f-perez/followers", "following_url": "https://api.github.com/users/justin-f-perez/following{/other_user}", "gists_url": "https://api.github.com/users/justin-f-perez/gists{/gist_id}", "starred_url": "https://api.github.com/users/justin-f-perez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/justin-f-perez/subscriptions", "organizations_url": "https://api.github.com/users/justin-f-perez/orgs", "repos_url": "https://api.github.com/users/justin-f-perez/repos", "events_url": "https://api.github.com/users/justin-f-perez/events{/privacy}", "received_events_url": "https://api.github.com/users/justin-f-perez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-14T23:55:04Z", "updated_at": "2022-02-25T17:54:03Z", "closed_at": "2022-02-25T17:54:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3446", "html_url": "https://github.com/ansible-community/molecule/pull/3446", "diff_url": "https://github.com/ansible-community/molecule/pull/3446.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3446.patch", "merged_at": "2022-02-25T17:54:03Z"}, "body": "resolves #3445", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3446/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3445", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3445/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3445/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3445/events", "html_url": "https://github.com/ansible-community/molecule/issues/3445", "id": 1137976088, "node_id": "I_kwDOAsPDRs5D1CMY", "number": 3445, "title": "remnants of ansible-lint in molecule docs", "user": {"login": "justin-f-perez", "id": 7209967, "node_id": "MDQ6VXNlcjcyMDk5Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/7209967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/justin-f-perez", "html_url": "https://github.com/justin-f-perez", "followers_url": "https://api.github.com/users/justin-f-perez/followers", "following_url": "https://api.github.com/users/justin-f-perez/following{/other_user}", "gists_url": "https://api.github.com/users/justin-f-perez/gists{/gist_id}", "starred_url": "https://api.github.com/users/justin-f-perez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/justin-f-perez/subscriptions", "organizations_url": "https://api.github.com/users/justin-f-perez/orgs", "repos_url": "https://api.github.com/users/justin-f-perez/repos", "events_url": "https://api.github.com/users/justin-f-perez/events{/privacy}", "received_events_url": "https://api.github.com/users/justin-f-perez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-14T23:35:13Z", "updated_at": "2022-02-25T17:54:03Z", "closed_at": "2022-02-25T17:54:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nNote: the python was installed via conda, but the python packages are installed using pip, not conda.\r\n```\r\nansible [core 2.12.2]\r\n  python version = 3.9.10 | packaged by conda-forge | (main, Feb  1 2022, 21:25:34) [Clang 11.1.0 ]\r\n  jinja version = 3.0.3\r\n  libyaml = True\r\n  ansible python module location = /opt/homebrew/Caskroom/miniconda/base/envs/tmptest/lib/python3.9/site-packages/ansible\r\nmolecule 3.6.1 using python 3.9\r\n    ansible:2.12.2\r\n    delegated:3.6.1 from molecule\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nansible-lint\r\n\r\n# Desired Behavior\r\n\r\nAssuming ansible-lint was removed for good reason and shouldn't be added back into the `molecule[lint]` extra:\r\n\r\nI think this would make clearer ansible-lint is never installed by molecule:\r\n* add note here that ansible-lint is not installed by molecule, even if you installed the `[lint]` extra\r\n https://molecule.readthedocs.io/en/latest/configuration.html?highlight=ansible-lint#lint\r\n* remove misleading comment in setup.cfg https://github.com/ansible-community/molecule/blob/c33c205b570cd95d599d16afa8772fabba51dd40/setup.cfg#L112\r\n* change to actual default (yamllint) https://github.com/ansible-community/molecule/blob/c7ae6a27bed9ba6423d6dfe11d8e0d5c54da094f/src/molecule/command/init/scenario.py#L165\r\n\r\n\r\n\r\n\r\n# Actual Behaviour\r\n\r\nI can't say for sure (don't know project history well enough) but I *think* ansible-lint was once available through the `molecule[lint]` extra, but was subsequently promoted to a regular dependency, and eventually removed from molecule deps altogether. It appears there were a few spots in docs that got missed and may mislead a new user (see: me) into thinking ansible-lint will be installed with `pip install molecule[lint]` when in fact it is not.\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3445/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3445/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3442", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3442/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3442/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3442/events", "html_url": "https://github.com/ansible-community/molecule/issues/3442", "id": 1136976373, "node_id": "I_kwDOAsPDRs5DxOH1", "number": 3442, "title": "Molecule thinks instance is exist", "user": {"login": "mm3906078", "id": 49244782, "node_id": "MDQ6VXNlcjQ5MjQ0Nzgy", "avatar_url": "https://avatars.githubusercontent.com/u/49244782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mm3906078", "html_url": "https://github.com/mm3906078", "followers_url": "https://api.github.com/users/mm3906078/followers", "following_url": "https://api.github.com/users/mm3906078/following{/other_user}", "gists_url": "https://api.github.com/users/mm3906078/gists{/gist_id}", "starred_url": "https://api.github.com/users/mm3906078/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mm3906078/subscriptions", "organizations_url": "https://api.github.com/users/mm3906078/orgs", "repos_url": "https://api.github.com/users/mm3906078/repos", "events_url": "https://api.github.com/users/mm3906078/events{/privacy}", "received_events_url": "https://api.github.com/users/mm3906078/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-02-14T08:55:10Z", "updated_at": "2022-02-14T11:20:05Z", "closed_at": "2022-02-14T11:20:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nMolecule list output:\r\n```\r\nINFO     Running default > list\r\n                \u2577             \u2577                  \u2577               \u2577         \u2577            \r\n  Instance Name \u2502 Driver Name \u2502 Provisioner Name \u2502 Scenario Name \u2502 Created \u2502 Converged  \r\n\u2576\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574\r\n  instance      \u2502 docker      \u2502 ansible          \u2502 default       \u2502 true    \u2502 false      \r\n                \u2575             \u2575                  \u2575               \u2575         \u2575            \r\n```\r\ndocker ps shows no instance is running\r\n\r\nmolecule create output:\r\n```\r\nINFO     default scenario test matrix: dependency, create, prepare\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/home/mohammdreza/.cache/ansible-compat/cc6786/modules:/home/mohammdreza/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/mohammdreza/.cache/ansible-compat/cc6786/collections:/home/mohammdreza/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/mohammdreza/.cache/ansible-compat/cc6786/roles:/home/mohammdreza/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running default > prepare\r\nWARNING  Skipping, prepare playbook not configured.\r\n\r\n```\r\nmolecule destroys output:\r\n```\r\nINFO     default scenario test matrix: dependency, cleanup, destroy\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/home/mohammdreza/.cache/ansible-compat/cc6786/modules:/home/mohammdreza/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATH=/home/mohammdreza/.cache/ansible-compat/cc6786/collections:/home/mohammdreza/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/mohammdreza/.cache/ansible-compat/cc6786/roles:/home/mohammdreza/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > cleanup\r\nWARNING  Skipping, cleanup playbook not configured.\r\nINFO     Running default > destroy\r\nINFO     Sanity checks: 'docker'\r\n\r\nPLAY [Destroy] *****************************************************************\r\n\r\nTASK [Destroy molecule instance(s)] ********************************************\r\nchanged: [localhost] => (item=instance)\r\n\r\nTASK [Wait for instance(s) deletion to complete] *******************************\r\nFAILED - RETRYING: [localhost]: Wait for instance(s) deletion to complete (300 retries left).\r\nfailed: [localhost] (item=instance) => changed=false \r\n  ansible_job_id: '334642932050.14638'\r\n  ansible_loop_var: item\r\n  attempts: 2\r\n  finished: 1\r\n  item:\r\n    ansible_job_id: '334642932050.14638'\r\n    ansible_loop_var: item\r\n    changed: true\r\n    failed: 0\r\n    finished: 0\r\n    item:\r\n      command: ''\r\n      image: geerlingguy/docker-debian11-ansible:latest\r\n      name: instance\r\n      pre_build_image: true\r\n      privileged: true\r\n      volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    results_file: /home/mohammdreza/.ansible_async/334642932050.14638\r\n    started: 1\r\n  msg: 'Error removing container 447ef0b7788b7a862813f5e88f56b6844ef40025d848683316ebe2cde4e9fdff: 500 Server Error for http+docker://localhost/v1.41/containers/447ef0b7788b7a862813f5e88f56b6844ef40025d848683316ebe2cde4e9fdff?v=False&link=False&force=False: Internal Server Error (\"container 447ef0b7788b7a862813f5e88f56b6844ef40025d848683316ebe2cde4e9fdff: driver \"overlay2\" failed to remove root filesystem: unlinkat /var/lib/docker/overlay2/273006d337f4985b2d27d1229fb6ab0ed89fd2573c42c11d0cb73f9fa7698e44/diff/home/logkeeper/global-log-202202.log: operation not permitted\")'\r\n  results_file: /home/mohammdreza/.ansible_async/334642932050.14638\r\n  started: 1\r\n  stderr: ''\r\n  stderr_lines: <omitted>\r\n  stdout: ''\r\n  stdout_lines: <omitted>\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=1    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\n\r\n```\r\n```\r\nansible --version && molecule --version\r\nmolecule 3.6.0 using python 3.8 \r\n    ansible:2.12.2\r\n    delegated:3.6.0 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nRun molecule creates a new instance.\r\n\r\n\r\n`I've try remove ~/.ansible also test removing ~/.ansible/.temp but it not fix my problem`\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3442/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3442/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3435", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3435/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3435/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3435/events", "html_url": "https://github.com/ansible-community/molecule/issues/3435", "id": 1126015230, "node_id": "I_kwDOAsPDRs5DHaD-", "number": 3435, "title": "3.6.0 login to podman fails '/usr/bin/env /bin/podman' No such file", "user": {"login": "laurent-indermuehle", "id": 592514, "node_id": "MDQ6VXNlcjU5MjUxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/592514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laurent-indermuehle", "html_url": "https://github.com/laurent-indermuehle", "followers_url": "https://api.github.com/users/laurent-indermuehle/followers", "following_url": "https://api.github.com/users/laurent-indermuehle/following{/other_user}", "gists_url": "https://api.github.com/users/laurent-indermuehle/gists{/gist_id}", "starred_url": "https://api.github.com/users/laurent-indermuehle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laurent-indermuehle/subscriptions", "organizations_url": "https://api.github.com/users/laurent-indermuehle/orgs", "repos_url": "https://api.github.com/users/laurent-indermuehle/repos", "events_url": "https://api.github.com/users/laurent-indermuehle/events{/privacy}", "received_events_url": "https://api.github.com/users/laurent-indermuehle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2022-02-07T13:43:43Z", "updated_at": "2022-05-17T15:26:00Z", "closed_at": "2022-03-20T10:32:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\n```\r\n```\r\nansible [core 2.11.4] \r\n  config file = /home/indermue/src/ansible-mysql/ansible.cfg\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/ansible\r\n  ansible collection location = /home/indermue/src/ansible-mysql/collections:/root/python-venv/ansible-4.2.0/lib/python3.8/site-packages:/var/lib/awx/projects/ansible-mysql-manual/collections:/opt/my-tower-venv/ansible-4.2.0/lib/python3.8/site-packages\r\n  executable location = /root/python-venv/ansible-4.4.0/bin/ansible\r\n  python version = 3.8.8 (default, Aug 11 2021, 06:52:42) [GCC 8.5.0 20210514 (Red Hat 8.5.0-3)]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\n```\r\n\r\n```\r\nmolecule --version\r\n```\r\n```\r\nmolecule 3.6.0 using python 3.8\r\n    ansible:2.11.4\r\n    delegated:3.6.0 from molecule\r\n    podman:1.1.0 from molecule_podman requiring collections: containers.podman>=1.7.0 ansible.posix>=1.3.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\n`molecule login -h node -s scenario` should open bash from within the podman container.\r\n\r\n# Actual Behaviour\r\n\r\nMolecule fails to execute with the following error:\r\n\r\n```\r\nINFO     Inventory /home/indermue/src/ansible-mysql/molecule/mariadb/inventory/static.yml linked to /root/.cache/molecule/ansible-mysql/mariadb/inventory/hosts\r\nINFO     Inventory /home/indermue/src/ansible-mysql/molecule/mariadb/inventory/group_vars linked to /root/.cache/molecule/ansible-mysql/mariadb/inventory/group_vars\r\nINFO     Inventory /home/indermue/src/ansible-mysql/molecule/mariadb/inventory/host_vars linked to /root/.cache/molecule/ansible-mysql/mariadb/inventory/host_vars\r\nINFO     Running mariadb > login \r\nTraceback (most recent call last):\r\n  File \"/root/python-venv/ansible-4.4.0/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/click/core.py\", line 1137, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/click/core.py\", line 1062, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/click/core.py\", line 1668, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/click/core.py\", line 1404, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/click/core.py\", line 763, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/molecule/command/login.py\", line 166, in login\r\n    base.execute_subcommand(scenario.config, subcommand)\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/molecule/command/base.py\", line 149, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/molecule/logger.py\", line 188, in wrapper\r\n    rt = func(*args, **kwargs)\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/molecule/command/login.py\", line 101, in execute\r\n    self._get_login(hostname)\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/molecule/command/login.py\", line 146, in _get_login\r\n    app.runtime.exec(cmd)\r\n  File \"/root/python-venv/ansible-4.4.0/lib/python3.8/site-packages/ansible_compat/runtime.py\", line 138, in exec\r\n    result = run_func(\r\n  File \"/usr/lib64/python3.8/subprocess.py\", line 493, in run\r\n    with Popen(*popenargs, **kwargs) as process:\r\n  File \"/usr/lib64/python3.8/subprocess.py\", line 858, in __init__\r\n    self._execute_child(args, executable, preexec_fn, close_fds,\r\n  File \"/usr/lib64/python3.8/subprocess.py\", line 1706, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg, err_filename)\r\nFileNotFoundError: [Errno 2] No such file or directory: '/usr/bin/env /bin/podman exec -e COLUMNS=254 -e LINES=60 -e TERM=bash -e TERM=xterm -ti mariadb_104 bash'  \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3435/reactions", "total_count": 7, "+1": 7, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3435/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3431", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3431/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3431/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3431/events", "html_url": "https://github.com/ansible-community/molecule/pull/3431", "id": 1125229731, "node_id": "PR_kwDOAsPDRs4yIgSP", "number": 3431, "title": "Replace centos:8 with centos:stream8", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-06T15:15:03Z", "updated_at": "2022-02-06T15:49:45Z", "closed_at": "2022-02-06T15:49:44Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3431", "html_url": "https://github.com/ansible-community/molecule/pull/3431", "diff_url": "https://github.com/ansible-community/molecule/pull/3431.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3431.patch", "merged_at": "2022-02-06T15:49:44Z"}, "body": "As stream8 images are not available at docker.io this also includes switcht quay.io registry.\r\n\r\nThis change requires removal of few bits of documentation that was\r\nspecific to the removed old centos:8.\r\n\r\nMain reason for this move was that this pipeline failed to to AppStream repos no longer being accessible, directly affecting\r\nout pipelines.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3431/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3431/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3429", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3429/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3429/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3429/events", "html_url": "https://github.com/ansible-community/molecule/pull/3429", "id": 1125098166, "node_id": "PR_kwDOAsPDRs4yIH2l", "number": 3429, "title": "Added state-file driver validation", "user": {"login": "superstes", "id": 50269951, "node_id": "MDQ6VXNlcjUwMjY5OTUx", "avatar_url": "https://avatars.githubusercontent.com/u/50269951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/superstes", "html_url": "https://github.com/superstes", "followers_url": "https://api.github.com/users/superstes/followers", "following_url": "https://api.github.com/users/superstes/following{/other_user}", "gists_url": "https://api.github.com/users/superstes/gists{/gist_id}", "starred_url": "https://api.github.com/users/superstes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/superstes/subscriptions", "organizations_url": "https://api.github.com/users/superstes/orgs", "repos_url": "https://api.github.com/users/superstes/repos", "events_url": "https://api.github.com/users/superstes/events{/privacy}", "received_events_url": "https://api.github.com/users/superstes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-02-06T04:03:44Z", "updated_at": "2022-03-20T12:46:15Z", "closed_at": "2022-03-20T10:16:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3429", "html_url": "https://github.com/ansible-community/molecule/pull/3429", "diff_url": "https://github.com/ansible-community/molecule/pull/3429.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3429.patch", "merged_at": "2022-03-20T10:16:26Z"}, "body": "It seems the driver pulled from existing state-file(s) was not yet validated against the available drivers.\r\n\r\nThis was problematic for me as I previously used 'vagrant' and changed it to use 'docker'.\r\nThat simple check (as already used in the molecule.yml schema-validation) should fix this behaviour.\r\n\r\nI pulled my hair out yesterday trying to understand why the configured 'docker' driver was not used by molecule.\r\nThere was no transparent way to know why molecule did not use my configuration. (as an user)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3429/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3429/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3420", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3420/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3420/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3420/events", "html_url": "https://github.com/ansible-community/molecule/issues/3420", "id": 1117275608, "node_id": "I_kwDOAsPDRs5CmEXY", "number": 3420, "title": "Toolset image is discontinued", "user": {"login": "mprasil", "id": 8255364, "node_id": "MDQ6VXNlcjgyNTUzNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8255364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mprasil", "html_url": "https://github.com/mprasil", "followers_url": "https://api.github.com/users/mprasil/followers", "following_url": "https://api.github.com/users/mprasil/following{/other_user}", "gists_url": "https://api.github.com/users/mprasil/gists{/gist_id}", "starred_url": "https://api.github.com/users/mprasil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mprasil/subscriptions", "organizations_url": "https://api.github.com/users/mprasil/orgs", "repos_url": "https://api.github.com/users/mprasil/repos", "events_url": "https://api.github.com/users/mprasil/events{/privacy}", "received_events_url": "https://api.github.com/users/mprasil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-01-28T11:03:59Z", "updated_at": "2022-04-19T19:07:54Z", "closed_at": "2022-04-19T19:07:54Z", "author_association": "NONE", "active_lock_reason": "off-topic", "body": "The [documentation](https://github.com/ansible-community/molecule/blob/4f8fd055ab183a1928b3460ccb39e94ac6162ebf/docs/installation.rst#docker) links to toolset project for running molecule in docker container. This [project](https://github.com/ansible-community/toolset) has now been deprecated, so that part of docs should be either removed or updated with some other appropriate option.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3420/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3420/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3409", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3409/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3409/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3409/events", "html_url": "https://github.com/ansible-community/molecule/pull/3409", "id": 1111687346, "node_id": "PR_kwDOAsPDRs4xcsxh", "number": 3409, "title": "Fix prepare_environment call for role installs", "user": {"login": "scruffaluff", "id": 29684915, "node_id": "MDQ6VXNlcjI5Njg0OTE1", "avatar_url": "https://avatars.githubusercontent.com/u/29684915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scruffaluff", "html_url": "https://github.com/scruffaluff", "followers_url": "https://api.github.com/users/scruffaluff/followers", "following_url": "https://api.github.com/users/scruffaluff/following{/other_user}", "gists_url": "https://api.github.com/users/scruffaluff/gists{/gist_id}", "starred_url": "https://api.github.com/users/scruffaluff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scruffaluff/subscriptions", "organizations_url": "https://api.github.com/users/scruffaluff/orgs", "repos_url": "https://api.github.com/users/scruffaluff/repos", "events_url": "https://api.github.com/users/scruffaluff/events{/privacy}", "received_events_url": "https://api.github.com/users/scruffaluff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-22T21:04:16Z", "updated_at": "2022-02-09T17:28:09Z", "closed_at": "2022-02-09T17:28:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3409", "html_url": "https://github.com/ansible-community/molecule/pull/3409", "diff_url": "https://github.com/ansible-community/molecule/pull/3409.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3409.patch", "merged_at": "2022-02-09T17:28:07Z"}, "body": "Fixes local role installations with `ansible-compat` version 1.0.0 as discussed in issue #3404.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3409/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3409/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3407", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3407/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3407/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3407/events", "html_url": "https://github.com/ansible-community/molecule/pull/3407", "id": 1110030956, "node_id": "PR_kwDOAsPDRs4xXKEf", "number": 3407, "title": "Add deprecation warning for the `mol` command", "user": {"login": "mperry2", "id": 2487505, "node_id": "MDQ6VXNlcjI0ODc1MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2487505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mperry2", "html_url": "https://github.com/mperry2", "followers_url": "https://api.github.com/users/mperry2/followers", "following_url": "https://api.github.com/users/mperry2/following{/other_user}", "gists_url": "https://api.github.com/users/mperry2/gists{/gist_id}", "starred_url": "https://api.github.com/users/mperry2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mperry2/subscriptions", "organizations_url": "https://api.github.com/users/mperry2/orgs", "repos_url": "https://api.github.com/users/mperry2/repos", "events_url": "https://api.github.com/users/mperry2/events{/privacy}", "received_events_url": "https://api.github.com/users/mperry2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-01-21T04:09:14Z", "updated_at": "2022-02-06T15:51:20Z", "closed_at": "2022-02-06T15:51:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3407", "html_url": "https://github.com/ansible-community/molecule/pull/3407", "diff_url": "https://github.com/ansible-community/molecule/pull/3407.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3407.patch", "merged_at": "2022-02-06T15:51:19Z"}, "body": "The `mol` command can be replaced with a shell alias for those users that need\r\nit. Output a deprecation warning when the `mol` command is run that informs the\r\nuser that the command will be removed in a future release of Molecule.\r\n\r\nAddresses issue #3406", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3407/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3407/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3406", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3406/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3406/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3406/events", "html_url": "https://github.com/ansible-community/molecule/issues/3406", "id": 1109986272, "node_id": "I_kwDOAsPDRs5CKQvg", "number": 3406, "title": "Remove the mol command alias", "user": {"login": "mperry2", "id": 2487505, "node_id": "MDQ6VXNlcjI0ODc1MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2487505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mperry2", "html_url": "https://github.com/mperry2", "followers_url": "https://api.github.com/users/mperry2/followers", "following_url": "https://api.github.com/users/mperry2/following{/other_user}", "gists_url": "https://api.github.com/users/mperry2/gists{/gist_id}", "starred_url": "https://api.github.com/users/mperry2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mperry2/subscriptions", "organizations_url": "https://api.github.com/users/mperry2/orgs", "repos_url": "https://api.github.com/users/mperry2/repos", "events_url": "https://api.github.com/users/mperry2/events{/privacy}", "received_events_url": "https://api.github.com/users/mperry2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-01-21T02:37:50Z", "updated_at": "2022-04-11T20:43:32Z", "closed_at": "2022-04-11T20:43:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Issue #2737 should be reverted. We should not pollute the path with duplicate executables. This is **_exactly_** what aliases exist for, and users can easily create an alias if they wish to use mol to call molecule.\r\n\r\nMaybe add a deprecation warning for one year and then remove it for good after that.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3406/reactions", "total_count": 6, "+1": 4, "-1": 2, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3406/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3405", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3405/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3405/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3405/events", "html_url": "https://github.com/ansible-community/molecule/issues/3405", "id": 1109594798, "node_id": "I_kwDOAsPDRs5CIxKu", "number": 3405, "title": "Code examples in documentation are not rendered", "user": {"login": "radek-sprta", "id": 8342657, "node_id": "MDQ6VXNlcjgzNDI2NTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8342657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/radek-sprta", "html_url": "https://github.com/radek-sprta", "followers_url": "https://api.github.com/users/radek-sprta/followers", "following_url": "https://api.github.com/users/radek-sprta/following{/other_user}", "gists_url": "https://api.github.com/users/radek-sprta/gists{/gist_id}", "starred_url": "https://api.github.com/users/radek-sprta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/radek-sprta/subscriptions", "organizations_url": "https://api.github.com/users/radek-sprta/orgs", "repos_url": "https://api.github.com/users/radek-sprta/repos", "events_url": "https://api.github.com/users/radek-sprta/events{/privacy}", "received_events_url": "https://api.github.com/users/radek-sprta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-01-20T17:48:30Z", "updated_at": "2022-03-31T13:34:20Z", "closed_at": "2022-03-31T13:34:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nDocumentation at https://molecule.readthedocs.io/en/latest/configuration.html is properly rendered.\r\n\r\n# Actual Behaviour\r\n\r\nThe code examples at https://molecule.readthedocs.io/en/latest/configuration.html (and other parts of documentation) are missing.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3405/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3404", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3404/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3404/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3404/events", "html_url": "https://github.com/ansible-community/molecule/issues/3404", "id": 1107428050, "node_id": "I_kwDOAsPDRs5CAgLS", "number": 3404, "title": "ANSIBLE_ROLES_PATH not set correctly?", "user": {"login": "sdarwin", "id": 1257803, "node_id": "MDQ6VXNlcjEyNTc4MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1257803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sdarwin", "html_url": "https://github.com/sdarwin", "followers_url": "https://api.github.com/users/sdarwin/followers", "following_url": "https://api.github.com/users/sdarwin/following{/other_user}", "gists_url": "https://api.github.com/users/sdarwin/gists{/gist_id}", "starred_url": "https://api.github.com/users/sdarwin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sdarwin/subscriptions", "organizations_url": "https://api.github.com/users/sdarwin/orgs", "repos_url": "https://api.github.com/users/sdarwin/repos", "events_url": "https://api.github.com/users/sdarwin/events{/privacy}", "received_events_url": "https://api.github.com/users/sdarwin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2022-01-18T22:32:40Z", "updated_at": "2022-06-01T10:07:49Z", "closed_at": "2022-06-01T10:07:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n5.1.0 and 3.5.1\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- pip\r\n\r\nHave tried both methods.\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n- pip\r\n- OS package\r\n\r\npip\r\n\r\n# Desired Behavior\r\n\r\nMolecule tests that have been passing, should continue to be passing.  When running in CI, if roles are installed, the ANSIBLE_ROLES_PATH points to the roles.\r\n\r\n# Actual Behaviour\r\n\r\nRunning molecule ansible tests in CircleCI.\r\n\r\nCertain tests that succeeded one month ago are failing now, even though nothing apparently changed.  It's not impossible, that this is being caused by _something else entirely_ such as Ansible itself or another package.   However at the moment it looks like molecule so your feedback would be helpful to point in the right direction.  \r\n\r\n----\r\n\r\nCase 1:\r\nhttps://app.circleci.com/pipelines/github/cloudalchemy/ansible-prometheus?branch=master&filter=all\r\n\r\nWhen molecule ran on Dec 27, 2021, it succeeded.  \r\nHere is a interesting snippet from the log output:\r\n\r\n```\r\nINFO     Added ANSIBLE_ROLES_PATH=/home/circleci/.cache/ansible-compat/dda4ac/roles:/home/circleci/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Using /home/circleci/.ansible/roles/cloudalchemy.prometheus symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\n```\r\n\r\nNotice that it's creating a symlink.\r\n\r\nNow,\r\n\r\n```\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/circleci/.cache/ansible-compat/dda4ac/roles:/home/circleci/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n```\r\n\r\nThe wording changed from \"Added\" to \"Set\".   So, something changed.  And it does not mention the symlink anymore.  Probably no symlink is being created. Because of that the test fails, during  \"molecule syntax\".  It can't find the role.\r\n\r\n----\r\n\r\nCase 2:\r\n\r\nThis repo used to succeed, about a month ago.\r\nhttps://app.circleci.com/pipelines/github/prometheus/demo-site/833/workflows/39439543-5173-4027-8be0-3d1817db7b7c/jobs/3397\r\n\r\nNow it's failing:\r\nhttps://app.circleci.com/pipelines/github/prometheus/demo-site/857/workflows/82accec5-9ae4-4c17-ba50-9c25d35b550e/jobs/3516\r\n\r\nWhen does it fail? During the tests, it gets to this step:\r\n\r\n```\r\nrun molecule --debug syntax\r\n```\r\n\r\nAgain, it can't find the roles.  Similar to Case 1.\r\n\r\nWhere are the roles being installed? It can be seen that ansible-galaxy installs roles in /home/circleci/project/roles/\r\n\r\n```\r\n- extracting cloudalchemy.prometheus to /home/circleci/project/roles/cloudalchemy.prometheus\r\n```\r\n\r\nIf we test with ansible 5.1 and molecule version 3.4.1, the tests succeed. Here is log output regarding ANSIBLE_ROLES_PATH\r\n\r\n```\r\nINFO     Added ANSIBLE_ROLES_PATH=~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:roles\r\nANSIBLE_ROLES_PATH: /home/circleci/.cache/molecule/project/default/roles:/home/circleci:/home/circleci/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:roles\r\nANSIBLE_ROLES_PATH=/home/circleci/.cache/molecule/project/default/roles:/home/circleci:/home/circleci/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:roles \r\n```\r\n\r\nNext, test with ansible 5.1 and molecule 3.5.1.  This fails. \r\n\r\nThe wording has changed from \"Added\" to \"Set\".   Why?  And, more importantly, the \"Set\" did not accomplish anything because it didn't set the path.  \r\n\r\nThe debug information (lines 3 and 4) shows something different from the \"Set\" (line 1).\r\n\r\n```\r\nINFO     Set ANSIBLE_ROLES_PATH=/home/circleci/.cache/ansible-compat/dda4ac/roles:roles:/home/circleci/project/roles\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_ROLES_PATH: '/home/circleci/.cache/molecule/project/default/roles:/home/circleci:/home/circleci/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:'\r\nANSIBLE_ROLES_PATH=/home/circleci/.cache/molecule/project/default/roles:/home/circleci:/home/circleci/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles: ANSIBLE_VAULT_PASSWORD=******* MOLECULE_DEBUG=True \r\n```\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3404/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3404/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3399", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3399/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3399/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3399/events", "html_url": "https://github.com/ansible-community/molecule/issues/3399", "id": 1105210501, "node_id": "I_kwDOAsPDRs5B4CyF", "number": 3399, "title": "molecule converge returns CRITICAL Ansible return code was -6", "user": {"login": "basictheprogram", "id": 6723257, "node_id": "MDQ6VXNlcjY3MjMyNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/6723257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/basictheprogram", "html_url": "https://github.com/basictheprogram", "followers_url": "https://api.github.com/users/basictheprogram/followers", "following_url": "https://api.github.com/users/basictheprogram/following{/other_user}", "gists_url": "https://api.github.com/users/basictheprogram/gists{/gist_id}", "starred_url": "https://api.github.com/users/basictheprogram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/basictheprogram/subscriptions", "organizations_url": "https://api.github.com/users/basictheprogram/orgs", "repos_url": "https://api.github.com/users/basictheprogram/repos", "events_url": "https://api.github.com/users/basictheprogram/events{/privacy}", "received_events_url": "https://api.github.com/users/basictheprogram/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-16T22:54:57Z", "updated_at": "2022-01-17T16:13:00Z", "closed_at": "2022-01-17T16:12:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\nansible 2.9.16.post0\r\n  config file = None\r\n  configured module search path = ['/Users/tanner/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/tanner/projects/py3-ansible/src/ansible/lib/ansible\r\n  executable location = /Users/tanner/projects/py3-ansible/src/ansible/bin/ansible\r\n  python version = 3.9.9 (main, Jan 16 2022, 21:46:42) [Clang 11.0.0 (clang-1100.0.33.17)]\r\nmolecule 3.5.3.dev75 using python 3.9\r\n    ansible:2.9.16.post0\r\n    delegated:3.5.3.dev75 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n\r\nDetail any linters or test runners used:\r\n -  yamllint \r\n - ansible-lint\r\n - docker\r\n\r\n# Desired Behavior\r\n`molecule converge` would not throw error code -6\r\n\r\n# Actual Behaviour\r\n$ molecule --debug converge\r\nDEBUG    Validating schema /Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, create, prepare, converge\r\nINFO     Performing prerun...\r\nINFO     Set ANSIBLE_LIBRARY=/Users/tanner/.cache/ansible-compat/3d8b8f/modules:/Users/tanner/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Set ANSIBLE_COLLECTIONS_PATHS=/Users/tanner/.cache/ansible-compat/3d8b8f/collections:/Users/tanner/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Set ANSIBLE_ROLES_PATH=/Users/tanner/.cache/ansible-compat/3d8b8f/roles:/Users/tanner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running default > prepare\r\nWARNING  Skipping, instances already prepared.\r\nINFO     Running default > converge\r\nINFO     Sanity checks: 'docker'\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATHS: /Users/tanner/.cache/molecule/procmail/default/collections:/Users/tanner/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /Users/tanner/.cache/molecule/procmail/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/tanner/projects/py3-ansible/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/tanner/.cache/molecule/procmail/default/plugins/filter:/Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/plugins/filter:/Users/tanner/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_HOME: /Users/tanner/projects/py3-ansible/src/ansible\r\nANSIBLE_LIBRARY: /Users/tanner/projects/py3-ansible/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/tanner/.cache/molecule/procmail/default/library:/Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/library:/Users/tanner/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: '/Users/tanner/.cache/molecule/procmail/default/roles:/Users/tanner/projects/py3-ansible/src/playbooks.git/roles:/Users/tanner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:'\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/tanner/.cache/molecule/procmail/default\r\nMOLECULE_FILE: /Users/tanner/.cache/molecule/procmail/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/tanner/.cache/molecule/procmail/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/tanner/.cache/molecule/procmail/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/tanner/.cache/molecule/procmail/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATHS=/Users/tanner/.cache/molecule/procmail/default/collections:/Users/tanner/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/Users/tanner/.cache/molecule/procmail/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/tanner/projects/py3-ansible/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/tanner/.cache/molecule/procmail/default/plugins/filter:/Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/plugins/filter:/Users/tanner/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_FORCE_COLOR=1 ANSIBLE_HOME=/Users/tanner/projects/py3-ansible/src/ansible ANSIBLE_LIBRARY=/Users/tanner/projects/py3-ansible/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/tanner/.cache/molecule/procmail/default/library:/Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/library:/Users/tanner/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/Users/tanner/.cache/molecule/procmail/default/roles:/Users/tanner/projects/py3-ansible/src/playbooks.git/roles:/Users/tanner/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles: MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/tanner/.cache/molecule/procmail/default MOLECULE_FILE=/Users/tanner/.cache/molecule/procmail/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/tanner/.cache/molecule/procmail/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/tanner/.cache/molecule/procmail/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/tanner/.cache/molecule/procmail/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/molecule/default/tests\r\n\r\nFatal Python error: _Py_CheckRecursiveCall: Cannot recover from stack overflow.\r\nPython runtime state: initialized\r\n\r\nCurrent thread 0x00000001089695c0 (most recent call first):\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/utils/collection_loader.py\", line 116 in _find_module\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/utils/collection_loader.py\", line 101 in find_module\r\n  File \"<frozen importlib._bootstrap>\", line 895 in _find_spec_legacy\r\n  File \"<frozen importlib._bootstrap>\", line 921 in _find_spec\r\n  File \"<frozen importlib._bootstrap>\", line 982 in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 1007 in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1030 in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 228 in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 972 in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 1007 in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1030 in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 228 in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 972 in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 1007 in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1030 in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 228 in _call_with_frames_removed\r\n  File \"<frozen importlib._bootstrap>\", line 972 in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 1007 in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1030 in _gcd_import\r\n  File \"/usr/local/Cellar/python@3.9/3.9.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/importlib/__init__.py\", line 127 in import_module\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/utils/collection_loader.py\", line 512 in get_collection_role_path\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/definition.py\", line 158 in _load_role_path\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/definition.py\", line 94 in preprocess_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/base.py\", line 222 in load_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/include.py\", line 60 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/helpers.py\", line 390 in load_list_of_roles\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/metadata.py\", line 105 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/base.py\", line 235 in load_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/metadata.py\", line 59 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 223 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 308 in _load_dependencies\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 224 in _load_role_data\r\n  File \"/Users/tanner/projects/py3-ansible/src/ansible/lib/ansible/playbook/role/__init__.py\", line 172 in load\r\n  ...\r\n/usr/local/Cellar/python@3.9/3.9.9/Frameworks/Python.framework/Versions/3.9/lib/python3.9/multiprocessing/resource_tracker.py:216: UserWarning: resource_tracker: There appear to be 27 leaked semaphore objects to clean up at shutdown\r\n  warnings.warn('resource_tracker: There appear to be %d '\r\nWARNING  Retrying execution failure -6 of: ansible-playbook --diff --inventory /Users/tanner/.cache/molecule/procmail/default/inventory --skip-tags molecule-notest,notest /Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/molecule/default/converge.yml\r\nCRITICAL Ansible return code was -6, command was: ['ansible-playbook', '--diff', '--inventory', '/Users/tanner/.cache/molecule/procmail/default/inventory', '--skip-tags', 'molecule-notest,notest', '/Users/tanner/projects/py3-ansible/src/playbooks.git/roles/procmail/molecule/default/converge.yml']", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3399/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3393", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3393/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3393/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3393/events", "html_url": "https://github.com/ansible-community/molecule/pull/3393", "id": 1099455904, "node_id": "PR_kwDOAsPDRs4w0Ehz", "number": 3393, "title": "Improve documentation of molecule init role", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-01-11T17:44:51Z", "updated_at": "2022-01-12T10:57:09Z", "closed_at": "2022-01-12T10:57:06Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3393", "html_url": "https://github.com/ansible-community/molecule/pull/3393", "diff_url": "https://github.com/ansible-community/molecule/pull/3393.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3393.patch", "merged_at": "2022-01-12T10:57:05Z"}, "body": "Current implementation knows to add the namespace from the command line to `meta/main.yml` but we had few places where we forgot to update the examples.\r\n\r\nFixes: #3381", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3393/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3393/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3385", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3385/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3385/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3385/events", "html_url": "https://github.com/ansible-community/molecule/pull/3385", "id": 1098040157, "node_id": "PR_kwDOAsPDRs4wvbsW", "number": 3385, "title": "Bump enrich to 1.2.7", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-10T15:33:01Z", "updated_at": "2022-01-10T16:04:28Z", "closed_at": "2022-01-10T16:04:26Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3385", "html_url": "https://github.com/ansible-community/molecule/pull/3385", "diff_url": "https://github.com/ansible-community/molecule/pull/3385.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3385.patch", "merged_at": "2022-01-10T16:04:26Z"}, "body": "This is fixing some mypy errors as newer version has improved typing.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3385/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3385/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3381", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3381/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3381/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3381/events", "html_url": "https://github.com/ansible-community/molecule/issues/3381", "id": 1096274468, "node_id": "I_kwDOAsPDRs5BV9Ik", "number": 3381, "title": "Getting Started Doc Throws Errors", "user": {"login": "justin-f-perez", "id": 7209967, "node_id": "MDQ6VXNlcjcyMDk5Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/7209967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/justin-f-perez", "html_url": "https://github.com/justin-f-perez", "followers_url": "https://api.github.com/users/justin-f-perez/followers", "following_url": "https://api.github.com/users/justin-f-perez/following{/other_user}", "gists_url": "https://api.github.com/users/justin-f-perez/gists{/gist_id}", "starred_url": "https://api.github.com/users/justin-f-perez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/justin-f-perez/subscriptions", "organizations_url": "https://api.github.com/users/justin-f-perez/orgs", "repos_url": "https://api.github.com/users/justin-f-perez/repos", "events_url": "https://api.github.com/users/justin-f-perez/events{/privacy}", "received_events_url": "https://api.github.com/users/justin-f-perez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-01-07T12:27:21Z", "updated_at": "2022-01-12T10:57:05Z", "closed_at": "2022-01-12T10:57:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n\u276f python3 --version && ansible --version && molecule --version\r\nPython 3.9.9\r\nansible [core 2.12.1]\r\n  config file = None\r\n  configured module search path = ['/Users/me/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/me/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/me/path/to/ansibroken/venv/bin/ansible\r\n  python version = 3.9.9 (main, Nov 21 2021, 03:16:13) [Clang 13.0.0 (clang-1300.0.29.3)]\r\n  jinja version = 3.0.3\r\n  libyaml = True\r\nmolecule 3.5.2 using python 3.9\r\n    ansible:2.12.1\r\n    delegated:3.5.2 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n\r\n- pip (as recommended by the getting started docs)\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip (as recommended by the getting started docs)\r\n\r\nDetail any linters or test runners used:\r\n\r\nWhatever the default is\r\n\r\n# Desired Behavior\r\n\r\nJust trying out molecule, having never used it before. The commands specified in the getting started docs aren't sufficient for someone who is- literally- just getting started. I expect onboarding documentation (especially for a testing package) to run without (unintentional) errors.\r\n\r\n\r\n# Actual Behaviour\r\n\r\nScript:\r\n```\r\n#!/bin/sh\r\nset -x\r\n\r\nmkdir ansibroken && cd ansibroken\r\n# create a venv with python >=3.6 https://molecule.readthedocs.io/en/latest/installation.html#requirements\r\n# python3.9 is supported https://github.com/ansible-community/molecule/blob/main/setup.cfg\r\npython3.9 -m venv ./venv && source ./venv/bin/activate\r\n# make sure setuptools is up to date https://molecule.readthedocs.io/en/latest/installation.html#pip\r\npython3 -m pip install --upgrade setuptools\r\n# install ansible, molecule with the docker driver https://molecule.readthedocs.io/en/latest/installation.html#install\r\npython3 -m pip install 'molecule[docker,lint]' 'ansible-core>=2.8'\r\n# do the things the newbie docs tell me to https://molecule.readthedocs.io/en/latest/getting-started.html#creating-a-new-role\r\nmolecule --debug init role my_new_role --driver-name docker\r\n# https://molecule.readthedocs.io/en/latest/getting-started.html#run-test-sequence-commands\r\ndocker run hello-world\r\nmolecule create # CRITICAL 'molecule/default/molecule.yml' glob failed.  Exiting.\r\ncd my_new_role  # that one's easy enough...\r\nmolecule create # ERROR Computed fully qualified role name of my_new_role does not follow current galaxy requirements.\r\n# add the debug flag that the issue template tells me to https://github.com/ansible-community/molecule/issues/new?assignees=&labels=bug&template=bug_report.md\r\nmolecule --debug create\r\nmolecule list\r\n```\r\n\r\n```bash\r\n+ mkdir ansibroken\r\n+ cd ansibroken\r\n+ python3.9 -m venv ./venv\r\n+ source ./venv/bin/activate\r\n++ deactivate nondestructive\r\n++ '[' -n '' ']'\r\n++ '[' -n '' ']'\r\n++ '[' -n /bin/sh -o -n '' ']'\r\n++ hash -r\r\n++ '[' -n '' ']'\r\n++ unset VIRTUAL_ENV\r\n++ '[' '!' nondestructive = nondestructive ']'\r\n++ VIRTUAL_ENV=/Users/me/path/to/ansibroken/venv\r\n++ export VIRTUAL_ENV\r\n++ _OLD_VIRTUAL_PATH=/opt/homebrew/Caskroom/miniconda/base/condabin:/Users/me/.cargo/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Users/me/dev/pdhands/bin:/Users/me/.local/bin:/opt/homebrew/opt/fzf/bin\r\n++ PATH=/Users/me/path/to/ansibroken/venv/bin:/opt/homebrew/Caskroom/miniconda/base/condabin:/Users/me/.cargo/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin:/Users/me/dev/pdhands/bin:/Users/me/.local/bin:/opt/homebrew/opt/fzf/bin\r\n++ export PATH\r\n++ '[' -n '' ']'\r\n++ '[' -z '' ']'\r\n++ _OLD_VIRTUAL_PS1=\r\n++ PS1='(venv) '\r\n++ export PS1\r\n++ '[' -n /bin/sh -o -n '' ']'\r\n++ hash -r\r\n+ python3 -m pip install --upgrade setuptools\r\nRequirement already satisfied: setuptools in ./venv/lib/python3.9/site-packages (59.0.1)\r\nCollecting setuptools\r\n  Using cached setuptools-60.3.1-py3-none-any.whl (953 kB)\r\nInstalling collected packages: setuptools\r\n  Attempting uninstall: setuptools\r\n    Found existing installation: setuptools 59.0.1\r\n    Uninstalling setuptools-59.0.1:\r\n      Successfully uninstalled setuptools-59.0.1\r\nSuccessfully installed setuptools-60.3.1\r\n+ python3 -m pip install 'molecule[docker,lint]' 'ansible-core>=2.8'\r\nCollecting molecule[docker,lint]\r\n  Using cached molecule-3.5.2-py3-none-any.whl (240 kB)\r\nCollecting ansible-core>=2.8\r\n  Using cached ansible-core-2.12.1.tar.gz (7.4 MB)\r\n  Preparing metadata (setup.py): started\r\n  Preparing metadata (setup.py): finished with status 'done'\r\nCollecting cerberus!=1.3.3,!=1.3.4,>=1.3.1\r\n  Using cached Cerberus-1.3.2.tar.gz (52 kB)\r\n  Preparing metadata (setup.py): started\r\n  Preparing metadata (setup.py): finished with status 'done'\r\nCollecting click-help-colors>=0.9\r\n  Using cached click_help_colors-0.9.1-py3-none-any.whl (5.5 kB)\r\nCollecting cookiecutter>=1.7.3\r\n  Using cached cookiecutter-1.7.3-py2.py3-none-any.whl (34 kB)\r\nCollecting enrich>=1.2.5\r\n  Using cached enrich-1.2.6-py3-none-any.whl (8.6 kB)\r\nCollecting paramiko<3,>=2.5.0\r\n  Using cached paramiko-2.9.1-py2.py3-none-any.whl (210 kB)\r\nCollecting PyYAML<6,>=5.1\r\n  Using cached PyYAML-5.4.1-cp39-cp39-macosx_11_0_arm64.whl\r\nCollecting subprocess-tee>=0.3.5\r\n  Using cached subprocess_tee-0.3.5-py3-none-any.whl (8.0 kB)\r\nCollecting Jinja2>=2.11.3\r\n  Using cached Jinja2-3.0.3-py3-none-any.whl (133 kB)\r\nCollecting rich>=9.5.1\r\n  Using cached rich-10.16.2-py3-none-any.whl (214 kB)\r\nCollecting packaging\r\n  Using cached packaging-21.3-py3-none-any.whl (40 kB)\r\nCollecting pluggy<2.0,>=0.7.1\r\n  Using cached pluggy-1.0.0-py2.py3-none-any.whl (13 kB)\r\nCollecting click<9,>=8.0\r\n  Using cached click-8.0.3-py3-none-any.whl (97 kB)\r\nCollecting ansible-compat>=0.5.0\r\n  Using cached ansible_compat-0.5.0-py3-none-any.whl (15 kB)\r\nCollecting molecule-docker>=1.0.0\r\n  Using cached molecule_docker-1.1.0-py3-none-any.whl (16 kB)\r\nCollecting pre-commit>=2.10.1\r\n  Using cached pre_commit-2.16.0-py2.py3-none-any.whl (191 kB)\r\nCollecting flake8>=3.8.4\r\n  Using cached flake8-4.0.1-py2.py3-none-any.whl (64 kB)\r\nCollecting yamllint\r\n  Using cached yamllint-1.26.3.tar.gz (126 kB)\r\n  Preparing metadata (setup.py): started\r\n  Preparing metadata (setup.py): finished with status 'done'\r\nCollecting cryptography\r\n  Using cached cryptography-36.0.1-cp36-abi3-macosx_10_10_universal2.whl (4.8 MB)\r\nCollecting resolvelib<0.6.0,>=0.5.3\r\n  Using cached resolvelib-0.5.4-py2.py3-none-any.whl (12 kB)\r\nRequirement already satisfied: setuptools in ./venv/lib/python3.9/site-packages (from cerberus!=1.3.3,!=1.3.4,>=1.3.1->molecule[docker,lint]) (60.3.1)\r\nCollecting binaryornot>=0.4.4\r\n  Using cached binaryornot-0.4.4-py2.py3-none-any.whl (9.0 kB)\r\nCollecting python-slugify>=4.0.0\r\n  Using cached python_slugify-5.0.2-py2.py3-none-any.whl (6.7 kB)\r\nCollecting six>=1.10\r\n  Using cached six-1.16.0-py2.py3-none-any.whl (11 kB)\r\nCollecting requests>=2.23.0\r\n  Using cached requests-2.27.1-py2.py3-none-any.whl (63 kB)\r\nCollecting jinja2-time>=0.2.0\r\n  Using cached jinja2_time-0.2.0-py2.py3-none-any.whl (6.4 kB)\r\nCollecting poyo>=0.5.0\r\n  Using cached poyo-0.5.0-py2.py3-none-any.whl (10 kB)\r\nCollecting pycodestyle<2.9.0,>=2.8.0\r\n  Using cached pycodestyle-2.8.0-py2.py3-none-any.whl (42 kB)\r\nCollecting pyflakes<2.5.0,>=2.4.0\r\n  Using cached pyflakes-2.4.0-py2.py3-none-any.whl (69 kB)\r\nCollecting mccabe<0.7.0,>=0.6.0\r\n  Using cached mccabe-0.6.1-py2.py3-none-any.whl (8.6 kB)\r\nCollecting MarkupSafe>=2.0\r\n  Using cached MarkupSafe-2.0.1-cp39-cp39-macosx_10_9_universal2.whl (18 kB)\r\nCollecting docker>=4.3.1\r\n  Using cached docker-5.0.3-py2.py3-none-any.whl (146 kB)\r\nCollecting bcrypt>=3.1.3\r\n  Using cached bcrypt-3.2.0-cp36-abi3-macosx_10_10_universal2.whl (49 kB)\r\nCollecting pynacl>=1.0.1\r\n  Using cached PyNaCl-1.4.0-cp39-cp39-macosx_11_0_arm64.whl\r\nCollecting cffi>=1.12\r\n  Using cached cffi-1.15.0-cp39-cp39-macosx_11_0_arm64.whl (173 kB)\r\nCollecting virtualenv>=20.0.8\r\n  Using cached virtualenv-20.13.0-py2.py3-none-any.whl (6.5 MB)\r\nCollecting identify>=1.0.0\r\n  Using cached identify-2.4.2-py2.py3-none-any.whl (98 kB)\r\nCollecting cfgv>=2.0.0\r\n  Using cached cfgv-3.3.1-py2.py3-none-any.whl (7.3 kB)\r\nCollecting toml\r\n  Using cached toml-0.10.2-py2.py3-none-any.whl (16 kB)\r\nCollecting nodeenv>=0.11.1\r\n  Using cached nodeenv-1.6.0-py2.py3-none-any.whl (21 kB)\r\nCollecting commonmark<0.10.0,>=0.9.0\r\n  Using cached commonmark-0.9.1-py2.py3-none-any.whl (51 kB)\r\nCollecting pygments<3.0.0,>=2.6.0\r\n  Using cached Pygments-2.11.2-py3-none-any.whl (1.1 MB)\r\nCollecting colorama<0.5.0,>=0.4.0\r\n  Using cached colorama-0.4.4-py2.py3-none-any.whl (16 kB)\r\nCollecting pyparsing!=3.0.5,>=2.0.2\r\n  Using cached pyparsing-3.0.6-py3-none-any.whl (97 kB)\r\nCollecting pathspec>=0.5.3\r\n  Using cached pathspec-0.9.0-py2.py3-none-any.whl (31 kB)\r\nCollecting chardet>=3.0.2\r\n  Using cached chardet-4.0.0-py2.py3-none-any.whl (178 kB)\r\nCollecting pycparser\r\n  Using cached pycparser-2.21-py2.py3-none-any.whl (118 kB)\r\nCollecting websocket-client>=0.32.0\r\n  Using cached websocket_client-1.2.3-py3-none-any.whl (53 kB)\r\nCollecting arrow\r\n  Using cached arrow-1.2.1-py3-none-any.whl (63 kB)\r\nCollecting text-unidecode>=1.3\r\n  Using cached text_unidecode-1.3-py2.py3-none-any.whl (78 kB)\r\nCollecting certifi>=2017.4.17\r\n  Using cached certifi-2021.10.8-py2.py3-none-any.whl (149 kB)\r\nCollecting urllib3<1.27,>=1.21.1\r\n  Using cached urllib3-1.26.7-py2.py3-none-any.whl (138 kB)\r\nCollecting idna<4,>=2.5\r\n  Using cached idna-3.3-py3-none-any.whl (61 kB)\r\nCollecting charset-normalizer~=2.0.0\r\n  Using cached charset_normalizer-2.0.10-py3-none-any.whl (39 kB)\r\nCollecting platformdirs<3,>=2\r\n  Using cached platformdirs-2.4.1-py3-none-any.whl (14 kB)\r\nCollecting distlib<1,>=0.3.1\r\n  Using cached distlib-0.3.4-py2.py3-none-any.whl (461 kB)\r\nCollecting filelock<4,>=3.2\r\n  Using cached filelock-3.4.2-py3-none-any.whl (9.9 kB)\r\nCollecting python-dateutil>=2.7.0\r\n  Using cached python_dateutil-2.8.2-py2.py3-none-any.whl (247 kB)\r\nUsing legacy 'setup.py install' for ansible-core, since package 'wheel' is not installed.\r\nUsing legacy 'setup.py install' for cerberus, since package 'wheel' is not installed.\r\nUsing legacy 'setup.py install' for yamllint, since package 'wheel' is not installed.\r\nInstalling collected packages: six, python-dateutil, pycparser, MarkupSafe, urllib3, text-unidecode, pygments, Jinja2, idna, commonmark, colorama, charset-normalizer, chardet, cffi, certifi, arrow, rich, requests, PyYAML, python-slugify, pyparsing, pynacl, poyo, jinja2-time, cryptography, click, binaryornot, bcrypt, websocket-client, subprocess-tee, pluggy, platformdirs, paramiko, packaging, filelock, enrich, distlib, cookiecutter, click-help-colors, cerberus, ansible-compat, virtualenv, toml, pyflakes, pycodestyle, pathspec, nodeenv, molecule, mccabe, identify, docker, cfgv, yamllint, resolvelib, pre-commit, molecule-docker, flake8, ansible-core\r\n    Running setup.py install for cerberus: started\r\n    Running setup.py install for cerberus: finished with status 'done'\r\n    Running setup.py install for yamllint: started\r\n    Running setup.py install for yamllint: finished with status 'done'\r\n    Running setup.py install for ansible-core: started\r\n    Running setup.py install for ansible-core: finished with status 'done'\r\nSuccessfully installed Jinja2-3.0.3 MarkupSafe-2.0.1 PyYAML-5.4.1 ansible-compat-0.5.0 ansible-core-2.12.1 arrow-1.2.1 bcrypt-3.2.0 binaryornot-0.4.4 cerberus-1.3.2 certifi-2021.10.8 cffi-1.15.0 cfgv-3.3.1 chardet-4.0.0 charset-normalizer-2.0.10 click-8.0.3 click-help-colors-0.9.1 colorama-0.4.4 commonmark-0.9.1 cookiecutter-1.7.3 cryptography-36.0.1 distlib-0.3.4 docker-5.0.3 enrich-1.2.6 filelock-3.4.2 flake8-4.0.1 identify-2.4.2 idna-3.3 jinja2-time-0.2.0 mccabe-0.6.1 molecule-3.5.2 molecule-docker-1.1.0 nodeenv-1.6.0 packaging-21.3 paramiko-2.9.1 pathspec-0.9.0 platformdirs-2.4.1 pluggy-1.0.0 poyo-0.5.0 pre-commit-2.16.0 pycodestyle-2.8.0 pycparser-2.21 pyflakes-2.4.0 pygments-2.11.2 pynacl-1.4.0 pyparsing-3.0.6 python-dateutil-2.8.2 python-slugify-5.0.2 requests-2.27.1 resolvelib-0.5.4 rich-10.16.2 six-1.16.0 subprocess-tee-0.3.5 text-unidecode-1.3 toml-0.10.2 urllib3-1.26.7 virtualenv-20.13.0 websocket-client-1.2.3 yamllint-1.26.3\r\n+ molecule --debug init role my_new_role --driver-name docker\r\n\u001b[34mINFO    \u001b[0m Initializing new role my_new_role\u001b[33m...\u001b[0m\r\n\u001b[34mNo config file found; using defaults\u001b[0m\r\n- Role my_new_role was created successfully\r\n\u001b[34mINFO    \u001b[0m Initialized role in \u001b[35m/Users/me/path/to/ansibroken/\u001b[0m\u001b[95mmy_new_role\u001b[0m successfully.\r\n+ docker run hello-world\r\n\r\nHello from Docker!\r\nThis message shows that your installation appears to be working correctly.\r\n\r\nTo generate this message, Docker took the following steps:\r\n 1. The Docker client contacted the Docker daemon.\r\n 2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub.\r\n    (arm64v8)\r\n 3. The Docker daemon created a new container from that image which runs the\r\n    executable that produces the output you are currently reading.\r\n 4. The Docker daemon streamed that output to the Docker client, which sent it\r\n    to your terminal.\r\n\r\nTo try something more ambitious, you can run an Ubuntu container with:\r\n $ docker run -it ubuntu bash\r\n\r\nShare images, automate workflows, and more with a free Docker ID:\r\n https://hub.docker.com/\r\n\r\nFor more examples and ideas, visit:\r\n https://docs.docker.com/get-started/\r\n\r\n+ molecule create\r\n\u001b[1;31mCRITICAL\u001b[0m \u001b[32m'molecule/default/molecule.yml'\u001b[0m glob failed.  Exiting.\r\n+ cd my_new_role\r\n+ molecule create\r\n\u001b[34mINFO    \u001b[0m default scenario test matrix: dependency, create, prepare\r\n\u001b[34mINFO    \u001b[0m Performing prerun\u001b[33m...\u001b[0m\r\n\u001b[34mINFO    \u001b[0m Added \u001b[33mANSIBLE_LIBRARY\u001b[0m=\u001b[35m/Users/me/.cache/ansible-compat/c52416/\u001b[0m\u001b[95mmodules\u001b[0m:\u001b[35m/Users/me/.ansible/plugins/\u001b[0m\u001b[95mmodules\u001b[0m:\u001b[35m/usr/share/ansible/plugins/\u001b[0m\u001b[95mmodules\u001b[0m\r\n\u001b[34mINFO    \u001b[0m Added \u001b[33mANSIBLE_COLLECTIONS_PATH\u001b[0m=\u001b[35m/Users/me/.cache/ansible-compat/c52416/\u001b[0m\u001b[95mcollections\u001b[0m:\u001b[35m/Users/me/.ansible/\u001b[0m\u001b[95mcollections\u001b[0m:\u001b[35m/usr/share/ansible/\u001b[0m\u001b[95mcollections\u001b[0m\r\n\u001b[34mINFO    \u001b[0m Added \u001b[33mANSIBLE_ROLES_PATH\u001b[0m=\u001b[35m/Users/me/.cache/ansible-compat/c52416/\u001b[0m\u001b[95mroles\u001b[0m:\u001b[35m/Users/me/.ansible/\u001b[0m\u001b[95mroles\u001b[0m:\u001b[35m/usr/share/ansible/\u001b[0m\u001b[95mroles\u001b[0m:\u001b[35m/etc/ansible/\u001b[0m\u001b[95mroles\u001b[0m\r\n\u001b[1;31mERROR   \u001b[0m Computed fully qualified role name of my_new_role does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: \u001b[4;94mhttps://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\u001b[0m\r\nRole: \u001b[4;94mhttps://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\u001b[0m\r\n\r\nAs an alternative, you can add \u001b[32m'role-name'\u001b[0m to either skip_list or warn_list.\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/me/path/to/ansibroken/venv/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/molecule/command/create.py\", line 121, in create\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/molecule/command/base.py\", line 111, in execute_cmdline_scenarios\r\n    scenario.config.runtime.prepare_environment()\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/ansible_compat/runtime.py\", line 255, in prepare_environment\r\n    self._install_galaxy_role(self.project_dir, ignore_errors=True)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/ansible_compat/runtime.py\", line 396, in _install_galaxy_role\r\n    raise InvalidPrerequisiteError(msg)\r\nansible_compat.errors.InvalidPrerequisiteError: Computed fully qualified role name of my_new_role does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n\r\n+ molecule --debug create\r\n\u001b[2;37mDEBUG   \u001b[0m Validating schema \u001b[35m/Users/me/path/to/ansibroken/my_new_role/molecule/default/\u001b[0m\u001b[95mmolecule.yml.\u001b[0m\r\n\u001b[34mINFO    \u001b[0m default scenario test matrix: dependency, create, prepare\r\n\u001b[34mINFO    \u001b[0m Performing prerun\u001b[33m...\u001b[0m\r\n\u001b[34mINFO    \u001b[0m Added \u001b[33mANSIBLE_LIBRARY\u001b[0m=\u001b[35m/Users/me/.cache/ansible-compat/c52416/\u001b[0m\u001b[95mmodules\u001b[0m:\u001b[35m/Users/me/.ansible/plugins/\u001b[0m\u001b[95mmodules\u001b[0m:\u001b[35m/usr/share/ansible/plugins/\u001b[0m\u001b[95mmodules\u001b[0m\r\n\u001b[34mINFO    \u001b[0m Added \u001b[33mANSIBLE_COLLECTIONS_PATH\u001b[0m=\u001b[35m/Users/me/.cache/ansible-compat/c52416/\u001b[0m\u001b[95mcollections\u001b[0m:\u001b[35m/Users/me/.ansible/\u001b[0m\u001b[95mcollections\u001b[0m:\u001b[35m/usr/share/ansible/\u001b[0m\u001b[95mcollections\u001b[0m\r\n\u001b[34mINFO    \u001b[0m Added \u001b[33mANSIBLE_ROLES_PATH\u001b[0m=\u001b[35m/Users/me/.cache/ansible-compat/c52416/\u001b[0m\u001b[95mroles\u001b[0m:\u001b[35m/Users/me/.ansible/\u001b[0m\u001b[95mroles\u001b[0m:\u001b[35m/usr/share/ansible/\u001b[0m\u001b[95mroles\u001b[0m:\u001b[35m/etc/ansible/\u001b[0m\u001b[95mroles\u001b[0m\r\n\u001b[1;31mERROR   \u001b[0m Computed fully qualified role name of my_new_role does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: \u001b[4;94mhttps://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\u001b[0m\r\nRole: \u001b[4;94mhttps://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\u001b[0m\r\n\r\nAs an alternative, you can add \u001b[32m'role-name'\u001b[0m to either skip_list or warn_list.\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/me/path/to/ansibroken/venv/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/molecule/command/create.py\", line 121, in create\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/molecule/command/base.py\", line 111, in execute_cmdline_scenarios\r\n    scenario.config.runtime.prepare_environment()\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/ansible_compat/runtime.py\", line 255, in prepare_environment\r\n    self._install_galaxy_role(self.project_dir, ignore_errors=True)\r\n  File \"/Users/me/path/to/ansibroken/venv/lib/python3.9/site-packages/ansible_compat/runtime.py\", line 396, in _install_galaxy_role\r\n    raise InvalidPrerequisiteError(msg)\r\nansible_compat.errors.InvalidPrerequisiteError: Computed fully qualified role name of my_new_role does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n\r\n+ molecule list\r\n\u001b[34mINFO    \u001b[0m \u001b[2;36mRunning \u001b[0m\u001b[2;32mdefault\u001b[0m\u001b[2;36m > \u001b[0m\u001b[2;32mlist\u001b[0m\r\n                \u2577             \u2577                  \u2577               \u2577         \u2577            \r\n \u001b[1m \u001b[0m\u001b[1mInstance Name\u001b[0m\u001b[1m \u001b[0m\u2502\u001b[1m \u001b[0m\u001b[1mDriver Name\u001b[0m\u001b[1m \u001b[0m\u2502\u001b[1m \u001b[0m\u001b[1mProvisioner Name\u001b[0m\u001b[1m \u001b[0m\u2502\u001b[1m \u001b[0m\u001b[1mScenario Name\u001b[0m\u001b[1m \u001b[0m\u2502\u001b[1m \u001b[0m\u001b[1mCreated\u001b[0m\u001b[1m \u001b[0m\u2502\u001b[1m \u001b[0m\u001b[1mConverged\u001b[0m\u001b[1m \u001b[0m \r\n\u2576\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574\r\n  instance      \u2502 docker      \u2502 ansible          \u2502 default       \u2502 false   \u2502 false      \r\n                \u2575             \u2575                  \u2575               \u2575         \u2575            \r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3381/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3381/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3360", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3360/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3360/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3360/events", "html_url": "https://github.com/ansible-community/molecule/pull/3360", "id": 1093603110, "node_id": "PR_kwDOAsPDRs4whclp", "number": 3360, "title": "Bump ansible-compat", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-04T17:31:46Z", "updated_at": "2022-01-11T17:13:45Z", "closed_at": "2022-01-11T17:10:48Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": true, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3360", "html_url": "https://github.com/ansible-community/molecule/pull/3360", "diff_url": "https://github.com/ansible-community/molecule/pull/3360.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3360.patch", "merged_at": null}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3360/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3359", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3359/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3359/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3359/events", "html_url": "https://github.com/ansible-community/molecule/pull/3359", "id": 1093577853, "node_id": "PR_kwDOAsPDRs4whXTC", "number": 3359, "title": "Fix write_file to use a single operation", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-04T17:01:11Z", "updated_at": "2022-01-04T17:11:08Z", "closed_at": "2022-01-04T17:11:06Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3359", "html_url": "https://github.com/ansible-community/molecule/pull/3359", "diff_url": "https://github.com/ansible-community/molecule/pull/3359.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3359.patch", "merged_at": "2022-01-04T17:11:06Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3359/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3359/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3357", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3357/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3357/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3357/events", "html_url": "https://github.com/ansible-community/molecule/pull/3357", "id": 1093461579, "node_id": "PR_kwDOAsPDRs4wg-Gf", "number": 3357, "title": "Avoid os.makedirs errors with existing folders", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-04T15:23:03Z", "updated_at": "2022-01-04T15:59:36Z", "closed_at": "2022-01-04T15:59:34Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3357", "html_url": "https://github.com/ansible-community/molecule/pull/3357", "diff_url": "https://github.com/ansible-community/molecule/pull/3357.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3357.patch", "merged_at": "2022-01-04T15:59:34Z"}, "body": "Fixes problems observed on CI, likely related to confurrency.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3357/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3357/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3354", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3354/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3354/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3354/events", "html_url": "https://github.com/ansible-community/molecule/pull/3354", "id": 1093289816, "node_id": "PR_kwDOAsPDRs4wgaj9", "number": 3354, "title": "Prevent random exception with os.remove", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-04T12:06:20Z", "updated_at": "2022-01-04T13:37:23Z", "closed_at": "2022-01-04T13:37:21Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3354", "html_url": "https://github.com/ansible-community/molecule/pull/3354", "diff_url": "https://github.com/ansible-community/molecule/pull/3354.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3354.patch", "merged_at": "2022-01-04T13:37:21Z"}, "body": "Fixes random bug related to file removals.\r\n\r\nSee https://github.com/ansible-community/molecule/runs/4701584350?check_suite_focus=true#step:7:654", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3354/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3354/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3336", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3336/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3336/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3336/events", "html_url": "https://github.com/ansible-community/molecule/issues/3336", "id": 1082029585, "node_id": "I_kwDOAsPDRs5AfnYR", "number": 3336, "title": "ansible lint requiring galaxy namespace when run by molecule", "user": {"login": "PhilippSelenium", "id": 31542906, "node_id": "MDQ6VXNlcjMxNTQyOTA2", "avatar_url": "https://avatars.githubusercontent.com/u/31542906?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PhilippSelenium", "html_url": "https://github.com/PhilippSelenium", "followers_url": "https://api.github.com/users/PhilippSelenium/followers", "following_url": "https://api.github.com/users/PhilippSelenium/following{/other_user}", "gists_url": "https://api.github.com/users/PhilippSelenium/gists{/gist_id}", "starred_url": "https://api.github.com/users/PhilippSelenium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PhilippSelenium/subscriptions", "organizations_url": "https://api.github.com/users/PhilippSelenium/orgs", "repos_url": "https://api.github.com/users/PhilippSelenium/repos", "events_url": "https://api.github.com/users/PhilippSelenium/events{/privacy}", "received_events_url": "https://api.github.com/users/PhilippSelenium/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-12-16T10:36:37Z", "updated_at": "2022-10-17T13:30:06Z", "closed_at": "2021-12-22T19:24:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.12.1]\r\n  config file = None\r\n  python version = 3.8.10 (default, Nov 26 2021, 20:14:08) [GCC 9.3.0]\r\n  jinja version = 3.0.1\r\n  libyaml = False\r\nmolecule 3.5.2 using python 3.8 \r\n    ansible:2.12.1\r\n    delegated:3.5.2 from molecule\r\n    docker:1.0.2 from molecule_docker requiring collections: community.docker>=1.8.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nNo errors when running `molecule lint`\r\n\r\n# Actual Behaviour\r\n\r\nrunning `molecule lint` throws:\r\n```\r\nDEBUG    Validating schema testrole/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, lint\r\nINFO     Performing prerun...\r\nINFO     Added ANSIBLE_LIBRARY=.cache/ansible-compat/c40683/modules:.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Added ANSIBLE_COLLECTIONS_PATH=.cache/ansible-compat/c40683/collections:.ansible/collections:/usr/share/ansible/collections\r\nINFO     Added ANSIBLE_ROLES_PATH=.cache/ansible-compat/c40683/roles:.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nERROR    Computed fully qualified role name of testrole does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n\r\nTraceback (most recent call last):\r\n  File \"bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"lib/python3.8/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"lib/python3.8/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"lib/python3.8/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/lib/python3.8/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"lib/python3.8/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"lib/python3.8/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"lib/python3.8/site-packages/molecule/command/lint.py\", line 120, in lint\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"lib/python3.8/site-packages/molecule/command/base.py\", line 111, in execute_cmdline_scenarios\r\n    scenario.config.runtime.prepare_environment()\r\n  File \"lib/python3.8/site-packages/ansible_compat/runtime.py\", line 255, in prepare_environment\r\n    self._install_galaxy_role(self.project_dir, ignore_errors=True)\r\n  File \"lib/python3.8/site-packages/ansible_compat/runtime.py\", line 396, in _install_galaxy_role\r\n    raise InvalidPrerequisiteError(msg)\r\nansible_compat.errors.InvalidPrerequisiteError: Computed fully qualified role name of testrole does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n\r\n```\r\nBut `ansible-lint .` runs without error\r\n\r\nAdding a namespace to testrole/meta/main.yml 'fixes' the `molecule lint` command\r\n\r\n# Steps to reproduce\r\n\r\nCreate empty role\r\n```\r\nmolecule init role testrole --driver-name docker\r\n```\r\n\r\ncontent of testrole/.ansible-lint\r\n```\r\nskip_list:\r\n  - meta-incorrect\r\n  - meta-no-info\r\n  - role-name\r\n```\r\n\r\ncontent of testrole/meta/main.yml\r\n```\r\ngalaxy_info:\r\n  #namespace: foo\r\n  description: your role description\r\n```\r\n\r\ncontent of testrole/molecule/default/molecule.yml (same as default but added linter section)\r\n```\r\ndependency:\r\n  name: galaxy\r\nlint: |\r\n  ansible-lint .\r\ndriver:\r\n  name: docker\r\nplatforms:\r\n  - name: instance\r\n    image: docker.io/pycontribs/centos:8\r\n    pre_build_image: true\r\nprovisioner:\r\n  name: ansible\r\nverifier:\r\n  name: ansible\r\n```\r\n\r\nExecute\r\n```\r\ncd testrole\r\nmolecule lint  # --> error\r\nansible-lint .  # --> works\r\n```\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3336/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3336/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3335", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3335/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3335/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3335/events", "html_url": "https://github.com/ansible-community/molecule/issues/3335", "id": 1079949516, "node_id": "I_kwDOAsPDRs5AXrjM", "number": 3335, "title": "molecule for testing an ansible checkpoint role", "user": {"login": "johnqa", "id": 4747139, "node_id": "MDQ6VXNlcjQ3NDcxMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/4747139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johnqa", "html_url": "https://github.com/johnqa", "followers_url": "https://api.github.com/users/johnqa/followers", "following_url": "https://api.github.com/users/johnqa/following{/other_user}", "gists_url": "https://api.github.com/users/johnqa/gists{/gist_id}", "starred_url": "https://api.github.com/users/johnqa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johnqa/subscriptions", "organizations_url": "https://api.github.com/users/johnqa/orgs", "repos_url": "https://api.github.com/users/johnqa/repos", "events_url": "https://api.github.com/users/johnqa/events{/privacy}", "received_events_url": "https://api.github.com/users/johnqa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-14T16:14:15Z", "updated_at": "2022-01-11T17:57:13Z", "closed_at": "2022-01-11T17:57:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "- Bug report\r\n\r\n# Molecule and Ansible details\r\n```\r\nansible --version && molecule --version\r\n\r\nansible [core 2.11.6]\r\n  config file = None\r\n  configured module search path = ['/home/lichi_ad/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/lichi_ad/myansible/lib64/python3.8/site-packages/ansible\r\n  ansible collection location = /home/lichi_ad/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/lichi_ad/myansible/bin/ansible\r\n  python version = 3.8.3 (default, Aug 18 2020, 08:56:04) [GCC 8.3.1 20191121 (Red Hat 8.3.1-5)]\r\n  jinja version = 3.0.3\r\n  libyaml = True\r\nmolecule 3.5.2 using python 3.8\r\n  ansible:2.11.6\r\n  delegated:3.5.2 from molecule\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\n# Desired Behavior\r\nWe are developing a relatively simple role using the ansible checkpoint module that should be able to add/remove VMs to/from Firewall groups in Checkpoint.\r\n\r\nThis role needs some variables in order to work and the driver in molecule was generated as **delegated**\r\n\r\nI have initialised for this existing role a molecule scenario and I am trying to make it work for the role.\r\nThe Verify part works and I would like that Converge also work.\r\n\r\nconverge.yml file has the content:\r\n```\r\n- name: Converge\r\n  hosts: dev\r\n  roles:\r\n  - checkPointFW\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nif I run \r\n```\r\nmolecule --debug converge -- -vvvv  -e \"var1=xxx vm=yyy fwgroup=zzz vmip=xx.yy.zz.ww\" -i hosts\r\n```\r\nnothing is executed by the role.\r\n\r\nIf I run the command that I can see in molecule converge logs, it works:\r\n```\r\nansible-playbook --diff --inventory /home/uuuu/.cache/molecule/checkPointFW/default/inventory --skip-tags molecule-notest,notest -vvvv -e  'var1=xxx vm=yyy fwgroup=zzz vmip=xx.yy.zz.ww' -i hosts /home/uuuu/checkPointFW/molecule/default/converge.yml\r\n```\r\n\r\nIs it even possible to use molecule for such role that do not provision anyhting on VMs?\r\n\r\nThank you,\r\nJohn", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3335/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3334", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3334/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3334/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3334/events", "html_url": "https://github.com/ansible-community/molecule/pull/3334", "id": 1078650939, "node_id": "PR_kwDOAsPDRs4vxAIA", "number": 3334, "title": "Clarify per-project config.yml file", "user": {"login": "francoisfreitag", "id": 2758243, "node_id": "MDQ6VXNlcjI3NTgyNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/2758243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/francoisfreitag", "html_url": "https://github.com/francoisfreitag", "followers_url": "https://api.github.com/users/francoisfreitag/followers", "following_url": "https://api.github.com/users/francoisfreitag/following{/other_user}", "gists_url": "https://api.github.com/users/francoisfreitag/gists{/gist_id}", "starred_url": "https://api.github.com/users/francoisfreitag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/francoisfreitag/subscriptions", "organizations_url": "https://api.github.com/users/francoisfreitag/orgs", "repos_url": "https://api.github.com/users/francoisfreitag/repos", "events_url": "https://api.github.com/users/francoisfreitag/events{/privacy}", "received_events_url": "https://api.github.com/users/francoisfreitag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-13T15:13:57Z", "updated_at": "2021-12-16T20:38:27Z", "closed_at": "2021-12-16T20:38:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3334", "html_url": "https://github.com/ansible-community/molecule/pull/3334", "diff_url": "https://github.com/ansible-community/molecule/pull/3334.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3334.patch", "merged_at": "2021-12-16T20:38:27Z"}, "body": "This configuration option is very useful, as roles in a project often\r\nshare the same set of rules. The previous wording could be interpreted\r\nas if the configuration file must live in the user home directory.\r\n\r\n#### PR Type\r\n\r\n- Docs Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3334/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3334/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3333", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3333/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3333/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3333/events", "html_url": "https://github.com/ansible-community/molecule/pull/3333", "id": 1076847258, "node_id": "PR_kwDOAsPDRs4vrcaE", "number": 3333, "title": "fix docstring for Schema v3 Validation Module", "user": {"login": "ziegenberg", "id": 856916, "node_id": "MDQ6VXNlcjg1NjkxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/856916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziegenberg", "html_url": "https://github.com/ziegenberg", "followers_url": "https://api.github.com/users/ziegenberg/followers", "following_url": "https://api.github.com/users/ziegenberg/following{/other_user}", "gists_url": "https://api.github.com/users/ziegenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziegenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziegenberg/subscriptions", "organizations_url": "https://api.github.com/users/ziegenberg/orgs", "repos_url": "https://api.github.com/users/ziegenberg/repos", "events_url": "https://api.github.com/users/ziegenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/ziegenberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-10T13:25:23Z", "updated_at": "2021-12-16T16:31:29Z", "closed_at": "2021-12-13T15:42:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3333", "html_url": "https://github.com/ansible-community/molecule/pull/3333", "diff_url": "https://github.com/ansible-community/molecule/pull/3333.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3333.patch", "merged_at": "2021-12-13T15:42:56Z"}, "body": "This is a rather small fix. The doc string should probably say \"v3\" as the files called `schema_v3.py`\r\n\r\n#### PR Type\r\n\r\n- Docs Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3333/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3333/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3329", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3329/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3329/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3329/events", "html_url": "https://github.com/ansible-community/molecule/pull/3329", "id": 1071102448, "node_id": "PR_kwDOAsPDRs4vYwQ-", "number": 3329, "title": "Fix GHA check-gate to properly identify failures", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}, {"id": 1618323913, "node_id": "MDU6TGFiZWwxNjE4MzIzOTEz", "url": "https://api.github.com/repos/ansible-community/molecule/labels/skip-changelog", "name": "skip-changelog", "color": "eeeeee", "default": false, "description": ""}, {"id": 3408854196, "node_id": "LA_kwDOAsPDRs7LLvy0", "url": "https://api.github.com/repos/ansible-community/molecule/labels/backport-3.4", "name": "backport-3.4", "color": "1F4D95", "default": false, "description": "Trigger backporting of this PR to v3.4"}, {"id": 3416733358, "node_id": "LA_kwDOAsPDRs7Lpzau", "url": "https://api.github.com/repos/ansible-community/molecule/labels/new", "name": "new", "color": "0052CC", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-12-04T02:48:59Z", "updated_at": "2021-12-14T00:08:45Z", "closed_at": "2021-12-14T00:08:36Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3329", "html_url": "https://github.com/ansible-community/molecule/pull/3329", "diff_url": "https://github.com/ansible-community/molecule/pull/3329.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3329.patch", "merged_at": "2021-12-14T00:08:36Z"}, "body": "This is achieved by always running the `check` job and inspecting\r\nthe needed job results.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n- CI Infra Pull Request\r\n- Maintenance Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3329/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3329/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3324", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3324/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3324/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3324/events", "html_url": "https://github.com/ansible-community/molecule/pull/3324", "id": 1066203944, "node_id": "PR_kwDOAsPDRs4vIvbS", "number": 3324, "title": "Fix sdist file inclusion to just pack the Git-tracked files", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1618323913, "node_id": "MDU6TGFiZWwxNjE4MzIzOTEz", "url": "https://api.github.com/repos/ansible-community/molecule/labels/skip-changelog", "name": "skip-changelog", "color": "eeeeee", "default": false, "description": ""}, {"id": 3408854196, "node_id": "LA_kwDOAsPDRs7LLvy0", "url": "https://api.github.com/repos/ansible-community/molecule/labels/backport-3.4", "name": "backport-3.4", "color": "1F4D95", "default": false, "description": "Trigger backporting of this PR to v3.4"}], "state": "closed", "locked": false, "assignee": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-11-29T15:54:52Z", "updated_at": "2021-11-29T16:24:02Z", "closed_at": "2021-11-29T16:20:59Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3324", "html_url": "https://github.com/ansible-community/molecule/pull/3324", "diff_url": "https://github.com/ansible-community/molecule/pull/3324.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3324.patch", "merged_at": "2021-11-29T16:20:59Z"}, "body": "The current setup mixes up incompatible technologies \u2014 `setuptools-scm` and `check-manifest`. The former uses a setuptools hook to auto-include all the Git-tracked files but following the recommendations from the latter adds extra non-tracked rubbish from various build processes on top.\r\n\r\nSome big blobs inflate the sdist too much. Strictly speaking, they shouldn't even be in Git but it is what it is. I've originally fixed this about 2.5 years ago by adding a single exclusion via https://github.com/ansible/molecule/pull/1924.\r\nLater on, that setup has been broken by https://github.com/ansible-community/molecule/pull/2943 at which point it allowed random build artifacts to slip through the misconfiguration.\r\n\r\nThis change does not attempt to exclude small text files because they do not affect the size of the sdist too much (less than 1KB). Adding extra entries introduces undesired maintenance burden and is therefore not a commonly accepted practice when it comes to setuptools-scm managed projects. The considerations are explained in https://github.com/ansible-community/molecule/pull/3314#issuecomment-981618612 and https://github.com/pypa/setuptools_scm/issues/190#issuecomment-492339946.\r\n\r\nSee the commit messages for more specific details.\r\n\r\nSupersedes #3314.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3324/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3324/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3322", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3322/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3322/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3322/events", "html_url": "https://github.com/ansible-community/molecule/pull/3322", "id": 1064593655, "node_id": "PR_kwDOAsPDRs4vESoE", "number": 3322, "title": "Drop testing of digitalocean, hetznercloud, lxd and openstack plugins", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-26T15:17:44Z", "updated_at": "2021-12-03T09:58:43Z", "closed_at": "2021-12-03T09:58:42Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3322", "html_url": "https://github.com/ansible-community/molecule/pull/3322", "diff_url": "https://github.com/ansible-community/molecule/pull/3322.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3322.patch", "merged_at": "2021-12-03T09:58:42Z"}, "body": "Removing these 4 drivers from testing due to being mostly unmaintained. If situation changes we can add them back. No real impact on module as that only affected our ecosystem pipeline.\r\n\r\nRelated: \r\n* https://github.com/ansible-community/molecule-digitalocean/issues/3#issuecomment-980065782\r\n* https://github.com/ansible-community/molecule-openstack/issues/1\r\n* https://github.com/ansible-community/molecule-hetznercloud/issues/43\r\n* https://github.com/ansible-community/molecule-lxd/issues/1\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3322/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3322/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3321", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3321/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3321/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3321/events", "html_url": "https://github.com/ansible-community/molecule/pull/3321", "id": 1064314558, "node_id": "PR_kwDOAsPDRs4vDfN5", "number": 3321, "title": "Add missing filelock test dependency", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-26T10:26:09Z", "updated_at": "2021-11-26T12:56:49Z", "closed_at": "2021-11-26T12:56:47Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3321", "html_url": "https://github.com/ansible-community/molecule/pull/3321", "diff_url": "https://github.com/ansible-community/molecule/pull/3321.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3321.patch", "merged_at": "2021-11-26T12:56:47Z"}, "body": "- add missing filelock\r\n- reduce pylint ignores, which will also prevent similar regression", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3321/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3317", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3317/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3317/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3317/events", "html_url": "https://github.com/ansible-community/molecule/pull/3317", "id": 1063743748, "node_id": "PR_kwDOAsPDRs4vBqO2", "number": 3317, "title": "Remove sudo from default alpine image", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-25T15:52:52Z", "updated_at": "2021-11-25T16:23:18Z", "closed_at": "2021-11-25T16:23:17Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3317", "html_url": "https://github.com/ansible-community/molecule/pull/3317", "diff_url": "https://github.com/ansible-community/molecule/pull/3317.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3317.patch", "merged_at": "2021-11-25T16:23:17Z"}, "body": "As alpine does not have a `sudo` package, we remove it from the\r\ntemplate. This also fixed the broken CI job.\r\n\r\nWe also switch to dense output as it makes it easier to debug the\r\noutput of dockerfile job.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3317/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3317/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3313", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3313/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3313/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3313/events", "html_url": "https://github.com/ansible-community/molecule/pull/3313", "id": 1062924537, "node_id": "PR_kwDOAsPDRs4u_LCL", "number": 3313, "title": "Ensure cwd is passed to utils.run_command() in all cases", "user": {"login": "akerouanton", "id": 557933, "node_id": "MDQ6VXNlcjU1NzkzMw==", "avatar_url": "https://avatars.githubusercontent.com/u/557933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akerouanton", "html_url": "https://github.com/akerouanton", "followers_url": "https://api.github.com/users/akerouanton/followers", "following_url": "https://api.github.com/users/akerouanton/following{/other_user}", "gists_url": "https://api.github.com/users/akerouanton/gists{/gist_id}", "starred_url": "https://api.github.com/users/akerouanton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akerouanton/subscriptions", "organizations_url": "https://api.github.com/users/akerouanton/orgs", "repos_url": "https://api.github.com/users/akerouanton/repos", "events_url": "https://api.github.com/users/akerouanton/events{/privacy}", "received_events_url": "https://api.github.com/users/akerouanton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-24T21:28:34Z", "updated_at": "2021-11-25T09:20:08Z", "closed_at": "2021-11-25T09:11:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3313", "html_url": "https://github.com/ansible-community/molecule/pull/3313", "diff_url": "https://github.com/ansible-community/molecule/pull/3313.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3313.patch", "merged_at": "2021-11-25T09:11:01Z"}, "body": "When trying to access Ansible vars in testinfra tests, the following\r\nfunction call would fail to get values coming from host/group vars:\r\n\r\n    host.ansible('debug', 'msg={{ hostvars[inventory_hostname] }}')\r\n\r\n\r\nThis was due to: 1. testinfra being executed into the directory where\r\nmolecule was launched instead of the scenario directory ; 2. group_vars\r\nbeing located in the scenario directory.\r\n\r\nThis fix set the cwd passed to subprocess_tee to the cwd set in\r\nBakedCommand and fixes the issue.\r\n\r\nI tested this change by directly changing molecule code in my project and\r\nprinting the output of the above line. It shows my group vars as expected.\r\n\r\nFixes #151", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3313/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3313/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3310", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3310/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3310/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3310/events", "html_url": "https://github.com/ansible-community/molecule/pull/3310", "id": 1059278235, "node_id": "PR_kwDOAsPDRs4uzu_r", "number": 3310, "title": "Support PyYAML 6.0", "user": {"login": "hswong3i", "id": 780562, "node_id": "MDQ6VXNlcjc4MDU2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/780562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hswong3i", "html_url": "https://github.com/hswong3i", "followers_url": "https://api.github.com/users/hswong3i/followers", "following_url": "https://api.github.com/users/hswong3i/following{/other_user}", "gists_url": "https://api.github.com/users/hswong3i/gists{/gist_id}", "starred_url": "https://api.github.com/users/hswong3i/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hswong3i/subscriptions", "organizations_url": "https://api.github.com/users/hswong3i/orgs", "repos_url": "https://api.github.com/users/hswong3i/repos", "events_url": "https://api.github.com/users/hswong3i/events{/privacy}", "received_events_url": "https://api.github.com/users/hswong3i/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-21T03:00:00Z", "updated_at": "2021-11-22T13:38:11Z", "closed_at": "2021-11-21T12:57:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3310", "html_url": "https://github.com/ansible-community/molecule/pull/3310", "diff_url": "https://github.com/ansible-community/molecule/pull/3310.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3310.patch", "merged_at": "2021-11-21T12:57:39Z"}, "body": "PyYAML 6.0 released on 2021-10-14 (see <https://github.com/yaml/pyyaml/releases/tag/6.0>).\r\n\r\nThis PR remove the upper cap for PyYAML, so both 5.4.1 and 6.0 could be install.\r\n\r\nDirty hack applied to <https://github.com/alvistack/ansible-community-molecule/tree/alvistack/3.5.2> and so <https://build.opensuse.org/package/show/home:alvistack/ansible-community-molecule-3.5.2>, manually confirmed as functioning for CentOS 7 / Ubuntu 21.10.\r\n\r\nSigned-off-by: Wong Hoi Sing Edison <hswong3i@pantarei-design.com>\r\n\r\n#### PR Type\r\n\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3310/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3300", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3300/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3300/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3300/events", "html_url": "https://github.com/ansible-community/molecule/pull/3300", "id": 1052813937, "node_id": "PR_kwDOAsPDRs4ufckb", "number": 3300, "title": "docs(#3299): avoid to use dash for role name", "user": {"login": "xhiroga", "id": 13391129, "node_id": "MDQ6VXNlcjEzMzkxMTI5", "avatar_url": "https://avatars.githubusercontent.com/u/13391129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xhiroga", "html_url": "https://github.com/xhiroga", "followers_url": "https://api.github.com/users/xhiroga/followers", "following_url": "https://api.github.com/users/xhiroga/following{/other_user}", "gists_url": "https://api.github.com/users/xhiroga/gists{/gist_id}", "starred_url": "https://api.github.com/users/xhiroga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xhiroga/subscriptions", "organizations_url": "https://api.github.com/users/xhiroga/orgs", "repos_url": "https://api.github.com/users/xhiroga/repos", "events_url": "https://api.github.com/users/xhiroga/events{/privacy}", "received_events_url": "https://api.github.com/users/xhiroga/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-14T00:55:29Z", "updated_at": "2021-11-14T22:27:09Z", "closed_at": "2021-11-14T22:03:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3300", "html_url": "https://github.com/ansible-community/molecule/pull/3300", "diff_url": "https://github.com/ansible-community/molecule/pull/3300.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3300.patch", "merged_at": "2021-11-14T22:03:14Z"}, "body": "Fix document to make getting started works\r\n\r\n#### PR Type\r\n\r\n- Docs Pull Request\r\n\r\n#### Motivation\r\n#3299\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3300/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3300/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3299", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3299/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3299/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3299/events", "html_url": "https://github.com/ansible-community/molecule/issues/3299", "id": 1052813842, "node_id": "I_kwDOAsPDRs4-wKoS", "number": 3299, "title": "docs: Ansible Galaxy does not allow using dash in role name, but tutorial use dash", "user": {"login": "xhiroga", "id": 13391129, "node_id": "MDQ6VXNlcjEzMzkxMTI5", "avatar_url": "https://avatars.githubusercontent.com/u/13391129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xhiroga", "html_url": "https://github.com/xhiroga", "followers_url": "https://api.github.com/users/xhiroga/followers", "following_url": "https://api.github.com/users/xhiroga/following{/other_user}", "gists_url": "https://api.github.com/users/xhiroga/gists{/gist_id}", "starred_url": "https://api.github.com/users/xhiroga/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xhiroga/subscriptions", "organizations_url": "https://api.github.com/users/xhiroga/orgs", "repos_url": "https://api.github.com/users/xhiroga/repos", "events_url": "https://api.github.com/users/xhiroga/events{/privacy}", "received_events_url": "https://api.github.com/users/xhiroga/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-14T00:54:42Z", "updated_at": "2021-11-14T22:03:14Z", "closed_at": "2021-11-14T22:03:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report (document improvement)\r\n\r\n# Desired Behavior\r\n\r\nAs [getting-started](https://molecule.readthedocs.io/en/stable/getting-started.html#run-test-sequence-commands),  `molecule create` starts instances\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n$ molecule create\r\nINFO     default scenario test matrix: dependency, create, prepare\r\nINFO     Performing prerun...\r\nINFO     Added ANSIBLE_LIBRARY=/Users/hiroga/.cache/ansible-compat/86c246/modules:/Users/hiroga/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Added ANSIBLE_COLLECTIONS_PATH=/Users/hiroga/.cache/ansible-compat/86c246/collections:/Users/hiroga/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Added ANSIBLE_ROLES_PATH=/Users/hiroga/.cache/ansible-compat/86c246/roles:/Users/hiroga/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nERROR    Computed fully qualified role name of xhiroga.my-new-role does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/hiroga/.local/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/hiroga/.local/lib/python3.9/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/hiroga/.local/lib/python3.9/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/hiroga/.local/lib/python3.9/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/hiroga/.local/lib/python3.9/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/hiroga/.local/lib/python3.9/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/Users/hiroga/.local/lib/python3.9/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/hiroga/.local/lib/python3.9/site-packages/molecule/command/create.py\", line 121, in create\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/Users/hiroga/.local/lib/python3.9/site-packages/molecule/command/base.py\", line 111, in execute_cmdline_scenarios\r\n    scenario.config.runtime.prepare_environment()\r\n  File \"/Users/hiroga/.local/lib/python3.9/site-packages/ansible_compat/runtime.py\", line 255, in prepare_environment\r\n    self._install_galaxy_role(self.project_dir, ignore_errors=True)\r\n  File \"/Users/hiroga/.local/lib/python3.9/site-packages/ansible_compat/runtime.py\", line 396, in _install_galaxy_role\r\n    raise InvalidPrerequisiteError(msg)\r\nansible_compat.errors.InvalidPrerequisiteError: Computed fully qualified role name of xhiroga.my-new-role does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n```\r\n\r\n# Suggestion\r\n\r\nreplace document `my-new-role` with `my_new_role`. It works.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3296", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3296/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3296/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3296/events", "html_url": "https://github.com/ansible-community/molecule/issues/3296", "id": 1049300427, "node_id": "I_kwDOAsPDRs4-iw3L", "number": 3296, "title": "molecule > 3.2.2 break on prerun when running in parallel (with molecule-docker)", "user": {"login": "thom-vend", "id": 71047319, "node_id": "MDQ6VXNlcjcxMDQ3MzE5", "avatar_url": "https://avatars.githubusercontent.com/u/71047319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thom-vend", "html_url": "https://github.com/thom-vend", "followers_url": "https://api.github.com/users/thom-vend/followers", "following_url": "https://api.github.com/users/thom-vend/following{/other_user}", "gists_url": "https://api.github.com/users/thom-vend/gists{/gist_id}", "starred_url": "https://api.github.com/users/thom-vend/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thom-vend/subscriptions", "organizations_url": "https://api.github.com/users/thom-vend/orgs", "repos_url": "https://api.github.com/users/thom-vend/repos", "events_url": "https://api.github.com/users/thom-vend/events{/privacy}", "received_events_url": "https://api.github.com/users/thom-vend/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-10T01:34:35Z", "updated_at": "2022-06-01T10:09:01Z", "closed_at": "2022-06-01T10:09:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible==4.7.0\r\nansible-core==2.11.6\r\nmolecule==3.5.2\r\nmolecule-docker==1.1.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n- molecule docker, in a CI (travis) without much things installed.\r\n\r\n# Desired Behavior\r\n\r\n- Previously with molecule `3.2.2`, **concurrent** run of `molecule test --parallel` was fine :D  (`molecule -c \"/path/to/config.yml\" test --parallel -s scenarioname` \r\n\r\n\r\n# Actual Behaviour\r\n\r\nError when running them in parallel at the pre-run step, installing `community.docker` : \r\n\r\n<details><summary>Full error stack trace: Click to expand</summary>\r\n\r\n```\r\nComputer:jobs running/jobs completed/%of started jobs/Average seconds to complete\r\nETA: 0s Left: 13 AVG: 0.00s  local:3/0/100%/0.0s ~/build/vend/ansible-cm/roles/vend_rsyslog ~/build/vend/ansible-cm\r\nelastic > dependency\r\nTraceback (most recent call last):\r\n  File \"/home/travis/virtualenv/python3.8.3/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule/command/test.py\", line 159, in test\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args, ansible_args)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule/command/base.py\", line 118, in execute_cmdline_scenarios\r\n    execute_scenario(scenario)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule/command/base.py\", line 160, in execute_scenario\r\n    execute_subcommand(scenario.config, action)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule/command/base.py\", line 149, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule/logger.py\", line 188, in wrapper\r\n    rt = func(*args, **kwargs)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule/logger.py\", line 164, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule/command/dependency.py\", line 74, in execute\r\n    self._config.dependency.execute()\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule/dependency/ansible_galaxy/__init__.py\", line 76, in execute\r\n    invoker.execute()\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule/dependency/ansible_galaxy/base.py\", line 120, in execute\r\n    super().execute()\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule/dependency/base.py\", line 92, in execute\r\n    self._config.runtime.require_collection(name, version)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/ansible_compat/runtime.py\", line 315, in require_collection\r\n    self.require_collection(name=name, version=version, install=False)\r\n  File \"/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/ansible_compat/runtime.py\", line 319, in require_collection\r\n    raise InvalidPrerequisiteError(msg)\r\nansible_compat.errors.InvalidPrerequisiteError: Collection 'community.docker' not found in '['/home/travis/.cache/ansible-compat/494921/collections', '/home/travis/.cache/ansible-compat/494921/collections', '/home/travis/.ansible/collections', '/usr/share/ansible/collections']'\r\n+pushd /home/travis/build/vend/ansible-cm/roles/vend_rsyslog\r\n+molecule -c /home/travis/build/vend/ansible-cm/molecule_defaults.yml test --parallel -s elastic\r\nINFO     elastic scenario test matrix: dependency, lint, cleanup, destroy, syntax, create, prepare, converge, idempotence, side_effect, verify, cleanup, destroy\r\nINFO     Performing prerun...\r\nINFO     Added ANSIBLE_LIBRARY=/home/travis/.cache/ansible-compat/494921/modules:/home/travis/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Added ANSIBLE_COLLECTIONS_PATH=/home/travis/.cache/ansible-compat/494921/collections:/home/travis/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Added ANSIBLE_ROLES_PATH=/home/travis/.cache/ansible-compat/494921/roles:/home/travis/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nINFO     Using /home/travis/.ansible/roles/vendbylightspeed.vend_rsyslog symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Running elastic > dependency\r\nINFO     Running ansible-galaxy collection install -v community.docker:>=1.9.1\r\nCRITICAL Collection 'community.docker' not found in '['/home/travis/.cache/ansible-compat/494921/collections', '/home/travis/.cache/ansible-compat/494921/collections', '/home/travis/.ansible/collections', '/usr/share/ansible/collections']'\r\nparallel: This job failed:\r\nrun_molecule /home/travis/build/vend/ansible-cm/roles/vend_rsyslog elastic\r\n```\r\n</details>\r\n\r\n\r\n# Workaround\r\n\r\n- Install on the CI `ansible-galaxy  collection install community.docker` before running all my molecule scenario in parallel seems to have fix the issue so far.\r\n\r\n# Potential root cause?\r\n\r\nSince molecule 3.3.0, community.docker (src/molecule/data/validate-dockerfile.yml) is required and installed at the pre-run step via https://github.com/ansible-community/molecule/blob/d0cb7b7193652084909892bca6ce6e3129abab38/src/molecule/dependency/base.py#L94\r\nAnd it seems that ansible-lint failed to install that concurrently?\r\n\r\nEnsuring this deps is pre-install on the host where molecule is running seems to be a quick fix \ud83e\udd37  ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3296/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3296/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3291", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3291/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3291/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3291/events", "html_url": "https://github.com/ansible-community/molecule/issues/3291", "id": 1048548275, "node_id": "I_kwDOAsPDRs4-f5Oz", "number": 3291, "title": "molecule is incompatible with ansible-devel (2.13) on py310", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-11-09T12:26:04Z", "updated_at": "2022-01-11T17:50:55Z", "closed_at": "2022-01-11T17:50:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is a real bug that seems to be reproducible where performance goes down exponentially and **testing times-out**. Likely they would pass in 1-2 hours instead of the expected 10 minutes.\r\n\r\nIt was found while adding https://github.com/ansible-community/molecule/pull/3260/files and it seems to happen only with `ansible@devel` branch (2.13).\r\n\r\nI am wondering if 2.13 is trying to do something fancy with stdout/stderr streams which may interfere with out own shady-magic from enrich, where we proxy stderr/stdout with a wrapper.\r\n\r\nThis seems specific to python 3.10, all other version seem to work fine. If someone can investigate this it would be great.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3291/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3287", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3287/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3287/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3287/events", "html_url": "https://github.com/ansible-community/molecule/issues/3287", "id": 1043187566, "node_id": "I_kwDOAsPDRs4-Lcdu", "number": 3287, "title": "molecule init: Error: Invalid value for '--driver-name' / '-d': 'docker' is not 'delegated'", "user": {"login": "cupen", "id": 1221615, "node_id": "MDQ6VXNlcjEyMjE2MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1221615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cupen", "html_url": "https://github.com/cupen", "followers_url": "https://api.github.com/users/cupen/followers", "following_url": "https://api.github.com/users/cupen/following{/other_user}", "gists_url": "https://api.github.com/users/cupen/gists{/gist_id}", "starred_url": "https://api.github.com/users/cupen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cupen/subscriptions", "organizations_url": "https://api.github.com/users/cupen/orgs", "repos_url": "https://api.github.com/users/cupen/repos", "events_url": "https://api.github.com/users/cupen/events{/privacy}", "received_events_url": "https://api.github.com/users/cupen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-03T08:08:39Z", "updated_at": "2021-11-03T09:06:32Z", "closed_at": "2021-11-03T09:06:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "From here.\r\nhttps://molecule.readthedocs.io/en/latest/getting-started.html#molecule-scenarios\r\n\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible --version && molecule --version\r\nansible 2.10.9\r\n  config file = /home/cupen/.ansible.cfg\r\n  configured module search path = ['/home/cupen/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/cupen/.local/lib/python3.9/site-packages/ansible\r\n  executable location = /home/cupen/.local/bin/ansible\r\n  python version = 3.9.7 (default, Oct 10 2021, 15:13:22) [GCC 11.1.0]\r\nmolecule 3.5.2 using python 3.9 \r\n    ansible:2.10.9\r\n    delegated:3.5.2 from molecule\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n`molecule init scenario --driver-name docker` works\r\n\r\n# Actual Behaviour\r\n```\r\n$ molecule init scenario --driver-name docker\r\nUsage: molecule init scenario [OPTIONS] [SCENARIO_NAME]\r\nTry 'molecule init scenario --help' for help.\r\n\r\nError: Invalid value for '--driver-name' / '-d': 'docker' is not 'delegated'.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3287/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3287/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3285", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3285/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3285/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3285/events", "html_url": "https://github.com/ansible-community/molecule/issues/3285", "id": 1040721589, "node_id": "I_kwDOAsPDRs4-CCa1", "number": 3285, "title": "`ansible-base` should be switched to `ansible-core`", "user": {"login": "gotmax23", "id": 9920591, "node_id": "MDQ6VXNlcjk5MjA1OTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9920591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gotmax23", "html_url": "https://github.com/gotmax23", "followers_url": "https://api.github.com/users/gotmax23/followers", "following_url": "https://api.github.com/users/gotmax23/following{/other_user}", "gists_url": "https://api.github.com/users/gotmax23/gists{/gist_id}", "starred_url": "https://api.github.com/users/gotmax23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gotmax23/subscriptions", "organizations_url": "https://api.github.com/users/gotmax23/orgs", "repos_url": "https://api.github.com/users/gotmax23/repos", "events_url": "https://api.github.com/users/gotmax23/events{/privacy}", "received_events_url": "https://api.github.com/users/gotmax23/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-11-01T03:31:03Z", "updated_at": "2022-01-13T03:50:24Z", "closed_at": "2022-01-13T03:50:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Molecule developers,\r\n\r\n## Issue Type\r\n\r\n- Bug report\r\n\r\n## Molecule and Ansible details\r\n\r\n``` console\r\n$ ansible --version && molecule --version\r\nansible [core 2.11.6] \r\n  config file = /home/gotmax/.ansible.cfg\r\n  configured module search path = ['/home/gotmax/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.10/site-packages/ansible\r\n  ansible collection location = /home/gotmax/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.10.0 (default, Oct  4 2021, 00:00:00) [GCC 11.2.1 20210728 (Red Hat 11.2.1-1)]\r\n  jinja version = 3.0.2\r\n  libyaml = True\r\nmolecule 3.5.2 using python 3.10 \r\n    ansible:2.11.6\r\n    delegated:3.5.2 from molecule\r\n    docker:1.1.0 from molecule_docker requiring collections: community.docker>=1.9.1\r\n    podman:1.0.1 from molecule_podman requiring collections: containers.podman>=1.7.0 ansible.posix>=1.3.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\n[Non applicable questions removed]\r\n\r\n## Description\r\n\r\nI think we should switch the `ansible-base` extra dependency to `ansible-core` (or at least add another extra called `ansible-core`). After `ansible-base` 2.10, the name of the minimal ansible package was changed to `ansible-core`. Currently, `pip install molecule[ansible] --user` installs ansible (the community package that just includes collections) and its dependency `ansible-core<2.12,>=2.11.6` (the new version of the minimal Ansible package), but `pip install molecule[ansible-base] --user` installs a different version of the minimal Ansible package.\r\n\r\nI know that `ansible` is an optional dependency and it is possible to just run `pip3 install molecule ansible-core`, but I still think we should switch it to avoid user confusion and prevent conflicting dependencies. What do you think?\r\n\r\nRelated: https://github.com/thegeeklab/ansible-later/issues/242\r\n\r\nThanks,\r\nMaxwell", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3285/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3284", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3284/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3284/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3284/events", "html_url": "https://github.com/ansible-community/molecule/issues/3284", "id": 1039451959, "node_id": "I_kwDOAsPDRs499Mc3", "number": 3284, "title": "repo quay.io/ansible/molecule (and tags) are missing", "user": {"login": "till", "id": 27003, "node_id": "MDQ6VXNlcjI3MDAz", "avatar_url": "https://avatars.githubusercontent.com/u/27003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/till", "html_url": "https://github.com/till", "followers_url": "https://api.github.com/users/till/followers", "following_url": "https://api.github.com/users/till/following{/other_user}", "gists_url": "https://api.github.com/users/till/gists{/gist_id}", "starred_url": "https://api.github.com/users/till/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/till/subscriptions", "organizations_url": "https://api.github.com/users/till/orgs", "repos_url": "https://api.github.com/users/till/repos", "events_url": "https://api.github.com/users/till/events{/privacy}", "received_events_url": "https://api.github.com/users/till/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133126, "node_id": "MDU6TGFiZWwyODgxMzMxMjY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/wontfix", "name": "wontfix", "color": "ffdddd", "default": true, "description": ""}, {"id": 1624355057, "node_id": "MDU6TGFiZWwxNjI0MzU1MDU3", "url": "https://api.github.com/repos/ansible-community/molecule/labels/deprecated", "name": "deprecated", "color": "fef2c0", "default": false, "description": "marks deprecations"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-29T11:09:15Z", "updated_at": "2021-11-01T14:31:07Z", "closed_at": "2021-10-29T11:52:58Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nn/a\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- docker\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nRebuilding an image for an older testsuite works.\r\n\r\n# Actual Behaviour\r\n\r\n`docker build` produces an error:\r\n\r\n```\r\n------\r\n > [internal] load metadata for quay.io/ansible/molecule:2.22:\r\n------\r\n------\r\n > [base 1/6] FROM quay.io/ansible/molecule:2.22:\r\n------\r\nfailed to load cache key: unexpected status code [manifests 2.22]: 401 UNAUTHORIZED\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3284/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3284/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3283", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3283/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3283/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3283/events", "html_url": "https://github.com/ansible-community/molecule/pull/3283", "id": 1037466981, "node_id": "PR_kwDOAsPDRs4tvmzm", "number": 3283, "title": "Restore collections path for testing", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-27T14:05:01Z", "updated_at": "2021-10-27T16:29:40Z", "closed_at": "2021-10-27T16:29:40Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3283", "html_url": "https://github.com/ansible-community/molecule/pull/3283", "diff_url": "https://github.com/ansible-community/molecule/pull/3283.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3283.patch", "merged_at": "2021-10-27T16:29:40Z"}, "body": "Please include details of what it is, how to use it, how it's been tested\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\nFixes #3243 ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3283/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3283/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3280", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3280/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3280/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3280/events", "html_url": "https://github.com/ansible-community/molecule/pull/3280", "id": 1036298254, "node_id": "PR_kwDOAsPDRs4tr03O", "number": 3280, "title": "Remove the `setup.py` development stub module", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-26T13:25:49Z", "updated_at": "2021-10-27T16:30:28Z", "closed_at": "2021-10-27T10:18:21Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3280", "html_url": "https://github.com/ansible-community/molecule/pull/3280", "diff_url": "https://github.com/ansible-community/molecule/pull/3280.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3280.patch", "merged_at": "2021-10-27T10:18:21Z"}, "body": "Motivation: maintainability improvement \u2014 modern packaging tools no longer need `setup.py` and they support editable for too.\r\n\r\n#### PR Type\r\n\r\n- Feature Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3280/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3280/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3277", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3277/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3277/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3277/events", "html_url": "https://github.com/ansible-community/molecule/pull/3277", "id": 1034901097, "node_id": "PR_kwDOAsPDRs4tnRVH", "number": 3277, "title": "Ensure roles have a namespace when created", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-25T09:33:13Z", "updated_at": "2021-11-25T09:15:06Z", "closed_at": "2021-11-25T09:14:31Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3277", "html_url": "https://github.com/ansible-community/molecule/pull/3277", "diff_url": "https://github.com/ansible-community/molecule/pull/3277.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3277.patch", "merged_at": "2021-11-25T09:14:31Z"}, "body": "As test tools require the presence of a namespace, we now detect when user is trying to create standalone roles and require him to mention the namespace.\r\n\r\nThis also updates the command line help text to provide better information regarding what is expected from the user.\r\n\r\nThis change does not affect creation of new roles within collections.\r\n\r\nRelated: https://github.com/ansible-community/ansible-compat/issues/78\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3277/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3277/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3274", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3274/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3274/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3274/events", "html_url": "https://github.com/ansible-community/molecule/pull/3274", "id": 1030800166, "node_id": "PR_kwDOAsPDRs4taLXi", "number": 3274, "title": "add missing \"test --destroy=never\" to documentation", "user": {"login": "konstruktoid", "id": 7956715, "node_id": "MDQ6VXNlcjc5NTY3MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/7956715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/konstruktoid", "html_url": "https://github.com/konstruktoid", "followers_url": "https://api.github.com/users/konstruktoid/followers", "following_url": "https://api.github.com/users/konstruktoid/following{/other_user}", "gists_url": "https://api.github.com/users/konstruktoid/gists{/gist_id}", "starred_url": "https://api.github.com/users/konstruktoid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/konstruktoid/subscriptions", "organizations_url": "https://api.github.com/users/konstruktoid/orgs", "repos_url": "https://api.github.com/users/konstruktoid/repos", "events_url": "https://api.github.com/users/konstruktoid/events{/privacy}", "received_events_url": "https://api.github.com/users/konstruktoid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-19T22:38:10Z", "updated_at": "2022-02-07T09:31:44Z", "closed_at": "2021-10-20T10:58:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3274", "html_url": "https://github.com/ansible-community/molecule/pull/3274", "diff_url": "https://github.com/ansible-community/molecule/pull/3274.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3274.patch", "merged_at": "2021-10-20T10:58:57Z"}, "body": "Signed-off-by: Thomas Sj\u00f6gren <konstruktoid@users.noreply.github.com>\r\n\r\nThis PR:\r\n- Adds missing `test --destroy=never` option to the documentation\r\n- Closes #3009 \r\n\r\n#### PR Type\r\n\r\n- Docs Pull Request\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3274/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3274/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3273", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3273/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3273/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3273/events", "html_url": "https://github.com/ansible-community/molecule/issues/3273", "id": 1030451901, "node_id": "I_kwDOAsPDRs49a3K9", "number": 3273, "title": "ansible apt module fails via docker ssh tunnel", "user": {"login": "jurim76", "id": 8058242, "node_id": "MDQ6VXNlcjgwNTgyNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/8058242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jurim76", "html_url": "https://github.com/jurim76", "followers_url": "https://api.github.com/users/jurim76/followers", "following_url": "https://api.github.com/users/jurim76/following{/other_user}", "gists_url": "https://api.github.com/users/jurim76/gists{/gist_id}", "starred_url": "https://api.github.com/users/jurim76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jurim76/subscriptions", "organizations_url": "https://api.github.com/users/jurim76/orgs", "repos_url": "https://api.github.com/users/jurim76/repos", "events_url": "https://api.github.com/users/jurim76/events{/privacy}", "received_events_url": "https://api.github.com/users/jurim76/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-19T15:28:51Z", "updated_at": "2021-10-26T15:46:09Z", "closed_at": "2021-10-26T15:46:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\nansible apt module fails on prepare stage via ssh tunnel\r\n\r\n1. create binding on remote docker machine: socat tcp-listen:8888,reuseaddr,fork unix-connect:/run/docker.sock\r\n2. create tunnel on your host to remote docker machine: ssh -L 8888:localhost:8888 ansible@build02-srv.local.net\r\n3. export DOCKER_HOST=\"tcp://localhost:8888\" variable\r\n4. run \"molecule converge\" inside my role\r\n\r\nmolecule/default/prepare.yml\r\n```\r\n---\r\n- name: prepare\r\n  hosts: all\r\n  tasks:\r\n    - name: update apt cache\r\n      command: \"apt update\"\r\n```\r\n\r\nMolecule fails on prepare stage with following error\r\n```\r\nTASK [update apt cache] ********************************************************\r\nfatal: [dns01-public.local.net]: FAILED! => changed=false \r\n  module_stderr: ''\r\n  module_stdout: ''\r\n  msg: |-\r\n    MODULE FAILURE\r\n    See stdout/stderr for the exact error\r\n  rc: 0\r\n\r\nPLAY RECAP *********************************************************************\r\ndns01-public.local.net : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nCRITICAL Ansible return code was 2, command was: ['ansible-playbook', '--diff', '--inventory', '/home/jurim/.cache/molecule/relax.dns.master/default/inven\r\ntory', '--skip-tags', 'molecule-notest,notest', '-e molecule_run=True', '-e ansible_ignore_lock=True', '-e debug=True', '/home/jurim/data/git/sysadmin/ans\r\nible/roles/relax.dns.master/molecule/default/prepare.yml']\r\n```\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.11.6] \r\n  config file = None\r\n  configured module search path = ['/home/jurim/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/jurim/.local/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /home/jurim/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.9.7 (default, Oct 16 2021, 11:34:29) [GCC 10.3.0]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nmolecule 3.5.2 using python 3.9 \r\n    ansible:2.11.6\r\n    delegated:3.5.2 from molecule\r\n    docker:1.0.2 from molecule_docker requiring collections: community.docker>=1.8.0\r\n```\r\n\r\napt runs with no errors inside molecule's docker container itself\r\n```\r\ndocker exec -it 60bba7c3f374 /bin/bash\r\nroot@dns01-internal:/# ansible -m command -a \"apt update\" all\r\nlocalhost | CHANGED | rc=0 >>\r\nHit:1 http://deb.debian.org/debian buster InRelease\r\nHit:2 http://security.debian.org/debian-security buster/updates InRelease\r\nHit:3 http://deb.debian.org/debian buster-updates InRelease\r\nHit:4 http://deb.debian.org/debian buster-backports InRelease\r\nReading package lists...\r\nBuilding dependency tree...\r\nReading state information...\r\n12 packages can be upgraded. Run 'apt list --upgradable' to see them.\r\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWith DOCKER_HOST=\"ssh://ansible@build02-srv.local.net\", molecule runs without errors, but very very slow. \r\nThe only way to run fast molecule test is using ssh tunnel to remote build machine, in my case (I cannot use docker on my laptop locally or run molecule tests on build machine itself).\r\n\r\n# Actual Behaviour\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3273/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3267", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3267/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3267/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3267/events", "html_url": "https://github.com/ansible-community/molecule/issues/3267", "id": 1022182535, "node_id": "I_kwDOAsPDRs487USH", "number": 3267, "title": "First example in Getting-Started Guide does not work properly ", "user": {"login": "theguy147", "id": 37738506, "node_id": "MDQ6VXNlcjM3NzM4NTA2", "avatar_url": "https://avatars.githubusercontent.com/u/37738506?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theguy147", "html_url": "https://github.com/theguy147", "followers_url": "https://api.github.com/users/theguy147/followers", "following_url": "https://api.github.com/users/theguy147/following{/other_user}", "gists_url": "https://api.github.com/users/theguy147/gists{/gist_id}", "starred_url": "https://api.github.com/users/theguy147/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theguy147/subscriptions", "organizations_url": "https://api.github.com/users/theguy147/orgs", "repos_url": "https://api.github.com/users/theguy147/repos", "events_url": "https://api.github.com/users/theguy147/events{/privacy}", "received_events_url": "https://api.github.com/users/theguy147/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-11T02:11:55Z", "updated_at": "2021-10-24T22:49:10Z", "closed_at": "2021-10-12T00:49:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```bash\r\n$ ansible --version && molecule --version\r\nansible [core 2.11.5] \r\n  config file = None\r\n  configured module search path = ['/home/vagrant/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/vagrant/.local/lib/python3.8/site-packages/ansible\r\n  ansible collection location = /home/vagrant/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/vagrant/.local/bin/ansible\r\n  python version = 3.8.10 (default, Sep 28 2021, 16:10:42) [GCC 9.3.0]\r\n  jinja version = 3.0.2\r\n  libyaml = True\r\nINFO     Found config file /home/vagrant/molecule/.config/molecule/config.yml\r\nmolecule 3.5.2 using python 3.8 \r\n    ansible:2.11.5\r\n    delegated:3.5.2 from molecule\r\n    docker:1.0.2 from molecule_docker requiring collections: community.docker>=1.8.0\r\n```\r\n\r\nAdditional Information:\r\n\r\n- The test environment used is a clean and up-to-date Vagrantbox 'ubuntu/focal64' (v20211007.0.0).\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip (also tried installing it from source but that didn't change anything)\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nThe steps shown in the [Getting-Started Guide](https://molecule.readthedocs.io/en/latest/getting-started.html) should work without errors:\r\n\r\n```bash\r\nmolecule init role my-new-role --driver-name docker\r\ncd my-new-role/\r\nmolecule create\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n### Error: Computed fully qualified role name of my-new-role does not follow current galaxy requirements\r\n\r\nThe following error output will be seen when executing `molecule create` according to the documentation:\r\n\r\n```bash\r\n$ molecule --debug create\r\nDEBUG    Validating schema /home/vagrant/my-new-role/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, create, prepare\r\nINFO     Performing prerun...\r\nINFO     Added ANSIBLE_LIBRARY=/home/vagrant/.cache/ansible-compat/068eef/modules:/home/vagrant/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nINFO     Added ANSIBLE_COLLECTIONS_PATH=/home/vagrant/.cache/ansible-compat/068eef/collections:/home/vagrant/.ansible/collections:/usr/share/ansible/collections\r\nINFO     Added ANSIBLE_ROLES_PATH=/home/vagrant/.cache/ansible-compat/068eef/roles:/home/vagrant/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nERROR    Computed fully qualified role name of my-new-role does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/vagrant/molecule/.venv/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/home/vagrant/molecule/.venv/lib/python3.8/site-packages/click/core.py\", line 1128, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/vagrant/molecule/.venv/lib/python3.8/site-packages/click/core.py\", line 1053, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/vagrant/molecule/.venv/lib/python3.8/site-packages/click/core.py\", line 1659, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/vagrant/molecule/.venv/lib/python3.8/site-packages/click/core.py\", line 1395, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/vagrant/molecule/.venv/lib/python3.8/site-packages/click/core.py\", line 754, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/home/vagrant/molecule/.venv/lib/python3.8/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/vagrant/molecule/.venv/lib/python3.8/site-packages/molecule/command/create.py\", line 121, in create\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/home/vagrant/molecule/.venv/lib/python3.8/site-packages/molecule/command/base.py\", line 111, in execute_cmdline_scenarios\r\n    scenario.config.runtime.prepare_environment()\r\n  File \"/home/vagrant/molecule/.venv/lib/python3.8/site-packages/ansible_compat/runtime.py\", line 255, in prepare_environment\r\n    self._install_galaxy_role(self.project_dir, ignore_errors=True)\r\n  File \"/home/vagrant/molecule/.venv/lib/python3.8/site-packages/ansible_compat/runtime.py\", line 396, in _install_galaxy_role\r\n    raise InvalidPrerequisiteError(msg)\r\nansible_compat.errors.InvalidPrerequisiteError: Computed fully qualified role name of my-new-role does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n``` \r\n\r\nWhile I do understand that `my-new-role` is not compliant to \"current galaxy requirements\" the same error is also shown for the role name: `my_new_role`.\r\n\r\nThe issue seems to be that both the default `role_name` and `namespace` don't follow these galaxy requirements:\r\n- `role_name` for the example in the documentation would be the directory name which is `my-new-role`\r\n- `namespace` for the example in the documentation would be the `author` and therefore `your name`\r\n\r\nEven though, after carefully reading the complete error message and the linked documentation in it, these errors should become clear I think that **the first example** of the Getting-Started Guide should work out-of-the-box. A user that has never used `molecule` before (like myself) might be very confused by this fact. Not sure if others agree but in my opinion either the documentation (to at least include a warning and explanation) or the implementation (of say the default values replacing \" \" and \"-\" with \"_\") should be adjusted.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3267/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3267/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3266", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3266/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3266/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3266/events", "html_url": "https://github.com/ansible-community/molecule/issues/3266", "id": 1021329336, "node_id": "I_kwDOAsPDRs484D-4", "number": 3266, "title": "Molecule driver dependencies (collections) is not installed to the correct place", "user": {"login": "klj613", "id": 911636, "node_id": "MDQ6VXNlcjkxMTYzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/911636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klj613", "html_url": "https://github.com/klj613", "followers_url": "https://api.github.com/users/klj613/followers", "following_url": "https://api.github.com/users/klj613/following{/other_user}", "gists_url": "https://api.github.com/users/klj613/gists{/gist_id}", "starred_url": "https://api.github.com/users/klj613/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klj613/subscriptions", "organizations_url": "https://api.github.com/users/klj613/orgs", "repos_url": "https://api.github.com/users/klj613/repos", "events_url": "https://api.github.com/users/klj613/events{/privacy}", "received_events_url": "https://api.github.com/users/klj613/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-08T17:36:53Z", "updated_at": "2022-06-01T10:11:58Z", "closed_at": "2022-06-01T10:11:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible [core 2.11.5] \r\n  config file = None\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/user/workspace/code/molecule/projectdir/.tox/rolename/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/user/workspace/code/molecule/projectdir/.tox/rolename/bin/ansible\r\n  python version = 3.9.7 (default, Aug 31 2021, 13:28:12) [GCC 11.1.0]\r\n  jinja version = 3.0.2\r\n  libyaml = True\r\nmolecule 3.4.1 using python 3.9 \r\n    ansible:2.11.5\r\n    delegated:3.4.1 from molecule\r\n    docker:1.0.2 from molecule_docker requiring collections: community.docker>=1.8.0\r\n    ec2:0.3 from molecule_ec2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen \"dependency\" is enabled I would expect any collections installed for the driver itself (e.g. the docker driver) to be installed to ${MOLECULE_EPHEMERAL_DIRECTORY}/collections\r\n\r\n\"Driver\" collections: https://github.com/ansible-community/molecule-docker/commit/b7cdeff28a6eab463d112b614986db6655aa1d06 which is picked up by https://github.com/ansible-community/molecule/blob/main/src/molecule/dependency/base.py#L91\r\n\r\n# Actual Behaviour\r\n\r\nHave tried both the shell and galaxy methods however the collection installed as a dependency of the \"docker\" driver is installed to ~/.ansible/collections/ansible_collections instead of ${MOLECULE_EPHEMERAL_DIRECTORY}/collections (this is primarily an issue when running multiple molecule commands concurrently via tox)\r\n\r\nDisabling the \"dependency\" step works as this is checked before calling `super().execute()` for both shell and galaxy, e.g: https://github.com/ansible-community/molecule/blob/main/src/molecule/dependency/shell.py#L92\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3266/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3266/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3262", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3262/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3262/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3262/events", "html_url": "https://github.com/ansible-community/molecule/pull/3262", "id": 1018211664, "node_id": "PR_kwDOAsPDRs4sy9Sf", "number": 3262, "title": "fix: bump subprocess-tee to 0.3.5", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-06T12:29:15Z", "updated_at": "2021-10-06T12:48:06Z", "closed_at": "2021-10-06T12:48:05Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3262", "html_url": "https://github.com/ansible-community/molecule/pull/3262", "diff_url": "https://github.com/ansible-community/molecule/pull/3262.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3262.patch", "merged_at": "2021-10-06T12:48:05Z"}, "body": "This prepares code towards being py310 compatible.\r\n\r\nRelated: https://github.com/ansible-community/molecule/pull/3260\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3262/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3262/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3261", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3261/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3261/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3261/events", "html_url": "https://github.com/ansible-community/molecule/pull/3261", "id": 1018145225, "node_id": "PR_kwDOAsPDRs4syupG", "number": 3261, "title": "fix: drop pytest-verbose-parametrize test dependency", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-06T11:52:12Z", "updated_at": "2021-10-06T12:08:34Z", "closed_at": "2021-10-06T12:08:33Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3261", "html_url": "https://github.com/ansible-community/molecule/pull/3261", "diff_url": "https://github.com/ansible-community/molecule/pull/3261.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3261.patch", "merged_at": "2021-10-06T12:08:33Z"}, "body": "We don't really need that dependency and its maintenance status\r\nis far from good. That removal was needed for py310 compatibility.\r\n\r\nRelated: https://github.com/man-group/pytest-plugins/issues/157\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3261/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3261/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3259", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3259/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3259/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3259/events", "html_url": "https://github.com/ansible-community/molecule/issues/3259", "id": 1016447371, "node_id": "I_kwDOAsPDRs48lcGL", "number": 3259, "title": "'podman' is not 'delegated'.", "user": {"login": "RanabirChakraborty", "id": 59959091, "node_id": "MDQ6VXNlcjU5OTU5MDkx", "avatar_url": "https://avatars.githubusercontent.com/u/59959091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RanabirChakraborty", "html_url": "https://github.com/RanabirChakraborty", "followers_url": "https://api.github.com/users/RanabirChakraborty/followers", "following_url": "https://api.github.com/users/RanabirChakraborty/following{/other_user}", "gists_url": "https://api.github.com/users/RanabirChakraborty/gists{/gist_id}", "starred_url": "https://api.github.com/users/RanabirChakraborty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RanabirChakraborty/subscriptions", "organizations_url": "https://api.github.com/users/RanabirChakraborty/orgs", "repos_url": "https://api.github.com/users/RanabirChakraborty/repos", "events_url": "https://api.github.com/users/RanabirChakraborty/events{/privacy}", "received_events_url": "https://api.github.com/users/RanabirChakraborty/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 1624351754, "node_id": "MDU6TGFiZWwxNjI0MzUxNzU0", "url": "https://api.github.com/repos/ansible-community/molecule/labels/feature", "name": "feature", "color": "006b75", "default": false, "description": ""}, {"id": 3416733358, "node_id": "LA_kwDOAsPDRs7Lpzau", "url": "https://api.github.com/repos/ansible-community/molecule/labels/new", "name": "new", "color": "0052CC", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-10-05T15:09:09Z", "updated_at": "2022-01-11T17:48:37Z", "closed_at": "2022-01-11T17:48:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI'm currently trying to set up molecule testing in the Ansible role inside my RHEL8 system. but when I'm trying to run the below command it is showing me an error **'podman' is not 'delegated'.**\r\n\r\n```\r\n[rchakrab@rchakrab:~/Rough/Zeus/roles/motd]$ molecule init scenario --role-name motd --driver-name podman\r\nUsage: molecule init scenario [OPTIONS] [SCENARIO_NAME]\r\nTry 'molecule init scenario --help' for help.\r\n\r\nError: Invalid value for '--driver-name' / '-d': 'podman' is not 'delegated'.\r\n\r\n[rchakrab@rchakrab:~/Rough/Zeus/roles/motd]$ molecule init scenario --help\r\nUsage: molecule init scenario [OPTIONS] [SCENARIO_NAME]\r\n\r\n  Initialize a new scenario for use with Molecule.\r\n\r\n  If name is not specified the 'default' value will be used.\r\n\r\nOptions:\r\n  --dependency-name [galaxy]      Name of dependency to initialize. (galaxy)\r\n  -d, --driver-name [delegated]   Name of driver to initialize. (delegated)\r\n  --lint-name [yamllint]          Name of lint to initialize. (ansible-lint)\r\n  --provisioner-name [ansible]    Name of provisioner to initialize. (ansible)\r\n  -r, --role-name TEXT            Name of the role to create.\r\n  --verifier-name [ansible|testinfra]\r\n                                  Name of verifier to initialize. (ansible)\r\n  --help                          Show this message and exit.\r\n```\r\n**Output of podman version**\r\n```\r\n[rchakrab@rchakrab:~/Rough/Zeus/roles/motd]$ podman version\r\nVersion:      3.2.3\r\nAPI Version:  3.2.3\r\nGo Version:   go1.15.7\r\nBuilt:        Tue Jul 27 12:59:39 2021\r\nOS/Arch:      linux/amd64\r\n```\r\n**Output of podman info --debug**\r\n```\r\n[rchakrab@rchakrab:~/Rough/Zeus/roles/motd]$ podman info --debug\r\nhost:\r\n  arch: amd64\r\n  buildahVersion: 1.21.3\r\n  cgroupControllers: []\r\n  cgroupManager: cgroupfs\r\n  cgroupVersion: v1\r\n  conmon:\r\n    package: conmon-2.0.29-1.module+el8.4.0+11822+6cc1e7d7.x86_64\r\n    path: /usr/bin/conmon\r\n    version: 'conmon version 2.0.29, commit: ae467a0c8001179d4d0adf4ada381108a893d7ec'\r\n  cpus: 8\r\n  distribution:\r\n    distribution: '\"rhel\"'\r\n    version: \"8.4\"\r\n  eventLogger: file\r\n  hostname: rchakrab.pnq.csb\r\n  idMappings:\r\n    gidmap:\r\n    - container_id: 0\r\n      host_id: 119656\r\n      size: 1\r\n    uidmap:\r\n    - container_id: 0\r\n      host_id: 119656\r\n      size: 1\r\n  kernel: 4.18.0-305.17.1.el8_4.x86_64\r\n  linkmode: dynamic\r\n  memFree: 11285520384\r\n  memTotal: 33249550336\r\n  ociRuntime:\r\n    name: runc\r\n    package: runc-1.0.0-74.rc95.module+el8.4.0+11822+6cc1e7d7.x86_64\r\n    path: /usr/bin/runc\r\n    version: |-\r\n      runc version spec: 1.0.2-dev\r\n      go: go1.15.13\r\n      libseccomp: 2.5.1\r\n  os: linux\r\n  remoteSocket:\r\n    path: /run/user/119656/podman/podman.sock\r\n  security:\r\n    apparmorEnabled: false\r\n    capabilities: CAP_NET_RAW,CAP_CHOWN,CAP_DAC_OVERRIDE,CAP_FOWNER,CAP_FSETID,CAP_KILL,CAP_NET_BIND_SERVICE,CAP_SETFCAP,CAP_SETGID,CAP_SETPCAP,CAP_SETUID,CAP_SYS_CHROOT\r\n    rootless: true\r\n    seccompEnabled: true\r\n    seccompProfilePath: /usr/share/containers/seccomp.json\r\n    selinuxEnabled: true\r\n  serviceIsRemote: false\r\n  slirp4netns:\r\n    executable: /usr/bin/slirp4netns\r\n    package: slirp4netns-1.1.8-1.module+el8.4.0+11822+6cc1e7d7.x86_64\r\n    version: |-\r\n      slirp4netns version 1.1.8\r\n      commit: d361001f495417b880f20329121e3aa431a8f90f\r\n      libslirp: 4.3.1\r\n      SLIRP_CONFIG_VERSION_MAX: 3\r\n      libseccomp: 2.5.1\r\n  swapFree: 8589930496\r\n  swapTotal: 8589930496\r\n  uptime: 9h 42m 11.98s (Approximately 0.38 days)\r\nregistries:\r\n  search:\r\n  - registry.access.redhat.com\r\n  - registry.redhat.io\r\n  - docker.io\r\nstore:\r\n  configFile: /home/rchakrab/.config/containers/storage.conf\r\n  containerStore:\r\n    number: 0\r\n    paused: 0\r\n    running: 0\r\n    stopped: 0\r\n  graphDriverName: overlay\r\n  graphOptions:\r\n    overlay.mount_program:\r\n      Executable: /usr/bin/fuse-overlayfs\r\n      Package: fuse-overlayfs-1.6-1.module+el8.4.0+11822+6cc1e7d7.x86_64\r\n      Version: |-\r\n        fusermount3 version: 3.2.1\r\n        fuse-overlayfs: version 1.6\r\n        FUSE library version 3.2.1\r\n        using FUSE kernel interface version 7.26\r\n  graphRoot: /home/rchakrab/.local/share/containers/storage\r\n  graphStatus:\r\n    Backing Filesystem: xfs\r\n    Native Overlay Diff: \"false\"\r\n    Supports d_type: \"true\"\r\n    Using metacopy: \"false\"\r\n  imageStore:\r\n    number: 0\r\n  runRoot: /run/user/119656/containers\r\n  volumePath: /home/rchakrab/.local/share/containers/storage/volumes\r\nversion:\r\n  APIVersion: 3.2.3\r\n  Built: 1627370979\r\n  BuiltTime: Tue Jul 27 12:59:39 2021\r\n  GitCommit: \"\"\r\n  GoVersion: go1.15.7\r\n  OsArch: linux/amd64\r\n  Version: 3.2.3\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3259/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3259/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3256", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3256/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3256/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3256/events", "html_url": "https://github.com/ansible-community/molecule/pull/3256", "id": 1013980067, "node_id": "PR_kwDOAsPDRs4sltu8", "number": 3256, "title": "[PR #3239/212b01c7 backport][stable/3.4] Relax pluggy version dependency", "user": {"login": "patchback[bot]", "id": 45432694, "node_id": "MDM6Qm90NDU0MzI2OTQ=", "avatar_url": "https://avatars.githubusercontent.com/in/21488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patchback%5Bbot%5D", "html_url": "https://github.com/apps/patchback", "followers_url": "https://api.github.com/users/patchback%5Bbot%5D/followers", "following_url": "https://api.github.com/users/patchback%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/patchback%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/patchback%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patchback%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/patchback%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/patchback%5Bbot%5D/repos", "events_url": "https://api.github.com/users/patchback%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/patchback%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-02T08:43:07Z", "updated_at": "2021-10-02T09:33:35Z", "closed_at": "2021-10-02T09:33:35Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3256", "html_url": "https://github.com/ansible-community/molecule/pull/3256", "diff_url": "https://github.com/ansible-community/molecule/pull/3256.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3256.patch", "merged_at": "2021-10-02T09:33:35Z"}, "body": "**This is a backport of PR #3239 as merged into main (212b01c70131cf1157afee740e12ce69c008a571).**\n\nThe pluggy module was added back in 2019 - there are newer releases now,\r\nand we can expect other projects to depend on the 1.0 one - it would\r\nthen conflict with molecule, preventing developers to run smoothly there\r\nunit tests.\r\n\r\n#### PR Type\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3256/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3255", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3255/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3255/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3255/events", "html_url": "https://github.com/ansible-community/molecule/pull/3255", "id": 1013980007, "node_id": "PR_kwDOAsPDRs4sltuh", "number": 3255, "title": "[PR #3236/60ed58ad backport][stable/3.4] Restore option to disable galaxy dependency check", "user": {"login": "patchback[bot]", "id": 45432694, "node_id": "MDM6Qm90NDU0MzI2OTQ=", "avatar_url": "https://avatars.githubusercontent.com/in/21488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patchback%5Bbot%5D", "html_url": "https://github.com/apps/patchback", "followers_url": "https://api.github.com/users/patchback%5Bbot%5D/followers", "following_url": "https://api.github.com/users/patchback%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/patchback%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/patchback%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patchback%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/patchback%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/patchback%5Bbot%5D/repos", "events_url": "https://api.github.com/users/patchback%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/patchback%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-02T08:42:56Z", "updated_at": "2021-10-02T09:33:18Z", "closed_at": "2021-10-02T09:33:17Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3255", "html_url": "https://github.com/ansible-community/molecule/pull/3255", "diff_url": "https://github.com/ansible-community/molecule/pull/3255.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3255.patch", "merged_at": "2021-10-02T09:33:17Z"}, "body": "**This is a backport of PR #3236 as merged into main (60ed58ad8ccfbbb719ad01a011e018dd7254f5f9).**\n\nPR #3235 was incomplete and fixed the issue only for shell dependency\r\nchecker. This PR fixes also for Galaxy dependency checker.\r\n\r\nFixes: #3234", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3255/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3255/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3254", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3254/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3254/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3254/events", "html_url": "https://github.com/ansible-community/molecule/pull/3254", "id": 1013979893, "node_id": "PR_kwDOAsPDRs4slttp", "number": 3254, "title": "[PR #3235/cb50b4a5 backport][stable/3.4] Restore option to disable dependency check", "user": {"login": "patchback[bot]", "id": 45432694, "node_id": "MDM6Qm90NDU0MzI2OTQ=", "avatar_url": "https://avatars.githubusercontent.com/in/21488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patchback%5Bbot%5D", "html_url": "https://github.com/apps/patchback", "followers_url": "https://api.github.com/users/patchback%5Bbot%5D/followers", "following_url": "https://api.github.com/users/patchback%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/patchback%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/patchback%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patchback%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/patchback%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/patchback%5Bbot%5D/repos", "events_url": "https://api.github.com/users/patchback%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/patchback%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-02T08:42:33Z", "updated_at": "2021-10-02T09:32:57Z", "closed_at": "2021-10-02T09:32:57Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3254", "html_url": "https://github.com/ansible-community/molecule/pull/3254", "diff_url": "https://github.com/ansible-community/molecule/pull/3254.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3254.patch", "merged_at": "2021-10-02T09:32:56Z"}, "body": "**This is a backport of PR #3235 as merged into main (cb50b4a50661a844db2156e2ed02f696a8d53a7f).**\n\nFixes: #3234", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3254/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3254/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3253", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3253/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3253/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3253/events", "html_url": "https://github.com/ansible-community/molecule/pull/3253", "id": 1013668017, "node_id": "PR_kwDOAsPDRs4sk5Gu", "number": 3253, "title": "backport: Ensure SystemExit is captured on driver initialization", "user": {"login": "patchback[bot]", "id": 45432694, "node_id": "MDM6Qm90NDU0MzI2OTQ=", "avatar_url": "https://avatars.githubusercontent.com/in/21488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patchback%5Bbot%5D", "html_url": "https://github.com/apps/patchback", "followers_url": "https://api.github.com/users/patchback%5Bbot%5D/followers", "following_url": "https://api.github.com/users/patchback%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/patchback%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/patchback%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patchback%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/patchback%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/patchback%5Bbot%5D/repos", "events_url": "https://api.github.com/users/patchback%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/patchback%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-01T18:58:38Z", "updated_at": "2021-10-02T08:27:42Z", "closed_at": "2021-10-02T08:18:26Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3253", "html_url": "https://github.com/ansible-community/molecule/pull/3253", "diff_url": "https://github.com/ansible-community/molecule/pull/3253.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3253.patch", "merged_at": "2021-10-02T08:18:26Z"}, "body": "**This is a backport of PR #3230 as merged into main (5e717ce98431b7432e55310afcc205b382249319).**\n\nPrevent a broken driver from affecting usability of molecule by catching even SystemExit.\r\n\r\nRelated: https://github.com/ansible-community/molecule-podman/issues/81\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3253/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3253/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3251", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3251/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3251/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3251/events", "html_url": "https://github.com/ansible-community/molecule/pull/3251", "id": 1013546885, "node_id": "PR_kwDOAsPDRs4skh_n", "number": 3251, "title": "Backport fixes from devel", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1450797009, "node_id": "MDU6TGFiZWwxNDUwNzk3MDA5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/backport", "name": "backport", "color": "e51b2c", "default": false, "description": "backport of change to stable branch"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-01T16:35:19Z", "updated_at": "2021-10-02T09:34:47Z", "closed_at": "2021-10-02T09:34:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3251", "html_url": "https://github.com/ansible-community/molecule/pull/3251", "diff_url": "https://github.com/ansible-community/molecule/pull/3251.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3251.patch", "merged_at": null}, "body": "This PR is a backport of the following PRs into 3.4 branch:\r\n\r\n - #3230\r\n - #3235\r\n - #3236\r\n - #3239", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3251/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3251/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3248", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3248/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3248/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3248/events", "html_url": "https://github.com/ansible-community/molecule/pull/3248", "id": 1012147002, "node_id": "PR_kwDOAsPDRs4sgVVw", "number": 3248, "title": "Fix Sphinx config for `sphinx-ansible-theme` v0.8+", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}, {"id": 2416859054, "node_id": "MDU6TGFiZWwyNDE2ODU5MDU0", "url": "https://api.github.com/repos/ansible-community/molecule/labels/hacktoberfest-accepted", "name": "hacktoberfest-accepted", "color": "cc5579", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-30T12:57:32Z", "updated_at": "2021-10-06T11:13:53Z", "closed_at": "2021-09-30T13:15:39Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3248", "html_url": "https://github.com/ansible-community/molecule/pull/3248", "diff_url": "https://github.com/ansible-community/molecule/pull/3248.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3248.patch", "merged_at": "2021-09-30T13:15:39Z"}, "body": "The setup currently present on `main`, has an unconstrained dependency on `sphinx-ansible-theme`. As a result, when the theme was refactored, the RTD site pulled in a newer version that needed minor tweaks to work properly. The builds succeeded on RTD but it went unnoticed that the CSS files were no longer included. Note that the previous `latest` build (mapped to `master` / `main` branch) happened around 9 weeks ago \u2014 I don't know why, maybe a part of the automation is disabled.\r\n\r\nThis patch adds an upper boundary for the dependency and adjusts the Sphinx configuration according to how the theme is supposed to be used.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n- Docs Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3248/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3244", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3244/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3244/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3244/events", "html_url": "https://github.com/ansible-community/molecule/pull/3244", "id": 1005699787, "node_id": "PR_kwDOAsPDRs4sNBF7", "number": 3244, "title": "Raise upper constraint for importlib-metadata", "user": {"login": "mwhahaha", "id": 1191245, "node_id": "MDQ6VXNlcjExOTEyNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1191245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mwhahaha", "html_url": "https://github.com/mwhahaha", "followers_url": "https://api.github.com/users/mwhahaha/followers", "following_url": "https://api.github.com/users/mwhahaha/following{/other_user}", "gists_url": "https://api.github.com/users/mwhahaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/mwhahaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mwhahaha/subscriptions", "organizations_url": "https://api.github.com/users/mwhahaha/orgs", "repos_url": "https://api.github.com/users/mwhahaha/repos", "events_url": "https://api.github.com/users/mwhahaha/events{/privacy}", "received_events_url": "https://api.github.com/users/mwhahaha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-09-23T17:53:52Z", "updated_at": "2021-09-27T11:07:45Z", "closed_at": "2021-09-27T11:07:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3244", "html_url": "https://github.com/ansible-community/molecule/pull/3244", "diff_url": "https://github.com/ansible-community/molecule/pull/3244.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3244.patch", "merged_at": "2021-09-27T11:07:44Z"}, "body": "The current version of importlib-metadata is 4.8.1 which works fine even\r\nwhen running python <3.8.  By restricting to <2, we're limiting the\r\nco-installability of molecule with projects that require higher\r\nimportlib-metadata. \r\n\r\nThe <2 limit was added as part of #3221, but it's not clear why this version\r\nwas selected.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3244/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3243", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3243/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3243/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3243/events", "html_url": "https://github.com/ansible-community/molecule/issues/3243", "id": 1003309222, "node_id": "I_kwDOAsPDRs47zUim", "number": 3243, "title": "Collection resources not autodetected in v3.5.x", "user": {"login": "xoxys", "id": 3391958, "node_id": "MDQ6VXNlcjMzOTE5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3391958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xoxys", "html_url": "https://github.com/xoxys", "followers_url": "https://api.github.com/users/xoxys/followers", "following_url": "https://api.github.com/users/xoxys/following{/other_user}", "gists_url": "https://api.github.com/users/xoxys/gists{/gist_id}", "starred_url": "https://api.github.com/users/xoxys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xoxys/subscriptions", "organizations_url": "https://api.github.com/users/xoxys/orgs", "repos_url": "https://api.github.com/users/xoxys/repos", "events_url": "https://api.github.com/users/xoxys/events{/privacy}", "received_events_url": "https://api.github.com/users/xoxys/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2021-09-21T21:25:18Z", "updated_at": "2022-07-20T09:04:26Z", "closed_at": "2021-10-27T16:29:40Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\nCustom resources installed from a collection during the molecule run are not detected anymore in 3.5.x; the same setup works in v3.4.x \r\n\r\nCollection is successfully installed:\r\n\r\n```\r\nDownloading https://gitea.rknet.org/ansible/xoxys.general/releases/download/v2.1.1/xoxys-general-2.1.1.tar.gz to ~/.ansible/tmp/ansible-local-286064kpbiuuus/tmpt5xycanp/xoxys-general-2.1.1-oak5owje\r\nStarting galaxy collection install process\r\nProcess install dependency map\r\nStarting collection install process\r\nInstalling 'xoxys.general:2.1.1' to '~/.cache/molecule/xoxys.iptables/default/collections/ansible_collections/xoxys/general'\r\nxoxys.general:2.1.1 was installed successfully\r\nINFO     Dependency completed successfully.\r\n```\r\nExample error:\r\n\r\n```\r\nTASK [xoxys.iptables : include_tasks] ******************************************\r\nfatal: [centos7-iptables]: FAILED! => {\"reason\": \"couldn't resolve module/action 'iptables_raw'. This often indicates a misspelling, missing collection, or incorrect module path.\r\n```\r\n\r\nDowngrading to v3.4.x works\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.11.3] \r\n  config file = None\r\n  configured module search path = ['~/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = ~/.local/pipx/venvs/ansible/lib64/python3.9/site-packages/ansible\r\n  ansible collection location = ~/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = ~/.local/bin/ansible\r\n  python version = 3.9.7 (default, Aug 30 2021, 00:00:00) [GCC 11.2.1 20210728 (Red Hat 11.2.1-1)]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nmolecule 3.5.1 using python 3.9 \r\n    ansible:2.11.3\r\n    delegated:3.5.1 from molecule\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3243/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3243/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3239", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3239/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3239/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3239/events", "html_url": "https://github.com/ansible-community/molecule/pull/3239", "id": 999138748, "node_id": "PR_kwDOAsPDRs4r4bE4", "number": 3239, "title": "Relax pluggy version dependency", "user": {"login": "cjeanner", "id": 39397510, "node_id": "MDQ6VXNlcjM5Mzk3NTEw", "avatar_url": "https://avatars.githubusercontent.com/u/39397510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjeanner", "html_url": "https://github.com/cjeanner", "followers_url": "https://api.github.com/users/cjeanner/followers", "following_url": "https://api.github.com/users/cjeanner/following{/other_user}", "gists_url": "https://api.github.com/users/cjeanner/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjeanner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjeanner/subscriptions", "organizations_url": "https://api.github.com/users/cjeanner/orgs", "repos_url": "https://api.github.com/users/cjeanner/repos", "events_url": "https://api.github.com/users/cjeanner/events{/privacy}", "received_events_url": "https://api.github.com/users/cjeanner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 3408854196, "node_id": "LA_kwDOAsPDRs7LLvy0", "url": "https://api.github.com/repos/ansible-community/molecule/labels/backport-3.4", "name": "backport-3.4", "color": "1F4D95", "default": false, "description": "Trigger backporting of this PR to v3.4"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-17T09:20:57Z", "updated_at": "2021-10-02T08:43:08Z", "closed_at": "2021-09-17T11:25:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3239", "html_url": "https://github.com/ansible-community/molecule/pull/3239", "diff_url": "https://github.com/ansible-community/molecule/pull/3239.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3239.patch", "merged_at": "2021-09-17T11:25:30Z"}, "body": "The pluggy module was added back in 2019 - there are newer releases now,\r\nand we can expect other projects to depend on the 1.0 one - it would\r\nthen conflict with molecule, preventing developers to run smoothly there\r\nunit tests.\r\n\r\n#### PR Type\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3239/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3239/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3237", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3237/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3237/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3237/events", "html_url": "https://github.com/ansible-community/molecule/pull/3237", "id": 994787710, "node_id": "MDExOlB1bGxSZXF1ZXN0NzMyNjYxMDEz", "number": 3237, "title": "Ensure subprocesses are run via Runtime()", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 3622991147, "node_id": "LA_kwDOAsPDRs7X8nUr", "url": "https://api.github.com/repos/ansible-community/molecule/labels/AAP", "name": "AAP", "color": "E99695", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-09-13T11:41:50Z", "updated_at": "2022-01-12T11:35:44Z", "closed_at": "2022-01-12T11:35:43Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3237", "html_url": "https://github.com/ansible-community/molecule/pull/3237", "diff_url": "https://github.com/ansible-community/molecule/pull/3237.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3237.patch", "merged_at": "2022-01-12T11:35:43Z"}, "body": "Instead of directly calling subprocess, ensure we use Runtime\r\napi methods for running various commands, most importantly\r\nansible commands.\r\n\r\nThis also removes subprocess-tee dependency as a desired action.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3237/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3236", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3236/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3236/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3236/events", "html_url": "https://github.com/ansible-community/molecule/pull/3236", "id": 992234400, "node_id": "MDExOlB1bGxSZXF1ZXN0NzMwNTk0MDEw", "number": 3236, "title": "Restore option to disable galaxy dependency check", "user": {"login": "fcharlier", "id": 165673, "node_id": "MDQ6VXNlcjE2NTY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/165673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fcharlier", "html_url": "https://github.com/fcharlier", "followers_url": "https://api.github.com/users/fcharlier/followers", "following_url": "https://api.github.com/users/fcharlier/following{/other_user}", "gists_url": "https://api.github.com/users/fcharlier/gists{/gist_id}", "starred_url": "https://api.github.com/users/fcharlier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fcharlier/subscriptions", "organizations_url": "https://api.github.com/users/fcharlier/orgs", "repos_url": "https://api.github.com/users/fcharlier/repos", "events_url": "https://api.github.com/users/fcharlier/events{/privacy}", "received_events_url": "https://api.github.com/users/fcharlier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 3408854196, "node_id": "LA_kwDOAsPDRs7LLvy0", "url": "https://api.github.com/repos/ansible-community/molecule/labels/backport-3.4", "name": "backport-3.4", "color": "1F4D95", "default": false, "description": "Trigger backporting of this PR to v3.4"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-09T13:35:59Z", "updated_at": "2021-10-02T08:42:57Z", "closed_at": "2021-09-09T14:05:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3236", "html_url": "https://github.com/ansible-community/molecule/pull/3236", "diff_url": "https://github.com/ansible-community/molecule/pull/3236.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3236.patch", "merged_at": "2021-09-09T14:05:55Z"}, "body": "PR #3235 was incomplete and fixed the issue only for shell dependency\r\nchecker. This PR fixes also for Galaxy dependency checker.\r\n\r\nFixes: #3234", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3236/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3236/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3235", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3235/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3235/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3235/events", "html_url": "https://github.com/ansible-community/molecule/pull/3235", "id": 992128775, "node_id": "MDExOlB1bGxSZXF1ZXN0NzMwNTAyMTU3", "number": 3235, "title": "Restore option to disable dependency check", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 3408854196, "node_id": "LA_kwDOAsPDRs7LLvy0", "url": "https://api.github.com/repos/ansible-community/molecule/labels/backport-3.4", "name": "backport-3.4", "color": "1F4D95", "default": false, "description": "Trigger backporting of this PR to v3.4"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-09T11:47:50Z", "updated_at": "2021-10-02T08:42:35Z", "closed_at": "2021-09-09T12:01:34Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3235", "html_url": "https://github.com/ansible-community/molecule/pull/3235", "diff_url": "https://github.com/ansible-community/molecule/pull/3235.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3235.patch", "merged_at": "2021-09-09T12:01:33Z"}, "body": "Fixes: #3234", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3235/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3235/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3234", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3234/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3234/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3234/events", "html_url": "https://github.com/ansible-community/molecule/issues/3234", "id": 991220883, "node_id": "MDU6SXNzdWU5OTEyMjA4ODM=", "number": 3234, "title": "3.4.0 Regression: dependency check does not  completely honor the enable: false", "user": {"login": "fcharlier", "id": 165673, "node_id": "MDQ6VXNlcjE2NTY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/165673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fcharlier", "html_url": "https://github.com/fcharlier", "followers_url": "https://api.github.com/users/fcharlier/followers", "following_url": "https://api.github.com/users/fcharlier/following{/other_user}", "gists_url": "https://api.github.com/users/fcharlier/gists{/gist_id}", "starred_url": "https://api.github.com/users/fcharlier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fcharlier/subscriptions", "organizations_url": "https://api.github.com/users/fcharlier/orgs", "repos_url": "https://api.github.com/users/fcharlier/repos", "events_url": "https://api.github.com/users/fcharlier/events{/privacy}", "received_events_url": "https://api.github.com/users/fcharlier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-09-08T14:44:53Z", "updated_at": "2021-09-09T12:16:22Z", "closed_at": "2021-09-09T12:01:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n>  .tox/py36/bin/molecule --version\r\nmolecule 3.4.0 using python 3.6\r\n    ansible:2.9.25\r\n    delegated:3.4.0 from molecule\r\n    podman:1.0.1 from molecule_podman requiring collections: containers.podman>=1.7.0 ansible.posix>=1.3.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\n# Desired Behavior\r\n\r\nWith  `molecule/default/molecule.yml` containing\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\n  enabled: false\r\n```\r\n\r\nThe dependency check should be print (output from molecule 3.3.4):\r\n```\r\nINFO     Running default > dependency\r\nWARNING  Skipping, dependency is disabled.\r\nWARNING  Skipping, dependency is disabled.\r\nINFO     Running default > syntax\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nInstead it tries to install the podman driver dependency:\r\n```\r\nINFO     Running default > dependency\r\nINFO     Running ansible-galaxy collection install --force -v containers.podman:>=1.7.0\r\nCRITICAL Collection 'containers.podman' not found in '['/home/[user]/.cache/ansible-lint/dbf977/collections', '/home/[user]/.ansible/collections', '/usr/share/ansible/collections']'\r\nWARNING  An error occurred during the test sequence action: 'dependency'. Cleaning up.\r\n```\r\n\r\nI suppose it's due to #3192 which calls `super.execute()` before verifying if the dependency check is enabled or not in  [src/molecule/dependency/shell.py](https://github.com/ansible-community/molecule/pull/3192/files#diff-9bf5da9e6f26b467ef208c83b3d5b6987ff591a6de0833a3176e83ba11343c7fR92)\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3234/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3233", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3233/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3233/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3233/events", "html_url": "https://github.com/ansible-community/molecule/issues/3233", "id": 990005589, "node_id": "MDU6SXNzdWU5OTAwMDU1ODk=", "number": 3233, "title": "Ansible's output is missing from molecule commands", "user": {"login": "gmolkvk", "id": 62379037, "node_id": "MDQ6VXNlcjYyMzc5MDM3", "avatar_url": "https://avatars.githubusercontent.com/u/62379037?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gmolkvk", "html_url": "https://github.com/gmolkvk", "followers_url": "https://api.github.com/users/gmolkvk/followers", "following_url": "https://api.github.com/users/gmolkvk/following{/other_user}", "gists_url": "https://api.github.com/users/gmolkvk/gists{/gist_id}", "starred_url": "https://api.github.com/users/gmolkvk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gmolkvk/subscriptions", "organizations_url": "https://api.github.com/users/gmolkvk/orgs", "repos_url": "https://api.github.com/users/gmolkvk/repos", "events_url": "https://api.github.com/users/gmolkvk/events{/privacy}", "received_events_url": "https://api.github.com/users/gmolkvk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-07T13:48:22Z", "updated_at": "2021-09-07T15:37:58Z", "closed_at": "2021-09-07T15:37:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible [core 2.11.4] \r\n  config file = None\r\n  configured module search path = ['/home/redacted/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/redacted/kvk/vault/ansible/roles/test/venv/lib/python3.8/site-packages/ansible\r\n  ansible collection location = /home/redacted/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/redacted/kvk/vault/ansible/roles/test/venv/bin/ansible\r\n  python version = 3.8.10 (default, Jun  2 2021, 10:49:15) [GCC 9.4.0]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nmolecule 3.4.0 using python 3.8 \r\n    ansible:2.11.4\r\n    delegated:3.4.0 from molecule\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip (venv)\r\n\r\n```\r\npython3 -m venv venv && source venv/bin/activate\r\npip install molecule==3.4.0\r\n```\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n```\r\n# above venv still activated\r\npip install ansible==4.4.0\r\n```\r\n\r\nDetail any linters or test runners used:\r\n\r\n```\r\nmolecule init role test\r\ncd test\r\nmolecule test\r\n```\r\n\r\n# Desired Behavior\r\n\r\n```\r\nINFO     default scenario test matrix: dependency, lint, cleanup, destroy, syntax, create, prepare, converge, idempotence, side_effect, verify, cleanup, destroy\r\nINFO     Performing prerun...\r\nWARNING  Failed to guess project directory using git: \r\nINFO     Guessed /moleculetest as project root directory\r\nWARNING  Computed fully qualified role name of moleculetest does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n\r\nINFO     Using /home/runner/.cache/ansible-lint/4b824e/roles/moleculetest symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Added ANSIBLE_ROLES_PATH=~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/runner/.cache/ansible-lint/4b824e/roles\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > lint\r\nINFO     Lint is disabled.\r\nINFO     Running default > cleanup\r\nWARNING  Skipping, cleanup playbook not configured.\r\nINFO     Running default > destroy\r\n\r\nPLAY [Destroy] *****************************************************************\r\n\r\nTASK [Populate instance config] ************************************************\r\nok: [localhost]\r\n\r\nTASK [Dump instance config] ****************************************************\r\nskipping: [localhost]\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\n\r\nINFO     Running default > syntax\r\n# ... etcetera ...\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nNotice how everything after \"INFO     Running default > destroy\" is silent. The PLAY, TASK instructions are missing.\r\n\r\n```\r\nDEBUG    Validating schema /home/redacted/kvk/vault/ansible/roles/test/test/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, lint, cleanup, destroy, syntax, create, prepare, converge, idempotence, side_effect, verify, cleanup, destroy\r\nINFO     Performing prerun...\r\nWARNING  Failed to guess project directory using git: \r\nINFO     Guessed /home/redacted/kvk/vault/ansible/roles/test/test as project root directory\r\nWARNING  Computed fully qualified role name of test does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n\r\nINFO     Using /home/redacted/.cache/ansible-lint/4165d8/roles/test symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Added ANSIBLE_ROLES_PATH=~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/redacted/.cache/ansible-lint/4165d8/roles\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > lint\r\nINFO     Lint is disabled.\r\nINFO     Running default > cleanup\r\nWARNING  Skipping, cleanup playbook not configured.\r\nINFO     Running default > destroy\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /home/redacted/.cache/molecule/test/default/collections:/home/redacted/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /home/redacted/.cache/molecule/test/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/redacted/kvk/vault/ansible/roles/test/venv/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/home/redacted/.cache/molecule/test/default/plugins/filter:/home/redacted/kvk/vault/ansible/roles/test/test/plugins/filter:/home/redacted/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_LIBRARY: /home/redacted/kvk/vault/ansible/roles/test/venv/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/home/redacted/.cache/molecule/test/default/library:/home/redacted/kvk/vault/ansible/roles/test/test/library:/home/redacted/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /home/redacted/.cache/molecule/test/default/roles:/home/redacted/kvk/vault/ansible/roles/test:/home/redacted/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/redacted/.cache/ansible-lint/4165d8/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: delegated\r\nMOLECULE_ENV_FILE: /home/redacted/kvk/vault/ansible/roles/test/test/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/redacted/.cache/molecule/test/default\r\nMOLECULE_FILE: /home/redacted/.cache/molecule/test/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/redacted/.cache/molecule/test/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/redacted/.cache/molecule/test/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /home/redacted/kvk/vault/ansible/roles/test/test\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/redacted/kvk/vault/ansible/roles/test/test/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/redacted/.cache/molecule/test/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/redacted/kvk/vault/ansible/roles/test/test/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/home/redacted/.cache/molecule/test/default/collections:/home/redacted/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/home/redacted/.cache/molecule/test/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/redacted/kvk/vault/ansible/roles/test/venv/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/home/redacted/.cache/molecule/test/default/plugins/filter:/home/redacted/kvk/vault/ansible/roles/test/test/plugins/filter:/home/redacted/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_FORCE_COLOR=1 ANSIBLE_LIBRARY=/home/redacted/kvk/vault/ansible/roles/test/venv/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/home/redacted/.cache/molecule/test/default/library:/home/redacted/kvk/vault/ansible/roles/test/test/library:/home/redacted/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/home/redacted/.cache/molecule/test/default/roles:/home/redacted/kvk/vault/ansible/roles/test:/home/redacted/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/redacted/.cache/ansible-lint/4165d8/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=delegated MOLECULE_ENV_FILE=/home/redacted/kvk/vault/ansible/roles/test/test/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/redacted/.cache/molecule/test/default MOLECULE_FILE=/home/redacted/.cache/molecule/test/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/redacted/.cache/molecule/test/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/redacted/.cache/molecule/test/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/home/redacted/kvk/vault/ansible/roles/test/test MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/redacted/kvk/vault/ansible/roles/test/test/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/redacted/.cache/molecule/test/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/home/redacted/kvk/vault/ansible/roles/test/test/molecule/default/tests\r\n\r\nCOMMAND: ansible-playbook --diff --inventory /home/redacted/.cache/molecule/test/default/inventory --skip-tags molecule-notest,notest /home/redacted/kvk/vault/ansible/roles/test/test/molecule/default/destroy.yml\r\nINFO     Running default > syntax\r\n# ... etcetera ...\r\n```\r\n\r\nThe destroy stage is only an example. I pasted it here so I could truncate the rest. The behaviour is the same for all molecule stages (create, prepare, converge, idempotence, verify). Molecule is now unusable as a test framework, because I cannot see any errors from my role. For example, a failed task looks like this:\r\n\r\n```\r\n# ... etc\r\nCOMMAND: ansible-playbook --diff --inventory /home/redacted/.cache/molecule/test/default/inventory --skip-tags molecule-notest,notest /home/redacted/kvk/vault/ansible/roles/test/test/molecule/default/converge.yml\r\nCRITICAL Ansible return code was 4, command was: ['ansible-playbook', '--diff', '--inventory', '/home/redacted/.cache/molecule/test/default/inventory', '--skip-tags', 'molecule-notest,notest', '/home/redacted/kvk/vault/ansible/roles/test/test/molecule/default/converge.yml']\r\nWARNING  An error occurred during the test sequence action: 'converge'. Cleaning up.\r\nINFO     Running default > cleanup\r\n# ... etc\r\n```\r\n\r\nHowever, when I copy-paste the COMMAND, I **do** get ansible's output. Just to be clear: fixing the ansible error is not the point here. The point is that the whole error message is missing from molecule's output.\r\n\r\n```\r\n$ ansible-playbook --diff --inventory /home/redacted/.cache/molecule/test/default/inventory --skip-tags molecule-notest,notest /home/redacted/kvk/vault/ansible/roles/test/test/molecule/default/converge.yml\r\n\r\nPLAY [Converge] *************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ******************************************************************************************************************************************************************************************************\r\nfatal: [instance]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: ssh: Could not resolve hostname instance: Name or service not known\", \"unreachable\": true}\r\n\r\nPLAY RECAP ******************************************************************************************************************************************************************************************************************\r\ninstance                   : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0\r\n```\r\n\r\nAm I missing something here?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3233/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3233/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3232", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3232/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3232/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3232/events", "html_url": "https://github.com/ansible-community/molecule/issues/3232", "id": 989687259, "node_id": "MDU6SXNzdWU5ODk2ODcyNTk=", "number": 3232, "title": "Ansible output is not displayed", "user": {"login": "ashemsay", "id": 8015125, "node_id": "MDQ6VXNlcjgwMTUxMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/8015125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashemsay", "html_url": "https://github.com/ashemsay", "followers_url": "https://api.github.com/users/ashemsay/followers", "following_url": "https://api.github.com/users/ashemsay/following{/other_user}", "gists_url": "https://api.github.com/users/ashemsay/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashemsay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashemsay/subscriptions", "organizations_url": "https://api.github.com/users/ashemsay/orgs", "repos_url": "https://api.github.com/users/ashemsay/repos", "events_url": "https://api.github.com/users/ashemsay/events{/privacy}", "received_events_url": "https://api.github.com/users/ashemsay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2021-09-07T07:38:22Z", "updated_at": "2021-09-07T12:08:52Z", "closed_at": "2021-09-07T10:35:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible [core 2.11.4]\r\n  config file = None\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/user/.virtualenvs/mol/lib/python3.7/site-packages/ansible\r\n  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/user/.virtualenvs/mol/bin/ansible\r\n  python version = 3.7.3 (default, Jan 22 2021, 20:04:44) [GCC 8.3.0]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nmolecule 3.4.0 using python 3.7\r\n    ansible:2.11.4\r\n    delegated:3.4.0 from molecule\r\n```\r\n\r\nMolecule installation method:\r\n\r\n- pip\r\n\r\nAnsible installation method:\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen runing a molecule command, the ansible output gets displayed\r\n\r\n# Actual Behaviour\r\n\r\nWhen running a molecule command, all the molecule output is displayed but not the ansible-playbook output (i.e \"PLAY ... TASK...\").\r\n\r\nTo reproduce the issue, I used this simple script named `test.sh` in my test directory:\r\n\r\n```\r\n#!/bin/bash\r\nVERSION=${1:-HEAD}\r\nif [ \"$VERSION\" == \"HEAD\" ];then\r\n  pip install molecule ansible\r\nelse\r\n  pip install molecule==3.1.5 ansible==2.9.25\r\nfi\r\nansible --version && molecule --version\r\nrm -rf myrole\r\nmolecule init role myrole\r\ncd myrole || return\r\nmolecule --debug destroy\r\n```\r\n- I created a virtualenv and ran `./test.sh` to install last version of molecule and ansible and execute a `molecule destroy` and got no ansible output\r\n- I created another virtualenv and ran `./test.sh 1` to install version 3.1.5 of molecule and version 2.9.25 of ansible and this time got the expected ansible\r\n\r\nI posted the complete output [here](https://bin.idrix.fr/?7ea238e01d3a6dbc#4mNDxMoTRVJ7xpJ3eqBaSD2dKVZ8TeMSdzP1xTRQRim1)\r\n\r\nI used the `molecule destroy` command as it is the easiest reproducible example but I experience the same issue with `molecule converge` or `molecule test`.\r\n\r\nI tried on debian buster (python 3.7) and ubuntu focal (python 3.8)\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3232/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3232/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3231", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3231/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3231/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3231/events", "html_url": "https://github.com/ansible-community/molecule/issues/3231", "id": 989257731, "node_id": "MDU6SXNzdWU5ODkyNTc3MzE=", "number": 3231, "title": "molecule uses docker driver instead of configured one", "user": {"login": "oschlueter", "id": 10252511, "node_id": "MDQ6VXNlcjEwMjUyNTEx", "avatar_url": "https://avatars.githubusercontent.com/u/10252511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oschlueter", "html_url": "https://github.com/oschlueter", "followers_url": "https://api.github.com/users/oschlueter/followers", "following_url": "https://api.github.com/users/oschlueter/following{/other_user}", "gists_url": "https://api.github.com/users/oschlueter/gists{/gist_id}", "starred_url": "https://api.github.com/users/oschlueter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oschlueter/subscriptions", "organizations_url": "https://api.github.com/users/oschlueter/orgs", "repos_url": "https://api.github.com/users/oschlueter/repos", "events_url": "https://api.github.com/users/oschlueter/events{/privacy}", "received_events_url": "https://api.github.com/users/oschlueter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1585146637, "node_id": "MDU6TGFiZWwxNTg1MTQ2NjM3", "url": "https://api.github.com/repos/ansible-community/molecule/labels/needs-update", "name": "needs-update", "color": "fff9b2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-09-06T15:01:58Z", "updated_at": "2021-10-04T13:22:49Z", "closed_at": "2021-10-04T13:22:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.8.20\r\n  config file = None\r\n  configured module search path = ['/Users/oschlueter/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/ansible\r\n  executable location = /Users/oschlueter/git/ansible/roles/venv/bin/ansible\r\n  python version = 3.6.14 (default, Jul 12 2021, 16:08:05) [GCC Apple LLVM 12.0.5 (clang-1205.0.22.9)]\r\nmolecule 3.4.0 using python 3.6 \r\n    ansible:2.8.20\r\n    delegated:3.4.0 from molecule\r\n    ec2:0.3 from molecule_ec2\r\n    vagrant:0.6.3 from molecule_vagrant\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI create an empty role with either vagrant (or ec2) as driver, invoke `mol check` and see that vagrant (or ec2) is used as driver:\r\n\r\n```\r\n$ mol init role nginx -d vagrant\r\n$ cd nginx\r\n$ mol check\r\n# vagrant is used as driver\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nMolecule attempts to use the `docker` driver:\r\n```\r\n$ mol --debug check\r\nTraceback (most recent call last):\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/bin/mol\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/click/core.py\", line 1137, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/click/core.py\", line 1062, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/click/core.py\", line 1668, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/click/core.py\", line 1404, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/click/core.py\", line 763, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/molecule/command/check.py\", line 111, in check\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/molecule/command/base.py\", line 98, in execute_cmdline_scenarios\r\n    get_configs(args, command_args, ansible_args, glob_str), scenario_name\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/molecule/command/base.py\", line 192, in get_configs\r\n    for c in glob.glob(glob_str)\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/molecule/command/base.py\", line 192, in <listcomp>\r\n    for c in glob.glob(glob_str)\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/molecule/config.py\", line 60, in __call__\r\n    obj.after_init()\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/molecule/config.py\", line 107, in after_init\r\n    self.config = self._reget_config()\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/molecule/config.py\", line 272, in _reget_config\r\n    env = util.merge_dicts(os.environ, self.env)\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/molecule/config.py\", line 190, in env\r\n    \"MOLECULE_INSTANCE_CONFIG\": self.driver.instance_config,\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/molecule/config.py\", line 174, in driver\r\n    driver = api.drivers(config=self)[driver_name]\r\n  File \"/Users/oschlueter/git/ansible/roles/venv/lib/python3.6/site-packages/molecule/api.py\", line 29, in __getitem__\r\n    return self.__dict__[i]\r\nKeyError: 'docker'\r\n```\r\n\r\nI was able to reproduce this problem with `molecule` versions 3.3.4 and 3.4.0 with plugins `molecule-vagrant` and `molecule-ec2`. I'm using Python 3.6.14 on a MacOS 11.5.2.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3231/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3230", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3230/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3230/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3230/events", "html_url": "https://github.com/ansible-community/molecule/pull/3230", "id": 988523794, "node_id": "MDExOlB1bGxSZXF1ZXN0NzI3NDEyNzY3", "number": 3230, "title": "Ensure SystemExit is captured on driver initialization", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 3408854196, "node_id": "LA_kwDOAsPDRs7LLvy0", "url": "https://api.github.com/repos/ansible-community/molecule/labels/backport-3.4", "name": "backport-3.4", "color": "1F4D95", "default": false, "description": "Trigger backporting of this PR to v3.4"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-05T14:33:21Z", "updated_at": "2021-10-01T18:58:39Z", "closed_at": "2021-09-06T07:43:03Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3230", "html_url": "https://github.com/ansible-community/molecule/pull/3230", "diff_url": "https://github.com/ansible-community/molecule/pull/3230.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3230.patch", "merged_at": "2021-09-06T07:43:03Z"}, "body": "Prevent a broken driver from affecting usability of molecule by catching even SystemExit.\r\n\r\nRelated: https://github.com/ansible-community/molecule-podman/issues/81\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3230/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3230/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3226", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3226/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3226/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3226/events", "html_url": "https://github.com/ansible-community/molecule/issues/3226", "id": 987584393, "node_id": "MDU6SXNzdWU5ODc1ODQzOTM=", "number": 3226, "title": "3.4.0 regression: required collection installed but in wrong location", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-09-03T09:26:25Z", "updated_at": "2021-10-04T13:26:37Z", "closed_at": "2021-10-04T13:18:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The current 3.4.0 detects required collections and installs them but in a location that is incorrect and thus the later executions of ansible-playbook fail to find them.\r\n\r\nI suspect this is related to the use of `-p` when calling ansible-galaxy. I also seen something very weird, like the fact that the destination directory looks like `~/.cache/ansible-lint/..`.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3226/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3226/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3225", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3225/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3225/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3225/events", "html_url": "https://github.com/ansible-community/molecule/pull/3225", "id": 986672044, "node_id": "MDExOlB1bGxSZXF1ZXN0NzI1ODU1OTMy", "number": 3225, "title": "Restore auto-installation of local collection", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/34", "html_url": "https://github.com/ansible-community/molecule/milestone/34", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/34/labels", "id": 7565020, "node_id": "MI_kwDOAsPDRs4Ac27c", "number": 34, "title": "4.0.0", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "open", "created_at": "2022-01-12T11:17:08Z", "updated_at": "2023-01-04T20:07:26Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2021-09-02T12:43:27Z", "updated_at": "2022-06-01T07:53:30Z", "closed_at": "2022-06-01T07:53:23Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3225", "html_url": "https://github.com/ansible-community/molecule/pull/3225", "diff_url": "https://github.com/ansible-community/molecule/pull/3225.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3225.patch", "merged_at": "2022-06-01T07:53:23Z"}, "body": "Before 3.4.0 molecule used to auto-install local collection if one is detected. This patch restores this behavior and installs\r\na collection as part of the prerun.\r\n\r\nDepends-On: #3237", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3225/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3222", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3222/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3222/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3222/events", "html_url": "https://github.com/ansible-community/molecule/pull/3222", "id": 983781283, "node_id": "MDExOlB1bGxSZXF1ZXN0NzIzMzA0OTYy", "number": 3222, "title": "docs: add hint for verify playbook", "user": {"login": "ltalirz", "id": 1053245, "node_id": "MDQ6VXNlcjEwNTMyNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1053245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ltalirz", "html_url": "https://github.com/ltalirz", "followers_url": "https://api.github.com/users/ltalirz/followers", "following_url": "https://api.github.com/users/ltalirz/following{/other_user}", "gists_url": "https://api.github.com/users/ltalirz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ltalirz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ltalirz/subscriptions", "organizations_url": "https://api.github.com/users/ltalirz/orgs", "repos_url": "https://api.github.com/users/ltalirz/repos", "events_url": "https://api.github.com/users/ltalirz/events{/privacy}", "received_events_url": "https://api.github.com/users/ltalirz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-08-31T12:02:29Z", "updated_at": "2021-09-02T10:50:14Z", "closed_at": "2021-09-02T10:50:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3222", "html_url": "https://github.com/ansible-community/molecule/pull/3222", "diff_url": "https://github.com/ansible-community/molecule/pull/3222.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3222.patch", "merged_at": "2021-09-02T10:50:14Z"}, "body": "As discussed in https://github.com/ansible-community/molecule/issues/3045, if the `verify.yml` playbook does not run the tested role, the `library` and `module_utils` provided by the tested role are not available there [1].\r\n\r\nUsually, one does not want to re-run the role in the `verify.yml` playbook since it was already run twice before during the converge and idempotence stages, but testing the configuration of the server may well involve some of the modules provided by the role.\r\nOne workaround [suggested by @tadeboro](https://github.com/ansible-community/molecule/issues/3045#issuecomment-835571183) is to add an empty task list to the role and then to restrict tasks of the role to this file when including it in the `verify.yml` playbook.\r\nThis PR adds a note regarding this to the docs.\r\n\r\n[1]  The `library` actually *is* currently available, but [this is an oversight](https://github.com/ansible-community/molecule/issues/3045#issuecomment-835518824); the `module_utils` are not available.\r\n\r\n#### PR Type\r\n\r\n- Docs Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3222/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3222/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3221", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3221/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3221/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3221/events", "html_url": "https://github.com/ansible-community/molecule/pull/3221", "id": 983768327, "node_id": "MDExOlB1bGxSZXF1ZXN0NzIzMjkzOTgw", "number": 3221, "title": "Remove dependency on setuptools", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-31T11:46:42Z", "updated_at": "2021-09-23T17:05:09Z", "closed_at": "2021-09-02T10:49:57Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3221", "html_url": "https://github.com/ansible-community/molecule/pull/3221", "diff_url": "https://github.com/ansible-community/molecule/pull/3221.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3221.patch", "merged_at": "2021-09-02T10:49:57Z"}, "body": "Fixes: #3219\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3221/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3221/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3220", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3220/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3220/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3220/events", "html_url": "https://github.com/ansible-community/molecule/issues/3220", "id": 983762566, "node_id": "MDU6SXNzdWU5ODM3NjI1NjY=", "number": 3220, "title": "fix \"Edit on Github\" link in docs", "user": {"login": "ltalirz", "id": 1053245, "node_id": "MDQ6VXNlcjEwNTMyNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1053245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ltalirz", "html_url": "https://github.com/ltalirz", "followers_url": "https://api.github.com/users/ltalirz/followers", "following_url": "https://api.github.com/users/ltalirz/following{/other_user}", "gists_url": "https://api.github.com/users/ltalirz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ltalirz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ltalirz/subscriptions", "organizations_url": "https://api.github.com/users/ltalirz/orgs", "repos_url": "https://api.github.com/users/ltalirz/repos", "events_url": "https://api.github.com/users/ltalirz/events{/privacy}", "received_events_url": "https://api.github.com/users/ltalirz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-08-31T11:39:26Z", "updated_at": "2021-09-29T18:02:22Z", "closed_at": "2021-09-29T18:02:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The \"Edit on Github\" link in the [molecule docs](https://molecule.readthedocs.io/en/latest/) is currently broken (due to the switch from `master` to `main`).\r\n\r\nThis comment https://github.com/readthedocs/readthedocs.org/issues/7907#issuecomment-828827927 explains how to fix it in the RTD dashboard", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3220/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3220/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3215", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3215/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3215/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3215/events", "html_url": "https://github.com/ansible-community/molecule/issues/3215", "id": 981820516, "node_id": "MDU6SXNzdWU5ODE4MjA1MTY=", "number": 3215, "title": "DOCKER_HOST and docker command not found in PATH", "user": {"login": "pidumenk", "id": 60922995, "node_id": "MDQ6VXNlcjYwOTIyOTk1", "avatar_url": "https://avatars.githubusercontent.com/u/60922995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pidumenk", "html_url": "https://github.com/pidumenk", "followers_url": "https://api.github.com/users/pidumenk/followers", "following_url": "https://api.github.com/users/pidumenk/following{/other_user}", "gists_url": "https://api.github.com/users/pidumenk/gists{/gist_id}", "starred_url": "https://api.github.com/users/pidumenk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pidumenk/subscriptions", "organizations_url": "https://api.github.com/users/pidumenk/orgs", "repos_url": "https://api.github.com/users/pidumenk/repos", "events_url": "https://api.github.com/users/pidumenk/events{/privacy}", "received_events_url": "https://api.github.com/users/pidumenk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-28T12:13:34Z", "updated_at": "2021-08-31T10:32:07Z", "closed_at": "2021-08-31T10:32:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nansible --version && molecule --version\r\nansible [core 2.11.4] \r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /opt/molecule-venv/lib/python3.8/site-packages/ansible\r\n  ansible collection location = /home/user/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /opt/molecule-venv/bin/ansible\r\n  python version = 3.8.10 (default, Jun  2 2021, 10:49:15) [GCC 9.4.0]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nmolecule 3.4.0 using python 3.8 \r\n    ansible:2.11.4\r\n    delegated:3.4.0 from molecule\r\n    docker:1.0.2 from molecule_docker requiring collections: community.docker>=1.8.0\r\n\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip install molecule[docker,lint]\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen I use molecule to test roles in docker containers on remote machine, I suppose my scenario will be executed on remote docker. \r\n\r\n# Actual Behaviour\r\n\r\nCurrently on the converge step I faced with an error sounds like \"msg: docker command not found in PATH\". I don't have docker installed on my master host with molecule because I configired remote docker daemon on a target host by tcp://0.0.0.0:2376.\r\nAlso I don't understand how to specify docker_host or docker_tls_verify and docker_cert_path inside molecule.yml. Only one working way tI found is to add them in my ~/.bashrc.  \r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3215/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3215/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3213", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3213/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3213/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3213/events", "html_url": "https://github.com/ansible-community/molecule/issues/3213", "id": 981000711, "node_id": "MDU6SXNzdWU5ODEwMDA3MTE=", "number": 3213, "title": "ansible-galaxy: error: unrecognized arguments: --collections-file", "user": {"login": "yajo", "id": 973709, "node_id": "MDQ6VXNlcjk3MzcwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/973709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yajo", "html_url": "https://github.com/yajo", "followers_url": "https://api.github.com/users/yajo/followers", "following_url": "https://api.github.com/users/yajo/following{/other_user}", "gists_url": "https://api.github.com/users/yajo/gists{/gist_id}", "starred_url": "https://api.github.com/users/yajo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yajo/subscriptions", "organizations_url": "https://api.github.com/users/yajo/orgs", "repos_url": "https://api.github.com/users/yajo/repos", "events_url": "https://api.github.com/users/yajo/events{/privacy}", "received_events_url": "https://api.github.com/users/yajo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-08-27T08:21:48Z", "updated_at": "2021-08-30T06:44:35Z", "closed_at": "2021-08-27T08:30:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\nFollowing these instructions: https://github.com/ansible-community/molecule/blob/b351ea07fe70f4bb9e01212b86a461b6ac05f4d1/src/molecule/dependency/ansible_galaxy/__init__.py#L31-L49\r\n\r\nI added this to my `molecule.yml`:\r\n\r\n```yaml\r\ndependency:\r\n  name: galaxy\r\n  options:\r\n    role-file: requirements.yaml\r\n    collections-file: requirements.yaml\r\n```\r\n\r\nThen try to test with `molecule test --all`.\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.12\r\n  config file = /var/home/yajo/prodevel/infrastructure/ansible.cfg\r\n  configured module search path = ['/var/home/yajo/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /var/home/yajo/prodevel/infrastructure/.venv/lib/python3.9/site-packages/ansible\r\n  executable location = /var/home/yajo/prodevel/infrastructure/.venv/bin/ansible\r\n  python version = 3.9.6 (default, Jul 16 2021, 00:00:00) [GCC 11.1.1 20210531 (Red Hat 11.1.1-3)]\r\nmolecule 3.4.0 using python 3.9 \r\n    ansible:2.10.12\r\n    delegated:3.4.0 from molecule\r\n    podman:0.3.0 from molecule_podman\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used: I'm using the galaxy dependency manager.\r\n\r\n# Desired Behavior\r\n\r\nDependencies install, tests run. \r\n\r\n# Actual Behaviour\r\n\r\nIt seems latest `ansible-galaxy` binary has no longer support for `--collections-file`, so it fails to install dependencies. See [molecule-test-log.txt](https://github.com/ansible-community/molecule/files/7065294/molecule-test-log.txt).\r\n\r\nBy removing `collections-file` from `molecule.yml`, however, I get these logs:\r\n\r\n```\r\n[WARNING]: The requirements file '/var/home/yajo/prodevel/tecnativa-\r\ninfrastructure/requirements.yaml' contains collections which will be ignored.\r\nTo install these collections run 'ansible-galaxy collection install -r' or to\r\ninstall both at the same time run 'ansible-galaxy install -r' without a custom\r\ninstall path.\r\n```\r\n\r\n... and collections are not installed.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3213/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3213/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3208", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3208/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3208/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3208/events", "html_url": "https://github.com/ansible-community/molecule/issues/3208", "id": 978467315, "node_id": "MDU6SXNzdWU5Nzg0NjczMTU=", "number": 3208, "title": "Installing `molecule[docker]` does not bring all dependencies with Ansible-Core.", "user": {"login": "rjeffman", "id": 54865428, "node_id": "MDQ6VXNlcjU0ODY1NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/54865428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rjeffman", "html_url": "https://github.com/rjeffman", "followers_url": "https://api.github.com/users/rjeffman/followers", "following_url": "https://api.github.com/users/rjeffman/following{/other_user}", "gists_url": "https://api.github.com/users/rjeffman/gists{/gist_id}", "starred_url": "https://api.github.com/users/rjeffman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rjeffman/subscriptions", "organizations_url": "https://api.github.com/users/rjeffman/orgs", "repos_url": "https://api.github.com/users/rjeffman/repos", "events_url": "https://api.github.com/users/rjeffman/events{/privacy}", "received_events_url": "https://api.github.com/users/rjeffman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-08-24T20:41:37Z", "updated_at": "2021-08-31T10:34:24Z", "closed_at": "2021-08-31T10:34:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n* ansible-core-2.11.4\r\n* molecule-3.4.0\r\n* molecule_docker-0.2.4\r\n\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nWhen installing `molecule[docker]`  through `pip`, along with Ansible-core 2.11, all required dependencies should also be installed.\r\n\r\n# Actual Behaviour\r\n\r\nIt seems that `docker_login` is used by `molecule`, and is not being installed, as Ansible-core does not contain community modules.\r\n\r\n```\r\nINFO     centos-7 scenario test matrix: dependency, create, prepare\r\nINFO     Performing prerun...\r\nINFO     Guessed /home/vsts/work/1/s as project root directory\r\nINFO     Added ANSIBLE_LIBRARY=./molecule:plugins/modules\r\nINFO     Added ANSIBLE_COLLECTIONS_PATH=/home/vsts/.cache/ansible-lint/dc0145/collections\r\nINFO     Added ANSIBLE_ROLES_PATH=~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:roles\r\nINFO     Running centos-7 > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running centos-7 > create\r\nINFO     Sanity checks: 'docker'\r\n[DEPRECATION WARNING]: Ansible will require Python 3.8 or newer on the\r\ncontroller starting with Ansible 2.12. Current version: 3.6.14 (default, Jul  5\r\n 2021, 20:52:02) [GCC 9.3.0]. This feature will be removed from ansible-core in\r\n version 2.12. Deprecation warnings can be disabled by setting\r\ndeprecation_warnings=False in ansible.cfg.\r\nERROR! couldn't resolve module/action 'docker_login'. This often indicates a misspelling, missing collection, or incorrect module path.\r\n\r\nThe error appears to be in '/opt/hostedtoolcache/Python/3.6.14/x64/lib/python3.6/site-packages/molecule_docker/playbooks/create.yml': line 11, column 7, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\n\r\nThe offending line appears to be:\r\n\r\n  tasks:\r\n    - name: Log into a Docker registry\r\n      ^ here\r\nCRITICAL Ansible return code was 4, command was: ansible-playbook --inventory /home/vsts/.cache/molecule/s/centos-7/inventory --skip-tags molecule-notest,notest /opt/hostedtoolcache/Python/3.6.14/x64/lib/python3.6/site-packages/molecule_docker/playbooks/create.yml\r\n```\r\n\r\n> Note: This was executed with Azure image ubuntu-20.04.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3208/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3208/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3205", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3205/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3205/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3205/events", "html_url": "https://github.com/ansible-community/molecule/issues/3205", "id": 964232321, "node_id": "MDU6SXNzdWU5NjQyMzIzMjE=", "number": 3205, "title": "Error connecting: Error while fetching server API version: module 'six' has no attribute 'ensure_text'", "user": {"login": "kotovalexarian", "id": 44363825, "node_id": "MDQ6VXNlcjQ0MzYzODI1", "avatar_url": "https://avatars.githubusercontent.com/u/44363825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kotovalexarian", "html_url": "https://github.com/kotovalexarian", "followers_url": "https://api.github.com/users/kotovalexarian/followers", "following_url": "https://api.github.com/users/kotovalexarian/following{/other_user}", "gists_url": "https://api.github.com/users/kotovalexarian/gists{/gist_id}", "starred_url": "https://api.github.com/users/kotovalexarian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kotovalexarian/subscriptions", "organizations_url": "https://api.github.com/users/kotovalexarian/orgs", "repos_url": "https://api.github.com/users/kotovalexarian/repos", "events_url": "https://api.github.com/users/kotovalexarian/events{/privacy}", "received_events_url": "https://api.github.com/users/kotovalexarian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-08-09T17:56:43Z", "updated_at": "2021-08-10T12:07:49Z", "closed_at": "2021-08-09T19:37:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nAnsible: 2.8.0\r\nMolecule: 3.4.0\r\n\r\n# Scenario\r\n\r\n```\r\n$ virtualenv venv\r\n$ source venv/bin/activate\r\n$ pip3 install molecule[docker]\r\n$ molecule init role -d docker foobar\r\n$ cd foobar\r\n$ molecule create\r\n```\r\n\r\n# Desired Behavior\r\n\r\nCreate Docker container for Molecule.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n$ molecule create\r\nINFO     default scenario test matrix: dependency, create, prepare\r\nINFO     Performing prerun...\r\nINFO     Guessed /home/kotovalexarian/repos/global/kotovalexarian/ansible-role-common as project root directory\r\nWARNING  Computed fully qualified role name of foobar does not follow current galaxy requirements.\r\nPlease edit meta/main.yml and assure we can correctly determine full role name:\r\n\r\ngalaxy_info:\r\nrole_name: my_name  # if absent directory name hosting role is used instead\r\nnamespace: my_galaxy_namespace  # if absent, author is used instead\r\n\r\nNamespace: https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespace-limitations\r\nRole: https://galaxy.ansible.com/docs/contributing/creating_role.html#role-names\r\n\r\nAs an alternative, you can add 'role-name' to either skip_list or warn_list.\r\n\r\nINFO     Using /home/kotovalexarian/.cache/ansible-lint/e4342b/roles/foobar symlink to current repository in order to enable Ansible to find the role using its expected full name.\r\nINFO     Added ANSIBLE_ROLES_PATH=~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/kotovalexarian/.cache/ansible-lint/e4342b/roles\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nINFO     Sanity checks: 'docker'\r\n\r\nPLAY [Create] ********************************************************************************************************************************************************************************************************************************\r\n\r\nTASK [Log into a Docker registry] ************************************************************************************************************************************************************************************************************\r\nskipping: [localhost] => (item={'image': 'docker.io/pycontribs/centos:8', 'name': 'instance', 'pre_build_image': True}) \r\n\r\nTASK [Check presence of custom Dockerfiles] **************************************************************************************************************************************************************************************************\r\nok: [localhost] => (item={'image': 'docker.io/pycontribs/centos:8', 'name': 'instance', 'pre_build_image': True})\r\n\r\nTASK [Create Dockerfiles from image names] ***************************************************************************************************************************************************************************************************\r\nskipping: [localhost] => (item={'image': 'docker.io/pycontribs/centos:8', 'name': 'instance', 'pre_build_image': True}) \r\n\r\nTASK [Discover local Docker images] **********************************************************************************************************************************************************************************************************\r\nfailed: [localhost] (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'item': {'image': 'docker.io/pycontribs/centos:8', 'name': 'instance', 'pre_build_image': True}, 'ansible_loop_var': 'item', 'i': 0}) => {\"ansible_loop_var\": \"item\", \"changed\": false, \"item\": {\"ansible_loop_var\": \"item\", \"changed\": false, \"i\": 0, \"item\": {\"image\": \"docker.io/pycontribs/centos:8\", \"name\": \"instance\", \"pre_build_image\": true}, \"skip_reason\": \"Conditional result was False\", \"skipped\": true}, \"msg\": \"Error connecting: Error while fetching server API version: module 'six' has no attribute 'ensure_text'\"}\r\n\r\nPLAY RECAP ***********************************************************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0\r\n\r\nCRITICAL Ansible return code was 2, command was: ansible-playbook --inventory /home/kotovalexarian/.cache/molecule/foobar/default/inventory --skip-tags molecule-notest,notest /home/kotovalexarian/repos/global/kotovalexarian/ansible-role-common/venv/lib/python3.8/site-packages/molecule_docker/playbooks/create.yml\r\n\r\n```\r\n\r\n## Featured lines\r\n\r\n```\r\nTASK [Discover local Docker images] **********************************************************************************************************************************************************************************************************\r\nfailed: [localhost] (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'item': {'image': 'docker.io/pycontribs/centos:8', 'name': 'instance', 'pre_build_image': True}, 'ansible_loop_var': 'item', 'i': 0}) => {\"ansible_loop_var\": \"item\", \"changed\": false, \"item\": {\"ansible_loop_var\": \"item\", \"changed\": false, \"i\": 0, \"item\": {\"image\": \"docker.io/pycontribs/centos:8\", \"name\": \"instance\", \"pre_build_image\": true}, \"skip_reason\": \"Conditional result was False\", \"skipped\": true}, \"msg\": \"Error connecting: Error while fetching server API version: module 'six' has no attribute 'ensure_text'\"}\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3205/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3205/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3204", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3204/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3204/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3204/events", "html_url": "https://github.com/ansible-community/molecule/issues/3204", "id": 962601793, "node_id": "MDU6SXNzdWU5NjI2MDE3OTM=", "number": 3204, "title": "Inventory output gets censored with ********", "user": {"login": "Nightreaver", "id": 3270156, "node_id": "MDQ6VXNlcjMyNzAxNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3270156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nightreaver", "html_url": "https://github.com/Nightreaver", "followers_url": "https://api.github.com/users/Nightreaver/followers", "following_url": "https://api.github.com/users/Nightreaver/following{/other_user}", "gists_url": "https://api.github.com/users/Nightreaver/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nightreaver/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nightreaver/subscriptions", "organizations_url": "https://api.github.com/users/Nightreaver/orgs", "repos_url": "https://api.github.com/users/Nightreaver/repos", "events_url": "https://api.github.com/users/Nightreaver/events{/privacy}", "received_events_url": "https://api.github.com/users/Nightreaver/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-08-06T10:15:08Z", "updated_at": "2022-01-11T17:51:29Z", "closed_at": "2022-01-11T17:51:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the main branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report ?\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.12\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/s/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/s/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/s/.local/bin/ansible\r\n  python version = 3.6.9 (default, Jan 26 2021, 15:33:00) [GCC 8.4.0]\r\nmolecule 3.3.4 using python 3.6 \r\n    ansible:2.10.12\r\n    delegated:3.3.4 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n    vmware:0.3.6 from molecule_vmware\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nprint uncensored values\r\n\r\n# Actual Behaviour\r\n\r\nIm running molecule with molecule vmware on vsphere esx 6.7\r\nI have different roles which are linux and windows ones.\r\nSurprisingly, for linux hosts everything works well, and inventoy  or lets say the `- debug: msg: \"{{server}}\"` output in that role looks fine\r\n\r\n```\r\n\"item=\"{\r\n   \"changed\":true,\r\n   \"failed\":false,\r\n   \"instance\":{\r\n      \"module_hw\":true,\r\n      \"hw_name\":\"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n      \"hw_power_status\":\"poweredOn\",\r\n      \"hw_guest_full_name\":\"\",\r\n      \"hw_guest_id\":\"None\",\r\n      \"hw_product_uuid\":\"42045cb0-5d80-7abe-4b5f-141a11ed89d4\",\r\n      \"hw_processor_count\":4,\r\n      \"hw_cores_per_socket\":1,\r\n      \"hw_memtotal_mb\":4048,\r\n      \"hw_interfaces\":[\r\n         \"eth0\"\r\n      ],\r\n      \"hw_datastores\":[\r\n         \"VMFS_11\"\r\n      ],\r\n[...]\r\n```\r\n\r\nOn the windows role however it gets censored like crazy\r\n\r\n```\r\n\"item=\"{\r\n   \"changed\":true,\r\n   \"failed\":false,\r\n   \"instance\":{\r\n      \"module_hw\":true,\r\n      \"hw_name\":\"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n      \"hw_power_status\":\"poweredOn\",\r\n      \"hw_guest_full_name\":\"Microsoft Windows Server 20********9 (64-bit)\",\r\n      \"hw_guest_id\":\"windows20********9srv_64Guest\",\r\n      \"hw_product_uuid\":\"420498****************-dd28-0c4d-e7e4-9df5b348204a\",\r\n      \"hw_processor_count\":4,\r\n      \"hw_cores_per_socket\":\"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n      \"hw_memtotal_mb\":4048,\r\n      \"hw_interfaces\":[\r\n         \"eth0\"\r\n      ],\r\n      \"hw_datastores\":[\r\n         \"VMFS_****************\"\r\n      ],\r\n[...]\r\n```\r\n\r\nSo overall, every `1` in that early log get censored, which of course includes IP address\r\n\r\n```\r\n[...]\r\n         \"ipaddresses\":[\r\n            \"fe80::8d28:a9bc:f********b6:d957\",\r\n            \"********0.42.********87.********32\"\r\n         ],\r\n[...]\r\n```\r\n\r\nwhich of course ends up in the inventory (only for win role)\r\n\r\n```\r\nall:\r\n  hosts:\r\n    molecule-win: &id001\r\n      ansible_connection: winrm\r\n      ansible_host: '********0.42.********87.********32'\r\n      ansible_password: 5uper5ecret\r\n      ansible_port: '5986'\r\n      ansible_user: Administrator\r\n      ansible_winrm_server_cert_validation: ignore\r\n      ansible_winrm_transport: ntlm\r\n[...]\r\n\r\n```\r\n\r\nI was wondering if this is because `hw_cores_per_socket` (which is 1) get censored on windows but no on linux, but I couldnt find any reference to this in `molecule_vmware` plugin\r\n \r\nIn molecule I have no idea where to start looking, any suggestions welcome \r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3204/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3204/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3202", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3202/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3202/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3202/events", "html_url": "https://github.com/ansible-community/molecule/pull/3202", "id": 958018412, "node_id": "MDExOlB1bGxSZXF1ZXN0NzAxMzU2ODU4", "number": 3202, "title": "Rename master branch to main", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-02T10:54:33Z", "updated_at": "2021-08-02T11:12:46Z", "closed_at": "2021-08-02T11:12:43Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3202", "html_url": "https://github.com/ansible-community/molecule/pull/3202", "diff_url": "https://github.com/ansible-community/molecule/pull/3202.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3202.patch", "merged_at": "2021-08-02T11:12:43Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3202/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3202/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3199", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3199/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3199/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3199/events", "html_url": "https://github.com/ansible-community/molecule/pull/3199", "id": 947528296, "node_id": "MDExOlB1bGxSZXF1ZXN0NjkyNDk3Mzg5", "number": 3199, "title": "Made prune more resilient to filesystem errors", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/33", "html_url": "https://github.com/ansible-community/molecule/milestone/33", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/33/labels", "id": 6960643, "node_id": "MI_kwDOAsPDRs4AajYD", "number": 33, "title": "3.5.0", "description": "The main goal of this release is to adopt use of ansible-compat library, while trying to minimize the amount of disruptive changes.\r\n\r\nUsers trying to adopt this version should be aware that the way we alter ansible include paths for collections, roles and modules  and install these for testing have changed.", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "open", "created_at": "2021-07-19T10:56:24Z", "updated_at": "2022-06-17T08:18:30Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2021-07-19T10:55:39Z", "updated_at": "2022-04-07T09:54:46Z", "closed_at": "2021-08-31T16:03:15Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3199", "html_url": "https://github.com/ansible-community/molecule/pull/3199", "diff_url": "https://github.com/ansible-community/molecule/pull/3199.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3199.patch", "merged_at": null}, "body": "Fixed observed problem with prune() where it would have failed due\r\nto exceptions being raised during pruning.\r\n\r\nThis was observed occurring randomly while running tests with xdist.\r\n\r\nRelated: #3178", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3199/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3199/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3195", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3195/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3195/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3195/events", "html_url": "https://github.com/ansible-community/molecule/pull/3195", "id": 947019132, "node_id": "MDExOlB1bGxSZXF1ZXN0NjkyMDc4MjY1", "number": 3195, "title": "Drop use of pytest-helpers-namespace", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-18T12:03:32Z", "updated_at": "2021-08-02T16:19:47Z", "closed_at": "2021-07-19T06:45:19Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3195", "html_url": "https://github.com/ansible-community/molecule/pull/3195", "diff_url": "https://github.com/ansible-community/molecule/pull/3195.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3195.patch", "merged_at": "2021-07-19T06:45:19Z"}, "body": "Related: https://github.com/saltstack/pytest-helpers-namespace/issues/10\r\n\r\nThis change is  not marked as major because it will only break testing of some molecule drivers. Most important ones were already fixed before this change was made.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3195/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3195/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3194", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3194/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3194/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3194/events", "html_url": "https://github.com/ansible-community/molecule/pull/3194", "id": 946835503, "node_id": "MDExOlB1bGxSZXF1ZXN0NjkxOTQwOTU1", "number": 3194, "title": "Upgrade pylint", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-17T14:33:03Z", "updated_at": "2021-07-18T06:49:04Z", "closed_at": "2021-07-18T06:49:03Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3194", "html_url": "https://github.com/ansible-community/molecule/pull/3194", "diff_url": "https://github.com/ansible-community/molecule/pull/3194.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3194.patch", "merged_at": "2021-07-18T06:49:03Z"}, "body": "Prepares for bumping pylint by fixing some errors reported by newer version.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3194/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3194/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3186", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3186/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3186/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3186/events", "html_url": "https://github.com/ansible-community/molecule/issues/3186", "id": 941520818, "node_id": "MDU6SXNzdWU5NDE1MjA4MTg=", "number": 3186, "title": "Linting should not require the default scenario to exist", "user": {"login": "xabinapal", "id": 570795, "node_id": "MDQ6VXNlcjU3MDc5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/570795?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xabinapal", "html_url": "https://github.com/xabinapal", "followers_url": "https://api.github.com/users/xabinapal/followers", "following_url": "https://api.github.com/users/xabinapal/following{/other_user}", "gists_url": "https://api.github.com/users/xabinapal/gists{/gist_id}", "starred_url": "https://api.github.com/users/xabinapal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xabinapal/subscriptions", "organizations_url": "https://api.github.com/users/xabinapal/orgs", "repos_url": "https://api.github.com/users/xabinapal/repos", "events_url": "https://api.github.com/users/xabinapal/events{/privacy}", "received_events_url": "https://api.github.com/users/xabinapal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-11T19:47:45Z", "updated_at": "2022-06-01T10:10:20Z", "closed_at": "2022-06-01T10:10:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible [core 2.11.2]\r\n  config file = None\r\n  configured module search path = ['~/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = ~/.pyenv/versions/3.9.1/envs/ansible-devel/lib/python3.9/site-packages/ansible\r\n  ansible collection location = ~/.ansible/collections:/usr/share/ansible/collections\r\n  executable location =~/.pyenv/versions/ansible-devel/bin/ansible\r\n  python version = 3.9.1 (default, Feb 21 2021, 17:37:26) [Clang 12.0.0 (clang-1200.0.31.1)]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nmolecule 3.3.4 using python 3.9\r\n    ansible:2.11.2\r\n    delegated:3.3.4 from molecule\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nAs per the [docs](https://molecule.readthedocs.io/en/latest/configuration.html#lint), linting is usually a repository task, not an scenario one:\r\n\r\n> The issue was that molecule runs on scenarios and linting is usually performed at repository level.\r\n\r\nIt would be great to allow `molecule lint` run if `.config/molecule/config.yml` exists but `default` scenario does not exist, i.e. the `molecule/default/molecule.yml` file is not created. `lint` section of `.config/molecule/config.yml` should be used in that case. If a different scenario is specified, or if the `default` scenario exists, behaviour should be the usual one.\r\n\r\nThis would allow projects without a `default` scenario to be linted with `molecule` but without the need to specify an specific scenario.\r\n\r\n# Actual Behaviour\r\n\r\n`molecule` exits because scenario is not found:\r\n\r\n```console (paste below)\r\n$ mkdir -p .config/molecule\r\n$ cat <<EOF > .config/molecule/config.yml\r\n---\r\nlint: |\r\n  set -e\r\n  ansible-lint\r\nEOF\r\n\r\n$ molecule -v lint\r\nINFO     Found config file ~/ansible-devel/.config/molecule/config.yml\r\nCRITICAL 'molecule/default/molecule.yml' glob failed.  Exiting.\r\n```\r\n\r\n```console (paste below)\r\n$ molecule init scenario default\r\nINFO     Found config file ~/ansible-devel/.config/molecule/config.yml\r\nINFO     Initializing new scenario default...\r\nINFO     Initialized scenario in ~/ansible-devel/molecule/default successfully.\r\n\r\n$ molecule -v lint\r\nINFO     Found config file ~/ansible-devel/.config/molecule/config.yml\r\nDEBUG    Validating schema ~/ansible-devel/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, lint\r\nINFO     Performing prerun...\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > lint\r\nCOMMAND: set -e\r\nansible-lint\r\n\r\nLoading custom .yamllint config file, this extends our internal yamllint config.\r\n```\r\n\r\nAs a workaround, I'm currently creating a `default` scenario with only an **almost** empty `molecule.yml`, as it requires at least one instance to be defined:\r\n```console (paste below)\r\n$ mkdir -p molecule/default\r\n$ cat <<EOF > molecule/default/molecule.yml\r\n---\r\nplatforms:\r\n  - name: dummy\r\nEOF\r\n\r\n$ molecule -v lint\r\nINFO     Found config file ~/ansible-devel/.config/molecule/config.yml\r\nDEBUG    Validating schema ~/ansible-devel/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, lint\r\nINFO     Performing prerun...\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > lint\r\nCOMMAND: set -e\r\nansible-lint\r\n\r\nLoading custom .yamllint config file, this extends our internal yamllint config.\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3186/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3180", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3180/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3180/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3180/events", "html_url": "https://github.com/ansible-community/molecule/pull/3180", "id": 938685072, "node_id": "MDExOlB1bGxSZXF1ZXN0Njg1MDIyODgw", "number": 3180, "title": "Use portable cache from ansible-compat", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/33", "html_url": "https://github.com/ansible-community/molecule/milestone/33", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/33/labels", "id": 6960643, "node_id": "MI_kwDOAsPDRs4AajYD", "number": 33, "title": "3.5.0", "description": "The main goal of this release is to adopt use of ansible-compat library, while trying to minimize the amount of disruptive changes.\r\n\r\nUsers trying to adopt this version should be aware that the way we alter ansible include paths for collections, roles and modules  and install these for testing have changed.", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "open", "created_at": "2021-07-19T10:56:24Z", "updated_at": "2022-06-17T08:18:30Z", "due_on": null, "closed_at": null}, "comments": 1, "created_at": "2021-07-07T09:27:07Z", "updated_at": "2021-09-02T12:30:45Z", "closed_at": "2021-09-02T12:30:44Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3180", "html_url": "https://github.com/ansible-community/molecule/pull/3180", "diff_url": "https://github.com/ansible-community/molecule/pull/3180.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3180.patch", "merged_at": "2021-09-02T12:30:44Z"}, "body": "This simplifies use of caching across multiple versions of Python.\r\nImplementation is inspired from the the approach taken by https://github.com/apache/airflow/ project.\r\n\r\nRelated: https://github.com/python/mypy/issues/1362", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3180/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3180/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3179", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3179/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3179/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3179/events", "html_url": "https://github.com/ansible-community/molecule/issues/3179", "id": 938005859, "node_id": "MDU6SXNzdWU5MzgwMDU4NTk=", "number": 3179, "title": "Imported external role will use your task file if the name exists in your tasks", "user": {"login": "arouene", "id": 20049990, "node_id": "MDQ6VXNlcjIwMDQ5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/20049990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arouene", "html_url": "https://github.com/arouene", "followers_url": "https://api.github.com/users/arouene/followers", "following_url": "https://api.github.com/users/arouene/following{/other_user}", "gists_url": "https://api.github.com/users/arouene/gists{/gist_id}", "starred_url": "https://api.github.com/users/arouene/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arouene/subscriptions", "organizations_url": "https://api.github.com/users/arouene/orgs", "repos_url": "https://api.github.com/users/arouene/repos", "events_url": "https://api.github.com/users/arouene/events{/privacy}", "received_events_url": "https://api.github.com/users/arouene/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-07-06T15:16:06Z", "updated_at": "2021-11-08T21:58:02Z", "closed_at": "2021-11-08T21:58:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.9\r\n  config file = None\r\n  configured module search path = ['/home/arouene/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/arouene/Lucca/.venv/lib64/python3.9/site-packages/ansible\r\n  executable location = /home/arouene/Lucca/.venv/bin/ansible\r\n  python version = 3.9.5 (default, May 14 2021, 00:00:00) [GCC 11.1.1 20210428 (Red Hat 11.1.1-1)]\r\n```\r\n```\r\nmolecule 3.3.1 using python 3.9 \r\n    ansible:2.10.9\r\n    delegated:3.3.1 from molecule\r\n    libvirt:0.0.4 from molecule_libvirt\r\n    podman:0.3.0 from molecule_podman\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip (in a venv)\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip (in a venv)\r\n\r\n# Desired Behavior \r\n\r\nIn a molecule scenario with an imported role :\r\n\r\nrequirements.yml\r\n```\r\n- name: consul\r\n  src: git+https://github.com/ansible-community/ansible-consul.git\r\n  version: v2.6.1\r\n```\r\n\r\nconverge.yml\r\n```\r\n- name: Converge\r\n  hosts: all\r\n  become_user: root\r\n  become: yes\r\n  tasks:\r\n    - name: \"Install custom role\"\r\n      include_role:\r\n        name: \"custom-role\"\r\n\r\n    - name: \"Install consul\"\r\n      include_role:\r\n        name: \"consul\"\r\n```\r\n\r\nThe layout of _custom-role_ is : \r\n```\r\n.\r\n\u251c\u2500\u2500 defaults\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 handlers\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 meta\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 molecule\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 default\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 converge.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 INSTALL.rst\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 prepare.yml\r\n\u2502       \u251c\u2500\u2500 requirements.yml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 verify.yml\r\n\u251c\u2500\u2500 README.md\r\n\u251c\u2500\u2500 tasks\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 configure.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 install.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 main.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 service.yml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 user_group.yml\r\n\u251c\u2500\u2500 templates\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ...\r\n\u251c\u2500\u2500 tests\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 inventory\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 test.yml\r\n\u2514\u2500\u2500 vars\r\n    \u2514\u2500\u2500 main.yml\r\n```\r\n\r\nDesired behavior is for a `molecule converge` to install consul and my custom-role in the same container/VM.\r\n\r\n# Actual Behaviour\r\n\r\nThe external role _consul_ is using a tasks file named **user_group.yml** as do my custom role.\r\n\r\nconsul/tasks/nix.yml:29\r\n```\r\n29 - name: Include user and group settings\r\n30   import_tasks: user_group.yml\r\n```\r\n\r\n```\r\nTASK [consul : Read bootstrapped state] ****************************************\r\ntask path: /home/arouene/.cache/molecule/custom-role/consul/roles/consul/tasks/nix.yml:22\r\n [...]\r\nTASK [consul : Add custom role group] *******************************************\r\ntask path: /home/arouene/Lucca/projs/roles/custom-role/tasks/user_group.yml:1\r\n```\r\n\r\nAs we can see in the **task path**, while in the _consul_ role, the **user_group.yml** used is the one of my _custom role_ instead of the one in the _consul_ role directory.\r\n\r\nThe issue can be mitigated by changing the file name, but it can be very limiting and can lead to unforeseeable problems.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3179/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3179/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3172", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3172/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3172/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3172/events", "html_url": "https://github.com/ansible-community/molecule/pull/3172", "id": 935619436, "node_id": "MDExOlB1bGxSZXF1ZXN0NjgyNTAxNDE1", "number": 3172, "title": "Assure we also run functional tests", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-02T10:04:38Z", "updated_at": "2021-07-02T12:55:21Z", "closed_at": "2021-07-02T12:55:21Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3172", "html_url": "https://github.com/ansible-community/molecule/pull/3172", "diff_url": "https://github.com/ansible-community/molecule/pull/3172.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3172.patch", "merged_at": "2021-07-02T12:55:21Z"}, "body": "* Assure we do not skip running functional test\r\n* Temporary disables the 4 broken functional tests, fixes in follow-ups.\r\n\r\nRelated: #3171\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3172/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3172/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3171", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3171/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3171/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3171/events", "html_url": "https://github.com/ansible-community/molecule/issues/3171", "id": 935569830, "node_id": "MDU6SXNzdWU5MzU1Njk4MzA=", "number": 3171, "title": "Broken functional tests for init role and init scenario", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 3416733358, "node_id": "LA_kwDOAsPDRs7Lpzau", "url": "https://api.github.com/repos/ansible-community/molecule/labels/new", "name": "new", "color": "0052CC", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/33", "html_url": "https://github.com/ansible-community/molecule/milestone/33", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/33/labels", "id": 6960643, "node_id": "MI_kwDOAsPDRs4AajYD", "number": 33, "title": "3.5.0", "description": "The main goal of this release is to adopt use of ansible-compat library, while trying to minimize the amount of disruptive changes.\r\n\r\nUsers trying to adopt this version should be aware that the way we alter ansible include paths for collections, roles and modules  and install these for testing have changed.", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "open", "created_at": "2021-07-19T10:56:24Z", "updated_at": "2022-06-17T08:18:30Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2021-07-02T09:03:02Z", "updated_at": "2022-06-17T08:18:29Z", "closed_at": "2022-06-17T08:18:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Few hours ago I discovered that we are only running `unit/` tests on CI/CD and that some of the functional tests we had got broken at some point.\r\n\r\nFixing these would not be easy so I will attempt a gradual fixing, with first priority being to ensure we run all tests, and marking the 4 broken ones accordingly:\r\n```\r\nFAILED src/molecule/test/functional/test_command.py::test_command_init_role[delegated] - assert 1 == 0\r\nFAILED src/molecule/test/functional/test_command.py::test_command_init_scenario[delegated] - assert 1 == 0\r\nFAILED src/molecule/test/functional/test_command.py::test_command_dependency[galaxy] - AssertionError: assert 2 == 0\r\nFAILED src/molecule/test/functional/test_command.py::test_command_dependency[shell]\r\n```\r\n\r\nThe first two tests are failing because converge fails on the newly created scenarios, for reasons outside our control - like lots of linting errors originating from galaxy templates.\r\n\r\nThe last two are failing because they utility collection `community.molecule` is installed inside the ephemeral molecule folder and this folder is no longer used by the called commands. That is a regression that was triggered by the introduction of prerun phase, which automatically installs deps into a different location and defines ansible collection include path. When this is defined, it prevents molecule from adding its own ephemeral folder to the include paths. \r\n\r\nWhile I am not yet sure, I believe it we should likely stop messing with role and collection paths inside molecule itself, basically stop using and configuring `ephemeral/collections` and `ephemeral/roles`. \r\n\r\nI do suspect that the second bug is the same as #3135", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3171/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3171/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3170", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3170/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3170/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3170/events", "html_url": "https://github.com/ansible-community/molecule/pull/3170", "id": 934927755, "node_id": "MDExOlB1bGxSZXF1ZXN0NjgxOTI5MDYz", "number": 3170, "title": "Improve molecule init", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-01T14:48:59Z", "updated_at": "2021-07-01T16:35:12Z", "closed_at": "2021-07-01T16:35:11Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3170", "html_url": "https://github.com/ansible-community/molecule/pull/3170", "diff_url": "https://github.com/ansible-community/molecule/pull/3170.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3170.patch", "merged_at": "2021-07-01T16:35:11Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3170/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3170/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3168", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3168/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3168/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3168/events", "html_url": "https://github.com/ansible-community/molecule/pull/3168", "id": 930294915, "node_id": "MDExOlB1bGxSZXF1ZXN0Njc4MDE0MDcw", "number": 3168, "title": "Fix pip documentation link", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-06-25T15:45:15Z", "updated_at": "2021-06-28T11:02:34Z", "closed_at": "2021-06-28T10:54:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3168", "html_url": "https://github.com/ansible-community/molecule/pull/3168", "diff_url": "https://github.com/ansible-community/molecule/pull/3168.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3168.patch", "merged_at": "2021-06-28T10:54:06Z"}, "body": "Pip's documentation has been rearranged a bit, including the usage document that the Molecule documentation pointed to. This commit updated the link so that it now points to the quickstart document.\r\n\r\n#### PR Type\r\n\r\n- Docs Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3168/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3168/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3165", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3165/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3165/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3165/events", "html_url": "https://github.com/ansible-community/molecule/pull/3165", "id": 929576093, "node_id": "MDExOlB1bGxSZXF1ZXN0Njc3NDA2MTc4", "number": 3165, "title": "Fix testing of collections checkouts", "user": {"login": "provenvelocity", "id": 45375115, "node_id": "MDQ6VXNlcjQ1Mzc1MTE1", "avatar_url": "https://avatars.githubusercontent.com/u/45375115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/provenvelocity", "html_url": "https://github.com/provenvelocity", "followers_url": "https://api.github.com/users/provenvelocity/followers", "following_url": "https://api.github.com/users/provenvelocity/following{/other_user}", "gists_url": "https://api.github.com/users/provenvelocity/gists{/gist_id}", "starred_url": "https://api.github.com/users/provenvelocity/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/provenvelocity/subscriptions", "organizations_url": "https://api.github.com/users/provenvelocity/orgs", "repos_url": "https://api.github.com/users/provenvelocity/repos", "events_url": "https://api.github.com/users/provenvelocity/events{/privacy}", "received_events_url": "https://api.github.com/users/provenvelocity/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-06-24T20:11:42Z", "updated_at": "2021-09-06T07:44:50Z", "closed_at": "2021-09-06T07:44:49Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3165", "html_url": "https://github.com/ansible-community/molecule/pull/3165", "diff_url": "https://github.com/ansible-community/molecule/pull/3165.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3165.patch", "merged_at": null}, "body": "I have detailed documentation on the collection issue finally narrowed down.\r\n\r\nhttps://github.com/provenvelocity/devops_test/tree/Collections_issue.\r\n\r\nThe issue is ansible is not aware of the current collection your in. This was fixed in ansible-lint by coping over the current collection. This fix allows molecule to change the cache_dir for lint and then better-integrated ansible lint with molecule. \r\n\r\nI know there is a long-term fix in the works but this will bridge the gaps. \r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\n#### This Fixes the following issue:\r\n\r\nhttps://github.com/ansible-community/molecule/issues/3135\r\n\r\nIt Relies on this issue being fixed. \r\n\r\nhttps://github.com/ansible-community/ansible-lint/issues/1641\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3165/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3162", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3162/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3162/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3162/events", "html_url": "https://github.com/ansible-community/molecule/pull/3162", "id": 928195979, "node_id": "MDExOlB1bGxSZXF1ZXN0Njc2MjM0MjM3", "number": 3162, "title": "Avoid None among plugin directories", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-23T12:19:56Z", "updated_at": "2021-07-01T11:37:54Z", "closed_at": "2021-07-01T11:37:54Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3162", "html_url": "https://github.com/ansible-community/molecule/pull/3162", "diff_url": "https://github.com/ansible-community/molecule/pull/3162.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3162.patch", "merged_at": "2021-07-01T11:37:54Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3162/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3160", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3160/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3160/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3160/events", "html_url": "https://github.com/ansible-community/molecule/issues/3160", "id": 923864665, "node_id": "MDU6SXNzdWU5MjM4NjQ2NjU=", "number": 3160, "title": "Enable drivers to expose required collections", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-06-17T12:25:09Z", "updated_at": "2021-08-02T15:28:20Z", "closed_at": "2021-08-02T15:28:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As some drivers may require collections that are not included with current version of Ansible (or newer ones), we need to extend the API in order to allow them to provide this information.\r\n\r\nWe do expect Molecule to auto-install these collections if the need arise. This will greatly improve the user experience with drivers like podman one which now require containers.podman collection in order to run.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3160/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3160/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3158", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3158/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3158/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3158/events", "html_url": "https://github.com/ansible-community/molecule/issues/3158", "id": 919539516, "node_id": "MDU6SXNzdWU5MTk1Mzk1MTY=", "number": 3158, "title": "Can't create new scenario", "user": {"login": "staticdev", "id": 1446633, "node_id": "MDQ6VXNlcjE0NDY2MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1446633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/staticdev", "html_url": "https://github.com/staticdev", "followers_url": "https://api.github.com/users/staticdev/followers", "following_url": "https://api.github.com/users/staticdev/following{/other_user}", "gists_url": "https://api.github.com/users/staticdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/staticdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/staticdev/subscriptions", "organizations_url": "https://api.github.com/users/staticdev/orgs", "repos_url": "https://api.github.com/users/staticdev/repos", "events_url": "https://api.github.com/users/staticdev/events{/privacy}", "received_events_url": "https://api.github.com/users/staticdev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-06-12T11:59:09Z", "updated_at": "2021-06-12T14:59:53Z", "closed_at": "2021-06-12T14:59:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible [core 2.11.1] \r\n  config file = None\r\n  configured module search path = ['/home/static/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/static/.local/lib/python3.8/site-packages/ansible\r\n  ansible collection location = /home/static/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /home/static/.local/bin/ansible\r\n  python version = 3.8.5 (default, May 27 2021, 13:30:53) [GCC 9.3.0]\r\n  jinja version = 2.11.2\r\n  libyaml = True\r\nmolecule 3.3.4 using python 3.8 \r\n    ansible:2.11.1\r\n    delegated:3.3.4 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip \r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule --debug create --scenario-name scenarioname` get scenario created.\r\n\r\n# Actual Behaviour\r\n\r\n`CRITICAL 'molecule/scenarioname/molecule.yml' glob failed.  Exiting.`\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3158/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3157", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3157/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3157/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3157/events", "html_url": "https://github.com/ansible-community/molecule/issues/3157", "id": 918827308, "node_id": "MDU6SXNzdWU5MTg4MjczMDg=", "number": 3157, "title": "Can't run molecule because python error", "user": {"login": "Jonas18175", "id": 2692234, "node_id": "MDQ6VXNlcjI2OTIyMzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2692234?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jonas18175", "html_url": "https://github.com/Jonas18175", "followers_url": "https://api.github.com/users/Jonas18175/followers", "following_url": "https://api.github.com/users/Jonas18175/following{/other_user}", "gists_url": "https://api.github.com/users/Jonas18175/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jonas18175/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jonas18175/subscriptions", "organizations_url": "https://api.github.com/users/Jonas18175/orgs", "repos_url": "https://api.github.com/users/Jonas18175/repos", "events_url": "https://api.github.com/users/Jonas18175/events{/privacy}", "received_events_url": "https://api.github.com/users/Jonas18175/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-11T14:32:28Z", "updated_at": "2021-06-14T02:46:09Z", "closed_at": "2021-06-14T02:46:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n\r\n\r\n```\r\nansible [core 2.11.1] \r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /root/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.9.5 (default, May 24 2021, 12:50:35) [GCC 11.1.0]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nmolecule 3.3.1 using python 3.9 \r\n    ansible:2.11.1\r\n    delegated:3.3.1 from molecule\r\n    docker:0.3.3a1 from molecule_docker\r\n    podman:0.3.0 from molecule_podman\r\n    vagrant:0.2 from molecule_vagrant\r\n\r\n```\r\n\r\nSystem:\r\nLinux jonas-pc 5.10.36-2-MANJARO #1 SMP PREEMPT Tue May 11 19:38:44 UTC 2021 x86_64 GNU/Linux\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n- and tried with OS package\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nRunning without python stacktrace.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\nDEBUG    Validating schema /home/jonas/_dev/my-playbook/roles/docker/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: lint, destroy, syntax, create, prepare, converge, idempotence, verify, destroy\r\nINFO     Running default > lint\r\nCOMMAND: set -e\r\nyamllint .\r\nansible-lint .\r\nLoading custom .yamllint config file, this extends our internal yamllint config.\r\nWARNING  Listing 1 violation(s) that are fatal\r\nload-failure: [Errno 2] No such file or directory: 'tasks/package_manager/general.yml' (filenotfounderror)\r\ntasks/package_manager/general.yml:1\r\n\r\n\r\nFinished with 0 failure(s), 1 warning(s) on 25 files.\r\nINFO     Running default > destroy\r\nTraceback (most recent call last):\r\n  File \"/home/jonas/.local/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/lib/python3.9/site-packages/click/core.py\", line 1137, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/lib/python3.9/site-packages/click/core.py\", line 1062, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/lib/python3.9/site-packages/click/core.py\", line 1668, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/lib/python3.9/site-packages/click/core.py\", line 1404, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/lib/python3.9/site-packages/click/core.py\", line 763, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/usr/lib/python3.9/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/command/test.py\", line 149, in test\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/command/base.py\", line 113, in execute_cmdline_scenarios\r\n    execute_scenario(scenario)\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/command/base.py\", line 155, in execute_scenario\r\n    execute_subcommand(scenario.config, action)\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/command/base.py\", line 144, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/logger.py\", line 185, in wrapper\r\n    rt = func(*args, **kwargs)\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/command/destroy.py\", line 107, in execute\r\n    self._config.provisioner.destroy()\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/provisioner/ansible.py\", line 702, in destroy\r\n    pb = self._get_ansible_playbook(self.playbooks.destroy)\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/provisioner/ansible.py\", line 868, in _get_ansible_playbook\r\n    return ansible_playbook.AnsiblePlaybook(playbook, self._config, **kwargs)\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/provisioner/ansible_playbook.py\", line 45, in __init__\r\n    self._env = self._config.provisioner.env\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/provisioner/ansible.py\", line 519, in env\r\n    default_env = self.default_env\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/provisioner/ansible.py\", line 458, in default_env\r\n    self._config.ansible_collections_path: \":\".join(collections_path_list),\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/config.py\", line 119, in ansible_collections_path\r\n    if ansible_version() >= ansible_version(\"2.10.0.dev0\"):\r\n  File \"/home/jonas/.local/lib/python3.9/site-packages/molecule/config.py\", line 477, in ansible_version\r\n    return Version(version)\r\n  File \"/usr/lib/python3.9/site-packages/packaging/version.py\", line 298, in __init__\r\n    raise InvalidVersion(\"Invalid version: '{0}'\".format(version))\r\npackaging.version.InvalidVersion: Invalid version: '[core'\r\n```\r\nUsed config:\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nscenario:\r\n  name: default\r\n  test_sequence:\r\n    - lint\r\n    - destroy\r\n#    - dependency\r\n    - syntax\r\n    - create\r\n    - prepare\r\n    - converge\r\n    - idempotence\r\n#    - side_effect\r\n    - verify\r\n    - destroy\r\nplatforms:\r\n  - name: rhel8\r\n    image: registry.access.redhat.com/ubi8/ubi-init\r\n    tmpfs:\r\n      - /run\r\n      - /tmp\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    command: \"/usr/sbin/init\"\r\n    pre_build_image: true\r\n\r\n  - name: ubuntu\r\n    image: geerlingguy/docker-ubuntu2004-ansible\r\n    tmpfs:\r\n      - /run\r\n      - /tmp\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    command: \"/lib/systemd/systemd\"\r\n    pre_build_image: true\r\nprovisioner:\r\n  name: ansible\r\nverifier:\r\n  name: ansible\r\nlint: |\r\n  set -e\r\n  yamllint .\r\n  ansible-lint .\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3157/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3156", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3156/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3156/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3156/events", "html_url": "https://github.com/ansible-community/molecule/issues/3156", "id": 918056323, "node_id": "MDU6SXNzdWU5MTgwNTYzMjM=", "number": 3156, "title": "molecule commands doesn't ignore self signed certificate for ansible galaxy", "user": {"login": "pupreti", "id": 7004597, "node_id": "MDQ6VXNlcjcwMDQ1OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7004597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pupreti", "html_url": "https://github.com/pupreti", "followers_url": "https://api.github.com/users/pupreti/followers", "following_url": "https://api.github.com/users/pupreti/following{/other_user}", "gists_url": "https://api.github.com/users/pupreti/gists{/gist_id}", "starred_url": "https://api.github.com/users/pupreti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pupreti/subscriptions", "organizations_url": "https://api.github.com/users/pupreti/orgs", "repos_url": "https://api.github.com/users/pupreti/repos", "events_url": "https://api.github.com/users/pupreti/events{/privacy}", "received_events_url": "https://api.github.com/users/pupreti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-10T23:47:43Z", "updated_at": "2021-06-14T13:13:17Z", "closed_at": "2021-06-14T13:13:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmolecule --version                                                                                          \u2500\u256f\r\nmolecule 3.3.4 using python 3.9\r\n    ansible:2.11.1\r\n    delegated:3.3.4 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n    vagrant:0.6.1 from molecule_vagrant\r\n    vmware:0.3.3 from molecule_vmware\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nAdding ignore-certs: True on molecule.yml file should ignore self signed certificate while downloading dependencies from ansible galaxy\r\n\r\n# Actual Behaviour\r\n\r\nmolecule commands are not reading ignore-certs and files with error:\r\n```bash\r\nStarting galaxy role install process\r\n- downloading role 'postgresql', owned by geerlingguy\r\n- downloading role from https://github.com/geerlingguy/ansible-role-postgresql/archive/3.1.0.tar.gz\r\n [ERROR]: failed to download the file: <urlopen error [SSL:\r\nCERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate\r\nin certificate chain (_ssl.c:1122)>\r\n[WARNING]: - geerlingguy.postgresql was NOT installed successfully.\r\nERROR! - you can use --ignore-errors to skip failed roles and finish processing the list.\r\nStarting galaxy role install process\r\n- downloading role 'postgresql', owned by geerlingguy\r\n- downloading role from https://github.com/geerlingguy/ansible-role-postgresql/archive/3.1.0.tar.gz\r\n [ERROR]: failed to download the file: <urlopen error [SSL:\r\nCERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate\r\nin certificate chain (_ssl.c:1122)>\r\n[WARNING]: - geerlingguy.postgresql was NOT installed successfully.\r\nERROR! - you can use --ignore-errors to skip failed roles and finish processing the list.\r\nStarting galaxy role install process\r\n- downloading role 'postgresql', owned by geerlingguy\r\n- downloading role from https://github.com/geerlingguy/ansible-role-postgresql/archive/3.1.0.tar.gz\r\n [ERROR]: failed to download the file: <urlopen error [SSL:\r\nCERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate\r\nin certificate chain (_ssl.c:1122)>\r\n[WARNING]: - geerlingguy.postgresql was NOT installed successfully.\r\nERROR! - you can use --ignore-errors to skip failed roles and finish processing the list.\r\nStarting galaxy role install process\r\n- downloading role 'postgresql', owned by geerlingguy\r\n- downloading role from https://github.com/geerlingguy/ansible-role-postgresql/archive/3.1.0.tar.gz\r\n [ERROR]: failed to download the file: <urlopen error [SSL:\r\nCERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate\r\nin certificate chain (_ssl.c:1122)>\r\n[WARNING]: - geerlingguy.postgresql was NOT installed successfully.\r\nERROR! - you can use --ignore-errors to skip failed roles and finish processing the list.\r\n```\r\n\r\nmy molecule.yml file snippet\r\n```yaml\r\ndependency:\r\n  name: galaxy\r\n  ignore-certs: True\r\n```\r\n\r\nI am running it on a macOS inside a corporate VPN\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3156/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3143", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3143/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3143/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3143/events", "html_url": "https://github.com/ansible-community/molecule/pull/3143", "id": 912158637, "node_id": "MDExOlB1bGxSZXF1ZXN0NjYyMzQ3MzU2", "number": 3143, "title": "Fix ansible version parsing", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-05T08:47:37Z", "updated_at": "2021-06-05T09:08:00Z", "closed_at": "2021-06-05T09:07:59Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3143", "html_url": "https://github.com/ansible-community/molecule/pull/3143", "diff_url": "https://github.com/ansible-community/molecule/pull/3143.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3143.patch", "merged_at": "2021-06-05T09:07:59Z"}, "body": "Reuse code from ansible-lint for reading ansible-version and avoid bug where presence of ANSIBLE_DEBUG would\r\nbreak version loading.\r\n\r\nFixes: #3082", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3143/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3141", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3141/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3141/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3141/events", "html_url": "https://github.com/ansible-community/molecule/pull/3141", "id": 912148388, "node_id": "MDExOlB1bGxSZXF1ZXN0NjYyMzM4NDg2", "number": 3141, "title": "Bump dependendencies", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-05T08:14:20Z", "updated_at": "2021-06-05T08:25:21Z", "closed_at": "2021-06-05T08:25:20Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3141", "html_url": "https://github.com/ansible-community/molecule/pull/3141", "diff_url": "https://github.com/ansible-community/molecule/pull/3141.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3141.patch", "merged_at": "2021-06-05T08:25:20Z"}, "body": "Fixes: #3112\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3141/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3139", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3139/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3139/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3139/events", "html_url": "https://github.com/ansible-community/molecule/issues/3139", "id": 911102445, "node_id": "MDU6SXNzdWU5MTExMDI0NDU=", "number": 3139, "title": "Both of theses issues are still issues in new version and closing them before retesting is rude :)", "user": {"login": "provenvelocity", "id": 45375115, "node_id": "MDQ6VXNlcjQ1Mzc1MTE1", "avatar_url": "https://avatars.githubusercontent.com/u/45375115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/provenvelocity", "html_url": "https://github.com/provenvelocity", "followers_url": "https://api.github.com/users/provenvelocity/followers", "following_url": "https://api.github.com/users/provenvelocity/following{/other_user}", "gists_url": "https://api.github.com/users/provenvelocity/gists{/gist_id}", "starred_url": "https://api.github.com/users/provenvelocity/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/provenvelocity/subscriptions", "organizations_url": "https://api.github.com/users/provenvelocity/orgs", "repos_url": "https://api.github.com/users/provenvelocity/repos", "events_url": "https://api.github.com/users/provenvelocity/events{/privacy}", "received_events_url": "https://api.github.com/users/provenvelocity/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-04T04:19:22Z", "updated_at": "2021-06-04T06:40:37Z", "closed_at": "2021-06-04T06:40:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "I know this is unusual and I am sorry but just closing the tickets and not even letting me retest and then not responding to the retests is really frustrating... I am trying to help your code and only file things after deep testing. Yes, I tested with one minor version back but they are still issues, and closing them prior to at least let me test in them in the latest is rude and not a part of the good conduct pact all ansible projects take part in.\r\n\r\nThe first issue is minor but confusing and still occurs even in the latest code. \r\nhttps://github.com/ansible-community/molecule/issues/3131\r\n\r\nThe second issue is a bigger issue and still takes place in the latest also. I still cannot get a playbook from a collection to converge and in working on this issue I found each step in your code is making its own custom env and not respecting things like env.yml in some or custom collection_path or ansible_colection_path .... I need to make a feature request probably in the end to improve the environment configuration code, but either way, you cant converge playbooks from collections.\r\n\r\nThis could be that the collections path is wrong in the provision part of the code ignoring the ansible-lint collections path... I'm not sure yet.\r\n\r\nAlso I'm working with Redhat and ansible to see if it's even a bigger issue than just your code.  I think the issue is not what I thought in the end but it is all linked and the outcomes in the ticket is still the same that there is an issue in both molecule and ansible with running collection playbooks... \r\n\r\nhttps://github.com/ansible-community/molecule/issues/3135\r\n\r\nIf I'm wrong in the end then I am sorry but I would rather be wrong and know why than be just shut down and ignored...\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3139/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3139/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3137", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3137/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3137/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3137/events", "html_url": "https://github.com/ansible-community/molecule/pull/3137", "id": 910828762, "node_id": "MDExOlB1bGxSZXF1ZXN0NjYxMTkyNzM1", "number": 3137, "title": "Change ANSIBLE_LIBRARY PATH processing", "user": {"login": "cloudnull", "id": 2066292, "node_id": "MDQ6VXNlcjIwNjYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2066292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloudnull", "html_url": "https://github.com/cloudnull", "followers_url": "https://api.github.com/users/cloudnull/followers", "following_url": "https://api.github.com/users/cloudnull/following{/other_user}", "gists_url": "https://api.github.com/users/cloudnull/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloudnull/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloudnull/subscriptions", "organizations_url": "https://api.github.com/users/cloudnull/orgs", "repos_url": "https://api.github.com/users/cloudnull/repos", "events_url": "https://api.github.com/users/cloudnull/events{/privacy}", "received_events_url": "https://api.github.com/users/cloudnull/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-06-03T20:27:02Z", "updated_at": "2021-06-04T06:37:17Z", "closed_at": "2021-06-03T21:53:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3137", "html_url": "https://github.com/ansible-community/molecule/pull/3137", "diff_url": "https://github.com/ansible-community/molecule/pull/3137.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3137.patch", "merged_at": "2021-06-03T21:53:49Z"}, "body": "When the environment variable ANSIBLE_LIBRARY is used, molecule is\r\ncurrently extending the path with the contents of the found variable,\r\nhowever, this will cause problems as the system driven path will\r\nconflict with a user defined path. To correct this issue the path\r\nprocessing will now insert the user provided variable into the path.\r\n\r\nSigned-off-by: Kevin Carter <kecarter@redhat.com>\r\n\r\nPlease include details of what it is, how to use it, how it's been tested\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3137/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3137/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3135", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3135/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3135/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3135/events", "html_url": "https://github.com/ansible-community/molecule/issues/3135", "id": 909637161, "node_id": "MDU6SXNzdWU5MDk2MzcxNjE=", "number": 3135, "title": "using ansible-lint to resolve collection dependencies fails  in latest  ansible", "user": {"login": "provenvelocity", "id": 45375115, "node_id": "MDQ6VXNlcjQ1Mzc1MTE1", "avatar_url": "https://avatars.githubusercontent.com/u/45375115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/provenvelocity", "html_url": "https://github.com/provenvelocity", "followers_url": "https://api.github.com/users/provenvelocity/followers", "following_url": "https://api.github.com/users/provenvelocity/following{/other_user}", "gists_url": "https://api.github.com/users/provenvelocity/gists{/gist_id}", "starred_url": "https://api.github.com/users/provenvelocity/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/provenvelocity/subscriptions", "organizations_url": "https://api.github.com/users/provenvelocity/orgs", "repos_url": "https://api.github.com/users/provenvelocity/repos", "events_url": "https://api.github.com/users/provenvelocity/events{/privacy}", "received_events_url": "https://api.github.com/users/provenvelocity/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-06-02T15:41:46Z", "updated_at": "2021-06-04T04:05:26Z", "closed_at": "2021-06-02T16:00:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\nSemie working config\r\n```\r\nansible 2.10.9\r\n  config file = /Users/H217689/kp/ansible/kp_devops/test/ansible.cfg\r\n  configured module search path = ['/Users/H217689/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/H217689/kp/ansible/kp_devops/test/local_venv/lib/python3.9/site-packages/ansible\r\n  executable location = /Users/H217689/kp/ansible/kp_devops/test/local_venv/bin/ansible\r\n  python version = 3.9.5 (default, May  4 2021, 03:36:27) [Clang 12.0.0 (clang-1200.0.32.29)]\r\nmolecule 3.3.0 using python 3.9 \r\n    ansible:2.10.9\r\n    delegated:3.3.0 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n    podman:0.3.0 from molecule_podman\r\n    vagrant:0.6.3 from molecule_vagrant\r\n```\r\nNot Working Config:\r\n```\r\nansible [core 2.11.1] \r\n  config file = /Users/H217689/kp/ansible/kp_devops/test/ansible.cfg\r\n  configured module search path = ['/Users/H217689/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/H217689/.kp_devops/kp_devops_venv/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/H217689/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/H217689/.kp_devops/kp_devops_venv/bin/ansible\r\n  python version = 3.9.5 (default, May  4 2021, 03:36:27) [Clang 12.0.0 (clang-1200.0.32.29)]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nmolecule 3.3.2 using python 3.9 \r\n    ansible:2.11.1\r\n    delegated:3.3.2 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n    podman:0.3.0 from molecule_podman\r\n    vagrant:0.6.3 from molecule_vagrant\r\n```\r\n\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n\r\nAnsible lint\r\n\r\n# Desired Behavior\r\n\r\n\r\n\r\nFYI the solution of using ansible-lint does not work with the latest release of ansible. I converted my requirements to remove version pinning to force working on the latest and not get behind... famous last words.\r\n\r\nThe desired result should be a cache folder somewhere on the machine that contains the current collection and a converge.yml that loads it.\r\n\r\nthe requirements.txt fails to produce a .chace folder with the current collection. \r\nansible\r\ndocker\r\nmolecule\r\nmolecule-docker\r\nmolecule-podman\r\nmolecule-vagrant\r\npython-vagrant\r\npytest\r\npytest-testinfra\r\nyamllint\r\nflake8\r\n\r\nthe requirements.txt that produces a .chace folder with the current collection. \r\nansible==3.4.0\r\ndocker==5.0.0\r\nmolecule==3.3.0\r\nmolecule-docker==0.2.4\r\nmolecule-podman==0.3.0\r\nmolecule-vagrant==0.6.3\r\npytest==6.2.4\r\npytest-testinfra==6.3.0\r\npython-vagrant==0.5.15\r\nyamllint==1.26.1\r\nflake8==3.9.2\r\n\r\n# Actual Behaviour\r\n\r\nThe current version (N) produces no cache folder that I can find that holds the current collection.\r\n\r\nThe N-1 version of ansible produces a cache folder but I cant not get converge.yml to load the collection and use it.\r\n\r\nSide Issue is that I can not get the converge.yml to recognize the current collection even with the old version of ansible-lint... \r\nI have set the collections path in every way possible and the code is in the path, but the converge playbook does not see it.\r\n\r\nmolecule.yml\r\n\r\n provisioner:\r\n  name: ansible\r\n  config_options:\r\n    defaults:\r\n      timeout: 30\r\n      system_warinings: false\r\n      collections_paths: .cache/collections\r\n  env:\r\n    ANSIBLE_COLLECTIONS_PATH: .cache/collections. \r\n\r\nper this link\r\nhttps://docs.ansible.com/ansible/latest/user_guide/collections_using.html\r\nconverge trials...\r\n\r\nconverge.yml1\r\n---\r\n- import_playbook: devops.test.site\r\n\r\n\r\nconverge.yml2\r\n---\r\n- name: Converge\r\n  hosts: all\r\n  collections:\r\n    - devops.test\r\n\r\n- import_playbook: devops.test.site\r\n\r\nconverge.yml3\r\n---\r\n- name: Converge\r\n  hosts: all\r\n  collections:\r\n    - devops.test\r\n\r\n- import_playbook: devops.test.site.yml\r\n\r\n\r\nI also tried the run with several collection cache path locations.... \r\n\r\n DEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=.cache/collections ANSIBLE_CONFIG=/Users/H217689/.cache/molecule/test/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/H217689/kp/ansible/kp_devops/test/local_venv/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/H217689/.cache/molecule/test/default/plugins/filter:/Users/H217689/kp/ansible/kp_devops/test/plugins/filter:/Users/H217689/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_FORCE_COLOR=1 ANSIBLE_LIBRARY=/Users/H217689/kp/ansible/kp_devops/test/local_venv/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/H217689/kp/ansible/kp_devops/test/local_venv/lib/python3.9/site-packages/molecule_vagrant/modules:/Users/H217689/.cache/molecule/test/default/library:/Users/H217689/kp/ansible/kp_devops/test/library:/Users/H217689/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/Users/H217689/.cache/molecule/test/default/roles:/Users/H217689/kp/ansible/kp_devops:/Users/H217689/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/H217689/kp/ansible/kp_devops/test/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/H217689/.cache/molecule/test/default MOLECULE_FILE=/Users/H217689/.cache/molecule/test/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/H217689/.cache/molecule/test/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/H217689/.cache/molecule/test/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/Users/H217689/kp/ansible/kp_devops/test MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/H217689/kp/ansible/kp_devops/test/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/H217689/.cache/molecule/test/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/H217689/kp/ansible/kp_devops/test/molecule/default/tests\r\n\r\nCOMMAND: ansible-playbook --diff --inventory /Users/H217689/.cache/molecule/test/default/inventory --skip-tags molecule-notest,notest /Users/H217689/kp/ansible/kp_devops/test/molecule/default/converge.yml\r\nERROR! Unable to retrieve file contents\r\nCould not find or access '/Users/H217689/kp/ansible/kp_devops/test/molecule/default/kp_devops.test.site' on the Ansible Controller.\r\nIf you are using a module and expect the file to exist on the remote, see the remote_src option\r\nCRITICAL Ansible return code was 1, command was: ansible-playbook --diff --inventory /Users/H217689/.cache/molecule/test/default/inventory --skip-tags molecule-notest,notest /Users/H217689/kp/ansible/kp_devops/test/molecule/default/converge.yml\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3135/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3135/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3131", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3131/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3131/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3131/events", "html_url": "https://github.com/ansible-community/molecule/issues/3131", "id": 904692319, "node_id": "MDU6SXNzdWU5MDQ2OTIzMTk=", "number": 3131, "title": "roles-path making folder in wrong path", "user": {"login": "provenvelocity", "id": 45375115, "node_id": "MDQ6VXNlcjQ1Mzc1MTE1", "avatar_url": "https://avatars.githubusercontent.com/u/45375115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/provenvelocity", "html_url": "https://github.com/provenvelocity", "followers_url": "https://api.github.com/users/provenvelocity/followers", "following_url": "https://api.github.com/users/provenvelocity/following{/other_user}", "gists_url": "https://api.github.com/users/provenvelocity/gists{/gist_id}", "starred_url": "https://api.github.com/users/provenvelocity/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/provenvelocity/subscriptions", "organizations_url": "https://api.github.com/users/provenvelocity/orgs", "repos_url": "https://api.github.com/users/provenvelocity/repos", "events_url": "https://api.github.com/users/provenvelocity/events{/privacy}", "received_events_url": "https://api.github.com/users/provenvelocity/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-28T04:32:57Z", "updated_at": "2021-06-04T04:00:17Z", "closed_at": "2021-06-02T16:02:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nansible --version && molecule --version\r\nansible [core 2.11.1] \r\n  config file = /Users/H217689/.ansible.cfg\r\n  configured module search path = ['/Users/H217689/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/H217689/.kp_devops/kp_devops_venv/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/H217689/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /Users/H217689/.kp_devops/kp_devops_venv/bin/ansible\r\n  python version = 3.9.5 (default, May  4 2021, 03:36:27) [Clang 12.0.0 (clang-1200.0.32.29)]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nmolecule 3.3.2 using python 3.9 \r\n    ansible:2.11.1\r\n    delegated:3.3.2 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n    podman:0.3.0 from molecule_podman\r\n    vagrant:0.6.3 from molecule_vagrant\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n\r\n---\r\ndependency:\r\n  name: galaxy\r\n  options:\r\n    role-file: ./requirements.yml  # relative to the role dir\r\n    requirements-file: ./requirements.yml\r\n    #collections-path: ./.cache\r\n    roles-path: ./.cache/roles\r\ndriver:\r\n  name: vagrant\r\nlint: |\r\n  set -e\r\n  yamllint .\r\n  ansible-lint\r\n  flake8\r\n\r\n# Desired Behavior\r\n\r\nWhen adding the roles-path variable you should only have the path created in one location.\r\n\r\n# Actual Behaviour\r\n\r\nWhen you add the roles-path option the code add's the folder to two locations. One location is incorrect and empty and another location is correct and does get the correct roles.  The Molecule/default/.cache/roles in bolde below is incorrect and empty\r\n\r\n--project\r\n  |--.cache\r\n  |.  |--roles\r\n  |.  |    |--role_from_file\r\n  |--molecule\r\n      |--default\r\n          **|--.cache\r\n          |.  |--roles**\r\n\r\n\r\nThis looks to be the code generating the wrong path.\r\n\r\n    @property    def install_path(self):        return os.path.join(self._config.scenario.directory, self.options[\"roles-path\"])\r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](https://stackoverflow.com/help/mcve) with\r\noutput of running `molecule --debug`.\r\n\r\nmolecule --debug test\r\nDEBUG    Validating schema /Users/xxxxxxx/kp/ansible/devops/test/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, lint, cleanup, destroy, syntax, create, prepare, converge, idempotence, side_effect, verify, cleanup, destroy\r\nINFO     Performing prerun...\r\nINFO     Running ansible-galaxy role install --roles-path /Users/xxxxxxx/.cache/ansible-lint/1c655f/roles -vr requirements.yml\r\nINFO     Running ansible-galaxy collection install -p /Users/xxxxxxx/.cache/ansible-lint/1c655f/collections -vr requirements.yml\r\nINFO     Added ANSIBLE_COLLECTIONS_PATH=/Users/xxxxxxx/.cache/ansible-lint/1c655f/collections\r\nINFO     Added ANSIBLE_ROLES_PATH=~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:roles:/Users/xxxxxxx/.cache/ansible-lint/1c655f/roles\r\nINFO     Running default > dependency\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /Users/xxxxxxx/.cache/ansible-lint/1c655f/collections\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_ROLES_PATH: ~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:roles:/Users/xxxxxxx/.cache/ansible-lint/1c655f/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/xxxxxxx/kp/ansible/devops/test/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/xxxxxxx/.cache/molecule/test/default\r\nMOLECULE_FILE: /Users/xxxxxxx/.cache/molecule/test/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/xxxxxxx/.cache/molecule/test/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/xxxxxxx/.cache/molecule/test/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /Users/xxxxxxx/kp/ansible/devops/test\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/xxxxxxx/kp/ansible/devops/test/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/xxxxxxx/.cache/molecule/test/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/xxxxxxx/kp/ansible/devops/test/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/Users/xxxxxxx/.cache/ansible-lint/1c655f/collections ANSIBLE_FORCE_COLOR=1 ANSIBLE_ROLES_PATH=~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:roles:/Users/xxxxxxx/.cache/ansible-lint/1c655f/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/xxxxxxx/kp/ansible/devops/test/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/xxxxxxx/.cache/molecule/test/default MOLECULE_FILE=/Users/xxxxxxx/.cache/molecule/test/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/xxxxxxx/.cache/molecule/test/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/xxxxxxx/.cache/molecule/test/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/Users/xxxxxxx/kp/ansible/devops/test MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/xxxxxxx/kp/ansible/devops/test/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/xxxxxxx/.cache/molecule/test/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/xxxxxxx/kp/ansible/devops/test/molecule/default/tests\r\n\r\nCOMMAND: ansible-galaxy install --force --role-file ./requirements.yml --roles-path ./.cache/roles -vvv\r\nansible-galaxy [core 2.11.1] \r\n  config file = /Users/xxxxxxx/.ansible.cfg\r\n  configured module search path = ['/Users/xxxxxxx/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/xxxxxxx/.devops/devops_venv/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/xxxxxxx/.cache/ansible-lint/1c655f/collections\r\n  executable location = /Users/xxxxxxx/.devops/devops_venv/bin/ansible-galaxy\r\n  python version = 3.9.5 (default, May  4 2021, 03:36:27) [Clang 12.0.0 (clang-1200.0.32.29)]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nUsing /Users/xxxxxxx/.ansible.cfg as config file\r\nReading requirement file at '/Users/xxxxxxx/kp/ansible/devops/test/requirements.yml'\r\nfound role {'name': 'nginx_role', 'src': 'https://github.com/bennojoy/nginx.git', 'version': 'master', 'scm': 'git'} in yaml file\r\nOpened /Users/xxxxxxx/.ansible/galaxy_token\r\n[WARNING]: The requirements file\r\n'/Users/xxxxxxx/kp/ansible/devops/test/requirements.yml' contains\r\ncollections which will be ignored. To install these collections run 'ansible-\r\ngalaxy collection install -r' or to install both at the same time run 'ansible-\r\ngalaxy install -r' without a custom install path.\r\nStarting galaxy role install process\r\nProcessing role nginx_role \r\n- changing role nginx_role from master to master\r\narchiving ['/usr/local/bin/git', 'archive', '--prefix=nginx_role/', '--output=/Users/xxxxxxx/.ansible/tmp/ansible-local-69707sd50edsj/tmpjrw2bbjp.tar', 'master']\r\n- extracting nginx_role to /Users/xxxxxxx/kp/ansible/devops/test/.cache/roles/nginx_role\r\n- nginx_role (master) was installed successfully\r\nINFO     Dependency completed successfully.\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /Users/xxxxxxx/.cache/molecule/test/default/collections\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_ROLES_PATH: ~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:roles:/Users/xxxxxxx/.cache/ansible-lint/1c655f/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/xxxxxxx/kp/ansible/devops/test/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/xxxxxxx/.cache/molecule/test/default\r\nMOLECULE_FILE: /Users/xxxxxxx/.cache/molecule/test/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/xxxxxxx/.cache/molecule/test/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/xxxxxxx/.cache/molecule/test/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /Users/xxxxxxx/kp/ansible/devops/test\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/xxxxxxx/kp/ansible/devops/test/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/xxxxxxx/.cache/molecule/test/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/xxxxxxx/kp/ansible/devops/test/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/Users/xxxxxxx/.cache/molecule/test/default/collections ANSIBLE_FORCE_COLOR=1 ANSIBLE_ROLES_PATH=~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:roles:/Users/xxxxxxx/.cache/ansible-lint/1c655f/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/xxxxxxx/kp/ansible/devops/test/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/xxxxxxx/.cache/molecule/test/default MOLECULE_FILE=/Users/xxxxxxx/.cache/molecule/test/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/xxxxxxx/.cache/molecule/test/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/xxxxxxx/.cache/molecule/test/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/Users/xxxxxxx/kp/ansible/devops/test MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/xxxxxxx/kp/ansible/devops/test/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/xxxxxxx/.cache/molecule/test/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/xxxxxxx/kp/ansible/devops/test/molecule/default/tests\r\n\r\nCOMMAND: ansible-galaxy collection install --collections-path /Users/xxxxxxx/.cache/molecule/test/default/collections --force --requirements-file ./requirements.yml -vvv\r\nansible-galaxy [core 2.11.1] \r\n  config file = /Users/xxxxxxx/.ansible.cfg\r\n  configured module search path = ['/Users/xxxxxxx/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/xxxxxxx/.devops/devops_venv/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /Users/xxxxxxx/.cache/molecule/test/default/collections\r\n  executable location = /Users/xxxxxxx/.devops/devops_venv/bin/ansible-galaxy\r\n  python version = 3.9.5 (default, May  4 2021, 03:36:27) [Clang 12.0.0 (clang-1200.0.32.29)]\r\n  jinja version = 3.0.1\r\n  libyaml = True\r\nUsing /Users/xxxxxxx/.ansible.cfg as config file\r\nReading requirement file at '/Users/xxxxxxx/kp/ansible/devops/test/requirements.yml'\r\nfound role {'name': 'nginx_role', 'src': 'https://github.com/bennojoy/nginx.git', 'version': 'master', 'scm': 'git'} in yaml file\r\nThe requirements file '/Users/xxxxxxx/kp/ansible/devops/test/requirements.yml' contains roles which will be ignored. To install these roles run 'ansible-galaxy role install -r' or to install both at the same time run 'ansible-galaxy install -r' without a custom install path.\r\nStarting galaxy collection install process\r\nFound installed collection nginxinc.nginx_core:0.3.0 at '/Users/xxxxxxx/.cache/molecule/test/default/collections/ansible_collections/nginxinc/nginx_core'\r\nProcess install dependency map\r\nOpened /Users/xxxxxxx/.ansible/galaxy_token\r\nStarting collection install process\r\nDownloading https://galaxy.ansible.com/download/nginxinc-nginx_core-0.3.0.tar.gz to /Users/xxxxxxx/.ansible/tmp/ansible-local-697240dt9g9z5/tmp0wh56dsb/nginxinc-nginx_core-0.3.0-arpig975\r\nCollection 'nginxinc.nginx_core:0.3.0' obtained from server default https://galaxy.ansible.com/api/\r\nInstalling 'nginxinc.nginx_core:0.3.0' to '/Users/xxxxxxx/.cache/molecule/test/default/collections/ansible_collections/nginxinc/nginx_core'\r\nnginxinc.nginx_core:0.3.0 was installed successfully\r\nINFO     Dependency completed successfully.\r\nINFO     Running default > lint\r\nCOMMAND: set -e\r\nyamllint .\r\nansible-lint\r\nflake8\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3131/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3128", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3128/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3128/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3128/events", "html_url": "https://github.com/ansible-community/molecule/pull/3128", "id": 898114446, "node_id": "MDExOlB1bGxSZXF1ZXN0NjUwMDI1MDM1", "number": 3128, "title": "Avoid using in-repo .cache folder", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-21T14:43:05Z", "updated_at": "2021-06-01T12:32:04Z", "closed_at": "2021-06-01T12:32:03Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3128", "html_url": "https://github.com/ansible-community/molecule/pull/3128", "diff_url": "https://github.com/ansible-community/molecule/pull/3128.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3128.patch", "merged_at": "2021-06-01T12:32:03Z"}, "body": "Bump ansible-lint dependency to 5.0.10 in order to make use of the\r\nhttps://github.com/ansible-community/ansible-lint/pull/1567 which\r\nbasically moves the tmp folder to use ~/.cache, avoiding\r\nhttps://github.com/pypa/pip/issues/10005\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3128/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3125", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3125/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3125/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3125/events", "html_url": "https://github.com/ansible-community/molecule/pull/3125", "id": 895556395, "node_id": "MDExOlB1bGxSZXF1ZXN0NjQ3NzY0MDMy", "number": 3125, "title": "Require ansible-lint 5.0.9", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-19T15:00:39Z", "updated_at": "2021-09-16T16:28:33Z", "closed_at": "2021-05-19T15:14:59Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3125", "html_url": "https://github.com/ansible-community/molecule/pull/3125", "diff_url": "https://github.com/ansible-community/molecule/pull/3125.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3125.patch", "merged_at": "2021-05-19T15:14:59Z"}, "body": "In order to make use of the newer logic regarding preinstalling requirements bump version of ansible-lint used.\r\n\r\nFixes: #3055\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3125/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3121", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3121/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3121/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3121/events", "html_url": "https://github.com/ansible-community/molecule/pull/3121", "id": 893436908, "node_id": "MDExOlB1bGxSZXF1ZXN0NjQ1OTUxNjIx", "number": 3121, "title": "Fix ansible_ssh_common_args in molecule.yml", "user": {"login": "gardar", "id": 455556, "node_id": "MDQ6VXNlcjQ1NTU1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/455556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gardar", "html_url": "https://github.com/gardar", "followers_url": "https://api.github.com/users/gardar/followers", "following_url": "https://api.github.com/users/gardar/following{/other_user}", "gists_url": "https://api.github.com/users/gardar/gists{/gist_id}", "starred_url": "https://api.github.com/users/gardar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gardar/subscriptions", "organizations_url": "https://api.github.com/users/gardar/orgs", "repos_url": "https://api.github.com/users/gardar/repos", "events_url": "https://api.github.com/users/gardar/events{/privacy}", "received_events_url": "https://api.github.com/users/gardar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-17T15:13:21Z", "updated_at": "2021-05-20T13:59:22Z", "closed_at": "2021-05-19T14:44:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3121", "html_url": "https://github.com/ansible-community/molecule/pull/3121", "diff_url": "https://github.com/ansible-community/molecule/pull/3121.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3121.patch", "merged_at": "2021-05-19T14:44:20Z"}, "body": "Makes the option `ansible_ssh_common_args` in molecule.yml work as documented:\r\n\r\n```yaml\r\n\r\n        driver:\r\n          name: delegated\r\n          options:\r\n            managed: True\r\n            ansible_connection_options:\r\n              ansible_connection: ssh\r\n              ansible_ssh_common_args: '-F /path/to/ssh-config'\r\n```\r\n\r\nFixes: #2859 \r\nFixes: #2931 ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3121/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3120", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3120/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3120/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3120/events", "html_url": "https://github.com/ansible-community/molecule/pull/3120", "id": 893420666, "node_id": "MDExOlB1bGxSZXF1ZXN0NjQ1OTM3NzU5", "number": 3120, "title": "Avoid broken cerberus releases", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-17T14:57:46Z", "updated_at": "2021-05-17T15:04:54Z", "closed_at": "2021-05-17T15:04:53Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3120", "html_url": "https://github.com/ansible-community/molecule/pull/3120", "diff_url": "https://github.com/ansible-community/molecule/pull/3120.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3120.patch", "merged_at": "2021-05-17T15:04:53Z"}, "body": "Related: https://github.com/pyeve/cerberus/issues/568\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3120/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3119", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3119/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3119/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3119/events", "html_url": "https://github.com/ansible-community/molecule/issues/3119", "id": 893359960, "node_id": "MDU6SXNzdWU4OTMzNTk5NjA=", "number": 3119, "title": "The command to enable shell auto completion differs depending on the version of python-click installed", "user": {"login": "DanHam", "id": 4364798, "node_id": "MDQ6VXNlcjQzNjQ3OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4364798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanHam", "html_url": "https://github.com/DanHam", "followers_url": "https://api.github.com/users/DanHam/followers", "following_url": "https://api.github.com/users/DanHam/following{/other_user}", "gists_url": "https://api.github.com/users/DanHam/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanHam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanHam/subscriptions", "organizations_url": "https://api.github.com/users/DanHam/orgs", "repos_url": "https://api.github.com/users/DanHam/repos", "events_url": "https://api.github.com/users/DanHam/events{/privacy}", "received_events_url": "https://api.github.com/users/DanHam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-05-17T13:56:13Z", "updated_at": "2021-05-19T15:16:37Z", "closed_at": "2021-05-19T15:16:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible [core 2.11.0]\r\n  config file = /home/dan/.ansible.cfg\r\n  configured module search path = ['/home/dan/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.9/site-packages/ansible\r\n  ansible collection location = /home/dan/.ansible/collections:/usr/share/ansible/collections\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.9.5 (default, May 12 2021, 17:14:51) [GCC 10.2.0]\r\n  jinja version = 3.0.0\r\n  libyaml = True\r\n\r\n$ molecule --version\r\nmolecule 3.3.1 using python 3.9\r\n    ansible:2.11.0\r\n    delegated:3.3.1 from molecule\r\n    podman:0.3.0 from molecule_podman\r\n    vagrant:0.2 from molecule_vagrant\r\n\r\n# This is relevant too!\r\n$ pacman -Q python-click\r\npython-click 8.0.0-1\r\n```\r\n\r\n\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- pip\r\n\r\nNeither. I'm using Arch and installed via `pacman` - the default package manager on Arch. \r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n- pip\r\n- OS package\r\n\r\nOS package\r\n\r\nDetail any linters or test runners used:\r\n\r\nLinters:\r\n- yamllint\r\n- ansible-lint\r\n\r\nDrivers:\r\n- podman\r\n- vagrant\r\n\r\n... everything else is pretty standard at the moment.\r\n\r\n# Desired Behavior\r\n\r\nWorking auto completion for the shell.\r\n\r\n# Actual Behaviour\r\n\r\nFollowing discussions on irc it was discovered that auto completion has been 'broken' by differences between python-click 7 and 8. Reporting here as requested.\r\n\r\nCurrently (with python-click 8) the command given to enable autocompletion does not work\r\n\r\n```bash\r\n# Does not work with python-click 8\r\neval \"$(_MOLECULE_COMPLETE=source molecule)\"\r\n```\r\n\r\nWhen click 8 is installed the command to get auto completion working is:\r\n\r\n```bash\r\n# Works with python-click 8\r\neval \"$(_MOLECULE_COMPLETE=bash_source molecule)\"\r\n```\r\n\r\nAdditional info from IRC:\r\n\r\n7 expects:\r\n\r\n`_MOLECULE_COMPLETE=source_bash molecule` \r\n\r\nSee: https://click.palletsprojects.com/en/7.x/bashcomplete/#activation\r\n\r\n8 expects:\r\n\r\n`_MOLECULE_COMPLETE=bash_source molecule`\r\n\r\nSee: https://click.palletsprojects.com/en/8.0.x/shell-completion/#enabling-completion\r\n\r\n\r\nMany thanks\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3119/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3118", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3118/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3118/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3118/events", "html_url": "https://github.com/ansible-community/molecule/pull/3118", "id": 893302275, "node_id": "MDExOlB1bGxSZXF1ZXN0NjQ1ODM4ODg4", "number": 3118, "title": "Fix shell completion (click 8)", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-17T12:54:26Z", "updated_at": "2021-05-18T18:09:08Z", "closed_at": "2021-05-18T18:09:08Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3118", "html_url": "https://github.com/ansible-community/molecule/pull/3118", "diff_url": "https://github.com/ansible-community/molecule/pull/3118.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3118.patch", "merged_at": "2021-05-18T18:09:07Z"}, "body": "Fixes: #2028", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3118/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3113", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3113/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3113/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3113/events", "html_url": "https://github.com/ansible-community/molecule/pull/3113", "id": 891786592, "node_id": "MDExOlB1bGxSZXF1ZXN0NjQ0NTk4MzA3", "number": 3113, "title": "fix(deps): cookiecutter conflicts", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-14T09:55:36Z", "updated_at": "2021-05-14T12:07:19Z", "closed_at": "2021-05-14T12:07:18Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3113", "html_url": "https://github.com/ansible-community/molecule/pull/3113", "diff_url": "https://github.com/ansible-community/molecule/pull/3113.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3113.patch", "merged_at": "2021-05-14T12:07:18Z"}, "body": "Use the latest release of cookiecutter which sorts some dependency installation issues, like https://dashboard.zuul.ansible.com/t/ansible/build/5fed5830fe9049f3978108623024fb85\r\n```\r\ncookiecutter 1.7.2 has requirement Jinja2<3.0.0, but you have jinja2 3.0.0.\r\ncookiecutter 1.7.2 has requirement MarkupSafe<2.0.0, but you have markupsafe 2.0.0.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3113/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3112", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3112/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3112/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3112/events", "html_url": "https://github.com/ansible-community/molecule/issues/3112", "id": 890895027, "node_id": "MDU6SXNzdWU4OTA4OTUwMjc=", "number": 3112, "title": "ERROR:Task exception was never retrieved when run molecule test command", "user": {"login": "gun082544", "id": 56395331, "node_id": "MDQ6VXNlcjU2Mzk1MzMx", "avatar_url": "https://avatars.githubusercontent.com/u/56395331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gun082544", "html_url": "https://github.com/gun082544", "followers_url": "https://api.github.com/users/gun082544/followers", "following_url": "https://api.github.com/users/gun082544/following{/other_user}", "gists_url": "https://api.github.com/users/gun082544/gists{/gist_id}", "starred_url": "https://api.github.com/users/gun082544/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gun082544/subscriptions", "organizations_url": "https://api.github.com/users/gun082544/orgs", "repos_url": "https://api.github.com/users/gun082544/repos", "events_url": "https://api.github.com/users/gun082544/events{/privacy}", "received_events_url": "https://api.github.com/users/gun082544/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-05-13T09:43:46Z", "updated_at": "2021-06-05T07:19:24Z", "closed_at": "2021-06-05T07:19:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I run molecule test command, I found an error after converge step like this:\r\n\r\n![error molecule test](https://user-images.githubusercontent.com/56395331/118108420-2b0ee080-b40a-11eb-9964-9006a938265f.png)\r\n\r\nI use Python 3.8, Ansible 2.10.8 and molecule 3.3.0.\r\nHow can I fix this error ?\r\nThank you.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3112/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3112/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3106", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3106/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3106/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3106/events", "html_url": "https://github.com/ansible-community/molecule/issues/3106", "id": 890069541, "node_id": "MDU6SXNzdWU4OTAwNjk1NDE=", "number": 3106, "title": "No filter named 'molecule_from_yaml' on fresh Molecule with last version (3.3.0)", "user": {"login": "vdahmane", "id": 30653479, "node_id": "MDQ6VXNlcjMwNjUzNDc5", "avatar_url": "https://avatars.githubusercontent.com/u/30653479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vdahmane", "html_url": "https://github.com/vdahmane", "followers_url": "https://api.github.com/users/vdahmane/followers", "following_url": "https://api.github.com/users/vdahmane/following{/other_user}", "gists_url": "https://api.github.com/users/vdahmane/gists{/gist_id}", "starred_url": "https://api.github.com/users/vdahmane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vdahmane/subscriptions", "organizations_url": "https://api.github.com/users/vdahmane/orgs", "repos_url": "https://api.github.com/users/vdahmane/repos", "events_url": "https://api.github.com/users/vdahmane/events{/privacy}", "received_events_url": "https://api.github.com/users/vdahmane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-12T13:04:14Z", "updated_at": "2021-05-12T14:09:53Z", "closed_at": "2021-05-12T14:09:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.9\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.8/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.5 (default, Jan 27 2021, 15:41:15) [GCC 9.3.0]\r\n\r\nmolecule 3.3.0 using python 3.8 \r\n    ansible:2.10.9\r\n    delegated:3.3.0 from molecule\r\n    ec2:0.3 from molecule_ec2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nIdempotence completed successfully. message\r\n\r\n# Actual Behaviour\r\n\r\nTASK [Populate instance config] ************************************************\r\nfatal: [localhost]: FAILED! => {\"msg\": \"template error while templating string: No filter named 'molecule_from_yaml'.. String: {{ lookup('file', molecule_instance_config) | molecule_from_yaml }}\"}\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3106/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3105", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3105/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3105/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3105/events", "html_url": "https://github.com/ansible-community/molecule/pull/3105", "id": 882338330, "node_id": "MDExOlB1bGxSZXF1ZXN0NjM1ODgxMjQz", "number": 3105, "title": "Make sure we detect dependency installation failure", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-05-09T13:47:15Z", "updated_at": "2021-05-18T08:25:20Z", "closed_at": "2021-05-14T09:58:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3105", "html_url": "https://github.com/ansible-community/molecule/pull/3105", "diff_url": "https://github.com/ansible-community/molecule/pull/3105.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3105.patch", "merged_at": "2021-05-14T09:58:23Z"}, "body": "Right now, we just ignore the failure because we do not check the return code of the children's process. This commit just makes sure we are notified when the dependency command fails.\r\n\r\nFixes #3070\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3105/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3104", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3104/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3104/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3104/events", "html_url": "https://github.com/ansible-community/molecule/pull/3104", "id": 882230819, "node_id": "MDExOlB1bGxSZXF1ZXN0NjM1NzgwNzIx", "number": 3104, "title": "Make sure run_command properly combines envs", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-09T12:06:18Z", "updated_at": "2021-05-14T12:01:39Z", "closed_at": "2021-05-14T10:01:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3104", "html_url": "https://github.com/ansible-community/molecule/pull/3104", "diff_url": "https://github.com/ansible-community/molecule/pull/3104.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3104.patch", "merged_at": "2021-05-14T10:01:12Z"}, "body": "Because the dictionary's update method updates data in place and does not return anything, the run_command method executed baked commands with env overrides with an empty env. This commit makes sure environments are properly combined.\r\n\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3104/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3103", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3103/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3103/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3103/events", "html_url": "https://github.com/ansible-community/molecule/pull/3103", "id": 881426810, "node_id": "MDExOlB1bGxSZXF1ZXN0NjM1MDE3NTMy", "number": 3103, "title": "Fix ANSIBLE_LIBRARY variable handling", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-05-08T22:56:43Z", "updated_at": "2021-05-14T12:06:31Z", "closed_at": "2021-05-14T12:02:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3103", "html_url": "https://github.com/ansible-community/molecule/pull/3103", "diff_url": "https://github.com/ansible-community/molecule/pull/3103.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3103.patch", "merged_at": "2021-05-14T12:02:25Z"}, "body": "When we introduced the ability to pass down the user-specified ANSIBLE_LIBRARY variable value to the molecule, we wrongly assumed that the variable will always contain a single component, which is not always true.\r\n\r\nThis commit makes sure that we properly handle scenarios where users specify multiple directories in the ANSIBLE_LIBRARY environment variable.\r\n\r\nFixes #3083 \r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3103/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3084", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3084/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3084/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3084/events", "html_url": "https://github.com/ansible-community/molecule/issues/3084", "id": 842724238, "node_id": "MDU6SXNzdWU4NDI3MjQyMzg=", "number": 3084, "title": "Inappropriate return code", "user": {"login": "aminvakil", "id": 12948692, "node_id": "MDQ6VXNlcjEyOTQ4Njky", "avatar_url": "https://avatars.githubusercontent.com/u/12948692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aminvakil", "html_url": "https://github.com/aminvakil", "followers_url": "https://api.github.com/users/aminvakil/followers", "following_url": "https://api.github.com/users/aminvakil/following{/other_user}", "gists_url": "https://api.github.com/users/aminvakil/gists{/gist_id}", "starred_url": "https://api.github.com/users/aminvakil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aminvakil/subscriptions", "organizations_url": "https://api.github.com/users/aminvakil/orgs", "repos_url": "https://api.github.com/users/aminvakil/repos", "events_url": "https://api.github.com/users/aminvakil/events{/privacy}", "received_events_url": "https://api.github.com/users/aminvakil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-03-28T12:04:57Z", "updated_at": "2021-05-23T07:53:48Z", "closed_at": "2021-05-19T14:54:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Running `molecule` command without anything should return error code 2, it's right now returning 0.\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.7\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/amin/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.9/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.9.2 (default, Feb 20 2021, 18:40:11) [GCC 10.2.0]\r\nmolecule 3.3.0 using python 3.9 \r\n    ansible:2.10.7\r\n    delegated:3.3.0 from molecule\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nReturn error code 2\r\n\r\n# Actual Behaviour\r\n\r\nReturns 0.\r\n\r\nP.S.\r\nI've tried finding and opening a PR to fix this unsuccessfully, I'd be more than happy to fix it if I knew how :)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3084/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3084/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3083", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3083/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3083/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3083/events", "html_url": "https://github.com/ansible-community/molecule/issues/3083", "id": 839825243, "node_id": "MDU6SXNzdWU4Mzk4MjUyNDM=", "number": 3083, "title": "Current directory being inadvertently added to ANSIBLE_LIBRARY", "user": {"login": "gravesm", "id": 1382348, "node_id": "MDQ6VXNlcjEzODIzNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1382348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gravesm", "html_url": "https://github.com/gravesm", "followers_url": "https://api.github.com/users/gravesm/followers", "following_url": "https://api.github.com/users/gravesm/following{/other_user}", "gists_url": "https://api.github.com/users/gravesm/gists{/gist_id}", "starred_url": "https://api.github.com/users/gravesm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gravesm/subscriptions", "organizations_url": "https://api.github.com/users/gravesm/orgs", "repos_url": "https://api.github.com/users/gravesm/repos", "events_url": "https://api.github.com/users/gravesm/events{/privacy}", "received_events_url": "https://api.github.com/users/gravesm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-24T15:08:42Z", "updated_at": "2021-05-14T12:02:25Z", "closed_at": "2021-05-14T12:02:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.10.7.post0\r\n  config file = None\r\n  configured module search path = ['/home/mgraves/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/mgraves/git/ansible/lib/ansible\r\n  executable location = /home/mgraves/git/ansible/bin/ansible\r\n  python version = 3.8.8 (default, Mar  5 2021, 11:47:01) [GCC 10.2.1 20210110]\r\nmolecule 3.3.0 using python 3.8 \r\n    ansible:2.10.7.post0\r\n    delegated:3.3.0 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nMolecule should successfully complete.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n~/git/ansible_collections/community/kubernetes $ molecule --debug converge -- -vvv\r\n\r\nDEBUG    Validating schema /home/mgraves/git/ansible_collections/community/kubernetes/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, create, prepare, converge\r\nINFO     Performing prerun...\r\nINFO     Added ANSIBLE_LIBRARY=:plugins/modules\r\nINFO     Added ANSIBLE_COLLECTIONS_PATH=/home/mgraves/git:/home/mgraves/.ansible/collections:/home/mgraves/git:/home/mgraves/.ansible/collections:./.cache/collections\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nWARNING  Skipping, instances are delegated.\r\nINFO     Running default > prepare\r\nWARNING  Skipping, prepare playbook not configured.\r\nINFO     Running default > converge\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /home/mgraves/.cache/molecule/kubernetes/default/collections:/home/mgraves/git:/home/mgraves/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /home/mgraves/.cache/molecule/kubernetes/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/mgraves/git/ansible/venv/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/home/mgraves/.cache/molecule/kubernetes/default/plugins/filter:/home/mgraves/git/ansible_collections/community/kubernetes/plugins/filter:/home/mgraves/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_FORCE_COLOR: 'true'\r\nANSIBLE_HOME: /home/mgraves/git/ansible\r\nANSIBLE_LIBRARY: /home/mgraves/git/ansible/venv/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/home/mgraves/.cache/molecule/kubernetes/default/library:/home/mgraves/git/ansible_collections/community/kubernetes/library:/home/mgraves/.ansible/plugins/modules:/usr/share/ansible/plugins/modules:/home/mgraves/git/ansible_collections/community/kubernetes/:plugins/modules\r\nANSIBLE_ROLES_PATH: '/home/mgraves/.cache/molecule/kubernetes/default/roles:/home/mgraves/git/ansible_collections/community:/home/mgraves/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:'\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: delegated\r\nMOLECULE_ENV_FILE: /home/mgraves/git/ansible_collections/community/kubernetes/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/mgraves/.cache/molecule/kubernetes/default\r\nMOLECULE_FILE: /home/mgraves/.cache/molecule/kubernetes/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/mgraves/.cache/molecule/kubernetes/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/mgraves/.cache/molecule/kubernetes/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /home/mgraves/git/ansible_collections/community/kubernetes\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/mgraves/git/ansible_collections/community/kubernetes/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/mgraves/.cache/molecule/kubernetes/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/mgraves/git/ansible_collections/community/kubernetes/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/home/mgraves/.cache/molecule/kubernetes/default/collections:/home/mgraves/git:/home/mgraves/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/home/mgraves/.cache/molecule/kubernetes/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/mgraves/git/ansible/venv/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/home/mgraves/.cache/molecule/kubernetes/default/plugins/filter:/home/mgraves/git/ansible_collections/community/kubernetes/plugins/filter:/home/mgraves/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_FORCE_COLOR=true ANSIBLE_HOME=/home/mgraves/git/ansible ANSIBLE_LIBRARY=/home/mgraves/git/ansible/venv/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/home/mgraves/.cache/molecule/kubernetes/default/library:/home/mgraves/git/ansible_collections/community/kubernetes/library:/home/mgraves/.ansible/plugins/modules:/usr/share/ansible/plugins/modules:/home/mgraves/git/ansible_collections/community/kubernetes/:plugins/modules ANSIBLE_ROLES_PATH=/home/mgraves/.cache/molecule/kubernetes/default/roles:/home/mgraves/git/ansible_collections/community:/home/mgraves/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles: MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=delegated MOLECULE_ENV_FILE=/home/mgraves/git/ansible_collections/community/kubernetes/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/mgraves/.cache/molecule/kubernetes/default MOLECULE_FILE=/home/mgraves/.cache/molecule/kubernetes/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/mgraves/.cache/molecule/kubernetes/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/mgraves/.cache/molecule/kubernetes/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/home/mgraves/git/ansible_collections/community/kubernetes MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/mgraves/git/ansible_collections/community/kubernetes/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/mgraves/.cache/molecule/kubernetes/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/home/mgraves/git/ansible_collections/community/kubernetes/molecule/default/tests\r\n\r\nCOMMAND: ansible-playbook --diff --inventory /home/mgraves/.cache/molecule/kubernetes/default/inventory --skip-tags molecule-notest,notest -vvv /home/mgraves/git/ansible_collections/community/kubernetes/molecule/default/converge.yml\r\nansible-playbook 2.10.7.post0\r\n  config file = /home/mgraves/.cache/molecule/kubernetes/default/ansible.cfg\r\n  configured module search path = ['/home/mgraves/git/ansible/venv/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules', '/home/mgraves/.cache/molecule/kubernetes/default/library', '/home/mgraves/git/ansible_collections/community/kubernetes/library', '/home/mgraves/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules', '/home/mgraves/git/ansible_collections/community/kubernetes', '/home/mgraves/git/ansible_collections/community/kubernetes/plugins/modules']\r\n  ansible python module location = /home/mgraves/git/ansible/lib/ansible\r\n  executable location = /home/mgraves/git/ansible/bin/ansible-playbook\r\n  python version = 3.8.8 (default, Mar  5 2021, 11:47:01) [GCC 10.2.1 20210110]\r\nUsing /home/mgraves/.cache/molecule/kubernetes/default/ansible.cfg as config file\r\n[WARNING]: running playbook inside collection community.kubernetes\r\n[WARNING]:  * Failed to parse /home/mgraves/.cache/molecule/kubernetes/default/\r\ninventory/ansible_inventory.yml with\r\nansible_collections.community.kubernetes.plugins.inventory.k8s plugin:\r\nIncorrect plugin name in file: none found\r\n  File \"/home/mgraves/git/ansible/lib/ansible/inventory/manager.py\", line 289, in parse_source\r\n    plugin.parse(self._inventory, self._loader, source, cache=cache)\r\n  File \"/home/mgraves/git/ansible_collections/community/kubernetes/plugins/inventory/k8s.py\", line 153, in parse\r\n    config_data = self._read_config_data(path)\r\n  File \"/home/mgraves/git/ansible/lib/ansible/plugins/inventory/__init__.py\", line 227, in _read_config_data\r\n    raise AnsibleParserError(\"Incorrect plugin name in file: %s\" % config.get('plugin', 'none found'))\r\n[WARNING]: Unable to parse /home/mgraves/.cache/molecule/kubernetes/default/inv\r\nentory/ansible_inventory.yml as an inventory source\r\n[WARNING]: Invalid characters were found in group names but not replaced, use\r\n-vvvv to see details\r\nParsed /home/mgraves/.cache/molecule/kubernetes/default/inventory/hosts inventory source with ansible_collections.community.kubernetes.plugins.inventory.k8s plugin\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nredirecting (type: action) community.kubernetes.k8s to community.kubernetes.k8s_info\r\nredirecting (type: action) community.kubernetes.k8s to community.kubernetes.k8s_info\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nredirecting (type: action) community.kubernetes.k8s to community.kubernetes.k8s_info\r\nSkipping callback 'default', as we already have a stdout callback.\r\nSkipping callback 'minimal', as we already have a stdout callback.\r\nSkipping callback 'oneline', as we already have a stdout callback.\r\n\r\nPLAYBOOK: converge.yml *********************************************************\r\n3 plays in /home/mgraves/git/ansible_collections/community/kubernetes/molecule/default/converge.yml\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\nRead vars_file 'vars/main.yml'\r\n\r\nPLAY [Converge] ****************************************************************\r\nRead vars_file 'vars/main.yml'\r\n\r\nTASK [Gathering Facts] *********************************************************\r\ntask path: /home/mgraves/git/ansible_collections/community/kubernetes/molecule/default/converge.yml:2\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: mgraves\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~mgraves && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/mgraves/.ansible/tmp `\"&& mkdir \"` echo /home/mgraves/.ansible/tmp/ansible-tmp-1616596936.7291377-1244769-237862218132468 `\" && echo ansible-tmp-1616596936.7291377-1244769-237862218132468=\"` echo /home/mgraves/.ansible/tmp/ansible-tmp-1616596936.7291377-1244769-237862218132468 `\" ) && sleep 0'\r\nUsing module file /home/mgraves/git/ansible_collections/community/kubernetes/setup.cfg\r\n<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/mgraves/.ansible/tmp/ansible-tmp-1616596936.7291377-1244769-237862218132468/ > /dev/null 2>&1 && sleep 0'\r\nfatal: [localhost]: FAILED! => {\r\n    \"msg\": \"module (ansible.legacy.setup) is missing interpreter line\"\r\n}\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nCRITICAL Ansible return code was 2, command was: ansible-playbook --diff --inventory /home/mgraves/.cache/molecule/kubernetes/default/inventory --skip-tags molecule-notest,notest -vvv /home/mgraves/git/ansible_collections/community/kubernetes/molecule/default/converge.yml\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](https://stackoverflow.com/help/mcve) with\r\noutput of running `molecule --debug`.\r\n```\r\nOur test suite started failing with the 3.3.0 version of molecule. The prerun change that was added in #3077 started adding the current directory to `ANSIBLE_LIBRARY`. This can cause ansible to fail when there is a file with the same name as a module as can be seen here where ansible is trying to read `setup.cfg` in our project root as the setup module.\r\n\r\nThe problem seems to be in https://github.com/ansible-community/molecule/blob/60b68140fb5c650c47019f5db238c0864dbd43ed/src/molecule/provisioner/ansible.py#L943 In our case, after ansible-lint has run `prepare_environment` the `ANSIBLE_LIBRARY` envvar is `:plugin/modules`. I would think calling `abs_path` on this probably not appropriate since this is a colon separated path string and should just be read in unprocessed.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3083/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3083/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3082", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3082/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3082/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3082/events", "html_url": "https://github.com/ansible-community/molecule/issues/3082", "id": 838946184, "node_id": "MDU6SXNzdWU4Mzg5NDYxODQ=", "number": 3082, "title": "Support Ansible Debug Mode", "user": {"login": "jimbo8098", "id": 12417556, "node_id": "MDQ6VXNlcjEyNDE3NTU2", "avatar_url": "https://avatars.githubusercontent.com/u/12417556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jimbo8098", "html_url": "https://github.com/jimbo8098", "followers_url": "https://api.github.com/users/jimbo8098/followers", "following_url": "https://api.github.com/users/jimbo8098/following{/other_user}", "gists_url": "https://api.github.com/users/jimbo8098/gists{/gist_id}", "starred_url": "https://api.github.com/users/jimbo8098/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jimbo8098/subscriptions", "organizations_url": "https://api.github.com/users/jimbo8098/orgs", "repos_url": "https://api.github.com/users/jimbo8098/repos", "events_url": "https://api.github.com/users/jimbo8098/events{/privacy}", "received_events_url": "https://api.github.com/users/jimbo8098/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-03-23T17:17:12Z", "updated_at": "2021-06-04T08:08:10Z", "closed_at": "2021-06-04T08:08:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n761917 1616519124.85984: starting run\r\nansible 2.10.7\r\n  config file = /home/jimspeir/.ansible.cfg\r\n  configured module search path = ['/home/jimspeir/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/jimspeir/.local/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.5 (default, Jan 27 2021, 15:41:15) [GCC 9.3.0]\r\n\r\n\r\n\r\n763930 1616519359.71985: starting run\r\nansible 2.10.7\r\n  config file = /home/jimspeir/.ansible.cfg\r\n  configured module search path = ['/home/jimspeir/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/jimspeir/.local/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.5 (default, Jan 27 2021, 15:41:15) [GCC 9.3.0]\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 764, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 716, in main\r\n    with self.make_context(prog_name, args, **extra) as ctx:\r\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 641, in make_context\r\n    self.parse_args(ctx, args)\r\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 1089, in parse_args\r\n    rest = Command.parse_args(self, ctx, args)\r\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 940, in parse_args\r\n    value, args = param.handle_parse_result(ctx, opts, args)\r\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 1476, in handle_parse_result\r\n    value = invoke_param_callback(\r\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 96, in invoke_param_callback\r\n    return callback(ctx, param, value)\r\n  File \"/home/jimspeir/.local/lib/python3.8/site-packages/molecule/shell.py\", line 66, in print_version\r\n    f\"    [repr.attrib_name]ansible[/][dim]:[/][repr.number]{ansible_version()}[/]\"\r\n  File \"/home/jimspeir/.local/lib/python3.8/site-packages/molecule/config.py\", line 477, in ansible_version\r\n    return Version(version)\r\n  File \"/usr/local/lib/python3.8/dist-packages/packaging/version.py\", line 298, in __init__\r\n    raise InvalidVersion(\"Invalid version: '{0}'\".format(version))\r\npackaging.version.InvalidVersion: Invalid version: '1616519360.39662:'\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\n# Desired Behavior\r\n\r\nWhen you output the version number with ansible.cfg's `debug=true` (as above) the ansible build reference is output which throws off version checks on https://github.com/ansible-community/molecule/blob/60b68140fb5c650c47019f5db238c0864dbd43ed/src/molecule/config.py#L484  I propose that the check might include a check for the word ansible which seems consistent. If that's an agreed handling of this, I'm happy to PR a change.\r\n\r\nWhen `debug=false`, the issue immediately goes away because the version check passes.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3082/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3082/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3079", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3079/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3079/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3079/events", "html_url": "https://github.com/ansible-community/molecule/pull/3079", "id": 837872024, "node_id": "MDExOlB1bGxSZXF1ZXN0NTk4MTQyMTE4", "number": 3079, "title": "Assure molecule uses root logger", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-22T16:00:56Z", "updated_at": "2021-03-22T16:14:39Z", "closed_at": "2021-03-22T16:14:38Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3079", "html_url": "https://github.com/ansible-community/molecule/pull/3079", "diff_url": "https://github.com/ansible-community/molecule/pull/3079.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3079.patch", "merged_at": "2021-03-22T16:14:38Z"}, "body": "Instead of using a names \"molecule\" logger, we configure the root logger so we do not lose messages produced by other modules.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3079/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3079/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3076", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3076/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3076/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3076/events", "html_url": "https://github.com/ansible-community/molecule/issues/3076", "id": 833823080, "node_id": "MDU6SXNzdWU4MzM4MjMwODA=", "number": 3076, "title": "Collection install from git does not install correct version", "user": {"login": "rndmh3ro", "id": 3198961, "node_id": "MDQ6VXNlcjMxOTg5NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3198961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rndmh3ro", "html_url": "https://github.com/rndmh3ro", "followers_url": "https://api.github.com/users/rndmh3ro/followers", "following_url": "https://api.github.com/users/rndmh3ro/following{/other_user}", "gists_url": "https://api.github.com/users/rndmh3ro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rndmh3ro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rndmh3ro/subscriptions", "organizations_url": "https://api.github.com/users/rndmh3ro/orgs", "repos_url": "https://api.github.com/users/rndmh3ro/repos", "events_url": "https://api.github.com/users/rndmh3ro/events{/privacy}", "received_events_url": "https://api.github.com/users/rndmh3ro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-17T14:16:44Z", "updated_at": "2021-03-29T06:12:13Z", "closed_at": "2021-03-29T06:12:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.6\r\n  config file = /home/segu/.ansible.cfg\r\n  configured module search path = ['/root/dev/openshift-ansible/roles/lib_openshift/library', '/root/dev/openshift-ansible/roles/openshift_facts/library', '/root/dev/openshift-ansible/roles/lib_utils/library']\r\n  ansible python module location = /home/segu/.local/lib/python3.8/site-packages/ansible\r\n  executable location = /home/segu/.local/bin/ansible\r\n  python version = 3.8.5 (default, Jan 27 2021, 15:41:15) [GCC 9.3.0]\r\nmolecule 3.2.4 using python 3.8\r\n    ansible:2.10.6\r\n    delegated:3.2.4 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\n# Desired Behavior\r\n\r\nI expect that the latest version of a collection defined in a requirements.yml is installed:\r\n\r\n```\r\n---\r\ncollections:\r\n  - name: git+https://github.com/ansible-collections/community.mysql.git\r\n    type: git\r\n    version: main\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nThe latest tagged release (v1.3.0 in this case) gets installed:\r\n\r\n```\r\nCOMMAND: ansible-galaxy collection install --collections-path /home/segu/.cache/molecule/hardening/mysql_hardening/collections --force --requirements-file molecule/mysql_hardening/requirementss.yml -vvv         ansible-galaxy 2.10.6                                                                                                                                                                                                config file = /home/segu/.ansible.cfg                                                                                                                                                                              configured module search path = ['/root/dev/openshift-ansible/roles/lib_openshift/library', '/root/dev/openshift-ansible/roles/openshift_facts/library', '/root/dev/openshift-ansible/roles/lib_utils/library']    ansible python module location = /home/segu/.local/lib/python3.8/site-packages/ansible                                                                                                                             executable location = /home/segu/.local/bin/ansible-galaxy                                                                                                                                                         python version = 3.8.5 (default, Jan 27 2021, 15:41:15) [GCC 9.3.0]                                                                                                                                              Using /home/segu/.ansible.cfg as config file                                                                                                                                                                       Reading requirement file at '/home/segu/dev/collections/ansible_collections/devsec/hardening/molecule/mysql_hardening/requirementss.yml'                                                                           Starting galaxy collection install process\r\nProcess install dependency map\r\nProcessing requirement collection 'git+https://github.com/ansible-collections/community.mysql.git'                                                                                                                 archiving ['/usr/bin/git', 'archive', '--prefix=community.mysql/', '--output=/home/segu/.ansible/tmp/ansible-local-207360lf2ruqn/tmp3vav2sbp.tar', 'main']\r\nSkipping '/home/segu/.ansible/tmp/ansible-local-207360lf2ruqn/tmpjiulymjr/community.mysql/galaxy.yml' for collection build\r\nStarting collection install process\r\nInstalling 'community.mysql:1.3.0' to '/home/segu/.cache/molecule/hardening/mysql_hardening/collections/ansible_collections/community/mysql'\r\nSkipping '/home/segu/.ansible/tmp/ansible-local-207360lf2ruqn/tmpjiulymjr/community.mysql/galaxy.yml' for collection build\r\nCreated collection for community.mysql at /home/segu/.cache/molecule/hardening/mysql_hardening/collections/ansible_collections/community/mysql\r\ncommunity.mysql (1.3.0) was installed successfully\r\n                                                                                                                                                                    \r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3076/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3075", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3075/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3075/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3075/events", "html_url": "https://github.com/ansible-community/molecule/issues/3075", "id": 833070294, "node_id": "MDU6SXNzdWU4MzMwNzAyOTQ=", "number": 3075, "title": "3.2.4 is broken for docker (at least on Travis)", "user": {"login": "jorhett", "id": 1417194, "node_id": "MDQ6VXNlcjE0MTcxOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1417194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jorhett", "html_url": "https://github.com/jorhett", "followers_url": "https://api.github.com/users/jorhett/followers", "following_url": "https://api.github.com/users/jorhett/following{/other_user}", "gists_url": "https://api.github.com/users/jorhett/gists{/gist_id}", "starred_url": "https://api.github.com/users/jorhett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jorhett/subscriptions", "organizations_url": "https://api.github.com/users/jorhett/orgs", "repos_url": "https://api.github.com/users/jorhett/repos", "events_url": "https://api.github.com/users/jorhett/events{/privacy}", "received_events_url": "https://api.github.com/users/jorhett/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-03-16T18:07:08Z", "updated_at": "2021-03-29T20:14:26Z", "closed_at": "2021-03-23T10:25:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nAnsible 3.0 with Molecule 3.2.4\r\n\r\nAnsible and Molecule installation method:\r\n\r\n```\r\npip3 install molecule[lint,docker]\r\n```\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nTravis CI job that worked yesterday with 3.2.3 should work.\r\n\r\n# Actual Behaviour\r\n\r\nAs of this morning all CI jobs with molecule are failing on Travis. The breakage happened when 3.2.4 appeared. Reverting to 3.2.3 fixes it. I'm still debugging but it's hard to iterate usefully on Travis :(\r\n\r\n```\r\nINFO     Sanity checks: 'docker'\r\nERROR! couldn't resolve module/action 'docker_container'. This often indicates a misspelling, missing collection, or incorrect module path.\r\nThe error appears to be in '/home/travis/virtualenv/python3.8.3/lib/python3.8/site-packages/molecule_docker/playbooks/destroy.yml': line 8, column 7, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\nThe offending line appears to be:\r\n  tasks:\r\n    - name: Destroy molecule instance(s)\r\n      ^ here\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3075/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3075/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3073", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3073/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3073/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3073/events", "html_url": "https://github.com/ansible-community/molecule/issues/3073", "id": 829556174, "node_id": "MDU6SXNzdWU4Mjk1NTYxNzQ=", "number": 3073, "title": "driver-template configuration flag missing", "user": {"login": "alexnovak", "id": 7763722, "node_id": "MDQ6VXNlcjc3NjM3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/7763722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexnovak", "html_url": "https://github.com/alexnovak", "followers_url": "https://api.github.com/users/alexnovak/followers", "following_url": "https://api.github.com/users/alexnovak/following{/other_user}", "gists_url": "https://api.github.com/users/alexnovak/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexnovak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexnovak/subscriptions", "organizations_url": "https://api.github.com/users/alexnovak/orgs", "repos_url": "https://api.github.com/users/alexnovak/repos", "events_url": "https://api.github.com/users/alexnovak/events{/privacy}", "received_events_url": "https://api.github.com/users/alexnovak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-03-11T21:59:55Z", "updated_at": "2021-06-05T08:53:16Z", "closed_at": "2021-06-05T08:53:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\nansible: 2.9.6\r\nmolecule: 3.2.2\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule init secnario` should accept a `--driver-template` configuration flag, which lets you input a directory of cookiecutter templates that can correspond to the `--driver-name` configuration flag.\r\n\r\n# Actual Behaviour\r\n\r\nWhen running the following example: `molecule init scenario --driver-name ec2 --driver-template /path/to/template scenario-name`, the following output is returned:\r\n```\r\nUsage: molecule init scenario [OPTIONS] [SCENARIO_NAME]\r\nTry \"molecule init scenario --help\" for help.\r\n\r\nError: no such option: --driver-template\r\n```\r\n\r\nI noticed this when upgrading from version `3.0.2`. I could definitely just have missed the memo and this behavior was deprecated, but based on remaining code it looks like the removal was accidental. A bunch of the logic for the `driver_template` variable still exists in the [scenario.py file](https://github.com/ansible-community/molecule/blob/master/src/molecule/command/init/scenario.py#L92).\r\n\r\nThe most substantial difference between `3.0.2` ([here](https://github.com/ansible-community/molecule/blob/3.0.2/molecule/command/init/scenario.py)) and the main branch ([here](https://github.com/ansible-community/molecule/blob/master/src/molecule/command/init/scenario.py#L92)) is the removal of \r\n```\r\n@click.option(\r\n    \"--driver-template\",\r\n    type=click.Path(exists=True, dir_okay=True, readable=True, resolve_path=True),\r\n    help=\"Path to a cookiecutter custom driver template to initialize the \"\r\n    \"scenario. If the driver template is not found locally, default \"\r\n    \"template will be used instead.\",\r\n)\r\n```\r\nFrom the configuration options, as well as \r\n```\r\n    driver_template = driver_template or os.environ.get(\r\n        \"MOLECULE_SCENARIO_DRIVER_TEMPLATE\", None\r\n    )\r\n    if driver_template:\r\n        command_args[\"driver_template\"] = driver_template\r\n\r\n```\r\nbeing pulled from the `scenario` function.\r\nReintroducing these lines of code makes the command work the way I was expecting.\r\n\r\nThe docstring is also now a little strange, suggesting that the appropriate command for initializing a scenario with a cookiecutter template is `cd foo; molecule init scenario bar --role-name foo` instead of the previous `cd foo; molecule init scenario bar --role-name foo --driver-template path`. I might be missing something, but I haven't been able to get the former to work as expected.\r\n\r\nSuper sorry if I missed something and this is deprecated behavior! But enough things looked odd that it seemed worthy to flag. On the chance this _is_ an issue, I'd be happy to make a PR for the changes that appeared to work for me. \r\nThanks for your time and effort!\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3073/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3073/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3072", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3072/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3072/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3072/events", "html_url": "https://github.com/ansible-community/molecule/issues/3072", "id": 828913984, "node_id": "MDU6SXNzdWU4Mjg5MTM5ODQ=", "number": 3072, "title": "Double-nested ansible_collections folders cause errors", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-11T08:21:26Z", "updated_at": "2021-04-30T18:52:34Z", "closed_at": "2021-04-30T18:52:34Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nansible - 3.1.0\r\nansible-base - 2.10.6\r\nmolecule - 3.2.3\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nBecause of some weirdness I'm running my tests under a double folder structure that goes something like\r\n\r\n/home/user/src/ansible_collections/some/more/paths/ansible_collections/namespace/collection/roles\r\n\r\nWhen living there, I should still have no issues with running Molecule\r\n\r\n# Actual Behaviour\r\n\r\nErrors arise from line 424 in molecule/provisioner/ansible.py which assumes that collection_indicator occurs exactly one time in the path structure.\r\n\r\nResulting output:\r\n\r\n```console\r\n$ tox -e roles-test_role-docker\r\nroles-test_role-docker installed: ansible==3.1.0,ansible-base==2.10.5,ansible-lint==5.0.3,appdirs==1.4.4,arrow==1.0.3,attrs==20.3.0,bcrypt==3.2.0,binaryornot==0.4.4,boto==2.49.0,boto3==1.17.25,botocore==1.20.25,bracex==2.1.1,Cerberus==1.3.2,certifi==2020.12.5,cffi==1.14.5,chardet==4.0.0,click==7.1.2,click-completion==0.5.2,click-help-colors==0.9,colorama==0.4.4,commonmark==0.9.1,cookiecutter==1.7.2,cryptography==3.4.6,decorator==4.4.2,distro==1.5.0,docker==4.4.4,dogpile.cache==1.1.2,enrich==1.2.6,flake8==3.8.4,idna==2.10,iniconfig==1.1.1,iso8601==0.1.14,Jinja2==2.11.3,jinja2-time==0.2.0,jmespath==0.10.0,jsonpatch==1.31,jsonpointer==2.0,keystoneauth1==4.3.1,MarkupSafe==1.1.1,mccabe==0.6.1,molecule==3.2.2,molecule-containers==0.2.1,molecule-docker==0.2.4,molecule-ec2==0.3,molecule-openstack==0.3,molecule-podman==0.3.0,molecule-vagrant==0.6.1,munch==2.5.0,netifaces==0.10.9,openstacksdk==0.54.0,os-client-config==2.1.0,os-service-types==1.7.0,packaging==20.9,paramiko==2.7.2,pathspec==0.8.1,pbr==5.5.1,pluggy==0.13.1,poyo==0.5.0,py==1.10.0,pycodestyle==2.6.0,pycparser==2.20,pyflakes==2.2.0,Pygments==2.8.1,PyNaCl==1.4.0,pyparsing==2.4.7,pytest==6.2.2,pytest-testinfra==6.1.0,python-dateutil==2.8.1,python-slugify==4.0.1,PyYAML==5.4.1,requests==2.25.1,requestsexceptions==1.4.0,rich==9.13.0,ruamel.yaml==0.16.13,ruamel.yaml.clib==0.2.2,s3transfer==0.3.4,selinux==0.2.1,shellingham==1.4.0,six==1.15.0,stevedore==3.3.0,subprocess-tee==0.2.0,testinfra==6.0.0,text-unidecode==1.3,toml==0.10.2,typing-extensions==3.7.4.3,urllib3==1.26.3,wcmatch==8.1.2,websocket-client==0.58.0,yamllint==1.26.0\r\nroles-test_role-docker run-test-pre: PYTHONHASHSEED='4259097906'\r\nroles-test_role-docker run-test: commands[0] | molecule --debug -c /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/tests/molecule.yml test -s docker\r\nDEBUG    Validating schema /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/molecule/docker/molecule.yml.\r\nINFO     docker scenario test matrix: dependency, lint, cleanup, destroy, syntax, create, prepare, converge, idempotence, side_effect, verify, cleanup, destroy\r\nINFO     Running docker > dependency\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /var/home/ghelling/src/:/var/home/ghelling/.ansible\r\nANSIBLE_COLLECTIONS_PATHS: /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/../../../\r\nANSIBLE_FORCE_COLOR: '1'\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /var/home/ghelling/.cache/molecule/test_role/docker\r\nMOLECULE_FILE: /var/home/ghelling/.cache/molecule/test_role/docker/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /var/home/ghelling/.cache/molecule/test_role/docker/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /var/home/ghelling/.cache/molecule/test_role/docker/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/molecule/docker\r\nMOLECULE_SCENARIO_NAME: docker\r\nMOLECULE_STATE_FILE: /var/home/ghelling/.cache/molecule/test_role/docker/state.yml\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/molecule/docker/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/var/home/ghelling/src/:/var/home/ghelling/.ansible ANSIBLE_COLLECTIONS_PATHS=/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/../../../ ANSIBLE_FORCE_COLOR=1 MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/var/home/ghelling/.cache/molecule/test_role/docker MOLECULE_FILE=/var/home/ghelling/.cache/molecule/test_role/docker/molecule.yml MOLECULE_INSTANCE_CONFIG=/var/home/ghelling/.cache/molecule/test_role/docker/instance_config.yml MOLECULE_INVENTORY_FILE=/var/home/ghelling/.cache/molecule/test_role/docker/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/molecule/docker MOLECULE_SCENARIO_NAME=docker MOLECULE_STATE_FILE=/var/home/ghelling/.cache/molecule/test_role/docker/state.yml MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/molecule/docker/tests\r\n\r\nCOMMAND: ansible-galaxy install --force --role-file ../../requirements.yml --roles-path /var/home/ghelling/.cache/molecule/test_role/docker/roles -vvv\r\nansible-galaxy 2.10.5\r\n  config file = /var/home/ghelling/.ansible.cfg\r\n  configured module search path = ['/var/home/ghelling/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/ansible\r\n  executable location = /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/bin/ansible-galaxy\r\n  python version = 3.9.1 (default, Dec  8 2020, 00:00:00) [GCC 10.2.1 20201125 (Red Hat 10.2.1-9)]\r\nUsing /var/home/ghelling/.ansible.cfg as config file\r\nReading requirement file at '/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/requirements.yml'\r\n[WARNING]: The requirements file '/var/home/ghelling/src/ansible_collections/me\r\nta_ansible_templates/ansible_collections/test_ns/test_collection/requirements.y\r\nml' contains collections which will be ignored. To install these collections\r\nrun 'ansible-galaxy collection install -r' or to install both at the same time\r\nrun 'ansible-galaxy install -r' without a custom install path.\r\nSkipping install, no requirements found\r\nINFO     Dependency completed successfully.\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /var/home/ghelling/.cache/molecule/test_role/docker/collections\r\nANSIBLE_COLLECTIONS_PATHS: /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/../../../\r\nANSIBLE_FORCE_COLOR: '1'\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /var/home/ghelling/.cache/molecule/test_role/docker\r\nMOLECULE_FILE: /var/home/ghelling/.cache/molecule/test_role/docker/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /var/home/ghelling/.cache/molecule/test_role/docker/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /var/home/ghelling/.cache/molecule/test_role/docker/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/molecule/docker\r\nMOLECULE_SCENARIO_NAME: docker\r\nMOLECULE_STATE_FILE: /var/home/ghelling/.cache/molecule/test_role/docker/state.yml\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/molecule/docker/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/var/home/ghelling/.cache/molecule/test_role/docker/collections ANSIBLE_COLLECTIONS_PATHS=/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/../../../ ANSIBLE_FORCE_COLOR=1 MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/var/home/ghelling/.cache/molecule/test_role/docker MOLECULE_FILE=/var/home/ghelling/.cache/molecule/test_role/docker/molecule.yml MOLECULE_INSTANCE_CONFIG=/var/home/ghelling/.cache/molecule/test_role/docker/instance_config.yml MOLECULE_INVENTORY_FILE=/var/home/ghelling/.cache/molecule/test_role/docker/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/molecule/docker MOLECULE_SCENARIO_NAME=docker MOLECULE_STATE_FILE=/var/home/ghelling/.cache/molecule/test_role/docker/state.yml MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/roles/test_role/molecule/docker/tests\r\n\r\nCOMMAND: ansible-galaxy collection install --collections-path /var/home/ghelling/.cache/molecule/test_role/docker/collections --force --requirements-file ../../requirements.yml -vvv\r\nansible-galaxy 2.10.5\r\n  config file = /var/home/ghelling/.ansible.cfg\r\n  configured module search path = ['/var/home/ghelling/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/ansible\r\n  executable location = /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/bin/ansible-galaxy\r\n  python version = 3.9.1 (default, Dec  8 2020, 00:00:00) [GCC 10.2.1 20201125 (Red Hat 10.2.1-9)]\r\nUsing /var/home/ghelling/.ansible.cfg as config file\r\nReading requirement file at '/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/requirements.yml'\r\nStarting galaxy collection install process\r\nFound installed collection oasis_roles.system:1.1.2 at '/var/home/ghelling/.cache/molecule/test_role/docker/collections/ansible_collections/oasis_roles/system'\r\nProcess install dependency map\r\nProcessing requirement collection 'oasis_roles.system'\r\nOpened /var/home/ghelling/.ansible/galaxy_token\r\nCollection 'oasis_roles.system' obtained from server default https://galaxy.ansible.com/api/\r\nStarting collection install process\r\nInstalling 'oasis_roles.system:1.1.2' to '/var/home/ghelling/.cache/molecule/test_role/docker/collections/ansible_collections/oasis_roles/system'\r\nDownloading https://galaxy.ansible.com/download/oasis_roles-system-1.1.2.tar.gz to /var/home/ghelling/.ansible/tmp/ansible-local-19703xsl957j9/tmponq_48k7\r\noasis_roles.system (1.1.2) was installed successfully\r\nINFO     Dependency completed successfully.\r\nINFO     Running docker > lint\r\nINFO     Lint is disabled.\r\nINFO     Running docker > cleanup\r\nWARNING  Skipping, cleanup playbook not configured.\r\nINFO     Running docker > destroy\r\nTraceback (most recent call last):\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/bin/molecule\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/click/decorators.py\", line 21, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/command/test.py\", line 149, in test\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/command/base.py\", line 113, in execute_cmdline_scenarios\r\n    execute_scenario(scenario)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/command/base.py\", line 155, in execute_scenario\r\n    execute_subcommand(scenario.config, action)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/command/base.py\", line 144, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/logger.py\", line 185, in wrapper\r\n    rt = func(*args, **kwargs)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/command/destroy.py\", line 107, in execute\r\n    self._config.provisioner.destroy()\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/provisioner/ansible.py\", line 702, in destroy\r\n    pb = self._get_ansible_playbook(self.playbooks.destroy)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/provisioner/ansible.py\", line 868, in _get_ansible_playbook\r\n    return ansible_playbook.AnsiblePlaybook(playbook, self._config, **kwargs)\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/provisioner/ansible_playbook.py\", line 45, in __init__\r\n    self._env = self._config.provisioner.env\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/provisioner/ansible.py\", line 519, in env\r\n    default_env = self.default_env\r\n  File \"/var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/lib/python3.9/site-packages/molecule/provisioner/ansible.py\", line 424, in default_env\r\n    collection_path, right = self._config.project_directory.split(\r\nValueError: too many values to unpack (expected 2)\r\nERROR: InvocationError for command /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/.tox/ansible/bin/molecule --debug -c /var/home/ghelling/src/ansible_collections/meta_ansible_templates/ansible_collections/test_ns/test_collection/tests/molecule.yml test -s docker (exited with code 1)\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3072/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3071", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3071/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3071/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3071/events", "html_url": "https://github.com/ansible-community/molecule/issues/3071", "id": 827588076, "node_id": "MDU6SXNzdWU4Mjc1ODgwNzY=", "number": 3071, "title": "ModuleNotFoundError: No module named 'molecule'", "user": {"login": "stiliajohny", "id": 17669235, "node_id": "MDQ6VXNlcjE3NjY5MjM1", "avatar_url": "https://avatars.githubusercontent.com/u/17669235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stiliajohny", "html_url": "https://github.com/stiliajohny", "followers_url": "https://api.github.com/users/stiliajohny/followers", "following_url": "https://api.github.com/users/stiliajohny/following{/other_user}", "gists_url": "https://api.github.com/users/stiliajohny/gists{/gist_id}", "starred_url": "https://api.github.com/users/stiliajohny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stiliajohny/subscriptions", "organizations_url": "https://api.github.com/users/stiliajohny/orgs", "repos_url": "https://api.github.com/users/stiliajohny/repos", "events_url": "https://api.github.com/users/stiliajohny/events{/privacy}", "received_events_url": "https://api.github.com/users/stiliajohny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-03-10T11:33:30Z", "updated_at": "2021-05-19T15:19:47Z", "closed_at": "2021-05-19T15:19:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.10.6\r\n  config file = None\r\n  configured module search path = ['/Users/[USER]/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/Cellar/ansible/3.0.0/libexec/lib/python3.9/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.9.2 (default, Feb 24 2021, 13:26:01) [Clang 11.0.0 (clang-1100.0.33.17)]\r\nmolecule 3.2.3 using python 3.9 \r\n    ansible:2.10.6\r\n    delegated:3.2.3 from molecule\r\n    vagrant:0.6.1 from molecule_vagrant\r\n```\r\n\r\nMolecule installation method:\r\n\r\n- pip\r\n\r\nAnsible installation method:\r\n\r\n- OS package ( brew )\r\n\r\n\r\n**Please note the debug output below is taken from two different devices as to demonstrate the Desire and the Actual behaviour**\r\n\r\n# Desired Behavior\r\n\r\n```\r\nDEBUG    Validating schema /Users/[USER]/Documents/GitHub/[ROLE-NAME]/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, create, prepare\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/collections:/Users/[USER]/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/plugins/filter:/Users/[USER]/Documents/GitHub/[ROLE-NAME]/plugins/filter:/Users/[USER]/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_LIBRARY: /usr/local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/[USER]/Library/Python/3.9/lib/python/site-packages/molecule_vagrant/modules:/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/library:/Users/[USER]/Documents/GitHub/[ROLE-NAME]/library:/Users/[USER]/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/roles:/Users/[USER]/Documents/GitHub:/Users/[USER]/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/[USER]/Documents/GitHub/[ROLE-NAME]/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default\r\nMOLECULE_FILE: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /Users/[USER]/Documents/GitHub/[ROLE-NAME]\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/[USER]/Documents/GitHub/[ROLE-NAME]/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/[USER]/Documents/GitHub/[ROLE-NAME]/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/collections:/Users/[USER]/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/plugins/filter:/Users/[USER]/Documents/GitHub/[ROLE-NAME]/plugins/filter:/Users/[USER]/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_FORCE_COLOR=1 ANSIBLE_LIBRARY=/usr/local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/[USER]/Library/Python/3.9/lib/python/site-packages/molecule_vagrant/modules:/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/library:/Users/[USER]/Documents/GitHub/[ROLE-NAME]/library:/Users/[USER]/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/roles:/Users/[USER]/Documents/GitHub:/Users/[USER]/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/[USER]/Documents/GitHub/[ROLE-NAME]/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default MOLECULE_FILE=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/Users/[USER]/Documents/GitHub/[ROLE-NAME] MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/[USER]/Documents/GitHub/[ROLE-NAME]/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/[USER]/Documents/GitHub/[ROLE-NAME]/molecule/default/tests\r\n\r\nCOMMAND: ansible-playbook --diff --inventory /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/inventory --skip-tags molecule-notest,notest /Users/[USER]/Library/Python/3.9/lib/python/site-packages/molecule_vagrant/playbooks/create.yml\r\n\r\nPLAY [Create] ******************************************************************\r\n\r\nTASK [Create molecule instance(s)] *********************************************\r\nchanged: [localhost] => (item=AL2)\r\nchanged: [localhost] => (item=Ubuntu-1804)\r\n```\r\n\r\n# Actual Behaviour\r\n```\r\nDEBUG    Validating schema /Users/[USER]/git/[ROLE-NAME]/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, create, prepare\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > create\r\nDEBUG: ANSIBLE ENVIRONMENT:\r\nANSIBLE_COLLECTIONS_PATH: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/collections:/Users/[USER]/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/plugins/filter:/Users/[USER]/git/git_sky/[ROLE-NAME]/plugins/filter:/Users/[USER]/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_LIBRARY: /usr/local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/usr/local/lib/python3.9/site-packages/molecule_vagrant/modules:/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/library:/Users/[USER]/git/git_sky/[ROLE-NAME]/library:/Users/[USER]/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/roles:/Users/[USER]/git/git_sky:/Users/[USER]/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\nDEBUG: MOLECULE ENVIRONMENT:\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/[USER]/git/[ROLE-NAME]/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default\r\nMOLECULE_FILE: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /Users/[USER]/git/[ROLE-NAME]\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/[USER]/git/[ROLE-NAME]/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/[USER]/git/[ROLE-NAME]/molecule/default/tests\r\nDEBUG: SHELL REPLAY:\r\nANSIBLE_COLLECTIONS_PATH=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/collections:/Users/[USER]/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/plugins/filter:/Users/[USER]/git/[ROLE-NAME]/plugins/filter:/Users/[USER]/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_FORCE_COLOR=1 ANSIBLE_LIBRARY=/usr/local/lib/python3.9/site-packages/molecule/provisioner/ansible/plugins/modules:/usr/local/lib/python3.9/site-packages/molecule_vagrant/modules:/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/library:/Users/[USER]/git/[ROLE-NAME]/library:/Users/[USER]/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/roles:/Users/[USER]/git:/Users/[USER]/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/[USER]/git/[ROLE-NAME]/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default MOLECULE_FILE=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/Users/[USER]/git/[ROLE-NAME] MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/[USER]/git/[ROLE-NAME]/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/[USER]/.cache/molecule/[ROLE-NAME]/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/[USER]/git/[ROLE-NAME]/molecule/default/tests\r\nCOMMAND: ansible-playbook --diff --inventory /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/inventory --skip-tags molecule-notest,notest /usr/local/lib/python3.9/site-packages/molecule_vagrant/playbooks/create.yml\r\nPLAY [Create] ******************************************************************\r\nTASK [Create molecule instance(s)] *********************************************\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'molecule'\r\nfailed: [localhost] (item=AL2) => {\"ansible_loop_var\": \"item\", \"changed\": false, \"item\": {\"box\": \"bento/amazonlinux-2\", \"cpus\": 2, \"memory\": 512, \"name\": \"AL2\"}, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375136.352462-8047-106005504584937/AnsiballZ_vagrant.py\\\", line 102, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375136.352462-8047-106005504584937/AnsiballZ_vagrant.py\\\", line 94, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375136.352462-8047-106005504584937/AnsiballZ_vagrant.py\\\", line 40, in invoke_module\\n    runpy.run_module(mod_name='ansible.modules.vagrant', init_globals=None, run_name='__main__', alter_sys=True)\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 210, in run_module\\n    return _run_module_code(code, init_globals, run_name, mod_spec)\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 97, in _run_module_code\\n    _run_code(code, mod_globals, init_globals,\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 87, in _run_code\\n    exec(code, run_globals)\\n  File \\\"/var/folders/y9/mchss6y93rnclf75v93h3h140000gp/T/ansible_vagrant_payload_8jt3u1r7/ansible_vagrant_payload.zip/ansible/modules/vagrant.py\\\", line 37, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \"rc\": 1}\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'molecule'\r\nfailed: [localhost] (item=Ubuntu-1804) => {\"ansible_loop_var\": \"item\", \"changed\": false, \"item\": {\"box\": \"ubuntu/bionic64\", \"cpus\": 2, \"memory\": 512, \"name\": \"Ubuntu-1804\"}, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375136.8238668-8047-262028155380905/AnsiballZ_vagrant.py\\\", line 102, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375136.8238668-8047-262028155380905/AnsiballZ_vagrant.py\\\", line 94, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375136.8238668-8047-262028155380905/AnsiballZ_vagrant.py\\\", line 40, in invoke_module\\n    runpy.run_module(mod_name='ansible.modules.vagrant', init_globals=None, run_name='__main__', alter_sys=True)\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 210, in run_module\\n    return _run_module_code(code, init_globals, run_name, mod_spec)\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 97, in _run_module_code\\n    _run_code(code, mod_globals, init_globals,\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 87, in _run_code\\n    exec(code, run_globals)\\n  File \\\"/var/folders/y9/mchss6y93rnclf75v93h3h140000gp/T/ansible_vagrant_payload_qtqlwf11/ansible_vagrant_payload.zip/ansible/modules/vagrant.py\\\", line 37, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \"rc\": 1}\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'molecule'\r\nfailed: [localhost] (item=Ubuntu-2004) => {\"ansible_loop_var\": \"item\", \"changed\": false, \"item\": {\"box\": \"ubuntu/focal64\", \"cpus\": 2, \"memory\": 512, \"name\": \"Ubuntu-2004\"}, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375142.146912-8047-146492966108471/AnsiballZ_vagrant.py\\\", line 102, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375142.146912-8047-146492966108471/AnsiballZ_vagrant.py\\\", line 94, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375142.146912-8047-146492966108471/AnsiballZ_vagrant.py\\\", line 40, in invoke_module\\n    runpy.run_module(mod_name='ansible.modules.vagrant', init_globals=None, run_name='__main__', alter_sys=True)\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 210, in run_module\\n    return _run_module_code(code, init_globals, run_name, mod_spec)\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 97, in _run_module_code\\n    _run_code(code, mod_globals, init_globals,\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 87, in _run_code\\n    exec(code, run_globals)\\n  File \\\"/var/folders/y9/mchss6y93rnclf75v93h3h140000gp/T/ansible_vagrant_payload_j2597j6p/ansible_vagrant_payload.zip/ansible/modules/vagrant.py\\\", line 37, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \"rc\": 1}\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'molecule'\r\nfailed: [localhost] (item=Centos-7) => {\"ansible_loop_var\": \"item\", \"changed\": false, \"item\": {\"box\": \"centos/7\", \"cpus\": 2, \"memory\": 512, \"name\": \"Centos-7\"}, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375142.4356742-8047-229448000171481/AnsiballZ_vagrant.py\\\", line 102, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375142.4356742-8047-229448000171481/AnsiballZ_vagrant.py\\\", line 94, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375142.4356742-8047-229448000171481/AnsiballZ_vagrant.py\\\", line 40, in invoke_module\\n    runpy.run_module(mod_name='ansible.modules.vagrant', init_globals=None, run_name='__main__', alter_sys=True)\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 210, in run_module\\n    return _run_module_code(code, init_globals, run_name, mod_spec)\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 97, in _run_module_code\\n    _run_code(code, mod_globals, init_globals,\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 87, in _run_code\\n    exec(code, run_globals)\\n  File \\\"/var/folders/y9/mchss6y93rnclf75v93h3h140000gp/T/ansible_vagrant_payload_m_d2r22p/ansible_vagrant_payload.zip/ansible/modules/vagrant.py\\\", line 37, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \"rc\": 1}\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'molecule'\r\nfailed: [localhost] (item=Centos-8) => {\"ansible_loop_var\": \"item\", \"changed\": false, \"item\": {\"box\": \"centos/8\", \"cpus\": 2, \"memory\": 512, \"name\": \"Centos-8\"}, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375142.723383-8047-150492592352485/AnsiballZ_vagrant.py\\\", line 102, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375142.723383-8047-150492592352485/AnsiballZ_vagrant.py\\\", line 94, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/[USER]/.ansible/tmp/ansible-tmp-1615375142.723383-8047-150492592352485/AnsiballZ_vagrant.py\\\", line 40, in invoke_module\\n    runpy.run_module(mod_name='ansible.modules.vagrant', init_globals=None, run_name='__main__', alter_sys=True)\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 210, in run_module\\n    return _run_module_code(code, init_globals, run_name, mod_spec)\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 97, in _run_module_code\\n    _run_code(code, mod_globals, init_globals,\\n  File \\\"/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\\\", line 87, in _run_code\\n    exec(code, run_globals)\\n  File \\\"/var/folders/y9/mchss6y93rnclf75v93h3h140000gp/T/ansible_vagrant_payload_ltm7voo4/ansible_vagrant_payload.zip/ansible/modules/vagrant.py\\\", line 37, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\", \"rc\": 1}\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\nCRITICAL Ansible return code was 2, command was: ansible-playbook --diff --inventory /Users/[USER]/.cache/molecule/[ROLE-NAME]/default/inventory --skip-tags molecule-notest,notest /usr/local/lib/python3.9/site-packages/molecule_vagrant/playbooks/create.yml\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3071/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3070", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3070/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3070/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3070/events", "html_url": "https://github.com/ansible-community/molecule/issues/3070", "id": 826429441, "node_id": "MDU6SXNzdWU4MjY0Mjk0NDE=", "number": 3070, "title": "Add support for checking exit codes on shell dependencies", "user": {"login": "jhg03a", "id": 4870549, "node_id": "MDQ6VXNlcjQ4NzA1NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4870549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhg03a", "html_url": "https://github.com/jhg03a", "followers_url": "https://api.github.com/users/jhg03a/followers", "following_url": "https://api.github.com/users/jhg03a/following{/other_user}", "gists_url": "https://api.github.com/users/jhg03a/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhg03a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhg03a/subscriptions", "organizations_url": "https://api.github.com/users/jhg03a/orgs", "repos_url": "https://api.github.com/users/jhg03a/repos", "events_url": "https://api.github.com/users/jhg03a/events{/privacy}", "received_events_url": "https://api.github.com/users/jhg03a/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-03-09T18:30:30Z", "updated_at": "2021-05-14T09:58:23Z", "closed_at": "2021-05-14T09:58:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.5\r\n  config file = /Users/jhg03a/<redacted>/ansible.cfg\r\n  configured module search path = ['/Users/jhg03a/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.9/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.9.2 (default, Feb 24 2021, 13:26:09) [Clang 12.0.0 (clang-1200.0.32.29)]\r\nmolecule 3.2.3 using python 3.9\r\n    ansible:2.10.5\r\n    delegated:3.2.3 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nCurrently it appears that the dependency shell module doesn't take into account the exit code from the command.  If something goes wrong in the dependency phase, it's highly likely the rest of the run is going to fail or have inconsistent results.\r\n\r\n### Example:\r\n```yaml\r\ndependency:\r\n  name: shell\r\n  command: 'false'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3070/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3070/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3068", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3068/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3068/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3068/events", "html_url": "https://github.com/ansible-community/molecule/pull/3068", "id": 824012145, "node_id": "MDExOlB1bGxSZXF1ZXN0NTg2MzIyMTM5", "number": 3068, "title": "Add ansible-core version string parsing", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-07T20:34:02Z", "updated_at": "2021-03-28T20:22:14Z", "closed_at": "2021-03-08T08:25:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3068", "html_url": "https://github.com/ansible-community/molecule/pull/3068", "diff_url": "https://github.com/ansible-community/molecule/pull/3068.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3068.patch", "merged_at": "2021-03-08T08:25:46Z"}, "body": "Core developers change the `ansible --version` output a bit. Changes in this commit make sure molecule can parse both pre- and\r\npost-ansible-core version strings.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3068/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3068/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3064", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3064/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3064/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3064/events", "html_url": "https://github.com/ansible-community/molecule/issues/3064", "id": 822493969, "node_id": "MDU6SXNzdWU4MjI0OTM5Njk=", "number": 3064, "title": "Azure Pipelines Testing", "user": {"login": "jimbo8098", "id": 12417556, "node_id": "MDQ6VXNlcjEyNDE3NTU2", "avatar_url": "https://avatars.githubusercontent.com/u/12417556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jimbo8098", "html_url": "https://github.com/jimbo8098", "followers_url": "https://api.github.com/users/jimbo8098/followers", "following_url": "https://api.github.com/users/jimbo8098/following{/other_user}", "gists_url": "https://api.github.com/users/jimbo8098/gists{/gist_id}", "starred_url": "https://api.github.com/users/jimbo8098/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jimbo8098/subscriptions", "organizations_url": "https://api.github.com/users/jimbo8098/orgs", "repos_url": "https://api.github.com/users/jimbo8098/repos", "events_url": "https://api.github.com/users/jimbo8098/events{/privacy}", "received_events_url": "https://api.github.com/users/jimbo8098/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-03-04T20:48:07Z", "updated_at": "2021-03-23T10:26:29Z", "closed_at": "2021-03-23T10:26:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.6\r\n  config file = None\r\n  configured module search path = ['/home/jimspeir/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/jimspeir/.local/lib/python3.8/site-packages/ansible\r\n  executable location = /home/jimspeir/.local/bin/ansible\r\n  python version = 3.8.5 (default, Jan 27 2021, 15:41:15) [GCC 9.3.0]\r\nmolecule 3.2.3 using python 3.8\r\n    ansible:2.10.6\r\n    delegated:3.2.3 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n    vagrant:0.6.1 from molecule_vagrant\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen using an Azure Pipeline of the following construction:\r\n\r\n```\r\ntrigger:\r\n- master\r\n\r\npool: \"Molecule CI\"\r\n\r\nsteps:\r\n\r\n- task: UsePythonVersion@0\r\n  inputs:\r\n    versionSpec: '3.8'\r\n\r\n- script: python -m pip install \"molecule[lint]\" \"python-vagrant\" \"molecule-vagrant\" \"ansible\"\r\n  displayName: Install dependencies\r\n\r\n- script: |\r\n    export PATH=\"$PATH:/home/opsystemsadm/.local/bin/\"\r\n    python -m molecule test\r\n  displayName: Test relevant platforms\r\n```\r\n\r\nI should be able to have my tests run the same as they do locally on the agent.\r\n\r\n# Actual Behaviour\r\n\r\nWhen running the molecule test on the Azure self-hosted agent manually, by checking out the code and running `molecule test` from the project root, I am able to test my role perfectly fine and all checks pass.\r\n\r\nWhen I do the same through the pipeline I am told the role I'm checking cannot be found.\r\n\r\nThe task information is as follows:\r\n\r\n```\r\n2021-03-04T20:35:28.7321874Z ##[section]Starting: Test relevant platforms\r\n2021-03-04T20:35:28.7330563Z ==============================================================================\r\n2021-03-04T20:35:28.7330885Z Task         : Command line\r\n2021-03-04T20:35:28.7331224Z Description  : Run a command line script using Bash on Linux and macOS and cmd.exe on Windows\r\n2021-03-04T20:35:28.7331525Z Version      : 2.182.0\r\n2021-03-04T20:35:28.7331752Z Author       : Microsoft Corporation\r\n2021-03-04T20:35:28.7332102Z Help         : https://docs.microsoft.com/azure/devops/pipelines/tasks/utility/command-line\r\n2021-03-04T20:35:28.7332478Z ==============================================================================\r\n2021-03-04T20:35:28.8820788Z Generating script.\r\n2021-03-04T20:35:28.8835799Z ========================== Starting Command Output ===========================\r\n2021-03-04T20:35:28.8866879Z [command]/usr/bin/bash --noprofile --norc /home/<redacted>/azure-agent/_work/_temp/19bea618-2e0c-49f7-b4b5-98b619bda305.sh\r\n2021-03-04T20:35:29.4979858Z INFO     default scenario test matrix: dependency, lint, cleanup, destroy, syntax, create, prepare, converge, idempotence, side_effect, verify, cleanup, destroy\r\n2021-03-04T20:35:29.5109766Z INFO     Running default > dependency\r\n2021-03-04T20:35:29.9779535Z [WARNING]: The requirements file '/home/<redacted>/azure-\r\n2021-03-04T20:35:29.9780861Z agent/_work/1/s/molecule/default/requirements.yml' contains collections which\r\n2021-03-04T20:35:29.9785803Z will be ignored. To install these collections run 'ansible-galaxy collection\r\n2021-03-04T20:35:29.9787724Z install -r' or to install both at the same time run 'ansible-galaxy install -r'\r\n2021-03-04T20:35:29.9789327Z without a custom install path.\r\n2021-03-04T20:35:29.9789937Z Skipping install, no requirements found\r\n2021-03-04T20:35:30.0084792Z INFO     Dependency completed successfully.\r\n2021-03-04T20:35:30.9493679Z Starting galaxy collection install process\r\n2021-03-04T20:35:30.9496143Z Process install dependency map\r\n2021-03-04T20:35:34.6521976Z Starting collection install process\r\n2021-03-04T20:35:34.6525093Z Installing 'community.general:2.1.1' to '/home/<redacted>/.cache/molecule/s/default/collections/ansible_collections/community/general'\r\n2021-03-04T20:35:34.6528434Z Downloading https://galaxy.ansible.com/download/community-general-2.1.1.tar.gz to /home/<redacted>/.ansible/tmp/ansible-local-219986x6szibvf/tmpwngo3wa8\r\n2021-03-04T20:35:52.1266312Z community.general (2.1.1) was installed successfully\r\n2021-03-04T20:35:52.1598273Z INFO     Dependency completed successfully.\r\n2021-03-04T20:35:52.1722758Z INFO     Running default > lint\r\n2021-03-04T20:35:52.1727109Z INFO     Lint is disabled.\r\n2021-03-04T20:35:52.1838180Z INFO     Running default > cleanup\r\n2021-03-04T20:35:52.1844241Z WARNING  Skipping, cleanup playbook not configured.\r\n2021-03-04T20:35:52.1954633Z INFO     Running default > destroy\r\n2021-03-04T20:35:52.7352513Z \r\n2021-03-04T20:35:52.7354086Z PLAY [Destroy] *****************************************************************\r\n2021-03-04T20:35:52.7459189Z \r\n2021-03-04T20:35:52.7462408Z TASK [Destroy molecule instance(s)] ********************************************\r\n2021-03-04T20:35:55.4282363Z ok: [localhost] => (item=linux)\r\n2021-03-04T20:35:55.4329225Z \r\n2021-03-04T20:35:55.4332001Z TASK [Populate instance config] ************************************************\r\n2021-03-04T20:35:55.4835139Z ok: [localhost]\r\n2021-03-04T20:35:55.4878559Z \r\n2021-03-04T20:35:55.4881784Z TASK [Dump instance config] ****************************************************\r\n2021-03-04T20:35:55.5381126Z skipping: [localhost]\r\n2021-03-04T20:35:55.5447243Z \r\n2021-03-04T20:35:55.5452877Z PLAY RECAP *********************************************************************\r\n2021-03-04T20:35:55.5457382Z localhost                  : ok=2    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\n2021-03-04T20:35:55.5468230Z \r\n2021-03-04T20:35:55.6081692Z INFO     Running default > syntax\r\n2021-03-04T20:35:56.1377039Z \r\n2021-03-04T20:35:56.1378829Z playbook: /home/<redacted>/azure-agent/_work/1/s/molecule/default/converge.yml\r\n2021-03-04T20:35:56.1939178Z INFO     Running default > create\r\n2021-03-04T20:35:56.7381882Z \r\n2021-03-04T20:35:56.7384066Z PLAY [Create] ******************************************************************\r\n2021-03-04T20:35:56.7493150Z \r\n2021-03-04T20:35:56.7495614Z TASK [Create molecule instance(s)] *********************************************\r\n2021-03-04T20:37:25.5252527Z changed: [localhost] => (item=linux)\r\n2021-03-04T20:37:25.5293157Z \r\n2021-03-04T20:37:25.5296869Z TASK [Populate instance config dict] *******************************************\r\n2021-03-04T20:37:25.6133704Z ok: [localhost] => (item={'changed': True, 'log': '/home/<redacted>/.cache/molecule/s/default/vagrant-linux.out', 'Host': 'linux', 'HostName': '127.0.0.1', 'User': 'vagrant', 'Port': '2222', 'UserKnownHostsFile': '/dev/null', 'StrictHostKeyChecking': 'no', 'PasswordAuthentication': 'no', 'IdentityFile': '/home/<redacted>/.cache/molecule/s/default/.vagrant/machines/linux/virtualbox/private_key', 'IdentitiesOnly': 'yes', 'LogLevel': 'FATAL', 'invocation': {'module_args': {'instance_name': 'linux', 'platform_box': 'ubuntu/focal64', 'state': 'up', 'instance_interfaces': [], 'config_options': {}, 'provider_name': 'virtualbox', 'provider_memory': 512, 'provider_cpus': 2, 'provider_options': {}, 'provision': False, 'force_stop': False, 'instance_raw_config_args': None, 'platform_box_version': None, 'platform_box_url': None, 'provider_override_args': None, 'provider_raw_config_args': None, 'workdir': None}}, 'failed': False, 'item': {'box': 'ubuntu/focal64', 'name': 'linux'}, 'ansible_loop_var': 'item'})\r\n2021-03-04T20:37:25.6169117Z \r\n2021-03-04T20:37:25.6172976Z TASK [Convert instance config dict to a list] **********************************\r\n2021-03-04T20:37:25.7014426Z ok: [localhost]\r\n2021-03-04T20:37:25.7058420Z \r\n2021-03-04T20:37:25.7060724Z TASK [Dump instance config] ****************************************************\r\n2021-03-04T20:37:26.5142450Z changed: [localhost]\r\n2021-03-04T20:37:26.5220996Z \r\n2021-03-04T20:37:26.5224102Z PLAY RECAP *********************************************************************\r\n2021-03-04T20:37:26.5228369Z localhost                  : ok=4    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n2021-03-04T20:37:26.5231044Z \r\n2021-03-04T20:37:26.5859051Z INFO     Running default > prepare\r\n2021-03-04T20:37:27.1214266Z \r\n2021-03-04T20:37:27.1215933Z PLAY [Prepare] *****************************************************************\r\n2021-03-04T20:37:27.1344277Z \r\n2021-03-04T20:37:27.1345253Z TASK [Bootstrap python for Ansible] ********************************************\r\n2021-03-04T20:37:28.4515258Z ok: [linux]\r\n2021-03-04T20:37:28.4594908Z \r\n2021-03-04T20:37:28.4598614Z PLAY RECAP *********************************************************************\r\n2021-03-04T20:37:28.4603304Z linux                      : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n2021-03-04T20:37:28.4605880Z \r\n2021-03-04T20:37:28.5256919Z INFO     Running default > converge\r\n2021-03-04T20:37:29.0836948Z \r\n2021-03-04T20:37:29.0842455Z PLAY [Converge] ****************************************************************\r\n2021-03-04T20:37:29.0932326Z \r\n2021-03-04T20:37:29.0935833Z TASK [Gathering Facts] *********************************************************\r\n2021-03-04T20:37:31.1590551Z ok: [linux]\r\n2021-03-04T20:37:31.1738371Z \r\n2021-03-04T20:37:31.1740868Z TASK [LS] **********************************************************************\r\n2021-03-04T20:37:31.7427207Z changed: [linux]\r\n2021-03-04T20:37:31.7515707Z \r\n2021-03-04T20:37:31.7520241Z TASK [Include generic-server] **************************************************\r\n2021-03-04T20:37:31.7722031Z ERROR! the role 'generic-server' was not found in /home/<redacted>/azure-agent/_work/1/s/molecule/default/roles:/home/<redacted>/.cache/molecule/s/default/roles:/home/<redacted>/azure-agent/_work/1:/home/<redacted>/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/<redacted>/azure-agent/_work/1/s/molecule/default\r\n2021-03-04T20:37:31.7723921Z \r\n2021-03-04T20:37:31.7747123Z The error appears to be in '/home/<redacted>/azure-agent/_work/1/s/molecule/default/converge.yml': line 11, column 15, but may\r\n2021-03-04T20:37:31.7749843Z be elsewhere in the file depending on the exact syntax problem.\r\n2021-03-04T20:37:31.7751529Z \r\n2021-03-04T20:37:31.7752657Z The offending line appears to be:\r\n2021-03-04T20:37:31.7753226Z \r\n2021-03-04T20:37:31.7753904Z       include_role:\r\n2021-03-04T20:37:31.7755256Z         name: \"generic-server\"\r\n2021-03-04T20:37:31.7756078Z               ^ here\r\n2021-03-04T20:37:31.7757341Z \r\n2021-03-04T20:37:31.7758362Z PLAY RECAP *********************************************************************\r\n2021-03-04T20:37:31.7759627Z linux                      : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n2021-03-04T20:37:31.7768648Z \r\n2021-03-04T20:37:31.8276755Z CRITICAL Ansible return code was 2, command was: ansible-playbook --inventory /home/<redacted>/.cache/molecule/s/default/inventory --skip-tags molecule-notest,notest /home/<redacted>/azure-agent/_work/1/s/molecule/default/converge.yml\r\n2021-03-04T20:37:31.8281350Z WARNING  An error occurred during the test sequence action: 'converge'. Cleaning up.\r\n2021-03-04T20:37:31.8438844Z INFO     Running default > cleanup\r\n2021-03-04T20:37:31.8445579Z WARNING  Skipping, cleanup playbook not configured.\r\n2021-03-04T20:37:31.8587896Z INFO     Running default > destroy\r\n2021-03-04T20:37:32.4093595Z \r\n2021-03-04T20:37:32.4095950Z PLAY [Destroy] *****************************************************************\r\n2021-03-04T20:37:32.4207687Z \r\n2021-03-04T20:37:32.4210023Z TASK [Destroy molecule instance(s)] ********************************************\r\n2021-03-04T20:37:46.2981887Z changed: [localhost] => (item=linux)\r\n2021-03-04T20:37:46.3019945Z \r\n2021-03-04T20:37:46.3023657Z TASK [Populate instance config] ************************************************\r\n2021-03-04T20:37:46.3589336Z ok: [localhost]\r\n2021-03-04T20:37:46.3675417Z \r\n2021-03-04T20:37:46.3676929Z TASK [Dump instance config] ****************************************************\r\n2021-03-04T20:37:47.1509176Z changed: [localhost]\r\n2021-03-04T20:37:47.1580765Z \r\n2021-03-04T20:37:47.1583495Z PLAY RECAP *********************************************************************\r\n2021-03-04T20:37:47.1587274Z localhost                  : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n2021-03-04T20:37:47.1588879Z \r\n2021-03-04T20:37:47.2071736Z INFO     Pruning extra files from scenario ephemeral directory\r\n2021-03-04T20:37:47.4013440Z ##[error]Bash exited with code '1'.\r\n2021-03-04T20:37:47.4029231Z ##[section]Finishing: Test relevant platforms\r\n```\r\n\r\nI suspect the only issue here is the role path, perhaps being different from the version I use when logged into the server locally. Whilst these are two distinct versions of Python (3.8.5 locally and 3.8.8 via the agent) I believe the role path should be the same format in both cases.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3064/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3063", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3063/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3063/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3063/events", "html_url": "https://github.com/ansible-community/molecule/issues/3063", "id": 822307155, "node_id": "MDU6SXNzdWU4MjIzMDcxNTU=", "number": 3063, "title": "Pipelining causes `Error: cannot run command \"podman mount\" in rootless mode`", "user": {"login": "kees-closed", "id": 6113099, "node_id": "MDQ6VXNlcjYxMTMwOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/6113099?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kees-closed", "html_url": "https://github.com/kees-closed", "followers_url": "https://api.github.com/users/kees-closed/followers", "following_url": "https://api.github.com/users/kees-closed/following{/other_user}", "gists_url": "https://api.github.com/users/kees-closed/gists{/gist_id}", "starred_url": "https://api.github.com/users/kees-closed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kees-closed/subscriptions", "organizations_url": "https://api.github.com/users/kees-closed/orgs", "repos_url": "https://api.github.com/users/kees-closed/repos", "events_url": "https://api.github.com/users/kees-closed/events{/privacy}", "received_events_url": "https://api.github.com/users/kees-closed/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-03-04T16:44:13Z", "updated_at": "2021-06-05T09:36:05Z", "closed_at": "2021-06-05T09:36:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.18\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/kjong/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.9/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.9.2 (default, Feb 20 2021, 00:00:00) [GCC 10.2.1 20201125 (Red Hat 10.2.1-9)]\r\nmolecule 3.2.3 using python 3.9 \r\n    ansible:2.9.18\r\n    delegated:3.2.3 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n    podman:0.3.0 from molecule_podman\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- OS package\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen I start Molecule with Podman as container driver, I get the error: `cannot run command \"podman mount\" in rootless mode, must execute `podman unshare` first'`\r\n\r\nHowever, after figuring out what could cause this, I found out that `pipelining` in the `ssh_connection` section of my ansible.cfg is to triggering this.\r\n\r\nThis is my provisioner stanza of my molecule.yml:\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_CONFIG: ansible.cfg\r\n    ANSIBLE_ROLES_PATH: ../../roles/\r\n    ANSIBLE_LOOKUP_PLUGINS: ../../lookup_plugins/\r\n    ANSIBLE_VAULT_PASSWORD_FILE: vault-pass\r\n    MOLECULE_NO_LOG: true\r\n  inventory:\r\n    links:\r\n      group_vars: ../../group_vars/\r\n      host_vars: ../../host_vars/\r\n```\r\n\r\nWith this I include my ansible.cfg, where the pipelining is set to true. When I set this to false it works again.\r\n\r\nIs pipelining interfering with the inner workings of molecule somehow?\r\n\r\n# Actual Behaviour\r\n\r\nWhen I do a `molecule converge`, I get the following error when pipelining is enabled:\r\n\r\n```\r\nFailed to mount container rp1: b'Error: cannot run command \"podman mount\" in rootless mode, must execute `podman unshare` first'         \r\n<rp1> RUN [b'podman', b'exec', b'rp1', b'/bin/sh', b'-c', b'sudo -H -S  -p \"[sudo via ansible, key=jhiskphfictutojpcopqgiygccunnwrp] password:\" -u root /bin/sh -c \\'echo BECOME-SUCCESS-jhiskphfictutojpcopqgiygccunnwrp ; /usr/bin/python3\\' && sleep 0']                       \r\nfatal: [rp4]: FAILED! => {                                                                                                               \r\n    \"ansible_facts\": {},                                                                                                                 \r\n    \"changed\": false,                                                                                                                    \r\n    \"failed_modules\": {                                             \r\n        \"setup\": {        \r\n            \"failed\": true,                                         \r\n            \"module_stderr\": \"\",              \r\n            \"module_stdout\": \"\",       \r\n            \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",                                                              \r\n            \"rc\": 0                                                                                                                      \r\n        }                                                                                                                                \r\n    }                           \r\n}                                                                                                                                        \r\n                                                                    \r\nMSG:                                   \r\n                                                                                                                                         \r\nThe following modules failed to execute: setup\r\n```\r\n# Summary\r\nSo this basically leaves me with a few questions.\r\n\r\nThis may be fixed by simply override the pipelining setting in ansible.cfg. But the documentation is not clear about how to do this.\r\n\r\nIt seems it can be done like [this](https://github.com/mitogen-hq/mitogen/issues/467#issue-400732423):\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  config_options:\r\n    ssh_connection:\r\n      pipelining: false\r\n```\r\n\r\nBut also like [this](https://molecule.readthedocs.io/en/stable-1.18/configuration.html?highlight=ssh_connection#ansible-section)?:\r\nansible:\r\n```\r\n  config_file: /path/to/your/ansible.cfg\r\n  ansiblecfg_ssh_connection:\r\n    pipelining: True\r\n```\r\n\r\nHowever, the only thing that does work is this, when I don't set the `ANSIBLE_CONFIG` environment variable:\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  config_options:\r\n    ssh_connection:\r\n      pipelining: false\r\n```\r\n\r\nWhen I set pipelining to true in the above example, then the error shows up again.\r\n\r\nSo, I would like to know the following:\r\n1) What's the current and working way to include an ansible.cfg config and override one or more options? Mainly the pipelining option.\r\n2) The documentation seems to be all over the place. There is [this](https://molecule.readthedocs.io/en/stable-1.18/index.html) one and [this](https://molecule.readthedocs.io/en/latest/configuration.html) one. Both contain different examples.\r\n3) So what would be the goto place to get an overview of all config options and examples? Because some examples are not working, while they are documented. Some examples are the above pipelining settings. But there are more things in that same context and config scope.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3059", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3059/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3059/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3059/events", "html_url": "https://github.com/ansible-community/molecule/pull/3059", "id": 818345849, "node_id": "MDExOlB1bGxSZXF1ZXN0NTgxNjIwNzgy", "number": 3059, "title": "Document use of newer toolset container image", "user": {"login": "brianhelba", "id": 1282879, "node_id": "MDQ6VXNlcjEyODI4Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1282879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianhelba", "html_url": "https://github.com/brianhelba", "followers_url": "https://api.github.com/users/brianhelba/followers", "following_url": "https://api.github.com/users/brianhelba/following{/other_user}", "gists_url": "https://api.github.com/users/brianhelba/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianhelba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianhelba/subscriptions", "organizations_url": "https://api.github.com/users/brianhelba/orgs", "repos_url": "https://api.github.com/users/brianhelba/repos", "events_url": "https://api.github.com/users/brianhelba/events{/privacy}", "received_events_url": "https://api.github.com/users/brianhelba/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-28T23:46:43Z", "updated_at": "2021-03-05T14:22:30Z", "closed_at": "2021-03-05T14:22:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3059", "html_url": "https://github.com/ansible-community/molecule/pull/3059", "diff_url": "https://github.com/ansible-community/molecule/pull/3059.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3059.patch", "merged_at": "2021-03-05T14:22:30Z"}, "body": "This makes the docs more consistent, following #2935.\r\n\r\n#### PR Type\r\n\r\n- Docs Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3059/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3059/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3057", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3057/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3057/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3057/events", "html_url": "https://github.com/ansible-community/molecule/issues/3057", "id": 816733766, "node_id": "MDU6SXNzdWU4MTY3MzM3NjY=", "number": 3057, "title": "Molecule converge can't create a temp directory for group_vars on MacOs", "user": {"login": "andreas-gold", "id": 66302170, "node_id": "MDQ6VXNlcjY2MzAyMTcw", "avatar_url": "https://avatars.githubusercontent.com/u/66302170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreas-gold", "html_url": "https://github.com/andreas-gold", "followers_url": "https://api.github.com/users/andreas-gold/followers", "following_url": "https://api.github.com/users/andreas-gold/following{/other_user}", "gists_url": "https://api.github.com/users/andreas-gold/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreas-gold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreas-gold/subscriptions", "organizations_url": "https://api.github.com/users/andreas-gold/orgs", "repos_url": "https://api.github.com/users/andreas-gold/repos", "events_url": "https://api.github.com/users/andreas-gold/events{/privacy}", "received_events_url": "https://api.github.com/users/andreas-gold/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-25T19:36:55Z", "updated_at": "2021-02-26T08:29:03Z", "closed_at": "2021-02-26T08:28:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.6\r\nmolecule 3.2.3\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDriver:\r\n- Docker\r\n\r\n# Desired Behavior\r\n\r\nI would expect, that molecule successfully creates a temp directory for the group_vars as it does for the host_vars directory when executing molecule converge.\r\nMy setup is actually working on a windows10 machine (using WSL2 with Ubuntu), but does not on a Mac with MacOs Catalina v10.15.7. \r\n\r\n# Actual Behaviour\r\n\r\nExecuting molecule converge fails, due to the following Error:\r\n\r\n```\r\nTASK [Gathering Facts] *********************************************************\r\nfatal: [myHost]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to create temporary directory.In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \\\"/tmp\\\", for more error information use -vvv. Failed command was: ( umask 77 && mkdir -p \\\"` echo unable to find user admin: no matching entries in passwd file/.ansible/tmp `\\\"&& mkdir \\\"` echo unable to find user admin: no matching entries in passwd file/.ansible/tmp/ansible-tmp-1614277926.464561-18178-124657968422918 `\\\" && echo ansible-tmp-1614277926.464561-18178-124657968422918=\\\"` echo unable to find user admin: no matching entries in passwd file/.ansible/tmp/ansible-tmp-1614277926.464561-18178-124657968422918 `\\\" ), exited with result 126, stdout output: unable to find user admin: no matching entries in passwd file\\r\\n\", \"unreachable\": true}\r\n```\r\n\r\nThis occurs if I set the group_vars either as a link in the ansible provisioner or as a directory inside my molecule scenario and trigger to converge.\r\nHowever the playbook is running if I remove group_vars and eventually fails later due to the missing group variables.\r\nIt seems that internally another kind of mechanism is used to load the host_vars link (or directory) since only using host_vars is not causing a similiar error, so I guess the temp dir for host vars is generated properly.\r\n\r\nChanging the tmp path in ansible.cfg as the error message suggests did not solve the problem. Neither did sudo execution.\r\n\r\nAdditionally the issue creating a temp directory for group_vars seems to be MacOS specific as the same setup runs on my windows machine using WSL2/Ubuntu.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3057/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3057/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3055", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3055/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3055/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3055/events", "html_url": "https://github.com/ansible-community/molecule/issues/3055", "id": 812562183, "node_id": "MDU6SXNzdWU4MTI1NjIxODM=", "number": 3055, "title": "molecule lint doesn't set ANSIBLE_ROLES_PATH for linting stage", "user": {"login": "ultral", "id": 11869079, "node_id": "MDQ6VXNlcjExODY5MDc5", "avatar_url": "https://avatars.githubusercontent.com/u/11869079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ultral", "html_url": "https://github.com/ultral", "followers_url": "https://api.github.com/users/ultral/followers", "following_url": "https://api.github.com/users/ultral/following{/other_user}", "gists_url": "https://api.github.com/users/ultral/gists{/gist_id}", "starred_url": "https://api.github.com/users/ultral/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ultral/subscriptions", "organizations_url": "https://api.github.com/users/ultral/orgs", "repos_url": "https://api.github.com/users/ultral/repos", "events_url": "https://api.github.com/users/ultral/events{/privacy}", "received_events_url": "https://api.github.com/users/ultral/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-20T09:23:47Z", "updated_at": "2021-05-19T14:57:33Z", "closed_at": "2021-05-19T14:57:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.13\r\n  config file = None\r\n  configured module search path = ['/home/ms/lgonchar/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.8 (default, Apr  2 2020, 13:34:55) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n\r\nmolecule 3.2.3 using python 3.6 \r\n    ansible:2.9.13\r\n    delegated:3.2.3 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n\r\nansible-lint --version\r\nansible-lint 5.0.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule lint` works\r\n\r\n$ molecule --debug lint\r\nDEBUG    Validating schema /home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, lint\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > lint\r\nCOMMAND: set -e\r\nexport ANSIBLE_ROLES_PATH=/home/ms/lgonchar/cde/ansible/roles/cde_common/..\r\nyamllint .\r\nansible-lint\r\n\r\nLoading custom .yamllint config file, this extends our internal yamllint config.\r\nWARNING  Replaced deprecated tag '403' with 'package-latest' but it will become an error in the future.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n$ molecule --debug lint\r\nDEBUG    Validating schema /home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/default/molecule.yml.\r\nINFO     default scenario test matrix: dependency, lint\r\nINFO     Running default > dependency\r\nWARNING  Skipping, missing the requirements file.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running default > lint\r\nCOMMAND: set -e\r\nyamllint .\r\nansible-lint\r\n\r\nLoading custom .yamllint config file, this extends our internal yamllint config.\r\nWARNING  Listing 2 violation(s) that are fatal\r\ninternal-error: the role 'cde_common' was not found in /home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/centos8/roles:/home/ms/lgonchar/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/centos8\r\nmolecule/centos8/converge.yml:9:7 [WARNING]: No inventory was parsed, only implicit localhost is available\r\n[WARNING]: provided hosts list is empty, only localhost is available. Note that\r\nthe implicit localhost does not match 'all'\r\nERROR! the role 'cde_common' was not found in /home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/centos8/roles:/home/ms/lgonchar/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/centos8\r\n\r\nThe error appears to be in '/home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/centos8/converge.yml': line 9, column 7, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\n\r\nThe offending line appears to be:\r\n\r\n  roles:\r\n    - role: cde_common\r\n      ^ here\r\n\r\n\r\ninternal-error: the role 'cde_common' was not found in /home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/default/roles:/home/ms/lgonchar/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/default\r\nmolecule/default/converge.yml:10:7 [WARNING]: No inventory was parsed, only implicit localhost is available\r\n[WARNING]: provided hosts list is empty, only localhost is available. Note that\r\nthe implicit localhost does not match 'all'\r\nERROR! the role 'cde_common' was not found in /home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/default/roles:/home/ms/lgonchar/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/default\r\n\r\nThe error appears to be in '/home/ms/lgonchar/cde/ansible/roles/cde_common/molecule/default/converge.yml': line 10, column 7, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\n\r\nThe offending line appears to be:\r\n\r\n  roles:\r\n    - role: cde_common\r\n      ^ here\r\n\r\n\r\nYou can skip specific rules or tags by adding them to your configuration file:\r\n# .ansible-lint\r\nwarn_list:  # or 'skip_list' to silence them completely\r\n  - internal-error  # Unexpected internal error\r\nFinished with 2 failure(s), 0 warning(s) on 14 files.\r\nCRITICAL Lint failed with error code 2\r\n```\r\n\r\n# workaround\r\n\r\nThere is workaround. we can set ANSIBLE_ROLES_PATH in the lint section\r\n```\r\nlint: |\r\n  set -e\r\n  export ANSIBLE_ROLES_PATH=${MOLECULE_PROJECT_DIRECTORY}/..\r\n  yamllint .\r\n  ansible-lint\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3055/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3055/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3053", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3053/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3053/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3053/events", "html_url": "https://github.com/ansible-community/molecule/issues/3053", "id": 812002088, "node_id": "MDU6SXNzdWU4MTIwMDIwODg=", "number": 3053, "title": "Missing facts in 3.2.3 - works in 3.0.8", "user": {"login": "henrik-farre", "id": 718278, "node_id": "MDQ6VXNlcjcxODI3OA==", "avatar_url": "https://avatars.githubusercontent.com/u/718278?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henrik-farre", "html_url": "https://github.com/henrik-farre", "followers_url": "https://api.github.com/users/henrik-farre/followers", "following_url": "https://api.github.com/users/henrik-farre/following{/other_user}", "gists_url": "https://api.github.com/users/henrik-farre/gists{/gist_id}", "starred_url": "https://api.github.com/users/henrik-farre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henrik-farre/subscriptions", "organizations_url": "https://api.github.com/users/henrik-farre/orgs", "repos_url": "https://api.github.com/users/henrik-farre/repos", "events_url": "https://api.github.com/users/henrik-farre/events{/privacy}", "received_events_url": "https://api.github.com/users/henrik-farre/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-19T12:57:23Z", "updated_at": "2021-05-14T11:24:03Z", "closed_at": "2021-05-14T11:24:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n\r\nansible 2.10.4\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.7 (default, Feb  9 2021, 08:21:15) [GCC 8.3.0]\r\nmolecule 3.2.3 using python 3.8\r\n    ansible:2.10.4\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nansible_facts.nodename and other facts should be available when running molecule tests. \r\n\r\n# Actual Behaviour\r\n\r\nMany facts are missing when running molecule 3.2.3 or newest git (full dump of ansible_facts attached for both versions).\r\n\r\nUsing the same basic test files in molecule 3.0.8 and 3.2.3 returns different results, output of `molecule converge` for 3.0.8:\r\n\r\n```\r\n    PLAY [Converge] ****************************************************************\r\n\r\n    TASK [Gathering Facts] *********************************************************\r\n[WARNING]: Platform linux on host my_molecule_instance is using the\r\ndiscovered Python interpreter at /usr/bin/python, but future installation of\r\nanother Python interpreter could change this. See https://docs.ansible.com/ansi\r\nble/2.9/reference_appendices/interpreter_discovery.html for more information.\r\n    ok: [my_molecule_instance]\r\n\r\n    TASK [Debugging in converge 1] *************************************************\r\n    ok: [my_molecule_instance] => {\r\n        \"hostvars[inventory_hostname]['ansible_facts']['nodename']\": \"my_molecule_instance\"\r\n    }\r\n\r\n    TASK [Debugging in converge 1] *************************************************\r\n    ok: [my_molecule_instance] => {\r\n        \"ansible_facts.nodename\": \"my_molecule_instance\"\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n    my_molecule_instance : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n```\r\n\r\nOutput of `molecule converge` for 3.2.3\r\n\r\n```\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nok: [my_molecule_instance]\r\n\r\nTASK [Debugging in converge 1] *************************************************\r\nok: [my_molecule_instance] => {\r\n    \"hostvars[inventory_hostname]['ansible_facts']['nodename']\": \"VARIABLE IS NOT DEFINED!\"\r\n}\r\n\r\nTASK [Debugging in converge 1] *************************************************\r\nok: [my_molecule_instance] => {\r\n    \"ansible_facts.nodename\": \"VARIABLE IS NOT DEFINED!\"\r\n}\r\n\r\nPLAY RECAP *********************************************************************\r\nmy_molecule_instance : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n```\r\n\r\nWhen running `ansible all -i inventory.yml -m setup | grep nodename` (version 2.9.9 for molecule 3.0.8 and 2.10.4 for 3.2.3) works _fine_:\r\n\r\n2.9.9 output:\r\n```\r\n[WARNING]: Platform linux on host molecule_instance is using the discovered Python interpreter at /usr/bin/python, but future installation of another Python interpreter could change this. See\r\nhttps://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.\r\n        \"ansible_nodename\": \"my_molecule_instance\",\r\n```\r\n\r\n2.10.4 output:\r\n```\r\n[DEPRECATION WARNING]: Distribution debian 10.8 on host molecule_instance\r\nshould use /usr/bin/python3, but is using /usr/bin/python for backward\r\ncompatibility with prior Ansible releases. A future Ansible release will\r\ndefault to using the discovered platform python for this host. See https://docs\r\n.ansible.com/ansible/2.10/reference_appendices/interpreter_discovery.html for\r\nmore information. This feature will be removed in version 2.12. Deprecation\r\nwarnings can be disabled by setting deprecation_warnings=False in ansible.cfg.\r\n        \"ansible_nodename\": \"my_molecule_instance\",\r\n```\r\n\r\nThe files used for ansible and molecule are the same between versions and the files are attached to this bug report.\r\n- inventory.yml.txt: use when running `ansible all -i inventory.yml -m setup | grep nodename`\r\n- converge.yml.txt: from molecule/default/converge.yml\r\n- molecule.yml.txt: from molecule/default/molecule.yml\r\n\r\n[converge.yml.txt](https://github.com/ansible-community/molecule/files/6010013/converge.yml.txt)\r\n[inventory.yml.txt](https://github.com/ansible-community/molecule/files/6010014/inventory.yml.txt)\r\n[molecule.yml.txt](https://github.com/ansible-community/molecule/files/6010015/molecule.yml.txt)\r\n[ansible_facts_molecule_3.0.8.txt](https://github.com/ansible-community/molecule/files/6010114/ansible_facts_molecule_3.0.8.txt)\r\n[ansible_facts_molecule_3.2.3.txt](https://github.com/ansible-community/molecule/files/6010115/ansible_facts_molecule_3.2.3.txt)\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3053/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3053/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3045", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3045/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3045/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3045/events", "html_url": "https://github.com/ansible-community/molecule/issues/3045", "id": 800331964, "node_id": "MDU6SXNzdWU4MDAzMzE5NjQ=", "number": 3045, "title": "molecule does not find `module_utils` of tested ansible role", "user": {"login": "ltalirz", "id": 1053245, "node_id": "MDQ6VXNlcjEwNTMyNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1053245?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ltalirz", "html_url": "https://github.com/ltalirz", "followers_url": "https://api.github.com/users/ltalirz/followers", "following_url": "https://api.github.com/users/ltalirz/following{/other_user}", "gists_url": "https://api.github.com/users/ltalirz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ltalirz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ltalirz/subscriptions", "organizations_url": "https://api.github.com/users/ltalirz/orgs", "repos_url": "https://api.github.com/users/ltalirz/repos", "events_url": "https://api.github.com/users/ltalirz/events{/privacy}", "received_events_url": "https://api.github.com/users/ltalirz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T13:32:56Z", "updated_at": "2021-05-08T23:26:24Z", "closed_at": "2021-05-08T21:19:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n\r\nansible 2.10.6\r\nmolecule 3.2.3\r\n\r\n[See here for CI logs](https://github.com/dokku/ansible-dokku/pull/98/checks?check_run_id=1822645321#step:5:147)\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen testing an [ansible role that includes a `module_utils` folder](https://github.com/ltalirz/ansible-dokku/tree/issue_88_clone_version), a python module inside this folder (e.g. `dokku_app_utils.py`) should be importable from other ansible modules via:\r\n```python\r\nfrom ansible.module_utils import dokku_app_utils\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n[This role](https://github.com/ltalirz/ansible-dokku/tree/issue_88_clone_version) uses a `module_utils` folder to share code between ansible modules it provides.\r\nRunning the linked branch directly using ansible 2.10.6 on a server works fine.\r\n\r\nWhen testing the role using molecule, I run into the following error (see  [CI logs](https://github.com/dokku/ansible-dokku/pull/98/checks?check_run_id=1822645321#step:7:684)):\r\n```\r\nfatal: [instance]: FAILED! => {\"msg\": \"Could not find imported module support code for ansible.modules.dokku_clone.  Looked for (['ansible.module_utils.dokku_app_utils.dokku_app_present', 'ansible.module_utils.dokku_app_utils'])\"}\r\n```\r\n\r\nFor some reason that I haven't figured out, the `module_utils` folder is found when running the role directly via ansible, but not found when the role runs via molecule.\r\n\r\nI've tried \r\n - making the name of the module unique\r\n - adding `__init__.py`s\r\n\r\nbut that didn't help (and did not seem likely, since the role runs fine locally).\r\n\r\nAny ideas?\r\n\r\nP.S. Nice work on the issue template selector! It's a great way to communicate all the available communication channels.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3045/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3045/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3044", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3044/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3044/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3044/events", "html_url": "https://github.com/ansible-community/molecule/issues/3044", "id": 798664450, "node_id": "MDU6SXNzdWU3OTg2NjQ0NTA=", "number": 3044, "title": "Molecule verify can't find testinfra module.", "user": {"login": "malcyon", "id": 13503567, "node_id": "MDQ6VXNlcjEzNTAzNTY3", "avatar_url": "https://avatars.githubusercontent.com/u/13503567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malcyon", "html_url": "https://github.com/malcyon", "followers_url": "https://api.github.com/users/malcyon/followers", "following_url": "https://api.github.com/users/malcyon/following{/other_user}", "gists_url": "https://api.github.com/users/malcyon/gists{/gist_id}", "starred_url": "https://api.github.com/users/malcyon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malcyon/subscriptions", "organizations_url": "https://api.github.com/users/malcyon/orgs", "repos_url": "https://api.github.com/users/malcyon/repos", "events_url": "https://api.github.com/users/malcyon/events{/privacy}", "received_events_url": "https://api.github.com/users/malcyon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-01T20:00:48Z", "updated_at": "2021-02-15T20:10:24Z", "closed_at": "2021-02-15T20:10:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nWhenever I try to run `verify`, I get:\r\n\r\n```\r\n(venv) donald@laptop:~/src/graylog-ansible-role$ molecule verify --scenario-name=ui     \r\nINFO     ui scenario test matrix: verify\r\nINFO     Running ui > verify\r\nINFO     Executing Testinfra tests found in /home/donald/src/graylog-ansible-role/molecule/ui/tests/...\r\nTraceback (most recent call last):\r\n  File \"/home/donald/src/graylog-ansible-role/venv/bin/pytest\", line 8, in <module>\r\n    sys.exit(console_main())\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/_pytest/config/__init__.py\", line 187, in console_main\r\n    code = main()\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/_pytest/config/__init__.py\", line 143, in main\r\n    config = _prepareconfig(args, plugins)\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/_pytest/config/__init__.py\", line 318, in _prepareconfig\r\n    config = pluginmanager.hook.pytest_cmdline_parse(\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/pluggy/hooks.py\", line 286, in __call__\r\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\n    return self._inner_hookexec(hook, methods, kwargs)\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/pluggy/manager.py\", line 84, in <lambda>\r\n    self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/pluggy/callers.py\", line 203, in _multicall\r\n    gen.send(outcome)\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/_pytest/helpconfig.py\", line 100, in pytest_cmdline_parse\r\n    config = outcome.get_result()  # type: Config\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/pluggy/callers.py\", line 80, in get_result\r\n    raise ex[1].with_traceback(ex[2])\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/pluggy/callers.py\", line 187, in _multicall\r\n    res = hook_impl.function(*args)\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/_pytest/config/__init__.py\", line 1003, in pytest_cmdline_parse\r\n    self.parse(args)\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/_pytest/config/__init__.py\", line 1280, in parse\r\n    self._preparse(args, addopts=addopts)\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/_pytest/config/__init__.py\", line 1172, in _preparse\r\n    self.pluginmanager.load_setuptools_entrypoints(\"pytest11\")\r\n  File \"/home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/pluggy/manager.py\", line 299, in load_setuptools_entrypoints\r\n    plugin = ep.load()\r\n  File \"/usr/lib/python3.8/importlib/metadata.py\", line 77, in load\r\n    module = import_module(match.group('module'))\r\n  File \"/usr/lib/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 973, in _find_and_load_unlocked\r\nModuleNotFoundError: No module named 'testinfra.plugin'\r\n\r\n```\r\n\r\nHere are the versions of things I am running:\r\n\r\n```\r\n(venv) donald@laptop:~/src/graylog-ansible-role$ ansible --version && molecule --version\r\nansible 2.10.1\r\n  config file = /home/donald/.ansible.cfg\r\n  configured module search path = ['/home/donald/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages/ansible\r\n  executable location = /home/donald/src/graylog-ansible-role/venv/bin/ansible\r\n  python version = 3.8.5 (default, Jul 28 2020, 12:59:40) [GCC 9.3.0]\r\nmolecule 3.2.3 using python 3.8 \r\n    ansible:2.10.1\r\n    delegated:3.2.3 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n    podman:0.3.0 from molecule_podman\r\n    vagrant:0.6 from molecule_vagrant\r\n(venv) donald@laptop:~/src/graylog-ansible-role$ pip3 show testinfra\r\nName: testinfra\r\nVersion: 6.0.0\r\nSummary: Test infrastructures\r\nHome-page: https://github.com/philpep/testinfra\r\nAuthor: Philippe Pepiot\r\nAuthor-email: phil@philpep.org\r\nLicense: UNKNOWN\r\nLocation: /home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages\r\nRequires: pytest-testinfra\r\nRequired-by: \r\n(venv) donald@laptop:~/src/graylog-ansible-role$ pip3 show pytest-testinfra\r\nName: pytest-testinfra\r\nVersion: 6.1.0\r\nSummary: Test infrastructures\r\nHome-page: https://github.com/pytest-dev/pytest-testinfra\r\nAuthor: Philippe Pepiot\r\nAuthor-email: phil@philpep.org\r\nLicense: UNKNOWN\r\nLocation: /home/donald/src/graylog-ansible-role/venv/lib/python3.8/site-packages\r\nRequires: pytest\r\nRequired-by: testinfra\r\n(venv) donald@laptop:~/src/graylog-ansible-role$ cat requirements.txt\r\nansible==2.10.0\r\nansible-base==2.10.1\r\nansible-lint==4.3.5\r\nchromedriver-binary-auto==0.1\r\nenrich==1.2.6\r\nmolecule==3.2.3\r\nmolecule-docker==0.2.4\r\nmolecule-podman==0.3.0\r\nmolecule-vagrant==0.6\r\npython-vagrant==0.5.15\r\npytest-testinfra==6.1.0\r\nselenium==3.141.0\r\nyamllint==1.25.0\r\nwheel\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\nMy molecule.yml looks like:\r\n\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\n  options:\r\n    role-file: requirements.yml\r\n    ignore-errors: true\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\nplatforms:\r\n  - name: instance\r\n    box: ${MOLECULE_DISTRO:-generic/ubuntu2004}\r\n    memory: 4096\r\n    cpus: 1\r\n    instance_raw_config_args:\r\n      - \"vm.network 'forwarded_port', guest: 80, host: 9000\"\r\n      - \"vm.network 'forwarded_port', guest: 12201, host: 12201, protocol: 'udp'\"\r\nprovisioner:\r\n  name: ansible\r\nverifier:\r\n name: testinfra\r\n options:\r\n   s: true\r\n```\r\n\r\n# Desired Behavior\r\n\r\nIt used to run my tests, and now it doesn't. \r\n\r\n# Actual Behaviour\r\n\r\nRunning `molecule verify` throws this error:\r\n\r\n`ModuleNotFoundError: No module named 'testinfra.plugin'`\r\n\r\nI know that the `testinfra` module was recently renamed to `pytest-testinfra`. But having one or both named modules installed doesn't make the error disappear.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3044/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3042", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3042/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3042/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3042/events", "html_url": "https://github.com/ansible-community/molecule/issues/3042", "id": 797507482, "node_id": "MDU6SXNzdWU3OTc1MDc0ODI=", "number": 3042, "title": "Molecule scenarios not working [CRITICAL Duplicate scenario name 'default' found.  Exiting.]", "user": {"login": "VladAdGad", "id": 15636176, "node_id": "MDQ6VXNlcjE1NjM2MTc2", "avatar_url": "https://avatars.githubusercontent.com/u/15636176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VladAdGad", "html_url": "https://github.com/VladAdGad", "followers_url": "https://api.github.com/users/VladAdGad/followers", "following_url": "https://api.github.com/users/VladAdGad/following{/other_user}", "gists_url": "https://api.github.com/users/VladAdGad/gists{/gist_id}", "starred_url": "https://api.github.com/users/VladAdGad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VladAdGad/subscriptions", "organizations_url": "https://api.github.com/users/VladAdGad/orgs", "repos_url": "https://api.github.com/users/VladAdGad/repos", "events_url": "https://api.github.com/users/VladAdGad/events{/privacy}", "received_events_url": "https://api.github.com/users/VladAdGad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-01-30T19:10:17Z", "updated_at": "2021-02-05T22:06:55Z", "closed_at": "2021-02-05T22:06:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.4\r\n  config file = None\r\n  configured module search path = ['/home/vlad/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/vlad/.local/lib/python3.8/site-packages/ansible\r\n  executable location = /home/vlad/.local/bin/ansible\r\n  python version = 3.8.5 (default, Jul 28 2020, 12:59:40) [GCC 9.3.0]\r\nmolecule 3.2.2 using python 3.8 \r\n    ansible:2.10.4\r\n    delegated:3.2.2 from molecule\r\n    vagrant:0.6.1 from molecule_vagrant\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- OS package\r\n\r\n# Desired Behavior\r\nmolecule test --all should run all tests\r\n\r\n# Actual Behaviour\r\n```\r\nDEBUG    Validating schema /home/vlad/Repositories/disters/roles/configure_os/molecule/windows/molecule.yml.\r\nDEBUG    Validating schema /home/vlad/Repositories/disters/roles/configure_os/molecule/ubuntu/molecule.yml.\r\nDEBUG    Validating schema /home/vlad/Repositories/disters/roles/configure_os/molecule/debian/molecule.yml.\r\nCRITICAL Duplicate scenario name 'default' found.  Exiting.\r\n```\r\n\r\n# What I have\r\n```\r\n\u251c\u2500\u2500 molecule\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 debian\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 resources\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 playbook\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 converge.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ubuntu\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 windows\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 molecule.yml\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3042/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3042/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3040", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3040/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3040/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3040/events", "html_url": "https://github.com/ansible-community/molecule/pull/3040", "id": 796955701, "node_id": "MDExOlB1bGxSZXF1ZXN0NTY0MDQ1OTAx", "number": 3040, "title": "Assure image is included for containers driver", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-01-29T15:07:35Z", "updated_at": "2021-01-29T15:14:42Z", "closed_at": "2021-01-29T15:13:55Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3040", "html_url": "https://github.com/ansible-community/molecule/pull/3040", "diff_url": "https://github.com/ansible-community/molecule/pull/3040.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3040.patch", "merged_at": "2021-01-29T15:13:55Z"}, "body": "Needed-By: https://github.com/ansible-community/molecule-containers/pull/10\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3040/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3038", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3038/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3038/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3038/events", "html_url": "https://github.com/ansible-community/molecule/issues/3038", "id": 792087875, "node_id": "MDU6SXNzdWU3OTIwODc4NzU=", "number": 3038, "title": "Molecule environment variables do not work for the verifier directory", "user": {"login": "bencardinal", "id": 3301182, "node_id": "MDQ6VXNlcjMzMDExODI=", "avatar_url": "https://avatars.githubusercontent.com/u/3301182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bencardinal", "html_url": "https://github.com/bencardinal", "followers_url": "https://api.github.com/users/bencardinal/followers", "following_url": "https://api.github.com/users/bencardinal/following{/other_user}", "gists_url": "https://api.github.com/users/bencardinal/gists{/gist_id}", "starred_url": "https://api.github.com/users/bencardinal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bencardinal/subscriptions", "organizations_url": "https://api.github.com/users/bencardinal/orgs", "repos_url": "https://api.github.com/users/bencardinal/repos", "events_url": "https://api.github.com/users/bencardinal/events{/privacy}", "received_events_url": "https://api.github.com/users/bencardinal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-22T15:19:21Z", "updated_at": "2022-10-25T15:04:06Z", "closed_at": "2022-10-25T15:04:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.3\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/ben/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ben/molecule-env/lib64/python3.6/site-packages/ansible\r\n  executable location = /home/ben/molecule-env/bin/ansible\r\n  python version = 3.6.8 (default, Apr  2 2020, 13:34:55) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\nmolecule 3.2.0 using python 3.6 \r\n    ansible:2.10.3\r\n    delegated:3.2.0 from molecule\r\n    docker:0.3.3 from molecule_docker\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nGiven the following directory tree:\r\n\r\n```\r\nmy_role\r\n\u2514\u2500\u2500 molecule\r\n   \u251c\u2500\u2500 default\r\n   \u2502  \u251c\u2500\u2500 converge.yml\r\n   \u2502  \u251c\u2500\u2500 create.yml\r\n   \u2502  \u251c\u2500\u2500 Dockerfile.j2\r\n   \u2502  \u251c\u2500\u2500 molecule.yml\r\n   \u2502  \u2514\u2500\u2500 verify.yml\r\n   \u2514\u2500\u2500 resources\r\n     \u2514\u2500\u2500 tests\r\n        \u251c\u2500\u2500 conftest.py\r\n        \u2514\u2500\u2500 test_hello_world.py\r\n```\r\nThe tests in the resources will work as expected if the `verifier` section of the `molecule.yml` looks like this:\r\n\r\n```yaml\r\n  verifier:\r\n    name: testinfra\r\n    directory: ../resources/tests\r\n```\r\nHowever, I would like to use  the `MOLECULE_PROJECT_DIRECTORY` variable instead of the relative path.\r\n\r\n```yaml\r\n  verifier:\r\n    name: testinfra\r\n    directory: ${MOLECULE_PROJECT_DIRECTORY}/molecule/resources/tests\r\n```\r\n\r\n# Actual Behaviour\r\nWhen using the variable I get the following error:\r\n```\r\nINFO     default scenario test matrix: verify\r\nINFO     Running default > verify\r\nWARNING  Skipping, no tests found.\r\n```\r\nI have verified that the `${MOLECULE_PROJECT_DIRECTORY}` does expand to the fully rooted path for `my_role` by inspecting `~/.cache/molecule/my_role/default/molecule.yml` and if I cut and past the fully expanded path from the `.cache` file and assign that to `directory:` explicitly it _does_ work as expected.  There is something about the variable processing in the verify step that isn't working as expected.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3038/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3038/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3028", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3028/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3028/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3028/events", "html_url": "https://github.com/ansible-community/molecule/issues/3028", "id": 781320478, "node_id": "MDU6SXNzdWU3ODEzMjA0Nzg=", "number": 3028, "title": "[DOC] Example for testinfra verifier is wrong", "user": {"login": "hunter86bg", "id": 22281444, "node_id": "MDQ6VXNlcjIyMjgxNDQ0", "avatar_url": "https://avatars.githubusercontent.com/u/22281444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hunter86bg", "html_url": "https://github.com/hunter86bg", "followers_url": "https://api.github.com/users/hunter86bg/followers", "following_url": "https://api.github.com/users/hunter86bg/following{/other_user}", "gists_url": "https://api.github.com/users/hunter86bg/gists{/gist_id}", "starred_url": "https://api.github.com/users/hunter86bg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hunter86bg/subscriptions", "organizations_url": "https://api.github.com/users/hunter86bg/orgs", "repos_url": "https://api.github.com/users/hunter86bg/repos", "events_url": "https://api.github.com/users/hunter86bg/events{/privacy}", "received_events_url": "https://api.github.com/users/hunter86bg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-01-07T13:39:35Z", "updated_at": "2021-02-09T04:47:48Z", "closed_at": "2021-02-09T04:47:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n(molecule32_ansible2910_py36) [user@server bin]$ ansible --version\r\nansible 2.9.10\r\n  config file = None\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/ansible\r\n  executable location = /opt/somepath/venvs/molecule32_ansible2910_py36/bin/ansible\r\n  python version = 3.6.8 (default, Sep 26 2019, 11:57:09) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n(molecule32_ansible2910_py36) [user@server bin]$ molecule --version\r\nmolecule 3.2.0 using python 3.6\r\n    ansible:2.9.10\r\n    delegated:3.2.0 from molecule\r\n    vagrant:0.6 from molecule_vagrant\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n```\r\nverifier:\r\n  name: testinfra\r\n  lint: |\r\n    set -e\r\n    yamllint -c .yamllint .\r\n  options:\r\n    n: 1\r\n```\r\n# Desired Behavior\r\n\r\nThe example in the documentation to work\r\n\r\n# Actual Behaviour\r\n```\r\nTraceback (most recent call last):\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/click/decorators.py\", line 21, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/molecule/command/test.py\", line 148, in test\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/molecule/command/base.py\", line 112, in execute_cmdline_scenarios\r\n    execute_scenario(scenario)\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/molecule/command/base.py\", line 154, in execute_scenario\r\n    execute_subcommand(scenario.config, action)\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/molecule/command/base.py\", line 143, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/molecule/logger.py\", line 187, in wrapper\r\n    rt = func(*args, **kwargs)\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/molecule/command/verify.py\", line 73, in execute\r\n    self._config.verifier.execute()\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/molecule/verifier/testinfra.py\", line 184, in execute\r\n    result = util.run_command(self._testinfra_command, debug=self._config.debug)\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/molecule/util.py\", line 143, in run_command\r\n    args, env=env, stdout=stdout, stderr=stderr, echo=echo or debug, quiet=quiet\r\n  File \"/opt/somepath/venvs/molecule32_ansible2910_py36/lib64/python3.6/site-packages/subprocess_tee/__init__.py\", line 103, in run\r\n    cmd = join(args)\r\n  File \"/usr/lib64/python3.6/subprocess.py\", line 481, in list2cmdline\r\n    needquote = (\" \" in arg) or (\"\\t\" in arg) or not arg\r\nTypeError: argument of type 'int' is not iterable\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3028/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3028/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3026", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3026/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3026/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3026/events", "html_url": "https://github.com/ansible-community/molecule/pull/3026", "id": 780844495, "node_id": "MDExOlB1bGxSZXF1ZXN0NTUwNjcwODE3", "number": 3026, "title": "Allow os_walk to follow symlinks", "user": {"login": "ragingpastry", "id": 6778250, "node_id": "MDQ6VXNlcjY3NzgyNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6778250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ragingpastry", "html_url": "https://github.com/ragingpastry", "followers_url": "https://api.github.com/users/ragingpastry/followers", "following_url": "https://api.github.com/users/ragingpastry/following{/other_user}", "gists_url": "https://api.github.com/users/ragingpastry/gists{/gist_id}", "starred_url": "https://api.github.com/users/ragingpastry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ragingpastry/subscriptions", "organizations_url": "https://api.github.com/users/ragingpastry/orgs", "repos_url": "https://api.github.com/users/ragingpastry/repos", "events_url": "https://api.github.com/users/ragingpastry/events{/privacy}", "received_events_url": "https://api.github.com/users/ragingpastry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-01-06T21:02:46Z", "updated_at": "2021-01-07T15:42:33Z", "closed_at": "2021-01-07T15:42:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3026", "html_url": "https://github.com/ansible-community/molecule/pull/3026", "diff_url": "https://github.com/ansible-community/molecule/pull/3026.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3026.patch", "merged_at": "2021-01-07T15:42:33Z"}, "body": "Allows the testinfra verifier to follow symlinks in the tests\r\ndirectory.\r\n\r\nThis fixes a bug described here:\r\nhttps://github.com/ansible-community/molecule/issues/3021\r\n\r\nPreviously, os_walk would not follow symlinks. This would break scenarios where you place tests in a common test directory.\r\n\r\nFor example the following directory structure:\r\n\r\n```\r\nmolecule\r\n\u251c\u2500\u2500 common\r\n\u2502   \u2514\u2500\u2500 unit\r\n\u2502       \u251c\u2500\u2500 test_ldap.py\r\n\u2502       \u2514\u2500\u2500 test_zabbix.py\r\n\u251c\u2500\u2500 default\r\n\u2502   \u251c\u2500\u2500 conftest.py\r\n\u2502   \u251c\u2500\u2500 converge.yml\r\n\u2502   \u251c\u2500\u2500 create.yml\r\n\u2502   \u251c\u2500\u2500 Dockerfile.j2\r\n\u2502   \u251c\u2500\u2500 INSTALL.rst\r\n\u2502   \u251c\u2500\u2500 molecule.yml\r\n\u2502   \u251c\u2500\u2500 prepare.yml\r\n\u2502   \u251c\u2500\u2500 requirements.yml\r\n\u2502   \u2514\u2500\u2500 tests\r\n\u2502       \u251c\u2500\u2500 conftest.py\r\n\u2514\u2500\u2500 zabbix-4.4.9\r\n    \u251c\u2500\u2500 converge.yml\r\n    \u251c\u2500\u2500 create.yml\r\n    \u251c\u2500\u2500 Dockerfile.j2\r\n    \u251c\u2500\u2500 INSTALL.rst\r\n    \u251c\u2500\u2500 molecule.yml\r\n    \u251c\u2500\u2500 prepare.yml\r\n    \u251c\u2500\u2500 requirements.yml\r\n    \u2514\u2500\u2500 tests\r\n        \u251c\u2500\u2500 conftest.py\r\n        \u2514\u2500\u2500 unit -> ../../common/unit\r\n```\r\n\r\nWhen running `molecule verify -s zabbix-4.4.9` no tests would be found. ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3026/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3024", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3024/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3024/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3024/events", "html_url": "https://github.com/ansible-community/molecule/issues/3024", "id": 780481551, "node_id": "MDU6SXNzdWU3ODA0ODE1NTE=", "number": 3024, "title": "Include molecule-hetznercloud plugin in testing", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-06T11:23:29Z", "updated_at": "2021-01-06T12:12:13Z", "closed_at": "2021-01-06T12:12:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nN/A\r\n\r\n# Desired Behavior\r\n\r\nI remember having my plugin in molecule upstream testing and then now I see it is gone? I checked https://github.com/ansible-community/molecule/blob/master/tox.ini#L162. I still maintain this plugin. There are users. It would be nice to be informed if the upstream considers that my plugin is not maintained anymore?\r\n\r\n# Actual Behaviour\r\n\r\nMy plugin stays in https://github.com/ansible-community/molecule/blob/master/tox.ini#L162 and if it is removed or a decision is made to drop support, I get a ping. There is some process for knowing when I can be included or not. I am pretty responsive to notifications for the plugin.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3024/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3024/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3023", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3023/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3023/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3023/events", "html_url": "https://github.com/ansible-community/molecule/issues/3023", "id": 780454192, "node_id": "MDU6SXNzdWU3ODA0NTQxOTI=", "number": 3023, "title": "Quay docker image publishing missing latest release from pypi", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-06T10:42:48Z", "updated_at": "2021-06-05T08:15:43Z", "closed_at": "2021-06-05T08:15:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nN/A\r\n\r\n# Desired Behavior\r\n\r\nhttps://quay.io/repository/ansible/molecule?tab=tags has a 3.2.1 release like in https://github.com/ansible-community/molecule/releases.\r\n\r\n# Actual Behaviour\r\n\r\nhttps://quay.io/repository/ansible/molecule?tab=tags is missing the latest release. See https://github.com/ansible-community/molecule/releases for latest.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3023/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3022", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3022/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3022/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3022/events", "html_url": "https://github.com/ansible-community/molecule/issues/3022", "id": 778720268, "node_id": "MDU6SXNzdWU3Nzg3MjAyNjg=", "number": 3022, "title": "Sign PyPI releases", "user": {"login": "maltfield", "id": 5026712, "node_id": "MDQ6VXNlcjUwMjY3MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/5026712?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maltfield", "html_url": "https://github.com/maltfield", "followers_url": "https://api.github.com/users/maltfield/followers", "following_url": "https://api.github.com/users/maltfield/following{/other_user}", "gists_url": "https://api.github.com/users/maltfield/gists{/gist_id}", "starred_url": "https://api.github.com/users/maltfield/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maltfield/subscriptions", "organizations_url": "https://api.github.com/users/maltfield/orgs", "repos_url": "https://api.github.com/users/maltfield/repos", "events_url": "https://api.github.com/users/maltfield/events{/privacy}", "received_events_url": "https://api.github.com/users/maltfield/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-01-05T08:16:56Z", "updated_at": "2021-01-08T11:02:53Z", "closed_at": "2021-01-05T08:48:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\n\r\nWhen a user downloads this python module using `pip`, there is no cryptographic authenticity or integrity validation to protect the user from a MITM attack.\r\n\r\nTherefore, this project is making any other projects that obtain the `molecule` module via `pip` in their build process vulnerable to a [watering hole attack](https://en.wikipedia.org/wiki/Watering_hole_attack).\r\n\r\n**Expected behavior**\r\n\r\nA developer should have a mechanism to cryptographically verify the integrity and authenticity of molecule when obtaining it through `pip`.\r\n\r\n**To Reproduce**\r\n\r\n`pip install molecule`\r\n\r\n**Additional context**\r\n\r\nPossible solutions include:\r\n\r\n1. Using the [`--sign` argument](https://twine.readthedocs.io/en/latest/#why-should-i-use-this) of `twine` when uploading packages to PyPI\r\n\r\n1. Publishing a cryptographically signed document (ideally using `gpg`) listing the hashes for all packages uploaded to PyPI, which users can then pass into `pip` using the [`--hash` argument](https://pip.pypa.io/en/stable/reference/pip_install/#hash-checking-mode)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3022/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3022/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3021", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3021/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3021/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3021/events", "html_url": "https://github.com/ansible-community/molecule/issues/3021", "id": 778553198, "node_id": "MDU6SXNzdWU3Nzg1NTMxOTg=", "number": 3021, "title": "testinfra tests are not found when located in a symlinked directory", "user": {"login": "ragingpastry", "id": 6778250, "node_id": "MDQ6VXNlcjY3NzgyNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6778250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ragingpastry", "html_url": "https://github.com/ragingpastry", "followers_url": "https://api.github.com/users/ragingpastry/followers", "following_url": "https://api.github.com/users/ragingpastry/following{/other_user}", "gists_url": "https://api.github.com/users/ragingpastry/gists{/gist_id}", "starred_url": "https://api.github.com/users/ragingpastry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ragingpastry/subscriptions", "organizations_url": "https://api.github.com/users/ragingpastry/orgs", "repos_url": "https://api.github.com/users/ragingpastry/repos", "events_url": "https://api.github.com/users/ragingpastry/events{/privacy}", "received_events_url": "https://api.github.com/users/ragingpastry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-05T03:46:15Z", "updated_at": "2021-01-07T16:34:31Z", "closed_at": "2021-01-07T16:34:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.4\r\nconfig file = None\r\nconfigured module search path = ['/home/nwilburn/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\nansible python module location = /home/nwilburn/venvs/molecule/lib/python3.8/site-packages/ansible\r\nexecutable location = /home/nwilburn/venvs/molecule/bin/ansible\r\npython version = 3.8.6 (default, Dec 18 2020, 10:50:58) [GCC 9.3.0]\r\nmolecule 3.2.1 using python 3.8\r\nansible:2.10.4\r\ndelegated:3.2.1 from molecule\r\ndocker:0.2.4 from molecule_docker\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nUsing the testinfra verifier with the following directory structure tests should be found and conftest.py should be loaded.\r\n\r\n```\r\nmolecule\r\n\u251c\u2500\u2500 common\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 unit\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 test_ldap.py\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 test_zabbix.py\r\n\u251c\u2500\u2500 default\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 conftest.py\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 converge.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 create.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Dockerfile.j2\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 INSTALL.rst\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 prepare.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 requirements.yml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 tests\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 conftest.py\r\n\u2514\u2500\u2500 zabbix-4.4.9\r\n    \u251c\u2500\u2500 converge.yml\r\n    \u251c\u2500\u2500 create.yml\r\n    \u251c\u2500\u2500 Dockerfile.j2\r\n    \u251c\u2500\u2500 INSTALL.rst\r\n    \u251c\u2500\u2500 molecule.yml\r\n    \u251c\u2500\u2500 prepare.yml\r\n    \u251c\u2500\u2500 requirements.yml\r\n    \u2514\u2500\u2500 tests\r\n        \u251c\u2500\u2500 conftest.py\r\n        \u2514\u2500\u2500 unit -> ../../common/unit\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nNO tests are found.\r\n\r\n```\r\n~/projects/work/iac/ansible_role_zabbix_server(fix-molecule*) \u00bb molecule verify -s zabbix-4.4.9\r\nnwilburn@resguram INFO     zabbix-4.4.9 scenario test matrix: verify\r\nINFO     Running zabbix-4.4.9 > verify\r\nWARNING  Skipping, no tests found.\r\n```\r\n\r\n\r\nThis is happening because util.os_walk calls os.walk which does not follow symlinks by default.\r\nhttps://github.com/ansible-community/molecule/blob/master/src/molecule/util.py#L163-L171\r\n\r\nI believe this could be fixed by simply calling os.walk with follow_links=True. Alternatively, one could allow this to be configurable in molecule.yml\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3021/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3021/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3020", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3020/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3020/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3020/events", "html_url": "https://github.com/ansible-community/molecule/issues/3020", "id": 777477808, "node_id": "MDU6SXNzdWU3Nzc0Nzc4MDg=", "number": 3020, "title": "Molecule custom Dockerfile", "user": {"login": "bcochofel", "id": 10865083, "node_id": "MDQ6VXNlcjEwODY1MDgz", "avatar_url": "https://avatars.githubusercontent.com/u/10865083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcochofel", "html_url": "https://github.com/bcochofel", "followers_url": "https://api.github.com/users/bcochofel/followers", "following_url": "https://api.github.com/users/bcochofel/following{/other_user}", "gists_url": "https://api.github.com/users/bcochofel/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcochofel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcochofel/subscriptions", "organizations_url": "https://api.github.com/users/bcochofel/orgs", "repos_url": "https://api.github.com/users/bcochofel/repos", "events_url": "https://api.github.com/users/bcochofel/events{/privacy}", "received_events_url": "https://api.github.com/users/bcochofel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-01-02T15:31:11Z", "updated_at": "2021-01-08T06:05:48Z", "closed_at": "2021-01-07T21:36:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\nTrying to use Dockerfile.j2 to install some packages but doesn't do anything.\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmolecule 3.2.1 using python 3.7 \r\n    ansible:2.10.4\r\n    delegated:3.2.1 from molecule\r\n    docker:0.3.3 from molecule_docker\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nInstall the packages from Dockerfile.j2\r\n\r\n# Actual Behaviour\r\n\r\nPackages not installed", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3020/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3015", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3015/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3015/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3015/events", "html_url": "https://github.com/ansible-community/molecule/pull/3015", "id": 771425244, "node_id": "MDExOlB1bGxSZXF1ZXN0NTQyOTU4MDI2", "number": 3015, "title": "Narrow down dependency versions", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-19T17:55:51Z", "updated_at": "2020-12-19T18:07:24Z", "closed_at": "2020-12-19T18:07:23Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3015", "html_url": "https://github.com/ansible-community/molecule/pull/3015", "diff_url": "https://github.com/ansible-community/molecule/pull/3015.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3015.patch", "merged_at": "2020-12-19T18:07:23Z"}, "body": "Avoid incompatibility with newer rich.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3015/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3015/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3014", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3014/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3014/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3014/events", "html_url": "https://github.com/ansible-community/molecule/pull/3014", "id": 771423983, "node_id": "MDExOlB1bGxSZXF1ZXN0NTQyOTU3MTYw", "number": 3014, "title": "Avoid using lock unless parallel mode is present", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-19T17:48:23Z", "updated_at": "2020-12-19T18:18:46Z", "closed_at": "2020-12-19T18:18:45Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3014", "html_url": "https://github.com/ansible-community/molecule/pull/3014", "diff_url": "https://github.com/ansible-community/molecule/pull/3014.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3014.patch", "merged_at": "2020-12-19T18:18:44Z"}, "body": "Avoid various problems caused by the lock presence.\r\n\r\nFixes: #2905\r\nFixes: #2985\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3014/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3014/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3013", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3013/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3013/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3013/events", "html_url": "https://github.com/ansible-community/molecule/pull/3013", "id": 771420043, "node_id": "MDExOlB1bGxSZXF1ZXN0NTQyOTU0Mzgw", "number": 3013, "title": "Refactored use of console for logging", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-19T17:25:31Z", "updated_at": "2020-12-19T18:32:21Z", "closed_at": "2020-12-19T18:32:20Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3013", "html_url": "https://github.com/ansible-community/molecule/pull/3013", "diff_url": "https://github.com/ansible-community/molecule/pull/3013.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3013.patch", "merged_at": "2020-12-19T18:32:20Z"}, "body": "- fix bug that produced incomplete reports due to the report generation\r\n  being called multiple times.\r\n- assure that logging use the same console object, so we include the\r\n  logged messaged inside the report\r\n- current limitation of console prevents us from using stderr for\r\n  out own logging; we plan to restore use of stderr for logging in\r\n  a followup.\r\n\r\nFixes: #3010", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3013/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3010", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3010/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3010/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3010/events", "html_url": "https://github.com/ansible-community/molecule/issues/3010", "id": 771078937, "node_id": "MDU6SXNzdWU3NzEwNzg5Mzc=", "number": 3010, "title": "New version of 'rich' deps break molecule from run", "user": {"login": "pavelpicka", "id": 27282656, "node_id": "MDQ6VXNlcjI3MjgyNjU2", "avatar_url": "https://avatars.githubusercontent.com/u/27282656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavelpicka", "html_url": "https://github.com/pavelpicka", "followers_url": "https://api.github.com/users/pavelpicka/followers", "following_url": "https://api.github.com/users/pavelpicka/following{/other_user}", "gists_url": "https://api.github.com/users/pavelpicka/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavelpicka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavelpicka/subscriptions", "organizations_url": "https://api.github.com/users/pavelpicka/orgs", "repos_url": "https://api.github.com/users/pavelpicka/repos", "events_url": "https://api.github.com/users/pavelpicka/events{/privacy}", "received_events_url": "https://api.github.com/users/pavelpicka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-12-18T18:16:28Z", "updated_at": "2020-12-19T18:32:20Z", "closed_at": "2020-12-19T18:32:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n{2.9,2.10}-{3.6,3.7,3.8}\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\nlocal, GHA, flake8 & yamllint, ansible-lint used\r\n\r\n# Desired Behavior\r\n\r\nmolecule test --scenario-name our-test\r\nshould run the test\r\n\r\n# Actual Behaviour\r\n\r\nfails, on CI with \"InvocationError\" locally just RC=1 without any message\r\n\r\n# Found\r\n\r\nOnly change from working behaviour is dependency rich is updated from ```'9.4.0'``` to ```'9.5.0'```. \r\nDowngrade is working workaround.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3010/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3010/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3006", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3006/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3006/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3006/events", "html_url": "https://github.com/ansible-community/molecule/pull/3006", "id": 756010117, "node_id": "MDExOlB1bGxSZXF1ZXN0NTMxNjI0ODc4", "number": 3006, "title": "Avoid use of property decorator for project_directory", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-03T09:11:43Z", "updated_at": "2020-12-03T11:53:28Z", "closed_at": "2020-12-03T11:53:27Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3006", "html_url": "https://github.com/ansible-community/molecule/pull/3006", "diff_url": "https://github.com/ansible-community/molecule/pull/3006.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3006.patch", "merged_at": "2020-12-03T11:53:27Z"}, "body": "Use of property decorator implies lazy loading and this means that `os.getcwd()` may produce different result if the current directory was changed, something that is not excluded.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3006/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3006/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3004", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3004/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3004/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3004/events", "html_url": "https://github.com/ansible-community/molecule/issues/3004", "id": 755651763, "node_id": "MDU6SXNzdWU3NTU2NTE3NjM=", "number": 3004, "title": "packaging.version.InvalidVersion and DeprecationWarning (leading to) errors during testing", "user": {"login": "dvzrv", "id": 432519, "node_id": "MDQ6VXNlcjQzMjUxOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/432519?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dvzrv", "html_url": "https://github.com/dvzrv", "followers_url": "https://api.github.com/users/dvzrv/followers", "following_url": "https://api.github.com/users/dvzrv/following{/other_user}", "gists_url": "https://api.github.com/users/dvzrv/gists{/gist_id}", "starred_url": "https://api.github.com/users/dvzrv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dvzrv/subscriptions", "organizations_url": "https://api.github.com/users/dvzrv/orgs", "repos_url": "https://api.github.com/users/dvzrv/repos", "events_url": "https://api.github.com/users/dvzrv/events{/privacy}", "received_events_url": "https://api.github.com/users/dvzrv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-12-02T22:18:38Z", "updated_at": "2021-06-05T08:47:02Z", "closed_at": "2021-06-05T08:47:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi! I'm packaging molecule for Arch Linux.\r\nWhen building 3.2.0 as a package I ran the test suite against the built package. Unfortunately two tests are failing (during collection). These worked with 3.1.5 (the last version I packaged, but that was also on python 3.8).\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.3\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/dave/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.9/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.9.0 (default, Oct  7 2020, 23:09:01) [GCC 10.2.0]\r\nmolecule 3.2.0 using python 3.9\r\n    ansible:2.10.3\r\n    delegated:3.2.0 from molecule\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\n```\r\n  sed -e '/addopts/d' -i setup.cfg\r\n\r\n  python setup.py build\r\n  export PYTHONPATH=\"${PWD}:build:${PYTHONPATH}\"\r\n  pytest -v src/molecule/test/unit/\r\n```\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nAll unit tests pass\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.9.0, pytest-6.1.2, py-1.9.0, pluggy-0.13.1 -- /usr/bin/python\r\ncachedir: .pytest_cache\r\nmetadata: {'Python': '3.9.0', 'Platform': 'Linux-5.9.10.a-1-hardened-x86_64-with-glibc2.32', 'Packages': {'pytest': '6.1.2', 'py': '1.9.0', 'pluggy': '0.13.1'}, 'Plugins': {'xdist': '2.1.0', 'forked': '1.3.0', 'verbose-parametrize': '1.7.0', 'testinfra': '6.1.0', 'mock': '2.0.0', 'html': '3.0.0', 'metadata': '1.11.0',\r\n 'helpers-namespace': '2019.1.8'}}\r\nrootdir: /build/molecule/src/molecule-3.2.0, configfile: setup.cfg\r\nplugins: xdist-2.1.0, forked-1.3.0, verbose-parametrize-1.7.0, testinfra-6.1.0, mock-2.0.0, html-3.0.0, metadata-1.11.0, helpers-namespace-2019.1.8\r\ncollecting ... collected 431 items / 2 errors / 429 selected\r\n\r\n==================================== ERRORS ====================================\r\n____________ ERROR collecting src/molecule/test/unit/test_shell.py _____________\r\n/usr/lib/python3.9/site-packages/packaging/version.py:57: in parse\r\n    return Version(version)\r\n/usr/lib/python3.9/site-packages/packaging/version.py:298: in __init__\r\n    raise InvalidVersion(\"Invalid version: '{0}'\".format(version))\r\nE   packaging.version.InvalidVersion: Invalid version: '/usr/lib/python3.9/site'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\nsrc/molecule/test/unit/test_shell.py:23: in <module>\r\n    from molecule import shell\r\nsrc/molecule/shell.py:121: in <module>\r\n    if pkg_resources.get_distribution(\"futures\"):\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:465: in get_distribution\r\n    dist = get_provider(dist)\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:341: in get_provider\r\n    return working_set.find(moduleOrReq) or require(str(moduleOrReq))[0]\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:884: in require\r\n    needed = self.resolve(parse_requirements(requirements))\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:757: in resolve\r\n    env = Environment(self.entries)\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:968: in __init__\r\n    self.scan(search_path)\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:1000: in scan\r\n    for dist in find_distributions(item):\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:2056: in find_on_path\r\n    path_item_entries = _by_version_descending(filtered)\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:2026: in _by_version_descending\r\n    return sorted(names, key=_by_version, reverse=True)\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:2024: in _by_version\r\n    return [packaging.version.parse(part) for part in parts]\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:2024: in <listcomp>\r\n    return [packaging.version.parse(part) for part in parts]\r\n/usr/lib/python3.9/site-packages/packaging/version.py:59: in parse\r\n    return LegacyVersion(version)\r\n/usr/lib/python3.9/site-packages/packaging/version.py:127: in __init__\r\n    warnings.warn(\r\nE   DeprecationWarning: Creating a LegacyVersion has been deprecated and will be removed in the next major release\r\n_______ ERROR collecting src/molecule/test/unit/command/test_converge.py _______\r\n/usr/lib/python3.9/site-packages/packaging/version.py:57: in parse\r\n    return Version(version)\r\n/usr/lib/python3.9/site-packages/packaging/version.py:298: in __init__\r\n    raise InvalidVersion(\"Invalid version: '{0}'\".format(version))\r\nE   packaging.version.InvalidVersion: Invalid version: '/usr/lib/python3.9/site'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\nsrc/molecule/test/unit/command/test_converge.py:24: in <module>\r\n    from molecule.shell import main\r\nsrc/molecule/shell.py:121: in <module>\r\n    if pkg_resources.get_distribution(\"futures\"):\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:465: in get_distribution\r\n    dist = get_provider(dist)\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:341: in get_provider\r\n    return working_set.find(moduleOrReq) or require(str(moduleOrReq))[0]\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:884: in require\r\n    needed = self.resolve(parse_requirements(requirements))\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:757: in resolve\r\n    env = Environment(self.entries)\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:968: in __init__\r\n    self.scan(search_path)\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:1000: in scan\r\n    for dist in find_distributions(item):\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:2056: in find_on_path\r\n    path_item_entries = _by_version_descending(filtered)\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:2026: in _by_version_descending\r\n    return sorted(names, key=_by_version, reverse=True)\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:2024: in _by_version\r\n    return [packaging.version.parse(part) for part in parts]\r\n/usr/lib/python3.9/site-packages/pkg_resources/__init__.py:2024: in <listcomp>\r\n    return [packaging.version.parse(part) for part in parts]\r\n/usr/lib/python3.9/site-packages/packaging/version.py:59: in parse\r\n    return LegacyVersion(version)\r\n/usr/lib/python3.9/site-packages/packaging/version.py:127: in __init__\r\n    warnings.warn(\r\nE   DeprecationWarning: Creating a LegacyVersion has been deprecated and will be removed in the next major release\r\n=========================== short test summary info ============================\r\nERROR src/molecule/test/unit/test_shell.py - DeprecationWarning: Creating a L...\r\nERROR src/molecule/test/unit/command/test_converge.py - DeprecationWarning: C...\r\n!!!!!!!!!!!!!!!!!!! Interrupted: 2 errors during collection !!!!!!!!!!!!!!!!!!!!\r\n============================== 2 errors in 0.90s ===============================\r\n```\r\n\r\nfull build log: \r\n[molecule-3.2.0-build.log](https://github.com/ansible-community/molecule/files/5632359/molecule-3.2.0-build.log)\r\n\r\nI have tried:\r\n\r\n* installing to temporary location and running the tests suite against that installation (same result, but different reported directory for the \"version\"\r\n* skip collection of failing tests (remaining tests run successfully)\r\n* skipping tests and installing the package (the version output works)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3004/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3004/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3002", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3002/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3002/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3002/events", "html_url": "https://github.com/ansible-community/molecule/pull/3002", "id": 754539793, "node_id": "MDExOlB1bGxSZXF1ZXN0NTMwNDIyNzcz", "number": 3002, "title": "Avoid misleading user about load of missing config", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-01T16:25:27Z", "updated_at": "2020-12-02T12:56:45Z", "closed_at": "2020-12-02T12:56:44Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3002", "html_url": "https://github.com/ansible-community/molecule/pull/3002", "diff_url": "https://github.com/ansible-community/molecule/pull/3002.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3002.patch", "merged_at": "2020-12-02T12:56:44Z"}, "body": "Fixes minor bug which reported molecule configuration loading even when there was not configuration to load.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3002/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3002/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3001", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/3001/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/3001/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/3001/events", "html_url": "https://github.com/ansible-community/molecule/pull/3001", "id": 752886726, "node_id": "MDExOlB1bGxSZXF1ZXN0NTI5MDg5NTM3", "number": 3001, "title": "Acknowledge click 8.0 incompatibility", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-29T10:39:14Z", "updated_at": "2020-11-29T10:48:23Z", "closed_at": "2020-11-29T10:48:22Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/3001", "html_url": "https://github.com/ansible-community/molecule/pull/3001", "diff_url": "https://github.com/ansible-community/molecule/pull/3001.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/3001.patch", "merged_at": "2020-11-29T10:48:22Z"}, "body": "Upcoming changes in click break click-help-colors plugin so we need to prevent breaking at runtime until upstream issues are sorted.\r\n\r\nThis bug was found by our \"eco\" job which installs pre-releases, a first proof that preventive measure work.\r\n\r\nRelated: https://github.com/click-contrib/click-help-colors/issues/12\r\nRelated: https://github.com/pallets/click/issues/1721\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/3001/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/3001/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2999", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2999/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2999/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2999/events", "html_url": "https://github.com/ansible-community/molecule/issues/2999", "id": 752749837, "node_id": "MDU6SXNzdWU3NTI3NDk4Mzc=", "number": 2999, "title": "Debug output on all molecule commands", "user": {"login": "mdpdesign", "id": 5243838, "node_id": "MDQ6VXNlcjUyNDM4Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/5243838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdpdesign", "html_url": "https://github.com/mdpdesign", "followers_url": "https://api.github.com/users/mdpdesign/followers", "following_url": "https://api.github.com/users/mdpdesign/following{/other_user}", "gists_url": "https://api.github.com/users/mdpdesign/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdpdesign/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdpdesign/subscriptions", "organizations_url": "https://api.github.com/users/mdpdesign/orgs", "repos_url": "https://api.github.com/users/mdpdesign/repos", "events_url": "https://api.github.com/users/mdpdesign/events{/privacy}", "received_events_url": "https://api.github.com/users/mdpdesign/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-11-28T19:22:03Z", "updated_at": "2020-12-03T14:51:16Z", "closed_at": "2020-12-03T14:51:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.3\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/mdp/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/mdp/ansible-roles/molecule-venv/lib/python3.6/site-packages/ansible\r\n  executable location = /home/mdp/ansible-roles/molecule-venv/bin/ansible\r\n  python version = 3.6.9 (default, Oct  8 2020, 12:12:24) [GCC 8.4.0]\r\nmolecule 3.2.1.dev1 using python 3.6\r\n    ansible:2.10.3\r\n    delegated:3.2.1.dev1 from molecule\r\n    vagrant:0.5.dev1 from molecule_vagrant\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nMolecule should output at most the INFO log messages when running commands without `--debug`\r\n\r\n# Actual Behaviour\r\n\r\nFor all commands like list, create, verify molecule outputs some DEBUG log along side the INFO without explicitly using `--debug` switch. IMHO debug output should be only showed when using `--debug` switch - unless this is intended?\r\n\r\nFor command: `molecule list`\r\n\r\n```\r\nDEBUG    Validating schema /home/mdp/ansible-roles/jenkins_swarm/molecule/default/molecule.yml.\r\nDEBUG    Validating schema /home/mdp/ansible-roles/jenkins_swarm/molecule/service/molecule.yml.\r\nDEBUG    Validating schema /home/mdp/ansible-roles/jenkins_swarm/molecule/vmware/molecule.yml.\r\nINFO     Running default > list\r\nINFO     Running service > list\r\nINFO     Running vmware > list\r\n                    \u2577             \u2577                  \u2577               \u2577         \u2577\r\n  Instance Name     \u2502 Driver Name \u2502 Provisioner Name \u2502 Scenario Name \u2502 Created \u2502 Converged\r\n\u2576\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2574\r\n  win10             \u2502 vagrant     \u2502 ansible          \u2502 default       \u2502 false   \u2502 false\r\n  win12             \u2502 vagrant     \u2502 ansible          \u2502 default       \u2502 false   \u2502 false\r\n  win10-svc         \u2502 vagrant     \u2502 ansible          \u2502 service       \u2502 false   \u2502 false\r\n  win12-svc         \u2502 vagrant     \u2502 ansible          \u2502 service       \u2502 false   \u2502 false\r\n  jsw-win10-schtask \u2502 delegated   \u2502 ansible          \u2502 vmware        \u2502 true    \u2502 true\r\n  jsw-win10-svc     \u2502 delegated   \u2502 ansible          \u2502 vmware        \u2502 true    \u2502 true\r\n  jsw-win12-schtask \u2502 delegated   \u2502 ansible          \u2502 vmware        \u2502 true    \u2502 true\r\n  jsw-win12-svc     \u2502 delegated   \u2502 ansible          \u2502 vmware        \u2502 true    \u2502 true\r\n                    \u2575             \u2575                  \u2575               \u2575         \u2575\r\n```\r\n\r\nor for `molecule create -s vmware`\r\n\r\n```\r\nDEBUG    Validating schema /home/mdp/ansible-roles/jenkins_swarm/molecule/vmware/molecule.yml.\r\nINFO     vmware scenario test matrix: dependency, create, prepare\r\nINFO     Running vmware > dependency\r\nDEBUG    Using selector: EpollSelector\r\nStarting galaxy role install process\r\n- changing role lean_delivery.java from 7.1.0 to 7.1.0\r\n- extracting lean_delivery.java to /home/mdp/.cache/molecule/jenkins_swarm/vmware/roles/lean_delivery.java\r\n- lean_delivery.java (7.1.0) was installed successfully\r\nINFO     Dependency completed successfully.\r\nWARNING  Skipping, missing the requirements file.\r\nINFO     Running vmware > create\r\nWARNING  Skipping, instances already created.\r\nINFO     Running vmware > prepare\r\nWARNING  Skipping, instances already prepared.\r\n```\r\n\r\nAlso if I may suggest, I think WARNING outputs should be rather colored in yellow instead of red (suggesting visually that something failed)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2999/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2996", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2996/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2996/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2996/events", "html_url": "https://github.com/ansible-community/molecule/pull/2996", "id": 751465951, "node_id": "MDExOlB1bGxSZXF1ZXN0NTI3OTczMDU1", "number": 2996, "title": "Assure provisioner logging is enabled by default", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-26T10:16:37Z", "updated_at": "2020-11-26T11:46:45Z", "closed_at": "2020-11-26T11:46:44Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2996", "html_url": "https://github.com/ansible-community/molecule/pull/2996", "diff_url": "https://github.com/ansible-community/molecule/pull/2996.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2996.patch", "merged_at": "2020-11-26T11:46:44Z"}, "body": "This fixes confuses where creating instances fail without details.\r\nThis change will not affect users that already mentioned their\r\npreferences in config or as environment variable.\r\n\r\nRelated: https://github.com/ansible-community/molecule-podman/issues/22", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2996/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2992", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2992/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2992/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2992/events", "html_url": "https://github.com/ansible-community/molecule/issues/2992", "id": 748683232, "node_id": "MDU6SXNzdWU3NDg2ODMyMzI=", "number": 2992, "title": "notest tag should not be skip on create/destroy step", "user": {"login": "fletort", "id": 488105, "node_id": "MDQ6VXNlcjQ4ODEwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/488105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fletort", "html_url": "https://github.com/fletort", "followers_url": "https://api.github.com/users/fletort/followers", "following_url": "https://api.github.com/users/fletort/following{/other_user}", "gists_url": "https://api.github.com/users/fletort/gists{/gist_id}", "starred_url": "https://api.github.com/users/fletort/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fletort/subscriptions", "organizations_url": "https://api.github.com/users/fletort/orgs", "repos_url": "https://api.github.com/users/fletort/repos", "events_url": "https://api.github.com/users/fletort/events{/privacy}", "received_events_url": "https://api.github.com/users/fletort/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-11-23T10:40:09Z", "updated_at": "2021-06-05T08:55:23Z", "closed_at": "2021-06-05T08:55:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\nmolecule 3.0.6\r\n\r\nansible 2.9.9\r\n\r\nMolecule installation method (one of):\r\nAnsible installation method (one of):\r\n\r\nDocker official Image.\r\n\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n\r\n# Actual Behaviour\r\n\r\nIn my case, it is problematic that the default `molecule-notest` or `notest` tags are passed to the create step.\r\n\r\nIn my create playbook, i am using a role to create some specific staff.... But this role was tested with molecule... and have some tasks with the given `notest` tag.... so the creation did not work, as theses tasks are not executed.....\r\n\r\nFor me theses generic tags should be passed only to converge step, no ?\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2992/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2992/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2991", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2991/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2991/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2991/events", "html_url": "https://github.com/ansible-community/molecule/pull/2991", "id": 748231706, "node_id": "MDExOlB1bGxSZXF1ZXN0NTI1Mjc1NTQ5", "number": 2991, "title": "Fix dumb terminal condition", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-22T12:24:39Z", "updated_at": "2020-11-23T08:43:33Z", "closed_at": "2020-11-23T08:43:32Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2991", "html_url": "https://github.com/ansible-community/molecule/pull/2991", "diff_url": "https://github.com/ansible-community/molecule/pull/2991.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2991.patch", "merged_at": "2020-11-23T08:43:32Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2991/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2991/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2989", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2989/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2989/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2989/events", "html_url": "https://github.com/ansible-community/molecule/pull/2989", "id": 747760123, "node_id": "MDExOlB1bGxSZXF1ZXN0NTI0OTIzMjcy", "number": 2989, "title": "Allow to set login_cmd_template for delegate driver", "user": {"login": "apatard", "id": 2619394, "node_id": "MDQ6VXNlcjI2MTkzOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2619394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apatard", "html_url": "https://github.com/apatard", "followers_url": "https://api.github.com/users/apatard/followers", "following_url": "https://api.github.com/users/apatard/following{/other_user}", "gists_url": "https://api.github.com/users/apatard/gists{/gist_id}", "starred_url": "https://api.github.com/users/apatard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apatard/subscriptions", "organizations_url": "https://api.github.com/users/apatard/orgs", "repos_url": "https://api.github.com/users/apatard/repos", "events_url": "https://api.github.com/users/apatard/events{/privacy}", "received_events_url": "https://api.github.com/users/apatard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-20T20:02:47Z", "updated_at": "2020-11-22T09:58:46Z", "closed_at": "2020-11-22T09:58:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2989", "html_url": "https://github.com/ansible-community/molecule/pull/2989", "diff_url": "https://github.com/ansible-community/molecule/pull/2989.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2989.patch", "merged_at": "2020-11-22T09:58:45Z"}, "body": "\u2026managed case\r\n\r\nThe current code only allows to configure the login command\r\nif molecule is configured to use non managed instance but it may\r\nbe helpful to be able to set it even if the instance is managed.\r\n\r\nFor instance, if the instance (eg a chroot or a container) can be\r\ncreated with the create.yml playbook, which means that this instance is\r\nreachable with something else than ssh.\r\n\r\nSigned-off-by: Arnaud Patard <apatard@hupstream.com>\r\n\r\nPlease include details of what it is, how to use it, how it's been tested\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n- Docs Pull Request\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2989/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2989/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2988", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2988/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2988/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2988/events", "html_url": "https://github.com/ansible-community/molecule/pull/2988", "id": 747759843, "node_id": "MDExOlB1bGxSZXF1ZXN0NTI0OTIzMDM3", "number": 2988, "title": "Fix connection option handling for delegated driver", "user": {"login": "apatard", "id": 2619394, "node_id": "MDQ6VXNlcjI2MTkzOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2619394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apatard", "html_url": "https://github.com/apatard", "followers_url": "https://api.github.com/users/apatard/followers", "following_url": "https://api.github.com/users/apatard/following{/other_user}", "gists_url": "https://api.github.com/users/apatard/gists{/gist_id}", "starred_url": "https://api.github.com/users/apatard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apatard/subscriptions", "organizations_url": "https://api.github.com/users/apatard/orgs", "repos_url": "https://api.github.com/users/apatard/repos", "events_url": "https://api.github.com/users/apatard/events{/privacy}", "received_events_url": "https://api.github.com/users/apatard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1585146637, "node_id": "MDU6TGFiZWwxNTg1MTQ2NjM3", "url": "https://api.github.com/repos/ansible-community/molecule/labels/needs-update", "name": "needs-update", "color": "fff9b2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-20T20:02:13Z", "updated_at": "2020-11-25T13:56:37Z", "closed_at": "2020-11-25T13:56:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2988", "html_url": "https://github.com/ansible-community/molecule/pull/2988", "diff_url": "https://github.com/ansible-community/molecule/pull/2988.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2988.patch", "merged_at": "2020-11-25T13:56:37Z"}, "body": "The documentation and the code tends to suggest that in order to configure the ansible connection plugin, the option to use is 'connection' but the test handling this option is testing 'ansible_connection', so fix that.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2988/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2988/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2985", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2985/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2985/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2985/events", "html_url": "https://github.com/ansible-community/molecule/pull/2985", "id": 746563031, "node_id": "MDExOlB1bGxSZXF1ZXN0NTIzOTM0NjE0", "number": 2985, "title": "Remove mock as a dependency", "user": {"login": "clickthisnick", "id": 7855189, "node_id": "MDQ6VXNlcjc4NTUxODk=", "avatar_url": "https://avatars.githubusercontent.com/u/7855189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clickthisnick", "html_url": "https://github.com/clickthisnick", "followers_url": "https://api.github.com/users/clickthisnick/followers", "following_url": "https://api.github.com/users/clickthisnick/following{/other_user}", "gists_url": "https://api.github.com/users/clickthisnick/gists{/gist_id}", "starred_url": "https://api.github.com/users/clickthisnick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clickthisnick/subscriptions", "organizations_url": "https://api.github.com/users/clickthisnick/orgs", "repos_url": "https://api.github.com/users/clickthisnick/repos", "events_url": "https://api.github.com/users/clickthisnick/events{/privacy}", "received_events_url": "https://api.github.com/users/clickthisnick/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-19T13:00:02Z", "updated_at": "2020-11-20T15:41:51Z", "closed_at": "2020-11-20T15:41:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2985", "html_url": "https://github.com/ansible-community/molecule/pull/2985", "diff_url": "https://github.com/ansible-community/molecule/pull/2985.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2985.patch", "merged_at": "2020-11-20T15:41:50Z"}, "body": "unittest.mock is built into python3 so mock should not be needed.\r\nThis package is only for python3\r\n\r\n`pytest-mock` (mocker fixture)\r\nAlso will use unittest.mock:\r\nhttps://github.com/pytest-dev/pytest-mock/blob/9e1464bb87d551b1a242104b68bad8d8a1429316/src/pytest_mock/plugin.py#L22\r\n\r\n#### PR Type\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2985/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2985/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2982", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2982/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2982/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2982/events", "html_url": "https://github.com/ansible-community/molecule/pull/2982", "id": 745831340, "node_id": "MDExOlB1bGxSZXF1ZXN0NTIzMzI2Mzgy", "number": 2982, "title": "Assure we install dataclasses on py36", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-11-18T16:55:04Z", "updated_at": "2020-11-18T17:04:34Z", "closed_at": "2020-11-18T17:04:33Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2982", "html_url": "https://github.com/ansible-community/molecule/pull/2982", "diff_url": "https://github.com/ansible-community/molecule/pull/2982.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2982.patch", "merged_at": "2020-11-18T17:04:33Z"}, "body": "dataclasses ships only with py37 or newer so we need to install the backport for older versions.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2982/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2982/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2980", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2980/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2980/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2980/events", "html_url": "https://github.com/ansible-community/molecule/pull/2980", "id": 745766774, "node_id": "MDExOlB1bGxSZXF1ZXN0NTIzMjcyMTU2", "number": 2980, "title": "Consolidated use of rich console", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-18T15:37:41Z", "updated_at": "2020-11-18T16:20:33Z", "closed_at": "2020-11-18T16:20:32Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2980", "html_url": "https://github.com/ansible-community/molecule/pull/2980", "diff_url": "https://github.com/ansible-community/molecule/pull/2980.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2980.patch", "merged_at": "2020-11-18T16:20:32Z"}, "body": "Includes:\r\n- use enrich Console for both console and logger\r\n- use the same theme for both\r\n- respect coloring enablement for logger\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2980/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2980/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2979", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2979/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2979/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2979/events", "html_url": "https://github.com/ansible-community/molecule/pull/2979", "id": 745721580, "node_id": "MDExOlB1bGxSZXF1ZXN0NTIzMjM1MzIy", "number": 2979, "title": "Fix click ANSI support regression", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-18T14:43:49Z", "updated_at": "2020-11-18T14:58:46Z", "closed_at": "2020-11-18T14:58:44Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2979", "html_url": "https://github.com/ansible-community/molecule/pull/2979", "diff_url": "https://github.com/ansible-community/molecule/pull/2979.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2979.patch", "merged_at": "2020-11-18T14:58:44Z"}, "body": "Fixes regression from https://github.com/ansible-community/molecule/commit/4fef9776076d98a728be22c92dcfb7084990ce4f\r\n\r\nRelated: https://github.com/pallets/click/issues/1713\r\nRelated: https://github.com/pallets/click/issues/1498\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2979/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2979/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2966", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2966/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2966/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2966/events", "html_url": "https://github.com/ansible-community/molecule/pull/2966", "id": 743350625, "node_id": "MDExOlB1bGxSZXF1ZXN0NTIxMjYzNzQ5", "number": 2966, "title": "Prevent Ansible args from leaking to create and destroy", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-15T21:37:55Z", "updated_at": "2020-11-17T14:04:16Z", "closed_at": "2020-11-17T10:45:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2966", "html_url": "https://github.com/ansible-community/molecule/pull/2966", "diff_url": "https://github.com/ansible-community/molecule/pull/2966.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2966.patch", "merged_at": "2020-11-17T10:45:36Z"}, "body": "When we were removing the dependency on the sh Python package from the codebase, we inadvertently changed the behavior of the Ansible arguments that user supplies either on the command line on in the provisioner part of the scenario configuration (commit 1cefe5c21e8ef338a5769d65e4e0e3eb6b2256fc).\r\n\r\nChanges in this commit restore the previous state when Ansible args were not passed to the create and destroy playbook executions.\r\n\r\nFixes #2963 \r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2966/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2963", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2963/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2963/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2963/events", "html_url": "https://github.com/ansible-community/molecule/issues/2963", "id": 741666257, "node_id": "MDU6SXNzdWU3NDE2NjYyNTc=", "number": 2963, "title": "ansible_args passed to all steps", "user": {"login": "t2d", "id": 1834580, "node_id": "MDQ6VXNlcjE4MzQ1ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1834580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/t2d", "html_url": "https://github.com/t2d", "followers_url": "https://api.github.com/users/t2d/followers", "following_url": "https://api.github.com/users/t2d/following{/other_user}", "gists_url": "https://api.github.com/users/t2d/gists{/gist_id}", "starred_url": "https://api.github.com/users/t2d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/t2d/subscriptions", "organizations_url": "https://api.github.com/users/t2d/orgs", "repos_url": "https://api.github.com/users/t2d/repos", "events_url": "https://api.github.com/users/t2d/events{/privacy}", "received_events_url": "https://api.github.com/users/t2d/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/20", "html_url": "https://github.com/ansible-community/molecule/milestone/20", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/20/labels", "id": 5072622, "node_id": "MDk6TWlsZXN0b25lNTA3MjYyMg==", "number": 20, "title": "3.2.0", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2020-02-04T20:27:14Z", "updated_at": "2021-03-22T17:22:18Z", "due_on": "2020-12-01T08:00:00Z", "closed_at": "2021-03-22T17:22:18Z"}, "comments": 3, "created_at": "2020-11-12T14:53:41Z", "updated_at": "2022-04-23T08:02:57Z", "closed_at": "2020-11-17T10:45:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmolecule 3.2.0a0\r\n    ansible:2.9.7 python:3.8\r\n    delegated:3.2.0a0 from molecule\r\n    podman:0.3.0 from molecule_podman\r\n    vagrant:0.5 from molecule_vagrant\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\n# Desired Behavior\r\n\r\nI have a particular use case where I want to test a full playbook and it's roles. However, the playbook has to be called with specified tags. I would call the playbook in production like this:\r\n```\r\nansible-playbook site.yml -t install\r\n```\r\nTherefore, I configured my `molecule.yml` like this:\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\nplatforms:\r\n  - name: opensuse15\r\n    box: generic/opensuse15\r\n  - name: debian10\r\n    box: generic/debian10\r\nprovisioner:\r\n  name: ansible\r\n  ansible_args:\r\n   - --tags=install\r\n  playbooks:\r\n    converge: ../../site.yml\r\nverifier:\r\n  name: ansible\r\n```\r\nI would expect molecule to pass these parameters to the converge step only. \r\n\r\n# Actual Behaviour\r\nMolecule passes the tags also to create and destroy, which makes my machines never start/stop.\r\n\r\nA good create command looks like this\r\n```\r\nCOMMAND: ansible-playbook --diff --inventory /home/t/.cache/molecule/playbook/default/inventory --skip-tags molecule-notest,notest /home/t/.local/lib/python3.8/site-packages/molecule_vagrant/playbooks/create.yml\r\n```\r\nWith `ansible_args` it looks like that: \r\n```\r\nCOMMAND: ansible-playbook --diff --inventory /home/t/.cache/molecule/playbook/default/inventory --skip-tags molecule-notest,notest --become --tags=install /home/t/.local/lib/python3.8/site-packages/molecule_default/playbooks/create.yml\r\n```\r\nThe create playbook doesn't do anything with just this tag.\r\n\r\nI have reprodiced this with both vagrant and podman driver.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2963/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2962", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2962/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2962/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2962/events", "html_url": "https://github.com/ansible-community/molecule/pull/2962", "id": 739979826, "node_id": "MDExOlB1bGxSZXF1ZXN0NTE4NTQ2MjQ2", "number": 2962, "title": "Switch from inventory file to directory for testinfra call", "user": {"login": "amarao", "id": 652496, "node_id": "MDQ6VXNlcjY1MjQ5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/652496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amarao", "html_url": "https://github.com/amarao", "followers_url": "https://api.github.com/users/amarao/followers", "following_url": "https://api.github.com/users/amarao/following{/other_user}", "gists_url": "https://api.github.com/users/amarao/gists{/gist_id}", "starred_url": "https://api.github.com/users/amarao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amarao/subscriptions", "organizations_url": "https://api.github.com/users/amarao/orgs", "repos_url": "https://api.github.com/users/amarao/repos", "events_url": "https://api.github.com/users/amarao/events{/privacy}", "received_events_url": "https://api.github.com/users/amarao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-11-10T14:54:01Z", "updated_at": "2020-11-15T12:04:58Z", "closed_at": "2020-11-15T12:04:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2962", "html_url": "https://github.com/ansible-community/molecule/pull/2962", "diff_url": "https://github.com/ansible-community/molecule/pull/2962.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2962.patch", "merged_at": "2020-11-15T12:04:57Z"}, "body": "#### PR Type\r\n- Feature Pull Request\r\n\r\n\r\nIt should allow to use hostvars of non-managed hosts inside testinfra call (including delegation). See Issue #2961 for details.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2962/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2962/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2959", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2959/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2959/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2959/events", "html_url": "https://github.com/ansible-community/molecule/issues/2959", "id": 739099112, "node_id": "MDU6SXNzdWU3MzkwOTkxMTI=", "number": 2959, "title": "molecule ignores ssh options from host/group vars when 'login' into instance (driver: delegated)", "user": {"login": "amarao", "id": 652496, "node_id": "MDQ6VXNlcjY1MjQ5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/652496?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amarao", "html_url": "https://github.com/amarao", "followers_url": "https://api.github.com/users/amarao/followers", "following_url": "https://api.github.com/users/amarao/following{/other_user}", "gists_url": "https://api.github.com/users/amarao/gists{/gist_id}", "starred_url": "https://api.github.com/users/amarao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amarao/subscriptions", "organizations_url": "https://api.github.com/users/amarao/orgs", "repos_url": "https://api.github.com/users/amarao/repos", "events_url": "https://api.github.com/users/amarao/events{/privacy}", "received_events_url": "https://api.github.com/users/amarao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-11-09T14:57:00Z", "updated_at": "2021-10-04T13:25:52Z", "closed_at": "2021-10-04T13:25:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.11\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/amarao/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/amarao/venvs/ansible29/lib/python3.8/site-packages/ansible\r\n  executable location = /home/amarao/venvs/ansible29/bin/ansible\r\n  python version = 3.8.6 (default, Sep 25 2020, 09:36:53) [GCC 10.2.0]\r\nmolecule 3.2.0a0\r\n    ansible:2.9.11 python:3.8\r\n    delegated:3.2.0a0 from molecule\r\n    libvirt:0.0.3 from molecule_libvirt\r\n    openstack:0.1 from molecule_openstack\r\n```\r\n\r\nMolecule & ansible installation method:\r\n- pip\r\n\r\n\r\n# Desired Behavior\r\nWhen instances from platform have `group_vars` or `host_vars` with `ansible_ssh_extra_args` variable, they should be used for `login` operation.\r\n\r\n# Actual Behaviour\r\n`ansible_ssh_extra_args` from both `group_vars` and `host_vars` are ignored by `login` command.\r\n\r\nThey are honored by `converge` and `test` commands, but are completely ignored for `login` command.\r\n\r\nInstance config:\r\n```\r\ncat /home/amarao/.cache/molecule/nwaas/default/instance_config.yml\r\n---\r\n- instance: vm1\r\n  address: 192.168.22.1\r\n  user: debian\r\n  port: 22\r\n  identity_file: '/home/amarao/.ssh/id_rsa'\r\n```\r\nhostvars for vm1:\r\n```\r\ncat /home/amarao/.cache/molecule/nwaas/default/inventory/host_vars/vm1.yaml \r\n---\r\nansible_host: 192.168.22.1\r\nansible_ssh_extra_args: '-J root@172.255.8.236'\r\n```\r\n\r\nThe main problem is that convege and other playbooks are using hostvars, and login does not.\r\n\r\nlogin call:\r\n```\r\n molecule --debug login --host vm1\r\n--> Inventory /home/amarao/git/nwaas/molecule/default/../../inventories/test_bench.yaml linked to /home/amarao/.cache/molecule/nwaas/default/inventory/hosts\r\n--> Inventory /home/amarao/git/nwaas/molecule/default/group_vars/ linked to /home/amarao/.cache/molecule/nwaas/default/inventory/group_vars\r\n--> Inventory /home/amarao/git/nwaas/molecule/default/host_vars/ linked to /home/amarao/.cache/molecule/nwaas/default/inventory/host_vars\r\nssh: connect to host 192.168.22.1 port 22: Connection refused\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2959/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2959/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2956", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2956/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2956/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2956/events", "html_url": "https://github.com/ansible-community/molecule/pull/2956", "id": 738465496, "node_id": "MDExOlB1bGxSZXF1ZXN0NTE3MzA1MzY5", "number": 2956, "title": "Improve output when Ansible is missing", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-08T13:27:54Z", "updated_at": "2020-11-08T15:07:16Z", "closed_at": "2020-11-08T15:07:15Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2956", "html_url": "https://github.com/ansible-community/molecule/pull/2956", "diff_url": "https://github.com/ansible-community/molecule/pull/2956.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2956.patch", "merged_at": "2020-11-08T15:07:15Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2956/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2956/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2954", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2954/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2954/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2954/events", "html_url": "https://github.com/ansible-community/molecule/pull/2954", "id": 738255143, "node_id": "MDExOlB1bGxSZXF1ZXN0NTE3MTQ2ODY2", "number": 2954, "title": "Prevent ansible from becoming a dependency", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-07T14:44:58Z", "updated_at": "2020-11-08T12:26:26Z", "closed_at": "2020-11-08T12:26:25Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2954", "html_url": "https://github.com/ansible-community/molecule/pull/2954", "diff_url": "https://github.com/ansible-community/molecule/pull/2954.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2954.patch", "merged_at": "2020-11-08T12:26:25Z"}, "body": "Fixes: https://github.com/ansible-community/pytest-molecule/issues/85\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2954/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2954/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2949", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2949/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2949/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2949/events", "html_url": "https://github.com/ansible-community/molecule/pull/2949", "id": 735932449, "node_id": "MDExOlB1bGxSZXF1ZXN0NTE1MjM0MTAz", "number": 2949, "title": "Check for successful `ansible --version` call", "user": {"login": "Matoking", "id": 959667, "node_id": "MDQ6VXNlcjk1OTY2Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/959667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Matoking", "html_url": "https://github.com/Matoking", "followers_url": "https://api.github.com/users/Matoking/followers", "following_url": "https://api.github.com/users/Matoking/following{/other_user}", "gists_url": "https://api.github.com/users/Matoking/gists{/gist_id}", "starred_url": "https://api.github.com/users/Matoking/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Matoking/subscriptions", "organizations_url": "https://api.github.com/users/Matoking/orgs", "repos_url": "https://api.github.com/users/Matoking/repos", "events_url": "https://api.github.com/users/Matoking/events{/privacy}", "received_events_url": "https://api.github.com/users/Matoking/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-04T08:56:12Z", "updated_at": "2020-11-08T13:28:22Z", "closed_at": "2020-11-08T13:28:22Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2949", "html_url": "https://github.com/ansible-community/molecule/pull/2949", "diff_url": "https://github.com/ansible-community/molecule/pull/2949.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2949.patch", "merged_at": null}, "body": "Check that the `ansible --version` command executes successfully or raise a subprocess.CalledProcessError. Otherwise , Ansible might print a message starting with \"the full traceback was:\" to stdout, eventually leading to the following cryptic exception:\r\n\r\n```\r\npackaging.version.InvalidVersion: Invalid version 'full'\r\n```\r\n\r\nWith the check in place, the following exception is printed instead:\r\n\r\n```\r\nsubprocess.CalledProcessError: Command ['ansible', '--version']' returned non-zero exit status 250.\r\n```\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2949/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2949/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2945", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2945/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2945/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2945/events", "html_url": "https://github.com/ansible-community/molecule/pull/2945", "id": 734455327, "node_id": "MDExOlB1bGxSZXF1ZXN0NTE0MDE2NzU0", "number": 2945, "title": "Use new testinfra package name", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-02T12:11:20Z", "updated_at": "2020-11-08T13:00:42Z", "closed_at": "2020-11-08T13:00:41Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2945", "html_url": "https://github.com/ansible-community/molecule/pull/2945", "diff_url": "https://github.com/ansible-community/molecule/pull/2945.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2945.patch", "merged_at": "2020-11-08T13:00:41Z"}, "body": "As testinfra was transfered to pytest-dev, it also included a rename of the pypi package.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2945/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2945/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2944", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2944/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2944/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2944/events", "html_url": "https://github.com/ansible-community/molecule/issues/2944", "id": 734388373, "node_id": "MDU6SXNzdWU3MzQzODgzNzM=", "number": 2944, "title": "Molecule 3.2.0a0 fails when /bin/bash does not exist", "user": {"login": "sio", "id": 334908, "node_id": "MDQ6VXNlcjMzNDkwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/334908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sio", "html_url": "https://github.com/sio", "followers_url": "https://api.github.com/users/sio/followers", "following_url": "https://api.github.com/users/sio/following{/other_user}", "gists_url": "https://api.github.com/users/sio/gists{/gist_id}", "starred_url": "https://api.github.com/users/sio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sio/subscriptions", "organizations_url": "https://api.github.com/users/sio/orgs", "repos_url": "https://api.github.com/users/sio/repos", "events_url": "https://api.github.com/users/sio/events{/privacy}", "received_events_url": "https://api.github.com/users/sio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-02T10:33:03Z", "updated_at": "2020-11-08T12:52:44Z", "closed_at": "2020-11-08T12:52:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmolecule 3.2.0a0\r\n    ansible:2.10.2 python:3.8\r\n    delegated:3.2.0a0 from molecule\r\n    docker:0.3.3 from molecule_docker\r\n    vagrant:0.5 from molecule_vagrant\r\n/builds/sio/server_common/venv/bin/ansible --version\r\nansible 2.10.2\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /builds/sio/server_common/venv/lib/python3.8/site-packages/ansible\r\n  executable location = /builds/sio/server_common/venv/bin/ansible\r\n  python version = 3.8.5 (default, Jul 20 2020, 23:11:29) [GCC 9.3.0]\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n```\r\nset -e\r\nyamllint .\r\nansible-lint\r\n```\r\n\r\n# Desired Behavior\r\n\r\nMolecule does not crash when /bin/bash is not installed. /bin/sh should be good enough.\r\n\r\n# Actual Behaviour\r\n\r\nMolecule (with docker plugin) crashes in docker sanity check stage. It tries to execute /bin/bash even when it's not installed, which results in an unhandled FileNotFoundError:\r\n\r\n```\r\n--> Sanity checks: 'docker'\r\nTraceback (most recent call last):\r\n  File \"/builds/sio/server_common/venv/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/click/decorators.py\", line 21, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/molecule/command/test.py\", line 148, in test\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/molecule/command/base.py\", line 104, in execute_cmdline_scenarios\r\n    execute_scenario(scenario)\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/molecule/command/base.py\", line 146, in execute_scenario\r\n    execute_subcommand(scenario.config, action)\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/molecule/command/base.py\", line 135, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/molecule/command/destroy.py\", line 108, in execute\r\n    self._config.provisioner.destroy()\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/molecule/provisioner/ansible.py\", line 702, in destroy\r\n    pb.execute()\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/molecule/provisioner/ansible_playbook.py\", line 107, in execute\r\n    result = util.run_command(self._ansible_command, debug=self._config.debug)\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/molecule/util.py\", line 151, in run_command\r\n    return run(args, env=env, stdout=stdout, stderr=stderr, echo=echo or debug)\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/subprocess_tee/__init__.py\", line 88, in run\r\n    result = loop.run_until_complete(_stream_subprocess(cmd, **kwargs))\r\n  File \"/usr/lib/python3.8/asyncio/base_events.py\", line 616, in run_until_complete\r\n    return future.result()\r\n  File \"/builds/sio/server_common/venv/lib/python3.8/site-packages/subprocess_tee/__init__.py\", line 32, in _stream_subprocess\r\n    process = await asyncio.create_subprocess_shell(\r\n  File \"/usr/lib/python3.8/asyncio/subprocess.py\", line 216, in create_subprocess_shell\r\n    transport, protocol = await loop.subprocess_shell(\r\n  File \"/usr/lib/python3.8/asyncio/base_events.py\", line 1597, in subprocess_shell\r\n    transport = await self._make_subprocess_transport(\r\n  File \"/usr/lib/python3.8/asyncio/unix_events.py\", line 197, in _make_subprocess_transport\r\n    transp = _UnixSubprocessTransport(self, protocol, args, shell,\r\n  File \"/usr/lib/python3.8/asyncio/base_subprocess.py\", line 36, in __init__\r\n    self._start(args=args, shell=shell, stdin=stdin, stdout=stdout,\r\n  File \"/usr/lib/python3.8/asyncio/unix_events.py\", line 789, in _start\r\n    self._proc = subprocess.Popen(\r\n  File \"/usr/lib/python3.8/subprocess.py\", line 854, in __init__\r\n    self._execute_child(args, executable, preexec_fn, close_fds,\r\n  File \"/usr/lib/python3.8/subprocess.py\", line 1702, in _execute_child\r\n    raise child_exception_type(errno_num, err_msg, err_filename)\r\nFileNotFoundError: [Errno 2] No such file or directory: '/bin/bash'\r\n```\r\n\r\nFull log: https://gitlab.com/sio/server_common/-/jobs/823643538\r\n\r\nMolecule 3.1.5 worked fine on the same runner (without /bin/bash).", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2944/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2944/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2943", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2943/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2943/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2943/events", "html_url": "https://github.com/ansible-community/molecule/pull/2943", "id": 733994707, "node_id": "MDExOlB1bGxSZXF1ZXN0NTEzNjQzMDYy", "number": 2943, "title": "Fixed Manifest file", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-01T15:35:36Z", "updated_at": "2020-11-02T12:06:43Z", "closed_at": "2020-11-02T12:06:42Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2943", "html_url": "https://github.com/ansible-community/molecule/pull/2943", "diff_url": "https://github.com/ansible-community/molecule/pull/2943.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2943.patch", "merged_at": "2020-11-02T12:06:42Z"}, "body": "- added missing typing marker\r\n- added check-manifest to prevent future regressions\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2943/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2931", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2931/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2931/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2931/events", "html_url": "https://github.com/ansible-community/molecule/issues/2931", "id": 733264990, "node_id": "MDU6SXNzdWU3MzMyNjQ5OTA=", "number": 2931, "title": "Delegated driver not generating inventory file as expected", "user": {"login": "jodybro", "id": 25326943, "node_id": "MDQ6VXNlcjI1MzI2OTQz", "avatar_url": "https://avatars.githubusercontent.com/u/25326943?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jodybro", "html_url": "https://github.com/jodybro", "followers_url": "https://api.github.com/users/jodybro/followers", "following_url": "https://api.github.com/users/jodybro/following{/other_user}", "gists_url": "https://api.github.com/users/jodybro/gists{/gist_id}", "starred_url": "https://api.github.com/users/jodybro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jodybro/subscriptions", "organizations_url": "https://api.github.com/users/jodybro/orgs", "repos_url": "https://api.github.com/users/jodybro/repos", "events_url": "https://api.github.com/users/jodybro/events{/privacy}", "received_events_url": "https://api.github.com/users/jodybro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-10-30T15:13:01Z", "updated_at": "2021-05-19T14:44:20Z", "closed_at": "2021-05-19T14:44:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.9.9\r\nmolecule 3.1.4\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- pip\r\n\r\n`pip`\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n- pip\r\n- OS package\r\n\r\n`pip`\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nInstance created by the `create.yml` playbook should then have its details placed in the ephemeral inventory file (ip, id, port, user)\r\n\r\n# Actual Behaviour\r\n\r\nUsing the `delegated` driver for a bit of testing. Instance(s) are created in `ec2`.\r\nInstance creation works fine and I end up with the details from the instance in my `instance_conf` (ip, instanceid, port, user).\r\n\r\nBut when molecule generates the ephemeral inventory file...none of these values are placed.\r\n\r\n\r\ninstance_config.yml\r\n```\r\n- {address: $ip, instance: $id, port: '22', user: $user}\r\n```\r\n\r\nmolecule.yml\r\n```\r\n---\r\ndriver:\r\n  name: delegated\r\n  options:\r\n    managed: True\r\nplatforms:\r\n  - name: molecule-builder\r\n    instance_type: t3.medium\r\n    vpc_subnet_id: $subnet\r\n    group_id: $sg\r\n    groups:\r\n      - molecule-builder\r\nprovisioner:\r\n  name: ansible\r\n  config_options:\r\n    defaults:\r\n      callback_whitelist: profile_tasks, timer, yaml\r\n    ssh_connection:\r\n      pipelining: true\r\n      host_key_checking: no\r\nverifier:\r\n  name: ansible\r\nlint: |\r\n  set -e\r\n  ansible-lint\r\nscenario:\r\n  name: default\r\n  test_sequence:\r\n    - destroy\r\n    - create\r\n    - converge\r\n```\r\n\r\nansible_inventory.yml\r\n```\r\n---\r\nall:\r\n  hosts:\r\n    molecule-builder: &id001 {}\r\n  vars: &id002\r\n    molecule_ephemeral_directory: '{{ lookup(''env'', ''MOLECULE_EPHEMERAL_DIRECTORY'')\r\n      }}'\r\n    molecule_file: '{{ lookup(''env'', ''MOLECULE_FILE'') }}'\r\n    molecule_instance_config: '{{ lookup(''env'', ''MOLECULE_INSTANCE_CONFIG'') }}'\r\n    molecule_no_log: '{{ lookup(''env'', ''MOLECULE_NO_LOG'') or not molecule_yml.provisioner.log|default(False)\r\n      | bool }}'\r\n    molecule_scenario_directory: '{{ lookup(''env'', ''MOLECULE_SCENARIO_DIRECTORY'')\r\n      }}'\r\n    molecule_yml: '{{ lookup(''file'', molecule_file) | from_yaml }}'\r\ninstance:\r\n  hosts:\r\n    molecule-builder: *id001\r\n  vars: *id002\r\nungrouped:\r\n  vars: {}\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2931/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2930", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2930/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2930/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2930/events", "html_url": "https://github.com/ansible-community/molecule/pull/2930", "id": 733152187, "node_id": "MDExOlB1bGxSZXF1ZXN0NTEyOTc4MTkx", "number": 2930, "title": "Avoid duplicate stdout on playbook failures", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, {"login": "cloudnull", "id": 2066292, "node_id": "MDQ6VXNlcjIwNjYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2066292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloudnull", "html_url": "https://github.com/cloudnull", "followers_url": "https://api.github.com/users/cloudnull/followers", "following_url": "https://api.github.com/users/cloudnull/following{/other_user}", "gists_url": "https://api.github.com/users/cloudnull/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloudnull/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloudnull/subscriptions", "organizations_url": "https://api.github.com/users/cloudnull/orgs", "repos_url": "https://api.github.com/users/cloudnull/repos", "events_url": "https://api.github.com/users/cloudnull/events{/privacy}", "received_events_url": "https://api.github.com/users/cloudnull/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-10-30T13:00:35Z", "updated_at": "2020-10-30T15:03:23Z", "closed_at": "2020-10-30T15:03:22Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2930", "html_url": "https://github.com/ansible-community/molecule/pull/2930", "diff_url": "https://github.com/ansible-community/molecule/pull/2930.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2930.patch", "merged_at": "2020-10-30T15:03:22Z"}, "body": "Newer run_command does print stdout/stderr, so there is no need to, print them again in case of failure. We now display the error code and the original command the produced it.\r\n\r\nExample output:\r\n```\r\n$ molecule converge                                                                                               [12:55:46]\r\n--> Found config file /Users/ssbarnea/c/a/molecule/.config/molecule/config.yml\r\n--> Test matrix\r\n---\r\ndefault:\r\n  - dependency\r\n  - create\r\n  - prepare\r\n  - converge\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nSkipping, instances already created.\r\n--> Scenario: 'default'\r\n--> Action: 'prepare'\r\nSkipping, prepare playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'converge'\r\n\r\nPLAY [Converge] ****************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************\r\nfatal: [localhost]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: root@localhost: Permission denied (publickey,password,keyboard-interactive).\", \"unreachable\": true}\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nERROR: Ansible return code was 4, command was ansible-playbook --inventory /Users/ssbarnea/.cache/molecule/molecule/default/inventory --skip-tags molecule-notest,notest /Users/ssbarnea/c/a/molecule/molecule/default/converge.yml\r\nTime: 0h:00m:03s\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2930/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2930/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2927", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2927/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2927/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2927/events", "html_url": "https://github.com/ansible-community/molecule/pull/2927", "id": 732496627, "node_id": "MDExOlB1bGxSZXF1ZXN0NTEyNDI3OTU1", "number": 2927, "title": "Set ansible_ssh_pass with ansible_password because of a testinfra issue", "user": {"login": "lmesz-bitrise", "id": 64836569, "node_id": "MDQ6VXNlcjY0ODM2NTY5", "avatar_url": "https://avatars.githubusercontent.com/u/64836569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmesz-bitrise", "html_url": "https://github.com/lmesz-bitrise", "followers_url": "https://api.github.com/users/lmesz-bitrise/followers", "following_url": "https://api.github.com/users/lmesz-bitrise/following{/other_user}", "gists_url": "https://api.github.com/users/lmesz-bitrise/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmesz-bitrise/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmesz-bitrise/subscriptions", "organizations_url": "https://api.github.com/users/lmesz-bitrise/orgs", "repos_url": "https://api.github.com/users/lmesz-bitrise/repos", "events_url": "https://api.github.com/users/lmesz-bitrise/events{/privacy}", "received_events_url": "https://api.github.com/users/lmesz-bitrise/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-10-29T17:05:37Z", "updated_at": "2020-11-08T13:01:17Z", "closed_at": "2020-11-08T13:01:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2927", "html_url": "https://github.com/ansible-community/molecule/pull/2927", "diff_url": "https://github.com/ansible-community/molecule/pull/2927.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2927.patch", "merged_at": "2020-11-08T13:01:17Z"}, "body": "We are using delegated driver to connect to a recently created host on which ssh keys are not set yet, when we had tried to execute molecule test on that it stopped and asked for password in the verify phase even though the password was set in the create.yml.\r\nFor verification we use testinfra, under the hood it uses pytest with ansible backend.\r\nAfter some investigation figured out the reason is that ansible_ssh_pass is not set and based on the doc it is mandatory if key is not set. This [issue](https://github.com/philpep/testinfra/issues/580) has been reported to testinfra, but until it is not fixed this PR implements a small workaround.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2927/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2927/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2925", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2925/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2925/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2925/events", "html_url": "https://github.com/ansible-community/molecule/pull/2925", "id": 732188629, "node_id": "MDExOlB1bGxSZXF1ZXN0NTEyMTY5ODEx", "number": 2925, "title": "Removed run_command test helper", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-29T10:24:24Z", "updated_at": "2020-10-29T11:29:36Z", "closed_at": "2020-10-29T11:29:35Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2925", "html_url": "https://github.com/ansible-community/molecule/pull/2925", "diff_url": "https://github.com/ansible-community/molecule/pull/2925.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2925.patch", "merged_at": "2020-10-29T11:29:35Z"}, "body": "As run_command is part of molecule.util, it makes sense to remove the test helper as we no longer need sh baking tricks.\r\n\r\nThis will prevent silent bugs where we miss to detect an error as the newer run_command does return a result instead of raising an Exception when the subprocess returned any value other than zero.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2925/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2925/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2923", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2923/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2923/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2923/events", "html_url": "https://github.com/ansible-community/molecule/issues/2923", "id": 731553116, "node_id": "MDU6SXNzdWU3MzE1NTMxMTY=", "number": 2923, "title": "molecule login ignoring scenario", "user": {"login": "Nightreaver", "id": 3270156, "node_id": "MDQ6VXNlcjMyNzAxNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3270156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nightreaver", "html_url": "https://github.com/Nightreaver", "followers_url": "https://api.github.com/users/Nightreaver/followers", "following_url": "https://api.github.com/users/Nightreaver/following{/other_user}", "gists_url": "https://api.github.com/users/Nightreaver/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nightreaver/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nightreaver/subscriptions", "organizations_url": "https://api.github.com/users/Nightreaver/orgs", "repos_url": "https://api.github.com/users/Nightreaver/repos", "events_url": "https://api.github.com/users/Nightreaver/events{/privacy}", "received_events_url": "https://api.github.com/users/Nightreaver/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-10-28T15:33:16Z", "updated_at": "2021-10-04T13:28:53Z", "closed_at": "2021-10-04T13:28:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.2\r\n  config file = None\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /opt/venv/lib/python3.8/site-packages/ansible\r\n  executable location = /opt/venv/bin/ansible\r\n  python version = 3.8.6 (default, Oct 22 2020, 05:11:53) [GCC 9.3.0]\r\nmolecule 3.1.5\r\n    ansible:2.10.2 python:3.8\r\n    azure:0.4 from molecule_azure\r\n    delegated:3.1.5 from molecule\r\n    docker:0.2.4 from molecule_docker\r\n    ec2:0.2 from molecule_ec2\r\n    gce:0.1 from molecule_gce\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n-  yamllint\r\n - ansible-lint\r\n\r\n# Desired Behavior\r\n\r\nUsecase: Molecule with couple scenarios, each containing different drivers.  \r\n\r\nRunning `molecule login --host XXXX` should use default scenario for login/validation\r\nRunning `molecule login --host XXXX --scenario my_scenario`  should use only `my_scenario` for login/validation\r\n\r\nIgnore other scenarios/folders and associated drivers.\r\n\r\n# Actual Behaviour\r\n\r\nRunning `molecule login --host XXX` gives \r\n\r\n```\r\nERROR: Failed to pre-validate.\r\n\r\n{'driver': [{'name': ['unallowed value vagrant']}]}\r\n```\r\n\r\nthough `vagrant` driver is not part of the **current/chosen** scenario but one of **another** one contained in molecules folder that is not going to be used.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2923/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2923/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2918", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2918/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2918/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2918/events", "html_url": "https://github.com/ansible-community/molecule/pull/2918", "id": 730434726, "node_id": "MDExOlB1bGxSZXF1ZXN0NTEwNzM5NzM1", "number": 2918, "title": "Fixed plain formatting on scenario list", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-27T13:07:38Z", "updated_at": "2020-10-27T13:22:16Z", "closed_at": "2020-10-27T13:22:15Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2918", "html_url": "https://github.com/ansible-community/molecule/pull/2918", "diff_url": "https://github.com/ansible-community/molecule/pull/2918.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2918.patch", "merged_at": "2020-10-27T13:22:15Z"}, "body": "Fixed minor regression around printing list of scenarios.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2918/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2913", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2913/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2913/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2913/events", "html_url": "https://github.com/ansible-community/molecule/pull/2913", "id": 728323288, "node_id": "MDExOlB1bGxSZXF1ZXN0NTA5MDUxMzE4", "number": 2913, "title": "Remove coverage ceiling from test extra", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-23T15:41:20Z", "updated_at": "2020-10-23T16:11:35Z", "closed_at": "2020-10-23T16:11:34Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2913", "html_url": "https://github.com/ansible-community/molecule/pull/2913", "diff_url": "https://github.com/ansible-community/molecule/pull/2913.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2913.patch", "merged_at": "2020-10-23T16:11:34Z"}, "body": "Avoid potential installation conflicts due to coverage ceiling.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2913/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2913/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2910", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2910/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2910/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2910/events", "html_url": "https://github.com/ansible-community/molecule/pull/2910", "id": 725735259, "node_id": "MDExOlB1bGxSZXF1ZXN0NTA2OTI0MzMw", "number": 2910, "title": "Run pip check at the end of container building", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-20T15:58:36Z", "updated_at": "2020-10-20T17:40:39Z", "closed_at": "2020-10-20T17:40:38Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2910", "html_url": "https://github.com/ansible-community/molecule/pull/2910", "diff_url": "https://github.com/ansible-community/molecule/pull/2910.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2910.patch", "merged_at": "2020-10-20T17:40:38Z"}, "body": "\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2910/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2910/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2908", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2908/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2908/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2908/events", "html_url": "https://github.com/ansible-community/molecule/pull/2908", "id": 725715793, "node_id": "MDExOlB1bGxSZXF1ZXN0NTA2OTA4MTU1", "number": 2908, "title": "Remove hetznerdriver from container", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-20T15:34:50Z", "updated_at": "2020-10-20T15:48:23Z", "closed_at": "2020-10-20T15:48:22Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2908", "html_url": "https://github.com/ansible-community/molecule/pull/2908", "diff_url": "https://github.com/ansible-community/molecule/pull/2908.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2908.patch", "merged_at": "2020-10-20T15:48:22Z"}, "body": "Driver is not compatible with latest molecule. We will reconsider adding it back if it becomes\r\nactively maintained.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2908/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2907", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2907/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2907/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2907/events", "html_url": "https://github.com/ansible-community/molecule/pull/2907", "id": 725699951, "node_id": "MDExOlB1bGxSZXF1ZXN0NTA2ODk1MDE3", "number": 2907, "title": "Avoid building molecule container with version 0.0.0", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-20T15:17:00Z", "updated_at": "2020-10-20T15:30:52Z", "closed_at": "2020-10-20T15:30:51Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2907", "html_url": "https://github.com/ansible-community/molecule/pull/2907", "diff_url": "https://github.com/ansible-community/molecule/pull/2907.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2907.patch", "merged_at": "2020-10-20T15:30:51Z"}, "body": "Avoids bug in pip/wheel that installs molecule with version 0.0.0 inside the container.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2907/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2905", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2905/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2905/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2905/events", "html_url": "https://github.com/ansible-community/molecule/issues/2905", "id": 725578490, "node_id": "MDU6SXNzdWU3MjU1Nzg0OTA=", "number": 2905, "title": "login blocking other operations", "user": {"login": "heichblatt", "id": 1250473, "node_id": "MDQ6VXNlcjEyNTA0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1250473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heichblatt", "html_url": "https://github.com/heichblatt", "followers_url": "https://api.github.com/users/heichblatt/followers", "following_url": "https://api.github.com/users/heichblatt/following{/other_user}", "gists_url": "https://api.github.com/users/heichblatt/gists{/gist_id}", "starred_url": "https://api.github.com/users/heichblatt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heichblatt/subscriptions", "organizations_url": "https://api.github.com/users/heichblatt/orgs", "repos_url": "https://api.github.com/users/heichblatt/repos", "events_url": "https://api.github.com/users/heichblatt/events{/privacy}", "received_events_url": "https://api.github.com/users/heichblatt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-10-20T13:19:08Z", "updated_at": "2020-12-19T18:18:44Z", "closed_at": "2020-12-19T18:18:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.10.2\r\nmolecule 3.1.1\r\n   ansible==2.10.2 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nAfter `molecule create`ing an instance, I would like to be able to `molecule login` and `tail` a log file in one shell session while running `molecule converge` in another.\r\n\r\n# Actual Behaviour\r\n\r\n$ molecule converge\r\nRetrying to acquire lock on /Users/foo/.cache/molecule/bar/bar, waiting for 30 seconds\r\n\r\nI recognize that blocking makes sense for i.e. `molecule create` and `molecule converge`, but I fail to see the reasoning behind making `login` blocking.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2905/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2904", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2904/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2904/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2904/events", "html_url": "https://github.com/ansible-community/molecule/pull/2904", "id": 724745447, "node_id": "MDExOlB1bGxSZXF1ZXN0NTA2MDgzMDk5", "number": 2904, "title": "Avoid using broken pip 2020-resolver", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-19T15:43:21Z", "updated_at": "2020-10-19T15:57:07Z", "closed_at": "2020-10-19T15:57:06Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2904", "html_url": "https://github.com/ansible-community/molecule/pull/2904", "diff_url": "https://github.com/ansible-community/molecule/pull/2904.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2904.patch", "merged_at": "2020-10-19T15:57:06Z"}, "body": "Apparently new resolved can get into endless loops of building packages.\r\n\r\nRelated: https://github.com/pypa/pip/issues/8713\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2904/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2904/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2902", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2902/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2902/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2902/events", "html_url": "https://github.com/ansible-community/molecule/issues/2902", "id": 724644648, "node_id": "MDU6SXNzdWU3MjQ2NDQ2NDg=", "number": 2902, "title": "Failed to connect to the host via ssh: ssh: Could not resolve hostname", "user": {"login": "dj-wasabi", "id": 1171720, "node_id": "MDQ6VXNlcjExNzE3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1171720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dj-wasabi", "html_url": "https://github.com/dj-wasabi", "followers_url": "https://api.github.com/users/dj-wasabi/followers", "following_url": "https://api.github.com/users/dj-wasabi/following{/other_user}", "gists_url": "https://api.github.com/users/dj-wasabi/gists{/gist_id}", "starred_url": "https://api.github.com/users/dj-wasabi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dj-wasabi/subscriptions", "organizations_url": "https://api.github.com/users/dj-wasabi/orgs", "repos_url": "https://api.github.com/users/dj-wasabi/repos", "events_url": "https://api.github.com/users/dj-wasabi/events{/privacy}", "received_events_url": "https://api.github.com/users/dj-wasabi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-10-19T14:02:15Z", "updated_at": "2020-10-19T15:44:35Z", "closed_at": "2020-10-19T15:20:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.2\r\n  config file = None\r\n  configured module search path = ['/Users/wdijkerman/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/wdijkerman/.venv3/lib/python3.8/site-packages/ansible\r\n  executable location = /Users/wdijkerman/.venv3/bin/ansible\r\n  python version = 3.8.5 (default, Jul 21 2020, 10:48:26) [Clang 11.0.3 (clang-1103.0.32.62)]\r\nmolecule 3.1.3\r\n   ansible==2.10.2 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen I execute `molecule create` or `molecule converge` 1 or more containers are started and the role is executed inside the container,\r\n\r\n# Actual Behaviour\r\n\r\nWhen I want to `converge` the Ansible role https://github.com/dj-wasabi/ansible-telegraf I get the following error:\r\n\r\n```\r\nmolecule --debug create                                                                                                                                                             (docker-desktop/default)\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 create\r\n    \u2514\u2500\u2500 prepare\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nSkipping, create action has no playbook.\r\n--> Scenario: 'default'\r\n--> Action: 'prepare'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_COLLECTIONS_PATH: /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/collections:/Users/wdijkerman/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections\r\nANSIBLE_CONFIG: /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/wdijkerman/.venv3/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/plugins/filter:/Users/wdijkerman/code/dj-wasabi/ansible-telegraf/plugins/filter:/Users/wdijkerman/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_LIBRARY: /Users/wdijkerman/.venv3/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/library:/Users/wdijkerman/code/dj-wasabi/ansible-telegraf/library:/Users/wdijkerman/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/roles:/Users/wdijkerman/code/dj-wasabi:/Users/wdijkerman/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: delegated\r\nMOLECULE_ENV_FILE: /Users/wdijkerman/code/dj-wasabi/ansible-telegraf/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/wdijkerman/.cache/molecule/ansible-telegraf/default\r\nMOLECULE_FILE: /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /Users/wdijkerman/code/dj-wasabi/ansible-telegraf\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/wdijkerman/code/dj-wasabi/ansible-telegraf/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/state.yml\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/wdijkerman/code/dj-wasabi/ansible-telegraf/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_COLLECTIONS_PATH=/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/collections:/Users/wdijkerman/.ansible/collections:/usr/share/ansible/collections:/etc/ansible/collections ANSIBLE_CONFIG=/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/wdijkerman/.venv3/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/plugins/filter:/Users/wdijkerman/code/dj-wasabi/ansible-telegraf/plugins/filter:/Users/wdijkerman/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/Users/wdijkerman/.venv3/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/library:/Users/wdijkerman/code/dj-wasabi/ansible-telegraf/library:/Users/wdijkerman/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/roles:/Users/wdijkerman/code/dj-wasabi:/Users/wdijkerman/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=delegated MOLECULE_ENV_FILE=/Users/wdijkerman/code/dj-wasabi/ansible-telegraf/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/wdijkerman/.cache/molecule/ansible-telegraf/default MOLECULE_FILE=/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/Users/wdijkerman/code/dj-wasabi/ansible-telegraf MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/wdijkerman/code/dj-wasabi/ansible-telegraf/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/state.yml MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/wdijkerman/code/dj-wasabi/ansible-telegraf/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/wdijkerman/.venv3/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/inventory /Users/wdijkerman/code/dj-wasabi/ansible-telegraf/molecule/default/prepare.yml -vvv\r\n\r\n    ansible-playbook 2.10.2\r\n      config file = /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/ansible.cfg\r\n      configured module search path = ['/Users/wdijkerman/.venv3/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules', '/Users/wdijkerman/.cache/molecule/ansible-telegraf/default/library', '/Users/wdijkerman/code/dj-wasabi/ansible-telegraf/library', '/Users/wdijkerman/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /Users/wdijkerman/.venv3/lib/python3.8/site-packages/ansible\r\n      executable location = /Users/wdijkerman/.venv3/bin/ansible-playbook\r\n      python version = 3.8.5 (default, Jul 21 2020, 10:48:26) [Clang 11.0.3 (clang-1103.0.32.62)]\r\n    Using /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/ansible.cfg as config file\r\n    host_list declined parsing /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /Users/wdijkerman/.cache/molecule/ansible-telegraf/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n    redirecting (type: modules) ansible.builtin.zypper to community.general.zypper\r\n\r\n    PLAYBOOK: prepare.yml **********************************************************\r\n    1 plays in /Users/wdijkerman/code/dj-wasabi/ansible-telegraf/molecule/default/prepare.yml\r\n\r\n    PLAY [telegraf] ****************************************************************\r\n\r\n    TASK [Gathering Facts] *********************************************************\r\n    task path: /Users/wdijkerman/code/dj-wasabi/ansible-telegraf/molecule/default/prepare.yml:3\r\n    <telegraf-centos8> ESTABLISH SSH CONNECTION FOR USER: None\r\n    <telegraf-centos8> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=10 -o ControlPath=/Users/wdijkerman/.ansible/cp/%h-%p-%r telegraf-centos8 '/bin/sh -c '\"'\"'echo ~ && sleep 0'\"'\"''\r\n    <telegraf-centos8> (255, b'', b'ssh: Could not resolve hostname telegraf-centos8: nodename nor servname provided, or not known\\r\\n')\r\nfatal: [telegraf-centos8]: UNREACHABLE! => {\r\n    \"changed\": false,\r\n    \"msg\": \"Failed to connect to the host via ssh: ssh: Could not resolve hostname telegraf-centos8: nodename nor servname provided, or not known\",\r\n    \"unreachable\": true\r\n}\r\n\r\n    PLAY RECAP *********************************************************************\r\n    telegraf-centos8           : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nERROR:\r\n```\r\n\r\n(I had to manually remove the `driver, name: docker` line in order to get here. I would got this line `{'driver': [{'name': ['unallowed value docker']}]}`)\r\n\r\nInstallation of both Ansible and Molecule are done in a clean VirtualEnv.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2902/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2902/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2897", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2897/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2897/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2897/events", "html_url": "https://github.com/ansible-community/molecule/pull/2897", "id": 723985105, "node_id": "MDExOlB1bGxSZXF1ZXN0NTA1NDU1ODg4", "number": 2897, "title": "Avoid implicit gather_facts on verify", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-18T11:22:37Z", "updated_at": "2020-10-18T11:35:33Z", "closed_at": "2020-10-18T11:35:32Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2897", "html_url": "https://github.com/ansible-community/molecule/pull/2897", "diff_url": "https://github.com/ansible-community/molecule/pull/2897.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2897.patch", "merged_at": "2020-10-18T11:35:32Z"}, "body": "Disable gather_facts for verify playbook as is may not be required in practice.\r\n\r\nThis also makes it possible to test molecule-podman by creating a workaround for know bug.\r\n\r\nRelated: https://github.com/ansible-community/molecule-podman/issues/2\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2897/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2897/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2896", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2896/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2896/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2896/events", "html_url": "https://github.com/ansible-community/molecule/issues/2896", "id": 723861560, "node_id": "MDU6SXNzdWU3MjM4NjE1NjA=", "number": 2896, "title": "Molecule 3.1+ docker image broken", "user": {"login": "Thulium-Drake", "id": 12935477, "node_id": "MDQ6VXNlcjEyOTM1NDc3", "avatar_url": "https://avatars.githubusercontent.com/u/12935477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Thulium-Drake", "html_url": "https://github.com/Thulium-Drake", "followers_url": "https://api.github.com/users/Thulium-Drake/followers", "following_url": "https://api.github.com/users/Thulium-Drake/following{/other_user}", "gists_url": "https://api.github.com/users/Thulium-Drake/gists{/gist_id}", "starred_url": "https://api.github.com/users/Thulium-Drake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Thulium-Drake/subscriptions", "organizations_url": "https://api.github.com/users/Thulium-Drake/orgs", "repos_url": "https://api.github.com/users/Thulium-Drake/repos", "events_url": "https://api.github.com/users/Thulium-Drake/events{/privacy}", "received_events_url": "https://api.github.com/users/Thulium-Drake/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-10-17T22:41:25Z", "updated_at": "2020-10-20T21:10:43Z", "closed_at": "2020-10-20T19:07:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ docker run -it --entrypoint /bin/sh quay.io/ansible/molecule:3.1.2\r\n/ # molecule --version\r\nFailed to load driver entry point Traceback (most recent call last):\r\n  File \"/usr/lib/python3.8/site-packages/molecule_containers/driver.py\", line 9, in <module>\r\n    from molecule.driver.docker import Docker as DriverBackend\r\nModuleNotFoundError: No module named 'molecule.driver.docker'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/site-packages/molecule/api.py\", line 45, in drivers\r\n    pm.load_setuptools_entrypoints(\"molecule.driver\")\r\n  File \"/usr/lib/python3.8/site-packages/pluggy/manager.py\", line 299, in load_setuptools_entrypoints\r\n    plugin = ep.load()\r\n  File \"/usr/lib/python3.8/importlib/metadata.py\", line 77, in load\r\n    module = import_module(match.group('module'))\r\n  File \"/usr/lib/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 975, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 783, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/usr/lib/python3.8/site-packages/molecule_containers/driver.py\", line 11, in <module>\r\n    from molecule.driver.podman import Podman as DriverBackend\r\nModuleNotFoundError: No module named 'molecule.driver.podman'\r\n\r\nmolecule 0.0.0\r\n   ansible==2.10.2 python==3.8\r\n/ # ansible --version\r\nansible 2.10.2\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.6 (default, Oct  5 2020, 00:23:48) [GCC 10.2.0]\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker (quay.io)\r\n\r\nAnsible installation method (one of):\r\n\r\n- docker (quay.io)\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nDownload docker image and run tests with it\r\n# Actual Behaviour\r\nRunning ```molecule --version``` makes the container barf errors.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2896/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2896/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2895", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2895/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2895/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2895/events", "html_url": "https://github.com/ansible-community/molecule/issues/2895", "id": 723722494, "node_id": "MDU6SXNzdWU3MjM3MjI0OTQ=", "number": 2895, "title": "Vagrant driver - lock file lookup error", "user": {"login": "darkwizard242", "id": 40025815, "node_id": "MDQ6VXNlcjQwMDI1ODE1", "avatar_url": "https://avatars.githubusercontent.com/u/40025815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darkwizard242", "html_url": "https://github.com/darkwizard242", "followers_url": "https://api.github.com/users/darkwizard242/followers", "following_url": "https://api.github.com/users/darkwizard242/following{/other_user}", "gists_url": "https://api.github.com/users/darkwizard242/gists{/gist_id}", "starred_url": "https://api.github.com/users/darkwizard242/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darkwizard242/subscriptions", "organizations_url": "https://api.github.com/users/darkwizard242/orgs", "repos_url": "https://api.github.com/users/darkwizard242/repos", "events_url": "https://api.github.com/users/darkwizard242/events{/privacy}", "received_events_url": "https://api.github.com/users/darkwizard242/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-10-17T10:05:27Z", "updated_at": "2020-12-05T21:43:58Z", "closed_at": "2020-12-02T22:01:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.10\r\n  config file = None\r\n  configured module search path = ['/Users/amuhammad/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.6 (default, Oct  8 2020, 14:06:32) [Clang 12.0.0 (clang-1200.0.32.2)]\r\n\r\nmolecule 3.1.2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nExecution of molecule test to run based on the default scenario for molecule in the ansible role.\r\n\r\n# Actual Behaviour\r\n\r\nThe default scenario sequence is as the following in molecule.yml:\r\n\r\n```yaml\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\n  options:\r\n    memory: 1024\r\n    cpus: 1\r\nlint: |\r\n    yamllint .\r\n    ansible-lint\r\n    flake8\r\nplatforms:\r\n  - name: ${BOX:-ubuntu1804}\r\n    box: \"darkwizard242/ansible${BOX:-ubuntu1804}\"\r\nprovisioner:\r\n  name: ansible\r\n  log: true\r\nscenario:\r\n  name: default\r\n  test_sequence:\r\n    - lint\r\n    - destroy\r\n    - syntax\r\n    - create\r\n    - converge\r\n    - idempotence\r\n    - verify\r\n    - destroy\r\nverifier:\r\n  name: testinfra\r\n  options:\r\n    verbose: true\r\n\r\n```\r\n\r\nRight after lint sequence, `molecule test` tries a destroy in that an instance already exists. However, it has been failing due to the following error:\r\n\r\n```shell\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /usr/local/lib/python3.8/site-packages/molecule_vagrant/playbooks/destroy.yml\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /usr/local/lib/python3.8/site-packages/molecule_vagrant/playbooks/destroy.yml:8\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: amuhammad\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~amuhammad && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/amuhammad/.ansible/tmp `\"&& mkdir /Users/amuhammad/.ansible/tmp/ansible-tmp-1602928552.746901-45666-137287224933441 && echo ansible-tmp-1602928552.746901-45666-137287224933441=\"` echo /Users/amuhammad/.ansible/tmp/ansible-tmp-1602928552.746901-45666-137287224933441 `\" ) && sleep 0'\r\n    Using module file /usr/local/lib/python3.8/site-packages/molecule_vagrant/modules/vagrant.py\r\n    <127.0.0.1> PUT /Users/amuhammad/.ansible/tmp/ansible-local-45662thzh_ne7/tmp939vjszx TO /Users/amuhammad/.ansible/tmp/ansible-tmp-1602928552.746901-45666-137287224933441/AnsiballZ_vagrant.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/amuhammad/.ansible/tmp/ansible-tmp-1602928552.746901-45666-137287224933441/ /Users/amuhammad/.ansible/tmp/ansible-tmp-1602928552.746901-45666-137287224933441/AnsiballZ_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python@3.8/bin/python3.8 /Users/amuhammad/.ansible/tmp/ansible-tmp-1602928552.746901-45666-137287224933441/AnsiballZ_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/amuhammad/.ansible/tmp/ansible-tmp-1602928552.746901-45666-137287224933441/ > /dev/null 2>&1 && sleep 0'\r\n    failed: [localhost] (item=ubuntu1804) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"item\": {\r\n            \"box\": \"darkwizard242/ansibleubuntu1804\",\r\n            \"name\": \"ubuntu1804\"\r\n        },\r\n        \"module_stderr\": \"\",\r\n        \"module_stdout\": \"Retrying to acquire lock on /Users/amuhammad/.cache/molecule/ansible-role-node_exporter/default, waiting for 30 seconds\\nRetrying to acquire lock on /Users/amuhammad/.cache/molecule/ansible-role-node_exporter/default, waiting for 60 seconds\\nRetrying to acquire lock on /Users/amuhammad/.cache/molecule/ansible-role-node_exporter/default, waiting for 90 seconds\\nRetrying to acquire lock on /Users/amuhammad/.cache/molecule/ansible-role-node_exporter/default, waiting for 120 seconds\\nTimedout trying to acquire lock on /Users/amuhammad/.cache/molecule/ansible-role-node_exporter/default\\n\",\r\n        \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n        \"rc\": 3\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nERROR:\r\n```\r\n\r\nI am not sure why it is failing to acquire a lock file and I was able to confirm that a **.lock** file exists in **/Users/amuhammad/.cache/molecule/ansible-role-node_exporter/default** :\r\n\r\n```shell\r\n$ find /Users/amuhammad/.cache/molecule/ansible-role-node_exporter/default -type f -name *lock*\r\n/Users/amuhammad/.cache/molecule/ansible-role-node_exporter/default/.lock\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2895/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2895/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2891", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2891/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2891/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2891/events", "html_url": "https://github.com/ansible-community/molecule/issues/2891", "id": 723046043, "node_id": "MDU6SXNzdWU3MjMwNDYwNDM=", "number": 2891, "title": "v3.1.1 regression: {'driver': [{'name': ['unallowed value docker']}]}", "user": {"login": "micheelengronne", "id": 12596606, "node_id": "MDQ6VXNlcjEyNTk2NjA2", "avatar_url": "https://avatars.githubusercontent.com/u/12596606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micheelengronne", "html_url": "https://github.com/micheelengronne", "followers_url": "https://api.github.com/users/micheelengronne/followers", "following_url": "https://api.github.com/users/micheelengronne/following{/other_user}", "gists_url": "https://api.github.com/users/micheelengronne/gists{/gist_id}", "starred_url": "https://api.github.com/users/micheelengronne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micheelengronne/subscriptions", "organizations_url": "https://api.github.com/users/micheelengronne/orgs", "repos_url": "https://api.github.com/users/micheelengronne/repos", "events_url": "https://api.github.com/users/micheelengronne/events{/privacy}", "received_events_url": "https://api.github.com/users/micheelengronne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133126, "node_id": "MDU6TGFiZWwyODgxMzMxMjY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/wontfix", "name": "wontfix", "color": "ffdddd", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2020-10-16T09:08:38Z", "updated_at": "2021-01-08T12:59:58Z", "closed_at": "2020-10-18T08:21:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.1 && molecule 3.1.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nmolecule should pre-validate.\r\n\r\n# Actual Behaviour\r\n\r\nmolecule v3.1.1 fails with this error:\r\n```\r\nERROR: Failed to pre-validate.\r\n{'driver': [{'name': ['unallowed value docker']}]}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2891/reactions", "total_count": 19, "+1": 19, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2891/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2888", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2888/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2888/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2888/events", "html_url": "https://github.com/ansible-community/molecule/pull/2888", "id": 722973601, "node_id": "MDExOlB1bGxSZXF1ZXN0NTA0NjQzOTE0", "number": 2888, "title": "Relaxed test extra dependencies", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-16T07:16:24Z", "updated_at": "2020-10-16T07:40:48Z", "closed_at": "2020-10-16T07:40:47Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2888", "html_url": "https://github.com/ansible-community/molecule/pull/2888", "diff_url": "https://github.com/ansible-community/molecule/pull/2888.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2888.patch", "merged_at": "2020-10-16T07:40:47Z"}, "body": "Avoid potential dependency conflicts when using test extras. One such example was that pytest-xdist had newer versions, while it was still compatible.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2888/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2888/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2887", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2887/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2887/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2887/events", "html_url": "https://github.com/ansible-community/molecule/issues/2887", "id": 722968580, "node_id": "MDU6SXNzdWU3MjI5Njg1ODA=", "number": 2887, "title": "Contributing documentation - a slight problem with two URLs", "user": {"login": "fourstepper", "id": 49439044, "node_id": "MDQ6VXNlcjQ5NDM5MDQ0", "avatar_url": "https://avatars.githubusercontent.com/u/49439044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fourstepper", "html_url": "https://github.com/fourstepper", "followers_url": "https://api.github.com/users/fourstepper/followers", "following_url": "https://api.github.com/users/fourstepper/following{/other_user}", "gists_url": "https://api.github.com/users/fourstepper/gists{/gist_id}", "starred_url": "https://api.github.com/users/fourstepper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fourstepper/subscriptions", "organizations_url": "https://api.github.com/users/fourstepper/orgs", "repos_url": "https://api.github.com/users/fourstepper/repos", "events_url": "https://api.github.com/users/fourstepper/events{/privacy}", "received_events_url": "https://api.github.com/users/fourstepper/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-10-16T07:08:15Z", "updated_at": "2020-10-16T08:03:39Z", "closed_at": "2020-10-16T08:03:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report for the Documentation\r\n\r\nDocs URL: https://molecule.readthedocs.io/en/latest/contributing.html#guidelines\r\n\r\n3rd bullet point, URLs link to a different page than the one on which we are, and those are broken, f.e. https://molecule.readthedocs.io/en/latest/testing.html#linting\r\n\r\nEverything else on there seems fine \r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2887/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2887/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2879", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2879/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2879/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2879/events", "html_url": "https://github.com/ansible-community/molecule/pull/2879", "id": 719513991, "node_id": "MDExOlB1bGxSZXF1ZXN0NTAxNjg4NDUy", "number": 2879, "title": "Allow external drivers to have their own embedded playbooks", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-12T16:39:41Z", "updated_at": "2020-10-12T18:17:11Z", "closed_at": "2020-10-12T18:17:10Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2879", "html_url": "https://github.com/ansible-community/molecule/pull/2879", "diff_url": "https://github.com/ansible-community/molecule/pull/2879.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2879.patch", "merged_at": "2020-10-12T18:17:10Z"}, "body": "Fixes bug where external driver playbooks were not looked for.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2879/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2875", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2875/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2875/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2875/events", "html_url": "https://github.com/ansible-community/molecule/pull/2875", "id": 719218684, "node_id": "MDExOlB1bGxSZXF1ZXN0NTAxNDQ0MDk4", "number": 2875, "title": "Assured dependency installed collections are isolated", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-12T09:21:30Z", "updated_at": "2020-10-12T10:18:18Z", "closed_at": "2020-10-12T10:18:17Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2875", "html_url": "https://github.com/ansible-community/molecule/pull/2875", "diff_url": "https://github.com/ansible-community/molecule/pull/2875.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2875.patch", "merged_at": "2020-10-12T10:18:17Z"}, "body": "Assures that collections installed by dependency command do not alter default ansible locations. This improves test isolation from user environment.\r\n\r\nDetails: https://github.com/ansible-community/molecule/wiki/Ephemeral-directory", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2875/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2875/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2872", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2872/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2872/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2872/events", "html_url": "https://github.com/ansible-community/molecule/issues/2872", "id": 718320763, "node_id": "MDU6SXNzdWU3MTgzMjA3NjM=", "number": 2872, "title": "Removal of molecule filters", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-10-09T17:46:49Z", "updated_at": "2020-10-12T15:48:12Z", "closed_at": "2020-10-10T09:10:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "[Molecule ansible filters](https://github.com/ansible-community/molecule/blob/master/molecule/provisioner/ansible/plugins/filter/molecule_core.py) are moved are **now moved to a standalone collection** https://galaxy.ansible.com/community/molecule and we encourage plugin authors and test writers to either one of:\r\n\r\n* Replace `molecule_to_yaml` and `molecule_from_yaml` with their native ansible counterparts.\r\n* Use modules from community.molecule collection by using FQCN,  like `community.molecule.from_yaml`. Remember to add `community.molecule` collection to your `requirements.yaml` and to install it.\r\n\r\nAs these filters were also present in user managed playbooks like `create.yml` and `destroy.yml`, we aim to make transition easier.\r\n\r\nBecause this is breaking change, it will only be included in `3.1.0`.\r\n\r\n## Reasoning\r\n\r\nThe main reason behind this move is to finalize decoupling of molecule tool from ansible internals and removing the need to install Ansible python packages in the same python environment as molecule.\r\n\r\nIf done right, at the end molecule should only be a command line that calls ansible and that the testing playbooks could be run even without molecule itself.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2872/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2872/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2868", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2868/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2868/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2868/events", "html_url": "https://github.com/ansible-community/molecule/pull/2868", "id": 717320953, "node_id": "MDExOlB1bGxSZXF1ZXN0NDk5OTAyOTYy", "number": 2868, "title": "export DEBIAN_FRONTEND when building image", "user": {"login": "hluaces", "id": 3204332, "node_id": "MDQ6VXNlcjMyMDQzMzI=", "avatar_url": "https://avatars.githubusercontent.com/u/3204332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hluaces", "html_url": "https://github.com/hluaces", "followers_url": "https://api.github.com/users/hluaces/followers", "following_url": "https://api.github.com/users/hluaces/following{/other_user}", "gists_url": "https://api.github.com/users/hluaces/gists{/gist_id}", "starred_url": "https://api.github.com/users/hluaces/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hluaces/subscriptions", "organizations_url": "https://api.github.com/users/hluaces/orgs", "repos_url": "https://api.github.com/users/hluaces/repos", "events_url": "https://api.github.com/users/hluaces/events{/privacy}", "received_events_url": "https://api.github.com/users/hluaces/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/19", "html_url": "https://github.com/ansible-community/molecule/milestone/19", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/19/labels", "id": 5072617, "node_id": "MDk6TWlsZXN0b25lNTA3MjYxNw==", "number": 19, "title": "3.1.0", "description": "- Drop current deprecations\r\n- Remove podman/docker from core\r\n- Remove testinfra from core\r\n\r\nWhile we remove podman and docker from core, we 3.1 should not be released before the external plugins are ready, so from the user point of view upgrading from 3.0 to 3.1 should be transparent, regardless if they use docker and podman drivers or not.\r\n", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 16, "state": "closed", "created_at": "2020-02-04T20:25:49Z", "updated_at": "2020-11-08T15:10:43Z", "due_on": "2020-09-20T07:00:00Z", "closed_at": "2020-10-27T15:25:40Z"}, "comments": 0, "created_at": "2020-10-08T12:57:22Z", "updated_at": "2020-10-10T09:12:27Z", "closed_at": "2020-10-10T09:12:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2868", "html_url": "https://github.com/ansible-community/molecule/pull/2868", "diff_url": "https://github.com/ansible-community/molecule/pull/2868.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2868.patch", "merged_at": "2020-10-10T09:12:26Z"}, "body": "#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\nFixes #2867 ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2868/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2868/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2867", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2867/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2867/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2867/events", "html_url": "https://github.com/ansible-community/molecule/issues/2867", "id": 717318502, "node_id": "MDU6SXNzdWU3MTczMTg1MDI=", "number": 2867, "title": "Ubuntu 20 systemd containers get stuck with pre_built_image=false", "user": {"login": "hluaces", "id": 3204332, "node_id": "MDQ6VXNlcjMyMDQzMzI=", "avatar_url": "https://avatars.githubusercontent.com/u/3204332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hluaces", "html_url": "https://github.com/hluaces", "followers_url": "https://api.github.com/users/hluaces/followers", "following_url": "https://api.github.com/users/hluaces/following{/other_user}", "gists_url": "https://api.github.com/users/hluaces/gists{/gist_id}", "starred_url": "https://api.github.com/users/hluaces/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hluaces/subscriptions", "organizations_url": "https://api.github.com/users/hluaces/orgs", "repos_url": "https://api.github.com/users/hluaces/repos", "events_url": "https://api.github.com/users/hluaces/events{/privacy}", "received_events_url": "https://api.github.com/users/hluaces/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-08T12:53:57Z", "updated_at": "2020-10-10T09:12:26Z", "closed_at": "2020-10-10T09:12:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.1\r\n  config file = None\r\n  configured module search path = ['/home/hector/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/hector/.local/lib/python3.8/site-packages/ansible\r\n  executable location = /home/hector/.local/bin/ansible\r\n  python version = 3.8.5 (default, Jul 28 2020, 12:59:40) [GCC 9.3.0]\r\nmolecule 3.0.8\r\n   ansible==2.10.1 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nN/A\r\n\r\n# Desired Behavior\r\n\r\nUbuntu 20.4 Docker containers built with `pre_built_image=false` and systemd should not hang molecule while the image is being built.\r\n\r\n# Actual Behaviour\r\n\r\nThe image creation process gets stuck and doesn't do anything because of tzdata configuration needing input for the user, exactly as described on https://github.com/ansible-community/molecule/issues/2704 \r\n\r\nThis happens on Ubuntu 20 systemd containers even after the fixes on that issue. I assume that the problem is that the `DEBIAN_FRONTEND` variable is not really exported and thus might fail to propagate to some processes of the systemd installation (just speculating here). Using `env` on the `molecule.yml` to redefine that same variable also works, but it would be nice to have it working without adding more boilerplate.\r\n\r\nStdout:\r\n\r\n```yaml\r\nTASK [Build an Ansible compatible image (new)] *********************************\r\ntask path: /home/hector/.local/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:66\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: hector\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~hector && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/hector/.ansible/tmp `\"&& mkdir \"` echo /home/hector/.ansible/tmp/ansible-tmp-1602160398.9637454-287116-117787480812890 `\" && echo ansible-tmp-1602160398.9637454-287116-117787480812890=\"` echo /home/hector/.ansible/tmp/ansible-tmp-1602160398.9637454-287116-117787480812890 `\" ) && sleep 0'\r\nredirecting (type: modules) ansible.builtin.docker_image to community.general.docker_image\r\nUsing module file /home/hector/.local/lib/python3.8/site-packages/ansible_collections/community/general/plugins/modules/docker_image.py\r\n<127.0.0.1> PUT /home/hector/.ansible/tmp/ansible-local-28697120otzuuz/tmpyzk_9tzk TO /home/hector/.ansible/tmp/ansible-tmp-1602160398.9637454-287116-117787480812890/AnsiballZ_docker_image.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/hector/.ansible/tmp/ansible-tmp-1602160398.9637454-287116-117787480812890/ /home/hector/.ansible/tmp/ansible-tmp-1602160398.9637454-287116-117787480812890/AnsiballZ_docker_image.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3 /home/hector/.ansible/tmp/ansible-tmp-1602160398.9637454-287116-117787480812890/AnsiballZ_docker_image.py && sleep 0'\r\n\r\n[...]\r\n\r\n(stuck here until cancelled)\r\n```\r\n\r\nI've created a mcve in [this repo](https://github.com/hluaces/molecule_bug_ubuntu20). I simply used `molecule role init` to create a new role, modified `molecule.yml` to add the instance and downloaded the [Dockerfile.j2 for molecule 3.0.8](https://github.com/ansible-community/molecule/blob/3.0.8/molecule/data/Dockerfile.j2).\r\n\r\n- Clone and run `molecule converge` to reproduce the error.\r\n- Clone and run `molecule converge -s solution_1` to see the process work properly with the proposed fix.\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2867/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2862", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2862/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2862/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2862/events", "html_url": "https://github.com/ansible-community/molecule/issues/2862", "id": 715537807, "node_id": "MDU6SXNzdWU3MTU1Mzc4MDc=", "number": 2862, "title": "ansible_user is undefined", "user": {"login": "nre-ableton", "id": 16208985, "node_id": "MDQ6VXNlcjE2MjA4OTg1", "avatar_url": "https://avatars.githubusercontent.com/u/16208985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nre-ableton", "html_url": "https://github.com/nre-ableton", "followers_url": "https://api.github.com/users/nre-ableton/followers", "following_url": "https://api.github.com/users/nre-ableton/following{/other_user}", "gists_url": "https://api.github.com/users/nre-ableton/gists{/gist_id}", "starred_url": "https://api.github.com/users/nre-ableton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nre-ableton/subscriptions", "organizations_url": "https://api.github.com/users/nre-ableton/orgs", "repos_url": "https://api.github.com/users/nre-ableton/repos", "events_url": "https://api.github.com/users/nre-ableton/events{/privacy}", "received_events_url": "https://api.github.com/users/nre-ableton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-10-06T10:17:56Z", "updated_at": "2020-10-08T15:47:17Z", "closed_at": "2020-10-08T15:47:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have a basic task which has a condition that examines `ansible_user`. When running this task from molecule, I get an error:\r\n\r\n```\r\nfatal: [instance]: FAILED! => {\"msg\": \"The conditional check 'jenkins_user != ansible_user' failed. The error was: error while evaluating conditional (jenkins_user != ansible_user): 'ansible_user' is undefined\\n\\nThe error appears to be in '/home/nre/Code/project/tasks/configure-user.yml': line 7, column 3, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n\\n- name: Create Jenkins user\\n  ^ here\\n\"}\r\n```\r\n\r\nWhen I run the playbook from Ansible itself, it works fine. Am I missing something super obvious here?\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.11\r\n  config file = None\r\n  configured module search path = ['/home/nre/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/nre/Code/caches/venv/lib/python3.8/site-packages/ansible\r\n  executable location = /home/nre/Code/caches/venv/bin/ansible\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\nmolecule 3.0.6```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2862/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2862/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2859", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2859/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2859/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2859/events", "html_url": "https://github.com/ansible-community/molecule/issues/2859", "id": 715023944, "node_id": "MDU6SXNzdWU3MTUwMjM5NDQ=", "number": 2859, "title": "Missing ansible_ssh_common_args form ansible_inventory.yml using managed delegated driver", "user": {"login": "H0neyBadger", "id": 7838259, "node_id": "MDQ6VXNlcjc4MzgyNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/7838259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/H0neyBadger", "html_url": "https://github.com/H0neyBadger", "followers_url": "https://api.github.com/users/H0neyBadger/followers", "following_url": "https://api.github.com/users/H0neyBadger/following{/other_user}", "gists_url": "https://api.github.com/users/H0neyBadger/gists{/gist_id}", "starred_url": "https://api.github.com/users/H0neyBadger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/H0neyBadger/subscriptions", "organizations_url": "https://api.github.com/users/H0neyBadger/orgs", "repos_url": "https://api.github.com/users/H0neyBadger/repos", "events_url": "https://api.github.com/users/H0neyBadger/events{/privacy}", "received_events_url": "https://api.github.com/users/H0neyBadger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-05T17:23:23Z", "updated_at": "2021-05-19T14:44:20Z", "closed_at": "2021-05-19T14:44:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.10.1\r\n  config file = None\r\n  configured module search path = ['/home/redacted/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = redacted\r\n  executable location = redacted\r\n  python version = 3.6.8 (default, Apr 16 2020, 01:36:27) [GCC 8.3.1 20191121 (Red Hat 8.3.1-5)]\r\nmolecule 3.0.8\r\n   ansible==2.10.1 python==3.6\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\noverride ssh_config in with delegated managed configuration\r\n~/.cache/molecule/project/default/inventory/ansible_inventory.yml\r\n\r\n# Actual Behaviour\r\n\r\nI tried many combination of options, but I'm still not able to override the default ssh client behavior.\r\n```yml\r\ndriver:\r\n  name: delegated\r\n  options:\r\n    managed: true\r\n    ansible_connection_options:\r\n      ansible_ssh_common_args: '-F /tmp/ssh_config'\r\n``` \r\nwhen managed: false -> the create.yml is never run\r\nwhen managed: true -> the ansible_ssh_common_args is ignored \r\n\r\nafter long hours of troubleshoot. the `_get_instance_config` does not seems to detect my instance_config. My instance_config.yml produced by create.yml earlier looks correct however. \r\nhttps://github.com/ansible-community/molecule/issues/1292#issuecomment-388888438\r\n\r\nI created my molecule template using the following command\r\n```\r\nmolecule init scenario --driver-name=delegated --verifier-name=ansible\r\n```\r\n\r\nI do not know what am I supposed to do. My initial problem is that the `verify` command fail because of error `Name or service not known` (that's normal since the `platform name` is not known in our infra).\r\nCreating an ssh config is error prone, the ansible_host do the job usually. but I m running out of idea.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2859/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2859/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2858", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2858/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2858/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2858/events", "html_url": "https://github.com/ansible-community/molecule/pull/2858", "id": 714136209, "node_id": "MDExOlB1bGxSZXF1ZXN0NDk3MzEwMTU3", "number": 2858, "title": "Documentation: fixing --parallel flag position and typos", "user": {"login": "Arnoways", "id": 34322845, "node_id": "MDQ6VXNlcjM0MzIyODQ1", "avatar_url": "https://avatars.githubusercontent.com/u/34322845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arnoways", "html_url": "https://github.com/Arnoways", "followers_url": "https://api.github.com/users/Arnoways/followers", "following_url": "https://api.github.com/users/Arnoways/following{/other_user}", "gists_url": "https://api.github.com/users/Arnoways/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arnoways/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arnoways/subscriptions", "organizations_url": "https://api.github.com/users/Arnoways/orgs", "repos_url": "https://api.github.com/users/Arnoways/repos", "events_url": "https://api.github.com/users/Arnoways/events{/privacy}", "received_events_url": "https://api.github.com/users/Arnoways/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-10-03T17:24:51Z", "updated_at": "2020-10-18T11:40:54Z", "closed_at": "2020-10-18T11:36:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2858", "html_url": "https://github.com/ansible-community/molecule/pull/2858", "diff_url": "https://github.com/ansible-community/molecule/pull/2858.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2858.patch", "merged_at": "2020-10-18T11:36:29Z"}, "body": "Hello,\r\n\r\nI recently had the need to run Molecule tests in parallel mode using another tool (https://github.com/ovh/venom to be specific), and found some errors/typos in the docs. \r\nI also added the line about running the molecule command with the --parallel flag to be more explicit on how to avoid concurrency issues (mine was over apt lock :smile: ).\r\n\r\n#### PR Type\r\n- Docs Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2858/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2853", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2853/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2853/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2853/events", "html_url": "https://github.com/ansible-community/molecule/issues/2853", "id": 712896288, "node_id": "MDU6SXNzdWU3MTI4OTYyODg=", "number": 2853, "title": "Odd behavior with Ansible 2.10 in a tox-created virtualenv", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-10-01T14:26:18Z", "updated_at": "2020-10-14T14:08:53Z", "closed_at": "2020-10-12T11:13:54Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.10.1\r\n  config file = /home/greg/.ansible.cfg\r\n  configured module search path = ['/home/greg/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/greg/src/ansible_collections/devroles/min_reproducer/.tox/py38/lib/python3.8/site-packages/ansible\r\n  executable location = /home/greg/src/ansible_collections/devroles/min_reproducer/.tox/py38/bin/ansible\r\n  python version = 3.8.5 (default, Aug 12 2020, 00:00:00) [GCC 10.2.1 20200723 (Red Hat 10.2.1-1)]\r\nmolecule 3.0.8\r\n   ansible==2.10.1 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- tox\r\n\r\nAnsible installation method (one of):\r\n\r\n- tox\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nRunning molecule with Ansible 2.10 from a tox-crafted virtualenv works as expected\r\n\r\n# Actual Behaviour\r\n\r\nWhen executing `molecule test` from inside of a tox run, with Ansible >= 2.10, odd behavior with molecule's interaction with pkg\\_resources leads to weird behavior. Details can be found at https://github.com/greg-hellings/min_reproducer, but the crux of the result is that I get this warning message from Ansible, resulting in failed Molecule execution:\r\n\r\n```\r\n[WARNING]: Skipping plugin (/home/greg/src/ansible_collections/devroles/min_rep\r\nroducer/.tox/py38/lib/python3.8/site-\r\npackages/molecule/provisioner/ansible/plugins/filter/molecule_core.py) as it\r\nseems to be invalid: The 'ansible_base' distribution was not found and is\r\nrequired by the application\r\n```\r\n\r\nActivating the tox-created virtualenv and running molecule manually results in the same warning/error.\r\n\r\nRunning from a manually created virtualenv does not result in the error, and molecule behaves properly. But, for the life of me, I cannot figure out if there is something in my tox.ini, if there's something in Molecule, if it's something related to Ansible (runs fine if I restrict ansible<2.10 in tox.ini), or if it is something odd with how tox creates a virtualenv. I'm happy to shift the reporting further upstream if I can figure out a minimum reproducer case for another project.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2853/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2852", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2852/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2852/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2852/events", "html_url": "https://github.com/ansible-community/molecule/pull/2852", "id": 712074842, "node_id": "MDExOlB1bGxSZXF1ZXN0NDk1NjE2NjYw", "number": 2852, "title": "Fixed build-containers", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-09-30T16:00:19Z", "updated_at": "2020-09-30T16:10:14Z", "closed_at": "2020-09-30T16:10:14Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2852", "html_url": "https://github.com/ansible-community/molecule/pull/2852", "diff_url": "https://github.com/ansible-community/molecule/pull/2852.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2852.patch", "merged_at": "2020-09-30T16:10:14Z"}, "body": "Since Ansible 2.10 was released build-containers job was failing\r\ndue to inability to upgrade Ansible. Now we avoid installing it from\r\napk and we will avoid any conflicts.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2852/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2849", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2849/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2849/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2849/events", "html_url": "https://github.com/ansible-community/molecule/pull/2849", "id": 710569223, "node_id": "MDExOlB1bGxSZXF1ZXN0NDk0Mzk0NjM5", "number": 2849, "title": "Fixed CustomLogger super call", "user": {"login": "mattp-", "id": 44374, "node_id": "MDQ6VXNlcjQ0Mzc0", "avatar_url": "https://avatars.githubusercontent.com/u/44374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattp-", "html_url": "https://github.com/mattp-", "followers_url": "https://api.github.com/users/mattp-/followers", "following_url": "https://api.github.com/users/mattp-/following{/other_user}", "gists_url": "https://api.github.com/users/mattp-/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattp-/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattp-/subscriptions", "organizations_url": "https://api.github.com/users/mattp-/orgs", "repos_url": "https://api.github.com/users/mattp-/repos", "events_url": "https://api.github.com/users/mattp-/events{/privacy}", "received_events_url": "https://api.github.com/users/mattp-/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-09-28T20:50:53Z", "updated_at": "2020-10-01T07:35:41Z", "closed_at": "2020-10-01T07:35:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2849", "html_url": "https://github.com/ansible-community/molecule/pull/2849", "diff_url": "https://github.com/ansible-community/molecule/pull/2849.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2849.patch", "merged_at": "2020-10-01T07:35:41Z"}, "body": "In cases where another logger uses getLoggerClass to subclass and then\r\nsetLoggerClass's itself,  molecules logger passes the wrong value to\r\nsuper() causing a recursionError.\r\n\r\nPlease include details of what it is, how to use it, how it's been tested\r\n\r\n#### PR Type\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2849/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2849/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2846", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2846/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2846/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2846/events", "html_url": "https://github.com/ansible-community/molecule/pull/2846", "id": 708750539, "node_id": "MDExOlB1bGxSZXF1ZXN0NDkyOTE4Mjc5", "number": 2846, "title": "Sort tests files for testinfra by filename", "user": {"login": "atmaniak", "id": 800433, "node_id": "MDQ6VXNlcjgwMDQzMw==", "avatar_url": "https://avatars.githubusercontent.com/u/800433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atmaniak", "html_url": "https://github.com/atmaniak", "followers_url": "https://api.github.com/users/atmaniak/followers", "following_url": "https://api.github.com/users/atmaniak/following{/other_user}", "gists_url": "https://api.github.com/users/atmaniak/gists{/gist_id}", "starred_url": "https://api.github.com/users/atmaniak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atmaniak/subscriptions", "organizations_url": "https://api.github.com/users/atmaniak/orgs", "repos_url": "https://api.github.com/users/atmaniak/repos", "events_url": "https://api.github.com/users/atmaniak/events{/privacy}", "received_events_url": "https://api.github.com/users/atmaniak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-25T08:26:50Z", "updated_at": "2020-09-30T16:14:45Z", "closed_at": "2020-09-30T16:14:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2846", "html_url": "https://github.com/ansible-community/molecule/pull/2846", "diff_url": "https://github.com/ansible-community/molecule/pull/2846.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2846.patch", "merged_at": "2020-09-30T16:14:45Z"}, "body": "With sorted, tests files for testinfra are now executed in the same order, since os.walk return a list in an arbitrary maner.\r\n\r\n- Bugfix #2845\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2846/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2846/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2833", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2833/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2833/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2833/events", "html_url": "https://github.com/ansible-community/molecule/issues/2833", "id": 704329116, "node_id": "MDU6SXNzdWU3MDQzMjkxMTY=", "number": 2833, "title": "Shell variable expansion", "user": {"login": "zyphermonkey", "id": 22804652, "node_id": "MDQ6VXNlcjIyODA0NjUy", "avatar_url": "https://avatars.githubusercontent.com/u/22804652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyphermonkey", "html_url": "https://github.com/zyphermonkey", "followers_url": "https://api.github.com/users/zyphermonkey/followers", "following_url": "https://api.github.com/users/zyphermonkey/following{/other_user}", "gists_url": "https://api.github.com/users/zyphermonkey/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyphermonkey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyphermonkey/subscriptions", "organizations_url": "https://api.github.com/users/zyphermonkey/orgs", "repos_url": "https://api.github.com/users/zyphermonkey/repos", "events_url": "https://api.github.com/users/zyphermonkey/events{/privacy}", "received_events_url": "https://api.github.com/users/zyphermonkey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-09-18T12:09:58Z", "updated_at": "2022-10-25T15:07:19Z", "closed_at": "2022-10-25T15:07:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.11\r\n  config file = /home/vagrant/ansible.cfg\r\n  configured module search path = ['/home/vagrant/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/vagrant/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/vagrant/.local/bin/ansible\r\n  python version = 3.6.9 (default, Jul 17 2020, 12:50:27) [GCC 8.4.0]\r\nmolecule 3.0.6\r\n   ansible==2.9.11 python==3.6\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n```sh\r\n|\r\n  set -e\r\n  yamllint -f colored .\r\n  ansible-lint --force-color\r\n```\r\n\r\n# Desired Behavior\r\n\r\nUsing shell expansion *+* fails inside of molecule.yml instead of correctly expanding/replacing\r\n\r\nTrying to only include formatting characters if a variable is defined.  \r\n```yaml\r\nplatforms:\r\n  - name: instance${CI_JOB_ID:+-}${CI_JOB_ID}\r\n```\r\nAccording to the [docs](https://molecule.readthedocs.io/en/latest/configuration.html#variable-substitution) this should produce an instance name of either `instance` or `instance-<CI_JOB_ID>`.\r\n\r\n[Further shell expansion information](https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html):\r\n\r\n> ${parameter:+word}\r\n> parameter is null or unset, nothing is substituted, otherwise the expansion of word is substituted.\r\n\r\n\r\n# Actual Behaviour\r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](https://stackoverflow.com/help/mcve) with\r\noutput of running `molecule --debug`.\r\n\r\n```yaml\r\nERROR: parsing config file '/ansible/roles/ca-sso-policyserver/molecule/default/molecule.yml'.\r\n\r\nInvalid placeholder in string: line 11, col 19\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint: |\r\n  set -e\r\n  yamllint -f colored .\r\n  ansible-lint --force-color\r\nplatforms:\r\n  - name: instance${CI_JOB_ID:+-}${CI_JOB_ID}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2833/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2827", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2827/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2827/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2827/events", "html_url": "https://github.com/ansible-community/molecule/issues/2827", "id": 700452448, "node_id": "MDU6SXNzdWU3MDA0NTI0NDg=", "number": 2827, "title": "greet", "user": {"login": "corserp", "id": 29212935, "node_id": "MDQ6VXNlcjI5MjEyOTM1", "avatar_url": "https://avatars.githubusercontent.com/u/29212935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corserp", "html_url": "https://github.com/corserp", "followers_url": "https://api.github.com/users/corserp/followers", "following_url": "https://api.github.com/users/corserp/following{/other_user}", "gists_url": "https://api.github.com/users/corserp/gists{/gist_id}", "starred_url": "https://api.github.com/users/corserp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corserp/subscriptions", "organizations_url": "https://api.github.com/users/corserp/orgs", "repos_url": "https://api.github.com/users/corserp/repos", "events_url": "https://api.github.com/users/corserp/events{/privacy}", "received_events_url": "https://api.github.com/users/corserp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-09-13T01:55:16Z", "updated_at": "2020-09-14T07:38:49Z", "closed_at": "2020-09-14T07:38:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n- pip\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nPlease give some details of the feature being requested or what\r\nshould happen if providing a bug report.\r\n\r\n# Actual Behaviour\r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](https://stackoverflow.com/help/mcve) with\r\noutput of running `molecule --debug`.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2827/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2823", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2823/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2823/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2823/events", "html_url": "https://github.com/ansible-community/molecule/issues/2823", "id": 699138753, "node_id": "MDU6SXNzdWU2OTkxMzg3NTM=", "number": 2823, "title": "Docs contains template option for init role that actually does not exists", "user": {"login": "freeseacher", "id": 289277, "node_id": "MDQ6VXNlcjI4OTI3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/289277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freeseacher", "html_url": "https://github.com/freeseacher", "followers_url": "https://api.github.com/users/freeseacher/followers", "following_url": "https://api.github.com/users/freeseacher/following{/other_user}", "gists_url": "https://api.github.com/users/freeseacher/gists{/gist_id}", "starred_url": "https://api.github.com/users/freeseacher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freeseacher/subscriptions", "organizations_url": "https://api.github.com/users/freeseacher/orgs", "repos_url": "https://api.github.com/users/freeseacher/repos", "events_url": "https://api.github.com/users/freeseacher/events{/privacy}", "received_events_url": "https://api.github.com/users/freeseacher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-09-11T10:25:39Z", "updated_at": "2020-09-14T07:41:59Z", "closed_at": "2020-09-14T07:41:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "There are option documented here https://molecule.readthedocs.io/en/latest/usage.html#cmdoption-molecule-init-role-foo-template-path-arg-molecule\r\n```\r\n% molecule --version            \r\nmolecule 3.0.8\r\n   ansible==2.9.11 python==3.8\r\n\r\n```\r\nbut missed in command line\r\n```\r\n% molecule init role --template 111\r\nUsage: molecule init role [OPTIONS] ROLE_NAME\r\nTry 'molecule init role --help' for help.\r\n\r\nError: no such option: --template\r\nzsh: exit 2     molecule init role --template 111\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2823/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2823/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2822", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2822/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2822/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2822/events", "html_url": "https://github.com/ansible-community/molecule/issues/2822", "id": 698655176, "node_id": "MDU6SXNzdWU2OTg2NTUxNzY=", "number": 2822, "title": "Show which scenario fails validation", "user": {"login": "zolvaring", "id": 17836714, "node_id": "MDQ6VXNlcjE3ODM2NzE0", "avatar_url": "https://avatars.githubusercontent.com/u/17836714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zolvaring", "html_url": "https://github.com/zolvaring", "followers_url": "https://api.github.com/users/zolvaring/followers", "following_url": "https://api.github.com/users/zolvaring/following{/other_user}", "gists_url": "https://api.github.com/users/zolvaring/gists{/gist_id}", "starred_url": "https://api.github.com/users/zolvaring/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zolvaring/subscriptions", "organizations_url": "https://api.github.com/users/zolvaring/orgs", "repos_url": "https://api.github.com/users/zolvaring/repos", "events_url": "https://api.github.com/users/zolvaring/events{/privacy}", "received_events_url": "https://api.github.com/users/zolvaring/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-09-11T00:30:15Z", "updated_at": "2020-09-14T16:39:23Z", "closed_at": "2020-09-14T16:39:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmolecule 3.0.8\r\n   ansible==2.9.13 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen any one Molecule scenario fails to pre-validate some indication should be given as to which scenario is causing the error. \r\n\r\n# Actual Behaviour\r\n\r\nMolecule fails with a generic message that is not helpful if you have many scenarios. In my case an env variable was not set, and we had to use binary exclusion to zero in on the unrelated scenario that was breaking the others.\r\n```\r\nERROR: Failed to validate.\r\n\r\n{'platforms': [{0: [{'registry': [{'credentials': [{'password': ['null value not allowed'], 'username': ['null value not allowed']}]}]}]}]}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2822/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2810", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2810/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2810/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2810/events", "html_url": "https://github.com/ansible-community/molecule/issues/2810", "id": 689312860, "node_id": "MDU6SXNzdWU2ODkzMTI4NjA=", "number": 2810, "title": "Molecule not installing with ImportError: No module named 'click_completion'", "user": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-31T15:54:30Z", "updated_at": "2020-08-31T19:32:08Z", "closed_at": "2020-08-31T19:32:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.12\r\nmolecule 3.0.2.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nWhen I install Molecule, it should install successfully.\r\n\r\n# Actual Behaviour\r\n\r\nI install Molecule (along with other Python deps) like this:\r\n\r\n```\r\npip3 install ansible molecule ansible-lint yamllint docker\r\n```\r\n\r\nBut during install it seems to install a much older version (3.0.2.1) and I get an error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/molecule\", line 5, in <module>\r\n    from molecule.__main__ import main\r\n  File \"/usr/local/lib/python3.5/dist-packages/molecule/__main__.py\", line 22, in <module>\r\n    from molecule.shell import main\r\n  File \"/usr/local/lib/python3.5/dist-packages/molecule/shell.py\", line 23, in <module>\r\n    import click_completion\r\nImportError: No module named 'click_completion'\r\n```\r\n\r\nI'm seeing some other strange install errors on some of my other CI jobs (but not all, which makes this more puzzling), so I'm going to try to see if there was some other Python package that everything depends on which started failing today...", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2810/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2802", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2802/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2802/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2802/events", "html_url": "https://github.com/ansible-community/molecule/pull/2802", "id": 688562867, "node_id": "MDExOlB1bGxSZXF1ZXN0NDc1Nzk4NDA0", "number": 2802, "title": "Fixed linters", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-29T16:26:55Z", "updated_at": "2020-08-29T17:54:22Z", "closed_at": "2020-08-29T17:54:21Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2802", "html_url": "https://github.com/ansible-community/molecule/pull/2802", "diff_url": "https://github.com/ansible-community/molecule/pull/2802.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2802.patch", "merged_at": "2020-08-29T17:54:21Z"}, "body": "Among normal bumping of linters temporary pins down pydocstyle due to recent regression.\r\n\r\nRelated: https://github.com/PyCQA/pydocstyle/pull/506\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2802/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2798", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2798/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2798/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2798/events", "html_url": "https://github.com/ansible-community/molecule/pull/2798", "id": 683239517, "node_id": "MDExOlB1bGxSZXF1ZXN0NDcxMzYwMjgx", "number": 2798, "title": "Add driver-name parameter to init_scenario test helper", "user": {"login": "lod", "id": 243777, "node_id": "MDQ6VXNlcjI0Mzc3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/243777?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lod", "html_url": "https://github.com/lod", "followers_url": "https://api.github.com/users/lod/followers", "following_url": "https://api.github.com/users/lod/following{/other_user}", "gists_url": "https://api.github.com/users/lod/gists{/gist_id}", "starred_url": "https://api.github.com/users/lod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lod/subscriptions", "organizations_url": "https://api.github.com/users/lod/orgs", "repos_url": "https://api.github.com/users/lod/repos", "events_url": "https://api.github.com/users/lod/events{/privacy}", "received_events_url": "https://api.github.com/users/lod/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1205135639, "node_id": "MDU6TGFiZWwxMjA1MTM1NjM5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/test", "name": "test", "color": "0e8a16", "default": false, "description": "Improvement to quality assurance: CI/CD, testing, building"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-21T03:50:38Z", "updated_at": "2020-08-29T15:33:27Z", "closed_at": "2020-08-29T15:33:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2798", "html_url": "https://github.com/ansible-community/molecule/pull/2798", "diff_url": "https://github.com/ansible-community/molecule/pull/2798.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2798.patch", "merged_at": "2020-08-29T15:33:27Z"}, "body": "Supply driver-name parameter inside init_scenario helper.\r\n\r\nFixes: #2797", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2798/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2797", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2797/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2797/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2797/events", "html_url": "https://github.com/ansible-community/molecule/issues/2797", "id": 683234214, "node_id": "MDU6SXNzdWU2ODMyMzQyMTQ=", "number": 2797, "title": "init_scenario test helper always uses docker", "user": {"login": "fd-davidtulloh", "id": 67404824, "node_id": "MDQ6VXNlcjY3NDA0ODI0", "avatar_url": "https://avatars.githubusercontent.com/u/67404824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fd-davidtulloh", "html_url": "https://github.com/fd-davidtulloh", "followers_url": "https://api.github.com/users/fd-davidtulloh/followers", "following_url": "https://api.github.com/users/fd-davidtulloh/following{/other_user}", "gists_url": "https://api.github.com/users/fd-davidtulloh/gists{/gist_id}", "starred_url": "https://api.github.com/users/fd-davidtulloh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fd-davidtulloh/subscriptions", "organizations_url": "https://api.github.com/users/fd-davidtulloh/orgs", "repos_url": "https://api.github.com/users/fd-davidtulloh/repos", "events_url": "https://api.github.com/users/fd-davidtulloh/events{/privacy}", "received_events_url": "https://api.github.com/users/fd-davidtulloh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-21T03:33:18Z", "updated_at": "2020-08-29T15:33:27Z", "closed_at": "2020-08-29T15:33:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "molecule/test/functional/conftest.py: in init_scenario()\r\n\r\ncommand call is:\r\n\r\n`$ molecule init scenario test-scenario --role-name test-init`\r\n\r\nshould be:\r\n\r\n`$ molecule init scenario test-scenario --role-name test-init --driver-name <arg>`\r\n\r\nIn the current format this defaults to the docker driver.\r\n\r\nThis leads to the docker sanity check being called for init_scenario tests.\r\n\r\nIt doesn't seem like this is causing faults for the molecule test suite, as I assume docker is always available.\r\nIt does mess up other driver test suites which use this helper function.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2797/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2796", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2796/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2796/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2796/events", "html_url": "https://github.com/ansible-community/molecule/issues/2796", "id": 683085592, "node_id": "MDU6SXNzdWU2ODMwODU1OTI=", "number": 2796, "title": "Removing destroy step from test sequence doesn't work when a previous step fails", "user": {"login": "Aer1chah", "id": 69989441, "node_id": "MDQ6VXNlcjY5OTg5NDQx", "avatar_url": "https://avatars.githubusercontent.com/u/69989441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aer1chah", "html_url": "https://github.com/Aer1chah", "followers_url": "https://api.github.com/users/Aer1chah/followers", "following_url": "https://api.github.com/users/Aer1chah/following{/other_user}", "gists_url": "https://api.github.com/users/Aer1chah/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aer1chah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aer1chah/subscriptions", "organizations_url": "https://api.github.com/users/Aer1chah/orgs", "repos_url": "https://api.github.com/users/Aer1chah/repos", "events_url": "https://api.github.com/users/Aer1chah/events{/privacy}", "received_events_url": "https://api.github.com/users/Aer1chah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 3416733358, "node_id": "LA_kwDOAsPDRs7Lpzau", "url": "https://api.github.com/repos/ansible-community/molecule/labels/new", "name": "new", "color": "0052CC", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-20T20:46:23Z", "updated_at": "2022-01-11T17:55:42Z", "closed_at": "2022-01-11T17:55:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n molecule 3.0.8\r\n    ansible==2.9.9 python==3.8\r\n\r\nMolecule installation method (one of):\r\n\r\n- container image\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen removing `destroy` step from `test_sequence` - the destroy step should never not be executed (no matter if the previous steps were successful or unsuccessful)\r\n\r\n```\r\nscenario:\r\n  test_sequence:\r\n    - dependency\r\n    - create\r\n    - prepare\r\n    - converge\r\n    - idempotence\r\n    - side_effect\r\n    - verify\r\n    - cleanup\r\n\r\n  destroy_sequence:\r\n    - dependency\r\n    - cleanup\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nWhen removing `destroy` step from `test_sequence` it only works if `molecule test` successfully runs but not if the e.g. the `converge` step fails.\r\n```\r\n$ molecule test\r\n[...]\r\n\r\n     TASK [prometheus_server : install prometheus server] ***************************\r\n fatal: [ci-job12281-c1]: FAILED! => {\"changed\": false, \"msg\": \"No package matching 'prometheus2' found available, installed or updated\", \"rc\": 126, \"results\": [\"No package matching 'prometheus2' found available, installed or updated\"]}\r\n     \r\n     PLAY RECAP *********************************************************************\r\n     ci-job12281-c1             : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n     \r\n ERROR: \r\n An error occurred during the test sequence action: 'converge'. Cleaning up.\r\n --> Scenario: 'default'\r\n --> Action: 'cleanup'\r\n     \r\n     PLAY [Cleanup] *****************************************************************\r\n     \r\n     TASK [Remove instance from Katello] ********************************************\r\n     ok: [localhost] => (item=ci-job12281-c1)\r\n     \r\n     PLAY RECAP *********************************************************************\r\n     localhost                  : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n     \r\n --> Scenario: 'default'\r\n --> Action: 'destroy'\r\n     \r\n     PLAY [Destroy] *****************************************************************\r\n     \r\n     TASK [Destroy molecule instance(s)] ********************************************\r\n     changed: [localhost] => (item=ci-job12281-c1)\r\n     \r\n     TASK [Wait for instance(s) deletion to complete] *******************************\r\n     FAILED - RETRYING: Wait for instance(s) deletion to complete (300 retries left).\r\n     changed: [localhost] => (item=None)\r\n     changed: [localhost]\r\n     \r\n     TASK [Delete docker network(s)] ************************************************\r\n     \r\n     PLAY RECAP *********************************************************************\r\n     localhost                  : ok=2    changed=2    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\n     \r\n --> Pruning extra files from scenario ephemeral directory\r\nRunning after_script\r\n00:00\r\nUploading artifacts for failed job\r\n00:00\r\n ERROR: Job failed: command terminated with exit code 1\r\n```\r\n\r\n\r\nRunning `molecule test --destroy never` will also remove the `cleanup` step which is not intended.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2796/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2796/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2792", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2792/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2792/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2792/events", "html_url": "https://github.com/ansible-community/molecule/issues/2792", "id": 682143056, "node_id": "MDU6SXNzdWU2ODIxNDMwNTY=", "number": 2792, "title": "Failed to download dependency collections: Unexpected Exception", "user": {"login": "xoxys", "id": 3391958, "node_id": "MDQ6VXNlcjMzOTE5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3391958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xoxys", "html_url": "https://github.com/xoxys", "followers_url": "https://api.github.com/users/xoxys/followers", "following_url": "https://api.github.com/users/xoxys/following{/other_user}", "gists_url": "https://api.github.com/users/xoxys/gists{/gist_id}", "starred_url": "https://api.github.com/users/xoxys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xoxys/subscriptions", "organizations_url": "https://api.github.com/users/xoxys/orgs", "repos_url": "https://api.github.com/users/xoxys/repos", "events_url": "https://api.github.com/users/xoxys/events{/privacy}", "received_events_url": "https://api.github.com/users/xoxys/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-08-19T20:05:02Z", "updated_at": "2020-08-21T14:11:05Z", "closed_at": "2020-08-21T14:11:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.12\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.8.5 (default, Aug  4 2020, 04:11:56) [GCC 9.3.0]\r\nmolecule 3.0.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Actual Behaviour\r\n\r\nMolecule randomly failed due to dependency collection download:\r\n\r\n```\r\nInstalling 'community.general:1.1.0' to '/root/.cache/molecule/xoxys.postfix_relay/centos7/collections/ansible_collections/community/general'\r\nERROR! Unexpected Exception, this is probably a bug: <urlopen error [Errno -3] Try again>\r\n```\r\n\r\nSometimes it works without issues and a couple of minutes later if fails 3 times. You could see an example here: \r\nWorking: https://drone.rknet.org/ansible/xoxys.postfix_relay/39/2/2\r\nFailed: https://drone.rknet.org/ansible/xoxys.postfix_relay/40/2/2\r\n\r\nI don't really know how to debug this issue further.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2792/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2792/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2791", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2791/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2791/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2791/events", "html_url": "https://github.com/ansible-community/molecule/pull/2791", "id": 681836191, "node_id": "MDExOlB1bGxSZXF1ZXN0NDcwMTYxMjQ2", "number": 2791, "title": "Added mode to template #2785 ", "user": {"login": "rgarrigue", "id": 1872031, "node_id": "MDQ6VXNlcjE4NzIwMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1872031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarrigue", "html_url": "https://github.com/rgarrigue", "followers_url": "https://api.github.com/users/rgarrigue/followers", "following_url": "https://api.github.com/users/rgarrigue/following{/other_user}", "gists_url": "https://api.github.com/users/rgarrigue/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarrigue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarrigue/subscriptions", "organizations_url": "https://api.github.com/users/rgarrigue/orgs", "repos_url": "https://api.github.com/users/rgarrigue/repos", "events_url": "https://api.github.com/users/rgarrigue/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarrigue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/29", "html_url": "https://github.com/ansible-community/molecule/milestone/29", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/29/labels", "id": 5786307, "node_id": "MDk6TWlsZXN0b25lNTc4NjMwNw==", "number": 29, "title": "3.0.8", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2020-08-18T20:10:23Z", "updated_at": "2020-09-07T15:22:28Z", "due_on": null, "closed_at": "2020-09-07T15:22:28Z"}, "comments": 0, "created_at": "2020-08-19T13:21:59Z", "updated_at": "2020-08-19T15:29:24Z", "closed_at": "2020-08-19T15:26:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2791", "html_url": "https://github.com/ansible-community/molecule/pull/2791", "diff_url": "https://github.com/ansible-community/molecule/pull/2791.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2791.patch", "merged_at": "2020-08-19T15:26:54Z"}, "body": "Fixes: #2785", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2791/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2791/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2788", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2788/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2788/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2788/events", "html_url": "https://github.com/ansible-community/molecule/issues/2788", "id": 681719103, "node_id": "MDU6SXNzdWU2ODE3MTkxMDM=", "number": 2788, "title": "Tox py38-ansible28 missing pytest", "user": {"login": "rgarrigue", "id": 1872031, "node_id": "MDQ6VXNlcjE4NzIwMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1872031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarrigue", "html_url": "https://github.com/rgarrigue", "followers_url": "https://api.github.com/users/rgarrigue/followers", "following_url": "https://api.github.com/users/rgarrigue/following{/other_user}", "gists_url": "https://api.github.com/users/rgarrigue/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarrigue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarrigue/subscriptions", "organizations_url": "https://api.github.com/users/rgarrigue/orgs", "repos_url": "https://api.github.com/users/rgarrigue/repos", "events_url": "https://api.github.com/users/rgarrigue/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarrigue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-19T10:13:48Z", "updated_at": "2020-08-20T06:54:21Z", "closed_at": "2020-08-20T06:54:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmaster branch / 33f1ec99\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- tox\r\n\r\nDetail any linters or test runners used:\r\n\r\n- Xubuntu 20.04 over Dell Precision M6700\r\n\r\n# Desired Behavior\r\n\r\nI want tox to install it however it's required for the test to run properly.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n...\r\npy38-ansible28-functional develop-inst-noop: /home/remy/personal/molecule\r\npy38-ansible28-functional installed: ansible==2.8.14,appdirs==1.4.3,CacheControl==0.12.6,certifi==2019.11.28,cffi==1.14.2,chardet==3.0.4,colorama==0.4.3,contextlib2==0.6.0,cryptography==3.0,distlib==0.3.0,distro==1.4.0,html5lib==1.0.1,idna==2.8,ipaddr==2.2.0,Jinja2==2.11.2,lockfile==0.12.2,MarkupSafe==1.1.1,molecule==3.0.8.dev2,msgpack==0.6.2,packaging==20.3,pep517==0.8.2,pkg-resources==0.0.0,progress==1.5,pycparser==2.20,pyparsing==2.4.6,pytoml==0.1.21,PyYAML==5.3.1,requests==2.22.0,retrying==1.3.3,selinux==0.2.1,six==1.14.0,urllib3==1.25.8,webencodings==0.5.1\r\npy38-ansible28-functional run-test-pre: PYTHONHASHSEED='19837123'\r\npy38-ansible28-functional run-test: commands[0] | pip check\r\nNo broken requirements found.\r\npy38-ansible28-functional run-test: commands[1] | sh -c 'PYTEST_ADDOPTS= python -m pytest -p no:cov --collect-only 2>&1 >/home/remy/personal/molecule/.tox/py38-ansible28-functional/log/collect.log'\r\n/home/remy/personal/molecule/.tox/py38-ansible28-functional/bin/python: No module named pytest\r\nERROR: InvocationError for command /usr/bin/sh -c 'PYTEST_ADDOPTS= python -m pytest -p no:cov --collect-only 2>&1 >/home/remy/personal/molecule/.tox/py38-ansible28-functional/log/collect.log' (exited with code 1)\r\npy38-ansible29-unit create: /home/remy/personal/molecule/.tox/py38-ansible29-unit\r\npy38-ansible29-unit installdeps: ansible>=2.9,<2.10, selinux\r\npy38-ansible29-unit develop-inst: /home/remy/personal/molecule\r\npy38-ansible29-unit installed: ansi2html==1.5.2,ansible==2.9.12,ansible-lint==4.3.0,apipkg==1.5,appdirs==1.4.3,arrow==0.15.8,attrs==19.3.0,bcrypt==3.2.0,binaryornot==0.4.4,CacheControl==0.12.6,Cerberus==1.3.2,certifi==2019.11.28,cffi==1.14.2,cfgv==3.2.0,chardet==3.0.4,click==7.1.2,click-completion==0.5.2,click-help-colors==0.8,colorama==0.4.3,contextlib2==0.6.0,cookiecutter==1.7.2,coverage==4.5.4,cryptography==3.0,distlib==0.3.1,distro==1.4.0,docker==4.3.0,execnet==1.7.1,fasteners==0.15,filelock==3.0.12,flake8==3.8.3,html5lib==1.0.1,identify==1.4.28,idna==2.8,ipaddr==2.2.0,Jinja2==2.11.2,jinja2-time==0.2.0,lockfile==0.12.2,MarkupSafe==1.1.1,mccabe==0.6.1,mock==3.0.5,-e git+git@github.com:ansible-community/molecule.git@33f1ec99680c0906395ae43c3c30a1e7dc0637f9#egg=molecule,monotonic==1.5,more-itertools==8.4.0,msgpack==0.6.2,nodeenv==1.4.0,ntlm-auth==1.5.0,packaging==20.3,paramiko==2.7.1,pathspec==0.8.0,pep517==0.8.2,pexpect==4.8.0,pkg-resources==0.0.0,pluggy==0.13.1,poyo==0.5.0,pre-commit==2.6.0,progress==1.5,ptyprocess==0.6.0,py==1.9.0,pycodestyle==2.6.0,pycparser==2.20,pyflakes==2.2.0,PyNaCl==1.4.0,pyparsing==2.4.6,pytest==5.4.3,pytest-cov==2.10.1,pytest-forked==1.3.0,pytest-helpers-namespace==2019.1.8,pytest-html==2.1.1,pytest-metadata==1.10.0,pytest-mock==1.13.0,pytest-plus==0.2,pytest-verbose-parametrize==1.7.0,pytest-xdist==1.34.0,python-dateutil==2.8.1,python-gilt==1.2.3,python-slugify==4.0.1,pytoml==0.1.21,pywinrm==0.4.1,PyYAML==5.3.1,requests==2.24.0,requests-ntlm==1.1.0,retrying==1.3.3,ruamel.yaml==0.16.10,ruamel.yaml.clib==0.2.0,selinux==0.2.1,sh==1.13.1,shellingham==1.3.2,six==1.14.0,tabulate==0.8.7,testinfra==5.2.2,text-unidecode==1.3,toml==0.10.1,tree-format==0.1.2,urllib3==1.25.8,virtualenv==20.0.31,wcwidth==0.2.5,webencodings==0.5.1,websocket-client==0.57.0,xmltodict==0.12.0,yamllint==1.24.2\r\npy38-ansible29-unit run-test-pre: PYTHONHASHSEED='19837123'\r\npy38-ansible29-unit run-test: commands[0] | pip check\r\nNo broken requirements found.\r\npy38-ansible29-unit run-test: commands[1] | sh -c 'PYTEST_ADDOPTS= python -m pytest -p no:cov --collect-only 2>&1 >/home/remy/personal/molecule/.tox/py38-ansible29-unit/log/collect.log'\r\npy38-ansible29-unit run-test: commands[2] | python -m pytest\r\n...\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2788/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2788/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2786", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2786/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2786/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2786/events", "html_url": "https://github.com/ansible-community/molecule/issues/2786", "id": 681699071, "node_id": "MDU6SXNzdWU2ODE2OTkwNzE=", "number": 2786, "title": "Tox's missing toml", "user": {"login": "rgarrigue", "id": 1872031, "node_id": "MDQ6VXNlcjE4NzIwMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1872031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarrigue", "html_url": "https://github.com/rgarrigue", "followers_url": "https://api.github.com/users/rgarrigue/followers", "following_url": "https://api.github.com/users/rgarrigue/following{/other_user}", "gists_url": "https://api.github.com/users/rgarrigue/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarrigue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarrigue/subscriptions", "organizations_url": "https://api.github.com/users/rgarrigue/orgs", "repos_url": "https://api.github.com/users/rgarrigue/repos", "events_url": "https://api.github.com/users/rgarrigue/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarrigue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-19T09:41:57Z", "updated_at": "2020-08-20T10:20:10Z", "closed_at": "2020-08-20T10:20:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule details\r\n\r\n```\r\nmaster branch / 33f1ec99\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nDetail any linters or test runners used:\r\n\r\n- Xubuntu 20.04 over Dell Precision M6700\r\n\r\n# Desired Behavior\r\n\r\nI wanted to run `tox` before making a PR. \r\n\r\n# Actual Behaviour\r\n\r\n```\r\n~/personal/molecule (master \u2718)\u2739 \u1405 tox\r\n.package create: /home/remy/personal/molecule/.tox/.package\r\n.package installdeps: pip >= 19.3.1, setuptools >= 42, setuptools_scm[toml] >= 3.5.0, setuptools_scm_git_archive >= 1.1, wheel >= 0.33.6\r\nlint create: /home/remy/personal/molecule/.tox/lint\r\nlint installdeps: pre-commit>=1.18.1\r\nlint installed: appdirs==1.4.3,CacheControl==0.12.6,certifi==2019.11.28,cfgv==3.2.0,chardet==3.0.4,colorama==0.4.3,contextlib2==0.6.0,distlib==0.3.1,distro==1.4.0,filelock==3.0.12,html5lib==1.0.1,identify==1.4.28,idna==2.8,ipaddr==2.2.0,lockfile==0.12.2,molecule==3.0.8.dev2,msgpack==0.6.2,nodeenv==1.4.0,packaging==20.3,pep517==0.8.2,pkg-resources==0.0.0,pre-commit==2.6.0,progress==1.5,pyparsing==2.4.6,pytoml==0.1.21,PyYAML==5.3.1,requests==2.22.0,retrying==1.3.3,six==1.14.0,toml==0.10.1,urllib3==1.25.8,virtualenv==20.0.31,webencodings==0.5.1\r\nlint run-test-pre: PYTHONHASHSEED='4162847199'\r\nlint run-test: commands[0] | python -m pre_commit run --all\r\n[INFO] Initializing environment for https://github.com/pre-commit/mirrors-isort.\r\n[INFO] Initializing environment for https://github.com/python/black.git.\r\n[INFO] Initializing environment for https://github.com/pre-commit/pre-commit-hooks.git.\r\n[INFO] Initializing environment for https://gitlab.com/pycqa/flake8.git.\r\n[INFO] Initializing environment for https://gitlab.com/pycqa/flake8.git:flake8-absolute-import,flake8-black>=0.1.1,flake8-docstrings>=1.5.0.\r\n[INFO] Initializing environment for https://github.com/adrienverge/yamllint.git.\r\n[INFO] Initializing environment for https://github.com/pre-commit/mirrors-mypy.\r\n[INFO] Initializing environment for https://github.com/pre-commit/mirrors-mypy:packaging.\r\n[INFO] Installing environment for https://github.com/pre-commit/mirrors-isort.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://github.com/python/black.git.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://github.com/pre-commit/pre-commit-hooks.git.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://github.com/pre-commit/pre-commit-hooks.git.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://gitlab.com/pycqa/flake8.git.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://github.com/adrienverge/yamllint.git.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\n[INFO] Installing environment for https://github.com/pre-commit/mirrors-mypy.\r\n[INFO] Once installed this environment will be reused.\r\n[INFO] This may take a few minutes...\r\nisort....................................................................Passed\r\nblack....................................................................Passed\r\nFix End of Files.........................................................Passed\r\nTrim Trailing Whitespace.................................................Passed\r\nMixed line ending........................................................Passed\r\nCheck for byte-order marker..............................................Passed\r\nCheck that executables have shebangs.....................................Passed\r\nCheck for merge conflicts................................................Passed\r\nDebug Statements (Python)................................................Passed\r\nflake8...................................................................Passed\r\nyamllint.................................................................Passed\r\nmypy.....................................................................Passed\r\ndocs create: /home/remy/personal/molecule/.tox/docs\r\ndocs installdeps: selinux\r\ndocs inst: /home/remy/personal/molecule/.tox/.tmp/package/1/molecule-3.0.8.dev2.tar.gz\r\ndocs installed: alabaster==0.7.12,ansible==2.9.12,appdirs==1.4.3,arrow==0.15.8,Babel==2.8.0,bcrypt==3.2.0,binaryornot==0.4.4,CacheControl==0.12.6,Cerberus==1.3.2,certifi==2019.11.28,cffi==1.14.2,chardet==3.0.4,click==7.1.2,click-completion==0.5.2,click-help-colors==0.8,colorama==0.4.3,contextlib2==0.6.0,cookiecutter==1.7.2,cryptography==3.0,distlib==0.3.0,distro==1.4.0,docutils==0.16,fasteners==0.15,html5lib==1.0.1,idna==2.8,imagesize==1.2.0,ipaddr==2.2.0,Jinja2==2.11.2,jinja2-time==0.2.0,lockfile==0.12.2,MarkupSafe==1.1.1,molecule==3.0.8.dev2,monotonic==1.5,msgpack==0.6.2,packaging==20.3,paramiko==2.7.1,pathspec==0.8.0,pep517==0.8.2,pexpect==4.8.0,pkg-resources==0.0.0,pluggy==0.13.1,poyo==0.5.0,progress==1.5,ptyprocess==0.6.0,pycparser==2.20,Pygments==2.6.1,PyNaCl==1.4.0,pyparsing==2.4.6,python-dateutil==2.8.1,python-gilt==1.2.3,python-slugify==4.0.1,pytoml==0.1.21,pytz==2020.1,PyYAML==5.3.1,requests==2.24.0,retrying==1.3.3,selinux==0.2.1,sh==1.13.1,shellingham==1.3.2,simplejson==3.17.2,six==1.14.0,snowballstemmer==2.0.0,Sphinx==3.2.1,sphinx-ansible-theme==0.3.2,sphinx-notfound-page==0.5,sphinx-rtd-theme==0.5.0,sphinxcontrib-applehelp==1.0.2,sphinxcontrib-devhelp==1.0.2,sphinxcontrib-htmlhelp==1.0.3,sphinxcontrib-jsmath==1.0.1,sphinxcontrib-qthelp==1.0.3,sphinxcontrib-serializinghtml==1.1.4,tabulate==0.8.7,text-unidecode==1.3,tree-format==0.1.2,urllib3==1.25.8,webencodings==0.5.1,yamllint==1.24.2\r\ndocs run-test-pre: PYTHONHASHSEED='4162847199'\r\ndocs run-test: commands[0] | python -m sphinx -a -n -W -b html --color -d /home/remy/personal/molecule/docs/docstree docs/ /home/remy/personal/molecule/docs/docstree/html\r\nSphinx v3.2.1 en cours d'ex\u00e9cution\r\n/home/remy/personal/molecule/.tox/docs/lib/python3.8/site-packages/sphinx_ansible_theme/ext/pygments_lexer.py:228: RemovedInSphinx40Warning: app.add_lexer() API changed; Please give lexer class instead instance\r\n  app.add_lexer(lexer.name, lexer)\r\n/home/remy/personal/molecule/.tox/docs/lib/python3.8/site-packages/sphinx_ansible_theme/ext/pygments_lexer.py:230: RemovedInSphinx40Warning: app.add_lexer() API changed; Please give lexer class instead instance\r\n  app.add_lexer(alias, lexer)\r\ncr\u00e9ation du r\u00e9pertoire de sortie... fait\r\nchargement de l'inventaire intersphinx de https://docs.python.org/3/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.python.org/3/objects.inv...\r\nchargement de l'inventaire intersphinx de http://jinja.palletsprojects.com/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/2.9/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/2.8/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/2.7/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/2.6/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/2.5/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.ansible.com/ansible/latest/objects.inv...\r\nchargement de l'inventaire intersphinx de https://pip.pypa.io/en/latest/objects.inv...\r\nchargement de l'inventaire intersphinx de https://docs.python.org/2/objects.inv...\r\nchargement de l'inventaire intersphinx de https://testinfra.readthedocs.io/en/latest/objects.inv...\r\nl\u2019inventaire intersphinx a boug\u00e9 : http://jinja.palletsprojects.com/objects.inv -> https://jinja.palletsprojects.com/en/2.11.x/objects.inv\r\nchargement de l'inventaire intersphinx de http://yamllint.readthedocs.io/en/latest/objects.inv...\r\nchargement de l'inventaire intersphinx de https://virtualenv.pypa.io/en/latest/objects.inv...\r\nl\u2019inventaire intersphinx a boug\u00e9 : http://yamllint.readthedocs.io/en/latest/objects.inv -> https://yamllint.readthedocs.io/en/latest/objects.inv\r\nconstruction en cours [mo]:tout les 0 fichiers po\r\nconstruction [html]:tous les fichiers source\r\nmise-\u00e0-jour de l'environnement :[nouvelle configuration] 9 ajout\u00e9, 0 modifi\u00e9, 0 supprim\u00e9\r\nlecture des sources... [100%] usage                                                                                                                                                                                                                                                                                                                                                                                                         \r\nrecherche des fichiers p\u00e9rim\u00e9s... aucun r\u00e9sultat\r\nenvironnement de s\u00e9rialisation... fait\r\nv\u00e9rification de la coh\u00e9rence... fait\r\ndocument en pr\u00e9paration... fait\r\n\u00e9criture... [100%] usage                                                                                                                                                                                                                                                                                                                                                                                                                    \r\ngenerating indices...  genindexfait\r\nwriting additional pages...  searchfait\r\ncopie des fichiers statiques... ... fait\r\ncopying extra files... fait\r\ndumping search index in English (code: en)... fait\r\ndumping object inventory... fait\r\nla compilation a r\u00e9ussi.\r\n\r\nLes pages HTML sont dans docs/docstree/html .\r\ndocs run-test: commands[1] | python -c 'import pathlib; docs_dir = pathlib.Path(r\"/home/remy/personal/molecule\") / \"docs/docstree/html\"; index_file = docs_dir / \"index.html\"; print(f\"\\nDocumentation available under `file://{index_file}`\\n\\nTo serve docs, use `python3 -m http.server --directory {docs_dir} 0`\\n\")'\r\n\r\nDocumentation available under `file:///home/remy/personal/molecule/docs/docstree/html/index.html`\r\n\r\nTo serve docs, use `python3 -m http.server --directory /home/remy/personal/molecule/docs/docstree/html 0`\r\n\r\npackaging create: /home/remy/personal/molecule/.tox/packaging\r\npackaging installdeps: collective.checkdocs==0.2, pep517 >= 0.5.0, twine==1.14.0\r\npackaging installed: appdirs==1.4.3,bleach==3.1.5,CacheControl==0.12.6,certifi==2019.11.28,chardet==3.0.4,collective.checkdocs==0.2,colorama==0.4.3,contextlib2==0.6.0,distlib==0.3.0,distro==1.4.0,docutils==0.16,html5lib==1.0.1,idna==2.8,ipaddr==2.2.0,lockfile==0.12.2,molecule==3.0.8.dev2,msgpack==0.6.2,packaging==20.3,pep517==0.8.2,pkg-resources==0.0.0,pkginfo==1.5.0.1,progress==1.5,Pygments==2.6.1,pyparsing==2.4.6,pytoml==0.1.21,readme-renderer==26.0,requests==2.22.0,requests-toolbelt==0.9.1,retrying==1.3.3,six==1.14.0,tqdm==4.48.2,twine==1.14.0,urllib3==1.25.8,webencodings==0.5.1\r\npackaging run-test-pre: PYTHONHASHSEED='4162847199'\r\npackaging run-test: commands[0] | rm -rfv /home/remy/personal/molecule/dist/\r\npackaging run-test: commands[1] | python -m pep517.build --source --binary --out-dir /home/remy/personal/molecule/dist/ /home/remy/personal/molecule\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/runpy.py\", line 193, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"/usr/lib/python3.8/runpy.py\", line 86, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/remy/personal/molecule/.tox/packaging/lib/python3.8/site-packages/pep517/build.py\", line 6, in <module>\r\n    import toml\r\nModuleNotFoundError: No module named 'toml'\r\nERROR: InvocationError for command /home/remy/personal/molecule/.tox/packaging/bin/python -m pep517.build --source --binary --out-dir /home/remy/personal/molecule/dist/ . (exited with code 1)\r\n...\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2786/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2785", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2785/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2785/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2785/events", "html_url": "https://github.com/ansible-community/molecule/issues/2785", "id": 681678445, "node_id": "MDU6SXNzdWU2ODE2Nzg0NDU=", "number": 2785, "title": "Remove \"Specify 'mode'\" warning at Dockerfile image creation", "user": {"login": "rgarrigue", "id": 1872031, "node_id": "MDQ6VXNlcjE4NzIwMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1872031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarrigue", "html_url": "https://github.com/rgarrigue", "followers_url": "https://api.github.com/users/rgarrigue/followers", "following_url": "https://api.github.com/users/rgarrigue/following{/other_user}", "gists_url": "https://api.github.com/users/rgarrigue/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarrigue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarrigue/subscriptions", "organizations_url": "https://api.github.com/users/rgarrigue/orgs", "repos_url": "https://api.github.com/users/rgarrigue/repos", "events_url": "https://api.github.com/users/rgarrigue/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarrigue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-19T09:11:34Z", "updated_at": "2020-08-19T15:26:54Z", "closed_at": "2020-08-19T15:26:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```molecule installed: \r\nansible==2.9.12,\r\nansible-lint==4.3.0,appdirs==1.4.3,arrow==0.15.8,attrs==19.3.0,bcrypt==3.2.0,binaryornot==0.4.4,CacheControl==0.12.6,Cerberus==1.3.2,certifi==2019.11.28,cffi==1.14.2,chardet==3.0.4,click==7.1.2,click-completion==0.5.2,click-help-colors==0.8,colorama==0.4.3,contextlib2==0.6.0,cookiecutter==1.7.2,cryptography==3.0,distlib==0.3.0,distro==1.4.0,docker==4.3.0,fasteners==0.15,flake8==3.8.3,html5lib==1.0.1,idna==2.8,iniconfig==1.0.1,ipaddr==2.2.0,Jinja2==2.11.2,jinja2-time==0.2.0,lockfile==0.12.2,MarkupSafe==1.1.1,mccabe==0.6.1,\r\nmolecule==3.0.3,\r\nmolecule-vagrant==0.3,monotonic==1.5,more-itertools==8.4.0,msgpack==0.6.2,netaddr==0.8.0,packaging==20.3,paramiko==2.7.1,pathspec==0.8.0,pep517==0.8.2,pexpect==4.8.0,pluggy==0.13.1,poyo==0.5.0,progress==1.5,ptyprocess==0.6.0,py==1.9.0,pycodestyle==2.6.0,pycparser==2.20,pyflakes==2.2.0,PyNaCl==1.4.0,pyparsing==2.4.6,pytest==6.0.1,python-dateutil==2.8.1,python-gilt==1.2.3,python-slugify==4.0.1,python-vagrant==0.5.15,pytoml==0.1.21,PyYAML==5.3.1,requests==2.22.0,retrying==1.3.3,ruamel.yaml==0.16.10,ruamel.yaml.clib==0.2.0,selinux==0.2.1,sh==1.13.1,shellingham==1.3.2,six==1.14.0,tabulate==0.8.7,testinfra==5.2.2,text-unidecode==1.3,toml==0.10.1,tree-format==0.1.2,urllib3==1.25.8,webencodings==0.5.1,websocket-client==0.57.0,yamllint==1.24.2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nOne less warning. \r\n\r\n# Actual Behaviour\r\n\r\n```\r\n...\r\n    TASK [Create Dockerfiles from image names] *************************************\r\n    changed: [localhost] => (item={'command': '/lib/systemd/systemd', 'groups': ['molecule_consul_service'], 'image': 'jrei/systemd-debian:10', 'name': 'molecule-consul-service-debian10', 'privileged': True, 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:ro']})\r\n[WARNING]: File '/home/remy/.cache/molecule/ansible-role-consul-\r\nservice/default/Dockerfile_jrei_systemd_debian_10' created with default\r\npermissions '600'. The previous default was '666'. Specify 'mode' to avoid this\r\nwarning.\r\n...\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2785/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2785/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2783", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2783/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2783/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2783/events", "html_url": "https://github.com/ansible-community/molecule/pull/2783", "id": 681234154, "node_id": "MDExOlB1bGxSZXF1ZXN0NDY5NjU2MzAw", "number": 2783, "title": "Assure env is passted to lint calls", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/29", "html_url": "https://github.com/ansible-community/molecule/milestone/29", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/29/labels", "id": 5786307, "node_id": "MDk6TWlsZXN0b25lNTc4NjMwNw==", "number": 29, "title": "3.0.8", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 3, "state": "closed", "created_at": "2020-08-18T20:10:23Z", "updated_at": "2020-09-07T15:22:28Z", "due_on": null, "closed_at": "2020-09-07T15:22:28Z"}, "comments": 0, "created_at": "2020-08-18T18:08:42Z", "updated_at": "2020-08-19T07:00:36Z", "closed_at": "2020-08-19T07:00:36Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2783", "html_url": "https://github.com/ansible-community/molecule/pull/2783", "diff_url": "https://github.com/ansible-community/molecule/pull/2783.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2783.patch", "merged_at": "2020-08-19T07:00:36Z"}, "body": "Passing os.environ through to the value of the lint command and supplementing with the MOLECULE environment variables.\r\n\r\nFixes: #2781", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2783/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2783/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2782", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2782/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2782/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2782/events", "html_url": "https://github.com/ansible-community/molecule/issues/2782", "id": 681138111, "node_id": "MDU6SXNzdWU2ODExMzgxMTE=", "number": 2782, "title": "tox tests fail on clean checkout", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-08-18T15:34:47Z", "updated_at": "2020-08-20T06:52:12Z", "closed_at": "2020-08-20T06:52:12Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\ngit master branch\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n\r\nDetail any linters or test runners used:\r\n\r\ntox -e py38-ansible29-functional\r\n\r\n# Desired Behavior\r\n\r\nTests should all pass\r\n\r\n# Actual Behaviour\r\n\r\nSome of the tests fail because they are incorrectly creating OpenStack based scenarios instead of docker/podman based scenarios.\r\n\r\n```\r\n========================= 4 failed, 33 passed, 2 skipped, 33 deselected in 938.37s (0:15:38) =========================\r\nERROR: InvocationError for command /home/ghelling/src/molecule/.tox/py38-ansible29-functional/bin/python -m pytest (exited with code 1)\r\n```\r\n\r\nSpecifically these tests are failing:\r\ntest_command_init_role[docker]\r\ntest_command_init_role[podman]\r\ntest_command_init_scenario[docker]\r\ntest_command_init_scenario[podman]\r\n\r\nThey are all failing with output similar to this:\r\n\r\n```\r\n------------------------------------------------ Captured stdout call ------------------------------------------------\r\n    --> Initializing new role test-init...\r\n    Initialized role in /tmp/pytest-of-ghelling/pytest-0/test_command_init_scenario_pod0/XOCKT/test-init successfully.\r\n    \r\n    --> Initializing new scenario test-scenario...\r\n    Initialized scenario in /tmp/pytest-of-ghelling/pytest-0/test_command_init_scenario_pod0/XOCKT/test-init/molecule/test-scenario successfully.\r\n    \r\n    ---\r\n    driver:\r\n      name: openstack\r\n    platforms:\r\n      - name: test-test-init\r\n    \r\n    \r\n------------------------------------------------ Captured stderr call ------------------------------------------------\r\nERROR: Failed to pre-validate.\r\n\r\n{'driver': [{'name': ['unallowed value openstack']}]}\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2782/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2782/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2781", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2781/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2781/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2781/events", "html_url": "https://github.com/ansible-community/molecule/issues/2781", "id": 680542612, "node_id": "MDU6SXNzdWU2ODA1NDI2MTI=", "number": 2781, "title": "yamllint is not found when running 'lint' target as of Molecule 3.0.7", "user": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2020-08-17T21:40:47Z", "updated_at": "2021-03-30T21:34:59Z", "closed_at": "2020-08-19T07:00:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nAnsible 2.9.12\r\nMolecule 3.0.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nyamllint and ansible-lint, test is run in Travis CI environment\r\n\r\n# Desired Behavior\r\n\r\nLinters should run without issue.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing: set -e\r\nyamllint .\r\nansible-lint\r\n/bin/sh: 2: yamllint: not found\r\nERROR: Lint failed: Command 'set -e\r\nyamllint .\r\nansible-lint\r\n' returned non-zero exit status 127.: Command 'set -e\r\nyamllint .\r\nansible-lint\r\n' returned non-zero exit status 127.\r\n```\r\n\r\nSee failed build: https://travis-ci.org/github/geerlingguy/ansible-role-clamav/jobs/718754330#L470\r\n\r\nIt looks like this bug was introduced in the 3.0.7 release. If I `pip install molecule===3.0.6` the problem goes away.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2781/reactions", "total_count": 8, "+1": 8, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2781/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2780", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2780/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2780/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2780/events", "html_url": "https://github.com/ansible-community/molecule/issues/2780", "id": 678920554, "node_id": "MDU6SXNzdWU2Nzg5MjA1NTQ=", "number": 2780, "title": "Delegated driver inventory refresh in a play", "user": {"login": "dmlb2000", "id": 1504962, "node_id": "MDQ6VXNlcjE1MDQ5NjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1504962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmlb2000", "html_url": "https://github.com/dmlb2000", "followers_url": "https://api.github.com/users/dmlb2000/followers", "following_url": "https://api.github.com/users/dmlb2000/following{/other_user}", "gists_url": "https://api.github.com/users/dmlb2000/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmlb2000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmlb2000/subscriptions", "organizations_url": "https://api.github.com/users/dmlb2000/orgs", "repos_url": "https://api.github.com/users/dmlb2000/repos", "events_url": "https://api.github.com/users/dmlb2000/events{/privacy}", "received_events_url": "https://api.github.com/users/dmlb2000/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-14T05:57:30Z", "updated_at": "2020-10-22T07:35:48Z", "closed_at": "2020-10-22T07:35:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.12\r\n  config file = None\r\n  configured module search path = ['/home/dmlb2000/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/dmlb2000/.virtualenvs/ansible/lib/python3.6/site-packages/ansible\r\n  executable location = /home/dmlb2000/.virtualenvs/ansible/bin/ansible\r\n  python version = 3.6.8 (default, Apr 16 2020, 01:36:27) [GCC 8.3.1 20191121 (Red Hat 8.3.1-5)]\r\nmolecule 3.0.6\r\n   ansible==2.9.12 python==3.6\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI'm using a delegated scenario driver with a cloud like environment. I'm creating the systems I want to test, then logging into them to do some initial configurations before I run a converge on the role. I was hoping to perform both of these actions in the `create.yml` playbook. Though the inventory doesn't seem to refresh properly, I'm setting the `inventory_conf` and creating the `molecule_instance_config` file. The ansible meta inventory refresh task doesn't see to help.\r\n\r\nHowever, the inventory generated this way only gets recreated when molecule is run and I don't know of a way to execute a molecule inventory refresh from a play.\r\n\r\n# Actual Behaviour\r\n\r\nI end up running `molecule create` twice, it fails the first time unable to connect to the inventory host in the second play.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2780/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2777", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2777/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2777/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2777/events", "html_url": "https://github.com/ansible-community/molecule/pull/2777", "id": 675755026, "node_id": "MDExOlB1bGxSZXF1ZXN0NDY1MTkwNTcw", "number": 2777, "title": "Check ansible-base version before ansible version ", "user": {"login": "btravouillon", "id": 14249095, "node_id": "MDQ6VXNlcjE0MjQ5MDk1", "avatar_url": "https://avatars.githubusercontent.com/u/14249095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/btravouillon", "html_url": "https://github.com/btravouillon", "followers_url": "https://api.github.com/users/btravouillon/followers", "following_url": "https://api.github.com/users/btravouillon/following{/other_user}", "gists_url": "https://api.github.com/users/btravouillon/gists{/gist_id}", "starred_url": "https://api.github.com/users/btravouillon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/btravouillon/subscriptions", "organizations_url": "https://api.github.com/users/btravouillon/orgs", "repos_url": "https://api.github.com/users/btravouillon/repos", "events_url": "https://api.github.com/users/btravouillon/events{/privacy}", "received_events_url": "https://api.github.com/users/btravouillon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-09T19:11:52Z", "updated_at": "2020-08-17T19:13:29Z", "closed_at": "2020-08-17T17:37:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2777", "html_url": "https://github.com/ansible-community/molecule/pull/2777", "diff_url": "https://github.com/ansible-community/molecule/pull/2777.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2777.patch", "merged_at": "2020-08-17T17:37:39Z"}, "body": "Fixes `pkg_resources.DistributionNotFound: The 'ansible' distribution was not found and is required by the application` reported in #2757 when only ansible-base is installed.\r\n\r\nThis will report the version of ansible if < 2.10, the version of ansible-base if >= 2.10.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2777/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2777/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2775", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2775/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2775/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2775/events", "html_url": "https://github.com/ansible-community/molecule/pull/2775", "id": 674423609, "node_id": "MDExOlB1bGxSZXF1ZXN0NDY0MTE4MTgy", "number": 2775, "title": "Removed default provisioner lint configuration", "user": {"login": "anatolek", "id": 24259206, "node_id": "MDQ6VXNlcjI0MjU5MjA2", "avatar_url": "https://avatars.githubusercontent.com/u/24259206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anatolek", "html_url": "https://github.com/anatolek", "followers_url": "https://api.github.com/users/anatolek/followers", "following_url": "https://api.github.com/users/anatolek/following{/other_user}", "gists_url": "https://api.github.com/users/anatolek/gists{/gist_id}", "starred_url": "https://api.github.com/users/anatolek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anatolek/subscriptions", "organizations_url": "https://api.github.com/users/anatolek/orgs", "repos_url": "https://api.github.com/users/anatolek/repos", "events_url": "https://api.github.com/users/anatolek/events{/privacy}", "received_events_url": "https://api.github.com/users/anatolek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-06T15:59:49Z", "updated_at": "2020-08-10T09:03:36Z", "closed_at": "2020-08-10T09:03:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2775", "html_url": "https://github.com/ansible-community/molecule/pull/2775", "diff_url": "https://github.com/ansible-community/molecule/pull/2775.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2775.patch", "merged_at": "2020-08-10T09:03:36Z"}, "body": "As I know the linter is no longer used in the provisioner configuration.  \r\nAccordingly, I assume that this is forgotten to remove from version 3.\r\n\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2775/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2775/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2774", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2774/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2774/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2774/events", "html_url": "https://github.com/ansible-community/molecule/issues/2774", "id": 672820145, "node_id": "MDU6SXNzdWU2NzI4MjAxNDU=", "number": 2774, "title": "Idempotence test fails on... gathering facts?", "user": {"login": "MetallDoktor", "id": 33860184, "node_id": "MDQ6VXNlcjMzODYwMTg0", "avatar_url": "https://avatars.githubusercontent.com/u/33860184?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MetallDoktor", "html_url": "https://github.com/MetallDoktor", "followers_url": "https://api.github.com/users/MetallDoktor/followers", "following_url": "https://api.github.com/users/MetallDoktor/following{/other_user}", "gists_url": "https://api.github.com/users/MetallDoktor/gists{/gist_id}", "starred_url": "https://api.github.com/users/MetallDoktor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MetallDoktor/subscriptions", "organizations_url": "https://api.github.com/users/MetallDoktor/orgs", "repos_url": "https://api.github.com/users/MetallDoktor/repos", "events_url": "https://api.github.com/users/MetallDoktor/events{/privacy}", "received_events_url": "https://api.github.com/users/MetallDoktor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-08-04T14:05:46Z", "updated_at": "2021-02-18T10:04:35Z", "closed_at": "2020-10-12T11:05:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.9.11\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/xxxxxxxx/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/xxxxxxxx/molecule/molecule-venv/lib/python3.8/site-packages/ansible\r\n  executable location = /home/xxxxxxxx/molecule/molecule-venv/bin/ansible\r\n  python version = 3.8.2 (default, Jul 16 2020, 14:00:26) [GCC 9.3.0]\r\nmolecule 3.0.6\r\n   ansible==2.9.11 python==3.8\r\n```\r\n\r\n\r\nMolecule installation method:\r\n\r\n- pip\r\n\r\nAnsible installation method:\r\n\r\n- pip\r\n\r\nLinters or test runners used:\r\n```\r\nyamllint\r\nansible-lint\r\nflake8\r\n```\r\n\r\n# Desired Behaviour\r\n\r\nI am developing an Ansible role with Molecule through the Docker driver. I managed to get all my tasks idempotent so the idempotence step should be passed without any problems or errors.\r\n\r\n# Actual Behaviour\r\n\r\nHowever, here is what I get:\r\n\r\n![image](https://user-images.githubusercontent.com/33860184/89299872-006c4c00-d670-11ea-97f7-0eb8ec116b28.png)\r\n\r\nBut the problem is not about one of my tasks because I can see this with --debug option...:\r\n\r\n![OpenedWithImage](https://user-images.githubusercontent.com/33860184/89300497-fdbe2680-d670-11ea-9837-35e10000a6c0.png)\r\n\r\n... and this without it:\r\n\r\n![image](https://user-images.githubusercontent.com/33860184/89303253-9c985200-d674-11ea-9cb9-92365ee62567.png)\r\n\r\nAll other tasks are \"ok\", neither \"failed\" nor \"changed\". Couldn't find anything useful about it. I could disable idempotence check in test_sequence, of course - I mean, as far as I can see, the role is idempotent after all - but it would be great to know why is this happening and could it be resolved.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2774/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2774/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2770", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2770/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2770/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2770/events", "html_url": "https://github.com/ansible-community/molecule/pull/2770", "id": 669922503, "node_id": "MDExOlB1bGxSZXF1ZXN0NDYwMjM5MTU4", "number": 2770, "title": "Add environment dict to lint calls", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-07-31T15:16:58Z", "updated_at": "2020-08-11T09:44:31Z", "closed_at": "2020-08-11T09:44:31Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2770", "html_url": "https://github.com/ansible-community/molecule/pull/2770", "diff_url": "https://github.com/ansible-community/molecule/pull/2770.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2770.patch", "merged_at": "2020-08-11T09:44:31Z"}, "body": "Expose standard MOLECULE environment variables to the lint commands to\r\nimprove processing\r\n\r\n\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2770/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2768", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2768/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2768/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2768/events", "html_url": "https://github.com/ansible-community/molecule/pull/2768", "id": 668866013, "node_id": "MDExOlB1bGxSZXF1ZXN0NDU5MzAzNjQ2", "number": 2768, "title": "Avoid abridged click output", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/28", "html_url": "https://github.com/ansible-community/molecule/milestone/28", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/28/labels", "id": 5715926, "node_id": "MDk6TWlsZXN0b25lNTcxNTkyNg==", "number": 28, "title": "3.0.7", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2020-07-30T15:28:10Z", "updated_at": "2020-09-07T15:22:26Z", "due_on": null, "closed_at": "2020-09-07T15:22:26Z"}, "comments": 0, "created_at": "2020-07-30T15:26:06Z", "updated_at": "2020-08-10T09:07:51Z", "closed_at": "2020-08-10T09:07:48Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2768", "html_url": "https://github.com/ansible-community/molecule/pull/2768", "diff_url": "https://github.com/ansible-community/molecule/pull/2768.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2768.patch", "merged_at": "2020-08-10T09:07:48Z"}, "body": "Fixes: #2733\r\nRelated: https://github.com/pallets/click/issues/486\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2768/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2768/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2763", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2763/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2763/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2763/events", "html_url": "https://github.com/ansible-community/molecule/issues/2763", "id": 666445620, "node_id": "MDU6SXNzdWU2NjY0NDU2MjA=", "number": 2763, "title": "Idempotency on --debug doesn't help much", "user": {"login": "yajo", "id": 973709, "node_id": "MDQ6VXNlcjk3MzcwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/973709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yajo", "html_url": "https://github.com/yajo", "followers_url": "https://api.github.com/users/yajo/followers", "following_url": "https://api.github.com/users/yajo/following{/other_user}", "gists_url": "https://api.github.com/users/yajo/gists{/gist_id}", "starred_url": "https://api.github.com/users/yajo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yajo/subscriptions", "organizations_url": "https://api.github.com/users/yajo/orgs", "repos_url": "https://api.github.com/users/yajo/repos", "events_url": "https://api.github.com/users/yajo/events{/privacy}", "received_events_url": "https://api.github.com/users/yajo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-27T17:03:05Z", "updated_at": "2020-08-01T14:55:56Z", "closed_at": "2020-07-28T07:41:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.9\r\n  config file = /var/home/yajo/mydevel/mando/ansible.cfg\r\n  configured module search path = ['/var/home/yajo/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /var/home/yajo/mydevel/mando/.venv/lib64/python3.8/site-packages/ansible\r\n  executable location = /var/home/yajo/mydevel/mando/.venv/bin/ansible\r\n  python version = 3.8.3 (default, May 29 2020, 00:00:00) [GCC 10.1.1 20200507 (Red Hat 10.1.1-1)]\r\nmolecule 3.0.4\r\n   ansible==2.9.9 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen idempotency fails with `--debug`, it should display the full log of the failed tasks.\r\n\r\n# Actual Behaviour\r\n\r\nI have some idempotency failure, but this is what `molecule --debug test --all` prints:\r\n\r\n```\r\nERROR: Idempotence test failed because of the following tasks:\r\n* [basic] => base : start traefik container\r\n* [basic] => nextcloud : start nextcloud container\r\n```\r\n\r\nNot much helpful to debug...", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2763/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2763/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2760", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2760/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2760/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2760/events", "html_url": "https://github.com/ansible-community/molecule/pull/2760", "id": 664245217, "node_id": "MDExOlB1bGxSZXF1ZXN0NDU1NTE1NDI1", "number": 2760, "title": "Fix minor typo on examples.rst", "user": {"login": "qoreQyaS", "id": 4641233, "node_id": "MDQ6VXNlcjQ2NDEyMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/4641233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qoreQyaS", "html_url": "https://github.com/qoreQyaS", "followers_url": "https://api.github.com/users/qoreQyaS/followers", "following_url": "https://api.github.com/users/qoreQyaS/following{/other_user}", "gists_url": "https://api.github.com/users/qoreQyaS/gists{/gist_id}", "starred_url": "https://api.github.com/users/qoreQyaS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qoreQyaS/subscriptions", "organizations_url": "https://api.github.com/users/qoreQyaS/orgs", "repos_url": "https://api.github.com/users/qoreQyaS/repos", "events_url": "https://api.github.com/users/qoreQyaS/events{/privacy}", "received_events_url": "https://api.github.com/users/qoreQyaS/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-07-23T06:58:02Z", "updated_at": "2020-07-23T10:44:14Z", "closed_at": "2020-07-23T10:43:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2760", "html_url": "https://github.com/ansible-community/molecule/pull/2760", "diff_url": "https://github.com/ansible-community/molecule/pull/2760.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2760.patch", "merged_at": "2020-07-23T10:43:47Z"}, "body": "##### SUMMARY\r\ntypo centos9 vs centos8\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2760/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2760/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2757", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2757/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2757/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2757/events", "html_url": "https://github.com/ansible-community/molecule/issues/2757", "id": 662300510, "node_id": "MDU6SXNzdWU2NjIzMDA1MTA=", "number": 2757, "title": "Can't install Molecule with latest Ansible devel releases (2.11)", "user": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 864009245, "node_id": "MDU6TGFiZWw4NjQwMDkyNDU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/upstream-bug", "name": "upstream-bug", "color": "960a21", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-20T21:50:50Z", "updated_at": "2020-08-19T07:39:49Z", "closed_at": "2020-08-19T07:39:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible-base-2.11.0.dev0\r\n\r\n$ molecule --version\r\n3.0.6\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n```\r\npip install molecule\r\n```\r\n\r\nAnsible installation method (one of):\r\n\r\n```\r\npip uninstall -y ansible\r\npip install https://github.com/ansible/ansible/archive/devel.tar.gz --disable-pip-version-check\r\n```\r\n\r\n# Desired Behavior\r\n\r\nMolecule should be able to run with Ansible installed from devel.\r\n\r\n# Actual Behaviour\r\n\r\nMolecule seems to be failing with:\r\n\r\n```\r\npkg_resources.DistributionNotFound: The 'ansible' distribution was not found and is required by the application\r\n```\r\n\r\nThe problem here is that if I install Ansible at devel first, then install Molecule via pip, Ansible 2.9.10 is installed on top of the ansible-base devel install, and that breaks Ansible too.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2757/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2756", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2756/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2756/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2756/events", "html_url": "https://github.com/ansible-community/molecule/issues/2756", "id": 662003365, "node_id": "MDU6SXNzdWU2NjIwMDMzNjU=", "number": 2756, "title": "Roles in playbook-local collections in not working in Molecule 3.0.6 with ansible 2.10", "user": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-07-20T16:16:37Z", "updated_at": "2020-08-22T17:42:38Z", "closed_at": "2020-08-22T17:42:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ molecule --version\r\nmolecule 3.0.6\r\n   ansible==2.10.0a3 python==3.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nEntire configuration is here: https://github.com/geerlingguy/ansible-content-testing\r\n\r\n1. Git clone that repo\r\n2. Install Ansible 2.10 distribution: `pip3 install --pre ansible>=2.10`\r\n3. Run `molecule test` (uses Docker to bring up a `kind` instance)\r\n\r\n\r\n# Desired Behavior\r\n\r\nRoles that are in collections local to a playbook should be picked up and usable by Ansible.\r\n\r\nSee the `example.one` and `example.two` collections in the repository: https://github.com/geerlingguy/ansible-content-testing\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n    TASK [Include a 'test' role from 'example.one' collection.] ********************\r\nERROR! the role 'example.one.test' was not found in community.kubernetes:ansible.legacy:/Users/jgeerling/Development/GitHub/ansible-content-testing/molecule/default/../../roles:/Users/jgeerling/.cache/molecule/ansible-content-testing/default/roles:/Users/jgeerling/Development/GitHub:/Users/jgeerling/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/Users/jgeerling/Development/GitHub/ansible-content-testing/molecule/default/../..\r\n\r\nThe error appears to be in '/Users/jgeerling/Development/GitHub/ansible-content-testing/tasks/same-name-roles.yml': line 4, column 11, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\n\r\nThe offending line appears to be:\r\n\r\n  include_role:\r\n    name: example.one.test\r\n          ^ here\r\n```\r\n\r\nThis started happening once 3.0.6 was released, and I believe the change in https://github.com/ansible-community/molecule/pull/2745 was what triggered the problem.\r\n\r\nThe molecule configuration is in the molecule subdirectory inside the ansible-content-testing repo.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2756/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2756/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2754", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2754/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2754/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2754/events", "html_url": "https://github.com/ansible-community/molecule/pull/2754", "id": 660717787, "node_id": "MDExOlB1bGxSZXF1ZXN0NDUyNDU0MTI2", "number": 2754, "title": "Passdown ANSIBLE_LIBRARY shell environment variable", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-07-19T09:22:26Z", "updated_at": "2021-06-03T20:04:53Z", "closed_at": "2020-07-19T12:14:08Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2754", "html_url": "https://github.com/ansible-community/molecule/pull/2754", "diff_url": "https://github.com/ansible-community/molecule/pull/2754.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2754.patch", "merged_at": "2020-07-19T12:14:07Z"}, "body": "Fixes: #2651\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2754/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2754/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2745", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2745/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2745/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2745/events", "html_url": "https://github.com/ansible-community/molecule/pull/2745", "id": 654664132, "node_id": "MDExOlB1bGxSZXF1ZXN0NDQ3MzQ1MTg1", "number": 2745, "title": "Correct ANSIBLE_COLLECTIONS_PATH", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/27", "html_url": "https://github.com/ansible-community/molecule/milestone/27", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/27/labels", "id": 5640118, "node_id": "MDk6TWlsZXN0b25lNTY0MDExOA==", "number": 27, "title": "3.0.6", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2020-07-10T10:17:41Z", "updated_at": "2020-07-30T15:28:21Z", "due_on": null, "closed_at": "2020-07-30T15:28:21Z"}, "comments": 3, "created_at": "2020-07-10T09:55:25Z", "updated_at": "2020-07-20T16:38:23Z", "closed_at": "2020-07-12T06:59:54Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2745", "html_url": "https://github.com/ansible-community/molecule/pull/2745", "diff_url": "https://github.com/ansible-community/molecule/pull/2745.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2745.patch", "merged_at": "2020-07-12T06:59:54Z"}, "body": "Respect conversion to singular made by\r\nhttps://github.com/ansible/ansible/pull/70007\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2745/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2745/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2743", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2743/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2743/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2743/events", "html_url": "https://github.com/ansible-community/molecule/issues/2743", "id": 653893124, "node_id": "MDU6SXNzdWU2NTM4OTMxMjQ=", "number": 2743, "title": "Patch-level breaking changes", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-09T09:01:36Z", "updated_at": "2020-07-24T16:30:05Z", "closed_at": "2020-07-19T10:13:12Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.10\r\nmolecule 3.0.5\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nPatch version updates should not be incompatible with other releases in the minor release stream.\r\n\r\nError message:\r\n\r\n```\r\n  msg: 'Unexpected templating type error occurred on ({{ molecule_yml.platforms | molecule_get_docker_networks }}): get_docker_networks() missing 1 required positional argument: ''state'''\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n0ed6809e196e97b4906549209fb25ca5b3f1bab2 introduce a breaking change to Molecule with the 3.0.5 release. Previous playbooks which ran fine against 3.0.4 now failed while provisioning their Docker target. Since there does not appear to be any way that the Ansible default provision/destroy code is deployed with Molecule in a manner that allows it to be updated in the future, this represents a problem. New scenarios will, obviously, get the new version of the create.yml but existing changes will not.\r\n\r\nPlease, either do not introduce changes that break the code, or move to a model of distributing the default create/destroy code as a role or collection that can be updated when Molecule is updated.\r\n\r\nFor our project, we have moved the provisioning of resources with Molecule into a collection and then just rely on that collection and role so that when changes like this come along our code is successful. You can find our collection's role, here: https://github.com/oasis-roles/ansible_collection_system/tree/master/roles/molecule_docker_ci and see it in use in various scenarios throughout the collection.\r\n\r\nThis particular bug was fixed by https://github.com/oasis-roles/ansible_collection_system/commit/7bc3d63a023c7f7fee21e880b0245d865da5e7f9 derived from the molecule changeset that introduced the break.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2743/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2743/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2734", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2734/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2734/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2734/events", "html_url": "https://github.com/ansible-community/molecule/issues/2734", "id": 645755365, "node_id": "MDU6SXNzdWU2NDU3NTUzNjU=", "number": 2734, "title": "Docker Image 3.0.4: Alpine Linux Removed Python Symlink", "user": {"login": "daurrutia", "id": 13512616, "node_id": "MDQ6VXNlcjEzNTEyNjE2", "avatar_url": "https://avatars.githubusercontent.com/u/13512616?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daurrutia", "html_url": "https://github.com/daurrutia", "followers_url": "https://api.github.com/users/daurrutia/followers", "following_url": "https://api.github.com/users/daurrutia/following{/other_user}", "gists_url": "https://api.github.com/users/daurrutia/gists{/gist_id}", "starred_url": "https://api.github.com/users/daurrutia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daurrutia/subscriptions", "organizations_url": "https://api.github.com/users/daurrutia/orgs", "repos_url": "https://api.github.com/users/daurrutia/repos", "events_url": "https://api.github.com/users/daurrutia/events{/privacy}", "received_events_url": "https://api.github.com/users/daurrutia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-25T18:08:43Z", "updated_at": "2020-07-19T10:14:47Z", "closed_at": "2020-07-19T10:14:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\nAlpine Linux seems to have deprecated the use of the `python` command. The command specifying the version seems to be required now (e.g., `python3`). \r\n\r\nThis may cause issues for the recent Molecule docker images.\r\n\r\nRelated:\r\n- https://github.com/docker-library/docker/issues/240\r\n- https://stackoverflow.com/questions/62169568/docker-alpine-linux-python-missing\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.10\r\n  config file = None\r\n  configured module search path = [u'/home/ec2-user/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ec2-user/project0/env/lib/python2.7/site-packages/ansible\r\n  executable location = /home/ec2-user/project0/env/bin/ansible\r\n  python version = 2.7.16 (default, Dec 12 2019, 23:58:22) [GCC 7.3.1 20180712 (Red Hat 7.3.1-6)]\r\nmolecule 3.0.2.1\r\n   ansible==2.9.10 python==2.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nMolecule creates the molecule:3.0.4 docker image successfully\r\n\r\n# Actual Behaviour\r\n\r\n```\r\nUsing module file /home/ec2-user/project0/env/lib/python2.7/site-packages/ansible/modules/cloud/docker/docker_image.py\r\n    Pipelining is enabled.\r\n    <127.0.0.1> EXEC /bin/sh -c '/home/ec2-user/project0/env/bin/python && sleep 0'\r\n    failed: [localhost] (item=molecule_local/quay.io/ansible/molecule:3.0.4) => {\r\n        \"ansible_loop_var\": \"item\", \r\n        \"attempts\": 3, \r\n        \"changed\": false, \r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"api_version\": \"auto\", \r\n                \"archive_path\": null, \r\n                \"build\": {\r\n                    \"args\": null, \r\n                    \"cache_from\": null, \r\n                    \"container_limits\": null, \r\n                    \"dockerfile\": \"/home/ec2-user/.cache/molecule/mymoleculerole/default/Dockerfile_quay_io_ansible_molecule_3_0_4\",\r\n                    \"etc_hosts\": null, \r\n                    \"http_timeout\": null, \r\n                    \"network\": null, \r\n                    \"nocache\": false, \r\n                    \"path\": \"/home/ec2-user/.cache/molecule/mymoleculerole/default\", \r\n                    \"pull\": true, \r\n                    \"rm\": true, \r\n                    \"target\": null, \r\n                    \"use_config_proxy\": null\r\n                }, \r\n                \"buildargs\": null, \r\n                \"ca_cert\": null, \r\n                \"client_cert\": null, \r\n                \"client_key\": null, \r\n                \"container_limits\": null, \r\n                \"debug\": false, \r\n                \"docker_host\": \"unix://var/run/docker.sock\", \r\n                \"dockerfile\": null, \r\n                \"force\": null, \r\n                \"force_absent\": false, \r\n                \"force_source\": true, \r\n                \"force_tag\": false, \r\n                \"http_timeout\": null, \r\n                \"load_path\": null, \r\n                \"name\": \"molecule_local/quay.io/ansible/molecule:3.0.4\", \r\n                \"nocache\": false, \r\n                \"path\": null, \r\n                \"pull\": null, \r\n                \"push\": false, \r\n                \"repository\": null, \r\n                \"rm\": true, \r\n                \"source\": \"build\", \r\n                \"ssl_version\": null, \r\n                \"state\": \"present\", \r\n                \"tag\": \"latest\", \r\n                \"timeout\": 60, \r\n                \"tls\": false, \r\n                \"tls_hostname\": \"localhost\", \r\n                \"tls_verify\": false, \r\n                \"use_tls\": null, \r\n                \"validate_certs\": false\r\n            }\r\n        }, \r\n        \"item\": {\r\n            \"ansible_index_var\": \"i\", \r\n            \"ansible_loop_var\": \"item\", \r\n            \"changed\": true, \r\n            \"checksum\": \"b634fe63c7c88748376fce315554b945ac07e496\", \r\n            \"dest\": \"/home/ec2-user/.cache/molecule/mymoleculerole/default/Dockerfile_quay_io_ansible_molecule_3_0_4\", \r\n            \"diff\": [\r\n                {\r\n                    \"after\": \" [[ Diff output has been hidden because 'no_log: true' was specified for this result ]]\\n\",        \r\n                    \"after_header\": \"/home/ec2-user/.ansible/tmp/ansible-local-56247_q8G3/tmpYJwpaN/Dockerfile.j2\", \r\n                    \"before\": \"\"\r\n                }\r\n            ], \r\n            \"failed\": false, \r\n            \"gid\": 1000, \r\n            \"group\": \"ec2-user\", \r\n            \"i\": 0, \r\n            \"invocation\": {\r\n                \"module_args\": {\r\n                    \"_original_basename\": \"Dockerfile.j2\", \r\n                    \"attributes\": null, \r\n                    \"backup\": false, \r\n                    \"checksum\": \"b634fe63c7c88748376fce315554b945ac07e496\", \r\n                    \"content\": null, \r\n                    \"delimiter\": null, \r\n                    \"dest\": \"/home/ec2-user/.cache/molecule/mymoleculerole/default/Dockerfile_quay_io_ansible_molecule_3_0_4\",   \r\n                    \"directory_mode\": null, \r\n                    \"follow\": false, \r\n                    \"force\": true, \r\n                    \"group\": null, \r\n                    \"local_follow\": null, \r\n                    \"mode\": null, \r\n                    \"owner\": null, \r\n                    \"regexp\": null, \r\n                    \"remote_src\": null, \r\n                    \"selevel\": null, \r\n                    \"serole\": null, \r\n                    \"setype\": null, \r\n                    \"seuser\": null, \r\n                    \"src\": \"/home/ec2-user/.ansible/tmp/ansible-tmp-1593100655.69-5646-265481846846146/source\", \r\n                    \"unsafe_writes\": null, \r\n                    \"validate\": null\r\n                }\r\n            }, \r\n            \"item\": {\r\n                \"image\": \"quay.io/ansible/molecule:3.0.4\", \r\n                \"name\": \"instance\", \r\n                \"pre_build_image\": false, \r\n                \"volumes\": [\r\n                    \"/var/run/docker.sock:/var/run/docker.sock\"\r\n                ]\r\n            }, \r\n            \"md5sum\": \"0e85cd8c7bca9916c8e0aa51a37e792b\", \r\n            \"mode\": \"0664\", \r\n            \"owner\": \"ec2-user\", \r\n            \"size\": 993, \r\n            \"src\": \"/home/ec2-user/.ansible/tmp/ansible-tmp-1593100655.69-5646-265481846846146/source\", \r\n            \"state\": \"file\", \r\n            \"uid\": 1000\r\n        }, \r\n        \"msg\": \"Error building molecule_local/quay.io/ansible/molecule - code: 1, message: The command '/bin/sh -c if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates iproute2 python-apt aptitude && apt-get clean;     elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install /usr/bin/python3 /usr/bin/python3-config /usr/bin/dnf-3 sudo bash iproute && dnf clean all;     elif [ $(command -v yum) ]; then yum makecache fast && yum install -y /usr/bin/python /usr/bin/python2-config sudo yum-plugin-ovl bash iproute && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all;     elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash python-xml iproute2 && zypper clean -a;     elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates;     elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates iproute2 && xbps-remove -O; fi' returned a non-zero code: 1, logs: [u'Step 1/2 : FROM quay.io/ansible/molecule:3.0.4', u'\\\\n', u' ---> fb05502b5f2f\\\\n', u\\\"Step 2/2 : RUN if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates iproute2 \r\npython-apt aptitude && apt-get clean;     elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install /usr/bin/python3 /usr/bin/python3-config /usr/bin/dnf-3 sudo bash iproute && dnf clean all;     elif [ $(command -v yum) ]; then yum makecache fast && yum install -y /usr/bin/python /usr/bin/python2-config sudo yum-plugin-ovl bash iproute && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all;     elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash \r\npython-xml iproute2 && zypper clean -a;     elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates;     elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates iproute2 && xbps-remove -O; fi\\\", u'\\\\n', u' ---> Running in 5f3463f7d8ef\\\\n', u'fetch http://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz\\\\n', u'fetch http://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\\\\n', u'v3.12.0-1300-g351d3917f1 [http://dl-cdn.alpinelinux.org/alpine/edge/main]\\\\n', u'v3.12.0-1306-g970e94e4f8 [http://dl-cdn.alpinelinux.org/alpine/edge/community]\\\\n', u'OK: 12918 distinct packages available\\\\n', u'fetch http://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz\\\\n', u'fetch http://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\\\\n', u'\\\\x1b[91mERROR: \\\\x1b[0m', u'\\\\x1b[91munsatisfiable constraints:\\\\x1b[0m', u'\\\\x1b[91m\\\\n\\\\x1b[0m', u'  python (missing):\\\\n    required \r\nby: world[python]\\\\n', u'Removing intermediate container 5f3463f7d8ef\\\\n']\"\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2734/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2734/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2733", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2733/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2733/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2733/events", "html_url": "https://github.com/ansible-community/molecule/issues/2733", "id": 644164099, "node_id": "MDU6SXNzdWU2NDQxNjQwOTk=", "number": 2733, "title": "Help output is truncated", "user": {"login": "mperry2", "id": 2487505, "node_id": "MDQ6VXNlcjI0ODc1MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2487505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mperry2", "html_url": "https://github.com/mperry2", "followers_url": "https://api.github.com/users/mperry2/followers", "following_url": "https://api.github.com/users/mperry2/following{/other_user}", "gists_url": "https://api.github.com/users/mperry2/gists{/gist_id}", "starred_url": "https://api.github.com/users/mperry2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mperry2/subscriptions", "organizations_url": "https://api.github.com/users/mperry2/orgs", "repos_url": "https://api.github.com/users/mperry2/repos", "events_url": "https://api.github.com/users/mperry2/events{/privacy}", "received_events_url": "https://api.github.com/users/mperry2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-06-23T21:39:23Z", "updated_at": "2020-08-10T09:07:48Z", "closed_at": "2020-08-10T09:07:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.9\r\n  config file = /export/home/mperry/.ansible.cfg\r\n  configured module search path = ['/export/home/mperry/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /export/home/mperry/.local/lib/python3.7/site-packages/ansible\r\n  executable location = /export/home/mperry/.local/bin/ansible\r\n  python version = 3.7.3 (default, Dec 20 2019, 18:57:59) [GCC 8.3.0]\r\nmolecule 3.0.4\r\n   ansible==2.9.9 python==3.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- n/a\r\n\r\n# Desired Behavior\r\n\r\nThe help output should have complete sentences and describe the function of each command. The output should continue on to a new line if necessary similar to the help output of the `-c` and `-e` options listed in the \"Options\" section of the help.\r\n\r\n# Actual Behaviour\r\n\r\nSome of the help output for the molecule commands is truncated with an ellipsis. Many of these are incomplete sentences, so the help output for those commands is not useful.\r\n\r\nExample output is reproduced below where you can see the check, cleanup, converge, idempotence, prepare, and test commands have incomplete output.\r\n\r\n```\r\n$ molecule --help\r\nUsage: molecule [OPTIONS] COMMAND [ARGS]...\r\n\r\n  Molecule aids in the development and testing of Ansible roles.\r\n\r\n  Enable autocomplete issue:\r\n\r\n    eval \"$(_MOLECULE_COMPLETE=source molecule)\"\r\n\r\nOptions:\r\n  --debug / --no-debug    Enable or disable debug mode. Default is disabled.\r\n  -c, --base-config TEXT  Path to a base config.  If provided Molecule will\r\n                          load this config first, and deep merge each\r\n                          scenario's molecule.yml on top. By default is\r\n                          looking for config in current VCS repository and if\r\n                          not found it will look on user home.\r\n                          (/export/home/mperry/.config/molecule/config.yml)\r\n\r\n  -e, --env-file TEXT     The file to read variables from when rendering\r\n                          molecule.yml. (.env.yml)\r\n\r\n  --version               Show the version and exit.\r\n  --help                  Show this message and exit.\r\n\r\nCommands:\r\n  check        Use the provisioner to perform a Dry-Run (destroy,...\r\n  cleanup      Use the provisioner to cleanup any changes made to external...\r\n  converge     Use the provisioner to configure instances (dependency,...\r\n  create       Use the provisioner to start the instances.\r\n  dependency   Manage the role's dependencies.\r\n  destroy      Use the provisioner to destroy the instances.\r\n  drivers      List drivers.\r\n  idempotence  Use the provisioner to configure the instances and parse the...\r\n  init         Initialize a new role or scenario.\r\n  lint         Lint the role (dependency, lint).\r\n  list         List status of instances.\r\n  login        Log in to one instance.\r\n  matrix       List matrix of steps used to test instances.\r\n  prepare      Use the provisioner to prepare the instances into a...\r\n  reset        Reset molecule temporary folders.\r\n  side-effect  Use the provisioner to perform side-effects to the instances.\r\n  syntax       Use the provisioner to syntax check the role.\r\n  test         Test (dependency, lint, cleanup, destroy, syntax, create,...\r\n  verify       Run automated tests against instances.\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2733/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2733/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2729", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2729/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2729/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2729/events", "html_url": "https://github.com/ansible-community/molecule/pull/2729", "id": 641888636, "node_id": "MDExOlB1bGxSZXF1ZXN0NDM3MDM3MTgy", "number": 2729, "title": "Workaround pip editable install bug", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/26", "html_url": "https://github.com/ansible-community/molecule/milestone/26", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/26/labels", "id": 5359351, "node_id": "MDk6TWlsZXN0b25lNTM1OTM1MQ==", "number": 26, "title": "3.0.5", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2020-04-28T12:25:34Z", "updated_at": "2020-10-27T15:25:29Z", "due_on": "2020-07-01T07:00:00Z", "closed_at": "2020-07-30T15:28:24Z"}, "comments": 0, "created_at": "2020-06-19T11:01:26Z", "updated_at": "2020-06-19T13:58:06Z", "closed_at": "2020-06-19T13:58:06Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2729", "html_url": "https://github.com/ansible-community/molecule/pull/2729", "diff_url": "https://github.com/ansible-community/molecule/pull/2729.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2729.patch", "merged_at": "2020-06-19T13:58:06Z"}, "body": "Implements workaround for failure to install as editable on certain\r\ncases when --user is mentioned.\r\n\r\nRelated: https://github.com/pypa/pip/issues/7953\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2729/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2729/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2726", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2726/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2726/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2726/events", "html_url": "https://github.com/ansible-community/molecule/issues/2726", "id": 640253200, "node_id": "MDU6SXNzdWU2NDAyNTMyMDA=", "number": 2726, "title": "ansible2.10 loops can produce results with None inside", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-06-17T08:37:34Z", "updated_at": "2020-10-20T19:08:18Z", "closed_at": "2020-10-20T19:08:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I observed that with Ansible 2.10 we can get get unexpected \"None\" item inside `.results` member product by register when used with loops.\r\n\r\nThis broke some of our destroy tests on both docker and podman drivers by failing inside \"Wait for instance(s) deletion to complete\".\r\n\r\nClearly this bug is not specific to the module used by the loop because I seen it with both `shell` and `docker_container` modules. At least these can still return `None`.\r\n\r\nDebugging these failure was far from a pleasure because stderr/stdout are split and also because these task are usually run with no_log, but that is another problem.\r\n\r\n@sshnaidm ^ What do you think? Example: https://dashboard.zuul.ansible.com/t/ansible/build/0d314a5f84cc458c93659e003118d380\r\n\r\nEasy to reproduce locally with:\r\n```\r\ntox -e py36-ansibledevel-functional -- -k test_command_dependency_gilt\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2726/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2723", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2723/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2723/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2723/events", "html_url": "https://github.com/ansible-community/molecule/issues/2723", "id": 638632844, "node_id": "MDU6SXNzdWU2Mzg2MzI4NDQ=", "number": 2723, "title": "testing: docker and new cgroups issues", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-06-15T08:02:47Z", "updated_at": "2020-06-15T14:31:34Z", "closed_at": "2020-06-15T14:31:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Docker does not yet support the newly introduced cgroups v2 and due to this is considered broken on newer OS-es like CentOS 8+ and Fedora 31+.\r\n\r\nDue to this we need to avoid testing molecule docker functionality on these systems and rely on other platforms to provide coverage on docker driver.\r\n\r\nWhen docker is broken you will likely see a \r\n```\r\n500 Server Error: Internal Server Error\r\ncgroups: cgroup mountpoint does not exist: unknown\r\n```\r\n\r\nThe documented woraround is to change kernel boot parameters to enable the old cgroups but at this moment we cannot do this on CI/CD as it requires reboot. \r\n\r\nMy guess is that pre-baking this in Zuul images could prove problematic because it would affect other engines like podman (needs confirmation).\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2723/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2723/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2709", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2709/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2709/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2709/events", "html_url": "https://github.com/ansible-community/molecule/pull/2709", "id": 628852544, "node_id": "MDExOlB1bGxSZXF1ZXN0NDI2MzEyNDUw", "number": 2709, "title": "Pass ansible_args to idempotence command", "user": {"login": "liuyangc3", "id": 6705844, "node_id": "MDQ6VXNlcjY3MDU4NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6705844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liuyangc3", "html_url": "https://github.com/liuyangc3", "followers_url": "https://api.github.com/users/liuyangc3/followers", "following_url": "https://api.github.com/users/liuyangc3/following{/other_user}", "gists_url": "https://api.github.com/users/liuyangc3/gists{/gist_id}", "starred_url": "https://api.github.com/users/liuyangc3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liuyangc3/subscriptions", "organizations_url": "https://api.github.com/users/liuyangc3/orgs", "repos_url": "https://api.github.com/users/liuyangc3/repos", "events_url": "https://api.github.com/users/liuyangc3/events{/privacy}", "received_events_url": "https://api.github.com/users/liuyangc3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/26", "html_url": "https://github.com/ansible-community/molecule/milestone/26", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/26/labels", "id": 5359351, "node_id": "MDk6TWlsZXN0b25lNTM1OTM1MQ==", "number": 26, "title": "3.0.5", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2020-04-28T12:25:34Z", "updated_at": "2020-10-27T15:25:29Z", "due_on": "2020-07-01T07:00:00Z", "closed_at": "2020-07-30T15:28:24Z"}, "comments": 1, "created_at": "2020-06-02T02:30:57Z", "updated_at": "2020-06-19T08:26:17Z", "closed_at": "2020-06-19T08:26:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2709", "html_url": "https://github.com/ansible-community/molecule/pull/2709", "diff_url": "https://github.com/ansible-community/molecule/pull/2709.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2709.patch", "merged_at": "2020-06-19T08:26:17Z"}, "body": "see #2449 \r\n\r\n#### PR Type\r\n\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2709/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2704", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2704/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2704/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2704/events", "html_url": "https://github.com/ansible-community/molecule/issues/2704", "id": 625854203, "node_id": "MDU6SXNzdWU2MjU4NTQyMDM=", "number": 2704, "title": "Building a ubuntu:20.04 container gets stuck because it's interrupted by dpkg", "user": {"login": "rsguhr", "id": 20595746, "node_id": "MDQ6VXNlcjIwNTk1NzQ2", "avatar_url": "https://avatars.githubusercontent.com/u/20595746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsguhr", "html_url": "https://github.com/rsguhr", "followers_url": "https://api.github.com/users/rsguhr/followers", "following_url": "https://api.github.com/users/rsguhr/following{/other_user}", "gists_url": "https://api.github.com/users/rsguhr/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsguhr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsguhr/subscriptions", "organizations_url": "https://api.github.com/users/rsguhr/orgs", "repos_url": "https://api.github.com/users/rsguhr/repos", "events_url": "https://api.github.com/users/rsguhr/events{/privacy}", "received_events_url": "https://api.github.com/users/rsguhr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-05-27T16:42:09Z", "updated_at": "2020-06-17T15:32:51Z", "closed_at": "2020-06-17T15:32:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nquay.io/ansible/molecule:3.0.3 and master\r\n```\r\n\r\n\r\n# Desired Behavior\r\n\r\nBuilding of ubuntu:20.04 with `pre_build_image:false` option and upstream [Dockerfile.j2](https://raw.githubusercontent.com/ansible-community/molecule/master/molecule/data/Dockerfile.j2) \r\n\r\n# Actual Behaviour\r\n\r\nWhen using the [Dockerfile.j2](https://raw.githubusercontent.com/ansible-community/molecule/master/molecule/data/Dockerfile.j2) from master, the building process stucks when using the latest LTS version of ubuntu. Because one of the packages that will be installed needs tzdata. dpkg interrupts the installation process and raises a question.\r\n\r\n```\r\n[...]\r\nSetting up tzdata (2020a-0ubuntu0.20.04) ...\r\ndebconf: unable to initialize frontend: Dialog\r\ndebconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 76.)\r\ndebconf: falling back to frontend: Readline\r\nConfiguring tzdata\r\n------------------\r\n\r\nPlease select the geographic area in which you live. Subsequent configuration questions will narrow this down by presenting a list of cities, representing the time zones in which they are located.\r\n\r\n  1. Africa  2. America  3. Antarctica  4. Australia  5. Arctic  6. Asia  7. Atlantic  8. Europe  9. Indian  10. Pacific  11. SystemV  12. US  13. Etc\r\nGeographic area:\r\n```\r\n\r\n\r\n# Possible Solutions\r\n\r\nSet `DEBIAN_FRONTEND=noninteractive` as `ARG` in the Dockerfile or adjust the `apt-get` command to `DEBIAN_FRONTEND=noninteractive apt-get install ...`", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2704/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2704/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2693", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2693/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2693/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2693/events", "html_url": "https://github.com/ansible-community/molecule/issues/2693", "id": 614715762, "node_id": "MDU6SXNzdWU2MTQ3MTU3NjI=", "number": 2693, "title": "Docker - pre-created network removed in create.yml", "user": {"login": "Thulium-Drake", "id": 12935477, "node_id": "MDQ6VXNlcjEyOTM1NDc3", "avatar_url": "https://avatars.githubusercontent.com/u/12935477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Thulium-Drake", "html_url": "https://github.com/Thulium-Drake", "followers_url": "https://api.github.com/users/Thulium-Drake/followers", "following_url": "https://api.github.com/users/Thulium-Drake/following{/other_user}", "gists_url": "https://api.github.com/users/Thulium-Drake/gists{/gist_id}", "starred_url": "https://api.github.com/users/Thulium-Drake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Thulium-Drake/subscriptions", "organizations_url": "https://api.github.com/users/Thulium-Drake/orgs", "repos_url": "https://api.github.com/users/Thulium-Drake/repos", "events_url": "https://api.github.com/users/Thulium-Drake/events{/privacy}", "received_events_url": "https://api.github.com/users/Thulium-Drake/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-05-08T12:35:18Z", "updated_at": "2020-06-29T07:10:14Z", "closed_at": "2020-06-29T07:10:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nSee below\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Behavior\r\nEDIT: Further testing has shown that this seems to be a bug introduced with Molecule 3.0.4. I ran the test again after installing Molecule 3.0.2.1 from pip3. I can't test if it also happens with Molecule 3.0.4 and Python2, as it is not available.\r\n\r\nAfter converting my Ansible dev environment (where I normally make roles) to python3 only, something broke in the docker networking.\r\n\r\nGiven the following molecule.yml (a seperate dependency.yml is in place to create the network mentioned):\r\n```\r\n---\r\ndependency:\r\n  name: 'shell'\r\n  command: ansible-playbook ${MOLECULE_PROJECT_DIRECTORY}/molecule/default/dependency.yml -i localhost,\r\ndriver:\r\n  name: 'docker'\r\nlint: |\r\n  set -e\r\n  yamllint -c molecule/default/yamllint.yml .\r\n  ansible-lint molecule/default/converge.yml\r\nplatforms:\r\n  - name: \"acme-ssl-client\"\r\n    image: \"geerlingguy/docker-${MOLECULE_DISTRO:-debian10}-ansible:latest\"\r\n    command: '/lib/systemd/systemd'\r\n    pre_build_image: true\r\n    volumes:\r\n      - '/sys/fs/cgroup:/sys/fs/cgroup:ro'\r\n    privileged: true\r\n    networks:\r\n      - name: \"acmenet\"\r\n        ipv4_address: '10.30.50.12'\r\n  - name: \"acme-ssl-helper\"\r\n    image: \"geerlingguy/docker-debian10-ansible:latest\"\r\n    command: '/lib/systemd/systemd'\r\n    pre_build_image: true\r\n    volumes:\r\n      - '/sys/fs/cgroup:/sys/fs/cgroup:ro'\r\n    privileged: true\r\n    networks:\r\n      - name: \"acmenet\"\r\n        ipv4_address: '10.30.50.11'\r\n  - name: 'pebble'\r\n    image: 'letsencrypt/pebble'\r\n    command: 'pebble --dnsserver 10.30.50.11:53'\r\n    pre_build_image: true\r\n    networks:\r\n      - name: \"acmenet\"\r\n        ipv4_address: '10.30.50.10'\r\nprovisioner:\r\n  name: 'ansible'\r\n```\r\nFor this environment to work, I need to be able to assign static IPs to each of the docker containers. This used to work, but after converting to python3 only, I received the following error message from Docker: ```400 Client Error: Bad Request (\"user specified IP address is supported only when connecting to networks with user configured subnets\")```\r\n\r\n## Python 3\r\nWhen running ```molecule create``` with python3, I can observe the following actions on the Docker daemon for networks. I have commented for clarity:\r\n```\r\n2020-05-08T13:05:03.393276006+02:00 network destroy a5941947a10d00e5d6c31113c4e79ab5a5072e4701639d65d5e065dbdda03082 (name=acmenet, type=bridge) # Precreation destroy\r\n2020-05-08T13:05:18.444261785+02:00 network create eb0f4bc5ff8b0185d874df2712bec7fd72f432ec58c01446e18382e04c677c9e (name=acmenet, type=bridge) # Created by dependency.yml\r\n2020-05-08T13:05:24.939964452+02:00 network destroy eb0f4bc5ff8b0185d874df2712bec7fd72f432ec58c01446e18382e04c677c9e (name=acmenet, type=bridge) # Destroyed for some reason\r\n2020-05-08T13:05:24.986557118+02:00 network create e779303608cf568594d3868eeb4f5de063c2badd29cf3aaf63db89de682a59cf (name=acmenet, type=bridge) # Created by create.yml, broken as it does not accept user-set IP addresses for containers\r\n```\r\n\r\nMolecule task output:\r\n```\r\n    TASK [Create docker network(s)] ************************************************\r\n    changed: [localhost] => (item=acmenet)\r\n    ok: [localhost] => (item=acmenet)\r\n    ok: [localhost] => (item=acmenet)\r\n    \r\n```\r\nMolecule --version\r\n```\r\nmolecule 3.0.4\r\n   ansible==2.9.7 python==3.7\r\n```\r\n\r\n## Python 2\r\nRunning the same config with python2, gives the following output on the Docker daemon:\r\n```\r\n2020-05-08T14:26:54.063793066+02:00 network create 3e7457009acb86e1c5f29ebfa3379a9a51f16ed5147077dedd2c616d327fc673 (name=acmenet, type=bridge) \r\n```\r\n\r\nMolecule task output:\r\n```\r\nTASK [Create docker network(s)] ************************************************\r\n    ok: [localhost] => (item=acmenet)\r\n    ok: [localhost] => (item=acmenet)\r\n    ok: [localhost] => (item=acmenet)\r\n```\r\nmolecule --version\r\n```\r\nmolecule 3.0.2.1\r\n   ansible==2.9.7 python==2.7\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2693/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2692", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2692/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2692/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2692/events", "html_url": "https://github.com/ansible-community/molecule/issues/2692", "id": 613935456, "node_id": "MDU6SXNzdWU2MTM5MzU0NTY=", "number": 2692, "title": "Specifying playbook for `verify` step does not resolve relative paths", "user": {"login": "deepbrook", "id": 12763351, "node_id": "MDQ6VXNlcjEyNzYzMzUx", "avatar_url": "https://avatars.githubusercontent.com/u/12763351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deepbrook", "html_url": "https://github.com/deepbrook", "followers_url": "https://api.github.com/users/deepbrook/followers", "following_url": "https://api.github.com/users/deepbrook/following{/other_user}", "gists_url": "https://api.github.com/users/deepbrook/gists{/gist_id}", "starred_url": "https://api.github.com/users/deepbrook/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deepbrook/subscriptions", "organizations_url": "https://api.github.com/users/deepbrook/orgs", "repos_url": "https://api.github.com/users/deepbrook/repos", "events_url": "https://api.github.com/users/deepbrook/events{/privacy}", "received_events_url": "https://api.github.com/users/deepbrook/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-07T10:10:15Z", "updated_at": "2020-06-23T05:46:43Z", "closed_at": "2020-06-23T05:46:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/nls/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/nls/.virtualenvs/ansible-role-bb-consul/lib/python3.6/site-packages/ansible\r\n  executable location = /home/nls/.virtualenvs/ansible-role-bb-consul/bin/ansible\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nmolecule 3.0.5.dev13+ga99c2c2d\r\n   ansible==2.9.6 python==3.6\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- from git, via pip..\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n- yamllint, ansible-lint\r\n- ansible\r\n\r\n# Desired Behavior\r\nExecute the `verify.yml` playbook in `molecule/shared`.\r\n\r\n# Actual Behaviour\r\n\r\ntl;dr: `verify` step is skipped, as molecule claims no playbook was configured.\r\n\r\ndirectory structure:\r\n```bash\r\nmolecule/\r\n  default/\r\n    molecule.yml\r\n  shared/\r\n    converge.yml\r\n    verify.yml\r\n```\r\n\r\nFile contents\r\n```bash\r\ncat molecule/default/molecule.yml\r\n---\r\ndriver:\r\n  name: docker\r\nlint: |\r\n  set -e\r\n  yamllint .\r\n  ansible-lint .\r\n\r\nplatforms:\r\n  - name: consul-server\r\n    image: \"geerlingguy/docker-ubuntu1804-ansible:latest\"\r\n    dockerfile: ../shared/Dockerfile.j2\r\n    command: ${MOLECULE_DOCKER_COMMAND:-\"\"}\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    privileged: true\r\n    pre_build_image: true\r\n\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_PYTHON_INTERPRETER: /usr/bin/python3\r\n  options:\r\n    extra_vars:\r\n      consul_config:\r\n        server: yes\r\n        retry_join: [\"127.0.0.1\"]\r\n        bootstrap_expect: 1\r\n\r\n  playbooks:\r\n    converge: ../shared/converge.yml\r\n\r\nverifier:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_PYTHON_INTERPRETER: /usr/bin/python3\r\n  playbooks:\r\n    verify: ../.shared/verify.yml\r\n...\r\ncat molecule/shared/converge.yml\r\n---\r\n- name: Converge\r\n  hosts: all\r\n  roles:\r\n    - role: ansible-role-bb-consul\r\n...\r\ncat molecule/shared/verify.yml\r\n- name: Verify\r\n  hosts: all\r\n  tasks:\r\n    - debug: {msg: \"executed\"}\r\n```\r\n\r\n---\r\n\r\nI initially had the verify playbook listed under the `provisioner` key instead of under `verifier`, like so:\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_PYTHON_INTERPRETER: /usr/bin/python3\r\n  options:\r\n    extra_vars:\r\n      consul_config:\r\n        server: yes\r\n        retry_join: [\"127.0.0.1\"]\r\n        bootstrap_expect: 1\r\n\r\n  playbooks:\r\n    converge: ../shared/converge.yml\r\n    verify: ../.shared/verify.yml\r\n\r\nverifier:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_PYTHON_INTERPRETER: /usr/bin/python3\r\n...\r\n```\r\n\r\nThat, however, yields the same result.\r\n\r\nThe `converge.yml` is executed as expected, which makes this even weirder.\r\n\r\nHere's the log of `molecule --debug test`:\r\n\r\nhttps://gist.github.com/nlsdfnbch/3bab0bff514bda71a9a23703dd816eb6\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2692/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2692/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2690", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2690/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2690/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2690/events", "html_url": "https://github.com/ansible-community/molecule/pull/2690", "id": 613424263, "node_id": "MDExOlB1bGxSZXF1ZXN0NDE0MTgwODQ1", "number": 2690, "title": "Fix issue with finding collections", "user": {"login": "ericsysmin", "id": 3591551, "node_id": "MDQ6VXNlcjM1OTE1NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3591551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericsysmin", "html_url": "https://github.com/ericsysmin", "followers_url": "https://api.github.com/users/ericsysmin/followers", "following_url": "https://api.github.com/users/ericsysmin/following{/other_user}", "gists_url": "https://api.github.com/users/ericsysmin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericsysmin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericsysmin/subscriptions", "organizations_url": "https://api.github.com/users/ericsysmin/orgs", "repos_url": "https://api.github.com/users/ericsysmin/repos", "events_url": "https://api.github.com/users/ericsysmin/events{/privacy}", "received_events_url": "https://api.github.com/users/ericsysmin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-06T15:48:20Z", "updated_at": "2020-05-07T20:36:37Z", "closed_at": "2020-05-07T20:36:37Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2690", "html_url": "https://github.com/ansible-community/molecule/pull/2690", "diff_url": "https://github.com/ansible-community/molecule/pull/2690.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2690.patch", "merged_at": "2020-05-07T20:36:37Z"}, "body": "Collections are not in .ansible, but in .ansible/collections\r\n```\r\nRun ansible-galaxy collection install $COLLECTION_FILE\r\nProcess install dependency map\r\n|\bStarting collection install process\r\n|\bInstalling 'ericsysmin.system:1.0.0' to '/home/runner/.ansible/collections/ansible_collections/ericsysmin/system'\r\n```\r\n\r\nBut when molecule loads, it's attempting to load collections directly from /home/runner/.ansible which is not correct\r\n```\r\nANSIBLE_COLLECTIONS_PATHS: /home/runner/.cache/molecule/ansible-collection-system/chrony/collections:/home/runner/.ansible:/usr/share/ansible/collections:/etc/ansible/collections\r\n```\r\n\r\nI was able to confirm that using \r\n```\r\nansible-galaxy collection install $COLLECTION_FILE -p /home/runner/.ansible\r\n```\r\nwas a workaround, but definitely not the correct way.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2690/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2683", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2683/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2683/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2683/events", "html_url": "https://github.com/ansible-community/molecule/issues/2683", "id": 610017917, "node_id": "MDU6SXNzdWU2MTAwMTc5MTc=", "number": 2683, "title": "Platform multi-word name causes instance failure", "user": {"login": "kevingentile", "id": 10604101, "node_id": "MDQ6VXNlcjEwNjA0MTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10604101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevingentile", "html_url": "https://github.com/kevingentile", "followers_url": "https://api.github.com/users/kevingentile/followers", "following_url": "https://api.github.com/users/kevingentile/following{/other_user}", "gists_url": "https://api.github.com/users/kevingentile/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevingentile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevingentile/subscriptions", "organizations_url": "https://api.github.com/users/kevingentile/orgs", "repos_url": "https://api.github.com/users/kevingentile/repos", "events_url": "https://api.github.com/users/kevingentile/events{/privacy}", "received_events_url": "https://api.github.com/users/kevingentile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-30T13:50:44Z", "updated_at": "2020-10-12T11:03:46Z", "closed_at": "2020-10-12T11:03:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.9.7\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/etc/ansible-playbook/library']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\nmolecule 3.0.3\r\n   ansible==2.9.7 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nThe platform name section supports a valid yaml string irrespective of underlying constraints\r\n\r\n# Actual Behaviour\r\n\r\nDuring the instance creation phase the `\"sample instance\"` name fails due to the space between words:\r\n```\r\n# molecule.yml\r\nplatforms:\r\n  - name: \"sample instance\"\r\n    image: <my_image>\r\n    user: <my_user>\r\n    hostname: <my_hostname>\r\n    ...\r\n```\r\n\r\nReplacing the space with an underscore, the following modification will succeed in the instance creation section:\r\n```\r\n# molecule.yml\r\nplatforms:\r\n  - name: \"sample_instance\"\r\n    image: <my_image>\r\n    user: <my_user>\r\n    hostname: <my_hostname>\r\n    ...\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2683/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2683/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2676", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2676/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2676/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2676/events", "html_url": "https://github.com/ansible-community/molecule/issues/2676", "id": 608163504, "node_id": "MDU6SXNzdWU2MDgxNjM1MDQ=", "number": 2676, "title": "Broken dependency from pip's sh module", "user": {"login": "grzegorznowak", "id": 617275, "node_id": "MDQ6VXNlcjYxNzI3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/617275?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grzegorznowak", "html_url": "https://github.com/grzegorznowak", "followers_url": "https://api.github.com/users/grzegorznowak/followers", "following_url": "https://api.github.com/users/grzegorznowak/following{/other_user}", "gists_url": "https://api.github.com/users/grzegorznowak/gists{/gist_id}", "starred_url": "https://api.github.com/users/grzegorznowak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grzegorznowak/subscriptions", "organizations_url": "https://api.github.com/users/grzegorznowak/orgs", "repos_url": "https://api.github.com/users/grzegorznowak/repos", "events_url": "https://api.github.com/users/grzegorznowak/events{/privacy}", "received_events_url": "https://api.github.com/users/grzegorznowak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/25", "html_url": "https://github.com/ansible-community/molecule/milestone/25", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/25/labels", "id": 5289140, "node_id": "MDk6TWlsZXN0b25lNTI4OTE0MA==", "number": 25, "title": "3.0.4", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2020-04-08T16:55:51Z", "updated_at": "2020-05-04T14:26:01Z", "due_on": null, "closed_at": "2020-05-04T14:26:01Z"}, "comments": 8, "created_at": "2020-04-28T09:26:17Z", "updated_at": "2020-04-28T20:50:55Z", "closed_at": "2020-04-28T20:50:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey guys,\r\n\r\nthere seem to be a fresh version of https://pypi.org/project/sh/ released 15h ago (at the time of writing this), which is a minor bump (despite being ~3 years in develop, but let's shelve that for now). The thing is it breaks molecule converge (and possibly other tasks as well). \r\nOr at least in the instances/config I'm using it in.\r\n\r\nThe case in question is trying to run DO provisioner using 2.x branch of molecule.\r\nMore details as per the ticket's template.\r\n\r\nWhen force-installed the previous version: `pip install sh==1.12.14` it worked just fine.\r\nNot sure if that's an issue of of molecule or that said package, but reporting here, since so far it seem like we're maybe trying to pass a variable in a format that is not well formatted, given the error message. But that's just a hunch.\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmolecule==2.22\r\nansible==2.9.0\r\n\r\n```\r\n\r\nMolecule installation method: `pip`\r\n\r\nAnsible installation method (one of): `pip`\r\n\r\n# Desired Behavior\r\n\r\n`molecule provisioning` ran OK\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n  'env': value u'/[a project]/provisioning/.env.yml' of env key 'MOLECULE_ENV_FILE' must be a str\r\n```\r\nplease note I do not have the `.env.yml` file anywhere added explicitly in my provisioning folder (or subfolders for that matter).\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2676/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2676/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2672", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2672/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2672/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2672/events", "html_url": "https://github.com/ansible-community/molecule/issues/2672", "id": 606955327, "node_id": "MDU6SXNzdWU2MDY5NTUzMjc=", "number": 2672, "title": "UnboundLocalError: local variable 'requests' referenced before assignment", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-26T08:34:13Z", "updated_at": "2020-10-20T19:08:41Z", "closed_at": "2020-10-20T19:08:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n- Latest\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nWhen docker python dependency is not installed an error message is shown not a stack trace.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n--> Sanity checks: 'docker'\r\nTraceback (most recent call last):\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/molecule/driver/docker.py\", line 223, in sanity_checks\r\n    import docker\r\nModuleNotFoundError: No module named 'docker'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/bin/molecule\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/click/decorators.py\", line 21, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/molecule/command/test.py\", line 147, in test\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/molecule/command/base.py\", line 107, in execute_cmdline_scenarios\r\n    execute_scenario(scenario)\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/molecule/command/base.py\", line 149, in execute_scenario\r\n    execute_subcommand(scenario.config, action)\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/molecule/command/base.py\", line 138, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/molecule/command/destroy.py\", line 107, in execute\r\n    self._config.provisioner.destroy()\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/molecule/provisioner/ansible.py\", line 700, in destroy\r\n    pb.execute()\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/molecule/provisioner/ansible_playbook.py\", line 105, in execute\r\n    self._config.driver.sanity_checks()\r\n  File \"/home/foobar/work/barfoo/infrastructure/.venv/lib/python3.8/site-packages/molecule/driver/docker.py\", line 228, in sanity_checks\r\n    except requests.exceptions.ConnectionError:\r\nUnboundLocalError: local variable 'requests' referenced before assignment\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2672/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2672/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2660", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2660/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2660/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2660/events", "html_url": "https://github.com/ansible-community/molecule/issues/2660", "id": 603077635, "node_id": "MDU6SXNzdWU2MDMwNzc2MzU=", "number": 2660, "title": "Failed to detect selinux python bindings", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-20T09:16:38Z", "updated_at": "2020-04-20T15:31:46Z", "closed_at": "2020-04-20T15:31:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nLatest ansible\r\nLatest molecule\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n- GitHub actions instances to run CI.\r\n\r\n# Desired Behavior\r\nMolecule to run without an issue.\r\n\r\n# Actual Behaviour\r\nThis issue started appearing on the 11th of April 2020, only on GitHub Action runners, so I'm not sure if this is a Molecule issue or a GitLab Action issue.\r\n\r\nhttps://github.com/robertdebock/ansible-role-python_pip/runs/601244763?check_suite_focus=true#step:6:36\r\n\r\nThe code that triggers this issue is [here](https://github.com/robertdebock/ansible-role-python_pip)\r\n\r\nBy the way, the GitLab Action runnners are [Ubuntu 2018 instances](https://help.github.com/en/actions/reference/virtual-environments-for-github-hosted-runners#supported-runners-and-hardware-resources).", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2660/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2660/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2658", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2658/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2658/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2658/events", "html_url": "https://github.com/ansible-community/molecule/issues/2658", "id": 602486058, "node_id": "MDU6SXNzdWU2MDI0ODYwNTg=", "number": 2658, "title": "EL 8 docs specify wrong dependency for libselinux-python (should be python3-libselinux)", "user": {"login": "jeffcpullen", "id": 9343691, "node_id": "MDQ6VXNlcjkzNDM2OTE=", "avatar_url": "https://avatars.githubusercontent.com/u/9343691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffcpullen", "html_url": "https://github.com/jeffcpullen", "followers_url": "https://api.github.com/users/jeffcpullen/followers", "following_url": "https://api.github.com/users/jeffcpullen/following{/other_user}", "gists_url": "https://api.github.com/users/jeffcpullen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffcpullen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffcpullen/subscriptions", "organizations_url": "https://api.github.com/users/jeffcpullen/orgs", "repos_url": "https://api.github.com/users/jeffcpullen/repos", "events_url": "https://api.github.com/users/jeffcpullen/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffcpullen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-18T15:28:55Z", "updated_at": "2020-05-29T17:31:07Z", "closed_at": "2020-05-29T17:31:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nFollowing installation docs for EL 8 distro it says to install libselinux-python, but thats not available. Instead it should point to python3-libselinux.\r\n\r\n# Actual Behaviour\r\n\r\nFollowing the installation guide on RHEL 8\r\n```\r\n$ sudo yum install -y gcc python3-pip python3-devel openssl-devel libselinux-python\r\nUpdating Subscription Management repositories.\r\nLast metadata expiration check: 0:31:57 ago on Sat 18 Apr 2020 10:49:48 AM EDT.\r\nNo match for argument: libselinux-python\r\nError: Unable to find a match: libselinux-python\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2658/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2657", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2657/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2657/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2657/events", "html_url": "https://github.com/ansible-community/molecule/issues/2657", "id": 602191105, "node_id": "MDU6SXNzdWU2MDIxOTExMDU=", "number": 2657, "title": "Missing cookiecutter template option for init", "user": {"login": "kevingentile", "id": 10604101, "node_id": "MDQ6VXNlcjEwNjA0MTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10604101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevingentile", "html_url": "https://github.com/kevingentile", "followers_url": "https://api.github.com/users/kevingentile/followers", "following_url": "https://api.github.com/users/kevingentile/following{/other_user}", "gists_url": "https://api.github.com/users/kevingentile/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevingentile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevingentile/subscriptions", "organizations_url": "https://api.github.com/users/kevingentile/orgs", "repos_url": "https://api.github.com/users/kevingentile/repos", "events_url": "https://api.github.com/users/kevingentile/events{/privacy}", "received_events_url": "https://api.github.com/users/kevingentile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133126, "node_id": "MDU6TGFiZWwyODgxMzMxMjY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/wontfix", "name": "wontfix", "color": "ffdddd", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-04-17T19:37:14Z", "updated_at": "2020-05-10T12:49:19Z", "closed_at": "2020-05-10T12:49:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.9.6\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\nmolecule 3.0.4.dev4+g21ce2f4d\r\n   ansible==2.9.6 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI'm attempting to create my own cookiecutter template to configure new roles. Ansible Galaxy provides users with a [role skeleton](https://docs.ansible.com/ansible/2.7/reference_appendices/galaxy.html#using-a-custom-role-skeleton). I am now attempting to further configure the molecule generated files.\r\n \r\nI expected to be able to pass my custom cookiecutter configuration to molecule either through a flag or an environment variable.\r\n\r\n\r\n\r\n\r\n# Actual Behaviour\r\nThe documentation for `molecule init scenario` [mentions a local cookiecutter template](https://github.com/ansible-community/molecule/blob/1563796089710b3e0505acb3ec8f57ba80834c45/molecule/command/init/scenario.py#L57). The scenario command [does a lookup for \"driver_template\" as a command argument](https://github.com/ansible-community/molecule/blob/1563796089710b3e0505acb3ec8f57ba80834c45/molecule/command/init/scenario.py#L92) but this value doesn't appear to ever be set in the project. Molecule then defaults to the local ([project owned](https://github.com/ansible-community/molecule/tree/master/molecule/cookiecutter)) cookiecutter template.\r\n\r\nThis appears to have been addressed in #2117. Am I missing something?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2657/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2656", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2656/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2656/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2656/events", "html_url": "https://github.com/ansible-community/molecule/issues/2656", "id": 602033125, "node_id": "MDU6SXNzdWU2MDIwMzMxMjU=", "number": 2656, "title": "Quay.io Dockerfile stale \"latest\" tag", "user": {"login": "kevingentile", "id": 10604101, "node_id": "MDQ6VXNlcjEwNjA0MTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10604101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevingentile", "html_url": "https://github.com/kevingentile", "followers_url": "https://api.github.com/users/kevingentile/followers", "following_url": "https://api.github.com/users/kevingentile/following{/other_user}", "gists_url": "https://api.github.com/users/kevingentile/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevingentile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevingentile/subscriptions", "organizations_url": "https://api.github.com/users/kevingentile/orgs", "repos_url": "https://api.github.com/users/kevingentile/repos", "events_url": "https://api.github.com/users/kevingentile/events{/privacy}", "received_events_url": "https://api.github.com/users/kevingentile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 864009245, "node_id": "MDU6TGFiZWw4NjQwMDkyNDU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/upstream-bug", "name": "upstream-bug", "color": "960a21", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-17T14:52:35Z", "updated_at": "2020-10-23T16:41:38Z", "closed_at": "2020-10-23T16:41:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nPulling `quay.io/ansible/molecule:latest` provides a docker image with the latest version of molecule \r\n\r\n# Actual Behaviour\r\n\r\nLatest tag is an older version of molecule.\r\n\r\n```\r\ndocker run -it quay.io/ansible/molecule:latest molecule --version\r\nmolecule, version 2.20.0.0a3.dev12\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2656/reactions", "total_count": 3, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 2, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2656/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2652", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2652/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2652/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2652/events", "html_url": "https://github.com/ansible-community/molecule/issues/2652", "id": 600300247, "node_id": "MDU6SXNzdWU2MDAzMDAyNDc=", "number": 2652, "title": "molecule init role my-role-name failed", "user": {"login": "freeseacher", "id": 289277, "node_id": "MDQ6VXNlcjI4OTI3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/289277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freeseacher", "html_url": "https://github.com/freeseacher", "followers_url": "https://api.github.com/users/freeseacher/followers", "following_url": "https://api.github.com/users/freeseacher/following{/other_user}", "gists_url": "https://api.github.com/users/freeseacher/gists{/gist_id}", "starred_url": "https://api.github.com/users/freeseacher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freeseacher/subscriptions", "organizations_url": "https://api.github.com/users/freeseacher/orgs", "repos_url": "https://api.github.com/users/freeseacher/repos", "events_url": "https://api.github.com/users/freeseacher/events{/privacy}", "received_events_url": "https://api.github.com/users/freeseacher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-04-15T13:31:21Z", "updated_at": "2020-08-29T17:08:30Z", "closed_at": "2020-04-15T16:41:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n% ansible --version && molecule --version\r\nansible 2.8.10\r\n  config file = None\r\n  configured module search path = ['/home/shirokih/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/shirokih/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/shirokih/.local/bin/ansible\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nmolecule 3.0.3\r\n   ansible==2.8.10 python==3.6\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule init role my-role` creates diras and finiched with $0\r\n\r\n# Actual Behaviour\r\n\r\n```\r\nmolecule init role my-role\r\n--> Initializing new role my-role...\r\nERROR: Galaxy failed to create role: Command '['ansible-galaxy', 'init', '-v', '--offline', 'my-role']' returned non-zero exit status 250.: No config file found; using defaults\r\nERROR! Unexpected Exception, this is probably a bug: no filter named 'comment_ify'\r\nto see the full traceback, use -vvv\r\n```\r\nbecause of \r\n```\r\n% ansible-galaxy init -vvv --offline my-role\r\nansible-galaxy 2.8.10\r\n  config file = None\r\n  configured module search path = ['/home/shirokih/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/shirokih/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/shirokih/.local/bin/ansible-galaxy\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nNo config file found; using defaults\r\nOpened /home/shirokih/.ansible_galaxy\r\nERROR! Unexpected Exception, this is probably a bug: no filter named 'comment_ify'\r\nthe full traceback was:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/shirokih/.local/bin/ansible-galaxy\", line 110, in <module>\r\n    exit_code = cli.run()\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/ansible/cli/galaxy.py\", line 149, in run\r\n    self.execute()\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/ansible/cli/__init__.py\", line 94, in execute\r\n    fn()\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/ansible/cli/galaxy.py\", line 246, in execute_init\r\n    template_env.get_template(src_template).stream(inject_data).dump(dest_file)\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/environment.py\", line 883, in get_template\r\n    return self._load_template(name, self.make_globals(globals))\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/environment.py\", line 857, in _load_template\r\n    template = self.loader.load(self, name, globals)\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/loaders.py\", line 127, in load\r\n    code = environment.compile(source, name, filename)\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/environment.py\", line 638, in compile\r\n    self.handle_exception(source=source_hint)\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/environment.py\", line 832, in handle_exception\r\n    reraise(*rewrite_traceback_stack(source=source))\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/jinja2/_compat.py\", line 28, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"/home/shirokih/.local/lib/python3.6/site-packages/ansible/galaxy/data/default/collection/galaxy.yml.j2\", line 3, in template\r\n    {{ option.description | comment_ify }}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2652/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2652/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2651", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2651/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2651/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2651/events", "html_url": "https://github.com/ansible-community/molecule/issues/2651", "id": 599800077, "node_id": "MDU6SXNzdWU1OTk4MDAwNzc=", "number": 2651, "title": "Missing Shell Environment Variables", "user": {"login": "kevingentile", "id": 10604101, "node_id": "MDQ6VXNlcjEwNjA0MTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10604101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevingentile", "html_url": "https://github.com/kevingentile", "followers_url": "https://api.github.com/users/kevingentile/followers", "following_url": "https://api.github.com/users/kevingentile/following{/other_user}", "gists_url": "https://api.github.com/users/kevingentile/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevingentile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevingentile/subscriptions", "organizations_url": "https://api.github.com/users/kevingentile/orgs", "repos_url": "https://api.github.com/users/kevingentile/repos", "events_url": "https://api.github.com/users/kevingentile/events{/privacy}", "received_events_url": "https://api.github.com/users/kevingentile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-14T19:16:46Z", "updated_at": "2020-07-19T12:14:08Z", "closed_at": "2020-07-19T12:14:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/etc/ansible-playbook/library']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\nmolecule 3.0.3\r\n   ansible==2.9.6 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nDefining `ANSIBLE_LIBRARY` in the current shell passes the change down to molecule\r\n\r\n# Actual Behaviour\r\n```\r\necho $ANSIBLE_LIBRARY\r\n/etc/ansible-playbook/library\r\n```\r\n\r\n\r\n```\r\nmolecule --debug converge\r\n...\r\nANSIBLE_LIBRARY: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule/my_role/default/library\r\n...\r\n```\r\n\r\nThe above excerpt from converge is missing shell defined `ANSIBLE_LIBRARY` identified by the ansible command (`configured module search path`).\r\n\r\n\r\nThe workaround is to pass the shell variable in the provisioner section of `molecule.yaml`\r\n\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_LIBRARY: $ANSIBLE_LIBRARY\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2651/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2646", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2646/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2646/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2646/events", "html_url": "https://github.com/ansible-community/molecule/issues/2646", "id": 597843304, "node_id": "MDU6SXNzdWU1OTc4NDMzMDQ=", "number": 2646, "title": "prerelease version of ansible-lint is getting installed", "user": {"login": "mafalb", "id": 243299, "node_id": "MDQ6VXNlcjI0MzI5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/243299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mafalb", "html_url": "https://github.com/mafalb", "followers_url": "https://api.github.com/users/mafalb/followers", "following_url": "https://api.github.com/users/mafalb/following{/other_user}", "gists_url": "https://api.github.com/users/mafalb/gists{/gist_id}", "starred_url": "https://api.github.com/users/mafalb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mafalb/subscriptions", "organizations_url": "https://api.github.com/users/mafalb/orgs", "repos_url": "https://api.github.com/users/mafalb/repos", "events_url": "https://api.github.com/users/mafalb/events{/privacy}", "received_events_url": "https://api.github.com/users/mafalb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-10T11:31:42Z", "updated_at": "2020-05-29T07:15:24Z", "closed_at": "2020-05-29T07:15:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\nPrelelease version of ansible-lint breaks new molecule installs\r\n\r\nA prerelease version o# ansible-lint -v\r\nUsage: ansible-lint [options] [playbook.yml [playbook2 ...]]|roledirectoryf ansible-lint was released\r\nhttps://pypi.org/project/ansible-lint/4.3.0a0/\r\n\r\n```$ pip install molecule[lint]``` is installing that prerelease because of\r\n\r\n```ansible-lint >= 4.1.1a2, < 5``` in setup.cfg\r\n\r\nbecause of that pip is concluding that a prerelease version of ansible-lint is OK.\r\nBut: there is a bug in ansible-lint 4.3.0a0 which is breaking CI\r\nhttps://github.com/ansible/ansible-lint/issues/731\r\n\r\nMuch of my CI is broken.\r\n\r\nPlease use stable dependencies in stable molecule versions.\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.9.6\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /molecule/lib/python3.6/site-packages/ansible\r\n  executable location = /molecule/bin/ansible\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\n```\r\n\r\n```\r\n$ molecule --version\r\nmolecule 3.0.3\r\n   ansible==2.9.6 python==3.6\r\n```\r\n\r\n```\r\n$ ansible-lint --version\r\nansible-lint 4.3.0a0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- ansible-lint\r\n\r\n# Desired Behavior\r\n\r\n```$ pip install molecule[lint]``` installs stable version of ansible-lint, running it without playbook or role as argument does not give usage message, e.g.\r\n\r\n```\r\n$ ansible-lint -v\r\nUnknown file type: .github/workflows/CI.yml\r\nUnknown file type: galaxy.yml\r\nUnknown file type: roles/plugin/tasks/main.yml\r\nFound roles: roles/plugin\r\nFound playbooks: molecule/default/converge.yml molecule/default/verify.yml molecule/install_molecule.yml molecule/requirements.yml\r\nExamining molecule/default/converge.yml of type playbook\r\nExamining molecule/default/verify.yml of type playbook\r\nExamining molecule/install_molecule.yml of type playbook\r\nExamining molecule/requirements.yml of type playbook\r\nExamining roles/plugin/tasks/main.yml of type tasks\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n```$ pip install molecule[lint]``` installs prerelease version of ansible-lint\r\n\r\n```\r\n$ ansible-lint -v\r\nUsage: ansible-lint [options] [playbook.yml [playbook2 ...]]|roledirectory\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2646/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2646/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2643", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2643/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2643/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2643/events", "html_url": "https://github.com/ansible-community/molecule/issues/2643", "id": 595964619, "node_id": "MDU6SXNzdWU1OTU5NjQ2MTk=", "number": 2643, "title": "molecule ignores \"sharing across scenarios\" on non default scenarios", "user": {"login": "geosword", "id": 17837795, "node_id": "MDQ6VXNlcjE3ODM3Nzk1", "avatar_url": "https://avatars.githubusercontent.com/u/17837795?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geosword", "html_url": "https://github.com/geosword", "followers_url": "https://api.github.com/users/geosword/followers", "following_url": "https://api.github.com/users/geosword/following{/other_user}", "gists_url": "https://api.github.com/users/geosword/gists{/gist_id}", "starred_url": "https://api.github.com/users/geosword/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geosword/subscriptions", "organizations_url": "https://api.github.com/users/geosword/orgs", "repos_url": "https://api.github.com/users/geosword/repos", "events_url": "https://api.github.com/users/geosword/events{/privacy}", "received_events_url": "https://api.github.com/users/geosword/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-07T15:40:55Z", "updated_at": "2020-06-16T13:27:58Z", "closed_at": "2020-06-16T13:27:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/dylanh/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/ansible\r\n  executable location = /home/dylanh/.virtualenvs/ansible-droneci/bin/ansible\r\n  python version = 3.8.2 (default, Feb 26 2020, 22:21:03) [GCC 9.2.1 20200130]\r\nmolecule 3.0.2\r\n   ansible==2.9.6 python==3.8\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nyaml-lint\r\nansible-lint\r\n\r\n# Desired Behavior\r\nI have two scenarios:\r\n```\r\nmolecule\r\n\u251c\u2500\u2500 default\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 converge.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Dockerfile.j2\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 INSTALL.rst\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 verify.yml\r\n\u251c\u2500\u2500 missingvalues\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 converge.yml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 INSTALL.rst\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 verify.yml\r\n\u2514\u2500\u2500 resources\r\n    \u251c\u2500\u2500 playbooks\r\n    \u2514\u2500\u2500 tests\r\n        \u2514\u2500\u2500 verify.yml\r\n```\r\n```molecule.yml``` in both scenarios are identical:\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nplatforms:\r\n  - name: instance\r\n    image: molecule_debian:buster\r\n    pull: false\r\n    command: /lib/systemd/systemd\r\n    tmpfs:\r\n      - /run\r\n      - /tmp\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n      - /var/run/docker.sock:/var/run/docker.sock\r\n    privileged: true\r\nprovisioner:\r\n  name: ansible\r\n  log: true\r\nverifier:\r\n  name: ansible\r\n  directory: ../resources/tests/\r\n  lint: |\r\n    set -e\r\n    yamllint .\r\n    ansible-lint\r\n```\r\nas per https://molecule.readthedocs.io/en/latest/examples.html#sharing-across-scenarios\r\n\"Playbooks and tests can be shared across scenarios.\"\r\n\r\nTherefore, as ```molecule.yml``` is the same in both scenarios (or when ```--base-config``` is used, then I would expect ```resources/tests/verify.yml``` to be used irrespective of of the ```--scenario``` specified in this example, for a given run.\r\n\r\n# Actual Behaviour\r\n\r\nthe default ```verify.yml``` in ```missingvalues``` is run and the tests in ```resources/tests/verify.yml``` are not.\r\n\r\nOutput:\r\n\r\n```\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 missingvalues\r\n    \u2514\u2500\u2500 verify\r\n\r\n--> Scenario: 'missingvalues'\r\n--> Action: 'verify'\r\n--> Running Ansible Verifier\r\n--> Sanity checks: 'docker'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/plugins/filter:/home/dylanh/development/ansible.droneci/plugins/filter:/home/dylanh/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_LIBRARY: /home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/library:/home/dylanh/development/ansible.droneci/library:/home/dylanh/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/roles:/home/dylanh/development:/home/dylanh/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/dylanh/development/ansible.droneci/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues\r\nMOLECULE_FILE: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /home/dylanh/development/ansible.droneci\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/dylanh/development/ansible.droneci/molecule/missingvalues\r\nMOLECULE_SCENARIO_NAME: missingvalues\r\nMOLECULE_STATE_FILE: /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/dylanh/development/ansible.droneci/molecule/missingvalues/../resources/tests/\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/plugins/filter:/home/dylanh/development/ansible.droneci/plugins/filter:/home/dylanh/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/library:/home/dylanh/development/ansible.droneci/library:/home/dylanh/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/roles:/home/dylanh/development:/home/dylanh/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/dylanh/development/ansible.droneci/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues MOLECULE_FILE=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/instance_config.yml MOLECULE_INVENTORY_FILE=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/home/dylanh/development/ansible.droneci MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/dylanh/development/ansible.droneci/molecule/missingvalues MOLECULE_SCENARIO_NAME=missingvalues MOLECULE_STATE_FILE=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/home/dylanh/development/ansible.droneci/molecule/missingvalues/../resources/tests/\r\n\r\nDEBUG: COMMAND\r\n/home/dylanh/.virtualenvs/ansible-droneci/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory /home/dylanh/development/ansible.droneci/molecule/missingvalues/verify.yml -vvv\r\n\r\n    ansible-playbook 2.9.6\r\n      config file = /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/ansible.cfg\r\n      configured module search path = ['/home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules', '/home/dylanh/.cache/molecule/ansible.droneci/missingvalues/library', '/home/dylanh/development/ansible.droneci/library', '/home/dylanh/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/ansible\r\n      executable location = /home/dylanh/.virtualenvs/ansible-droneci/bin/ansible-playbook\r\n      python version = 3.8.2 (default, Feb 26 2020, 22:21:03) [GCC 9.2.1 20200130]\r\n    Using /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/ansible.cfg as config file\r\n    host_list declined parsing /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /home/dylanh/.cache/molecule/ansible.droneci/missingvalues/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: verify.yml ***********************************************************\r\n    1 plays in /home/dylanh/development/ansible.droneci/molecule/missingvalues/verify.yml\r\n\r\n    PLAY [Verify] ******************************************************************\r\n\r\n    TASK [Gathering Facts] *********************************************************\r\n    task path: /home/dylanh/development/ansible.droneci/molecule/missingvalues/verify.yml:4\r\n    <instance> Attempting python interpreter discovery\r\n    <instance> ESTABLISH DOCKER CONNECTION FOR USER: root\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', '/bin/sh -c \\'echo PLATFORM; uname; echo FOUND; command -v \\'\"\\'\"\\'/usr/bin/python\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python3.7\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python3.6\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python3.5\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python2.7\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python2.6\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'/usr/libexec/platform-python\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'/usr/bin/python3\\'\"\\'\"\\'; command -v \\'\"\\'\"\\'python\\'\"\\'\"\\'; echo ENDFOUND && sleep 0\\'']\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c '/usr/bin/python && sleep 0'\"]\r\n    <instance> Python interpreter discovery fallback (unsupported Linux distribution: debian)\r\n    Using module file /home/dylanh/.virtualenvs/ansible-droneci/lib/python3.8/site-packages/ansible/modules/system/setup.py\r\n    Pipelining is enabled.\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c '/usr/bin/python && sleep 0'\"]\r\n[WARNING]: Platform linux on host instance is using the discovered Python\r\ninterpreter at /usr/bin/python, but future installation of another Python\r\ninterpreter could change this. See https://docs.ansible.com/ansible/2.9/referen\r\nce_appendices/interpreter_discovery.html for more information.\r\n    ok: [instance]\r\n    META: ran handlers\r\n\r\n    TASK [Example assertion] *******************************************************\r\n    task path: /home/dylanh/development/ansible.droneci/molecule/missingvalues/verify.yml:7\r\n    ok: [instance] => {\r\n        \"changed\": false,\r\n        \"msg\": \"All assertions passed\"\r\n    }\r\n    META: ran handlers\r\n    META: ran handlers\r\n\r\n    PLAY RECAP *********************************************************************\r\n    instance                   : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\n\r\nVerifier completed successfully.\r\n````\r\nThis is surprising given ```MOLECULE_VERIFIER_TEST_DIRECTORY``` is set correctly.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2643/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2643/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2640", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2640/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2640/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2640/events", "html_url": "https://github.com/ansible-community/molecule/pull/2640", "id": 594800832, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzk5Mzc4Nzk0", "number": 2640, "title": "Correct typo in collection argument roles-file -> role-file", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/24", "html_url": "https://github.com/ansible-community/molecule/milestone/24", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/24/labels", "id": 5134474, "node_id": "MDk6TWlsZXN0b25lNTEzNDQ3NA==", "number": 24, "title": "3.0.3", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-24T09:14:53Z", "updated_at": "2020-04-08T16:56:22Z", "due_on": null, "closed_at": "2020-04-08T16:55:43Z"}, "comments": 1, "created_at": "2020-04-06T04:52:18Z", "updated_at": "2020-04-07T19:33:00Z", "closed_at": "2020-04-07T19:33:00Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2640", "html_url": "https://github.com/ansible-community/molecule/pull/2640", "diff_url": "https://github.com/ansible-community/molecule/pull/2640.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2640.patch", "merged_at": "2020-04-07T19:32:59Z"}, "body": "Please include details of what it is, how to use it, how it's been tested\r\nPlease include an entry in the CHANGELOG.md if the change will impact users.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\nThis fixes a typo in #2609 that causes installs to fail when \"role-file\" is specified.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2640/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2640/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2633", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2633/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2633/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2633/events", "html_url": "https://github.com/ansible-community/molecule/issues/2633", "id": 590481332, "node_id": "MDU6SXNzdWU1OTA0ODEzMzI=", "number": 2633, "title": "Molecule does not run from a non-activated virtual environment (or using pipx)", "user": {"login": "milliams", "id": 61316, "node_id": "MDQ6VXNlcjYxMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/61316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/milliams", "html_url": "https://github.com/milliams", "followers_url": "https://api.github.com/users/milliams/followers", "following_url": "https://api.github.com/users/milliams/following{/other_user}", "gists_url": "https://api.github.com/users/milliams/gists{/gist_id}", "starred_url": "https://api.github.com/users/milliams/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/milliams/subscriptions", "organizations_url": "https://api.github.com/users/milliams/orgs", "repos_url": "https://api.github.com/users/milliams/repos", "events_url": "https://api.github.com/users/milliams/events{/privacy}", "received_events_url": "https://api.github.com/users/milliams/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-30T17:58:14Z", "updated_at": "2021-03-03T16:53:07Z", "closed_at": "2020-08-22T17:45:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```console\r\n$ venv/bin/ansible --version && venv/bin/molecule --version\r\nansible 2.9.6\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/matt/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/matt/projects/citc-apps/venv/lib64/python3.8/site-packages/ansible\r\n  executable location = ../../venv/bin/ansible\r\n  python version = 3.8.2 (default, Mar 05 2020, 18:58:42) [GCC]\r\nmolecule 3.0.3.dev63+g8205b8e3\r\n   ansible==2.9.6 python==3.8\r\n```\r\n\r\nInstall step:\r\n\r\n```console\r\n$ python3 -m venv venv\r\n$ mkdir roles\r\n$ venv/bin/pip install -e 'git+https://github.com/ansible-community/molecule.git#egg=molecule[docker]'\r\n$ cd roles\r\n$ ../venv/bin/molecule init role moltest\r\n$ cd moltest\r\n$ ../../venv/bin/molecule test\r\n```\r\n\r\n# Desired Behavior\r\n\r\nI usually create virtual environments for each project as a `venv` dorectory in the root of my repo. I don't usually `source venv/bin/activate` them as it allows me to always be explicit about which commands are running from inside the venv. All other Python programs I have installed have worked fine like this.\r\n\r\nHowever, when I run `molecule test` as `venv/bin/molecule` it fails to find the installed modules. I would expect that this would succeed in running the test suite.\r\n\r\nI would also expect to be able to install Molecule using a tool like `pipx` but I get the exact same error there.\r\n\r\n# Actual Behaviour\r\n\r\n```console\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 cleanup\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Lint is disabled.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n--> Sanity checks: 'docker'\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n[WARNING]: Skipping plugin (/home/matt/projects/citc-apps/venv/src/molecule/mol\r\necule/provisioner/ansible/plugins/filter/molecule_core.py) as it seems to be\r\ninvalid: No module named 'molecule'\r\nfatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', molecule_file) | molecule_from_yaml }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: template error while templating string: no filter named 'molecule_from_yaml'. String: {{ lookup('file', molecule_file) | molecule_from_yaml }}\"}\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n    \r\n\r\nERROR: \r\nAn error occurred during the test sequence action: 'destroy'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n[WARNING]: Skipping plugin (/home/matt/projects/citc-apps/venv/src/molecule/mol\r\necule/provisioner/ansible/plugins/filter/molecule_core.py) as it seems to be\r\ninvalid: No module named 'molecule'\r\nfatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', molecule_file) | molecule_from_yaml }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: template error while templating string: no filter named 'molecule_from_yaml'. String: {{ lookup('file', molecule_file) | molecule_from_yaml }}\"}\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n    \r\n\r\nERROR: \r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2633/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2632", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2632/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2632/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2632/events", "html_url": "https://github.com/ansible-community/molecule/pull/2632", "id": 589831270, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzk1MjgwNTk1", "number": 2632, "title": "Enable podman testing", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/24", "html_url": "https://github.com/ansible-community/molecule/milestone/24", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/24/labels", "id": 5134474, "node_id": "MDk6TWlsZXN0b25lNTEzNDQ3NA==", "number": 24, "title": "3.0.3", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-24T09:14:53Z", "updated_at": "2020-04-08T16:56:22Z", "due_on": null, "closed_at": "2020-04-08T16:55:43Z"}, "comments": 3, "created_at": "2020-03-29T16:36:46Z", "updated_at": "2020-04-08T14:57:01Z", "closed_at": "2020-04-03T22:49:07Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2632", "html_url": "https://github.com/ansible-community/molecule/pull/2632", "diff_url": "https://github.com/ansible-community/molecule/pull/2632.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2632.patch", "merged_at": "2020-04-03T22:49:07Z"}, "body": "Depends-On: https://github.com/ansible/ansible-zuul-jobs/pull/391", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2632/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2626", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2626/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2626/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2626/events", "html_url": "https://github.com/ansible-community/molecule/issues/2626", "id": 587218737, "node_id": "MDU6SXNzdWU1ODcyMTg3Mzc=", "number": 2626, "title": "Molecule (3) in using ansible-devel: ModuleNotFoundError: No module named 'ansible.module_utils.docker'", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-24T19:13:49Z", "updated_at": "2020-04-07T19:56:29Z", "closed_at": "2020-04-07T19:56:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nAnsible: git+https://github.com/ansible/ansible.git@devel\r\nmolecule: molecule>=3, <4\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- ansible-lint (latest)\r\n\r\n# Desired Behavior\r\n\r\nTests succeed.\r\n\r\n# Actual Behaviour\r\n\r\nI guess Ansible (devel branch) [does not contain all modules anymore](https://github.com/ansible-collections/overview#timeline), and since a few days molecule fails.\r\n\r\nSee [the example build](https://travis-ci.org/github/robertdebock/ansible-role-xinetd/jobs/666179745#L314)\r\n\r\n```\r\n--> Sanity checks: 'docker'\r\nTraceback (most recent call last):\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/core.py\", line 1259, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/click/decorators.py\", line 21, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/command/test.py\", line 147, in test\r\n    base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/command/base.py\", line 109, in execute_cmdline_scenarios\r\n    execute_scenario(scenario)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/command/base.py\", line 151, in execute_scenario\r\n    execute_subcommand(scenario.config, action)\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/command/base.py\", line 140, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/command/destroy.py\", line 107, in execute\r\n    self._config.provisioner.destroy()\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/provisioner/ansible.py\", line 681, in destroy\r\n    pb.execute()\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/provisioner/ansible_playbook.py\", line 98, in execute\r\n    self._config.driver.sanity_checks()\r\n  File \"/home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/lib/python3.7/site-packages/molecule/driver/docker.py\", line 222, in sanity_checks\r\n    from ansible.module_utils.docker.common import HAS_DOCKER_PY\r\nModuleNotFoundError: No module named 'ansible.module_utils.docker'\r\nERROR: InvocationError for command /home/travis/build/robertdebock/ansible-role-xinetd/.tox/py37-ansible-next/bin/molecule test (exited with code 1)\r\n```\r\n\r\nThis error seems to come from [this file/line](https://github.com/ansible-community/molecule/blob/master/molecule/driver/docker.py#L222).\r\n\r\nMaybe I need to change something, please give me a hint.\r\n\r\nAs always, thanks!", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2626/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2623", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2623/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2623/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2623/events", "html_url": "https://github.com/ansible-community/molecule/pull/2623", "id": 586985275, "node_id": "MDExOlB1bGxSZXF1ZXN0MzkzMDExNjMy", "number": 2623, "title": "Avoid errors with delegated create and destroy templates", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/24", "html_url": "https://github.com/ansible-community/molecule/milestone/24", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/24/labels", "id": 5134474, "node_id": "MDk6TWlsZXN0b25lNTEzNDQ3NA==", "number": 24, "title": "3.0.3", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-24T09:14:53Z", "updated_at": "2020-04-08T16:56:22Z", "due_on": null, "closed_at": "2020-04-08T16:55:43Z"}, "comments": 1, "created_at": "2020-03-24T14:06:01Z", "updated_at": "2020-03-28T12:07:34Z", "closed_at": "2020-03-28T12:07:32Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2623", "html_url": "https://github.com/ansible-community/molecule/pull/2623", "diff_url": "https://github.com/ansible-community/molecule/pull/2623.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2623.patch", "merged_at": "2020-03-28T12:07:32Z"}, "body": "* Assure delegated templates can succesfully run\r\n* Make create and destroy playbooks optionals, if they miss only\r\n  a warning will be triggered.\r\n\r\nFix: #2621", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2623/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2621", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2621/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2621/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2621/events", "html_url": "https://github.com/ansible-community/molecule/issues/2621", "id": 586962194, "node_id": "MDU6SXNzdWU1ODY5NjIxOTQ=", "number": 2621, "title": "molecule init scenario with delegated creates broken create and destroy playbooks", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-24T13:31:49Z", "updated_at": "2020-03-28T12:07:32Z", "closed_at": "2020-03-28T12:07:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems that this basic use-case got broken during the migration to v3:\r\n```\r\nmolecule init role foo -d delegated\r\ncd foo\r\n\r\n--> Found config file /Users/ssbarnea/.config/molecule/config.yml\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 create\r\n    \u2514\u2500\u2500 prepare\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\n\r\n    PLAY [Create] ******************************************************************\r\n\r\n    TASK [Populate instance config dict] *******************************************\r\n    Tuesday 24 March 2020  13:28:10 +0000 (0:00:00.020)       0:00:00.020 *********\r\nfatal: [localhost]: FAILED! => {\"msg\": \"'server' is undefined\"}\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\n    Tuesday 24 March 2020  13:28:10 +0000 (0:00:00.289)       0:00:00.310 *********\r\n    ===============================================================================\r\n    Populate instance config dict ------------------------------------------- 0.29s\r\n\r\nERROR:\r\nFAIL: 2\r\n```\r\n\r\nSame happens with destroy command.\r\n\r\nThe situation is worsened by the fact that even if you remove the create and destroy playbooks, you endup with an error like:\r\n```\r\nERROR! the playbook: /Users/ssbarnea/c/opendev/ffff/molecule/default/destroy.yml could not be found\r\n```\r\n\r\n## Desired behavior\r\n* presence of create and destroy playbooks should be optional when using delegated driver\r\n* when using init we should always assure that if we produce create or destroy playbooks, they are not broken.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2621/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2614", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2614/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2614/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2614/events", "html_url": "https://github.com/ansible-community/molecule/issues/2614", "id": 584755959, "node_id": "MDU6SXNzdWU1ODQ3NTU5NTk=", "number": 2614, "title": "molecule syntax depends on Docker sanity check", "user": {"login": "He3chai", "id": 62406495, "node_id": "MDQ6VXNlcjYyNDA2NDk1", "avatar_url": "https://avatars.githubusercontent.com/u/62406495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/He3chai", "html_url": "https://github.com/He3chai", "followers_url": "https://api.github.com/users/He3chai/followers", "following_url": "https://api.github.com/users/He3chai/following{/other_user}", "gists_url": "https://api.github.com/users/He3chai/gists{/gist_id}", "starred_url": "https://api.github.com/users/He3chai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/He3chai/subscriptions", "organizations_url": "https://api.github.com/users/He3chai/orgs", "repos_url": "https://api.github.com/users/He3chai/repos", "events_url": "https://api.github.com/users/He3chai/events{/privacy}", "received_events_url": "https://api.github.com/users/He3chai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-19T23:23:25Z", "updated_at": "2020-10-20T18:05:22Z", "closed_at": "2020-10-20T18:05:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\n ansible 2.9.4\r\n   config file = None\r\n   configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n   ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n   executable location = /usr/bin/ansible\r\n   python version = 3.8.1 (default, Jan 19 2020, 11:48:03) [GCC 9.2.0]\r\n\r\n$ molecule --version\r\n molecule 3.0.2\r\n    ansible==2.9.4 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip via quay.io/ansible/molecule:3.0.2\r\n\r\nAnsible installation method (one of):\r\n\r\n- apk via quay.io/ansible/molecule:3.0.2\r\n\r\nDetail any linters or test runners used:\r\n- GitLab Pipeline where GitLab Runners run on Kubernetes which use Docker-in-Docker for Molecule\r\n\r\n# Desired Behavior\r\n\r\nI want to implement two pipelines:\r\n- A small one which only needs a few seconds for linting, deprecation and syntax checking (for every push to every branch)\r\n- And a \"big\" pipeline with all tests and rollouts on different platforms which needs a few minutes (only for merge requests and stable branches)\r\n\r\nThat's why only one pipeline needs to actually be 'Docker ready'\r\n\r\nWith molecule 2.20 - Syntax check is working and doesn't depends on docker.\r\n```\r\nmolecule syntax\r\n --> Validating schema /builds/bsp/roles/ntp/molecule/default/molecule.yml.\r\n Validation completed successfully.\r\n --> Test matrix\r\n     \r\n \u2514\u2500\u2500 default\r\n     \u2514\u2500\u2500 syntax\r\n     \r\n --> Scenario: 'default'\r\n --> Action: 'syntax'\r\n     \r\n     playbook: /builds/bsp/roles/ntp/molecule/default/converge.yml\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nWith molecule 3+ - Syntax check is no longer working if `driver: docker` is used and Docker daemon is not reachable\r\n\r\n```\r\nmolecule --debug syntax\r\n --> Test matrix\r\n     \r\n \u2514\u2500\u2500 default\r\n     \u2514\u2500\u2500 syntax\r\n     \r\n --> Scenario: 'default'\r\n --> Action: 'syntax'\r\n --> Sanity checks: 'docker'\r\n ERROR: Unable to contact the Docker daemon. Please refer to https://docs.docker.com/config/daemon/ for managing the daemon\r\n```\r\n\r\n`Sanity checks: 'docker'` seems to come from the `driver: docker`.\r\nWhile using `driver: delegated` it's working again.\r\n\r\nUnfortunately it seems not possible to use variables for the driver option.\r\n```\r\n$ molecule syntax\r\nERROR: Failed to pre-validate.\r\n{'driver': [{'name': ['unallowed value $MOLECULE_DRIVER:-docker']}]}\r\n---\r\ndriver:\r\n  name: ${MOLECULE_DRIVER:-docker}\r\n[...]\r\n```\r\n\r\nWorkarounds:\r\n- Using two scenarios probably\r\n- Using Ansbile syntax checking:\r\n```\r\n    - ln -s ../../.. molecule/default/roles\r\n    - ansible-playbook -i \"localhost,\" molecule/default/converge.yml --syntax-check\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2614/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2614/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2611", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2611/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2611/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2611/events", "html_url": "https://github.com/ansible-community/molecule/pull/2611", "id": 580811429, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg3OTUxOTUx", "number": 2611, "title": "Fix removal of ANSI control characters when PY_COLORS=0", "user": {"login": "kevingentile", "id": 10604101, "node_id": "MDQ6VXNlcjEwNjA0MTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10604101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevingentile", "html_url": "https://github.com/kevingentile", "followers_url": "https://api.github.com/users/kevingentile/followers", "following_url": "https://api.github.com/users/kevingentile/following{/other_user}", "gists_url": "https://api.github.com/users/kevingentile/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevingentile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevingentile/subscriptions", "organizations_url": "https://api.github.com/users/kevingentile/orgs", "repos_url": "https://api.github.com/users/kevingentile/repos", "events_url": "https://api.github.com/users/kevingentile/events{/privacy}", "received_events_url": "https://api.github.com/users/kevingentile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-13T19:57:25Z", "updated_at": "2020-03-16T20:42:31Z", "closed_at": "2020-03-16T20:35:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2611", "html_url": "https://github.com/ansible-community/molecule/pull/2611", "diff_url": "https://github.com/ansible-community/molecule/pull/2611.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2611.patch", "merged_at": "2020-03-16T20:35:51Z"}, "body": "Signed-off-by: Kevin Gentile <kgentile@lb.com>\r\n\r\n#2256 outlines an issue where control characters are populated with PY_COLORS=0. This fix removes control characters when `should_do_markup` returns false for log text.\r\n\r\n```\r\nPY_COLORS=0 molecule test\r\n```\r\n\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2611/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2611/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2607", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2607/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2607/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2607/events", "html_url": "https://github.com/ansible-community/molecule/issues/2607", "id": 580022028, "node_id": "MDU6SXNzdWU1ODAwMjIwMjg=", "number": 2607, "title": "Failed host pattern matching testing with --parallel", "user": {"login": "kevingentile", "id": 10604101, "node_id": "MDQ6VXNlcjEwNjA0MTAx", "avatar_url": "https://avatars.githubusercontent.com/u/10604101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevingentile", "html_url": "https://github.com/kevingentile", "followers_url": "https://api.github.com/users/kevingentile/followers", "following_url": "https://api.github.com/users/kevingentile/following{/other_user}", "gists_url": "https://api.github.com/users/kevingentile/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevingentile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevingentile/subscriptions", "organizations_url": "https://api.github.com/users/kevingentile/orgs", "repos_url": "https://api.github.com/users/kevingentile/repos", "events_url": "https://api.github.com/users/kevingentile/events{/privacy}", "received_events_url": "https://api.github.com/users/kevingentile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-12T15:30:28Z", "updated_at": "2021-10-04T15:29:35Z", "closed_at": "2021-10-04T13:33:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.9.6\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\nmolecule 3.0.2\r\n   ansible==2.9.6 python==3.8\r\n```\r\n\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nTesting scenarios with `--parallel` targets the inventory specified in the playbook.\r\n\r\n# Actual Behaviour\r\nIn the example repository I've configured different hostnames in the molecule docker platform and targeted specific hosts who's name is reflected in the scenario name. Testing scenarios with `--parallel` reports:\r\n\r\n```\r\n[WARNING]: Could not match supplied host pattern, ignoring: local\r\n```\r\n\r\nThis causes Ansible to skip the target playbook tasks and related tests. It appears the test inventory file may not be populating within the containers.\r\n\r\nA sample repository can be found here: https://github.com/kevingentile/molecule-parallel-example.\r\n\r\nThe following example is executed in a docker-in-docker alpine container with molecule[docker] installed through `pip`: https://gist.github.com/kevingentile/a82bbfdd85e0d4081cb60397ea625084 \r\n```\r\nbash-5.0# molecule --debug test --parallel\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 cleanup\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Lint is disabled.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n--> Sanity checks: 'docker'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_LIBRARY: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /etc/ansible-playbook/roles/host_trigger/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default\r\nMOLECULE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /etc/ansible-playbook/roles/host_trigger\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/etc/ansible-playbook/roles/host_trigger/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default MOLECULE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml MOLECULE_INVENTORY_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/etc/ansible-playbook/roles/host_trigger MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml -vvv\r\n\r\n    ansible-playbook 2.9.6\r\n      config file = /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\n      configured module search path = ['/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules', '/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library', '/etc/ansible-playbook/roles/host_trigger/library', '/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n      executable location = /usr/bin/ansible-playbook\r\n      python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\n    Using /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg as config file\r\n    host_list declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:8\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /root/.ansible/tmp/ansible-tmp-1584025592.766135-275194469364849 `\" && echo ansible-tmp-1584025592.766135-275194469364849=\"` echo /root/.ansible/tmp/ansible-tmp-1584025592.766135-275194469364849 `\" ) && sleep 0'\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/cloud/docker/docker_container.py\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-1738q7p93hu/tmpj4l_m1xk TO /root/.ansible/tmp/ansible-tmp-1584025592.766135-275194469364849/AnsiballZ_docker_container.py\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-1738q7p93hu/tmpl_y6azs0 TO /root/.ansible/tmp/ansible-tmp-1584025592.766135-275194469364849/async_wrapper.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1584025592.766135-275194469364849/ /root/.ansible/tmp/ansible-tmp-1584025592.766135-275194469364849/AnsiballZ_docker_container.py /root/.ansible/tmp/ansible-tmp-1584025592.766135-275194469364849/async_wrapper.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'ANSIBLE_ASYNC_DIR='\"'\"'~/.ansible_async'\"'\"' /usr/bin/python3.8 /root/.ansible/tmp/ansible-tmp-1584025592.766135-275194469364849/async_wrapper.py 408222966962 7200 /root/.ansible/tmp/ansible-tmp-1584025592.766135-275194469364849/AnsiballZ_docker_container.py _ && sleep 0'\r\n    changed: [localhost] => (item=local-a4b548a2-0ca6-4583-b7f5-0389afe4af1c) => {\r\n        \"ansible_job_id\": \"408222966962.190\",\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": true,\r\n        \"finished\": 0,\r\n        \"item\": {\r\n            \"hostname\": \"local\",\r\n            \"image\": \"docker.io/pycontribs/centos:7\",\r\n            \"name\": \"local-a4b548a2-0ca6-4583-b7f5-0389afe4af1c\",\r\n            \"pre_build_image\": true\r\n        },\r\n        \"results_file\": \"/root/.ansible_async/408222966962.190\",\r\n        \"started\": 1\r\n    }\r\n\r\n    TASK [Wait for instance(s) deletion to complete] *******************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:28\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/utilities/logic/async_status.py\r\n    Pipelining is enabled.\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.8 && sleep 0'\r\n    ok: [localhost] => (item=None) => {\r\n        \"attempts\": 1,\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false\r\n    }\r\n    ok: [localhost] => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false\r\n    }\r\n\r\n    TASK [Delete docker network(s)] ************************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:36\r\n    META: ran handlers\r\n    META: ran handlers\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'syntax'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_LIBRARY: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /etc/ansible-playbook/roles/host_trigger/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default\r\nMOLECULE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /etc/ansible-playbook/roles/host_trigger\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/etc/ansible-playbook/roles/host_trigger/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default MOLECULE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml MOLECULE_INVENTORY_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/etc/ansible-playbook/roles/host_trigger MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --syntax-check --inventory=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory /etc/ansible-playbook/roles/host_trigger/molecule/default/converge.yml -vvv\r\n\r\n    ansible-playbook 2.9.6\r\n      config file = /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\n      configured module search path = ['/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules', '/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library', '/etc/ansible-playbook/roles/host_trigger/library', '/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n      executable location = /usr/bin/ansible-playbook\r\n      python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\n    Using /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg as config file\r\n    host_list declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n    1 plays in /etc/ansible-playbook/roles/host_trigger/molecule/default/converge.yml\r\n[WARNING]: Could not match supplied host pattern, ignoring: local\r\n\r\n    playbook: /etc/ansible-playbook/roles/host_trigger/molecule/default/converge.yml\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_LIBRARY: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /etc/ansible-playbook/roles/host_trigger/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default\r\nMOLECULE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /etc/ansible-playbook/roles/host_trigger\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/etc/ansible-playbook/roles/host_trigger/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default MOLECULE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml MOLECULE_INVENTORY_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/etc/ansible-playbook/roles/host_trigger MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml -vvv\r\n\r\n    ansible-playbook 2.9.6\r\n      config file = /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\n      configured module search path = ['/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules', '/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library', '/etc/ansible-playbook/roles/host_trigger/library', '/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n      executable location = /usr/bin/ansible-playbook\r\n      python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\n    Using /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg as config file\r\n    host_list declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: create.yml ***********************************************************\r\n    1 plays in /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml\r\n\r\n    PLAY [Create] ******************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Log into a Docker registry] **********************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:8\r\n    skipping: [localhost] => (item=None)  => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false\r\n    }\r\n\r\n    TASK [Check presence of custom Dockerfiles] ************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:25\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/files/stat.py\r\n    Pipelining is enabled.\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.8 && sleep 0'\r\n    ok: [localhost] => (item=None) => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false\r\n    }\r\n    ok: [localhost] => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false\r\n    }\r\n\r\n    TASK [Create Dockerfiles from image names] *************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:31\r\n    skipping: [localhost] => (item=None)  => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false\r\n    }\r\n\r\n    TASK [Discover local Docker images] ********************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:49\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/cloud/docker/docker_image_info.py\r\n    Pipelining is enabled.\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.8 && sleep 0'\r\n    ok: [localhost] => (item=None) => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false\r\n    }\r\n    ok: [localhost] => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false\r\n    }\r\n\r\n    TASK [Build an Ansible compatible image (new)] *********************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:62\r\n    skipping: [localhost] => (item=molecule_local/docker.io/pycontribs/centos:7)  => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"item\": {\r\n            \"ansible_index_var\": \"i\",\r\n            \"ansible_loop_var\": \"item\",\r\n            \"changed\": false,\r\n            \"i\": 0,\r\n            \"item\": {\r\n                \"hostname\": \"local\",\r\n                \"image\": \"docker.io/pycontribs/centos:7\",\r\n                \"name\": \"local-a4b548a2-0ca6-4583-b7f5-0389afe4af1c\",\r\n                \"pre_build_image\": true\r\n            },\r\n            \"skip_reason\": \"Conditional result was False\",\r\n            \"skipped\": true\r\n        },\r\n        \"skip_reason\": \"Conditional result was False\"\r\n    }\r\n\r\n    TASK [Create docker network(s)] ************************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:90\r\n\r\n    TASK [Determine the CMD directives] ********************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:104\r\n    ok: [localhost] => (item=None) => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false\r\n    }\r\n    ok: [localhost] => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false\r\n    }\r\n\r\n    TASK [Create molecule instance(s)] *********************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:113\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /root/.ansible/tmp/ansible-tmp-1584025599.6470826-175418404922737 `\" && echo ansible-tmp-1584025599.6470826-175418404922737=\"` echo /root/.ansible/tmp/ansible-tmp-1584025599.6470826-175418404922737 `\" ) && sleep 0'\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/cloud/docker/docker_container.py\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-229x6zw_w7i/tmpkvm9jlo7 TO /root/.ansible/tmp/ansible-tmp-1584025599.6470826-175418404922737/AnsiballZ_docker_container.py\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-229x6zw_w7i/tmpzqzs6he3 TO /root/.ansible/tmp/ansible-tmp-1584025599.6470826-175418404922737/async_wrapper.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1584025599.6470826-175418404922737/ /root/.ansible/tmp/ansible-tmp-1584025599.6470826-175418404922737/AnsiballZ_docker_container.py /root/.ansible/tmp/ansible-tmp-1584025599.6470826-175418404922737/async_wrapper.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'ANSIBLE_ASYNC_DIR='\"'\"'~/.ansible_async'\"'\"' /usr/bin/python3.8 /root/.ansible/tmp/ansible-tmp-1584025599.6470826-175418404922737/async_wrapper.py 5808082932 7200 /root/.ansible/tmp/ansible-tmp-1584025599.6470826-175418404922737/AnsiballZ_docker_container.py _ && sleep 0'\r\n    changed: [localhost] => (item=local-a4b548a2-0ca6-4583-b7f5-0389afe4af1c) => {\r\n        \"ansible_job_id\": \"5808082932.280\",\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": true,\r\n        \"finished\": 0,\r\n        \"item\": {\r\n            \"hostname\": \"local\",\r\n            \"image\": \"docker.io/pycontribs/centos:7\",\r\n            \"name\": \"local-a4b548a2-0ca6-4583-b7f5-0389afe4af1c\",\r\n            \"pre_build_image\": true\r\n        },\r\n        \"results_file\": \"/root/.ansible_async/5808082932.280\",\r\n        \"started\": 1\r\n    }\r\n\r\n    TASK [Wait for instance(s) creation to complete] *******************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:160\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/utilities/logic/async_status.py\r\n    Pipelining is enabled.\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.8 && sleep 0'\r\n    FAILED - RETRYING: Wait for instance(s) creation to complete (300 retries left).Result was: {\r\n        \"attempts\": 1,\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false,\r\n        \"retries\": 301\r\n    }\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/utilities/logic/async_status.py\r\n    Pipelining is enabled.\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.8 && sleep 0'\r\n    FAILED - RETRYING: Wait for instance(s) creation to complete (299 retries left).Result was: {\r\n        \"attempts\": 2,\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false,\r\n        \"retries\": 301\r\n    }\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/utilities/logic/async_status.py\r\n    Pipelining is enabled.\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.8 && sleep 0'\r\n    changed: [localhost] => (item=None) => {\r\n        \"attempts\": 3,\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": true\r\n    }\r\n    changed: [localhost] => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": true\r\n    }\r\n    META: ran handlers\r\n    META: ran handlers\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=5    changed=2    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'prepare'\r\nSkipping, prepare playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'converge'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_LIBRARY: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /etc/ansible-playbook/roles/host_trigger/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default\r\nMOLECULE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /etc/ansible-playbook/roles/host_trigger\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/etc/ansible-playbook/roles/host_trigger/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default MOLECULE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml MOLECULE_INVENTORY_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/etc/ansible-playbook/roles/host_trigger MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory /etc/ansible-playbook/roles/host_trigger/molecule/default/converge.yml -vvv\r\n\r\n    ansible-playbook 2.9.6\r\n      config file = /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\n      configured module search path = ['/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules', '/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library', '/etc/ansible-playbook/roles/host_trigger/library', '/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n      executable location = /usr/bin/ansible-playbook\r\n      python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\n    Using /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg as config file\r\n    host_list declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: converge.yml *********************************************************\r\n    1 plays in /etc/ansible-playbook/roles/host_trigger/molecule/default/converge.yml\r\n[WARNING]: Could not match supplied host pattern, ignoring: local\r\n\r\n    PLAY [Converge] ****************************************************************\r\n    skipping: no hosts matched\r\n\r\n    PLAY RECAP *********************************************************************\r\n\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'idempotence'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_LIBRARY: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /etc/ansible-playbook/roles/host_trigger/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default\r\nMOLECULE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /etc/ansible-playbook/roles/host_trigger\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/etc/ansible-playbook/roles/host_trigger/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default MOLECULE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml MOLECULE_INVENTORY_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/etc/ansible-playbook/roles/host_trigger MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-playbook --skip-tags=molecule-notest,notest,molecule-idempotence-notest --diff --inventory=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory /etc/ansible-playbook/roles/host_trigger/molecule/default/converge.yml -vvv\r\n\r\nIdempotence completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'side_effect'\r\nSkipping, side effect playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'verify'\r\n--> Running Ansible Verifier\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_LIBRARY: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /etc/ansible-playbook/roles/host_trigger/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default\r\nMOLECULE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /etc/ansible-playbook/roles/host_trigger\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/etc/ansible-playbook/roles/host_trigger/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default MOLECULE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml MOLECULE_INVENTORY_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/etc/ansible-playbook/roles/host_trigger MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory /etc/ansible-playbook/roles/host_trigger/molecule/default/verify.yml -vvv\r\n\r\n    ansible-playbook 2.9.6\r\n      config file = /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\n      configured module search path = ['/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules', '/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library', '/etc/ansible-playbook/roles/host_trigger/library', '/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n      executable location = /usr/bin/ansible-playbook\r\n      python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\n    Using /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg as config file\r\n    host_list declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: verify.yml ***********************************************************\r\n    1 plays in /etc/ansible-playbook/roles/host_trigger/molecule/default/verify.yml\r\n[WARNING]: Could not match supplied host pattern, ignoring: local\r\n\r\n    PLAY [Verify] ******************************************************************\r\n    skipping: no hosts matched\r\n\r\n    PLAY RECAP *********************************************************************\r\n\r\n\r\nVerifier completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter\r\nANSIBLE_LIBRARY: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules\r\nANSIBLE_ROLES_PATH: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /etc/ansible-playbook/roles/host_trigger/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default\r\nMOLECULE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml\r\nMOLECULE_PROJECT_DIRECTORY: /etc/ansible-playbook/roles/host_trigger\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml\r\nMOLECULE_VERIFIER_NAME: ansible\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/filter:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/plugins/filter:/etc/ansible-playbook/roles/host_trigger/plugins/filter:/root/.ansible/plugins/filter:/usr/share/ansible/plugins/filter ANSIBLE_LIBRARY=/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules:/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library:/etc/ansible-playbook/roles/host_trigger/library:/root/.ansible/plugins/modules:/usr/share/ansible/plugins/modules ANSIBLE_ROLES_PATH=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/roles:/etc/ansible-playbook/roles:/root/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/etc/ansible-playbook/roles/host_trigger/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default MOLECULE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/instance_config.yml MOLECULE_INVENTORY_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml MOLECULE_PROJECT_DIRECTORY=/etc/ansible-playbook/roles/host_trigger MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/state.yml MOLECULE_VERIFIER_NAME=ansible MOLECULE_VERIFIER_TEST_DIRECTORY=/etc/ansible-playbook/roles/host_trigger/molecule/default/molecule\r\n\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml -vvv\r\n\r\n    ansible-playbook 2.9.6\r\n      config file = /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg\r\n      configured module search path = ['/usr/lib/python3.8/site-packages/molecule/provisioner/ansible/plugins/modules', '/root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/library', '/etc/ansible-playbook/roles/host_trigger/library', '/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n      executable location = /usr/bin/ansible-playbook\r\n      python version = 3.8.2 (default, Feb 29 2020, 17:03:31) [GCC 9.2.0]\r\n    Using /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/ansible.cfg as config file\r\n    host_list declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:8\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /root/.ansible/tmp/ansible-tmp-1584025618.4100516-249282159798155 `\" && echo ansible-tmp-1584025618.4100516-249282159798155=\"` echo /root/.ansible/tmp/ansible-tmp-1584025618.4100516-249282159798155 `\" ) && sleep 0'\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/cloud/docker/docker_container.py\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-4080wov738y/tmpflrg8uwu TO /root/.ansible/tmp/ansible-tmp-1584025618.4100516-249282159798155/AnsiballZ_docker_container.py\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-4080wov738y/tmpvwx7s3jg TO /root/.ansible/tmp/ansible-tmp-1584025618.4100516-249282159798155/async_wrapper.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1584025618.4100516-249282159798155/ /root/.ansible/tmp/ansible-tmp-1584025618.4100516-249282159798155/AnsiballZ_docker_container.py /root/.ansible/tmp/ansible-tmp-1584025618.4100516-249282159798155/async_wrapper.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'ANSIBLE_ASYNC_DIR='\"'\"'~/.ansible_async'\"'\"' /usr/bin/python3.8 /root/.ansible/tmp/ansible-tmp-1584025618.4100516-249282159798155/async_wrapper.py 271184196056 7200 /root/.ansible/tmp/ansible-tmp-1584025618.4100516-249282159798155/AnsiballZ_docker_container.py _ && sleep 0'\r\n    changed: [localhost] => (item=local-a4b548a2-0ca6-4583-b7f5-0389afe4af1c) => {\r\n        \"ansible_job_id\": \"271184196056.425\",\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": true,\r\n        \"finished\": 0,\r\n        \"item\": {\r\n            \"hostname\": \"local\",\r\n            \"image\": \"docker.io/pycontribs/centos:7\",\r\n            \"name\": \"local-a4b548a2-0ca6-4583-b7f5-0389afe4af1c\",\r\n            \"pre_build_image\": true\r\n        },\r\n        \"results_file\": \"/root/.ansible_async/271184196056.425\",\r\n        \"started\": 1\r\n    }\r\n\r\n    TASK [Wait for instance(s) deletion to complete] *******************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:28\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/utilities/logic/async_status.py\r\n    Pipelining is enabled.\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.8 && sleep 0'\r\n    FAILED - RETRYING: Wait for instance(s) deletion to complete (300 retries left).Result was: {\r\n        \"attempts\": 1,\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": false,\r\n        \"retries\": 301\r\n    }\r\n    Using module file /usr/lib/python3.8/site-packages/ansible/modules/utilities/logic/async_status.py\r\n    Pipelining is enabled.\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3.8 && sleep 0'\r\n    changed: [localhost] => (item=None) => {\r\n        \"attempts\": 2,\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": true\r\n    }\r\n    changed: [localhost] => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\",\r\n        \"changed\": true\r\n    }\r\n\r\n    TASK [Delete docker network(s)] ************************************************\r\n    task path: /usr/lib/python3.8/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:36\r\n    META: ran handlers\r\n    META: ran handlers\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=2    changed=2    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\n\r\n--> Pruning extra files from scenario ephemeral directory\r\n--> Removing /root/.cache/molecule_parallel/host_trigger-a4b548a2-0ca6-4583-b7f5-0389afe4af1c\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2607/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2607/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2600", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2600/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2600/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2600/events", "html_url": "https://github.com/ansible-community/molecule/issues/2600", "id": 577009547, "node_id": "MDU6SXNzdWU1NzcwMDk1NDc=", "number": 2600, "title": "lint: documentation possible improvement", "user": {"login": "apatard", "id": 2619394, "node_id": "MDQ6VXNlcjI2MTkzOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2619394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apatard", "html_url": "https://github.com/apatard", "followers_url": "https://api.github.com/users/apatard/followers", "following_url": "https://api.github.com/users/apatard/following{/other_user}", "gists_url": "https://api.github.com/users/apatard/gists{/gist_id}", "starred_url": "https://api.github.com/users/apatard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apatard/subscriptions", "organizations_url": "https://api.github.com/users/apatard/orgs", "repos_url": "https://api.github.com/users/apatard/repos", "events_url": "https://api.github.com/users/apatard/events{/privacy}", "received_events_url": "https://api.github.com/users/apatard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-03-06T15:37:52Z", "updated_at": "2020-03-11T19:58:42Z", "closed_at": "2020-03-11T19:58:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The documentation of molecule 3.0 gives an example on how to write the lint: section of the molecule file:\r\n```lint: |\r\n  set -e\r\n  yamllint .\r\n  ansible-lint\r\n  flake8\r\n```\r\nThis version is not 100% equivalent of what was done with molecule 2.0 for flake8. It was more something like:\r\n```\r\nflake8 molecule/*/tests/*.py\r\n```\r\n\r\nFound out this issue in my Gitlab CI tests. I'm using virtualenv and following their documentation, it's inside the project directory. The result was that flake8 was trying to lint files inside the virtualenv directory. Annoying.\r\n\r\nMaybe add something about it in the documentation ?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2600/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2598", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2598/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2598/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2598/events", "html_url": "https://github.com/ansible-community/molecule/issues/2598", "id": 575384980, "node_id": "MDU6SXNzdWU1NzUzODQ5ODA=", "number": 2598, "title": "Documentation : Gitlab CI example doesn't match the comment anymore", "user": {"login": "rgarrigue", "id": 1872031, "node_id": "MDQ6VXNlcjE4NzIwMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1872031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgarrigue", "html_url": "https://github.com/rgarrigue", "followers_url": "https://api.github.com/users/rgarrigue/followers", "following_url": "https://api.github.com/users/rgarrigue/following{/other_user}", "gists_url": "https://api.github.com/users/rgarrigue/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgarrigue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgarrigue/subscriptions", "organizations_url": "https://api.github.com/users/rgarrigue/orgs", "repos_url": "https://api.github.com/users/rgarrigue/repos", "events_url": "https://api.github.com/users/rgarrigue/events{/privacy}", "received_events_url": "https://api.github.com/users/rgarrigue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-04T13:04:55Z", "updated_at": "2020-03-27T14:42:33Z", "closed_at": "2020-03-27T14:42:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nLatest doc\r\n\r\n# Actual Behaviour\r\n\r\nReading https://molecule.readthedocs.io/en/latest/ci.html#gitlab-ci, the explanation and the example doesn't make sense", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2598/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2598/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2597", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2597/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2597/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2597/events", "html_url": "https://github.com/ansible-community/molecule/issues/2597", "id": 574953085, "node_id": "MDU6SXNzdWU1NzQ5NTMwODU=", "number": 2597, "title": "3.0.2 testinfra not working on freshly initialized role", "user": {"login": "unglaublicherdude", "id": 13208176, "node_id": "MDQ6VXNlcjEzMjA4MTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13208176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unglaublicherdude", "html_url": "https://github.com/unglaublicherdude", "followers_url": "https://api.github.com/users/unglaublicherdude/followers", "following_url": "https://api.github.com/users/unglaublicherdude/following{/other_user}", "gists_url": "https://api.github.com/users/unglaublicherdude/gists{/gist_id}", "starred_url": "https://api.github.com/users/unglaublicherdude/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unglaublicherdude/subscriptions", "organizations_url": "https://api.github.com/users/unglaublicherdude/orgs", "repos_url": "https://api.github.com/users/unglaublicherdude/repos", "events_url": "https://api.github.com/users/unglaublicherdude/events{/privacy}", "received_events_url": "https://api.github.com/users/unglaublicherdude/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/24", "html_url": "https://github.com/ansible-community/molecule/milestone/24", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/24/labels", "id": 5134474, "node_id": "MDk6TWlsZXN0b25lNTEzNDQ3NA==", "number": 24, "title": "3.0.3", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-24T09:14:53Z", "updated_at": "2020-04-08T16:56:22Z", "due_on": null, "closed_at": "2020-04-08T16:55:43Z"}, "comments": 5, "created_at": "2020-03-03T21:20:40Z", "updated_at": "2020-03-11T20:13:25Z", "closed_at": "2020-03-11T20:13:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\ndocker run -v $(pwd):$(pwd) -w $(pwd) quay.io/ansible/molecule:3.0.2 molecule init role --verifier-name testinfra foobar\r\ndocker run -v /var/run/docker.sock:/var/run/docker.sock -v $(pwd):$(pwd) -w $(pwd) quay.io/ansible/molecule:3.0.2 molecule test\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker\r\n\r\nAnsible installation method (one of):\r\n\r\n- docker\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nThe default tests should run without any problems\r\n\r\n# Actual Behaviour\r\n\r\nan error is thrown\r\n\r\n```\r\nERROR: usage: pytest [options] [file_or_dir] [file_or_dir] [...]\r\npytest: error: unrecognized arguments: --connection=ansible --ansible-inventory=/root/.cache/molecule/foobar/default/inventory/ansible_inventory.yml\r\n  inifile: None\r\n  rootdir: /home/xxx/Downloads/Projects/test/foobar/molecule/default\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2597/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2597/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2596", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2596/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2596/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2596/events", "html_url": "https://github.com/ansible-community/molecule/issues/2596", "id": 574091794, "node_id": "MDU6SXNzdWU1NzQwOTE3OTQ=", "number": 2596, "title": "Doc bug - Getting Started Guide - Scenario Layout does not match described example", "user": {"login": "mh182", "id": 9980864, "node_id": "MDQ6VXNlcjk5ODA4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9980864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mh182", "html_url": "https://github.com/mh182", "followers_url": "https://api.github.com/users/mh182/followers", "following_url": "https://api.github.com/users/mh182/following{/other_user}", "gists_url": "https://api.github.com/users/mh182/gists{/gist_id}", "starred_url": "https://api.github.com/users/mh182/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mh182/subscriptions", "organizations_url": "https://api.github.com/users/mh182/orgs", "repos_url": "https://api.github.com/users/mh182/repos", "events_url": "https://api.github.com/users/mh182/events{/privacy}", "received_events_url": "https://api.github.com/users/mh182/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-03-02T16:27:54Z", "updated_at": "2023-01-27T10:30:26Z", "closed_at": "2020-03-12T18:13:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report for documentation\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.5\r\n  config file = None\r\n  configured module search path = ['/home/max/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/max/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /home/max/.local/bin/ansible\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nmolecule 3.0.2\r\n   ansible==2.9.5 python==3.6\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nThe described layout in section _The Scenario Layout_ matches the one created by the example.\r\n\r\n# Actual Behaviour\r\n\r\nThe directory `molecule/default` does not contain the file `Dockerfile.j2`, nor the directory `tests` (which exists in the root director).\r\n\r\n```\r\n$ molecule init role my-new-role\r\n--> Initializing new role my-new-role...\r\n$ tree\r\n.\r\n\u2514\u2500\u2500 my-new-role\r\n    \u251c\u2500\u2500 defaults\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n    \u251c\u2500\u2500 files\r\n    \u251c\u2500\u2500 handlers\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n    \u251c\u2500\u2500 meta\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n    \u251c\u2500\u2500 molecule\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 default\r\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 converge.yml\r\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 INSTALL.rst\r\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 molecule.yml\r\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 verify.yml\r\n    \u251c\u2500\u2500 README.md\r\n    \u251c\u2500\u2500 tasks\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n    \u251c\u2500\u2500 templates\r\n    \u251c\u2500\u2500 tests\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 inventory\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 test.yml\r\n    \u2514\u2500\u2500 vars\r\n        \u2514\u2500\u2500 main.yml\r\n\r\n11 directories, 12 files\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2596/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2596/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2587", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2587/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2587/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2587/events", "html_url": "https://github.com/ansible-community/molecule/issues/2587", "id": 570841237, "node_id": "MDU6SXNzdWU1NzA4NDEyMzc=", "number": 2587, "title": "yum-based test images should use Python 3 by default", "user": {"login": "brianhelba", "id": 1282879, "node_id": "MDQ6VXNlcjEyODI4Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1282879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianhelba", "html_url": "https://github.com/brianhelba", "followers_url": "https://api.github.com/users/brianhelba/followers", "following_url": "https://api.github.com/users/brianhelba/following{/other_user}", "gists_url": "https://api.github.com/users/brianhelba/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianhelba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianhelba/subscriptions", "organizations_url": "https://api.github.com/users/brianhelba/orgs", "repos_url": "https://api.github.com/users/brianhelba/repos", "events_url": "https://api.github.com/users/brianhelba/events{/privacy}", "received_events_url": "https://api.github.com/users/brianhelba/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-25T21:22:25Z", "updated_at": "2020-03-11T20:04:59Z", "closed_at": "2020-03-11T20:04:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, any image with `dnf` (the replacement for `yum`) will use Python 3, which primarily covers CentOS 8. Currently, images with only `yum` will use Python 2, which primarily covers CentOS 7.\r\n\r\nFollowing #2577 and the fact that Python 2 is End of Life, test images using `yum` should use Python 3 by default. If it's not acceptable to make this change now, then the change should be made when Molecule formally drops support for Python 2.\r\n\r\nThe change can be accomplished by running:\r\n```\r\nyum install -y /usr/bin/python3 /usr/bin/python3-config sudo yum-plugin-ovl bash iproute\r\n```\r\ninstead of\r\n```\r\nyum install -y /usr/bin/python /usr/bin/python2-config sudo yum-plugin-ovl bash iproute\r\n```\r\n[in `molecule/data/Dockerfile.j2`](https://github.com/ansible-community/molecule/blob/eef9a5fd1758d2e30398a81e9a1cd47d54bc6c2a/molecule/data/Dockerfile.j2#L19), `molecule/test/resources/playbooks/docker/Dockerfile.j2`, and `molecule/test/resources/playbooks/podman/Dockerfile.j2`.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2587/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2584", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2584/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2584/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2584/events", "html_url": "https://github.com/ansible-community/molecule/pull/2584", "id": 570054413, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc5MTUzMzA4", "number": 2584, "title": "Install rsync in Docker Image", "user": {"login": "dduportal", "id": 1522731, "node_id": "MDQ6VXNlcjE1MjI3MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1522731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dduportal", "html_url": "https://github.com/dduportal", "followers_url": "https://api.github.com/users/dduportal/followers", "following_url": "https://api.github.com/users/dduportal/following{/other_user}", "gists_url": "https://api.github.com/users/dduportal/gists{/gist_id}", "starred_url": "https://api.github.com/users/dduportal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dduportal/subscriptions", "organizations_url": "https://api.github.com/users/dduportal/orgs", "repos_url": "https://api.github.com/users/dduportal/repos", "events_url": "https://api.github.com/users/dduportal/events{/privacy}", "received_events_url": "https://api.github.com/users/dduportal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-24T18:48:06Z", "updated_at": "2020-02-26T13:20:37Z", "closed_at": "2020-02-25T21:15:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2584", "html_url": "https://github.com/ansible-community/molecule/pull/2584", "diff_url": "https://github.com/ansible-community/molecule/pull/2584.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2584.patch", "merged_at": "2020-02-25T21:14:59Z"}, "body": "#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\nThis PR fixes #2583 by installing rsync in the molecule Docker Image.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2584/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2584/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2583", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2583/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2583/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2583/events", "html_url": "https://github.com/ansible-community/molecule/issues/2583", "id": 570053690, "node_id": "MDU6SXNzdWU1NzAwNTM2OTA=", "number": 2583, "title": "Unable to use 'synchronize` module from Docker Image", "user": {"login": "dduportal", "id": 1522731, "node_id": "MDQ6VXNlcjE1MjI3MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1522731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dduportal", "html_url": "https://github.com/dduportal", "followers_url": "https://api.github.com/users/dduportal/followers", "following_url": "https://api.github.com/users/dduportal/following{/other_user}", "gists_url": "https://api.github.com/users/dduportal/gists{/gist_id}", "starred_url": "https://api.github.com/users/dduportal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dduportal/subscriptions", "organizations_url": "https://api.github.com/users/dduportal/orgs", "repos_url": "https://api.github.com/users/dduportal/repos", "events_url": "https://api.github.com/users/dduportal/events{/privacy}", "received_events_url": "https://api.github.com/users/dduportal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-24T18:46:54Z", "updated_at": "2020-02-25T21:15:00Z", "closed_at": "2020-02-25T21:15:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ docker run --rm -ti quay.io/ansible/molecule:3.0.1 sh -c \"ansible --version && molecule --version\"\r\nansible 2.9.4\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.1 (default, Jan 19 2020, 11:48:03) [GCC 9.2.0]\r\nmolecule 3.0.1\r\n   ansible==2.9.4 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):  Docker Image (pip)\r\n\r\nAnsible installation method (one of): Docker Image (pip)\r\n\r\n# Desired Behavior\r\n\r\nAs a molecule user using the Docker image `quay.io/ansible/molecule:3.0.1`\r\nWhen I test an Ansible playbook utilizing the module [`synchronize`](https://docs.ansible.com/ansible/latest/modules/synchronize_module.html) in a task\r\nThen I expect it to synchronize files to remote machines\r\n\r\n# Actual Behaviour\r\n\r\nAny call (in this context) to the module leads to the following error:\r\n\r\n```\r\nfatal: [ubuntu1804]: FAILED! => {\"changed\": false, \"msg\": \"Failed to find required executable rsync in paths: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"}\r\n```\r\n\r\n# Proposed Fix\r\n\r\nInstalling `rsync` in the Docker image fixes this unwanted behavior.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2583/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2583/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2582", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2582/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2582/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2582/events", "html_url": "https://github.com/ansible-community/molecule/pull/2582", "id": 570050366, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc5MTQ5OTUz", "number": 2582, "title": "Inline RUN in Dockerfile to fix `apk` calls", "user": {"login": "dduportal", "id": 1522731, "node_id": "MDQ6VXNlcjE1MjI3MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1522731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dduportal", "html_url": "https://github.com/dduportal", "followers_url": "https://api.github.com/users/dduportal/followers", "following_url": "https://api.github.com/users/dduportal/following{/other_user}", "gists_url": "https://api.github.com/users/dduportal/gists{/gist_id}", "starred_url": "https://api.github.com/users/dduportal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dduportal/subscriptions", "organizations_url": "https://api.github.com/users/dduportal/orgs", "repos_url": "https://api.github.com/users/dduportal/repos", "events_url": "https://api.github.com/users/dduportal/events{/privacy}", "received_events_url": "https://api.github.com/users/dduportal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/24", "html_url": "https://github.com/ansible-community/molecule/milestone/24", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/24/labels", "id": 5134474, "node_id": "MDk6TWlsZXN0b25lNTEzNDQ3NA==", "number": 24, "title": "3.0.3", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-24T09:14:53Z", "updated_at": "2020-04-08T16:56:22Z", "due_on": null, "closed_at": "2020-04-08T16:55:43Z"}, "comments": 2, "created_at": "2020-02-24T18:41:24Z", "updated_at": "2020-02-26T13:20:07Z", "closed_at": "2020-02-26T11:54:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2582", "html_url": "https://github.com/ansible-community/molecule/pull/2582", "diff_url": "https://github.com/ansible-community/molecule/pull/2582.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2582.patch", "merged_at": "2020-02-26T11:54:42Z"}, "body": "to fix apk error 'ERROR: unsatisfiable constraints' when working with the Docker Image.\r\n\r\n\r\nPlease include details of what it is, how to use it, how it's been tested\r\nPlease include an entry in the CHANGELOG.md if the change will impact users.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\nThis PR fixes #2581 .\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2582/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2581", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2581/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2581/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2581/events", "html_url": "https://github.com/ansible-community/molecule/issues/2581", "id": 570050099, "node_id": "MDU6SXNzdWU1NzAwNTAwOTk=", "number": 2581, "title": "Docker Image: using `apk` always fails due to Dockerfile syntax error", "user": {"login": "dduportal", "id": 1522731, "node_id": "MDQ6VXNlcjE1MjI3MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1522731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dduportal", "html_url": "https://github.com/dduportal", "followers_url": "https://api.github.com/users/dduportal/followers", "following_url": "https://api.github.com/users/dduportal/following{/other_user}", "gists_url": "https://api.github.com/users/dduportal/gists{/gist_id}", "starred_url": "https://api.github.com/users/dduportal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dduportal/subscriptions", "organizations_url": "https://api.github.com/users/dduportal/orgs", "repos_url": "https://api.github.com/users/dduportal/repos", "events_url": "https://api.github.com/users/dduportal/events{/privacy}", "received_events_url": "https://api.github.com/users/dduportal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-24T18:40:56Z", "updated_at": "2020-03-30T13:09:54Z", "closed_at": "2020-02-26T11:54:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ docker run --rm -ti quay.io/ansible/molecule:3.0.1 sh -c \"ansible --version && molecule --version\"\r\nansible 2.9.4\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.8/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.8.1 (default, Jan 19 2020, 11:48:03) [GCC 9.2.0]\r\nmolecule 3.0.1\r\n   ansible==2.9.4 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):  Docker Image (pip)\r\n\r\nAnsible installation method (one of): Docker Image (pip)\r\n\r\n# Desired Behavior\r\n\r\nAs a molecule user using the Docker image `quay.io/ansible/molecule:3.0.1`\r\nWhen I run a container based on this image \r\nAnd that I install any package within using the command `apk add --no-cache <package-name>` (exemple with `rsync`)\r\nThen I expect the package to be installed (with a working network of course).\r\n\r\n# Actual Behaviour\r\n\r\nAny `apk` commands fails with the following error:\r\n\r\n```\r\nERROR: unsatisfiable constraints:\r\n  /root/.cache (missing):\r\n    required by: world[/root/.cache]\r\n  apk (missing):\r\n    required by: world[apk]\r\n  del (missing):\r\n    required by: world[del]\r\n  etc (missing):\r\n    required by: world[etc]\r\n  gem (missing):\r\n    required by: world[gem]\r\n  install (missing):\r\n    required by: world[install]\r\n  json (missing):\r\n    required by: world[json]\r\n  rm (missing):\r\n    required by: world[rm]\r\n  rubocop (missing):\r\n    required by: world[rubocop]\r\n```\r\n\r\n# Reproduction Case:\r\n\r\n```\r\n$ docker run --rm -ti quay.io/ansible/molecule:3.0.1 apk add --no-cache rsync\r\nfetch http://dl-cdn.alpinelinux.org/alpine/edge/main/x86_64/APKINDEX.tar.gz\r\nfetch http://dl-cdn.alpinelinux.org/alpine/edge/community/x86_64/APKINDEX.tar.gz\r\nERROR: unsatisfiable constraints:\r\n  /root/.cache (missing):\r\n    required by: world[/root/.cache]\r\n  apk (missing):\r\n    required by: world[apk]\r\n  del (missing):\r\n    required by: world[del]\r\n  etc (missing):\r\n    required by: world[etc]\r\n  gem (missing):\r\n    required by: world[gem]\r\n  install (missing):\r\n    required by: world[install]\r\n  json (missing):\r\n    required by: world[json]\r\n  rm (missing):\r\n    required by: world[rm]\r\n  rubocop (missing):\r\n    required by: world[rubocop]\r\n```\r\n\r\n# Proposed Fix\r\n\r\nIncoming PR: the flattened `RUN` instruction at https://github.com/ansible-community/molecule/blob/3.0.1/Dockerfile#L137 (link points to `3.0.1` tag but it's the same on `master`) is made of 4 different shell instructions, without any separator, which result in passing the 3 last instructions as arguments to `apk`.\r\n\r\nAdding `&&` instructions separator would fix the issue and provide fail fast pipeline.\r\n\r\nPR incoming\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2581/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2581/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2580", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2580/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2580/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2580/events", "html_url": "https://github.com/ansible-community/molecule/issues/2580", "id": 569883539, "node_id": "MDU6SXNzdWU1Njk4ODM1Mzk=", "number": 2580, "title": "Validation of verifier's `env` option keys is too restrictive", "user": {"login": "ouroboros8", "id": 6664881, "node_id": "MDQ6VXNlcjY2NjQ4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/6664881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ouroboros8", "html_url": "https://github.com/ouroboros8", "followers_url": "https://api.github.com/users/ouroboros8/followers", "following_url": "https://api.github.com/users/ouroboros8/following{/other_user}", "gists_url": "https://api.github.com/users/ouroboros8/gists{/gist_id}", "starred_url": "https://api.github.com/users/ouroboros8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ouroboros8/subscriptions", "organizations_url": "https://api.github.com/users/ouroboros8/orgs", "repos_url": "https://api.github.com/users/ouroboros8/repos", "events_url": "https://api.github.com/users/ouroboros8/events{/privacy}", "received_events_url": "https://api.github.com/users/ouroboros8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-24T14:14:34Z", "updated_at": "2020-10-23T16:45:51Z", "closed_at": "2020-10-23T16:45:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.5\r\n  ...\r\n  python version = 3.8.1 (default, Dec 27 2019, 18:06:00) [Clang 11.0.0 (clang-1100.0.33.16)]\r\nmolecule 3.0.2\r\n   ansible==2.9.5 python==3.8\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- testinfra\r\n\r\n# Desired Behavior\r\n\r\nThe `env` option on molecule verifiers allows users to pass environment variables with mixed- or lower-case names to the verifier.\r\n\r\n# Actual Behaviour\r\n\r\n[Current validation](https://github.com/ansible-community/molecule/blob/master/molecule/model/schema_v3.py#L225) does not allow lower-case letters in environment variable names.\r\n\r\nTo reproduce use the following molecule config:\r\n\r\n```yaml\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nplatforms:\r\n  - name: instance\r\n    image: docker.io/pycontribs/centos:7\r\n    pre_build_image: true\r\nprovisioner:\r\n  name: ansible\r\nverifier:\r\n  name: ansible\r\n  env:\r\n    foo: bar\r\n```\r\n\r\nAnd run molecule:\r\n\r\n```\r\n$ molecule --debug test\r\nERROR: Failed to validate.\r\n\r\n{'verifier': [{'env': [{'foo': [\"value does not match regex '^[A-Z0-9_-]+$'\"]}]}]}\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2580/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2580/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2579", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2579/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2579/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2579/events", "html_url": "https://github.com/ansible-community/molecule/pull/2579", "id": 569642686, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4ODE1NzMw", "number": 2579, "title": "Ensure testinfra is installed in Docker image", "user": {"login": "brianhelba", "id": 1282879, "node_id": "MDQ6VXNlcjEyODI4Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1282879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianhelba", "html_url": "https://github.com/brianhelba", "followers_url": "https://api.github.com/users/brianhelba/followers", "following_url": "https://api.github.com/users/brianhelba/following{/other_user}", "gists_url": "https://api.github.com/users/brianhelba/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianhelba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianhelba/subscriptions", "organizations_url": "https://api.github.com/users/brianhelba/orgs", "repos_url": "https://api.github.com/users/brianhelba/repos", "events_url": "https://api.github.com/users/brianhelba/events{/privacy}", "received_events_url": "https://api.github.com/users/brianhelba/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/24", "html_url": "https://github.com/ansible-community/molecule/milestone/24", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/24/labels", "id": 5134474, "node_id": "MDk6TWlsZXN0b25lNTEzNDQ3NA==", "number": 24, "title": "3.0.3", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-24T09:14:53Z", "updated_at": "2020-04-08T16:56:22Z", "due_on": null, "closed_at": "2020-04-08T16:55:43Z"}, "comments": 2, "created_at": "2020-02-24T05:21:02Z", "updated_at": "2020-07-16T23:19:46Z", "closed_at": "2020-02-24T10:29:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2579", "html_url": "https://github.com/ansible-community/molecule/pull/2579", "diff_url": "https://github.com/ansible-community/molecule/pull/2579.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2579.patch", "merged_at": "2020-02-24T10:29:32Z"}, "body": "This extends ba8bf67e563aa7bc4d6275d78bfe9217e5bdedd5 .\r\n\r\nAfter this change, running `pip3 list` within the Docker container shows `testinfra 4.1.0`. Before the change, `testinfra` was absent.\r\n\r\nAlso, fixes a syntax error in `Dockerfile`.\r\n\r\n#### PR Type\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2579/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2577", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2577/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2577/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2577/events", "html_url": "https://github.com/ansible-community/molecule/pull/2577", "id": 569620374, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4Nzk3Mzky", "number": 2577, "title": "Install Python 3 in non-RPM test images", "user": {"login": "brianhelba", "id": 1282879, "node_id": "MDQ6VXNlcjEyODI4Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1282879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brianhelba", "html_url": "https://github.com/brianhelba", "followers_url": "https://api.github.com/users/brianhelba/followers", "following_url": "https://api.github.com/users/brianhelba/following{/other_user}", "gists_url": "https://api.github.com/users/brianhelba/gists{/gist_id}", "starred_url": "https://api.github.com/users/brianhelba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brianhelba/subscriptions", "organizations_url": "https://api.github.com/users/brianhelba/orgs", "repos_url": "https://api.github.com/users/brianhelba/repos", "events_url": "https://api.github.com/users/brianhelba/events{/privacy}", "received_events_url": "https://api.github.com/users/brianhelba/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/24", "html_url": "https://github.com/ansible-community/molecule/milestone/24", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/24/labels", "id": 5134474, "node_id": "MDk6TWlsZXN0b25lNTEzNDQ3NA==", "number": 24, "title": "3.0.3", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2020-02-24T09:14:53Z", "updated_at": "2020-04-08T16:56:22Z", "due_on": null, "closed_at": "2020-04-08T16:55:43Z"}, "comments": 7, "created_at": "2020-02-24T03:43:07Z", "updated_at": "2020-07-16T23:21:56Z", "closed_at": "2020-02-26T11:54:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2577", "html_url": "https://github.com/ansible-community/molecule/pull/2577", "diff_url": "https://github.com/ansible-community/molecule/pull/2577.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2577.patch", "merged_at": "2020-02-26T11:54:47Z"}, "body": "Python 2 is End of Life. This change does not affect how Molecule is installed or run on the driver host.\r\n\r\nThe Python 3 interpreter within test images should always be found by Ansible: https://docs.ansible.com/ansible/latest/reference_appendices/interpreter_discovery.html\r\n\r\nThis does not change the default Python for RPM-based distros (using dnf / yum).\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2577/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2577/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2570", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2570/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2570/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2570/events", "html_url": "https://github.com/ansible-community/molecule/issues/2570", "id": 568991137, "node_id": "MDU6SXNzdWU1Njg5OTExMzc=", "number": 2570, "title": "Molecule failure molecule_core.py No module named 'molecule'", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-02-21T14:33:20Z", "updated_at": "2020-09-08T07:14:36Z", "closed_at": "2020-03-11T20:08:13Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I seen this happening when molecule was installed using `pip install --user molecule` on a specific machine but I was not able to reproduce it myself.\r\n\r\n![ss](https://sbarnea.com/ss/Screen-Shot-2020-02-21-14-32-17.23.png)\r\n\r\nI will need more feedback in order to investigate it.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2570/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2570/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2569", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2569/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2569/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2569/events", "html_url": "https://github.com/ansible-community/molecule/issues/2569", "id": 568471405, "node_id": "MDU6SXNzdWU1Njg0NzE0MDU=", "number": 2569, "title": "Invoking a scenario fails if parallel scenarios exist", "user": {"login": "greg-hellings", "id": 273582, "node_id": "MDQ6VXNlcjI3MzU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/273582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greg-hellings", "html_url": "https://github.com/greg-hellings", "followers_url": "https://api.github.com/users/greg-hellings/followers", "following_url": "https://api.github.com/users/greg-hellings/following{/other_user}", "gists_url": "https://api.github.com/users/greg-hellings/gists{/gist_id}", "starred_url": "https://api.github.com/users/greg-hellings/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greg-hellings/subscriptions", "organizations_url": "https://api.github.com/users/greg-hellings/orgs", "repos_url": "https://api.github.com/users/greg-hellings/repos", "events_url": "https://api.github.com/users/greg-hellings/events{/privacy}", "received_events_url": "https://api.github.com/users/greg-hellings/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-20T17:54:00Z", "updated_at": "2020-02-23T12:08:09Z", "closed_at": "2020-02-23T12:08:09Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.4\r\n  config file = /home/ghelling/.ansible.cfg\r\n  configured module search path = ['/home/ghelling/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ghelling/venv/tools3/lib64/python3.7/site-packages/ansible\r\n  executable location = /home/ghelling/venv/tools3/bin/ansible\r\n  python version = 3.7.6 (default, Jan 30 2020, 09:44:41) [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\r\nmolecule 3.0.0\r\n   ansible==2.9.4 python==3.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI have two scenarios in parallel directories under molecule, as well as a shared folder to hold shared code for both of them:\r\n\r\n```\r\n$ tree -L 1 molecule\r\nmolecule\r\n\u251c\u2500\u2500 docker\r\n\u251c\u2500\u2500 openstack\r\n\u2514\u2500\u2500 shared\r\n```\r\n\r\nI would like to be able to run just the `docker` scenario and test how the migration to 3.0 is coming along\r\n\r\n```\r\n$ molecule lint -s docker\r\n<successful lint run>\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nBecause the OpenStack driver is not yet out/installed (even though the \"docker\" scenario is specifically being selected):\r\n\r\n```\r\n$ molecule lint -s docker\r\n---\r\ndriver:\r\n  name: openstack\r\nplatforms:\r\n  - flavor: ci.m1.medium\r\n    image: CentOS-7-x86_64-GenericCloud-released-latest\r\n    name: test-dhcpd\r\n\r\nERROR: Failed to pre-validate.\r\n\r\n{'driver': [{'name': ['unallowed value openstack']}]}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2569/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2569/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2564", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2564/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2564/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2564/events", "html_url": "https://github.com/ansible-community/molecule/issues/2564", "id": 568324071, "node_id": "MDU6SXNzdWU1NjgzMjQwNzE=", "number": 2564, "title": "Molecule 3.0.0 introduced a bug at linting step (yamllint)", "user": {"login": "fauust", "id": 2197555, "node_id": "MDQ6VXNlcjIxOTc1NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2197555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fauust", "html_url": "https://github.com/fauust", "followers_url": "https://api.github.com/users/fauust/followers", "following_url": "https://api.github.com/users/fauust/following{/other_user}", "gists_url": "https://api.github.com/users/fauust/gists{/gist_id}", "starred_url": "https://api.github.com/users/fauust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fauust/subscriptions", "organizations_url": "https://api.github.com/users/fauust/orgs", "repos_url": "https://api.github.com/users/fauust/repos", "events_url": "https://api.github.com/users/fauust/events{/privacy}", "received_events_url": "https://api.github.com/users/fauust/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-20T14:04:48Z", "updated_at": "2020-04-23T18:40:36Z", "closed_at": "2020-02-20T14:28:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```bash\r\n\u276f ansible --version && molecule --version                                                                \r\nansible 2.9.5\r\n  config file = None\r\n  configured module search path = ['/home/faust/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/faust/temp/venv/lib/python3.7/site-packages/ansible\r\n  executable location = /home/faust/temp/venv/bin/ansible\r\n  python version = 3.7.3 (default, Dec 20 2019, 18:57:59) [GCC 8.3.0]\r\nmolecule 3.0.0\r\n   ansible==2.9.5 python==3.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWith molecule 2.22\r\n```bash\r\n\u276f molecule --version                                                                                     \r\nmolecule, version 2.22\r\n\u276f molecule lint                                                                                          \r\n--> Validating schema /home/faust/temp/test/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 lint\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/faust/temp/test/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/faust/temp/test/molecule/default/tests/...\r\nLint completed successfully.\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n```bash\r\n~/temp/test\r\n\u276f molecule lint                                                                                          \r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - image: centos:7\r\n    name: instance\r\nprovisioner:\r\n  lint:\r\n    name: ansible-lint\r\n  name: ansible\r\nverifier:\r\n  lint:\r\n    name: flake8\r\n  name: testinfra\r\n\r\nERROR: Failed to pre-validate.\r\n\r\n{'lint': ['must be of string type']}\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2564/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2559", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2559/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2559/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2559/events", "html_url": "https://github.com/ansible-community/molecule/pull/2559", "id": 565920306, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc1ODM2NzI4", "number": 2559, "title": "Corrects playbook.yml deprecation message", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 7, "created_at": "2020-02-16T15:11:27Z", "updated_at": "2020-02-17T16:35:15Z", "closed_at": "2020-02-17T16:35:15Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2559", "html_url": "https://github.com/ansible-community/molecule/pull/2559", "diff_url": "https://github.com/ansible-community/molecule/pull/2559.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2559.patch", "merged_at": "2020-02-17T16:35:15Z"}, "body": "Previous implementation wrongly swapped arguments on deprecation\r\nmessage, which confused users about rename direction.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2559/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2555", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2555/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2555/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2555/events", "html_url": "https://github.com/ansible-community/molecule/pull/2555", "id": 565746619, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc1NzE0NTM3", "number": 2555, "title": "Avoid breaking pytest collection with testinfra", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-15T13:14:49Z", "updated_at": "2020-07-19T08:09:59Z", "closed_at": "2020-02-15T18:09:19Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2555", "html_url": "https://github.com/ansible-community/molecule/pull/2555", "diff_url": "https://github.com/ansible-community/molecule/pull/2555.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2555.patch", "merged_at": "2020-02-15T18:09:19Z"}, "body": "Updates testinfra cookiecutter template with code that skips the tests\r\nwhen run outside molecule or when testinfra is not installed.\r\n\r\nThis would prevent breaking other usages of pytest, including collection,\r\nwhen creating a new role inside a repository that already had tests.\r\n\r\nFixes: #2528\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2555/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2554", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2554/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2554/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2554/events", "html_url": "https://github.com/ansible-community/molecule/pull/2554", "id": 565732093, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc1NzA0MjQ3", "number": 2554, "title": "Fixes playbook to converge rename regressions", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 3, "created_at": "2020-02-15T10:57:54Z", "updated_at": "2020-07-19T07:42:34Z", "closed_at": "2020-02-15T19:28:26Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2554", "html_url": "https://github.com/ansible-community/molecule/pull/2554", "diff_url": "https://github.com/ansible-community/molecule/pull/2554.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2554.patch", "merged_at": "2020-02-15T19:28:26Z"}, "body": "Assure that optional steps are skipped when playbooks are missing.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2554/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2549", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2549/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2549/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2549/events", "html_url": "https://github.com/ansible-community/molecule/pull/2549", "id": 562772394, "node_id": "MDExOlB1bGxSZXF1ZXN0MzczMzA3MDg2", "number": 2549, "title": "Change init commands to avoid override by default", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/19", "html_url": "https://github.com/ansible-community/molecule/milestone/19", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/19/labels", "id": 5072617, "node_id": "MDk6TWlsZXN0b25lNTA3MjYxNw==", "number": 19, "title": "3.1.0", "description": "- Drop current deprecations\r\n- Remove podman/docker from core\r\n- Remove testinfra from core\r\n\r\nWhile we remove podman and docker from core, we 3.1 should not be released before the external plugins are ready, so from the user point of view upgrading from 3.0 to 3.1 should be transparent, regardless if they use docker and podman drivers or not.\r\n", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 16, "state": "closed", "created_at": "2020-02-04T20:25:49Z", "updated_at": "2020-11-08T15:10:43Z", "due_on": "2020-09-20T07:00:00Z", "closed_at": "2020-10-27T15:25:40Z"}, "comments": 1, "created_at": "2020-02-10T19:20:21Z", "updated_at": "2020-10-23T17:15:36Z", "closed_at": "2020-07-19T09:51:00Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": true, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2549", "html_url": "https://github.com/ansible-community/molecule/pull/2549", "diff_url": "https://github.com/ansible-community/molecule/pull/2549.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2549.patch", "merged_at": null}, "body": "Changed default value of override to False in order to prevent overriding\r\nalready existing files when expanding templates.\r\n\r\nFixes bug where running `molecule init scenario foo` would override\r\nyour own .yamllint file.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2549/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2549/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2546", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2546/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2546/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2546/events", "html_url": "https://github.com/ansible-community/molecule/pull/2546", "id": 561797128, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyNTM5ODcz", "number": 2546, "title": "Add missing dependencies to docker image", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-07T18:21:07Z", "updated_at": "2020-07-19T07:45:33Z", "closed_at": "2020-02-07T21:19:45Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2546", "html_url": "https://github.com/ansible-community/molecule/pull/2546", "diff_url": "https://github.com/ansible-community/molecule/pull/2546.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2546.patch", "merged_at": "2020-02-07T21:19:45Z"}, "body": "- adds lint extras\r\n- adds testinfra which has no extra\r\n\r\nPartial-Fix: #2543\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2546/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2546/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2545", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2545/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2545/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2545/events", "html_url": "https://github.com/ansible-community/molecule/pull/2545", "id": 561636114, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyNDEwNjkw", "number": 2545, "title": "Assure verify step is not skipped with testinfra", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 8, "created_at": "2020-02-07T13:25:59Z", "updated_at": "2020-02-11T00:11:11Z", "closed_at": "2020-02-11T00:11:11Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2545", "html_url": "https://github.com/ansible-community/molecule/pull/2545", "diff_url": "https://github.com/ansible-community/molecule/pull/2545.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2545.patch", "merged_at": "2020-02-11T00:11:11Z"}, "body": "Fixed regression in previous pre-release cased by the switch from having ansible the default verifier instead of testinfra. Ansible verifier behavior is to skip verify step when playbook is missing, but with testinfra skip should not happen because the tests are not a playbook.\r\n\r\nFixes: #2543\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2545/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2543", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2543/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2543/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2543/events", "html_url": "https://github.com/ansible-community/molecule/issues/2543", "id": 561597629, "node_id": "MDU6SXNzdWU1NjE1OTc2Mjk=", "number": 2543, "title": "3.0a6 & 3.0a7: Verifier testinfra does not run", "user": {"login": "unglaublicherdude", "id": 13208176, "node_id": "MDQ6VXNlcjEzMjA4MTc2", "avatar_url": "https://avatars.githubusercontent.com/u/13208176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unglaublicherdude", "html_url": "https://github.com/unglaublicherdude", "followers_url": "https://api.github.com/users/unglaublicherdude/followers", "following_url": "https://api.github.com/users/unglaublicherdude/following{/other_user}", "gists_url": "https://api.github.com/users/unglaublicherdude/gists{/gist_id}", "starred_url": "https://api.github.com/users/unglaublicherdude/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unglaublicherdude/subscriptions", "organizations_url": "https://api.github.com/users/unglaublicherdude/orgs", "repos_url": "https://api.github.com/users/unglaublicherdude/repos", "events_url": "https://api.github.com/users/unglaublicherdude/events{/privacy}", "received_events_url": "https://api.github.com/users/unglaublicherdude/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 1, "created_at": "2020-02-07T12:03:29Z", "updated_at": "2020-02-07T21:19:45Z", "closed_at": "2020-02-07T21:19:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nI actually run my tests within the docker images taged as 3.0a6 and 3.0a7\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker\r\n\r\nAnsible installation method (one of):\r\n\r\n- docker\r\n\r\nDetail any linters or test runners used:\r\n\r\nNothing special. I just go interactively into the official container.\r\n\r\n```\r\n$ docker run -it --entrypoint=/bin/sh quay.io/ansible/molecule:3.0a6\r\n$$ molecule init role --verifier testinfra rolename\r\n$$ cd rolename\r\n$$ molecule test --all\r\n[...]\r\n--> Scenario: 'install_docker_with_platform_container'\r\n--> Action: 'verify'\r\nSkipping, verify playbook not configured.\r\n[...]\r\n```\r\n\r\n# Desired Behavior\r\n\r\nIt should have run the tests the initializer placed in the tests directory.\r\n\r\n# Actual Behaviour\r\n\r\nIt skips the tests.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2543/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2543/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2542", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2542/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2542/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2542/events", "html_url": "https://github.com/ansible-community/molecule/pull/2542", "id": 561592308, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyMzc0NDky", "number": 2542, "title": "Fix converge to playbook rename fallback logic", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 3, "created_at": "2020-02-07T11:51:33Z", "updated_at": "2020-02-07T18:36:17Z", "closed_at": "2020-02-07T18:36:17Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2542", "html_url": "https://github.com/ansible-community/molecule/pull/2542", "diff_url": "https://github.com/ansible-community/molecule/pull/2542.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2542.patch", "merged_at": "2020-02-07T18:36:17Z"}, "body": "Avoids failure to run check in some cases with 3.0a6\r\n\r\nFixes: #2541\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2542/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2542/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2541", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2541/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2541/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2541/events", "html_url": "https://github.com/ansible-community/molecule/issues/2541", "id": 561586838, "node_id": "MDU6SXNzdWU1NjE1ODY4Mzg=", "number": 2541, "title": "3.0a6: molecule fails to find renamed playbook.yml", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 0, "created_at": "2020-02-07T11:39:53Z", "updated_at": "2020-02-07T18:36:17Z", "closed_at": "2020-02-07T18:36:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "On 3.0a6, if you renamed `playbook.yml` to `converge.yml` you will get an error tying to run `molecule check`.\r\n\r\nThis is because we missed to implement that in check. I will make a fix today.\r\n\r\nActions reported as affected:\r\n* check\r\n* syntax\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2541/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2528", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2528/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2528/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2528/events", "html_url": "https://github.com/ansible-community/molecule/issues/2528", "id": 559664196, "node_id": "MDU6SXNzdWU1NTk2NjQxOTY=", "number": 2528, "title": "testinfra template breaks pytest collection", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-04T11:42:36Z", "updated_at": "2020-02-15T18:09:19Z", "closed_at": "2020-02-15T18:09:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems that our templates used by testinfra create some python test files which are breaking the collection on pytest.\r\n\r\n```\r\n_ ERROR collecting molecule/test/scenarios/verifier/molecule/testinfra/tests/test_default.py _\r\nmolecule/test/scenarios/verifier/molecule/testinfra/tests/test_default.py:8: in <module>\r\n    os.environ['MOLECULE_INVENTORY_FILE']\r\n.tox/py27-ansible28-unit/lib/python2.7/UserDict.py:40: in __getitem__\r\n    raise KeyError(key)\r\nE   KeyError: 'MOLECULE_INVENTORY_FILE'\r\n```\r\n\r\nThat code can be rewritten in such way that it would not break pytest execution by default. We need to do this and also to implement a check to avoid regression. \r\n\r\nShortly, running `pytest --collect-only` after expanding a template should never fail.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2528/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2524", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2524/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2524/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2524/events", "html_url": "https://github.com/ansible-community/molecule/pull/2524", "id": 558685315, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcwMDAyMzcw", "number": 2524, "title": "Shell dependency: use proper lexical parsing", "user": {"login": "sio", "id": 334908, "node_id": "MDQ6VXNlcjMzNDkwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/334908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sio", "html_url": "https://github.com/sio", "followers_url": "https://api.github.com/users/sio/followers", "following_url": "https://api.github.com/users/sio/following{/other_user}", "gists_url": "https://api.github.com/users/sio/gists{/gist_id}", "starred_url": "https://api.github.com/users/sio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sio/subscriptions", "organizations_url": "https://api.github.com/users/sio/orgs", "repos_url": "https://api.github.com/users/sio/repos", "events_url": "https://api.github.com/users/sio/events{/privacy}", "received_events_url": "https://api.github.com/users/sio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "sio", "id": 334908, "node_id": "MDQ6VXNlcjMzNDkwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/334908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sio", "html_url": "https://github.com/sio", "followers_url": "https://api.github.com/users/sio/followers", "following_url": "https://api.github.com/users/sio/following{/other_user}", "gists_url": "https://api.github.com/users/sio/gists{/gist_id}", "starred_url": "https://api.github.com/users/sio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sio/subscriptions", "organizations_url": "https://api.github.com/users/sio/orgs", "repos_url": "https://api.github.com/users/sio/repos", "events_url": "https://api.github.com/users/sio/events{/privacy}", "received_events_url": "https://api.github.com/users/sio/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sio", "id": 334908, "node_id": "MDQ6VXNlcjMzNDkwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/334908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sio", "html_url": "https://github.com/sio", "followers_url": "https://api.github.com/users/sio/followers", "following_url": "https://api.github.com/users/sio/following{/other_user}", "gists_url": "https://api.github.com/users/sio/gists{/gist_id}", "starred_url": "https://api.github.com/users/sio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sio/subscriptions", "organizations_url": "https://api.github.com/users/sio/orgs", "repos_url": "https://api.github.com/users/sio/repos", "events_url": "https://api.github.com/users/sio/events{/privacy}", "received_events_url": "https://api.github.com/users/sio/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-02-02T11:50:39Z", "updated_at": "2020-02-03T11:57:23Z", "closed_at": "2020-02-03T11:28:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2524", "html_url": "https://github.com/ansible-community/molecule/pull/2524", "diff_url": "https://github.com/ansible-community/molecule/pull/2524.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2524.patch", "merged_at": "2020-02-03T11:28:48Z"}, "body": "Shell dependency manager used simple splitting on whitespace for parsing command lines. That would lead to incorrect parsing and execution of more complex commands like `echo \"hello world\"`.\r\n\r\nThis PR introduces proper lexical parsing with shlex module from Python standard library. Unit tests and changelog entry are included.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2524/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2517", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2517/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2517/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2517/events", "html_url": "https://github.com/ansible-community/molecule/issues/2517", "id": 556322900, "node_id": "MDU6SXNzdWU1NTYzMjI5MDA=", "number": 2517, "title": "Dockerfile.j2 does not support Ubuntu 20.04/focal or CentOS/RHEL 8 = no \"python\" package", "user": {"login": "dgvigil", "id": 1594166, "node_id": "MDQ6VXNlcjE1OTQxNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1594166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dgvigil", "html_url": "https://github.com/dgvigil", "followers_url": "https://api.github.com/users/dgvigil/followers", "following_url": "https://api.github.com/users/dgvigil/following{/other_user}", "gists_url": "https://api.github.com/users/dgvigil/gists{/gist_id}", "starred_url": "https://api.github.com/users/dgvigil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dgvigil/subscriptions", "organizations_url": "https://api.github.com/users/dgvigil/orgs", "repos_url": "https://api.github.com/users/dgvigil/repos", "events_url": "https://api.github.com/users/dgvigil/events{/privacy}", "received_events_url": "https://api.github.com/users/dgvigil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-28T16:26:13Z", "updated_at": "2020-01-31T20:27:39Z", "closed_at": "2020-01-28T16:54:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.4\r\n  config file = None\r\n  configured module search path = ['/Users/dgvigi/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.6 (default, Dec 30 2019, 19:38:28) [Clang 11.0.0 (clang-1100.0.33.16)]\r\nmolecule, version 2.22\r\n```\r\n\r\n\r\n# Desired Behavior\r\nI am unable to build updated containers with which to test my code.\r\n\r\n# Actual Behaviour\r\n\r\nThe `TASK [Build an Ansible compatible image (new)]` fails since CentOS/RHEL 8 and Ubuntu 20.04 no longer have a package named `python`. \r\n\r\nfrom CentOS 8:\r\n`failed: [localhost] (item=molecule_local/centos:8)` ... `, 'No match for argument: python\\\\n', 'There are following alternatives for \\\"python\\\": python2, python36\\\\n', 'No match for argument: python-devel\\\\n', 'Package python3-dnf-4.2.7-7.el8_1.noarch is already installed.\\\\n', 'Package bash-4.4.19-10.el8.x86_64 is already installed.\\\\n', 'Package iproute-4.18.0-15.el8.x86_64 is already installed.\\\\n', '\\\\x1b[91mError: Unable to find a match: python python-devel\\\\n\\\\x1b[0m', 'Removing intermediate container 63b86fe3c05c\\\\n']\"}`\r\n\r\nand from Ubuntu 20:04\r\n`failed: [localhost] (item=molecule_local/ubuntu:focal)` ... `'Package python is not available, but is referred to by another package.\\\\nThis may mean that the package is missing, has been obsoleted, or\\\\nis only available from another source\\\\nHowever the following packages replace it:\\\\n  python2-minimal python2 2to3\\\\n\\\\n', \\\"\\\\x1b[91mE: Package 'python' has no installation candidate\\\\n\\\\x1b[0m\\\", 'Removing intermediate container 9a38944294fe\\\\n']\"}`\r\n\r\nThere is a little bit of crossover here with: #2348 ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2517/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2517/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2516", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2516/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2516/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2516/events", "html_url": "https://github.com/ansible-community/molecule/pull/2516", "id": 556273638, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY4MDY3MDU5", "number": 2516, "title": "Fixed docker_image_facts rename", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-28T15:10:49Z", "updated_at": "2020-02-17T15:05:20Z", "closed_at": "2020-01-28T19:04:32Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2516", "html_url": "https://github.com/ansible-community/molecule/pull/2516", "diff_url": "https://github.com/ansible-community/molecule/pull/2516.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2516.patch", "merged_at": "2020-01-28T19:04:32Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2516/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2516/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2515", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2515/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2515/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2515/events", "html_url": "https://github.com/ansible-community/molecule/pull/2515", "id": 555717406, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY3NjA4OTg3", "number": 2515, "title": "Allow platform env key containing dot (#2495)", "user": {"login": "greenmaid", "id": 34271425, "node_id": "MDQ6VXNlcjM0MjcxNDI1", "avatar_url": "https://avatars.githubusercontent.com/u/34271425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greenmaid", "html_url": "https://github.com/greenmaid", "followers_url": "https://api.github.com/users/greenmaid/followers", "following_url": "https://api.github.com/users/greenmaid/following{/other_user}", "gists_url": "https://api.github.com/users/greenmaid/gists{/gist_id}", "starred_url": "https://api.github.com/users/greenmaid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greenmaid/subscriptions", "organizations_url": "https://api.github.com/users/greenmaid/orgs", "repos_url": "https://api.github.com/users/greenmaid/repos", "events_url": "https://api.github.com/users/greenmaid/events{/privacy}", "received_events_url": "https://api.github.com/users/greenmaid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-27T17:18:12Z", "updated_at": "2020-01-28T15:16:04Z", "closed_at": "2020-01-28T15:16:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2515", "html_url": "https://github.com/ansible-community/molecule/pull/2515", "diff_url": "https://github.com/ansible-community/molecule/pull/2515.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2515.patch", "merged_at": "2020-01-28T15:16:03Z"}, "body": "- Env variable with dot ('.') is now accepted by schema validator\r\n  - Schema regexp updated (add '.')\r\n  - Unit tests for platforms schema updated with: \r\n     - default variables containing dot ('.') and dash ('-')  => validation should be OK\r\n     - add one test using badly formated variables containing other special char => validation should fail\r\n\r\nFixes: #2495", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2515/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2515/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2502", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2502/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2502/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2502/events", "html_url": "https://github.com/ansible-community/molecule/issues/2502", "id": 555068335, "node_id": "MDU6SXNzdWU1NTUwNjgzMzU=", "number": 2502, "title": "reimplement release of molecule using zuul", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1618323913, "node_id": "MDU6TGFiZWwxNjE4MzIzOTEz", "url": "https://api.github.com/repos/ansible-community/molecule/labels/skip-changelog", "name": "skip-changelog", "color": "eeeeee", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "pabelanger", "id": 722923, "node_id": "MDQ6VXNlcjcyMjkyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/722923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pabelanger", "html_url": "https://github.com/pabelanger", "followers_url": "https://api.github.com/users/pabelanger/followers", "following_url": "https://api.github.com/users/pabelanger/following{/other_user}", "gists_url": "https://api.github.com/users/pabelanger/gists{/gist_id}", "starred_url": "https://api.github.com/users/pabelanger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pabelanger/subscriptions", "organizations_url": "https://api.github.com/users/pabelanger/orgs", "repos_url": "https://api.github.com/users/pabelanger/repos", "events_url": "https://api.github.com/users/pabelanger/events{/privacy}", "received_events_url": "https://api.github.com/users/pabelanger/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 3, "created_at": "2020-01-25T10:19:13Z", "updated_at": "2020-02-10T15:32:46Z", "closed_at": "2020-02-10T15:32:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Since we moved from Travis to Zuul CI we have reimplement its release logic job.\r\n\r\nOn **tag pushes** the following must run:\r\n\r\n```bash\r\ntox -e build-dists\r\ntwine upload --disable-progress-bar --skip-existing --verbose dist/*\r\n```\r\n\r\nObviously that twine needs to be configured with credentials in order to be able to do this.\r\n\r\n@pabelanger I will need few hints from you about how to do this, maybe you have a similar example? I suppose that job will not be defined in repo.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2502/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2501", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2501/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2501/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2501/events", "html_url": "https://github.com/ansible-community/molecule/pull/2501", "id": 554879881, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY2OTU0Mzgz", "number": 2501, "title": "docker: networks_cli_compatible default to true", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-01-24T18:10:21Z", "updated_at": "2020-10-23T17:13:40Z", "closed_at": "2020-01-25T01:41:55Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2501", "html_url": "https://github.com/ansible-community/molecule/pull/2501", "diff_url": "https://github.com/ansible-community/molecule/pull/2501.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2501.patch", "merged_at": "2020-01-25T01:41:55Z"}, "body": "Avoids below deprecation warning from code inside molecule by setting\r\nthe networks_cli_compatible to true which is also future proof, unless\r\nuser mentions another value.\r\n\r\n> [DEPRECATION WARNING]: Please note that docker_container handles networks\r\n> slightly different than docker CLI. If you specify networks, the default\r\n> network will still be attached as the first network. (You can specify\r\n> purge_networks to remove all networks not explicitly listed.) This behavior\r\n> will change in Ansible 2.12. You can change the behavior now by setting the new\r\n>  `networks_cli_compatible` option to `yes`, and remove this warning by setting\r\n> it to `no`. This feature will be removed in version 2.12. Deprecation warnings\r\n> can be disabled by setting deprecation_warnings=False in ansible.cfg.\r\n> \r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2501/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2495", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2495/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2495/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2495/events", "html_url": "https://github.com/ansible-community/molecule/issues/2495", "id": 552419803, "node_id": "MDU6SXNzdWU1NTI0MTk4MDM=", "number": 2495, "title": "molecule.yml schema validator is too restrictive for 'env'", "user": {"login": "greenmaid", "id": 34271425, "node_id": "MDQ6VXNlcjM0MjcxNDI1", "avatar_url": "https://avatars.githubusercontent.com/u/34271425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greenmaid", "html_url": "https://github.com/greenmaid", "followers_url": "https://api.github.com/users/greenmaid/followers", "following_url": "https://api.github.com/users/greenmaid/following{/other_user}", "gists_url": "https://api.github.com/users/greenmaid/gists{/gist_id}", "starred_url": "https://api.github.com/users/greenmaid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greenmaid/subscriptions", "organizations_url": "https://api.github.com/users/greenmaid/orgs", "repos_url": "https://api.github.com/users/greenmaid/repos", "events_url": "https://api.github.com/users/greenmaid/events{/privacy}", "received_events_url": "https://api.github.com/users/greenmaid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "greenmaid", "id": 34271425, "node_id": "MDQ6VXNlcjM0MjcxNDI1", "avatar_url": "https://avatars.githubusercontent.com/u/34271425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greenmaid", "html_url": "https://github.com/greenmaid", "followers_url": "https://api.github.com/users/greenmaid/followers", "following_url": "https://api.github.com/users/greenmaid/following{/other_user}", "gists_url": "https://api.github.com/users/greenmaid/gists{/gist_id}", "starred_url": "https://api.github.com/users/greenmaid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greenmaid/subscriptions", "organizations_url": "https://api.github.com/users/greenmaid/orgs", "repos_url": "https://api.github.com/users/greenmaid/repos", "events_url": "https://api.github.com/users/greenmaid/events{/privacy}", "received_events_url": "https://api.github.com/users/greenmaid/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-20T17:06:32Z", "updated_at": "2020-01-28T15:16:03Z", "closed_at": "2020-01-28T15:16:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.3\r\n  ...\r\n  python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method:\r\n\r\n- pip\r\n\r\nAnsible installation method:\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nmolecule.yml:\r\n```\r\nplatforms:\r\n  - name: instance\r\n    image: centos:7\r\n    env: \r\n      test.env: something\r\n```\r\n\r\n# Desired Behavior\r\n\r\nSchema validator should comple successfully and container be running with 'test.env' variable\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n$ molecule create\r\n--> Validating schema /xxxxx/molecule/default/molecule.yml.\r\nERROR: Failed to validate.\r\n\r\n{'platforms': [{0: [{'env': [{'test.env': [\"value does not match regex '^[a-zA-Z0-9_-]+$'\"]}]}]}]}\r\n```\r\n\r\n\r\nAccording to used regexp, variable names should not contain point ('.') character. I think it is too restrictive, some products (eg elasticsearch) are configured using such variables.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2493", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2493/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2493/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2493/events", "html_url": "https://github.com/ansible-community/molecule/issues/2493", "id": 551345377, "node_id": "MDU6SXNzdWU1NTEzNDUzNzc=", "number": 2493, "title": "Doc Bug: gitlab-ci config descriptive text incorrect", "user": {"login": "mancdaz", "id": 562262, "node_id": "MDQ6VXNlcjU2MjI2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/562262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mancdaz", "html_url": "https://github.com/mancdaz", "followers_url": "https://api.github.com/users/mancdaz/followers", "following_url": "https://api.github.com/users/mancdaz/following{/other_user}", "gists_url": "https://api.github.com/users/mancdaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mancdaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mancdaz/subscriptions", "organizations_url": "https://api.github.com/users/mancdaz/orgs", "repos_url": "https://api.github.com/users/mancdaz/repos", "events_url": "https://api.github.com/users/mancdaz/events{/privacy}", "received_events_url": "https://api.github.com/users/mancdaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-01-17T10:53:33Z", "updated_at": "2020-04-07T19:58:56Z", "closed_at": "2020-04-07T19:58:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\nThis is a doc bug regarding gitlab-ci config\r\n\r\n# Bug report\r\nPR https://github.com/ansible/molecule/pull/2112 edited the gitlab-ci config to remove tags and make it more generic. It also removed the part of the config where the virtualenv is setup. However, the descriptive text in the docs still contains:\r\n\r\n```Here is an example setting up a virtualenv and testing an Ansible role via Molecule. User-level pip is cached and so is the virtual environment to save time. And this is run over a runner tagged pip36 and docker, because its a minimal CentOS 7 VM installed with pip36 from IUS repository and docker.```\r\n\r\n# Desired Behavior\r\n\r\nThis is confusing given that the example config no longer uses tags or venv. I would suggest adding a separate config for users who want to use tags, and a more generic one for those who don't. I actually think the example using a venv is valuable and should be added back.\r\nEither this, or the descriptive text needs to change to reflect what is actually in the current example.\r\n\r\n\r\n# Actual Behaviour\r\n\r\nSee above description of doc bug\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2493/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2493/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2492", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2492/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2492/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2492/events", "html_url": "https://github.com/ansible-community/molecule/issues/2492", "id": 550904951, "node_id": "MDU6SXNzdWU1NTA5MDQ5NTE=", "number": 2492, "title": "An unhandled exception occurred while templating '{{ lookup('file', molecule_file) | molecule_from_yaml ", "user": {"login": "ed11e", "id": 10943165, "node_id": "MDQ6VXNlcjEwOTQzMTY1", "avatar_url": "https://avatars.githubusercontent.com/u/10943165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ed11e", "html_url": "https://github.com/ed11e", "followers_url": "https://api.github.com/users/ed11e/followers", "following_url": "https://api.github.com/users/ed11e/following{/other_user}", "gists_url": "https://api.github.com/users/ed11e/gists{/gist_id}", "starred_url": "https://api.github.com/users/ed11e/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ed11e/subscriptions", "organizations_url": "https://api.github.com/users/ed11e/orgs", "repos_url": "https://api.github.com/users/ed11e/repos", "events_url": "https://api.github.com/users/ed11e/events{/privacy}", "received_events_url": "https://api.github.com/users/ed11e/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-16T16:07:03Z", "updated_at": "2020-10-20T18:27:59Z", "closed_at": "2020-10-20T18:27:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible--version\r\nansible 2.9.3\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /var/lib/jenkins/.virtualenvs/jira-webapp-install/feature%2FDEVENA-1727/lib/python3.6/site-packages/ansible\r\n  executable location = /var/lib/jenkins/.virtualenvs/jira-webapp-install/feature%2FDEVENA-1727/bin/ansible\r\n  python version = 3.6.8 (default, Aug  7 2019, 17:28:10) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\n```\r\n```\r\nmolecule --version\r\nmolecule, version 2.22\r\n```\r\nMolecule installation method (one of):\r\n\r\npip\r\n\r\nAnsible installation method (one of):\r\n\r\npip\r\n\r\nDetail any linters or test runners used:\r\nyamllint\r\n\r\n# Desired Behavior\r\n\r\nMolecule destroy works successfully. \r\n\r\n# System Details\r\n  Operating System: CentOS Linux 7 (Core)\r\n       CPE OS Name: cpe:/o:centos:centos:7\r\n            Kernel: Linux 3.10.0-693.11.1.el7.x86_64\r\n      Architecture: x86-64\r\n\r\n# Actual Behaviour\r\nNOTE: I'm not concerned about the unable to parse error, just why the deletion fails with this error message (or indeed if it should). This is also running inside a virtualenv.\r\n\r\n```\r\n\u001b[31m[WARNING]: Unable to parse /var/lib/jenkins/workspace/install_feature_DEVENA-17\u001b[0m\r\n\u001b[31m27-FECK3MZYNSDU6YR46SUPJ5NZW7S7DISNVPATCWYJYHUCJRACJC4Q/jira-webapp-\u001b[0m\r\n\u001b[31minstall/molecule/default/0/inventory as an inventory source\u001b[0m\r\n\u001b[31m[WARNING]: No inventory was parsed, only implicit localhost is available\u001b[0m\r\n\u001b[31m[WARNING]: provided hosts list is empty, only localhost is available. Note that\u001b[0m\r\n\u001b[31mthe implicit localhost does not match 'all'\u001b[0m\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    fatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', molecule_file) | molecule_from_yaml }}'. Error was a <class 'FileNotFoundError'>, original message: [Errno 2] No such file or directory: '0/state.yml'\"}\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2492/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2491", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2491/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2491/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2491/events", "html_url": "https://github.com/ansible-community/molecule/issues/2491", "id": 550756426, "node_id": "MDU6SXNzdWU1NTA3NTY0MjY=", "number": 2491, "title": "conftest.py logically dead code", "user": {"login": "huornlmj", "id": 28444739, "node_id": "MDQ6VXNlcjI4NDQ0NzM5", "avatar_url": "https://avatars.githubusercontent.com/u/28444739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huornlmj", "html_url": "https://github.com/huornlmj", "followers_url": "https://api.github.com/users/huornlmj/followers", "following_url": "https://api.github.com/users/huornlmj/following{/other_user}", "gists_url": "https://api.github.com/users/huornlmj/gists{/gist_id}", "starred_url": "https://api.github.com/users/huornlmj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huornlmj/subscriptions", "organizations_url": "https://api.github.com/users/huornlmj/orgs", "repos_url": "https://api.github.com/users/huornlmj/repos", "events_url": "https://api.github.com/users/huornlmj/events{/privacy}", "received_events_url": "https://api.github.com/users/huornlmj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-16T11:47:25Z", "updated_at": "2020-01-31T20:41:24Z", "closed_at": "2020-01-31T20:41:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/ansible/molecule/blob/65101392b49bc18581ee78ae17669db97f7df77f/molecule/test/conftest.py#L146\r\n\r\nThe line `if not is_sharded:` cannot be evaluated as true so the condition it controls is dead, not reachable.  `is_sharded` is assigned True on line 143 (boolean).", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2491/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2489", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2489/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2489/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2489/events", "html_url": "https://github.com/ansible-community/molecule/issues/2489", "id": 548905177, "node_id": "MDU6SXNzdWU1NDg5MDUxNzc=", "number": 2489, "title": "molecule does not find docker within pipx venv", "user": {"login": "stefangweichinger", "id": 2673904, "node_id": "MDQ6VXNlcjI2NzM5MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2673904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefangweichinger", "html_url": "https://github.com/stefangweichinger", "followers_url": "https://api.github.com/users/stefangweichinger/followers", "following_url": "https://api.github.com/users/stefangweichinger/following{/other_user}", "gists_url": "https://api.github.com/users/stefangweichinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefangweichinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefangweichinger/subscriptions", "organizations_url": "https://api.github.com/users/stefangweichinger/orgs", "repos_url": "https://api.github.com/users/stefangweichinger/repos", "events_url": "https://api.github.com/users/stefangweichinger/events{/privacy}", "received_events_url": "https://api.github.com/users/stefangweichinger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-13T12:41:35Z", "updated_at": "2021-03-03T16:53:18Z", "closed_at": "2020-01-14T12:26:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\npipx list\r\nvenvs are in /home/sgw/.local/pipx/venvs\r\napps are exposed on your $PATH at /home/sgw/.local/bin\r\n   package ansible 2.9.2, Python 3.7.6\r\n    - ansible\r\n    - ansible-config\r\n    - ansible-connection\r\n    - ansible-console\r\n    - ansible-doc\r\n    - ansible-galaxy\r\n    - ansible-inventory\r\n    - ansible-playbook\r\n    - ansible-pull\r\n    - ansible-test\r\n    - ansible-vault\r\n   package debops 1.2.1, Python 3.7.6\r\n    - debops\r\n    - debops-defaults\r\n    - debops-init\r\n    - debops-padlock\r\n    - debops-task\r\n    - debops-update\r\n   package docker 4.1.0, Python 3.7.6\r\n    - chardetect\r\n    - wsdump.py\r\n   package molecule 2.22, Python 3.7.6\r\n    - molecule\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pipx\r\n\r\nAnsible installation method (one of):\r\n- pipx\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nmolecule should correctly create/destroy/converge docker containers.\r\nIt does so if I use my old python venv, but not with the environment created with pipx.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\nmolecule --debug destroy\r\n--> Validating schema /home/sgw/projects/github/xyx/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Validating schema /home/sgw/projects/github/xyx/molecule/travis/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n--> Sanity checks: 'docker'\r\nERROR: Missing Docker driver dependency. Please install via 'molecule[docker]' or refer to your INSTALL.rst driver documentation file\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2489/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2478", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2478/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2478/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2478/events", "html_url": "https://github.com/ansible-community/molecule/issues/2478", "id": 542294009, "node_id": "MDU6SXNzdWU1NDIyOTQwMDk=", "number": 2478, "title": "When test successfully passes, private_key disapears", "user": {"login": "BerkhanBerkdemir", "id": 24360355, "node_id": "MDQ6VXNlcjI0MzYwMzU1", "avatar_url": "https://avatars.githubusercontent.com/u/24360355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BerkhanBerkdemir", "html_url": "https://github.com/BerkhanBerkdemir", "followers_url": "https://api.github.com/users/BerkhanBerkdemir/followers", "following_url": "https://api.github.com/users/BerkhanBerkdemir/following{/other_user}", "gists_url": "https://api.github.com/users/BerkhanBerkdemir/gists{/gist_id}", "starred_url": "https://api.github.com/users/BerkhanBerkdemir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BerkhanBerkdemir/subscriptions", "organizations_url": "https://api.github.com/users/BerkhanBerkdemir/orgs", "repos_url": "https://api.github.com/users/BerkhanBerkdemir/repos", "events_url": "https://api.github.com/users/BerkhanBerkdemir/events{/privacy}", "received_events_url": "https://api.github.com/users/BerkhanBerkdemir/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-25T08:40:58Z", "updated_at": "2020-01-18T07:49:28Z", "closed_at": "2020-01-14T12:21:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Issue Type\r\n\r\n- Bug report\r\n\r\n## Molecule and Ansible details\r\n\r\n**Ansible**: 2.9.2\r\n**Molecule**: 2.22\r\n\r\nMolecule installation method: **pip**  \r\nAnsible installation method: **pip**\r\n\r\n## Desired Behavior\r\n\r\nWhen tests successfully passes, I would like to login the instance with \r\n`molecule login` to check the current status of the configuration.\r\n\r\n## Actual Behavior\r\n\r\nWhen tests successfully passes, `molecule login` does not work due to missing \r\n`private_key`. There is no debug message that states that `private_key` or\r\nsimilar files are deleted because of successful test result.\r\n\r\nIf I terminate `molecule` process before finishes the test, the `private_key` file\r\nstill resides in its location,\r\n`~/.cache/molecule/ansible-role-lorem/.../private_key`.\r\n\r\n[output of `molecule --debug test`](https://gist.github.com/BerkhanBerkdemir/5de1980b55f82584df38a48884e9cbab)\r\n\r\n## Additional Context\r\n\r\nI use separate role, which is named as `vagrant`, to use Vagrant driver.\r\n\r\n## Sample Code\r\n\r\n```yaml\r\n---\r\n# molecue/vagrant/molecule.yml\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\nlint:\r\n  name: yamllint\r\n  options:\r\n    config-data:\r\n      ignore: venv/\r\nplatforms:\r\n  - name: centos-8\r\n    box: generic/centos8\r\n    interfaces:\r\n      - auto_config: true\r\n        ip: 10.0.0.0\r\n        network_name: private_network\r\n        type: static\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\n```text\r\n# molecule/vagrant/requirements.txt\r\nmolecule[vagrant]==2.22\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2478/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2478/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2477", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2477/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2477/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2477/events", "html_url": "https://github.com/ansible-community/molecule/issues/2477", "id": 541787725, "node_id": "MDU6SXNzdWU1NDE3ODc3MjU=", "number": 2477, "title": "Merge problems between base-config and molecule.yml. Causing create.yml ERRORS", "user": {"login": "gabyfulchic", "id": 22600727, "node_id": "MDQ6VXNlcjIyNjAwNzI3", "avatar_url": "https://avatars.githubusercontent.com/u/22600727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabyfulchic", "html_url": "https://github.com/gabyfulchic", "followers_url": "https://api.github.com/users/gabyfulchic/followers", "following_url": "https://api.github.com/users/gabyfulchic/following{/other_user}", "gists_url": "https://api.github.com/users/gabyfulchic/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabyfulchic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabyfulchic/subscriptions", "organizations_url": "https://api.github.com/users/gabyfulchic/orgs", "repos_url": "https://api.github.com/users/gabyfulchic/repos", "events_url": "https://api.github.com/users/gabyfulchic/events{/privacy}", "received_events_url": "https://api.github.com/users/gabyfulchic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-23T14:55:17Z", "updated_at": "2020-03-14T16:54:00Z", "closed_at": "2020-03-12T18:15:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.10\r\nmolecule 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\nI would like my base-config to merge with molecule.yml correctly. Actually the params `dockerfile`   and `image` from base-config.yml are ignored and skipped in the \"Create Dockerfiles from image    names\" task. I would like the `molecule_yml.platforms` object to be merged between base-config.yml and molecule.yml at this step. \r\n\r\n# Actual Behaviour\r\n\r\nSo, currently, my use case is that i have this **base-config.yml** : \r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\n  options:\r\n    config-file: ../../.yamllint\r\nplatforms:\r\n  - image: jrei/systemd-debian:9\r\n    dockerfile: ../../../../test/molecule/Dockerfile.j2\r\n    command: /lib/systemd/systemd\r\n    env:\r\n      container: docker\r\n  - image: jrei/systemd-centos:7\r\n    dockerfile: ../../../../test/molecule/Dockerfile.j2\r\n    command: /lib/systemd/systemd\r\n    env:\r\n      container: docker\r\nprovisioner:\r\n  name: ansible\r\n  playbooks:\r\n    create: ../../../../test/molecule/create.yml\r\n    destroy: ../../../../test/molecule/destroy.yml\r\n    converge: ../shared_files/converge.yml\r\n  inventory:\r\n    links:\r\n      host_vars: ../../../../inventories/molecule/host_vars\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  converge_sequence:\r\n    - dependency\r\n    - create\r\n    - prepare\r\n    - converge\r\n    - destroy\r\n  test_sequence:\r\n    - lint\r\n    - destroy\r\n    - dependency\r\n    - syntax\r\n    - create\r\n    - prepare\r\n    - converge\r\n    - idempotence\r\n    - side_effect\r\n    - verify\r\n    - destroy\r\nverifier:\r\n  name: testinfra\r\n  directory: ../shared_files/tests\r\n  options:\r\n    vvv: true\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\nI set my **molecule.yml** as following : \r\n```\r\n---\r\nplatforms:\r\n  - name: molecule-bash-deb\r\n  - name: molecule-bash-rhel\r\nprovisioner:\r\n  log: true\r\nscenario:\r\n  name: default\r\n```\r\n\r\nI faced this error using `molecule -c ../../test/molecule/base-config.yml test` : \r\n![image](https://user-images.githubusercontent.com/22600727/71363032-17a27180-2598-11ea-875a-1d6bb69acf8c.png)\r\n  \r\n\r\nAnd as you can see here, i added some debug : \r\n![image](https://user-images.githubusercontent.com/22600727/71363066-30128c00-2598-11ea-8108-0d8129b8a570.png)\r\n\r\n\r\nI added a task in the create.yml playbook to check the content of `{{ molecule_yml.platforms }}`. And I can see that there are only `molecule.yml` variables \ud83e\uddd0  \r\nWhen i decide to fill `image` parameter in my molecule.yml, it gives me the same error but with `dockerfile` parameter. And when i decide to fill `dockerfile` param in my molecule.yml, all works good and the variables used well came from my base-config.yml.   \r\n  \r\nThat's why I'm sure that the problem is only from here : \r\n![image](https://user-images.githubusercontent.com/22600727/71363227-c5158500-2598-11ea-8eee-0f2ab263b086.png)\r\n   \r\n  \r\n**I'm currently investigating to make a PR by myself but if you can drive me it would be good ! **\r\n  \r\nAnd **PS** yes i saw that PR passed : https://github.com/ansible/molecule/pull/2287/files.\r\nSo I tried with `molecule 2.22` & `molecule 3.0a4` and it's not works too for `image` and `dockerfile` params in the \"Create Dockerfile from image names\" step. (from `create.yml`)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2477/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2477/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2476", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2476/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2476/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2476/events", "html_url": "https://github.com/ansible-community/molecule/issues/2476", "id": 541245426, "node_id": "MDU6SXNzdWU1NDEyNDU0MjY=", "number": 2476, "title": "The lxd driver needs some TLC", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-12-20T23:36:12Z", "updated_at": "2020-01-04T05:48:04Z", "closed_at": "2020-01-04T05:48:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2476/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2476/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2475", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2475/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2475/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2475/events", "html_url": "https://github.com/ansible-community/molecule/issues/2475", "id": 539726894, "node_id": "MDU6SXNzdWU1Mzk3MjY4OTQ=", "number": 2475, "title": "Molecule error : UNREACHABLE && Authentication or permission failure on tmp folder  ", "user": {"login": "gabyfulchic", "id": 22600727, "node_id": "MDQ6VXNlcjIyNjAwNzI3", "avatar_url": "https://avatars.githubusercontent.com/u/22600727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gabyfulchic", "html_url": "https://github.com/gabyfulchic", "followers_url": "https://api.github.com/users/gabyfulchic/followers", "following_url": "https://api.github.com/users/gabyfulchic/following{/other_user}", "gists_url": "https://api.github.com/users/gabyfulchic/gists{/gist_id}", "starred_url": "https://api.github.com/users/gabyfulchic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gabyfulchic/subscriptions", "organizations_url": "https://api.github.com/users/gabyfulchic/orgs", "repos_url": "https://api.github.com/users/gabyfulchic/repos", "events_url": "https://api.github.com/users/gabyfulchic/events{/privacy}", "received_events_url": "https://api.github.com/users/gabyfulchic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-18T14:47:39Z", "updated_at": "2020-08-28T16:52:32Z", "closed_at": "2020-01-14T12:24:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Molecule error : UNREACHABLE && Authentication or permission failure on tmp folder  \r\n  \r\nI've wrote all tests molecule for my Ansible roles using a local docker host.   \r\nAnd recently when i decided to add a scenario named remote/ in my molecule folders   \r\nto use a remote docker host, i encountered an error.   \r\n(i decided to use a remote docker host to centralize all docker activity)  \r\n  \r\n**Versionning** :\r\n```\r\npython 2.7.16\r\nansible 2.7.10\r\nansible-lint 4.1.0\r\nmolecule 2.20.0\r\n```\r\n  \r\n**In my remote scenario, the molecule.yml looks like this :**\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\n  options:\r\n    config-file: ../../.yamllint\r\nplatforms:\r\n  - name: molecule-bash-deb\r\n    image: jrei/systemd-debian:9\r\n    dockerfile: ../shared_files/Dockerfile.j2\r\n    tty: true\r\n    command: /lib/systemd/systemd\r\n    docker_host: HIDDEN\r\n    tls_verify: true\r\n    ssl_version: TLSv1_2\r\n    tls_hostname: HIDDEN\r\n    tls_client_cert: HIDDEN\r\n    tls_client_key: HIDDEN\r\n    tls_ca_cert: HIDDEN\r\n    userns_mode: host\r\n    env:\r\n      container: docker\r\n  - name: molecule-bash-rhel\r\n    image: jrei/systemd-centos:7\r\n    dockerfile: ../shared_files/Dockerfile.j2\r\n    tty: true\r\n    command: /lib/systemd/systemd\r\n    docker_host: HIDDEN\r\n    tls_verify: true\r\n    ssl_version: TLSv1_2\r\n    tls_hostname: HIDDEN \r\n    tls_client_cert: HIDDEN\r\n    tls_client_key: HIDDEN\r\n    tls_ca_cert: HIDDEN\r\n    userns_mode: host\r\n    env:\r\n      container: docker\r\nprovisioner:\r\n  name: ansible\r\n  log: true\r\n  config_options:\r\n    defaults:\r\n      local_tmp: /tmp/.ansible-$USER/tmp\r\n      remote_tmp: /tmp/.ansible-$USER/tmp\r\n  playbooks:\r\n    converge: ../shared_files/converge.yml\r\n    create: ../../../../test/molecule/create.yml\r\n    destroy: ../../../../test/molecule/destroy.yml\r\n  # prepare: ../../../../test/molecule/prepare.yml\r\n  # side_effect: ../../../../test/molecule/side_effect.yml\r\n  inventory:\r\n    links:\r\n      host_vars: ../../../../inventories/molecule/host_vars\r\n  #   group_vars: ../../../../inventories/molecule/group_vars\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: remote\r\n  test_sequence:\r\n    - lint\r\n    - destroy\r\n    - dependency\r\n    - syntax\r\n    - create\r\n    - prepare\r\n    - converge\r\n    - idempotence\r\n    - side_effect\r\n    - verify\r\n    - destroy\r\nverifier:\r\n  name: testinfra\r\n  directory: ../shared_files/tests/\r\n  options:\r\n    vvv: true\r\n  lint:\r\n    name: flake8\r\n\r\n```\r\n  \r\n**The error is the following :** \"molecule converge -s remote\"\r\n```\r\nfatal: [molecule-bash-rhel]: UNREACHABLE! => {\r\n        \"changed\": false, \r\n        \"msg\": \"Authentication or permission failure. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \\\"/tmp\\\". Failed command was: ( umask 77 && mkdir -p \\\"` echo /tmp/.ansible-gabyf/tmp/ansible-tmp-1576674115.03-57049687540370 `\\\" && echo ansible-tmp-1576674115.03-57049687540370=\\\"` echo /tmp/.ansible-gabyf/tmp/ansible-tmp-1576674115.03-57049687540370 `\\\" ), exited with result 1\", \r\n        \"unreachable\": true\r\n    }\r\n    fatal: [molecule-bash-deb]: UNREACHABLE! => {\r\n        \"changed\": false, \r\n        \"msg\": \"Authentication or permission failure. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \\\"/tmp\\\". Failed command was: ( umask 77 && mkdir -p \\\"` echo /tmp/.ansible-gabyf/tmp/ansible-tmp-1576674115.04-254934152569179 `\\\" && echo ansible-tmp-1576674115.04-254934152569179=\\\"` echo /tmp/.ansible-gabyf/tmp/ansible-tmp-1576674115.04-254934152569179 `\\\" ), exited with result 1\", \r\n        \"unreachable\": true\r\n    }\r\n```\r\n  \r\n  \r\n**Some details**  \r\nI'm using 2 containers in the same scenario to make my test accross differents distribution,  \r\nand when the bug appears i well see the containers running on the remote host.  \r\nWhen i'm trying the command returning non-zero code on the molecule error message above, it well works. It works in local for local tmp, and in remote on the containers side.  \r\nthe error command working for me when i do it in container :   \r\n> umask 77 && mkdir -p \"` echo /tmp/.ansible-gabyf/tmp/ansible-tmp-1576674115.04-254934152569179 `\"    \r\n  \r\nI tried to `molecule destroy -s remote` before to molecule converge again, and i've got the same result.  \r\n   \r\n  \r\ni searched a lot on github issues, and i've followed this links without any solution for my use case.   \r\n - https://github.com/ansible/molecule/issues/1412  \r\n - https://github.com/ansible/molecule/issues/1043  \r\n - https://github.com/ansible/molecule/issues/1690 \r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2475/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2475/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2474", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2474/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2474/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2474/events", "html_url": "https://github.com/ansible-community/molecule/issues/2474", "id": 539431746, "node_id": "MDU6SXNzdWU1Mzk0MzE3NDY=", "number": 2474, "title": "Can't login into molecule instance with --destroy=never", "user": {"login": "xluffy", "id": 1505720, "node_id": "MDQ6VXNlcjE1MDU3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1505720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xluffy", "html_url": "https://github.com/xluffy", "followers_url": "https://api.github.com/users/xluffy/followers", "following_url": "https://api.github.com/users/xluffy/following{/other_user}", "gists_url": "https://api.github.com/users/xluffy/gists{/gist_id}", "starred_url": "https://api.github.com/users/xluffy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xluffy/subscriptions", "organizations_url": "https://api.github.com/users/xluffy/orgs", "repos_url": "https://api.github.com/users/xluffy/repos", "events_url": "https://api.github.com/users/xluffy/events{/privacy}", "received_events_url": "https://api.github.com/users/xluffy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-18T03:36:30Z", "updated_at": "2019-12-19T06:34:12Z", "closed_at": "2019-12-19T06:33:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.8.7\r\n  config file = None\r\n  configured module search path = ['/Users/xluffy/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/xluffy/code/td-infra/ansible/.venv/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/xluffy/code/td-infra/ansible/.venv/bin/ansible\r\n  python version = 3.7.2 (default, Dec 17 2019, 21:31:17) [Clang 11.0.0 (clang-1100.0.33.16)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- yamllint, ansible-lint\r\n- testinfra, flake8\r\n\r\n# Desired Behavior\r\n\r\nLogin instance after run `molecule test --destroy=never`\r\n\r\n# Actual Behaviour\r\n\r\n\r\nI try to run `molecule test --destroy=never`. Everything is ok, this is my log.\r\n\r\n```\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /Users/xluffy/code/td-infra/ansible/roles/redis/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /Users/xluffy/code/td-infra/ansible/roles/redis/molecule/default/tests/...\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /Users/xluffy/code/td-infra/ansible/roles/redis/molecule/default/playbook.yml...\r\nLint completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n\r\n....\r\n\r\nVerifier completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nSkipping, '--destroy=never' requested.\r\n```\r\n\r\nSo when I try to login to instance, this is error.\r\n\r\n```\r\nmolecule login\r\n--> Validating schema /Users/xluffy/code/td-infra/ansible/roles/redis/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\nWarning: Identity file /Users/xluffy/.cache/molecule/redis/default/.vagrant/machines/vg-ubuntu-18-redis-01/virtualbox/private_key not accessible: No such file or directory.\r\nWarning: Permanently added '[127.0.0.1]:2200' (ECDSA) to the list of known hosts.\r\nvagrant@127.0.0.1: Permission denied (publickey).\r\n```\r\n\r\nI checked `/Users/xluffy/.cache/molecule/redis/default/.vagrant`, no directory in this path.\r\n\r\nList instance:\r\n\r\n```\r\nmolecule list\r\n--> Validating schema /Users/xluffy/code/td-infra/ansible/roles/redis/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\nInstance Name          Driver Name    Provisioner Name    Scenario Name    Created    Converged\r\n---------------------  -------------  ------------------  ---------------  ---------  -----------\r\nvg-ubuntu-18-redis-01  vagrant        ansible             default          true       true\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2474/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2474/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2473", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2473/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2473/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2473/events", "html_url": "https://github.com/ansible-community/molecule/issues/2473", "id": 538863877, "node_id": "MDU6SXNzdWU1Mzg4NjM4Nzc=", "number": 2473, "title": "Unable to parse /default/ inventory/ansible_inventory.yml as an inventory source", "user": {"login": "JOSHUAJEBARAJ", "id": 19353065, "node_id": "MDQ6VXNlcjE5MzUzMDY1", "avatar_url": "https://avatars.githubusercontent.com/u/19353065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JOSHUAJEBARAJ", "html_url": "https://github.com/JOSHUAJEBARAJ", "followers_url": "https://api.github.com/users/JOSHUAJEBARAJ/followers", "following_url": "https://api.github.com/users/JOSHUAJEBARAJ/following{/other_user}", "gists_url": "https://api.github.com/users/JOSHUAJEBARAJ/gists{/gist_id}", "starred_url": "https://api.github.com/users/JOSHUAJEBARAJ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JOSHUAJEBARAJ/subscriptions", "organizations_url": "https://api.github.com/users/JOSHUAJEBARAJ/orgs", "repos_url": "https://api.github.com/users/JOSHUAJEBARAJ/repos", "events_url": "https://api.github.com/users/JOSHUAJEBARAJ/events{/privacy}", "received_events_url": "https://api.github.com/users/JOSHUAJEBARAJ/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-17T06:24:15Z", "updated_at": "2020-02-15T19:07:59Z", "closed_at": "2020-02-15T19:07:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.2\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/joshua/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.15+ (default, Oct  7 2019, 17:39:04) [GCC 7.4.0]\r\nmolecule, version 2.22\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen I run the `molecule-test` It shows run the code successfully but instead it throwing some error\r\n\r\n## System Detail\r\n\r\n```\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 18.04.3 LTS\r\nRelease:\t18.04\r\nCodename:\tbionic\r\n```\r\n# Actual Behaviour\r\n\r\nWhen I run the `molecule --debug test` I give the error in destroying step\r\n\r\n```\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-playbook --skip-tags=molecule-notest,notest --inventory=/home/joshua/.cache/molecule/joshua.example/default/inventory --diff /usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml -vvv\r\n\r\n    ansible-playbook 2.9.2\r\n      config file = /etc/ansible/ansible.cfg\r\n      configured module search path = [u'/usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/plugins/libraries', u'/home/joshua/.cache/molecule/joshua.example/default/library', u'/home/joshua/joshua.example/library']\r\n      ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n      executable location = /usr/bin/ansible-playbook\r\n      python version = 2.7.15+ (default, Oct  7 2019, 17:39:04) [GCC 7.4.0]\r\n    Using /etc/ansible/ansible.cfg as config file\r\n    host_list declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Skipping due to inventory source not existing or not being readable by the current user\r\n    script declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Skipping due to inventory source not existing or not being readable by the current user\r\n    auto declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Skipping due to inventory source not existing or not being readable by the current user\r\n    yaml declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Skipping due to inventory source not existing or not being readable by the current user\r\n    ini declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Skipping due to inventory source not existing or not being readable by the current user\r\n    toml declined parsing /home/joshua/.cache/molecule/joshua.example/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n[WARNING]: Unable to parse /home/joshua/.cache/molecule/joshua.example/default/\r\ninventory/ansible_inventory.yml as an inventory source\r\n\r\n[WARNING]: Unable to parse\r\n/home/joshua/.cache/molecule/joshua.example/default/inventory as an inventory\r\nsource\r\n\r\n[WARNING]: No inventory was parsed, only implicit localhost is available\r\n\r\n[WARNING]: provided hosts list is empty, only localhost is available. Note that\r\nthe implicit localhost does not match 'all'\r\n\r\n    \r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:8\r\n    fatal: [localhost]: FAILED! => {\r\n        \"msg\": \"'molecule_yml' is undefined\"\r\n    }\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n    \r\nERROR: \r\nAn error occurred during the test sequence action: 'destroy'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2473/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2472", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2472/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2472/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2472/events", "html_url": "https://github.com/ansible-community/molecule/issues/2472", "id": 538851473, "node_id": "MDU6SXNzdWU1Mzg4NTE0NzM=", "number": 2472, "title": "FAILED - RETRYING: Build an Ansible compatible image", "user": {"login": "JOSHUAJEBARAJ", "id": 19353065, "node_id": "MDQ6VXNlcjE5MzUzMDY1", "avatar_url": "https://avatars.githubusercontent.com/u/19353065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JOSHUAJEBARAJ", "html_url": "https://github.com/JOSHUAJEBARAJ", "followers_url": "https://api.github.com/users/JOSHUAJEBARAJ/followers", "following_url": "https://api.github.com/users/JOSHUAJEBARAJ/following{/other_user}", "gists_url": "https://api.github.com/users/JOSHUAJEBARAJ/gists{/gist_id}", "starred_url": "https://api.github.com/users/JOSHUAJEBARAJ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JOSHUAJEBARAJ/subscriptions", "organizations_url": "https://api.github.com/users/JOSHUAJEBARAJ/orgs", "repos_url": "https://api.github.com/users/JOSHUAJEBARAJ/repos", "events_url": "https://api.github.com/users/JOSHUAJEBARAJ/events{/privacy}", "received_events_url": "https://api.github.com/users/JOSHUAJEBARAJ/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-17T05:44:25Z", "updated_at": "2020-02-27T21:27:49Z", "closed_at": "2019-12-17T06:05:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n\r\n\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/joshua/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.15+ (default, Oct  7 2019, 17:39:04) [GCC 7.4.0]\r\nmolecule, version 2.22\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen I run the `sudo molecule --debug test` the test should be run successfully  but it was giving the below error\r\n\r\n### System information\r\n\r\n```\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 18.04.3 LTS\r\nRelease:\t18.04\r\nCodename:\tbionic\r\n```\r\n# Actual Behaviour\r\nWhen the run the `sudo molecule --debug test` I m getting the below error\r\n```\r\n FAILED - RETRYING: Build an Ansible compatible image (new) (3 retries left).Result was: {\r\n        \"attempts\": 1, \r\n        \"changed\": false, \r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"api_version\": \"auto\", \r\n                \"archive_path\": null, \r\n                \"build\": {\r\n                    \"dockerfile\": \"/home/joshua/.cache/molecule/joshua.example/default/Dockerfile_centos_7\", \r\n                    \"path\": \"/home/joshua/.cache/molecule/joshua.example/default\", \r\n                    \"pull\": true\r\n                }, \r\n                \"buildargs\": null, \r\n                \"ca_cert\": null, \r\n                \"client_cert\": null, \r\n                \"client_key\": null, \r\n                \"container_limits\": null, \r\n                \"debug\": false, \r\n                \"docker_host\": \"unix://var/run/docker.sock\", \r\n                \"dockerfile\": null, \r\n                \"force\": null, \r\n                \"force_absent\": false, \r\n                \"force_source\": true, \r\n                \"force_tag\": false, \r\n                \"http_timeout\": null, \r\n                \"load_path\": null, \r\n                \"name\": \"molecule_local/centos:7\", \r\n                \"nocache\": false, \r\n                \"path\": null, \r\n                \"pull\": null, \r\n                \"push\": false, \r\n                \"repository\": null, \r\n                \"rm\": true, \r\n                \"source\": \"build\", \r\n                \"ssl_version\": null, \r\n                \"state\": \"present\", \r\n                \"tag\": \"latest\", \r\n                \"timeout\": 60, \r\n                \"tls\": false, \r\n                \"tls_hostname\": \"localhost\", \r\n                \"tls_verify\": false, \r\n                \"use_tls\": null, \r\n                \"validate_certs\": false\r\n            }\r\n        }, \r\n        \"msg\": \"An unexpected docker error occurred: Credentials store error: StoreError('Credentials store docker-credential-secretservice exited with \\\"Error calling StartServiceByName for org.freedesktop.secrets: Timeout was reached\\\".',)\", \r\n        \"retries\": 4\r\n    }\r\n\r\n```\r\nBut I was able to login into the docker hub successfully using `docker login` and the docker configuration was \r\n\r\n```\r\n{\r\n\t\"auths\": {\r\n\t\t\"https://index.docker.io/v1/\": {}\r\n\t},\r\n\t\"HttpHeaders\": {\r\n\t\t\"User-Agent\": \"Docker-Client/19.03.4 (linux)\"\r\n\t},\r\n\t\"credsStore\": \"secretservice\"\r\n}\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2472/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2470", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2470/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2470/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2470/events", "html_url": "https://github.com/ansible-community/molecule/issues/2470", "id": 536556714, "node_id": "MDU6SXNzdWU1MzY1NTY3MTQ=", "number": 2470, "title": " AttributeError: 'AnsibleUnicode' object has no attribute 'get'", "user": {"login": "training3", "id": 36807842, "node_id": "MDQ6VXNlcjM2ODA3ODQy", "avatar_url": "https://avatars.githubusercontent.com/u/36807842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/training3", "html_url": "https://github.com/training3", "followers_url": "https://api.github.com/users/training3/followers", "following_url": "https://api.github.com/users/training3/following{/other_user}", "gists_url": "https://api.github.com/users/training3/gists{/gist_id}", "starred_url": "https://api.github.com/users/training3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/training3/subscriptions", "organizations_url": "https://api.github.com/users/training3/orgs", "repos_url": "https://api.github.com/users/training3/repos", "events_url": "https://api.github.com/users/training3/events{/privacy}", "received_events_url": "https://api.github.com/users/training3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-11T19:01:16Z", "updated_at": "2020-01-14T12:28:51Z", "closed_at": "2020-01-14T12:28:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Molecule and Ansible details\r\n```\r\nansible --version && molecule --version\r\nansible 2.9.2 config file = None configured module search path = ['/home/testuser/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules'] ansible python module location = /home/testuser/venv/lib/python3.6/site-packages/ansible executable location = /home/testuser/venv/bin/ansible python version = 3.6.9 (default, Nov 7 2019, 10:44:02) [GCC 8.3.0] molecule, version 2.22 \r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\nansible-lint lints playbook without exceptions.\r\n# Actual Behaviour\r\n```\r\nmolecule test\r\n--> Validating schema /home/testuser/testrole/testuser/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 cleanup\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/testuser/testrole/testuser/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/testuser/testrole/testuser/molecule/default/tests/...\r\nLint completed successfully.\r\n-> Executing Ansible Lint on /home/testuser/testrole/testuser/molecule/default/playbook.yml...\r\nTraceback (most recent call last):\r\n  File \"/home/testuser/my_env/bin/ansible-lint\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 287, in run\r\n    skip_list=self.skip_list))\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 177, in run\r\n    matches.extend(rule.matchtasks(playbookfile, text))\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 87, in matchtasks\r\n    yaml = ansiblelint.utils.append_skipped_rules(yaml, text, file['type'])\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/utils.py\", line 596, in append_skipped_rules\r\n    yaml_skip = _append_skipped_rules(pyyaml_data, file_text, file_type)\r\n  File \"/home/testuser/my_env/lib/python3.6/site-packages/ansiblelint/utils.py\", line 635, in _append_skipped_rules\r\n    if pyyaml_task.get('name') != ruamel_task.get('name'):\r\nAttributeError: 'AnsibleUnicode' object has no attribute 'get'\r\nAn error occurred during the test sequence action: 'lint'. Cleaning up.\r\n```\r\n# Output of module test --debug\r\n```\r\n molecule --debug test\r\n--> Validating schema /home/testuser/testrole/postgres/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 cleanup\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/testuser/testrole/postgres/...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n--- {}\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/testuser/testrole/postgres/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/testuser/.cache/molecule/postgres/default\r\nMOLECULE_FILE: /home/testuser/testrole/postgres/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/testuser/.cache/molecule/postgres/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /home/testuser/testrole/postgres\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/testuser/testrole/postgres/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/testuser/.cache/molecule/postgres/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nMOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/testuser/testrole/postgres/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/testuser/.cache/molecule/postgres/default MOLECULE_FILE=/home/testuser/testrole/postgres/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/testuser/.cache/molecule/postgres/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/home/testuser/testrole/postgres MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/testuser/testrole/postgres/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/testuser/.cache/molecule/postgres/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/home/testuser/venv/bin/yamllint -s /home/testuser/testrole/postgres/defaults/main.yml /home/testuser/testrole/postgres/files/main.yml /home/testuser/testrole/postgres/handlers/main.yml /home/testuser/testrole/postgres/meta/main.yml /home/testuser/testrole/postgres/molecule/default/molecule.yml /home/testuser/testrole/postgres/molecule/default/playbook.yml /home/testuser/testrole/postgres/molecule/default/prepare.yml /home/testuser/testrole/postgres/molecule/default/requirements.yml /home/testuser/testrole/postgres/tasks/backup.yml /home/testuser/testrole/postgres/tasks/centos_vars.yml /home/testuser/testrole/postgres/tasks/include_vaults.yml /home/testuser/testrole/postgres/tasks/init.yml /home/testuser/testrole/postgres/tasks/install.yml /home/testuser/testrole/postgres/tasks/install_centos_packages.yml /home/testuser/testrole/postgres/tasks/main.yml /home/testuser/testrole/postgres/tasks/redhat_vars.yml /home/testuser/testrole/postgres/vars/main.yml\r\n\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/testuser/testrole/postgres/molecule/default/tests/...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n--- {}\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/testuser/testrole/postgres/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/testuser/.cache/molecule/postgres/default\r\nMOLECULE_FILE: /home/testuser/testrole/postgres/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/testuser/.cache/molecule/postgres/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /home/testuser/testrole/postgres\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/testuser/testrole/postgres/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/testuser/.cache/molecule/postgres/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nMOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/testuser/testrole/postgres/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/testuser/.cache/molecule/postgres/default MOLECULE_FILE=/home/testuser/testrole/postgres/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/testuser/.cache/molecule/postgres/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/home/testuser/testrole/postgres MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/testuser/testrole/postgres/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/testuser/.cache/molecule/postgres/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/home/testuser/venv/bin/flake8 /home/testuser/testrole/postgres/molecule/default/tests/test_default.py\r\n\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /home/testuser/testrole/postgres/molecule/default/playbook.yml...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /home/testuser/.cache/molecule/postgres/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/filters:/home/testuser/.cache/molecule/postgres/default/plugins/filters:/home/testuser/testrole/postgres/plugins/filters\r\nANSIBLE_LIBRARY: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries:/home/testuser/.cache/molecule/postgres/default/library:/home/testuser/testrole/postgres/library\r\nANSIBLE_ROLES_PATH: /home/testuser/.cache/molecule/postgres/default/roles:/home/testuser/testrole\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/testuser/testrole/postgres/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/testuser/.cache/molecule/postgres/default\r\nMOLECULE_FILE: /home/testuser/testrole/postgres/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/testuser/.cache/molecule/postgres/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /home/testuser/testrole/postgres\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/testuser/testrole/postgres/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/testuser/.cache/molecule/postgres/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/home/testuser/.cache/molecule/postgres/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/filters:/home/testuser/.cache/molecule/postgres/default/plugins/filters:/home/testuser/testrole/postgres/plugins/filters ANSIBLE_LIBRARY=/home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries:/home/testuser/.cache/molecule/postgres/default/library:/home/testuser/testrole/postgres/library ANSIBLE_ROLES_PATH=/home/testuser/.cache/molecule/postgres/default/roles:/home/testuser/testrole MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/testuser/testrole/postgres/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/testuser/.cache/molecule/postgres/default MOLECULE_FILE=/home/testuser/testrole/postgres/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/testuser/.cache/molecule/postgres/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/home/testuser/testrole/postgres MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/testuser/testrole/postgres/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/testuser/.cache/molecule/postgres/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/home/testuser/venv/bin/ansible-lint -v --exclude=/home/testuser/.cache/molecule/postgres/default /home/testuser/testrole/postgres/molecule/default/playbook.yml\r\n\r\n    Examining molecule/default/playbook.yml of type playbook\r\n    Examining tasks/backup.yml of type tasks\r\n    Examining tasks/centos_vars.yml of type tasks\r\nTraceback (most recent call last):\r\n  File \"/home/testuser/venv/bin/ansible-lint\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/__main__.py\", line 187, in main\r\n    matches.extend(runner.run())\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 287, in run\r\n    skip_list=self.skip_list))\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 177, in run\r\n    matches.extend(rule.matchtasks(playbookfile, text))\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/__init__.py\", line 87, in matchtasks\r\n    yaml = ansiblelint.utils.append_skipped_rules(yaml, text, file['type'])\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/utils.py\", line 596, in append_skipped_rules\r\n    yaml_skip = _append_skipped_rules(pyyaml_data, file_text, file_type)\r\n  File \"/home/testuser/venv/lib/python3.6/site-packages/ansiblelint/utils.py\", line 635, in _append_skipped_rules\r\n    if pyyaml_task.get('name') != ruamel_task.get('name'):\r\nAttributeError: 'AnsibleUnicode' object has no attribute 'get'\r\nAn error occurred during the test sequence action: 'lint'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n--> Sanity checks: 'docker'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /home/testuser/.cache/molecule/postgres/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/filters:/home/testuser/.cache/molecule/postgres/default/plugins/filters:/home/testuser/testrole/postgres/plugins/filters\r\nANSIBLE_LIBRARY: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries:/home/testuser/.cache/molecule/postgres/default/library:/home/testuser/testrole/postgres/library\r\nANSIBLE_ROLES_PATH: /home/testuser/.cache/molecule/postgres/default/roles:/home/testuser/testrole\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/testuser/testrole/postgres/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/testuser/.cache/molecule/postgres/default\r\nMOLECULE_FILE: /home/testuser/testrole/postgres/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/testuser/.cache/molecule/postgres/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /home/testuser/testrole/postgres\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/testuser/testrole/postgres/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /home/testuser/.cache/molecule/postgres/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/home/testuser/.cache/molecule/postgres/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/filters:/home/testuser/.cache/molecule/postgres/default/plugins/filters:/home/testuser/testrole/postgres/plugins/filters ANSIBLE_LIBRARY=/home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries:/home/testuser/.cache/molecule/postgres/default/library:/home/testuser/testrole/postgres/library ANSIBLE_ROLES_PATH=/home/testuser/.cache/molecule/postgres/default/roles:/home/testuser/testrole MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/testuser/testrole/postgres/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/testuser/.cache/molecule/postgres/default MOLECULE_FILE=/home/testuser/testrole/postgres/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/testuser/.cache/molecule/postgres/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/home/testuser/testrole/postgres MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/testuser/testrole/postgres/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/home/testuser/.cache/molecule/postgres/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/testuser/testrole/postgres/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/home/testuser/venv/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/home/testuser/.cache/molecule/postgres/default/inventory /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml -vvv\r\n\r\n    ansible-playbook 2.9.2\r\n      config file = /home/testuser/.cache/molecule/postgres/default/ansible.cfg\r\n      configured module search path = ['/home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries', '/home/testuser/.cache/molecule/postgres/default/library', '/home/testuser/testrole/postgres/library']\r\n      ansible python module location = /home/testuser/venv/lib/python3.6/site-packages/ansible\r\n      executable location = /home/testuser/venv/bin/ansible-playbook\r\n      python version = 3.6.9 (default, Nov  7 2019, 10:44:02) [GCC 8.3.0]\r\n    Using /home/testuser/.cache/molecule/postgres/default/ansible.cfg as config file\r\n    host_list declined parsing /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    script declined parsing /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml as it did not pass its verify_file() method\r\n    Parsed /home/testuser/.cache/molecule/postgres/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:8\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: testuser\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~testuser && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079 `\" && echo ansible-tmp-1576038266.5452287-224148635186079=\"` echo /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079 `\" ) && sleep 0'\r\n    Using module file /home/testuser/venv/lib/python3.6/site-packages/ansible/modules/cloud/docker/docker_container.py\r\n    <127.0.0.1> PUT /home/testuser/.ansible/tmp/ansible-local-5371w9gwap2n/tmpe4nyba9p TO /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/AnsiballZ_docker_container.py\r\n    <127.0.0.1> PUT /home/testuser/.ansible/tmp/ansible-local-5371w9gwap2n/tmpfilu451r TO /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/async_wrapper.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/ /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/AnsiballZ_docker_container.py /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/async_wrapper.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'ANSIBLE_ASYNC_DIR='\"'\"'~/.ansible_async'\"'\"' /home/testuser/venv/bin/python /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/async_wrapper.py 364068843511 7200 /home/testuser/.ansible/tmp/ansible-tmp-1576038266.5452287-224148635186079/AnsiballZ_docker_container.py _ && sleep 0'\r\n    changed: [localhost] => (item=postgres) => {\r\n        \"ansible_job_id\": \"364068843511.5397\",\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": true,\r\n        \"finished\": 0,\r\n        \"item\": {\r\n            \"command\": \"/sbin/init\",\r\n            \"env\": {\r\n                \"http_proxy\": null,\r\n                \"https_proxy\": null,\r\n                \"no_proxy\": null\r\n            },\r\n            \"hostname\": \"postgres1\",\r\n            \"image\": \"postgres\",\r\n            \"name\": \"postgres\",\r\n            \"pre_build_image\": true,\r\n            \"previleged\": true,\r\n            \"tmpfs\": [\r\n                \"/run\",\r\n                \"/tmp\"\r\n            ],\r\n            \"volumes\": [\r\n                \"/sys/fs/cgroup:/sys/fs/cgroup:ro\"\r\n            ]\r\n        },\r\n        \"results_file\": \"/home/testuser/.ansible_async/364068843511.5397\",\r\n        \"started\": 1\r\n    }\r\n\r\n    TASK [Wait for instance(s) deletion to complete] *******************************\r\n    task path: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:27\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: testuser\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~testuser && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839 `\" && echo ansible-tmp-1576038269.6703174-201026194839=\"` echo /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839 `\" ) && sleep 0'\r\n    Using module file /home/testuser/venv/lib/python3.6/site-packages/ansible/modules/utilities/logic/async_status.py\r\n    <127.0.0.1> PUT /home/testuser/.ansible/tmp/ansible-local-5371w9gwap2n/tmpaue7tqfm TO /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839/AnsiballZ_async_status.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839/ /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839/AnsiballZ_async_status.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/home/testuser/venv/bin/python /home/testuser/.ansible/tmp/ansible-tmp-1576038269.6703174-201026194839/AnsiballZ_async_status.py && sleep 0'\r\n    ok: [localhost] => (item={'started': 1, 'finished': 0, 'ansible_job_id': '364068843511.5397', 'results_file': '/home/testuser/.ansible_async/364068843511.5397', 'changed': True, 'failed': False, 'item': {'name': 'postgres', 'image': 'postgres', 'hostname': 'postgres1', 'env': {'http_proxy': None, 'https_proxy': None, 'no_proxy': None}, 'command': '/sbin/init', 'tmpfs': ['/run', '/tmp'], 'volumes': ['/sys/fs/cgroup:/sys/fs/cgroup:ro'], 'previleged': True, 'pre_build_image': True}, 'ansible_loop_var': 'item'}) => {\r\n        \"ansible_job_id\": \"364068843511.5397\",\r\n        \"ansible_loop_var\": \"item\",\r\n        \"attempts\": 1,\r\n        \"changed\": false,\r\n        \"diff\": {\r\n            \"after\": {},\r\n            \"before\": {}\r\n        },\r\n        \"finished\": 1,\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"api_version\": \"auto\",\r\n                \"auto_remove\": false,\r\n                \"blkio_weight\": null,\r\n                \"ca_cert\": null,\r\n                \"cap_drop\": null,\r\n                \"capabilities\": null,\r\n                \"cleanup\": false,\r\n                \"client_cert\": null,\r\n                \"client_key\": null,\r\n                \"command\": null,\r\n                \"comparisons\": null,\r\n                \"cpu_period\": null,\r\n                \"cpu_quota\": null,\r\n                \"cpu_shares\": null,\r\n                \"cpuset_cpus\": null,\r\n                \"cpuset_mems\": null,\r\n                \"debug\": false,\r\n                \"detach\": true,\r\n                \"device_read_bps\": null,\r\n                \"device_read_iops\": null,\r\n                \"device_write_bps\": null,\r\n                \"device_write_iops\": null,\r\n                \"devices\": null,\r\n                \"dns_opts\": null,\r\n                \"dns_search_domains\": null,\r\n                \"dns_servers\": null,\r\n                \"docker_host\": \"localhost:2375\",\r\n                \"domainname\": null,\r\n                \"entrypoint\": null,\r\n                \"env\": null,\r\n                \"env_file\": null,\r\n                \"etc_hosts\": null,\r\n                \"exposed_ports\": null,\r\n                \"force_kill\": true,\r\n                \"groups\": null,\r\n                \"healthcheck\": null,\r\n                \"hostname\": null,\r\n                \"ignore_image\": false,\r\n                \"image\": null,\r\n                \"init\": false,\r\n                \"interactive\": false,\r\n                \"ipc_mode\": null,\r\n                \"keep_volumes\": true,\r\n                \"kernel_memory\": null,\r\n                \"kill_signal\": null,\r\n                \"labels\": null,\r\n                \"links\": null,\r\n                \"log_driver\": null,\r\n                \"log_options\": null,\r\n                \"mac_address\": null,\r\n                \"memory\": \"0\",\r\n                \"memory_reservation\": null,\r\n                \"memory_swap\": null,\r\n                \"memory_swappiness\": null,\r\n                \"mounts\": null,\r\n                \"name\": \"postgres\",\r\n                \"network_mode\": null,\r\n                \"networks\": null,\r\n                \"networks_cli_compatible\": null,\r\n                \"oom_killer\": null,\r\n                \"oom_score_adj\": null,\r\n                \"output_logs\": false,\r\n                \"paused\": false,\r\n                \"pid_mode\": null,\r\n                \"pids_limit\": null,\r\n                \"privileged\": false,\r\n                \"published_ports\": null,\r\n                \"pull\": false,\r\n                \"purge_networks\": false,\r\n                \"read_only\": false,\r\n                \"recreate\": false,\r\n                \"restart\": false,\r\n                \"restart_policy\": null,\r\n                \"restart_retries\": null,\r\n                \"runtime\": null,\r\n                \"security_opts\": null,\r\n                \"shm_size\": null,\r\n                \"ssl_version\": null,\r\n                \"state\": \"absent\",\r\n                \"stop_signal\": null,\r\n                \"stop_timeout\": null,\r\n                \"sysctls\": null,\r\n                \"timeout\": 60,\r\n                \"tls\": false,\r\n                \"tls_hostname\": \"localhost\",\r\n                \"tls_verify\": false,\r\n                \"tmpfs\": null,\r\n                \"trust_image_content\": false,\r\n                \"tty\": false,\r\n                \"ulimits\": null,\r\n                \"user\": null,\r\n                \"userns_mode\": null,\r\n                \"uts\": null,\r\n                \"validate_certs\": false,\r\n                \"volume_driver\": null,\r\n                \"volumes\": null,\r\n                \"volumes_from\": null,\r\n                \"working_dir\": null\r\n            }\r\n        },\r\n        \"item\": {\r\n            \"ansible_job_id\": \"364068843511.5397\",\r\n            \"ansible_loop_var\": \"item\",\r\n            \"changed\": true,\r\n            \"failed\": false,\r\n            \"finished\": 0,\r\n            \"item\": {\r\n                \"command\": \"/sbin/init\",\r\n                \"env\": {\r\n                    \"http_proxy\": null,\r\n                    \"https_proxy\": null,\r\n                    \"no_proxy\": null\r\n                },\r\n                \"hostname\": \"postgres1\",\r\n                \"image\": \"postgres\",\r\n                \"name\": \"postgres\",\r\n                \"pre_build_image\": true,\r\n                \"previleged\": true,\r\n                \"tmpfs\": [\r\n                    \"/run\",\r\n                    \"/tmp\"\r\n                ],\r\n                \"volumes\": [\r\n                    \"/sys/fs/cgroup:/sys/fs/cgroup:ro\"\r\n                ]\r\n            },\r\n            \"results_file\": \"/home/testuser/.ansible_async/364068843511.5397\",\r\n            \"started\": 1\r\n        }\r\n    }\r\n\r\n    TASK [Delete docker network(s)] ************************************************\r\n    task path: /home/testuser/venv/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml:35\r\n    META: ran handlers\r\n    META: ran handlers\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2470/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2470/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2456", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2456/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2456/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2456/events", "html_url": "https://github.com/ansible-community/molecule/issues/2456", "id": 530561858, "node_id": "MDU6SXNzdWU1MzA1NjE4NTg=", "number": 2456, "title": "podman-docker package breaks docker driver in molecule", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 864009245, "node_id": "MDU6TGFiZWw4NjQwMDkyNDU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/upstream-bug", "name": "upstream-bug", "color": "960a21", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-30T10:31:28Z", "updated_at": "2020-02-01T18:19:29Z", "closed_at": "2020-02-01T18:19:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Upstream bug\r\n\r\nMolecule docker driver is by far the most popular right now and is extensively used during testing of molecule itself.\r\n\r\nIf someone is trying to run molecule tests on a system like CentOS 8 or RHEL 8 where they have podman-driver package installed, molecule will fail ugly with errors like described in https://github.com/ansible/ansible/issues/65378\r\n\r\n```\r\n        fatal: [instance]: FAILED! => {\"msg\": \"Docker version check (['/usr/bin/docker', 'version', '--format', \\\"'{{.Server.Version}}'\\\"]) failed: Emulate Docker CLI using podman. Create /etc/containers/nodocker to quiet msg.\\nError: template: image:1:10: executing \\\"image\\\" at <.Server.Version>: can't evaluate field Server in type libpod.Version\\n\"}\r\n```\r\n\r\nThe shimming created by `podman-docker` rpm is even more dangerous because it does fully ignore the presence of `DOCKER_HOST` variable which can point to remote server like `DOCKER_HOST=ssh://root@exammple.com`.\r\n\r\nThis means that even if podman is fixing the https://github.com/containers/libpod/issues/4602 it will still break user workflows which would assume that a `docker` command would respect what is defined in `DOCKER_HOST` and not return information about another server.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2456/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2456/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2455", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2455/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2455/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2455/events", "html_url": "https://github.com/ansible-community/molecule/issues/2455", "id": 530418324, "node_id": "MDU6SXNzdWU1MzA0MTgzMjQ=", "number": 2455, "title": "Molecule is not linting role", "user": {"login": "Dhawos", "id": 14896944, "node_id": "MDQ6VXNlcjE0ODk2OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/14896944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dhawos", "html_url": "https://github.com/Dhawos", "followers_url": "https://api.github.com/users/Dhawos/followers", "following_url": "https://api.github.com/users/Dhawos/following{/other_user}", "gists_url": "https://api.github.com/users/Dhawos/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dhawos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dhawos/subscriptions", "organizations_url": "https://api.github.com/users/Dhawos/orgs", "repos_url": "https://api.github.com/users/Dhawos/repos", "events_url": "https://api.github.com/users/Dhawos/events{/privacy}", "received_events_url": "https://api.github.com/users/Dhawos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-29T16:14:19Z", "updated_at": "2019-11-29T16:59:05Z", "closed_at": "2019-11-29T16:58:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.9.1\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    box: redhat-8\r\nprovisioner:\r\n  name: ansible\r\n  log: true\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: inspec\r\n  lint:\r\n    name: rubocop\r\n    enabled: true\r\n```\r\n\r\n# Desired Behavior\r\n\r\nMolecule would lint all task/handlers/meta from the role (this is the behavior obtained with molecule 2.19)\r\n\r\n```\r\nExamining /clamav/molecule/default/playbook.yml of type playbook\r\nExamining /clamav/tasks/main.yml of type tasks\r\nExamining /clamav/handlers/main.yml of type handlers\r\nExamining /clamav/meta/main.yml of type meta\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nMolecule only lints the converge playbook and not the role\r\n\r\n```\r\nExamining /clamav/molecule/default/playbook.yml of type playbook\r\n```\r\nI noticed that environment variables were not set when it does not work :\r\n\r\n```\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n--- {}\r\n```\r\n\r\nWhen running with molecule 2.19, the Ansible environment variables are set and the linting works as expected.\r\n\r\nI've played with the sources a bit and it seems this line is what is causing the issue :\r\n\r\n**Version 2.22 :**\r\nhttps://github.com/ansible/molecule/blob/a339ce2ecc38959065192c38110f2af46f07ac73/molecule/provisioner/lint/ansible_lint.py#L60\r\n\r\nI tried with the line from previous versions and it worked again :\r\n\r\n**Version 2.20 :**\r\nhttps://github.com/ansible/molecule/blob/99e03ea192e19aba0a969e205980b55adae98456/molecule/provisioner/lint/ansible_lint.py#L107", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2455/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2453", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2453/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2453/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2453/events", "html_url": "https://github.com/ansible-community/molecule/issues/2453", "id": 530392008, "node_id": "MDU6SXNzdWU1MzAzOTIwMDg=", "number": 2453, "title": "disable podmain tests on macos", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-29T15:11:01Z", "updated_at": "2019-11-30T10:33:30Z", "closed_at": "2019-11-30T10:33:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Because podman is not yet functional on macos, we should skill testing it even if executable or module may be present.\r\n\r\nThis is because podman is not signed and attempt to call it will block the process with a system security popup.\r\n\r\nOnce https://github.com/containers/libpod/issues/4511 is addressed we can revert that change.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2453/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2446", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2446/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2446/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2446/events", "html_url": "https://github.com/ansible-community/molecule/issues/2446", "id": 526657963, "node_id": "MDU6SXNzdWU1MjY2NTc5NjM=", "number": 2446, "title": "docker version of molecule not working.", "user": {"login": "thepenguinthatwants", "id": 46752217, "node_id": "MDQ6VXNlcjQ2NzUyMjE3", "avatar_url": "https://avatars.githubusercontent.com/u/46752217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thepenguinthatwants", "html_url": "https://github.com/thepenguinthatwants", "followers_url": "https://api.github.com/users/thepenguinthatwants/followers", "following_url": "https://api.github.com/users/thepenguinthatwants/following{/other_user}", "gists_url": "https://api.github.com/users/thepenguinthatwants/gists{/gist_id}", "starred_url": "https://api.github.com/users/thepenguinthatwants/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thepenguinthatwants/subscriptions", "organizations_url": "https://api.github.com/users/thepenguinthatwants/orgs", "repos_url": "https://api.github.com/users/thepenguinthatwants/repos", "events_url": "https://api.github.com/users/thepenguinthatwants/events{/privacy}", "received_events_url": "https://api.github.com/users/thepenguinthatwants/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-21T15:14:23Z", "updated_at": "2020-01-30T11:02:52Z", "closed_at": "2019-11-24T09:06:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n`molecule` --version\r\n\r\nmolecule, version 2.20.0.0a3.dev12\r\n\r\nI am using it as a alias command that uses docker.\r\n\r\n`\r\nalias molecule='docker run --rm -it -v \"$(pwd)\":/tmp/$(basename \"${PWD}\"):ro -v /var/run/docker.sock:/var/run/docker.sock -w /tmp/$(basename \"${PWD}\") quay.io/ansible/molecule molecule'`\r\n\r\nMolecule installation method (one of):\r\n\r\nDocker\r\n\r\nAnsible installation method (one of):\r\n\r\nArch linux package management\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule init role --driver-name docker --role-name ansible-role`\r\n\r\nCreating a new role named ansible-role\r\n\r\n# Actual Behaviour\r\n\r\n`molecule init role --driver-name docker --role-name ansible-role`\r\n\r\nI only get output of\r\n\r\n--> Initializing new role ansible-role...\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/molecule\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/init/role.py\", line 131, in role\r\n    r.execute()\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/init/role.py\", line 64, in execute\r\n    self._process_templates('role', self._command_args, role_directory)\r\n  File \"/usr/local/lib/python3.7/site-packages/molecule/command/init/base.py\", line 61, in _process_templates\r\n    no_input=True,\r\n  File \"/usr/local/lib/python3.7/site-packages/cookiecutter/main.py\", line 94, in cookiecutter\r\n    output_dir=output_dir\r\n  File \"/usr/local/lib/python3.7/site-packages/cookiecutter/generate.py\", line 364, in generate_files\r\n    generate_file(project_dir, infile, context, env)\r\n  File \"/usr/local/lib/python3.7/site-packages/cookiecutter/generate.py\", line 176, in generate_file\r\n    with io.open(outfile, 'w', encoding='utf-8') as fh:\r\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/molecule/ansible-role/README.md'\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2446/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2442", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2442/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2442/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2442/events", "html_url": "https://github.com/ansible-community/molecule/issues/2442", "id": 523768047, "node_id": "MDU6SXNzdWU1MjM3NjgwNDc=", "number": 2442, "title": "plugins: how to pass cerberus validation schema to core?", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-11-16T01:23:15Z", "updated_at": "2020-04-26T09:34:57Z", "closed_at": "2020-04-26T09:34:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In Molecule < 3.0, we have all the driver schemas defined in the schema_v2 file. We then run the cerberus validator on this schema against the configuration specified by the user.\r\n\r\nHowever, in the move to 3.0, we removed the shema code. See https://github.com/ansible/molecule/pull/2391/files#diff-1e67bc3147c69bed463615849b56f3b1L490 for that removal for the hetzner cloud driver.\r\n\r\nSo, now I find that my molecule-hetznercloud plugin unit tests are failing schema validation and only the \"name\" option is being validated against (that is because molecule core has that still in the code).\r\n\r\nSo, my idea is:\r\n\r\n1) Should we define schemas in the plugins (move them over)\r\n2) How to pass this schema into core for validation?\r\n\r\nFor 2) if we've successfully loaded the plugin, then we can be pretty sure we can run an import if the schemas are placed in a standard location or accessor off the module. \r\n\r\nOne tricky point is that some drivers, like docker, are not externalised yet, so we'd have to conditionally check that we should be importing from a plugin and not from a schema_v2 definition.\r\n\r\nI don't really like Cerberus as a dependency but we need user configuration validation with decent error messages and this is what it gives us. It is also seemingly well maintained.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2442/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2442/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2441", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2441/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2441/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2441/events", "html_url": "https://github.com/ansible-community/molecule/issues/2441", "id": 523766931, "node_id": "MDU6SXNzdWU1MjM3NjY5MzE=", "number": 2441, "title": "plugins: molecule looks in wrong place for plugin cookiecutter files", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-16T01:15:42Z", "updated_at": "2019-11-16T01:41:45Z", "closed_at": "2019-11-16T01:41:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "After running:\r\n\r\n```\r\n$ cd molecule\r\n$ pip install -e .\r\n$ pip install \"git+https://github.com/pycontribs/molecule-hetznercloud.git@master#egg=molecule-hetznercloud\"\r\n```\r\n\r\nI then do:\r\n\r\n```\r\n$ molecule init scenario -d hetznercloud\r\n```\r\n\r\nAnd then see:\r\n\r\n```\r\n--> Initializing new scenario default...\r\nERROR: The specified template directory (/home/molecule/.venv/lib/python3.7/site-packages/molecule/cookiecutter/scenario/driver/hetznercloud) does not exist\r\n```\r\n\r\nWhere, the plugin cookiecutter files are actually in https://github.com/pycontribs/molecule-hetznercloud/tree/master/molecule_hetznercloud/cookiecutter/scenario/driver/hetznercloud.\r\n\r\nIt should be looking in \"molecule-hetznercloud/molecule_hetznercloud/cookiecutter/scenario/driver/hetznercloud\". I assume other plugins, like molecule-azure, suffer from this same issue?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2441/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2441/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2439", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2439/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2439/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2439/events", "html_url": "https://github.com/ansible-community/molecule/issues/2439", "id": 523331050, "node_id": "MDU6SXNzdWU1MjMzMzEwNTA=", "number": 2439, "title": "Idempotence test fails with no output", "user": {"login": "till", "id": 27003, "node_id": "MDQ6VXNlcjI3MDAz", "avatar_url": "https://avatars.githubusercontent.com/u/27003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/till", "html_url": "https://github.com/till", "followers_url": "https://api.github.com/users/till/followers", "following_url": "https://api.github.com/users/till/following{/other_user}", "gists_url": "https://api.github.com/users/till/gists{/gist_id}", "starred_url": "https://api.github.com/users/till/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/till/subscriptions", "organizations_url": "https://api.github.com/users/till/orgs", "repos_url": "https://api.github.com/users/till/repos", "events_url": "https://api.github.com/users/till/events{/privacy}", "received_events_url": "https://api.github.com/users/till/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-11-15T08:39:26Z", "updated_at": "2020-02-03T10:26:09Z", "closed_at": "2020-02-02T15:40:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nUsing `quay.io/ansible/molecule:2.22`\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker\r\n\r\nAnsible installation method (one of):\r\n\r\n- docker\r\n\r\nDetail any linters or test runners used:\r\n\r\n- ansible-lint\r\n- testinfra/pytest\r\n- flake8 \r\n\r\n(Standard setup.)\r\n\r\n# Desired Behavior\r\n\r\nI'm running a complex molecule scenario where I boot multiple instances and use multiple roles to assemble a cluster of servers. I made a change to one of the roles yesterday (to fix a bug) and now molecule is reporting the idempotence check fails, but I would like to know which task it fails on. \r\n\r\n# Actual Behaviour\r\n\r\nI ran with `no_log: false` and `--debug` \u2014 the output is the same:\r\n\r\n```\r\n--> Scenario: 'multi-node'\r\n--> Action: 'idempotence'\r\nERROR: Idempotence test failed because of the following tasks:\r\nAn error occurred during the test sequence action: 'idempotence'. Cleaning up.\r\n--> Scenario: 'multi-node'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'multi-node'\r\n--> Action: 'destroy'\r\n```\r\n\r\nI've been struggling with this for a few hours now, unable to find out what it fails on. Are there any \"special\" options or methods to enable more _verbose_ output for the idempotence tests?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2439/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2439/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2437", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2437/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2437/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2437/events", "html_url": "https://github.com/ansible-community/molecule/pull/2437", "id": 522810674, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQwOTM0NTE2", "number": 2437, "title": "Remove anyconfig dependency", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 1, "created_at": "2019-11-14T11:55:18Z", "updated_at": "2019-11-14T13:37:07Z", "closed_at": "2019-11-14T13:12:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2437", "html_url": "https://github.com/ansible-community/molecule/pull/2437", "diff_url": "https://github.com/ansible-community/molecule/pull/2437.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2437.patch", "merged_at": "2019-11-14T13:12:09Z"}, "body": "The primary goal of this PR is to get rid of the `anyconfig` package dependency. This is what the first commit in this PR does.\r\n\r\nIn order to make merge function that we created a bit safer to use, we also included the second commit in this PR. In that commit, we made sure `merge_dicts` function operates on a copy of the first input parameter. If that change is not desired, we can remove the second commit from the PR.\r\n\r\nFixes: #2435", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2437/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2437/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2435", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2435/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2435/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2435/events", "html_url": "https://github.com/ansible-community/molecule/issues/2435", "id": 522093090, "node_id": "MDU6SXNzdWU1MjIwOTMwOTA=", "number": 2435, "title": "anyconfig breaks molecule on centos-8", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 5, "created_at": "2019-11-13T10:05:58Z", "updated_at": "2019-11-14T13:12:18Z", "closed_at": "2019-11-14T13:12:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\nInitiall seen at https://zuul.opendev.org/t/openstack/build/236553c6a6d84d0788518f449f89bb18/log/job-output.txt\r\n\r\n```\r\nFile \"/home/zuul/test-python/lib/python3.6/site-packages/anyconfig/backends.py\", line 44, in <module>\r\nimport anyconfig.backend.configobj\r\n```\r\n\r\nI am not yet sure which version of anyconfig caused this but because this is the 2nd breaking bug in two weeks and because anyconfig is solely used in a single place in order to us its dictionary-merge strategy, I wonder if it would not be better to drop it as a dependency.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2435/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2435/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2433", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2433/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2433/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2433/events", "html_url": "https://github.com/ansible-community/molecule/issues/2433", "id": 521418100, "node_id": "MDU6SXNzdWU1MjE0MTgxMDA=", "number": 2433, "title": "Molecule runs lint only on some verifier code", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-12T09:07:58Z", "updated_at": "2020-02-01T19:04:14Z", "closed_at": "2020-02-01T19:04:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.9.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/tadej/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/tadej/tmp/mol/venv/lib64/python3.7/site-packages/ansible\r\n  executable location = /home/tadej/tmp/mol/venv/bin/ansible\r\n  python version = 3.7.5 (default, Oct 17 2019, 12:09:47) [GCC 9.2.1 20190827 (Red Hat 9.2.1-1)]\r\nmolecule, version 3.0a5.dev10+gec108275\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nReplicating the issue:\r\n\r\n```\r\n$ molecule init role -r bla && cd bla\r\n$ molecule init scenario -s second\r\n$ echo \"invalid-stuff\" >> molecule/default/tests/test_default.py\r\n$ echo \"invalid-stuff\" >> molecule/second/tests/test_default.py\r\n$ molecule lint -s default; molecule lint -s second\r\n--> Validating schema /home/tadej/tmp/mol/bla/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Validating schema /home/tadej/tmp/mol/bla/molecule/second/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u2514\u2500\u2500 lint\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/tadej/tmp/mol/bla/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/tadej/tmp/mol/bla/molecule/default/tests/...\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:1: E305 expected 2 blank lines after class or function definition, found 0\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:1: F821 undefined name 'invalid'\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:9: F821 undefined name 'stuff'\r\n--> Validating schema /home/tadej/tmp/mol/bla/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Validating schema /home/tadej/tmp/mol/bla/molecule/second/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 second\r\n    \u251c\u2500\u2500 dependency\r\n    \u2514\u2500\u2500 lint\r\n    \r\n--> Scenario: 'second'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'second'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/tadej/tmp/mol/bla/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/tadej/tmp/mol/bla/molecule/default/tests/...\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:1: E305 expected 2 blank lines after class or function definition, found 0\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:1: F821 undefined name 'invalid'\r\n    /home/tadej/tmp/mol/bla/molecule/default/tests/test_default.py:16:9: F821 undefined name 'stuff'\r\n```\r\n\r\n# Desired Behavior\r\n\r\n`molecule lint -s default` should report errors in files under `molecule/default/tests`, and `molecule lint -s second` should report errors in files under `molecule/second/tests`.\r\n\r\n# Actual Behaviour\r\n\r\nLinter always checks the same set of files (in the example above, always from the default scenario).", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2433/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2433/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2430", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2430/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2430/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2430/events", "html_url": "https://github.com/ansible-community/molecule/issues/2430", "id": 518040314, "node_id": "MDU6SXNzdWU1MTgwNDAzMTQ=", "number": 2430, "title": "molecule init role detects .git directory as populated role", "user": {"login": "dnorthup-ums", "id": 18331571, "node_id": "MDQ6VXNlcjE4MzMxNTcx", "avatar_url": "https://avatars.githubusercontent.com/u/18331571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnorthup-ums", "html_url": "https://github.com/dnorthup-ums", "followers_url": "https://api.github.com/users/dnorthup-ums/followers", "following_url": "https://api.github.com/users/dnorthup-ums/following{/other_user}", "gists_url": "https://api.github.com/users/dnorthup-ums/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnorthup-ums/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnorthup-ums/subscriptions", "organizations_url": "https://api.github.com/users/dnorthup-ums/orgs", "repos_url": "https://api.github.com/users/dnorthup-ums/repos", "events_url": "https://api.github.com/users/dnorthup-ums/events{/privacy}", "received_events_url": "https://api.github.com/users/dnorthup-ums/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-11-05T21:17:52Z", "updated_at": "2020-03-09T16:41:48Z", "closed_at": "2020-02-15T18:54:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!- - - Verify first that your issue is not already reported on GitHub - ->\r\n\u2714\r\n<!- - - Do not report bugs before reproducing them with the code of the master branch! - ->\r\nI'd love to, but I don't have the additional time to actually get it running on Fedora just to report a very simple and basic oops. It doesn't appear that this has been merged into master yet anyhow.\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n(Rather minor bug, but kinda annoying.)\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.8.5\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/dnorthup/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.7.4 (default, Jul  9 2019, 16:32:37) [GCC 9.1.1 20190503 (Red Hat 9.1.1-1)]\r\nmolecule, version 2.20.1\r\n```\r\nI cannot get a newer version of molecule running on this platform. Yes, I did try, and no it isn't the fault of the molecule team.\r\n\r\nMolecule installation method (one of):\r\n\r\n- rpm built from source to match OS package format (if the original had worked properly)\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\nDidn't get that far here, they seem to work as much as I can expect given bugs others have reported elsewhere.\r\n\r\n# Desired Behavior\r\n\r\nAllow a new role skeleton to be instantiated into an existing but otherwise effectively empty GIT repository (EG: only contains the \".git\" directory and contents).\r\n\r\n(I think that it is obvious why we wouldn't want to \"init\" into a directory containing a built-out role, so I'm not suggesting that.)\r\n\r\n# Actual Behaviour\r\n\r\n``` bash\r\n[dnorthup@hostname Roles]$ git clone git@gitlab.domain:Roles/molecule_template.git\r\nCloning into 'molecule_template'...\r\nwarning: You appear to have cloned an empty repository.\r\n[dnorthup@hostname Roles]$ molecule init role -r molecule_template\r\n--> Initializing new role molecule_template...\r\nERROR: The directory molecule_template exists. Cannot create new role.\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2430/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2430/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2429", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2429/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2429/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2429/events", "html_url": "https://github.com/ansible-community/molecule/pull/2429", "id": 516888773, "node_id": "MDExOlB1bGxSZXF1ZXN0MzM2MDY4ODY2", "number": 2429, "title": "Avoid adding UUID twice to platform in parallel mode", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-11-03T21:06:01Z", "updated_at": "2020-02-17T15:09:58Z", "closed_at": "2019-11-05T14:44:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2429", "html_url": "https://github.com/ansible-community/molecule/pull/2429", "diff_url": "https://github.com/ansible-community/molecule/pull/2429.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2429.patch", "merged_at": "2019-11-05T14:44:12Z"}, "body": "Since commit 3b8c8d03, we are placing merged molecule config into the ephemeral directory of the scenario currently being acted upon. This configuration file already contains preprocessed platform names if we run molecule in parallel mode.\r\n\r\nBecause we forgot to remove the platform name mangling from the filter that is responsible for loading the config file and exposing its content to the playbook tasks, platform names suddenly started having two identical suffixes.\r\n\r\nBecause those suffixes are relatively long, having two copies hit the upper limit of the hostname length (63 characters). This caused docker to die while trying to create new instances. The exact error message was:\r\n\r\n    Error starting container 123...901: 500 Server Error: Internal\r\n    Server Error (\\\"OCI runtime create failed: container_linux.go:345:\r\n    starting container process caused \\\"process_linux.go:430: container\r\n    init caused \\\\\\\"sethostname: invalid argument\\\\\\\"\\\": unknown\\\")\r\n\r\nIf we remove the preprocessing of platform names from the filter function, things go back to normal.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2429/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2429/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2427", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2427/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2427/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2427/events", "html_url": "https://github.com/ansible-community/molecule/pull/2427", "id": 515546080, "node_id": "MDExOlB1bGxSZXF1ZXN0MzM0OTkxMTkz", "number": 2427, "title": "updated docker_image buildargs with new format build.args", "user": {"login": "Shaps", "id": 201628, "node_id": "MDQ6VXNlcjIwMTYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/201628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shaps", "html_url": "https://github.com/Shaps", "followers_url": "https://api.github.com/users/Shaps/followers", "following_url": "https://api.github.com/users/Shaps/following{/other_user}", "gists_url": "https://api.github.com/users/Shaps/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shaps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shaps/subscriptions", "organizations_url": "https://api.github.com/users/Shaps/orgs", "repos_url": "https://api.github.com/users/Shaps/repos", "events_url": "https://api.github.com/users/Shaps/events{/privacy}", "received_events_url": "https://api.github.com/users/Shaps/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-31T15:53:58Z", "updated_at": "2019-11-03T15:46:22Z", "closed_at": "2019-11-03T15:46:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2427", "html_url": "https://github.com/ansible-community/molecule/pull/2427", "diff_url": "https://github.com/ansible-community/molecule/pull/2427.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2427.patch", "merged_at": "2019-11-03T15:46:22Z"}, "body": "Moves the deprecated `buildargs` parameter from docker_image to the new `build.args`\r\n\r\n#### PR Type\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2427/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2427/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2426", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2426/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2426/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2426/events", "html_url": "https://github.com/ansible-community/molecule/issues/2426", "id": 515369322, "node_id": "MDU6SXNzdWU1MTUzNjkzMjI=", "number": 2426, "title": "Dependencies caught in the linter", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-31T11:51:14Z", "updated_at": "2019-11-04T12:21:37Z", "closed_at": "2019-11-04T12:21:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nAnsible: 2.8.1 & 2.8.4\r\nMolecule: 2.22 & latest git checkout of master branch\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nStandard linter set, flake8, ansible-lint, yamllint\r\n\r\n# Desired Behavior\r\n\r\nOnly the specified role should be linted and not the dependency. Since each role should be standalone and in its own repository this doesn't make as much sense. Even in a monolithic repository roles are tested individually by molecule. Generally the failure happens during the ansible-lint step.\r\n\r\nIn this case I did fix the dependent roles but the changes were not yet ready for production use and were done separately to the offending role.\r\n\r\n# Actual Behavior\r\n\r\nThis was tested on the current stable and RC releases as well as currently supported ansible versions.\r\n\r\nMolecule fails the linting step because dependent roles are linted. This may be similar to #1908 which should have been fixed by #2215. With that in mind I did grab the newest release to test with and saw the same issue. I did see the sequence was reordered as expected which made this more odd.\r\n\r\nNot in front of a system where I can get a full debug output at the moment, but am happy to update this later if needed with said information.\r\n\r\nI am curious if this could be since I define the dependency in meta/main.yml which is automatically created, including said key, by ansible-galaxy when initializing a new role. Additionally, said metadata file also fails linting out of the box but that is an issue for the ansible repo itself I think.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2426/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2426/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2425", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2425/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2425/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2425/events", "html_url": "https://github.com/ansible-community/molecule/issues/2425", "id": 514907225, "node_id": "MDU6SXNzdWU1MTQ5MDcyMjU=", "number": 2425, "title": "Vagrant provider fails to run successfully with simple config.", "user": {"login": "uid0", "id": 138249, "node_id": "MDQ6VXNlcjEzODI0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/138249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uid0", "html_url": "https://github.com/uid0", "followers_url": "https://api.github.com/users/uid0/followers", "following_url": "https://api.github.com/users/uid0/following{/other_user}", "gists_url": "https://api.github.com/users/uid0/gists{/gist_id}", "starred_url": "https://api.github.com/users/uid0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uid0/subscriptions", "organizations_url": "https://api.github.com/users/uid0/orgs", "repos_url": "https://api.github.com/users/uid0/repos", "events_url": "https://api.github.com/users/uid0/events{/privacy}", "received_events_url": "https://api.github.com/users/uid0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-10-30T18:55:25Z", "updated_at": "2020-01-14T11:01:48Z", "closed_at": "2020-01-14T11:01:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.6\r\n  config file = None\r\n  configured module search path = ['/Users/ian/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/ian/Work/newinfra/packer/bastion/bin/ansible\r\n  python version = 3.7.4 (default, Oct 12 2019, 18:55:28) [Clang 11.0.0 (clang-1100.0.33.8)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of): pip\r\n\r\nAnsible installation method (one of): pip\r\n\r\n```\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider: \r\n    name: virtualbox\r\n    options:\r\n      memory: 512\r\n      cpus: 1\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    image: ubuntu/bionic64\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\n# Desired Behavior\r\n\r\nWhen using the default configuration for the vagrant provider, molecule creates a vagrant instance, applies the playbooks, and runs the test.\r\n\r\n# Actual Behaviour\r\n\r\nMolecule crashes in the \"Destroy\" phase after running linters.  \r\n\r\n```\r\nmolecule --debug test                                                                                                            \u2500\u256f\r\n--> Validating schema /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 cleanup\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n--- {}\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/ian/.cache/molecule/bastion/default\r\nMOLECULE_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/ian/.cache/molecule/bastion/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/ian/.cache/molecule/bastion/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nMOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/ian/.cache/molecule/bastion/default MOLECULE_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/ian/.cache/molecule/bastion/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/ian/.cache/molecule/bastion/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ian/Work/newinfra/packer/bastion/bin/yamllint -s /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/vars/main.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/tasks/main.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/meta/main.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/defaults/main.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/playbook.yml /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/handlers/main.yml\r\n\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests/...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n--- {}\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/ian/.cache/molecule/bastion/default\r\nMOLECULE_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/ian/.cache/molecule/bastion/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/ian/.cache/molecule/bastion/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nMOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/ian/.cache/molecule/bastion/default MOLECULE_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/ian/.cache/molecule/bastion/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/ian/.cache/molecule/bastion/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ian/Work/newinfra/packer/bastion/bin/flake8 /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests/test_default.py\r\n\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/playbook.yml...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /Users/ian/.cache/molecule/bastion/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters\r\nANSIBLE_LIBRARY: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library\r\nANSIBLE_ROLES_PATH: /Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/ian/.cache/molecule/bastion/default\r\nMOLECULE_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/ian/.cache/molecule/bastion/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/ian/.cache/molecule/bastion/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/Users/ian/.cache/molecule/bastion/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters ANSIBLE_LIBRARY=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library ANSIBLE_ROLES_PATH=/Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/ian/.cache/molecule/bastion/default MOLECULE_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/ian/.cache/molecule/bastion/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/ian/.cache/molecule/bastion/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ian/Work/newinfra/packer/bastion/bin/ansible-lint -v --exclude=/Users/ian/.cache/molecule/bastion/default /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/playbook.yml\r\n\r\n    Examining /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/playbook.yml of type playbook\r\n    Examining /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/tasks/main.yml of type tasks\r\n    Examining /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/handlers/main.yml of type handlers\r\n    Examining /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/meta/main.yml of type meta\r\nLint completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /Users/ian/.cache/molecule/bastion/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters\r\nANSIBLE_LIBRARY: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library\r\nANSIBLE_ROLES_PATH: /Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/ian/.cache/molecule/bastion/default\r\nMOLECULE_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/ian/.cache/molecule/bastion/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/ian/.cache/molecule/bastion/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/Users/ian/.cache/molecule/bastion/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters ANSIBLE_LIBRARY=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library ANSIBLE_ROLES_PATH=/Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/ian/.cache/molecule/bastion/default MOLECULE_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/ian/.cache/molecule/bastion/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/ian/.cache/molecule/bastion/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ian/Work/newinfra/packer/bastion/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/Users/ian/.cache/molecule/bastion/default/inventory /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml -vvv\r\n\r\n    ansible-playbook 2.8.6\r\n      config file = /Users/ian/.cache/molecule/bastion/default/ansible.cfg\r\n      configured module search path = ['/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries', '/Users/ian/.cache/molecule/bastion/default/library', '/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library']\r\n      ansible python module location = /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/ansible\r\n      executable location = /Users/ian/Work/newinfra/packer/bastion/bin/ansible-playbook\r\n      python version = 3.7.4 (default, Oct 12 2019, 18:55:28) [Clang 11.0.0 (clang-1100.0.33.8)]\r\n    Using /Users/ian/.cache/molecule/bastion/default/ansible.cfg as config file\r\n    host_list declined parsing /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml as it did not pass it's verify_file() method\r\n    script declined parsing /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml as it did not pass it's verify_file() method\r\n    Parsed /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml:8\r\n    fatal: [localhost]: FAILED! => {\r\n        \"msg\": \"The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'box'\\n\\nThe error appears to be in '/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml': line 8, column 7, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n  tasks:\\n    - name: Destroy molecule instance(s)\\n      ^ here\\n\"\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nERROR:\r\nAn error occurred during the test sequence action: 'destroy'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /Users/ian/.cache/molecule/bastion/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters\r\nANSIBLE_LIBRARY: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library\r\nANSIBLE_ROLES_PATH: /Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /Users/ian/.cache/molecule/bastion/default\r\nMOLECULE_FILE: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /Users/ian/.cache/molecule/bastion/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /Users/ian/.cache/molecule/bastion/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/Users/ian/.cache/molecule/bastion/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/Users/ian/.cache/molecule/bastion/default/plugins/filters:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/plugins/filters ANSIBLE_LIBRARY=/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/Users/ian/.cache/molecule/bastion/default/library:/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library ANSIBLE_ROLES_PATH=/Users/ian/.cache/molecule/bastion/default/roles:/Users/ian/Work/newinfra/packer/bastion/build/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/Users/ian/.cache/molecule/bastion/default MOLECULE_FILE=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/Users/ian/.cache/molecule/bastion/default/instance_config.yml MOLECULE_INVENTORY_FILE=/Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/Users/ian/.cache/molecule/bastion/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ian/Work/newinfra/packer/bastion/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/Users/ian/.cache/molecule/bastion/default/inventory /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml -vvv\r\n\r\n    ansible-playbook 2.8.6\r\n      config file = /Users/ian/.cache/molecule/bastion/default/ansible.cfg\r\n      configured module search path = ['/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries', '/Users/ian/.cache/molecule/bastion/default/library', '/Users/ian/Work/newinfra/packer/bastion/build/roles/bastion/library']\r\n      ansible python module location = /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/ansible\r\n      executable location = /Users/ian/Work/newinfra/packer/bastion/bin/ansible-playbook\r\n      python version = 3.7.4 (default, Oct 12 2019, 18:55:28) [Clang 11.0.0 (clang-1100.0.33.8)]\r\n    Using /Users/ian/.cache/molecule/bastion/default/ansible.cfg as config file\r\n    host_list declined parsing /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml as it did not pass it's verify_file() method\r\n    script declined parsing /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml as it did not pass it's verify_file() method\r\n    Parsed /Users/ian/.cache/molecule/bastion/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    task path: /Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml:8\r\n    fatal: [localhost]: FAILED! => {\r\n        \"msg\": \"The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'box'\\n\\nThe error appears to be in '/Users/ian/Work/newinfra/packer/bastion/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/vagrant/destroy.yml': line 8, column 7, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n  tasks:\\n    - name: Destroy molecule instance(s)\\n      ^ here\\n\"\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n\r\nERROR:\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2425/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2424", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2424/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2424/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2424/events", "html_url": "https://github.com/ansible-community/molecule/issues/2424", "id": 514502328, "node_id": "MDU6SXNzdWU1MTQ1MDIzMjg=", "number": 2424, "title": "docs: address RemovedInSphinx30Warning", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-30T09:08:45Z", "updated_at": "2020-10-12T10:58:02Z", "closed_at": "2020-10-12T10:58:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "During build of docs this is seen:\r\n```\r\ngenerating indices...  genindexdone\r\nwriting additional pages...  search/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/sphinx_rtd_theme/search.html:20: RemovedInSphinx30Warning: To modify script_files in the theme is deprecated. Please insert a <script> tag directly in your theme instead.\r\n  {{ super() }}\r\ndone\r\n```\r\n\r\n@decentral1se, as our in-house docs expert maybe you can address it? ;)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2424/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2424/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2421", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2421/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2421/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2421/events", "html_url": "https://github.com/ansible-community/molecule/issues/2421", "id": 514083130, "node_id": "MDU6SXNzdWU1MTQwODMxMzA=", "number": 2421, "title": "docs broken: AttributeError: module 'simplejson' has no attribute 'loads'", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-29T17:11:31Z", "updated_at": "2019-11-13T21:03:16Z", "closed_at": "2019-11-13T21:03:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nWarning, treated as error:\r\nautodoc: failed to import class 'config.Config' from module 'molecule'; the following exception was raised:\r\nTraceback (most recent call last):\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/sphinx/ext/autodoc/importer.py\", line 32, in import_module\r\n    return importlib.import_module(modname)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/Users/ssbarnea/os/molecule/molecule/config.py\", line 24, in <module>\r\n    import anyconfig\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/__init__.py\", line 25, in <module>\r\n    from .api import (\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/api.py\", line 101, in <module>\r\n    from anyconfig.backends import Parsers\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/backends.py\", line 21, in <module>\r\n    import anyconfig.backend.json\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/backend/json/__init__.py\", line 24, in <module>\r\n    from .simplejson import Parser as SimpleJsonParser\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/backend/json/simplejson.py\", line 47, in <module>\r\n    class Parser(BaseParser):\r\n  File \"/Users/ssbarnea/os/molecule/.tox/doc/lib/python3.7/site-packages/anyconfig/backend/json/simplejson.py\", line 55, in Parser\r\n    _load_from_string_fn = anyconfig.backend.base.to_method(json.loads)\r\nAttributeError: module 'simplejson' has no attribute 'loads'\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2421/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2421/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2419", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2419/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2419/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2419/events", "html_url": "https://github.com/ansible-community/molecule/pull/2419", "id": 513769900, "node_id": "MDExOlB1bGxSZXF1ZXN0MzMzNDk1MjYw", "number": 2419, "title": "Fixed molecule init scenario", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 0, "created_at": "2019-10-29T08:45:03Z", "updated_at": "2019-10-29T16:59:27Z", "closed_at": "2019-10-29T16:59:27Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2419", "html_url": "https://github.com/ansible-community/molecule/pull/2419", "diff_url": "https://github.com/ansible-community/molecule/pull/2419.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2419.patch", "merged_at": "2019-10-29T16:59:27Z"}, "body": "Avoid error like below:\r\n\r\n  File \".../site-packages/click/types.py\", line 149, in get_metavar\r\n    return '[%s]' % '|'.join(self.choices)\r\nTypeError: sequence item 0: expected str instance, <DriverClass> found\r\n\r\nThis adopts the same code from init-role which was working correctly.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2419/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2419/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2417", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2417/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2417/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2417/events", "html_url": "https://github.com/ansible-community/molecule/pull/2417", "id": 513237422, "node_id": "MDExOlB1bGxSZXF1ZXN0MzMzMDYyMjg2", "number": 2417, "title": "Fix wrong template path for drivers", "user": {"login": "shortmann", "id": 20142334, "node_id": "MDQ6VXNlcjIwMTQyMzM0", "avatar_url": "https://avatars.githubusercontent.com/u/20142334?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shortmann", "html_url": "https://github.com/shortmann", "followers_url": "https://api.github.com/users/shortmann/followers", "following_url": "https://api.github.com/users/shortmann/following{/other_user}", "gists_url": "https://api.github.com/users/shortmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/shortmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shortmann/subscriptions", "organizations_url": "https://api.github.com/users/shortmann/orgs", "repos_url": "https://api.github.com/users/shortmann/repos", "events_url": "https://api.github.com/users/shortmann/events{/privacy}", "received_events_url": "https://api.github.com/users/shortmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": false, "assignee": {"login": "shortmann", "id": 20142334, "node_id": "MDQ6VXNlcjIwMTQyMzM0", "avatar_url": "https://avatars.githubusercontent.com/u/20142334?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shortmann", "html_url": "https://github.com/shortmann", "followers_url": "https://api.github.com/users/shortmann/followers", "following_url": "https://api.github.com/users/shortmann/following{/other_user}", "gists_url": "https://api.github.com/users/shortmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/shortmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shortmann/subscriptions", "organizations_url": "https://api.github.com/users/shortmann/orgs", "repos_url": "https://api.github.com/users/shortmann/repos", "events_url": "https://api.github.com/users/shortmann/events{/privacy}", "received_events_url": "https://api.github.com/users/shortmann/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shortmann", "id": 20142334, "node_id": "MDQ6VXNlcjIwMTQyMzM0", "avatar_url": "https://avatars.githubusercontent.com/u/20142334?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shortmann", "html_url": "https://github.com/shortmann", "followers_url": "https://api.github.com/users/shortmann/followers", "following_url": "https://api.github.com/users/shortmann/following{/other_user}", "gists_url": "https://api.github.com/users/shortmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/shortmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shortmann/subscriptions", "organizations_url": "https://api.github.com/users/shortmann/orgs", "repos_url": "https://api.github.com/users/shortmann/repos", "events_url": "https://api.github.com/users/shortmann/events{/privacy}", "received_events_url": "https://api.github.com/users/shortmann/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 1, "created_at": "2019-10-28T11:06:50Z", "updated_at": "2019-10-28T14:31:11Z", "closed_at": "2019-10-28T14:31:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2417", "html_url": "https://github.com/ansible-community/molecule/pull/2417", "diff_url": "https://github.com/ansible-community/molecule/pull/2417.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2417.patch", "merged_at": "2019-10-28T14:31:11Z"}, "body": "For the new plugin system, molecule has to look for cookiecutter\r\ntemplates inside the plugin (drivers or verifiers) folder and not in the\r\nmain molecule folder.\r\n\r\nSigned-off-by: shortmann <kahllund@mac.com>\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2417/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2417/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2405", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2405/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2405/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2405/events", "html_url": "https://github.com/ansible-community/molecule/pull/2405", "id": 512652637, "node_id": "MDExOlB1bGxSZXF1ZXN0MzMyNjI0MjA2", "number": 2405, "title": "Adds vpc_id to ec2_group, from subnet facts, and allows to specify SG ip cidr", "user": {"login": "retpolanne", "id": 7549205, "node_id": "MDQ6VXNlcjc1NDkyMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/7549205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retpolanne", "html_url": "https://github.com/retpolanne", "followers_url": "https://api.github.com/users/retpolanne/followers", "following_url": "https://api.github.com/users/retpolanne/following{/other_user}", "gists_url": "https://api.github.com/users/retpolanne/gists{/gist_id}", "starred_url": "https://api.github.com/users/retpolanne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retpolanne/subscriptions", "organizations_url": "https://api.github.com/users/retpolanne/orgs", "repos_url": "https://api.github.com/users/retpolanne/repos", "events_url": "https://api.github.com/users/retpolanne/events{/privacy}", "received_events_url": "https://api.github.com/users/retpolanne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-10-25T18:20:03Z", "updated_at": "2020-02-17T15:06:47Z", "closed_at": "2019-10-25T19:52:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2405", "html_url": "https://github.com/ansible-community/molecule/pull/2405", "diff_url": "https://github.com/ansible-community/molecule/pull/2405.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2405.patch", "merged_at": "2019-10-25T19:52:39Z"}, "body": "- Added VPC ID to EC2 Group (otherwise, it creates an EC2-Classic Security Group)\r\nBased on #2230\r\n- Added support for other IP CIDRs different than 0.0.0.0/0\r\n\r\n## How to use it\r\n\r\n### VPC ID\r\n- Create role using EC2 driver: `molecule init role -r test-ec2 -d ec2`\r\n- Include `vpc_subnet_id` to your platform on `molecule.yml`\r\n\r\n### IP CIDR\r\n- Create role using EC2 driver: `molecule init role -r test-ec2 -d ec2\r\n- Either include `allowed_ip_cidr` to the platforms (to specify a CIDR) or `auto_public_ip` (to make it use your current public IP). If you include none of these, the default will be 0.0.0.0/0.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2405/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2404", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2404/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2404/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2404/events", "html_url": "https://github.com/ansible-community/molecule/issues/2404", "id": 512330795, "node_id": "MDU6SXNzdWU1MTIzMzA3OTU=", "number": 2404, "title": "Not all extended shell-style features are supported", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-25T06:34:44Z", "updated_at": "2020-02-02T15:43:15Z", "closed_at": "2020-02-02T15:43:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.5\r\n  config file = None\r\n  configured module search path = ['/home/robertdb/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.4 (default, Jul  9 2019, 16:32:37) [GCC 9.1.1 20190503 (Red Hat 9.1.1-1)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n- not applicable\r\n\r\n# Desired Behavior\r\n\r\nThe variable should behave [as described](https://molecule.readthedocs.io/en/stable/configuration.html#variable-substitution)\r\n\r\n# Actual Behaviour\r\nI would like more shell-style variable features to be usable. For example:\r\n\r\nAdd a dash to `variable` if `variable` is set:\r\n\r\n```\r\n$ variable=\"i.love.molecule\"\r\n$ echo \"${variable:+$variable-}\"\r\ni.love.molecule-\r\n$ unset variable\r\n$ echo \"${variable:+$variable-}\"\r\n$\r\n```\r\n\r\nCurrently I'm getting this error:\r\n```\r\nERROR: parsing config file 'molecule/default/molecule.yml'.\r\n\r\nInvalid placeholder in string: line 11, col 12\r\n```\r\n\r\n(Where line 11, col 12 is the beginning of this variable.)\r\n\r\nAn example application would be:\r\n\r\n```yaml\r\nplatforms:\r\n  - name: \"instance\"\r\n    image: \"${namespace:+$namespace/}fedora\"\r\n```\r\n\r\nWhere the variables could be:\r\n\r\n- no variables set, `image` should expand to `fedora`\r\n- namespace set to `robertdebock`, `image` should expand to `robertdebock/fedora`. (Mind that `/`.)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2404/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2396", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2396/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2396/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2396/events", "html_url": "https://github.com/ansible-community/molecule/issues/2396", "id": 511828981, "node_id": "MDU6SXNzdWU1MTE4Mjg5ODE=", "number": 2396, "title": "ansible-galaxy not able to git clone dependency role using CI_JOB_TOKEN auth (rc=128)", "user": {"login": "gstorme", "id": 3859276, "node_id": "MDQ6VXNlcjM4NTkyNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/3859276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gstorme", "html_url": "https://github.com/gstorme", "followers_url": "https://api.github.com/users/gstorme/followers", "following_url": "https://api.github.com/users/gstorme/following{/other_user}", "gists_url": "https://api.github.com/users/gstorme/gists{/gist_id}", "starred_url": "https://api.github.com/users/gstorme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gstorme/subscriptions", "organizations_url": "https://api.github.com/users/gstorme/orgs", "repos_url": "https://api.github.com/users/gstorme/repos", "events_url": "https://api.github.com/users/gstorme/events{/privacy}", "received_events_url": "https://api.github.com/users/gstorme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-24T09:40:58Z", "updated_at": "2022-12-21T10:54:17Z", "closed_at": "2019-10-24T11:09:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nI'm using the docker container `quay.io/ansible/molecule:2.22`\r\n\r\n# Actual Behaviour\r\n\r\nmolecule/default/requirements.yml:\r\n```\r\n- src: \"https://gitlab-ci-token:${CI_JOB_TOKEN}@git.masked.url/ansible-roles/postfix\"\r\n  scm: git\r\n  version: master\r\n```\r\n\r\nThe git clone that's being run from ansible-galaxy in the dependency stage fails with rc=128.\r\nI'm using the `gitlab-ci-token:${CI_JOB_TOKEN}` https authentication, which works well for other pipelines (non-molecule) on our hosted Gitlab.\r\n\r\n```\r\n--> Action: 'dependency'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: openstack\r\nMOLECULE_ENV_FILE: /builds/ansible-roles/opendkim/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /root/.cache/molecule/opendkim/default\r\nMOLECULE_EXTRAS: azure,docker,docs,ec2,gce,hetznercloud,linode,lxc,openstack,vagrant,windows\r\nMOLECULE_FILE: /builds/ansible-roles/opendkim/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /root/.cache/molecule/opendkim/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /root/.cache/molecule/opendkim/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /builds/ansible-roles/opendkim\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /builds/ansible-roles/opendkim/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_STATE_FILE: /root/.cache/molecule/opendkim/default/state.yml\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /builds/ansible-roles/opendkim/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nMOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=openstack MOLECULE_ENV_FILE=/builds/ansible-roles/opendkim/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/root/.cache/molecule/opendkim/default MOLECULE_EXTRAS=azure,docker,docs,ec2,gce,hetznercloud,linode,lxc,openstack,vagrant,windows MOLECULE_FILE=/builds/ansible-roles/opendkim/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/root/.cache/molecule/opendkim/default/instance_config.yml MOLECULE_INVENTORY_FILE=/root/.cache/molecule/opendkim/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/builds/ansible-roles/opendkim MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/builds/ansible-roles/opendkim/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_STATE_FILE=/root/.cache/molecule/opendkim/default/state.yml MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/builds/ansible-roles/opendkim/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/usr/local/bin/ansible-galaxy install --force --role-file=/builds/ansible-roles/opendkim/molecule/default/requirements.yml --roles-path=/root/.cache/molecule/opendkim/default/roles -vvv\r\n\r\n    ansible-galaxy 2.8.4\r\n      config file = /etc/ansible/ansible.cfg\r\n      configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n      ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n      executable location = /usr/local/bin/ansible-galaxy\r\n      python version = 3.7.4 (default, Jul 13 2019, 14:35:55) [GCC 8.3.0]\r\n    Using /etc/ansible/ansible.cfg as config file\r\n    Created /root/.ansible_galaxy\r\n    found role {'src': 'https://gitlab-ci-token:${CI_JOB_TOKEN}@git.masked.url/ansible-roles/postfix', 'scm': 'git', 'version': 'master', 'name': 'postfix'} in yaml file\r\n    Processing role postfix\r\n [WARNING]: - postfix was NOT installed successfully: - command /usr/bin/git\r\nclone https://gitlab-ci-token:${CI_JOB_TOKEN}@git.masked.url/ansible-\r\nroles/postfix postfix failed in directory /root/.ansible/tmp/ansible-\r\nlocal-32dfsv7908/tmp4andivjk (rc=128)\r\nERROR! - you can use --ignore-errors to skip failed roles and finish processing the list.\r\nRetrying dependency ... 1/3 time(s)\r\nSleeping 3 seconds before retrying ...\r\n```\r\n\r\nWhen I start a container from the docker image manually, and run a git clone but using a gitlab personal access token, it works fine:\r\n\r\n```\r\nroot@build001:~# docker run -i -t registry.masked.url/molecule:latest /bin/sh\r\n/ # molecule --version\r\nmolecule, version 2.22\r\n/ # ansible-galaxy --version\r\nansible-galaxy 2.8.4\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible-galaxy\r\n  python version = 3.7.4 (default, Jul 13 2019, 14:35:55) [GCC 8.3.0]\r\n/ # git --version\r\ngit version 2.22.0\r\n/ # git clone https://oauth2:i8kymNHSabNJJK2dvc7V@git.masked.url/ansible-roles/postfix\r\nCloning into 'postfix'...\r\nwarning: redirecting to https://git.masked.url/ansible-roles/postfix.git/\r\nremote: Enumerating objects: 54, done.\r\nremote: Counting objects: 100% (54/54), done.\r\nremote: Compressing objects: 100% (24/24), done.\r\nremote: Total 54 (delta 16), reused 54 (delta 16)\r\nUnpacking objects: 100% (54/54), done.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2396/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2396/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2386", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2386/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2386/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2386/events", "html_url": "https://github.com/ansible-community/molecule/issues/2386", "id": 509619814, "node_id": "MDU6SXNzdWU1MDk2MTk4MTQ=", "number": 2386, "title": "pip._vendor.pep517.wrappers.BackendUnavailable", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-20T16:44:57Z", "updated_at": "2019-10-21T09:11:37Z", "closed_at": "2019-10-21T09:11:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While hacking molecule code it is possible to encounter a case where a previously created tox environment gets broken and tox refuses to run again on it.  The error encountered looks like\r\n\r\n```\r\n$ tox -e check                                                                                                                                                                         [17:41:01]\r\ncheck inst-nodeps: /Users/ssbarnea/os/molecule/.tox/.tmp/package/1/molecule-3.0a4.dev35+g1fcd9a68.tar.gz\r\nERROR: invocation failed (exit code 1), logfile: /Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/log/check-3.log\r\n=========================================================================================== log start ============================================================================================\r\nRequirement already satisfied: pip<19.1 in ./.tox/py27-ansible25-unit/lib/python3.7/site-packages (19.0.3)\r\nYou are using pip version 19.0.3, however version 19.3.1 is available.\r\nYou should consider upgrading via the 'pip install --upgrade pip' command.\r\nProcessing ./.tox/.tmp/package/1/molecule-3.0a4.dev35+g1fcd9a68.tar.gz\r\n  Installing build dependencies: started\r\n  Installing build dependencies: finished with status 'done'\r\n  Getting requirements to build wheel: started\r\n  Getting requirements to build wheel: finished with status 'done'\r\nException:\r\nTraceback (most recent call last):\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/cli/base_command.py\", line 179, in main\r\n    status = self.run(options, args)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/commands/install.py\", line 315, in run\r\n    resolver.resolve(requirement_set)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/resolve.py\", line 131, in resolve\r\n    self._resolve_one(requirement_set, req)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/resolve.py\", line 294, in _resolve_one\r\n    abstract_dist = self._get_abstract_dist_for(req_to_install)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/resolve.py\", line 242, in _get_abstract_dist_for\r\n    self.require_hashes\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/operations/prepare.py\", line 349, in prepare_linked_requirement\r\n    abstract_dist.prep_for_dist(finder, self.build_isolation)\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_internal/operations/prepare.py\", line 149, in prep_for_dist\r\n    reqs = self.req.pep517_backend.get_requires_for_build_wheel()\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_vendor/pep517/wrappers.py\", line 71, in get_requires_for_build_wheel\r\n    'config_settings': config_settings\r\n  File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.7/site-packages/pip/_vendor/pep517/wrappers.py\", line 162, in _call_hook\r\n    raise BackendUnavailable\r\npip._vendor.pep517.wrappers.BackendUnavailable\r\nYou are using pip version 19.0.3, however version 19.3.1 is available.\r\nYou should consider upgrading via the 'pip install --upgrade pip' command.\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/Users/ssbarnea/.pyenv/versions/3.7.4/lib/python3.7/subprocess.py\", line 347, in check_call\r\n    raise CalledProcessError(retcode, cmd)\r\nsubprocess.CalledProcessError: Command '('/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/bin/python', '-m', 'pip', 'install', '--no-deps', '-U', '/Users/ssbarnea/os/molecule/.tox/.tmp/package/1/molecule-3.0a4.dev35+g1fcd9a68.tar.gz[docker,ec2,gce,hetznercloud,linode,openstack,vagrant,windows,test]')' returned non-zero exit status 2.\r\n\r\n============================================================================================ log end =============================================================================================\r\n____________________________________________________________________________________________ summary _____________________________________________________________________________________________\r\nERROR:   check: InvocationError for command /Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/bin/python -c 'import subprocess, sys; pip_inst_cmd = sys.executable, \"-m\", \"pip\", \"install\"; subprocess.check_call(pip_inst_cmd + (\"pip<19.1\", )); subprocess.check_call(pip_inst_cmd + tuple(sys.argv[1:]))\r\n```\r\n\r\nWhile this may be related to local configuration, I raised it as a bug as there are others encountering the same kind of errors with other projects and it seems to be related to pip/setuptools/pep517 holy-trinity. \r\n\r\n```\r\n# virtualenv libraries\r\n$ pip freeze --all                                                                                                                                                                     bleach==3.1.0\r\ncertifi==2019.9.11\r\nchardet==3.0.4\r\ncollective.checkdocs==0.2\r\ndocutils==0.15.2\r\nidna==2.8\r\npip==19.0.3\r\npkginfo==1.5.0.1\r\nPygments==2.4.2\r\nreadme-renderer==24.0\r\nrequests==2.22.0\r\nrequests-toolbelt==0.9.1\r\nsetuptools==41.4.0\r\nsix==1.12.0\r\ntqdm==4.36.1\r\ntwine==1.14.0\r\nurllib3==1.25.6\r\nwebencodings==0.5.1\r\nwheel==0.33.6\r\n```\r\n\r\n```\r\n#.package environment\r\n$ pip freeze --all                                                                                                                                                                     pip==19.0.3\r\nsetuptools==41.4.0\r\nsetuptools-scm==3.3.3\r\nsetuptools-scm-git-archive==1.1\r\nwheel==0.33.6\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2386/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2379", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2379/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2379/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2379/events", "html_url": "https://github.com/ansible-community/molecule/pull/2379", "id": 509201373, "node_id": "MDExOlB1bGxSZXF1ZXN0MzI5ODM3OTY5", "number": 2379, "title": "Remove setup.py hacks", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 842110976, "node_id": "MDU6TGFiZWw4NDIxMTA5NzY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/major", "name": "major", "color": "c6476b", "default": false, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 2, "created_at": "2019-10-18T16:59:14Z", "updated_at": "2019-10-25T19:21:21Z", "closed_at": "2019-10-20T14:47:55Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2379", "html_url": "https://github.com/ansible-community/molecule/pull/2379", "diff_url": "https://github.com/ansible-community/molecule/pull/2379.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2379.patch", "merged_at": null}, "body": "This should address the failure to install which seems to still\r\nappears from time to time even with our `pyproject.toml` workaround.\r\n\r\nFixes: #2350\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2379/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2376", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2376/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2376/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2376/events", "html_url": "https://github.com/ansible-community/molecule/issues/2376", "id": 508378032, "node_id": "MDU6SXNzdWU1MDgzNzgwMzI=", "number": 2376, "title": "Add \"pause: - seconds: 10\" to cloud provider playbook files", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-17T10:18:29Z", "updated_at": "2019-10-25T23:14:22Z", "closed_at": "2019-10-25T23:14:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It is often the case that networking is not correctly up yet on the cloud provider instances. when just created by Molecule. So, we can add a \"pause\" module invocation by default to all the playbook.yml defaults. This would avoid annoying false starts, failures and other \"bootstrap\" issues for cloud providers.\r\n\r\nEDIT: Hmmm, issue with this is that it always pauses! So perhaps we add this to the \"wait for SSH\" task in the `create.yml` playbook for a \"once only\" style.\r\n\r\nAnother one in a rush ...", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2376/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2376/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2366", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2366/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2366/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2366/events", "html_url": "https://github.com/ansible-community/molecule/issues/2366", "id": 506430669, "node_id": "MDU6SXNzdWU1MDY0MzA2Njk=", "number": 2366, "title": "VERR_ACCESS_DENIED when using 'createhd' with Vagrant and Virtualbox", "user": {"login": "jdrowne", "id": 45007167, "node_id": "MDQ6VXNlcjQ1MDA3MTY3", "avatar_url": "https://avatars.githubusercontent.com/u/45007167?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdrowne", "html_url": "https://github.com/jdrowne", "followers_url": "https://api.github.com/users/jdrowne/followers", "following_url": "https://api.github.com/users/jdrowne/following{/other_user}", "gists_url": "https://api.github.com/users/jdrowne/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdrowne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdrowne/subscriptions", "organizations_url": "https://api.github.com/users/jdrowne/orgs", "repos_url": "https://api.github.com/users/jdrowne/repos", "events_url": "https://api.github.com/users/jdrowne/events{/privacy}", "received_events_url": "https://api.github.com/users/jdrowne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-10-14T03:26:48Z", "updated_at": "2020-01-14T12:21:14Z", "closed_at": "2020-01-14T12:21:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.5\r\n  config file = None\r\n  configured module search path = ['/home/juliett/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.8 (default, Oct  7 2019, 12:59:55) [GCC 8.3.0]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\nMolecule creates an instance with an additional hard drive based on:\r\n\r\nmolecule.yml:\r\n```\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: ubuntu1604\r\n    box: ubuntu/xenial64\r\n    memory: 2048\r\n    cpus: 2\r\n    provider_raw_config_args:\r\n      - \"customize [ 'createhd', '--filename', './tmpDisk.vdi', '--variant', 'Fixed', '--size', 20 * 1024 ]\"\r\n      - \"customize [ 'storageattach', :id, '--storagectl', 'SATAController', '--port', 1, '--device', 0, '--type', 'hdd', '--medium', './tmpDisk.vdi' ]\"\r\n```\r\n\r\n# Actual Behaviour\r\n```\r\n### 2019-10-13 23:25:55 ###\r\n### 2019-10-13 23:25:55 ###\r\n#<Thread:0x00005556b8418f70@/usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/batch_action.rb:71 run> terminated with exception (report_on_exception is true):\r\n/usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/customize.rb:32:in `rescue in block in call': A customization command failed: (Vagrant::Errors::VMCustomizationFailed)\r\n\r\n[\"createhd\", \"--filename\", \"./tmpDisk.vdi\", \"--variant\", \"Fixed\", \"--size\", 20480]\r\n\r\nThe following error was experienced:\r\n\r\n#<Vagrant::Errors::VBoxManageError: There was an error while executing `VBoxManage`, a CLI used by Vagrant\r\nfor controlling VirtualBox. The command and stderr is shown below.\r\n\r\nCommand: [\"createhd\", \"--filename\", \"./tmpDisk.vdi\", \"--variant\", \"Fixed\", \"--size\", \"20480\"]\r\n\r\nStderr: 0%...\r\nProgress state: VBOX_E_FILE_ERROR\r\nVBoxManage: error: Failed to create medium\r\nVBoxManage: error: Could not create the medium storage unit '/usr/local/lib/python3.6/dist-packages/molecule/provisioner/ansible/playbooks/vagrant/tmpDisk.vdi'.\r\nVBoxManage: error: VDI: cannot create image '/usr/local/lib/python3.6/dist-packages/molecule/provisioner/ansible/playbooks/vagrant/tmpDisk.vdi' (VERR_ACCESS_DENIED)\r\nVBoxManage: error: Details: code VBOX_E_FILE_ERROR (0x80bb0004), component MediumWrap, interface IMedium\r\nVBoxManage: error: Context: \"RTEXITCODE handleCreateMedium(HandlerArg*)\" at line 450 of file VBoxManageDisk.cpp\r\n>\r\n\r\nPlease fix this customization and try again.\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/customize.rb:28:in `block in call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/customize.rb:22:in `each'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/customize.rb:22:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/sane_defaults.rb:38:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/set_hostname.rb:16:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/forward_ports.rb:31:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/network_fix_ipv6.rb:41:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/network.rb:123:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/clear_network_interfaces.rb:26:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/prepare_nfs_settings.rb:19:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/synced_folders.rb:87:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/synced_folder_cleanup.rb:28:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/synced_folders/nfs/action_cleanup.rb:25:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/prepare_nfs_valid_ids.rb:12:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/handle_forwarded_port_collisions.rb:49:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/prepare_forwarded_port_collision_params.rb:30:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/env_set.rb:19:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/provision.rb:80:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/clear_forwarded_ports.rb:15:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/set_name.rb:19:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/clean_machine_folder.rb:17:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/check_accessible.rb:18:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:95:in `block in finalize_action'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builder.rb:116:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `block in run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/util/busy.rb:19:in `busy'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/call.rb:53:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:95:in `block in finalize_action'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builder.rb:116:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `block in run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/util/busy.rb:19:in `busy'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/call.rb:53:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:95:in `block in finalize_action'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builder.rb:116:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `block in run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/util/busy.rb:19:in `busy'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/call.rb:53:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/box_check_outdated.rb:79:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/config_validate.rb:25:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/check_virtualbox.rb:17:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:95:in `block in finalize_action'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:95:in `block in finalize_action'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builder.rb:116:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `block in run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/util/busy.rb:19:in `busy'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/call.rb:53:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/config_validate.rb:25:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:95:in `block in finalize_action'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:95:in `block in finalize_action'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builder.rb:116:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `block in run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/util/busy.rb:19:in `busy'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builtin/call.rb:53:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/plugins/providers/virtualbox/action/check_virtualbox.rb:17:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/warden.rb:34:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/builder.rb:116:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `block in run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/util/busy.rb:19:in `busy'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/action/runner.rb:66:in `run'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/machine.rb:227:in `action_raw'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/machine.rb:202:in `block in action'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/environment.rb:592:in `lock'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/machine.rb:188:in `call'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/machine.rb:188:in `action'\r\n\tfrom /usr/share/rubygems-integration/all/gems/vagrant-2.0.2/lib/vagrant/batch_action.rb:82:in `block (2 levels) in run'\r\nA customization command failed:\r\n\r\n[\"createhd\", \"--filename\", \"./tmpDisk.vdi\", \"--variant\", \"Fixed\", \"--size\", 20480]\r\n\r\nThe following error was experienced:\r\n\r\n#<Vagrant::Errors::VBoxManageError: There was an error while executing `VBoxManage`, a CLI used by Vagrant\r\nfor controlling VirtualBox. The command and stderr is shown below.\r\n\r\nCommand: [\"createhd\", \"--filename\", \"./tmpDisk.vdi\", \"--variant\", \"Fixed\", \"--size\", \"20480\"]\r\n\r\nStderr: 0%...\r\nProgress state: VBOX_E_FILE_ERROR\r\nVBoxManage: error: Failed to create medium\r\nVBoxManage: error: Could not create the medium storage unit '/usr/local/lib/python3.6/dist-packages/molecule/provisioner/ansible/playbooks/vagrant/tmpDisk.vdi'.\r\nVBoxManage: error: VDI: cannot create image '/usr/local/lib/python3.6/dist-packages/molecule/provisioner/ansible/playbooks/vagrant/tmpDisk.vdi' (VERR_ACCESS_DENIED)\r\nVBoxManage: error: Details: code VBOX_E_FILE_ERROR (0x80bb0004), component MediumWrap, interface IMedium\r\nVBoxManage: error: Context: \"RTEXITCODE handleCreateMedium(HandlerArg*)\" at line 450 of file VBoxManageDisk.cpp\r\n>\r\n\r\nPlease fix this customization and try again.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2366/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2366/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2362", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2362/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2362/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2362/events", "html_url": "https://github.com/ansible-community/molecule/pull/2362", "id": 505895148, "node_id": "MDExOlB1bGxSZXF1ZXN0MzI3MjM0ODk1", "number": 2362, "title": "Correct python package installation on Dockerfiles", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-11T14:44:26Z", "updated_at": "2019-10-18T14:09:53Z", "closed_at": "2019-10-11T16:26:36Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2362", "html_url": "https://github.com/ansible-community/molecule/pull/2362", "diff_url": "https://github.com/ansible-community/molecule/pull/2362.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2362.patch", "merged_at": "2019-10-11T16:26:36Z"}, "body": "This should fix failures with CentOS 8.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2362/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2358", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2358/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2358/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2358/events", "html_url": "https://github.com/ansible-community/molecule/pull/2358", "id": 504914599, "node_id": "MDExOlB1bGxSZXF1ZXN0MzI2NDYzMTc3", "number": 2358, "title": "Podman driver shouldn't define /sys/fs/cgroup vol", "user": {"login": "maxamillion", "id": 839000, "node_id": "MDQ6VXNlcjgzOTAwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/839000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxamillion", "html_url": "https://github.com/maxamillion", "followers_url": "https://api.github.com/users/maxamillion/followers", "following_url": "https://api.github.com/users/maxamillion/following{/other_user}", "gists_url": "https://api.github.com/users/maxamillion/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxamillion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxamillion/subscriptions", "organizations_url": "https://api.github.com/users/maxamillion/orgs", "repos_url": "https://api.github.com/users/maxamillion/repos", "events_url": "https://api.github.com/users/maxamillion/events{/privacy}", "received_events_url": "https://api.github.com/users/maxamillion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "maxamillion", "id": 839000, "node_id": "MDQ6VXNlcjgzOTAwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/839000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxamillion", "html_url": "https://github.com/maxamillion", "followers_url": "https://api.github.com/users/maxamillion/followers", "following_url": "https://api.github.com/users/maxamillion/following{/other_user}", "gists_url": "https://api.github.com/users/maxamillion/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxamillion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxamillion/subscriptions", "organizations_url": "https://api.github.com/users/maxamillion/orgs", "repos_url": "https://api.github.com/users/maxamillion/repos", "events_url": "https://api.github.com/users/maxamillion/events{/privacy}", "received_events_url": "https://api.github.com/users/maxamillion/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "maxamillion", "id": 839000, "node_id": "MDQ6VXNlcjgzOTAwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/839000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxamillion", "html_url": "https://github.com/maxamillion", "followers_url": "https://api.github.com/users/maxamillion/followers", "following_url": "https://api.github.com/users/maxamillion/following{/other_user}", "gists_url": "https://api.github.com/users/maxamillion/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxamillion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxamillion/subscriptions", "organizations_url": "https://api.github.com/users/maxamillion/orgs", "repos_url": "https://api.github.com/users/maxamillion/repos", "events_url": "https://api.github.com/users/maxamillion/events{/privacy}", "received_events_url": "https://api.github.com/users/maxamillion/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-09T21:49:49Z", "updated_at": "2019-10-18T14:10:47Z", "closed_at": "2019-10-12T08:26:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2358", "html_url": "https://github.com/ansible-community/molecule/pull/2358", "diff_url": "https://github.com/ansible-community/molecule/pull/2358.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2358.patch", "merged_at": "2019-10-12T08:26:13Z"}, "body": "Since podman version 0.8.5 it has auto detected when the mounting of\r\n/sys/fs/cgroup is necessary and only mounts a subset of that dir as\r\nneeded by the container runtime. In newer versions, explicitly\r\ndefining this actually fails with an OCI runtime permission denied\r\nerror. Therefore, not only is this not necessary but can cause\r\nfailures for users.\r\n\r\nSigned-off-by: Adam Miller <admiller@redhat.com>\r\n\r\n\r\nPlease include details of what it is, how to use it, how it's been tested\r\nPlease include an entry in the CHANGELOG.md if the change will impact users.\r\n\r\n#### PR Type\r\n\r\n- Docs Pull Request\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2358/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2358/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2355", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2355/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2355/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2355/events", "html_url": "https://github.com/ansible-community/molecule/issues/2355", "id": 504523829, "node_id": "MDU6SXNzdWU1MDQ1MjM4Mjk=", "number": 2355, "title": "Identical code for different logical branches in molecule\\provisioner\\ansible.py", "user": {"login": "huornlmj", "id": 28444739, "node_id": "MDQ6VXNlcjI4NDQ0NzM5", "avatar_url": "https://avatars.githubusercontent.com/u/28444739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huornlmj", "html_url": "https://github.com/huornlmj", "followers_url": "https://api.github.com/users/huornlmj/followers", "following_url": "https://api.github.com/users/huornlmj/following{/other_user}", "gists_url": "https://api.github.com/users/huornlmj/gists{/gist_id}", "starred_url": "https://api.github.com/users/huornlmj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huornlmj/subscriptions", "organizations_url": "https://api.github.com/users/huornlmj/orgs", "repos_url": "https://api.github.com/users/huornlmj/repos", "events_url": "https://api.github.com/users/huornlmj/events{/privacy}", "received_events_url": "https://api.github.com/users/huornlmj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-09T09:23:44Z", "updated_at": "2019-10-13T10:33:14Z", "closed_at": "2019-10-13T10:33:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\n# Issue\r\n\r\nmolecule/provisioner/ansible.py: def _add_or_update_vars(self), line 794.\r\n\r\n```\r\nfor instance_name, _ in self.host_vars.items():\r\n                    if instance_name == 'localhost':\r\n                        instance_key = instance_name\r\n                    else:\r\n                        instance_key = instance_name\r\n```\r\n\r\nBoth logical branches result in the same outcome.  Is this intentional?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2355/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2355/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2350", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2350/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2350/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2350/events", "html_url": "https://github.com/ansible-community/molecule/issues/2350", "id": 503321419, "node_id": "MDU6SXNzdWU1MDMzMjE0MTk=", "number": 2350, "title": "CI: 'SpecifierSet' object has no attribute 'split'", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 842110976, "node_id": "MDU6TGFiZWw4NDIxMTA5NzY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/major", "name": "major", "color": "c6476b", "default": false, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 3, "created_at": "2019-10-07T09:05:33Z", "updated_at": "2019-10-28T11:20:20Z", "closed_at": "2019-10-28T11:20:20Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Looks like some sort of pip/setuptools issue related to specifiers (>,<,>=,...)\r\n\r\n> (.venv) \u279c  molecule (master) \u2714 pip show setuptools | grep -i version\r\n> Version: 41.4.0\r\n> (.venv) \u279c  molecule (master) \u2714 pip show pip | grep -i version \r\n> Version: 19.2.3\r\n\r\n```\r\n(.venv) \u279c  molecule (master) \u2714 pip install -e .      \r\nObtaining file:///home/decentral1se/hacking/molecule\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n    Preparing wheel metadata ... error\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /home/decentral1se/hacking/molecule/.venv/bin/python /home/decentral1se/hacking/molecule/.venv/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /tmp/tmp1cijsh20\r\n         cwd: /home/decentral1se/hacking/molecule\r\n    Complete output (28 lines):\r\n    Traceback (most recent call last):\r\n      File \"/home/decentral1se/hacking/molecule/.venv/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py\", line 207, in <module>\r\n        main()\r\n      File \"/home/decentral1se/hacking/molecule/.venv/lib/python3.7/site-packages/pip/(.venv) \u279c  molecule (master) \u2714 pip install -e .                    \r\nObtaining file:///home/decentral1se/hacking/molecule\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n    Preparing wheel metadata ... error\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /home/decentral1se/hacking/molecule/.venv/bin/python /home/decentral1se/hacking/molecule/.venv/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /tmp/tmp98lvx227\r\n         cwd: /home/decentral1se/hacking/molecule\r\n    Complete output (28 lines):\r\n    Traceback (most recent call last):\r\n      File \"/home/decentral1se/hacking/molecule/.venv/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py\", line 207, in <module>\r\n        main()\r\n      File \"/home/decentral1se/hacking/molecule/.venv/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py\", line 197, in main\r\n        json_out['return_val'] = hook(**hook_input['kwargs'])\r\n      File \"/home/decentral1se/hacking/molecule/.venv/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py\", line 69, in prepare_metadata_for_build_wheel\r\n        return hook(metadata_directory, config_settings)\r\n      File \"/tmp/pip-build-env-701d0led/overlay/lib/python3.7/site-packages/setuptools/build_meta.py\", line 156, in prepare_metadata_for_build_wheel\r\n        self.run_setup()\r\n      File \"/tmp/pip-build-env-701d0led/overlay/lib/python3.7/site-packages/setuptools/build_meta.py\", line 142, in run_setup\r\n        exec(compile(code, __file__, 'exec'), locals())\r\n      File \"setup.py\", line 350, in <module>\r\n        __name__ == '__main__' and setuptools.setup(**setup_params)\r\n      File \"/tmp/pip-build-env-701d0led/overlay/lib/python3.7/site-packages/setuptools/__init__.py\", line 145, in setup\r\n        return distutils.core.setup(**attrs)\r\n      File \"/home/decentral1se/.pyenv/versions/3.7.2/lib/python3.7/distutils/core.py\", line 108, in setup\r\n        _setup_distribution = dist = klass(attrs)\r\n      File \"/tmp/pip-build-env-701d0led/overlay/lib/python3.7/site-packages/setuptools/dist.py\", line 447, in __init__\r\n        k: v for k, v in attrs.items()\r\n      File \"/home/decentral1se/.pyenv/versions/3.7.2/lib/python3.7/distutils/dist.py\", line 292, in __init__\r\n        self.finalize_options()\r\n      File \"/tmp/pip-build-env-701d0led/overlay/lib/python3.7/site-packages/setuptools/dist.py\", line 735, in finalize_options\r\n        ep.load()(self, ep.name, value)\r\n      File \"/tmp/pip-build-env-701d0led/overlay/lib/python3.7/site-packages/setuptools/dist.py\", line 291, in check_specifier\r\n        packaging.specifiers.SpecifierSet(value)\r\n      File \"/tmp/pip-build-env-701d0led/overlay/lib/python3.7/site-packages/setuptools/_vendor/packaging/specifiers.py\", line 594, in __init__\r\n        specifiers = [s.strip() for s in specifiers.split(\",\") if s.strip()]\r\n    AttributeError: 'SpecifierSet' object has no attribute 'split'\r\n    ----------------------------------------\r\nERROR: Command errored out with exit status 1: /home/decentral1se/hacking/molecule/.venv/bin/python /home/decentral1se/hacking/molecule/.venv/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /tmp/tmp98lvx227 Check the logs for full command output.\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2350/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2347", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2347/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2347/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2347/events", "html_url": "https://github.com/ansible-community/molecule/issues/2347", "id": 502858550, "node_id": "MDU6SXNzdWU1MDI4NTg1NTA=", "number": 2347, "title": "Vagrant doesn't recognize variables in configuration section", "user": {"login": "nuk380y", "id": 18404649, "node_id": "MDQ6VXNlcjE4NDA0NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/18404649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nuk380y", "html_url": "https://github.com/nuk380y", "followers_url": "https://api.github.com/users/nuk380y/followers", "following_url": "https://api.github.com/users/nuk380y/following{/other_user}", "gists_url": "https://api.github.com/users/nuk380y/gists{/gist_id}", "starred_url": "https://api.github.com/users/nuk380y/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nuk380y/subscriptions", "organizations_url": "https://api.github.com/users/nuk380y/orgs", "repos_url": "https://api.github.com/users/nuk380y/repos", "events_url": "https://api.github.com/users/nuk380y/events{/privacy}", "received_events_url": "https://api.github.com/users/nuk380y/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-04T21:48:55Z", "updated_at": "2020-01-14T12:21:26Z", "closed_at": "2020-01-14T12:21:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Do not report bugs before reproducing them with the code of the master branch! -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nmolecule, version 2.20.2\r\nansible 2.8.5\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package (dnf)\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nWhen using a scenario that utilizes vagrant as a driver, boxes are spun up by vagrant through molecule.\r\n\r\n# Actual Behaviour\r\n\r\nWhen running a test with a vagrant driven scenario, vagrant sends an error that: \r\n\r\n```\r\nVagrant:\r\n* Unknown configuration section 'synched_folder='.\r\n```\r\n\r\nThat error is found in the error log for the box that failed to start (i.e. `/tmp/molecule/{{ project_name }}/{{ scenario }}/vagrant-{{ box_name }}.err`).  This is after manually copying the `create.yml` file to the scenario from the [master branch](https://github.com/ansible/molecule/blob/master/molecule/provisioner/ansible/playbooks/vagrant/create.yml).  For what it's worth, I also needed to manually copy over the `destroy.yml` file, but that one did not throw any errors.\r\n\r\n\r\nRelevant output of `molecule --debug test -s vagrant`:\r\n```\r\n    TASK [Create molecule instance(s)] *********************************************\r\n    task path: /home/ddean/Projects/ansible_role_devdocs/molecule/vagrant/create.yml:8\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: ddean\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~ddean && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/ddean/.ansible/tmp/ansible-tmp-1570225634.7371259-39034765997832 `\" && echo ansible-tmp-1570225634.7371259-39034765997832=\"` echo /home/ddean/.ansible/tmp/ansible-tmp-1570225634.7371259-39034765997832 `\" ) && sleep 0'\r\n    Using module file /home/ddean/.python_venv/molecule/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries/molecule_vagrant.py\r\n    <127.0.0.1> PUT /home/ddean/.ansible/tmp/ansible-local-18412bvh4qgzu/tmp1dgyfyiy TO /home/ddean/.ansible/tmp/ansible-tmp-1570225634.7371259-39034765997832/AnsiballZ_molecule_vagrant.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/ddean/.ansible/tmp/ansible-tmp-1570225634.7371259-39034765997832/ /home/ddean/.ansible/tmp/ansible-tmp-1570225634.7371259-39034765997832/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/home/ddean/.python_venv/molecule/bin/python3 /home/ddean/.ansible/tmp/ansible-tmp-1570225634.7371259-39034765997832/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/ddean/.ansible/tmp/ansible-tmp-1570225634.7371259-39034765997832/ > /dev/null 2>&1 && sleep 0'\r\n    failed: [localhost] (item=ubuntu) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"config_options\": {\r\n                    \"synched_folder\": true\r\n                },\r\n                \"force_stop\": false,\r\n                \"instance_interfaces\": [\r\n                    {\r\n                        \"auto_config\": true,\r\n                        \"network_name\": \"private_network\",\r\n                        \"type\": \"dhcp\"\r\n                    }\r\n                ],\r\n                \"instance_name\": \"ubuntu\",\r\n                \"instance_raw_config_args\": [\r\n                    \"vm.network 'forwarded_port', guest: 80, host:8080\"\r\n                ],\r\n                \"platform_box\": \"generic/ubuntu1804\",\r\n                \"platform_box_url\": null,\r\n                \"platform_box_version\": null,\r\n                \"provider_cpus\": 2,\r\n                \"provider_memory\": 1024,\r\n                \"provider_name\": \"libvirt\",\r\n                \"provider_options\": {},\r\n                \"provider_override_args\": null,\r\n                \"provider_raw_config_args\": null,\r\n                \"provision\": true,\r\n                \"state\": \"up\"\r\n            }\r\n        },\r\n        \"item\": {\r\n            \"box\": \"generic/ubuntu1804\",\r\n            \"config_options\": {\r\n                \"synched_folder\": true\r\n            },\r\n            \"cpus\": 2,\r\n            \"instance_raw_config_args\": [\r\n                \"vm.network 'forwarded_port', guest: 80, host:8080\"\r\n            ],\r\n            \"interfaces\": [\r\n                {\r\n                    \"auto_config\": true,\r\n                    \"network_name\": \"private_network\",\r\n                    \"type\": \"dhcp\"\r\n                }\r\n            ],\r\n            \"memory\": 1024,\r\n            \"name\": \"ubuntu\",\r\n            \"provision\": true\r\n        },\r\n        \"msg\": \"ERROR: See log file '/tmp/molecule/ansible_role_devdocs/vagrant/vagrant-ubuntu.err'\"\r\n    }\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n    \r\n    \r\nERROR: \r\nAn error occurred during the test sequence action: 'create'. Cleaning up.\r\n--> Scenario: 'vagrant'\r\n--> Action: 'destroy'\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2347/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2347/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2344", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2344/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2344/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2344/events", "html_url": "https://github.com/ansible-community/molecule/issues/2344", "id": 500905879, "node_id": "MDU6SXNzdWU1MDA5MDU4Nzk=", "number": 2344, "title": "Molecule shows misleading messages when linting is disabled", "user": {"login": "ansiblejunky", "id": 14311849, "node_id": "MDQ6VXNlcjE0MzExODQ5", "avatar_url": "https://avatars.githubusercontent.com/u/14311849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ansiblejunky", "html_url": "https://github.com/ansiblejunky", "followers_url": "https://api.github.com/users/ansiblejunky/followers", "following_url": "https://api.github.com/users/ansiblejunky/following{/other_user}", "gists_url": "https://api.github.com/users/ansiblejunky/gists{/gist_id}", "starred_url": "https://api.github.com/users/ansiblejunky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ansiblejunky/subscriptions", "organizations_url": "https://api.github.com/users/ansiblejunky/orgs", "repos_url": "https://api.github.com/users/ansiblejunky/repos", "events_url": "https://api.github.com/users/ansiblejunky/events{/privacy}", "received_events_url": "https://api.github.com/users/ansiblejunky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-10-01T13:43:32Z", "updated_at": "2020-07-19T10:09:00Z", "closed_at": "2020-07-19T10:09:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.0\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- ansible-lint\r\n- yamllint\r\n- flake8\r\n\r\n# Desired Behavior\r\n\r\nMolecule config file `molecule.yml` has lint section disabled using `enabled: false` and so running `molecule lint` should simply show the following output:\r\n```\r\n> molecule lint\r\n--> Validating schema foo/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 lint\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\nSkipping, lint is disabled.\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nMolecule outputs misleading messages that show `Executing xxx on files found` which makes the user believe that linting was performed. These messages should not be printed when linting is disabled. The messages are coming from the fact that the `molecule.yml` defines linters for the `verifier` section and `provisioner` section. However, we only ran `molecule lint` so I assume these other sections should never be executed or considered. \r\n\r\n```\r\n> molecule lint\r\n--> Validating schema foo/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 lint\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\nSkipping, lint is disabled.\r\n--> Executing Flake8 on files found in foo/molecule/default/tests/...\r\nLint completed successfully.\r\n--> Executing Ansible Lint on foo/molecule/default/playbook.yml...\r\nLint completed successfully.\r\n```\r\n\r\nThe following is the `molecule.yml`:\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\n\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\n\r\nlint:\r\n  name: yamllint\r\n  enabled: False\r\n\r\nplatforms:\r\n  - name: centos\r\n    box: bento/centos-7.4\r\n    groups:\r\n      - linux\r\n\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\n\r\nverifier:\r\n  name: testinfra\r\n  enabled: False\r\n  lint:\r\n    name: flake8\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2344/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2344/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2343", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2343/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2343/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2343/events", "html_url": "https://github.com/ansible-community/molecule/issues/2343", "id": 500468831, "node_id": "MDU6SXNzdWU1MDA0Njg4MzE=", "number": 2343, "title": "ci: jobs are failing to detect extras installation failure", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 864009245, "node_id": "MDU6TGFiZWw4NjQwMDkyNDU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/upstream-bug", "name": "upstream-bug", "color": "960a21", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-30T19:15:36Z", "updated_at": "2020-04-15T17:02:58Z", "closed_at": "2020-04-15T17:02:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "A week ago I discovered that for a long time we had the lxc and lxd drivers failing even to install dependencies and we did not know anything about because pip reported success.\r\n\r\nI raised it as https://github.com/pypa/pip/issues/7122 ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2343/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2343/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2337", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2337/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2337/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2337/events", "html_url": "https://github.com/ansible-community/molecule/pull/2337", "id": 499495042, "node_id": "MDExOlB1bGxSZXF1ZXN0MzIyMjA0MDE1", "number": 2337, "title": "tests: require minimal ansible 2.9 for podman", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-27T14:58:26Z", "updated_at": "2019-10-25T19:26:09Z", "closed_at": "2019-09-27T15:35:01Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2337", "html_url": "https://github.com/ansible-community/molecule/pull/2337", "diff_url": "https://github.com/ansible-community/molecule/pull/2337.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2337.patch", "merged_at": "2019-09-27T15:35:01Z"}, "body": "This is needed by other changes in order to better control when to run or skip tests.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2337/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2337/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2335", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2335/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2335/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2335/events", "html_url": "https://github.com/ansible-community/molecule/pull/2335", "id": 499465632, "node_id": "MDExOlB1bGxSZXF1ZXN0MzIyMTgwMDM5", "number": 2335, "title": "Add podman driver to cookiecutter", "user": {"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-27T14:03:04Z", "updated_at": "2019-10-18T14:14:58Z", "closed_at": "2019-09-27T15:15:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2335", "html_url": "https://github.com/ansible-community/molecule/pull/2335", "diff_url": "https://github.com/ansible-community/molecule/pull/2335.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2335.patch", "merged_at": "2019-09-27T15:15:06Z"}, "body": "Add podman driver to cookicutter templates.\r\nTest:\r\n```\r\nmolecule init scenario -d podman -s podman-test\r\n```\r\nFixes: #2331\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2335/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2334", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2334/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2334/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2334/events", "html_url": "https://github.com/ansible-community/molecule/issues/2334", "id": 499465624, "node_id": "MDU6SXNzdWU0OTk0NjU2MjQ=", "number": 2334, "title": "disable galaxy role testing until we have an offline testing mode", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, {"login": "cloudnull", "id": 2066292, "node_id": "MDQ6VXNlcjIwNjYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2066292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloudnull", "html_url": "https://github.com/cloudnull", "followers_url": "https://api.github.com/users/cloudnull/followers", "following_url": "https://api.github.com/users/cloudnull/following{/other_user}", "gists_url": "https://api.github.com/users/cloudnull/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloudnull/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloudnull/subscriptions", "organizations_url": "https://api.github.com/users/cloudnull/orgs", "repos_url": "https://api.github.com/users/cloudnull/repos", "events_url": "https://api.github.com/users/cloudnull/events{/privacy}", "received_events_url": "https://api.github.com/users/cloudnull/received_events", "type": "User", "site_admin": false}, {"login": "LukeShortCloud", "id": 10150374, "node_id": "MDQ6VXNlcjEwMTUwMzc0", "avatar_url": "https://avatars.githubusercontent.com/u/10150374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LukeShortCloud", "html_url": "https://github.com/LukeShortCloud", "followers_url": "https://api.github.com/users/LukeShortCloud/followers", "following_url": "https://api.github.com/users/LukeShortCloud/following{/other_user}", "gists_url": "https://api.github.com/users/LukeShortCloud/gists{/gist_id}", "starred_url": "https://api.github.com/users/LukeShortCloud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LukeShortCloud/subscriptions", "organizations_url": "https://api.github.com/users/LukeShortCloud/orgs", "repos_url": "https://api.github.com/users/LukeShortCloud/repos", "events_url": "https://api.github.com/users/LukeShortCloud/events{/privacy}", "received_events_url": "https://api.github.com/users/LukeShortCloud/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-09-27T14:03:03Z", "updated_at": "2019-09-27T15:58:59Z", "closed_at": "2019-09-27T15:58:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Until we have a solution or working for https://github.com/ansible/galaxy/issues/2030 we should disable `test_command_dependency_ansible_galaxy` tests as they can easily fail due to github banning us:\r\n\r\n```\r\n        https://galaxy.ansible.com/api/v1/roles/?owner__username=yatesr&name=timezone\r\n        https://galaxy.ansible.com/api/v1/roles/1429/versions/?page_size=50\r\n        - downloading role from https://github.com/yatesr/ansible-timezone/archive/1.1.0.tar.gz\r\n [ERROR]: failed to download the file: HTTP Error 401: Unauthorized\r\n\r\n [WARNING]: - timezone was NOT installed successfully.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2334/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2332", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2332/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2332/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2332/events", "html_url": "https://github.com/ansible-community/molecule/issues/2332", "id": 498736946, "node_id": "MDU6SXNzdWU0OTg3MzY5NDY=", "number": 2332, "title": "tests should not fail on systems without docker", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-09-26T08:28:15Z", "updated_at": "2020-08-22T17:57:10Z", "closed_at": "2020-08-22T17:57:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Molecule testings should just skip running docker tests when there is no docker available on the system. \r\n\r\nFew facts to consider:\r\n\r\n* presence of `docker` executable does not mean you have docker or that the service is working (docker is aliased to podman on centos8/rhel8) which is not fully compatible.\r\n* missing docker executable does not mean you do not have access to a working docker, as DOCKER_HOST can point to a remote docker which could work just fine with docker-py\r\n* `docker.from_env().version()` seems like a decent way to validate docker availability\r\n* we need an option to force docker tests to run/fail instead of skip on CI to avoid accident where we may start running less tests without knowing.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2332/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2332/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2331", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2331/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2331/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2331/events", "html_url": "https://github.com/ansible-community/molecule/issues/2331", "id": 498338740, "node_id": "MDU6SXNzdWU0OTgzMzg3NDA=", "number": 2331, "title": "Podman driver documented online but removed from cookiecutter scenario drivers", "user": {"login": "agarthetiger", "id": 1242023, "node_id": "MDQ6VXNlcjEyNDIwMjM=", "avatar_url": "https://avatars.githubusercontent.com/u/1242023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agarthetiger", "html_url": "https://github.com/agarthetiger", "followers_url": "https://api.github.com/users/agarthetiger/followers", "following_url": "https://api.github.com/users/agarthetiger/following{/other_user}", "gists_url": "https://api.github.com/users/agarthetiger/gists{/gist_id}", "starred_url": "https://api.github.com/users/agarthetiger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agarthetiger/subscriptions", "organizations_url": "https://api.github.com/users/agarthetiger/orgs", "repos_url": "https://api.github.com/users/agarthetiger/repos", "events_url": "https://api.github.com/users/agarthetiger/events{/privacy}", "received_events_url": "https://api.github.com/users/agarthetiger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-25T14:51:44Z", "updated_at": "2019-11-03T17:54:21Z", "closed_at": "2019-09-27T15:15:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n- Documentation\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.8.5\r\n  config file = None\r\n  configured module search path = ['/Users/agarner/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/agarner/.virtualenvs/molecule/bin/ansible\r\n  python version = 3.7.4 (default, Jul  9 2019, 18:13:23) [Clang 10.0.1 (clang-1001.0.46.4)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nRunning `molecule init scenario -d podman -s podman-test` creates a new scenario called podman-test using the podman driver.\r\n\r\n# Actual Behaviour\r\n\r\nThe command above outputs the following error message.\r\n\r\n```\r\n--> Initializing new scenario podman-test...\r\nERROR: The specified template directory (/Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages/molecule/command/init/../../cookiecutter/scenario/driver/podman) does not exist\r\n```\r\n\r\nThat file location does not exist, it appears correct in that there are folders for all the other drivers listed on https://molecule.readthedocs.io/en/2.22/configuration.html which is the version of molecule I am using. When I ran `pip install molecule[podman]` the output already indicated this was not going to work.\r\n\r\n```\r\n$ pip install molecule[podman]\r\nRequirement already satisfied: molecule[podman] in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (2.22)\r\n  WARNING: molecule 2.22 does not provide the extra 'podman'\r\n```\r\n\r\nIs this a functional bug or possibly a case of the documentation (for v2.22 and also latest) not reflecting the actual state of support for Podman? I see comments around support for podman being [experimental](https://github.com/ansible/molecule/pull/2098#issuecomment-502365940) or is this because podman has already been [externalised](https://github.com/ansible/molecule/issues/2317)?\r\n\r\n\r\nFull output from execution.\r\n\r\n```\r\n$ pip install molecule[podman]\r\nRequirement already satisfied: molecule[podman] in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (2.22)\r\n  WARNING: molecule 2.22 does not provide the extra 'podman'\r\nRequirement already satisfied: click>=6.7 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (7.0)\r\nRequirement already satisfied: ansible>=2.5 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (2.8.5)\r\nRequirement already satisfied: six>=1.11.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (1.12.0)\r\nRequirement already satisfied: pre-commit<2,>=1.17.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (1.18.3)\r\nRequirement already satisfied: anyconfig==0.9.7 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (0.9.7)\r\nRequirement already satisfied: paramiko<3,>=2.5.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (2.6.0)\r\nRequirement already satisfied: ansible-lint<5,>=4.0.2 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (4.1.0)\r\nRequirement already satisfied: cerberus>=1.3.1 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (1.3.1)\r\nRequirement already satisfied: PyYAML<6,>=5.1 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (5.1.2)\r\nRequirement already satisfied: testinfra<4,>=3.0.6 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (3.2.0)\r\nRequirement already satisfied: colorama>=0.3.9 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (0.4.1)\r\nRequirement already satisfied: python-gilt<2,>=1.2.1 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (1.2.1)\r\nRequirement already satisfied: cookiecutter>=1.6.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (1.6.0)\r\nRequirement already satisfied: tree-format>=0.1.2 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (0.1.2)\r\nRequirement already satisfied: psutil<6,>=5.4.6; sys_platform != \"win32\" and sys_platform != \"cygwin\" in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (5.6.3)\r\nRequirement already satisfied: pexpect<5,>=4.6.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (4.7.0)\r\nRequirement already satisfied: flake8>=3.6.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (3.7.8)\r\nRequirement already satisfied: yamllint<2,>=1.15.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (1.17.0)\r\nRequirement already satisfied: Jinja2>=2.10.1 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (2.10.1)\r\nRequirement already satisfied: click-completion>=0.3.1 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (0.5.1)\r\nRequirement already satisfied: sh>=1.12.14 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (1.12.14)\r\nRequirement already satisfied: tabulate>=0.8.3 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from molecule[podman]) (0.8.3)\r\nRequirement already satisfied: cryptography in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from ansible>=2.5->molecule[podman]) (2.7)\r\nRequirement already satisfied: identify>=1.0.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pre-commit<2,>=1.17.0->molecule[podman]) (1.4.7)\r\nRequirement already satisfied: aspy.yaml in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pre-commit<2,>=1.17.0->molecule[podman]) (1.3.0)\r\nRequirement already satisfied: importlib-metadata in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pre-commit<2,>=1.17.0->molecule[podman]) (0.23)\r\nRequirement already satisfied: virtualenv>=15.2 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pre-commit<2,>=1.17.0->molecule[podman]) (16.7.5)\r\nRequirement already satisfied: nodeenv>=0.11.1 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pre-commit<2,>=1.17.0->molecule[podman]) (1.3.3)\r\nRequirement already satisfied: cfgv>=2.0.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pre-commit<2,>=1.17.0->molecule[podman]) (2.0.1)\r\nRequirement already satisfied: toml in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pre-commit<2,>=1.17.0->molecule[podman]) (0.10.0)\r\nRequirement already satisfied: bcrypt>=3.1.3 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from paramiko<3,>=2.5.0->molecule[podman]) (3.1.7)\r\nRequirement already satisfied: pynacl>=1.0.1 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from paramiko<3,>=2.5.0->molecule[podman]) (1.3.0)\r\nRequirement already satisfied: ruamel.yaml in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from ansible-lint<5,>=4.0.2->molecule[podman]) (0.16.5)\r\nRequirement already satisfied: pytest!=3.0.2 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from testinfra<4,>=3.0.6->molecule[podman]) (5.1.2)\r\nRequirement already satisfied: fasteners in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from python-gilt<2,>=1.2.1->molecule[podman]) (0.15)\r\nRequirement already satisfied: pbr in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from python-gilt<2,>=1.2.1->molecule[podman]) (5.4.3)\r\nRequirement already satisfied: git-url-parse in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from python-gilt<2,>=1.2.1->molecule[podman]) (1.2.2)\r\nRequirement already satisfied: requests>=2.18.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from cookiecutter>=1.6.0->molecule[podman]) (2.22.0)\r\nRequirement already satisfied: jinja2-time>=0.1.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from cookiecutter>=1.6.0->molecule[podman]) (0.2.0)\r\nRequirement already satisfied: binaryornot>=0.2.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from cookiecutter>=1.6.0->molecule[podman]) (0.4.4)\r\nRequirement already satisfied: poyo>=0.1.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from cookiecutter>=1.6.0->molecule[podman]) (0.5.0)\r\nRequirement already satisfied: whichcraft>=0.4.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from cookiecutter>=1.6.0->molecule[podman]) (0.6.1)\r\nRequirement already satisfied: future>=0.15.2 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from cookiecutter>=1.6.0->molecule[podman]) (0.17.1)\r\nRequirement already satisfied: ptyprocess>=0.5 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pexpect<5,>=4.6.0->molecule[podman]) (0.6.0)\r\nRequirement already satisfied: pycodestyle<2.6.0,>=2.5.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from flake8>=3.6.0->molecule[podman]) (2.5.0)\r\nRequirement already satisfied: entrypoints<0.4.0,>=0.3.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from flake8>=3.6.0->molecule[podman]) (0.3)\r\nRequirement already satisfied: pyflakes<2.2.0,>=2.1.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from flake8>=3.6.0->molecule[podman]) (2.1.1)\r\nRequirement already satisfied: mccabe<0.7.0,>=0.6.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from flake8>=3.6.0->molecule[podman]) (0.6.1)\r\nRequirement already satisfied: pathspec>=0.5.3 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from yamllint<2,>=1.15.0->molecule[podman]) (0.5.9)\r\nRequirement already satisfied: MarkupSafe>=0.23 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from Jinja2>=2.10.1->molecule[podman]) (1.1.1)\r\nRequirement already satisfied: shellingham in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from click-completion>=0.3.1->molecule[podman]) (1.3.1)\r\nRequirement already satisfied: asn1crypto>=0.21.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from cryptography->ansible>=2.5->molecule[podman]) (0.24.0)\r\nRequirement already satisfied: cffi!=1.11.3,>=1.8 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from cryptography->ansible>=2.5->molecule[podman]) (1.12.3)\r\nRequirement already satisfied: zipp>=0.5 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from importlib-metadata->pre-commit<2,>=1.17.0->molecule[podman]) (0.6.0)\r\nRequirement already satisfied: ruamel.yaml.clib>=0.1.2; platform_python_implementation == \"CPython\" and python_version < \"3.8\" in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from ruamel.yaml->ansible-lint<5,>=4.0.2->molecule[podman]) (0.1.2)\r\nRequirement already satisfied: wcwidth in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pytest!=3.0.2->testinfra<4,>=3.0.6->molecule[podman]) (0.1.7)\r\nRequirement already satisfied: atomicwrites>=1.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pytest!=3.0.2->testinfra<4,>=3.0.6->molecule[podman]) (1.3.0)\r\nRequirement already satisfied: more-itertools>=4.0.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pytest!=3.0.2->testinfra<4,>=3.0.6->molecule[podman]) (7.2.0)\r\nRequirement already satisfied: attrs>=17.4.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pytest!=3.0.2->testinfra<4,>=3.0.6->molecule[podman]) (19.1.0)\r\nRequirement already satisfied: pluggy<1.0,>=0.12 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pytest!=3.0.2->testinfra<4,>=3.0.6->molecule[podman]) (0.13.0)\r\nRequirement already satisfied: packaging in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pytest!=3.0.2->testinfra<4,>=3.0.6->molecule[podman]) (19.1)\r\nRequirement already satisfied: py>=1.5.0 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from pytest!=3.0.2->testinfra<4,>=3.0.6->molecule[podman]) (1.8.0)\r\nRequirement already satisfied: monotonic>=0.1 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from fasteners->python-gilt<2,>=1.2.1->molecule[podman]) (1.5)\r\nRequirement already satisfied: idna<2.9,>=2.5 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from requests>=2.18.0->cookiecutter>=1.6.0->molecule[podman]) (2.8)\r\nRequirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from requests>=2.18.0->cookiecutter>=1.6.0->molecule[podman]) (1.25.3)\r\nRequirement already satisfied: chardet<3.1.0,>=3.0.2 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from requests>=2.18.0->cookiecutter>=1.6.0->molecule[podman]) (3.0.4)\r\nRequirement already satisfied: certifi>=2017.4.17 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from requests>=2.18.0->cookiecutter>=1.6.0->molecule[podman]) (2019.9.11)\r\nRequirement already satisfied: arrow in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from jinja2-time>=0.1.0->cookiecutter>=1.6.0->molecule[podman]) (0.15.2)\r\nRequirement already satisfied: pycparser in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from cffi!=1.11.3,>=1.8->cryptography->ansible>=2.5->molecule[podman]) (2.19)\r\nRequirement already satisfied: pyparsing>=2.0.2 in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from packaging->pytest!=3.0.2->testinfra<4,>=3.0.6->molecule[podman]) (2.4.2)\r\nRequirement already satisfied: python-dateutil in /Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages (from arrow->jinja2-time>=0.1.0->cookiecutter>=1.6.0->molecule[podman]) (2.8.0)\r\n\r\n$ molecule init scenario -d podman -s podman-test\r\n--> Initializing new scenario podman-test...\r\nERROR: The specified template directory (/Users/agarner/.virtualenvs/molecule/lib/python3.7/site-packages/molecule/command/init/../../cookiecutter/scenario/driver/podman) does not exist\r\n\r\n$ lssitepackages\r\nCerberus-1.3.1.dist-info            future                              pycparser\r\nClick-7.0.dist-info                 future-0.17.1.dist-info             pycparser-2.19.dist-info\r\nJinja2-2.10.1.dist-info             gilt                                pyflakes\r\nMarkupSafe-1.1.1.dist-info          git_url_parse-1.2.2.dist-info       pyflakes-2.1.1.dist-info\r\nPyNaCl-1.3.0.dist-info              giturlparse                         pyparsing-2.4.2.dist-info\r\nPyYAML-5.1.2.dist-info              identify                            pyparsing.py\r\n__pycache__                         identify-1.4.7.dist-info            pytest-5.1.2.dist-info\r\n_cffi_backend.cpython-37m-darwin.so idna                                pytest.py\r\n_pytest                             idna-2.8.dist-info                  python_dateutil-2.8.0.dist-info\r\n_ruamel_yaml.cpython-37m-darwin.so  importlib_metadata                  python_gilt-1.2.1.dist-info\r\nansible                             importlib_metadata-0.23.dist-info   python_vagrant-0.5.15.dist-info\r\nansible-2.8.5.dist-info             jinja2                              requests\r\nansible_lint-4.1.0.dist-info        jinja2_time                         requests-2.22.0.dist-info\r\nansiblelint                         jinja2_time-0.2.0.dist-info         ruamel\r\nanyconfig                           libfuturize                         ruamel.yaml-0.16.5-py3.6-nspkg.pth\r\nanyconfig-0.9.7.dist-info           libpasteurize                       ruamel.yaml-0.16.5.dist-info\r\narrow                               markupsafe                          ruamel.yaml.clib-0.1.2.dist-info\r\narrow-0.15.2.dist-info              mccabe-0.6.1.dist-info              setuptools\r\nasn1crypto                          mccabe.py                           setuptools-41.2.0.dist-info\r\nasn1crypto-0.24.0.dist-info         molecule                            sh-1.12.14.dist-info\r\naspy                                molecule-2.22.dist-info             sh.py\r\naspy.yaml-1.3.0.dist-info           monotonic-1.5.dist-info             shellingham\r\natomicwrites                        monotonic.py                        shellingham-1.3.1.dist-info\r\natomicwrites-1.3.0.dist-info        more_itertools                      six-1.12.0.dist-info\r\nattr                                more_itertools-7.2.0.dist-info      six.py\r\nattrs-19.1.0.dist-info              nacl                                tabulate-0.8.3.dist-info\r\nbcrypt                              nodeenv-1.3.3.dist-info             tabulate.py\r\nbcrypt-3.1.7.dist-info              nodeenv.py                          test\r\nbinaryornot                         packaging                           testinfra\r\nbinaryornot-0.4.4.dist-info         packaging-19.1.dist-info            testinfra-3.2.0.dist-info\r\ncerberus                            paramiko                            toml\r\ncertifi                             paramiko-2.6.0.dist-info            toml-0.10.0.dist-info\r\ncertifi-2019.9.11.dist-info         past                                toml.py\r\ncffi                                pathspec                            tree_format\r\ncffi-1.12.3.dist-info               pathspec-0.5.9.dist-info            tree_format-0.1.2.dist-info\r\ncfgv-2.0.1.dist-info                pbr                                 urllib3\r\ncfgv.py                             pbr-5.4.3.dist-info                 urllib3-1.25.3.dist-info\r\nchardet                             pexpect                             vagrant\r\nchardet-3.0.4.dist-info             pexpect-4.7.0.dist-info             varlink\r\nclick                               pip                                 varlink-30.3.0.dist-info\r\nclick_completion                    pip-19.2.3.dist-info                virtualenv-16.7.5.dist-info\r\nclick_completion-0.5.1.dist-info    pkg_resources                       virtualenv.py\r\ncolorama                            pluggy                              virtualenv_support\r\ncolorama-0.4.1.dist-info            pluggy-0.13.0.dist-info             wcwidth\r\ncookiecutter                        podman                              wcwidth-0.1.7.dist-info\r\ncookiecutter-1.6.0.dist-info        podman-0.12.0.dist-info             websocket\r\ncryptography                        poyo                                websocket_client-0.56.0.dist-info\r\ncryptography-2.7.dist-info          poyo-0.5.0.dist-info                wheel\r\ndateutil                            pre_commit                          wheel-0.33.6.dist-info\r\ndocker                              pre_commit-1.18.3.dist-info         whichcraft-0.6.1.dist-info\r\ndocker-4.0.2.dist-info              psutil                              whichcraft.py\r\neasy_install.py                     psutil-5.6.3.dist-info              yaml\r\nentrypoints-0.3.dist-info           ptyprocess                          yamllint\r\nentrypoints.py                      ptyprocess-0.6.0.dist-info          yamllint-1.17.0.dist-info\r\nfasteners                           py                                  zipp-0.6.0.dist-info\r\nfasteners-0.15.dist-info            py-1.8.0.dist-info                  zipp.py\r\nflake8                              pycodestyle-2.5.0.dist-info\r\nflake8-3.7.8.dist-info              pycodestyle.py\r\n\r\n$ cdvirtualenv\r\n\r\n$ cd lib/python3.7/site-packages/molecule/cookiecutter/\r\n\r\n$ tree -L 3\r\n.\r\n\u251c\u2500\u2500 molecule\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cookiecutter.json\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 {{cookiecutter.role_name}}\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 {{cookiecutter.molecule_directory}}\r\n\u251c\u2500\u2500 role\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cookiecutter.json\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 {{cookiecutter.role_name}}\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 README.md\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 defaults\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 handlers\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 meta\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 tasks\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 vars\r\n\u2514\u2500\u2500 scenario\r\n    \u251c\u2500\u2500 driver\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 azure\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 delegated\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 digitalocean\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 docker\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 ec2\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 gce\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 hetznercloud\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 linode\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 lxc\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 lxd\r\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 openstack\r\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 vagrant\r\n    \u2514\u2500\u2500 verifier\r\n        \u251c\u2500\u2500 ansible\r\n        \u251c\u2500\u2500 goss\r\n        \u251c\u2500\u2500 inspec\r\n        \u2514\u2500\u2500 testinfra\r\n\r\n29 directories, 3 files\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2331/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2328", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2328/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2328/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2328/events", "html_url": "https://github.com/ansible-community/molecule/pull/2328", "id": 498138556, "node_id": "MDExOlB1bGxSZXF1ZXN0MzIxMTI4OTkz", "number": 2328, "title": "Dockerfile.j2: add python-apt aptitude packages for Debian-based distros", "user": {"login": "perlun", "id": 630613, "node_id": "MDQ6VXNlcjYzMDYxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/630613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perlun", "html_url": "https://github.com/perlun", "followers_url": "https://api.github.com/users/perlun/followers", "following_url": "https://api.github.com/users/perlun/following{/other_user}", "gists_url": "https://api.github.com/users/perlun/gists{/gist_id}", "starred_url": "https://api.github.com/users/perlun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perlun/subscriptions", "organizations_url": "https://api.github.com/users/perlun/orgs", "repos_url": "https://api.github.com/users/perlun/repos", "events_url": "https://api.github.com/users/perlun/events{/privacy}", "received_events_url": "https://api.github.com/users/perlun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-09-25T08:43:55Z", "updated_at": "2020-02-17T15:10:30Z", "closed_at": "2019-09-25T10:22:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2328", "html_url": "https://github.com/ansible-community/molecule/pull/2328", "diff_url": "https://github.com/ansible-community/molecule/pull/2328.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2328.patch", "merged_at": "2019-09-25T10:22:37Z"}, "body": "This aims to get rid of warnings like this when installing packages later on, using the [`package`](https://docs.ansible.com/ansible/latest/modules/package_module.html#package-module) ansible module:\r\n\r\n```\r\nTASK [ubuntu_tomcat : Install tomcat .deb package] *****************************\r\n[WARNING]: Updating cache and auto-installing missing dependency: python-apt\r\n\r\nchanged: [ubuntu16.04-8d75d129-86ac-4715-89df-2b4a04733675]\r\n[WARNING]: Could not find aptitude. Using apt-get instead\r\n```\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2328/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2328/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2322", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2322/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2322/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2322/events", "html_url": "https://github.com/ansible-community/molecule/issues/2322", "id": 496468093, "node_id": "MDU6SXNzdWU0OTY0NjgwOTM=", "number": 2322, "title": "Gathering Facts / converge action stop to work after upgrade python version from 2 to 3", "user": {"login": "camilamacedo86", "id": 7708031, "node_id": "MDQ6VXNlcjc3MDgwMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/7708031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camilamacedo86", "html_url": "https://github.com/camilamacedo86", "followers_url": "https://api.github.com/users/camilamacedo86/followers", "following_url": "https://api.github.com/users/camilamacedo86/following{/other_user}", "gists_url": "https://api.github.com/users/camilamacedo86/gists{/gist_id}", "starred_url": "https://api.github.com/users/camilamacedo86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camilamacedo86/subscriptions", "organizations_url": "https://api.github.com/users/camilamacedo86/orgs", "repos_url": "https://api.github.com/users/camilamacedo86/repos", "events_url": "https://api.github.com/users/camilamacedo86/events{/privacy}", "received_events_url": "https://api.github.com/users/camilamacedo86/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-20T17:34:53Z", "updated_at": "2019-09-21T15:52:04Z", "closed_at": "2019-09-21T15:52:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible: 2.8.0 and 2.8.5\r\nmolecule: 2.20 and 2.22 \r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip \r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nAfter upgrade, the python version used in the solution from 2 to 3 all tests should still work as the coverage one. \r\n\r\n# Actual Behaviour\r\n\r\nThe coverage stop to work when the only change is the python version. \r\n\r\n\r\n```shell\r\n\r\n--> Action: 'converge'\r\n    \r\n    PLAY [Build Operator in Kubernetes docker container] ***************************\r\n    \r\n    TASK [Gathering Facts] *********************************************************\r\n    ok: [kind-test-local]\r\n    \r\n    TASK [Get existing image hash] *************************************************\r\n    ok: [kind-test-local]\r\n    \r\n    TASK [Build Operator Image] ****************************************************\r\n    changed: [kind-test-local]\r\n    \r\n    PLAY [Converge] ****************************************************************\r\n    \r\n    TASK [Gathering Facts] *********************************************************\r\n    ok: [localhost]\r\n    \r\n    TASK [Delete the Operator Deployment] ******************************************\r\n    ok: [localhost]\r\n    \r\n    TASK [Wait 30s for Operator Deployment to terminate] ***************************\r\n    skipping: [localhost]\r\n    \r\n    TASK [Create the Operator Deployment] ******************************************\r\n    changed: [localhost]\r\n    \r\n    TASK [Create the ansible.example.com/v1alpha1.Memcached] ***********************\r\n    changed: [localhost]\r\n    \r\n    TASK [Wait 3m for reconciliation to run] ***************************************\r\n    FAILED - RETRYING: Wait 3m for reconciliation to run (10 retries left).\r\n    FAILED - RETRYING: Wait 3m for reconciliation to run (9 retries left).\r\n    FAILED - RETRYING: Wait 3m for reconciliation to run (8 retries left).\r\n    FAILED - RETRYING: Wait 3m for reconciliation to run (7 retries left).\r\n    FAILED - RETRYING: Wait 3m for reconciliation to run (6 retries left).\r\n    FAILED - RETRYING: Wait 3m for reconciliation to run (5 retries left).\r\n    FAILED - RETRYING: Wait 3m for reconciliation to run (4 retries left).\r\n    FAILED - RETRYING: Wait 3m for reconciliation to run (3 retries left).\r\n    FAILED - RETRYING: Wait 3m for reconciliation to run (2 retries left).\r\n    FAILED - RETRYING: Wait 3m for reconciliation to run (1 retries left).\r\n    fatal: [localhost]: FAILED! => {\"attempts\": 10, \"changed\": false, \"resources\": [{\"apiVersion\": \"ansible.example.com/v1alpha1\", \"kind\": \"Memcached\", \"metadata\": {\"creationTimestamp\": \"2019-09-20T17:00:22Z\", \"finalizers\": [\"finalizer.ansible.example.com\"], \"generation\": 1, \"name\": \"example-memcached\", \"namespace\": \"default\", \"resourceVersion\": \"787\", \"selfLink\": \"/apis/ansible.example.com/v1alpha1/namespaces/default/memcacheds/example-memcached\", \"uid\": \"21fb17c2-dbc8-11e9-8c04-02422e706c63\"}, \"spec\": {\"size\": 3}, \"status\": {\"conditions\": [{\"lastTransitionTime\": \"2019-09-20T17:00:25Z\", \"message\": \"Running reconciliation\", \"reason\": \"Running\", \"status\": \"False\", \"type\": \"Running\"}, {\"ansibleResult\": {\"changed\": 0, \"completion\": \"2019-09-20T17:00:40.201574\", \"failures\": 1, \"ok\": 0, \"skipped\": 0}, \"lastTransitionTime\": \"2019-09-20T17:00:41Z\", \"message\": \"Failed to import the required Python library (openshift) on memcached-operator-f5ffb768c-8x6d6's Python /usr/bin/python. Please read module documentation and install in the appropriate location\", \"reason\": \"Failed\", \"status\": \"True\", \"type\": \"Failure\"}]}}]}\r\n```\r\n\r\n## IMPORTANT\r\n\r\n* See that others face the same issue: \r\nhttps://github.com/ansible/molecule/issues/2187\r\n* To check this in the PR: https://github.com/operator-framework/operator-sdk/pull/1947 (note that each change was performed and check and when the python is changed it stop to work. )\r\n* It has been tested by myself for few days in other PRs for the same place as well. ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2322/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2322/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2304", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2304/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2304/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2304/events", "html_url": "https://github.com/ansible-community/molecule/issues/2304", "id": 495096441, "node_id": "MDU6SXNzdWU0OTUwOTY0NDE=", "number": 2304, "title": "Molecule and docker images", "user": {"login": "till", "id": 27003, "node_id": "MDQ6VXNlcjI3MDAz", "avatar_url": "https://avatars.githubusercontent.com/u/27003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/till", "html_url": "https://github.com/till", "followers_url": "https://api.github.com/users/till/followers", "following_url": "https://api.github.com/users/till/following{/other_user}", "gists_url": "https://api.github.com/users/till/gists{/gist_id}", "starred_url": "https://api.github.com/users/till/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/till/subscriptions", "organizations_url": "https://api.github.com/users/till/orgs", "repos_url": "https://api.github.com/users/till/repos", "events_url": "https://api.github.com/users/till/events{/privacy}", "received_events_url": "https://api.github.com/users/till/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-18T09:16:11Z", "updated_at": "2019-10-12T12:22:44Z", "closed_at": "2019-10-11T11:47:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.6.3\r\n  config file = None\r\n  configured module search path = [u'/Users/till/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.16 (default, Sep  2 2019, 11:59:44) [GCC 4.2.1 Compatible Apple LLVM 10.0.1 (clang-1001.0.46.4)]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- homebrew\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package (homebrew)\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nTrying to run a molecule scenario for a role locally. I configured a very barebones setup, using the Docker driver and a `centos:7` Docker image.\r\n\r\nHere's my `molecule.yml`:\r\n\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    image: centos:7\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\nI haven't added any tests yet, I just did `init` yesterday and struggled to run the skeleton.\r\n\r\n```\r\n$ molecule init scenario --role-name=my-role --driver-name=docker\r\n```\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n$ molecule --debug converge\r\n--> Validating schema /path/my-role/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u2514\u2500\u2500 converge\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/local/Cellar/molecule/2.20.1_1/libexec/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/filters:/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/plugins/filters:/path/my-role/plugins/filters\r\nANSIBLE_LIBRARY: /usr/local/Cellar/molecule/2.20.1_1/libexec/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/library:/path/my-role/library\r\nANSIBLE_ROLES_PATH: /var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/roles:/path\r\nANSIBLE_VAULT_PASSWORD_FILE:\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /path/my-role/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default\r\nMOLECULE_FILE: /path/my-role/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /path/my-role\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /path/my-role/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /path/my-role/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/local/Cellar/molecule/2.20.1_1/libexec/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/filters:/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/plugins/filters:/path/my-role/plugins/filters ANSIBLE_LIBRARY=/usr/local/Cellar/molecule/2.20.1_1/libexec/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/library:/path/my-role/library ANSIBLE_ROLES_PATH=/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/roles:/path ANSIBLE_VAULT_PASSWORD_FILE=/Users/till/.vault_pass.txt MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/path/my-role/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default MOLECULE_FILE=/path/my-role/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/instance_config.yml MOLECULE_INVENTORY_FILE=/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/path/my-role MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/path/my-role/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/path/my-role/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/usr/local/bin/ansible-playbook --skip-tags=molecule-notest,notest --inventory=/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/inventory --diff /usr/local/Cellar/molecule/2.20.1_1/libexec/lib/python2.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml -vvv\r\n\r\n    ansible-playbook 2.6.3\r\n      config file = /var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule//path/my-role/default/ansible.cfg\r\n      configured module search path = [u'/usr/local/Cellar/molecule/2.20.1_1/libexec/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries', u'/var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/library', u'/path/my-role/library']\r\n      ansible python module location = /usr/local/lib/python2.7/site-packages/ansible\r\n      executable location = /usr/local/bin/ansible-playbook\r\n      python version = 2.7.16 (default, Sep  2 2019, 11:59:44) [GCC 4.2.1 Compatible Apple LLVM 10.0.1 (clang-1001.0.46.4)]\r\n    Using /var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/ansible.cfg as config file\r\n    Parsed /var/folders/yg/_vjn6wys2pxfcvwbd84r2bf00000gn/T/molecule/my-role/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n    \r\n    PLAYBOOK: create.yml ***********************************************************\r\n    1 plays in /usr/local/Cellar/molecule/2.20.1_1/libexec/lib/python2.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml\r\n    \r\n    PLAY [Create] ******************************************************************\r\n    META: ran handlers\r\n    \r\n    TASK [Log into a Docker registry] **********************************************\r\n    task path: /usr/local/Cellar/molecule/2.20.1_1/libexec/lib/python2.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:8\r\n    fatal: [localhost]: FAILED! => {\r\n        \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\"\r\n    }\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1   \r\n    \r\nERROR:\r\n```\r\n\r\nI can't for the live of me figure out why it's trying to log into a Docker registry.\r\n\r\nI also tried to `pip install docker` as suggested on similar tickets, to no avail.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2304/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2304/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2299", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2299/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2299/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2299/events", "html_url": "https://github.com/ansible-community/molecule/pull/2299", "id": 494620209, "node_id": "MDExOlB1bGxSZXF1ZXN0MzE4MzM2NjMx", "number": 2299, "title": "refactoring: removed remaining goss bits", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-17T13:20:59Z", "updated_at": "2020-02-17T15:17:25Z", "closed_at": "2019-09-17T14:05:10Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2299", "html_url": "https://github.com/ansible-community/molecule/pull/2299", "diff_url": "https://github.com/ansible-community/molecule/pull/2299.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2299.patch", "merged_at": "2019-09-17T14:05:10Z"}, "body": "Removed some files part of goss that were missed in previous run.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2299/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2297", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2297/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2297/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2297/events", "html_url": "https://github.com/ansible-community/molecule/pull/2297", "id": 493754714, "node_id": "MDExOlB1bGxSZXF1ZXN0MzE3NjQ5NzY0", "number": 2297, "title": "deps: refresh click dependencies", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-15T15:56:02Z", "updated_at": "2020-02-17T15:14:22Z", "closed_at": "2019-09-15T19:50:42Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2297", "html_url": "https://github.com/ansible-community/molecule/pull/2297", "diff_url": "https://github.com/ansible-community/molecule/pull/2297.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2297.patch", "merged_at": "2019-09-15T19:50:42Z"}, "body": "* remove dependency on psutil as newer click-completion dropped it\r\n* bumps click and click-completion to newer versions\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2297/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2297/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2296", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2296/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2296/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2296/events", "html_url": "https://github.com/ansible-community/molecule/pull/2296", "id": 493754204, "node_id": "MDExOlB1bGxSZXF1ZXN0MzE3NjQ5NDI4", "number": 2296, "title": "deps: remove pinning of anyconfig", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 0, "created_at": "2019-09-15T15:51:07Z", "updated_at": "2020-02-17T15:17:44Z", "closed_at": "2019-09-15T19:51:57Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2296", "html_url": "https://github.com/ansible-community/molecule/pull/2296", "diff_url": "https://github.com/ansible-community/molecule/pull/2296.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2296.patch", "merged_at": "2019-09-15T19:51:57Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2296/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2296/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2295", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2295/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2295/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2295/events", "html_url": "https://github.com/ansible-community/molecule/pull/2295", "id": 493753653, "node_id": "MDExOlB1bGxSZXF1ZXN0MzE3NjQ5MDUw", "number": 2295, "title": "Fix auto-completion of choices", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-15T15:46:20Z", "updated_at": "2020-02-17T15:14:37Z", "closed_at": "2019-09-15T19:51:22Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2295", "html_url": "https://github.com/ansible-community/molecule/pull/2295", "diff_url": "https://github.com/ansible-community/molecule/pull/2295.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2295.patch", "merged_at": "2019-09-15T19:51:22Z"}, "body": "Avoids https://github.com/pallets/click/issues/591 by converting choices\r\nto lists of strings.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2295/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2292", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2292/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2292/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2292/events", "html_url": "https://github.com/ansible-community/molecule/pull/2292", "id": 493717934, "node_id": "MDExOlB1bGxSZXF1ZXN0MzE3NjI0NjQz", "number": 2292, "title": "refactoring: verifiers should expose their own linters", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 0, "created_at": "2019-09-15T09:56:23Z", "updated_at": "2020-02-17T15:18:31Z", "closed_at": "2019-09-15T11:05:53Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2292", "html_url": "https://github.com/ansible-community/molecule/pull/2292", "diff_url": "https://github.com/ansible-community/molecule/pull/2292.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2292.patch", "merged_at": "2019-09-15T11:05:53Z"}, "body": "Instead of knowing which linter is used by each verifier, this is now\r\na property of the verifier itself.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2292/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2292/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2291", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2291/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2291/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2291/events", "html_url": "https://github.com/ansible-community/molecule/pull/2291", "id": 493712087, "node_id": "MDExOlB1bGxSZXF1ZXN0MzE3NjIwODQ3", "number": 2291, "title": "Avoid futures SyntaxError", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 0, "created_at": "2019-09-15T08:48:06Z", "updated_at": "2020-02-17T16:30:18Z", "closed_at": "2019-09-16T15:03:40Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2291", "html_url": "https://github.com/ansible-community/molecule/pull/2291", "diff_url": "https://github.com/ansible-community/molecule/pull/2291.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2291.patch", "merged_at": "2019-09-16T15:03:40Z"}, "body": "Adds run-time check of future version to avoid later failures.\r\nFixes: #2181", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2291/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2290", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2290/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2290/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2290/events", "html_url": "https://github.com/ansible-community/molecule/issues/2290", "id": 493656550, "node_id": "MDU6SXNzdWU0OTM2NTY1NTA=", "number": 2290, "title": "proposal: a newly created role should always pass linting", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1305702160, "node_id": "MDU6TGFiZWwxMzA1NzAyMTYw", "url": "https://api.github.com/repos/ansible-community/molecule/labels/proposal", "name": "proposal", "color": "bfd4f2", "default": false, "description": "Suggestion for a larger change"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "themr0c", "id": 243761, "node_id": "MDQ6VXNlcjI0Mzc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/243761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/themr0c", "html_url": "https://github.com/themr0c", "followers_url": "https://api.github.com/users/themr0c/followers", "following_url": "https://api.github.com/users/themr0c/following{/other_user}", "gists_url": "https://api.github.com/users/themr0c/gists{/gist_id}", "starred_url": "https://api.github.com/users/themr0c/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/themr0c/subscriptions", "organizations_url": "https://api.github.com/users/themr0c/orgs", "repos_url": "https://api.github.com/users/themr0c/repos", "events_url": "https://api.github.com/users/themr0c/events{/privacy}", "received_events_url": "https://api.github.com/users/themr0c/received_events", "type": "User", "site_admin": false}, {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, {"login": "cloudnull", "id": 2066292, "node_id": "MDQ6VXNlcjIwNjYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2066292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloudnull", "html_url": "https://github.com/cloudnull", "followers_url": "https://api.github.com/users/cloudnull/followers", "following_url": "https://api.github.com/users/cloudnull/following{/other_user}", "gists_url": "https://api.github.com/users/cloudnull/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloudnull/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloudnull/subscriptions", "organizations_url": "https://api.github.com/users/cloudnull/orgs", "repos_url": "https://api.github.com/users/cloudnull/repos", "events_url": "https://api.github.com/users/cloudnull/events{/privacy}", "received_events_url": "https://api.github.com/users/cloudnull/received_events", "type": "User", "site_admin": false}, {"login": "LukeShortCloud", "id": 10150374, "node_id": "MDQ6VXNlcjEwMTUwMzc0", "avatar_url": "https://avatars.githubusercontent.com/u/10150374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LukeShortCloud", "html_url": "https://github.com/LukeShortCloud", "followers_url": "https://api.github.com/users/LukeShortCloud/followers", "following_url": "https://api.github.com/users/LukeShortCloud/following{/other_user}", "gists_url": "https://api.github.com/users/LukeShortCloud/gists{/gist_id}", "starred_url": "https://api.github.com/users/LukeShortCloud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LukeShortCloud/subscriptions", "organizations_url": "https://api.github.com/users/LukeShortCloud/orgs", "repos_url": "https://api.github.com/users/LukeShortCloud/repos", "events_url": "https://api.github.com/users/LukeShortCloud/events{/privacy}", "received_events_url": "https://api.github.com/users/LukeShortCloud/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-09-14T19:10:12Z", "updated_at": "2020-04-07T19:58:34Z", "closed_at": "2020-04-07T19:58:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently if you create a role with molecule it will fail to pass linting because some default fields do still have their original settings.\r\n```\r\nmolecule init role -d vagrant -r test-vagrant\r\n```\r\nIn order to improve the UX we need to find a way to avoid these errors. Also this would allow us to perform a full integration testing on molecule CI, where we validate that user can successfully run all commands on newly created roles.\r\n\r\n```\r\n--> Executing Ansible Lint on /root/rdo/molecule/test-vagrant/molecule/default/playbook.yml...\r\n    [701] Role info should contain platforms\r\n    /root/rdo/molecule/test-vagrant/meta/main.yml:1\r\n    {'meta/main.yml': {'skipped_rules': [], '__file__': u'/root/rdo/molecule/test-vagrant/meta/main.yml', u'dependencies': [], u'galaxy_info': {u'description': u'your description', u'license': u'license (GPLv2, CC-BY, etc)', u'author': u'your name', u'company': u'your company (optional)', u'galaxy_tags': [], '__line__': 2, '__file__': u'/root/rdo/molecule/test-vagrant/meta/main.yml', u'min_ansible_version': 1.2}, '__line__': 1}}\r\n\r\n    [703] Should change default metadata: author\r\n    /root/rdo/molecule/test-vagrant/meta/main.yml:1\r\n    {'meta/main.yml': {'skipped_rules': [], '__file__': u'/root/rdo/molecule/test-vagrant/meta/main.yml', u'dependencies': [], u'galaxy_info': {u'description': u'your description', u'license': u'license (GPLv2, CC-BY, etc)', u'author': u'your name', u'company': u'your company (optional)', u'galaxy_tags': [], '__line__': 2, '__file__': u'/root/rdo/molecule/test-vagrant/meta/main.yml', u'min_ansible_version': 1.2}, '__line__': 1}}\r\n\r\n    [703] Should change default metadata: description\r\n    /root/rdo/molecule/test-vagrant/meta/main.yml:1\r\n    {'meta/main.yml': {'skipped_rules': [], '__file__': u'/root/rdo/molecule/test-vagrant/meta/main.yml', u'dependencies': [], u'galaxy_info': {u'description': u'your description', u'license': u'license (GPLv2, CC-BY, etc)', u'author': u'your name', u'company': u'your company (optional)', u'galaxy_tags': [], '__line__': 2, '__file__': u'/root/rdo/molecule/test-vagrant/meta/main.yml', u'min_ansible_version': 1.2}, '__line__': 1}}\r\n\r\n    [703] Should change default metadata: company\r\n    /root/rdo/molecule/test-vagrant/meta/main.yml:1\r\n    {'meta/main.yml': {'skipped_rules': [], '__file__': u'/root/rdo/molecule/test-vagrant/meta/main.yml', u'dependencies': [], u'galaxy_info': {u'description': u'your description', u'license': u'license (GPLv2, CC-BY, etc)', u'author': u'your name', u'company': u'your company (optional)', u'galaxy_tags': [], '__line__': 2, '__file__': u'/root/rdo/molecule/test-vagrant/meta/main.yml', u'min_ansible_version': 1.2}, '__line__': 1}}\r\n\r\n    [703] Should change default metadata: license\r\n    /root/rdo/molecule/test-vagrant/meta/main.yml:1\r\n    {'meta/main.yml': {'skipped_rules': [], '__file__': u'/root/rdo/molecule/test-vagrant/meta/main.yml', u'dependencies': [], u'galaxy_info': {u'description': u'your description', u'license': u'license (GPLv2, CC-BY, etc)', u'author': u'your name', u'company': u'your company (optional)', u'galaxy_tags': [], '__line__': 2, '__file__': u'/root/rdo/molecule/test-vagrant/meta/main.yml', u'min_ansible_version': 1.2}, '__line__': 1}}\r\n```\r\n\r\nIdeas:\r\n* Get default user from `git config user.name`\r\n* Get default email from `git config user.email`\r\n* Default to an MIT license.\r\n* Default to no company\r\n* Find a simple and popular platform to include by default\r\n\r\nOpen questions:\r\n* Can we avoid adding a configuration file for molecule?\r\n* How could user define new defaults for `license` and `company` (we want to avoid adding new cli arguments)\r\n* What to do if git is not configured yet with user.name and user.email?\r\n* Would it be acceptable to piggy-back git configuration for fields that have not meaning for git?:\r\n```\r\ngit config user.company \"Red Hat\"\r\ngit config user.license \"MIT\"\r\n```\r\nThis could be handy for us as we could avoid having to create a new config file.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2290/reactions", "total_count": 2, "+1": 1, "-1": 1, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2290/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2289", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2289/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2289/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2289/events", "html_url": "https://github.com/ansible-community/molecule/pull/2289", "id": 493643900, "node_id": "MDExOlB1bGxSZXF1ZXN0MzE3NTc0ODEx", "number": 2289, "title": "Disable deprecation warnings from own dependencies", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-09-14T16:59:48Z", "updated_at": "2020-02-17T16:36:49Z", "closed_at": "2019-09-15T09:51:15Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2289", "html_url": "https://github.com/ansible-community/molecule/pull/2289", "diff_url": "https://github.com/ansible-community/molecule/pull/2289.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2289.patch", "merged_at": "2019-09-15T09:51:15Z"}, "body": "Once we assure we have an upstream bug track we track, we can disable\r\ndeprecation warnings from dependencies producing them.\r\n\r\nIf they do not fix them we should consider finding a way to drop these\r\ndependencies:\r\n\r\n* https://github.com/boto/boto3/pull/1603\r\n* https://github.com/boto/botocore/issues/1615\r\n* https://github.com/cookiecutter/cookiecutter/pull/1127 \r\n* https://github.com/pytest-dev/pytest-cov/issues/327\r\n* https://bitbucket.org/astanin/python-tabulate/issues/174/invalid-escape-sequence\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2289/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2287", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2287/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2287/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2287/events", "html_url": "https://github.com/ansible-community/molecule/pull/2287", "id": 493419327, "node_id": "MDExOlB1bGxSZXF1ZXN0MzE3NDAyOTE0", "number": 2287, "title": "Pass merged configuration to provisioner playbooks", "user": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tadeboro", "id": 70951, "node_id": "MDQ6VXNlcjcwOTUx", "avatar_url": "https://avatars.githubusercontent.com/u/70951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tadeboro", "html_url": "https://github.com/tadeboro", "followers_url": "https://api.github.com/users/tadeboro/followers", "following_url": "https://api.github.com/users/tadeboro/following{/other_user}", "gists_url": "https://api.github.com/users/tadeboro/gists{/gist_id}", "starred_url": "https://api.github.com/users/tadeboro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tadeboro/subscriptions", "organizations_url": "https://api.github.com/users/tadeboro/orgs", "repos_url": "https://api.github.com/users/tadeboro/repos", "events_url": "https://api.github.com/users/tadeboro/events{/privacy}", "received_events_url": "https://api.github.com/users/tadeboro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-09-13T16:39:44Z", "updated_at": "2020-02-17T15:19:04Z", "closed_at": "2019-09-14T08:32:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2287", "html_url": "https://github.com/ansible-community/molecule/pull/2287", "diff_url": "https://github.com/ansible-community/molecule/pull/2287.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2287.patch", "merged_at": "2019-09-14T08:32:12Z"}, "body": "Up until now, molecule_yml variable in create/destroy playbooks contained only values from the scenario molecule YAML file. This made it a bit awkward to share common platforms definitions in different scenarios.\r\n\r\nChanges in this commit replace the direct access to the scenario molecule configuration with the merged one. When the inventory and Ansible configuration files are written to the disk, merged\r\nconfiguration is also stored in the ephemeral directory of the scenario currently being acted upon.\r\n\r\n\r\nNote: This is a simpler implementation of #2193 and should fix #1423 \r\n\r\n#### PR Type\r\n\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2287/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 1}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2287/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2279", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2279/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2279/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2279/events", "html_url": "https://github.com/ansible-community/molecule/issues/2279", "id": 491572116, "node_id": "MDU6SXNzdWU0OTE1NzIxMTY=", "number": 2279, "title": "role template should not use \"role:\" block", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, {"login": "cloudnull", "id": 2066292, "node_id": "MDQ6VXNlcjIwNjYyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2066292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cloudnull", "html_url": "https://github.com/cloudnull", "followers_url": "https://api.github.com/users/cloudnull/followers", "following_url": "https://api.github.com/users/cloudnull/following{/other_user}", "gists_url": "https://api.github.com/users/cloudnull/gists{/gist_id}", "starred_url": "https://api.github.com/users/cloudnull/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cloudnull/subscriptions", "organizations_url": "https://api.github.com/users/cloudnull/orgs", "repos_url": "https://api.github.com/users/cloudnull/repos", "events_url": "https://api.github.com/users/cloudnull/events{/privacy}", "received_events_url": "https://api.github.com/users/cloudnull/received_events", "type": "User", "site_admin": false}, {"login": "LukeShortCloud", "id": 10150374, "node_id": "MDQ6VXNlcjEwMTUwMzc0", "avatar_url": "https://avatars.githubusercontent.com/u/10150374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LukeShortCloud", "html_url": "https://github.com/LukeShortCloud", "followers_url": "https://api.github.com/users/LukeShortCloud/followers", "following_url": "https://api.github.com/users/LukeShortCloud/following{/other_user}", "gists_url": "https://api.github.com/users/LukeShortCloud/gists{/gist_id}", "starred_url": "https://api.github.com/users/LukeShortCloud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LukeShortCloud/subscriptions", "organizations_url": "https://api.github.com/users/LukeShortCloud/orgs", "repos_url": "https://api.github.com/users/LukeShortCloud/repos", "events_url": "https://api.github.com/users/LukeShortCloud/events{/privacy}", "received_events_url": "https://api.github.com/users/LukeShortCloud/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-09-10T09:58:24Z", "updated_at": "2019-09-11T16:07:22Z", "closed_at": "2019-09-11T16:07:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Role template should not use \"role:\" block because is harder to maintain than the newer task `include_role`.\r\n\r\nNote: patches welcomed, this should be a easy to implement first time contribution.\r\n\r\nUse UP/DOWN thumbs to vote for this change.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2279/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2279/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2275", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2275/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2275/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2275/events", "html_url": "https://github.com/ansible-community/molecule/issues/2275", "id": 490695875, "node_id": "MDU6SXNzdWU0OTA2OTU4NzU=", "number": 2275, "title": "CHANGELOG.rst missing 2.22 entries", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-09-08T00:51:36Z", "updated_at": "2019-10-25T23:13:32Z", "closed_at": "2019-10-25T23:13:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Everything is being stacked in the \"unreleased\" section now and the last major release section was the 2.20 release. We're already at the 2.22 now and it is not reflected in the change log entry file. We should fix that before we're moving off to the 3.0 release.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2275/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2271", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2271/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2271/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2271/events", "html_url": "https://github.com/ansible-community/molecule/pull/2271", "id": 489472834, "node_id": "MDExOlB1bGxSZXF1ZXN0MzE0Mjg0MDgz", "number": 2271, "title": "ec2: per-platform ansible_connection overrides and win password lookup", "user": {"login": "troyready", "id": 1806418, "node_id": "MDQ6VXNlcjE4MDY0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1806418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/troyready", "html_url": "https://github.com/troyready", "followers_url": "https://api.github.com/users/troyready/followers", "following_url": "https://api.github.com/users/troyready/following{/other_user}", "gists_url": "https://api.github.com/users/troyready/gists{/gist_id}", "starred_url": "https://api.github.com/users/troyready/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/troyready/subscriptions", "organizations_url": "https://api.github.com/users/troyready/orgs", "repos_url": "https://api.github.com/users/troyready/repos", "events_url": "https://api.github.com/users/troyready/events{/privacy}", "received_events_url": "https://api.github.com/users/troyready/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-09-05T00:52:17Z", "updated_at": "2020-02-17T16:32:39Z", "closed_at": "2019-09-11T16:05:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2271", "html_url": "https://github.com/ansible-community/molecule/pull/2271", "diff_url": "https://github.com/ansible-community/molecule/pull/2271.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2271.patch", "merged_at": "2019-09-11T16:05:27Z"}, "body": "#### PR Type\r\n\r\n- Feature Pull Request\r\n\r\n#### Overview\r\n\r\nTo provision Linux & Windows hosts simultaneously, the same connection_options can't be shared on the provisioner. This PR allows provisioner connection_options to be customized per-platform.\r\n\r\nAdditionally, if the winrm connection is used on an EC2 instance and a password isn't supplied. the password will be retrieved automatically via boto3 (decryption logic copied from ec2_win_password module)\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2271/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2270", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2270/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2270/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2270/events", "html_url": "https://github.com/ansible-community/molecule/pull/2270", "id": 489262151, "node_id": "MDExOlB1bGxSZXF1ZXN0MzE0MTE4ODU2", "number": 2270, "title": "Do not prune when --destroy=never", "user": {"login": "seandst", "id": 441252, "node_id": "MDQ6VXNlcjQ0MTI1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/441252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seandst", "html_url": "https://github.com/seandst", "followers_url": "https://api.github.com/users/seandst/followers", "following_url": "https://api.github.com/users/seandst/following{/other_user}", "gists_url": "https://api.github.com/users/seandst/gists{/gist_id}", "starred_url": "https://api.github.com/users/seandst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seandst/subscriptions", "organizations_url": "https://api.github.com/users/seandst/orgs", "repos_url": "https://api.github.com/users/seandst/repos", "events_url": "https://api.github.com/users/seandst/events{/privacy}", "received_events_url": "https://api.github.com/users/seandst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-04T16:18:50Z", "updated_at": "2020-02-17T16:32:51Z", "closed_at": "2019-09-06T14:18:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2270", "html_url": "https://github.com/ansible-community/molecule/pull/2270", "diff_url": "https://github.com/ansible-community/molecule/pull/2270.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2270.patch", "merged_at": "2019-09-06T14:18:02Z"}, "body": "Scenarios were incorrectly being pruned due to 'destroy' being in a\r\nscenario sequence, as the prune logic did not take into account whether\r\n'--destroy=never' was specified in the command-line arguments.\r\n\r\nTests have also been added to cover this case. The existing tests\r\nrelated to the prune logic only covered the case where a sequence step\r\nexited abnormally.\r\n\r\nFixes #2260 ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2270/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2265", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2265/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2265/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2265/events", "html_url": "https://github.com/ansible-community/molecule/pull/2265", "id": 487766010, "node_id": "MDExOlB1bGxSZXF1ZXN0MzEyOTUzMzI3", "number": 2265, "title": "Informs of the DOCKER_HOST environment variable with the Docker driver.", "user": {"login": "flowgunso", "id": 1887494, "node_id": "MDQ6VXNlcjE4ODc0OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1887494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flowgunso", "html_url": "https://github.com/flowgunso", "followers_url": "https://api.github.com/users/flowgunso/followers", "following_url": "https://api.github.com/users/flowgunso/following{/other_user}", "gists_url": "https://api.github.com/users/flowgunso/gists{/gist_id}", "starred_url": "https://api.github.com/users/flowgunso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flowgunso/subscriptions", "organizations_url": "https://api.github.com/users/flowgunso/orgs", "repos_url": "https://api.github.com/users/flowgunso/repos", "events_url": "https://api.github.com/users/flowgunso/events{/privacy}", "received_events_url": "https://api.github.com/users/flowgunso/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-08-31T12:36:45Z", "updated_at": "2020-02-17T16:37:18Z", "closed_at": "2019-09-12T15:48:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2265", "html_url": "https://github.com/ansible-community/molecule/pull/2265", "diff_url": "https://github.com/ansible-community/molecule/pull/2265.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2265.patch", "merged_at": "2019-09-12T15:48:36Z"}, "body": "Signed-off-by: flow.gunso <flow.gunso@gmail.com>\r\n\r\nAdd a note to the Docker driver documentation to inform that the DOCKER_HOST environment variable can be used to customize which Docker daemon Molecule uses.\r\n\r\nThe `docker` binary is still required on the machine that runs Molecule even when using a remote Docker instance, otherwise Molecule fails.\r\n\r\n#### PR Type\r\n\r\n- Docs Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2265/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2265/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2263", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2263/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2263/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2263/events", "html_url": "https://github.com/ansible-community/molecule/pull/2263", "id": 487590529, "node_id": "MDExOlB1bGxSZXF1ZXN0MzEyODIyNDQw", "number": 2263, "title": "Resolve pytest deprecation warnings", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 0, "created_at": "2019-08-30T17:20:17Z", "updated_at": "2020-02-17T16:33:34Z", "closed_at": "2019-08-31T08:48:46Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2263", "html_url": "https://github.com/ansible-community/molecule/pull/2263", "diff_url": "https://github.com/ansible-community/molecule/pull/2263.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2263.patch", "merged_at": "2019-08-31T08:48:46Z"}, "body": "Adopts newer calling convention in pytest so we no longer get warnings.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2263/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2262", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2262/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2262/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2262/events", "html_url": "https://github.com/ansible-community/molecule/issues/2262", "id": 487432577, "node_id": "MDU6SXNzdWU0ODc0MzI1Nzc=", "number": 2262, "title": "Use build.args instead of buildargs in molecule.yml", "user": {"login": "phibid", "id": 43341255, "node_id": "MDQ6VXNlcjQzMzQxMjU1", "avatar_url": "https://avatars.githubusercontent.com/u/43341255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phibid", "html_url": "https://github.com/phibid", "followers_url": "https://api.github.com/users/phibid/followers", "following_url": "https://api.github.com/users/phibid/following{/other_user}", "gists_url": "https://api.github.com/users/phibid/gists{/gist_id}", "starred_url": "https://api.github.com/users/phibid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phibid/subscriptions", "organizations_url": "https://api.github.com/users/phibid/orgs", "repos_url": "https://api.github.com/users/phibid/repos", "events_url": "https://api.github.com/users/phibid/events{/privacy}", "received_events_url": "https://api.github.com/users/phibid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-30T11:24:16Z", "updated_at": "2019-08-30T15:46:49Z", "closed_at": "2019-08-30T15:46:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.8.2\r\n  config file = /home/my_user/.ansible.cfg\r\n  configured module search path = [u'/home/my_user/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Jun 20 2019, 20:27:34) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\nmolecule, version 3.0a1.dev3+gaa438bb\r\n```\r\n\r\nMolecule installation method:source\r\nAnsible installation method: OS package\r\n\r\nI need to specify some proxy parameters in molecule.yml as showed below\r\n\r\n```\r\nplatforms:\r\n  - name: instance\r\n    image: centos:7\r\n    buildargs:\r\n      http_proxy: http://XX.YY.ZZ.WW:8080\r\n      https_proxy: http://XX.YY.ZZ.WW:8080\r\n```\r\n\r\nThis is perfectly working, however I have a warning while executing the molecule scenario :\r\n\r\n```\r\n [WARNING]: Please specify build.args instead of buildargs. The buildargs\r\noption has been renamed and will be removed in Ansible 2.12.\r\n```\r\n\r\nWould it be possible to adapt molecule to have build.args to be used ?\r\n\r\nThanks !", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2262/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2262/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2260", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2260/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2260/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2260/events", "html_url": "https://github.com/ansible-community/molecule/issues/2260", "id": 487343453, "node_id": "MDU6SXNzdWU0ODczNDM0NTM=", "number": 2260, "title": "molecule does not honour --destroy=never and prunes ephemeral data anyway (appeared after #1739)", "user": {"login": "eceglov", "id": 7324836, "node_id": "MDQ6VXNlcjczMjQ4MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/7324836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eceglov", "html_url": "https://github.com/eceglov", "followers_url": "https://api.github.com/users/eceglov/followers", "following_url": "https://api.github.com/users/eceglov/following{/other_user}", "gists_url": "https://api.github.com/users/eceglov/gists{/gist_id}", "starred_url": "https://api.github.com/users/eceglov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eceglov/subscriptions", "organizations_url": "https://api.github.com/users/eceglov/orgs", "repos_url": "https://api.github.com/users/eceglov/repos", "events_url": "https://api.github.com/users/eceglov/events{/privacy}", "received_events_url": "https://api.github.com/users/eceglov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-30T07:56:53Z", "updated_at": "2019-09-06T14:18:09Z", "closed_at": "2019-09-06T14:18:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.7.10\r\n  config file = None\r\n  configured module search path = [u'/home/jenkins/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Jun 20 2019, 20:27:34) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nN/A\r\n\r\n# Desired Behaviour\r\n\r\nWhen running _molecule test --destroy=never_ do not prune molecule ephemeral data, even when _destroy_ stage is a part of a scenario.\r\n\r\n# Actual Behaviour\r\n\r\nMolecule configuration excerpt:\r\n```\r\nscenario:\r\n  name: default\r\n  test_sequence:\r\n  - dependency\r\n  - syntax\r\n  - lint\r\n  - create\r\n  - converge\r\n  - idempotence\r\n  - verify\r\n  - destroy\r\n```\r\n\r\n_molecule test --destroy=never --all_ does not honour _--destroy=never_ and prunes ephemeral data when _destroy_ is a part of a scenario in the molecule configuration.\r\n\r\nOutput excerpt:\r\n```\r\nVerifier completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nSkipping, '--destroy=never' requested.\r\n--> Pruning extra files from scenario ephemeral directory\r\n```\r\n\r\nDescribed behaviour contradicts the purpose of NEVER destroying an environment parameter regardless of what stages were defined in the scenario.\r\nIn fact, the environment is left intact, though ephemeral data is gone, hence environment becomes unattended and it's not possible to destroy it later.\r\n\r\n_molecule test --destroy=never --all_\r\n_molecule destroy --all_ <-- will not destroy the environment\r\n\r\n\r\nPrevious molecule version works as expected:\r\n```\r\nansible 2.7.10\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Jun 20 2019, 20:27:34) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nOutput excerpt\r\n```\r\nVerifier completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nSkipping, '--destroy=never' requested.\r\n```\r\n\r\nPruning based on presence of _destroy_ stage in the molecule configuration appeared after https://github.com/ansible/molecule/pull/1739\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2260/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2260/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2256", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2256/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2256/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2256/events", "html_url": "https://github.com/ansible-community/molecule/issues/2256", "id": 486893992, "node_id": "MDU6SXNzdWU0ODY4OTM5OTI=", "number": 2256, "title": "Unable to disable colored output", "user": {"login": "adam-dej", "id": 2822585, "node_id": "MDQ6VXNlcjI4MjI1ODU=", "avatar_url": "https://avatars.githubusercontent.com/u/2822585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adam-dej", "html_url": "https://github.com/adam-dej", "followers_url": "https://api.github.com/users/adam-dej/followers", "following_url": "https://api.github.com/users/adam-dej/following{/other_user}", "gists_url": "https://api.github.com/users/adam-dej/gists{/gist_id}", "starred_url": "https://api.github.com/users/adam-dej/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adam-dej/subscriptions", "organizations_url": "https://api.github.com/users/adam-dej/orgs", "repos_url": "https://api.github.com/users/adam-dej/repos", "events_url": "https://api.github.com/users/adam-dej/events{/privacy}", "received_events_url": "https://api.github.com/users/adam-dej/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-29T11:11:21Z", "updated_at": "2020-03-13T19:59:59Z", "closed_at": "2020-02-15T18:58:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.3\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n\r\nDetail any linters or test runners used:\r\n\r\n- none\r\n\r\n# Desired Behavior\r\n\r\nColors should be stripped from output if `PY_COLORS=0` is defined or if the output is redirected to a file.\r\n\r\n```shell\r\n$ PY_COLORS=0 molecule list > some_file\r\n$ xxd some_file                        \r\n00000000: 2d2d 3e20 5661 6c69 6461 7469 6e67 2073  --> Validating s\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nControl characters defining colors are not stripped.\r\n\r\n```shell\r\n$ PY_COLORS=0 molecule list > some_file\r\n$ xxd some_file \r\n00000000: 2d2d 3e20 1b5b 3336 6d56 616c 6964 6174  --> .[36mValidat\r\n```\r\nIf I rollback changes introduced in fecf50b7e4f2bc19d3981b645b3c9c267efc95a9, color stripping works as expected.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2253", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2253/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2253/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2253/events", "html_url": "https://github.com/ansible-community/molecule/pull/2253", "id": 486840695, "node_id": "MDExOlB1bGxSZXF1ZXN0MzEyMjIyNDc1", "number": 2253, "title": "Makes driver loading more resilient", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 3, "created_at": "2019-08-29T09:22:31Z", "updated_at": "2019-10-25T19:23:52Z", "closed_at": "2019-08-31T08:48:21Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2253", "html_url": "https://github.com/ansible-community/molecule/pull/2253", "diff_url": "https://github.com/ansible-community/molecule/pull/2253.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2253.patch", "merged_at": "2019-08-31T08:48:21Z"}, "body": "Prevents molecule execution failure when a driver fails to load. New code will display the loading failure but continue to load the other drivers.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2253/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2253/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2243", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2243/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2243/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2243/events", "html_url": "https://github.com/ansible-community/molecule/pull/2243", "id": 484678905, "node_id": "MDExOlB1bGxSZXF1ZXN0MzEwNTA3NTIz", "number": 2243, "title": "azure: assure we respect locally configured region", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 0, "created_at": "2019-08-23T19:29:22Z", "updated_at": "2020-02-17T16:34:22Z", "closed_at": "2019-08-25T08:15:11Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2243", "html_url": "https://github.com/ansible-community/molecule/pull/2243", "diff_url": "https://github.com/ansible-community/molecule/pull/2243.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2243.patch", "merged_at": "2019-08-25T08:15:11Z"}, "body": "Fix bug where test execution would fail if resource group already\r\nexisted in another zone.\r\n\r\nAlso assures that allocated resources are released.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2243/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2243/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2240", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2240/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2240/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2240/events", "html_url": "https://github.com/ansible-community/molecule/issues/2240", "id": 484054971, "node_id": "MDU6SXNzdWU0ODQwNTQ5NzE=", "number": 2240, "title": "I though that ansible_ssh_user was deprecated ?", "user": {"login": "mehdicopter", "id": 4732065, "node_id": "MDQ6VXNlcjQ3MzIwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4732065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mehdicopter", "html_url": "https://github.com/mehdicopter", "followers_url": "https://api.github.com/users/mehdicopter/followers", "following_url": "https://api.github.com/users/mehdicopter/following{/other_user}", "gists_url": "https://api.github.com/users/mehdicopter/gists{/gist_id}", "starred_url": "https://api.github.com/users/mehdicopter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mehdicopter/subscriptions", "organizations_url": "https://api.github.com/users/mehdicopter/orgs", "repos_url": "https://api.github.com/users/mehdicopter/repos", "events_url": "https://api.github.com/users/mehdicopter/events{/privacy}", "received_events_url": "https://api.github.com/users/mehdicopter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-22T15:14:06Z", "updated_at": "2020-02-01T19:09:29Z", "closed_at": "2020-02-01T19:09:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.8.4\r\n\r\nmolecule --version\r\nmolecule, version 2.22\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI would like to use one scenario for AWS but using multiple platforms.\r\nBut even by supplying `ansible_user`, it is using the `ssh_user` from `create.yml` which is `ubuntu`.\r\n\r\n# Actual Behaviour\r\n\r\nMy actual config:\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: ec2\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: ec2-centos6\r\n    image: ami-07fa74e425f2abf29\r\n    instance_type: t2.micro\r\n    vpc_subnet_id: subnet-d25fb0b8\r\n    groups:\r\n      - centos\r\n  - name: ec2-centos7\r\n    image: ami-04cf43aca3e6f3de3\r\n    instance_type: t2.micro\r\n    vpc_subnet_id: subnet-d25fb0b8\r\n    groups:\r\n      - centos\r\nprovisioner:\r\n  name: ansible\r\n  config_options:\r\n    defaults:\r\n      hash_behaviour: merge\r\n  inventory:\r\n    group_vars:\r\n      centos:\r\n        ansible_user: centos\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\nNow when I run this:\r\n```\r\nmolecule --debug converge --scenario-name aws\r\n[...]\r\nTASK [Gathering Facts] *********************************************************\r\n    task path: /Users/mmahfoudi/Github.mehdicopter/ansible-role-epel/molecule/aws/playbook.yml:2\r\n    <18.194.219.241> ESTABLISH SSH CONNECTION FOR USER: ubuntu\r\n    <18.194.219.241> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=22 -o 'IdentityFile=\"/Users/mmahfoudi/.cache/molecule/ansible-role-epel/aws/ssh_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"ubuntu\"' -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o IdentitiesOnly=yes -o StrictHostKeyChecking=no -o ControlPath=/Users/mmahfoudi/.ansible/cp/%h-%p-%r x.x.x.x '/bin/sh -c '\"'\"'echo ~ubuntu && sleep 0'\"'\"''\r\n    <x.x.x.x> ESTABLISH SSH CONNECTION FOR USER: ubuntu\r\n    <x.x.x.x> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=22 -o 'IdentityFile=\"/Users/mmahfoudi/.cache/molecule/ansible-role-epel/aws/ssh_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User=\"ubuntu\"' -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o IdentitiesOnly=yes -o StrictHostKeyChecking=no -o ControlPath=/Users/mmahfoudi/.ansible/cp/%h-%p-%r x.x.x.x '/bin/sh -c '\"'\"'echo ~ubuntu && sleep 0'\"'\"''\r\n    <x.x.x.x> (255, '', \"Warning: Permanently added 'X.X.X.X' (RSA) to the list of known hosts.\\r\\nubuntu@x.x.x.x: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).\\r\\n\")\r\n    <x.x.x.x> (255, '', \"Warning: Permanently added 'x.x.x.x' (ECDSA) to the list of known hosts.\\r\\nubuntu@x.x.x.x: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).\\r\\n\")\r\n    fatal: [ec2-centos6]: UNREACHABLE! => {\r\n        \"changed\": false,\r\n        \"msg\": \"Failed to connect to the host via ssh: Warning: Permanently added 'x.x.x.x' (RSA) to the list of known hosts.\\r\\nubuntu@x.x.x.x: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).\",\r\n        \"unreachable\": true\r\n    }\r\n    fatal: [ec2-centos7]: UNREACHABLE! => {\r\n        \"changed\": false,\r\n        \"msg\": \"Failed to connect to the host via ssh: Warning: Permanently added 'x.x.x.x' (ECDSA) to the list of known hosts.\\r\\nubuntu@x.x.x.x: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).\",\r\n        \"unreachable\": true\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n    ec2-centos6                : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0\r\n    ec2-centos7                : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0\r\n\r\nERROR:\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2240/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2240/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2237", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2237/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2237/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2237/events", "html_url": "https://github.com/ansible-community/molecule/issues/2237", "id": 483499688, "node_id": "MDU6SXNzdWU0ODM0OTk2ODg=", "number": 2237, "title": "EC2 AMI Filtering based on Owner and Name (glob) Fully Documented", "user": {"login": "sblack4", "id": 15880760, "node_id": "MDQ6VXNlcjE1ODgwNzYw", "avatar_url": "https://avatars.githubusercontent.com/u/15880760?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sblack4", "html_url": "https://github.com/sblack4", "followers_url": "https://api.github.com/users/sblack4/followers", "following_url": "https://api.github.com/users/sblack4/following{/other_user}", "gists_url": "https://api.github.com/users/sblack4/gists{/gist_id}", "starred_url": "https://api.github.com/users/sblack4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sblack4/subscriptions", "organizations_url": "https://api.github.com/users/sblack4/orgs", "repos_url": "https://api.github.com/users/sblack4/repos", "events_url": "https://api.github.com/users/sblack4/events{/privacy}", "received_events_url": "https://api.github.com/users/sblack4/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-08-21T15:40:31Z", "updated_at": "2019-10-26T17:31:14Z", "closed_at": "2019-10-26T17:31:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n\r\n# Molecule and Ansible details\r\n```\r\nansible --version && molecule --version                                                                                                          \r\n\r\nansible 2.8.1\r\n  config file = None\r\n  configured module search path = ['/Users/sblack/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.4 (default, Jul  9 2019, 18:13:23) [Clang 10.0.1 (clang-1001.0.46.4)]\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n- `yamlint`\r\n- `ansible-lint`\r\n\r\n\r\n# Desired Behavior\r\nThe [ec2 configuration docs](https://molecule.readthedocs.io/en/stable/configuration.html#ec2) give an example of selecting the image ID via `image_owner` and `image_name` but this behavior does not work \"out of the box\" in molecule. \r\n\r\nExample from docs:\r\n```\r\ndriver:\r\n  name: ec2\r\nplatforms:\r\n  - name: instance\r\n    image_owner: 099720109477\r\n    image_name: ubuntu/images/hvm-ssd/ubuntu-bionic-18.04-amd64-server-20190320\r\n    instance_type: t2.micro\r\n    vpc_subnet_id: subnet-1cb17175\r\n```\r\n\r\nIt seems that in order for this to work one would need to add a task to look up the image id. I'm attempting to do so with the [ec2_ami_facts](https://docs.ansible.com/ansible/latest/modules/ec2_ami_facts_module.html#ec2-ami-facts-module) module.\r\n\r\nI was wondering if this was already documented somewhere. If so a link to it in the documentation would be helpful. \r\n\r\n\r\n# Actual Behaviour\r\n\r\nResulting Bug (path partially redacted and lines wrapped for readability): \r\n```\r\n    TASK [Create molecule instance(s)] *********************************************\r\n    task path: **************************/jetty/molecule/default/create.yml:62\r\n    fatal: [localhost]: FAILED! => {\r\n        \"msg\": \"The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'image'\r\n\r\nThe error appears to be in '**************************/jetty/molecule/default/create.yml': line 62, column 7, but may\r\nbe elsewhere in the file depending on the exact syntax problem.\r\n\r\nThe offending line appears to be:\r\n\r\n\r\n    - name: Create molecule instance(s)\r\n      ^ here\r\n\"\r\n    }\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2237/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2236", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2236/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2236/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2236/events", "html_url": "https://github.com/ansible-community/molecule/pull/2236", "id": 482769923, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA4OTc1NzQz", "number": 2236, "title": "Network mode is now used during build", "user": {"login": "bgavrilMS", "id": 12273384, "node_id": "MDQ6VXNlcjEyMjczMzg0", "avatar_url": "https://avatars.githubusercontent.com/u/12273384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bgavrilMS", "html_url": "https://github.com/bgavrilMS", "followers_url": "https://api.github.com/users/bgavrilMS/followers", "following_url": "https://api.github.com/users/bgavrilMS/following{/other_user}", "gists_url": "https://api.github.com/users/bgavrilMS/gists{/gist_id}", "starred_url": "https://api.github.com/users/bgavrilMS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bgavrilMS/subscriptions", "organizations_url": "https://api.github.com/users/bgavrilMS/orgs", "repos_url": "https://api.github.com/users/bgavrilMS/repos", "events_url": "https://api.github.com/users/bgavrilMS/events{/privacy}", "received_events_url": "https://api.github.com/users/bgavrilMS/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-20T10:12:32Z", "updated_at": "2020-02-17T16:37:30Z", "closed_at": "2019-08-20T12:55:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2236", "html_url": "https://github.com/ansible-community/molecule/pull/2236", "diff_url": "https://github.com/ansible-community/molecule/pull/2236.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2236.patch", "merged_at": "2019-08-20T12:55:40Z"}, "body": "Signed-off-by: Bogdan Gavril <bogavril@microsoft.com>\r\n\r\nNetwork mode not taken into consideration in build section\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2236/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2236/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2234", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2234/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2234/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2234/events", "html_url": "https://github.com/ansible-community/molecule/pull/2234", "id": 482232585, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA4NTQ1OTUw", "number": 2234, "title": "Allow configurable Azure Region", "user": {"login": "bgavrilMS", "id": 12273384, "node_id": "MDQ6VXNlcjEyMjczMzg0", "avatar_url": "https://avatars.githubusercontent.com/u/12273384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bgavrilMS", "html_url": "https://github.com/bgavrilMS", "followers_url": "https://api.github.com/users/bgavrilMS/followers", "following_url": "https://api.github.com/users/bgavrilMS/following{/other_user}", "gists_url": "https://api.github.com/users/bgavrilMS/gists{/gist_id}", "starred_url": "https://api.github.com/users/bgavrilMS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bgavrilMS/subscriptions", "organizations_url": "https://api.github.com/users/bgavrilMS/orgs", "repos_url": "https://api.github.com/users/bgavrilMS/repos", "events_url": "https://api.github.com/users/bgavrilMS/events{/privacy}", "received_events_url": "https://api.github.com/users/bgavrilMS/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-19T10:32:38Z", "updated_at": "2020-02-17T16:34:37Z", "closed_at": "2019-08-19T13:24:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2234", "html_url": "https://github.com/ansible-community/molecule/pull/2234", "diff_url": "https://github.com/ansible-community/molecule/pull/2234.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2234.patch", "merged_at": "2019-08-19T13:24:24Z"}, "body": "Signed-off-by: Bogdan Gavril <bogavril@microsoft.com>\r\n\r\nAzure Region used to hardcoded to West US. While this is a good default, it should be configurable to any of the 50+ Azure Regions \r\nhttps://azure.microsoft.com/en-us/global-infrastructure/regions/ \r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2234/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2231", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2231/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2231/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2231/events", "html_url": "https://github.com/ansible-community/molecule/issues/2231", "id": 481922038, "node_id": "MDU6SXNzdWU0ODE5MjIwMzg=", "number": 2231, "title": "ValueError: invalid literal for int() with base 10: 'post20190705'", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-17T20:10:55Z", "updated_at": "2019-08-18T12:20:58Z", "closed_at": "2019-08-18T12:20:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems that code from setup.py is broken as it makes the wrong assumption that `setuptools.__version__.` will always return only integers:\r\n\r\nhttps://github.com/ansible/molecule/blob/master/setup.py#L36\r\n\r\n```\r\n        RUNTIME_SETUPTOOLS_VERSION = tuple(map(int, setuptools.__version__.split('.')))\r\n    ValueError: invalid literal for int() with base 10: 'post20190705'\r\n```\r\n\r\nAs seen here the minor version can be a non numeric value. The quick workaround is to only look at the fist two elements.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2231/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2229", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2229/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2229/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2229/events", "html_url": "https://github.com/ansible-community/molecule/pull/2229", "id": 481908454, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA4MzA2NzIy", "number": 2229, "title": "Fix container building", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": false, "assignee": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-17T17:29:44Z", "updated_at": "2019-08-30T09:19:08Z", "closed_at": "2019-08-23T14:30:30Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2229", "html_url": "https://github.com/ansible-community/molecule/pull/2229", "diff_url": "https://github.com/ansible-community/molecule/pull/2229.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2229.patch", "merged_at": "2019-08-23T14:30:30Z"}, "body": "* fixed bug with invalid docker tag name for untagged commits\r\n* assured docker runs with network host to have internet access\r\n* removed unneeded sudo which prevented use on MacOS\r\n* assured we run tox -e docker-build on Travis to avoid regressions\r\n* assured we also upload from Travis on deploy\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2229/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2229/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2227", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2227/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2227/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2227/events", "html_url": "https://github.com/ansible-community/molecule/issues/2227", "id": 481867427, "node_id": "MDU6SXNzdWU0ODE4Njc0Mjc=", "number": 2227, "title": "quay.io/ansible/molecule DIND container is missing some crucial packages", "user": {"login": "jamesla", "id": 5243178, "node_id": "MDQ6VXNlcjUyNDMxNzg=", "avatar_url": "https://avatars.githubusercontent.com/u/5243178?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesla", "html_url": "https://github.com/jamesla", "followers_url": "https://api.github.com/users/jamesla/followers", "following_url": "https://api.github.com/users/jamesla/following{/other_user}", "gists_url": "https://api.github.com/users/jamesla/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesla/subscriptions", "organizations_url": "https://api.github.com/users/jamesla/orgs", "repos_url": "https://api.github.com/users/jamesla/repos", "events_url": "https://api.github.com/users/jamesla/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-08-17T09:20:57Z", "updated_at": "2019-09-15T20:56:35Z", "closed_at": "2019-09-15T20:56:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\nThe DIND docker image quay.io/ansible/molecule container is missing some crucial packages which are required for pretty much core functionality of molecule.\r\n\r\n1. Git  - required for ansible-galaxy to install private ansible roles\r\n2. Rubocop - a linter used by molecule is broken\r\n3. inspec - one of the test frameworks used by molecule\r\n4. ansible 2.8 - only 2.7 is installed and 2.8 brought out a bunch of new modules\r\n\r\nThis dockerfile used to be kept inside this project back in the retr0h days but I think it's gone now. I am happy to send a PR but where is the dockerfile hosted now?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2227/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2227/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2225", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2225/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2225/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2225/events", "html_url": "https://github.com/ansible-community/molecule/issues/2225", "id": 481216225, "node_id": "MDU6SXNzdWU0ODEyMTYyMjU=", "number": 2225, "title": "quay.io master tag points to latest stable instead of pre-release", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 864009245, "node_id": "MDU6TGFiZWw4NjQwMDkyNDU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/upstream-bug", "name": "upstream-bug", "color": "960a21", "default": false, "description": ""}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": false, "assignee": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-15T15:50:42Z", "updated_at": "2020-10-23T16:45:15Z", "closed_at": "2020-10-23T16:45:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "At this moment there is no mobile tag that can used to point latest development version of molecule because both `master` and `latest` point to last release.\r\n\r\nPre-releases were published but the user using them are forced to manually update versions for each of them.\r\n\r\nhttps://quay.io/repository/ansible/molecule?tab=tags\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2225/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2224", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2224/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2224/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2224/events", "html_url": "https://github.com/ansible-community/molecule/issues/2224", "id": 481051539, "node_id": "MDU6SXNzdWU0ODEwNTE1Mzk=", "number": 2224, "title": "Molecule idempotence test is not working during standalone execution via Docker", "user": {"login": "silazare", "id": 20660955, "node_id": "MDQ6VXNlcjIwNjYwOTU1", "avatar_url": "https://avatars.githubusercontent.com/u/20660955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/silazare", "html_url": "https://github.com/silazare", "followers_url": "https://api.github.com/users/silazare/followers", "following_url": "https://api.github.com/users/silazare/following{/other_user}", "gists_url": "https://api.github.com/users/silazare/gists{/gist_id}", "starred_url": "https://api.github.com/users/silazare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/silazare/subscriptions", "organizations_url": "https://api.github.com/users/silazare/orgs", "repos_url": "https://api.github.com/users/silazare/repos", "events_url": "https://api.github.com/users/silazare/events{/privacy}", "received_events_url": "https://api.github.com/users/silazare/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-08-15T08:37:06Z", "updated_at": "2020-02-03T22:53:46Z", "closed_at": "2020-02-03T22:53:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.9\r\nmolecule 2.20.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- Using Molecule from Docker image: `quay.io/ansible/molecule:2.20`\r\n\r\nAnsible installation method (one of):\r\n\r\n- Using Ansible from Docker image: `quay.io/ansible/molecule:2.20`\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI'm executing molecule tests by leveraging dind as from docs example.\r\nIdempotence scenario cannot find converged instances if I run it as standalone step. \r\nIs there are kind of limitation for this for dind execution? \r\nDebug also shows not so much information.\r\nIf I run converge+idempotence scenarious at the same run, all is working OK.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n~/test-role$ docker run --rm -it \\\r\n>     -v \"$(pwd)\":/tmp/$(basename \"${PWD}\"):ro \\\r\n>     -v /var/run/docker.sock:/var/run/docker.sock \\\r\n>     -w /tmp/$(basename \"${PWD}\") \\\r\n>     quay.io/ansible/molecule:2.20 \\\r\n>     molecule create\r\n--> Validating schema /tmp/test-role/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 create\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\n\r\n    PLAY [Create] ******************************************************************\r\n\r\n    TASK [Log into a Docker registry] **********************************************\r\n    skipping: [localhost] => (item=None)\r\n\r\n    TASK [Create Dockerfiles from image names] *************************************\r\n    changed: [localhost] => (item=None)\r\n    changed: [localhost]\r\n\r\n    TASK [Discover local Docker images] ********************************************\r\n    ok: [localhost] => (item=None)\r\n    ok: [localhost]\r\n\r\n    TASK [Build an Ansible compatible image] ***************************************\r\n    changed: [localhost] => (item=None)\r\n    changed: [localhost]\r\n\r\n    TASK [Create docker network(s)] ************************************************\r\n\r\n    TASK [Determine the CMD directives] ********************************************\r\n    ok: [localhost] => (item=None)\r\n    ok: [localhost]\r\n\r\n    TASK [Create molecule instance(s)] *********************************************\r\n    changed: [localhost] => (item=None)\r\n    changed: [localhost]\r\n\r\n    TASK [Wait for instance(s) creation to complete] *******************************\r\n    changed: [localhost] => (item=None)\r\n    changed: [localhost]\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=6    changed=4    unreachable=0    failed=0\r\n\r\n\r\n~/test-role$ docker run --rm -it \\\r\n>     -v \"$(pwd)\":/tmp/$(basename \"${PWD}\"):ro \\\r\n>     -v /var/run/docker.sock:/var/run/docker.sock \\\r\n>     -w /tmp/$(basename \"${PWD}\") \\\r\n>     quay.io/ansible/molecule:2.20 \\\r\n>     molecule converge\r\n--> Validating schema /tmp/test-role/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 converge\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'converge'\r\n\r\n    PLAY [Converge] ****************************************************************\r\n\r\n    TASK [Gathering Facts] *********************************************************\r\n    ok: [molecule-host-]\r\n\r\n    TASK [test-role : Ensure test user exists] *************************************\r\n    changed: [molecule-host-]\r\n\r\n    PLAY RECAP *********************************************************************\r\n    molecule-host-             : ok=2    changed=1    unreachable=0    failed=0\r\n\r\n\r\n~/test-role$ docker run --rm -it \\\r\n>     -v \"$(pwd)\":/tmp/$(basename \"${PWD}\"):ro \\\r\n>     -v /var/run/docker.sock:/var/run/docker.sock \\\r\n>     -w /tmp/$(basename \"${PWD}\") \\\r\n>     quay.io/ansible/molecule:2.20 \\\r\n>     molecule --debug idempotence\r\n--> Validating schema /tmp/test-role/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 idempotence\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'idempotence'\r\nERROR: Instances not converged.  Please converge instances first.\r\n\r\n~/test-role$ docker ps\r\nCONTAINER ID        IMAGE                                                           COMMAND                  CREATED             STATUS              PORTS               NAMES\r\n381ba0afe7e9        molecule_local/centos:latest                                    \"/sbin/init\"             2 minutes ago       Up 2 minutes                            molecule-host-\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2224/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2217", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2217/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2217/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2217/events", "html_url": "https://github.com/ansible-community/molecule/pull/2217", "id": 478946301, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA1OTU2ODMx", "number": 2217, "title": "Fix floating IP deletion in openstack driver", "user": {"login": "haukebruno", "id": 1809426, "node_id": "MDQ6VXNlcjE4MDk0MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1809426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haukebruno", "html_url": "https://github.com/haukebruno", "followers_url": "https://api.github.com/users/haukebruno/followers", "following_url": "https://api.github.com/users/haukebruno/following{/other_user}", "gists_url": "https://api.github.com/users/haukebruno/gists{/gist_id}", "starred_url": "https://api.github.com/users/haukebruno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haukebruno/subscriptions", "organizations_url": "https://api.github.com/users/haukebruno/orgs", "repos_url": "https://api.github.com/users/haukebruno/repos", "events_url": "https://api.github.com/users/haukebruno/events{/privacy}", "received_events_url": "https://api.github.com/users/haukebruno/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/15", "html_url": "https://github.com/ansible-community/molecule/milestone/15", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/15/labels", "id": 4218032, "node_id": "MDk6TWlsZXN0b25lNDIxODAzMg==", "number": 15, "title": "2.22", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-04-10T16:34:29Z", "updated_at": "2019-08-22T12:16:35Z", "due_on": "2019-06-28T07:00:00Z", "closed_at": "2019-08-22T12:16:35Z"}, "comments": 3, "created_at": "2019-08-09T11:48:34Z", "updated_at": "2020-02-17T16:37:43Z", "closed_at": "2019-08-11T06:26:59Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2217", "html_url": "https://github.com/ansible-community/molecule/pull/2217", "diff_url": "https://github.com/ansible-community/molecule/pull/2217.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2217.patch", "merged_at": "2019-08-11T06:26:59Z"}, "body": "`delete_fip: true` needs to be set in the _destroy_ playbooks rather than in the _create_ ones.\r\n\r\nCurrently the allocated floating IPs won't be released after instance deletion. Under $circumstances this could lead to quota, resource or billing issues inside an OpenStack project.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2217/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2217/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2216", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2216/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2216/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2216/events", "html_url": "https://github.com/ansible-community/molecule/issues/2216", "id": 478919556, "node_id": "MDU6SXNzdWU0Nzg5MTk1NTY=", "number": 2216, "title": "molecule lint does not run dependency", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-09T10:35:49Z", "updated_at": "2019-08-21T11:20:04Z", "closed_at": "2019-08-21T11:20:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems that when you do `molecule lint` you may get different results if you previously run `molecule dependency` or not. In some cases dependency execution before linting is mandatory for it to succeed.\r\n\r\nTo avoid weird user experiences we should make the dependency run implicit.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2216/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2216/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2215", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2215/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2215/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2215/events", "html_url": "https://github.com/ansible-community/molecule/pull/2215", "id": 478913766, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA1OTI5Nzk5", "number": 2215, "title": "Run dependency before lint on test_sequence", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/15", "html_url": "https://github.com/ansible-community/molecule/milestone/15", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/15/labels", "id": 4218032, "node_id": "MDk6TWlsZXN0b25lNDIxODAzMg==", "number": 15, "title": "2.22", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-04-10T16:34:29Z", "updated_at": "2019-08-22T12:16:35Z", "due_on": "2019-06-28T07:00:00Z", "closed_at": "2019-08-22T12:16:35Z"}, "comments": 1, "created_at": "2019-08-09T10:21:31Z", "updated_at": "2020-01-04T11:05:04Z", "closed_at": "2019-08-21T11:20:02Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2215", "html_url": "https://github.com/ansible-community/molecule/pull/2215", "diff_url": "https://github.com/ansible-community/molecule/pull/2215.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2215.patch", "merged_at": "2019-08-21T11:20:02Z"}, "body": "Avoids failure to run linting due to missing dependencies, like ansible modules or roles.\r\n\r\nFixes: #1908\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2215/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2215/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2211", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2211/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2211/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2211/events", "html_url": "https://github.com/ansible-community/molecule/issues/2211", "id": 478139182, "node_id": "MDU6SXNzdWU0NzgxMzkxODI=", "number": 2211, "title": "Winrm not part of ansible runner in molecule 2.20.2", "user": {"login": "christonog", "id": 29683, "node_id": "MDQ6VXNlcjI5Njgz", "avatar_url": "https://avatars.githubusercontent.com/u/29683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christonog", "html_url": "https://github.com/christonog", "followers_url": "https://api.github.com/users/christonog/followers", "following_url": "https://api.github.com/users/christonog/following{/other_user}", "gists_url": "https://api.github.com/users/christonog/gists{/gist_id}", "starred_url": "https://api.github.com/users/christonog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christonog/subscriptions", "organizations_url": "https://api.github.com/users/christonog/orgs", "repos_url": "https://api.github.com/users/christonog/repos", "events_url": "https://api.github.com/users/christonog/events{/privacy}", "received_events_url": "https://api.github.com/users/christonog/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-07T21:05:17Z", "updated_at": "2019-08-19T17:21:49Z", "closed_at": "2019-08-19T17:21:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.1\r\nmolecule 2.20.2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n`pip install molecule --user`\r\n\r\nAnsible installation method (one of):\r\n\r\n`yum -y install https://releases.ansible.com/ansible/rpm/release/epel-7-x86_64/ansible-2.8.1-1.el7.ans.noarch.rpm`\r\n\r\n\r\n# Desired Behavior\r\n\r\nwith molecule 2.20.1\r\n\r\n```\r\n    ============================= test session starts ==============================\r\n    platform linux2 -- Python 2.7.5, pytest-4.6.5, py-1.8.0, pluggy-0.12.0 -- /usr/bin/python2\r\n    using: pytest-4.6.5 pylib-1.8.0\r\n    setuptools registered plugins:\r\n      testinfra-3.0.6 at /usr/lib/python2.7/site-packages/testinfra/plugin.py\r\n    rootdir: /roles/test-windows-config/molecule/windows\r\n    plugins: testinfra-3.0.6\r\ncollected 2 items                                                              \r\n    \r\n    tests/test_default.py::test_ping[ansible://remote_host] PASSED         [ 50%]\r\n    tests/test_default.py::test_user[ansible://remote_host] PASSED         [100%]\r\n    \r\n    =========================== 2 passed in 7.66 seconds ===========================\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nwith molecule 2.20.2\r\n\r\n```\r\ndef get_ansible_host(config, inventory, host, ssh_config=None,\r\n                             ssh_identity_file=None):\r\n            if is_empty_inventory(inventory):\r\n                return testinfra.get_host('local://')\r\n            hostvars = inventory['_meta'].get('hostvars', {}).get(host, {})\r\n            connection = hostvars.get('ansible_connection', 'ssh')\r\n            if connection not in ('ssh', 'local', 'docker', 'lxc', 'lxd'):\r\nwrote pytestdebug information to /roles/test-windows-config/molecule/windows/pytestdebug.log\r\n                raise NotImplementedError(\r\n    >               'unhandled ansible_connection {}'.format(connection))\r\n    E           NotImplementedError: unhandled ansible_connection winrm\r\n    \r\n    /usr/lib/python2.7/site-packages/testinfra/utils/ansible_runner.py:71: NotImplementedError\r\n```\r\n\r\nApologies for the lack of additional details, I was posting this issue and almost all my log output suddenly got lost. If you need more info, I can try and reproduce again. Thanks!", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2211/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2211/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2209", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2209/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2209/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2209/events", "html_url": "https://github.com/ansible-community/molecule/pull/2209", "id": 477538692, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA0ODQ0NDUx", "number": 2209, "title": "Removed obsolete metadata-validation", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1205135639, "node_id": "MDU6TGFiZWwxMjA1MTM1NjM5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/test", "name": "test", "color": "0e8a16", "default": false, "description": "Improvement to quality assurance: CI/CD, testing, building"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/15", "html_url": "https://github.com/ansible-community/molecule/milestone/15", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/15/labels", "id": 4218032, "node_id": "MDk6TWlsZXN0b25lNDIxODAzMg==", "number": 15, "title": "2.22", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-04-10T16:34:29Z", "updated_at": "2019-08-22T12:16:35Z", "due_on": "2019-06-28T07:00:00Z", "closed_at": "2019-08-22T12:16:35Z"}, "comments": 1, "created_at": "2019-08-06T18:48:55Z", "updated_at": "2019-08-07T04:18:30Z", "closed_at": "2019-08-07T04:18:30Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2209", "html_url": "https://github.com/ansible-community/molecule/pull/2209", "diff_url": "https://github.com/ansible-community/molecule/pull/2209.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2209.patch", "merged_at": "2019-08-07T04:18:30Z"}, "body": "Remove tox environment which no longer exists but was still references\r\nin documentation and travis configuration.\r\n\r\nThe same validation is now included in previous build steps.\r\n\r\nThis prevented release of 2.22rc5\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2209/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2207", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2207/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2207/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2207/events", "html_url": "https://github.com/ansible-community/molecule/issues/2207", "id": 477421209, "node_id": "MDU6SXNzdWU0Nzc0MjEyMDk=", "number": 2207, "title": "anyconfig install failure prevents installation of molecule on rhel8", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-06T14:39:25Z", "updated_at": "2019-08-07T04:19:04Z", "closed_at": "2019-08-07T04:18:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Pasted the error here, I will be back to update with more details as I think is likely to be unrelated to molecule itself:\r\n```\r\nException:\r\nTraceback (most recent call last):\r\n  File \"/root/rdo/ansible-role-container-registry/.tox/molecule/lib/python3.6/site-packages/pip/basecommand.py\", line 215, in main\r\n    status = self.run(options, args)\r\n  File \"/root/rdo/ansible-role-container-registry/.tox/molecule/lib/python3.6/site-packages/pip/commands/install.py\", line 342, in run\r\n    prefix=options.prefix_path,\r\n  File \"/root/rdo/ansible-role-container-registry/.tox/molecule/lib/python3.6/site-packages/pip/req/req_set.py\", line 784, in install\r\n    **kwargs\r\n  File \"/root/rdo/ansible-role-container-registry/.tox/molecule/lib/python3.6/site-packages/pip/req/req_install.py\", line 851, in install\r\n    self.move_wheel_files(self.source_dir, root=root, prefix=prefix)\r\n  File \"/root/rdo/ansible-role-container-registry/.tox/molecule/lib/python3.6/site-packages/pip/req/req_install.py\", line 1064, in move_wheel_files\r\n    isolated=self.isolated,\r\n  File \"/root/rdo/ansible-role-container-registry/.tox/molecule/lib/python3.6/site-packages/pip/wheel.py\", line 347, in move_wheel_files\r\n    assert info_dir, \"%s .dist-info directory not found\" % req\r\nAssertionError: anyconfig>=0.9.7 .dist-info directory not found\r\n\r\n```\r\n\r\nAlready found the culprit: https://github.com/ssato/python-anyconfig/issues/110", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2207/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2207/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2204", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2204/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2204/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2204/events", "html_url": "https://github.com/ansible-community/molecule/issues/2204", "id": 476942102, "node_id": "MDU6SXNzdWU0NzY5NDIxMDI=", "number": 2204, "title": "Don't be blocked on making a new release by failure on the ansible devel job", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-08-05T16:06:33Z", "updated_at": "2019-10-25T23:17:16Z", "closed_at": "2019-10-25T23:17:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When did this become the case? I have no idea. \r\n\r\nWe need to remove this restriction.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2204/reactions", "total_count": 2, "+1": 1, "-1": 1, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2204/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2199", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2199/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2199/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2199/events", "html_url": "https://github.com/ansible-community/molecule/issues/2199", "id": 476584308, "node_id": "MDU6SXNzdWU0NzY1ODQzMDg=", "number": 2199, "title": "\"ansible_connection\" variable is read as \"smart\" when executing verify with testinfra over delegated driver", "user": {"login": "javierjimsa", "id": 38256935, "node_id": "MDQ6VXNlcjM4MjU2OTM1", "avatar_url": "https://avatars.githubusercontent.com/u/38256935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/javierjimsa", "html_url": "https://github.com/javierjimsa", "followers_url": "https://api.github.com/users/javierjimsa/followers", "following_url": "https://api.github.com/users/javierjimsa/following{/other_user}", "gists_url": "https://api.github.com/users/javierjimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/javierjimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/javierjimsa/subscriptions", "organizations_url": "https://api.github.com/users/javierjimsa/orgs", "repos_url": "https://api.github.com/users/javierjimsa/repos", "events_url": "https://api.github.com/users/javierjimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/javierjimsa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-08-04T19:12:34Z", "updated_at": "2019-08-05T07:04:16Z", "closed_at": "2019-08-04T19:28:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.7.6\r\nmolecule 2.20.2\r\npython 3.7.3\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip with virtual env\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip with virtual env\r\n\r\n\r\n```\r\nsource .venv/bin/activate\r\npip3 install ansible==2.7.6 molecule docker dnspython pytest-json pytest-xdist\r\n```\r\n\r\nDetail any linters or test runners used:\r\n\r\nused the default by molecule\r\n\r\n# Desired Behavior\r\nwhen executing molecule test, at verify step test are executed.\r\n\r\n# Actual Behaviour\r\n\r\ninstead ansible connection is read as smart at this step but previous steps as converge or prepare are executed correctly.\r\n\r\n```\r\n--> Scenario: 'vmware'\r\n--> Action: 'converge'\r\n    \r\n    PLAY [Converge] ****************************************************************\r\n    \r\n    TASK [Gathering Facts] *********************************************************\r\n    ok: [molecule_generated_175]\r\n    \r\n    TASK [role_execution_dir : Install httpd] **************************************\r\n    changed: [molecule_generated_175]\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    molecule_generated_175     : ok=2    changed=1    unreachable=0    failed=0\r\n    \r\n    \r\n--> Scenario: 'vmware'\r\n--> Action: 'idempotence'\r\nIdempotence completed successfully.\r\n--> Scenario: 'vmware'\r\n--> Action: 'side_effect'\r\nSkipping, side effect playbook not configured.\r\n--> Scenario: 'vmware'\r\n--> Action: 'verify'\r\n--> Executing Testinfra tests found in /var/lib/jenkins/workspace/e-proto_feature_molecule_testing@2/role_execution_dir/molecule/vmware/../../tests/...\r\n    ============================= test session starts ==============================\r\n    platform linux -- Python 3.7.3, pytest-5.0.1, py-1.8.0, pluggy-0.12.0 -- /var/lib/jenkins/workspace/e-proto_feature_molecule_testing@2/role_execution_dir/.venv/bin/python3\r\n    rootdir: /var/lib/jenkins/workspace/e-proto_feature_molecule_testing@2/role_execution_dir\r\n    plugins: forked-1.0.2, json-0.4.0, xdist-1.29.0, testinfra-3.0.6\r\n    \r\ngw0 I\r\n[gw0] linux Python 3.7.3 cwd: /var/lib/jenkins/workspace/e-proto_feature_molecule_testing@2/role_execution_dir/molecule/vmware\r\n    \r\ngw0 C\r\n[gw0] Python 3.7.3 (default, Jul 25 2019, 17:29:06)  -- [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\n    \r\ngw0 ok\r\ngw0 [2]\r\n    scheduling tests via LoadScheduling\r\n    \r\n    ../../tests/test_httpd.py::test_passwd_file[ansible:/molecule_generated_175]\r\n    [gw0] [ 50%] FAILED ../../tests/test_httpd.py::test_passwd_file[ansible:/molecule_generated_175]\r\n    ../../tests/test_httpd.py::test_httpd_is_installed[ansible:/molecule_generated_175]\r\n    [gw0] [100%] FAILED ../../tests/test_httpd.py::test_httpd_is_installed[ansible:/molecule_generated_175]\r\n    \r\n    =================================== FAILURES ===================================\r\n    ______________ test_passwd_file[ansible://molecule_generated_175] ______________\r\n    [gw0] linux -- Python 3.7.3 /var/lib/jenkins/workspace/e-proto_feature_molecule_testing@2/role_execution_dir/.venv/bin/python3\r\n    \r\n    host = <testinfra.host.Host object at 0x7fbf95df4908>\r\n    \r\n        def test_passwd_file(host):\r\n    >       passwd = host.file(\"/etc/passwd\")\r\n    \r\n    ../../tests/test_httpd.py:12:\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/host.py:107: in __getattr__\r\n        obj = module_class.get_module(self)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/modules/base.py:22: in get_module\r\n        klass = cls.get_module_class(_host)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/modules/file.py:187: in get_module_class\r\n        if host.system_info.type == \"linux\":\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/modules/systeminfo.py:143: in type\r\n        return self.sysinfo[\"type\"]\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/utils/__init__.py:44: in __get__\r\n        value = obj.__dict__[self.func.__name__] = self.func(obj)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/modules/systeminfo.py:33: in sysinfo\r\n        uname = self.run_expect([0, 1], 'uname -s')\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/host.py:71: in run\r\n        return self.backend.run(command, *args, **kwargs)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/backend/ansible.py:46: in run\r\n        ssh_identity_file=self.ssh_identity_file)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/utils/ansible_runner.py:181: in run\r\n        return self.get_host(host, **kwargs).run(command)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/utils/ansible_runner.py:177: in get_host\r\n        self.ansible_config, self.inventory, host, **kwargs)\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    \r\n    config = <configparser.ConfigParser object at 0x7fbf95e584a8>\r\n    inventory = {'_meta': {'hostvars': {'molecule_generated_175': {'ansible_connection': 'smart', 'ansible_host': '10.120.52.24', 'ans...on_dir/vmware/ssh_key', ...}}}, 'all': {'children': ['ungrouped']}, 'ungrouped': {'hosts': ['molecule_generated_175']}}\r\n    host = 'molecule_generated_175', ssh_config = None, ssh_identity_file = None\r\n    \r\n        def get_ansible_host(config, inventory, host, ssh_config=None,\r\n                             ssh_identity_file=None):\r\n            if is_empty_inventory(inventory):\r\n                return testinfra.get_host('local://')\r\n            hostvars = inventory['_meta'].get('hostvars', {}).get(host, {})\r\n            connection = hostvars.get('ansible_connection', 'ssh')\r\n            if connection not in ('ssh', 'local', 'docker', 'lxc', 'lxd'):\r\n                raise NotImplementedError(\r\n    >               'unhandled ansible_connection {}'.format(connection))\r\n    E           NotImplementedError: unhandled ansible_connection smart\r\n    \r\n    ../../.venv/lib/python3.7/site-packages/testinfra/utils/ansible_runner.py:71: NotImplementedError\r\n    __________ test_httpd_is_installed[ansible://molecule_generated_175] ___________\r\n    [gw0] linux -- Python 3.7.3 /var/lib/jenkins/workspace/e-proto_feature_molecule_testing@2/role_execution_dir/.venv/bin/python3\r\n    \r\n    host = <testinfra.host.Host object at 0x7fbf95df4908>\r\n    \r\n        def test_httpd_is_installed(host):\r\n    >       httpd = host.package(\"httpd\")\r\n    \r\n    ../../tests/test_httpd.py:18:\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/host.py:107: in __getattr__\r\n        obj = module_class.get_module(self)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/modules/base.py:22: in get_module\r\n        klass = cls.get_module_class(_host)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/modules/package.py:69: in get_module_class\r\n        if host.system_info.type == 'windows':\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/modules/systeminfo.py:143: in type\r\n        return self.sysinfo[\"type\"]\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/utils/__init__.py:44: in __get__\r\n        value = obj.__dict__[self.func.__name__] = self.func(obj)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/modules/systeminfo.py:33: in sysinfo\r\n        uname = self.run_expect([0, 1], 'uname -s')\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/host.py:71: in run\r\n        return self.backend.run(command, *args, **kwargs)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/backend/ansible.py:46: in run\r\n        ssh_identity_file=self.ssh_identity_file)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/utils/ansible_runner.py:181: in run\r\n        return self.get_host(host, **kwargs).run(command)\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/utils/ansible_runner.py:177: in get_host\r\n        self.ansible_config, self.inventory, host, **kwargs)\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    \r\n    config = <configparser.ConfigParser object at 0x7fbf95e584a8>\r\n    inventory = {'_meta': {'hostvars': {'molecule_generated_175': {'ansible_connection': 'smart', 'ansible_host': '10.120.52.24', 'ans...on_dir/vmware/ssh_key', ...}}}, 'all': {'children': ['ungrouped']}, 'ungrouped': {'hosts': ['molecule_generated_175']}}\r\n    host = 'molecule_generated_175', ssh_config = None, ssh_identity_file = None\r\n    \r\n        def get_ansible_host(config, inventory, host, ssh_config=None,\r\n                             ssh_identity_file=None):\r\n            if is_empty_inventory(inventory):\r\n                return testinfra.get_host('local://')\r\n            hostvars = inventory['_meta'].get('hostvars', {}).get(host, {})\r\n            connection = hostvars.get('ansible_connection', 'ssh')\r\n            if connection not in ('ssh', 'local', 'docker', 'lxc', 'lxd'):\r\n                raise NotImplementedError(\r\n    >               'unhandled ansible_connection {}'.format(connection))\r\n    E           NotImplementedError: unhandled ansible_connection smart\r\n    \r\n    ../../.venv/lib/python3.7/site-packages/testinfra/utils/ansible_runner.py:71: NotImplementedError\r\n    - generated xml file: /var/lib/jenkins/workspace/e-proto_feature_molecule_testing@2/role_execution_dir/tests/reports/junit.xml -\r\n    - generated json report: /var/lib/jenkins/workspace/e-proto_feature_molecule_testing@2/role_execution_dir/tests/reports/report.json -\r\n    =========================== 2 failed in 1.38 seconds ===========================\r\nAn error occurred during the test sequence action: 'verify'. Cleaning up.\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2199/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2199/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2198", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2198/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2198/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2198/events", "html_url": "https://github.com/ansible-community/molecule/pull/2198", "id": 476552940, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA0MDY3MzI0", "number": 2198, "title": "Bumps minimal testinfra version to 3.0.6", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1288589346, "node_id": "MDU6TGFiZWwxMjg4NTg5MzQ2", "url": "https://api.github.com/repos/ansible-community/molecule/labels/testinfra", "name": "testinfra", "color": "e99695", "default": false, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/15", "html_url": "https://github.com/ansible-community/molecule/milestone/15", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/15/labels", "id": 4218032, "node_id": "MDk6TWlsZXN0b25lNDIxODAzMg==", "number": 15, "title": "2.22", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-04-10T16:34:29Z", "updated_at": "2019-08-22T12:16:35Z", "due_on": "2019-06-28T07:00:00Z", "closed_at": "2019-08-22T12:16:35Z"}, "comments": 0, "created_at": "2019-08-04T13:20:57Z", "updated_at": "2019-08-04T15:46:43Z", "closed_at": "2019-08-04T15:46:43Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2198", "html_url": "https://github.com/ansible-community/molecule/pull/2198", "diff_url": "https://github.com/ansible-community/molecule/pull/2198.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2198.patch", "merged_at": "2019-08-04T15:46:42Z"}, "body": "Version 3.0.6 includes critical bugfix which prevented use of\r\ntestinfra when ansible verbosity was not 0.\r\n\r\nFixes: #2188\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2198/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2190", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2190/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2190/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2190/events", "html_url": "https://github.com/ansible-community/molecule/issues/2190", "id": 475208068, "node_id": "MDU6SXNzdWU0NzUyMDgwNjg=", "number": 2190, "title": "AttributeError: 'Docker' object has no attribute 'vagrantfile' although not using Docker", "user": {"login": "rhysmeister", "id": 11007506, "node_id": "MDQ6VXNlcjExMDA3NTA2", "avatar_url": "https://avatars.githubusercontent.com/u/11007506?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rhysmeister", "html_url": "https://github.com/rhysmeister", "followers_url": "https://api.github.com/users/rhysmeister/followers", "following_url": "https://api.github.com/users/rhysmeister/following{/other_user}", "gists_url": "https://api.github.com/users/rhysmeister/gists{/gist_id}", "starred_url": "https://api.github.com/users/rhysmeister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rhysmeister/subscriptions", "organizations_url": "https://api.github.com/users/rhysmeister/orgs", "repos_url": "https://api.github.com/users/rhysmeister/repos", "events_url": "https://api.github.com/users/rhysmeister/events{/privacy}", "received_events_url": "https://api.github.com/users/rhysmeister/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-31T15:20:24Z", "updated_at": "2019-07-31T18:41:45Z", "closed_at": "2019-07-31T18:41:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.3\r\n  config file = None\r\n  configured module search path = [u'/Users/rhyscampbell/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/virtenv/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/virtenv/bin/ansible\r\n  python version = 2.7.10 (default, Feb 22 2019, 21:55:15) [GCC 4.2.1 Compatible Apple LLVM 10.0.1 (clang-1001.0.37.14)]\r\nmolecule, version 2.20.2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\nDetail any linters or test runners used:\r\n\r\nDisabled at the moment.\r\n\r\n# Desired Behavior\r\n\r\nA more appropriate error message.\r\n\r\n# Issue in brief\r\n\r\nI specify the following in my molecule.yml file...\r\n\r\n```\r\n---\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\n```\r\nWhen attempting either molecule test or converge I get the following error...\r\n\r\n```\r\nAttributeError: 'Docker' object has no attribute 'vagrantfile'\r\n```\r\n\r\nUncertain what this error is referring to as I'm not using Docker in this project.\r\n\r\nPlease give some details of the feature being requested or what\r\nshould happen if providing a bug report.\r\n\r\n# Actual Behaviour\r\n\r\n The error was: \r\n\r\n```\r\nAttributeError: 'Docker' object has no attribute 'vagrantfile'\r\n```\r\n\r\n*molecule.yml*\r\n\r\n````\r\n---\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\nlint:\r\n  name: yamllint\r\n  options:\r\n    config-data:\r\n      ignore: virtenv/\r\nplatforms:\r\n  - name: nrpeyum01\r\n    groups:\r\n      - nrpe\r\n    provisioner:\r\n      name: ansible\r\n      playbooks:\r\n        create: playbooks/nrpe.yml\r\n  - name: nrpepip02\r\n    groups:\r\n      - nrpe\r\n  - name: nrpescript03\r\n    groups:\r\n      - nrpe\r\n  - name: nrpeyumpip04\r\n    groups:\r\n      - nrpe\r\n  - name: nrpeyumscript05\r\n    groups:\r\n      - nrpe\r\n  - name: nrpepipscript06\r\n    groups:\r\n      - nrpe\r\n  - name: nrpeall07\r\n    groups:\r\n      - nrpe\r\n  - name: testnagios01\r\n    groups:\r\n      - nagios\r\n  - name: testnagios02\r\n    groups:\r\n      - nagios\r\n  - name: testnagios03\r\n    groups:\r\n      - nagios\r\n  - name: testnagios04\r\n    groups:\r\n      - nagios\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\n    options:\r\n      exclude:\r\n        - virtenv/\r\n    enabled: False # Turn off for now\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\n*create.yml*\r\n\r\n```\r\n---\r\n- hosts: localhost\r\n  connection: local\r\n  tasks:\r\n    - name: Create nrpe instances\r\n      molecule_vagrant:\r\n        instance_name: \"{{ item }}\"\r\n        platform_box: \"bento/centos-7.5\"\r\n        provider_name: virtualbox\r\n        provider_memory: 1024\r\n        provider_cpus: 1\r\n        provider_raw_config_args:\r\n          - \"customize ['modifyvm', :id, '--name', '{{ item }}']\"\r\n          - \"vm.synced_folder './', '/vagrant', disabled: true'\"\r\n          - \"config.vm.hostname {{ item }}\"\r\n        state: up\r\n        provision: true\r\n      with_items:\r\n        - nrpeyum01\r\n        - nrpepip02\r\n        - nrpescript03\r\n        - nrpeyumpip04\r\n        - nrpeyumscript05\r\n        - nrpepipscript06\r\n        - nrpeall07\r\n    - name: Create nagios instances\r\n      molecule_vagrant:\r\n        instance_name: \"{{ item }}\"\r\n        platform_box: \"bento/centos-7.5\"\r\n        provider_name: virtualbox\r\n        provider_memory: 1024\r\n        provider_cpus: 1\r\n        provider_raw_config_args:\r\n          - \"customize ['modifyvm', :id, '--name', '{{ item }}']\"\r\n          - \"vm.synced_folder './', '/vagrant', disabled: true'\"\r\n          - \"config.vm.hostname {{ item }}\"\r\n        state: up\r\n        provision: true\r\n        with_items:\r\n          - testnagios01\r\n          - testnagios02\r\n          - testnagios03\r\n          - testnagios04\r\n```\r\n\r\nFull output of molecule --debug converge\r\n\r\n```\r\n--> Validating schema /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u2514\u2500\u2500 converge\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/ansible.cfg\r\nANSIBLE_COW_SELECTION: random\r\nANSIBLE_FILTER_PLUGINS: /usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/filters:/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/plugins/filters:/Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/plugins/filters\r\nANSIBLE_LIBRARY: /usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/library:/Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/library\r\nANSIBLE_ROLES_PATH: /var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/roles:/Users/rhyscampbell/Documents/git/msgansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default\r\nMOLECULE_FILE: /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/ansible.cfg ANSIBLE_COW_SELECTION=random ANSIBLE_FILTER_PLUGINS=/usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/filters:/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/plugins/filters:/Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/plugins/filters ANSIBLE_LIBRARY=/usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/library:/Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/library ANSIBLE_ROLES_PATH=/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/roles:/Users/rhyscampbell/Documents/git/msgansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default MOLECULE_FILE=/Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/instance_config.yml MOLECULE_INVENTORY_FILE=/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/usr/local/bin/ansible-playbook --skip-tags=molecule-notest,notest --inventory=/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/inventory --diff /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default/create.yml -vvv\r\n\r\n    ansible-playbook 2.8.2\r\n      config file = /var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/ansible.cfg\r\n      configured module search path = ['/usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries', '/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/library', '/Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/library']\r\n      ansible python module location = /usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/ansible\r\n      executable location = /usr/local/bin/ansible-playbook\r\n      python version = 3.6.4 (default, Jan  6 2018, 11:51:59) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.39.2)]\r\n    Using /var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/ansible.cfg as config file\r\n    host_list declined parsing /var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/inventory/ansible_inventory.yml as it did not pass it's verify_file() method\r\n    script declined parsing /var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/inventory/ansible_inventory.yml as it did not pass it's verify_file() method\r\n    Parsed /var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/molecule/nrpe_checks/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n    \r\n    PLAYBOOK: create.yml ***********************************************************\r\n    1 plays in /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default/create.yml\r\n [WARNING]: Skipping plugin (/usr/local/lib/python2.7/site-\r\npackages/molecule/provisioner/ansible/plugins/filters/molecule_core.py) as it\r\nseems to be invalid: No module named 'molecule'\r\n\r\n    \r\n    PLAY [localhost] ***************************************************************\r\n    \r\n    TASK [Gathering Facts] *********************************************************\r\n    task path: /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default/create.yml:2\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: rhyscampbell\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~rhyscampbell && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586232.6179368-30181508130220 `\" && echo ansible-tmp-1564586232.6179368-30181508130220=\"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586232.6179368-30181508130220 `\" ) && sleep 0'\r\n    Using module file /usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/ansible/modules/system/setup.py\r\n    <127.0.0.1> PUT /Users/rhyscampbell/.ansible/tmp/ansible-local-37585qs1a4ef7/tmpyhm39ies TO /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586232.6179368-30181508130220/AnsiballZ_setup.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586232.6179368-30181508130220/ /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586232.6179368-30181508130220/AnsiballZ_setup.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/local/bin/python /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586232.6179368-30181508130220/AnsiballZ_setup.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586232.6179368-30181508130220/ > /dev/null 2>&1 && sleep 0'\r\n    ok: [localhost]\r\n    META: ran handlers\r\n    \r\n    TASK [Create nrpe instances] ***************************************************\r\n    task path: /Users/rhyscampbell/Documents/git/msgansible/roles/nrpe_checks/molecule/default/create.yml:5\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: rhyscampbell\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~rhyscampbell && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321 `\" && echo ansible-tmp-1564586238.82686-153337832843321=\"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321 `\" ) && sleep 0'\r\n    Using module file /usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries/molecule_vagrant.py\r\n    <127.0.0.1> PUT /Users/rhyscampbell/.ansible/tmp/ansible-local-37585qs1a4ef7/tmp4fl2m8ud TO /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/AnsiballZ_molecule_vagrant.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/ /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/local/bin/python /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/ > /dev/null 2>&1 && sleep 0'\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/AnsiballZ_molecule_vagrant.py\", line 114, in <module>\r\n        _ansiballz_main()\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/AnsiballZ_molecule_vagrant.py\", line 106, in _ansiballz_main\r\n        invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/AnsiballZ_molecule_vagrant.py\", line 49, in invoke_module\r\n        imp.load_module('__main__', mod, module, MOD_DESC)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 235, in load_module\r\n        return load_source(name, filename, file)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 170, in load_source\r\n        module = _exec(spec, sys.modules[name])\r\n      File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n      File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n      File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n      File \"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_dh0805fp/__main__.py\", line 30, in <module>\r\n    ModuleNotFoundError: No module named 'molecule'\r\n    \r\n    failed: [localhost] (item=nrpeyum01) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"item\": \"nrpeyum01\",\r\n        \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/AnsiballZ_molecule_vagrant.py\\\", line 114, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/AnsiballZ_molecule_vagrant.py\\\", line 106, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586238.82686-153337832843321/AnsiballZ_molecule_vagrant.py\\\", line 49, in invoke_module\\n    imp.load_module('__main__', mod, module, MOD_DESC)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 235, in load_module\\n    return load_source(name, filename, file)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 170, in load_source\\n    module = _exec(spec, sys.modules[name])\\n  File \\\"<frozen importlib._bootstrap>\\\", line 618, in _exec\\n  File \\\"<frozen importlib._bootstrap_external>\\\", line 678, in exec_module\\n  File \\\"<frozen importlib._bootstrap>\\\", line 219, in _call_with_frames_removed\\n  File \\\"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_dh0805fp/__main__.py\\\", line 30, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\",\r\n        \"module_stdout\": \"\",\r\n        \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n        \"rc\": 1\r\n    }\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~rhyscampbell && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589 `\" && echo ansible-tmp-1564586239.441809-112919692053589=\"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589 `\" ) && sleep 0'\r\n    Using module file /usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries/molecule_vagrant.py\r\n    <127.0.0.1> PUT /Users/rhyscampbell/.ansible/tmp/ansible-local-37585qs1a4ef7/tmpp0uzl3m_ TO /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/AnsiballZ_molecule_vagrant.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/ /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/local/bin/python /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/ > /dev/null 2>&1 && sleep 0'\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/AnsiballZ_molecule_vagrant.py\", line 114, in <module>\r\n        _ansiballz_main()\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/AnsiballZ_molecule_vagrant.py\", line 106, in _ansiballz_main\r\n        invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/AnsiballZ_molecule_vagrant.py\", line 49, in invoke_module\r\n        imp.load_module('__main__', mod, module, MOD_DESC)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 235, in load_module\r\n        return load_source(name, filename, file)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 170, in load_source\r\n        module = _exec(spec, sys.modules[name])\r\n      File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n      File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n      File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n      File \"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_gzf8ac49/__main__.py\", line 30, in <module>\r\n    ModuleNotFoundError: No module named 'molecule'\r\n    \r\n    failed: [localhost] (item=nrpepip02) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"item\": \"nrpepip02\",\r\n        \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/AnsiballZ_molecule_vagrant.py\\\", line 114, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/AnsiballZ_molecule_vagrant.py\\\", line 106, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.441809-112919692053589/AnsiballZ_molecule_vagrant.py\\\", line 49, in invoke_module\\n    imp.load_module('__main__', mod, module, MOD_DESC)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 235, in load_module\\n    return load_source(name, filename, file)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 170, in load_source\\n    module = _exec(spec, sys.modules[name])\\n  File \\\"<frozen importlib._bootstrap>\\\", line 618, in _exec\\n  File \\\"<frozen importlib._bootstrap_external>\\\", line 678, in exec_module\\n  File \\\"<frozen importlib._bootstrap>\\\", line 219, in _call_with_frames_removed\\n  File \\\"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_gzf8ac49/__main__.py\\\", line 30, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\",\r\n        \"module_stdout\": \"\",\r\n        \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n        \"rc\": 1\r\n    }\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~rhyscampbell && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663 `\" && echo ansible-tmp-1564586239.963576-254320288210663=\"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663 `\" ) && sleep 0'\r\n    Using module file /usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries/molecule_vagrant.py\r\n    <127.0.0.1> PUT /Users/rhyscampbell/.ansible/tmp/ansible-local-37585qs1a4ef7/tmpdtfkhmqq TO /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/AnsiballZ_molecule_vagrant.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/ /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/local/bin/python /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/ > /dev/null 2>&1 && sleep 0'\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/AnsiballZ_molecule_vagrant.py\", line 114, in <module>\r\n        _ansiballz_main()\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/AnsiballZ_molecule_vagrant.py\", line 106, in _ansiballz_main\r\n        invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/AnsiballZ_molecule_vagrant.py\", line 49, in invoke_module\r\n        imp.load_module('__main__', mod, module, MOD_DESC)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 235, in load_module\r\n        return load_source(name, filename, file)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 170, in load_source\r\n        module = _exec(spec, sys.modules[name])\r\n      File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n      File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n      File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n      File \"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_3ubytwr3/__main__.py\", line 30, in <module>\r\n    ModuleNotFoundError: No module named 'molecule'\r\n    \r\n    failed: [localhost] (item=nrpescript03) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"item\": \"nrpescript03\",\r\n        \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/AnsiballZ_molecule_vagrant.py\\\", line 114, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/AnsiballZ_molecule_vagrant.py\\\", line 106, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586239.963576-254320288210663/AnsiballZ_molecule_vagrant.py\\\", line 49, in invoke_module\\n    imp.load_module('__main__', mod, module, MOD_DESC)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 235, in load_module\\n    return load_source(name, filename, file)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 170, in load_source\\n    module = _exec(spec, sys.modules[name])\\n  File \\\"<frozen importlib._bootstrap>\\\", line 618, in _exec\\n  File \\\"<frozen importlib._bootstrap_external>\\\", line 678, in exec_module\\n  File \\\"<frozen importlib._bootstrap>\\\", line 219, in _call_with_frames_removed\\n  File \\\"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_3ubytwr3/__main__.py\\\", line 30, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\",\r\n        \"module_stdout\": \"\",\r\n        \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n        \"rc\": 1\r\n    }\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~rhyscampbell && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372 `\" && echo ansible-tmp-1564586240.289265-201307844580372=\"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372 `\" ) && sleep 0'\r\n    Using module file /usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries/molecule_vagrant.py\r\n    <127.0.0.1> PUT /Users/rhyscampbell/.ansible/tmp/ansible-local-37585qs1a4ef7/tmpld6eq6me TO /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/AnsiballZ_molecule_vagrant.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/ /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/local/bin/python /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/ > /dev/null 2>&1 && sleep 0'\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/AnsiballZ_molecule_vagrant.py\", line 114, in <module>\r\n        _ansiballz_main()\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/AnsiballZ_molecule_vagrant.py\", line 106, in _ansiballz_main\r\n        invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/AnsiballZ_molecule_vagrant.py\", line 49, in invoke_module\r\n        imp.load_module('__main__', mod, module, MOD_DESC)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 235, in load_module\r\n        return load_source(name, filename, file)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 170, in load_source\r\n        module = _exec(spec, sys.modules[name])\r\n      File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n      File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n      File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n      File \"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_tisfgbx2/__main__.py\", line 30, in <module>\r\n    ModuleNotFoundError: No module named 'molecule'\r\n    \r\n    failed: [localhost] (item=nrpeyumpip04) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"item\": \"nrpeyumpip04\",\r\n        \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/AnsiballZ_molecule_vagrant.py\\\", line 114, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/AnsiballZ_molecule_vagrant.py\\\", line 106, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.289265-201307844580372/AnsiballZ_molecule_vagrant.py\\\", line 49, in invoke_module\\n    imp.load_module('__main__', mod, module, MOD_DESC)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 235, in load_module\\n    return load_source(name, filename, file)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 170, in load_source\\n    module = _exec(spec, sys.modules[name])\\n  File \\\"<frozen importlib._bootstrap>\\\", line 618, in _exec\\n  File \\\"<frozen importlib._bootstrap_external>\\\", line 678, in exec_module\\n  File \\\"<frozen importlib._bootstrap>\\\", line 219, in _call_with_frames_removed\\n  File \\\"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_tisfgbx2/__main__.py\\\", line 30, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\",\r\n        \"module_stdout\": \"\",\r\n        \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n        \"rc\": 1\r\n    }\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~rhyscampbell && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104 `\" && echo ansible-tmp-1564586240.586549-237306901235104=\"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104 `\" ) && sleep 0'\r\n    Using module file /usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries/molecule_vagrant.py\r\n    <127.0.0.1> PUT /Users/rhyscampbell/.ansible/tmp/ansible-local-37585qs1a4ef7/tmp2kihlau_ TO /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/AnsiballZ_molecule_vagrant.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/ /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/local/bin/python /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/ > /dev/null 2>&1 && sleep 0'\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/AnsiballZ_molecule_vagrant.py\", line 114, in <module>\r\n        _ansiballz_main()\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/AnsiballZ_molecule_vagrant.py\", line 106, in _ansiballz_main\r\n        invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/AnsiballZ_molecule_vagrant.py\", line 49, in invoke_module\r\n        imp.load_module('__main__', mod, module, MOD_DESC)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 235, in load_module\r\n        return load_source(name, filename, file)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 170, in load_source\r\n        module = _exec(spec, sys.modules[name])\r\n      File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n      File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n      File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n      File \"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload__mp9pv_8/__main__.py\", line 30, in <module>\r\n    ModuleNotFoundError: No module named 'molecule'\r\n    \r\n    failed: [localhost] (item=nrpeyumscript05) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"item\": \"nrpeyumscript05\",\r\n        \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/AnsiballZ_molecule_vagrant.py\\\", line 114, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/AnsiballZ_molecule_vagrant.py\\\", line 106, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.586549-237306901235104/AnsiballZ_molecule_vagrant.py\\\", line 49, in invoke_module\\n    imp.load_module('__main__', mod, module, MOD_DESC)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 235, in load_module\\n    return load_source(name, filename, file)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 170, in load_source\\n    module = _exec(spec, sys.modules[name])\\n  File \\\"<frozen importlib._bootstrap>\\\", line 618, in _exec\\n  File \\\"<frozen importlib._bootstrap_external>\\\", line 678, in exec_module\\n  File \\\"<frozen importlib._bootstrap>\\\", line 219, in _call_with_frames_removed\\n  File \\\"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload__mp9pv_8/__main__.py\\\", line 30, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\",\r\n        \"module_stdout\": \"\",\r\n        \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n        \"rc\": 1\r\n    }\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~rhyscampbell && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248 `\" && echo ansible-tmp-1564586240.939206-276892265950248=\"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248 `\" ) && sleep 0'\r\n    Using module file /usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries/molecule_vagrant.py\r\n    <127.0.0.1> PUT /Users/rhyscampbell/.ansible/tmp/ansible-local-37585qs1a4ef7/tmp5c9yx7fk TO /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/AnsiballZ_molecule_vagrant.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/ /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/local/bin/python /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/ > /dev/null 2>&1 && sleep 0'\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/AnsiballZ_molecule_vagrant.py\", line 114, in <module>\r\n        _ansiballz_main()\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/AnsiballZ_molecule_vagrant.py\", line 106, in _ansiballz_main\r\n        invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/AnsiballZ_molecule_vagrant.py\", line 49, in invoke_module\r\n        imp.load_module('__main__', mod, module, MOD_DESC)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 235, in load_module\r\n        return load_source(name, filename, file)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 170, in load_source\r\n        module = _exec(spec, sys.modules[name])\r\n      File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n      File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n      File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n      File \"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_ch7397iq/__main__.py\", line 30, in <module>\r\n    ModuleNotFoundError: No module named 'molecule'\r\n    \r\n    failed: [localhost] (item=nrpepipscript06) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"item\": \"nrpepipscript06\",\r\n        \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/AnsiballZ_molecule_vagrant.py\\\", line 114, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/AnsiballZ_molecule_vagrant.py\\\", line 106, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586240.939206-276892265950248/AnsiballZ_molecule_vagrant.py\\\", line 49, in invoke_module\\n    imp.load_module('__main__', mod, module, MOD_DESC)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 235, in load_module\\n    return load_source(name, filename, file)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 170, in load_source\\n    module = _exec(spec, sys.modules[name])\\n  File \\\"<frozen importlib._bootstrap>\\\", line 618, in _exec\\n  File \\\"<frozen importlib._bootstrap_external>\\\", line 678, in exec_module\\n  File \\\"<frozen importlib._bootstrap>\\\", line 219, in _call_with_frames_removed\\n  File \\\"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_ch7397iq/__main__.py\\\", line 30, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\",\r\n        \"module_stdout\": \"\",\r\n        \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n        \"rc\": 1\r\n    }\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~rhyscampbell && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481 `\" && echo ansible-tmp-1564586241.2456-106244649089481=\"` echo /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481 `\" ) && sleep 0'\r\n    Using module file /usr/local/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries/molecule_vagrant.py\r\n    <127.0.0.1> PUT /Users/rhyscampbell/.ansible/tmp/ansible-local-37585qs1a4ef7/tmp__cc1y8n TO /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/AnsiballZ_molecule_vagrant.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/ /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/local/bin/python /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/ > /dev/null 2>&1 && sleep 0'\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/AnsiballZ_molecule_vagrant.py\", line 114, in <module>\r\n        _ansiballz_main()\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/AnsiballZ_molecule_vagrant.py\", line 106, in _ansiballz_main\r\n        invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n      File \"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/AnsiballZ_molecule_vagrant.py\", line 49, in invoke_module\r\n        imp.load_module('__main__', mod, module, MOD_DESC)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 235, in load_module\r\n        return load_source(name, filename, file)\r\n      File \"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\", line 170, in load_source\r\n        module = _exec(spec, sys.modules[name])\r\n      File \"<frozen importlib._bootstrap>\", line 618, in _exec\r\n      File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n      File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n      File \"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_t0napi8g/__main__.py\", line 30, in <module>\r\n    ModuleNotFoundError: No module named 'molecule'\r\n    \r\n    failed: [localhost] (item=nrpeall07) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"item\": \"nrpeall07\",\r\n        \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/AnsiballZ_molecule_vagrant.py\\\", line 114, in <module>\\n    _ansiballz_main()\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/AnsiballZ_molecule_vagrant.py\\\", line 106, in _ansiballz_main\\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\\n  File \\\"/Users/rhyscampbell/.ansible/tmp/ansible-tmp-1564586241.2456-106244649089481/AnsiballZ_molecule_vagrant.py\\\", line 49, in invoke_module\\n    imp.load_module('__main__', mod, module, MOD_DESC)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 235, in load_module\\n    return load_source(name, filename, file)\\n  File \\\"/usr/local/Cellar/python/3.6.4_2/Frameworks/Python.framework/Versions/3.6/lib/python3.6/imp.py\\\", line 170, in load_source\\n    module = _exec(spec, sys.modules[name])\\n  File \\\"<frozen importlib._bootstrap>\\\", line 618, in _exec\\n  File \\\"<frozen importlib._bootstrap_external>\\\", line 678, in exec_module\\n  File \\\"<frozen importlib._bootstrap>\\\", line 219, in _call_with_frames_removed\\n  File \\\"/var/folders/j2/1gzr80lj0l95hl94p4brqtt40000gn/T/ansible_molecule_vagrant_payload_t0napi8g/__main__.py\\\", line 30, in <module>\\nModuleNotFoundError: No module named 'molecule'\\n\",\r\n        \"module_stdout\": \"\",\r\n        \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n        \"rc\": 1\r\n    }\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n    \r\nERROR: \r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2190/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2190/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2188", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2188/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2188/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2188/events", "html_url": "https://github.com/ansible-community/molecule/issues/2188", "id": 474421050, "node_id": "MDU6SXNzdWU0NzQ0MjEwNTA=", "number": 2188, "title": "ansible verbosity breaks testinfra/utils/ansible_runner.py in molecule 2.20.2", "user": {"login": "Woytek-Polnik", "id": 26327820, "node_id": "MDQ6VXNlcjI2MzI3ODIw", "avatar_url": "https://avatars.githubusercontent.com/u/26327820?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Woytek-Polnik", "html_url": "https://github.com/Woytek-Polnik", "followers_url": "https://api.github.com/users/Woytek-Polnik/followers", "following_url": "https://api.github.com/users/Woytek-Polnik/following{/other_user}", "gists_url": "https://api.github.com/users/Woytek-Polnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/Woytek-Polnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Woytek-Polnik/subscriptions", "organizations_url": "https://api.github.com/users/Woytek-Polnik/orgs", "repos_url": "https://api.github.com/users/Woytek-Polnik/repos", "events_url": "https://api.github.com/users/Woytek-Polnik/events{/privacy}", "received_events_url": "https://api.github.com/users/Woytek-Polnik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 864009245, "node_id": "MDU6TGFiZWw4NjQwMDkyNDU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/upstream-bug", "name": "upstream-bug", "color": "960a21", "default": false, "description": ""}, {"id": 1288589346, "node_id": "MDU6TGFiZWwxMjg4NTg5MzQ2", "url": "https://api.github.com/repos/ansible-community/molecule/labels/testinfra", "name": "testinfra", "color": "e99695", "default": false, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/15", "html_url": "https://github.com/ansible-community/molecule/milestone/15", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/15/labels", "id": 4218032, "node_id": "MDk6TWlsZXN0b25lNDIxODAzMg==", "number": 15, "title": "2.22", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-04-10T16:34:29Z", "updated_at": "2019-08-22T12:16:35Z", "due_on": "2019-06-28T07:00:00Z", "closed_at": "2019-08-22T12:16:35Z"}, "comments": 13, "created_at": "2019-07-30T07:30:04Z", "updated_at": "2019-08-04T15:46:50Z", "closed_at": "2019-08-02T12:33:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\nVerbosity for ansible in molecule.yml breaks `verify` tests.\r\n\r\n```yml\r\nprovisioner:\r\n  name: ansible\r\n  config_options:\r\n    defaults:\r\n      verbosity: 1 // it can be 2 3 whatever\r\n```\r\n\r\n# Molecule and Ansible details\r\n\r\nPython 2.7, 3.7 *\r\nAnsible 2.7.*, 2.8.*\r\n**Molecule 2.20.2**\r\n\r\nAll via pip\r\n\r\n# Actual Behaviour\r\n\r\n```bash\r\nmolecule verify\r\n```\r\n\r\nFails:\r\n\r\n```bash\r\n    ==================================== ERRORS ====================================\r\n    ________________ ERROR collecting shared/tests/test_default.py _________________\r\n    ../shared/tests/test_default.py:5: in <module>\r\n        os.environ['MOLECULE_INVENTORY_FILE']).get_hosts('all')\r\n    /usr/lib/python2.7/site-packages/testinfra/utils/ansible_runner.py:134: in get_hosts\r\n        print(self.inventory)\r\n    /usr/lib/python2.7/site-packages/testinfra/utils/__init__.py:44: in __get__\r\n        value = obj.__dict__[self.func.__name__] = self.func(obj)\r\n    /usr/lib/python2.7/site-packages/testinfra/utils/ansible_runner.py:154: in inventory\r\n        return get_ansible_inventory(self.ansible_config, self.inventory_file)\r\n    /usr/lib/python2.7/site-packages/testinfra/utils/ansible_runner.py:65: in get_ansible_inventory\r\n        return json.loads(local.check_output(cmd, *args))\r\n    /usr/lib64/python2.7/json/__init__.py:338: in loads\r\n        return _default_decoder.decode(s)\r\n    /usr/lib64/python2.7/json/decoder.py:366: in decode\r\n        obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n    /usr/lib64/python2.7/json/decoder.py:384: in raw_decode\r\n        raise ValueError(\"No JSON object could be decoded\")\r\n    E   ValueError: No JSON object could be decoded\r\n```\r\n\r\nGoing deeper:\r\n\r\n```\r\n/usr/lib/python2.7/site-packages/testinfra/utils/ansible_runner.py:154: in inventory\r\n        return get_ansible_inventory(self.ansible_config, self.inventory_file)\r\n    /usr/lib/python2.7/site-packages/testinfra/utils/ansible_runner.py:65: in get_ansible_inventory\r\n        return json.loads(local.check_output(cmd, *args))\r\n```\r\n\r\n**`local.check_output(cmd, *args)` returns verbose text.**\r\n\r\n`verbosity: 1`\r\n\r\n```\r\nUsing /tmp/molecule/zerodowntime.boto/libvirt/ansible.cfg as config file\r\n  {\r\n        \"_meta\": {\r\n.\r\n.\r\n}}\r\n```\r\n\r\n`verbosity: 2`\r\n\r\n```\r\nAnsible-inventory 2.8.2\r\n      config file = /tmp/molecule/zerodowntime.boto/libvirt/ansible.cfg\r\n      configured module search path = [u'/usr/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries', u'/tmp/molecule/zerodowntime.boto/libvirt/library', u'/zerodowntime.boto/library']\r\n      ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n      executable location = /usr/bin/ansible-inventory\r\n      python version = 2.7.5 (default, Jun 20 2019, 20:27:34) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\n    Using /tmp/molecule/zerodowntime.boto/libvirt/ansible.cfg as config file\r\n  {\r\n        \"_meta\": {\r\n.\r\n.\r\n}}\r\n```\r\n\r\nIt cannot be dumped to json then\r\n\r\nAfter cutting verbose lines to just pure \r\n```\r\n{\r\n        \"_meta\": {\r\n.\r\n.\r\n}}\r\n```\r\n\r\nit works.\r\n\r\n# Desired Behavior\r\n\r\nIt worked for molecule 2.20.0 ok with new it crashes. \r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2188/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2188/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2186", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2186/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2186/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2186/events", "html_url": "https://github.com/ansible-community/molecule/issues/2186", "id": 473333140, "node_id": "MDU6SXNzdWU0NzMzMzMxNDA=", "number": 2186, "title": "platforms / env: AnsibleUndefinedVariable: 'dict object' has no attribute 'iteritems'\"", "user": {"login": "src386", "id": 7580396, "node_id": "MDQ6VXNlcjc1ODAzOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7580396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/src386", "html_url": "https://github.com/src386", "followers_url": "https://api.github.com/users/src386/followers", "following_url": "https://api.github.com/users/src386/following{/other_user}", "gists_url": "https://api.github.com/users/src386/gists{/gist_id}", "starred_url": "https://api.github.com/users/src386/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/src386/subscriptions", "organizations_url": "https://api.github.com/users/src386/orgs", "repos_url": "https://api.github.com/users/src386/repos", "events_url": "https://api.github.com/users/src386/events{/privacy}", "received_events_url": "https://api.github.com/users/src386/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-07-26T12:25:49Z", "updated_at": "2019-07-26T14:47:01Z", "closed_at": "2019-07-26T13:46:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.8.3\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/xavier/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/xavier/.local/lib/python3.7/site-packages/ansible\r\n  executable location = /home/xavier/.local/bin/ansible\r\n  python version = 3.7.3 (default, Apr  3 2019, 05:39:12) [GCC 8.3.0]\r\nmolecule, version 2.20.2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip3\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip3\r\n\r\n# Desired Behavior\r\n\r\nmolecule.yml:\r\n```\r\nplatforms:\r\n  - name: instance\r\n    image: centos:7\r\n    env:\r\n      foo: bar\r\n```\r\n\r\nI expect foo=bar to be passed during Docker build. Used to work for a long time.\r\n\r\n# Actual Behaviour\r\n\r\n`env` seems to not work at all, whatever the variable type and value. Always crashes:\r\n\r\n```\r\nTASK [Create Dockerfiles from image names] *************************************\r\n    task path: /home/xavier/.local/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:21\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: xavier\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~xavier && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/xavier/.ansible/tmp/ansible-tmp-1564143768.866613-11304981205851 `\" && echo ansible-tmp-1564143768.866613-11304981205851=\"` echo /home/xavier/.ansible/tmp/ansible-tmp-1564143768.866613-11304981205851 `\" ) && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/xavier/.ansible/tmp/ansible-tmp-1564143768.866613-11304981205851/ > /dev/null 2>&1 && sleep 0'\r\n    failed: [localhost] (item={'name': 'instance', 'image': 'centos:7', 'env': {'foo': 'bar'}}) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"item\": {\r\n            \"env\": {\r\n                \"foo\": \"bar\"\r\n            },\r\n            \"image\": \"centos:7\",\r\n            \"name\": \"instance\"\r\n        },\r\n        \"msg\": \"AnsibleUndefinedVariable: 'dict object' has no attribute 'iteritems'\"\r\n    }\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2186/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2183", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2183/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2183/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2183/events", "html_url": "https://github.com/ansible-community/molecule/pull/2183", "id": 472440619, "node_id": "MDExOlB1bGxSZXF1ZXN0MzAwODQ4NDA4", "number": 2183, "title": "Internally use docker module from Ansible 2.9", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-07-24T18:45:26Z", "updated_at": "2019-09-14T18:46:23Z", "closed_at": "2019-09-14T18:46:23Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2183", "html_url": "https://github.com/ansible-community/molecule/pull/2183", "diff_url": "https://github.com/ansible-community/molecule/pull/2183.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2183.patch", "merged_at": null}, "body": "In order to enable molecule to make (internal) use of features or fixes that are not available in older versions of Ansible we temporary fork docker_image module from Ansible 2.9. \r\n\r\nThis would only by used internally by molecule during docker create and there are no risks of altering the behavior of tested playbooks as the modules are loaded with different names.\r\n \r\nFixes: #2182 \r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2183/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2182", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2182/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2182/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2182/events", "html_url": "https://github.com/ansible-community/molecule/issues/2182", "id": 472439019, "node_id": "MDU6SXNzdWU0NzI0MzkwMTk=", "number": 2182, "title": "molecule is unable to build containers which need custom /etc/hosts entries", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-24T18:42:55Z", "updated_at": "2020-02-01T19:10:16Z", "closed_at": "2020-02-01T19:10:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Due to missing feature in ansible docker_image module we are unable to pass etc_param to alter it. We already support this for running the container but for building it not, so we may fail to create it.\r\n\r\nWe cannot fix this until https://github.com/ansible/ansible/issues/59233 is fixed and released.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2182/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2182/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2181", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2181/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2181/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2181/events", "html_url": "https://github.com/ansible-community/molecule/issues/2181", "id": 472416500, "node_id": "MDU6SXNzdWU0NzI0MTY1MDA=", "number": 2181, "title": "presence of futures==3.1.1 can break molecule", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/17", "html_url": "https://github.com/ansible-community/molecule/milestone/17", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/17/labels", "id": 4435282, "node_id": "MDk6TWlsZXN0b25lNDQzNTI4Mg==", "number": 17, "title": "3.0", "description": "Please see new Roadmap documentation on https://docs.ansible.com/ansible/latest/index.html ", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 82, "state": "closed", "created_at": "2019-06-24T09:04:57Z", "updated_at": "2020-02-23T20:19:07Z", "due_on": "2020-02-21T08:00:00Z", "closed_at": "2020-02-23T10:45:43Z"}, "comments": 13, "created_at": "2019-07-24T17:53:30Z", "updated_at": "2019-09-16T15:03:47Z", "closed_at": "2019-09-15T20:53:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I discovered that presence of `futures==3.1.1` would break ansible/molecule. Removal fixed the issue. \r\n\r\nI am not yet sure what installed it so I am unsure how we can prevent it, as it not listed as a dependendecy. Still, it could prove useful to share it.\r\n```\r\n$ molecule create                                                                                                                                                         --> Validating schema /Users/ssbarnea/rdo/rdo-infra/testproject/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 create\r\n    \u2514\u2500\u2500 prepare\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nProceed (y/n)? Traceback (most recent call last):\r\n  File \"/Users/ssbarnea/.pyenv/versions/3.6.8/bin/ansible-playbook\", line 7, in <module>\r\n    exec(compile(f.read(), __file__, 'exec'))\r\n  File \"/Users/ssbarnea/os/ansible/bin/ansible-playbook\", line 61, in <module>\r\n    import ansible.constants as C\r\n  File \"/Users/ssbarnea/os/ansible/lib/ansible/constants.py\", line 12, in <module>\r\n    from jinja2 import Template\r\n  File \"/Users/ssbarnea/.pyenv/versions/3.6.8/lib/python3.6/site-packages/jinja2/__init__.py\", line 82, in <module>\r\n    _patch_async()\r\n  File \"/Users/ssbarnea/.pyenv/versions/3.6.8/lib/python3.6/site-packages/jinja2/__init__.py\", line 78, in _patch_async\r\n    from jinja2.asyncsupport import patch_all\r\n  File \"/Users/ssbarnea/.pyenv/versions/3.6.8/lib/python3.6/site-packages/jinja2/asyncsupport.py\", line 13, in <module>\r\n    import asyncio\r\n  File \"/Users/ssbarnea/.pyenv/versions/3.6.8/lib/python3.6/asyncio/__init__.py\", line 21, in <module>\r\n    from .base_events import *\r\n  File \"/Users/ssbarnea/.pyenv/versions/3.6.8/lib/python3.6/asyncio/base_events.py\", line 17, in <module>\r\n    import concurrent.futures\r\n  File \"/Users/ssbarnea/.pyenv/versions/3.6.8/lib/python3.6/site-packages/concurrent/futures/__init__.py\", line 8, in <module>\r\n    from concurrent.futures._base import (FIRST_COMPLETED,\r\n  File \"/Users/ssbarnea/.pyenv/versions/3.6.8/lib/python3.6/site-packages/concurrent/futures/_base.py\", line 381\r\n    raise exception_type, self._exception, self._traceback\r\n                        ^\r\nSyntaxError: invalid syntax\r\n```\r\n\r\nSimilar to https://github.com/pypa/pipenv/issues/1753\r\n\r\nTracked upstream as https://github.com/agronholm/pythonfutures/issues/90", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2181/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2181/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2178", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2178/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2178/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2178/events", "html_url": "https://github.com/ansible-community/molecule/issues/2178", "id": 470970852, "node_id": "MDU6SXNzdWU0NzA5NzA4NTI=", "number": 2178, "title": "ConfigDoesNotExistException", "user": {"login": "flazzarini", "id": 970874, "node_id": "MDQ6VXNlcjk3MDg3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/970874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flazzarini", "html_url": "https://github.com/flazzarini", "followers_url": "https://api.github.com/users/flazzarini/followers", "following_url": "https://api.github.com/users/flazzarini/following{/other_user}", "gists_url": "https://api.github.com/users/flazzarini/gists{/gist_id}", "starred_url": "https://api.github.com/users/flazzarini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flazzarini/subscriptions", "organizations_url": "https://api.github.com/users/flazzarini/orgs", "repos_url": "https://api.github.com/users/flazzarini/repos", "events_url": "https://api.github.com/users/flazzarini/events{/privacy}", "received_events_url": "https://api.github.com/users/flazzarini/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-22T08:48:58Z", "updated_at": "2019-07-24T08:53:50Z", "closed_at": "2019-07-24T08:53:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.2\r\n  config file = /home/users/frank/workspace/ansible/ansible.cfg\r\n  configured module search path = ['/home/users/frank/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/users/frank/.local/lib/python3.5/site-packages/ansible\r\n  executable location = /home/users/frank/.local/bin/ansible\r\n  python version = 3.5.2 (default, Nov 12 2018, 13:43:14) [GCC 5.4.0 20160609]\r\nmolecule, version 2.22rc3\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip (user install)\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip (user install)\r\n\r\n# Desired Behavior\r\n\r\nCreate new ansible role using ``molecule init role r foobar``\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n$ molecule init role -r foobar\r\n--> Initializing new role foobar...\r\nTraceback (most recent call last):\r\n  File \"/home/users/frank/.local/bin/molecule\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/molecule/command/init/role.py\", line 160, in role\r\n    r.execute()\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/molecule/command/init/role.py\", line 80, in execute\r\n    role_directory)\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/molecule/command/init/base.py\", line 64, in _process_templates\r\n    no_input=True,\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/cookiecutter/main.py\", line 54, in cookiecutter\r\n    default_config=default_config,\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/cookiecutter/config.py\", line 124, in get_user_config\r\n    return get_config(env_config_file)\r\n  File \"/home/users/frank/.local/lib/python3.5/site-packages/cookiecutter/config.py\", line 64, in get_config\r\n    raise ConfigDoesNotExistException\r\ncookiecutter.exceptions.ConfigDoesNotExistException\r\n```\r\n\r\nPlease note I have a local ``~/.cookiecutterrc`` file.\r\n\r\n```\r\ndefault_context:\r\n    full_name: \"Frank Lazzarini\"\r\n    email: \"<obfuscated>\"\r\nabbreviations:\r\n    py: <obfuscated_url>\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2178/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2171", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2171/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2171/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2171/events", "html_url": "https://github.com/ansible-community/molecule/issues/2171", "id": 466984283, "node_id": "MDU6SXNzdWU0NjY5ODQyODM=", "number": 2171, "title": "Does not support file parameter of include_tasks module", "user": {"login": "codrcodz", "id": 10582704, "node_id": "MDQ6VXNlcjEwNTgyNzA0", "avatar_url": "https://avatars.githubusercontent.com/u/10582704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codrcodz", "html_url": "https://github.com/codrcodz", "followers_url": "https://api.github.com/users/codrcodz/followers", "following_url": "https://api.github.com/users/codrcodz/following{/other_user}", "gists_url": "https://api.github.com/users/codrcodz/gists{/gist_id}", "starred_url": "https://api.github.com/users/codrcodz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codrcodz/subscriptions", "organizations_url": "https://api.github.com/users/codrcodz/orgs", "repos_url": "https://api.github.com/users/codrcodz/repos", "events_url": "https://api.github.com/users/codrcodz/events{/privacy}", "received_events_url": "https://api.github.com/users/codrcodz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-11T16:09:45Z", "updated_at": "2019-07-12T14:11:34Z", "closed_at": "2019-07-12T14:11:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible Details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.8.0\r\n  config file = /home/user/.ansible.cfg\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/user/.pyenv/versions/3.7.3/lib/python3.7/site-packages/ansible\r\n  executable location = /home/user/.pyenv/versions/3.7.3/bin/ansible\r\n  python version = 3.7.3 (default, Jun  7 2019, 07:49:31) [GCC 7.4.0]\r\nmolecule, version 2.20.1\r\n```\r\n\r\n# Molecule Installation Method\r\n- pip3 (via a python v3.7.3 pyenv)\r\n\r\n# Ansible Installation Method\r\n- pip3 (via a python v3.7.3 pyenv)\r\n\r\n# Steps to Reproduce\r\n```\r\ncd /<some_test_directory>;\r\nmolecule init role -r test;\r\n```\r\n\r\n#### Add this to tasks/main.yml\r\n```\r\n---\r\n- name: include tasks from test.yml\r\n  include_tasks:\r\n    file: \"test.yml\"\r\n...\r\n```\r\n\r\n#### Add this to tasks/test.yml\r\n```\r\n---\r\n- name: test\r\n  debug:\r\n    msg: test\r\n...\r\n```\r\n#### Replace contents of meta/main.yml with info below so linting won't fail\r\n```\r\n---\r\ngalaxy_info:\r\n  author: me\r\n  description: stuff\r\n  company: mycorp\r\n  license: MIT\r\n  min_ansible_version: 2.8\r\n  platforms:\r\n    - name: Fedora\r\n      versions:\r\n        - all\r\n  galaxy_tags: []\r\ndependencies: []\r\n...\r\n```\r\n\r\n# Desired Behavior\r\n_(truncated for brevity)_\r\nMolecule does **NOT** throw this error after the linting phase, because the file actually exists:\r\n```\r\nWARNING: Couldn't open /home/user/projects/test/tasks/{'file': - No such file or directory\r\n```\r\n\r\n# Actual Behavior\r\n_(truncated for brevity)_\r\nMolecule throws this output, including the undesired error, after the linting phase:\r\n```\r\nDEBUG: COMMAND\r\n/home/user/.pyenv/versions/3.7.3/bin/ansible-lint -v --exclude=/tmp/molecule/test/default /home/user/projects/test/molecule/default/playbook.yml\r\n\r\n    Examining /home/user/projects/test/molecule/default/playbook.yml of type playbook\r\n    Examining /home/user/projects/test/tasks/test.yml of type tasks\r\n    Examining /home/user/projects/test/tasks/main.yml of type tasks\r\n    Examining /home/user/projects/test/handlers/main.yml of type handlers\r\n    Examining /home/user/projects/test/meta/main.yml of type meta\r\n    Examining /home/user/projects/test/tasks/{'file': of type tasks\r\nWARNING: Couldn't open /home/user/projects/test/tasks/{'file': - No such file or directory\r\nLint completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2171/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2171/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2170", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2170/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2170/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2170/events", "html_url": "https://github.com/ansible-community/molecule/pull/2170", "id": 466500970, "node_id": "MDExOlB1bGxSZXF1ZXN0Mjk2MzI5MjAx", "number": 2170, "title": " fixes #2150: Vagrant driver regression", "user": {"login": "jonasjoest", "id": 41778330, "node_id": "MDQ6VXNlcjQxNzc4MzMw", "avatar_url": "https://avatars.githubusercontent.com/u/41778330?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonasjoest", "html_url": "https://github.com/jonasjoest", "followers_url": "https://api.github.com/users/jonasjoest/followers", "following_url": "https://api.github.com/users/jonasjoest/following{/other_user}", "gists_url": "https://api.github.com/users/jonasjoest/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonasjoest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonasjoest/subscriptions", "organizations_url": "https://api.github.com/users/jonasjoest/orgs", "repos_url": "https://api.github.com/users/jonasjoest/repos", "events_url": "https://api.github.com/users/jonasjoest/events{/privacy}", "received_events_url": "https://api.github.com/users/jonasjoest/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-07-10T20:22:39Z", "updated_at": "2020-02-17T16:38:10Z", "closed_at": "2019-08-04T12:11:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2170", "html_url": "https://github.com/ansible-community/molecule/pull/2170", "diff_url": "https://github.com/ansible-community/molecule/pull/2170.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2170.patch", "merged_at": "2019-08-04T12:11:05Z"}, "body": "#### PR Type:\r\nBugfix Pull Request\r\n\r\nFixes #2150 \r\n\r\n\r\n**Changes:**\r\nReturn environment variables if they are already set. This prevents the Ansible-Module `molecule-vagrant` from mistakenly appending another sub-path to the ephemeral directory in it's context.\r\n\r\n**Results when retrieving `config.ephemeral_directory` in `molecule-vagrant` Ansible-Module:**\r\nBefore (wrong):\r\n`$MOLECULE_EPHEMERAL_DIRECTORY/<CWD>/<SCENARIO_NAME>/`\r\nAfter (expected):\r\n`$MOLECULE_EPHEMERAL_DIRECTORY`", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2170/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2170/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2169", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2169/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2169/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2169/events", "html_url": "https://github.com/ansible-community/molecule/pull/2169", "id": 466433126, "node_id": "MDExOlB1bGxSZXF1ZXN0Mjk2Mjc0MDA3", "number": 2169, "title": "Upgrade testinfra", "user": {"login": "pilou-", "id": 1356830, "node_id": "MDQ6VXNlcjEzNTY4MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1356830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pilou-", "html_url": "https://github.com/pilou-", "followers_url": "https://api.github.com/users/pilou-/followers", "following_url": "https://api.github.com/users/pilou-/following{/other_user}", "gists_url": "https://api.github.com/users/pilou-/gists{/gist_id}", "starred_url": "https://api.github.com/users/pilou-/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pilou-/subscriptions", "organizations_url": "https://api.github.com/users/pilou-/orgs", "repos_url": "https://api.github.com/users/pilou-/repos", "events_url": "https://api.github.com/users/pilou-/events{/privacy}", "received_events_url": "https://api.github.com/users/pilou-/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1450797009, "node_id": "MDU6TGFiZWwxNDUwNzk3MDA5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/backport", "name": "backport", "color": "e51b2c", "default": false, "description": "backport of change to stable branch"}], "state": "closed", "locked": false, "assignee": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, {"login": "pilou-", "id": 1356830, "node_id": "MDQ6VXNlcjEzNTY4MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1356830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pilou-", "html_url": "https://github.com/pilou-", "followers_url": "https://api.github.com/users/pilou-/followers", "following_url": "https://api.github.com/users/pilou-/following{/other_user}", "gists_url": "https://api.github.com/users/pilou-/gists{/gist_id}", "starred_url": "https://api.github.com/users/pilou-/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pilou-/subscriptions", "organizations_url": "https://api.github.com/users/pilou-/orgs", "repos_url": "https://api.github.com/users/pilou-/repos", "events_url": "https://api.github.com/users/pilou-/events{/privacy}", "received_events_url": "https://api.github.com/users/pilou-/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-07-10T17:34:27Z", "updated_at": "2020-02-17T16:38:37Z", "closed_at": "2019-07-15T13:46:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2169", "html_url": "https://github.com/ansible-community/molecule/pull/2169", "diff_url": "https://github.com/ansible-community/molecule/pull/2169.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2169.patch", "merged_at": "2019-07-15T13:46:31Z"}, "body": "backport following commits:\r\n- 981048e65ba35465263c5efd2f37f1500b65bdc4\r\n- 3651120ae5514f5d7f144b5b4eb4bec535debdb5\r\n- 6b525f8b692a94dbaa72424c659c5fd08b41c992\r\n- 145640a3635c302832da4b67cc13a24e84f0b437\r\n\r\nThen 2.20.2 should be released :)\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2169/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2169/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2168", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2168/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2168/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2168/events", "html_url": "https://github.com/ansible-community/molecule/issues/2168", "id": 466296845, "node_id": "MDU6SXNzdWU0NjYyOTY4NDU=", "number": 2168, "title": "Address psutil dependency challenges ", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-10T13:02:47Z", "updated_at": "2019-09-15T20:48:07Z", "closed_at": "2019-09-15T20:48:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently molecule lists pstuil as a dependency just because that is a soft-dependency of the click-complete.\r\n\r\npsutil is not a pure-python package and needs to be compiled, making installation process slower and much more likely to fail.\r\n\r\nWe should investigate different approaches:\r\n\r\n* finding a replacement for psutil in our dependency or finding a [replacement for click-completion](https://github.com/click-contrib/click-completion/issues/25)\r\n* moving psutil inside an optional cli extra, as this is clearly not needed for CI usage.\r\n* convincing pstutil maintainers to [publish linux binaries on pypi](https://pypi.org/project/psutil/#files) for it. See https://github.com/giampaolo/psutil/issues/1550\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2168/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2168/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2166", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2166/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2166/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2166/events", "html_url": "https://github.com/ansible-community/molecule/issues/2166", "id": 466214844, "node_id": "MDU6SXNzdWU0NjYyMTQ4NDQ=", "number": 2166, "title": "Connect molecule to dynamic inventory (openshift inventory plugin)", "user": {"login": "catalinad90", "id": 52741776, "node_id": "MDQ6VXNlcjUyNzQxNzc2", "avatar_url": "https://avatars.githubusercontent.com/u/52741776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catalinad90", "html_url": "https://github.com/catalinad90", "followers_url": "https://api.github.com/users/catalinad90/followers", "following_url": "https://api.github.com/users/catalinad90/following{/other_user}", "gists_url": "https://api.github.com/users/catalinad90/gists{/gist_id}", "starred_url": "https://api.github.com/users/catalinad90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catalinad90/subscriptions", "organizations_url": "https://api.github.com/users/catalinad90/orgs", "repos_url": "https://api.github.com/users/catalinad90/repos", "events_url": "https://api.github.com/users/catalinad90/events{/privacy}", "received_events_url": "https://api.github.com/users/catalinad90/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-10T09:55:27Z", "updated_at": "2020-10-12T11:02:55Z", "closed_at": "2020-10-12T11:02:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.0\r\npython 2.7.5\r\nmolecule 2.19.0\r\n\r\n```\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n- source\r\nsource /data/.virtualenvs/ansible-2-7-0/bin/activate\r\n\r\nDetail any linters or test runners used:\r\ntestinfra\r\n\r\n# Desired Behavior\r\n\r\nIs it possible to integrate an inventory plugin (ex: k8s, openshift) into molecule? At the moment the inventory plugin runs fine in the ansible role: it connects to openshift to a certain project and runs a command into a container.\r\n\r\n# Actual Behaviour\r\n\r\nI would like to integrate the dynamic inventory into molecule so we can run our functional tests with molecule verify (testinfra).\r\nAlready tried using in the molecule.yml file: \r\n-> env variables:\r\nMOLECULE_INVENTORY_FILE: /home/user/inventorytest/delegate/inventory/openshift.yml\r\n-> via hosts:\r\ninventory:\r\n    links:\r\n      hosts: ../.../inventory\r\nThis one fails with this error: OSError: [Errno 17] File exists (From what I read it's because of the molecule version)\r\n\r\nCan you provide some hints? I am bit new with testinfra and molecule.\r\n\r\nThanks! :)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2166/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2166/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2164", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2164/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2164/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2164/events", "html_url": "https://github.com/ansible-community/molecule/issues/2164", "id": 465435141, "node_id": "MDU6SXNzdWU0NjU0MzUxNDE=", "number": 2164, "title": "(docker) Gathering facts and command module fails on Alpine", "user": {"login": "iridian-ks", "id": 442359, "node_id": "MDQ6VXNlcjQ0MjM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/442359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iridian-ks", "html_url": "https://github.com/iridian-ks", "followers_url": "https://api.github.com/users/iridian-ks/followers", "following_url": "https://api.github.com/users/iridian-ks/following{/other_user}", "gists_url": "https://api.github.com/users/iridian-ks/gists{/gist_id}", "starred_url": "https://api.github.com/users/iridian-ks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iridian-ks/subscriptions", "organizations_url": "https://api.github.com/users/iridian-ks/orgs", "repos_url": "https://api.github.com/users/iridian-ks/repos", "events_url": "https://api.github.com/users/iridian-ks/events{/privacy}", "received_events_url": "https://api.github.com/users/iridian-ks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-07-08T20:02:41Z", "updated_at": "2020-01-14T13:57:57Z", "closed_at": "2020-01-14T13:57:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nI'm running Molecule through a docker container on macOS (Docker for Mac). I'm using the image: `quay.io/ansible/molecule:2.20.1`.\r\n\r\n```\r\ndocker run --rm -ti --net host --env DOCKER_HOST=\"tcp://host.docker.internal:2375\" --workdir /workspace --volume $HOME/Code/playbooks:/workspace --volume $HOME/.ssh:/root/.ssh --volume $HOME/.kube:/root/.kube --entrypoint molecule  <my-image>  --version\r\nmolecule, version 2.20.1\r\ndocker run --rm -ti --net host --env DOCKER_HOST=\"tcp://host.docker.internal:2375\" --workdir /workspace --volume $HOME/Code/playbooks:/workspace --volume $HOME/.ssh:/root/.ssh --volume $HOME/.kube:/root/.kube --entrypoint ansible  <my-image> --extra-vars \"@out/variables.yaml\" -vvvv --version\r\nansible 2.7.10\r\n  config file = /workspace/ansible.cfg\r\n  configured module search path = ['/workspace/library']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.3 (default, Apr 10 2019, 01:29:41) [GCC 8.3.0]\r\ndocker run --rm -ti --net host --env DOCKER_HOST=\"tcp://host.docker.internal:2375\" --workdir /workspace --volume $HOME/Code/playbooks:/workspace --volume /$HOME/.ssh:/root/.ssh --volume $HOME.kube:/root/.kube --entrypoint ansible-config  <my-image>  dump --only-changed\r\nANSIBLE_NOCOWS(/workspace/ansible.cfg) = True\r\nANSIBLE_PIPELINING(/workspace/ansible.cfg) = True\r\nDEFAULT_GATHERING(/workspace/ansible.cfg) = smart\r\nDEFAULT_HOST_LIST(/workspace/ansible.cfg) = ['/workspace/inventory/hosts.yaml', '/workspace/inventory/k8s.yaml']\r\nDEFAULT_MODULE_PATH(/workspace/ansible.cfg) = ['/workspace/library']\r\nDEFAULT_ROLES_PATH(/workspace/ansible.cfg) = ['/workspace/roles']\r\nDEFAULT_SCP_IF_SSH(/workspace/ansible.cfg) = True\r\nHOST_KEY_CHECKING(/workspace/ansible.cfg) = False\r\nINVENTORY_ENABLED(/workspace/ansible.cfg) = ['auto', 'yaml']\r\nRETRY_FILES_ENABLED(/workspace/ansible.cfg) = False\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker\r\n\r\nAnsible installation method (one of):\r\n\r\n- docker\r\n\r\nDetail any linters or test runners used:\r\n\r\nI'm using all defaults\r\n\r\n# Desired Behavior\r\n\r\nGathering facts to succeed\r\n\r\n# Actual Behaviour\r\n\r\nCommand ran:\r\n\r\n```\r\n+ docker run --rm -ti --net host --env DOCKER_HOST=tcp://host.docker.internal:2375 --workdir /workspace/roles/myorg.kubectl --volume $HOME/Code/playbooks:/workspace --volume $HOME/.ssh:/root/.ssh --volume $HOME/.kube:/root/.kube --entrypoint molecule myorg/ansible:alpine --debug test\r\n```\r\n\r\nHere's the converge stage:\r\n\r\n```\r\n--> Action: 'converge'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /tmp/molecule/my-role/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/local/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/tmp/molecule/myorg.kubectl/default/plugins/filters:/workspace/roles/myorg.kubectl/plugins/filters\r\nANSIBLE_FORCE: '1'\r\nANSIBLE_LIBRARY: /usr/local/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/tmp/molecule/myorg.kubectl/default/library:/workspace/roles/myorg.kubectl/library\r\nANSIBLE_PLAYBOOK_BIN: ansible-playbook\r\nANSIBLE_ROLES_PATH: /tmp/molecule/myorg.kubectl/default/roles:/workspace/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /workspace/roles/myorg.kubectl/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /tmp/molecule/myorg.kubectl/default\r\nMOLECULE_EXTRAS: azure,docker,docs,ec2,gce,linode,lxc,openstack,vagrant,windows\r\nMOLECULE_FILE: /workspace/roles/myorg.kubectl/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /tmp/molecule/myorg.kubectl/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /tmp/molecule/myorg.kubectl/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /workspace/roles/myorg.kubectl\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /workspace/roles/myorg.kubectl/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /workspace/roles/myorg.kubectl/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/tmp/molecule/myorg.kubectl/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/local/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/tmp/molecule/myorg.kubectl/default/plugins/filters:/workspace/roles/myorg.kubectl/plugins/filters ANSIBLE_FORCE=1 ANSIBLE_LIBRARY=/usr/local/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/tmp/molecule/myorg.kubectl/default/library:/workspace/roles/myorg.kubectl/library ANSIBLE_PLAYBOOK_BIN=ansible-playbook ANSIBLE_ROLES_PATH=/tmp/molecule/myorg.kubectl/default/roles:/workspace/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/workspace/roles/myorg.kubectl/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/tmp/molecule/myorg.kubectl/default MOLECULE_EXTRAS=azure,docker,docs,ec2,gce,linode,lxc,openstack,vagrant,windows MOLECULE_FILE=/workspace/roles/myorg.kubectl/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/tmp/molecule/myorg.kubectl/default/instance_config.yml MOLECULE_INVENTORY_FILE=/tmp/molecule/myorg.kubectl/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/workspace/roles/myorg.kubectl MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/workspace/roles/myorg.kubectl/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/workspace/roles/myorg.kubectl/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/usr/local/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/tmp/molecule/myorg.kubectl/default/inventory /workspace/roles/myorg.kubectl/molecule/default/playbook.yml -vvv\r\n\r\n    ansible-playbook 2.7.10\r\n      config file = /tmp/molecule/myorg.kubectl/default/ansible.cfg\r\n      configured module search path = ['/usr/local/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries', '/tmp/molecule/myorg.kubectl/default/library', '/workspace/roles/myorg.kubectl/library']\r\n      ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n      executable location = /usr/local/bin/ansible-playbook\r\n      python version = 3.7.3 (default, Apr 10 2019, 01:29:41) [GCC 8.3.0]\r\n    Using /tmp/molecule/myorg.kubectl/default/ansible.cfg as config file\r\n    /tmp/molecule/myorg.kubectl/default/inventory/ansible_inventory.yml did not meet host_list requirements, check plugin documentation if this is unexpected\r\n    /tmp/molecule/myorg.kubectl/default/inventory/ansible_inventory.yml did not meet script requirements, check plugin documentation if this is unexpected\r\n    Parsed /tmp/molecule/myorg.kubectl/default/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: playbook.yml *********************************************************\r\n    1 plays in /workspace/roles/myorg.kubectl/molecule/default/playbook.yml\r\n\r\n    PLAY [Converge] ****************************************************************\r\n\r\n    TASK [Gathering Facts] *********************************************************\r\n    task path: /workspace/roles/myorg.kubectl/molecule/default/playbook.yml:3\r\n    <instance> ESTABLISH DOCKER CONNECTION FOR USER: root\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c 'echo ~ && sleep 0'\"]\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', '/bin/sh -c \\'( umask 77 && mkdir -p \"` echo /root/.ansible/tmp/ansible-tmp-1562614912.0146432-130364147191580 `\" && echo ansible-tmp-1562614912.0146432-130364147191580=\"` echo /root/.ansible/tmp/ansible-tmp-1562614912.0146432-130364147191580 `\" ) && sleep 0\\'']\r\n    Using module file /usr/local/lib/python3.7/site-packages/ansible/modules/system/setup.py\r\n    <instance> PUT /root/.ansible/tmp/ansible-local-2239sutxv71/tmp3_ke6d9e TO /root/.ansible/tmp/ansible-tmp-1562614912.0146432-130364147191580/AnsiballZ_setup.py\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1562614912.0146432-130364147191580/ /root/.ansible/tmp/ansible-tmp-1562614912.0146432-130364147191580/AnsiballZ_setup.py && sleep 0'\"]\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1562614912.0146432-130364147191580/AnsiballZ_setup.py && sleep 0'\"]\r\n    <instance> EXEC ['/usr/bin/docker', b'exec', b'-i', 'instance', '/bin/sh', '-c', \"/bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1562614912.0146432-130364147191580/ > /dev/null 2>&1 && sleep 0'\"]\r\n    fatal: [instance]: FAILED! => {\r\n        \"changed\": false,\r\n        \"module_stderr\": \"\",\r\n        \"module_stdout\": \"\",\r\n        \"msg\": \"MODULE FAILURE\\nSee stdout/stderr for the exact error\",\r\n        \"rc\": 0\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n    instance                   : ok=0    changed=0    unreachable=0    failed=1\r\n\r\n\r\nERROR:\r\nAn error occurred during the test sequence action: 'converge'. Cleaning up.\r\n```\r\n\r\nThe molecule.yml I'm using:\r\n\r\n```\r\n---\r\nplatforms:\r\n  - name: instance\r\n    image: alpine:3.10\r\n    override_command: false\r\nprovisioner:\r\n  log: true\r\n```\r\n\r\nDockerfile.j2\r\n\r\n```\r\nFROM alpine:3.10\r\n\r\nRUN apk add --no-cache --update python\r\n\r\nCMD [\"/bin/sh\", \"-c\", \"while true; do sleep 1h; done\"]\r\n```\r\n\r\nI'm also tried python3, and changed the interpreter path to /usr/bin/python3\r\nI also tried the molecule image (yes, testing a molecule image using molecule).\r\nI also tried using the python image. python:3-alpine.\r\n\r\nThe playbook yaml is:\r\n\r\n```\r\n---\r\n\r\n- name: Converge\r\n  hosts: all\r\n  become: false\r\n  roles:\r\n    - role: myorg.kubectl\r\n```\r\n\r\nThe role simply runs an install, but it's not even getting to the point where it's running the role since it fails on gathering facts. If I set `gather_facts` to false it will get to the role and then fail because I'm using the `ansible_os_family` variable.\r\n\r\nAs a test, I wanted to see if this was an Alpine issue specifically or something else so I tried on Debian stretch using the `python:3-stretch` image and I'm seeing the same error.\r\n\r\nI would debug and try to resolve this issue myself, but the output does not have any information even with --debug set.\r\n\r\nI'm using these roles to provision containers already and they are succeeding when running `ansible-playbook` inside a container via `docker build`.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2164/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2162", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2162/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2162/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2162/events", "html_url": "https://github.com/ansible-community/molecule/pull/2162", "id": 465383712, "node_id": "MDExOlB1bGxSZXF1ZXN0Mjk1NDM1MTc0", "number": 2162, "title": "Make sure unwanted payloads are skipped", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 842110976, "node_id": "MDU6TGFiZWw4NDIxMTA5NzY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/major", "name": "major", "color": "c6476b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/18", "html_url": "https://github.com/ansible-community/molecule/milestone/18", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/18/labels", "id": 4481102, "node_id": "MDk6TWlsZXN0b25lNDQ4MTEwMg==", "number": 18, "title": "2.22rc4", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2019-07-10T14:48:07Z", "updated_at": "2019-08-22T12:16:44Z", "due_on": null, "closed_at": "2019-08-22T12:16:44Z"}, "comments": 2, "created_at": "2019-07-08T17:48:07Z", "updated_at": "2019-07-15T13:31:09Z", "closed_at": "2019-07-15T13:30:43Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2162", "html_url": "https://github.com/ansible-community/molecule/pull/2162", "diff_url": "https://github.com/ansible-community/molecule/pull/2162.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2162.patch", "merged_at": "2019-07-15T13:30:43Z"}, "body": "See https://github.com/ansible/molecule/pull/2162#issuecomment-510373989.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2162/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2159", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2159/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2159/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2159/events", "html_url": "https://github.com/ansible-community/molecule/issues/2159", "id": 464960472, "node_id": "MDU6SXNzdWU0NjQ5NjA0NzI=", "number": 2159, "title": "Add test suite for the Podman driver", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-07T14:49:47Z", "updated_at": "2019-10-24T10:31:25Z", "closed_at": "2019-10-24T10:31:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See https://github.com/ansible/molecule/issues/2158.\r\n\r\nAnd https://github.com/ansible/molecule/issues/2158#issuecomment-509005470.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2159/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2159/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2158", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2158/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2158/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2158/events", "html_url": "https://github.com/ansible-community/molecule/issues/2158", "id": 464879001, "node_id": "MDU6SXNzdWU0NjQ4NzkwMDE=", "number": 2158, "title": "The Podman driver crashes", "user": {"login": "it-praktyk", "id": 4910261, "node_id": "MDQ6VXNlcjQ5MTAyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/4910261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/it-praktyk", "html_url": "https://github.com/it-praktyk", "followers_url": "https://api.github.com/users/it-praktyk/followers", "following_url": "https://api.github.com/users/it-praktyk/following{/other_user}", "gists_url": "https://api.github.com/users/it-praktyk/gists{/gist_id}", "starred_url": "https://api.github.com/users/it-praktyk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/it-praktyk/subscriptions", "organizations_url": "https://api.github.com/users/it-praktyk/orgs", "repos_url": "https://api.github.com/users/it-praktyk/repos", "events_url": "https://api.github.com/users/it-praktyk/events{/privacy}", "received_events_url": "https://api.github.com/users/it-praktyk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-07-06T18:24:24Z", "updated_at": "2019-07-08T17:48:13Z", "closed_at": "2019-07-08T17:48:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n\r\n```\r\nansible 2.8.1\r\n  config file = None\r\n  configured module search path = ['/home/<user_name>/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/<user_name>/Python-virtualenv/ansible-2.8.1/lib/python3.7/site-packages/ansible\r\n  executable location = /home/<user_name>/Python-virtualenv/ansible-2.8.1/bin/ansible\r\n  python version = 3.7.3 (default, May 11 2019, 00:38:04) [GCC 9.1.1 20190503 (Red Hat 9.1.1-1)]\r\n\r\nmolecule, version 2.22rc3\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nThe command `molecule test` will be executed successfully when the driver is set to `podman`.\r\n\r\n# Actual Behaviour\r\n\r\nThe molecule.yml file content\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: podman\r\nlint:\r\n  name: yamllint\r\n  options:\r\n    config-file: molecule/default/yaml-lint.yml\r\nplatforms:\r\n  - name: instance\r\n    image: \"geerlingguy/docker-${MOLECULE_DISTRO:-centos7}-ansible:latest\"\r\n    pull: true\r\n    command: ${MOLECULE_DOCKER_COMMAND:-\"\"}\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    privileged: true\r\n    pre_build_image: true\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\n  playbooks:\r\n    converge: ${MOLECULE_PLAYBOOK:-playbook.yml}\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\nThe executed command\r\n```\r\nMOLECULE_NO_LOG=no molecule --debug test\r\n```\r\n\r\nThe partial output\r\n\r\n```\r\nTASK [Build an Ansible compatible image] ***************************************\r\n    task path: /home/<user_name>/Python-virtualenv/ansible-2.8.1/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/podman/create.yml:40\r\n    fatal: [localhost]: FAILED! => {\r\n        \"msg\": \"The conditional check 'platforms.changed or podman_images.results | map(attribute='images') | select('equalto', []) | list | count >= 0' failed. The error was: error while evaluating conditional (platforms.changed or podman_images.results | map(attribute='images') | select('equalto', []) | list | count >= 0): 'dict object' has no attribute 'images'\\n\\nThe error appears to be in '/home/<user_name>/Python-virtualenv/ansible-2.8.1/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/podman/create.yml': line 40, column 7, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n\\n    - name: Build an Ansible compatible image\\n      ^ here\\n\"\r\n    }\r\n```\r\n\r\nThe full output available as [the gist](https://gist.github.com/it-praktyk/97c81315581dc2609b90c898c800ffa8).\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2158/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2150", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2150/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2150/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2150/events", "html_url": "https://github.com/ansible-community/molecule/issues/2150", "id": 464074738, "node_id": "MDU6SXNzdWU0NjQwNzQ3Mzg=", "number": 2150, "title": "Molecule 2.22rc3: Vagrant driver regression", "user": {"login": "techn0mad", "id": 254916, "node_id": "MDQ6VXNlcjI1NDkxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/254916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/techn0mad", "html_url": "https://github.com/techn0mad", "followers_url": "https://api.github.com/users/techn0mad/followers", "following_url": "https://api.github.com/users/techn0mad/following{/other_user}", "gists_url": "https://api.github.com/users/techn0mad/gists{/gist_id}", "starred_url": "https://api.github.com/users/techn0mad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/techn0mad/subscriptions", "organizations_url": "https://api.github.com/users/techn0mad/orgs", "repos_url": "https://api.github.com/users/techn0mad/repos", "events_url": "https://api.github.com/users/techn0mad/events{/privacy}", "received_events_url": "https://api.github.com/users/techn0mad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/18", "html_url": "https://github.com/ansible-community/molecule/milestone/18", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/18/labels", "id": 4481102, "node_id": "MDk6TWlsZXN0b25lNDQ4MTEwMg==", "number": 18, "title": "2.22rc4", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2019-07-10T14:48:07Z", "updated_at": "2019-08-22T12:16:44Z", "due_on": null, "closed_at": "2019-08-22T12:16:44Z"}, "comments": 7, "created_at": "2019-07-04T05:51:31Z", "updated_at": "2019-08-04T12:11:12Z", "closed_at": "2019-08-04T12:11:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nAnsible: 2.8.1\r\nMolecule 2.22rc3\r\n\r\nPython: 2.7.12\r\nVagrant: 2.0.2\r\nVirtualbox: 5.2.30r130521\r\nUbuntu 16.04.6 LTS x86_64\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nRunning Molecule test on a sample role with a Vagrant driver and a Virtualbox provider should result in a Virtualbox VM being brought up at some point.\r\n\r\n# Actual Behaviour\r\n\r\nDebug output snippet:\r\n\r\n```\r\n    TASK [Create molecule instance(s)] *********************************************\r\n    task path: /usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/playbooks/vagrant/create.yml:8\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: go\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~go && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /var/go/.ansible/tmp/ansible-tmp-1562189970.7-142759633793038 `\" && echo ansible-tmp-1562189970.7-142759633793038=\"` echo /var/go/.ansible/tmp/ansible-tmp-1562189970.7-142759633793038 `\" ) && sleep 0'\r\n    Using module file /usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/plugins/libraries/molecule_vagrant.py\r\n    <127.0.0.1> PUT /var/go/.ansible/tmp/ansible-local-10147KOol3i/tmpmVJNT9 TO /var/go/.ansible/tmp/ansible-tmp-1562189970.7-142759633793038/AnsiballZ_molecule_vagrant.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /var/go/.ansible/tmp/ansible-tmp-1562189970.7-142759633793038/ /var/go/.ansible/tmp/ansible-tmp-1562189970.7-142759633793038/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /var/go/.ansible/tmp/ansible-tmp-1562189970.7-142759633793038/AnsiballZ_molecule_vagrant.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /var/go/.ansible/tmp/ansible-tmp-1562189970.7-142759633793038/ > /dev/null 2>&1 && sleep 0'\r\n    The full traceback is:\r\n    WARNING: The below traceback may *not* be related to the actual failure.\r\n      File \"/tmp/ansible_molecule_vagrant_payload_VrLKoY/__main__.py\", line 395, in up\r\n        self._vagrant.up(provision=provision)\r\n      File \"/usr/local/lib/python2.7/dist-packages/vagrant/__init__.py\", line 337, in up\r\n        self._call_vagrant_command(args)\r\n      File \"/usr/local/lib/python2.7/dist-packages/vagrant/__init__.py\", line 963, in _call_vagrant_command\r\n        stderr=err_fh, env=self.env)\r\n      File \"/usr/lib/python2.7/subprocess.py\", line 541, in check_call\r\n        raise CalledProcessError(retcode, cmd)\r\n\r\n    failed: [localhost] (item={'box': u'ubuntu/xenial64', 'name': u'Ubuntu'}) => {\r\n        \"ansible_loop_var\": \"item\",\r\n        \"changed\": false,\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"config_options\": {},\r\n                \"force_stop\": false,\r\n                \"instance_interfaces\": [],\r\n                \"instance_name\": \"Ubuntu\",\r\n                \"instance_raw_config_args\": null,\r\n                \"platform_box\": \"ubuntu/xenial64\",\r\n                \"platform_box_url\": null,\r\n                \"platform_box_version\": null,\r\n                \"provider_cpus\": 2,\r\n                \"provider_memory\": 512,\r\n                \"provider_name\": \"virtualbox\",\r\n                \"provider_options\": {},\r\n                \"provider_override_args\": null,\r\n                \"provider_raw_config_args\": null,\r\n                \"provision\": false,\r\n                \"state\": \"up\"\r\n            }\r\n        },\r\n        \"item\": {\r\n            \"box\": \"ubuntu/xenial64\",\r\n            \"name\": \"Ubuntu\"\r\n        },\r\n        \"msg\": \"ERROR: See log file '/tmp/molecule/test-role-vagrant/default/vagrant-Ubuntu.err'\"\r\n    }\r\n```\r\n\r\nContent of sample error file identified in Molecule output:\r\n```\r\n### 2019-07-03 10:08:56 ###\r\n### 2019-07-03 10:08:56 ###\r\nA Vagrant environment or target machine is required to run this\r\ncommand. Run `vagrant init` to create a new Vagrant environment. Or,\r\nget an ID of a target machine from `vagrant global-status` to run\r\nthis command on. A final option is to change to a directory with a\r\nVagrantfile and to try again.\r\n```\r\n\r\nNote that with the same sample role and environment, rolling back to Molecule 2.20.1 via `pip install molecule==2.20.1` fixed the problem and Vagrant boxes were again created successfully.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2149", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2149/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2149/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2149/events", "html_url": "https://github.com/ansible-community/molecule/issues/2149", "id": 464031501, "node_id": "MDU6SXNzdWU0NjQwMzE1MDE=", "number": 2149, "title": "create playbook doesn't pass item.pull to docker_container so pre-build containers are not updated..", "user": {"login": "skyscooby", "id": 4450935, "node_id": "MDQ6VXNlcjQ0NTA5MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4450935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skyscooby", "html_url": "https://github.com/skyscooby", "followers_url": "https://api.github.com/users/skyscooby/followers", "following_url": "https://api.github.com/users/skyscooby/following{/other_user}", "gists_url": "https://api.github.com/users/skyscooby/gists{/gist_id}", "starred_url": "https://api.github.com/users/skyscooby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skyscooby/subscriptions", "organizations_url": "https://api.github.com/users/skyscooby/orgs", "repos_url": "https://api.github.com/users/skyscooby/repos", "events_url": "https://api.github.com/users/skyscooby/events{/privacy}", "received_events_url": "https://api.github.com/users/skyscooby/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-04T02:36:45Z", "updated_at": "2019-08-22T15:51:54Z", "closed_at": "2019-08-22T15:51:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nTried setting pull: true in molecule.yml but newer latest image is not actually pullled..\r\n`item.item.pre_build_image = True` for me.. today pull is only used when containers are build locally.\r\n\r\nShould the call to this module not pass the pull parameter?\r\nhttps://github.com/ansible/molecule/blob/master/molecule/provisioner/ansible/playbooks/docker/create.yml#L123\r\n\r\nAs documented here?\r\nhttps://molecule.readthedocs.io/en/stable/configuration.html#docker\r\n\r\n# Desired Behavior\r\n\r\nif pull: true is set for the platform.. it should pull the latest image.\r\n\r\n# Actual Behaviour\r\n\r\nA fresh latest image is not pulled.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2149/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2145", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2145/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2145/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2145/events", "html_url": "https://github.com/ansible-community/molecule/issues/2145", "id": 463796187, "node_id": "MDU6SXNzdWU0NjM3OTYxODc=", "number": 2145, "title": "sort warnings and deprecation warnings in molecule dependencies", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-03T14:47:15Z", "updated_at": "2020-02-15T18:59:26Z", "closed_at": "2020-02-15T18:59:26Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is a tracking ticket for sorting warnings from molecule own dependencies. As a testing tool we should aim to avoid creating noise when users are using it.\r\n\r\n```\r\n.tox/py27-ansible25-unit/lib/python3.6/site-packages/tabulate.py:192\r\n  /Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.6/site-packages/tabulate.py:192: DeprecationWarning: invalid escape sequence \\h\r\n    \"\\\\toprule\" if booktabs else \"\\hline\"])\r\n\r\n.tox/py27-ansible25-unit/lib/python3.6/site-packages/tabulate.py:415\r\n  /Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.6/site-packages/tabulate.py:415: DeprecationWarning: invalid escape sequence \\[\r\n    _invisible_codes_bytes = re.compile(b\"\\x1b\\[\\d+[;\\d]*m|\\x1b\\[\\d*\\;\\d*\\;\\d*m\")  # ANSI color codes\r\n\r\n.tox/py27-ansible25-unit/lib/python3.6/site-packages/tabulate.py:1258\r\n  /Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.6/site-packages/tabulate.py:1258: DeprecationWarning: invalid escape sequence \\e\r\n    \"\"\"\r\n\r\n.tox/py27-ansible25-unit/lib/python3.6/site-packages/past/types/oldstr.py:33\r\n  /Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.6/site-packages/past/types/oldstr.py:33: DeprecationWarning: invalid escape sequence \\d\r\n    \"\"\"\r\n\r\n.tox/py27-ansible25-unit/lib/python3.6/site-packages/cookiecutter/repository.py:19\r\n  /Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python3.6/site-packages/cookiecutter/repository.py:19: DeprecationWarning: Flags not at the start of the expression '\\n(?x)\\n((((git|hg)\\\\+)' (truncated)\r\n    \"\"\")\r\n\r\ntest/conftest.py:114\r\n  /Users/ssbarnea/os/molecule/test/conftest.py:114: PytestDeprecationWarning: the `pytest.config` global is deprecated.  Please use `request.config` or `pytest_configure` (if you're a pytest plugin) instead.\r\n    marker = pytest.config.getoption('-m')\r\n\r\n-- Docs: https://docs.pytest.org/en/latest/warnings.html\r\n```\r\n\r\n## External bugs or PRs to track\r\nPlease be sure we ping maintainers of these dependencies to merge fixes and to make a new release that we can consume:\r\n\r\n* https://bitbucket.org/astanin/python-tabulate/issues/174/invalid-escape-sequence\r\n* https://github.com/cookiecutter/cookiecutter/pull/1127\r\n* https://github.com/PythonCharmers/python-future/issues/479", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2145/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2145/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2132", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2132/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2132/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2132/events", "html_url": "https://github.com/ansible-community/molecule/pull/2132", "id": 460411457, "node_id": "MDExOlB1bGxSZXF1ZXN0MjkxNTQ2Mzg1", "number": 2132, "title": "Fix bug when molecule crash if env value is not a string", "user": {"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/15", "html_url": "https://github.com/ansible-community/molecule/milestone/15", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/15/labels", "id": 4218032, "node_id": "MDk6TWlsZXN0b25lNDIxODAzMg==", "number": 15, "title": "2.22", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-04-10T16:34:29Z", "updated_at": "2019-08-22T12:16:35Z", "due_on": "2019-06-28T07:00:00Z", "closed_at": "2019-08-22T12:16:35Z"}, "comments": 2, "created_at": "2019-06-25T13:02:55Z", "updated_at": "2019-07-08T16:14:25Z", "closed_at": "2019-07-08T16:14:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2132", "html_url": "https://github.com/ansible-community/molecule/pull/2132", "diff_url": "https://github.com/ansible-community/molecule/pull/2132.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2132.patch", "merged_at": null}, "body": "Fixes #2131\r\nWhen configuring values in environment that are not strings,\r\nensure to convert them to string.\r\n\r\n\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2132/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2132/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2131", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2131/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2131/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2131/events", "html_url": "https://github.com/ansible-community/molecule/issues/2131", "id": 460410968, "node_id": "MDU6SXNzdWU0NjA0MTA5Njg=", "number": 2131, "title": "Molecule crash when defining environment variable for Ansible containes not string", "user": {"login": "sshnaidm", "id": 6213510, "node_id": "MDQ6VXNlcjYyMTM1MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6213510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sshnaidm", "html_url": "https://github.com/sshnaidm", "followers_url": "https://api.github.com/users/sshnaidm/followers", "following_url": "https://api.github.com/users/sshnaidm/following{/other_user}", "gists_url": "https://api.github.com/users/sshnaidm/gists{/gist_id}", "starred_url": "https://api.github.com/users/sshnaidm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sshnaidm/subscriptions", "organizations_url": "https://api.github.com/users/sshnaidm/orgs", "repos_url": "https://api.github.com/users/sshnaidm/repos", "events_url": "https://api.github.com/users/sshnaidm/events{/privacy}", "received_events_url": "https://api.github.com/users/sshnaidm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-25T13:01:54Z", "updated_at": "2019-07-08T16:14:31Z", "closed_at": "2019-07-08T16:13:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.0.dev0\r\n  config file = /home/sshnaidm/.ansible.cfg\r\n  configured module search path = ['/home/sshnaidm/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/sshnaidm/venvs/ansible-dev/src/ansible/lib/ansible\r\n  executable location = /home/sshnaidm/venvs/ansible-dev/bin/ansible\r\n  python version = 3.7.3 (default, May 11 2019, 00:45:16) [GCC 8.3.1 20190223 (Red Hat 8.3.1-2)]\r\n\r\nmolecule, version 2.22rc2.dev5+g16b7551e.d20190612\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nPre condition:\r\ndefine provisioner as:\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  config_options:\r\n    defaults:\r\n      stdout_callback: debug\r\n  env:\r\n    ANSIBLE_KEEP_REMOTE_FILES: 1\r\n  lint:\r\n    name: ansible-lint\r\n```\r\nwhen setting ansible env var as int, not string.\r\nThis crashes.\r\nThe actual problem is in ``sh`` python module, which pass environment as is to ``os.spawnve`` as is: https://github.com/amoffat/sh/blob/master/sh.py#L1402 And ``os.spawnve`` doesn't like if environment are not strings.\r\n\r\n\r\n# Desired Behavior\r\nMolecule sets environment as string and continues to work.\r\n\r\n# Actual Behaviour\r\nMolecule crashes without an error message:\r\n```\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /home/sshnaidm/.cache/molecule/startup/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /home/sshnaidm/venvs/ansible-dev/src/molecule/molecule/provisioner/ansible/plugins/filters:/home/sshnaidm/.cache/molecule/startup/default/plugins/filters:/home/sshnaidm/sources/local-infr\r\na/roles/startup/plugins/filters\r\nANSIBLE_KEEP_REMOTE_FILES: 1\r\nANSIBLE_LIBRARY: /home/sshnaidm/venvs/ansible-dev/src/molecule/molecule/provisioner/ansible/plugins/libraries:/home/sshnaidm/.cache/molecule/startup/default/library:/home/sshnaidm/sources/local-infra/roles/start\r\nup/library\r\nANSIBLE_ROLES_PATH: /home/sshnaidm/.cache/molecule/startup/default/roles:/home/sshnaidm/sources/local-infra/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: podman\r\nMOLECULE_ENV_FILE: /home/sshnaidm/sources/local-infra/roles/startup/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /home/sshnaidm/.cache/molecule/startup/default\r\nMOLECULE_FILE: /home/sshnaidm/sources/local-infra/roles/startup/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /home/sshnaidm/.cache/molecule/startup/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /home/sshnaidm/.cache/molecule/startup/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_NO_LOG: 'False'\r\nMOLECULE_PROJECT_DIRECTORY: /home/sshnaidm/sources/local-infra/roles/startup\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/sshnaidm/sources/local-infra/roles/startup/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/sshnaidm/sources/local-infra/roles/startup/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/home/sshnaidm/.cache/molecule/startup/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/home/sshnaidm/venvs/ansible-dev/src/molecule/molecule/provisioner/ansible/plugins/filters:/home/sshnaidm/.cache/m\r\nolecule/startup/default/plugins/filters:/home/sshnaidm/sources/local-infra/roles/startup/plugins/filters ANSIBLE_KEEP_REMOTE_FILES=1 ANSIBLE_LIBRARY=/home/sshnaidm/venvs/ansible-dev/src/molecule/molecule/provisi\r\noner/ansible/plugins/libraries:/home/sshnaidm/.cache/molecule/startup/default/library:/home/sshnaidm/sources/local-infra/roles/startup/library ANSIBLE_ROLES_PATH=/home/sshnaidm/.cache/molecule/startup/default/ro\r\nles:/home/sshnaidm/sources/local-infra/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=podman MOLECULE_ENV_FILE=/home/sshnaidm/sources/local-infra/roles/startup/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/home/sshnaidm/.cache/molecule/startup/default MOLECULE_FILE=/home/sshnaidm/sources/local-infra/roles/startup/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/home/sshnaidm/.cache/molecule/startup/default/instance_config.yml MOLECULE_INVENTORY_FILE=/home/sshnaidm/.cache/molecule/startup/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_NO_LOG=False MOLECULE_PROJECT_DIRECTORY=/home/sshnaidm/sources/local-infra/roles/startup MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/sshnaidm/sources/local-infra/roles/startup/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/sshnaidm/sources/local-infra/roles/startup/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/home/sshnaidm/venvs/ansible-dev/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/home/sshnaidm/.cache/molecule/startup/default/inventory /home/sshnaidm/venvs/ansible-dev/src/molecule/molecule/provisioner/ansible/playbooks/podman/destroy.yml -vvv\r\n\r\nERROR: \r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2131/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2127", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2127/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2127/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2127/events", "html_url": "https://github.com/ansible-community/molecule/pull/2127", "id": 459791141, "node_id": "MDExOlB1bGxSZXF1ZXN0MjkxMDUxOTAw", "number": 2127, "title": "Adopt use of XDG cache directories", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/15", "html_url": "https://github.com/ansible-community/molecule/milestone/15", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/15/labels", "id": 4218032, "node_id": "MDk6TWlsZXN0b25lNDIxODAzMg==", "number": 15, "title": "2.22", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-04-10T16:34:29Z", "updated_at": "2019-08-22T12:16:35Z", "due_on": "2019-06-28T07:00:00Z", "closed_at": "2019-08-22T12:16:35Z"}, "comments": 1, "created_at": "2019-06-24T09:39:14Z", "updated_at": "2019-08-30T09:18:20Z", "closed_at": "2019-06-24T15:45:38Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2127", "html_url": "https://github.com/ansible-community/molecule/pull/2127", "diff_url": "https://github.com/ansible-community/molecule/pull/2127.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2127.patch", "merged_at": "2019-06-24T15:45:37Z"}, "body": "Assures that molecule temp/cache files are created in a safe location\r\nand that they cannot be accessed by other users.\r\n\r\nFixes: #2126\r\nSigned-off-by: Sorin Sbarnea <ssbarnea@redhat.com>", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2127/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2127/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2126", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2126/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2126/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2126/events", "html_url": "https://github.com/ansible-community/molecule/issues/2126", "id": 459773709, "node_id": "MDU6SXNzdWU0NTk3NzM3MDk=", "number": 2126, "title": "molecule should not create predictable temp folders in shared location like /tmp", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "abadger", "id": 209242, "node_id": "MDQ6VXNlcjIwOTI0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/209242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abadger", "html_url": "https://github.com/abadger", "followers_url": "https://api.github.com/users/abadger/followers", "following_url": "https://api.github.com/users/abadger/following{/other_user}", "gists_url": "https://api.github.com/users/abadger/gists{/gist_id}", "starred_url": "https://api.github.com/users/abadger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abadger/subscriptions", "organizations_url": "https://api.github.com/users/abadger/orgs", "repos_url": "https://api.github.com/users/abadger/repos", "events_url": "https://api.github.com/users/abadger/events{/privacy}", "received_events_url": "https://api.github.com/users/abadger/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/15", "html_url": "https://github.com/ansible-community/molecule/milestone/15", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/15/labels", "id": 4218032, "node_id": "MDk6TWlsZXN0b25lNDIxODAzMg==", "number": 15, "title": "2.22", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-04-10T16:34:29Z", "updated_at": "2019-08-22T12:16:35Z", "due_on": "2019-06-28T07:00:00Z", "closed_at": "2019-08-22T12:16:35Z"}, "comments": 1, "created_at": "2019-06-24T09:02:23Z", "updated_at": "2019-06-24T15:45:45Z", "closed_at": "2019-06-24T15:45:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Based on feedback from @abadger, feel free up update it:\r\n\r\n> Creating predictably named files and directories is a well known source of CVEs. For instance:\r\n> \r\n>     https://linuxsecurity.com/news/documentation/safely-creating-temporary-files-in-shell-scripts/\r\n>     https://wiki.sei.cmu.edu/confluence/display/c/FIO21-C.+Do+not+create+temporary+files+in+shared+directories\r\n> \r\n\r\nThis bug affects only master as it was introduced by https://github.com/ansible/molecule/commit/b44fe7174c9e094b5f122a7511161154a5b6505e ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2126/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2122", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2122/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2122/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2122/events", "html_url": "https://github.com/ansible-community/molecule/issues/2122", "id": 459581776, "node_id": "MDU6SXNzdWU0NTk1ODE3NzY=", "number": 2122, "title": "Silent failure: Boolean environment variable in `provisioner` causes `ansible-lint` to fail", "user": {"login": "nkakouros", "id": 11805218, "node_id": "MDQ6VXNlcjExODA1MjE4", "avatar_url": "https://avatars.githubusercontent.com/u/11805218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nkakouros", "html_url": "https://github.com/nkakouros", "followers_url": "https://api.github.com/users/nkakouros/followers", "following_url": "https://api.github.com/users/nkakouros/following{/other_user}", "gists_url": "https://api.github.com/users/nkakouros/gists{/gist_id}", "starred_url": "https://api.github.com/users/nkakouros/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nkakouros/subscriptions", "organizations_url": "https://api.github.com/users/nkakouros/orgs", "repos_url": "https://api.github.com/users/nkakouros/repos", "events_url": "https://api.github.com/users/nkakouros/events{/privacy}", "received_events_url": "https://api.github.com/users/nkakouros/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-06-23T14:25:03Z", "updated_at": "2020-10-23T16:48:02Z", "closed_at": "2020-10-23T16:48:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.9.0.dev0\r\n  config file = None\r\n  configured module search path = ['/home/nikos/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/nikos/Projects/ansible/lib/ansible\r\n  executable location = /home/nikos/Projects/ansible/bin/ansible\r\n  python version = 3.7.3 (default, Mar 26 2019, 21:43:19) [GCC 8.2.1 20181127]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n\r\nDetail any linters or test runners used:\r\n```\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: \"instance-${MOLECULE_DISTRO:-ubuntu1604}\"\r\n    image: \"geerlingguy/docker-${MOLECULE_DISTRO:-ubuntu1604}-ansible:latest\"\r\n    command: ${MOLECULE_INIT_CMD-\"\"}\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    privileged: true\r\n    pre_build_image: true\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    IN_MOLECULE: true\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: testinfra\r\n  enabled: false\r\n  lint:\r\n    name: flake8\r\n\r\n```\r\n# Desired Behavior\r\n\r\nI would expect the `IN_MOLECULE` environment variable to be accessible in the molecule playbook via a lookup.\r\n\r\n# Actual Behaviour\r\n\r\nMolecule fails silently when trying to run `ansible-lint` with an exit code of 255:\r\n\r\n```\r\n[nikos@nikos-laptop nkakouros.elasticsearch]$ molecule lint\r\n--> Validating schema /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 lint\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default/tests/...\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default/playbook.yml...\r\n```\r\n\r\noutput of running `molecule --debug`.\r\n```\r\n...\r\n--> Executing Ansible Lint on /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default/playbook.yml...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /tmp/molecule/nkakouros.elasticsearch/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/tmp/molecule/nkakouros.elasticsearch/default/plugins/filters:/home/nikos/Projects/Ethical\r\n  Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/plugins/filters\r\nANSIBLE_HOME: /home/nikos/Projects/ansible\r\nANSIBLE_LIBRARY: /usr/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/tmp/molecule/nkakouros.elasticsearch/default/library:/home/nikos/Projects/Ethical\r\n  Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/library\r\nANSIBLE_ROLES_PATH: /tmp/molecule/nkakouros.elasticsearch/default/roles:/home/nikos/Projects/Ethical\r\n  Hacking/EN2720/ansible/roles/services\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /tmp/molecule/nkakouros.elasticsearch/default\r\nMOLECULE_FILE: /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /tmp/molecule/nkakouros.elasticsearch/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /tmp/molecule/nkakouros.elasticsearch/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/tmp/molecule/nkakouros.elasticsearch/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/tmp/molecule/nkakouros.elasticsearch/default/plugins/filters:/home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/plugins/filters ANSIBLE_HOME=/home/nikos/Projects/ansible ANSIBLE_LIBRARY=/usr/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/tmp/molecule/nkakouros.elasticsearch/default/library:/home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/library ANSIBLE_ROLES_PATH=/tmp/molecule/nkakouros.elasticsearch/default/roles:/home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/tmp/molecule/nkakouros.elasticsearch/default MOLECULE_FILE=/home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/tmp/molecule/nkakouros.elasticsearch/default/instance_config.yml MOLECULE_INVENTORY_FILE=/tmp/molecule/nkakouros.elasticsearch/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-lint -v --exclude=/tmp/molecule/nkakouros.elasticsearch/default /home/nikos/Projects/Ethical Hacking/EN2720/ansible/roles/services/nkakouros.elasticsearch/molecule/default/playbook.yml\r\n```\r\n\r\nIf I replace `IN_MOLECULE: true` with `IN_MOLECULE: 'true'`, it works.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2122/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2122/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2121", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2121/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2121/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2121/events", "html_url": "https://github.com/ansible-community/molecule/pull/2121", "id": 459510865, "node_id": "MDExOlB1bGxSZXF1ZXN0MjkwODQ3Njky", "number": 2121, "title": "Avoid failure to open symlinked molecule.yml files", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-06-22T21:00:57Z", "updated_at": "2019-08-30T10:41:32Z", "closed_at": "2019-06-22T21:13:02Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2121", "html_url": "https://github.com/ansible-community/molecule/pull/2121", "diff_url": "https://github.com/ansible-community/molecule/pull/2121.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2121.patch", "merged_at": null}, "body": "Avoid \"[Errno 2] No such file or directory\" when molecule encounters\r\na molecule.yml file that is a symlink under Linux.\r\n\r\nApparently the same operations works correctly under MacOS.\r\n\r\nBy resolving the path before calling open() we avoid its failure.\r\n\r\nEncountered this bug while working on pytest-html at https://travis-ci.com/pycontribs/pytest-molecule/jobs/210205752", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2121/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2118", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2118/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2118/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2118/events", "html_url": "https://github.com/ansible-community/molecule/issues/2118", "id": 459133810, "node_id": "MDU6SXNzdWU0NTkxMzM4MTA=", "number": 2118, "title": "include_vars is unable to load files from remote", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-21T10:40:21Z", "updated_at": "2019-06-21T10:44:15Z", "closed_at": "2019-06-21T10:43:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems that `include_vars` cannot be used to load files from remote systems and that is not documented https://docs.ansible.com/ansible/latest/modules/include_vars_module.html\r\n\r\n1. Documentation should clarify that include_vars works only on controler and cannot be delagted.\r\n\r\n2. User should get an error or at least a warning when using ``delegate_to`` with ``include_vars``, current Ansible does neither of them.\r\n\r\n3. When file/dir cannot be found Ansible gives a disinformative error message which suggests that user may want to use `remote_src `option, an option that does not exist on ``include_vars``.\r\n\r\n\r\n>  \"message\": \"Could not find or access '/etc/docker/config.json' on the Ansible Controller.\\nIf you are using a module and expect the file to exist on the remote, see the remote_src option\"\r\n\r\nIdeally include_vars should be allowed to run on remove hosts because it would allow easy loading of configuration files from various YAML or JSON files, [somethign that currently is a real PITA](https://stackoverflow.com/a/41654953/99834) to do.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2118/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2116", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2116/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2116/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2116/events", "html_url": "https://github.com/ansible-community/molecule/issues/2116", "id": 458414407, "node_id": "MDU6SXNzdWU0NTg0MTQ0MDc=", "number": 2116, "title": "Apt Modules Failed when Molecule Converge", "user": {"login": "atthoriq", "id": 36201334, "node_id": "MDQ6VXNlcjM2MjAxMzM0", "avatar_url": "https://avatars.githubusercontent.com/u/36201334?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atthoriq", "html_url": "https://github.com/atthoriq", "followers_url": "https://api.github.com/users/atthoriq/followers", "following_url": "https://api.github.com/users/atthoriq/following{/other_user}", "gists_url": "https://api.github.com/users/atthoriq/gists{/gist_id}", "starred_url": "https://api.github.com/users/atthoriq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atthoriq/subscriptions", "organizations_url": "https://api.github.com/users/atthoriq/orgs", "repos_url": "https://api.github.com/users/atthoriq/repos", "events_url": "https://api.github.com/users/atthoriq/events{/privacy}", "received_events_url": "https://api.github.com/users/atthoriq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-20T08:06:06Z", "updated_at": "2020-02-03T22:45:10Z", "closed_at": "2020-02-03T22:45:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.8.1\r\n  config file = None\r\n  configured module search path = ['/Users/ovo/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/ovo/Documents/Work/env/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/ovo/Documents/Work/env/bin/ansible\r\n  python version = 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 16:52:21) [Clang 6.0 (clang-600.0.57)]\r\n\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\n# Desired Behavior\r\n\r\nmy task:\r\n```\r\n---\r\n- name: Set timezone variables\r\n  timezone:\r\n    name: Asia/Jakarta\r\n- name: apt-get update\r\n  apt:\r\n    upgrade: yes\r\n    update_cache: yes\r\n- name: Update all packages to the latest version\r\n  apt:\r\n    upgrade: dist\r\n\r\n```\r\n\r\n```\r\nmolecule test\r\n```\r\nrun with no errors\r\n\r\n# Actual Behaviour\r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](https://stackoverflow.com/help/mcve) with\r\noutput of running `molecule --debug`.\r\n\r\n```\r\n$ molecule test\r\n--> Scenario: 'default'\r\n--> Action: 'converge'\r\n    \r\n    PLAY [Converge] ****************************************************************\r\n    \r\n    TASK [Gathering Facts] *********************************************************\r\n    ok: [instance]\r\n    \r\n    TASK [initialize : Set timezone variables] *************************************\r\n [WARNING]: timedatectl command was found but not usable: Failed to create bus\r\nconnection: No such file or directory . using other method.\r\n\r\n    changed: [instance]\r\n    \r\n    TASK [initialize : apt-get update] *********************************************\r\n [WARNING]: The value True (type bool) in a string field was converted to\r\nu'True' (type string). If this does not look like what you expect, quote the\r\nentire value to ensure it does not change.\r\n\r\n    fatal: [instance]: FAILED! => {\"changed\": false, \"cmd\": \"apt-get update\", \"msg\": \"[Errno 2] No such file or directory\", \"rc\": 2}\r\n [WARNING]: Updating cache and auto-installing missing dependency: python-apt\r\n\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    instance                   : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0\r\n    \r\n    \r\n\r\nERROR: \r\nAn error occurred during the test sequence action: 'converge'. Cleaning up.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2116/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2111", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2111/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2111/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2111/events", "html_url": "https://github.com/ansible-community/molecule/issues/2111", "id": 457619423, "node_id": "MDU6SXNzdWU0NTc2MTk0MjM=", "number": 2111, "title": "gitlab CI example file does not work", "user": {"login": "josesalvador", "id": 2736452, "node_id": "MDQ6VXNlcjI3MzY0NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2736452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josesalvador", "html_url": "https://github.com/josesalvador", "followers_url": "https://api.github.com/users/josesalvador/followers", "following_url": "https://api.github.com/users/josesalvador/following{/other_user}", "gists_url": "https://api.github.com/users/josesalvador/gists{/gist_id}", "starred_url": "https://api.github.com/users/josesalvador/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josesalvador/subscriptions", "organizations_url": "https://api.github.com/users/josesalvador/orgs", "repos_url": "https://api.github.com/users/josesalvador/repos", "events_url": "https://api.github.com/users/josesalvador/events{/privacy}", "received_events_url": "https://api.github.com/users/josesalvador/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-18T18:00:22Z", "updated_at": "2019-06-19T14:07:37Z", "closed_at": "2019-06-19T14:07:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\nThe gitlab CI example file at https://molecule.readthedocs.io/en/stable/ci.html is not working.\r\n\r\nThe job gets stucked.\r\n\r\nCould you put a simple and working gitlab CI file, please?\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2111/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2094", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2094/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2094/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2094/events", "html_url": "https://github.com/ansible-community/molecule/issues/2094", "id": 454096576, "node_id": "MDU6SXNzdWU0NTQwOTY1NzY=", "number": 2094, "title": "2.22rc1: flake8 not found", "user": {"login": "bjornmagnusson", "id": 6065120, "node_id": "MDQ6VXNlcjYwNjUxMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/6065120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjornmagnusson", "html_url": "https://github.com/bjornmagnusson", "followers_url": "https://api.github.com/users/bjornmagnusson/followers", "following_url": "https://api.github.com/users/bjornmagnusson/following{/other_user}", "gists_url": "https://api.github.com/users/bjornmagnusson/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjornmagnusson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjornmagnusson/subscriptions", "organizations_url": "https://api.github.com/users/bjornmagnusson/orgs", "repos_url": "https://api.github.com/users/bjornmagnusson/repos", "events_url": "https://api.github.com/users/bjornmagnusson/events{/privacy}", "received_events_url": "https://api.github.com/users/bjornmagnusson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-06-10T10:12:19Z", "updated_at": "2019-06-11T10:40:47Z", "closed_at": "2019-06-11T10:40:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Molecule fails to run linter, due to flake8 not found\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\ndocker run --rm se-artif-prd.infinera.com/docker/ansible/molecule:2.22rc1 molecule --version\r\nmolecule, version 2.22rc1\r\ndocker run --rm se-artif-prd.infinera.com/docker/ansible/molecule:2.22rc1 ansible --version\r\nansible 2.8.0\r\n  config file = None\r\n  configured module search path = ['/root/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.3 (default, May 11 2019, 02:00:41) [GCC 8.3.0]\r\n```\r\n\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\n  enabled: False\r\nplatforms:\r\n  - name: centos7\r\n    image: centos:7\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\n    enabled: False\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: testinfra\r\n  options:\r\n    junit-xml: junit.xml\r\n  lint:\r\n    name: flake8\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nPlaybook and tests should run without errors\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n00:02:52.619  Status: Downloaded newer image for se-artif-prd.infinera.com/docker/ansible/molecule:2.22rc1\r\n00:02:54.311  --> Validating schema /tmp/ansible/molecule/default/molecule.yml.\r\n00:02:54.659  Validation completed successfully.\r\n00:02:54.659  --> Test matrix\r\n00:02:54.659      \r\n00:02:54.659  \u2514\u2500\u2500 default\r\n00:02:54.659      \u251c\u2500\u2500 lint\r\n00:02:54.659      \u251c\u2500\u2500 dependency\r\n00:02:54.659      \u251c\u2500\u2500 cleanup\r\n00:02:54.659      \u251c\u2500\u2500 destroy\r\n00:02:54.659      \u251c\u2500\u2500 syntax\r\n00:02:54.659      \u251c\u2500\u2500 create\r\n00:02:54.659      \u251c\u2500\u2500 prepare\r\n00:02:54.659      \u251c\u2500\u2500 converge\r\n00:02:54.659      \u251c\u2500\u2500 idempotence\r\n00:02:54.659      \u251c\u2500\u2500 side_effect\r\n00:02:54.659      \u251c\u2500\u2500 verify\r\n00:02:54.659      \u251c\u2500\u2500 cleanup\r\n00:02:54.659      \u2514\u2500\u2500 destroy\r\n00:02:54.659      \r\n00:02:54.659  --> Scenario: 'default'\r\n00:02:54.659  --> Action: 'lint'\r\n00:02:54.659  Skipping, lint is disabled.\r\n00:02:54.659  Traceback (most recent call last):\r\n00:02:54.659    File \"/usr/local/bin/molecule\", line 10, in <module>\r\n00:02:54.659      sys.exit(main())\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 764, in __call__\r\n00:02:54.659      return self.main(*args, **kwargs)\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 717, in main\r\n00:02:54.659      rv = self.invoke(ctx)\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1137, in invoke\r\n00:02:54.659      return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 956, in invoke\r\n00:02:54.659      return ctx.invoke(self.callback, **ctx.params)\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 555, in invoke\r\n00:02:54.659      return callback(*args, **kwargs)\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/click/decorators.py\", line 17, in new_func\r\n00:02:54.659      return f(get_current_context(), *args, **kwargs)\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/molecule/command/test.py\", line 126, in test\r\n00:02:54.659      base.execute_cmdline_scenarios(scenario_name, args, command_args)\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/molecule/command/base.py\", line 100, in execute_cmdline_scenarios\r\n00:02:54.659      execute_scenario(scenario)\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/molecule/command/base.py\", line 140, in execute_scenario\r\n00:02:54.659      execute_subcommand(scenario.config, action)\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/molecule/command/base.py\", line 127, in execute_subcommand\r\n00:02:54.659      return command(config).execute()\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/molecule/command/lint.py\", line 80, in execute\r\n00:02:54.659      l.execute()\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/molecule/verifier/lint/flake8.py\", line 119, in execute\r\n00:02:54.659      self.bake()\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/molecule/verifier/lint/flake8.py\", line 100, in bake\r\n00:02:54.659      self._flake8_command = sh.flake8.bake(\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/sh.py\", line 3349, in __getattr__\r\n00:02:54.659      return self.__env[name]\r\n00:02:54.659    File \"/usr/local/lib/python3.7/site-packages/sh.py\", line 3226, in __getitem__\r\n00:02:54.659      raise CommandNotFound(k)\r\n00:02:54.659  sh.CommandNotFound: flake8\r\n```\r\n\r\nmolecule config:\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\n  enabled: False\r\nplatforms:\r\n  - name: centos7\r\n    image: centos:7\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\n    enabled: False\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: testinfra\r\n  options:\r\n    junit-xml: junit.xml\r\n  lint:\r\n    name: flake8\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2094/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2094/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2091", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2091/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2091/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2091/events", "html_url": "https://github.com/ansible-community/molecule/issues/2091", "id": 453459569, "node_id": "MDU6SXNzdWU0NTM0NTk1Njk=", "number": 2091, "title": "build: avoid RemovedInPytest4Warning", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-07T11:08:52Z", "updated_at": "2019-06-07T11:23:21Z", "closed_at": "2019-06-07T11:23:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Running molecule tests does current throw a huge amount of warnings related to RemovedInPytest4Warning most of them from inside pytest_verbose_parametrize.py\r\n\r\nWe need to address these as it is making very hard to read the console.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2091/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2091/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2090", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2090/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2090/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2090/events", "html_url": "https://github.com/ansible-community/molecule/issues/2090", "id": 453183515, "node_id": "MDU6SXNzdWU0NTMxODM1MTU=", "number": 2090, "title": "Docker driver uses deprecated \"docker_image_facts\"", "user": {"login": "Duckle29", "id": 2756925, "node_id": "MDQ6VXNlcjI3NTY5MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2756925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Duckle29", "html_url": "https://github.com/Duckle29", "followers_url": "https://api.github.com/users/Duckle29/followers", "following_url": "https://api.github.com/users/Duckle29/following{/other_user}", "gists_url": "https://api.github.com/users/Duckle29/gists{/gist_id}", "starred_url": "https://api.github.com/users/Duckle29/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Duckle29/subscriptions", "organizations_url": "https://api.github.com/users/Duckle29/orgs", "repos_url": "https://api.github.com/users/Duckle29/repos", "events_url": "https://api.github.com/users/Duckle29/events{/privacy}", "received_events_url": "https://api.github.com/users/Duckle29/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/15", "html_url": "https://github.com/ansible-community/molecule/milestone/15", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/15/labels", "id": 4218032, "node_id": "MDk6TWlsZXN0b25lNDIxODAzMg==", "number": 15, "title": "2.22", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-04-10T16:34:29Z", "updated_at": "2019-08-22T12:16:35Z", "due_on": "2019-06-28T07:00:00Z", "closed_at": "2019-08-22T12:16:35Z"}, "comments": 1, "created_at": "2019-06-06T18:45:38Z", "updated_at": "2019-06-25T11:10:26Z", "closed_at": "2019-06-25T11:10:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n| | |\r\n|--|--|\r\n| Ansible  | 2.8.0  |\r\n| Molecule | 2.20.1 |\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nansible-lint\r\n\r\n# Desired Behavior\r\n\r\nNo deprecation warnings on creation of a docker instance\r\n\r\n# Actual Behaviour\r\n\r\nAny molecule create run which invokes the docker driver will warn the user about:\r\n\r\n```\r\n[DEPRECATION WARNING]: docker_image_facts is kept for backwards compatibility \r\nbut usage is discouraged. The module documentation details page may explain \r\nmore about this rationale.. This feature will be removed in a future release. \r\nDeprecation warnings can be disabled by setting deprecation_warnings=False in \r\nansible.cfg.\"\r\n```\r\n\r\nThe problems are at: https://github.com/ansible/molecule/blob/80290902229c0566b7b2c756947366c4df8a8aac/test/resources/playbooks/docker/create.yml#L35\r\nand at: https://github.com/ansible/molecule/blob/80290902229c0566b7b2c756947366c4df8a8aac/molecule/provisioner/ansible/playbooks/docker/create.yml#L34\r\n\r\nThe fix would be to change those to docker_image_info, the new name for this module as described here: https://docs.ansible.com/ansible/latest/modules/docker_image_facts_module.html\r\n\r\n~~I will open a PR doing this~~\r\nThis is what is being fixed in: https://github.com/ansible/molecule/pull/2047\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2090/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2090/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2084", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2084/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2084/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2084/events", "html_url": "https://github.com/ansible-community/molecule/issues/2084", "id": 451966763, "node_id": "MDU6SXNzdWU0NTE5NjY3NjM=", "number": 2084, "title": "Under Win10, docker ... molecule destroy fail", "user": {"login": "jehon", "id": 1582670, "node_id": "MDQ6VXNlcjE1ODI2NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1582670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jehon", "html_url": "https://github.com/jehon", "followers_url": "https://api.github.com/users/jehon/followers", "following_url": "https://api.github.com/users/jehon/following{/other_user}", "gists_url": "https://api.github.com/users/jehon/gists{/gist_id}", "starred_url": "https://api.github.com/users/jehon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jehon/subscriptions", "organizations_url": "https://api.github.com/users/jehon/orgs", "repos_url": "https://api.github.com/users/jehon/repos", "events_url": "https://api.github.com/users/jehon/events{/privacy}", "received_events_url": "https://api.github.com/users/jehon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-04T12:26:29Z", "updated_at": "2020-02-03T22:51:12Z", "closed_at": "2020-02-03T22:51:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nimage from docker on 2019-06-04\r\n\r\nMolecule installation method (one of):\r\n- Docker\r\n\r\nAnsible installation method (one of):\r\n- Docker\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nUnder Windows 10, I use the command:\r\n`docker run --privileged -v %cd%:/tmp -w /tmp -it --rm quay.io/ansible/molecule molecule destroy`\r\n(I am inside a ansible role folder)\r\n\r\nIt fails with the message: \r\n\r\n>     TASK [Wait for instance(s) deletion to complete] *******************************\r\n>     failed: [localhost] (item=None) => {\"attempts\": 1, \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n>     fatal: [localhost]: FAILED! => {\"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n> \r\n\r\n# Actual Behaviour\r\n\r\nI would expect \"destroy\" to work.\r\n\r\nlog: [log.log](https://github.com/ansible/molecule/files/3252316/log.log)\r\n\r\nThanks for your support !\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2084/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2084/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2083", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2083/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2083/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2083/events", "html_url": "https://github.com/ansible-community/molecule/issues/2083", "id": 451119510, "node_id": "MDU6SXNzdWU0NTExMTk1MTA=", "number": 2083, "title": "Molecule verify failed with \"AttributeError: 'PlaybookCLI' object has no attribute 'base_parser'\"", "user": {"login": "codequokka", "id": 50156460, "node_id": "MDQ6VXNlcjUwMTU2NDYw", "avatar_url": "https://avatars.githubusercontent.com/u/50156460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codequokka", "html_url": "https://github.com/codequokka", "followers_url": "https://api.github.com/users/codequokka/followers", "following_url": "https://api.github.com/users/codequokka/following{/other_user}", "gists_url": "https://api.github.com/users/codequokka/gists{/gist_id}", "starred_url": "https://api.github.com/users/codequokka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codequokka/subscriptions", "organizations_url": "https://api.github.com/users/codequokka/orgs", "repos_url": "https://api.github.com/users/codequokka/repos", "events_url": "https://api.github.com/users/codequokka/events{/privacy}", "received_events_url": "https://api.github.com/users/codequokka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-06-01T20:03:15Z", "updated_at": "2019-07-05T14:14:55Z", "closed_at": "2019-06-05T20:42:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.0\r\n  config file = None\r\n  configured module search path = ['/Users/nbchk/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/nbchk/work/ansible/molecule-install-test/.venv/bin/ansible\r\n  python version = 3.7.3 (default, Mar 27 2019, 09:23:15) [Clang 10.0.1 (clang-1001.0.46.3)]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- None\r\n\r\n# Desired Behavior\r\nmolecule verify should run default test example successfully.\r\n\r\n# Actual Behaviour\r\nmolecule verify failed with \"AttributeError: 'PlaybookCLI' object has no attribute 'base_parser'\"\r\n```\r\n$ molecule --debug vefiry\r\n--> Validating schema /Users/nbchk/work/ansible/molecule-install-test/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 verify\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'verify'\r\n--> Executing Testinfra tests found in /Users/nbchk/work/ansible/molecule-install-test/molecule/default/tests/...\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/plugins/filters:/Users/nbchk/work/ansible/molecule-install-test/plugins/filters\r\nANSIBLE_LIBRARY: /Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/library:/Users/nbchk/work/ansible/molecule-install-test/library\r\nANSIBLE_ROLES_PATH: /var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/roles:/Users/nbchk/work/ansible\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_ENV_FILE: /Users/nbchk/work/ansible/molecule-install-test/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default\r\nMOLECULE_FILE: /Users/nbchk/work/ansible/molecule-install-test/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/nbchk/work/ansible/molecule-install-test\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/nbchk/work/ansible/molecule-install-test/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/nbchk/work/ansible/molecule-install-test/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters:/var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/plugins/filters:/Users/nbchk/work/ansible/molecule-install-test/plugins/filters ANSIBLE_LIBRARY=/Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/library:/Users/nbchk/work/ansible/molecule-install-test/library ANSIBLE_ROLES_PATH=/var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/roles:/Users/nbchk/work/ansible MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_ENV_FILE=/Users/nbchk/work/ansible/molecule-install-test/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default MOLECULE_FILE=/Users/nbchk/work/ansible/molecule-install-test/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/instance_config.yml MOLECULE_INVENTORY_FILE=/var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/nbchk/work/ansible/molecule-install-test MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/nbchk/work/ansible/molecule-install-test/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/nbchk/work/ansible/molecule-install-test/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/nbchk/work/ansible/molecule-install-test/.venv/bin/py.test --connection=ansible --ansible-inventory=/var/folders/x_/5723f_vj5_j8rg8v_5rflzx00000gn/T/molecule/molecule-install-test/default/inventory/ansible_inventory.yml -p no:cacheprovider --debug /Users/nbchk/work/ansible/molecule-install-test/molecule/default/tests/test_default.py -vvv\r\n\r\n    ============================= test session starts ==============================\r\n    platform darwin -- Python 3.7.3, pytest-4.6.0, py-1.8.0, pluggy-0.12.0 -- /Users/nbchk/work/ansible/molecule-install-test/.venv/bin/python3.7\r\n    using: pytest-4.6.0 pylib-1.8.0\r\n    setuptools registered plugins:\r\n      testinfra-1.19.0 at /Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/testinfra/plugin.py\r\n    rootdir: /Users/nbchk/work/ansible/molecule-install-test/molecule/default\r\n    plugins: testinfra-1.19.0\r\n    collecting ... \r\ncollecting 0 items / 1 errors                                                  \r\ncollected 0 items / 1 errors                                                   \r\n    \r\n    ==================================== ERRORS ====================================\r\n    ____________________ ERROR collecting tests/test_default.py ____________________\r\n    tests/test_default.py:6: in <module>\r\n        os.environ['MOLECULE_INVENTORY_FILE']).get_hosts('all')\r\n    ../../.venv/lib/python3.7/site-packages/testinfra/utils/ansible_runner.py:153: in __init__\r\n        self.cli.options = self.cli.base_parser(\r\n    E   AttributeError: 'PlaybookCLI' object has no attribute 'base_parser'\r\n    =============================== warnings summary ===============================\r\n    /Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/jinja2/utils.py:485\r\n      /Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/jinja2/utils.py:485: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import MutableMapping\r\n    \r\n    /Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/jinja2/runtime.py:318\r\n      /Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/jinja2/runtime.py:318: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import Mapping\r\n    \r\n    /Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/yaml/constructor.py:126\r\n      /Users/nbchk/work/ansible/molecule-install-test/.venv/lib/python3.7/site-packages/yaml/constructor.py:126: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        if not isinstance(key, collections.Hashable):\r\n    \r\n    -- Docs: https://docs.pytest.org/en/latest/warnings.html\r\n    !!!!!!!!!!!!!!!!!!! Interrupted: 1 errors during collection !!!!!!!!!!!!!!!!!!!!\r\n    ===================== 3 warnings, 1 error in 0.74 seconds ======================\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2083/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2083/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2081", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2081/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2081/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2081/events", "html_url": "https://github.com/ansible-community/molecule/issues/2081", "id": 450708074, "node_id": "MDU6SXNzdWU0NTA3MDgwNzQ=", "number": 2081, "title": "Verifiy with alternativ files not work if 'test_default.py' not work", "user": {"login": "smuu", "id": 18609909, "node_id": "MDQ6VXNlcjE4NjA5OTA5", "avatar_url": "https://avatars.githubusercontent.com/u/18609909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smuu", "html_url": "https://github.com/smuu", "followers_url": "https://api.github.com/users/smuu/followers", "following_url": "https://api.github.com/users/smuu/following{/other_user}", "gists_url": "https://api.github.com/users/smuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/smuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smuu/subscriptions", "organizations_url": "https://api.github.com/users/smuu/orgs", "repos_url": "https://api.github.com/users/smuu/repos", "events_url": "https://api.github.com/users/smuu/events{/privacy}", "received_events_url": "https://api.github.com/users/smuu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-31T09:37:44Z", "updated_at": "2020-11-08T15:17:11Z", "closed_at": "2020-11-08T15:17:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nansible 2.7.10\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/s.enderwitz/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/s.enderwitz/.local/lib/python2.7/site-packages/ansible\r\n  executable location = /home/s.enderwitz/.local/bin/ansible\r\n  python version = 2.7.15rc1 (default, Nov 12 2018, 14:31:15) [GCC 7.3.0]\r\nmolecule, version 2.20.1\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI added some other testinfra files in 'default/tests/'. I added them to the additional_files_or_dirs argument in the 'molecule.yml' to use them.\r\nThe 'test_default.py' is not needed anymore and I can delete it.\r\n\r\n# Actual Behaviour\r\n\r\nWith no 'test_default.py' file in 'default/tests/' the output is: 'Skipping, no tests found.'.\r\nIf there is a empty 'test_default.py' file in folder the tests work properly.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2081/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2081/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2080", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2080/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2080/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2080/events", "html_url": "https://github.com/ansible-community/molecule/issues/2080", "id": 450415718, "node_id": "MDU6SXNzdWU0NTA0MTU3MTg=", "number": 2080, "title": "Build F5 using Molecule & Vagrant ", "user": {"login": "rblair1000", "id": 32680109, "node_id": "MDQ6VXNlcjMyNjgwMTA5", "avatar_url": "https://avatars.githubusercontent.com/u/32680109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rblair1000", "html_url": "https://github.com/rblair1000", "followers_url": "https://api.github.com/users/rblair1000/followers", "following_url": "https://api.github.com/users/rblair1000/following{/other_user}", "gists_url": "https://api.github.com/users/rblair1000/gists{/gist_id}", "starred_url": "https://api.github.com/users/rblair1000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rblair1000/subscriptions", "organizations_url": "https://api.github.com/users/rblair1000/orgs", "repos_url": "https://api.github.com/users/rblair1000/repos", "events_url": "https://api.github.com/users/rblair1000/events{/privacy}", "received_events_url": "https://api.github.com/users/rblair1000/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-05-30T17:20:02Z", "updated_at": "2019-06-12T12:47:30Z", "closed_at": "2019-06-12T12:47:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to build a F5 LTM using Molcule/Vagrant and images from boeboe/F5-BIGIP.  The VM is built but fails at the end with:\r\n===================================================\r\nThe following SSH command responded with a non-zero exit status.\r\nVagrant assumes that this means the command failed!\r\n\r\nhostname -F /etc/hostname\r\n\r\nStdout from the command:\r\nStderr from the command:\r\n\r\nUse the TMOS shell utility to make changes to the system configuration.\r\nFor more information, see \"tmsh help sys global-settings.\"\r\n=================================================\r\n\r\nThe process trying to  setting the host name using Linux commands that is not available to the F5 image.\r\n\r\nI tested image using just vagrant and defining a Vagrantfile, this issue does not appear with this test.\r\n. \r\nAny way this can be disabled ?\r\n\r\n# Issue Type\r\n\r\n- help wanted\r\n\r\n# Molecule and Ansible details\r\nansible 2.5.2\r\nVagrant 2.2.2\r\nmolecule  2.19.0\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nStop attempting to set the hostname.\r\n\r\n# Actual Behaviour\r\n\r\nUsing Linux commands to set hostname.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2080/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2080/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2077", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2077/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2077/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2077/events", "html_url": "https://github.com/ansible-community/molecule/issues/2077", "id": 449698717, "node_id": "MDU6SXNzdWU0NDk2OTg3MTc=", "number": 2077, "title": "Error 'Failed to connect to the host via ssh' using Molecule Vagrant Module", "user": {"login": "SergeyBear", "id": 13977551, "node_id": "MDQ6VXNlcjEzOTc3NTUx", "avatar_url": "https://avatars.githubusercontent.com/u/13977551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SergeyBear", "html_url": "https://github.com/SergeyBear", "followers_url": "https://api.github.com/users/SergeyBear/followers", "following_url": "https://api.github.com/users/SergeyBear/following{/other_user}", "gists_url": "https://api.github.com/users/SergeyBear/gists{/gist_id}", "starred_url": "https://api.github.com/users/SergeyBear/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SergeyBear/subscriptions", "organizations_url": "https://api.github.com/users/SergeyBear/orgs", "repos_url": "https://api.github.com/users/SergeyBear/repos", "events_url": "https://api.github.com/users/SergeyBear/events{/privacy}", "received_events_url": "https://api.github.com/users/SergeyBear/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2019-05-29T09:31:52Z", "updated_at": "2020-01-14T12:22:59Z", "closed_at": "2020-01-14T12:22:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\nI tried to use Molecule with Molecule Vagrant Module, but I get the same error regardless of VairtualBox or Libvirt provider:\r\n```\r\n$ molecule create\r\n--> Validating schema /home/user/molecule/ansible/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 create\r\n    \u2514\u2500\u2500 prepare\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nSkipping, instances already created.\r\n--> Scenario: 'default'\r\n--> Action: 'prepare'\r\n    \r\n    PLAY [Prepare] *****************************************************************\r\n    \r\n    TASK [Install python for Ansible] **********************************************\r\n    fatal: [centos7]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: ssh: Could not resolve hostname centos7: Name or service not known\", \"unreachable\": true}\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    centos7                    : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0\r\n \r\n    \r\nERROR: \r\n```\r\n\r\nI see that molecule is not generating /tmp/molecule/ansible/default/instance_config.yml (no such file) nor configure ssh connection /tmp/molecule/ansible/default/inventory:\r\n```\r\n# Molecule managed\r\n\r\n---\r\nall:\r\n  hosts:\r\n    centos7: &id001 {}\r\n  vars:\r\n    molecule_ephemeral_directory: '{{ lookup(''env'', ''MOLECULE_EPHEMERAL_DIRECTORY'')\r\n      }}'\r\n    molecule_file: '{{ lookup(''env'', ''MOLECULE_FILE'') }}'\r\n    molecule_instance_config: '{{ lookup(''env'', ''MOLECULE_INSTANCE_CONFIG'') }}'\r\n    molecule_scenario_directory: '{{ lookup(''env'', ''MOLECULE_SCENARIO_DIRECTORY'')\r\n      }}'\r\n    molecule_yml: '{{ lookup(''file'', molecule_file) | molecule_from_yaml }}'\r\nungrouped:\r\n  hosts:\r\n    centos7: *id001\r\n  vars: {}\r\n```\r\n\r\nHere is what I get when try to login:\r\n```\r\n$ molecule login\r\n--> Validating schema /home/user/molecule/ansible/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\nTraceback (most recent call last):\r\n  File \"/home/user/Env/ansible/bin/molecule\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/molecule/command/login.py\", line 182, in login\r\n    base.execute_subcommand(scenario.config, subcommand)\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/molecule/command/base.py\", line 102, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/molecule/command/login.py\", line 103, in execute\r\n    self._get_login(hostname)\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/molecule/command/login.py\", line 139, in _get_login\r\n    login_options = self._config.driver.login_options(hostname)\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/molecule/driver/vagrant.py\", line 175, in login_options\r\n    return util.merge_dicts(d, self._get_instance_config(instance_name))\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/molecule/driver/vagrant.py\", line 209, in _get_instance_config\r\n    self._config.driver.instance_config)\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/molecule/util.py\", line 189, in safe_load_file\r\n    with open_file(filename) as stream:\r\n  File \"/usr/lib64/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/home/user/Env/ansible/lib/python2.7/site-packages/molecule/util.py\", line 202, in open_file\r\n    with open(filename, mode) as stream:\r\nIOError: [Errno 2] No such file or directory: '/tmp/molecule/ansible/default/instance_config.yml'\r\n```\r\n\r\nLogin with vagrant ssh is ok:\r\n\r\n```\r\n$ vagrant global-status --prune\r\nid       name    provider   state   directory                           \r\n------------------------------------------------------------------------\r\ne8fd622  centos7 virtualbox running /tmp/molecule/ansible/default\r\n$ vagrant ssh e8fd622\r\n[vagrant@centos7 ~]$\r\n```\r\n\r\nUsed configuration:\r\nmolecule.yml\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\n    options:\r\n      memory: 512\r\n      cpus: 1\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: centos7\r\n    box: centos/7\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\ncreate.yml\r\n```\r\n---\r\n- hosts: localhost\r\n  connection: local\r\n  tasks:\r\n    - name: Create instances\r\n      molecule_vagrant:\r\n        instance_name: \"centos7\"\r\n        platform_box: centos/7\r\n        state: up\r\n```\r\n\r\ndestroy.yml\r\n```\r\n---\r\n- hosts: localhost\r\n  connection: local\r\n  tasks:\r\n    - name: Destroy instances\r\n      molecule_vagrant:\r\n        instance_name: \"centos7\"\r\n        platform_box: centos/7\r\n        state: destroy\r\n```\r\n\r\nUsed versions:\r\n* Fedora 29/30\r\n* Vagrant 2.2.4\r\n* VirtualBox 6.0.8\r\n* testinfra 1.19.0\r\n```\r\nansible 2.8.0\r\n  config file = None\r\n  configured module search path = [u'/home/user/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/user/Env/ansible/lib/python2.7/site-packages/ansible\r\n  executable location = /home/user/Env/ansible/bin/ansible\r\n  python version = 2.7.16 (default, Apr 30 2019, 15:54:43) [GCC 9.0.1 20190312 (Red Hat 9.0.1-0.10)]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nWorking ssh connection.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\nFailed to connect to the host via ssh: ssh: Could not resolve hostname centos7: Name or service not known\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2077/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2077/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2076", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2076/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2076/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2076/events", "html_url": "https://github.com/ansible-community/molecule/pull/2076", "id": 449270285, "node_id": "MDExOlB1bGxSZXF1ZXN0MjgyODMxNTY0", "number": 2076, "title": "Add paramiko dependency (made optional in Ansible 2.8+)", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-28T13:29:27Z", "updated_at": "2019-05-29T08:43:19Z", "closed_at": "2019-05-29T08:24:42Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2076", "html_url": "https://github.com/ansible-community/molecule/pull/2076", "diff_url": "https://github.com/ansible-community/molecule/pull/2076.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2076.patch", "merged_at": "2019-05-29T08:24:41Z"}, "body": "Closes https://github.com/ansible/molecule/issues/2070.\r\n\r\nSee https://github.com/ansible/ansible/blob/stable-2.8/changelogs/CHANGELOG-v2.8.rst.\r\nSee https://www.paramiko.org/installing.html.\r\n\r\nAs far as I can tell, in the traceback of #2070, it's because we choose to use the Testinfra paramiko back-end. Maybe we can investigate that choice later on. Testinfra doesn't manage these connection back-ends for us and Ansible use to give us this dependency on previous versions transitively.\r\n\r\nQuestions:\r\n  * Will this conflict with Ansible < 2.8 dependencies?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2076/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2071", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2071/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2071/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2071/events", "html_url": "https://github.com/ansible-community/molecule/issues/2071", "id": 449169543, "node_id": "MDU6SXNzdWU0NDkxNjk1NDM=", "number": 2071, "title": "Testinfra 3.0.2 should be installed.", "user": {"login": "codequokka", "id": 50156460, "node_id": "MDQ6VXNlcjUwMTU2NDYw", "avatar_url": "https://avatars.githubusercontent.com/u/50156460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codequokka", "html_url": "https://github.com/codequokka", "followers_url": "https://api.github.com/users/codequokka/followers", "following_url": "https://api.github.com/users/codequokka/following{/other_user}", "gists_url": "https://api.github.com/users/codequokka/gists{/gist_id}", "starred_url": "https://api.github.com/users/codequokka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codequokka/subscriptions", "organizations_url": "https://api.github.com/users/codequokka/orgs", "repos_url": "https://api.github.com/users/codequokka/repos", "events_url": "https://api.github.com/users/codequokka/events{/privacy}", "received_events_url": "https://api.github.com/users/codequokka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-28T09:44:57Z", "updated_at": "2019-05-28T09:54:52Z", "closed_at": "2019-05-28T09:54:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.0\r\n  config file = None\r\n  configured module search path = ['/home/vagrant/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /tmp/molecule-test/.venv/lib/python3.6/site-packages/ansible\r\n  executable location = /tmp/molecule-test/.venv/bin/ansible\r\n  python version = 3.6.4 (default, May 28 2019, 09:20:39) [GCC 5.4.0 20160609]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nNone\r\n\r\n# Desired Behavior\r\n\r\nAs stated in setup.cfg, testinfra 3.0.2 should be installed.\r\n\r\n# Actual Behaviour\r\ntestinfra 1.19.0 is installed.\r\n\r\n```zsh\r\n$ mkdir /tmp/molecule-install-test\r\n$ cd /tmp/molecule-install-test\r\n$ pytho3 -m venv .venv\r\n$ source .venv/bin/activate\r\n$ pip install molecule\r\n$ pip list | grep testinfra\r\ntestinfra          1.19.0\r\n```\r\n\r\nI am newbie about python packaging system, But it seems to me that follwing output is related this issue.\r\n```zsh\r\n$ ag '1\\.19\\.0' .venv/lib/python3.7/site-packages/molecule-2.20.1.dist-info/METADATA\r\n54:Requires-Dist: testinfra (==1.19.0)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2071/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2070", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2070/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2070/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2070/events", "html_url": "https://github.com/ansible-community/molecule/issues/2070", "id": 449094918, "node_id": "MDU6SXNzdWU0NDkwOTQ5MTg=", "number": 2070, "title": "RuntimeError: You must install paramiko package (pip install paramiko) to use the paramiko backend [Molecule verify, Ansible 2.8, Testinfra 3.x, AWS EC2 driver]", "user": {"login": "jonashackt", "id": 6949966, "node_id": "MDQ6VXNlcjY5NDk5NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/6949966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonashackt", "html_url": "https://github.com/jonashackt", "followers_url": "https://api.github.com/users/jonashackt/followers", "following_url": "https://api.github.com/users/jonashackt/following{/other_user}", "gists_url": "https://api.github.com/users/jonashackt/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonashackt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonashackt/subscriptions", "organizations_url": "https://api.github.com/users/jonashackt/orgs", "repos_url": "https://api.github.com/users/jonashackt/repos", "events_url": "https://api.github.com/users/jonashackt/events{/privacy}", "received_events_url": "https://api.github.com/users/jonashackt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-28T06:58:45Z", "updated_at": "2019-06-13T14:55:33Z", "closed_at": "2019-05-29T08:24:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nPrerequisites (install testinfra first to fix https://github.com/ansible/molecule/issues/1727)\r\n\r\n```\r\n$ pip install testinfra molecule docker\r\nInstalling collected packages: testinfra, molecule, docker, ansible\r\nSuccessfully installed ansible-2.8.0 docker-4.0.1 molecule-2.20.1 testinfra-3.0.4\r\n```\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.8.0\r\n  config file = None\r\n  configured module search path = ['/Users/jonashecht/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.3 (default, Mar 27 2019, 09:23:15) [Clang 10.0.1 (clang-1001.0.46.3)]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule verify --scenario-name aws-ec2-ubuntu` should verify a AWS EC2 instance (like it does with Ansible 2.7.x and Testinfra 2.x)\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 aws-ec2-ubuntu\r\n    \u2514\u2500\u2500 verify\r\n    \r\n--> Scenario: 'aws-ec2-ubuntu'\r\n--> Action: 'verify'\r\n--> Executing Testinfra tests found in /home/circleci/molecule-ansible-docker-vagrant/docker/molecule/aws-ec2-ubuntu/../tests//...\r\n    ============================= test session starts ==============================\r\n    platform linux -- Python 3.6.1, pytest-4.5.0, py-1.8.0, pluggy-0.11.0 -- /usr/local/bin/python\r\n    rootdir: /home/circleci/molecule-ansible-docker-vagrant/docker/molecule\r\n    plugins: testinfra-3.0.4\r\ncollected 3 items                                                              \r\n    \r\n    ../tests/test_docker.py::test_is_docker_installed[ansible:/aws-ec2-ubuntu] FAILED [ 33%]\r\n    ../tests/test_docker.py::test_vagrant_user_is_part_of_group_docker[ansible:/aws-ec2-ubuntu] FAILED [ 66%]\r\n    ../tests/test_docker.py::test_run_hello_world_container_successfully[ansible:/aws-ec2-ubuntu] FAILED [100%]\r\n    \r\n    =================================== FAILURES ===================================\r\n    ______________ test_is_docker_installed[ansible://aws-ec2-ubuntu] ______________\r\n    \r\n    self = <testinfra.utils.ansible_runner.AnsibleRunner object at 0x7f30d7171ba8>\r\n    host = 'aws-ec2-ubuntu'\r\n    kwargs = {'ssh_config': None, 'ssh_identity_file': None}\r\n    \r\n        def get_host(self, host, **kwargs):\r\n            try:\r\n    >           return self._host_cache[host]\r\n    E           KeyError: 'aws-ec2-ubuntu'\r\n    \r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:166: KeyError\r\n    \r\n    During handling of the above exception, another exception occurred:\r\n    \r\n        from __future__ import unicode_literals\r\n        from __future__ import absolute_import\r\n        \r\n        import os\r\n        \r\n        try:\r\n    >       import paramiko\r\n    E       ModuleNotFoundError: No module named 'paramiko'\r\n    \r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/paramiko.py:20: ModuleNotFoundError\r\n    \r\n    During handling of the above exception, another exception occurred:\r\n    \r\n    host = <testinfra.host.Host object at 0x7f30d746e780>\r\n    \r\n        def test_is_docker_installed(host):\r\n    >       package_docker = host.package('docker-ce')\r\n    \r\n    ../tests/test_docker.py:10:\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    /usr/local/lib/python3.6/site-packages/testinfra/host.py:107: in __getattr__\r\n        obj = module_class.get_module(self)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/modules/base.py:22: in get_module\r\n        klass = cls.get_module_class(_host)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/modules/package.py:69: in get_module_class\r\n        if host.system_info.type == 'windows':\r\n    /usr/local/lib/python3.6/site-packages/testinfra/modules/systeminfo.py:143: in type\r\n        return self.sysinfo[\"type\"]\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/__init__.py:44: in __get__\r\n        value = obj.__dict__[self.func.__name__] = self.func(obj)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/modules/systeminfo.py:33: in sysinfo\r\n        uname = self.run_expect([0, 1], 'uname -s')\r\n    /usr/local/lib/python3.6/site-packages/testinfra/host.py:71: in run\r\n        return self.backend.run(command, *args, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/ansible.py:46: in run\r\n        ssh_identity_file=self.ssh_identity_file)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:173: in run\r\n        return self.get_host(host, **kwargs).run(command)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:169: in get_host\r\n        self.ansible_config, self.inventory, host, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:97: in get_ansible_host\r\n        return testinfra.get_host(spec, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/host.py:132: in get_host\r\n        backend = testinfra.backend.get_backend(hostspec, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/__init__.py:73: in get_backend\r\n        klass = get_backend_class(kw[\"connection\"])\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/__init__.py:41: in get_backend_class\r\n        return getattr(importlib.import_module(module), name)\r\n    /usr/local/lib/python3.6/importlib/__init__.py:126: in import_module\r\n        return _bootstrap._gcd_import(name[level:], package, level)\r\n    <frozen importlib._bootstrap>:978: in _gcd_import\r\n        ???\r\n    <frozen importlib._bootstrap>:961: in _find_and_load\r\n        ???\r\n    <frozen importlib._bootstrap>:950: in _find_and_load_unlocked\r\n        ???\r\n    <frozen importlib._bootstrap>:646: in _load_unlocked\r\n        ???\r\n    <frozen importlib._bootstrap>:616: in _load_backward_compatible\r\n        ???\r\n    /usr/local/lib/python3.6/site-packages/_pytest/assertion/rewrite.py:301: in load_module\r\n        exec(co, mod.__dict__)\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    \r\n        from __future__ import unicode_literals\r\n        from __future__ import absolute_import\r\n        \r\n        import os\r\n        \r\n        try:\r\n            import paramiko\r\n        except ImportError:\r\n            raise RuntimeError((\r\n    >           \"You must install paramiko package (pip install paramiko) \"\r\n                \"to use the paramiko backend\"))\r\n    E       RuntimeError: You must install paramiko package (pip install paramiko) to use the paramiko backend\r\n    \r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/paramiko.py:23: RuntimeError\r\n    _____ test_vagrant_user_is_part_of_group_docker[ansible://aws-ec2-ubuntu] ______\r\n    \r\n    self = <testinfra.utils.ansible_runner.AnsibleRunner object at 0x7f30d7171ba8>\r\n    host = 'aws-ec2-ubuntu'\r\n    kwargs = {'ssh_config': None, 'ssh_identity_file': None}\r\n    \r\n        def get_host(self, host, **kwargs):\r\n            try:\r\n    >           return self._host_cache[host]\r\n    E           KeyError: 'aws-ec2-ubuntu'\r\n    \r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:166: KeyError\r\n    \r\n    During handling of the above exception, another exception occurred:\r\n    \r\n        from __future__ import unicode_literals\r\n        from __future__ import absolute_import\r\n        \r\n        import os\r\n        \r\n        try:\r\n    >       import paramiko\r\n    E       ModuleNotFoundError: No module named 'paramiko'\r\n    \r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/paramiko.py:20: ModuleNotFoundError\r\n    \r\n    During handling of the above exception, another exception occurred:\r\n    \r\n    host = <testinfra.host.Host object at 0x7f30d746e780>\r\n    \r\n        def test_vagrant_user_is_part_of_group_docker(host):\r\n    >       user_vagrant = host.user('vagrant')\r\n    \r\n    \u001b[1m../tests/test_docker.py:16:\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    /usr/local/lib/python3.6/site-packages/testinfra/host.py:107: in __getattr__\r\n        obj = module_class.get_module(self)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/modules/base.py:22: in get_module\r\n        klass = cls.get_module_class(_host)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/modules/user.py:110: in get_module_class\r\n        if host.system_info.type.endswith(\"bsd\"):\r\n    /usr/local/lib/python3.6/site-packages/testinfra/modules/systeminfo.py:143: in type\r\n        return self.sysinfo[\"type\"]\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/__init__.py:44: in __get__\r\n        value = obj.__dict__[self.func.__name__] = self.func(obj)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/modules/systeminfo.py:33: in sysinfo\r\n        uname = self.run_expect([0, 1], 'uname -s')\r\n    /usr/local/lib/python3.6/site-packages/testinfra/host.py:71: in run\r\n        return self.backend.run(command, *args, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/ansible.py:46: in run\r\n        ssh_identity_file=self.ssh_identity_file)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:173: in run\r\n        return self.get_host(host, **kwargs).run(command)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:169: in get_host\r\n        self.ansible_config, self.inventory, host, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:97: in get_ansible_host\r\n        return testinfra.get_host(spec, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/host.py:132: in get_host\r\n        backend = testinfra.backend.get_backend(hostspec, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/__init__.py:73: in get_backend\r\n        klass = get_backend_class(kw[\"connection\"])\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/__init__.py:41: in get_backend_class\r\n        return getattr(importlib.import_module(module), name)\r\n    /usr/local/lib/python3.6/importlib/__init__.py:126: in import_module\r\n        return _bootstrap._gcd_import(name[level:], package, level)\r\n    <frozen importlib._bootstrap>:978: in _gcd_import\r\n        ???\r\n    <frozen importlib._bootstrap>:961: in _find_and_load\r\n        ???\r\n    <frozen importlib._bootstrap>:950: in _find_and_load_unlocked\r\n        ???\r\n    <frozen importlib._bootstrap>:646: in _load_unlocked\r\n        ???\r\n    <frozen importlib._bootstrap>:616: in _load_backward_compatible\r\n        ???\r\n    /usr/local/lib/python3.6/site-packages/_pytest/assertion/rewrite.py:301: in load_module\r\n        exec(co, mod.__dict__)\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    \r\n        from __future__ import unicode_literals\r\n        from __future__ import absolute_import\r\n        \r\n        import os\r\n        \r\n        try:\r\n            import paramiko\r\n        except ImportError:\r\n            raise RuntimeError((\r\n    >           \"You must install paramiko package (pip install paramiko) \"\r\n                \"to use the paramiko backend\"))\r\n    E       RuntimeError: You must install paramiko package (pip install paramiko) to use the paramiko backend\r\n    \r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/paramiko.py:23: RuntimeError\r\n    ____ test_run_hello_world_container_successfully[ansible://aws-ec2-ubuntu] _____\r\n    \r\n    self = <testinfra.utils.ansible_runner.AnsibleRunner object at 0x7f30d7171ba8>\r\n    host = 'aws-ec2-ubuntu'\r\n    kwargs = {'ssh_config': None, 'ssh_identity_file': None}\r\n    \r\n        def get_host(self, host, **kwargs):\r\n            try:\r\n    >           return self._host_cache[host]\r\n    E           KeyError: 'aws-ec2-ubuntu'\r\n    \r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:166: KeyError\r\n    \r\n    During handling of the above exception, another exception occurred:\r\n    \r\n        from __future__ import unicode_literals\r\n        from __future__ import absolute_import\r\n        \r\n        import os\r\n        \r\n        try:\r\n    >       import paramiko\r\n    E       ModuleNotFoundError: No module named 'paramiko'\r\n    \r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/paramiko.py:20: ModuleNotFoundError\r\n    \r\n    During handling of the above exception, another exception occurred:\r\n    \r\n    host = <testinfra.host.Host object at 0x7f30d746e780>\r\n    \r\n        def test_run_hello_world_container_successfully(host):\r\n    >       hello_world_ran = host.run(\"sudo docker run hello-world\")\r\n    \r\n    ../tests/test_docker.py:22:\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    /usr/local/lib/python3.6/site-packages/testinfra/host.py:71: in run\r\n        return self.backend.run(command, *args, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/ansible.py:46: in run\r\n        ssh_identity_file=self.ssh_identity_file)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:173: in run\r\n        return self.get_host(host, **kwargs).run(command)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:169: in get_host\r\n        self.ansible_config, self.inventory, host, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:97: in get_ansible_host\r\n        return testinfra.get_host(spec, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/host.py:132: in get_host\r\n        backend = testinfra.backend.get_backend(hostspec, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/__init__.py:73: in get_backend\r\n        klass = get_backend_class(kw[\"connection\"])\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/__init__.py:41: in get_backend_class\r\n        return getattr(importlib.import_module(module), name)\r\n    /usr/local/lib/python3.6/importlib/__init__.py:126: in import_module\r\n        return _bootstrap._gcd_import(name[level:], package, level)\r\n    <frozen importlib._bootstrap>:978: in _gcd_import\r\n        ???\r\n    <frozen importlib._bootstrap>:961: in _find_and_load\r\n        ???\r\n    \u001b[1m<frozen importlib._bootstrap>:950: in _find_and_load_unlocked\r\n        ???\r\n    <frozen importlib._bootstrap>:646: in _load_unlocked\r\n        ???\r\n    <frozen importlib._bootstrap>:616: in _load_backward_compatible\r\n        ???\r\n    /usr/local/lib/python3.6/site-packages/_pytest/assertion/rewrite.py:301: in load_module\r\n        exec(co, mod.__dict__)\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    \r\n        from __future__ import unicode_literals\r\n        from __future__ import absolute_import\r\n        \r\n        import os\r\n        \r\n        try:\r\n            import paramiko\r\n        except ImportError:\r\n            raise RuntimeError((\r\n    >           \"You must install paramiko package (pip install paramiko) \"\r\n                \"to use the paramiko backend\"))\r\n    E       RuntimeError: You must install paramiko package (pip install paramiko) to use the paramiko backend\r\n    \r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/paramiko.py:23: RuntimeError\r\n    =========================== 3 failed in 1.16 seconds ===========================\r\nExited with code 1\r\n```\r\n\r\nSee build log https://circleci.com/gh/jonashackt/molecule-ansible-docker-vagrant/26\r\n\r\nSeems that `paramiko` is now optional from Ansible 2.8.x on (see https://github.com/ansible/ansible/blob/stable-2.8/changelogs/CHANGELOG-v2.8.rst and look for `paramiko`). \r\n\r\nInstalling paramiko manually before the Molecule execution, the `molecule verify` step failes with `paramiko.ssh_exception.AuthenticationException: Authentication failed.` (see build log https://circleci.com/gh/jonashackt/molecule-ansible-docker-vagrant/27) or details here:\r\n\r\n```\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    \r\n    self = <paramiko.auth_handler.AuthHandler object at 0x7f3c489add30>\r\n    event = <threading.Event object at 0x7f3c489adcc0>\r\n    \r\n        def wait_for_response(self, event):\r\n            max_ts = None\r\n            if self.transport.auth_timeout is not None:\r\n                max_ts = time.time() + self.transport.auth_timeout\r\n            while True:\r\n                event.wait(0.1)\r\n                if not self.transport.is_active():\r\n                    e = self.transport.get_exception()\r\n                    if (e is None) or issubclass(e.__class__, EOFError):\r\n                        e = AuthenticationException(\"Authentication failed.\")\r\n                    raise e\r\n                if event.is_set():\r\n                    break\r\n                if max_ts is not None and max_ts <= time.time():\r\n                    raise AuthenticationException(\"Authentication timeout.\")\r\n        \r\n            if not self.is_authenticated():\r\n                e = self.transport.get_exception()\r\n                if e is None:\r\n                    e = AuthenticationException(\"Authentication failed.\")\r\n                # this is horrible.  Python Exception isn't yet descended from\r\n                # object, so type(e) won't work. :(\r\n                if issubclass(e.__class__, PartialAuthentication):\r\n                    return e.allowed_types\r\n    >           raise e\r\n    E           paramiko.ssh_exception.AuthenticationException: Authentication failed.\r\n    \r\n    /usr/local/lib/python3.6/site-packages/paramiko/auth_handler.py:250: AuthenticationException\r\n    \r\n    During handling of the above exception, another exception occurred:\r\n    \r\n    host = <testinfra.host.Host object at 0x7f3c4c68cb00>\r\n    \r\n        def test_run_hello_world_container_successfully(host):\r\n    >       hello_world_ran = host.run(\"sudo docker run hello-world\")\r\n    \r\n    ../tests/test_docker.py:22:\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    /usr/local/lib/python3.6/site-packages/testinfra/host.py:71: in run\r\n        return self.backend.run(command, *args, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/ansible.py:46: in run\r\n        ssh_identity_file=self.ssh_identity_file)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/ansible_runner.py:173: in run\r\n        return self.get_host(host, **kwargs).run(command)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/host.py:71: in run\r\n        return self.backend.run(command, *args, **kwargs)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/paramiko.py:117: in run\r\n        if not self.client.get_transport().is_active():\r\n    /usr/local/lib/python3.6/site-packages/testinfra/utils/__init__.py:44: in __get__\r\n        value = obj.__dict__[self.func.__name__] = self.func(obj)\r\n    /usr/local/lib/python3.6/site-packages/testinfra/backend/paramiko.py:98: in client\r\n        client.connect(**cfg)\r\n    /usr/local/lib/python3.6/site-packages/paramiko/client.py:437: in connect\r\n        passphrase,\r\n    /usr/local/lib/python3.6/site-packages/paramiko/client.py:749: in _auth\r\n        raise saved_exception\r\n    /usr/local/lib/python3.6/site-packages/paramiko/client.py:725: in _auth\r\n        self._transport.auth_publickey(username, key)\r\n    /usr/local/lib/python3.6/site-packages/paramiko/transport.py:1507: in auth_publickey\r\n        return self.auth_handler.wait_for_response(my_event)\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    \r\n    self = <paramiko.auth_handler.AuthHandler object at 0x7f3c48a3fc88>\r\n    event = <threading.Event object at 0x7f3c48a3fba8>\r\n    \r\n        def wait_for_response(self, event):\r\n            max_ts = None\r\n            if self.transport.auth_timeout is not None:\r\n                max_ts = time.time() + self.transport.auth_timeout\r\n            while True:\r\n                event.wait(0.1)\r\n                if not self.transport.is_active():\r\n                    e = self.transport.get_exception()\r\n                    if (e is None) or issubclass(e.__class__, EOFError):\r\n                        e = AuthenticationException(\"Authentication failed.\")\r\n                    raise e\r\n                if event.is_set():\r\n                    break\r\n                if max_ts is not None and max_ts <= time.time():\r\n                    raise AuthenticationException(\"Authentication timeout.\")\r\n        \r\n            if not self.is_authenticated():\r\n                e = self.transport.get_exception()\r\n                if e is None:\r\n                    e = AuthenticationException(\"Authentication failed.\")\r\n                # this is horrible.  Python Exception isn't yet descended from\r\n                # object, so type(e) won't work. :(\r\n                if issubclass(e.__class__, PartialAuthentication):\r\n                    return e.allowed_types\r\n    >           raise e\r\n    E           paramiko.ssh_exception.AuthenticationException: Authentication failed.\r\n    \r\n    /usr/local/lib/python3.6/site-packages/paramiko/auth_handler.py:250: AuthenticationException\r\n```\r\n\r\nFull documentation here: https://github.com/jonashackt/molecule-ansible-docker-vagrant/issues/3\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2070/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2070/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2069", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2069/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2069/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2069/events", "html_url": "https://github.com/ansible-community/molecule/issues/2069", "id": 449026058, "node_id": "MDU6SXNzdWU0NDkwMjYwNTg=", "number": 2069, "title": "SSHException with latest testinfra", "user": {"login": "sassoo", "id": 15107502, "node_id": "MDQ6VXNlcjE1MTA3NTAy", "avatar_url": "https://avatars.githubusercontent.com/u/15107502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sassoo", "html_url": "https://github.com/sassoo", "followers_url": "https://api.github.com/users/sassoo/followers", "following_url": "https://api.github.com/users/sassoo/following{/other_user}", "gists_url": "https://api.github.com/users/sassoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/sassoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sassoo/subscriptions", "organizations_url": "https://api.github.com/users/sassoo/orgs", "repos_url": "https://api.github.com/users/sassoo/repos", "events_url": "https://api.github.com/users/sassoo/events{/privacy}", "received_events_url": "https://api.github.com/users/sassoo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-05-28T01:27:47Z", "updated_at": "2019-05-30T15:57:32Z", "closed_at": "2019-05-30T15:57:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/xxx/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, Apr  9 2019, 14:30:50) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\n`molecule verify` with the vagrant driver using virtualbox should successfully ssh into the guest vm created by molecule. This worked before upgrading to latest molecule & testinfra without changing anything else.\r\n\r\n# Actual Behaviour\r\n\r\nThe error is: `SSHException: No authentication methods available`. If I change the molecule generated ansible inventory files `ansible_private_key_file` key to `ansible_ssh_private_key_file` it works. Additionally, `molecule login` works without issue. This worked before upgrading to latest molecule & testinfra without changing anything else.\r\n\r\nAnother workaround in a simple test file is:\r\n\r\n```\r\nimport os\r\n\r\nimport testinfra.utils.ansible_runner\r\n\r\ntestinfra_hosts = testinfra.utils.ansible_runner.AnsibleRunner(\r\n    os.environ['MOLECULE_INVENTORY_FILE']).get_hosts('all')\r\n\r\n\r\ndef test_docker_run(host):\r\n    current = host.backend.ansible_runner.inventory['_meta']['hostvars']['instance-1']['ansible_private_key_file']\r\n    host.backend.ansible_runner.inventory['_meta']['hostvars']['instance-1']['ansible_ssh_private_key_file'] = current\r\n    with host.sudo():\r\n        assert host.run('docker run -t -d --name test alpine cat').rc == 0\r\n        assert host.docker('test').is_running\r\n```\r\n\r\nI'm unsure if molecule or testinfra is at fault so posting here first. Let me know if I should post a testinfra issue.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2069/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2061", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2061/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2061/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2061/events", "html_url": "https://github.com/ansible-community/molecule/issues/2061", "id": 448137972, "node_id": "MDU6SXNzdWU0NDgxMzc5NzI=", "number": 2061, "title": "Extra vars are not passed to the playbook anymore with converge.", "user": {"login": "zeitounator", "id": 176776, "node_id": "MDQ6VXNlcjE3Njc3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/176776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zeitounator", "html_url": "https://github.com/zeitounator", "followers_url": "https://api.github.com/users/zeitounator/followers", "following_url": "https://api.github.com/users/zeitounator/following{/other_user}", "gists_url": "https://api.github.com/users/zeitounator/gists{/gist_id}", "starred_url": "https://api.github.com/users/zeitounator/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zeitounator/subscriptions", "organizations_url": "https://api.github.com/users/zeitounator/orgs", "repos_url": "https://api.github.com/users/zeitounator/repos", "events_url": "https://api.github.com/users/zeitounator/events{/privacy}", "received_events_url": "https://api.github.com/users/zeitounator/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-24T12:12:36Z", "updated_at": "2019-05-28T12:24:19Z", "closed_at": "2019-05-28T12:24:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.0\r\n  config file = None\r\n  configured module search path = ['/home/olcla/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.6/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.7 (default, Oct 22 2018, 11:32:17) [GCC 8.2.0]\r\n\r\nmolecule (downgraded to 2.20 to fix but problem related to master branch)\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip from git master\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nWhen running `molecule converge -s my_scenario -- -e somevar=value` I expect molecule to pass the extra vars when running playbook.yml\r\n\r\n# Actual Behaviour\r\n\r\nI was trying to fix deprecations related to ansible 2.8 and had to install molecule from git master to overcome problems with testinfra. When running the above command with the latest molecule master, the extra vars are not passed to the playbook anymore. This is working as expected when downgrading to molecule 2.20.1 \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2061/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2061/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2060", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2060/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2060/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2060/events", "html_url": "https://github.com/ansible-community/molecule/issues/2060", "id": 447652274, "node_id": "MDU6SXNzdWU0NDc2NTIyNzQ=", "number": 2060, "title": "ansible roles are not copying template configuration into container hosts", "user": {"login": "thatsk", "id": 15324013, "node_id": "MDQ6VXNlcjE1MzI0MDEz", "avatar_url": "https://avatars.githubusercontent.com/u/15324013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thatsk", "html_url": "https://github.com/thatsk", "followers_url": "https://api.github.com/users/thatsk/followers", "following_url": "https://api.github.com/users/thatsk/following{/other_user}", "gists_url": "https://api.github.com/users/thatsk/gists{/gist_id}", "starred_url": "https://api.github.com/users/thatsk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thatsk/subscriptions", "organizations_url": "https://api.github.com/users/thatsk/orgs", "repos_url": "https://api.github.com/users/thatsk/repos", "events_url": "https://api.github.com/users/thatsk/events{/privacy}", "received_events_url": "https://api.github.com/users/thatsk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-05-23T13:07:04Z", "updated_at": "2020-07-19T10:15:43Z", "closed_at": "2020-07-19T10:15:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.7.10\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Apr  9 2019, 14:30:50) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\nmolecule, version 2.20.1\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: inpup01p1\r\n    hostname: inpup01p1\r\n    image: puppetmaster:2.0\r\n    pre_build_image: True\r\n    privileged: True\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    command: \"/usr/sbin/init\"\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    networks:\r\n      - name: example\r\n  - name: nocon01p1\r\n    hostname: nocon01p1 \r\n    image: centos:7.6\r\n    pre_build_image: True\r\n    privileged: True\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    command: \"/usr/sbin/init\"\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    exposed_ports:\r\n      - 8500/tcp\r\n      - 8500/udp\r\n      - 8301/tcp\r\n      - 8301/udp\r\n    published_ports:\r\n      - 0.0.0.0:8500:8500/tcp\r\n      - 0.0.0.0:8500:8500/udp\r\n    networks:\r\n      - name: example\r\n  - name: nocon02p1\r\n    hostname: nocon02p1\r\n    image: centos:7.6\r\n    pre_build_image: True\r\n    privileged: True\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    command: \"/usr/sbin/init\"\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    exposed_ports:\r\n      - 8500/tcp\r\n      - 8500/udp\r\n      - 8301/tcp\r\n      - 8301/udp\r\n    networks:\r\n      - name: example\r\n  - name: nocon03p1\r\n    hostname: nocon03p1\r\n    image: centos:7.6\r\n    pre_build_image: True\r\n    privileged: True\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    command: \"/usr/sbin/init\"\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    exposed_ports:\r\n      - 8500/tcp\r\n      - 8500/udp\r\n      - 8301/tcp\r\n      - 8301/udp\r\n    networks:\r\n      - name: example\r\n  - name: nocon04p1\r\n    hostname: nocon04p1\r\n    image: centos:7.6\r\n    pre_build_image: True\r\n    privileged: True\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    command: \"/usr/sbin/init\"\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    exposed_ports:\r\n      - 8500/tcp\r\n      - 8500/udp\r\n      - 8301/tcp\r\n      - 8301/udp\r\n    networks:\r\n      - name: example\r\nprovisioner:\r\n  name: ansible\r\n  options:\r\n    vvv: true\r\n  lint:\r\n    name: ansible-lint\r\n  playbooks:\r\n    prepare: prepare.yaml\r\n  env:\r\n    ANSIBLE_ROLES_PATH: ../resources/roles/\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n\r\n\r\nprepare.yaml\r\n- hosts: nocon01p1, nocon02p1, nocon03p1\r\n  gather_facts: true\r\n  vars:\r\n    hosts_add_basic_ipv6: false\r\n    hosts_add_ansible_managed_hosts: true\r\n    hosts_network_interface: eth1\r\n    hosts_entries:\r\n      - name: pulp\r\n        ip: 10.173.96.177\r\n        aliases:\r\n          - pulp\r\n  roles:\r\n    - hosts\r\n\r\ni am using this roles  \r\nhttps://github.com/bertvv/ansible-role-hosts.git\r\n\r\n# Desired Behavior\r\nit should modify hosts file of every container.\r\n\r\n\r\n# Actual Behaviour\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/tmp/ansible_copy_payload_lofnwe/ansible_copy_payload.zip/ansible/module_utils/basic.py\", line 2592, in atomic_move\r\n        os.rename(b_tmp_dest_name, b_dest)\r\n    OSError: [Errno 16] Device or resource busy\r\n\r\n    fatal: [nocon01p1]: FAILED! => {\r\n        \"changed\": false,\r\n        \"checksum\": \"4b3f405fab4e3570f9bae91a12c2475c1d8feef1\",\r\n        \"diff\": [],\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"_original_basename\": \"etc_hosts.j2\",\r\n                \"attributes\": null,\r\n                \"backup\": false,\r\n                \"checksum\": \"4b3f405fab4e3570f9bae91a12c2475c1d8feef1\",\r\n                \"content\": null,\r\n                \"delimiter\": null,\r\n                \"dest\": \"/etc/hosts\",\r\n                \"directory_mode\": null,\r\n                \"follow\": false,\r\n                \"force\": true,\r\n                \"group\": \"root\",\r\n                \"local_follow\": null,\r\n                \"mode\": 420,\r\n                \"owner\": \"root\",\r\n                \"regexp\": null,\r\n                \"remote_src\": null,\r\n                \"selevel\": null,\r\n                \"serole\": null,\r\n                \"setype\": null,\r\n                \"seuser\": null,\r\n                \"src\": \"/root/.ansible/tmp/ansible-tmp-1558616775.13-94474003016736/source\",\r\n                \"unsafe_writes\": null,\r\n                \"validate\": null\r\n            }\r\n        },\r\n        \"msg\": \"Unable to make /root/.ansible/tmp/ansible-tmp-1558616775.13-94474003016736/source into to /etc/hosts, failed final rename from /etc/.ansible_tmpV1vvPLhosts: [Errno 16] Device or resource busy\"\r\n    }\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/tmp/ansible_copy_payload_Ptxd2h/ansible_copy_payload.zip/ansible/module_utils/basic.py\", line 2592, in atomic_move\r\n        os.rename(b_tmp_dest_name, b_dest)\r\n    OSError: [Errno 16] Device or resource busy\r\n\r\n    fatal: [nocon02p1]: FAILED! => {\r\n        \"changed\": false,\r\n        \"checksum\": \"a7779bc0e68106719907e1a97bf50d1cdae8b2e7\",\r\n        \"diff\": [],\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"_original_basename\": \"etc_hosts.j2\",\r\n                \"attributes\": null,\r\n                \"backup\": false,\r\n                \"checksum\": \"a7779bc0e68106719907e1a97bf50d1cdae8b2e7\",\r\n                \"content\": null,\r\n                \"delimiter\": null,\r\n                \"dest\": \"/etc/hosts\",\r\n                \"directory_mode\": null,\r\n                \"follow\": false,\r\n                \"force\": true,\r\n                \"group\": \"root\",\r\n                \"local_follow\": null,\r\n                \"mode\": 420,\r\n                \"owner\": \"root\",\r\n                \"regexp\": null,\r\n                \"remote_src\": null,\r\n                \"selevel\": null,\r\n                \"serole\": null,\r\n                \"setype\": null,\r\n                \"seuser\": null,\r\n                \"src\": \"/root/.ansible/tmp/ansible-tmp-1558616775.31-186801450187651/source\",\r\n                \"unsafe_writes\": null,\r\n                \"validate\": null\r\n            }\r\n        },\r\n        \"msg\": \"Unable to make /root/.ansible/tmp/ansible-tmp-1558616775.31-186801450187651/source into to /etc/hosts, failed final rename from /etc/.ansible_tmpQrJsbPhosts: [Errno 16] Device or resource busy\"\r\n    }\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/tmp/ansible_copy_payload_Iy2DSa/ansible_copy_payload.zip/ansible/module_utils/basic.py\", line 2592, in atomic_move\r\n        os.rename(b_tmp_dest_name, b_dest)\r\n    OSError: [Errno 16] Device or resource busy\r\n\r\n    fatal: [nocon03p1]: FAILED! => {\r\n        \"changed\": false,\r\n        \"checksum\": \"9c7e1cc5ddc28c69784f653c4a1e5ea229880706\",\r\n        \"diff\": [],\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"_original_basename\": \"etc_hosts.j2\",\r\n                \"attributes\": null,\r\n                \"backup\": false,\r\n                \"checksum\": \"9c7e1cc5ddc28c69784f653c4a1e5ea229880706\",\r\n                \"content\": null,\r\n                \"delimiter\": null,\r\n                \"dest\": \"/etc/hosts\",\r\n                \"directory_mode\": null,\r\n                \"follow\": false,\r\n                \"force\": true,\r\n                \"group\": \"root\",\r\n                \"local_follow\": null,\r\n                \"mode\": 420,\r\n                \"owner\": \"root\",\r\n                \"regexp\": null,\r\n                \"remote_src\": null,\r\n                \"selevel\": null,\r\n                \"serole\": null,\r\n                \"setype\": null,\r\n                \"seuser\": null,\r\n                \"src\": \"/root/.ansible/tmp/ansible-tmp-1558616775.32-192566833611638/source\",\r\n                \"unsafe_writes\": null,\r\n                \"validate\": null\r\n            }\r\n        },\r\n        \"msg\": \"Unable to make /root/.ansible/tmp/ansible-tmp-1558616775.32-192566833611638/source into to /etc/hosts, failed final rename from /etc/.ansible_tmpspRaPhhosts: [Errno 16] Device or resource busy\"\r\n    }\r\n\r\n\r\noutput of running `molecule --debug`.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2060/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2060/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2059", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2059/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2059/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2059/events", "html_url": "https://github.com/ansible-community/molecule/issues/2059", "id": 447568650, "node_id": "MDU6SXNzdWU0NDc1Njg2NTA=", "number": 2059, "title": "Deprecation Warning: GCE module will be deprecated in 2.12", "user": {"login": "Lirt", "id": 11079428, "node_id": "MDQ6VXNlcjExMDc5NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/11079428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lirt", "html_url": "https://github.com/Lirt", "followers_url": "https://api.github.com/users/Lirt/followers", "following_url": "https://api.github.com/users/Lirt/following{/other_user}", "gists_url": "https://api.github.com/users/Lirt/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lirt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lirt/subscriptions", "organizations_url": "https://api.github.com/users/Lirt/orgs", "repos_url": "https://api.github.com/users/Lirt/repos", "events_url": "https://api.github.com/users/Lirt/events{/privacy}", "received_events_url": "https://api.github.com/users/Lirt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1205135639, "node_id": "MDU6TGFiZWwxMjA1MTM1NjM5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/test", "name": "test", "color": "0e8a16", "default": false, "description": "Improvement to quality assurance: CI/CD, testing, building"}], "state": "closed", "locked": false, "assignee": {"login": "Lirt", "id": 11079428, "node_id": "MDQ6VXNlcjExMDc5NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/11079428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lirt", "html_url": "https://github.com/Lirt", "followers_url": "https://api.github.com/users/Lirt/followers", "following_url": "https://api.github.com/users/Lirt/following{/other_user}", "gists_url": "https://api.github.com/users/Lirt/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lirt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lirt/subscriptions", "organizations_url": "https://api.github.com/users/Lirt/orgs", "repos_url": "https://api.github.com/users/Lirt/repos", "events_url": "https://api.github.com/users/Lirt/events{/privacy}", "received_events_url": "https://api.github.com/users/Lirt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Lirt", "id": 11079428, "node_id": "MDQ6VXNlcjExMDc5NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/11079428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lirt", "html_url": "https://github.com/Lirt", "followers_url": "https://api.github.com/users/Lirt/followers", "following_url": "https://api.github.com/users/Lirt/following{/other_user}", "gists_url": "https://api.github.com/users/Lirt/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lirt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lirt/subscriptions", "organizations_url": "https://api.github.com/users/Lirt/orgs", "repos_url": "https://api.github.com/users/Lirt/repos", "events_url": "https://api.github.com/users/Lirt/events{/privacy}", "received_events_url": "https://api.github.com/users/Lirt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-05-23T10:16:55Z", "updated_at": "2020-03-08T13:18:21Z", "closed_at": "2019-10-26T17:32:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Deprecation warning\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.8.0\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method: `pip`\r\nAnsible installation method: `pip`\r\n\r\n# Actual Behaviour\r\n\r\nThe [GCE module](https://docs.ansible.com/ansible/latest/modules/gce_module.html) will be deprecated in ansible 2.12. \r\n\r\nThe [recommendation](https://docs.ansible.com/ansible/devel/porting_guides/porting_guide_2.8.html#deprecation-notices) is to use module `gcp_compute_instance`.\r\n\r\nThis must be reflected in `google` driver cookiecutter template I guess (`https://github.com/ansible/molecule/tree/master/molecule/cookiecutter/scenario/driver/gce`).\r\n\r\nUsing recommended modules will make playbooks a little more complex, for example you need to also use `gcp_compute_address` to create external address for VM. I am already using this in MongoDB role, where I test 3 node cluster with multiple disks, because it gives me more options.\r\n\r\nI can provide some examples if you want. From first glance, there might be needed more variables from user in `platforms` section.\r\n\r\nThis is not yet big priority, because we still have a lot of time until ansible 2.12.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2059/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2059/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2058", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2058/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2058/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2058/events", "html_url": "https://github.com/ansible-community/molecule/issues/2058", "id": 447275690, "node_id": "MDU6SXNzdWU0NDcyNzU2OTA=", "number": 2058, "title": "Installing Molecule", "user": {"login": "BElluu", "id": 11333925, "node_id": "MDQ6VXNlcjExMzMzOTI1", "avatar_url": "https://avatars.githubusercontent.com/u/11333925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BElluu", "html_url": "https://github.com/BElluu", "followers_url": "https://api.github.com/users/BElluu/followers", "following_url": "https://api.github.com/users/BElluu/following{/other_user}", "gists_url": "https://api.github.com/users/BElluu/gists{/gist_id}", "starred_url": "https://api.github.com/users/BElluu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BElluu/subscriptions", "organizations_url": "https://api.github.com/users/BElluu/orgs", "repos_url": "https://api.github.com/users/BElluu/repos", "events_url": "https://api.github.com/users/BElluu/events{/privacy}", "received_events_url": "https://api.github.com/users/BElluu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-22T18:14:23Z", "updated_at": "2019-05-26T14:06:12Z", "closed_at": "2019-05-26T14:06:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.8.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/belluu/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/belluu/.local/lib/python3.6/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.6.7 (default, Oct 22 2018, 11:32:17) [GCC 8.2.0]\r\n\r\nmolecule: command not found\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI installed ansible and after that molecule using pip install and pip3 install. When I check  pip3 list or pip list I see molecule (2.20.1) but when I try use molecule commands, I have \"molecule: command not found\"\r\n\r\n# Actual Behaviour\r\n\r\nI tried brew install python but that didn't fix my problem.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2058/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2058/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2053", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2053/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2053/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2053/events", "html_url": "https://github.com/ansible-community/molecule/issues/2053", "id": 445797085, "node_id": "MDU6SXNzdWU0NDU3OTcwODU=", "number": 2053, "title": "Fix docker sanity check for ansible 2.8+", "user": {"login": "znerol", "id": 23288, "node_id": "MDQ6VXNlcjIzMjg4", "avatar_url": "https://avatars.githubusercontent.com/u/23288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/znerol", "html_url": "https://github.com/znerol", "followers_url": "https://api.github.com/users/znerol/followers", "following_url": "https://api.github.com/users/znerol/following{/other_user}", "gists_url": "https://api.github.com/users/znerol/gists{/gist_id}", "starred_url": "https://api.github.com/users/znerol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/znerol/subscriptions", "organizations_url": "https://api.github.com/users/znerol/orgs", "repos_url": "https://api.github.com/users/znerol/repos", "events_url": "https://api.github.com/users/znerol/events{/privacy}", "received_events_url": "https://api.github.com/users/znerol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-19T09:09:20Z", "updated_at": "2019-05-19T12:35:00Z", "closed_at": "2019-05-19T12:35:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nTravis build passes for ansible 2.8\r\n\r\n# Actual Behaviour\r\n\r\nEven after fixing the `testinfra` dependency the 2.8 build still does not pass on travis. This is due to the fact that `test_sanity_checks_missing_docker_dependency` tries to import a module which was moved in ansible 2.8.\r\n\r\nFrom a recent build log: https://travis-ci.com/ansible/molecule/jobs/201279446#L1163\r\n\r\n```\r\n=================================== FAILURES ===================================\r\n_________________ test_sanity_checks_missing_docker_dependency _________________\r\nthing = <module 'ansible.module_utils' from '/home/travis/build/ansible/molecule/.tox/ansible28-unit/lib/python3.7/site-packages/ansible/module_utils/__init__.py'>\r\ncomp = 'docker_common', import_path = 'ansible.module_utils.docker_common'\r\n    def _dot_lookup(thing, comp, import_path):\r\n        try:\r\n>           return getattr(thing, comp)\r\nE           AttributeError: module 'ansible.module_utils' has no attribute 'docker_common'\r\n/opt/python/3.7.1/lib/python3.7/unittest/mock.py:1083: AttributeError\r\nDuring handling of the above exception, another exception occurred:\r\nmocker = <pytest_mock.MockFixture object at 0x7f913a7cee80>\r\n_instance = <molecule.driver.docker.Docker object at 0x7f913bbe4780>\r\n    def test_sanity_checks_missing_docker_dependency(mocker, _instance):\r\n        target = 'ansible.module_utils.docker_common.HAS_DOCKER_PY'\r\n>       mocker.patch(target, False)\r\n/home/travis/build/ansible/molecule/test/unit/driver/test_docker.py:147: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n/home/travis/build/ansible/molecule/.tox/ansible28-unit/lib/python3.7/site-packages/pytest_mock.py:158: in __call__\r\n    return self._start_patch(self.mock_module.patch, *args, **kwargs)\r\n/home/travis/build/ansible/molecule/.tox/ansible28-unit/lib/python3.7/site-packages/pytest_mock.py:138: in _start_patch\r\n    mocked = p.start()\r\n/opt/python/3.7.1/lib/python3.7/unittest/mock.py:1386: in start\r\n    result = self.__enter__()\r\n/opt/python/3.7.1/lib/python3.7/unittest/mock.py:1239: in __enter__\r\n    self.target = self.getter()\r\n/opt/python/3.7.1/lib/python3.7/unittest/mock.py:1409: in <lambda>\r\n    getter = lambda: _importer(target)\r\n/opt/python/3.7.1/lib/python3.7/unittest/mock.py:1096: in _importer\r\n    thing = _dot_lookup(thing, comp, import_path)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\nthing = <module 'ansible.module_utils' from '/home/travis/build/ansible/molecule/.tox/ansible28-unit/lib/python3.7/site-packages/ansible/module_utils/__init__.py'>\r\ncomp = 'docker_common', import_path = 'ansible.module_utils.docker_common'\r\n    def _dot_lookup(thing, comp, import_path):\r\n        try:\r\n            return getattr(thing, comp)\r\n        except AttributeError:\r\n>           __import__(import_path)\r\nE           ModuleNotFoundError: No module named 'ansible.module_utils.docker_common'\r\n/opt/python/3.7.1/lib/python3.7/unittest/mock.py:1085: ModuleNotFoundError\r\n---------------------------- Captured stdout setup -----------------------------\r\n```\r\n\r\nIn order to resolve the issue the changes from #1985 need to be replicated for the test code as well.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2053/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2044", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2044/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2044/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2044/events", "html_url": "https://github.com/ansible-community/molecule/issues/2044", "id": 444928472, "node_id": "MDU6SXNzdWU0NDQ5Mjg0NzI=", "number": 2044, "title": "not able to login to docker multiple instances using molecule login --host", "user": {"login": "thatsk", "id": 15324013, "node_id": "MDQ6VXNlcjE1MzI0MDEz", "avatar_url": "https://avatars.githubusercontent.com/u/15324013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thatsk", "html_url": "https://github.com/thatsk", "followers_url": "https://api.github.com/users/thatsk/followers", "following_url": "https://api.github.com/users/thatsk/following{/other_user}", "gists_url": "https://api.github.com/users/thatsk/gists{/gist_id}", "starred_url": "https://api.github.com/users/thatsk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thatsk/subscriptions", "organizations_url": "https://api.github.com/users/thatsk/orgs", "repos_url": "https://api.github.com/users/thatsk/repos", "events_url": "https://api.github.com/users/thatsk/events{/privacy}", "received_events_url": "https://api.github.com/users/thatsk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-05-16T12:31:24Z", "updated_at": "2019-05-16T13:27:22Z", "closed_at": "2019-05-16T13:27:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n```YAML---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: nocon01p2\r\n    hostname: nocon01p2.example.com\r\n    image: centos/systemd:1.0\r\n    pre_build_image: True\r\n    privileged: True\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    command: \"/usr/sbin/init\"\r\n    tmpfs:\r\n      - /tmp\r\n      - /run\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    networks:\r\n      - name: example.com\r\n  - name: nocon02p2\r\n    hostname: nocon01p2.example.com\r\n    image: centos/systemd:1.0\r\n    pre_build_image: True\r\n    privileged: True\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    command: \"/usr/sbin/init\"\r\n    tmpfs:\r\n      - /tmp\r\n      - /run\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    networks:\r\n      - name: example.com\r\n  - name: nocon03p2\r\n    hostname: nocon01p2.example.com\r\n    image: centos/systemd:1.0\r\n    pre_build_image: True\r\n    privileged: True\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    command: \"/usr/sbin/init\"\r\n    tmpfs:\r\n      - /tmp\r\n      - /run\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    networks:\r\n      - name: example.com\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n```YAML\r\nroot@: ~/new-role# molecule list\r\n--> Validating schema /root/new-role/molecule/default/molecule.yml.\r\nmValidation completed successfully.\r\nInstance Name    Driver Name    Provisioner Name    Scenario Name    Created    Converged\r\n---------------  -------------  ------------------  ---------------  ---------  -----------\r\nnocon01p2        docker         ansible             default          true       false\r\nnocon02p2        docker         ansible             default          true       false\r\nnocon03p2        docker         ansible             default          true       false\r\nroot@: ~/new-role# molecule login --host nocon01p2\r\n--> Validating schema /root/new-role/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n[root@nocon01p2 /]# exit\r\nexit\r\nroot@: ~/new-role# molecule login --host nocon02p2\r\n--> Validating schema /root/new-role/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n[root@nocon01p2 /]# ssh nocon02p2\r\nThe authenticity of host 'nocon02p2 (172.22.0.3)' can't be established.\r\nECDSA key fingerprint is SHA256:jMK4l4RxOBM7d+DbF09stltWQLYrhJ9zjIsZ/fEYg9U.\r\nECDSA key fingerprint is MD5:74:ca:44:e2:b8:cd:f4:4b:dc:07:1f:19:23:d4:5f:c7.\r\nAre you sure you want to continue connecting (yes/no)? yes\r\nWarning: Permanently added 'nocon02p2,172.22.0.3' (ECDSA) to the list of known hosts.\r\nroot@nocon02p2's password:\r\nSystem is booting up. See pam_nologin(8)\r\n[root@nocon01p2 ~]# ^C\r\n```\r\n```\r\nansible --version \r\nansible 2.7.10\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.5 (default, Apr  9 2019, 14:30:50) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\r\nmolecule --version\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method :\r\n- pip\r\n\r\nAnsible installation method:\r\n- pip\r\n- OS package\r\n\r\n\r\n# Desired Behavior\r\nmolecule login --host nocon02p2\r\nshould be able to login nocon02p2\r\n\r\n\r\n# Actual Behaviour\r\nit should be able to login to multiple instance of docker using command line.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2044/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2041", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2041/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2041/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2041/events", "html_url": "https://github.com/ansible-community/molecule/issues/2041", "id": 443528292, "node_id": "MDU6SXNzdWU0NDM1MjgyOTI=", "number": 2041, "title": "incorrect information about galaxy", "user": {"login": "jctanner", "id": 1869705, "node_id": "MDQ6VXNlcjE4Njk3MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1869705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jctanner", "html_url": "https://github.com/jctanner", "followers_url": "https://api.github.com/users/jctanner/followers", "following_url": "https://api.github.com/users/jctanner/following{/other_user}", "gists_url": "https://api.github.com/users/jctanner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jctanner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jctanner/subscriptions", "organizations_url": "https://api.github.com/users/jctanner/orgs", "repos_url": "https://api.github.com/users/jctanner/repos", "events_url": "https://api.github.com/users/jctanner/events{/privacy}", "received_events_url": "https://api.github.com/users/jctanner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-13T17:58:55Z", "updated_at": "2020-08-22T17:50:17Z", "closed_at": "2020-08-22T17:50:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Summary\r\n\r\nhttps://github.com/ansible/molecule/blob/master/docs/getting-started.rst#creating-a-new-role\r\n\r\nMolecule does not use `ansible-galaxy` to create the role structure. They're actually created by cookiecutter.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2041/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2041/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2039", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2039/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2039/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2039/events", "html_url": "https://github.com/ansible-community/molecule/issues/2039", "id": 442898563, "node_id": "MDU6SXNzdWU0NDI4OTg1NjM=", "number": 2039, "title": "linting and testing virtualenv", "user": {"login": "ratmav", "id": 1655830, "node_id": "MDQ6VXNlcjE2NTU4MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1655830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ratmav", "html_url": "https://github.com/ratmav", "followers_url": "https://api.github.com/users/ratmav/followers", "following_url": "https://api.github.com/users/ratmav/following{/other_user}", "gists_url": "https://api.github.com/users/ratmav/gists{/gist_id}", "starred_url": "https://api.github.com/users/ratmav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ratmav/subscriptions", "organizations_url": "https://api.github.com/users/ratmav/orgs", "repos_url": "https://api.github.com/users/ratmav/repos", "events_url": "https://api.github.com/users/ratmav/events{/privacy}", "received_events_url": "https://api.github.com/users/ratmav/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-05-10T21:19:13Z", "updated_at": "2019-09-15T21:00:58Z", "closed_at": "2019-09-15T21:00:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n[user@host dir]$ pipenv run ansible --version\r\nansible 2.7.8\r\n  config file = None\r\n  configured module search path = ['/Users/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/user/.local/share/virtualenvs/project_name-F5AQQX11/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/ccuming/.local/share/virtualenvs/project_name-F5AQQX11/bin/ansible\r\n  python version = 3.7.2 (default, Feb 12 2019, 08:15:36) [Clang 10.0.0 (clang-1000.11.45.5)]\r\n[user@host dir]$ pipenv run molecule --version\r\nmolecule, version 2.19.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pipenv\r\n\r\nAnsible installation method (one of):\r\n- pipenv\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nwhen i run molecule tests, i'd like the virtualenv's packages (ansible and molecule) to not be scanned.\r\n\r\n# Actual Behaviour\r\n\r\nwhen i run molecule tests, the virtualenv packages are being scanned via flake8 and testinfra.\r\n\r\nInclude a [minimum complete verifiable example](https://stackoverflow.com/help/mcve) with\r\noutput of running `molecule --debug`.\r\n\r\nPipfile\r\n\r\n```\r\n[[source]]\r\nname = \"pypi\"\r\nurl = \"https://pypi.org/simple\"\r\nverify_ssl = true\r\n\r\n[dev-packages]\r\n\r\n[packages]\r\nansible = \"*\"\r\nmolecule = \"*\"\r\ndocker-py = \"*\"\r\n\r\n[requires]\r\npython_version = \"3.7\"\r\n```\r\n\r\n[molcule_debug.log](https://github.com/ansible/molecule/files/3168130/molcule_debug.log)\r\n\r\ni tried passing `exclude=*/virtualenvs/*` to flake8, but that didn't quite get it. is there something else i can try?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2039/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2038", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2038/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2038/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2038/events", "html_url": "https://github.com/ansible-community/molecule/issues/2038", "id": 442801238, "node_id": "MDU6SXNzdWU0NDI4MDEyMzg=", "number": 2038, "title": "molecule lint doesn't respect all ignore entries in .yamllint config", "user": {"login": "philipsd6", "id": 908201, "node_id": "MDQ6VXNlcjkwODIwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/908201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philipsd6", "html_url": "https://github.com/philipsd6", "followers_url": "https://api.github.com/users/philipsd6/followers", "following_url": "https://api.github.com/users/philipsd6/following{/other_user}", "gists_url": "https://api.github.com/users/philipsd6/gists{/gist_id}", "starred_url": "https://api.github.com/users/philipsd6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philipsd6/subscriptions", "organizations_url": "https://api.github.com/users/philipsd6/orgs", "repos_url": "https://api.github.com/users/philipsd6/repos", "events_url": "https://api.github.com/users/philipsd6/events{/privacy}", "received_events_url": "https://api.github.com/users/philipsd6/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133126, "node_id": "MDU6TGFiZWwyODgxMzMxMjY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/wontfix", "name": "wontfix", "color": "ffdddd", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-10T16:32:34Z", "updated_at": "2021-02-25T12:33:33Z", "closed_at": "2020-02-01T18:55:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.6.post0 (stable-2.7 1d3f29d4be) last updated 2019/01/31 09:40:14 (GMT -400)\r\n  config file = None\r\n  configured module search path = [u'/home/philipd/ansible/library']\r\n  ansible python module location = /home/philipd/ansible/lib/ansible\r\n  executable location = /home/philipd/ansible/bin/ansible\r\n  python version = 2.7.15+ (default, Oct  2 2018, 22:12:08) [GCC 8.2.0]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n\r\nDetail any linters or test runners used:\r\n\r\nyamllint 1.15.0\r\n\r\n# Desired Behavior\r\n\r\nRunning `yamllint .` and `molecule lint` should be identical, based on the same `.yamllint` config.\r\n\r\n# Actual Behaviour\r\n\r\nUsing this `.yamllint` config file, \r\n```yaml\r\nextends: default\r\n\r\nrules:\r\n  braces:\r\n    max-spaces-inside: 1\r\n    level: error\r\n  brackets:\r\n    max-spaces-inside: 1\r\n    level: error\r\n  line-length: disable\r\n  truthy: disable\r\n  document-start:\r\n    ignore: |\r\n      inventory/\r\n      examples/*inventory*\r\n```\r\n\r\nRunning `yamllint .` produces no errors or warnings -- it correctly ignores `inventory/` and `examples/*inventory*`.\r\n\r\nHowever, running `molecule lint` produces document-start warnings for the example inventory files:\r\n```\r\n--> Validating schema /home/philipsd6/devel/project1/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Validating schema /home/philipsd6/devel/project1/molecule/centos/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 lint\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/philipsd6/devel/project1/...\r\n    /home/philipsd6/devel/project1/examples/tech1_inventory.dummy.yml\r\n      2:1       warning  missing document start \"---\"  (document-start)\r\n    \r\n    /home/philipsd6/devel/project1/examples/tech2_inventory.dummy.yml\r\n      2:1       warning  missing document start \"---\"  (document-start)\r\n    \r\n    /home/philipsd6/devel/project1/examples/inventory.dummy.yml\r\n      2:1       warning  missing document start \"---\"  (document-start)\r\n```\r\nThis shows that it correctly ignores `inventory/` but does not correctly ignore `examples/*inventory*`. If I update that rule to ignore `examples/` it ignores the whole directory, and therefore doesn't lint the non-inventory files in that directory.\r\n\r\n`molecule --debug lint` shows that the lint stage is passing a list of fully qualified yaml files to the `yamllint` command:\r\n\r\n```\r\n/home/philipsd6/.local/bin/yamllint -s /home/philipsd6/devel/project1/examples/tech1_inventory.dummy.yml ...\r\n```\r\n\r\nNothing I put in the `.yamllint` ignore can avoid warnings for files under `example/` whether a fully qualified or relative path, or wildcard, except by ignoring just the `example/` directory itself.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2038/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2038/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2032", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2032/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2032/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2032/events", "html_url": "https://github.com/ansible-community/molecule/issues/2032", "id": 441703040, "node_id": "MDU6SXNzdWU0NDE3MDMwNDA=", "number": 2032, "title": "Documentation: Fedora seccomp Link is broken", "user": {"login": "madonius", "id": 1246752, "node_id": "MDQ6VXNlcjEyNDY3NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1246752?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madonius", "html_url": "https://github.com/madonius", "followers_url": "https://api.github.com/users/madonius/followers", "following_url": "https://api.github.com/users/madonius/following{/other_user}", "gists_url": "https://api.github.com/users/madonius/gists{/gist_id}", "starred_url": "https://api.github.com/users/madonius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madonius/subscriptions", "organizations_url": "https://api.github.com/users/madonius/orgs", "repos_url": "https://api.github.com/users/madonius/repos", "events_url": "https://api.github.com/users/madonius/events{/privacy}", "received_events_url": "https://api.github.com/users/madonius/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-08T12:11:00Z", "updated_at": "2020-02-01T18:59:04Z", "closed_at": "2020-02-01T18:59:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```bash\r\n> $ ansible --version && molecule --version\r\nansible 2.7.10\r\n  config file = /home/madonius/.ansible.cfg\r\n  configured module search path = ['/home/madonius/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.3rc1 (default, Mar 13 2019, 11:01:15) [GCC 8.3.0]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nIn the examples given in the documentation the link to the Fedora seccomp file is not working\r\nhttps://github.com/ansible/molecule/blame/master/docs/examples.rst#L165\r\n\r\n# Actual Behaviour\r\n\r\nProvide a sample seccomp that is known to work\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2032/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2028", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2028/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2028/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2028/events", "html_url": "https://github.com/ansible-community/molecule/issues/2028", "id": 440505874, "node_id": "MDU6SXNzdWU0NDA1MDU4NzQ=", "number": 2028, "title": "molecule zsh completion support is broken", "user": {"login": "codequokka", "id": 50156460, "node_id": "MDQ6VXNlcjUwMTU2NDYw", "avatar_url": "https://avatars.githubusercontent.com/u/50156460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codequokka", "html_url": "https://github.com/codequokka", "followers_url": "https://api.github.com/users/codequokka/followers", "following_url": "https://api.github.com/users/codequokka/following{/other_user}", "gists_url": "https://api.github.com/users/codequokka/gists{/gist_id}", "starred_url": "https://api.github.com/users/codequokka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codequokka/subscriptions", "organizations_url": "https://api.github.com/users/codequokka/orgs", "repos_url": "https://api.github.com/users/codequokka/repos", "events_url": "https://api.github.com/users/codequokka/events{/privacy}", "received_events_url": "https://api.github.com/users/codequokka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-05-06T00:06:02Z", "updated_at": "2021-05-18T18:09:08Z", "closed_at": "2021-05-18T18:09:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.7.10\r\n  config file = None\r\n  configured module search path = ['/Users/nbchk/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/nbchk/.ghq/github.com/codequokka/ansible-role-pypro3/.venv/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/nbchk/.ghq/github.com/codequokka/ansible-role-pypro3/.venv/bin/ansible\r\n  python version = 3.7.3 (default, Mar 27 2019, 09:23:15) [Clang 10.0.1 (clang-1001.0.46.3)]\r\nmolecule, version 2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- None\r\n\r\n# Desired Behavior\r\nAs fish and bash completion support, zsh also should have same one.\r\n\r\n- fish\r\n```\r\nbash-3.2$ eval \"$(_MOLECULE_COMPLETE=source molecule)\"                                                                                                      bash-3.2$  . /Users/nbchk/.ghq/github.com/codequokka/ansible-role-pypro3/.venv/bin/activate\r\nbash-3.2$ molecule l\r\nlint   list   login\r\n```\r\n\r\n- bash\r\n```\r\n\u276f eval (env _MOLECULE_COMPLETE=source-fish molecule)\r\n\u276f molecule list\r\nlint  (Lint the role.)  list  (Lists status of instances.)\r\n```\r\n\r\n# Actual Behaviour\r\nZsh has no completion in pressing tab.\r\n\r\n```                                                       \r\n% eval \"$(_MOLECULE_COMPLETE=source_zsh molecule)\"\r\n% molecule l\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2028/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2028/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2023", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2023/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2023/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2023/events", "html_url": "https://github.com/ansible-community/molecule/issues/2023", "id": 439476268, "node_id": "MDU6SXNzdWU0Mzk0NzYyNjg=", "number": 2023, "title": "Dependencies too constrained", "user": {"login": "micheelengronne", "id": 12596606, "node_id": "MDQ6VXNlcjEyNTk2NjA2", "avatar_url": "https://avatars.githubusercontent.com/u/12596606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/micheelengronne", "html_url": "https://github.com/micheelengronne", "followers_url": "https://api.github.com/users/micheelengronne/followers", "following_url": "https://api.github.com/users/micheelengronne/following{/other_user}", "gists_url": "https://api.github.com/users/micheelengronne/gists{/gist_id}", "starred_url": "https://api.github.com/users/micheelengronne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/micheelengronne/subscriptions", "organizations_url": "https://api.github.com/users/micheelengronne/orgs", "repos_url": "https://api.github.com/users/micheelengronne/repos", "events_url": "https://api.github.com/users/micheelengronne/events{/privacy}", "received_events_url": "https://api.github.com/users/micheelengronne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-02T08:26:39Z", "updated_at": "2019-05-02T09:06:42Z", "closed_at": "2019-05-02T09:06:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible-2.7.10\r\nmolecule-2.20.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nTests run on a Docker ubuntu:bionic with python3.6\r\n\r\nThe command is:\r\n\r\n    pip3 install --upgrade -r requirements.txt\r\n\r\nthe requirements.txt file contains:\r\n\r\n```\r\nansible\r\nansible-lint\r\nansible-bender\r\nmolecule\r\nyamllint\r\ndocker\r\n```\r\n\r\n# Desired Behavior\r\n\r\npip dependencies should be resolved without any conflict.\r\n\r\n# Actual Behaviour\r\n\r\nthe install gives:\r\n\r\n```\r\nERROR: molecule 2.20.1 has requirement Jinja2==2.10, but you'll have jinja2 2.10.1 which is incompatible.\r\nERROR: molecule 2.20.1 has requirement PyYAML==3.13, but you'll have pyyaml 5.1 which is incompatible.\r\nERROR: molecule 2.20.1 has requirement six==1.11.0, but you'll have six 1.12.0 which is incompatible.\r\nERROR: molecule 2.20.1 has requirement tabulate==0.8.2, but you'll have tabulate 0.8.3 which is incompatible.\r\n```\r\n\r\nmolecule constraints its dependencies too much as dependencies with newer minor versions (Semver syntax) conflict.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2023/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2023/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2022", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2022/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2022/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2022/events", "html_url": "https://github.com/ansible-community/molecule/issues/2022", "id": 439315935, "node_id": "MDU6SXNzdWU0MzkzMTU5MzU=", "number": 2022, "title": "Broken unit test: `{'driver': [{'provider': [{'name': ['unallowed value None',`", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-01T20:41:17Z", "updated_at": "2019-05-13T10:34:08Z", "closed_at": "2019-05-13T10:34:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See https://travis-ci.com/ansible/molecule/jobs/196973204#L1232. Saw this on latest CI run of the Hetzner driver PR while rebasing. Remined me of https://github.com/ansible/molecule/pull/1714#pullrequestreview-230537350. Not sure of cause ...\r\n\r\nAnyone got time for this?\r\n\r\n> \r\n> =================================== FAILURES ===================================\r\n> _ test_driver_provider_name_not_nullable_when_vagrant_driver[_model_driver_provider_name_n...] _\r\n> _config = {'dependency': {'name': 'galaxy'}, 'driver': {'name': 'vagrant', 'provider': {'name': None}}, 'lint': {'name': 'yamllint'}, 'platforms': [{'image': 'centos:latest', 'name': 'instance'}], ...}\r\n>     @pytest.mark.parametrize(\r\n>         '_config',\r\n>         ['_model_driver_provider_name_not_nullable_when_vagrant_section_data'],\r\n>         indirect=True)\r\n>     def test_driver_provider_name_not_nullable_when_vagrant_driver(_config):\r\n>         x = {\r\n>             'driver': [{\r\n>                 'provider': [{\r\n>                     'name': ['unallowed value None', 'null value not allowed']\r\n>                 }]\r\n>             }]\r\n>         }\r\n>     \r\n> >       assert x == schema_v2.validate(_config)\r\n> E       AssertionError: assert {'driver': [{...allowed']}]}]} == {'driver': [{'...allowed']}]}]}\r\n> E         Differing items:\r\n> E         {'driver': [{'provider': [{'name': ['unallowed value None', 'null value not allowed']}]}]} != {'driver': [{'provider': [{'name': ['null value not allowed']}]}]}\r\n> E         Full diff:\r\n> E         - {'driver': [{'provider': [{'name': ['unallowed value None',\r\n> E         ?                                               ----------- ^\r\n> E         + {'driver': [{'provider': [{'name': ['null value not allowed']}]}]}\r\n> E         ?                                      + +++++++++ +++        ^^^^^^\r\n> E         -                                     'null value not allowed']}]}]}", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2022/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2022/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2021", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2021/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2021/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2021/events", "html_url": "https://github.com/ansible-community/molecule/issues/2021", "id": 438281040, "node_id": "MDU6SXNzdWU0MzgyODEwNDA=", "number": 2021, "title": "Molecule Not using Python 3.7", "user": {"login": "vignajethkk", "id": 30315143, "node_id": "MDQ6VXNlcjMwMzE1MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/30315143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vignajethkk", "html_url": "https://github.com/vignajethkk", "followers_url": "https://api.github.com/users/vignajethkk/followers", "following_url": "https://api.github.com/users/vignajethkk/following{/other_user}", "gists_url": "https://api.github.com/users/vignajethkk/gists{/gist_id}", "starred_url": "https://api.github.com/users/vignajethkk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vignajethkk/subscriptions", "organizations_url": "https://api.github.com/users/vignajethkk/orgs", "repos_url": "https://api.github.com/users/vignajethkk/repos", "events_url": "https://api.github.com/users/vignajethkk/events{/privacy}", "received_events_url": "https://api.github.com/users/vignajethkk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-29T12:01:49Z", "updated_at": "2019-04-29T15:23:44Z", "closed_at": "2019-04-29T15:23:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is there a way to change the python version molecule uses?\r\nwhen I run `molecule create` command I get an error like\r\n```\r\n\"msg\": \"Failed to import docker or docker-py - cannot import name '__version__' from 'docker' (unknown location). Try `pip install docker` or `pip install docker-py` (Python 2.6)\"\r\n```\r\ncommand `pip3 list | grep docker`\r\ngives \r\n```\r\npip3 list | grep docker\r\ndocker            3.7.2\r\ndocker-pycreds    0.4.0\r\n```\r\nby ansible, molecule, testinfra \r\n\r\n```\r\nansible --version\r\nansible 2.7.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/path/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.3 (default, Mar 27 2019, 09:23:15) [Clang 10.0.1 (clang-1001.0.46.3)]\r\nmolecule --version\r\nmolecule, version 2.20.0\r\npy.test --version\r\nThis is pytest version 4.4.1, imported from /usr/local/lib/python3.7/site-packages/pytest.py\r\nsetuptools registered plugins:\r\n  testinfra-1.19.0 at /usr/local/lib/python3.7/site-packages/testinfra/plugin.py\r\npython --version\r\nPython 3.7.3\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2021/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2021/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2019", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2019/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2019/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2019/events", "html_url": "https://github.com/ansible-community/molecule/pull/2019", "id": 438096452, "node_id": "MDExOlB1bGxSZXF1ZXN0Mjc0MjA2Mzc5", "number": 2019, "title": "Ensure that ip command is available in docker images", "user": {"login": "znerol", "id": 23288, "node_id": "MDQ6VXNlcjIzMjg4", "avatar_url": "https://avatars.githubusercontent.com/u/23288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/znerol", "html_url": "https://github.com/znerol", "followers_url": "https://api.github.com/users/znerol/followers", "following_url": "https://api.github.com/users/znerol/following{/other_user}", "gists_url": "https://api.github.com/users/znerol/gists{/gist_id}", "starred_url": "https://api.github.com/users/znerol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/znerol/subscriptions", "organizations_url": "https://api.github.com/users/znerol/orgs", "repos_url": "https://api.github.com/users/znerol/repos", "events_url": "https://api.github.com/users/znerol/events{/privacy}", "received_events_url": "https://api.github.com/users/znerol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-04-28T20:24:38Z", "updated_at": "2019-04-30T12:42:42Z", "closed_at": "2019-04-30T12:42:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2019", "html_url": "https://github.com/ansible-community/molecule/pull/2019", "diff_url": "https://github.com/ansible-community/molecule/pull/2019.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2019.patch", "merged_at": "2019-04-30T12:42:35Z"}, "body": "Fixes #2018 by installing the `ip` command when building docker images. When facts are gathered, ansible invokes this command in order to determine network related infomation such as `ansible_default_ipv4`. If the `ip` command is missing, those facts are omitted.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2019/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2018", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2018/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2018/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2018/events", "html_url": "https://github.com/ansible-community/molecule/issues/2018", "id": 438094609, "node_id": "MDU6SXNzdWU0MzgwOTQ2MDk=", "number": 2018, "title": "Network related facts missing in some docker images", "user": {"login": "znerol", "id": 23288, "node_id": "MDQ6VXNlcjIzMjg4", "avatar_url": "https://avatars.githubusercontent.com/u/23288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/znerol", "html_url": "https://github.com/znerol", "followers_url": "https://api.github.com/users/znerol/followers", "following_url": "https://api.github.com/users/znerol/following{/other_user}", "gists_url": "https://api.github.com/users/znerol/gists{/gist_id}", "starred_url": "https://api.github.com/users/znerol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/znerol/subscriptions", "organizations_url": "https://api.github.com/users/znerol/orgs", "repos_url": "https://api.github.com/users/znerol/repos", "events_url": "https://api.github.com/users/znerol/events{/privacy}", "received_events_url": "https://api.github.com/users/znerol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-28T20:05:57Z", "updated_at": "2019-04-30T12:42:42Z", "closed_at": "2019-04-30T12:42:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\n\r\nansible 2.7.7\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/lo/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3/dist-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.7.3rc1 (default, Mar 13 2019, 11:01:15) [GCC 8.3.0]\r\nmolecule, version 2.20.2.dev71+g766dc35b\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nNetwork related facts such as `ansible_default_ipv4` should be populated.\r\n\r\n# Actual Behaviour\r\n\r\nSome of the official docker base images lack the `ip` command. Since ansible relies on that tool when gathering facts, affected containers lack any of the network related variables (e.g., `ansible_default_ipv4`).\r\n\r\n```\r\n$ docker run -it --rm alpine sh -c \"command -v ip\" || echo ip utility missing\r\n/sbin/ip\r\n$ docker run -it --rm centos sh -c \"command -v ip\" || echo ip utility missing\r\nip utility missing\r\n$ docker run -it --rm debian sh -c \"command -v ip\" || echo ip utility missing\r\n/sbin/ip\r\n$ docker run -it --rm fedora sh -c \"command -v ip\" || echo ip utility missing\r\nip utility missing\r\n$ docker run -it --rm opensuse/leap sh -c \"command -v ip\" || echo ip utility missing\r\nip utility missing\r\n$ docker run -it --rm ubuntu sh -c \"command -v ip\" || echo ip utility missing\r\nip utility missing\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2018/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2018/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2017", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2017/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2017/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2017/events", "html_url": "https://github.com/ansible-community/molecule/issues/2017", "id": 438079549, "node_id": "MDU6SXNzdWU0MzgwNzk1NDk=", "number": 2017, "title": "Generate modules list via Sphinx", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-28T17:20:36Z", "updated_at": "2019-05-23T10:34:40Z", "closed_at": "2019-05-23T10:34:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://molecule.readthedocs.io/en/latest/py-modindex.html is 404 Not Found :disappointed:\r\n\r\nThe index page links modindex by default. But module pages aren't generated by default.\r\n\r\nThis can be fixed by integrating `sphinxcontrib.apidoc` (it's better than the built-in `sphinx.ext.autodoc` extension because it's better integrated with the process and implements better namespace discovery).\r\nExample: https://github.com/sanitizers/octomachinery/commit/9b82193a7b9c49ed402e8dbd85f7ba7ce38ab767 + https://github.com/sanitizers/octomachinery/commit/b81d5b9a8dd96a4ebb1a940146a3514a7a57af54\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nmaster\r\n\r\nMolecule installation method (one of):\r\n\r\nN/A\r\n\r\nAnsible installation method (one of):\r\n\r\nN/A\r\n\r\n# Desired Behavior\r\n\r\nPython modules should be auto-documented allowing them to be linked from other places in docs.\r\n\r\n# Actual Behaviour\r\n\r\nPython modules are not linkable, their index page is 404.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2017/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2012", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2012/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2012/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2012/events", "html_url": "https://github.com/ansible-community/molecule/issues/2012", "id": 437677843, "node_id": "MDU6SXNzdWU0Mzc2Nzc4NDM=", "number": 2012, "title": "yamllint from the molecule virtualenv isn't found", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-04-26T13:38:51Z", "updated_at": "2019-05-22T09:11:01Z", "closed_at": "2019-05-22T09:11:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```console\r\n--> Executing Yamllint on files found in /tmp/mol-test/webknjaz.coll/...\r\npyenv: yamllint: command not found\r\n\r\nThe `yamllint' command exists in these Python versions:\r\n  3.7.0\r\n  3.7.1/envs/ansible-opencanary-py3.7.1-pyenv-venv\r\n  3.7.1/envs/molecule_error_example-py3.7.1-pyenv-venv\r\n  3.7.1/envs/molecule-py3.7.1-pyenv-venv\r\n  ansible-opencanary-py3.7.1-pyenv-venv\r\n  molecule_error_example-py3.7.1-pyenv-venv\r\n  molecule-py3.7.1-pyenv-venv\r\n\r\nAn error occurred during the test sequence action: 'lint'. Cleaning up.\r\n```\r\n\r\nPossible solutions:\r\n1) explicitly use the same Python interpreter:\r\n```python\r\nimport sys\r\nimport sh\r\ngetattr(sh, sys.executable).bake(  # instead of `sh.yamllint.bake(`\r\n    '-m', 'yamllint',\r\n    ...\r\n```\r\n2)\r\n```python\r\nimport yamllint\r\n```\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nmaster\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nMolecule picks up yamllint from the same virtualenv\r\n\r\n# Actual Behaviour\r\n\r\nMolecule executed from a virtualenv uses `sh` module and fails to find `yamllint` installed right next to it.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2012/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2006", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2006/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2006/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2006/events", "html_url": "https://github.com/ansible-community/molecule/issues/2006", "id": 436649696, "node_id": "MDU6SXNzdWU0MzY2NDk2OTY=", "number": 2006, "title": "Editable mode is not supported for pyproject.toml-style projects.", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-24T11:45:04Z", "updated_at": "2019-05-20T13:26:44Z", "closed_at": "2019-04-24T21:51:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "For Tox 3.9.0, I see now the following when running the unit tests:\r\n\r\n> ERROR: Error installing 'file:///home/decentral1se/ansible/molecule': editable mode is not supported for pyproject.toml-style projects. This project is being processed as pyproject.toml-style because it has a pyproject.toml file with a \"build-backend\" key in the \"build_system\" value. See PEP 517 for the relevant specification.\r\n\r\nThe fix is to set `usedevelop = False` and not do any `pip install -e` stuff. \r\n\r\nWhat do you think @webknjaz.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2006/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2006/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2004", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2004/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2004/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2004/events", "html_url": "https://github.com/ansible-community/molecule/pull/2004", "id": 436226591, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcyNzYxOTc5", "number": 2004, "title": "Drop sphinx make files", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-23T14:41:19Z", "updated_at": "2019-05-20T13:25:46Z", "closed_at": "2019-04-23T15:18:02Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/2004", "html_url": "https://github.com/ansible-community/molecule/pull/2004", "diff_url": "https://github.com/ansible-community/molecule/pull/2004.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/2004.patch", "merged_at": "2019-04-23T15:18:02Z"}, "body": "There should be only one way to build docs.\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n- Docs Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2004/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2004/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2003", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2003/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2003/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2003/events", "html_url": "https://github.com/ansible-community/molecule/issues/2003", "id": 436225453, "node_id": "MDU6SXNzdWU0MzYyMjU0NTM=", "number": 2003, "title": "Sort out image blobs in the repo", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-23T14:39:12Z", "updated_at": "2019-05-23T10:34:40Z", "closed_at": "2019-05-23T10:34:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It'd widely known that having blobs in the Git tree is harmful in general (because of Git's design).\r\n\r\n`/asset/molecule.png` and `/doc/source/_static/logo.png` are the same file duplicated in the repo.\r\n`/asset/mollie.png` is used nowhere.\r\n`*.psd` files are big blobs.\r\n\r\nThis can be improved:\r\n\r\n0) Don't keep duplicates in the repo\r\n1) Use SVG for web pages\r\n2) Try to check whether there's any useful metadata in those Photoshop sources; If not, having an image in vector format should be more than enough. If yes, it should be mostly possible to extract that metadata and put into SVG files.\r\n3) Eliminate PNG in favor of SVG (which are XML documents essentially == text which is Git-friendly)\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nN/A\r\n\r\nMolecule installation method (one of):\r\n\r\nN/A\r\n\r\nAnsible installation method (one of):\r\n\r\nN/A\r\n\r\nDetail any linters or test runners used:\r\n\r\nN/A\r\n\r\n# Desired Behavior\r\n\r\nNo blobs in Git tree.\r\n\r\n# Actual Behaviour\r\n\r\nBlobs in Git tree.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2003/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2003/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2002", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/2002/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/2002/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/2002/events", "html_url": "https://github.com/ansible-community/molecule/issues/2002", "id": 436018123, "node_id": "MDU6SXNzdWU0MzYwMTgxMjM=", "number": 2002, "title": "Molecule Verify Command Producing Error", "user": {"login": "vignajethkk", "id": 30315143, "node_id": "MDQ6VXNlcjMwMzE1MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/30315143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vignajethkk", "html_url": "https://github.com/vignajethkk", "followers_url": "https://api.github.com/users/vignajethkk/followers", "following_url": "https://api.github.com/users/vignajethkk/following{/other_user}", "gists_url": "https://api.github.com/users/vignajethkk/gists{/gist_id}", "starred_url": "https://api.github.com/users/vignajethkk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vignajethkk/subscriptions", "organizations_url": "https://api.github.com/users/vignajethkk/orgs", "repos_url": "https://api.github.com/users/vignajethkk/repos", "events_url": "https://api.github.com/users/vignajethkk/events{/privacy}", "received_events_url": "https://api.github.com/users/vignajethkk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-23T06:23:45Z", "updated_at": "2019-04-23T10:22:03Z", "closed_at": "2019-04-23T10:21:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "i ran `molecule init role -r mol_docker_test_2 -d docker --verifier-name testinfra` and then `molecule --debug converge` and finally `molecule verify`\r\n\r\nthe error is got was\r\n```\r\nmolecule verify\r\n--> Validating schema /path/mol_docker_test_2/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 verify\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'verify'\r\n--> Executing Testinfra tests found in /path/mol_docker_test_2/molecule/default/tests/...\r\n    ============================= test session starts ==============================\r\n    platform darwin -- Python 3.7.3, pytest-4.4.1, py-1.8.0, pluggy-0.9.0\r\n    rootdir: /path/mol_docker_test_2/molecule/default\r\n    plugins: testinfra-1.19.0\r\ncollected 0 items / 1 errors\r\n\r\n    ==================================== ERRORS ====================================\r\n    ____________________ ERROR collecting tests/test_default.py ____________________\r\n    tests/test_default.py:6: in <module>\r\n        os.environ['MOLECULE_INVENTORY_FILE']).get_hosts('all')\r\n    /usr/local/lib/python3.7/site-packages/testinfra/utils/ansible_runner.py:153: in __init__\r\n        self.cli.options = self.cli.base_parser(\r\n    E   AttributeError: 'PlaybookCLI' object has no attribute 'base_parser'\r\n    =============================== warnings summary ===============================\r\n    /Users/user_name/Library/Python/3.7/lib/python/site-packages/jinja2/utils.py:485\r\n      /Users/user_name/Library/Python/3.7/lib/python/site-packages/jinja2/utils.py:485: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import MutableMapping\r\n\r\n    /Users/user_name/Library/Python/3.7/lib/python/site-packages/jinja2/runtime.py:318\r\n      /Users/user_name/Library/Python/3.7/lib/python/site-packages/jinja2/runtime.py:318: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import Mapping\r\n\r\n    /Users/user_name/Library/Python/3.7/lib/python/site-packages/yaml/constructor.py:126\r\n      /Users/user_name/Library/Python/3.7/lib/python/site-packages/yaml/constructor.py:126: DeprecationWarning: Using or importing the ABCsfrom 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        if not isinstance(key, collections.Hashable):\r\n\r\n    -- Docs: https://docs.pytest.org/en/latest/warnings.html\r\n    !!!!!!!!!!!!!!!!!!! Interrupted: 1 errors during collection !!!!!!!!!!!!!!!!!!!!\r\n    ===================== 3 warnings, 1 error in 0.46 seconds ======================\r\n\r\n```\r\nthe versions i use\r\n```\r\nmolecule --version\r\nmolecule, version 2.20.0\r\npy.test --version\r\nThis is pytest version 4.4.1, imported from /usr/local/lib/python3.7/site-packages/pytest.py\r\nsetuptools registered plugins:\r\n  testinfra-1.19.0 at /usr/local/lib/python3.7/site-packages/testinfra/plugin.py\r\ndocker --version\r\nDocker version 18.09.0, build 4d60db4\r\n```\r\n\r\nmy default_python.py file looks like\r\n\r\n```\r\nimport os\r\n\r\nimport testinfra.utils.ansible_runner\r\n\r\ntestinfra_hosts = testinfra.utils.ansible_runner.AnsibleRunner(\r\n    os.environ['MOLECULE_INVENTORY_FILE']).get_hosts('all')\r\n\r\n\r\ndef test_hosts_file(host):\r\n    f = host.file('/etc/hosts')\r\n\r\n    assert f.exists\r\n    assert f.user == 'root'\r\n    assert f.group == 'root'\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/2002/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/2002/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1999", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1999/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1999/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1999/events", "html_url": "https://github.com/ansible-community/molecule/issues/1999", "id": 435716985, "node_id": "MDU6SXNzdWU0MzU3MTY5ODU=", "number": 1999, "title": "Unable to Create Test Resource using Molecule Create Command", "user": {"login": "vignajethkk", "id": 30315143, "node_id": "MDQ6VXNlcjMwMzE1MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/30315143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vignajethkk", "html_url": "https://github.com/vignajethkk", "followers_url": "https://api.github.com/users/vignajethkk/followers", "following_url": "https://api.github.com/users/vignajethkk/following{/other_user}", "gists_url": "https://api.github.com/users/vignajethkk/gists{/gist_id}", "starred_url": "https://api.github.com/users/vignajethkk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vignajethkk/subscriptions", "organizations_url": "https://api.github.com/users/vignajethkk/orgs", "repos_url": "https://api.github.com/users/vignajethkk/repos", "events_url": "https://api.github.com/users/vignajethkk/events{/privacy}", "received_events_url": "https://api.github.com/users/vignajethkk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-22T12:55:13Z", "updated_at": "2020-02-04T11:43:24Z", "closed_at": "2019-04-22T16:31:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to run molecule with docker driver but i am getting an error when molecule tries to discover local images, since `no_log: true` is enabled i am unable to see what the error is and `pull: False` also doesn't help \r\n\r\n```\r\ndocker --version\r\nDocker version 18.09.0, build 4d60db4\r\nmolecule --version\r\nmolecule, version 2.20.0\r\nansible --version\r\nansible 2.8.0a1\r\nconfig file = /etc/ansible/ansible.cfg\r\nconfigured module search path = ['/Users/user_name/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\nansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\nexecutable location = /usr/local/bin/ansible\r\npython version = 3.7.3 (default, Mar 27 2019, 09:23:15) [Clang 10.0.1 (clang-1001.0.46.3)]\r\n```\r\n\r\nmy molecule.yml has\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    image: centos:7\r\n    pull: False\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\nError i get\r\n```\r\nTASK [Discover local Docker images] ********************************************\r\n    failed: [localhost] (item=None) => {\"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n    fatal: [localhost]: FAILED! => {\"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n```\r\ncan someone help to resolve this issue\r\nis there a way to override no_log:true ??\r\n\r\ni did try using vagrant as driver\r\nbut still I get the same issue\r\n```\r\nTASK [Create molecule instance(s)] *********************************************\r\n    failed: [localhost] (item=None) => {\"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n    fatal: [localhost]: FAILED! => {\"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n```\r\nmy molecule.yml looks loke\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    box: ubuntu/xenial64\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1999/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1994", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1994/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1994/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1994/events", "html_url": "https://github.com/ansible-community/molecule/issues/1994", "id": 434809116, "node_id": "MDU6SXNzdWU0MzQ4MDkxMTY=", "number": 1994, "title": "Adding ANSIBLE_VERBOSITY to env inside molecule.yml makes it crash", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-18T14:47:03Z", "updated_at": "2022-06-17T16:28:53Z", "closed_at": "2022-06-17T16:28:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems that adding the variable below inside `molecule.yml` file would make it fail to run quickly, without any clear resons.\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_VERBOSITY: 2\r\n```\r\n\r\nFull log:\r\n```\r\n$ molecule --debug test -s tripleo-repos                                                                                                     [15:40:52]\r\n--> Validating schema /Users/ssbarnea/rdo/tripleo-ci/molecule/tripleo-repos/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 tripleo-repos\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 converge\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'tripleo-repos'\r\n--> Action: 'destroy'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/filters:/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/plugins/filters:/Users/ssbarnea/rdo/tripleo-ci/plugins/filters\r\nANSIBLE_FORCE_COLOR: '1'\r\nANSIBLE_INVENTORY: /Users/ssbarnea/rdo/harem/hosts.ini\r\nANSIBLE_LIBRARY: /Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries:/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/library:/Users/ssbarnea/rdo/tripleo-ci/library\r\nANSIBLE_NOCOWS: '1'\r\nANSIBLE_ROLES_PATH: /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/roles:/Users/ssbarnea/rdo:/Users/ssbarnea/rdo/tripleo-ci/roles:/Users/ssbarnea/zuul-jobs/roles\r\nANSIBLE_STDOUT_CALLBACK: yaml\r\nANSIBLE_VAULT_PASSWORD_FILE: /Users/ssbarnea/.vault_pass.txt\r\nANSIBLE_VERBOSITY: 2\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: shell\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /Users/ssbarnea/rdo/tripleo-ci/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos\r\nMOLECULE_FILE: /Users/ssbarnea/rdo/tripleo-ci/molecule/tripleo-repos/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/inventory/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /Users/ssbarnea/rdo/tripleo-ci\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/ssbarnea/rdo/tripleo-ci/molecule/tripleo-repos\r\nMOLECULE_SCENARIO_NAME: tripleo-repos\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /Users/ssbarnea/rdo/tripleo-ci/molecule/tripleo-repos/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/filters:/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/plugins/filters:/Users/ssbarnea/rdo/tripleo-ci/plugins/filters ANSIBLE_FORCE_COLOR=1 ANSIBLE_INVENTORY=/Users/ssbarnea/rdo/harem/hosts.ini ANSIBLE_LIBRARY=/Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries:/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/library:/Users/ssbarnea/rdo/tripleo-ci/library ANSIBLE_NOCOWS=1 ANSIBLE_ROLES_PATH=/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/roles:/Users/ssbarnea/rdo:/Users/ssbarnea/rdo/tripleo-ci/roles:/Users/ssbarnea/zuul-jobs/roles ANSIBLE_STDOUT_CALLBACK=yaml ANSIBLE_VAULT_PASSWORD_FILE=/Users/ssbarnea/.vault_pass.txt ANSIBLE_VERBOSITY=2 MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=shell MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/Users/ssbarnea/rdo/tripleo-ci/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos MOLECULE_FILE=/Users/ssbarnea/rdo/tripleo-ci/molecule/tripleo-repos/molecule.yml MOLECULE_INSTANCE_CONFIG=/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/instance_config.yml MOLECULE_INVENTORY_FILE=/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/inventory/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/Users/ssbarnea/rdo/tripleo-ci MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/ssbarnea/rdo/tripleo-ci/molecule/tripleo-repos MOLECULE_SCENARIO_NAME=tripleo-repos MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/Users/ssbarnea/rdo/tripleo-ci/molecule/tripleo-repos/tests\r\n\r\nDEBUG: COMMAND\r\n/Users/ssbarnea/.pyenv/versions/3.6.7/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/inventory /Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml -vvv\r\n\r\nERROR:\r\nAn error occurred during the test sequence action: 'destroy'. Cleaning up.\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1994/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1993", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1993/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1993/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1993/events", "html_url": "https://github.com/ansible-community/molecule/pull/1993", "id": 434659488, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcxNjAyOTE3", "number": 1993, "title": "Avoid failure to lint due to fstrings in docs", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-18T08:51:19Z", "updated_at": "2019-10-19T17:35:22Z", "closed_at": "2019-04-18T10:25:13Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1993", "html_url": "https://github.com/ansible-community/molecule/pull/1993", "diff_url": "https://github.com/ansible-community/molecule/pull/1993.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1993.patch", "merged_at": "2019-04-18T10:25:13Z"}, "body": "`tox -e lint` would fail to lint the docs when python2 is picked because\r\ninternal use of fstrings.\r\n\r\nSigned-off-by: Sorin Sbarnea <ssbarnea@redhat.com>", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1993/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1992", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1992/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1992/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1992/events", "html_url": "https://github.com/ansible-community/molecule/issues/1992", "id": 434450807, "node_id": "MDU6SXNzdWU0MzQ0NTA4MDc=", "number": 1992, "title": "Contributors.md Governance updates", "user": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-04-17T19:35:02Z", "updated_at": "2019-05-17T11:12:39Z", "closed_at": "2019-05-17T11:12:39Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nForm IRC Meeting 2019-04-17 add Contirbuting/governance docs\r\n\r\n1) If your PRs get stuck join us in IRC or add to agenda\r\n2) Coding standard is what's enforced by CI, everything else is off topic\r\n3) All PRs must be reviewed by one other person. This is enforced by GitHub\r\nLarger changes require +2\r\n\r\n\r\nAlso, take the time to tidy up `CONTRIBUTING.md`", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1992/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1992/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1991", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1991/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1991/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1991/events", "html_url": "https://github.com/ansible-community/molecule/pull/1991", "id": 434355142, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcxMzY1MTU2", "number": 1991, "title": "Contributing: CI = coding guidelines", "user": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-17T15:44:12Z", "updated_at": "2019-04-18T13:06:06Z", "closed_at": "2019-04-17T17:39:22Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1991", "html_url": "https://github.com/ansible-community/molecule/pull/1991", "diff_url": "https://github.com/ansible-community/molecule/pull/1991.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1991.patch", "merged_at": "2019-04-17T17:39:22Z"}, "body": "Tidy up a few things as the world has moved on.\r\n\r\nfixes: #1986\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1991/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1991/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1988", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1988/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1988/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1988/events", "html_url": "https://github.com/ansible-community/molecule/issues/1988", "id": 434226727, "node_id": "MDU6SXNzdWU0MzQyMjY3Mjc=", "number": 1988, "title": "DCO requirement isn't checked for members of the Ansible organization", "user": {"login": "MarkusTeufelberger", "id": 950561, "node_id": "MDQ6VXNlcjk1MDU2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/950561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkusTeufelberger", "html_url": "https://github.com/MarkusTeufelberger", "followers_url": "https://api.github.com/users/MarkusTeufelberger/followers", "following_url": "https://api.github.com/users/MarkusTeufelberger/following{/other_user}", "gists_url": "https://api.github.com/users/MarkusTeufelberger/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkusTeufelberger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkusTeufelberger/subscriptions", "organizations_url": "https://api.github.com/users/MarkusTeufelberger/orgs", "repos_url": "https://api.github.com/users/MarkusTeufelberger/repos", "events_url": "https://api.github.com/users/MarkusTeufelberger/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkusTeufelberger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-04-17T11:15:07Z", "updated_at": "2019-10-28T10:25:41Z", "closed_at": "2019-10-28T10:25:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nAccording to the \"contribution guidelines\", every contribution must be signed off.\r\n\r\n# Actual Behaviour\r\n\r\nCurrent Red Hat employees are not checked for including that stuff in their commit messages:\r\nhttps://github.com/ansible/molecule/blob/master/.github/dco.yml\r\n\r\nSee https://github.com/probot/dco#skipping-sign-off-for-organization-members", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1988/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1986", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1986/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1986/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1986/events", "html_url": "https://github.com/ansible-community/molecule/issues/1986", "id": 434044825, "node_id": "MDU6SXNzdWU0MzQwNDQ4MjU=", "number": 1986, "title": "incorrect working group url in CONTRIBUTING.rst", "user": {"login": "jctanner", "id": 1869705, "node_id": "MDQ6VXNlcjE4Njk3MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1869705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jctanner", "html_url": "https://github.com/jctanner", "followers_url": "https://api.github.com/users/jctanner/followers", "following_url": "https://api.github.com/users/jctanner/following{/other_user}", "gists_url": "https://api.github.com/users/jctanner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jctanner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jctanner/subscriptions", "organizations_url": "https://api.github.com/users/jctanner/orgs", "repos_url": "https://api.github.com/users/jctanner/repos", "events_url": "https://api.github.com/users/jctanner/events{/privacy}", "received_events_url": "https://api.github.com/users/jctanner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-17T00:54:47Z", "updated_at": "2019-04-17T17:39:30Z", "closed_at": "2019-04-17T17:39:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Summary\r\n\r\nhttps://github.com/ansible/molecule/blob/master/CONTRIBUTING.rst#move-to-red-hat points to a dead url for the working group https://github.com/ansible/community/tree/master/group-molecule ", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1986/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1986/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1973", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1973/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1973/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1973/events", "html_url": "https://github.com/ansible-community/molecule/issues/1973", "id": 433036692, "node_id": "MDU6SXNzdWU0MzMwMzY2OTI=", "number": 1973, "title": "[BUG] tox currently doesn't parse deps with comments well", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1314811862, "node_id": "MDU6TGFiZWwxMzE0ODExODYy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/critical", "name": "critical", "color": "e54e6e", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-14T21:40:05Z", "updated_at": "2019-05-20T13:26:43Z", "closed_at": "2019-04-17T17:38:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'll need to check pyup docs on whether we could post that comment one line above or smth.\r\nI've also filed a bug in tox: https://github.com/tox-dev/tox/issues/1260\r\n\r\nTODO:\r\n* [ ] restore filters once it's fixed\r\n\r\n---------------------\r\noh.. this one seems wrong because it's parsed as a single line. we should turn it into a list\r\n\r\n_Originally posted by @webknjaz in https://github.com/ansible/molecule/pull/1958_", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1973/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1966", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1966/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1966/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1966/events", "html_url": "https://github.com/ansible-community/molecule/issues/1966", "id": 432075302, "node_id": "MDU6SXNzdWU0MzIwNzUzMDI=", "number": 1966, "title": "master: pip install -e .  fails with  TypeError: expected str, bytes or os.PathLike object, not NoneType", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}, {"id": 1284992522, "node_id": "MDU6TGFiZWwxMjg0OTkyNTIy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/packaging", "name": "packaging", "color": "4071a5", "default": false, "description": "installation, packaging, built containers"}], "state": "closed", "locked": true, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, {"login": "themr0c", "id": 243761, "node_id": "MDQ6VXNlcjI0Mzc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/243761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/themr0c", "html_url": "https://github.com/themr0c", "followers_url": "https://api.github.com/users/themr0c/followers", "following_url": "https://api.github.com/users/themr0c/following{/other_user}", "gists_url": "https://api.github.com/users/themr0c/gists{/gist_id}", "starred_url": "https://api.github.com/users/themr0c/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/themr0c/subscriptions", "organizations_url": "https://api.github.com/users/themr0c/orgs", "repos_url": "https://api.github.com/users/themr0c/repos", "events_url": "https://api.github.com/users/themr0c/events{/privacy}", "received_events_url": "https://api.github.com/users/themr0c/received_events", "type": "User", "site_admin": false}, {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2019-04-11T15:05:34Z", "updated_at": "2022-02-22T14:43:11Z", "closed_at": "2019-05-23T10:33:54Z", "author_association": "MEMBER", "active_lock_reason": "resolved", "body": "The problem seems to be related to recent pep517/setuptools/packaging changes but is really worrig because it totally breaks packaging.\r\n\r\n```\r\n$ pip install -e .                                                                                                                                                                                                                            [15:59:21]\r\nObtaining file:///Users/ssbarnea/os/molecule\r\n  Installing build dependencies ... done\r\n  Getting requirements to build wheel ... done\r\n    Preparing wheel metadata ... error\r\n    Complete output from command /Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/bin/python3.6 /Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/lib/python3.6/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/tmpjmy837ev:\r\n    running dist_info\r\n    creating /Users/ssbarnea/os/molecule/pip-wheel-metadata/molecule.egg-info\r\n    writing /Users/ssbarnea/os/molecule/pip-wheel-metadata/molecule.egg-info/PKG-INFO\r\n    writing dependency_links to /Users/ssbarnea/os/molecule/pip-wheel-metadata/molecule.egg-info/dependency_links.txt\r\n    writing entry points to /Users/ssbarnea/os/molecule/pip-wheel-metadata/molecule.egg-info/entry_points.txt\r\n    writing requirements to /Users/ssbarnea/os/molecule/pip-wheel-metadata/molecule.egg-info/requires.txt\r\n    writing top-level names to /Users/ssbarnea/os/molecule/pip-wheel-metadata/molecule.egg-info/top_level.txt\r\n    writing manifest file '/Users/ssbarnea/os/molecule/pip-wheel-metadata/molecule.egg-info/SOURCES.txt'\r\n    reading manifest template 'MANIFEST.in'\r\n    writing manifest file '/Users/ssbarnea/os/molecule/pip-wheel-metadata/molecule.egg-info/SOURCES.txt'\r\n    creating '/Users/ssbarnea/os/molecule/pip-wheel-metadata/molecule.dist-info'\r\n    Traceback (most recent call last):\r\n      File \"/Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/lib/python3.6/site-packages/pip/_vendor/pep517/_in_process.py\", line 207, in <module>\r\n        main()\r\n      File \"/Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/lib/python3.6/site-packages/pip/_vendor/pep517/_in_process.py\", line 197, in main\r\n        json_out['return_val'] = hook(**hook_input['kwargs'])\r\n      File \"/Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/lib/python3.6/site-packages/pip/_vendor/pep517/_in_process.py\", line 69, in prepare_metadata_for_build_wheel\r\n        return hook(metadata_directory, config_settings)\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/setuptools/build_meta.py\", line 113, in prepare_metadata_for_build_wheel\r\n        _run_setup()\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/setuptools/build_meta.py\", line 72, in _run_setup\r\n        exec(compile(code, __file__, 'exec'), locals())\r\n      File \"setup.py\", line 351, in <module>\r\n        __name__ == '__main__' and setuptools.setup(**setup_params)\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/setuptools/__init__.py\", line 129, in setup\r\n        return distutils.core.setup(**attrs)\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/distutils/core.py\", line 148, in setup\r\n        dist.run_commands()\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/distutils/dist.py\", line 955, in run_commands\r\n        self.run_command(cmd)\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/distutils/dist.py\", line 974, in run_command\r\n        cmd_obj.run()\r\n      File \"setup.py\", line 323, in run\r\n        return setuptools.command.dist_info.dist_info.run(self)\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/setuptools/command/dist_info.py\", line 36, in run\r\n        bdist_wheel.egg2dist(egg_info.egg_info, dist_info_dir)\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/wheel/bdist_wheel.py\", line 443, in egg2dist\r\n        shutil.copy(license, os.path.join(self.distinfo_dir, license_filename))\r\n      File \"/Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/lib/python3.6/posixpath.py\", line 80, in join\r\n        a = os.fspath(a)\r\n    TypeError: expected str, bytes or os.PathLike object, not NoneType\r\n\r\n    ----------------------------------------\r\nCommand \"/Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/bin/python3.6 /Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/lib/python3.6/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/tmpjmy837ev\" failed with error code 1 in /Users/ssbarnea/os/molecule\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1966/reactions", "total_count": 1, "+1": 0, "-1": 1, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1966/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1964", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1964/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1964/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1964/events", "html_url": "https://github.com/ansible-community/molecule/issues/1964", "id": 431990307, "node_id": "MDU6SXNzdWU0MzE5OTAzMDc=", "number": 1964, "title": "Fix test failure caused by the removal of `skip_unsupported_matrix`", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1205135639, "node_id": "MDU6TGFiZWwxMjA1MTM1NjM5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/test", "name": "test", "color": "0e8a16", "default": false, "description": "Improvement to quality assurance: CI/CD, testing, building"}], "state": "closed", "locked": false, "assignee": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-11T12:15:02Z", "updated_at": "2019-04-11T13:18:18Z", "closed_at": "2019-04-11T13:18:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "@decentral1se apparently, something else was using it: https://travis-ci.com/ansible/molecule/jobs/192120697#L332\r\n\r\n_Originally posted by @webknjaz in https://github.com/ansible/molecule/pull/1961/review_comment/create_\r\n\r\n```console\r\n==================================== ERRORS ====================================\r\n_______________ ERROR collecting test/functional/test_command.py _______________\r\ntest/functional/test_command.py:27: in <module>\r\n    from .conftest import skip_unsupported_matrix\r\nE   ImportError: cannot import name 'skip_unsupported_matrix' from 'test.functional.conftest' (/home/travis/build/ansible/molecule/test/functional/conftest.py)\r\n_______________ ERROR collecting test/functional/test_command.py _______________\r\nImportError while importing test module '/home/travis/build/ansible/molecule/test/functional/test_command.py'.\r\nHint: make sure your test modules/packages have valid Python names.\r\nTraceback:\r\ntest/functional/test_command.py:27: in <module>\r\n    from .conftest import skip_unsupported_matrix\r\nE   ImportError: cannot import name 'skip_unsupported_matrix' from 'test.functional.conftest' (/home/travis/build/ansible/molecule/test/functional/conftest.py)\r\n__________ ERROR collecting test/functional/docker/test_scenarios.py ___________\r\ntest/functional/docker/test_scenarios.py:30: in <module>\r\n    from ..conftest import (\r\nE   ImportError: cannot import name 'skip_unsupported_matrix' from 'test.functional.conftest' (/home/travis/build/ansible/molecule/test/functional/conftest.py)\r\n__________ ERROR collecting test/functional/docker/test_scenarios.py ___________\r\nImportError while importing test module '/home/travis/build/ansible/molecule/test/functional/docker/test_scenarios.py'.\r\nHint: make sure your test modules/packages have valid Python names.\r\nTraceback:\r\ntest/functional/docker/test_scenarios.py:30: in <module>\r\n    from ..conftest import (\r\nE   ImportError: cannot import name 'skip_unsupported_matrix' from 'test.functional.conftest' (/home/travis/build/ansible/molecule/test/functional/conftest.py)\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1964/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1964/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1916", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1916/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1916/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1916/events", "html_url": "https://github.com/ansible-community/molecule/issues/1916", "id": 431215372, "node_id": "MDU6SXNzdWU0MzEyMTUzNzI=", "number": 1916, "title": "yapf 0.27 breaks lint", "user": {"login": "seandst", "id": 441252, "node_id": "MDQ6VXNlcjQ0MTI1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/441252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seandst", "html_url": "https://github.com/seandst", "followers_url": "https://api.github.com/users/seandst/followers", "following_url": "https://api.github.com/users/seandst/following{/other_user}", "gists_url": "https://api.github.com/users/seandst/gists{/gist_id}", "starred_url": "https://api.github.com/users/seandst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seandst/subscriptions", "organizations_url": "https://api.github.com/users/seandst/orgs", "repos_url": "https://api.github.com/users/seandst/repos", "events_url": "https://api.github.com/users/seandst/events{/privacy}", "received_events_url": "https://api.github.com/users/seandst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-04-09T21:59:54Z", "updated_at": "2019-07-08T10:43:52Z", "closed_at": "2019-07-08T10:43:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\nDetail any linters or test runners used:\r\n\r\n`tox -e lint -e format-check`\r\n\r\n# Desired Behavior\r\n\r\nWhen using the latest yapf (currently 0.27), both the `lint` and `format-check` testenvs will succeed.\r\n\r\n# Actual Behaviour\r\n\r\nWhen using the latest yapf on the current master, `lint` will succeed, but `format-check` will fail. If yapf if run with -i to modify files in-place (via `tox -e format`), `format-check` will succeed, but lint will fail.\r\n\r\nThis issue is being created as a central place to discuss how to proceed.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1916/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1916/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1907", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1907/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1907/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1907/events", "html_url": "https://github.com/ansible-community/molecule/issues/1907", "id": 430265672, "node_id": "MDU6SXNzdWU0MzAyNjU2NzI=", "number": 1907, "title": "Git capability to perform galaxy installs of github releases", "user": {"login": "sandal-maker", "id": 37424508, "node_id": "MDQ6VXNlcjM3NDI0NTA4", "avatar_url": "https://avatars.githubusercontent.com/u/37424508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandal-maker", "html_url": "https://github.com/sandal-maker", "followers_url": "https://api.github.com/users/sandal-maker/followers", "following_url": "https://api.github.com/users/sandal-maker/following{/other_user}", "gists_url": "https://api.github.com/users/sandal-maker/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandal-maker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandal-maker/subscriptions", "organizations_url": "https://api.github.com/users/sandal-maker/orgs", "repos_url": "https://api.github.com/users/sandal-maker/repos", "events_url": "https://api.github.com/users/sandal-maker/events{/privacy}", "received_events_url": "https://api.github.com/users/sandal-maker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-04-08T05:47:12Z", "updated_at": "2019-05-13T12:50:25Z", "closed_at": "2019-05-13T12:50:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\nI've a requirements.yml file as below.\r\n```yml\r\n---\r\n- src: https://github.com/wtanaka/ansible-role-gcloud-sdk\r\n  version: master\r\n  name: gcloud-sdk\r\n```\r\n\r\nAnd I've a molecule file as below.\r\n```yml\r\n---\r\ndependency:\r\n  name: galaxy\r\n  options:\r\n    role-file: ansible/requirements.yml\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    image: ubuntu:18.04\r\nprovisioner:\r\n  name: ansible\r\n  playbooks:\r\n    converge: ../../ansible/playbook.yml\r\n  lint:\r\n    name: ansible-lint\r\nverifier:\r\n  name: inspec\r\n  directory: ../../tests/\r\n  lint:\r\n    name: rubocop\r\n```\r\n\r\nI'm running molecule in docker as below.\r\n```bash\r\ndocker run --rm \\\r\n  -v $PWD:/build-run-tools-image \\\r\n  -w /build-run-tools-image \\\r\n  -v /var/run/docker.sock:/var/run/docker.sock \\\r\n  quay.io/ansible/molecule:2.20 \\\r\n  molecule test\r\n```\r\n\r\n# Actual behavior\r\n```text\r\n--> Action: 'dependency'\r\n [WARNING]: - gcloud-sdk was NOT installed successfully: could not find/use\r\ngit, it is required to continue with installing\r\nhttps://github.com/wtanaka/ansible-role-gcloud-sdk\r\nERROR! - you can use --ignore-errors to skip failed roles and finish processing the list.\r\nAn error occurred during the test sequence action: 'dependency'. Cleaning up.\r\n```\r\n\r\n# Desired Behavior\r\n\r\nDependency installed successfully.\r\n\r\nIf git was available within the container then we'd be able to perform molecule tests without hassle.\r\n\r\nCheers.\r\n@sandal-maker\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1907/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1906", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1906/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1906/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1906/events", "html_url": "https://github.com/ansible-community/molecule/issues/1906", "id": 430238286, "node_id": "MDU6SXNzdWU0MzAyMzgyODY=", "number": 1906, "title": "destroy steps do not run when tests fail and tags are used in provisioner options", "user": {"login": "dericcrago", "id": 1307746, "node_id": "MDQ6VXNlcjEzMDc3NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1307746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dericcrago", "html_url": "https://github.com/dericcrago", "followers_url": "https://api.github.com/users/dericcrago/followers", "following_url": "https://api.github.com/users/dericcrago/following{/other_user}", "gists_url": "https://api.github.com/users/dericcrago/gists{/gist_id}", "starred_url": "https://api.github.com/users/dericcrago/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dericcrago/subscriptions", "organizations_url": "https://api.github.com/users/dericcrago/orgs", "repos_url": "https://api.github.com/users/dericcrago/repos", "events_url": "https://api.github.com/users/dericcrago/events{/privacy}", "received_events_url": "https://api.github.com/users/dericcrago/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-04-08T03:21:26Z", "updated_at": "2019-04-11T06:12:31Z", "closed_at": "2019-04-11T06:12:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\npipenv run ansible --version && pipenv run molecule --version\r\nansible 2.7.10\r\n  config file = /Users/deric/.ansible.cfg\r\n  configured module search path = ['/Users/deric/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/deric/.local/share/virtualenvs/molecule-destroy-cLlJrhaP/lib/python3.7/site-packages/ansible\r\n  executable location = /Users/deric/.local/share/virtualenvs/molecule-destroy-cLlJrhaP/bin/ansible\r\n  python version = 3.7.3 (default, Apr  7 2019, 11:57:41) [Clang 10.0.0 (clang-1000.11.45.5)]\r\nmolecule, version 2.20.1.dev18\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pipenv (see `Pipfile` in [example repo](https://github.com/dericcrago/molecule-destroy) and `README.md` for usage)\r\n\r\nAnsible installation method (one of):\r\n\r\n- pipenv (see `Pipfile` in [example repo](https://github.com/dericcrago/molecule-destroy) and `README.md` for usage)\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nDestroy steps run when tests fail and `tags` are used in `provisioner: options`.\r\n\r\n# Actual Behaviour\r\n\r\nDestroy steps do not run and PLAY RECAP details are missing when tests fail and `tags` are used in `provisioner: options`.\r\n\r\nSee [example repo](https://github.com/dericcrago/molecule-destroy).\r\n\r\n```yaml\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\n  options:\r\n    tags: no-op\r\n```\r\n\r\n```\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /Users/deric/.local/share/virtualenvs/molecule-destroy-cLlJrhaP/src/molecule/molecule/provisioner/ansible/playbooks/docker/destroy.yml\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    META: ran handlers\r\n    META: ran handlers\r\n    META: ran handlers\r\n    \r\n    PLAY RECAP *********************************************************************\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1906/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1906/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1902", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1902/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1902/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1902/events", "html_url": "https://github.com/ansible-community/molecule/issues/1902", "id": 428516870, "node_id": "MDU6SXNzdWU0Mjg1MTY4NzA=", "number": 1902, "title": "Lint errors cause molecule to skip cleanup", "user": {"login": "ghislainbourgeois", "id": 15741806, "node_id": "MDQ6VXNlcjE1NzQxODA2", "avatar_url": "https://avatars.githubusercontent.com/u/15741806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghislainbourgeois", "html_url": "https://github.com/ghislainbourgeois", "followers_url": "https://api.github.com/users/ghislainbourgeois/followers", "following_url": "https://api.github.com/users/ghislainbourgeois/following{/other_user}", "gists_url": "https://api.github.com/users/ghislainbourgeois/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghislainbourgeois/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghislainbourgeois/subscriptions", "organizations_url": "https://api.github.com/users/ghislainbourgeois/orgs", "repos_url": "https://api.github.com/users/ghislainbourgeois/repos", "events_url": "https://api.github.com/users/ghislainbourgeois/events{/privacy}", "received_events_url": "https://api.github.com/users/ghislainbourgeois/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-04-03T01:20:11Z", "updated_at": "2019-04-04T09:41:14Z", "closed_at": "2019-04-04T09:41:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.7.9\r\n  config file = None\r\n  configured module search path = [u'/Users/ghibourg/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.15 (default, Sep 18 2018, 20:16:18) [GCC 4.2.1 Compatible Apple LLVM 9.1.0 (clang-902.0.39.2)]\r\nmolecule, version 2.20.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n- yaml-lint\r\n- ansible-lint\r\n\r\n- cleanup playbook defined\r\n\r\n# Desired Behavior\r\n\r\nGiven `molecule test` with linters and a cleanup step configured, when the lint step errors out,\r\nmolecule should call the cleanup step and then the destroy step. \r\n\r\n# Actual Behaviour\r\n\r\nLinting errors directly call `destroy`, never calling the `cleanup` step.\r\n\r\n```\r\n$ molecule init role -r test && cd test\r\n\r\n$ cat molecule/default/molecule.yml\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    image: centos:7\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\n  playbooks:\r\n    cleanup: cleanup.yml\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n\r\n$ cat molecule/default/cleanup.yml\r\n---\r\n- name: Cleanup\r\n  hosts: localhost\r\n  tasks:\r\n    - name: Debug\r\n      debug:\r\n        msg: \"Cleanup\"\r\n\r\n$ molecule test\r\n--> Validating schema /Users/ghibourg/Projects/test/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n                                                                                                                                                                                                                                              \u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 cleanup\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 dependency                                                                                                                                                                                                                                \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence                                                                                                                                                                                                                               \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n                                                                                                                                                                                                                                              --> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /Users/ghibourg/Projects/test/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /Users/ghibourg/Projects/test/molecule/default/tests/...\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /Users/ghibourg/Projects/test/molecule/default/playbook.yml...\r\n    [701] Role info should contain platforms\r\n    /Users/ghibourg/Projects/test/meta/main.yml:2\r\n    {'meta/main.yml': {'__file__': u'/Users/ghibourg/Projects/test/meta/main.yml', u'dependencies': [], u'galaxy_info': {u'description': u'your description', u'license': u'license (GPLv2, CC-BY, etc)', u'author': u'your name', u'company':\r\n u'your company (optional)', u'galaxy_tags': [], '__line__': 3, '__file__': u'/Users/ghibourg/Projects/test/meta/main.yml', u'min_ansible_version': 1.2}, '__line__': 2}}\r\n\r\n    [703] Should change default metadata: author\r\n    /Users/ghibourg/Projects/test/meta/main.yml:2\r\n    {'meta/main.yml': {'__file__': u'/Users/ghibourg/Projects/test/meta/main.yml', u'dependencies': [], u'galaxy_info': {u'description': u'your description', u'license': u'license (GPLv2, CC-BY, etc)', u'author': u'your name', u'company':\r\n u'your company (optional)', u'galaxy_tags': [], '__line__': 3, '__file__': u'/Users/ghibourg/Projects/test/meta/main.yml', u'min_ansible_version': 1.2}, '__line__': 2}}\r\n\r\n    [703] Should change default metadata: description\r\n    /Users/ghibourg/Projects/test/meta/main.yml:2\r\n    {'meta/main.yml': {'__file__': u'/Users/ghibourg/Projects/test/meta/main.yml', u'dependencies': [], u'galaxy_info': {u'description': u'your description', u'license': u'license (GPLv2, CC-BY, etc)', u'author': u'your name', u'company':\r\n u'your company (optional)', u'galaxy_tags': [], '__line__': 3, '__file__': u'/Users/ghibourg/Projects/test/meta/main.yml', u'min_ansible_version': 1.2}, '__line__': 2}}\r\n    [703] Should change default metadata: company\r\n    /Users/ghibourg/Projects/test/meta/main.yml:2\r\n    {'meta/main.yml': {'__file__': u'/Users/ghibourg/Projects/test/meta/main.yml', u'dependencies': [], u'galaxy_info': {u'description': u'your description', u'license': u'license (GPLv2, CC-BY, etc)', u'author': u'your name', u'company':\r\n u'your company (optional)', u'galaxy_tags': [], '__line__': 3, '__file__': u'/Users/ghibourg/Projects/test/meta/main.yml', u'min_ansible_version': 1.2}, '__line__': 2}}\r\n\r\n    [703] Should change default metadata: license\r\n    /Users/ghibourg/Projects/test/meta/main.yml:2\r\n    {'meta/main.yml': {'__file__': u'/Users/ghibourg/Projects/test/meta/main.yml', u'dependencies': [], u'galaxy_info': {u'description': u'your description', u'license': u'license (GPLv2, CC-BY, etc)', u'author': u'your name', u'company':\r\n u'your company (optional)', u'galaxy_tags': [], '__line__': 3, '__file__': u'/Users/ghibourg/Projects/test/meta/main.yml', u'min_ansible_version': 1.2}, '__line__': 2}}\r\n\r\nAn error occurred during the test sequence action: 'lint'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    changed: [localhost] => (item=None)\r\n    changed: [localhost]\r\n\r\n    TASK [Wait for instance(s) deletion to complete] *******************************\r\n    ok: [localhost] => (item=None)\r\n    ok: [localhost]\r\n\r\n    TASK [Delete docker network(s)] ************************************************\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=2    changed=1    unreachable=0    failed=0\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1902/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1902/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1898", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1898/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1898/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1898/events", "html_url": "https://github.com/ansible-community/molecule/issues/1898", "id": 428193871, "node_id": "MDU6SXNzdWU0MjgxOTM4NzE=", "number": 1898, "title": "Fix flaky `test_host_group_vars` test", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1205135639, "node_id": "MDU6TGFiZWwxMjA1MTM1NjM5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/test", "name": "test", "color": "0e8a16", "default": false, "description": "Improvement to quality assurance: CI/CD, testing, building"}], "state": "closed", "locked": false, "assignee": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-02T12:18:20Z", "updated_at": "2019-04-24T13:04:58Z", "closed_at": "2019-04-24T13:04:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n- Ci Fix\r\n\r\nFunctional tests are still a bit flaky. See:\r\n\r\n> https://travis-ci.com/ansible/molecule/jobs/189609666#L791\r\n\r\n```\r\nE             STDERR:\r\nE           ERROR: \r\nE           PLAY [example] *****************************************************************\r\nE           \r\nE           TASK [Gathering Facts] *********************************************************\r\nE           ok: [instance]\r\nE           \r\nE           TASK [Host vars from host_vars links] ******************************************\r\nE           ok: [instance]\r\nE           \r\nE           TASK [Group vars from group_vars links] ****************************************\r\nE           fatal: [instance]: FAILED! => {\"msg\": \"Failed to set execute bit on remote files (rc: 126, err: )\"}\r\nE           \r\nE           PLAY RECAP *********************************************************************\r\nE           instance                   : ok=2    changed=0    unreachable=0    failed=1   \r\n```\r\n\r\nSome points from discussion on IRC:\r\n* Use `debug` module for these tests and not just echoing things ...\r\n* Investigate SSH connection options (mentioned a bunch of times [around here](https://www.google.com/search?hl=en&q=Failed%20to%20set%20execute%20bit%20on%20remote%20files))", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1898/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1898/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1896", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1896/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1896/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1896/events", "html_url": "https://github.com/ansible-community/molecule/issues/1896", "id": 427921696, "node_id": "MDU6SXNzdWU0Mjc5MjE2OTY=", "number": 1896, "title": "Once setuptools-scm is in place, remove manual Python/Ansible version checks", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-01T21:32:05Z", "updated_at": "2019-04-11T09:43:58Z", "closed_at": "2019-04-11T09:43:58Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See https://github.com/ansible/molecule/pull/1890.\r\n\r\nJust creating this so I don't forget to get around to it ...", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1896/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1896/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1888", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1888/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1888/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1888/events", "html_url": "https://github.com/ansible-community/molecule/issues/1888", "id": 426665294, "node_id": "MDU6SXNzdWU0MjY2NjUyOTQ=", "number": 1888, "title": "[wip] packages/molecule/provisioner/ansible/plugins/filters/molecule_core.py) as it seems to be invalid: No module named 'molecule'", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-03-28T19:17:34Z", "updated_at": "2020-10-20T18:19:00Z", "closed_at": "2020-10-20T18:19:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems that I managed to find a bug relarted to usage of molecule from inside a tox virtualenv created with use-sitepackages. Likely to be unrelated to tox.\r\n\r\nOn Linux there is a real need to create virtualenvs using site-packages because this assures that `selinux` python bindings are available (needed by ansible modules used by molecule).\r\n\r\nHow to reproduce:\r\n* install molecule on your default python interpreter (does not matter if at user or system level), but it matters not to be in a virtualenv.\r\n* create a virtualenv using system-packages\r\n* activate system packages\r\n* run `molecule test --all`, it will likely fail with something like:\r\n\r\n```\r\n...\r\n    ansible-playbook 2.7.8\r\n      config file = /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/ansible.cfg\r\n      configured module search path = ['/Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/lib/python3.6/site-packages/molecule/provisioner/ansible/plugins/libraries', '/var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/library', '/Users/ssbarnea/rdo/tripleo-ci/library']\r\n      ansible python module location = /Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/ansible\r\n      executable location = /Users/ssbarnea/.pyenv/versions/3.6.7/bin/ansible-playbook\r\n      python version = 3.6.7 (default, Nov 12 2018, 16:11:56) [GCC 4.2.1 Compatible Apple LLVM 10.0.0 (clang-1000.11.45.5)]\r\n    Using /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/ansible.cfg as config file\r\n    setting up inventory plugins\r\n    /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/inventory/ansible_inventory.yml did not meet host_list requirements, check plugin documentation if this is unexpected\r\n    /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/inventory/ansible_inventory.yml did not meet script requirements, check plugin documentation if this is unexpected\r\n    Parsed /var/folders/3q/pc1jcyjj3qqbj6_x7n4kbtqw0000gn/T/molecule/tripleo-ci/tripleo-repos/inventory/ansible_inventory.yml inventory source with yaml plugin\r\n    Loading callback plugin yaml of type stdout, v2.0 from /Users/ssbarnea/.pyenv/versions/3.6.7/lib/python3.6/site-packages/ansible/plugins/callback/yaml.py\r\n\r\n    PLAYBOOK: destroy.yml **********************************************************\r\n    1 plays in /Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/lib/python3.6/site-packages/molecule/provisioner/ansible/playbooks/docker/destroy.yml\r\n [WARNING]: Skipping plugin (/Users/ssbarnea/rdo/tripleo-\r\nci/.tox/molecule/lib/python3.6/site-\r\npackages/molecule/provisioner/ansible/plugins/filters/molecule_core.py) as it\r\nseems to be invalid: No module named 'molecule'\r\n```\r\n\r\nI am planning to dig bit more to narrow down what happens but I think that we need to sort this out because it is high likely that users would want to call molecule from inside tox. And on development systems I do also expect users to install molecule outside virtualenv, mostly for convenience of calling it directly.\r\n\r\nAs a temporary workaround I added this line inside tox.ini file: `pip install --force molecule` which seems to have repaired the issue at the cost of doing a lot of uninstalling and reinstalling.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1888/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1888/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1881", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1881/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1881/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1881/events", "html_url": "https://github.com/ansible-community/molecule/issues/1881", "id": 425566037, "node_id": "MDU6SXNzdWU0MjU1NjYwMzc=", "number": 1881, "title": "PY_COLORS fails with vagrant", "user": {"login": "Woytek-Polnik", "id": 26327820, "node_id": "MDQ6VXNlcjI2MzI3ODIw", "avatar_url": "https://avatars.githubusercontent.com/u/26327820?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Woytek-Polnik", "html_url": "https://github.com/Woytek-Polnik", "followers_url": "https://api.github.com/users/Woytek-Polnik/followers", "following_url": "https://api.github.com/users/Woytek-Polnik/following{/other_user}", "gists_url": "https://api.github.com/users/Woytek-Polnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/Woytek-Polnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Woytek-Polnik/subscriptions", "organizations_url": "https://api.github.com/users/Woytek-Polnik/orgs", "repos_url": "https://api.github.com/users/Woytek-Polnik/repos", "events_url": "https://api.github.com/users/Woytek-Polnik/events{/privacy}", "received_events_url": "https://api.github.com/users/Woytek-Polnik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2019-03-26T17:56:23Z", "updated_at": "2020-08-10T20:39:39Z", "closed_at": "2020-01-14T12:22:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\nPY_COLORS does not perform as it was supposed to, it requires sudo.\r\nGitlab CI environment.\r\n\r\n# Molecule and Ansible details\r\n\r\n\r\n```\r\n$ python -V\r\nPython 2.7.5\r\n$ molecule --version\r\nmolecule, version 2.20.0\r\n$ ansible --version\r\nansible 2.7.8\r\n```\r\n   \r\nBoth installed with pip\r\n\r\n# Log:\r\n$ sudo molecule destroy -s libvirt\r\n--> Validating schema /builds/test/molecule/libvirt/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 libvirt\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n    \r\n--> Scenario: 'libvirt'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'libvirt'\r\n--> Action: 'destroy'\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    ok: [localhost] => (item=None)\r\n    ok: [localhost]\r\n    \r\n    TASK [Populate instance config] ************************************************\r\n    ok: [localhost]\r\n    \r\n    TASK [Dump instance config] ****************************************************\r\n    skipping: [localhost]\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=2    changed=0    unreachable=0    failed=0\r\n    \r\n    \r\n$ export PY_COLORS=0\r\n$ molecule destroy -s libvirt\r\n--> Validating schema /builds/test/molecule/libvirt/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 libvirt\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n    \r\n--> Scenario: 'libvirt'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'libvirt'\r\n--> Action: 'destroy'\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    ok: [localhost] => (item=None)\r\n    ok: [localhost]\r\n    \r\n    TASK [Populate instance config] ************************************************\r\n    ok: [localhost]\r\n    \r\n    TASK [Dump instance config] ****************************************************\r\n    skipping: [localhost]\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=2    changed=0    unreachable=0    failed=0\r\n    \r\n    \r\n$ export PY_COLORS=1\r\n$ molecule destroy -s libvirt\r\n--> Validating schema /builds/test/molecule/libvirt/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 libvirt\r\n    \u251c\u2500\u2500 cleanup\r\n    \u2514\u2500\u2500 destroy\r\n    \r\n--> Scenario: 'libvirt'\r\n--> Action: 'cleanup'\r\nSkipping, cleanup playbook not configured.\r\n--> Scenario: 'libvirt'\r\n--> Action: 'destroy'\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    failed: [localhost] (item=None) => {\"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n    fatal: [localhost]: FAILED! => {\"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1   \r\n\r\n# Detailed log\r\n\r\n$ export PY_COLORS=1\r\n$ molecule destroy -s libvirt\r\n.\r\n.\r\n failed: [localhost] (item={'box': u'centos/7', 'provider_options': {'memory': 1024, 'cpus': 1, 'uri': u\"'qemu:///system'\"}, 'name': u'centos7', 'groups': [u'centos']}) => {\r\n        \"changed\": false, \r\n        \"item\": {\r\n            \"box\": \"centos/7\", \r\n            \"groups\": [\r\n                \"centos\"\r\n            ], \r\n            \"name\": \"centos7\", \r\n            \"provider_options\": {\r\n                \"cpus\": 1, \r\n                \"memory\": 1024, \r\n                \"uri\": \"'qemu:///system'\"\r\n            }\r\n        }, \r\n        \"rc\": 0\r\n    }\r\n    \r\n    MSG:\r\n    \r\n    MODULE FAILURE\r\n    See stdout/stderr for the exact error\r\n    \r\n    \r\n    MODULE_STDOUT:\r\n    \r\n    --> Validating schema /builds/ansible/roles/molecule/libvirt/molecule.yml.\r\n    Validation completed successfully.\r\n    \r\n    {\"invocation\": {\"module_args\": {\"config_options\": {}, \"platform_box_url\": null, \"provider_cpus\": 2, \"provider_raw_config_args\": null, \"platform_box\": \"centos/7\", \"provider_override_args\": null, \"state\": \"destroy\", \"instance_interfaces\": [], \"instance_name\": \"centos7\", \"platform_box_version\": null, \"provider_memory\": 512, \"instance_raw_config_args\": null, \"provider_options\": {\"memory\": 1024, \"uri\": \"'qemu:///system'\", \"cpus\": 1}, \"provider_name\": \"libvirt\", \"provision\": false, \"force_stop\": true}}, \"changed\": false}\r\n    \r\n    \r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1   \r\n\r\n# Desired Behavior\r\n\r\nI would like to use PY_COLORS fully without sudo.\r\n\r\n# Actual Behaviour\r\n\r\nRunning as root in the container(gitlab CI executor), tested with privileged and without it. \r\nEverything worked with molecule 2.19. \r\nI updated to 2.20 and added PY_COLORS=1, now molecule create and destroy fails.\r\nAdding sudo lets create and destroy pass through but the color disappears.\r\n\r\nIt could be somehow issued with gitlab Ci, but it keeps me wondering that with PY_COLORS=0 all works flawlessly.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1881/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1878", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1878/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1878/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1878/events", "html_url": "https://github.com/ansible-community/molecule/issues/1878", "id": 425312206, "node_id": "MDU6SXNzdWU0MjUzMTIyMDY=", "number": 1878, "title": "Docker driver doesn't support etc_hosts from docker_container module", "user": {"login": "TomaszKlosinski", "id": 1906582, "node_id": "MDQ6VXNlcjE5MDY1ODI=", "avatar_url": "https://avatars.githubusercontent.com/u/1906582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TomaszKlosinski", "html_url": "https://github.com/TomaszKlosinski", "followers_url": "https://api.github.com/users/TomaszKlosinski/followers", "following_url": "https://api.github.com/users/TomaszKlosinski/following{/other_user}", "gists_url": "https://api.github.com/users/TomaszKlosinski/gists{/gist_id}", "starred_url": "https://api.github.com/users/TomaszKlosinski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TomaszKlosinski/subscriptions", "organizations_url": "https://api.github.com/users/TomaszKlosinski/orgs", "repos_url": "https://api.github.com/users/TomaszKlosinski/repos", "events_url": "https://api.github.com/users/TomaszKlosinski/events{/privacy}", "received_events_url": "https://api.github.com/users/TomaszKlosinski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-26T09:38:04Z", "updated_at": "2019-10-27T13:31:50Z", "closed_at": "2019-10-27T13:31:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--- Verify first that your issue is not already reported on GitHub -->\r\n<!--- Please also check https://molecule.readthedocs.io/en/latest/faq.html --->\r\n<!--- Please use https://groups.google.com/forum/#!forum/molecule-users for usage questions -->\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.7.8\r\n  config file = None\r\n  configured module search path = [u'/Users/tomasz/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/tomasz/Library/Python/2.7/lib/python/site-packages/ansible\r\n  executable location = /Users/tomasz/Library/Python/2.7/bin/ansible\r\n  python version = 2.7.15 (default, Feb 12 2019, 12:27:02) [GCC 4.2.1 Compatible Apple LLVM 10.0.0 (clang-1000.11.45.5)]\r\nmolecule, version 2.20.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n- No linters or tests, the problem is on `create.yml` phase.\r\n\r\n# Desired Behavior\r\n\r\nI'm trying to overwrite some domain with etc_hosts from docker_container module:\r\n```\r\nplatforms:\r\n  - name: instance1\r\n    image: ubuntu:16.04\r\n    groups:\r\n      - haproxy-group\r\n    etc_hosts:\r\n      - \"prometheus.local\": \"{{ ansible_default_ipv4.address }}\"\r\n```\r\n\r\nThere should be new entry in /etc/hosts:\r\n```\r\n172.17.0.3    prometheus.local\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nThere's no entry in /etc/hosts:\r\n```\r\nroot@instance1:/# cat /etc/hosts\r\n127.0.0.1    localhost\r\n::1    localhost ip6-localhost ip6-loopback\r\nfe00::0    ip6-localnet\r\nff00::0    ip6-mcastprefix\r\nff02::1    ip6-allnodes\r\nff02::2    ip6-allrouters\r\n172.17.0.3    instance1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1878/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1878/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1862", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1862/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1862/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1862/events", "html_url": "https://github.com/ansible-community/molecule/pull/1862", "id": 423747903, "node_id": "MDExOlB1bGxSZXF1ZXN0MjYzMjQ5OTU1", "number": 1862, "title": "Fix/Lint Inspec Verify Playbook", "user": {"login": "Lirt", "id": 11079428, "node_id": "MDQ6VXNlcjExMDc5NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/11079428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lirt", "html_url": "https://github.com/Lirt", "followers_url": "https://api.github.com/users/Lirt/followers", "following_url": "https://api.github.com/users/Lirt/following{/other_user}", "gists_url": "https://api.github.com/users/Lirt/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lirt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lirt/subscriptions", "organizations_url": "https://api.github.com/users/Lirt/orgs", "repos_url": "https://api.github.com/users/Lirt/repos", "events_url": "https://api.github.com/users/Lirt/events{/privacy}", "received_events_url": "https://api.github.com/users/Lirt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-21T14:08:35Z", "updated_at": "2019-03-29T11:51:42Z", "closed_at": "2019-03-29T11:51:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1862", "html_url": "https://github.com/ansible-community/molecule/pull/1862", "diff_url": "https://github.com/ansible-community/molecule/pull/1862.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1862.patch", "merged_at": "2019-03-29T11:51:42Z"}, "body": "#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\nLint `Inspec` playbook `verify.yml` with `ansible-lint`.\r\n\r\nTested with molecule `2.19`.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1862/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1862/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1860", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1860/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1860/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1860/events", "html_url": "https://github.com/ansible-community/molecule/issues/1860", "id": 423716048, "node_id": "MDU6SXNzdWU0MjM3MTYwNDg=", "number": 1860, "title": "Molecule idempotency fails with yum", "user": {"login": "LibreBeats", "id": 42524169, "node_id": "MDQ6VXNlcjQyNTI0MTY5", "avatar_url": "https://avatars.githubusercontent.com/u/42524169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LibreBeats", "html_url": "https://github.com/LibreBeats", "followers_url": "https://api.github.com/users/LibreBeats/followers", "following_url": "https://api.github.com/users/LibreBeats/following{/other_user}", "gists_url": "https://api.github.com/users/LibreBeats/gists{/gist_id}", "starred_url": "https://api.github.com/users/LibreBeats/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LibreBeats/subscriptions", "organizations_url": "https://api.github.com/users/LibreBeats/orgs", "repos_url": "https://api.github.com/users/LibreBeats/repos", "events_url": "https://api.github.com/users/LibreBeats/events{/privacy}", "received_events_url": "https://api.github.com/users/LibreBeats/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-03-21T12:57:20Z", "updated_at": "2019-03-21T14:13:23Z", "closed_at": "2019-03-21T14:13:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\nansible 2.7.6\r\nmolecule, version 2.19.0\r\npython version = 3.6.7\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n- pip [x]\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n- pip\r\n- OS package [x]\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nIdempotency test should be okay because packages state is present.\r\n\r\n# Actual Behaviour\r\nIdempotency fails because \"package is already installed\"\r\n\r\n```- name: Install prerequisites\r\n  yum:\r\n    name: [\"@^Development tools\", \"binutils\", \"autoconf\", \"flex\", \"bison\", \"libjpeg-devel\"]\r\n    state: present #Tried also with \"installed\"\r\n  tags:\r\n    - prereqs\r\n    - yum\r\n```\r\nmolecule --debug test (on idempotency section)\r\n\r\n```\r\nfatal: [Centos]: FAILED! => {\r\n    \"changed\": false,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"allow_downgrade\": false,\r\n            \"autoremove\": false,\r\n            \"bugfix\": false,\r\n            \"conf_file\": null,\r\n            \"disable_excludes\": null,\r\n            \"disable_gpg_check\": false,\r\n            \"disable_plugin\": [],\r\n            \"disablerepo\": [],\r\n            \"download_only\": false,\r\n            \"enable_plugin\": [],\r\n            \"enablerepo\": [],\r\n            \"exclude\": [],\r\n            \"install_repoquery\": true,\r\n            \"installroot\": \"/\",\r\n            \"list\": null,\r\n            \"name\": [\r\n                \"@^Development tools\",\r\n                \"binutils\",\r\n                \"autoconf\",\r\n                \"flex\",\r\n                \"bison\",\r\n                \"libjpeg-devel\"\r\n            ],\r\n            \"releasever\": null,\r\n            \"security\": false,\r\n            \"skip_broken\": false,\r\n            \"state\": \"installed\",\r\n            \"update_cache\": false,\r\n            \"update_only\": false,\r\n            \"use_backend\": \"auto\",\r\n            \"validate_certs\": true\r\n        }\r\n    },\r\n    \"msg\": \"Error: Nothing to do\\n\",\r\n    \"rc\": 1,\r\n    \"results\": [\r\n        \"binutils-2.27-34.base.el7.x86_64 providing binutils is already installed\",\r\n        \"autoconf-2.69-11.el7.noarch providing autoconf is already installed\",\r\n        \"flex-2.5.37-6.el7.x86_64 providing flex is already installed\",\r\n        \"bison-3.0.4-2.el7.x86_64 providing bison is already installed\",\r\n        \"libjpeg-turbo-devel-1.2.90-6.el7.x86_64 providing libjpeg-devel is already installed\",\r\n        \"Loaded plugins: fastestmirror, ovl\\nLoading mirror speeds from cached hostfile\\n * base: mirror.airenetworks.es\\n * extras: mirror.gadix.com\\n * updates: mirror.airenetworks.es\\nGroup Development tools does not exist.\\n\"\r\n    ]\r\n}\r\n```\r\n\r\nmolecule.yml\r\n\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: Centos\r\n    image: centos:7\r\n  - name: Debian\r\n    image: debian:stretch\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: goss\r\n  lint:\r\n    name: yamllint\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1860/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1860/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1851", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1851/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1851/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1851/events", "html_url": "https://github.com/ansible-community/molecule/issues/1851", "id": 422884858, "node_id": "MDU6SXNzdWU0MjI4ODQ4NTg=", "number": 1851, "title": "No filter named 'molecule_from_yaml' on fresh Molecule", "user": {"login": "a0s", "id": 418868, "node_id": "MDQ6VXNlcjQxODg2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/418868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a0s", "html_url": "https://github.com/a0s", "followers_url": "https://api.github.com/users/a0s/followers", "following_url": "https://api.github.com/users/a0s/following{/other_user}", "gists_url": "https://api.github.com/users/a0s/gists{/gist_id}", "starred_url": "https://api.github.com/users/a0s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a0s/subscriptions", "organizations_url": "https://api.github.com/users/a0s/orgs", "repos_url": "https://api.github.com/users/a0s/repos", "events_url": "https://api.github.com/users/a0s/events{/privacy}", "received_events_url": "https://api.github.com/users/a0s/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-03-19T18:21:34Z", "updated_at": "2021-01-20T17:42:25Z", "closed_at": "2019-03-21T16:29:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.9\r\n  config file = /Users/a0s/.ansible.cfg\r\n  configured module search path = [u'/Users/a0s/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.15 (default, Jan 12 2019, 21:43:48) [GCC 4.2.1 Compatible Apple LLVM 10.0.0 (clang-1000.11.45.5)]\r\nmolecule, version 2.19.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- brew\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`Idempotence completed successfully.` message\r\n\r\n# Actual Behaviour\r\n\r\n```\r\na0s@cto:~ [2.4.5 ] $ molecule init role --role-name my-role\r\n--> Initializing new role my-role...\r\nInitialized role in /Users/a0s/my-role successfully.\r\n\r\na0s@cto:~ [2.4.5 ] $ cd my-role/\r\n\r\na0s@cto:~/my-role [2.4.5 ] $ molecule test\r\n--> Validating schema /Users/a0s/my-role/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /Users/a0s/my-role/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /Users/a0s/my-role/molecule/default/tests/...\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /Users/a0s/my-role/molecule/default/playbook.yml...\r\nLint completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n [WARNING]: Skipping plugin (/usr/local/lib/python2.7/site-\r\npackages/molecule/provisioner/ansible/plugins/filters/molecule_core.py) as it\r\nseems to be invalid: cannot import name py31compat\r\n\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    fatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', molecule_file) | molecule_from_yaml }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: template error while templating string: no filter named 'molecule_from_yaml'. String: {{ lookup('file', molecule_file) | molecule_from_yaml }}\"}\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1\r\n\r\nERROR:\r\nAn error occurred during the test sequence action: 'destroy'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n [WARNING]: Skipping plugin (/usr/local/lib/python2.7/site-\r\npackages/molecule/provisioner/ansible/plugins/filters/molecule_core.py) as it\r\nseems to be invalid: cannot import name py31compat\r\n\r\n\r\n    PLAY [Destroy] *****************************************************************\r\n\r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    fatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', molecule_file) | molecule_from_yaml }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: template error while templating string: no filter named 'molecule_from_yaml'. String: {{ lookup('file', molecule_file) | molecule_from_yaml }}\"}\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1\r\n\r\nERROR:\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1851/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1851/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1848", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1848/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1848/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1848/events", "html_url": "https://github.com/ansible-community/molecule/issues/1848", "id": 422363290, "node_id": "MDU6SXNzdWU0MjIzNjMyOTA=", "number": 1848, "title": "DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated", "user": {"login": "mmartinello", "id": 3822398, "node_id": "MDQ6VXNlcjM4MjIzOTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3822398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmartinello", "html_url": "https://github.com/mmartinello", "followers_url": "https://api.github.com/users/mmartinello/followers", "following_url": "https://api.github.com/users/mmartinello/following{/other_user}", "gists_url": "https://api.github.com/users/mmartinello/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmartinello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmartinello/subscriptions", "organizations_url": "https://api.github.com/users/mmartinello/orgs", "repos_url": "https://api.github.com/users/mmartinello/repos", "events_url": "https://api.github.com/users/mmartinello/events{/privacy}", "received_events_url": "https://api.github.com/users/mmartinello/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-03-18T18:11:55Z", "updated_at": "2019-03-19T14:57:50Z", "closed_at": "2019-03-19T14:57:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.7.9\r\n  config file = None\r\n  configured module search path = ['/Users/mattia/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 3.7.2 (default, Mar 18 2019, 16:34:41) [Clang 10.0.0 (clang-1000.11.45.5)]\r\nmolecule, version 2.19.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- brew\r\n\r\nDetail any linters or test runners used:\r\n\r\nAll defaults:\r\n\r\n```\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    image: centos:7\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nRunning `molecule test` gives the following warning messages:\r\n\r\n```\r\n    ============================= test session starts ==============================\r\n    platform darwin -- Python 3.7.2, pytest-3.9.3, py-1.8.0, pluggy-0.9.0\r\n    rootdir: /Users/mattia/Projects/ansible-java-role/molecule/default, inifile:\r\n    plugins: testinfra-1.16.0\r\ncollected 2 items                                                              \r\n    \r\n    tests/test_default.py ..                                                 [100%]\r\n    \r\n    =============================== warnings summary ===============================\r\n    Package fixture is deprecated. Use host fixture and get Package module with host.package\r\n    TestinfraBackend fixture is deprecated. Use host fixture and get backend with host.backend\r\n    \r\n    /usr/local/lib/python3.7/site-packages/jinja2/utils.py:485\r\n      /usr/local/lib/python3.7/site-packages/jinja2/utils.py:485: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import MutableMapping\r\n    \r\n    /usr/local/lib/python3.7/site-packages/jinja2/runtime.py:318\r\n      /usr/local/lib/python3.7/site-packages/jinja2/runtime.py:318: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import Mapping\r\n    \r\n    /usr/local/lib/python3.7/site-packages/ansible/errors/__init__.py:22\r\n      /usr/local/lib/python3.7/site-packages/ansible/errors/__init__.py:22: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import Sequence\r\n    \r\n    /usr/local/lib/python3.7/site-packages/yaml/constructor.py:126\r\n      /usr/local/lib/python3.7/site-packages/yaml/constructor.py:126: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        if not isinstance(key, collections.Hashable):\r\n    \r\n    /usr/local/lib/python3.7/site-packages/ansible/utils/unsafe_proxy.py:56\r\n      /usr/local/lib/python3.7/site-packages/ansible/utils/unsafe_proxy.py:56: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import Mapping, MutableSequence, Set\r\n      /usr/local/lib/python3.7/site-packages/ansible/utils/unsafe_proxy.py:56: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import Mapping, MutableSequence, Set\r\n    \r\n    /usr/local/lib/python3.7/site-packages/ansible/utils/plugin_docs.py:23\r\n      /usr/local/lib/python3.7/site-packages/ansible/utils/plugin_docs.py:23: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import MutableMapping, MutableSet, MutableSequence\r\n    \r\n    /usr/local/lib/python3.7/site-packages/ansible/utils/listify.py:22\r\n      /usr/local/lib/python3.7/site-packages/ansible/utils/listify.py:22: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import Iterable\r\n    \r\n    unknown file:0\r\n      unknown file:0: RemovedInPytest4Warning: config.warn has been deprecated, use warnings.warn instead\r\n      unknown file:0: RemovedInPytest4Warning: config.warn has been deprecated, use warnings.warn instead\r\n    \r\n    tests/test_default.py::test_hosts_file[ansible://instance]\r\n      /usr/local/lib/python3.7/site-packages/cerberus/schema.py:3: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\r\n        from collections import (Callable, Hashable, Iterable, Mapping,\r\n    \r\n    -- Docs: https://docs.pytest.org/en/latest/warnings.html\r\n    ==================== 2 passed, 13 warnings in 12.79 seconds ====================\r\nVerifier completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1848/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1848/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1845", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1845/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1845/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1845/events", "html_url": "https://github.com/ansible-community/molecule/issues/1845", "id": 422137228, "node_id": "MDU6SXNzdWU0MjIxMzcyMjg=", "number": 1845, "title": "Add error checking to extra hosts links keys", "user": {"login": "TomaszKlosinski", "id": 1906582, "node_id": "MDQ6VXNlcjE5MDY1ODI=", "avatar_url": "https://avatars.githubusercontent.com/u/1906582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TomaszKlosinski", "html_url": "https://github.com/TomaszKlosinski", "followers_url": "https://api.github.com/users/TomaszKlosinski/followers", "following_url": "https://api.github.com/users/TomaszKlosinski/following{/other_user}", "gists_url": "https://api.github.com/users/TomaszKlosinski/gists{/gist_id}", "starred_url": "https://api.github.com/users/TomaszKlosinski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TomaszKlosinski/subscriptions", "organizations_url": "https://api.github.com/users/TomaszKlosinski/orgs", "repos_url": "https://api.github.com/users/TomaszKlosinski/repos", "events_url": "https://api.github.com/users/TomaszKlosinski/events{/privacy}", "received_events_url": "https://api.github.com/users/TomaszKlosinski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-03-18T10:19:56Z", "updated_at": "2020-02-01T19:21:15Z", "closed_at": "2020-02-01T19:21:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version && molecule --version\r\nansible 2.7.8\r\n  config file = None\r\n  configured module search path = [u'/Users/tomasz/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/tomasz/Library/Python/2.7/lib/python/site-packages/ansible\r\n  executable location = /Users/tomasz/Library/Python/2.7/bin/ansible\r\n  python version = 2.7.15 (default, Feb 12 2019, 12:27:02) [GCC 4.2.1 Compatible Apple LLVM 10.0.0 (clang-1000.11.45.5)]\r\nmolecule, version 2.19.0\r\n```\r\n\r\nMolecule installation method:\r\n- pip\r\n\r\nAnsible installation method:\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n- No linters and tests, problem occurs when creating $MOLECULE_EPHEMERAL_DIRECTORY directory.\r\n\r\n# Desired Behavior\r\nI'm trying to configure symlinks to inventory file (hosts), group_vars and host_vars of my prod environment:\r\n```\r\n---\r\n\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance1\r\n    image: ubuntu:18.04\r\n    groups:\r\n      - haproxy-group\r\n  - name: instance2\r\n    image: ubuntu:18.04\r\n    groups:\r\n      - haproxy-group\r\nprovisioner:\r\n  name: ansible\r\n  log: true\r\n  inventory:\r\n    links:\r\n      hosts: ../../../../env/live/inventory/hosts\r\n      group_vars: ../../../../env/live/inventory/group_vars\r\n      host_vars: ../../../../env/live/inventory/host_vars\r\n  env:\r\n    ANSIBLE_ROLES_PATH: ../../../../roles/\r\n  playbooks:\r\n    converge: ../../haproxy.yml\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n$ molecule --debug converge\r\n--> Validating schema /Users/tomasz/ansible-playbooks/haproxy/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u2514\u2500\u2500 converge\r\n\r\n--> Inventory /Users/tomasz/ansible-playbooks/haproxy/molecule/default/../../../../env/live/inventory/group_vars linked to /var/folders/1r/bt9yc5vd7fd0k8sqvw73xs900000gn/T/molecule/haproxy/default/group_vars\r\n--> Inventory /Users/tomasz/ansible-playbooks/haproxy/molecule/default/../../../../env/live/inventory/hosts linked to /var/folders/1r/bt9yc5vd7fd0k8sqvw73xs900000gn/T/molecule/haproxy/default/hosts\r\nTraceback (most recent call last):\r\n  File \"/Users/tomasz/Library/Python/2.7/bin/molecule\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/molecule/command/converge.py\", line 112, in converge\r\n    base.execute_subcommand(scenario.config, action)\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/molecule/command/base.py\", line 100, in execute_subcommand\r\n    return command(config).execute()\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/molecule/command/base.py\", line 51, in __init__\r\n    self._setup()\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/molecule/command/base.py\", line 93, in _setup\r\n    self._config.provisioner.manage_inventory()\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/molecule/provisioner/ansible.py\", line 633, in manage_inventory\r\n    self._link_or_update_vars()\r\n  File \"/Users/tomasz/Library/Python/2.7/lib/python/site-packages/molecule/provisioner/ansible.py\", line 718, in _link_or_update_vars\r\n    os.symlink(source, target)\r\nOSError: [Errno 17] File exists\r\n````\r\n\r\nHowever, the symlink is actually created in $MOLECULE_EPHEMERAL_DIRECTORY:\r\n```\r\n$ ll $MOLECULE_EPHEMERAL_DIRECTORY\r\ntotal 32\r\n-rw-r--r--  1 tomasz  staff   151B Mar 18 11:00 Dockerfile_ubuntu_18_04\r\n-rw-r--r--  1 tomasz  staff   239B Mar 18 11:03 ansible.cfg\r\n-rw-r--r--  1 tomasz  staff   713B Mar 18 11:03 ansible_inventory.yml\r\nlrwxr-xr-x  1 tomasz  staff   117B Mar 18 11:03 group_vars -> /Users/tomasz/ansible-playbooks/haproxy/molecule/default/../../../../env/live/inventory/group_vars\r\nlrwxr-xr-x  1 tomasz  staff   112B Mar 18 11:02 hosts -> /Users/tomasz/ansible-playbooks/haproxy/molecule/default/../../../../env/live/inventory/hosts\r\n-rw-r--r--  1 tomasz  staff    85B Mar 18 11:03 state.yml\r\n```\r\n\r\nEverything works fine when I comment out:\r\n```\r\nhosts: ../../../../env/live/inventory/hosts\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1845/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1843", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1843/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1843/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1843/events", "html_url": "https://github.com/ansible-community/molecule/issues/1843", "id": 421828288, "node_id": "MDU6SXNzdWU0MjE4MjgyODg=", "number": 1843, "title": "Missing cookiecutter/ directory when building from source tarball", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-16T16:46:47Z", "updated_at": "2019-04-25T10:34:49Z", "closed_at": "2019-04-25T10:34:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type: Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.8\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/brett/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python3.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 3.7.2 (default, Jan 10 2019, 23:51:51) [GCC 8.2.1 20181127]\r\n\r\n```\r\n\r\nMolecule versions affected: 2.19\r\n\r\nMolecule installation method: source\r\n\r\nAnsible installation method (one of): OS package (Arch Linux)\r\n\r\n# Desired Behavior\r\n\r\n```sh\r\n[~/usr/lib/python3.7/site-packages/molecule]$ tree -L 1\r\n.\r\n\u251c\u2500\u2500 command\r\n\u251c\u2500\u2500 config.py\r\n\u251c\u2500\u2500 cookiecutter\r\n\u251c\u2500\u2500 dependency\r\n\u251c\u2500\u2500 driver\r\n\u251c\u2500\u2500 __init__.py\r\n\u251c\u2500\u2500 interpolation.py\r\n\u251c\u2500\u2500 lint\r\n\u251c\u2500\u2500 logger.py\r\n\u251c\u2500\u2500 migrate.py\r\n\u251c\u2500\u2500 model\r\n\u251c\u2500\u2500 platforms.py\r\n\u251c\u2500\u2500 provisioner\r\n\u251c\u2500\u2500 __pycache__\r\n\u251c\u2500\u2500 scenario.py\r\n\u251c\u2500\u2500 scenarios.py\r\n\u251c\u2500\u2500 shell.py\r\n\u251c\u2500\u2500 state.py\r\n\u251c\u2500\u2500 status.py\r\n\u251c\u2500\u2500 util.py\r\n\u2514\u2500\u2500 verifier\r\n```\r\n\r\nNote that `cookiecutter/` is present\r\n\r\n# Actual Behaviour\r\n\r\n```sh\r\n[~/usr/lib/python3.7/site-packages/molecule]$ tree -L 1\r\n.\r\n\u251c\u2500\u2500 command\r\n\u251c\u2500\u2500 config.py\r\n\u251c\u2500\u2500 dependency\r\n\u251c\u2500\u2500 driver\r\n\u251c\u2500\u2500 __init__.py\r\n\u251c\u2500\u2500 interpolation.py\r\n\u251c\u2500\u2500 lint\r\n\u251c\u2500\u2500 logger.py\r\n\u251c\u2500\u2500 migrate.py\r\n\u251c\u2500\u2500 model\r\n\u251c\u2500\u2500 platforms.py\r\n\u251c\u2500\u2500 provisioner\r\n\u251c\u2500\u2500 __pycache__\r\n\u251c\u2500\u2500 scenario.py\r\n\u251c\u2500\u2500 scenarios.py\r\n\u251c\u2500\u2500 shell.py\r\n\u251c\u2500\u2500 state.py\r\n\u251c\u2500\u2500 status.py\r\n\u251c\u2500\u2500 util.py\r\n\u2514\u2500\u2500 verifier\r\n```\r\n\r\nNote the absence of `cookiecutter/`\r\n\r\n## Explanation\r\n\r\nWhen building Molecule with `python setup.py build && python setup.py install --root=\"${pkgdir}\" --optimize=1 --skip-build`, I have found that the `cookiecutter/` directory is only installed when using a git checkout of the code. If I use one of the tarballs in the release page, the `cookiecutter/` directory is absent, causing errors when trying to use Molecule after install:\r\n```\r\ncookiecutter.exceptions.RepositoryNotFound: A valid repository for \"/usr/lib/python3.7/site-packages/molecule/command/init/../../cookiecutter/scenario/driver/docker\" could not be found in the following locations:\r\n\r\n/usr/lib/python3.7/site-packages/molecule/command/init/../../cookiecutter/scenario/driver/docker\r\n/usr/lib/python3.7/site-packages/molecule/command/init/../../cookiecutter/scenario/driver/docker\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1843/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1843/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1834", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1834/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1834/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1834/events", "html_url": "https://github.com/ansible-community/molecule/issues/1834", "id": 421010797, "node_id": "MDU6SXNzdWU0MjEwMTA3OTc=", "number": 1834, "title": "[Documentation] Show latest stable version of documentation", "user": {"login": "Lirt", "id": 11079428, "node_id": "MDQ6VXNlcjExMDc5NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/11079428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lirt", "html_url": "https://github.com/Lirt", "followers_url": "https://api.github.com/users/Lirt/followers", "following_url": "https://api.github.com/users/Lirt/following{/other_user}", "gists_url": "https://api.github.com/users/Lirt/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lirt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lirt/subscriptions", "organizations_url": "https://api.github.com/users/Lirt/orgs", "repos_url": "https://api.github.com/users/Lirt/repos", "events_url": "https://api.github.com/users/Lirt/events{/privacy}", "received_events_url": "https://api.github.com/users/Lirt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}, {"id": 842110976, "node_id": "MDU6TGFiZWw4NDIxMTA5NzY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/major", "name": "major", "color": "c6476b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-03-14T13:14:12Z", "updated_at": "2019-04-04T09:28:20Z", "closed_at": "2019-04-04T09:28:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n[Molecule documentation](https://molecule.readthedocs.io) by default shows `latest` (2.20x) docs instead of `stable` (2.19x).\r\n\r\n# Desired Behavior\r\n\r\nSince majority of people are using latest stable version (2.19) of molecule (distributed officially by `pip`, `docker` or package managers), we should by default show this (`stable`) version of documentation.\r\n\r\n# Actual Behaviour\r\n\r\nDocumentation showed is for latest branch (master, or pre-release?), which is used only by small portion of users. This can lead people to using features, that are not currently implemented, or merged into oficially distributable release, that most of the people are using. (as I fooled myself today with `cleanup` feature).", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1834/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1834/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1831", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1831/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1831/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1831/events", "html_url": "https://github.com/ansible-community/molecule/issues/1831", "id": 420610037, "node_id": "MDU6SXNzdWU0MjA2MTAwMzc=", "number": 1831, "title": "molecule requirementes should not pinned", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1205135639, "node_id": "MDU6TGFiZWwxMjA1MTM1NjM5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/test", "name": "test", "color": "0e8a16", "default": false, "description": "Improvement to quality assurance: CI/CD, testing, building"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-03-13T16:53:19Z", "updated_at": "2019-10-27T13:33:50Z", "closed_at": "2019-10-27T13:33:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Desired Behavior\r\n\r\nMolecule is a development/testing tool and it should not have pinned runtime or testing requirements.\r\n\r\nInstead we need to use ranges that prevent usage of dependencies what **we know** are bugged or broken.\r\n\r\nThis also should avoid possible conflicts between a molecule dependency would come into conflict with the version mentioned by ansible or another dependency. \r\n\r\nSooner or later we will clearly have a different version of `foo` package when using one version of anasible and another one when using a newer version.\r\n\r\nWhen implementing this we should also use `pip check` to validate that after installation there are no reported conflicts reported by pip.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1831/reactions", "total_count": 3, "+1": 2, "-1": 1, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1831/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1827", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1827/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1827/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1827/events", "html_url": "https://github.com/ansible-community/molecule/issues/1827", "id": 420391221, "node_id": "MDU6SXNzdWU0MjAzOTEyMjE=", "number": 1827, "title": "Variables used in playbook are being resolved before 'converge'", "user": {"login": "munjoy", "id": 18664675, "node_id": "MDQ6VXNlcjE4NjY0Njc1", "avatar_url": "https://avatars.githubusercontent.com/u/18664675?v=4", "gravatar_id": "", "url": "https://api.github.com/users/munjoy", "html_url": "https://github.com/munjoy", "followers_url": "https://api.github.com/users/munjoy/followers", "following_url": "https://api.github.com/users/munjoy/following{/other_user}", "gists_url": "https://api.github.com/users/munjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/munjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/munjoy/subscriptions", "organizations_url": "https://api.github.com/users/munjoy/orgs", "repos_url": "https://api.github.com/users/munjoy/repos", "events_url": "https://api.github.com/users/munjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/munjoy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-03-13T09:17:09Z", "updated_at": "2021-10-04T13:30:59Z", "closed_at": "2021-10-04T13:30:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n- Ansible version: 2.7.8\r\n- Molecule version: 2.19.0 \r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nThe desired behaviour would be exactly as when the playbook is run with `ansible-playbook`. Example,\r\n\r\n```\r\nTASK [example : Generate data file from template] ***************************************************************************************\r\nchanged: [localhost]\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nWhen `molecule test` is executed, this is the actual error:\r\n```\r\nTASK [example : Generate data file from template] ******************************\r\nfatal: [instance]: FAILED! => {\"changed\": false, \"checksum\": \"15eb25600a9417548c9388111c2df4911e59ffd8\", \"msg\": \"Destination directory /home/ubuntu/Projects/test/example/files does not exist\"}\r\n    \r\nPLAY RECAP *********************************************************************\r\ninstance                   : ok=1    changed=0    unreachable=0    failed=1   \r\n```\r\n\r\nSample playbook and corresponding role have been attached to this issue. There is no hard-coded path in the provided. It would appear that the variable `some_file_path` is being resolved outside of the container and when the playbook is run in the container, it cannot find it.\r\n\r\nSo, I am still wondering if I am missing some configuration setting, a setup (prepare.yml ?) or, is this a bug?\r\n\r\n[example.zip](https://github.com/ansible/molecule/files/2960629/example.zip)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1827/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1826", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1826/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1826/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1826/events", "html_url": "https://github.com/ansible-community/molecule/issues/1826", "id": 420014863, "node_id": "MDU6SXNzdWU0MjAwMTQ4NjM=", "number": 1826, "title": "\"Failed to set permissions on the temporary\" using vagrant", "user": {"login": "D4nny-dev", "id": 11134650, "node_id": "MDQ6VXNlcjExMTM0NjUw", "avatar_url": "https://avatars.githubusercontent.com/u/11134650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/D4nny-dev", "html_url": "https://github.com/D4nny-dev", "followers_url": "https://api.github.com/users/D4nny-dev/followers", "following_url": "https://api.github.com/users/D4nny-dev/following{/other_user}", "gists_url": "https://api.github.com/users/D4nny-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/D4nny-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/D4nny-dev/subscriptions", "organizations_url": "https://api.github.com/users/D4nny-dev/orgs", "repos_url": "https://api.github.com/users/D4nny-dev/repos", "events_url": "https://api.github.com/users/D4nny-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/D4nny-dev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-12T14:23:38Z", "updated_at": "2020-01-14T12:22:48Z", "closed_at": "2020-01-14T12:22:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.0\r\nmolecule version 2.19.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n> When i run my role with **vagrant up** all is ok , as can you be seen below.\r\n> - box: generic/freebsd12\r\n\r\n```\r\nTASK [/etc/ansible/roles/bareos-psql : create bareos db] ***********************\r\ntask path: /private/etc/ansible/roles/bareos-psql/tasks/main.yml:80\r\nUsing module file /usr/local/lib/python3.7/site-packages/ansible/modules/commands/command.py\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/private/etc/ansible/roles/bareos-sd/molecule/freebsd/.vagrant/machines/default/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=30 -o ControlPath=/Users/D4nny/.ansible/cp/055b8f4af0 127.0.0.1 '/bin/sh -c '\"'\"'sudo -H -S -n -u pgsql /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-mljdebvwsopjebsouslvtuxhligxsgwa; db_name=bareos db_user=bareos db_password='\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"''\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"'\"' /usr/bin/env python3.6'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\nEscalation succeeded\r\n<127.0.0.1> (0, b'\\n{\"cmd\": [\"/usr/local/lib/bareos/scripts/make_bareos_tables\", \"postgresql\"], \"stdout\": \"Making postgresql tables\\\\nCREATE TABLE\\\\nALTER TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE INDEX\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nCREATE TABLE\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nINSERT 0 1\\\\nDELETE 0\\\\nINSERT 0 1\\\\nCreation of Bareos PostgreSQL tables succeeded.\", \"stderr\": \"\", \"rc\": 0, \"start\": \"2019-03-12 13:48:44.062152\", \"end\": \"2019-03-12 13:48:44.350011\", \"delta\": \"0:00:00.287859\", \"changed\": true, \"invocation\": {\"module_args\": {\"_raw_params\": \"/usr/local/lib/bareos/scripts/make_bareos_tables postgresql\", \"warn\": true, \"_uses_shell\": false, \"argv\": null, \"chdir\": null, \"executable\": null, \"creates\": null, \"removes\": null, \"stdin\": null}}}\\n', b'')\r\nchanged: [default] => (item=/usr/local/lib/bareos/scripts/make_bareos_tables postgresql) => {\r\n    \"changed\": true,\r\n    \"cmd\": [\r\n        \"/usr/local/lib/bareos/scripts/make_bareos_tables\",\r\n        \"postgresql\"\r\n    ],\r\n    \"delta\": \"0:00:00.287859\",\r\n    \"end\": \"2019-03-12 13:48:44.350011\",\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"_raw_params\": \"/usr/local/lib/bareos/scripts/make_bareos_tables postgresql\",\r\n            \"_uses_shell\": false,\r\n            \"argv\": null,\r\n            \"chdir\": null,\r\n            \"creates\": null,\r\n            \"executable\": null,\r\n            \"removes\": null,\r\n            \"stdin\": null,\r\n            \"warn\": true\r\n        }\r\n    },\r\n    \"item\": \"/usr/local/lib/bareos/scripts/make_bareos_tables postgresql\",\r\n    \"rc\": 0,\r\n    \"start\": \"2019-03-12 13:48:44.062152\",\r\n    \"stderr\": \"\",\r\n    \"stderr_lines\": [],\r\n    \"stdout\": \"Making postgresql tables\\nCREATE TABLE\\nALTER TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE INDEX\\nCREATE INDEX\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE INDEX\\nCREATE INDEX\\nCREATE TABLE\\nCREATE TABLE\\nCREATE TABLE\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE TABLE\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE INDEX\\nCREATE TABLE\\nCREATE TABLE\\nCREATE TABLE\\nCREATE TABLE\\nCREATE TABLE\\nCREATE TABLE\\nCREATE TABLE\\nCREATE TABLE\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nINSERT 0 1\\nDELETE 0\\nINSERT 0 1\\nCreation of Bareos PostgreSQL tables succeeded.\",\r\n    \"stdout_lines\": [\r\n        \"Making postgresql tables\",\r\n        \"CREATE TABLE\",\r\n        \"ALTER TABLE\",\r\n        \"CREATE INDEX\",\r\n        \"CREATE TABLE\",\r\n        \"CREATE INDEX\",\r\n        \"CREATE INDEX\",\r\n        \"CREATE TABLE\",\r\n        \"CREATE INDEX\",\r\n         .\r\n         .\r\n         .\r\n```\r\n### **molecule.yml**\r\n\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: freebsd\r\n    box: generic/freebsd12\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: freebsd_test\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\n### **playbook.yml**\r\n```\r\n---\r\n- name: Converge\r\n  hosts: all\r\n  become: true\r\n  vars:\r\n   ansible_python_interpreter: \"/usr/bin/env python3.6\"\r\n  remote_user: root\r\n  roles:\r\n    - role: bareos-psql\r\n  tags:\r\n    - sd\r\n```\r\n\r\n> This is the part of task that fail \r\n\r\n### **main.yml**\r\n**- vars**\r\n> - become_user: pgsql\r\n> - become_method: sudo\r\n\r\n```\r\n- name: create bareos db\r\n      command: \"{{item}}\"\r\n      loop:\r\n        - \"{{bareos_scripts}}/bareos/scripts/make_bareos_tables {{db_service_name}}\"\r\n        - \"{{bareos_scripts}}/bareos/scripts/grant_bareos_privileges {{db_service_name}}\"\r\n      become_method: \"{{ become_method }}\"\r\n      become_user: \"{{ psql_user }}\"\r\n      environment:\r\n        db_name: \"{{db_name}}\"\r\n        db_user: \"{{db_user}}\"\r\n        db_password: \"{{db_password}}\"\r\n      notify:\r\n        - restart bareos-dir\r\n      when: bareos_db.changed\r\n\r\n```\r\n> Instead, when I made the scenario in  molecule for my role for test the freebsd with vagrant, the behavior change , showing  the next error. \r\n\r\n\r\n# Actual Behaviour\r\n```\r\n    TASK [bareos-psql : create bareos db] ******************************************\r\n    task path: /private/etc/ansible/roles/bareos-psql/tasks/main.yml:80\r\n    <127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n    <127.0.0.1> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/var/folders/s4/0p6g064155j51n8mn010pgdm0000gn/T/molecule/bareos-sd/freebsd_test/.vagrant/machines/freebsd/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o IdentitiesOnly=yes -o StrictHostKeyChecking=no -o ControlPath=/Users/D4nny/.ansible/cp/%h-%p-%r 127.0.0.1 '/bin/sh -c '\"'\"'echo ~vagrant && sleep 0'\"'\"''\r\n    <127.0.0.1> (0, b'/home/vagrant\\n', b'')\r\n    <127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n    <127.0.0.1> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/var/folders/s4/0p6g064155j51n8mn010pgdm0000gn/T/molecule/bareos-sd/freebsd_test/.vagrant/machines/freebsd/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o IdentitiesOnly=yes -o StrictHostKeyChecking=no -o ControlPath=/Users/D4nny/.ansible/cp/%h-%p-%r 127.0.0.1 '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo /var/tmp/ansible-tmp-1552395550.998827-153325847402774 `\" && echo ansible-tmp-1552395550.998827-153325847402774=\"` echo /var/tmp/ansible-tmp-1552395550.998827-153325847402774 `\" ) && sleep 0'\"'\"''\r\n    <127.0.0.1> (0, b'ansible-tmp-1552395550.998827-153325847402774=/var/tmp/ansible-tmp-1552395550.998827-153325847402774\\n', b'')\r\n    Using module file /usr/local/lib/python3.7/site-packages/ansible/modules/commands/command.py\r\n    <127.0.0.1> PUT /Users/D4nny/.ansible/tmp/ansible-local-163805__sm9hw/tmp8ggamtvq TO /var/tmp/ansible-tmp-1552395550.998827-153325847402774/AnsiballZ_command.py\r\n    <127.0.0.1> SSH: EXEC scp -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/var/folders/s4/0p6g064155j51n8mn010pgdm0000gn/T/molecule/bareos-sd/freebsd_test/.vagrant/machines/freebsd/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o IdentitiesOnly=yes -o StrictHostKeyChecking=no -o ControlPath=/Users/D4nny/.ansible/cp/%h-%p-%r /Users/D4nny/.ansible/tmp/ansible-local-163805__sm9hw/tmp8ggamtvq '[127.0.0.1]:/var/tmp/ansible-tmp-1552395550.998827-153325847402774/AnsiballZ_command.py'\r\n    <127.0.0.1> (0, b'', b'')\r\n    <127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n    <127.0.0.1> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/var/folders/s4/0p6g064155j51n8mn010pgdm0000gn/T/molecule/bareos-sd/freebsd_test/.vagrant/machines/freebsd/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o IdentitiesOnly=yes -o StrictHostKeyChecking=no -o ControlPath=/Users/D4nny/.ansible/cp/%h-%p-%r 127.0.0.1 '/bin/sh -c '\"'\"'setfacl -m u:pgsql:r-x /var/tmp/ansible-tmp-1552395550.998827-153325847402774/ /var/tmp/ansible-tmp-1552395550.998827-153325847402774/AnsiballZ_command.py && sleep 0'\"'\"''\r\n    <127.0.0.1> (2, b'', b'setfacl: /var/tmp/ansible-tmp-1552395550.998827-153325847402774/: acl_get_file() failed: Operation not supported\\nsetfacl: /var/tmp/ansible-tmp-1552395550.998827-153325847402774/AnsiballZ_command.py: acl_get_file() failed: Operation not supported\\n')\r\n    <127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n    <127.0.0.1> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/var/folders/s4/0p6g064155j51n8mn010pgdm0000gn/T/molecule/bareos-sd/freebsd_test/.vagrant/machines/freebsd/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o IdentitiesOnly=yes -o StrictHostKeyChecking=no -o ControlPath=/Users/D4nny/.ansible/cp/%h-%p-%r 127.0.0.1 '/bin/sh -c '\"'\"'chmod u+x /var/tmp/ansible-tmp-1552395550.998827-153325847402774/ /var/tmp/ansible-tmp-1552395550.998827-153325847402774/AnsiballZ_command.py && sleep 0'\"'\"''\r\n    <127.0.0.1> (0, b'', b'')\r\n    <127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n    <127.0.0.1> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/var/folders/s4/0p6g064155j51n8mn010pgdm0000gn/T/molecule/bareos-sd/freebsd_test/.vagrant/machines/freebsd/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o IdentitiesOnly=yes -o StrictHostKeyChecking=no -o ControlPath=/Users/D4nny/.ansible/cp/%h-%p-%r 127.0.0.1 '/bin/sh -c '\"'\"'chown pgsql /var/tmp/ansible-tmp-1552395550.998827-153325847402774/ /var/tmp/ansible-tmp-1552395550.998827-153325847402774/AnsiballZ_command.py && sleep 0'\"'\"''\r\n    **<127.0.0.1> (1, b'', b'chown: /var/tmp/ansible-tmp-1552395550.998827-153325847402774/: Operation not permitted\\nchown: /var/tmp/ansible-tmp-1552395550.998827-153325847402774/AnsiballZ_command.py: Operation not permitted\\n')**\r\n    **fatal: [freebsd]: FAILED! => {\r\n        \"msg\": \"Failed to set permissions on the temporary files Ansible needs to create when becoming an unprivileged user (rc: 1, err: chown: /var/tmp/ansible-tmp-1552395550.998827-153325847402774/: Operation not permitted\\nchown: /var/tmp/ansible-tmp-1552395550.998827-153325847402774/AnsiballZ_command.py: Operation not permitted\\n}). For information on working around this, see https://docs.ansible.com/ansible/become.html#becoming-an-unprivileged-user\"\r\n    }**\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    freebsd                    : ok=19   changed=13   unreachable=0    failed=1   \r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1826/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1826/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1825", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1825/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1825/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1825/events", "html_url": "https://github.com/ansible-community/molecule/issues/1825", "id": 419990188, "node_id": "MDU6SXNzdWU0MTk5OTAxODg=", "number": 1825, "title": "No module named 'molecule'", "user": {"login": "surfer190", "id": 3285222, "node_id": "MDQ6VXNlcjMyODUyMjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3285222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/surfer190", "html_url": "https://github.com/surfer190", "followers_url": "https://api.github.com/users/surfer190/followers", "following_url": "https://api.github.com/users/surfer190/following{/other_user}", "gists_url": "https://api.github.com/users/surfer190/gists{/gist_id}", "starred_url": "https://api.github.com/users/surfer190/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/surfer190/subscriptions", "organizations_url": "https://api.github.com/users/surfer190/orgs", "repos_url": "https://api.github.com/users/surfer190/repos", "events_url": "https://api.github.com/users/surfer190/events{/privacy}", "received_events_url": "https://api.github.com/users/surfer190/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-12T13:36:45Z", "updated_at": "2020-06-04T01:08:49Z", "closed_at": "2019-03-12T13:45:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "When going through the [getting started guide test sequence](https://molecule.readthedocs.io/en/latest/getting-started.html#run-test-sequence-commands) the playbook fails with the following error:\r\n\r\n```\r\n$ python3.7 -m molecule create\r\n--> Validating schema /Users/xxx/yyyy/ansible-molecule/test-role/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 create\r\n    \u2514\u2500\u2500 prepare\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\n [WARNING]: Skipping plugin\r\n(/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-\r\npackages/molecule/provisioner/ansible/plugins/filters/molecule_core.py) as it\r\nseems to be invalid: No module named 'molecule'\r\n\r\n    \r\n    PLAY [Create] ******************************************************************\r\n    \r\n    TASK [Log into a Docker registry] **********************************************\r\n    fatal: [localhost]: FAILED! => {\"msg\": \"An unhandled exception occurred while templating '{{ lookup('file', molecule_file) | molecule_from_yaml }}'. Error was a <class 'ansible.errors.AnsibleError'>, original message: template error while templating string: no filter named 'molecule_from_yaml'. String: {{ lookup('file', molecule_file) | molecule_from_yaml }}\"}\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1   \r\n    \r\nERROR: \r\n```\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.6\r\n  config file = None\r\n  configured module search path = ['/Users/stephen/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/ansible\r\n  executable location = /Library/Frameworks/Python.framework/Versions/3.6/bin/ansible\r\n  python version = 3.6.6 (v3.6.6:4cf1f54eb7, Jun 26 2018, 19:50:54) [GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)]\r\nmolecule, version 2.20.0.0a2\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n\r\n# Desired Behavior\r\n\r\n`molecule` should be available\r\n\r\n# Actual Behaviour\r\n\r\nIt fails\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1825/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1825/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1824", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1824/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1824/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1824/events", "html_url": "https://github.com/ansible-community/molecule/issues/1824", "id": 419931567, "node_id": "MDU6SXNzdWU0MTk5MzE1Njc=", "number": 1824, "title": "Error: no such object", "user": {"login": "ivansche", "id": 43747026, "node_id": "MDQ6VXNlcjQzNzQ3MDI2", "avatar_url": "https://avatars.githubusercontent.com/u/43747026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ivansche", "html_url": "https://github.com/ivansche", "followers_url": "https://api.github.com/users/ivansche/followers", "following_url": "https://api.github.com/users/ivansche/following{/other_user}", "gists_url": "https://api.github.com/users/ivansche/gists{/gist_id}", "starred_url": "https://api.github.com/users/ivansche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ivansche/subscriptions", "organizations_url": "https://api.github.com/users/ivansche/orgs", "repos_url": "https://api.github.com/users/ivansche/repos", "events_url": "https://api.github.com/users/ivansche/events{/privacy}", "received_events_url": "https://api.github.com/users/ivansche/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-03-12T11:18:58Z", "updated_at": "2021-11-22T02:57:35Z", "closed_at": "2019-10-27T13:11:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --2.7.5 && molecule --2.19.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI want molecule to create a docker image from a dockerfile to be used for test. \r\n\r\nMy dockerfile is:\r\n \r\n     FROM ubuntu:16.04\r\n\r\n     ENV pip_packages \"ansible pyopenssl yamllint ansible-lint flake8 testinfra molecule\"\r\n\r\n     \\# Install dependencies.\r\n     RUN apt-get update \\\r\n         && apt-get install -y --no-install-recommends \\\r\n            build-essential \\\r\n            python-software-properties \\\r\n            software-properties-common \\\r\n            python-setuptools \\\r\n            python-dev \\\r\n            python-pip \\\r\n            rsyslog systemd systemd-cron sudo \\\r\n         && rm -Rf /var/lib/apt/lists/* \\\r\n         && rm -Rf /usr/share/doc && rm -Rf /usr/share/man \\\r\n         && apt-get clean\r\n     RUN sed -i 's/^\\($ModLoad imklog\\)/#\\1/' /etc/rsyslog.conf\r\n\r\n     \\# Install Ansible via Pip.\r\n     RUN pip install $pip_packages\r\n\r\n     COPY initctl_faker .\r\n     RUN chmod +x initctl_faker && rm -fr /sbin/initctl && ln -s /initctl_faker /sbin/initctl\r\n\r\n     \\# Install Ansible inventory file.\r\n     RUN mkdir -p /etc/ansible\r\n     RUN echo \"[local]\\nlocalhost ansible_connection=local\" > /etc/ansible/hosts\r\n\r\n     EXPOSE 5432\r\n\r\n     VOLUME [\"/sys/fs/cgroup\", \"/tmp\", \"/run\"]\r\n     CMD [\"/lib/systemd/systemd\"]`\r\n\r\nMy molecule.yml file is: \r\n\r\n     dependency:\r\n       name: galaxy\r\n     driver:\r\n       name: docker\r\n     lint:\r\n       name: yamllint\r\n     platforms:\r\n       - name: docker-ubuntu\r\n         image: ubuntu\r\n         image-version: \"16.04\"\r\n         privileged: true\r\n         pull: true\r\n         pid_mode: host\r\n         dockerfile: molecule/default/Dockerfile.js\r\n         exposed_port:\r\n             - \"5432\"\r\n         pre_build_image: false\r\n         command: \"\"\r\n         volumes:\r\n           - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n     ...\r\n\r\n# Actual Behaviour\r\n\r\nmolecule --debug converge gives:\r\n\r\n     -> Scenario: 'default'\r\n     --> Scenario: 'default'\r\n     --> Action: 'converge'\r\n     DEBUG: ANSIBLE ENVIRONMENT\r\n     stgresql/default/plugins/filters:/home/ivan/workspace/ansible-role-postgresql/plugins/filters\r\n     ANSIBLE_LIBRARY: /usr/local/lib/python3.6/dist-packages/molecule/provisioner/ansible/plugins/libraries:/tmp/molecule/ansible-role-postgreDEBUG: MOLECULE ENVIRONMENT\r\n     ---\r\n     MOLECULE_DEBUG: 'True'\r\n     MOLECULE_DEPENDENCY_NAME: galaxy\r\n     MOLECULE_DRIVER_NAME: docker\r\n     MOLECULE_ENV_FILE: /home/ivan/workspace/ansible-role-postgresql/.env.yml\r\n     MOLECULE_EPHEMERAL_DIRECTORY: /tmp/molecule/ansible-role-postgresql/default\r\n     MOLECULE_FILE: /home/ivan/workspace/ansible-role-postgresql/molecule/default/molecule.yml\r\n     MOLECULE_INSTANCE_CONFIG: /tmp/molecule/ansible-role-postgresql/default/instance_config.yml\r\n     MOLECULE_INVENTORY_FILE: /tmp/molecule/ansible-role-postgresql/default/ansible_inventory.yml\r\n     MOLECULE_LINT_NAME: yamllint\r\n     MOLECULE_PROJECT_DIRECTORY: /home/ivan/workspace/ansible-role-postgresql\r\n     MOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\n     MOLECULE_PROVISIONER_NAME: ansible\r\n     MOLECULE_SCENARIO_DIRECTORY: /home/ivan/workspace/ansible-role-postgresql/molecule/default\r\n     MOLECULE_SCENARIO_NAME: default\r\n     MOLECULE_VERIFIER_LINT_NAME: flake8\r\n     MOLECULE_VERIFIER_NAME: testinfra\r\n     MOLECULE_VERIFIER_TEST_DIRECTORY: /home/ivan/workspace/ansible-role-postgresql/molecule/default/tests\r\n\r\n     DEBUG: SHELL REPLAY\r\n     ANSIBLE_CONFIG=/tmp/molecule/ansible-role-postgresql/default/ansible.cfg      \r\n     ANSIBLE_FILTER_PLUGINS=/usr/local/lib/python3.6/dist-packages/molecule/provisioner/ansible/plugins/filters:/tmp/molecule/ansible-role-postgresql/default/plugins/filters:/home/ivan/workspace/ansible-role-postgresql/plugins/filters ANSIBLE_LIBRARY=/usr/local/lib/python3.6/dist-packages/molecule/provisioner/ansible/plugins/libraries:/tmp/molecule/ansible-role-postgresql/default/library:/home/ivan/workspace/ansible-role-postgresql/library ANSIBLE_ROLES_PATH=/tmp/molecule/ansible-role-postgresql/default/roles:/home/ivan/workspace MOLECULE_DEBUG=True \r\n     MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker \r\n     MOLECULE_ENV_FILE=/home/ivan/workspace/ansible-role-postgresql/.env.yml \r\n     MOLECULE_EPHEMERAL_DIRECTORY=/tmp/molecule/ansible-role-postgresql/default       \r\n     MOLECULE_FILE=/home/ivan/workspace/ansible-role-postgresql/molecule/default/molecule.yml \r\n     MOLECULE_INSTANCE_CONFIG=/tmp/molecule/ansible-role-postgresql/default/instance_config.yml \r\n     MOLECULE_INVENTORY_FILE=/tmp/molecule/ansible-role-postgresql/default/ansible_inventory.yml \r\n     MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/home/ivan/workspace/ansible-role-postgresql MOLECULE_PROVISIONER_LINT_NAME=ansible-lint \r\n     MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/home/ivan/workspace/ansible-role-postgresql/molecule/default MOLECULE_SCENARIO_NAME=default \r\n     MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra \r\n     MOLECULE_VERIFIER_TEST_DIRECTORY=/home/ivan/workspace/ansible-role-postgresql/molecule/default/tests\r\n\r\n     DEBUG: COMMAND\r\n     /usr/local/bin/ansible-playbook --skip-tags=molecule-notest,notest --diff --inventory=/tmp/molecule/ansible-role-postgresql/default/ansible_inventory.yml /home/ivan/workspace/ansible-role-postgresql/molecule/default/playbook.yml -vvv\r\n\r\n    ansible-playbook 2.7.5\r\n      config file = /tmp/molecule/ansible-role-postgresql/default/ansible.cfg\r\n      configured module search path = ['/usr/local/lib/python3.6/dist-packages/molecule/provisioner/ansible/plugins/libraries', '/tmp/molecule/ansible-role-postgresql/default/library', '/home/ivan/workspace/ansible-role-postgresql/library']\r\n      ansible python module location = /usr/local/lib/python3.6/dist-packages/ansible\r\n      executable location = /usr/local/bin/ansible-playbook\r\n      python version = 3.6.7 (default, Oct 22 2018, 11:32:17) [GCC 8.2.0]\r\n    Using /tmp/molecule/ansible-role-postgresql/default/ansible.cfg as config file\r\n    /tmp/molecule/ansible-role-postgresql/default/ansible_inventory.yml did not meet host_list requirements, check plugin documentation if this is unexpected\r\n    /tmp/molecule/ansible-role-postgresql/default/ansible_inventory.yml did not meet script requirements, check plugin documentation if this is unexpected\r\n    Parsed /tmp/molecule/ansible-role-postgresql/default/ansible_inventory.yml inventory source with yaml plugin\r\n    \r\n    PLAYBOOK: playbook.yml *********************************************************\r\n    1 plays in /home/ivan/workspace/ansible-role-postgresql/molecule/default/playbook.yml\r\n    \r\n    PLAY [Converge] ****************************************************************\r\n    \r\n    TASK [Gathering Facts] *********************************************************\r\n    task path: /home/ivan/workspace/ansible-role-postgresql/molecule/default/playbook.yml:2\r\n    [WARNING]: unable to retrieve default user from docker container:   Error: No\r\n    such object: docker-ubuntu\r\n\r\n    <docker-ubuntu> ESTABLISH DOCKER CONNECTION FOR USER: ?\r\n    <docker-ubuntu> EXEC ['/usr/bin/docker', b'exec', b'-i', 'docker-ubuntu', '/bin/sh', '-c', \"/bin/sh -c 'echo ~ && sleep 0'\"]\r\n    <docker-ubuntu> EXEC ['/usr/bin/docker', b'exec', b'-i', 'docker-ubuntu', '/bin/sh', '-c', '/bin/sh -c \\'echo \"`pwd`\" && sleep 0\\'']\r\n    <docker-ubuntu> EXEC ['/usr/bin/docker', b'exec', b'-i', 'docker-ubuntu', '/bin/sh', '-c', '/bin/sh -c \\'( umask 77 && mkdir -p \"` echo ~/.ansible/tmp/ansible-tmp-1552389445.407965-269972299601421 `\" && echo ansible-tmp-1552389445.407965-269972299601421=\"` echo ~/.ansible/tmp/ansible-tmp-1552389445.407965-269972299601421 `\" ) && sleep 0\\'']\r\n    fatal: [docker-ubuntu]: UNREACHABLE! => {\r\n        \"changed\": false,\r\n        \"msg\": \"Authentication or permission failure. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote tmp path in ansible.cfg to a path rooted in \\\"/tmp\\\". Failed command was: ( umask 77 && mkdir -p \\\"` echo ~/.ansible/tmp/ansible-tmp-1552389445.407965-269972299601421 `\\\" && echo ansible-tmp-1552389445.407965-269972299601421=\\\"` echo ~/.ansible/tmp/ansible-tmp-1552389445.407965-269972299601421 `\\\" ), exited with result 1\",\r\n        \"unreachable\": true\r\n    }\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    docker-ubuntu              : ok=0    changed=0    unreachable=1    failed=0\r\n    \r\n    \r\n     ERROR:`\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1824/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1824/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1823", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1823/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1823/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1823/events", "html_url": "https://github.com/ansible-community/molecule/pull/1823", "id": 419672878, "node_id": "MDExOlB1bGxSZXF1ZXN0MjYwMTI2ODA5", "number": 1823, "title": "Avoid python libselinux bindings being hidden by tox", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-03-11T20:39:32Z", "updated_at": "2019-03-25T10:39:14Z", "closed_at": "2019-03-14T17:12:25Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1823", "html_url": "https://github.com/ansible-community/molecule/pull/1823", "diff_url": "https://github.com/ansible-community/molecule/pull/1823.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1823.patch", "merged_at": "2019-03-14T17:12:25Z"}, "body": "Adds libselinux python extensions to the default Dockerfile template\r\nused by molecule in order to avoid failure to build it on selinux\r\nsystems.\r\n\r\nFixes: https://github.com/ansible/molecule/issues/1724\r\nSigned-off-by: Sorin Sbarnea <ssbarnea@redhat.com>\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1823/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1823/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1821", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1821/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1821/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1821/events", "html_url": "https://github.com/ansible-community/molecule/issues/1821", "id": 419608423, "node_id": "MDU6SXNzdWU0MTk2MDg0MjM=", "number": 1821, "title": "molecule testing should skip any drivers that are not configured by default", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-11T18:01:40Z", "updated_at": "2019-04-02T10:44:54Z", "closed_at": "2019-04-02T10:44:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently running functional testing on a machine takes forever even if the user has only docker configured. \r\n\r\nWe need to assure that all testing drivers that are not configured (azure, lxc, openstack,ec2,...) are skipped almost instantly by default.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1821/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1821/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1819", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1819/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1819/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1819/events", "html_url": "https://github.com/ansible-community/molecule/issues/1819", "id": 419591959, "node_id": "MDU6SXNzdWU0MTk1OTE5NTk=", "number": 1819, "title": "Tests failing due to network unavailability", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1205135639, "node_id": "MDU6TGFiZWwxMjA1MTM1NjM5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/test", "name": "test", "color": "0e8a16", "default": false, "description": "Improvement to quality assurance: CI/CD, testing, building"}], "state": "closed", "locked": false, "assignee": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-03-11T17:26:14Z", "updated_at": "2019-04-02T09:27:04Z", "closed_at": "2019-04-02T09:27:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n\r\nTo reproduce this, try running:\r\n```\r\n # wget -vv https://github.com/yatesr/ansible-timezone/archive/1.1.0.tar.gz\r\nResolving github.com (github.com)... 192.30.253.113, 192.30.253.112\r\nConnecting to github.com (github.com)|192.30.253.113|:443... failed: No route to host.\r\nConnecting to github.com (github.com)|192.30.253.112|:443... failed: No route to host.\r\n```\r\n \r\nWhile this worked from some machines is seems to fail from others, or it may work from the browser but from fromthe CLI.\r\n\r\nAt this moment this is needed during testing but we need to find a way to avoid this issue.\r\n```\r\nMOLECULE_DEBUG=1 tox -e functional -- -k 'test_command_check[driver/docker-docker-default]'\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1819/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1819/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1818", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1818/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1818/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1818/events", "html_url": "https://github.com/ansible-community/molecule/issues/1818", "id": 419432762, "node_id": "MDU6SXNzdWU0MTk0MzI3NjI=", "number": 1818, "title": "Quay tags: stable/latest/pre-release etc.", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-03-11T11:59:40Z", "updated_at": "2019-03-20T20:03:32Z", "closed_at": "2019-03-20T20:03:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Please see https://quay.io/repository/ansible/molecule?tab=tags.\r\n\r\nOur `latest` tag current points to the latest build IIUC. See https://github.com/ansible/molecule/issues/1813#issuecomment-471504129.\r\n\r\nI'm unfamiliar with conventions for the `latest` tag but should it be latest 'stable', and point to v2.19?\r\n\r\nSee https://github.com/ansible/molecule/issues/1813#issuecomment-471476378.\r\n\r\nMy intuition is:\r\n  * stable -> v2.19 (or latest stable release)\r\n  * vX.Y -> pre-release versions for pre-release hacking / feedback / early testing\r\n  * latest -> convenience for latest build (and potentially dangerous to target)\r\n\r\nI'm easy and just want to agree on this so we can be clear what tag is what.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1818/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1818/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1813", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1813/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1813/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1813/events", "html_url": "https://github.com/ansible-community/molecule/issues/1813", "id": 418809646, "node_id": "MDU6SXNzdWU0MTg4MDk2NDY=", "number": 1813, "title": "REGRESSION 2.19 -> 2.20 Docker image fails with \"Failed to import docker or docker-py - No module named docker\"", "user": {"login": "alainchiasson", "id": 1068561, "node_id": "MDQ6VXNlcjEwNjg1NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/1068561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alainchiasson", "html_url": "https://github.com/alainchiasson", "followers_url": "https://api.github.com/users/alainchiasson/followers", "following_url": "https://api.github.com/users/alainchiasson/following{/other_user}", "gists_url": "https://api.github.com/users/alainchiasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/alainchiasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alainchiasson/subscriptions", "organizations_url": "https://api.github.com/users/alainchiasson/orgs", "repos_url": "https://api.github.com/users/alainchiasson/repos", "events_url": "https://api.github.com/users/alainchiasson/events{/privacy}", "received_events_url": "https://api.github.com/users/alainchiasson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2019-03-08T14:29:12Z", "updated_at": "2019-03-18T10:55:29Z", "closed_at": "2019-03-18T10:55:29Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\ndocker run --rm -it -v \"$(pwd)\":/root -v /var/run/docker.sock:/var/run/docker.sock -w /root quay.io/ansible/molecule:latest sudo molecule --version\r\nmolecule, version 2.19.0\r\n\r\ndocker run --rm -it -v \"$(pwd)\":/root -v /var/run/docker.sock:/var/run/docker.sock -w /root quay.io/ansible/molecule:latest sudo ansible --version\r\nansible 2.7.8\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.15 (default, Jan 24 2019, 16:32:39) [GCC 8.2.0]\r\n\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- NONE: using docker image \r\n\r\nAnsible installation method (one of):\r\n\r\n- NONE: using docker image \r\n\r\ndocker images | grep molecule\r\n\r\n```\r\nquay.io/ansible/molecule   latest              76c463a83726        3 days ago          516MB\r\nmolecule_local/centos      7                   d5efb4c1540b        3 days ago          226MB\r\nquay.io/ansible/molecule   2.19                0a943e169bf0        4 months ago        580MB\r\n````\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nOn repo https://github.com/alainchiasson/role-test-duplicates.git\r\n\r\nThe following works : \r\n\r\n```\r\ndocker run --rm -it -v \"$(pwd)\":/root -v /var/run/docker.sock:/var/run/docker.sock -w /root quay.io/ansible/molecule:2.19 sudo molecule test\r\n```\r\n\r\n\r\n\r\nPlease give some details of the feature being requested or what\r\nshould happen if providing a bug report.\r\n\r\n# Actual Behaviour\r\n\r\nOn repo https://github.com/alainchiasson/role-test-duplicates.git\r\n\r\nThe following fails:\r\n```\r\ndocker run --rm -it -v \"$(pwd)\":/root -v /var/run/docker.sock:/var/run/docker.sock -w /root quay.io/ansible/molecule:latest sudo molecule test\r\n```\r\nRunning from a macbook pro. - debug of prepare. \r\n\r\n```\r\nMBP-de-Alain:role-test-duplicates alain$ docker run --rm -it -v \"$(pwd)\":/root -v /var/run/docker.sock:/var/run/docker.sock -w /root quay.io/ansible/molecule:latest sudo molecule --debug create\r\n--> Validating schema /root/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 create\r\n    \u2514\u2500\u2500 prepare\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /tmp/molecule/root/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/filters:/tmp/molecule/root/default/plugins/filters:/root/plugins/filters\r\nANSIBLE_LIBRARY: /usr/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/tmp/molecule/root/default/library:/root/library\r\nANSIBLE_ROLES_PATH: /tmp/molecule/root/default/roles:/\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_ENV_FILE: /root/.env.yml\r\nMOLECULE_EPHEMERAL_DIRECTORY: /tmp/molecule/root/default\r\nMOLECULE_FILE: /root/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /tmp/molecule/root/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /tmp/molecule/root/default/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROJECT_DIRECTORY: /root\r\nMOLECULE_PROVISIONER_LINT_NAME: ansible-lint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /root/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_VERIFIER_LINT_NAME: flake8\r\nMOLECULE_VERIFIER_NAME: testinfra\r\nMOLECULE_VERIFIER_TEST_DIRECTORY: /root/molecule/default/tests\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/tmp/molecule/root/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/filters:/tmp/molecule/root/default/plugins/filters:/root/plugins/filters ANSIBLE_LIBRARY=/usr/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/tmp/molecule/root/default/library:/root/library ANSIBLE_ROLES_PATH=/tmp/molecule/root/default/roles:/ MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_ENV_FILE=/root/.env.yml MOLECULE_EPHEMERAL_DIRECTORY=/tmp/molecule/root/default MOLECULE_FILE=/root/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/tmp/molecule/root/default/instance_config.yml MOLECULE_INVENTORY_FILE=/tmp/molecule/root/default/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROJECT_DIRECTORY=/root MOLECULE_PROVISIONER_LINT_NAME=ansible-lint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/root/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_VERIFIER_LINT_NAME=flake8 MOLECULE_VERIFIER_NAME=testinfra MOLECULE_VERIFIER_TEST_DIRECTORY=/root/molecule/default/tests\r\n\r\nDEBUG: COMMAND\r\n/usr/bin/ansible-playbook --skip-tags=molecule-notest,notest --inventory=/tmp/molecule/root/default/ansible_inventory.yml --diff /usr/lib/python2.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml -vvv\r\n\r\n    ansible-playbook 2.7.8\r\n      config file = /tmp/molecule/root/default/ansible.cfg\r\n      configured module search path = [u'/usr/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries', u'/tmp/molecule/root/default/library', u'/root/library']\r\n      ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n      executable location = /usr/bin/ansible-playbook\r\n      python version = 2.7.15 (default, Jan 24 2019, 16:32:39) [GCC 8.2.0]\r\n    Using /tmp/molecule/root/default/ansible.cfg as config file\r\n    /tmp/molecule/root/default/ansible_inventory.yml did not meet host_list requirements, check plugin documentation if this is unexpected\r\n    /tmp/molecule/root/default/ansible_inventory.yml did not meet script requirements, check plugin documentation if this is unexpected\r\n    Parsed /tmp/molecule/root/default/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: create.yml ***********************************************************\r\n    1 plays in /usr/lib/python2.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml\r\n\r\n    PLAY [Create] ******************************************************************\r\n    META: ran handlers\r\n\r\n    TASK [Log into a Docker registry] **********************************************\r\n    task path: /usr/lib/python2.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:8\r\n    skipping: [localhost] => (item={'image': u'centos:7', 'name': u'instance'})  => {\r\n        \"changed\": false,\r\n        \"item\": {\r\n            \"image\": \"centos:7\",\r\n            \"name\": \"instance\"\r\n        },\r\n        \"skip_reason\": \"Conditional result was False\"\r\n    }\r\n\r\n    TASK [Create Dockerfiles from image names] *************************************\r\n    task path: /usr/lib/python2.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:21\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818 `\" && echo ansible-tmp-1552055034.91-540484935818=\"` echo /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818 `\" ) && sleep 0'\r\n    Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-70NMJeb/tmp9_ABCY TO /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/AnsiballZ_stat.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/ /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/AnsiballZ_stat.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/AnsiballZ_stat.py && sleep 0'\r\n    Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/file.py\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-70NMJeb/tmpNJYzkZ TO /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/AnsiballZ_file.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/ /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/AnsiballZ_file.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/AnsiballZ_file.py && sleep 0'\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-70NMJeb/tmpYHCJgR/Dockerfile.j2 TO /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/source\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/ /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/source && sleep 0'\r\n    Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/copy.py\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-70NMJeb/tmpcZm_BG TO /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/AnsiballZ_copy.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/ /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/AnsiballZ_copy.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/AnsiballZ_copy.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/ > /dev/null 2>&1 && sleep 0'\r\n    --- before\r\n    +++ after: /root/.ansible/tmp/ansible-local-70NMJeb/tmpYHCJgR/Dockerfile.j2\r\n    @@ -0,0 +1,10 @@\r\n    +# Molecule managed\r\n    +\r\n    +FROM centos:7\r\n    +\r\n    +RUN if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates && apt-get clean; \\\r\n    +    elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install python sudo python-devel python2-dnf bash && dnf clean all; \\\r\n    +    elif [ $(command -v yum) ]; then yum makecache fast && yum install -y python sudo yum-plugin-ovl bash && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all; \\\r\n    +    elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash python-xml && zypper clean -a; \\\r\n    +    elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates; \\\r\n    +    elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates && xbps-remove -O; fi\r\n\r\n    changed: [localhost] => (item={'image': u'centos:7', 'name': u'instance'}) => {\r\n        \"changed\": true,\r\n        \"checksum\": \"40a922dca6c7a93024ac1ab412987783252b69c2\",\r\n        \"dest\": \"/tmp/molecule/root/default/Dockerfile_centos_7\",\r\n        \"diff\": [\r\n            {\r\n                \"after\": \"# Molecule managed\\n\\nFROM centos:7\\n\\nRUN if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates && apt-get clean; \\\\\\n    elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install python sudo python-devel python2-dnf bash && dnf clean all; \\\\\\n    elif [ $(command -v yum) ]; then yum makecache fast && yum install -y python sudo yum-plugin-ovl bash && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all; \\\\\\n    elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash python-xml && zypper clean -a; \\\\\\n    elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates; \\\\\\n    elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates && xbps-remove -O; fi\\n\",\r\n                \"after_header\": \"/root/.ansible/tmp/ansible-local-70NMJeb/tmpYHCJgR/Dockerfile.j2\",\r\n                \"before\": \"\"\r\n            }\r\n        ],\r\n        \"gid\": 0,\r\n        \"group\": \"root\",\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"_original_basename\": \"Dockerfile.j2\",\r\n                \"attributes\": null,\r\n                \"backup\": false,\r\n                \"checksum\": \"40a922dca6c7a93024ac1ab412987783252b69c2\",\r\n                \"content\": null,\r\n                \"delimiter\": null,\r\n                \"dest\": \"/tmp/molecule/root/default/Dockerfile_centos_7\",\r\n                \"directory_mode\": null,\r\n                \"follow\": false,\r\n                \"force\": true,\r\n                \"group\": null,\r\n                \"local_follow\": null,\r\n                \"mode\": null,\r\n                \"owner\": null,\r\n                \"regexp\": null,\r\n                \"remote_src\": null,\r\n                \"selevel\": null,\r\n                \"serole\": null,\r\n                \"setype\": null,\r\n                \"seuser\": null,\r\n                \"src\": \"/root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/source\",\r\n                \"unsafe_writes\": null,\r\n                \"validate\": null\r\n            }\r\n        },\r\n        \"item\": {\r\n            \"image\": \"centos:7\",\r\n            \"name\": \"instance\"\r\n        },\r\n        \"md5sum\": \"6e0af0361f5bc81091582444d1c7fa34\",\r\n        \"mode\": \"0644\",\r\n        \"owner\": \"root\",\r\n        \"size\": 850,\r\n        \"src\": \"/root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/source\",\r\n        \"state\": \"file\",\r\n        \"uid\": 0\r\n    }\r\n\r\n    TASK [Discover local Docker images] ********************************************\r\n    task path: /usr/lib/python2.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:29\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /root/.ansible/tmp/ansible-tmp-1552055036.04-63603356363387 `\" && echo ansible-tmp-1552055036.04-63603356363387=\"` echo /root/.ansible/tmp/ansible-tmp-1552055036.04-63603356363387 `\" ) && sleep 0'\r\n    Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/docker/docker_image_facts.py\r\n    <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-70NMJeb/tmpYNWRDR TO /root/.ansible/tmp/ansible-tmp-1552055036.04-63603356363387/AnsiballZ_docker_image_facts.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1552055036.04-63603356363387/ /root/.ansible/tmp/ansible-tmp-1552055036.04-63603356363387/AnsiballZ_docker_image_facts.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1552055036.04-63603356363387/AnsiballZ_docker_image_facts.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1552055036.04-63603356363387/ > /dev/null 2>&1 && sleep 0'\r\n    The full traceback is:\r\n    WARNING: The below traceback may *not* be related to the actual failure.\r\n      File \"/tmp/ansible_docker_image_facts_payload_ZdQCDR/__main__.py\", line 161, in <module>\r\n        from docker import utils\r\n\r\n    failed: [localhost] (item={'_ansible_parsed': True, u'md5sum': u'6e0af0361f5bc81091582444d1c7fa34', u'uid': 0, u'dest': u'/tmp/molecule/root/default/Dockerfile_centos_7', '_ansible_item_result': True, u'owner': u'root', 'diff': [{'after': u\"# Molecule managed\\n\\nFROM centos:7\\n\\nRUN if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates && apt-get clean; \\\\\\n    elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install python sudo python-devel python2-dnf bash && dnf clean all; \\\\\\n    elif [ $(command -v yum) ]; then yum makecache fast && yum install -y python sudo yum-plugin-ovl bash && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all; \\\\\\n    elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash python-xml && zypper clean -a; \\\\\\n    elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates; \\\\\\n    elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates && xbps-remove -O; fi\\n\", 'after_header': u'/root/.ansible/tmp/ansible-local-70NMJeb/tmpYHCJgR/Dockerfile.j2', 'before': u''}], '_ansible_no_log': False, u'src': u'/root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/source', u'group': u'root', '_ansible_item_label': {'image': u'centos:7', 'name': u'instance'}, 'item': {'image': u'centos:7', 'name': u'instance'}, u'checksum': u'40a922dca6c7a93024ac1ab412987783252b69c2', u'changed': True, 'failed': False, u'state': u'file', u'gid': 0, u'mode': u'0644', u'invocation': {u'module_args': {u'directory_mode': None, u'force': True, u'remote_src': None, u'dest': u'/tmp/molecule/root/default/Dockerfile_centos_7', u'selevel': None, u'_original_basename': u'Dockerfile.j2', u'delimiter': None, u'regexp': None, u'owner': None, u'follow': False, u'validate': None, u'local_follow': None, u'src': u'/root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/source', u'group': None, u'unsafe_writes': None, u'checksum': u'40a922dca6c7a93024ac1ab412987783252b69c2', u'seuser': None, u'serole': None, u'content': None, u'setype': None, u'mode': None, u'attributes': None, u'backup': False}}, u'size': 850, '_ansible_ignore_errors': None}) => {\r\n        \"changed\": false,\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"api_version\": \"auto\",\r\n                \"cacert_path\": null,\r\n                \"cert_path\": null,\r\n                \"debug\": false,\r\n                \"docker_host\": \"unix://var/run/docker.sock\",\r\n                \"key_path\": null,\r\n                \"name\": [\r\n                    \"molecule_local/instance\"\r\n                ],\r\n                \"ssl_version\": null,\r\n                \"timeout\": 60,\r\n                \"tls\": false,\r\n                \"tls_hostname\": \"localhost\",\r\n                \"tls_verify\": false\r\n            }\r\n        },\r\n        \"item\": {\r\n            \"changed\": true,\r\n            \"checksum\": \"40a922dca6c7a93024ac1ab412987783252b69c2\",\r\n            \"dest\": \"/tmp/molecule/root/default/Dockerfile_centos_7\",\r\n            \"diff\": [\r\n                {\r\n                    \"after\": \"# Molecule managed\\n\\nFROM centos:7\\n\\nRUN if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates && apt-get clean; \\\\\\n    elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install python sudo python-devel python2-dnf bash && dnf clean all; \\\\\\n    elif [ $(command -v yum) ]; then yum makecache fast && yum install -y python sudo yum-plugin-ovl bash && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all; \\\\\\n    elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash python-xml && zypper clean -a; \\\\\\n    elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates; \\\\\\n    elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates && xbps-remove -O; fi\\n\",\r\n                    \"after_header\": \"/root/.ansible/tmp/ansible-local-70NMJeb/tmpYHCJgR/Dockerfile.j2\",\r\n                    \"before\": \"\"\r\n                }\r\n            ],\r\n            \"failed\": false,\r\n            \"gid\": 0,\r\n            \"group\": \"root\",\r\n            \"invocation\": {\r\n                \"module_args\": {\r\n                    \"_original_basename\": \"Dockerfile.j2\",\r\n                    \"attributes\": null,\r\n                    \"backup\": false,\r\n                    \"checksum\": \"40a922dca6c7a93024ac1ab412987783252b69c2\",\r\n                    \"content\": null,\r\n                    \"delimiter\": null,\r\n                    \"dest\": \"/tmp/molecule/root/default/Dockerfile_centos_7\",\r\n                    \"directory_mode\": null,\r\n                    \"follow\": false,\r\n                    \"force\": true,\r\n                    \"group\": null,\r\n                    \"local_follow\": null,\r\n                    \"mode\": null,\r\n                    \"owner\": null,\r\n                    \"regexp\": null,\r\n                    \"remote_src\": null,\r\n                    \"selevel\": null,\r\n                    \"serole\": null,\r\n                    \"setype\": null,\r\n                    \"seuser\": null,\r\n                    \"src\": \"/root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/source\",\r\n                    \"unsafe_writes\": null,\r\n                    \"validate\": null\r\n                }\r\n            },\r\n            \"item\": {\r\n                \"image\": \"centos:7\",\r\n                \"name\": \"instance\"\r\n            },\r\n            \"md5sum\": \"6e0af0361f5bc81091582444d1c7fa34\",\r\n            \"mode\": \"0644\",\r\n            \"owner\": \"root\",\r\n            \"size\": 850,\r\n            \"src\": \"/root/.ansible/tmp/ansible-tmp-1552055034.91-540484935818/source\",\r\n            \"state\": \"file\",\r\n            \"uid\": 0\r\n        },\r\n        \"msg\": \"Failed to import docker or docker-py - No module named docker. Try `pip install docker` or `pip install docker-py` (Python 2.6)\"\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=1    changed=1    unreachable=0    failed=1\r\n\r\n\r\n```\r\n\r\n\r\nThis may also be relavent - pip list in both images. \r\n\r\n### quay.io/ansible/molecule:latest sudo pip list\r\n```\r\nMBP-de-Alain:role-test-duplicates alain$ docker run --rm -it -v \"$(pwd)\":/root -v /var/run/docker.sock:/var/run/docker.sock -w /root quay.io/ansible/molecule:latest sudo pip list\r\nDEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won't be maintained after that date. A future version of pip will drop support for Python 2.7.\r\nPackage                       Version\r\n----------------------------- -------------------\r\nansible                       2.7.8\r\nansible-lint                  3.4.23\r\nanyconfig                     0.9.7\r\narrow                         0.13.1\r\nasn1crypto                    0.24.0\r\natomicwrites                  1.3.0\r\nattrs                         19.1.0\r\nbackports.functools-lru-cache 1.5\r\nbcrypt                        3.1.6\r\nbinaryornot                   0.4.4\r\nCerberus                      1.2\r\ncertifi                       2018.11.29\r\ncffi                          1.12.2\r\nchardet                       3.0.4\r\nclick                         6.7\r\nclick-completion              0.3.1\r\ncolorama                      0.3.9\r\nconfigparser                  3.7.3\r\ncookiecutter                  1.6.0\r\ncryptography                  2.6.1\r\nenum34                        1.1.6\r\nfasteners                     0.14.1\r\nflake8                        3.5.0\r\nfuncsigs                      1.0.2\r\nfuture                        0.17.1\r\ngit-url-parse                 1.2.0\r\nidna                          2.8\r\nipaddress                     1.0.22\r\nJinja2                        2.10\r\njinja2-time                   0.2.0\r\nMarkupSafe                    1.1.1\r\nmccabe                        0.6.1\r\nmolecule                      2.19.0\r\nmonotonic                     1.5\r\nmore-itertools                5.0.0\r\nparamiko                      2.4.2\r\npathlib2                      2.3.3\r\npathspec                      0.5.9\r\npbr                           4.1.0\r\npexpect                       4.6.0\r\npip                           19.0.3\r\npluggy                        0.9.0\r\npoyo                          0.4.2\r\npsutil                        5.4.6\r\nptyprocess                    0.6.0\r\npy                            1.8.0\r\npyasn1                        0.4.5\r\npycodestyle                   2.3.1\r\npycparser                     2.19\r\npyflakes                      1.6.0\r\nPyNaCl                        1.3.0\r\npytest                        4.3.0\r\npython-dateutil               2.8.0\r\npython-gilt                   1.2.1\r\nPyYAML                        3.13\r\nrequests                      2.21.0\r\nscandir                       1.9.0\r\nsetuptools                    40.6.3.post20190116\r\nsh                            1.12.14\r\nsix                           1.11.0\r\ntabulate                      0.8.2\r\ntestinfra                     1.16.0\r\ntree-format                   0.1.2\r\nurllib3                       1.24.1\r\nvirtualenv                    16.4.3\r\nwhichcraft                    0.5.2\r\nyamllint                      1.11.1\r\n```\r\n\r\n### quay.io/ansible/molecule:2.19 sudo pip list\r\n```\r\nMBP-de-Alain:role-test-duplicates alain$ docker run --rm -it -v \"$(pwd)\":/root -v /var/run/docker.sock:/var/run/docker.sock -w /root quay.io/ansible/molecule:2.19 sudo pip list\r\nPackage                               Version\r\n------------------------------------- -------------------\r\nadal                                  1.2.0\r\nansible                               2.7.1\r\nansible-lint                          3.4.23\r\nanyconfig                             0.9.7\r\napplicationinsights                   0.11.7\r\nargcomplete                           1.9.4\r\narrow                                 0.12.1\r\nasn1crypto                            0.24.0\r\natomicwrites                          1.2.1\r\nattrs                                 18.2.0\r\nazure-batch                           5.1.0\r\nazure-cli                             2.0.49\r\nazure-cli-acr                         2.1.7\r\nazure-cli-acs                         2.3.9\r\nazure-cli-advisor                     0.6.0\r\nazure-cli-ams                         0.2.4\r\nazure-cli-appservice                  0.2.5\r\nazure-cli-backup                      1.2.1\r\nazure-cli-batch                       3.4.1\r\nazure-cli-batchai                     0.4.4\r\nazure-cli-billing                     0.2.0\r\nazure-cli-botservice                  0.1.1\r\nazure-cli-cdn                         0.2.0\r\nazure-cli-cloud                       2.1.0\r\nazure-cli-cognitiveservices           0.2.3\r\nazure-cli-command-modules-nspkg       2.0.2\r\nazure-cli-configure                   2.0.18\r\nazure-cli-consumption                 0.4.0\r\nazure-cli-container                   0.3.7\r\nazure-cli-core                        2.0.35\r\nazure-cli-cosmosdb                    0.2.2\r\nazure-cli-dla                         0.2.3\r\nazure-cli-dls                         0.1.4\r\nazure-cli-dms                         0.1.1\r\nazure-cli-eventgrid                   0.2.0\r\nazure-cli-eventhubs                   0.3.0\r\nazure-cli-extension                   0.2.2\r\nazure-cli-feedback                    2.1.4\r\nazure-cli-find                        0.2.12\r\nazure-cli-hdinsight                   0.1.0\r\nazure-cli-interactive                 0.3.31\r\nazure-cli-iot                         0.3.3\r\nazure-cli-iotcentral                  0.1.3\r\nazure-cli-keyvault                    2.2.5\r\nazure-cli-lab                         0.1.2\r\nazure-cli-maps                        0.3.2\r\nazure-cli-monitor                     0.2.5\r\nazure-cli-network                     2.2.7\r\nazure-cli-nspkg                       3.0.2\r\nazure-cli-policyinsights              0.1.0\r\nazure-cli-profile                     2.1.1\r\nazure-cli-rdbms                       0.3.2\r\nazure-cli-redis                       0.3.2\r\nazure-cli-relay                       0.1.2\r\nazure-cli-reservations                0.4.0\r\nazure-cli-resource                    2.1.5\r\nazure-cli-role                        2.1.8\r\nazure-cli-search                      0.1.1\r\nazure-cli-servicebus                  0.3.1\r\nazure-cli-servicefabric               0.1.6\r\nazure-cli-signalr                     1.0.0\r\nazure-cli-sql                         2.1.5\r\nazure-cli-storage                     2.2.3\r\nazure-cli-vm                          2.2.6\r\nazure-common                          1.1.11\r\nazure-datalake-store                  0.0.34\r\nazure-graphrbac                       0.40.0\r\nazure-keyvault                        1.0.0a1\r\nazure-mgmt-advisor                    1.0.1\r\nazure-mgmt-authorization              0.50.0\r\nazure-mgmt-batch                      4.1.0\r\nazure-mgmt-batchai                    2.0.0\r\nazure-mgmt-billing                    0.2.0\r\nazure-mgmt-botservice                 0.1.0\r\nazure-mgmt-cdn                        3.0.0\r\nazure-mgmt-cognitiveservices          3.0.0\r\nazure-mgmt-compute                    2.1.0\r\nazure-mgmt-consumption                2.0.0\r\nazure-mgmt-containerinstance          0.4.0\r\nazure-mgmt-containerregistry          2.0.0\r\nazure-mgmt-containerservice           3.0.1\r\nazure-mgmt-cosmosdb                   0.5.0\r\nazure-mgmt-datalake-analytics         0.2.0\r\nazure-mgmt-datalake-nspkg             3.0.1\r\nazure-mgmt-datalake-store             0.5.0\r\nazure-mgmt-datamigration              0.1.0\r\nazure-mgmt-devtestlabs                2.2.0\r\nazure-mgmt-dns                        1.2.0\r\nazure-mgmt-eventgrid                  0.4.0\r\nazure-mgmt-eventhub                   2.1.0\r\nazure-mgmt-hdinsight                  0.1.0\r\nazure-mgmt-iotcentral                 0.2.0\r\nazure-mgmt-iothub                     0.6.0\r\nazure-mgmt-iothubprovisioningservices 0.2.0\r\nazure-mgmt-keyvault                   0.40.0\r\nazure-mgmt-loganalytics               0.2.0\r\nazure-mgmt-managementgroups           0.1.0\r\nazure-mgmt-maps                       0.1.0\r\nazure-mgmt-marketplaceordering        0.1.0\r\nazure-mgmt-media                      1.0.0rc1\r\nazure-mgmt-monitor                    0.5.2\r\nazure-mgmt-msi                        0.2.0\r\nazure-mgmt-network                    1.7.1\r\nazure-mgmt-nspkg                      2.0.0\r\nazure-mgmt-policyinsights             0.1.0\r\nazure-mgmt-rdbms                      1.2.0\r\nazure-mgmt-recoveryservices           0.1.0\r\nazure-mgmt-recoveryservicesbackup     0.1.1\r\nazure-mgmt-redis                      5.0.0\r\nazure-mgmt-relay                      0.1.0\r\nazure-mgmt-reservations               0.3.0\r\nazure-mgmt-resource                   1.2.2\r\nazure-mgmt-search                     2.0.0\r\nazure-mgmt-servicebus                 0.5.2\r\nazure-mgmt-servicefabric              0.2.0\r\nazure-mgmt-signalr                    0.1.1\r\nazure-mgmt-sql                        0.7.1\r\nazure-mgmt-storage                    1.5.0\r\nazure-mgmt-trafficmanager             0.50.0\r\nazure-mgmt-web                        0.32.0\r\nazure-multiapi-storage                0.2.2\r\nazure-nspkg                           2.0.0\r\nazure-storage                         0.35.1\r\nazure-storage-blob                    1.3.1\r\nazure-storage-common                  1.3.0\r\nazure-storage-nspkg                   3.0.0\r\nbackports.functools-lru-cache         1.5\r\nbackports.ssl-match-hostname          3.5.0.1\r\nbcrypt                                3.1.4\r\nbinaryornot                           0.4.4\r\nCerberus                              1.2\r\ncertifi                               2018.10.15\r\ncffi                                  1.11.5\r\nchardet                               3.0.4\r\nclick                                 6.7\r\nclick-completion                      0.3.1\r\ncolorama                              0.3.9\r\nconfigparser                          3.5.0\r\ncookiecutter                          1.6.0\r\ncryptography                          2.3.1\r\ndocker                                3.5.1\r\ndocker-pycreds                        0.3.0\r\nenum34                                1.1.6\r\nfasteners                             0.14.1\r\nflake8                                3.5.0\r\nfuncsigs                              1.0.2\r\nfuture                                0.17.0\r\nfutures                               3.2.0\r\ngit-url-parse                         1.1.0\r\nhumanfriendly                         4.17\r\nidna                                  2.7\r\nipaddress                             1.0.22\r\nisodate                               0.6.0\r\nJinja2                                2.10\r\njinja2-time                           0.2.0\r\njmespath                              0.9.3\r\nknack                                 0.3.3\r\nMarkupSafe                            1.0\r\nmccabe                                0.6.1\r\nmock                                  2.0.0\r\nmolecule                              2.19.0\r\nmonotonic                             1.5\r\nmore-itertools                        4.3.0\r\nmsrest                                0.4.29\r\nmsrestazure                           0.5.0\r\nntlm-auth                             1.2.0\r\noauthlib                              2.1.0\r\npackaging                             18.0\r\nparamiko                              2.4.2\r\npathlib2                              2.3.2\r\npathspec                              0.5.9\r\npbr                                   4.1.0\r\npexpect                               4.6.0\r\npip                                   18.1\r\npluggy                                0.8.0\r\npoyo                                  0.4.2\r\nprompt-toolkit                        1.0.15\r\npsutil                                5.4.6\r\nptyprocess                            0.6.0\r\npy                                    1.7.0\r\npyasn1                                0.4.4\r\npycodestyle                           2.3.1\r\npycparser                             2.19\r\npydocumentdb                          2.3.3\r\npyflakes                              1.6.0\r\nPygments                              2.2.0\r\nPyJWT                                 1.6.4\r\nPyNaCl                                1.3.0\r\npyOpenSSL                             18.0.0\r\npyparsing                             2.2.2\r\npytest                                3.9.3\r\npython-dateutil                       2.7.5\r\npython-gilt                           1.2.1\r\npytz                                  2018.7\r\npywinrm                               0.3.0\r\nPyYAML                                3.13\r\nrequests                              2.20.0\r\nrequests-ntlm                         1.1.0\r\nrequests-oauthlib                     1.0.0\r\nscandir                               1.9.0\r\nscp                                   0.12.1\r\nsetuptools                            39.1.0.post20180508\r\nsh                                    1.12.14\r\nsix                                   1.11.0\r\nsshtunnel                             0.1.4\r\ntabulate                              0.8.2\r\ntestinfra                             1.16.0\r\ntree-format                           0.1.2\r\nurllib3                               1.24\r\nvirtualenv                            16.0.0\r\nvsts-cd-manager                       1.0.2\r\nwcwidth                               0.1.7\r\nwebsocket-client                      0.53.0\r\nwheel                                 0.30.0\r\nwhichcraft                            0.5.2\r\nWhoosh                                2.7.4\r\nxmltodict                             0.11.0\r\nyamllint                              1.11.1\r\nYou are using pip version 18.1, however version 19.0.3 is available.\r\nYou should consider upgrading via the 'pip install --upgrade pip' command.\r\nMBP-de-Alain:role-test-duplicates alain$\r\n```\r\n\r\n\r\ngundalow: minor edits to add formatting", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1813/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1813/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1812", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1812/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1812/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1812/events", "html_url": "https://github.com/ansible-community/molecule/issues/1812", "id": 418438650, "node_id": "MDU6SXNzdWU0MTg0Mzg2NTA=", "number": 1812, "title": "Docs should not state that we support Ansible 2.4 which is EOL", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-03-07T17:53:18Z", "updated_at": "2019-03-13T16:24:10Z", "closed_at": "2019-03-13T16:24:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nN/A\r\n\r\n# Desired Behavior\r\n\r\nDocs should say we support Ansible>=2.5\r\n\r\n# Actual Behaviour\r\n\r\nDocs say we support Ansible>=2.4", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1812/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1809", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1809/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1809/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1809/events", "html_url": "https://github.com/ansible-community/molecule/pull/1809", "id": 418244279, "node_id": "MDExOlB1bGxSZXF1ZXN0MjU5MDYxODE3", "number": 1809, "title": "Fix custom dockerfile usage", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-03-07T10:47:58Z", "updated_at": "2019-03-15T14:25:13Z", "closed_at": "2019-03-15T14:25:10Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1809", "html_url": "https://github.com/ansible-community/molecule/pull/1809", "diff_url": "https://github.com/ansible-community/molecule/pull/1809.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1809.patch", "merged_at": "2019-03-15T14:25:10Z"}, "body": "Fixes recent bug which prevented the use of the new dockerfile param\r\nthat pointed to custom locations of Dockerfile.\r\n\r\nIt was not identified initially because we did not use the dockerfile param in any test.\r\n\r\nSigned-off-by: Sorin Sbarnea <ssbarnea@redhat.com>\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\nFixes bug introduced in https://github.com/ansible/molecule/pull/1769\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1809/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1809/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1808", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1808/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1808/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1808/events", "html_url": "https://github.com/ansible-community/molecule/pull/1808", "id": 417949706, "node_id": "MDExOlB1bGxSZXF1ZXN0MjU4ODMyNzU0", "number": 1808, "title": "Mitigate against PyYaml CVE-2017-18342", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-03-06T18:34:47Z", "updated_at": "2019-09-20T08:04:31Z", "closed_at": "2019-04-25T15:02:20Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1808", "html_url": "https://github.com/ansible-community/molecule/pull/1808", "diff_url": "https://github.com/ansible-community/molecule/pull/1808.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1808.patch", "merged_at": null}, "body": "While we already use only safe_load on molecule we are better-of\r\nforcing use of a version on PyYaml which is not affected by this\r\nsecurity issue.\r\n\r\nFixes: #1806\r\nSigned-off-by: Sorin Sbarnea <ssbarnea@redhat.com>\r\n\r\n\r\nPlease include details of what it is, how to use it, how it's been tested\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1808/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1808/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1806", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1806/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1806/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1806/events", "html_url": "https://github.com/ansible-community/molecule/issues/1806", "id": 417756957, "node_id": "MDU6SXNzdWU0MTc3NTY5NTc=", "number": 1806, "title": "PyYAML update CVE-2017-18342", "user": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2019-03-06T11:30:16Z", "updated_at": "2019-05-30T15:58:06Z", "closed_at": "2019-05-29T08:58:51Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# summary\r\n\r\nCurrently we have\r\nhttps://github.com/ansible/molecule/blob/9d1dec85ed2f995e2ebd24e234fd8fe4334ecb62/requirements.txt#L15\r\n\r\n\r\n[CVE-2017-18342](https://nvd.nist.gov/vuln/detail/CVE-2017-18342) defines\r\n\r\n**Vulnerable versions:** < 4.2b1\r\n**Patched version:** 4.2b1\r\nIn PyYAML before 4.1, the `yaml.load()` API could execute arbitrary code. In other words, `yaml.safe_load` is not used.\r\n\r\nDo we need to update?", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1806/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1806/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1797", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1797/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1797/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1797/events", "html_url": "https://github.com/ansible-community/molecule/pull/1797", "id": 416227091, "node_id": "MDExOlB1bGxSZXF1ZXN0MjU3NTQwOTQ5", "number": 1797, "title": "\ud83c\udfa8 Refactor building a docker image", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-03-01T18:31:43Z", "updated_at": "2019-05-20T13:25:46Z", "closed_at": "2019-03-05T16:38:14Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1797", "html_url": "https://github.com/ansible-community/molecule/pull/1797", "diff_url": "https://github.com/ansible-community/molecule/pull/1797.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1797.patch", "merged_at": "2019-03-05T16:38:14Z"}, "body": "Fixes #1790\r\n\r\nUsage:\r\n```console\r\ntox -e build-docker\r\n```\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1797/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1797/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1790", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1790/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1790/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1790/events", "html_url": "https://github.com/ansible-community/molecule/issues/1790", "id": 415350804, "node_id": "MDU6SXNzdWU0MTUzNTA4MDQ=", "number": 1790, "title": "Fix building a docker image and installing molecule from source", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 842110976, "node_id": "MDU6TGFiZWw4NDIxMTA5NzY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/major", "name": "major", "color": "c6476b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-27T22:11:03Z", "updated_at": "2019-03-05T18:37:33Z", "closed_at": "2019-03-05T16:38:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmaster\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nI want a molecule in the image to be installed from the corresponding source code.\r\n\r\n# Actual Behaviour\r\n\r\nIt is installed from whatever is the latest non-pre version on production PyPI.\r\n\r\n```console\r\n\u279c docker run -it quay.io/ansible/molecule:v2.20.0a1 bash\r\nUnable to find image 'quay.io/ansible/molecule:v2.20.0a1' locally\r\nv2.20.0a1: Pulling from ansible/molecule\r\n169185f82c45: Already exists \r\n34c29055ee42: Already exists \r\n29802c64cdfc: Already exists \r\nbebe6d49c797: Already exists \r\n32d22b42c09e: Already exists \r\nc2c2284587d0: Already exists \r\ne92ceb70fb83: Already exists \r\n2e73e8c1bfd2: Already exists \r\nee0b89129978: Already exists \r\ncf94363eed74: Already exists \r\n79cd903140e9: Pull complete \r\nDigest: sha256:91331287c907de523b88a509e556eaca2bd5609dd324c15fbb20eb83ea61084b\r\nStatus: Downloaded newer image for quay.io/ansible/molecule:v2.20.0a1\r\nbash-4.4$ molecule --version\r\nmolecule, version 2.19.0\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1790/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1790/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1787", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1787/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1787/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1787/events", "html_url": "https://github.com/ansible-community/molecule/pull/1787", "id": 415332100, "node_id": "MDExOlB1bGxSZXF1ZXN0MjU2ODQzOTMz", "number": 1787, "title": "WIP: Make OS-provided env vars override defaults", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-02-27T21:20:31Z", "updated_at": "2019-03-25T21:00:01Z", "closed_at": "2019-03-25T21:00:01Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1787", "html_url": "https://github.com/ansible-community/molecule/pull/1787", "diff_url": "https://github.com/ansible-community/molecule/pull/1787.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1787.patch", "merged_at": null}, "body": "Fixes #1673\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1787/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1787/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1767", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1767/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1767/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1767/events", "html_url": "https://github.com/ansible-community/molecule/issues/1767", "id": 413064258, "node_id": "MDU6SXNzdWU0MTMwNjQyNTg=", "number": 1767, "title": "MacOS: molecule is not compatible with py37: weird error", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-02-21T18:30:28Z", "updated_at": "2019-03-14T16:43:03Z", "closed_at": "2019-03-14T16:43:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nUsing molecule from master installed inside a tox virtualenv:\r\n```\r\n    TASK [Log into a Docker registry] **********************************************\r\n    task path: /Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:8\r\n    The full traceback is:\r\n    Traceback (most recent call last):\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.7.1/lib/python3.7/site-packages/ansible/executor/task_executor.py\", line 96, in run\r\n        items = self._get_loop_items()\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.7.1/lib/python3.7/site-packages/ansible/executor/task_executor.py\", line 215, in _get_loop_items\r\n        convert_bare=False)\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.7.1/lib/python3.7/site-packages/ansible/utils/listify.py\", line 34, in listify_lookup_plugin_terms\r\n        terms = templar.template(terms.strip(), convert_bare=convert_bare, fail_on_undefined=fail_on_undefined)\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.7.1/lib/python3.7/site-packages/ansible/template/__init__.py\", line 481, in template\r\n        disable_lookups=disable_lookups,\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.7.1/lib/python3.7/site-packages/ansible/template/__init__.py\", line 686, in do_template\r\n        myenv.filters.update(self._get_filters(myenv.filters))\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.7.1/lib/python3.7/site-packages/ansible/template/__init__.py\", line 302, in _get_filters\r\n        plugins = [x for x in self._filter_loader.all()]\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.7.1/lib/python3.7/site-packages/ansible/template/__init__.py\", line 302, in <listcomp>\r\n        plugins = [x for x in self._filter_loader.all()]\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.7.1/lib/python3.7/site-packages/ansible/plugins/loader.py\", line 435, in all\r\n        module = self._load_module_source(name, path)\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.7.1/lib/python3.7/site-packages/ansible/plugins/loader.py\", line 345, in _load_module_source\r\n        module = imp.load_source(full_name, path, module_file)\r\n      File \"/Users/ssbarnea/.pyenv/versions/3.7.1/lib/python3.7/imp.py\", line 171, in load_source\r\n        module = _load(spec)\r\n      File \"<frozen importlib._bootstrap>\", line 696, in _load\r\n      File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n      File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n      File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n      File \"/Users/ssbarnea/rdo/tripleo-ci/.tox/molecule/lib/python3.7/site-packages/molecule/provisioner/ansible/plugins/filters/molecule_core.py\", line 23, in <module>\r\n        from molecule import config\r\n    ModuleNotFoundError: No module named 'molecule'\r\n\r\n    fatal: [localhost]: FAILED! =>\r\n      msg: Unexpected failure during module execution.\r\n      stdout: ''\r\n```\r\n\r\nThis is a very weird error because if I activate the same virtualenv and do do \"import molecule\" from python it works just fine. Still, when run like this it fails.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1767/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1767/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1763", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1763/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1763/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1763/events", "html_url": "https://github.com/ansible-community/molecule/issues/1763", "id": 412616670, "node_id": "MDU6SXNzdWU0MTI2MTY2NzA=", "number": 1763, "title": "Allowing empty docker command is gonna break existing roles", "user": {"login": "beenje", "id": 425499, "node_id": "MDQ6VXNlcjQyNTQ5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/425499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beenje", "html_url": "https://github.com/beenje", "followers_url": "https://api.github.com/users/beenje/followers", "following_url": "https://api.github.com/users/beenje/following{/other_user}", "gists_url": "https://api.github.com/users/beenje/gists{/gist_id}", "starred_url": "https://api.github.com/users/beenje/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beenje/subscriptions", "organizations_url": "https://api.github.com/users/beenje/orgs", "repos_url": "https://api.github.com/users/beenje/repos", "events_url": "https://api.github.com/users/beenje/events{/privacy}", "received_events_url": "https://api.github.com/users/beenje/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-02-20T20:36:22Z", "updated_at": "2019-02-25T10:06:46Z", "closed_at": "2019-02-25T10:06:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.7\r\n  config file = /Users/benjaminbertrand/.ansible.cfg\r\n  configured module search path = [u'/Users/benjaminbertrand/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/benjaminbertrand/miniconda3/envs/molecule-dev/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/benjaminbertrand/miniconda3/envs/molecule-dev/bin/ansible\r\n  python version = 2.7.15 | packaged by conda-forge | (default, Nov 28 2018, 14:39:28) [GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)]\r\nmolecule, version 2.19.1.dev125\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source (pip -e .)\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nWe have many roles with the following structure:\r\n\r\n```\r\n\u251c\u2500\u2500 molecule\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 default\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 Dockerfile.j2\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 playbook.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 prepare.yml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 tests\r\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 test_default.py\r\n```\r\n\r\nNo create.yml and the following Dockerfile.j2:\r\n```\r\n$ cat molecule/default/Dockerfile.j2\r\n# Molecule managed\r\n\r\n{% if item.registry is defined %}\r\nFROM {{ item.registry.url }}/{{ item.image }}\r\n{% else %}\r\nFROM {{ item.image }}\r\n{% endif %}\r\n\r\nRUN if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates && apt-get clean; \\\r\n    elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install python sudo python-devel python2-dnf bash && dnf clean all; \\\r\n    elif [ $(command -v yum) ]; then yum makecache fast && yum install -y python sudo yum-plugin-ovl bash && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all; \\\r\n    elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash python-xml && zypper clean -a; \\\r\n    elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates; \\\r\n    elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates && xbps-remove -O; fi\r\n```\r\n\r\nIn molecule.yml:\r\n```\r\ndriver:\r\n  name: docker\r\nplatforms:\r\n  - name: myhost\r\n    image: centos:7\r\n```\r\n\r\nRunning `molecule create` with the latest version of molecule (from master) should create a running docker container.\r\n\r\n# Actual Behaviour\r\n\r\n`molecule create` creates the docker container but it exits immediately.\r\nThis is because of this commit: https://github.com/ansible/molecule/commit/85e631e62ed9c12baa7f16ec05ed741803151f22\r\n\r\nThe default CMD has to be put in the Dockerfile.j2. This is gonna break all existing molecule roles using docker when upgrading to molecule > 2.19.\r\nIs it really the desired behaviour? Or am I missing something?\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1763/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1763/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1747", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1747/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1747/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1747/events", "html_url": "https://github.com/ansible-community/molecule/issues/1747", "id": 409969782, "node_id": "MDU6SXNzdWU0MDk5Njk3ODI=", "number": 1747, "title": "Move https://github.com/retr0h/cookiecutter-molecule", "user": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-02-13T19:43:36Z", "updated_at": "2019-02-19T10:04:40Z", "closed_at": "2019-02-19T10:04:39Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n\r\n# Desired Behavior\r\n\r\nhttps://github.com/retr0h/cookiecutter-molecule.git should be copied inside of github.com/ansible so that we don't depend on external resources", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1747/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1747/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1725", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1725/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1725/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1725/events", "html_url": "https://github.com/ansible-community/molecule/issues/1725", "id": 406785876, "node_id": "MDU6SXNzdWU0MDY3ODU4NzY=", "number": 1725, "title": "Unable to build Dockerfile", "user": {"login": "romsnl", "id": 11680780, "node_id": "MDQ6VXNlcjExNjgwNzgw", "avatar_url": "https://avatars.githubusercontent.com/u/11680780?v=4", "gravatar_id": "", "url": "https://api.github.com/users/romsnl", "html_url": "https://github.com/romsnl", "followers_url": "https://api.github.com/users/romsnl/followers", "following_url": "https://api.github.com/users/romsnl/following{/other_user}", "gists_url": "https://api.github.com/users/romsnl/gists{/gist_id}", "starred_url": "https://api.github.com/users/romsnl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/romsnl/subscriptions", "organizations_url": "https://api.github.com/users/romsnl/orgs", "repos_url": "https://api.github.com/users/romsnl/repos", "events_url": "https://api.github.com/users/romsnl/events{/privacy}", "received_events_url": "https://api.github.com/users/romsnl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-02-05T13:37:27Z", "updated_at": "2019-02-13T09:01:24Z", "closed_at": "2019-02-13T09:01:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\nUnable to build Molecule Dockerfile\r\n\r\n# Desired Behavior\r\n\r\nBuild the Docker Image, install the python packages list with pip\r\n\r\n> ENV PACKAGES=\"\\\r\n>     gcc \\\r\n>     make \\\r\n>     bash \\\r\n>     shadow \\\r\n>     libffi-dev \\\r\n>     musl-dev \\\r\n>     openssl-dev \\\r\n>     py-pip \\\r\n>     python \\\r\n>     python-dev \\\r\n>     linux-headers \\\r\n>     sudo \\\r\n>     rsync \\\r\n>     curl \\\r\n>     ruby \\\r\n>     ruby-dev \\\r\n>     ruby-etc \\\r\n>     ruby-rdoc \\\r\n>     ruby-irb \\\r\n>     git \\\r\n> \"\r\n\r\n\r\n# Actual Behaviour\r\n\r\nFails in pip install stage `pip install --no-cache-dir ${PIP_PACKAGES}`\r\n\r\n> Exception:\r\n> Traceback (most recent call last):\r\n>   File \"/usr/lib/python2.7/site-packages/pip/_internal/cli/base_command.py\", line 176, in main\r\n>     status = self.run(options, args)\r\n>   File \"/usr/lib/python2.7/site-packages/pip/_internal/commands/install.py\", line 346, in run\r\n>     session=session, autobuilding=True\r\n>   File \"/usr/lib/python2.7/site-packages/pip/_internal/wheel.py\", line 886, in build\r\n>     assert have_directory_for_build\r\n> AssertionError\r\n> The command '/bin/sh -c apk update     && apk add --update --no-cache ${PACKAGES}     && rm -rf /var/cache/apk/*     && pip install --upgrade pip     && pip install --no-cache-dir ${PIP_PACKAGES}     && rm -rf /root/.cache     && gem install ${GEM_PACKAGES}     && adduser -D -h ${TEST_HOME_DIR} ${TEST_USER}     && usermod -aG dockremap ${TEST_USER}     && echo \"${TEST_USER} ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers' returned a non-zero code: 2", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1725/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1724", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1724/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1724/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1724/events", "html_url": "https://github.com/ansible-community/molecule/issues/1724", "id": 406532881, "node_id": "MDU6SXNzdWU0MDY1MzI4ODE=", "number": 1724, "title": "Aborting, target uses selinux but python bindings (libselinux-python) aren't installed!", "user": {"login": "dschier-wtd", "id": 6490538, "node_id": "MDQ6VXNlcjY0OTA1Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/6490538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dschier-wtd", "html_url": "https://github.com/dschier-wtd", "followers_url": "https://api.github.com/users/dschier-wtd/followers", "following_url": "https://api.github.com/users/dschier-wtd/following{/other_user}", "gists_url": "https://api.github.com/users/dschier-wtd/gists{/gist_id}", "starred_url": "https://api.github.com/users/dschier-wtd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dschier-wtd/subscriptions", "organizations_url": "https://api.github.com/users/dschier-wtd/orgs", "repos_url": "https://api.github.com/users/dschier-wtd/repos", "events_url": "https://api.github.com/users/dschier-wtd/events{/privacy}", "received_events_url": "https://api.github.com/users/dschier-wtd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1205135639, "node_id": "MDU6TGFiZWwxMjA1MTM1NjM5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/test", "name": "test", "color": "0e8a16", "default": false, "description": "Improvement to quality assurance: CI/CD, testing, building"}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 19, "created_at": "2019-02-04T21:44:13Z", "updated_at": "2020-08-22T11:02:28Z", "closed_at": "2019-03-14T17:12:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "> Update 2018-04-18: For those encounteing missing selinux when running with virtualenvs you can install the pure python https://pypi.org/project/selinux/  shim which will load the real selinux bindings from outside the virtualenv.\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n\r\nansible 2.7.6\r\n  config file = None\r\n  configured module search path = ['/home/ds/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/ds/.venv-molecule-p3/lib/python3.7/site-packages/ansible\r\n  executable location = /home/ds/.venv-molecule-p3/bin/ansible\r\n  python version = 3.7.2 (default, Jan 16 2019, 19:49:22) [GCC 8.2.1 20181215 (Red Hat 8.2.1-6)]\r\nmolecule, version 2.19.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\n`molecule test` should run locally on Fedora 29 in virtualenv\r\n\r\n# Actual Behaviour\r\n\r\n`molecule test` brakes due to missing libselinux-python at Step `Create Dockerfiles from image names`\r\n\r\nCreating an env with site-packages is not able to perform due to pyyaml version.\r\nCreating an env without site packages is not able to perform due to missing selinux python bindings.\r\nCopying the selinux packages in the venv does not help.\r\n\r\nOutput of `molecule test` without site packages.\r\n\r\n```\r\n    TASK [Create Dockerfiles from image names] *************************************\r\n    task path: /home/ds/.venv-molecule-p3/lib/python3.7/site-packages/molecule/provisioner/ansible/playbooks/docker/create.yml:21\r\n    <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: ds\r\n    <127.0.0.1> EXEC /bin/sh -c 'echo ~ds && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071 `\" && echo ansible-tmp-1549316301.9148593-163859707096071=\"` echo /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071 `\" ) && sleep 0'\r\n    Using module file /home/ds/.venv-molecule-p3/lib/python3.7/site-packages/ansible/modules/files/stat.py\r\n    <127.0.0.1> PUT /home/ds/.ansible/tmp/ansible-local-24132gpawu2kd/tmpxnk6_h_z TO /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/AnsiballZ_stat.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/ /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/AnsiballZ_stat.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/home/ds/.venv-molecule-p3/bin/python3 /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/AnsiballZ_stat.py && sleep 0'\r\n    Using module file /home/ds/.venv-molecule-p3/lib/python3.7/site-packages/ansible/modules/files/file.py\r\n    <127.0.0.1> PUT /home/ds/.ansible/tmp/ansible-local-24132gpawu2kd/tmpi8lrc2o7 TO /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/AnsiballZ_file.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/ /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/AnsiballZ_file.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/home/ds/.venv-molecule-p3/bin/python3 /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/AnsiballZ_file.py && sleep 0'\r\n    <127.0.0.1> PUT /home/ds/.ansible/tmp/ansible-local-24132gpawu2kd/tmpfd5trz4z/Dockerfile.j2 TO /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/source\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/ /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/source && sleep 0'\r\n    Using module file /home/ds/.venv-molecule-p3/lib/python3.7/site-packages/ansible/modules/files/copy.py\r\n    <127.0.0.1> PUT /home/ds/.ansible/tmp/ansible-local-24132gpawu2kd/tmpmmw347_6 TO /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/AnsiballZ_copy.py\r\n    <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/ /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/AnsiballZ_copy.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c '/home/ds/.venv-molecule-p3/bin/python3 /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/AnsiballZ_copy.py && sleep 0'\r\n    <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/ > /dev/null 2>&1 && sleep 0'\r\n    failed: [localhost] (item={'name': 'instance', 'image': 'centos:7'}) => {\r\n        \"changed\": false,\r\n        \"checksum\": \"40a922dca6c7a93024ac1ab412987783252b69c2\",\r\n        \"diff\": [\r\n            {\r\n                \"after\": \"# Molecule managed\\n\\nFROM centos:7\\n\\nRUN if [ $(command -v apt-get) ]; then apt-get update && apt-get install -y python sudo bash ca-certificates && apt-get clean; \\\\\\n    elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install python sudo python-devel python2-dnf bash && dnf clean all; \\\\\\n    elif [ $(command -v yum) ]; then yum makecache fast && yum install -y python sudo yum-plugin-ovl bash && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all; \\\\\\n    elif [ $(command -v zypper) ]; then zypper refresh && zypper install -y python sudo bash python-xml && zypper clean -a; \\\\\\n    elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates; \\\\\\n    elif [ $(command -v xbps-install) ]; then xbps-install -Syu && xbps-install -y python sudo bash ca-certificates && xbps-remove -O; fi\\n\",\r\n                \"after_header\": \"/home/ds/.ansible/tmp/ansible-local-24132gpawu2kd/tmpfd5trz4z/Dockerfile.j2\",\r\n                \"before\": \"\"\r\n            }\r\n        ],\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"_original_basename\": \"Dockerfile.j2\",\r\n                \"attributes\": null,\r\n                \"backup\": false,\r\n                \"checksum\": \"40a922dca6c7a93024ac1ab412987783252b69c2\",\r\n                \"content\": null,\r\n                \"delimiter\": null,\r\n                \"dest\": \"/tmp/molecule/ansible-role-test/default/Dockerfile_centos_7\",\r\n                \"directory_mode\": null,\r\n                \"follow\": false,\r\n                \"force\": true,\r\n                \"group\": null,\r\n                \"local_follow\": null,\r\n                \"mode\": null,\r\n                \"owner\": null,\r\n                \"regexp\": null,\r\n                \"remote_src\": null,\r\n                \"selevel\": null,\r\n                \"serole\": null,\r\n                \"setype\": null,\r\n                \"seuser\": null,\r\n                \"src\": \"/home/ds/.ansible/tmp/ansible-tmp-1549316301.9148593-163859707096071/source\",\r\n                \"unsafe_writes\": null,\r\n                \"validate\": null\r\n            }\r\n        },\r\n        \"item\": {\r\n            \"image\": \"centos:7\",\r\n            \"name\": \"instance\"\r\n        },\r\n        \"msg\": \"Aborting, target uses selinux but python bindings (libselinux-python) aren't installed!\"\r\n    }\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=0    changed=0    unreachable=0    failed=1   \r\n    \r\n    \r\nERROR: \r\nAn error occurred during the test sequence action: 'create'. Cleaning up.\r\n```\r\n\r\nPlease feel free to reach out to me here or in IRC @freenode #ansible-molecule. I will do my best to support you.\r\n\r\nThanks a lot in advance!", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1724/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1723", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1723/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1723/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1723/events", "html_url": "https://github.com/ansible-community/molecule/issues/1723", "id": 406253120, "node_id": "MDU6SXNzdWU0MDYyNTMxMjA=", "number": 1723, "title": "`molecule lint` does not match what `ansible-lint .` does", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1215563012, "node_id": "MDU6TGFiZWwxMjE1NTYzMDEy", "url": "https://api.github.com/repos/ansible-community/molecule/labels/blocked", "name": "blocked", "color": "fef2c0", "default": false, "description": "Blocked in some way upstream or not."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-02-04T09:58:11Z", "updated_at": "2019-02-13T01:06:44Z", "closed_at": "2019-02-12T14:41:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nHEAD and latest release AFAIK.\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\n`molecule lint` and `ansible-lint .` behave identically.\r\n\r\n# Actual Behaviour\r\n\r\nSee https://github.com/ansible/molecule/pull/1675#issuecomment-459451002 and https://github.com/ansible/molecule/pull/1675#issuecomment-460098613.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1723/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1723/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1710", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1710/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1710/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1710/events", "html_url": "https://github.com/ansible-community/molecule/issues/1710", "id": 404921491, "node_id": "MDU6SXNzdWU0MDQ5MjE0OTE=", "number": 1710, "title": "Review all requirements (functional, build & CI)", "user": {"login": "gundalow", "id": 940557, "node_id": "MDQ6VXNlcjk0MDU1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/940557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gundalow", "html_url": "https://github.com/gundalow", "followers_url": "https://api.github.com/users/gundalow/followers", "following_url": "https://api.github.com/users/gundalow/following{/other_user}", "gists_url": "https://api.github.com/users/gundalow/gists{/gist_id}", "starred_url": "https://api.github.com/users/gundalow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gundalow/subscriptions", "organizations_url": "https://api.github.com/users/gundalow/orgs", "repos_url": "https://api.github.com/users/gundalow/repos", "events_url": "https://api.github.com/users/gundalow/events{/privacy}", "received_events_url": "https://api.github.com/users/gundalow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-30T19:14:44Z", "updated_at": "2019-10-27T13:35:18Z", "closed_at": "2019-10-27T13:35:17Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n\r\n# Desired Behavior\r\n\r\nThere are lots of requirement.txt type files where we list a specific version or a range. These all need reviewing, ie https://github.com/ansible/molecule/pull/1695/files/da427d9e19f9b690a6e03cbb4d6c9d240dbd69fd#diff-5120eca88b2f04638db64fb77a95d15c", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1710/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1710/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1700", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1700/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1700/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1700/events", "html_url": "https://github.com/ansible-community/molecule/issues/1700", "id": 402600381, "node_id": "MDU6SXNzdWU0MDI2MDAzODE=", "number": 1700, "title": "recurrent Timer issue on CI on docker multi-node playbook", "user": {"login": "themr0c", "id": 243761, "node_id": "MDQ6VXNlcjI0Mzc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/243761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/themr0c", "html_url": "https://github.com/themr0c", "followers_url": "https://api.github.com/users/themr0c/followers", "following_url": "https://api.github.com/users/themr0c/following{/other_user}", "gists_url": "https://api.github.com/users/themr0c/gists{/gist_id}", "starred_url": "https://api.github.com/users/themr0c/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/themr0c/subscriptions", "organizations_url": "https://api.github.com/users/themr0c/orgs", "repos_url": "https://api.github.com/users/themr0c/repos", "events_url": "https://api.github.com/users/themr0c/events{/privacy}", "received_events_url": "https://api.github.com/users/themr0c/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 1205135639, "node_id": "MDU6TGFiZWwxMjA1MTM1NjM5", "url": "https://api.github.com/repos/ansible-community/molecule/labels/test", "name": "test", "color": "0e8a16", "default": false, "description": "Improvement to quality assurance: CI/CD, testing, building"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-24T08:50:19Z", "updated_at": "2019-01-30T19:11:52Z", "closed_at": "2019-01-30T19:11:51Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nDo not fail on timer expired\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n        playbook: /home/travis/build/ansible/molecule/test/scenarios/driver/docker/molecule/multi-node/playbook.yml\r\n    --> Scenario: 'multi-node'\r\n[...]\r\n        PLAY [Converge] ****************************************************************\r\n        \r\n        TASK [Gathering Facts] *********************************************************\r\n        An exception occurred during task execution. To see the full traceback, use -vvv. The error was: TimeoutError: Timer expired after 10 seconds\r\n        fatal: [instance-2]: FAILED! => {\"changed\": false, \"cmd\": \"/sbin/udevadm info --query property --name /dev/sda1\", \"msg\": \"Timer expired after 10 seconds\", \"rc\": 257}\r\n        An exception occurred during task execution. To see the full traceback, use -vvv. The error was: TimeoutError: Timer expired after 10 seconds\r\n        fatal: [instance-1]: FAILED! => {\"changed\": false, \"cmd\": \"/sbin/udevadm info --query property --name /dev/sda1\", \"msg\": \"Timer expired after 10 seconds\", \"rc\": 257}\r\n```\r\n\r\n\r\nexamples: on  Python: 2.7 TESTS_TYPE=functional ANSIBLE_VERSION=27\r\n- https://travis-ci.com/ansible/molecule/jobs/172521197\r\n- https://travis-ci.com/ansible/molecule/jobs/172521197\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1700/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1688", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1688/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1688/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1688/events", "html_url": "https://github.com/ansible-community/molecule/issues/1688", "id": 401943804, "node_id": "MDU6SXNzdWU0MDE5NDM4MDQ=", "number": 1688, "title": "Docker driver: create.yml jinja expression always evaulates to True", "user": {"login": "Rickkwa", "id": 4498693, "node_id": "MDQ6VXNlcjQ0OTg2OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/4498693?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rickkwa", "html_url": "https://github.com/Rickkwa", "followers_url": "https://api.github.com/users/Rickkwa/followers", "following_url": "https://api.github.com/users/Rickkwa/following{/other_user}", "gists_url": "https://api.github.com/users/Rickkwa/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rickkwa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rickkwa/subscriptions", "organizations_url": "https://api.github.com/users/Rickkwa/orgs", "repos_url": "https://api.github.com/users/Rickkwa/repos", "events_url": "https://api.github.com/users/Rickkwa/events{/privacy}", "received_events_url": "https://api.github.com/users/Rickkwa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-01-22T20:38:39Z", "updated_at": "2020-02-03T22:40:02Z", "closed_at": "2020-02-03T22:40:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nSo I've been looking at [molecule/provisioner/ansible/playbooks/docker/create.yml](https://github.com/ansible/molecule/blob/f09b039e69a599df5a56fe5359647e6ed1821fd3/molecule/provisioner/ansible/playbooks/docker/create.yml).\r\n\r\nSpecifically, [line 48](https://github.com/ansible/molecule/blob/f09b039e69a599df5a56fe5359647e6ed1821fd3/molecule/provisioner/ansible/playbooks/docker/create.yml#L48):\r\n\r\n```\r\n- platforms.changed or docker_images.results | map(attribute='images') | select('equalto', []) | list | count >= 0\r\n```\r\n\r\nThe reason I am looking at this line specifically was because it used `equalto` which isn't on Jinja 2.7.2 (which is the latest version in yum on RHEL/CentOS 7). I wanted to see if I can make a PR which doesn't require the use of `equalto`, and while looking at this line I noticed something. Wouldn't `docker_images.results | map(attribute='images') | select('equalto', []) | list | count >= 0` always be true since it is doing a `count` on a list? Or am I missing something here.\r\n\r\nIf this is supposed to be `>` instead of `>=`, then may I also suggest the following change to avoid `equalto`:\r\n\r\n```\r\n- platforms.changed or [] in docker_images.results | map(attribute='images') | list\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1688/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1688/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1673", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1673/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1673/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1673/events", "html_url": "https://github.com/ansible-community/molecule/issues/1673", "id": 400197046, "node_id": "MDU6SXNzdWU0MDAxOTcwNDY=", "number": 1673, "title": "`MOLECULE_DEBUG` env var is not honoured", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-01-17T10:02:59Z", "updated_at": "2019-03-06T17:39:25Z", "closed_at": "2019-03-06T17:39:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Desired Behavior\r\n\r\nLike Ansible, molecule should load environment variable declared with `MOLECULE_` prefix and and use them as default values for command line arguments.\r\n\r\nAt this moment to enable debug more, user needs to add `--debug` after molecule and before the commands. This may prove quite inconvenient as the CLI call could be in a file or even other ci repository.\r\n\r\nBy regonnizing MOLECULE_DEBUG=1 it would be much easier to trigger the debug mode without having to alter the source code and the entire build chain.\r\n\r\nHint: Ansible has quite a nice implementaiton regarding parsing environment variables and translating them directly into default values, avoiding the need to implement this feature for each command line option.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1673/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1673/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1660", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1660/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1660/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1660/events", "html_url": "https://github.com/ansible-community/molecule/issues/1660", "id": 397032629, "node_id": "MDU6SXNzdWUzOTcwMzI2Mjk=", "number": 1660, "title": "Latest molecule image fails at destroy", "user": {"login": "ericlake", "id": 216564, "node_id": "MDQ6VXNlcjIxNjU2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/216564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericlake", "html_url": "https://github.com/ericlake", "followers_url": "https://api.github.com/users/ericlake/followers", "following_url": "https://api.github.com/users/ericlake/following{/other_user}", "gists_url": "https://api.github.com/users/ericlake/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericlake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericlake/subscriptions", "organizations_url": "https://api.github.com/users/ericlake/orgs", "repos_url": "https://api.github.com/users/ericlake/repos", "events_url": "https://api.github.com/users/ericlake/events{/privacy}", "received_events_url": "https://api.github.com/users/ericlake/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2019-01-08T18:35:26Z", "updated_at": "2019-03-07T09:48:47Z", "closed_at": "2019-03-07T09:48:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\nThis issue is in the latest docker image of molecule.\r\n```\r\nquay.io/ansible/molecule                                    latest              502e06e6a9ac        4 hours ago         499 MB\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- docker\r\n\r\nAnsible installation method (one of):\r\n\r\n- OS package\r\n\r\nDetail any linters or test runners used:\r\n\r\nOur molecule.yml file\r\n\r\n```yaml\r\n---\r\ndependency:\r\n  name: galaxy\r\n\r\ndriver:\r\n  name: docker\r\n\r\nlint:\r\n  name: yamllint\r\n\r\nplatforms:\r\n  - name: instance\r\n    image: \"geerlingguy/docker-${MOLECULE_DISTRO:-centos7}-ansible:latest\"\r\n    command: ${MOLECULE_DOCKER_COMMAND:-\"\"}\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:ro\r\n    privileged: true\r\n    pre_build_image: true\r\n\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\n  playbooks:\r\n    converge: ${MOLECULE_PLAYBOOK:-playbook.yml}\r\n\r\nscenario:\r\n  name: default\r\n  test_sequence:\r\n    - lint\r\n    - destroy\r\n    # - dependency\r\n    - syntax\r\n    - create\r\n    # - prepare\r\n    - converge\r\n    - idempotence\r\n    # - side_effect\r\n    - verify\r\n    - destroy\r\n\r\nverifier:\r\n  name: testinfra\r\n  options:\r\n    vv: true\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\n# Desired Behavior\r\n\r\nThe desired behavior is that a `molecule test` would succeed on the initial destroy operation.\r\n\r\n# Actual Behaviour\r\n\r\nOutput from running `molecule test`\r\n\r\n```\r\n$ docker run --rm -v $(pwd):/tmp/$(basename \"${PWD}\"):z -v /var/run/docker.sock:/var/run/docker.sock -w /tmp/$(basename \"${PWD}\") quay.io/ansible/molecule:latest sudo molecule test\r\n--> Validating schema /tmp/docker/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 verify\r\n    \u2514\u2500\u2500 destroy\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /tmp/docker/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /tmp/docker/molecule/default/tests/...\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /tmp/docker/molecule/default/playbook.yml...\r\nLint completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    changed: [localhost] => (item=None)\r\n    changed: [localhost]\r\n    \r\n    TASK [Wait for instance(s) deletion to complete] *******************************\r\n    failed: [localhost] (item=None) => {\"attempts\": 1, \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n    fatal: [localhost]: FAILED! => {\"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=1    changed=1    unreachable=0    failed=1\r\n    \r\n    \r\nERROR: \r\nAn error occurred during the test sequence action: 'destroy'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    changed: [localhost] => (item=None)\r\n    changed: [localhost]\r\n    \r\n    TASK [Wait for instance(s) deletion to complete] *******************************\r\n    failed: [localhost] (item=None) => {\"attempts\": 1, \"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n    fatal: [localhost]: FAILED! => {\"censored\": \"the output has been hidden due to the fact that 'no_log: true' was specified for this result\", \"changed\": false}\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=1    changed=1    unreachable=0    failed=1\r\n    \r\n    \r\nERROR: \r\n```\r\n\r\nThis does not occur with an image from 3 weeks ago with the hash of `e72db41d7ece`. See the below snippet.\r\n\r\n```\r\n$ docker run --rm -v $(pwd):/tmp/$(basename \"${PWD}\"):z -v /var/run/docker.sock:/var/run/docker.sock -w /tmp/$(basename \"${PWD}\") quay.io/ansible/molecule:e72db41d7ece sudo molecule test\r\n--> Validating schema /tmp/docker/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 verify\r\n    \u2514\u2500\u2500 destroy\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /tmp/docker/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /tmp/docker/molecule/default/tests/...\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /tmp/docker/molecule/default/playbook.yml...\r\nLint completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    changed: [localhost] => (item=None)\r\n    changed: [localhost]\r\n    \r\n    TASK [Wait for instance(s) deletion to complete] *******************************\r\n    ok: [localhost] => (item=None)\r\n    ok: [localhost]\r\n    \r\n    TASK [Delete docker network(s)] ************************************************\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=2    changed=1    unreachable=0    failed=0\r\n    \r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'syntax'\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1660/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1660/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1649", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1649/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1649/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1649/events", "html_url": "https://github.com/ansible-community/molecule/pull/1649", "id": 395935265, "node_id": "MDExOlB1bGxSZXF1ZXN0MjQyMjY5OTg5", "number": 1649, "title": "Avoid failure to prepare docker image on fedora-rawhide", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-04T14:00:45Z", "updated_at": "2019-10-19T17:35:30Z", "closed_at": "2019-01-07T14:44:16Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1649", "html_url": "https://github.com/ansible-community/molecule/pull/1649", "diff_url": "https://github.com/ansible-community/molecule/pull/1649.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1649.patch", "merged_at": "2019-01-07T14:44:16Z"}, "body": "Fedora Rawhide dropped the python2-dnf package and now has only\r\npython3-dnf one.\r\n\r\nBy using a wildcard we avoid the installation failure as it will\r\ninstall all found versions.\r\n\r\nSigned-off-by: Sorin Sbarnea <ssbarnea@redhat.com>\r\nCloses #1642\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1649/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1626", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1626/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1626/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1626/events", "html_url": "https://github.com/ansible-community/molecule/issues/1626", "id": 391692161, "node_id": "MDU6SXNzdWUzOTE2OTIxNjE=", "number": 1626, "title": "Travis CI badge is broken @ RTD", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}, {"id": 864009245, "node_id": "MDU6TGFiZWw4NjQwMDkyNDU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/upstream-bug", "name": "upstream-bug", "color": "960a21", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-12-17T12:33:39Z", "updated_at": "2019-05-23T10:34:40Z", "closed_at": "2019-05-23T10:34:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Ref: https://github.com/bitprophet/alabaster/issues/145#issuecomment-447822963", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1626/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1621", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1621/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1621/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1621/events", "html_url": "https://github.com/ansible-community/molecule/issues/1621", "id": 389391160, "node_id": "MDU6SXNzdWUzODkzOTExNjA=", "number": 1621, "title": "Running `molecule converge` returned TypeError: 'NoneType' object is not iterable other=None", "user": {"login": "zachzeid", "id": 13888327, "node_id": "MDQ6VXNlcjEzODg4MzI3", "avatar_url": "https://avatars.githubusercontent.com/u/13888327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zachzeid", "html_url": "https://github.com/zachzeid", "followers_url": "https://api.github.com/users/zachzeid/followers", "following_url": "https://api.github.com/users/zachzeid/following{/other_user}", "gists_url": "https://api.github.com/users/zachzeid/gists{/gist_id}", "starred_url": "https://api.github.com/users/zachzeid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zachzeid/subscriptions", "organizations_url": "https://api.github.com/users/zachzeid/orgs", "repos_url": "https://api.github.com/users/zachzeid/repos", "events_url": "https://api.github.com/users/zachzeid/events{/privacy}", "received_events_url": "https://api.github.com/users/zachzeid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-10T16:50:23Z", "updated_at": "2019-04-27T16:10:29Z", "closed_at": "2018-12-11T18:06:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.4\r\nmolecule, version 2.19.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\n# Desired Behavior\r\nDesired behavior is to run `converge` against ansible playbooks.\r\n\r\n# Actual Behaviour\r\n```python-traceback\r\n Traceback (most recent call last):\r\n  File \"/Users/user/github/ansible.php/.venv/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/command/check.py\", line 95, in check\r\n    base.get_configs(args, command_args), scenario_name)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/command/base.py\", line 121, in get_configs\r\n    ) for c in glob.glob(MOLECULE_GLOB)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/config.py\", line 61, in __call__\r\n    obj = type.__call__(cls, *args, **kwargs)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/config.py\", line 104, in __init__\r\n    self.config = self._get_config()\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/config.py\", line 277, in _get_config\r\n    return self._combine(keep_string=MOLECULE_KEEP_STRING)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/config.py\", line 320, in _combine\r\n    util.safe_load(interpolated_config))\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/util.py\", line 298, in merge_dicts\r\n    anyconfig.merge(a, b, ac_merge=MERGE_STRATEGY)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/anyconfig/dicts.py\", line 294, in merge\r\n    _update_fn(self, other, key, **options)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/anyconfig/dicts.py\", line 234, in _update_with_merge\r\n    merge(self[key], val, merge_lists=merge_lists, **options)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/anyconfig/dicts.py\", line 294, in merge\r\n    _update_fn(self, other, key, **options)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/anyconfig/dicts.py\", line 234, in _update_with_merge\r\n    merge(self[key], val, merge_lists=merge_lists, **options)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/anyconfig/dicts.py\", line 300, in merge\r\n    raise type(exc)(\"%s other=%r\" % (str(exc), other))\r\nTypeError: 'NoneType' object is not iterable other=None\r\nRAW Paste Data\r\n\r\nmolecule check\r\nTraceback (most recent call last):\r\n  File \"/Users/user/github/ansible.php/.venv/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/command/check.py\", line 95, in check\r\n    base.get_configs(args, command_args), scenario_name)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/command/base.py\", line 121, in get_configs\r\n    ) for c in glob.glob(MOLECULE_GLOB)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/config.py\", line 61, in __call__\r\n    obj = type.__call__(cls, *args, **kwargs)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/config.py\", line 104, in __init__\r\n    self.config = self._get_config()\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/config.py\", line 277, in _get_config\r\n    return self._combine(keep_string=MOLECULE_KEEP_STRING)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/config.py\", line 320, in _combine\r\n    util.safe_load(interpolated_config))\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/molecule/util.py\", line 298, in merge_dicts\r\n    anyconfig.merge(a, b, ac_merge=MERGE_STRATEGY)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/anyconfig/dicts.py\", line 294, in merge\r\n    _update_fn(self, other, key, **options)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/anyconfig/dicts.py\", line 234, in _update_with_merge\r\n    merge(self[key], val, merge_lists=merge_lists, **options)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/anyconfig/dicts.py\", line 294, in merge\r\n    _update_fn(self, other, key, **options)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/anyconfig/dicts.py\", line 234, in _update_with_merge\r\n    merge(self[key], val, merge_lists=merge_lists, **options)\r\n  File \"/Users/user/github/ansible.php/.venv/lib/python2.7/site-packages/anyconfig/dicts.py\", line 300, in merge\r\n    raise type(exc)(\"%s other=%r\" % (str(exc), other))\r\nTypeError: 'NoneType' object is not iterable other=None\r\n ```\r\nReturns TypeError: 'NoneType object is not iterable other=None\r\nRemoving molecule and reinstalling results in the same error\r\nRecreated virtualenv results in the same error.\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1621/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1616", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1616/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1616/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1616/events", "html_url": "https://github.com/ansible-community/molecule/issues/1616", "id": 388135391, "node_id": "MDU6SXNzdWUzODgxMzUzOTE=", "number": 1616, "title": "Restore author field in distribution metadata", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 842110976, "node_id": "MDU6TGFiZWw4NDIxMTA5NzY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/major", "name": "major", "color": "c6476b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-12-06T09:54:07Z", "updated_at": "2019-02-21T14:00:44Z", "closed_at": "2019-02-21T14:00:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nAuthor field is not present in the metadata which is important to PyPI.\r\nIt looks like it'd been removed in this PR: https://github.com/ansible/molecule/pull/411/files#diff-380c6a8ebbbce17d55d50ef17d3cf906L3.\r\n\r\n@retr0h is is ok to restore those lines?\r\n\r\n# Actual Behaviour\r\n\r\nauthor field is not supplied in `setup.cfg`", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1616/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1615", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1615/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1615/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1615/events", "html_url": "https://github.com/ansible-community/molecule/pull/1615", "id": 387967824, "node_id": "MDExOlB1bGxSZXF1ZXN0MjM2MzM5ODg5", "number": 1615, "title": "Allow docker command to be null, set default CMD in dockerfile instead", "user": {"login": "fabianvf", "id": 2431974, "node_id": "MDQ6VXNlcjI0MzE5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2431974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fabianvf", "html_url": "https://github.com/fabianvf", "followers_url": "https://api.github.com/users/fabianvf/followers", "following_url": "https://api.github.com/users/fabianvf/following{/other_user}", "gists_url": "https://api.github.com/users/fabianvf/gists{/gist_id}", "starred_url": "https://api.github.com/users/fabianvf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fabianvf/subscriptions", "organizations_url": "https://api.github.com/users/fabianvf/orgs", "repos_url": "https://api.github.com/users/fabianvf/repos", "events_url": "https://api.github.com/users/fabianvf/events{/privacy}", "received_events_url": "https://api.github.com/users/fabianvf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-12-05T22:08:58Z", "updated_at": "2018-12-12T19:25:43Z", "closed_at": "2018-12-12T19:25:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1615", "html_url": "https://github.com/ansible-community/molecule/pull/1615", "diff_url": "https://github.com/ansible-community/molecule/pull/1615.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1615.patch", "merged_at": "2018-12-12T19:25:42Z"}, "body": "Fixes #1614\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n\r\nInstead of setting the default command value of `while true; do sleep 10000; done` in the `docker_container` invocation, create the sample Dockerfile with the default CMD on it, and allow `command` to be nullable, in which case it will use the existing `CMD` directive on the image.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1615/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1615/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1614", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1614/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1614/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1614/events", "html_url": "https://github.com/ansible-community/molecule/issues/1614", "id": 387966664, "node_id": "MDU6SXNzdWUzODc5NjY2NjQ=", "number": 1614, "title": "CMD in pre-built docker image replaced with `while true; do sleep 10000; done`", "user": {"login": "fabianvf", "id": 2431974, "node_id": "MDQ6VXNlcjI0MzE5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2431974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fabianvf", "html_url": "https://github.com/fabianvf", "followers_url": "https://api.github.com/users/fabianvf/followers", "following_url": "https://api.github.com/users/fabianvf/following{/other_user}", "gists_url": "https://api.github.com/users/fabianvf/gists{/gist_id}", "starred_url": "https://api.github.com/users/fabianvf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fabianvf/subscriptions", "organizations_url": "https://api.github.com/users/fabianvf/orgs", "repos_url": "https://api.github.com/users/fabianvf/repos", "events_url": "https://api.github.com/users/fabianvf/events{/privacy}", "received_events_url": "https://api.github.com/users/fabianvf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-12-05T22:05:22Z", "updated_at": "2018-12-12T19:25:42Z", "closed_at": "2018-12-12T19:25:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\nWas kind of reported in #1441 \r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.2\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/fabian/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/fabian/.local/lib/python2.7/site-packages/ansible\r\n  executable location = /home/fabian/.local/bin/ansible\r\n  python version = 2.7.15 (default, May 15 2018, 15:37:31) [GCC 7.3.1 20180303 (Red Hat 7.3.1-5)]\r\nmolecule, version 2.19.1.dev54\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\nIf I don't specify a `command` or specify `null` as the value for `command`, the existing `CMD` on the image should be used.\r\n\r\n\r\n# Actual Behaviour\r\nWhen consuming an image with the docker driver, the existing `CMD` on the image is overwritten, even if `command` is unspecified or null. \r\n\r\nIn order to get the behavior I desire from molecule, I currently need to copy-paste the content  of the `CMD` directive into the `command` section of the `molecule.yml`, but this is inherently fragile as every time the container used changes its `CMD` I would need to reflect that in every related molecule specification.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1614/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1611", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1611/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1611/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1611/events", "html_url": "https://github.com/ansible-community/molecule/issues/1611", "id": 387515402, "node_id": "MDU6SXNzdWUzODc1MTU0MDI=", "number": 1611, "title": "`molecule` entry-point script mysteriously disappears from the virtualenv (and from disk completely) during tests", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-04T22:51:18Z", "updated_at": "2018-12-07T23:52:28Z", "closed_at": "2018-12-07T23:52:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It is totally unclear how this happens. I suspect some of tests to have side effects like this.\r\nIt looks like @Shaps faced this too.\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version && molecule --version\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- source\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nTests should be passing in stable manner.\r\n\r\n# Actual Behaviour\r\n\r\nhttps://travis-ci.com/ansible/molecule/jobs/162837106#L1053", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1611/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1607", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1607/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1607/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1607/events", "html_url": "https://github.com/ansible-community/molecule/issues/1607", "id": 385059384, "node_id": "MDU6SXNzdWUzODUwNTkzODQ=", "number": 1607, "title": "Latest molecule release uses older release of ansible-lint", "user": {"login": "geerlingguy", "id": 481677, "node_id": "MDQ6VXNlcjQ4MTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/481677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geerlingguy", "html_url": "https://github.com/geerlingguy", "followers_url": "https://api.github.com/users/geerlingguy/followers", "following_url": "https://api.github.com/users/geerlingguy/following{/other_user}", "gists_url": "https://api.github.com/users/geerlingguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/geerlingguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geerlingguy/subscriptions", "organizations_url": "https://api.github.com/users/geerlingguy/orgs", "repos_url": "https://api.github.com/users/geerlingguy/repos", "events_url": "https://api.github.com/users/geerlingguy/events{/privacy}", "received_events_url": "https://api.github.com/users/geerlingguy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-28T01:23:41Z", "updated_at": "2019-01-24T09:52:01Z", "closed_at": "2019-01-24T09:52:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.2\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/jgeerling/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.15 (default, Jul 17 2018, 19:41:20) [GCC 4.2.1 Compatible Apple LLVM 9.1.0 (clang-902.0.39.2)]\r\nmolecule, version 2.19.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\nN/A\r\n\r\n# Desired Behavior\r\n\r\nAfter installation, I should not have an older version of `ansible-lint` installed than before.\r\n\r\n# Actual Behaviour\r\n\r\n```\r\n$ pip install ansible-lint\r\n...\r\n$ ansible-lint --version\r\nansible-lint 3.5.1\r\n$ pip install molecule\r\n...\r\nInstalling collected packages: ansible-lint\r\n  Found existing installation: ansible-lint 3.5.1\r\n    Uninstalling ansible-lint-3.5.1:\r\n      Successfully uninstalled ansible-lint-3.5.1\r\nSuccessfully installed ansible-lint-3.4.23\r\n$ ansible-lint --version\r\nansible-lint 3.4.23\r\n$ pip install --upgrade ansible-lint\r\n...\r\nmolecule 2.19.0 has requirement ansible-lint==3.4.23, but you'll have ansible-lint 3.5.1 which is incompatible.\r\nInstalling collected packages: ansible-lint\r\n  Found existing installation: ansible-lint 3.4.23\r\n    Uninstalling ansible-lint-3.4.23:\r\n      Successfully uninstalled ansible-lint-3.4.23\r\nSuccessfully installed ansible-lint-3.5.1\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1607/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1607/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1595", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1595/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1595/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1595/events", "html_url": "https://github.com/ansible-community/molecule/issues/1595", "id": 381606836, "node_id": "MDU6SXNzdWUzODE2MDY4MzY=", "number": 1595, "title": "Docs: testing page contains misleading information", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}, {"id": 842110976, "node_id": "MDU6TGFiZWw4NDIxMTA5NzY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/major", "name": "major", "color": "c6476b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-16T13:48:46Z", "updated_at": "2019-05-23T10:34:39Z", "closed_at": "2019-05-23T10:34:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've found untrue information in docs. Now, this is related to testing, but I suspect there may be more. We need to go through docs, verify and fix everything.\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nUsers can rely on docs.\r\n\r\n# Actual Behaviour\r\n\r\nLXC/LXD instructions (https://molecule.readthedocs.io/en/latest/testing.html#lxc) ain't true: there's no `test/functional/lxc`/`test/functional/lxd` folders with Vagrantfiles at all. They didn't even exist at the time of the PR #863 adding this info to docs.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1595/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1595/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1592", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1592/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1592/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1592/events", "html_url": "https://github.com/ansible-community/molecule/issues/1592", "id": 381077105, "node_id": "MDU6SXNzdWUzODEwNzcxMDU=", "number": 1592, "title": "test_plugins[plugins-docker-default] fails because of non-existing repo", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-11-15T09:42:48Z", "updated_at": "2019-01-16T13:25:38Z", "closed_at": "2019-01-16T13:25:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It looks like @retr0h has removed https://github.com/retr0h/ansible-plugins repository today/yesterday, which lead to failing the test `test_plugins[plugins-docker-default]`, which tries cloning it internally.\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```console\r\nCloning into '/home/travis/.gilt/clone/retr0h.ansible-plugins'...\r\nremote: Invalid username or password.\r\nfatal: Authentication failed for 'https://github.com/retr0h/ansible-plugins.git/'\r\n```\r\n\r\n# Desired Behavior\r\n\r\nTest `test_plugins[plugins-docker-default]` pass\r\n\r\n# Actual Behaviour\r\n\r\nTest `test_plugins[plugins-docker-default]` fails", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1592/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1592/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1591", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1591/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1591/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1591/events", "html_url": "https://github.com/ansible-community/molecule/pull/1591", "id": 381040605, "node_id": "MDExOlB1bGxSZXF1ZXN0MjMxMDk5Njky", "number": 1591, "title": "Enable LXC and LXD functional tests under Travis CI", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-11-15T07:56:14Z", "updated_at": "2019-05-20T13:23:34Z", "closed_at": "2019-05-20T13:23:34Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1591", "html_url": "https://github.com/ansible-community/molecule/pull/1591", "diff_url": "https://github.com/ansible-community/molecule/pull/1591.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1591.patch", "merged_at": null}, "body": "#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1591/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1588", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1588/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1588/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1588/events", "html_url": "https://github.com/ansible-community/molecule/pull/1588", "id": 380009751, "node_id": "MDExOlB1bGxSZXF1ZXN0MjMwMzEyOTEx", "number": 1588, "title": "Prevent RuntimeError when patching os.environ", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-13T00:43:14Z", "updated_at": "2019-05-20T13:25:45Z", "closed_at": "2018-11-13T01:46:04Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1588", "html_url": "https://github.com/ansible-community/molecule/pull/1588", "diff_url": "https://github.com/ansible-community/molecule/pull/1588.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1588.patch", "merged_at": "2018-11-13T01:46:04Z"}, "body": "Ref: https://travis-ci.com/ansible/molecule/jobs/158041505#L851\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1588/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1588/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1587", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1587/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1587/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1587/events", "html_url": "https://github.com/ansible-community/molecule/issues/1587", "id": 379829430, "node_id": "MDU6SXNzdWUzNzk4Mjk0MzA=", "number": 1587, "title": "Regression: default playbooks missing for LXD driver", "user": {"login": "HalisCz", "id": 1120890, "node_id": "MDQ6VXNlcjExMjA4OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1120890?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HalisCz", "html_url": "https://github.com/HalisCz", "followers_url": "https://api.github.com/users/HalisCz/followers", "following_url": "https://api.github.com/users/HalisCz/following{/other_user}", "gists_url": "https://api.github.com/users/HalisCz/gists{/gist_id}", "starred_url": "https://api.github.com/users/HalisCz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HalisCz/subscriptions", "organizations_url": "https://api.github.com/users/HalisCz/orgs", "repos_url": "https://api.github.com/users/HalisCz/repos", "events_url": "https://api.github.com/users/HalisCz/events{/privacy}", "received_events_url": "https://api.github.com/users/HalisCz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-11-12T15:32:46Z", "updated_at": "2019-03-07T09:42:20Z", "closed_at": "2019-03-07T09:42:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.7.1\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/home/user/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/user/.virtualenvs/nix-ansible/lib/python3.7/site-packages/ansible\r\n  executable location = /home/user/.virtualenvs/nix-ansible/bin/ansible\r\n  python version = 3.7.1 (default, Nov  5 2018, 14:07:04) [GCC 8.2.1 20181011 (Red Hat 8.2.1-4)]\r\nmolecule, version 2.19.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\nDetail any linters or test runners used:\r\n\r\n# Desired Behavior\r\n\r\nAfter running `molecule init role --role-name basic_server --driver-name lxd`, there should be default playbooks as this:\r\n```\r\nbasic_server\r\n\u251c\u2500\u2500 defaults\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 handlers\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 meta\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 molecule\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 default\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 tests\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 __pycache__\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test_default.cpython-37.pyc\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 test_default.py\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 create.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 destroy.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 INSTALL.rst\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 playbook.yml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 prepare.yml\r\n\u251c\u2500\u2500 tasks\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 vars\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u2514\u2500\u2500 README.md\r\n\r\n9 directories, 14 files\r\n```\r\nThis is working in `molecule==2.17` from pip.\r\n\r\n# Actual Behaviour\r\n\r\nPlaybooks `create.yml`, `destroy.yml` and `prepare.yml` are missing.\r\n\r\n```\r\nbasic_server\r\n\u251c\u2500\u2500 defaults\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 handlers\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 meta\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 molecule\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 default\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 tests\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 __pycache__\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 test_default.cpython-37.pyc\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 test_default.py\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 INSTALL.rst\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 playbook.yml\r\n\u251c\u2500\u2500 tasks\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u251c\u2500\u2500 vars\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main.yml\r\n\u2514\u2500\u2500 README.md\r\n\r\n9 directories, 11 files\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1587/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1586", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1586/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1586/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1586/events", "html_url": "https://github.com/ansible-community/molecule/pull/1586", "id": 379811582, "node_id": "MDExOlB1bGxSZXF1ZXN0MjMwMTYwNTM5", "number": 1586, "title": "Shard nightly jobs in Travis CI", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-12T14:52:06Z", "updated_at": "2019-05-20T13:25:45Z", "closed_at": "2018-11-12T14:52:17Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1586", "html_url": "https://github.com/ansible-community/molecule/pull/1586", "diff_url": "https://github.com/ansible-community/molecule/pull/1586.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1586.patch", "merged_at": "2018-11-12T14:52:17Z"}, "body": "Signed-off-by: Sviatoslav Sydorenko <wk@sydorenko.org.ua>\r\n\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1586/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1580", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1580/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1580/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1580/events", "html_url": "https://github.com/ansible-community/molecule/issues/1580", "id": 379237260, "node_id": "MDU6SXNzdWUzNzkyMzcyNjA=", "number": 1580, "title": "LXC dependency used should be replaced", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-09T16:45:09Z", "updated_at": "2019-05-23T10:34:39Z", "closed_at": "2019-05-23T10:34:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nlxc driver backend should be stable and support both Python branches\r\n\r\n# Actual Behaviour\r\n\r\nlxc-python2 seems to be alpha-quality, unmaintained and is python2-only", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1580/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1580/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1579", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1579/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1579/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1579/events", "html_url": "https://github.com/ansible-community/molecule/issues/1579", "id": 379229787, "node_id": "MDU6SXNzdWUzNzkyMjk3ODc=", "number": 1579, "title": "[TODO] Remove recommendations to use `sudo` from everywhere", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-11-09T16:25:54Z", "updated_at": "2019-01-29T16:04:02Z", "closed_at": "2019-01-29T16:04:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Desired Behavior\r\n\r\nI'd like to not encourage users messing up their system Python installation. We need to educate users about `pip install --user` and `python -m venv`.\r\n\r\n# Actual Behaviour\r\n\r\nIn lots of places (docs/code), there are unnecessary recommendations to use `sudo`.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1579/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1579/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1573", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1573/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1573/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1573/events", "html_url": "https://github.com/ansible-community/molecule/issues/1573", "id": 378957233, "node_id": "MDU6SXNzdWUzNzg5NTcyMzM=", "number": 1573, "title": "[BUG] Broken concurrency: one cannot run few molecule processes in parallel", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-11-08T23:14:37Z", "updated_at": "2019-05-23T10:34:38Z", "closed_at": "2019-05-23T10:34:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\ndevel\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\nN/A\r\n\r\nAnsible installation method (one of):\r\n\r\nN/A\r\n\r\nDetail any linters or test runners used:\r\n\r\ndocker driver\r\n\r\n# Desired Behavior\r\n\r\nMolecule should create resources (test envs) with names unique to test run.\r\nI want to be able to run concurrently the test of Molecule itself.\r\n\r\n# Actual Behaviour\r\n\r\nMolecule's default docker image instance name defaults to the driver name, that's it. So when you run multiple processes they mess with the same resource breaking each other in unpredictable ways.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1573/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1573/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1568", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1568/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1568/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1568/events", "html_url": "https://github.com/ansible-community/molecule/issues/1568", "id": 378320840, "node_id": "MDU6SXNzdWUzNzgzMjA4NDA=", "number": 1568, "title": "Docker driver - volume /var/rund/docker.sock:/var/run/docker.sock is not mapped or is removed", "user": {"login": "Ilhicas", "id": 14908129, "node_id": "MDQ6VXNlcjE0OTA4MTI5", "avatar_url": "https://avatars.githubusercontent.com/u/14908129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ilhicas", "html_url": "https://github.com/Ilhicas", "followers_url": "https://api.github.com/users/Ilhicas/followers", "following_url": "https://api.github.com/users/Ilhicas/following{/other_user}", "gists_url": "https://api.github.com/users/Ilhicas/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ilhicas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ilhicas/subscriptions", "organizations_url": "https://api.github.com/users/Ilhicas/orgs", "repos_url": "https://api.github.com/users/Ilhicas/repos", "events_url": "https://api.github.com/users/Ilhicas/events{/privacy}", "received_events_url": "https://api.github.com/users/Ilhicas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-11-07T14:50:14Z", "updated_at": "2021-02-05T10:44:18Z", "closed_at": "2020-02-15T19:05:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Impossible to map volume (host to container) /var/run/docker.sock to /var/run/docker.sock using Docker driver.\r\n\r\nPossible root cause for molecule:\r\ndocker_container module\r\nPossible base root cause in docker.py usage of the module \r\n\r\n> Is it possible to fix ? \r\nYes, but Its pretty hacky.\r\n> How ? \r\nMap docker.sock to some other location, symbolic link the sock to /var/run/docker.sock\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.6.3\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/ilhicas/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.15rc1 (default, Apr 15 2018, 21:51:34) [GCC 7.3.0]\r\n\r\nansible 2.6.3\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/ilhicas/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.15rc1 (default, Apr 15 2018, 21:51:34) [GCC 7.3.0]\r\n\r\n```\r\n\r\nMolecule installation method (one of):\r\n- source\r\n\r\nAnsible installation method (one of):\r\n- os\r\n\r\nDriver used:\r\nDocker\r\n\r\n# Desired Behavior\r\nVolume /var/run/docker.sock is mapped to internal /var/run/docker.sock\r\nusing `volumes`\r\n\r\n# Actual Behaviour\r\n/var/run/docker.sock is missing inside container\r\n\r\nPlease give some details of what is actually happening.\r\n---\r\nmolecule.yml\r\n```\r\ndependency:\r\n  name: galaxy\r\n  enabled: true\r\n  options:\r\n    ignore-certs: True\r\n    ignore-errors: True\r\n    #Relative path search here walks from role root folder (this case ansible) all the way to the scenario (in this case it lives under ansible/requirements.yml, for specific set ansible/molecule/scenario-name/requirements.yml)\r\n    role-file: molecule/scenario_name/requirements.yml\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\n  enabled: false\r\nplatforms:\r\n  - name: container_name\r\n    image: fiercely/centos7:systemd\r\n    privileged: True\r\n    published_ports:\r\n      - \"80\"\r\n      - \"443\"\r\n    volumes:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:rw\r\n      - /var/run/docker.sock:/var/run/docker.sock\r\n    command: \"/usr/sbin/init\"\r\n    groups:\r\n      - some_group\r\nprovisioner:\r\n  name: ansible\r\n  roles_path: roles\r\n  lint:\r\n    name: ansible-lint\r\n    enabled: false\r\n  inventory:\r\n    links:\r\n      group_vars: ../../group_vars/\r\nscenario:\r\n  name: scenario_name\r\n  test_sequence:\r\n    - destroy\r\n    - dependency\r\n    - create\r\n    - prepare\r\n    - converge\r\n    - side_effect\r\n    - verify\r\n    - destroy\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\nplaybook.yml\r\n```\r\n---\r\n- name: Converge\r\n  hosts: some_group\r\n```\r\n\r\nHow to reproduce:\r\n```sh\r\nmolecule test -s scenario_name\r\n```\r\n```\r\ndocker exec -it container_name bash\r\n#Inside container\r\nls -laF /var/run | grep docker.sock\r\n#Mapped docker sock is not found\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1568/reactions", "total_count": 8, "+1": 8, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1568/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1565", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1565/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1565/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1565/events", "html_url": "https://github.com/ansible-community/molecule/pull/1565", "id": 377905324, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI4NzM2NTA3", "number": 1565, "title": "Drop unused import from test.conftest", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-06T15:43:12Z", "updated_at": "2019-05-20T13:25:45Z", "closed_at": "2018-11-06T15:43:20Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1565", "html_url": "https://github.com/ansible-community/molecule/pull/1565", "diff_url": "https://github.com/ansible-community/molecule/pull/1565.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1565.patch", "merged_at": "2018-11-06T15:43:20Z"}, "body": "Satisfy flake8 linter\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1565/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1564", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1564/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1564/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1564/events", "html_url": "https://github.com/ansible-community/molecule/pull/1564", "id": 377904221, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI4NzM1NjQ5", "number": 1564, "title": "Fix doc env in tox", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-06T15:40:49Z", "updated_at": "2019-05-20T13:25:45Z", "closed_at": "2018-11-06T15:46:13Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1564", "html_url": "https://github.com/ansible-community/molecule/pull/1564", "diff_url": "https://github.com/ansible-community/molecule/pull/1564.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1564.patch", "merged_at": "2018-11-06T15:46:13Z"}, "body": "Install requirements from extra rather than removed file\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n- Docs Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1564/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1562", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1562/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1562/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1562/events", "html_url": "https://github.com/ansible-community/molecule/pull/1562", "id": 377648243, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI4NTQyMzA4", "number": 1562, "title": "Packaging: improve distribution metadata", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-11-06T00:56:24Z", "updated_at": "2019-05-20T13:25:45Z", "closed_at": "2018-11-06T08:42:44Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1562", "html_url": "https://github.com/ansible-community/molecule/pull/1562", "diff_url": "https://github.com/ansible-community/molecule/pull/1562.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1562.patch", "merged_at": "2018-11-06T08:42:44Z"}, "body": "* Fix supported Python version requirement in dist meta\r\n* Add project urls for display at PyPI\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1562/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1562/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1560", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1560/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1560/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1560/events", "html_url": "https://github.com/ansible-community/molecule/pull/1560", "id": 377647513, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI4NTQxNzcy", "number": 1560, "title": "Fix test side-effect of not returning \ud83d\udd19 from chdir", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-11-06T00:53:07Z", "updated_at": "2019-05-20T13:25:44Z", "closed_at": "2018-11-06T10:32:01Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1560", "html_url": "https://github.com/ansible-community/molecule/pull/1560", "diff_url": "https://github.com/ansible-community/molecule/pull/1560.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1560.patch", "merged_at": "2018-11-06T10:32:01Z"}, "body": "Change current working directory to the initial one upon exiting each test\r\n\r\nFixes #1549\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1560/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1555", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1555/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1555/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1555/events", "html_url": "https://github.com/ansible-community/molecule/pull/1555", "id": 377524180, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI4NDQ2NzA0", "number": 1555, "title": "Update SHA-256 hash for the goss verifier binary", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-05T18:24:12Z", "updated_at": "2019-05-20T13:25:44Z", "closed_at": "2018-11-05T18:24:45Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1555", "html_url": "https://github.com/ansible-community/molecule/pull/1555", "diff_url": "https://github.com/ansible-community/molecule/pull/1555.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1555.patch", "merged_at": "2018-11-05T18:24:45Z"}, "body": "Fix a bug introduced in PR #1483\r\n\r\n#### PR Type\r\n\r\n- Bugfix Pull Request", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1555/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1554", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1554/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1554/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1554/events", "html_url": "https://github.com/ansible-community/molecule/pull/1554", "id": 377522093, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI4NDQ1MTI5", "number": 1554, "title": "Set failing coverage to 40%", "user": {"login": "webknjaz", "id": 578543, "node_id": "MDQ6VXNlcjU3ODU0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/578543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/webknjaz", "html_url": "https://github.com/webknjaz", "followers_url": "https://api.github.com/users/webknjaz/followers", "following_url": "https://api.github.com/users/webknjaz/following{/other_user}", "gists_url": "https://api.github.com/users/webknjaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/webknjaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/webknjaz/subscriptions", "organizations_url": "https://api.github.com/users/webknjaz/orgs", "repos_url": "https://api.github.com/users/webknjaz/repos", "events_url": "https://api.github.com/users/webknjaz/events{/privacy}", "received_events_url": "https://api.github.com/users/webknjaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 842110976, "node_id": "MDU6TGFiZWw4NDIxMTA5NzY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/major", "name": "major", "color": "c6476b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-05T18:18:21Z", "updated_at": "2019-05-20T13:25:44Z", "closed_at": "2018-11-05T18:25:21Z", "author_association": "MEMBER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1554", "html_url": "https://github.com/ansible-community/molecule/pull/1554", "diff_url": "https://github.com/ansible-community/molecule/pull/1554.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1554.patch", "merged_at": "2018-11-05T18:25:21Z"}, "body": "#### PR Type\r\n\r\n- Bugfix Pull Request\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1554/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1549", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1549/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1549/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1549/events", "html_url": "https://github.com/ansible-community/molecule/issues/1549", "id": 377160071, "node_id": "MDU6SXNzdWUzNzcxNjAwNzE=", "number": 1549, "title": "unittest always fail on macos with OSError: [Errno 2] No such file or directory", "user": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-11-04T14:49:49Z", "updated_at": "2018-11-06T10:32:01Z", "closed_at": "2018-11-06T10:32:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\ntest/unit/verifier/lint/test_yamllint.py::test_executes_catches_and_exits_return_code PASSED\r\nINTERNALERROR> Traceback (most recent call last):\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/_pytest/main.py\", line 98, in wrap_session\r\nINTERNALERROR>     session.exitstatus = doit(config, session) or 0\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/_pytest/main.py\", line 133, in _main\r\nINTERNALERROR>     config.hook.pytest_runtestloop(session=session)\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/_pytest/vendored_packages/pluggy.py\", line 745, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/_pytest/vendored_packages/pluggy.py\", line 339, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/_pytest/vendored_packages/pluggy.py\", line 334, in <lambda>\r\nINTERNALERROR>     _MultiCall(methods, kwargs, hook.spec_opts).execute()\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/_pytest/vendored_packages/pluggy.py\", line 613, in execute\r\nINTERNALERROR>     return _wrapped_call(hook_impl.function(*args), self.execute)\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/_pytest/vendored_packages/pluggy.py\", line 250, in _wrapped_call\r\nINTERNALERROR>     wrap_controller.send(call_outcome)\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/pytest_cov/plugin.py\", line 228, in pytest_runtestloop\r\nINTERNALERROR>     self.cov_controller.finish()\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/pytest_cov/engine.py\", line 167, in finish\r\nINTERNALERROR>     self.cov.stop()\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/coverage/control.py\", line 675, in load\r\nINTERNALERROR>     self._init()\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/coverage/control.py\", line 223, in _init\r\nINTERNALERROR>     set_relative_directory()\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/coverage/files.py\", line 28, in set_relative_directory\r\nINTERNALERROR>     RELATIVE_DIR = os.path.normcase(abs_file(os.curdir) + os.sep)\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/site-packages/coverage/files.py\", line 163, in abs_file\r\nINTERNALERROR>     path = os.path.realpath(path)\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/posixpath.py\", line 376, in realpath\r\nINTERNALERROR>     return abspath(path)\r\nINTERNALERROR>   File \"/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/lib/python2.7/posixpath.py\", line 364, in abspath\r\nINTERNALERROR>     cwd = os.getcwd()\r\nINTERNALERROR> OSError: [Errno 2] No such file or directory\r\n\r\n============================================================================== 3 failed, 709 passed in 48.96 seconds ===============================================================================\r\nERROR: InvocationError for command '/Users/ssbarnea/os/molecule/.tox/py27-ansible25-unit/bin/py.test -vv --cov-report=term-missing --cov=/Users/ssbarnea/os/molecule/molecule/ --no-cov-on-fail' (exited with code 3)\r\n_____________________________________________________________________________________________ summary ______________________________________________________________________________________________\r\nERROR:   py27-ansible25-unit: commands failed\r\nTOXENV=py27-ansible25-unit tox  70.54s user 19.14s system 89% cpu 1:40.03 total\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1549/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1549/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1539", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1539/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1539/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1539/events", "html_url": "https://github.com/ansible-community/molecule/pull/1539", "id": 376477318, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI3Njg1OTM4", "number": 1539, "title": "Adds docker python module as requirement", "user": {"login": "wilmardo", "id": 8994658, "node_id": "MDQ6VXNlcjg5OTQ2NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/8994658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wilmardo", "html_url": "https://github.com/wilmardo", "followers_url": "https://api.github.com/users/wilmardo/followers", "following_url": "https://api.github.com/users/wilmardo/following{/other_user}", "gists_url": "https://api.github.com/users/wilmardo/gists{/gist_id}", "starred_url": "https://api.github.com/users/wilmardo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wilmardo/subscriptions", "organizations_url": "https://api.github.com/users/wilmardo/orgs", "repos_url": "https://api.github.com/users/wilmardo/repos", "events_url": "https://api.github.com/users/wilmardo/events{/privacy}", "received_events_url": "https://api.github.com/users/wilmardo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2018-11-01T16:52:43Z", "updated_at": "2019-10-18T14:17:53Z", "closed_at": "2018-11-10T10:29:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1539", "html_url": "https://github.com/ansible-community/molecule/pull/1539", "diff_url": "https://github.com/ansible-community/molecule/pull/1539.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1539.patch", "merged_at": null}, "body": "Adds the docker python module as requirement for molecule.\r\nCan't find the issue or PR at the moment but if I remember correctly @ssbarnea mentioned that the user experience was somewhat lacking since out of the box Molecule doesn't work.\r\n\r\nSince Docker is the default driver I don't see a problem with installing it as a dependency for Molecule.\r\n\r\nThe [docker_container module](https://docs.ansible.com/ansible/latest/modules/docker_container_module.html) requires >1.7.0 but the docker module only goes back to 2.0.0 on [PyPi ](https://pypi.org/project/docker/#history)(then the renaming happened from docker-py > docker). So everything above 2.0.0 should be alright.\r\n\r\nThe only point for discussion is Python 2.6 which requires the older docker-py module.\r\nBut since Ansible dropped some of the 2.6 support in [v2.7](https://docs.ansible.com/ansible/devel/porting_guides/porting_guide_2.7.html) I do not see an issue in this.\r\nShould I add the requirement for Python 2.7 somewhere in the docs?\r\n\r\n#### PR Type\r\n\r\n- Feature Pull Request\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1539/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1539/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1530", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1530/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1530/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1530/events", "html_url": "https://github.com/ansible-community/molecule/pull/1530", "id": 375549617, "node_id": "MDExOlB1bGxSZXF1ZXN0MjI2OTY5MTY2", "number": 1530, "title": "Bump ansible-lint to 3.5.1", "user": {"login": "wilmardo", "id": 8994658, "node_id": "MDQ6VXNlcjg5OTQ2NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/8994658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wilmardo", "html_url": "https://github.com/wilmardo", "followers_url": "https://api.github.com/users/wilmardo/followers", "following_url": "https://api.github.com/users/wilmardo/following{/other_user}", "gists_url": "https://api.github.com/users/wilmardo/gists{/gist_id}", "starred_url": "https://api.github.com/users/wilmardo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wilmardo/subscriptions", "organizations_url": "https://api.github.com/users/wilmardo/orgs", "repos_url": "https://api.github.com/users/wilmardo/repos", "events_url": "https://api.github.com/users/wilmardo/events{/privacy}", "received_events_url": "https://api.github.com/users/wilmardo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-10-30T15:27:17Z", "updated_at": "2018-11-11T17:02:12Z", "closed_at": "2018-11-11T17:02:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1530", "html_url": "https://github.com/ansible-community/molecule/pull/1530", "diff_url": "https://github.com/ansible-community/molecule/pull/1530.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1530.patch", "merged_at": "2018-11-11T17:02:12Z"}, "body": "Fixes #1525", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1530/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1530/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1511", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1511/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1511/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1511/events", "html_url": "https://github.com/ansible-community/molecule/issues/1511", "id": 370608270, "node_id": "MDU6SXNzdWUzNzA2MDgyNzA=", "number": 1511, "title": "Documentation for managed: false incorrect", "user": {"login": "wouterhummelink", "id": 5487419, "node_id": "MDQ6VXNlcjU0ODc0MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5487419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wouterhummelink", "html_url": "https://github.com/wouterhummelink", "followers_url": "https://api.github.com/users/wouterhummelink/followers", "following_url": "https://api.github.com/users/wouterhummelink/following{/other_user}", "gists_url": "https://api.github.com/users/wouterhummelink/gists{/gist_id}", "starred_url": "https://api.github.com/users/wouterhummelink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wouterhummelink/subscriptions", "organizations_url": "https://api.github.com/users/wouterhummelink/orgs", "repos_url": "https://api.github.com/users/wouterhummelink/repos", "events_url": "https://api.github.com/users/wouterhummelink/events{/privacy}", "received_events_url": "https://api.github.com/users/wouterhummelink/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-16T13:19:19Z", "updated_at": "2019-03-07T09:39:02Z", "closed_at": "2019-03-07T09:39:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.5.2\r\n```\r\n\r\n```\r\nmolecule --version\r\n2.18.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\n\r\n\r\n# Desired Behavior\r\n\r\nIn the documentation for managed false there is a section for specifying connection options\r\n```\r\ndriver:\r\n  name: delegated\r\n  options:\r\n    managed: False\r\n    login_cmd_template: 'docker exec -ti {instance} bash'\r\n    ansible_connection_options:\r\n      connection: docker\r\nplatforms:\r\n  - name: instance-docker\r\n```\r\n\r\nThis should result in docker being used to connect to the container, but doesn't, unless the `connection` is replaced by `ansible_connection`\r\nThe login_cmd_template also did not appear to have an effect.\r\n\r\n# Actual Behaviour (Bug report only)\r\n```\r\n[root@tlrvwx43vl ansible-role-mirrorlist]# molecule test\r\n--> Validating schema /root/ansible-role-mirrorlist/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 verify\r\n    \u2514\u2500\u2500 destroy\r\n \r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\n    - changing role role-detect-become-method from master to master\r\n    - extracting role-detect-become-method to /tmp/molecule/ansible-role-mirrorlist/default/roles/role-detect-become-method\r\n    - role-detect-become-method (master) was installed successfully\r\n    - changing role certgen from master to master\r\n    - extracting certgen to /tmp/molecule/ansible-role-mirrorlist/default/roles/certgen\r\n    - certgen (master) was installed successfully\r\n    - dependency role-detect-become-method is already installed, skipping.\r\nDependency completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'syntax'\r\n \r\n    playbook: /root/ansible-role-mirrorlist/molecule/default/playbook.yml\r\n \r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /root/ansible-role-mirrorlist/...\r\nLint completed successfully.\r\n--> Executing Yamllint on files found in /root/ansible-role-mirrorlist/molecule/default/tests/...\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /root/ansible-role-mirrorlist/molecule/default/playbook.yml...\r\nLint completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nSkipping, instances are delegated.\r\n--> Scenario: 'default'\r\n--> Action: 'prepare'\r\nSkipping, instances already prepared.\r\n--> Scenario: 'default'\r\n--> Action: 'converge'\r\n \r\n    PLAY [all] *********************************************************************\r\n \r\n    TASK [Gathering Facts] *********************************************************\r\n    fatal: [rhel7-3]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: Could not create directory '/root/.ssh'.\\r\\nWarning: Permanently added 'rhel7-3,10.199.201.178' (ECDSA) to the list of known hosts.\\r\\nPermission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\\r\\n\", \"unreachable\": true}\r\n    fatal: [rhel7-2]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: Warning: Permanently added 'rhel7-2,10.197.210.188' (ECDSA) to the list of known hosts.\\r\\nPermission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\\r\\n\", \"unreachable\": true}\r\n    fatal: [rhel7-1]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Failed to connect to the host via ssh: Warning: Permanently added 'rhel7-1,10.199.201.184' (ECDSA) to the list of known hosts.\\r\\nPermission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\\r\\n\", \"unreachable\": true}\r\n \r\n    PLAY RECAP *********************************************************************\r\n    rhel7-1                    : ok=0    changed=0    unreachable=1    failed=0\r\n    rhel7-2                    : ok=0    changed=0    unreachable=1    failed=0\r\n    rhel7-3                    : ok=0    changed=0    unreachable=1    failed=0\r\n \r\n \r\nERROR:\r\nAn error occurred during the test sequence action: 'converge'. Cleaning up.\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nSkipping, instances are delegated.\r\n```\r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](http://stackoverflow.com/help/mcve) with\r\noutput of running `molecule --debug`.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1511/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1511/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1500", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1500/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1500/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1500/events", "html_url": "https://github.com/ansible-community/molecule/pull/1500", "id": 367618878, "node_id": "MDExOlB1bGxSZXF1ZXN0MjIwOTg5ODQ4", "number": 1500, "title": "Fix delegate", "user": {"login": "rahul0705", "id": 3588185, "node_id": "MDQ6VXNlcjM1ODgxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/3588185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rahul0705", "html_url": "https://github.com/rahul0705", "followers_url": "https://api.github.com/users/rahul0705/followers", "following_url": "https://api.github.com/users/rahul0705/following{/other_user}", "gists_url": "https://api.github.com/users/rahul0705/gists{/gist_id}", "starred_url": "https://api.github.com/users/rahul0705/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rahul0705/subscriptions", "organizations_url": "https://api.github.com/users/rahul0705/orgs", "repos_url": "https://api.github.com/users/rahul0705/repos", "events_url": "https://api.github.com/users/rahul0705/events{/privacy}", "received_events_url": "https://api.github.com/users/rahul0705/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}, {"id": 697048155, "node_id": "MDU6TGFiZWw2OTcwNDgxNTU=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/docs", "name": "docs", "color": "4071a5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-10-08T02:06:01Z", "updated_at": "2019-01-24T11:39:11Z", "closed_at": "2019-01-24T11:38:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1500", "html_url": "https://github.com/ansible-community/molecule/pull/1500", "diff_url": "https://github.com/ansible-community/molecule/pull/1500.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1500.patch", "merged_at": "2019-01-24T11:38:32Z"}, "body": "The delegate role had a bug in the template. Corrected said bug.\r\n\r\nAlso updated the delegate docs to show how to pass connection information to ansible.\r\n\r\nAdded new blurb about how to use localhost as a connection.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1500/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 2, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1500/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1457", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1457/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1457/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1457/events", "html_url": "https://github.com/ansible-community/molecule/issues/1457", "id": 354764486, "node_id": "MDU6SXNzdWUzNTQ3NjQ0ODY=", "number": 1457, "title": "BUG: [driver: docker] molecule login problem", "user": {"login": "vutkin", "id": 25753488, "node_id": "MDQ6VXNlcjI1NzUzNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/25753488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vutkin", "html_url": "https://github.com/vutkin", "followers_url": "https://api.github.com/users/vutkin/followers", "following_url": "https://api.github.com/users/vutkin/following{/other_user}", "gists_url": "https://api.github.com/users/vutkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/vutkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vutkin/subscriptions", "organizations_url": "https://api.github.com/users/vutkin/orgs", "repos_url": "https://api.github.com/users/vutkin/repos", "events_url": "https://api.github.com/users/vutkin/events{/privacy}", "received_events_url": "https://api.github.com/users/vutkin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/13", "html_url": "https://github.com/ansible-community/molecule/milestone/13", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/13/labels", "id": 4194033, "node_id": "MDk6TWlsZXN0b25lNDE5NDAzMw==", "number": 13, "title": "2.18", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 23, "state": "closed", "created_at": "2019-04-02T14:57:51Z", "updated_at": "2019-04-02T15:01:19Z", "due_on": null, "closed_at": "2019-04-02T15:01:19Z"}, "comments": 0, "created_at": "2018-08-28T14:43:52Z", "updated_at": "2019-04-02T14:58:05Z", "closed_at": "2018-08-31T03:05:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\n2.5.8\r\n```\r\n\r\n```\r\nmolecule --version\r\n2.16.0\r\n```\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nI run test using docker driver.\r\nWhen I login into docker container and try to run vi for ex. it should open without any problems.\r\n\r\n[root@test-docker-centos-gitlab-runner /]# vi test\r\n\r\n# Actual Behaviour (Bug report only)\r\nI run test using docker driver.\r\nWhen I login into docker container and try to run vi:\r\n\r\ncorrect open edit of new file.\r\n\r\n```\r\n[root@test-docker-centos-gitlab-runner /]# vi test\r\n\r\nE437: terminal capability \"cm\" required\r\nPress ENTER or type command to continue\r\n```\r\n\r\nQuickest fix run: export TERM=xterm", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1457/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1437", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1437/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1437/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1437/events", "html_url": "https://github.com/ansible-community/molecule/pull/1437", "id": 350215614, "node_id": "MDExOlB1bGxSZXF1ZXN0MjA4MTIwOTcz", "number": 1437, "title": "Implement MOLECULE_BASE_FILE and accept list input to molecule_from_yaml filter", "user": {"login": "uSpike", "id": 5686650, "node_id": "MDQ6VXNlcjU2ODY2NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/5686650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uSpike", "html_url": "https://github.com/uSpike", "followers_url": "https://api.github.com/users/uSpike/followers", "following_url": "https://api.github.com/users/uSpike/following{/other_user}", "gists_url": "https://api.github.com/users/uSpike/gists{/gist_id}", "starred_url": "https://api.github.com/users/uSpike/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uSpike/subscriptions", "organizations_url": "https://api.github.com/users/uSpike/orgs", "repos_url": "https://api.github.com/users/uSpike/repos", "events_url": "https://api.github.com/users/uSpike/events{/privacy}", "received_events_url": "https://api.github.com/users/uSpike/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133122, "node_id": "MDU6TGFiZWwyODgxMzMxMjI=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/enhancement", "name": "enhancement", "color": "ededed", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-08-13T22:24:52Z", "updated_at": "2019-09-06T00:50:15Z", "closed_at": "2019-09-06T00:50:15Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1437", "html_url": "https://github.com/ansible-community/molecule/pull/1437", "diff_url": "https://github.com/ansible-community/molecule/pull/1437.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1437.patch", "merged_at": null}, "body": "Fixes #1423", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1437/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1437/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1402", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1402/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1402/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1402/events", "html_url": "https://github.com/ansible-community/molecule/issues/1402", "id": 342922529, "node_id": "MDU6SXNzdWUzNDI5MjI1Mjk=", "number": 1402, "title": "Test running on the wrong VM with multiple-instance and Vagrant", "user": {"login": "robsonpeixoto", "id": 124390, "node_id": "MDQ6VXNlcjEyNDM5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/124390?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robsonpeixoto", "html_url": "https://github.com/robsonpeixoto", "followers_url": "https://api.github.com/users/robsonpeixoto/followers", "following_url": "https://api.github.com/users/robsonpeixoto/following{/other_user}", "gists_url": "https://api.github.com/users/robsonpeixoto/gists{/gist_id}", "starred_url": "https://api.github.com/users/robsonpeixoto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robsonpeixoto/subscriptions", "organizations_url": "https://api.github.com/users/robsonpeixoto/orgs", "repos_url": "https://api.github.com/users/robsonpeixoto/repos", "events_url": "https://api.github.com/users/robsonpeixoto/events{/privacy}", "received_events_url": "https://api.github.com/users/robsonpeixoto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/12", "html_url": "https://github.com/ansible-community/molecule/milestone/12", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/12/labels", "id": 4194032, "node_id": "MDk6TWlsZXN0b25lNDE5NDAzMg==", "number": 12, "title": "2.17", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2019-04-02T14:57:43Z", "updated_at": "2019-04-02T15:01:12Z", "due_on": null, "closed_at": "2019-04-02T15:01:12Z"}, "comments": 16, "created_at": "2018-07-19T23:25:26Z", "updated_at": "2019-04-02T15:00:37Z", "closed_at": "2018-07-24T00:38:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\n\r\nansible 2.6.1.post0 (stable-2.6 8c829778d1) last updated 2018/07/17 21:18:01 (GMT -300)\r\n  config file = /Users/robinho/.ansible.cfg\r\n  configured module search path = [u'/Users/robinho/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/robinho/app/ansible/src/lib/ansible\r\n  executable location = /Users/robinho/app/ansible/venv/bin/ansible\r\n  python version = 2.7.15 (default, Jun 17 2018, 12:46:58) [GCC 4.2.1 Compatible Apple LLVM 9.1.0 (clang-902.0.39.2)]\r\n```\r\n\r\n```\r\nmolecule --version\r\n\r\nmolecule, version 2.16.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- source\r\n\r\n# Desired Behavior\r\n\r\nRun the test on the right virtual machine\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nHi guys!\r\n\r\nI'm using molecule + vagrant to test a ansible module.\r\nI'd like to test it on Ubuntu 16.04 and 18.04.\r\n\r\nSo, my `molecule.yml` is:\r\n```yaml\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n  provider:\r\n    name: virtualbox\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: ubuntu-xenial64\r\n    box: ubuntu/xenial64\r\n  - name: ubuntu-bionic64\r\n    box: ubuntu/bionic64\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\nI got a fail on the test and I try to debug. As pdb doesn't work,\r\nI add an assert forcing the failure after run the command. \r\n```python\r\ndef test_hostname_is_resolved(host):\r\n    hostname_cmd = host.run('hostname -s')\r\n    assert hostname_cmd.rc == 0\r\n    assert hostname_cmd.stdout == ''\r\n```\r\n\r\nThe output is:\r\n```\r\n___\r\n_ test_hostname_is_resolved[ansible://ubuntu-bionic64] ____\r\n\r\n    host = <testinfra.host.Host object at 0x109bbb550>, Ansible = <ansible>\r\n\r\n        def test_hostname_is_resolved(host, Ansible):\r\n            hostname_cmd = host.run('hostname -s')\r\n            assert hostname_cmd.rc == 0\r\n    >       assert hostname_cmd.stdout == ''\r\n    E       AssertionError: assert 'ubuntu-xenial64' == ''\r\n    E         - ubuntu-xenial64\r\n\r\n    tests/test_default.py:40: AssertionError\r\n    ____ test_hostname_is_resolved[ansible://ubuntu-xenial64] ____\r\n\r\n    host = <testinfra.host.Host object at 0x109bbb8d0>, Ansible = <ansible>\r\n\r\n        def test_hostname_is_resolved(host, Ansible):\r\n            hostname_cmd = host.run('hostname -s')\r\n            assert hostname_cmd.rc == 0\r\n    >       assert hostname_cmd.stdout == ''\r\n    E       AssertionError: assert 'ubuntu-bionic64' == ''\r\n    E         - ubuntu-bionic64\r\n\r\n```\r\n\r\nSo, the `bionic64` tests are running on `xenial64`.\r\nAnd the `xenial64` tests are running on `bionic64`.\r\n\r\nBut the login works well:\r\n\r\n```\r\n$ molecule login --host ubuntu-xenial64\r\n--> Validating schema .../molecule/default/molecule.yml.\r\nValidation completed successfully.\r\nWarning: Permanently added '[127.0.0.1]:2222' (ECDSA) to the list of known hosts.\r\n...\r\nvagrant@ubuntu-xenial64:~$ hostname -s\r\nubuntu-xenial64\r\n\r\n$ molecule login --host ubuntu-bionic64\r\n--> Validating schema .../molecule/default/molecule.yml.\r\nValidation completed successfully.\r\nWarning: Permanently added '[127.0.0.1]:2200' (ECDSA) to the list of known hosts.\r\nvagrant@ubuntu-bionic64:~$ hostname -s\r\nubuntu-bionic64\r\n```\r\n\r\nHas anyone got this error? How to solve it?\r\n\r\nThanks\r\n\r\nBelow has the output of `molecule --debug test` for the toy project https://github.com/robsonpeixoto/molecule-vagrant-bug.\r\n\r\nhttps://gist.github.com/robsonpeixoto/bab49bb305b865e839f2b780b6a400f2", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1402/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1402/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1399", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1399/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1399/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1399/events", "html_url": "https://github.com/ansible-community/molecule/issues/1399", "id": 342334483, "node_id": "MDU6SXNzdWUzNDIzMzQ0ODM=", "number": 1399, "title": "IndexError: tuple index out of range", "user": {"login": "decentral1se", "id": 1991377, "node_id": "MDQ6VXNlcjE5OTEzNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1991377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decentral1se", "html_url": "https://github.com/decentral1se", "followers_url": "https://api.github.com/users/decentral1se/followers", "following_url": "https://api.github.com/users/decentral1se/following{/other_user}", "gists_url": "https://api.github.com/users/decentral1se/gists{/gist_id}", "starred_url": "https://api.github.com/users/decentral1se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decentral1se/subscriptions", "organizations_url": "https://api.github.com/users/decentral1se/orgs", "repos_url": "https://api.github.com/users/decentral1se/repos", "events_url": "https://api.github.com/users/decentral1se/events{/privacy}", "received_events_url": "https://api.github.com/users/decentral1se/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/12", "html_url": "https://github.com/ansible-community/molecule/milestone/12", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/12/labels", "id": 4194032, "node_id": "MDk6TWlsZXN0b25lNDE5NDAzMg==", "number": 12, "title": "2.17", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2019-04-02T14:57:43Z", "updated_at": "2019-04-02T15:01:12Z", "due_on": null, "closed_at": "2019-04-02T15:01:12Z"}, "comments": 1, "created_at": "2018-07-18T13:43:20Z", "updated_at": "2019-04-02T15:00:36Z", "closed_at": "2018-07-26T21:50:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.6.1\r\n  config file = None\r\n  configured module search path = ['/home/foo/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/foo/.local/share/virtualenvs/provision-role-cU8asFVH/lib/python3.6/site-packages/ansible\r\n  executable location = /home/foo/.local/share/virtualenvs/provision-role-cU8asFVH/bin/ansible\r\n  python version = 3.6.5 (default, Jun 19 2018, 20:58:47) [GCC 6.3.0 20170516]\r\n```\r\n\r\n```\r\nmolecule, version 2.16.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pipenv\r\n\r\nAnsible installation method (one of):\r\n\r\n- pipenv\r\n\r\n# Desired Behavior\r\n\r\nSee the matrix\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\n(provision-role-cU8asFVH) \u279c  provision-role (master) \u2717 molecule matrix                                                                                  \r\nTraceback (most recent call last):\r\n  File \"/home/foo/.local/share/virtualenvs/provision-role-cU8asFVH/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/foo/.local/share/virtualenvs/provision-role-cU8asFVH/lib/python3.6/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/foo/.local/share/virtualenvs/provision-role-cU8asFVH/lib/python3.6/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/foo/.local/share/virtualenvs/provision-role-cU8asFVH/lib/python3.6/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/foo/.local/share/virtualenvs/provision-role-cU8asFVH/lib/python3.6/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/foo/.local/share/virtualenvs/provision-role-cU8asFVH/lib/python3.6/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/foo/.local/share/virtualenvs/provision-role-cU8asFVH/lib/python3.6/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/foo/.local/share/virtualenvs/provision-role-cU8asFVH/lib/python3.6/site-packages/molecule/command/matrix.py\", line 76, in matrix\r\n    'subcommand': subcommand[0],\r\nIndexError: tuple index out of range\r\n```\r\n\r\nIt may also be worth noting that I am moving from one driver to another in my testing of each feature set. So, I moved from vagrant to docker. When I try to run `molecule create -d vagrant` I see:\r\n\r\n```\r\n(provision-role-cU8asFVH) \u279c  provision-role (master) \u2717 molecule destroy -d vagrant\r\nERROR: Instance(s) were created with the 'docker' driver, but the subcommand is using 'vagrant' driver.\r\n```\r\n\r\nThat may be unrelated though.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1399/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1385", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1385/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1385/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1385/events", "html_url": "https://github.com/ansible-community/molecule/issues/1385", "id": 341032468, "node_id": "MDU6SXNzdWUzNDEwMzI0Njg=", "number": 1385, "title": "\"provider_override_args\" has no effect", "user": {"login": "sveatlo", "id": 2019079, "node_id": "MDQ6VXNlcjIwMTkwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/2019079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sveatlo", "html_url": "https://github.com/sveatlo", "followers_url": "https://api.github.com/users/sveatlo/followers", "following_url": "https://api.github.com/users/sveatlo/following{/other_user}", "gists_url": "https://api.github.com/users/sveatlo/gists{/gist_id}", "starred_url": "https://api.github.com/users/sveatlo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sveatlo/subscriptions", "organizations_url": "https://api.github.com/users/sveatlo/orgs", "repos_url": "https://api.github.com/users/sveatlo/repos", "events_url": "https://api.github.com/users/sveatlo/events{/privacy}", "received_events_url": "https://api.github.com/users/sveatlo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-13T14:06:28Z", "updated_at": "2018-07-16T05:04:45Z", "closed_at": "2018-07-16T05:04:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.6.1\r\n  config file = None\r\n  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.13 (default, Nov 24 2017, 17:33:09) [GCC 6.3.0 20170516]\r\n```\r\n\r\n```\r\nmolecule --version\r\nmolecule, version 2.16.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nI am trying to generate an equivalent of this Vagrantfile\r\n```\r\nVagrant.configure(\"2\") do |config|\r\n  # boxes at https://vagrantcloud.com/search.\r\n  config.vm.box = \"debian/stretch64\"\r\n  config.vm.synced_folder './', '/vagrant', type: 'rsync'\r\n\r\n  config.vm.provider :libvirt do |libvirt, override|\r\n    libvirt.host = 'somehost'\r\n    libvirt.username = 'jenkins'\r\n    libvirt.connect_via_ssh = true\r\n    override.ssh.proxy_command = \"ssh somehost -l jenkins nc -N %h %p\"\r\n  end\r\nend\r\n```\r\nmy molecule.yml:\r\n```\r\n...\r\nplatforms:\r\n  - name: instance\r\n    box: debian/stretch64\r\n    instance_raw_config_args:\r\n      - \"vm.synced_folder './', '/vagrant', type: 'rsync'\"\r\n    provider_options:\r\n      host: '\"somehost\"'\r\n      username: '\"jenkins\"'\r\n      connect_via_ssh: true\r\n    provider_override_args:\r\n      - 'ssh.proxy_command = \"ssh somehost -l jenkins nc -N %h %p\"'\r\n...\r\n```\r\n\r\n# Actual Behaviour (Bug report only)\r\nthe generated file `/tmp/molecule/<role-name>/default/vagrant.yml` doesn't have the `provider.override_args` filled, therefore the vagrant box never finishes starting and the `molecule test` command gets stuck\r\n```\r\n...\r\nprovider:\r\n  name: libvirt\r\n  options:\r\n    connect_via_ssh: true\r\n    cpus: 2\r\n    host: '\"somehost\"'\r\n    memory: 512\r\n    username: '\"jenkins\"'\r\n  override_args: null\r\n  raw_config_args: null\r\n```\r\nIf I change the file manually and run `vagrant up`, the box gets up and running without any problems.\r\n```\r\n...\r\n- 'ssh.proxy_command = \"ssh retard.moderntv.eu -l jenkins-vagrant nc -N %h %p\"'\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1385/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1385/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1358", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1358/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1358/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1358/events", "html_url": "https://github.com/ansible-community/molecule/issues/1358", "id": 338063256, "node_id": "MDU6SXNzdWUzMzgwNjMyNTY=", "number": 1358, "title": "Variables in .env.yml get lost before provisioning tasks", "user": {"login": "1efty", "id": 18194777, "node_id": "MDQ6VXNlcjE4MTk0Nzc3", "avatar_url": "https://avatars.githubusercontent.com/u/18194777?v=4", "gravatar_id": "", "url": "https://api.github.com/users/1efty", "html_url": "https://github.com/1efty", "followers_url": "https://api.github.com/users/1efty/followers", "following_url": "https://api.github.com/users/1efty/following{/other_user}", "gists_url": "https://api.github.com/users/1efty/gists{/gist_id}", "starred_url": "https://api.github.com/users/1efty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/1efty/subscriptions", "organizations_url": "https://api.github.com/users/1efty/orgs", "repos_url": "https://api.github.com/users/1efty/repos", "events_url": "https://api.github.com/users/1efty/events{/privacy}", "received_events_url": "https://api.github.com/users/1efty/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-07-03T21:39:55Z", "updated_at": "2018-08-14T08:48:02Z", "closed_at": "2018-08-14T08:48:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.6.0\r\n```\r\n\r\n```\r\nmolecule 2.15.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nThe variables set in .env.yml are interpolated and make their way into the platforms list.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nThe `interpolated_config` when printed to stdout is correct, but when molecule tries to provision the platforms, those values are lost and all that's left are empty strings where those values should be.\r\n\r\nHere is the tree of my project:\r\n```\r\n.\r\n\u251c\u2500\u2500 converge.yml\r\n\u251c\u2500\u2500 .env.yml\r\n\u251c\u2500\u2500 .gitignore\r\n\u251c\u2500\u2500 group_vars\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 all\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 iptables.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 knockd.yml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 openssh.yml\r\n\u251c\u2500\u2500 molecule\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 default\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 Dockerfile.j2\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 molecule.yml\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 playbook.yml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 tests\r\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 test_default.py\r\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 test_default.pyc\r\n\u251c\u2500\u2500 roles\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 requirements.yml\r\n\u2514\u2500\u2500 .yamllint\r\n\r\n```\r\n\r\nHere is my molecule.yml\r\n\r\n```yaml\r\n---\r\ndependency:\r\n  name: galaxy\r\n  options:\r\n    force: false\r\n    role-file: roles/requirements.yml\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: js.test\r\n    image: irs/docker-ansible/centos7:latest\r\n    registry:\r\n      url: redacted\r\n    force: false\r\n    command: /sbin/init\r\n    privileged: true\r\n    volumes: ['/sys/fs/cgroup:/sys/fs/cgroup:ro']\r\n    published_ports:\r\n      - \"127.0.0.1:${js_ssh_port}:${js_ssh_port}/tcp\"\r\n      - \"127.0.0.1:${js_knock_port1}:${js_knock_port1}/tcp\"\r\n      - \"127.0.0.1:${js_knock_port2}:${js_knock_port2}/tcp\"\r\n      - \"127.0.0.1:${js_knock_port3}:${js_knock_port3}/tcp\"\r\nprovisioner:\r\n  name: ansible\r\n  playbooks:\r\n    converge: \"../../converge.yml\"\r\n  inventory:\r\n    host_vars:\r\n      js.test:\r\n        js_ssh_port: \"${js_ssh_port}\"\r\n        js_knock_port1: \"${js_knock_port1}\"\r\n        js_knock_port2: \"${js_knock_port2}\"\r\n        js_knock_port3: \"${js_knock_port3}\"\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\nHere is my .env.yml\r\n```yaml\r\njs_ssh_port: \"8022\"\r\n\r\njs_knock_port1: \"15689\"\r\njs_knock_port2: \"11754\"\r\njs_knock_port3: \"32454\"\r\n\r\njs_iptables_rules: {}\r\n```\r\n\r\nThe printed `interpolated_config`\r\n```yaml\r\n---\r\ndependency:\r\n  name: galaxy\r\n  options:\r\n    force: false\r\n    role-file: roles/requirements.yml\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: js.test\r\n    image: irs/docker-ansible/centos7:latest\r\n    registry:\r\n      url:redacted\r\n    force: false\r\n    command: /sbin/init\r\n    privileged: true\r\n    volumes: ['/sys/fs/cgroup:/sys/fs/cgroup:ro']\r\n    published_ports:\r\n      - \"127.0.0.1:8022:8022/tcp\"\r\n      - \"127.0.0.1:15689:15689/tcp\"\r\n      - \"127.0.0.1:11754:11754/tcp\"\r\n      - \"127.0.0.1:32454:32454/tcp\"\r\nprovisioner:\r\n  name: ansible\r\n  playbooks:\r\n    converge: \"../../converge.yml\"\r\n  inventory:\r\n    host_vars:\r\n      js.test:\r\n        js_ssh_port: \"8022\"\r\n        js_knock_port1: \"15689\"\r\n        js_knock_port2: \"11754\"\r\n        js_knock_port3: \"32454\"\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\n\r\nThe item in the platforms list:\r\n```json\r\n\"item\": {\r\n                \"command\": \"/sbin/init\", \r\n                \"force\": false, \r\n                \"image\": \"irs/docker-ansible/centos7:latest\", \r\n                \"name\": \"js.test\", \r\n                \"privileged\": true, \r\n                \"published_ports\": [\r\n                    \"127.0.0.1::/tcp\", \r\n                    \"127.0.0.1::/tcp\", \r\n                    \"127.0.0.1::/tcp\", \r\n                    \"127.0.0.1::/tcp\"\r\n                ], \r\n                \"registry\": {\r\n                    \"url\": \"redacted\"\r\n                }, \r\n                \"volumes\": [\r\n                    \"/sys/fs/cgroup:/sys/fs/cgroup:ro\"\r\n                ]\r\n            }, \r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1358/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1358/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1343", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1343/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1343/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1343/events", "html_url": "https://github.com/ansible-community/molecule/issues/1343", "id": 334995889, "node_id": "MDU6SXNzdWUzMzQ5OTU4ODk=", "number": 1343, "title": "Cannot lint playbooks and roles with ansible-lint", "user": {"login": "nmulvihill", "id": 11655305, "node_id": "MDQ6VXNlcjExNjU1MzA1", "avatar_url": "https://avatars.githubusercontent.com/u/11655305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nmulvihill", "html_url": "https://github.com/nmulvihill", "followers_url": "https://api.github.com/users/nmulvihill/followers", "following_url": "https://api.github.com/users/nmulvihill/following{/other_user}", "gists_url": "https://api.github.com/users/nmulvihill/gists{/gist_id}", "starred_url": "https://api.github.com/users/nmulvihill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nmulvihill/subscriptions", "organizations_url": "https://api.github.com/users/nmulvihill/orgs", "repos_url": "https://api.github.com/users/nmulvihill/repos", "events_url": "https://api.github.com/users/nmulvihill/events{/privacy}", "received_events_url": "https://api.github.com/users/nmulvihill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/11", "html_url": "https://github.com/ansible-community/molecule/milestone/11", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/11/labels", "id": 4194031, "node_id": "MDk6TWlsZXN0b25lNDE5NDAzMQ==", "number": 11, "title": "2.16", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2019-04-02T14:57:36Z", "updated_at": "2019-04-02T15:01:15Z", "due_on": null, "closed_at": "2019-04-02T15:01:15Z"}, "comments": 4, "created_at": "2018-06-22T19:38:43Z", "updated_at": "2019-04-02T15:00:11Z", "closed_at": "2018-06-22T21:43:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\n2.3.1\r\n```\r\n\r\n```\r\nmolecule --version\r\n2.15.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\n\r\n# Desired Behavior\r\nWhen specifying a different linter in molecule.yml (not the provisioner or verifyer linter), I would like to be able to use ansible-lint. I have some custom ansible-lint rules that I would want ran against the Playbook/role before running the tests, but when I specify ansible-lint, the run fails.\r\n\r\n# Actual Behaviour (Bug report only)\r\nmolecule.yml:\r\n```\r\nlint:\r\n  name: ansible-lint\r\n  options:\r\n    r: ../some/path/to/lint_rules\r\n    force-color: True\r\n```\r\n\r\nmolecule --debug lint:\r\n```\r\nValidation completed successfully.\r\nTraceback (most recent call last):\r\n  File \"/home/username/miniconda2/envs/molecule2.3/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/molecule/command/lint.py\", line 101, in lint\r\n    base.get_configs(args, command_args), scenario_name)\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/molecule/command/base.py\", line 121, in get_configs\r\n    ) for c in glob.glob(MOLECULE_GLOB)\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/molecule/config.py\", line 61, in __call__\r\n    obj.after_init()\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/molecule/config.py\", line 107, in after_init\r\n    self.config = self._reget_config()\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/molecule/config.py\", line 280, in _reget_config\r\n    env = util.merge_dicts(os.environ.copy(), self.env)\r\n  File \"/home/username/miniconda2/envs/molecule2.3/lib/python2.7/site-packages/molecule/config.py\", line 189, in env\r\n    'MOLECULE_LINT_NAME': self.lint.name,\r\nAttributeError: 'NoneType' object has no attribute 'name'\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1343/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1343/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1331", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1331/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1331/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1331/events", "html_url": "https://github.com/ansible-community/molecule/issues/1331", "id": 330636448, "node_id": "MDU6SXNzdWUzMzA2MzY0NDg=", "number": 1331, "title": "Validation for registry credentials (password) blocks passing actual credential value to underlying playbook", "user": {"login": "watsonb", "id": 1863643, "node_id": "MDQ6VXNlcjE4NjM2NDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1863643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/watsonb", "html_url": "https://github.com/watsonb", "followers_url": "https://api.github.com/users/watsonb/followers", "following_url": "https://api.github.com/users/watsonb/following{/other_user}", "gists_url": "https://api.github.com/users/watsonb/gists{/gist_id}", "starred_url": "https://api.github.com/users/watsonb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/watsonb/subscriptions", "organizations_url": "https://api.github.com/users/watsonb/orgs", "repos_url": "https://api.github.com/users/watsonb/repos", "events_url": "https://api.github.com/users/watsonb/events{/privacy}", "received_events_url": "https://api.github.com/users/watsonb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/10", "html_url": "https://github.com/ansible-community/molecule/milestone/10", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/10/labels", "id": 4194030, "node_id": "MDk6TWlsZXN0b25lNDE5NDAzMA==", "number": 10, "title": "2.15", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2019-04-02T14:57:30Z", "updated_at": "2019-04-02T15:01:14Z", "due_on": null, "closed_at": "2019-04-02T15:01:14Z"}, "comments": 7, "created_at": "2018-06-08T12:21:07Z", "updated_at": "2019-04-02T14:59:28Z", "closed_at": "2018-06-08T18:09:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\n2.5.2\r\n```\r\n\r\n```\r\nmolecule --version\r\n2.14.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nThe value of the environment variable for the Docker registry variable is passed to the docker create.yml playbook.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nAssume I have exported some environment variables as follows:\r\n```bash\r\nexport DOCKERUSER=foo\r\nexport DOCKERPASS=bar\r\necho $DOCKERUSER\r\n># foo\r\necho $DOCKERPASS\r\n># bar\r\n```\r\nNow, let us examine some platform iterations and their output.  Note: to capture the output, I commented out the `no_log` attribute in the docker create.yml playbook.\r\n\r\nIteration 1:\r\n```yaml\r\n- name: centos7\r\n    image: \"chrismeyers-centos7\"\r\n    registry:\r\n      url: \"my.docker.registry.io\"\r\n      credentials:\r\n        username: $DOCKERUSER\r\n        password: \"{DOCKERPASS}\"\r\n```\r\nObservation:\r\nMolecule correctly parses the `username` attribute and passes the actual underlying value (foo) to the `create.yml` playbook.  The password attribute validates, but Molecule passes the literal string \"{DOCKERPASS}\" to the `create.yml` playbook.  This is the wrong password and the registry throws authentication error (HTTP 401 codes).\r\nOutput:\r\n```bash\r\nTASK [Log into a Docker registry] **********************************************\r\n    failed: [localhost] (item={'image': u'chrismeyers-centos7', 'name': u'centos7', 'registry': {'url': u'my.docker.registry.io', 'credentials': {'username': u'foo', 'password': u'{DOCKERPASS}'}}}) => {\"changed\": false, \"item\": {\"image\": \"chrismeyers-centos7\", \"name\": \"centos7\", \"registry\": {\"credentials\": {\"password\": \"{DOCKERPASS}\", \"username\": \"foo\"}, \"url\": \"my.docker.registry.io\"}}, \"msg\": \"Logging into my.docker.registry.io for user foo failed - 401 Client Error: Unauthorized (\\\"Get https://my.docker.registry.io/v2/: unauthorized: authentication required\\\")\"}\r\n```\r\n\r\nIteration 2:\r\nSlight alteration of the `username` attribute to prove that Molecule can handle both the $VAR and ${VAR} style of environment variable references.\r\n```yaml\r\n- name: centos7\r\n    image: \"chrismeyers-centos7\"\r\n    registry:\r\n      url: \"my.docker.registry.io\"\r\n      credentials:\r\n        username: ${DOCKERUSER}\r\n        password: \"{DOCKERPASS}\"\r\n```\r\nObservation:\r\nMolecule correctly parses the `username` attribute and passes the actual underlying value (foo) to the `create.yml` playbook.  The password attribute validates, but Molecule passes the literal string \"{DOCKERPASS}\" to the `create.yml` playbook.  This is the wrong password and the registry throws authentication error (HTTP 401 codes).\r\nOutput:\r\n```bash\r\nTASK [Log into a Docker registry] **********************************************\r\n    failed: [localhost] (item={'image': u'chrismeyers-centos7', 'name': u'centos7', 'registry': {'url': u'my.docker.registry.io', 'credentials': {'username': u'foo', 'password': u'{DOCKERPASS}'}}}) => {\"changed\": false, \"item\": {\"image\": \"chrismeyers-centos7\", \"name\": \"centos7\", \"registry\": {\"credentials\": {\"password\": \"{DOCKERPASS}\", \"username\": \"foo\"}, \"url\": \"my.docker.registry.io\"}}, \"msg\": \"Logging into my.docker.registry.io for user foo failed - 401 Client Error: Unauthorized (\\\"Get https://my.docker.registry.io/v2/: unauthorized: authentication required\\\")\"}\r\n```\r\n\r\nIteration 3:\r\nAdding a dollar sign ($) to the `password` attribute:\r\n```yaml\r\n- name: centos7\r\n    image: \"chrismeyers-centos7\"\r\n    registry:\r\n      url: \"my.docker.registry.io\"\r\n      credentials:\r\n        username: ${DOCKERUSER}\r\n        password: \"${DOCKERPASS}\"\r\n```\r\nObservation:\r\nMolecule correctly parses and passes `username` attribute but fails password validation.\r\nOutput:\r\n```bash\r\nERROR: Failed to validate.\r\n\r\n{'platforms': [{0: [{'registry': [{'credentials': [{'password': [\"value does not match regex '^[{$]+[a-z0-9A-z]+[}]*$'\"]}]}]}]}]}\r\n```\r\n\r\nIteration 4:\r\nRemove double quotes from `password` value\r\n```yaml\r\n- name: centos7\r\n    image: \"chrismeyers-centos7\"\r\n    registry:\r\n      url: \"my.docker.registry.io\"\r\n      credentials:\r\n        username: ${DOCKERUSER}\r\n        password: ${DOCKERPASS}\r\n```\r\nObservation:\r\nMolecule correctly parses and passes `username` attribute but fails password validation.\r\nOutput:\r\n```bash\r\nERROR: Failed to validate.\r\n\r\n{'platforms': [{0: [{'registry': [{'credentials': [{'password': [\"value does not match regex '^[{$]+[a-z0-9A-z]+[}]*$'\"]}]}]}]}]}\r\n```\r\n\r\nIteration 5:\r\nRemove double quotes AND curly braces from `password` value\r\n```yaml\r\n- name: centos7\r\n    image: \"chrismeyers-centos7\"\r\n    registry:\r\n      url: \"my.docker.registry.io\"\r\n      credentials:\r\n        username: ${DOCKERUSER}\r\n        password: $DOCKERPASS\r\n```\r\nObservation:\r\nMolecule correctly parses and passes `username` attribute but fails password validation.\r\nOutput:\r\n```bash\r\nERROR: Failed to validate.\r\n\r\n{'platforms': [{0: [{'registry': [{'credentials': [{'password': [\"value does not match regex '^[{$]+[a-z0-9A-z]+[}]*$'\"]}]}]}]}]}\r\n```\r\n\r\nIn summary, to pass the regex validation, you have to wrap the value of the `password` attribute in double/single quotes.  However, doing so passes the string literal of the `password` attribute to the underlying docker `create.yml` playbook, which is not the value of the referenced environment variable.\r\n\r\nThe hacky solution for me has been to delete the regex pattern matching lines (42 and 532)from `molecule/model/schema_v2.py`\r\n\r\nIteration 6:\r\nSchema hack\r\n```yaml\r\n- name: centos7\r\n    image: \"chrismeyers-centos7\"\r\n    registry:\r\n      url: \"my.docker.registry.io\"\r\n      credentials:\r\n        username: $DOCKERUSER\r\n        password: $DOCKERPASS\r\n```\r\nObservation:\r\nMolecule correctly parses the `username` and `password` attributes and passes the actual underlying values (foo and bar) to the `create.yml` playbook.  I see the `auths` section of ~/.docker/config.json properly updated, and the image pulls down to my machine from my custom registry.\r\nOutput:\r\n```bash\r\nTASK [Log into a Docker registry] **********************************************\r\n    changed: [localhost] => (item={'image': u'chrismeyers-centos7', 'name': u'centos7', 'registry': {'url': u'my.docker.registry.io', 'credentials': {'username': u'foo', 'password': u'bar'}}})\r\n```\r\nI truly appreciate the thoughtfulness behind forcing folks to store their sensitive credentials in a place that won't accidentally be committed to source control.  However, I think the implementation needs a little more work.  Kudos on the Molecule project thus far and keep up the good work.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1331/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1330", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1330/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1330/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1330/events", "html_url": "https://github.com/ansible-community/molecule/issues/1330", "id": 329918832, "node_id": "MDU6SXNzdWUzMjk5MTg4MzI=", "number": 1330, "title": "Validation for registry credentials still not working as expected", "user": {"login": "tnierman", "id": 31354782, "node_id": "MDQ6VXNlcjMxMzU0Nzgy", "avatar_url": "https://avatars.githubusercontent.com/u/31354782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tnierman", "html_url": "https://github.com/tnierman", "followers_url": "https://api.github.com/users/tnierman/followers", "following_url": "https://api.github.com/users/tnierman/following{/other_user}", "gists_url": "https://api.github.com/users/tnierman/gists{/gist_id}", "starred_url": "https://api.github.com/users/tnierman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tnierman/subscriptions", "organizations_url": "https://api.github.com/users/tnierman/orgs", "repos_url": "https://api.github.com/users/tnierman/repos", "events_url": "https://api.github.com/users/tnierman/events{/privacy}", "received_events_url": "https://api.github.com/users/tnierman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/10", "html_url": "https://github.com/ansible-community/molecule/milestone/10", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/10/labels", "id": 4194030, "node_id": "MDk6TWlsZXN0b25lNDE5NDAzMA==", "number": 10, "title": "2.15", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2019-04-02T14:57:30Z", "updated_at": "2019-04-02T15:01:14Z", "due_on": null, "closed_at": "2019-04-02T15:01:14Z"}, "comments": 3, "created_at": "2018-06-06T15:27:17Z", "updated_at": "2019-04-02T14:59:28Z", "closed_at": "2018-06-08T18:09:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n\r\n```\r\nansible --version\r\nansible 2.5.4\r\n  config file = /home/Trevor.Nierman/.ansible.cfg\r\n  configured module search path = [u'/home/Trevor.Nierman/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/Trevor.Nierman/venv_ansible-2.5.2/local/lib/python2.7/site-packages/ansible\r\n  executable location = /home/Trevor.Nierman/venv_ansible-2.5.2/bin/ansible\r\n  python version = 2.7.15rc1 (default, Apr 15 2018, 21:51:34) [GCC 7.3.0]\r\n\r\n```\r\n\r\n```\r\nmolecule --version\r\nmolecule, version 2.14.0\r\n```\r\n\r\nMolecule installation method:\r\n\r\n\r\n- pip\r\n\r\nAnsible installation method:\r\n\r\n\r\n- pip\r\n\r\n\r\n# Desired Behavior\r\n\r\nIssue first reported here: https://github.com/metacloud/molecule/issues/1297\r\nMolecule should support the use of private docker registries, as previously mentioned. For example:\r\n\r\n```\r\nplatforms:\r\n  - name: <container_name>\r\n    image: \"<docker_image>\"\r\n    registry:\r\n      url: <docker_registry_url>\r\n      credentials:\r\n        username: \"$DOCKER_REGISTRY_USER\"\r\n        password: \"{$DOCKER_REGISTRY_PASS}\"\r\n```\r\n\r\n(For the sake of clarity, <all_lower> denotes fields that can be plaintext, $ALL_CAPS denotes env vars)\r\nCurrently, this feature requires that username and password be passed as env vars.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\n$ molecule --debug create\r\n--> Validating schema ###/molecule.yml.\r\nERROR: Failed to validate.\r\n\r\n{'platforms': [{0: [{'registry': [{'credentials': [{'password': [\"value does not match regex '^[{$]+[a-z0-9A-z]+[}]*$'\"]}]}]}]}]}\r\n```\r\n\r\nChanging the format in any way, ie: \r\n```\r\n        credentials:\r\n        username: \"$DOCKER_REGISTRY_USER\"\r\n        password: {\"$DOCKER_REGISTRY_PASS\"}\r\n```\r\n\r\n results in:\r\n```\r\n$ molecule --debug create\r\nERROR: Failed to validate.\r\n\r\n{'platforms': [{0: [{'registry': [{'credentials': [{'password': ['must be of string type']}]}]}]}]}\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1330/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1330/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1297", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1297/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1297/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1297/events", "html_url": "https://github.com/ansible-community/molecule/issues/1297", "id": 323246766, "node_id": "MDU6SXNzdWUzMjMyNDY3NjY=", "number": 1297, "title": "Validation for registry credentials not working as expected", "user": {"login": "vmignot", "id": 3500102, "node_id": "MDQ6VXNlcjM1MDAxMDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3500102?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmignot", "html_url": "https://github.com/vmignot", "followers_url": "https://api.github.com/users/vmignot/followers", "following_url": "https://api.github.com/users/vmignot/following{/other_user}", "gists_url": "https://api.github.com/users/vmignot/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmignot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmignot/subscriptions", "organizations_url": "https://api.github.com/users/vmignot/orgs", "repos_url": "https://api.github.com/users/vmignot/repos", "events_url": "https://api.github.com/users/vmignot/events{/privacy}", "received_events_url": "https://api.github.com/users/vmignot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/9", "html_url": "https://github.com/ansible-community/molecule/milestone/9", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/9/labels", "id": 4194023, "node_id": "MDk6TWlsZXN0b25lNDE5NDAyMw==", "number": 9, "title": "2.14", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2019-04-02T14:55:09Z", "updated_at": "2019-04-02T14:57:11Z", "due_on": null, "closed_at": "2019-04-02T14:57:11Z"}, "comments": 3, "created_at": "2018-05-15T14:36:20Z", "updated_at": "2019-04-02T14:56:45Z", "closed_at": "2018-05-16T03:39:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.4.4.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/Victor/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/Victor/.env/randstad/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/Victor/.env/randstad/bin/ansible\r\n  python version = 2.7.14 (default, Mar  9 2018, 23:57:12) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.39.2)]\r\n```\r\n\r\n```\r\nmolecule --version\r\nmolecule, version 2.11.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nSince 2.11, we should be able to log in private registry, by providing credentials in molecule.yml, eg:\r\n```\r\n...\r\nplatforms:\r\n  - name: validation\r\n    image: validation:latest\r\n    registry:\r\n      url: private-registry:5005\r\n      credentials:\r\n        username: \"my_username\"\r\n        password: \"${MOLECULE_REGISTRY_PASSWORD}\"\r\n....\r\n```\r\n\r\nWe should be able to provide either plain-text credentials as well as env vars.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nWhen using this configuration, the validation (see: https://github.com/metacloud/molecule/blob/master/molecule/model/schema_v2.py#L499-L513) will fail:\r\n\r\n```\r\nmolecule --debug create\r\n--> Validating schema /Users/Victor/ansible/roles/validate/molecule/default/molecule.yml.\r\nERROR: Failed to validate.\r\n\r\n{'platforms': [{0: [{'registry': [{'credentials': [{'username': [\"value does not match regex '^[{$]+[a-z0-9A-z]+[}]*$'\"], 'password': [\"value does not match regex '^[{$]+[a-z0-9A-z]+[}]*$'\"]}]}]}]}]}\r\n```\r\n\r\nFirst, the regexp seems to try to force the use of env vars, which is, imo, not a desired behaviour.\r\nSecondly, it looks like the regexp tries to validate that the _value_ of the field looks like an env vars.\r\n\r\n\r\nI have been able to make it work by removing the regexp in the validation for the username and the password.\r\n\r\nPS: Thank you very much for the good work :-)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1297/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1297/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1262", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1262/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1262/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1262/events", "html_url": "https://github.com/ansible-community/molecule/issues/1262", "id": 316055605, "node_id": "MDU6SXNzdWUzMTYwNTU2MDU=", "number": 1262, "title": "Incompatibility with ansible 2.5.1 ?", "user": {"login": "StephenSorriaux", "id": 16797053, "node_id": "MDQ6VXNlcjE2Nzk3MDUz", "avatar_url": "https://avatars.githubusercontent.com/u/16797053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StephenSorriaux", "html_url": "https://github.com/StephenSorriaux", "followers_url": "https://api.github.com/users/StephenSorriaux/followers", "following_url": "https://api.github.com/users/StephenSorriaux/following{/other_user}", "gists_url": "https://api.github.com/users/StephenSorriaux/gists{/gist_id}", "starred_url": "https://api.github.com/users/StephenSorriaux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StephenSorriaux/subscriptions", "organizations_url": "https://api.github.com/users/StephenSorriaux/orgs", "repos_url": "https://api.github.com/users/StephenSorriaux/repos", "events_url": "https://api.github.com/users/StephenSorriaux/events{/privacy}", "received_events_url": "https://api.github.com/users/StephenSorriaux/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/3", "html_url": "https://github.com/ansible-community/molecule/milestone/3", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/3/labels", "id": 4194003, "node_id": "MDk6TWlsZXN0b25lNDE5NDAwMw==", "number": 3, "title": "2.13", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2019-04-02T14:51:03Z", "updated_at": "2019-04-02T14:52:30Z", "due_on": null, "closed_at": "2019-04-02T14:52:30Z"}, "comments": 14, "created_at": "2018-04-19T21:58:27Z", "updated_at": "2019-04-02T14:51:23Z", "closed_at": "2018-04-25T05:26:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\n```\r\n2.5.1\r\n```\r\nmolecule --version\r\n```\r\n2.12.1\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nTestinfra tests should work fine.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nLaunching Testinfra tests trigger the following error:\r\n\r\n`    ============================= test session starts ==============================\r\n    platform linux2 -- Python 2.7.12, pytest-3.5.0, py-1.5.3, pluggy-0.6.0\r\n    rootdir: /home/stephen/dev/kafka-lib/molecule/kafka_1.0.1, inifile:\r\n    plugins: testinfra-1.7.1\r\ncollected 0 items / 1 errors                                                   \r\n    \r\n    ==================================== ERRORS ====================================\r\n    ____________________ ERROR collecting tests/test_default.py ____________________\r\n    /usr/local/lib/python2.7/dist-packages/pluggy/__init__.py:617: in __call__\r\n        return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/pluggy/__init__.py:222: in _hookexec\r\n        return self._inner_hookexec(hook, methods, kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/pluggy/__init__.py:216: in <lambda>\r\n        firstresult=hook.spec_opts.get('firstresult'),\r\n    /usr/local/lib/python2.7/dist-packages/_pytest/python.py:200: in pytest_pycollect_makeitem\r\n        res = list(collector._genfunctions(name, obj))\r\n    /usr/local/lib/python2.7/dist-packages/_pytest/python.py:378: in _genfunctions\r\n        self.ihook.pytest_generate_tests(metafunc=metafunc)\r\n    /usr/local/lib/python2.7/dist-packages/pluggy/__init__.py:617: in __call__\r\n        return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/pluggy/__init__.py:222: in _hookexec\r\n        return self._inner_hookexec(hook, methods, kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/pluggy/__init__.py:216: in <lambda>\r\n        firstresult=hook.spec_opts.get('firstresult'),\r\n    /usr/local/lib/python2.7/dist-packages/testinfra/plugin.py:143: in pytest_generate_tests\r\n        ansible_inventory=metafunc.config.option.ansible_inventory,\r\n    /usr/local/lib/python2.7/dist-packages/testinfra/host.py:125: in get_hosts\r\n        for backend in testinfra.backend.get_backends(hosts, **kwargs):\r\n    /usr/local/lib/python2.7/dist-packages/testinfra/backend/__init__.py:89: in get_backends\r\n        for name in klass.get_hosts(host, **kw):\r\n    /usr/local/lib/python2.7/dist-packages/testinfra/backend/ansible.py:72: in get_hosts\r\n        return AnsibleRunner(kwargs.get(\"ansible_inventory\")).get_hosts(host)\r\n    /usr/local/lib/python2.7/dist-packages/testinfra/utils/ansible_runner.py:171: in __init__\r\n        self.cli._play_prereqs(self.cli.options))\r\n    /usr/local/lib/python2.7/dist-packages/ansible/cli/__init__.py:804: in _play_prereqs\r\n        inventory = InventoryManager(loader=loader, sources=options.inventory)\r\n    /usr/local/lib/python2.7/dist-packages/ansible/inventory/manager.py:145: in __init__\r\n        self.parse_sources(cache=True)\r\n    /usr/local/lib/python2.7/dist-packages/ansible/inventory/manager.py:206: in parse_sources\r\n        parse = self.parse_source(source, cache=cache)\r\n    /usr/local/lib/python2.7/dist-packages/ansible/inventory/manager.py:261: in parse_source\r\n        if plugin.verify_file(source):\r\n    /usr/local/lib/python2.7/dist-packages/ansible/plugins/inventory/yaml.py:84: in verify_file\r\n        if not ext or ext in self.get_option('yaml_extensions'):\r\n    /usr/local/lib/python2.7/dist-packages/ansible/plugins/__init__.py:58: in get_option\r\n        option_value = C.config.get_config_value(option, plugin_type=get_plugin_class(self), plugin_name=self._load_name, variables=hostvars)\r\n    /usr/local/lib/python2.7/dist-packages/ansible/config/manager.py:284: in get_config_value\r\n        value, _drop = self.get_config_value_and_origin(config, cfile=cfile, plugin_type=plugin_type, plugin_name=plugin_name, keys=keys, variables=variables)\r\n    /usr/local/lib/python2.7/dist-packages/ansible/config/manager.py:304: in get_config_value_and_origin\r\n        defs = self._plugins[plugin_type][plugin_name]\r\n    E   KeyError: 'inventory'\r\n    !!!!!!!!!!!!!!!!!!! Interrupted: 1 errors during collection !!!!!!!!!!!!!!!!!!!!\r\n    =========================== 1 error in 0.89 seconds ============================\r\n`\r\nThe exact same test with exact same configuration is OK with Ansible 2.5.0 (instead of 2.5.1).\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1262/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1262/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1253", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1253/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1253/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1253/events", "html_url": "https://github.com/ansible-community/molecule/issues/1253", "id": 314745018, "node_id": "MDU6SXNzdWUzMTQ3NDUwMTg=", "number": 1253, "title": "most molecule commands fail with an Error and no message.", "user": {"login": "snoby", "id": 724760, "node_id": "MDQ6VXNlcjcyNDc2MA==", "avatar_url": "https://avatars.githubusercontent.com/u/724760?v=4", "gravatar_id": "", "url": "https://api.github.com/users/snoby", "html_url": "https://github.com/snoby", "followers_url": "https://api.github.com/users/snoby/followers", "following_url": "https://api.github.com/users/snoby/following{/other_user}", "gists_url": "https://api.github.com/users/snoby/gists{/gist_id}", "starred_url": "https://api.github.com/users/snoby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/snoby/subscriptions", "organizations_url": "https://api.github.com/users/snoby/orgs", "repos_url": "https://api.github.com/users/snoby/repos", "events_url": "https://api.github.com/users/snoby/events{/privacy}", "received_events_url": "https://api.github.com/users/snoby/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/3", "html_url": "https://github.com/ansible-community/molecule/milestone/3", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/3/labels", "id": 4194003, "node_id": "MDk6TWlsZXN0b25lNDE5NDAwMw==", "number": 3, "title": "2.13", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2019-04-02T14:51:03Z", "updated_at": "2019-04-02T14:52:30Z", "due_on": null, "closed_at": "2019-04-02T14:52:30Z"}, "comments": 1, "created_at": "2018-04-16T17:14:05Z", "updated_at": "2019-04-02T14:51:23Z", "closed_at": "2018-04-16T19:08:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report / Help\r\n\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.5.0\r\n```\r\n\r\n```\r\nmolecule --version\r\nmolecule, version 2.12.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n\r\n- pip\r\n\r\n\r\n# Desired Behavior\r\n\r\nPlease give some details of the feature being requested or what\r\nshould happen if providing a bug report.\r\n\r\n# Actual Behaviour (Bug report only)\r\nTrying to run any command like `molecule --debug destroy` or `molecule --debug converge`\r\nresults in a Error being returned with no information\r\nHere is an example of running ` destroy `\r\n```\r\n[:~/work \u2026 roxy-ansible/roles/nginx] [virtual_env_python_2.7] add_east-prod-cluster(+105/-29)+* \u00b1 molecule --debug destroy\r\n--> Validating schema /Users/snoby/work/Official/tropo-ops-proxy-ansible/roles/nginx/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 destroy\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /Users/snoby/work/Official/virtual_env_python_2.7/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/filters:/var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/plugins/filters:/Users/snoby/work/Official/tropo-ops-proxy-ansible/roles/nginx/plugins/filters\r\nANSIBLE_LIBRARY: /Users/snoby/work/Official/virtual_env_python_2.7/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/library:/Users/snoby/work/Official/tropo-ops-proxy-ansible/roles/nginx/library\r\nANSIBLE_PUBLIC_KEY: null\r\nANSIBLE_ROLES_PATH: /var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/roles:/Users/snoby/work/Official/tropo-ops-proxy-ansible/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: docker\r\nMOLECULE_EPHEMERAL_DIRECTORY: /var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default\r\nMOLECULE_FILE: /Users/snoby/work/Official/tropo-ops-proxy-ansible/roles/nginx/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /Users/snoby/work/Official/tropo-ops-proxy-ansible/roles/nginx/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_VERIFIER_NAME: testinfra\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/ansible.cfg ANSIBLE_FILTER_PLUGINS=/Users/snoby/work/Official/virtual_env_python_2.7/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/filters:/var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/plugins/filters:/Users/snoby/work/Official/tropo-ops-proxy-ansible/roles/nginx/plugins/filters ANSIBLE_LIBRARY=/Users/snoby/work/Official/virtual_env_python_2.7/lib/python2.7/site-packages/molecule/provisioner/ansible/plugins/libraries:/var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/library:/Users/snoby/work/Official/tropo-ops-proxy-ansible/roles/nginx/library ANSIBLE_PUBLIC_KEY=None ANSIBLE_ROLES_PATH=/var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/roles:/Users/snoby/work/Official/tropo-ops-proxy-ansible/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=docker MOLECULE_EPHEMERAL_DIRECTORY=/var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default MOLECULE_FILE=/Users/snoby/work/Official/tropo-ops-proxy-ansible/roles/nginx/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/instance_config.yml MOLECULE_INVENTORY_FILE=/var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/Users/snoby/work/Official/tropo-ops-proxy-ansible/roles/nginx/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_VERIFIER_NAME=testinfra\r\n\r\nDEBUG: COMMAND\r\n/Users/snoby/work/Official/virtual_env_python_2.7/bin/ansible-playbook --inventory=/var/folders/dz/71gp3_rx7sqbpwqmzr8ps_c00000gn/T/molecule/nginx/default/ansible_inventory.yml --diff /Users/snoby/work/Official/tropo-ops-proxy-ansible/roles/nginx/molecule/default/destroy.yml -vvv\r\n\r\nERROR:\r\n[:~/work \u2026 roxy-ansible/roles/nginx] [virtual_env_python_2.7] add_east-prod-cluster(+105/-29)+* 255 \u00b1\r\n```\r\n\r\nHere is my molecule.yml file:\r\n```\r\n[:~/work \u2026 roxy-ansible/roles/nginx] [virtual_env_python_2.7] add_east-prod-cluster(+105/-29)+* \u00b1 cat molecule/default/molecule.yml\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\n  options:\r\n    config-file: molecule/default/tests/lint_conf/relaxed.yaml\r\nplatforms:\r\n  - name: instance\r\n    image: williamyeh/ansible:centos7\r\n    groups:\r\n      - proxy\r\n    privileged: True\r\n    capabilities:\r\n      - SYS_ADMIN\r\n    volume_mounts:\r\n      - /sys/fs/cgroup:/sys/fs/cgroup:rw\r\n    command: /usr/sbin/init\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_PUBLIC_KEY: $ANSIBLE_PUBLIC_KEY\r\n  config_options:\r\n    defaults:\r\n      fact_caching_timeout: 7200\r\n      fact_caching: jsonfile\r\n      fact_caching_connection: .tmp/ansible_fact_cache\r\n      #  inventory:\r\n      #    links:\r\n      #      group_vars:\r\n      #        ../../../../../inventory/group_vars/\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: default\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n```\r\nAnd here is my docker on my mac versions:\r\n```\r\n:~/work \u2026 roxy-ansible/roles/nginx] [virtual_env_python_2.7] add_east-prod-cluster(+105/-29)+* \u00b1 docker version\r\nClient:\r\n Version:\t18.03.0-ce\r\n API version:\t1.37\r\n Go version:\tgo1.9.4\r\n Git commit:\t0520e24\r\n Built:\tWed Mar 21 23:06:22 2018\r\n OS/Arch:\tdarwin/amd64\r\n Experimental:\tfalse\r\n Orchestrator:\tswarm\r\n\r\nServer:\r\n Engine:\r\n  Version:\t18.03.0-ce\r\n  API version:\t1.37 (minimum version 1.12)\r\n  Go version:\tgo1.9.4\r\n  Git commit:\t0520e24\r\n  Built:\tWed Mar 21 23:14:32 2018\r\n  OS/Arch:\tlinux/amd64\r\n  Experimental:\tfalse\r\n```\r\nAnything else I can provide? I would mention that commands like ` molecule lint ` work just fine.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1253/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1253/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1252", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1252/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1252/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1252/events", "html_url": "https://github.com/ansible-community/molecule/issues/1252", "id": 314649247, "node_id": "MDU6SXNzdWUzMTQ2NDkyNDc=", "number": 1252, "title": "After molecule update facing issue with links ", "user": {"login": "r0ckyte", "id": 32086531, "node_id": "MDQ6VXNlcjMyMDg2NTMx", "avatar_url": "https://avatars.githubusercontent.com/u/32086531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/r0ckyte", "html_url": "https://github.com/r0ckyte", "followers_url": "https://api.github.com/users/r0ckyte/followers", "following_url": "https://api.github.com/users/r0ckyte/following{/other_user}", "gists_url": "https://api.github.com/users/r0ckyte/gists{/gist_id}", "starred_url": "https://api.github.com/users/r0ckyte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/r0ckyte/subscriptions", "organizations_url": "https://api.github.com/users/r0ckyte/orgs", "repos_url": "https://api.github.com/users/r0ckyte/repos", "events_url": "https://api.github.com/users/r0ckyte/events{/privacy}", "received_events_url": "https://api.github.com/users/r0ckyte/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/3", "html_url": "https://github.com/ansible-community/molecule/milestone/3", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/3/labels", "id": 4194003, "node_id": "MDk6TWlsZXN0b25lNDE5NDAwMw==", "number": 3, "title": "2.13", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2019-04-02T14:51:03Z", "updated_at": "2019-04-02T14:52:30Z", "due_on": null, "closed_at": "2019-04-02T14:52:30Z"}, "comments": 2, "created_at": "2018-04-16T13:23:53Z", "updated_at": "2019-04-02T14:51:23Z", "closed_at": "2018-04-16T20:14:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.2.1\r\n```\r\n\r\n```\r\nmolecule 2.12.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n- OS package\r\n\r\n# Desired Behavior\r\ni have symlinks in [molecule.yml ](https://github.com/r0ckyte/ansible-testing/blob/master/molecule/default/molecule.yml#L26) which works good with molecule 2.3 \r\n\r\n# Actual Behaviour (Bug report only)\r\nlooks like the TMPDIR change is impacting my existing repo. can you please help how i can modify molecule.yml to get it working \r\n`\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 create\r\n    \u2514\u2500\u2500 prepare\r\n    \r\nERROR: The source path '/tmp/molecule/ansible-testing/default/../../../dev/group_vars' does not exist.\r\n`", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1252/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1244", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1244/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1244/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1244/events", "html_url": "https://github.com/ansible-community/molecule/issues/1244", "id": 313650223, "node_id": "MDU6SXNzdWUzMTM2NTAyMjM=", "number": 1244, "title": "Created container terminal sizing", "user": {"login": "zyio", "id": 660430, "node_id": "MDQ6VXNlcjY2MDQzMA==", "avatar_url": "https://avatars.githubusercontent.com/u/660430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zyio", "html_url": "https://github.com/zyio", "followers_url": "https://api.github.com/users/zyio/followers", "following_url": "https://api.github.com/users/zyio/following{/other_user}", "gists_url": "https://api.github.com/users/zyio/gists{/gist_id}", "starred_url": "https://api.github.com/users/zyio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zyio/subscriptions", "organizations_url": "https://api.github.com/users/zyio/orgs", "repos_url": "https://api.github.com/users/zyio/repos", "events_url": "https://api.github.com/users/zyio/events{/privacy}", "received_events_url": "https://api.github.com/users/zyio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/3", "html_url": "https://github.com/ansible-community/molecule/milestone/3", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/3/labels", "id": 4194003, "node_id": "MDk6TWlsZXN0b25lNDE5NDAwMw==", "number": 3, "title": "2.13", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2019-04-02T14:51:03Z", "updated_at": "2019-04-02T14:52:30Z", "due_on": null, "closed_at": "2019-04-02T14:52:30Z"}, "comments": 4, "created_at": "2018-04-12T09:39:47Z", "updated_at": "2019-04-02T14:51:22Z", "closed_at": "2018-04-12T20:57:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nsam@taco ~ $ ansible --version\r\nansible 2.5.0\r\n  config file = None\r\n  configured module search path = [u'/home/sam/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /usr/bin/ansible\r\n  python version = 2.7.14 (default, Mar 14 2018, 13:36:31) [GCC 7.3.1 20180303 (Red Hat 7.3.1-5)]\r\n```\r\n\r\n```\r\nsam@taco ~ $ molecule --version\r\nmolecule, version 2.12.1\r\n```\r\n\r\nMolecule installation method (one of):\r\n\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behaviour\r\n\r\n`molecule login` should inherit terminal size.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nIt seems that containers made with `converge` and accessed via `login` aren't getting  `$COLUMNS` and `$LINES` set properly, leading to tiny terminal sizes and lots of wrapping text:\r\n\r\n```\r\nsam@taco ~/projects/personal/columns $ echo $COLUMNS\r\n211\r\nsam@taco ~/projects/personal/columns $ molecule login\r\n--> Validating schema /home/sam/projects/personal/columns/molecule/default/molecule.yml.\r\nValidation completed successfully.\r\n[root@instance /]# echo $COLUMNS\r\n80\r\n```\r\n\r\nOnce the container has been made, accessing with `docker exec` directly also shows the same issue, so it's possibly to do with the way the containers are being made, rather than the way they're  accessed with `docker exec` and `login_cmd_template`? \r\n\r\nAs terminal sizes may change from creation to login, changing the `docker exec` command to something like `'docker exec -e COLUMNS=$COLUMNS -e LINES=$LINES -e TERM=$TERM -ti {instance} /bin/bash'` might do it.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1244/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1195", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1195/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1195/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1195/events", "html_url": "https://github.com/ansible-community/molecule/issues/1195", "id": 306797876, "node_id": "MDU6SXNzdWUzMDY3OTc4NzY=", "number": 1195, "title": "Debug switch isn't working when verbosity options are set for Ansible", "user": {"login": "wilmardo", "id": 8994658, "node_id": "MDQ6VXNlcjg5OTQ2NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/8994658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wilmardo", "html_url": "https://github.com/wilmardo", "followers_url": "https://api.github.com/users/wilmardo/followers", "following_url": "https://api.github.com/users/wilmardo/following{/other_user}", "gists_url": "https://api.github.com/users/wilmardo/gists{/gist_id}", "starred_url": "https://api.github.com/users/wilmardo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wilmardo/subscriptions", "organizations_url": "https://api.github.com/users/wilmardo/orgs", "repos_url": "https://api.github.com/users/wilmardo/repos", "events_url": "https://api.github.com/users/wilmardo/events{/privacy}", "received_events_url": "https://api.github.com/users/wilmardo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/7", "html_url": "https://github.com/ansible-community/molecule/milestone/7", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/7/labels", "id": 4194021, "node_id": "MDk6TWlsZXN0b25lNDE5NDAyMQ==", "number": 7, "title": "2.11", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2019-04-02T14:54:53Z", "updated_at": "2019-04-02T14:57:20Z", "due_on": null, "closed_at": "2019-04-02T14:57:20Z"}, "comments": 0, "created_at": "2018-03-20T10:02:34Z", "updated_at": "2019-04-02T14:55:32Z", "closed_at": "2018-03-22T00:15:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.4.3.0\r\n  ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n  executable location = /usr/local/bin/ansible\r\n  python version = 2.7.12 (default, Dec  4 2017, 14:50:18) [GCC 5.4.0 20160609]\r\n```\r\n\r\n```\r\nmolecule --version\r\nmolecule, version 2.9.0\r\n```\r\n\r\nMolecule installation method (one of):\r\n- pip\r\n\r\nAnsible installation method (one of):\r\n\r\n- pip\r\n\r\n# Desired Behavior\r\n\r\nThe `--debug` switch should ignore the set verbosity options for Ansible. \r\nWhen the `--debug` switch is added to Molecule it should ignore the set verbosity and outputs with `-vvv`\r\n\r\nAlso one thing to consider, Ansible merges the set `-v` options. `ansible localhost -vvv -m ping` is the same as `ansible localhost -vv -v -m ping`\r\nThat is why I propose the ignore of the set verbosity, if you specify both `molecule --debug` will output with `-vvv` plus the set verbosity in the Ansible options.\r\n\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nErrors because the `--vvv` option does not exist.\r\n\r\nAs default I have the following in the molecule.yml\r\n```yaml\r\nprovisioner:\r\n  name: ansible\r\n  options:\r\n    v: true\r\n```\r\n\r\nThis errors when run with the `--debug` switch because it tries to run `ansible-playbook --vvv`\r\n\r\nSee this [TravisCI](https://travis-ci.org/wilmardo/ansible-role-plex/jobs/355757094#L1729) build or the output below.\r\n<details>\r\n<summary>Console log</summary>\r\n\r\n```\r\nwilmardo@NUC-FLEX-01:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role$ molecule --debug converge\r\n--> Test matrix\r\n\r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 prepare\r\n    \u2514\u2500\u2500 converge\r\n\r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\nSkipping, instances already created.\r\n--> Scenario: 'default'\r\n--> Action: 'prepare'\r\nSkipping, instances already prepared.\r\n--> Scenario: 'default'\r\n--> Action: 'converge'\r\nDEBUG: ANSIBLE ENVIRONMENT\r\n---\r\nANSIBLE_CONFIG: /mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/ansible.cfg\r\nANSIBLE_FILTER_PLUGINS: /usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/plugins/filters:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/plugins/filters:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/plugins/filters\r\nANSIBLE_LIBRARY: /usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/plugins/libraries:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/library:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/library\r\nANSIBLE_ROLES_PATH: /mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/roles:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles\r\n\r\nDEBUG: MOLECULE ENVIRONMENT\r\n---\r\nMOLECULE_DEBUG: 'True'\r\nMOLECULE_DEPENDENCY_NAME: galaxy\r\nMOLECULE_DRIVER_NAME: vagrant\r\nMOLECULE_EPHEMERAL_DIRECTORY: /mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule\r\nMOLECULE_FILE: /mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/molecule.yml\r\nMOLECULE_INSTANCE_CONFIG: /mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/instance_config.yml\r\nMOLECULE_INVENTORY_FILE: /mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/ansible_inventory.yml\r\nMOLECULE_LINT_NAME: yamllint\r\nMOLECULE_PROVISIONER_NAME: ansible\r\nMOLECULE_SCENARIO_DIRECTORY: /mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default\r\nMOLECULE_SCENARIO_NAME: default\r\nMOLECULE_VERIFIER_NAME: testinfra\r\n\r\nDEBUG: SHELL REPLAY\r\nANSIBLE_CONFIG=/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/ansible.cfg ANSIBLE_FILTER_PLUGINS=/usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/plugins/filters:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/plugins/filters:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/plugins/filters ANSIBLE_LIBRARY=/usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/plugins/libraries:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/library:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/library ANSIBLE_ROLES_PATH=/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/roles:/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles MOLECULE_DEBUG=True MOLECULE_DEPENDENCY_NAME=galaxy MOLECULE_DRIVER_NAME=vagrant MOLECULE_EPHEMERAL_DIRECTORY=/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule MOLECULE_FILE=/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/molecule.yml MOLECULE_INSTANCE_CONFIG=/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/instance_config.yml MOLECULE_INVENTORY_FILE=/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/ansible_inventory.yml MOLECULE_LINT_NAME=yamllint MOLECULE_PROVISIONER_NAME=ansible MOLECULE_SCENARIO_DIRECTORY=/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default MOLECULE_SCENARIO_NAME=default MOLECULE_VERIFIER_NAME=testinfra\r\n\r\nDEBUG: COMMAND\r\n/usr/local/bin/ansible-playbook --vvv --inventory=/mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/.molecule/ansible_inventory.yml --diff /mnt/c/Users/wilmaro/Documents/Ubuntu/Ansible/test-main/roles/test-role/molecule/default/playbook.yml -v\r\n\r\nUsage: ansible-playbook [options] playbook.yml [playbook2 ...]\r\n\r\nansible-playbook: error: no such option: --vvv\r\nERROR:\r\n```\r\n\r\n</details>\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1195/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1195/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1168", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1168/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1168/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1168/events", "html_url": "https://github.com/ansible-community/molecule/pull/1168", "id": 303162365, "node_id": "MDExOlB1bGxSZXF1ZXN0MTczNTAwMzE2", "number": 1168, "title": "Update molecule_vagrant.py", "user": {"login": "Raffaello", "id": 1850902, "node_id": "MDQ6VXNlcjE4NTA5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/1850902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Raffaello", "html_url": "https://github.com/Raffaello", "followers_url": "https://api.github.com/users/Raffaello/followers", "following_url": "https://api.github.com/users/Raffaello/following{/other_user}", "gists_url": "https://api.github.com/users/Raffaello/gists{/gist_id}", "starred_url": "https://api.github.com/users/Raffaello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Raffaello/subscriptions", "organizations_url": "https://api.github.com/users/Raffaello/orgs", "repos_url": "https://api.github.com/users/Raffaello/repos", "events_url": "https://api.github.com/users/Raffaello/events{/privacy}", "received_events_url": "https://api.github.com/users/Raffaello/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/6", "html_url": "https://github.com/ansible-community/molecule/milestone/6", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/6/labels", "id": 4194015, "node_id": "MDk6TWlsZXN0b25lNDE5NDAxNQ==", "number": 6, "title": "2.10", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-04-02T14:52:54Z", "updated_at": "2019-04-02T14:54:46Z", "due_on": null, "closed_at": "2019-04-02T14:54:46Z"}, "comments": 0, "created_at": "2018-03-07T16:15:55Z", "updated_at": "2019-04-02T14:54:30Z", "closed_at": "2018-03-07T17:33:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1168", "html_url": "https://github.com/ansible-community/molecule/pull/1168", "diff_url": "https://github.com/ansible-community/molecule/pull/1168.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1168.patch", "merged_at": "2018-03-07T17:33:29Z"}, "body": "this should fix https://github.com/metacloud/molecule/issues/1161\r\n\r\nThis kind of patch might be required to do for other providers", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1168/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1168/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1161", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1161/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1161/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1161/events", "html_url": "https://github.com/ansible-community/molecule/issues/1161", "id": 300717744, "node_id": "MDU6SXNzdWUzMDA3MTc3NDQ=", "number": 1161, "title": "molecule create task seems to have an issue on IdentityFile dict", "user": {"login": "Raffaello", "id": 1850902, "node_id": "MDQ6VXNlcjE4NTA5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/1850902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Raffaello", "html_url": "https://github.com/Raffaello", "followers_url": "https://api.github.com/users/Raffaello/followers", "following_url": "https://api.github.com/users/Raffaello/following{/other_user}", "gists_url": "https://api.github.com/users/Raffaello/gists{/gist_id}", "starred_url": "https://api.github.com/users/Raffaello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Raffaello/subscriptions", "organizations_url": "https://api.github.com/users/Raffaello/orgs", "repos_url": "https://api.github.com/users/Raffaello/repos", "events_url": "https://api.github.com/users/Raffaello/events{/privacy}", "received_events_url": "https://api.github.com/users/Raffaello/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 842110976, "node_id": "MDU6TGFiZWw4NDIxMTA5NzY=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/major", "name": "major", "color": "c6476b", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/6", "html_url": "https://github.com/ansible-community/molecule/milestone/6", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/6/labels", "id": 4194015, "node_id": "MDk6TWlsZXN0b25lNDE5NDAxNQ==", "number": 6, "title": "2.10", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-04-02T14:52:54Z", "updated_at": "2019-04-02T14:54:46Z", "due_on": null, "closed_at": "2019-04-02T14:54:46Z"}, "comments": 11, "created_at": "2018-02-27T17:12:53Z", "updated_at": "2019-04-02T14:54:30Z", "closed_at": "2018-03-07T19:31:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.3.4\r\nmolecule 2.9.0\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method:  pip\r\n\r\n# Actual Behaviour (Bug report only)\r\n```\r\n--> Action: 'create'\r\n    \r\n    PLAY [Create] ******************************************************************\r\n    \r\n    TASK [Create molecule instance(s)] *********************************************\r\n    changed: [localhost] => (item=None)\r\n    \r\n    TASK [Populate instance config dict] *******************************************\r\n    fatal: [localhost]: FAILED! => {\"msg\": \"The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'IdentityFile'\\n\\nThe error appears to have been in '/**/molecule/default/create.yml': line 36, column 7, but maybe elsewhere in the file depending on the exact syntax problem.\r\n\r\nThe offending line appears to be:\r\n\r\n\r\n   - name: Populate instance config dict\r\n      ^ here\\n\\nexception type: <class 'ansible.errors.AnsibleUndefinedVariable'>\\nexception: 'dict object' has no attribute 'IdentityFile'\"}\r\n    \r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1161/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1157", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1157/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1157/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1157/events", "html_url": "https://github.com/ansible-community/molecule/issues/1157", "id": 299940159, "node_id": "MDU6SXNzdWUyOTk5NDAxNTk=", "number": 1157, "title": "Clean install, problem with Vagrant on OSX", "user": {"login": "damianoneill", "id": 15426674, "node_id": "MDQ6VXNlcjE1NDI2Njc0", "avatar_url": "https://avatars.githubusercontent.com/u/15426674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/damianoneill", "html_url": "https://github.com/damianoneill", "followers_url": "https://api.github.com/users/damianoneill/followers", "following_url": "https://api.github.com/users/damianoneill/following{/other_user}", "gists_url": "https://api.github.com/users/damianoneill/gists{/gist_id}", "starred_url": "https://api.github.com/users/damianoneill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/damianoneill/subscriptions", "organizations_url": "https://api.github.com/users/damianoneill/orgs", "repos_url": "https://api.github.com/users/damianoneill/repos", "events_url": "https://api.github.com/users/damianoneill/events{/privacy}", "received_events_url": "https://api.github.com/users/damianoneill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-02-24T13:11:50Z", "updated_at": "2018-03-07T20:51:40Z", "closed_at": "2018-03-07T17:57:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.4.3.0\r\n  python version = 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\r\n\r\nmolecule, version 2.9.0\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nPlease give some details of the feature being requested or what\r\nshould happen if providing a bug report.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\n$ virtualenv --no-site-packages .venv\r\n$ source .venv/bin/activate\r\n$ pip install molecule ansible\r\n$ pip install python-vagrant docker-py\r\n$ molecule init role -r chrony -d vagrant\r\n$ cd chrony\r\n$ molecule test \r\n\r\n...\r\n\r\nTASK [Populate instance config dict] *******************************************\r\n    fatal: [localhost]: FAILED! => {\"msg\": \"The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'IdentityFile'\\n\\nThe error appears to have been in '/Users/doneill/Downloads/chrony/molecule/default/create.yml': line 38, column 7, but may\\nbe elsewhere in the file depending on the exact syntax problem.\\n\\nThe offending line appears to be:\\n\\n\\n    - name: Populate instance config dict\\n      ^ here\\n\\nexception type: <class 'ansible.errors.AnsibleUndefinedVariable'>\\nexception: 'dict object' has no attribute 'IdentityFile'\"}\r\n\r\n...\r\n\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1157/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1124", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1124/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1124/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1124/events", "html_url": "https://github.com/ansible-community/molecule/issues/1124", "id": 296485192, "node_id": "MDU6SXNzdWUyOTY0ODUxOTI=", "number": 1124, "title": "adding localhost to vagrant driven ansible inventory", "user": {"login": "nathanhruby", "id": 812347, "node_id": "MDQ6VXNlcjgxMjM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/812347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nathanhruby", "html_url": "https://github.com/nathanhruby", "followers_url": "https://api.github.com/users/nathanhruby/followers", "following_url": "https://api.github.com/users/nathanhruby/following{/other_user}", "gists_url": "https://api.github.com/users/nathanhruby/gists{/gist_id}", "starred_url": "https://api.github.com/users/nathanhruby/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nathanhruby/subscriptions", "organizations_url": "https://api.github.com/users/nathanhruby/orgs", "repos_url": "https://api.github.com/users/nathanhruby/repos", "events_url": "https://api.github.com/users/nathanhruby/events{/privacy}", "received_events_url": "https://api.github.com/users/nathanhruby/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/5", "html_url": "https://github.com/ansible-community/molecule/milestone/5", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/5/labels", "id": 4194013, "node_id": "MDk6TWlsZXN0b25lNDE5NDAxMw==", "number": 5, "title": "2.9", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2019-04-02T14:52:49Z", "updated_at": "2019-04-02T14:53:50Z", "due_on": null, "closed_at": "2019-04-02T14:53:50Z"}, "comments": 11, "created_at": "2018-02-12T18:52:48Z", "updated_at": "2019-04-02T14:53:35Z", "closed_at": "2018-02-19T20:21:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n[nhruby@lappy ~]$ ansible --version\r\nansible 2.4.3.0\r\n  config file = None\r\n  configured module search path = [u'/Users/nhruby/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/nhruby/.pex/install/ansible-2.4.3.0-py2-none-any.whl.f0343d091132c5d864b863540f56241a54b6ab20/ansible-2.4.3.0-py2-none-any.whl/ansible\r\n  executable location = ansible\r\n  python version = 2.7.14 (default, Feb  6 2018, 20:03:13) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.39.2)]\r\nmolecule --version[nhruby@lappy ~]$ molecule --version\r\nmolecule.pex, version 2.7.0\r\n[nhruby@lappy ~]$\r\n```\r\n\r\n- Molecule installation method: pip + pex\r\n- Ansible installation method:pip + pex\r\n\r\n# Desired Behaviour\r\n\r\n_This is totally an edge case._  \r\n\r\nCurrently I build ansible+molecule with pex into a single file with all dependencies in order to reduce the pain of getting everything installed similarly across multiple developer laptops.  This works well but as a result I need to set `ansible_python_interpreter` to point at a shim script to use the pex bundle.  We set this in the vars on various playbooks now, but would like to set this as a host var in inventory for localhost to make it simpler for folks to set up.\r\n\r\nWe also use the vagrant driver to avoid nested docker-in-docker situations and as a result that setting doesn't propagate because localhost isn't a stated platform in molecule.yml and the inventory isn't there during create and destroy actions.\r\n\r\nIs it possible to add localhost to the inventory, and for vagrant driven configs, add that to the inventory early?  If not, would you be willing to accept a patch to enable that behavior?\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1124/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1124/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1123", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1123/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1123/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1123/events", "html_url": "https://github.com/ansible-community/molecule/pull/1123", "id": 296219058, "node_id": "MDExOlB1bGxSZXF1ZXN0MTY4NDcwNDA1", "number": 1123, "title": "Corrected ansible args", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/4", "html_url": "https://github.com/ansible-community/molecule/milestone/4", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/4/labels", "id": 4194012, "node_id": "MDk6TWlsZXN0b25lNDE5NDAxMg==", "number": 4, "title": "2.8", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2019-04-02T14:52:43Z", "updated_at": "2019-04-02T14:53:48Z", "due_on": null, "closed_at": "2019-04-02T14:53:48Z"}, "comments": 0, "created_at": "2018-02-11T19:47:22Z", "updated_at": "2019-04-02T14:53:09Z", "closed_at": "2018-02-11T19:47:42Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/1123", "html_url": "https://github.com/ansible-community/molecule/pull/1123", "diff_url": "https://github.com/ansible-community/molecule/pull/1123.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/1123.patch", "merged_at": "2018-02-11T19:47:42Z"}, "body": "Molecule supports the arbitrary passing of ansible args to Molecule's\r\nconverge subcommand.  However, these args were not stripped from\r\nMolecule's instance management playbooks.  This can prevent Molecule\r\nfrom properly setting up the Molecule env.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1123/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1123/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1109", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1109/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1109/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1109/events", "html_url": "https://github.com/ansible-community/molecule/issues/1109", "id": 294330204, "node_id": "MDU6SXNzdWUyOTQzMzAyMDQ=", "number": 1109, "title": "using a custom registry", "user": {"login": "jaccoh", "id": 1253910, "node_id": "MDQ6VXNlcjEyNTM5MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1253910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaccoh", "html_url": "https://github.com/jaccoh", "followers_url": "https://api.github.com/users/jaccoh/followers", "following_url": "https://api.github.com/users/jaccoh/following{/other_user}", "gists_url": "https://api.github.com/users/jaccoh/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaccoh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaccoh/subscriptions", "organizations_url": "https://api.github.com/users/jaccoh/orgs", "repos_url": "https://api.github.com/users/jaccoh/repos", "events_url": "https://api.github.com/users/jaccoh/events{/privacy}", "received_events_url": "https://api.github.com/users/jaccoh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/4", "html_url": "https://github.com/ansible-community/molecule/milestone/4", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/4/labels", "id": 4194012, "node_id": "MDk6TWlsZXN0b25lNDE5NDAxMg==", "number": 4, "title": "2.8", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 16, "state": "closed", "created_at": "2019-04-02T14:52:43Z", "updated_at": "2019-04-02T14:53:48Z", "due_on": null, "closed_at": "2019-04-02T14:53:48Z"}, "comments": 0, "created_at": "2018-02-05T09:48:17Z", "updated_at": "2019-04-02T14:53:08Z", "closed_at": "2018-02-08T21:23:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n \u276f ansible --version                                                                                                                               \r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/jhoeve/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/jhoeve/GitCollection/iWelcome/Tulip/ansible/cms/.virtualenv/cms/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/jhoeve/GitCollection/iWelcome/Tulip/ansible/cms/.virtualenv/cms/bin/ansible\r\n  python version = 2.7.10 (default, Jul 15 2017, 17:16:57) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]\r\n\r\n \u276f molecule --version                                                                                                                              molecule, version 2.4.0\r\n\r\n```\r\n\r\n- Molecule installation method: pip, VirtualEnv\r\n- Ansible installation method: pip, VirtualEnv\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nI have tried to use a custom image from a custom registry. But that failed because 'molecule_local/custom_registry:5000/image_name has one slash too many.\r\n\r\nI've fixed this (locally) by adding a seperate registry variable and using that only in the dockerfile.j2:\r\n```\r\nplatforms:\r\n  - name: iwspacewalk-clientb01\r\n    groups:\r\n      - backend_servers\r\n    image: \"docker-molecule-centos7\"\r\n    registry: registry-devel.a.mgt:5000\r\n    privileged: true\r\n    networks:\r\n      - name: spacewalk-client\r\n```\r\n```\r\n# Molecule managed\r\n\r\n{% if item.registry is defined %}\r\nFROM {{ item.registry }}/{{ item.image }}\r\n{% else %}\r\nFROM {{ item.image }}\r\n{% endif %}\r\n\r\nRUN if [ $(command -v apt-get) ]; then apt-get update && apt-get upgrade -y && apt-get install -y python sudo bash ca-certificates && apt-get clean; \\\r\n    elif [ $(command -v dnf) ]; then dnf makecache && dnf --assumeyes install python sudo python-devel python2-dnf bash && dnf clean all; \\\r\n    elif [ $(command -v yum) ]; then yum makecache fast && yum update -y && yum install -y python sudo yum-plugin-ovl bash && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf && yum clean all; \\\r\n    elif [ $(command -v zypper) ]; then zypper refresh && zypper update -y && zypper install -y python sudo bash python-xml && zypper clean -a; \\\r\n    elif [ $(command -v apk) ]; then apk update && apk add --no-cache python sudo bash ca-certificates; fi\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1109/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1087", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1087/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1087/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1087/events", "html_url": "https://github.com/ansible-community/molecule/issues/1087", "id": 287762223, "node_id": "MDU6SXNzdWUyODc3NjIyMjM=", "number": 1087, "title": "Ansible 2.2 does not allow \"log_driver: none\"", "user": {"login": "robertdebock", "id": 3830775, "node_id": "MDQ6VXNlcjM4MzA3NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/3830775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertdebock", "html_url": "https://github.com/robertdebock", "followers_url": "https://api.github.com/users/robertdebock/followers", "following_url": "https://api.github.com/users/robertdebock/following{/other_user}", "gists_url": "https://api.github.com/users/robertdebock/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertdebock/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertdebock/subscriptions", "organizations_url": "https://api.github.com/users/robertdebock/orgs", "repos_url": "https://api.github.com/users/robertdebock/repos", "events_url": "https://api.github.com/users/robertdebock/events{/privacy}", "received_events_url": "https://api.github.com/users/robertdebock/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/2", "html_url": "https://github.com/ansible-community/molecule/milestone/2", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/2/labels", "id": 4193993, "node_id": "MDk6TWlsZXN0b25lNDE5Mzk5Mw==", "number": 2, "title": "2.7", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2019-04-02T14:46:41Z", "updated_at": "2019-04-02T14:53:35Z", "due_on": null, "closed_at": "2019-04-02T14:50:53Z"}, "comments": 1, "created_at": "2018-01-11T12:02:14Z", "updated_at": "2019-04-02T14:48:30Z", "closed_at": "2018-01-13T01:16:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n```\r\nansible --version\r\nansible 2.2.3.0\r\n  config file = \r\n  configured module search path = Default w/o overrides\r\n\r\nmolecule --version\r\nmolecule, version 2.6.0\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\nMolecule would be able to test using Ansible 2.2, as that is what's described in README.md.\r\n\r\n# Actual Behaviour (Bug report only)\r\nMolecule now fails when using Ansible 2.2 with this error:\r\n```\r\n\"msg\": \"value of log_driver must be one of: json-file,syslog,journald,gelf,fluentd,awslogs,splunk, got: none\"\r\n```\r\n\r\nThis error can be seen on [Travis](https://travis-ci.org/robertdebock/ansible-role-bootstrap/jobs/327612173), with this code from [GitHub](https://github.com/robertdebock/ansible-role-bootstrap/tree/bdeee41e62dbe20b0477361dd611a47cf75d03c8)\r\n\r\nI think either:\r\n- Ansible 2.3 or higher should be supported. (in that case change README.md)\r\n- or the log_driver should be changed to something that is supported. (in that case change create.yml in molecule/cookiecutter/scenario/driver/docker/%7B%7Bcookiecutter.molecule_directory%7D%7D/%7B%7Bcookiecutter.scenario_name%7D%7D/)", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1087/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1087/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1082", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1082/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1082/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1082/events", "html_url": "https://github.com/ansible-community/molecule/issues/1082", "id": 286908531, "node_id": "MDU6SXNzdWUyODY5MDg1MzE=", "number": 1082, "title": "Molecule never destroys vagrant image after upgrade to 2.6.0", "user": {"login": "joshdmoore", "id": 947864, "node_id": "MDQ6VXNlcjk0Nzg2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/947864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshdmoore", "html_url": "https://github.com/joshdmoore", "followers_url": "https://api.github.com/users/joshdmoore/followers", "following_url": "https://api.github.com/users/joshdmoore/following{/other_user}", "gists_url": "https://api.github.com/users/joshdmoore/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshdmoore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshdmoore/subscriptions", "organizations_url": "https://api.github.com/users/joshdmoore/orgs", "repos_url": "https://api.github.com/users/joshdmoore/repos", "events_url": "https://api.github.com/users/joshdmoore/events{/privacy}", "received_events_url": "https://api.github.com/users/joshdmoore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/2", "html_url": "https://github.com/ansible-community/molecule/milestone/2", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/2/labels", "id": 4193993, "node_id": "MDk6TWlsZXN0b25lNDE5Mzk5Mw==", "number": 2, "title": "2.7", "description": null, "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2019-04-02T14:46:41Z", "updated_at": "2019-04-02T14:53:35Z", "due_on": null, "closed_at": "2019-04-02T14:50:53Z"}, "comments": 0, "created_at": "2018-01-08T22:25:37Z", "updated_at": "2019-04-02T14:48:55Z", "closed_at": "2018-01-09T19:38:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.4.2.0\r\nmolecule, version 2.6.0\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nAfter upgrading to molecule 2.6.0 I always get the message that it is skipping destroy even though I have not configured --destroy=never.  I think the default should be for it to destroy the container unless --destroy=never passed.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nUnless the command is run with --destory=always then it skips the destroy step.\r\n```\r\n--> Action: 'destroy'\r\nSkipping, '--destroy=never' requested.\r\n```\r\nEven though --destory=never is not set anywhere.  This is from a newly initialized project using the command:\r\n```\r\nmolecule init role --role-name=molecule-upgrade --driver-name=vagrant\r\n```\r\n\r\nThe only way to make it run destroy is to pass in --destroy=always or anything besides never.\r\n\r\n[no-params.log](https://github.com/metacloud/molecule/files/1613259/no-params.log)\r\n[destroy-always.log](https://github.com/metacloud/molecule/files/1613268/destroy-always.log)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1082/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1082/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1057", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1057/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1057/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1057/events", "html_url": "https://github.com/ansible-community/molecule/issues/1057", "id": 278984730, "node_id": "MDU6SXNzdWUyNzg5ODQ3MzA=", "number": 1057, "title": "molecule doesn't honour --destroy=never", "user": {"login": "dennisconrad", "id": 3794768, "node_id": "MDQ6VXNlcjM3OTQ3Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/3794768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dennisconrad", "html_url": "https://github.com/dennisconrad", "followers_url": "https://api.github.com/users/dennisconrad/followers", "following_url": "https://api.github.com/users/dennisconrad/following{/other_user}", "gists_url": "https://api.github.com/users/dennisconrad/gists{/gist_id}", "starred_url": "https://api.github.com/users/dennisconrad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dennisconrad/subscriptions", "organizations_url": "https://api.github.com/users/dennisconrad/orgs", "repos_url": "https://api.github.com/users/dennisconrad/repos", "events_url": "https://api.github.com/users/dennisconrad/events{/privacy}", "received_events_url": "https://api.github.com/users/dennisconrad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-12-04T12:50:24Z", "updated_at": "2017-12-04T23:32:34Z", "closed_at": "2017-12-04T23:32:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.4.2.0\r\n  config file = None\r\n  configured module search path = [u'/Users/dennis.conrad/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/dennis.conrad/.pyenv/versions/2.7.14/lib/python2.7/site-packages/ansible\r\n  executable location = /Users/dennis.conrad/.pyenv/versions/2.7.14/bin/ansible\r\n  python version = 2.7.14 (default, Nov 20 2017, 11:18:37) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n\r\n```\r\nmolecule, version 2.5.1.dev2\r\n```\r\n\r\n- Molecule installation method: source\r\n- Ansible installation method: pip\r\n\r\n\r\n# Description of Issue\r\n\r\n`--destroy=never` doesn't seem to do what it implies to do.  The only difference between `--destroy=never` and `--destroy=always` is that in the case of failed tests, the instances are not destroyed unless `--destroy=always` has been set.\r\n\r\n\r\n# Desired Behaviour\r\n\r\nThis is what I expect:\r\n\r\n`--destroy`| lint | destroy | dependency-verify | destroy if succeeded / failed\r\n--- | --- | --- | --- | ---\r\n`never` | \u2714\ufe0f | \u2716\ufe0f  | \u2714\ufe0f |  \u2716\ufe0f / \u2716\ufe0f  \r\n`always` | \u2714\ufe0f | \u2714\ufe0f  | \u2714\ufe0f |  \u2714\ufe0f / \u2714\ufe0f\r\n\r\nBasically, _never_ destroy my instances when `--destroy=never` has been requested.\r\n\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nThis is what is actually happening:\r\n\r\n`--destroy`| lint | destroy | dependency-verify | destroy if succeeded / failed\r\n--- | --- | --- | --- | ---\r\n`never` | \u2714\ufe0f | \u2714\ufe0f  | \u2714\ufe0f | \u2714\ufe0f / \u2716\ufe0f  \r\n`always` | \u2714\ufe0f | \u2714\ufe0f  | \u2714\ufe0f | \u2714\ufe0f / \u2714\ufe0f\r\n\r\nEven with `--destroy=never`, instances are still _always_ destroyed unless the there is a problem.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1057/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1057/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1038", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1038/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1038/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1038/events", "html_url": "https://github.com/ansible-community/molecule/issues/1038", "id": 274179054, "node_id": "MDU6SXNzdWUyNzQxNzkwNTQ=", "number": 1038, "title": "molecule create don't create containers when provisioner.options.tags defined", "user": {"login": "popstas", "id": 3027126, "node_id": "MDQ6VXNlcjMwMjcxMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/3027126?v=4", "gravatar_id": "", "url": "https://api.github.com/users/popstas", "html_url": "https://github.com/popstas", "followers_url": "https://api.github.com/users/popstas/followers", "following_url": "https://api.github.com/users/popstas/following{/other_user}", "gists_url": "https://api.github.com/users/popstas/gists{/gist_id}", "starred_url": "https://api.github.com/users/popstas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/popstas/subscriptions", "organizations_url": "https://api.github.com/users/popstas/orgs", "repos_url": "https://api.github.com/users/popstas/repos", "events_url": "https://api.github.com/users/popstas/events{/privacy}", "received_events_url": "https://api.github.com/users/popstas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-11-15T14:39:13Z", "updated_at": "2018-02-08T04:49:41Z", "closed_at": "2017-11-22T01:37:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.4.1.0\r\nmolecule 2.4.0\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nmolecule.yml:\r\n``` yaml\r\n---\r\ndriver:\r\n  name: docker\r\nplatforms:\r\n  - name: molecule-test\r\n    image: ubuntu\r\n    image_version: 16.04\r\nlint:\r\n  name: yamllint\r\n  enabled: False\r\n\r\nprovisioner:\r\n  name: ansible\r\n  options:\r\n    tags: sometag\r\n```\r\n\r\n`molecule create` actually don't creates containers, also, when I created containers and then add `options.tags`, `molecule destroy` don't removes containers.\r\n\r\nSee example repository - https://github.com/popstas/molecule-tags-create\r\n\r\nTravis-CI - https://travis-ci.org/popstas/molecule-tags-create/builds/302513011\r\n\r\nI have created role with `molecule init role -r molecule-tags-create`\r\n\r\nExample output:\r\n\r\n```\r\n$ molecule --debug create\r\n\r\nDEBUG: COMMAND\r\n/usr/local/bin/ansible-playbook --tags=micro --inventory=/home/popstas/projects/ansible/viasite-ansible/ansible-role-common/molecule/default/.molecule/ansible_inventory.yml --diff /home/popstas/projects/ansible/viasite-ansible/ansible-role-common/molecule/default/prepare.yml -vvv\r\n\r\n    ansible-playbook 2.4.1.0\r\n      config file = /home/popstas/projects/ansible/viasite-ansible/ansible-role-common/molecule/default/.molecule/ansible.cfg\r\n      configured module search path = [u'/usr/local/lib/python2.7/dist-packages/molecule/provisioner/ansible/plugins/libraries', u'/home/popstas/projects/ansible/viasite-ansible/ansible-role-common/library', u'/home/popstas/projects/ansible/viasite-ansible/ansible-role-common/molecule/default/.molecule/library']\r\n      ansible python module location = /usr/local/lib/python2.7/dist-packages/ansible\r\n      executable location = /usr/local/bin/ansible-playbook\r\n      python version = 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609]\r\n    Using /home/popstas/projects/ansible/viasite-ansible/ansible-role-common/molecule/default/.molecule/ansible.cfg as config file\r\n    Parsed /home/popstas/projects/ansible/viasite-ansible/ansible-role-common/molecule/default/.molecule/ansible_inventory.yml inventory source with yaml plugin\r\n\r\n    PLAYBOOK: prepare.yml **********************************************************\r\n    1 plays in /home/popstas/projects/ansible/viasite-ansible/ansible-role-common/molecule/default/prepare.yml\r\n\r\n    PLAY [Prepare] *****************************************************************\r\n    META: ran handlers\r\n    META: ran handlers\r\n    META: ran handlers\r\n\r\n    PLAY RECAP *********************************************************************\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1038/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1038/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1008", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/1008/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/1008/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/1008/events", "html_url": "https://github.com/ansible-community/molecule/issues/1008", "id": 267032577, "node_id": "MDU6SXNzdWUyNjcwMzI1Nzc=", "number": 1008, "title": "ANSIBLE_ROLES_PATH path component relative to the previous one", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-20T00:53:17Z", "updated_at": "2017-10-24T00:58:52Z", "closed_at": "2017-10-24T00:58:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version = ansible 2.4.0.0\r\nmolecule --version =  version 2.3.1\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nANSIBLE_ROLES_PATH: roles:../../../infrastructure/roles:../../../postfix/roles:../../../bind/roles\r\n\r\nEach path component is relative to a fixed directory\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nANSIBLE_ROLES_PATH: roles:../../../infrastructure/roles:../postfix/roles:../bind/roles\r\n\r\nWhen converted to absolute directory, each path component is evaluated relative to the directory name of the previous path component.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/1008/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/1008/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/996", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/996/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/996/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/996/events", "html_url": "https://github.com/ansible-community/molecule/issues/996", "id": 264968051, "node_id": "MDU6SXNzdWUyNjQ5NjgwNTE=", "number": 996, "title": "molecule.yml environment variables", "user": {"login": "mielas", "id": 11710554, "node_id": "MDQ6VXNlcjExNzEwNTU0", "avatar_url": "https://avatars.githubusercontent.com/u/11710554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mielas", "html_url": "https://github.com/mielas", "followers_url": "https://api.github.com/users/mielas/followers", "following_url": "https://api.github.com/users/mielas/following{/other_user}", "gists_url": "https://api.github.com/users/mielas/gists{/gist_id}", "starred_url": "https://api.github.com/users/mielas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mielas/subscriptions", "organizations_url": "https://api.github.com/users/mielas/orgs", "repos_url": "https://api.github.com/users/mielas/repos", "events_url": "https://api.github.com/users/mielas/events{/privacy}", "received_events_url": "https://api.github.com/users/mielas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-10-12T14:42:02Z", "updated_at": "2017-10-13T17:23:25Z", "closed_at": "2017-10-13T17:23:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.4.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/gitlab-runner/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]\r\n\r\nmolecule --version\r\nmolecule, version 2.2.1\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: OS package\r\n\r\n# Problem\r\n\r\nfrom http://molecule.readthedocs.io/en/latest/configuration.html:\r\n\r\nConfiguration options may contain environment variables. For example, suppose the shell contains VERIFIER_NAME=testinfra and the following molecule.yml is supplied.\r\n\r\ntried to use some env variables e.g.:\r\n\r\n```\r\n---\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: centos-chrony-review-${foo}\r\n    image: centos:latest\r\n    command: /sbin/init\r\n    privileged: yes\r\n```\r\n\r\nbut it results with an error while doing the create playbook (it tries to create \"centos-chrony-review-${foo}\" container):\r\n\r\n```\r\n    TASK [Create molecule instance(s)] *********************************************\r\n[...]\r\n    <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /home/gitlab-runner/.ansible/tmp/ansible-tmp-1507816543.65-231510959245136/docker_container.py; rm -rf \"/home/gitlab-runner/.ansible/tmp/ansible-tmp-1507816543.65-231510959245136/\" > /dev/null 2>&1 && sleep 0'\r\n[...]\r\n        \"item\": {\r\n            \"command\": \"/sbin/init\", \r\n            \"image\": \"centos:latest\", \r\n            \"name\": \"centos-chrony-review-${foo}\", \r\n            \"privileged\": true\r\n        }, \r\n        \"msg\": \"Error creating container: 400 Client Error: Bad Request (\\\"{\\\"message\\\":\\\"Invalid container name (centos-chrony-review-${foo}test), only [a-zA-Z0-9][a-zA-Z0-9_.-] are allowed\\\"}\\\")\"\r\n    }\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=3    changed=2    unreachable=0    failed=1   \r\n```\r\n\r\nat the same time after setting static container name:\r\n\r\n```\r\n---\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: centos-chrony-review-test\r\n    image: centos:latest\r\n    command: /sbin/init\r\n    privileged: yes\r\n```\r\n\r\nand running\r\n```\r\nmolecule -s scenario converge\r\n```\r\n\r\nso molecule/<scenario>/.molecule directory is provisioned and changing molecule.yml again to:\r\n\r\n```\r\nplatforms:\r\n  - name: centos-chrony-review-${foo}\r\n```\r\n\r\nit interpretes env variable properly during the converge stage (it tries to use centos-chrony-review-test):\r\n\r\n```\r\n--> Action: 'converge'\r\n    \r\n    PLAY [Converge] ****************************************************************\r\n    \r\n    TASK [Gathering Facts] *********************************************************\r\n    fatal: [centos-chrony-review-test]: UNREACHABLE! => {\"changed\": false, \"msg\": \"Authentication or permission failure. In some cases, you may have been able to authenticate and did not have permissions on the target directory. Consider changing the remote temp path in ansible.cfg to a path rooted in \\\"/tmp\\\". Failed command was: ( umask 77 && mkdir -p \\\"` echo ~/.ansible/tmp/ansible-tmp-1507817271.01-143009559961806 `\\\" && echo ansible-tmp-1507817271.01-143009559961806=\\\"` echo ~/.ansible/tmp/ansible-tmp-1507817271.01-143009559961806 `\\\" ), exited with result 1\", \"unreachable\": true}\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    centos-chrony-review-test  : ok=0    changed=0    unreachable=1    failed=0\r\n```\r\n\r\nthe question is: is there a way to use env variable in instance name? i've tried docker and openstack drivers with no luck", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/996/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/995", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/995/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/995/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/995/events", "html_url": "https://github.com/ansible-community/molecule/pull/995", "id": 264294495, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQ1NzQxOTAz", "number": 995, "title": "Corrected --debug", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-10-10T16:31:22Z", "updated_at": "2017-10-10T16:33:55Z", "closed_at": "2017-10-10T16:33:39Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/995", "html_url": "https://github.com/ansible-community/molecule/pull/995", "diff_url": "https://github.com/ansible-community/molecule/pull/995.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/995.patch", "merged_at": "2017-10-10T16:33:39Z"}, "body": "When implementing #990, the `--debug` flag no longer longer worked.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/995/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/993", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/993/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/993/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/993/events", "html_url": "https://github.com/ansible-community/molecule/issues/993", "id": 263958238, "node_id": "MDU6SXNzdWUyNjM5NTgyMzg=", "number": 993, "title": "[Question] Hashed password in ansible variable, in molecule.yml", "user": {"login": "blackillzone", "id": 2394200, "node_id": "MDQ6VXNlcjIzOTQyMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/2394200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blackillzone", "html_url": "https://github.com/blackillzone", "followers_url": "https://api.github.com/users/blackillzone/followers", "following_url": "https://api.github.com/users/blackillzone/following{/other_user}", "gists_url": "https://api.github.com/users/blackillzone/gists{/gist_id}", "starred_url": "https://api.github.com/users/blackillzone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blackillzone/subscriptions", "organizations_url": "https://api.github.com/users/blackillzone/orgs", "repos_url": "https://api.github.com/users/blackillzone/repos", "events_url": "https://api.github.com/users/blackillzone/events{/privacy}", "received_events_url": "https://api.github.com/users/blackillzone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2017-10-09T16:42:23Z", "updated_at": "2020-05-14T15:00:52Z", "closed_at": "2017-10-12T23:09:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\n\r\nansible 2.3.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609]\r\n\r\nmolecule --version\r\n\r\nmolecule, version 2.2.1\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nBe able to put hashed password via the molecule.yml file.\r\nFor example:\r\n```\r\nprovisioner:\r\n  name: ansible\r\n  inventory:\r\n    host_vars:\r\n      sftp:\r\n        sftp_users:\r\n          - user_name: user\r\n            # password: user\r\n            password: $6$8I5Cfmpr$kGZBjaQVzj7zd5bJyIx9X8gzo1G10fb7J2FF8nL8KYJflHKeraczF7SAdLs83a4QMDI4h.9jfE5T12Du7MGnz.\r\n            uid: 5000\r\n            gid: 5000\r\n  options:\r\n    D: True\r\n  lint:\r\n    name: ansible-lint\r\n```\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nWhen I launch whatever molecule command, I get this output:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/molecule/command/login.py\", line 151, in login\r\n    base.get_configs(args, command_args), scenario_name)\r\n  File \"/usr/local/lib/python2.7/dist-packages/molecule/command/base.py\", line 119, in get_configs\r\n    ansible_args=ansible_args, ) for c in glob.glob(MOLECULE_GLOB)\r\n  File \"/usr/local/lib/python2.7/dist-packages/molecule/config.py\", line 90, in __init__\r\n    self.config = self._combine()\r\n  File \"/usr/local/lib/python2.7/dist-packages/molecule/config.py\", line 248, in _combine\r\n    interpolated_config = i.interpolate(stream.read())\r\n  File \"/usr/local/lib/python2.7/dist-packages/molecule/interpolation.py\", line 61, in interpolate\r\n    raise InvalidInterpolation(string)\r\nmolecule.interpolation.InvalidInterpolation\r\n```\r\n\r\nI tried to put the hash between quotes, but it's not working.\r\n\r\nFor information, I'm using the user module in Ansible.\r\n\r\nEDIT: It's also not working when I comment the variable. So it seems so be related to some specific characters in the hash.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/993/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/985", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/985/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/985/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/985/events", "html_url": "https://github.com/ansible-community/molecule/issues/985", "id": 263192406, "node_id": "MDU6SXNzdWUyNjMxOTI0MDY=", "number": 985, "title": "\"Failed to connect to the host via ssh\" using Vagrant", "user": {"login": "pescobar", "id": 103797, "node_id": "MDQ6VXNlcjEwMzc5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/103797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pescobar", "html_url": "https://github.com/pescobar", "followers_url": "https://api.github.com/users/pescobar/followers", "following_url": "https://api.github.com/users/pescobar/following{/other_user}", "gists_url": "https://api.github.com/users/pescobar/gists{/gist_id}", "starred_url": "https://api.github.com/users/pescobar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pescobar/subscriptions", "organizations_url": "https://api.github.com/users/pescobar/orgs", "repos_url": "https://api.github.com/users/pescobar/repos", "events_url": "https://api.github.com/users/pescobar/events{/privacy}", "received_events_url": "https://api.github.com/users/pescobar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-10-05T16:41:15Z", "updated_at": "2017-10-07T02:31:49Z", "closed_at": "2017-10-05T22:28:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.4.0.0\r\nmolecule, version 2.2.0\r\nPython 2.7.5 in a Centos 7.3 machine\r\n```\r\n\r\n- Molecule installation method: pip inside virtualenv\r\n- Ansible installation method: pip inside virtualenv\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nAfter installing latest ansible and latest molecule using pip I create a test template running `molecule init role -d vagrant -r test_role` and then I do `molecule test` and I get this error:\r\n\r\n```\r\n    PLAY [Prepare] *****************************************************************\r\n\r\n    TASK [Install python for Ansible] **********************************************\r\n    task path: /data/ansible/test_role/molecule/default/prepare.yml:6\r\n    <instance> ESTABLISH SSH CONNECTION FOR USER: None\r\n    <instance> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o ConnectTimeout=10 -o ControlPath=/root/.ansible/cp/%h-%p-%r -tt instance 'sudo -H -S -n -u root /bin/sh -c '\"'\"'echo BECOME-SUCCESS-znzfjuybndcpttjdqqxyxxfupbaxtuzx; test -e /usr/bin/python || (apt -y update && apt install -y python-minimal)'\"'\"''\r\n    <instance> (255, '', 'ssh: Could not resolve hostname instance: Name or service not known\\r\\n')\r\n    fatal: [instance]: UNREACHABLE! => {\r\n        \"changed\": false, \r\n        \"msg\": \"Failed to connect to the host via ssh: ssh: Could not resolve hostname instance: Name or service not known\\r\\n\", \r\n        \"unreachable\": true\r\n    }\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    instance                   : ok=0    changed=0    unreachable=1    failed=0\r\n```\r\n\r\nIf I switch to another virtualenv in the same machine with ansible-2.3.1.0 and molecule-2.1.0 `molecule test` works ok . I am using the same role template which I have created with molecule-2.2.0. I only switch from one virtualenv to another virtualenv with different versions of ansible and molecule.\r\n\r\nThis is the list of python packages installed in the working virtualenv with ansible2.3 and molecule2.1\r\nhttps://gist.github.com/anonymous/da4648b03fad895cf543d9446d4efc73\r\n\r\nThis is the list of python packages in the failing virtual environment with ansible2.4 and molecule2.2\r\nhttps://gist.github.com/1db743bedf162d37689a188b055f407b\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/985/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/985/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/960", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/960/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/960/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/960/events", "html_url": "https://github.com/ansible-community/molecule/issues/960", "id": 258906261, "node_id": "MDU6SXNzdWUyNTg5MDYyNjE=", "number": 960, "title": "load ansible config not Ansible 2.4 compliant", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-09-19T17:44:43Z", "updated_at": "2017-09-29T19:11:57Z", "closed_at": "2017-09-29T18:26:41Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\n\r\n2.4\r\n\r\nmolecule --version\r\n\r\nmaster\r\n```\r\n\r\n- Molecule installation method: source\r\n- Ansible installation method: pip\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nUnit tests fail with Ansible 2.4.\r\n\r\n```\r\n___________________________________________________________________ test_ansible_config_options_property_when_enabled ___________________________________________________________________\r\n\r\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x1070ae4e0>, ansible_config = '/Users/jodewey/git/molecule_2/test/unit/provisioner/../../resources/ansible.cfg'\r\nansible_instance = <molecule.provisioner.ansible.Ansible object at 0x106bbaeb8>\r\n\r\n    def test_ansible_config_options_property_when_enabled(\r\n            monkeypatch, ansible_config, ansible_instance):\r\n        monkeypatch.setenv('MOLECULE_INCLUDE_ANSIBLE_CFG', '1')\r\n        monkeypatch.setenv('ANSIBLE_CONFIG', ansible_config)\r\n        x = {\r\n            'default': {\r\n                'foo': 'bar',\r\n            }\r\n        }\r\n\r\n>       assert x == ansible_instance.ansible_config_options\r\n\r\n/Users/jodewey/git/molecule_2/test/unit/provisioner/test_ansible.py:119:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n/Users/jodewey/git/molecule_2/molecule/provisioner/ansible.py:259: in ansible_config_options\r\n    c, p = self._load_ansible_config_file()\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <molecule.provisioner.ansible.Ansible object at 0x106bbaeb8>\r\n\r\n    def _load_ansible_config_file(self):\r\n>       return ansible.constants.load_config_file()\r\nE       AttributeError: module 'ansible.constants' has no attribute 'load_config_file'\r\n\r\n/Users/jodewey/git/molecule_2/molecule/provisioner/ansible.py:710: AttributeError\r\n_______________________________________________________ test_ansible_config_options_property_when_enabled_but_missing_ansible_cfg _______________________________________________________\r\n\r\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x106fa30f0>, ansible_instance = <molecule.provisioner.ansible.Ansible object at 0x106f9d278>\r\n\r\n    def test_ansible_config_options_property_when_enabled_but_missing_ansible_cfg(\r\n            monkeypatch, ansible_instance):\r\n        monkeypatch.setenv('MOLECULE_INCLUDE_ANSIBLE_CFG', '1')\r\n\r\n>       assert {} == ansible_instance.ansible_config_options\r\n\r\n/Users/jodewey/git/molecule_2/test/unit/provisioner/test_ansible.py:126:\r\n\r\n/Users/jodewey/git/molecule_2/molecule/provisioner/ansible.py:259: in ansible_config_options\r\n    c, p = self._load_ansible_config_file()\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <molecule.provisioner.ansible.Ansible object at 0x106f9d278>\r\n\r\n    def _load_ansible_config_file(self):\r\n>       return ansible.constants.load_config_file()\r\nE       AttributeError: module 'ansible.constants' has no attribute 'load_config_file'\r\n\r\n/Users/jodewey/git/molecule_2/molecule/provisioner/ansible.py:710: AttributeError\r\n______________________________________________________________________________ test_ansible_config_to_dict ______________________________________________________________________________\r\n\r\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x106fe6b38>, ansible_config = '/Users/jodewey/git/molecule_2/test/unit/provisioner/../../resources/ansible.cfg'\r\nansible_instance = <molecule.provisioner.ansible.Ansible object at 0x106fdb828>\r\n\r\n    def test_ansible_config_to_dict(monkeypatch, ansible_config, ansible_instance):\r\n        monkeypatch.setenv('ANSIBLE_CONFIG', ansible_config)\r\n>       c, p = ansible_instance._load_ansible_config_file()\r\n\r\n/Users/jodewey/git/molecule_2/test/unit/provisioner/test_ansible.py:871:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <molecule.provisioner.ansible.Ansible object at 0x106fdb828>\r\n\r\n    def _load_ansible_config_file(self):\r\n>       return ansible.constants.load_config_file()\r\nE       AttributeError: module 'ansible.constants' has no attribute 'load_config_file'\r\n\r\n/Users/jodewey/git/molecule_2/molecule/provisioner/ansible.py:710: AttributeError\r\n_____________________________________________________________________________ test_load_ansible_config_file _____________________________________________________________________________\r\n\r\nmonkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x1067e9f98>, ansible_config = '/Users/jodewey/git/molecule_2/test/unit/provisioner/../../resources/ansible.cfg'\r\nansible_instance = <molecule.provisioner.ansible.Ansible object at 0x106bebf28>\r\n\r\n    def test_load_ansible_config_file(monkeypatch, ansible_config,\r\n                                      ansible_instance):\r\n        monkeypatch.setenv('ANSIBLE_CONFIG', ansible_config)\r\n>       c, p = ansible_instance._load_ansible_config_file()\r\n\r\n/Users/jodewey/git/molecule_2/test/unit/provisioner/test_ansible.py:884:\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = <molecule.provisioner.ansible.Ansible object at 0x106bebf28>\r\n\r\n    def _load_ansible_config_file(self):\r\n>       return ansible.constants.load_config_file()\r\nE       AttributeError: module 'ansible.constants' has no attribute 'load_config_file'\r\n\r\n/Users/jodewey/git/molecule_2/molecule/provisioner/ansible.py:710: AttributeError\r\n========================================================================= 4 failed, 503 passed in 20.52 seconds =========================================================================\r\nERROR: InvocationError: '/Users/jodewey/git/molecule_2/.tox/py36-ansible24-unit/bin/py.test -vv --cov-report=term-missing --cov=/Users/jodewey/git/molecule_2/molecule/ --no-cov-on-fail'\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/960/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/939", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/939/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/939/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/939/events", "html_url": "https://github.com/ansible-community/molecule/issues/939", "id": 255036700, "node_id": "MDU6SXNzdWUyNTUwMzY3MDA=", "number": 939, "title": "Using group_vars in molecule.yml does not work", "user": {"login": "dj-wasabi", "id": 1171720, "node_id": "MDQ6VXNlcjExNzE3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1171720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dj-wasabi", "html_url": "https://github.com/dj-wasabi", "followers_url": "https://api.github.com/users/dj-wasabi/followers", "following_url": "https://api.github.com/users/dj-wasabi/following{/other_user}", "gists_url": "https://api.github.com/users/dj-wasabi/gists{/gist_id}", "starred_url": "https://api.github.com/users/dj-wasabi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dj-wasabi/subscriptions", "organizations_url": "https://api.github.com/users/dj-wasabi/orgs", "repos_url": "https://api.github.com/users/dj-wasabi/repos", "events_url": "https://api.github.com/users/dj-wasabi/events{/privacy}", "received_events_url": "https://api.github.com/users/dj-wasabi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-04T13:05:27Z", "updated_at": "2017-09-04T18:29:23Z", "closed_at": "2017-09-04T18:14:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.3.2.0\r\n  config file = /Users/wdijkerman/git/ansible/access/ansible.cfg\r\n  configured module search path = [u'Library']\r\n  python version = 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\r\nmolecule, version 2.0.2\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nAccording to the documentation found on http://molecule.readthedocs.io/en/latest/configuration.html#id11, the following is how I should configure molecule to use group_vars: \r\n```\r\nplatforms:\r\n  - name: instance\r\n    image: milcom/centos7-systemd:latest\r\n    groups:\r\n      - group1\r\n    privileged: True\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\n  inventory:\r\n    group_vars:\r\n      group1:\r\n        user_groups:\r\n         - name: admin\r\n           gid: 1100\r\n        system_users:\r\n         - name: vault\r\n           account: vault\r\n           uid: 1051\r\n         - name: consul\r\n           account: consul\r\n           uid: 1050\r\n        users:\r\n         - name: wdijkerman\r\n           account: wdijkerman\r\n           home: /home/wdijkerman\r\n           state: present\r\n           uid: 1000\r\n           groups:\r\n             - admin\r\n           pub_key: blabla\r\n         - name: jenkins\r\n           account: jenkins\r\n           home: /var/lib/jenkins\r\n           state: present\r\n           uid: 1052\r\n           groups:\r\n             - admin\r\n           pub_key: ssh-rsa blabla\r\n        users_in_group:\r\n         - admin\r\n```\r\nI would expect that 4 lists with data are available in my role and tasks can use it.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nExecuting a `converge` would lead to:\r\n```\r\n--> Action: 'converge'\r\n    \r\n    PLAY [Converge] ****************************************************************\r\n    \r\n    TASK [Gathering Facts] *********************************************************\r\n    ok: [instance]\r\n    \r\n    TASK [ansible-access : Creating groups] ****************************************\r\n    \r\n    TASK [ansible-access : Managing System users] **********************************\r\n    \r\n    TASK [ansible-access : Managing System users] **********************************\r\n    \r\n    TASK [ansible-access : Managing users] *****************************************\r\n    \r\n    TASK [ansible-access : Remove password expiration] *****************************\r\n    failed: [instance] (item=wdijkerman) => {\"failed\": true, \"item\": \"wdijkerman\", \"msg\": \"unable to find user wdijkerman in /etc/shadow\"}\r\n    failed: [instance] (item=jenkins) => {\"failed\": true, \"item\": \"jenkins\", \"msg\": \"unable to find user jenkins in /etc/shadow\"}\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    instance                   : ok=1    changed=0    unreachable=0    failed=1\r\n```\r\nIt fails because the `wdijkerman` and the `jenkins` is not created.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/939/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/939/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/937", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/937/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/937/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/937/events", "html_url": "https://github.com/ansible-community/molecule/issues/937", "id": 254762230, "node_id": "MDU6SXNzdWUyNTQ3NjIyMzA=", "number": 937, "title": "Default tests fail to run when remote_user is set to a different user than the current one", "user": {"login": "coaxial", "id": 2927869, "node_id": "MDQ6VXNlcjI5Mjc4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/2927869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coaxial", "html_url": "https://github.com/coaxial", "followers_url": "https://api.github.com/users/coaxial/followers", "following_url": "https://api.github.com/users/coaxial/following{/other_user}", "gists_url": "https://api.github.com/users/coaxial/gists{/gist_id}", "starred_url": "https://api.github.com/users/coaxial/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coaxial/subscriptions", "organizations_url": "https://api.github.com/users/coaxial/orgs", "repos_url": "https://api.github.com/users/coaxial/repos", "events_url": "https://api.github.com/users/coaxial/events{/privacy}", "received_events_url": "https://api.github.com/users/coaxial/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-09-01T22:09:17Z", "updated_at": "2017-09-03T23:22:28Z", "closed_at": "2017-09-03T23:22:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.3.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Jan 19 2017, 14:48:08) [GCC 6.3.0 20170118]\r\n\r\nmolecule --version\r\nmolecule, version 2.0.1\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: OS package\r\n\r\n# Desired Behaviour\r\n\r\nmolecule test should run fine\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\n$ molecule init role --role-name test-role\r\n--> Initializing new role test-role...\r\nInitialized role in /home/coaxial/code/test-role successfully.\r\n\r\n$ cd test-role/\r\n\r\n$ molecule test\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u251c\u2500\u2500 destroy\r\n    \u251c\u2500\u2500 dependency\r\n    \u251c\u2500\u2500 syntax\r\n    \u251c\u2500\u2500 create\r\n    \u251c\u2500\u2500 converge\r\n    \u251c\u2500\u2500 idempotence\r\n    \u251c\u2500\u2500 lint\r\n    \u251c\u2500\u2500 side_effect\r\n    \u251c\u2500\u2500 verify\r\n    \u2514\u2500\u2500 destroy\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    ok: [localhost] => (item=(censored due to no_log))\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=1    changed=0    unreachable=0    failed=0\r\n    \r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'dependency'\r\nSkipping, missing the requirements file.\r\n--> Scenario: 'default'\r\n--> Action: 'syntax'\r\n    \r\n    playbook: /home/coaxial/code/test-role/molecule/default/playbook.yml\r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'create'\r\n    \r\n    PLAY [Create] ******************************************************************\r\n    \r\n    TASK [Create Dockerfiles from image names] *************************************\r\n    changed: [localhost] => (item=(censored due to no_log))\r\n    \r\n    TASK [Discover local Docker images] ********************************************\r\n    ok: [localhost] => (item=(censored due to no_log))\r\n    \r\n    TASK [Build an Ansible compatible image] ***************************************\r\n    changed: [localhost] => (item=(censored due to no_log))\r\n    \r\n    TASK [Create molecule instance(s)] *********************************************\r\n    changed: [localhost] => (item=(censored due to no_log))\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=4    changed=3    unreachable=0    failed=0\r\n    \r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'converge'\r\n    \r\n    PLAY [Converge] ****************************************************************\r\n    \r\n    TASK [Gathering Facts] *********************************************************\r\n    ok: [instance]\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    instance                   : ok=1    changed=0    unreachable=0    failed=0\r\n    \r\n    \r\n--> Scenario: 'default'\r\n--> Action: 'idempotence'\r\nIdempotence completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'lint'\r\n--> Executing Yamllint on files found in /home/coaxial/code/test-role/...\r\nLint completed successfully.\r\n--> Executing Flake8 on files found in /home/coaxial/code/test-role/molecule/default/tests/...\r\nLint completed successfully.\r\n--> Executing Ansible Lint on /home/coaxial/code/test-role/molecule/default/playbook.yml...\r\nLint completed successfully.\r\n--> Scenario: 'default'\r\n--> Action: 'side_effect'\r\nSkipping, side effect playbook not configured.\r\n--> Scenario: 'default'\r\n--> Action: 'verify'\r\n--> Executing Testinfra tests found in /home/coaxial/code/test-role/molecule/default/tests/...\r\n    ============================= test session starts ==============================\r\n    platform linux2 -- Python 2.7.13, pytest-3.2.1, py-1.4.34, pluggy-0.4.0\r\n    rootdir: /home/coaxial/code/test-role/molecule/default, inifile:\r\n    plugins: testinfra-1.6.3\r\ncollected 1 item                                                                \r\n    \r\n    tests/test_default.py F\r\n    \r\n    =================================== FAILURES ===================================\r\n    _____________________ test_hosts_file[ansible://instance] ______________________\r\n    \r\n    host = <testinfra.host.Host object at 0x7f3ee7529d50>\r\n    \r\n        def test_hosts_file(host):\r\n    >       f = host.file('/etc/hosts')\r\n    \r\n    tests/test_default.py:10:\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    ../../../../.local/lib/python2.7/site-packages/testinfra/host.py:91: in __getattr__\r\n        obj = module_class.get_module(self)\r\n    ../../../../.local/lib/python2.7/site-packages/testinfra/modules/base.py:22: in get_module\r\n        klass = cls.get_module_class(_host)\r\n    ../../../../.local/lib/python2.7/site-packages/testinfra/modules/file.py:176: in get_module_class\r\n        if host.system_info.type == \"linux\":\r\n    ../../../../.local/lib/python2.7/site-packages/testinfra/modules/systeminfo.py:122: in type\r\n        return self.sysinfo[\"type\"]\r\n    ../../../../.local/lib/python2.7/site-packages/testinfra/modules/systeminfo.py:31: in sysinfo\r\n        self._sysinfo = self.get_system_info()\r\n    ../../../../.local/lib/python2.7/site-packages/testinfra/modules/systeminfo.py:103: in get_system_info\r\n        sysinfo[\"type\"] = self.check_output(\"uname -s\").lower()\r\n    ../../../../.local/lib/python2.7/site-packages/testinfra/host.py:55: in run\r\n        return self.backend.run(command, *args, **kwargs)\r\n    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n    \r\n    self = <testinfra.backend.ansible.AnsibleBackend object at 0x7f3ee7529b90>\r\n    command = 'uname -s', args = (), kwargs = {}, out = {}\r\n    \r\n        def run(self, command, *args, **kwargs):\r\n            command = self.get_command(command, *args)\r\n            out = self.run_ansible(\"shell\", module_args=command)\r\n            return self.result(\r\n    >           out['rc'],\r\n                command,\r\n                stdout_bytes=None,\r\n                stderr_bytes=None,\r\n                stdout=out[\"stdout\"], stderr=out[\"stderr\"],\r\n            )\r\n    E       KeyError: u'rc'\r\n    \r\n    ../../../../.local/lib/python2.7/site-packages/testinfra/backend/ansible.py:47: KeyError\r\n    ----------------------------- Captured stderr call -----------------------------\r\n     [WARNING]: Failure using method (v2_runner_on_unreachable) in callback plugin\r\n    (<testinfra.utils.ansible_runner.Callback object at 0x7f3ee7441790>): Host\r\n    instance is unreachable: {'changed': False,  'msg': u'Authentication or\r\n    permission failure. In some cases, you may have been able to authenticate and\r\n    did not have permissions on the remote directory. Consider changing the remote\r\n    temp path in ansible.cfg to a path rooted in \"/tmp\". Failed command was: (\r\n    umask 77 && mkdir -p \"` echo unable to find user ansible: no matching entries\r\n    in passwd file/.ansible/tmp/ansible-tmp-1504303511.63-247028524748039 `\" &&\r\n    echo ansible-tmp-1504303511.63-247028524748039=\"` echo unable to find user\r\n    ansible: no matching entries in passwd file/.ansible/tmp/ansible-\r\n    tmp-1504303511.63-247028524748039 `\" ), exited with result 126: unable to find\r\n    user ansible: no matching entries in passwd file\\r\\n',  'unreachable': True}\r\n    =============================== warnings summary ===============================\r\n    None\r\n      Module already imported so can not be re-written: testinfra\r\n    \r\n    -- Docs: http://doc.pytest.org/en/latest/warnings.html\r\n    ===================== 1 failed, 1 warnings in 0.53 seconds =====================\r\n\r\n$ molecule destroy\r\n--> Test matrix\r\n    \r\n\u2514\u2500\u2500 default\r\n    \u2514\u2500\u2500 destroy\r\n--> Scenario: 'default'\r\n--> Action: 'destroy'\r\n    \r\n    PLAY [Destroy] *****************************************************************\r\n    \r\n    TASK [Destroy molecule instance(s)] ********************************************\r\n    changed: [localhost] => (item=(censored due to no_log))\r\n    \r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=1    changed=1    unreachable=0    failed=0\r\n```\r\n\r\n```\r\n$ pip freeze\r\nadium-theme-ubuntu==0.3.4\r\nansible==2.3.2.0\r\nansible-lint==3.4.13\r\nanyconfig==0.9.1\r\napsw==3.16.2.post1\r\narrow==0.10.0\r\nasn1crypto==0.22.0\r\nattrs==17.2.0\r\nautobahn==17.6.2\r\nAutomat==0.6.0\r\nbackports.ssl-match-hostname==3.5.0.1\r\nbcrypt==3.1.3\r\nBeautifulSoup==3.2.1\r\nbeautifulsoup4==4.5.3\r\nbinaryornot==0.4.4\r\ncertifi==2017.7.27.1\r\ncffi==1.10.0\r\nchardet==3.0.4\r\nCheetah==2.4.4\r\nCherryPy==3.5.0\r\nclick==6.7\r\nclick-completion==0.2.1\r\ncolorama==0.3.7\r\nconfigparser==3.5.0\r\nconstantly==15.1.0\r\ncookiecutter==1.5.1\r\ncryptography==2.0.3\r\ncssselect==1.0.1\r\ncssutils==1.0\r\ndblatex==0.3.9.post1\r\ndnspython==1.15.0\r\ndocker-py==1.10.6\r\ndocker-pycreds==0.2.1\r\nduplicity==0.7.6\r\nenum34==1.1.6\r\nfasteners==0.14.1\r\nfeedparser==5.1.3\r\nflake8==3.3.0\r\nfuture==0.16.0\r\ngit-url-parse==1.0.1\r\nhkdf==0.0.3\r\nhowdoi==1.1.9\r\nhtml5lib==0.999999999\r\nhttplib2==0.9.2\r\nhumanize==0.5.1\r\nhyperlink==17.2.1\r\nidna==2.6\r\nincremental==17.5.0\r\nipaddr==2.1.11\r\nipaddress==1.0.18\r\nJinja2==2.9.6\r\njinja2-time==0.2.0\r\nkeyring==10.3.1\r\nkeyrings.alt==2.2\r\nlibvirt-python==3.0.0\r\nlockfile==0.12.2\r\nlxml==3.8.0\r\nmagic-wormhole==0.10.2\r\nMarkdown==2.6.8\r\nMarkupSafe==1.0\r\nmarshmallow==2.13.5\r\nmccabe==0.6.1\r\nmechanize==0.2.5\r\nmercurial==3.9.1\r\nmolecule==2.0.1\r\nmonotonic==1.3\r\nndg-httpsclient==0.4.2\r\nnetifaces==0.10.4\r\nparamiko==2.2.1\r\npathspec==0.5.3\r\npbr==3.0.1\r\npexpect==4.2.1\r\nPillow==4.0.0\r\npoyo==0.4.1\r\nprogressbar==2.3\r\npsutil==5.2.2\r\nptyprocess==0.5.2\r\npy==1.4.34\r\npyasn1==0.3.3\r\npyasn1-modules==0.0.9\r\npycodestyle==2.3.1\r\npycparser==2.18\r\npycrypto==2.6.1\r\npyflakes==1.5.0\r\nPygments==2.2.0\r\npygobject==3.22.0\r\nPyNaCl==1.1.2\r\npyOpenSSL==17.0.0\r\npyparsing==2.1.10\r\npyquery==1.2.17\r\npytest==3.2.1\r\npython-apt==1.4.0b2\r\npython-dateutil==2.6.1\r\npython-gilt==1.1.0\r\npython-vagrant==0.5.14\r\npyxdg==0.25\r\nPyYAML==3.12\r\nrepoze.lru==0.6\r\nrequests==2.18.4\r\nrequests-cache==0.4.13\r\nRoutes==2.2\r\nSecretStorage==2.3.1\r\nservice-identity==17.0.0\r\nsh==1.12.14\r\nsix==1.10.0\r\nspake2==0.7\r\ntabulate==0.7.7\r\ntestinfra==1.6.3\r\ntqdm==4.14.0\r\ntree-format==0.1.1\r\nTwisted==17.5.0\r\ntxaio==2.8.0\r\ntxtorcon==0.19.3\r\nunity-lens-photos==1.0\r\nurllib3==1.22\r\nuTidylib==0.3\r\nwebencodings==0.5\r\nWebOb==1.6.2\r\nwebsocket-client==0.44.0\r\nwhichcraft==0.4.1\r\nyamllint==1.8.1\r\nzope.interface==4.4.2\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/937/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/933", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/933/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/933/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/933/events", "html_url": "https://github.com/ansible-community/molecule/issues/933", "id": 253919587, "node_id": "MDU6SXNzdWUyNTM5MTk1ODc=", "number": 933, "title": "Passing arbitrary options to ansible-lint", "user": {"login": "ticktockhouse", "id": 6168869, "node_id": "MDQ6VXNlcjYxNjg4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/6168869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ticktockhouse", "html_url": "https://github.com/ticktockhouse", "followers_url": "https://api.github.com/users/ticktockhouse/followers", "following_url": "https://api.github.com/users/ticktockhouse/following{/other_user}", "gists_url": "https://api.github.com/users/ticktockhouse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ticktockhouse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ticktockhouse/subscriptions", "organizations_url": "https://api.github.com/users/ticktockhouse/orgs", "repos_url": "https://api.github.com/users/ticktockhouse/repos", "events_url": "https://api.github.com/users/ticktockhouse/events{/privacy}", "received_events_url": "https://api.github.com/users/ticktockhouse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/ansible-community/molecule/milestones/5", "html_url": "https://github.com/ansible-community/molecule/milestone/5", "labels_url": "https://api.github.com/repos/ansible-community/molecule/milestones/5/labels", "id": 4194013, "node_id": "MDk6TWlsZXN0b25lNDE5NDAxMw==", "number": 5, "title": "2.9", "description": "", "creator": {"login": "ssbarnea", "id": 102495, "node_id": "MDQ6VXNlcjEwMjQ5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/102495?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbarnea", "html_url": "https://github.com/ssbarnea", "followers_url": "https://api.github.com/users/ssbarnea/followers", "following_url": "https://api.github.com/users/ssbarnea/following{/other_user}", "gists_url": "https://api.github.com/users/ssbarnea/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbarnea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbarnea/subscriptions", "organizations_url": "https://api.github.com/users/ssbarnea/orgs", "repos_url": "https://api.github.com/users/ssbarnea/repos", "events_url": "https://api.github.com/users/ssbarnea/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbarnea/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2019-04-02T14:52:49Z", "updated_at": "2019-04-02T14:53:50Z", "due_on": null, "closed_at": "2019-04-02T14:53:50Z"}, "comments": 7, "created_at": "2017-08-30T08:34:31Z", "updated_at": "2019-04-02T14:53:35Z", "closed_at": "2018-02-14T02:37:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.3.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Jan 19 2017, 14:48:08) [GCC 6.3.0 20170118]\r\nmolecule, version 2.0.0.0rc16\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: OS package\r\n\r\nMore of a question, actually (I hope you don't mind).\r\n\r\nIs it possible to pass arbitrary CLI options to ansible-lint? Looking at the source code and not having much python background, it looks like it's only possible to pass files to exclude. Is it possible e.g. to pass '-x', to tell `ansible-lint` to ignore certain linting rules?\r\n\r\nI only ask because neither the Google Group nor the IRC channels seem very active.\r\n\r\nThanks\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/933/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/930", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/930/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/930/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/930/events", "html_url": "https://github.com/ansible-community/molecule/issues/930", "id": 253607448, "node_id": "MDU6SXNzdWUyNTM2MDc0NDg=", "number": 930, "title": "\"ERROR: The default scenario not found.\" while creating the default scenario", "user": {"login": "dj-wasabi", "id": 1171720, "node_id": "MDQ6VXNlcjExNzE3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1171720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dj-wasabi", "html_url": "https://github.com/dj-wasabi", "followers_url": "https://api.github.com/users/dj-wasabi/followers", "following_url": "https://api.github.com/users/dj-wasabi/following{/other_user}", "gists_url": "https://api.github.com/users/dj-wasabi/gists{/gist_id}", "starred_url": "https://api.github.com/users/dj-wasabi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dj-wasabi/subscriptions", "organizations_url": "https://api.github.com/users/dj-wasabi/orgs", "repos_url": "https://api.github.com/users/dj-wasabi/repos", "events_url": "https://api.github.com/users/dj-wasabi/events{/privacy}", "received_events_url": "https://api.github.com/users/dj-wasabi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-29T10:37:53Z", "updated_at": "2017-08-29T17:04:08Z", "closed_at": "2017-08-29T16:51:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.3.2.0\r\n  config file = /Users/wdijkerman/git/ansible/zabbix-server/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\r\nmolecule --version\r\nmolecule, version 2.0.0\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nBusy with the transformation of my current roles from Molecule V1 to V2. When following the http://molecule.readthedocs.io/en/latest/porting.html page, I should be able to transform the V1 to a V2 setup.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nWhen following the documentation at http://molecule.readthedocs.io/en/latest/porting.html, with the first step it throws an error:\r\n```\r\nERROR: The default scenario not found.  Please create a scenario named 'default' first.\r\n```\r\nI execute the following command:\r\n```\r\nmolecule --debug init scenario -r ansible-zabbix-server -s default -d docker\r\n```\r\nAm I doing something wrong? Same error is also on the 'ansible-zabbix-agent' role.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/930/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/930/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/927", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/927/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/927/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/927/events", "html_url": "https://github.com/ansible-community/molecule/issues/927", "id": 252572601, "node_id": "MDU6SXNzdWUyNTI1NzI2MDE=", "number": 927, "title": "Scenario name seems to be \"default\"", "user": {"login": "ticktockhouse", "id": 6168869, "node_id": "MDQ6VXNlcjYxNjg4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/6168869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ticktockhouse", "html_url": "https://github.com/ticktockhouse", "followers_url": "https://api.github.com/users/ticktockhouse/followers", "following_url": "https://api.github.com/users/ticktockhouse/following{/other_user}", "gists_url": "https://api.github.com/users/ticktockhouse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ticktockhouse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ticktockhouse/subscriptions", "organizations_url": "https://api.github.com/users/ticktockhouse/orgs", "repos_url": "https://api.github.com/users/ticktockhouse/repos", "events_url": "https://api.github.com/users/ticktockhouse/events{/privacy}", "received_events_url": "https://api.github.com/users/ticktockhouse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-24T11:32:31Z", "updated_at": "2021-01-15T09:30:59Z", "closed_at": "2017-08-25T22:56:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.3.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Jan 19 2017, 14:48:08) [GCC 6.3.0 20170118]\r\nmolecule, version 2.0.0.0rc16\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: OS package\r\n\r\n# Desired Behaviour\r\n\r\nCreate a new scenario with a given name (required by `molecule init`) and have it used correctly\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nWhen instantiating a molecule env in a pre-existing role using `molecule scenario init`, `--role-name` and `--scenario-name` are required, however if you then run e.g. a `molecule check`, you get the error:\r\n```\r\nERROR: Scenario 'default' not found.  Exiting.\r\n```\r\nIt seems as if \"default\" is hardcoded somewhere as this is what `molecule.yml` looks like:\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: docker\r\nlint:\r\n  name: yamllint\r\nplatforms:\r\n  - name: instance\r\n    image: centos:7\r\nprovisioner:\r\n  name: ansible\r\n  lint:\r\n    name: ansible-lint\r\nscenario:\r\n  name: new-scenario\r\nverifier:\r\n  name: testinfra\r\n  lint:\r\n    name: flake8\r\n``` \r\nIf I then change the scenario name to \"default\" in molecule.yml, it works..\r\n\r\nThanks", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/927/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/927/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/925", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/925/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/925/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/925/events", "html_url": "https://github.com/ansible-community/molecule/issues/925", "id": 250653100, "node_id": "MDU6SXNzdWUyNTA2NTMxMDA=", "number": 925, "title": "Molecule fails on Fedora 26 docker container - `dnf makecache fast` doesn't work anymore", "user": {"login": "giovtorres", "id": 4281845, "node_id": "MDQ6VXNlcjQyODE4NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/4281845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/giovtorres", "html_url": "https://github.com/giovtorres", "followers_url": "https://api.github.com/users/giovtorres/followers", "following_url": "https://api.github.com/users/giovtorres/following{/other_user}", "gists_url": "https://api.github.com/users/giovtorres/gists{/gist_id}", "starred_url": "https://api.github.com/users/giovtorres/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/giovtorres/subscriptions", "organizations_url": "https://api.github.com/users/giovtorres/orgs", "repos_url": "https://api.github.com/users/giovtorres/repos", "events_url": "https://api.github.com/users/giovtorres/events{/privacy}", "received_events_url": "https://api.github.com/users/giovtorres/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-16T14:44:46Z", "updated_at": "2017-08-27T19:17:17Z", "closed_at": "2017-08-27T19:17:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "molecule version: 1.23.1\r\n\r\nmolecule file:\r\n\r\n```\r\n---\r\ndocker:\r\n  containers:\r\n    - name: fedora26\r\n      image: fedora\r\n      image_version: 26\r\nverifier:\r\n  name: testinfra\r\n```\r\n\r\nError when creating image:\r\n```\r\n--> Creating Ansible compatible image of fedora:26 ...\r\n--> Building ansible compatible image...\r\n\tStep 1/8 : FROM fedora:26\r\n\t ---> c33114392d5e\r\n\tStep 2/8 : RUN /bin/sh -c 'if [ -x \"$(command -v apt-get)\" ]; then apt-get update && apt-get install -y python sudo bash; fi'\r\n\t ---> Using cache\r\n\t ---> 6ab7733bee52\r\n\tStep 3/8 : RUN /bin/sh -c 'if [ -x \"$(command -v yum)\" ]; then yum makecache fast && yum update -y && yum install -y python sudo yum-plugin-ovl bash && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf; fi'\r\n\t ---> Running in 100296cdc1f9\r\n\tusage: dnf makecache [-c [config file]] [-q] [-v] [--version]\r\n                     [--installroot [path]] [--nodocs] [--noplugins]\r\n                     [--enableplugin [plugin]] [--disableplugin [plugin]]\r\n                     [--releasever RELEASEVER] [--setopt SETOPTS]\r\n                     [--skip-broken] [-h] [--allowerasing] [-b] [-C]\r\n                     [-R [minutes]] [-d [debug level]] [--debugsolver]\r\n                     [--showduplicates] [-e ERRORLEVEL] [--obsoletes]\r\n                     [--rpmverbosity [debug level name]] [-y] [--assumeno]\r\n                     [--enablerepo [repo]] [--disablerepo [repo] | --repo\r\n                     [repo]] [-x [package]] [--disableexcludes [repo]]\r\n                     [--repofrompath [repo,path]] [--nogpgcheck]\r\n                     [--color COLOR] [--refresh] [-4] [-6] [--downloadonly]\r\n                     [--bugfix] [--enhancement] [--newpackage] [--security]\r\n                     [--advisory ADVISORY] [--bzs BUGZILLA] [--cves CVES]\r\n                     [--sec-severity {Critical,Important,Moderate,Low}]\r\n                     [--timer]\r\ndnf makecache: error: argument timer: invalid choice: 'fast' (choose from 'timer')\r\n\r\n\tThe command '/bin/sh -c /bin/sh -c 'if [ -x \"$(command -v yum)\" ]; then yum makecache fast && yum update -y && yum install -y python sudo yum-plugin-ovl bash && sed -i 's/plugins=0/plugins=1/g' /etc/yum.conf; fi'' returned a non-zero code: 2\r\nERROR: Build failed for molecule_local/fedora:26.\r\nCreating container fedora26 with base image fedora:26...\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/lib/python2.7/site-packages/molecule/cli.py\", line 41, in main\r\n    cli(obj={})\r\n  File \"/usr/lib/python2.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/usr/lib/python2.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/usr/lib/python2.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/usr/lib/python2.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/molecule/command/test.py\", line 96, in test\r\n    util.sysexit(t.execute()[0])\r\n  File \"/usr/lib/python2.7/site-packages/molecule/command/test.py\", line 44, in execute\r\n    status, output = c.execute(exit=False)\r\n  File \"/usr/lib/python2.7/site-packages/molecule/command/create.py\", line 42, in execute\r\n    self.molecule.driver.up(no_provision=True)\r\n  File \"/usr/lib/python2.7/site-packages/molecule/driver/dockerdriver.py\", line 172, in up\r\n    hostname=hostname)\r\n  File \"/usr/lib/python2.7/site-packages/docker/api/container.py\", line 447, in create_container\r\n    return self.create_container_from_config(config, name)\r\n  File \"/usr/lib/python2.7/site-packages/docker/api/container.py\", line 458, in create_container_from_config\r\n    return self._result(res, True)\r\n  File \"/usr/lib/python2.7/site-packages/docker/api/client.py\", line 226, in _result\r\n    self._raise_for_status(response)\r\n  File \"/usr/lib/python2.7/site-packages/docker/api/client.py\", line 222, in _raise_for_status\r\n    raise create_api_error_from_http_exception(e)\r\n  File \"/usr/lib/python2.7/site-packages/docker/errors.py\", line 31, in create_api_error_from_http_exception\r\n    raise cls(e, response=response, explanation=explanation)\r\ndocker.errors.ImageNotFound: 404 Client Error: Not Found (\"No such image: molecule_local/fedora:26\")\r\n```\r\n\r\nhttps://github.com/metacloud/molecule/blob/535db906520a9a526a46d2fef74f1bd458bbcabd/molecule/cookiecutter/scenario/driver/docker/%7B%7Bcookiecutter.molecule_directory%7D%7D/%7B%7Bcookiecutter.scenario_name%7D%7D/Dockerfile.j2#L8\r\n\r\nI'm not sure `dnf makecache fast` ever worked and was always equivalent to `dnf makecache`.  I couldn't find any reference to `fast` in the dnf codebase.  The `fast` subcommand works in yum with `yum makecache fast` on EL6 and EL7 and also didn't fail with dnf 1.1 in Fedora 25 when automatically converted to `dnf makecache fast` with `dnf2yum`, but now fails in Fedora 26 (dnf 2.5) as an invalid option.\r\n\r\nThanks,\r\nGiovanni\r\n\r\nI would suggest removing the `fast` subcommand when `dnf` is used.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/925/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/925/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/924", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/924/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/924/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/924/events", "html_url": "https://github.com/ansible-community/molecule/issues/924", "id": 250468509, "node_id": "MDU6SXNzdWUyNTA0Njg1MDk=", "number": 924, "title": "Docker repository molecule_local not found", "user": {"login": "Gusymochis", "id": 2019919, "node_id": "MDQ6VXNlcjIwMTk5MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2019919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gusymochis", "html_url": "https://github.com/Gusymochis", "followers_url": "https://api.github.com/users/Gusymochis/followers", "following_url": "https://api.github.com/users/Gusymochis/following{/other_user}", "gists_url": "https://api.github.com/users/Gusymochis/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gusymochis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gusymochis/subscriptions", "organizations_url": "https://api.github.com/users/Gusymochis/orgs", "repos_url": "https://api.github.com/users/Gusymochis/repos", "events_url": "https://api.github.com/users/Gusymochis/events{/privacy}", "received_events_url": "https://api.github.com/users/Gusymochis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-08-15T23:39:02Z", "updated_at": "2017-08-17T01:35:39Z", "closed_at": "2017-08-17T01:35:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.2.1.0\r\nmolecule --version\r\nmolecule, version 2.0.0.0rc14\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: One of source\r\n\r\n# Desired Behaviour\r\n\r\nMolecule test should provide the same output as the documentation when running the documented example.\r\n\r\n# Actual Behaviour\r\n\r\nwhen running the example from the documentation the following error occurs:\r\n$ molecule --debug test\r\n```\r\n...\r\n\r\nfailed: [localhost] (item={'image': u'centos:7', 'name': u'instance'}) => {\r\n        \"failed\": true,\r\n        \"invocation\": {\r\n            \"module_args\": {\r\n                \"api_version\": null,\r\n                \"blkio_weight\": null,\r\n                \"cacert_path\": null,\r\n                \"capabilities\": null,\r\n                \"cert_path\": null,\r\n                \"cleanup\": false,\r\n                \"command\": \"sleep infinity\",\r\n                \"cpu_period\": null,\r\n                \"cpu_quota\": null,\r\n                \"cpu_shares\": null,\r\n                \"cpuset_cpus\": null,\r\n                \"cpuset_mems\": null,\r\n                \"debug\": false,\r\n                \"detach\": true,\r\n                \"devices\": null,\r\n                \"dns_opts\": null,\r\n                \"dns_search_domains\": null,\r\n                \"dns_servers\": null,\r\n                \"docker_host\": null,\r\n                \"entrypoint\": null,\r\n                \"env\": null,\r\n                \"env_file\": null,\r\n                \"etc_hosts\": null,\r\n                \"exposed_ports\": null,\r\n                \"filter_logger\": false,\r\n                \"force_kill\": false,\r\n                \"groups\": null,\r\n                \"hostname\": \"instance\",\r\n                \"ignore_image\": false,\r\n                \"image\": \"molecule_local/centos:7\",\r\n                \"interactive\": false,\r\n                \"ipc_mode\": null,\r\n                \"keep_volumes\": true,\r\n                \"kernel_memory\": null,\r\n                \"key_path\": null,\r\n                \"kill_signal\": null,\r\n                \"labels\": null,\r\n                \"links\": null,\r\n                \"log_driver\": \"syslog\",\r\n                \"log_options\": null,\r\n                \"mac_address\": null,\r\n                \"memory\": \"0\",\r\n                \"memory_reservation\": null,\r\n                \"memory_swap\": null,\r\n                \"memory_swappiness\": null,\r\n                \"name\": \"instance\",\r\n                \"network_mode\": null,\r\n                \"networks\": null,\r\n                \"oom_killer\": null,\r\n                \"oom_score_adj\": null,\r\n                \"paused\": false,\r\n                \"pid_mode\": null,\r\n                \"privileged\": false,\r\n                \"published_ports\": null,\r\n                \"pull\": false,\r\n                \"purge_networks\": false,\r\n                \"read_only\": false,\r\n                \"recreate\": false,\r\n                \"restart\": false,\r\n                \"restart_policy\": null,\r\n                \"restart_retries\": null,\r\n                \"security_opts\": null,\r\n                \"shm_size\": null,\r\n                \"ssl_version\": null,\r\n                \"state\": \"started\",\r\n                \"stop_signal\": null,\r\n                \"stop_timeout\": null,\r\n                \"timeout\": null,\r\n                \"tls\": null,\r\n                \"tls_hostname\": null,\r\n                \"tls_verify\": null,\r\n                \"trust_image_content\": false,\r\n                \"tty\": false,\r\n                \"ulimits\": null,\r\n                \"user\": null,\r\n                \"uts\": null,\r\n                \"volume_driver\": null,\r\n                \"volumes\": null,\r\n                \"volumes_from\": null\r\n            },\r\n            \"module_name\": \"docker_container\"\r\n        },\r\n        \"item\": {\r\n            \"image\": \"centos:7\",\r\n            \"name\": \"instance\"\r\n        },\r\n        \"msg\": \"Error pulling image molecule_local/centos:7 - 404 Client Error: Not Found (\\\"{\\\"message\\\":\\\"repository molecule_local/centos not found: does not exist or no pull access\\\"}\\\")\"\r\n    }\r\n\r\n    PLAY RECAP *********************************************************************\r\n    localhost                  : ok=1    changed=0    unreachable=0    failed=1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/924/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/924/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/919", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/919/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/919/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/919/events", "html_url": "https://github.com/ansible-community/molecule/issues/919", "id": 249301034, "node_id": "MDU6SXNzdWUyNDkzMDEwMzQ=", "number": 919, "title": "Molecule login crash when tmux zoom.", "user": {"login": "bitozoid", "id": 1446552, "node_id": "MDQ6VXNlcjE0NDY1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1446552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bitozoid", "html_url": "https://github.com/bitozoid", "followers_url": "https://api.github.com/users/bitozoid/followers", "following_url": "https://api.github.com/users/bitozoid/following{/other_user}", "gists_url": "https://api.github.com/users/bitozoid/gists{/gist_id}", "starred_url": "https://api.github.com/users/bitozoid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bitozoid/subscriptions", "organizations_url": "https://api.github.com/users/bitozoid/orgs", "repos_url": "https://api.github.com/users/bitozoid/repos", "events_url": "https://api.github.com/users/bitozoid/events{/privacy}", "received_events_url": "https://api.github.com/users/bitozoid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-10T10:24:10Z", "updated_at": "2017-08-29T17:07:36Z", "closed_at": "2017-08-10T20:11:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report (same as #545 but for v2)\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.3.2.0\r\n  config file = /home/bitozoid/.ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Mar  6 2017, 16:32:24) [GCC 5.4.0]\r\n$ molecule --version\r\nmolecule, version 2.0.0.0rc14\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nTerminal not broken.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\nubuntu@instance:~$ Traceback (most recent call last):\r\n  File \"/home/bitozoid/.local/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/molecule/command/login.py\", line 151, in login\r\n    Login(scenario.config).execute()\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/molecule/command/login.py\", line 76, in execute\r\n    self._get_login(hostname)\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/molecule/command/login.py\", line 120, in _get_login\r\n    self._pt.interact()\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/pexpect/pty_spawn.py\", line 745, in interact\r\n    self.__interact_copy(escape_character, input_filter, output_filter)\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/pexpect/pty_spawn.py\", line 770, in __interact_copy\r\n    r, w, e = select_ignore_interrupts([self.child_fd, self.STDIN_FILENO], [], [])\r\n  File \"/home/bitozoid/.local/lib/python2.7/site-packages/pexpect/utils.py\", line 138, in select_ignore_interrupts\r\n    return select.select(iwtd, owtd, ewtd, timeout)\r\nTypeError: _sigwinch_passthrough() takes exactly 1 argument (3 given)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/919/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/918", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/918/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/918/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/918/events", "html_url": "https://github.com/ansible-community/molecule/issues/918", "id": 249299774, "node_id": "MDU6SXNzdWUyNDkyOTk3NzQ=", "number": 918, "title": "Missing `instance_raw_config_args` in template.", "user": {"login": "bitozoid", "id": 1446552, "node_id": "MDQ6VXNlcjE0NDY1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1446552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bitozoid", "html_url": "https://github.com/bitozoid", "followers_url": "https://api.github.com/users/bitozoid/followers", "following_url": "https://api.github.com/users/bitozoid/following{/other_user}", "gists_url": "https://api.github.com/users/bitozoid/gists{/gist_id}", "starred_url": "https://api.github.com/users/bitozoid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bitozoid/subscriptions", "organizations_url": "https://api.github.com/users/bitozoid/orgs", "repos_url": "https://api.github.com/users/bitozoid/repos", "events_url": "https://api.github.com/users/bitozoid/events{/privacy}", "received_events_url": "https://api.github.com/users/bitozoid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-10T10:19:14Z", "updated_at": "2017-08-29T17:07:49Z", "closed_at": "2017-08-10T20:03:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.3.2.0\r\n  config file = /home/bitozoid/.ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Mar  6 2017, 16:32:24) [GCC 5.4.0]\r\n$ molecule --version\r\nmolecule, version 2.0.0.0rc14\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired and Actual Behaviour\r\n\r\n```\r\nmolecule init role -r test --driver-name vagrant\r\ncd test\r\nsed -i -e '/box:/a\\    instance_raw_config_args:\\n      - \"vm.network ''forwarded_port'', guest: 5432, host: 5432\"' molecule/default/molecule.yml\r\nmolecule create\r\n```\r\nDesired: port forwarded\r\nActual: port not forwarded\r\n\r\nProposed solution:\r\n```\r\nsed -i -e '/instance_interfaces:/a\\        instance_raw_config_args: \"{{ item.instance_raw_config_args | default(omit) }}\"' molecule/default/create.yml\r\n```\r\nThat is, add it to cookiecutter template. Sorry not to PR.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/918/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/917", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/917/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/917/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/917/events", "html_url": "https://github.com/ansible-community/molecule/issues/917", "id": 249293425, "node_id": "MDU6SXNzdWUyNDkyOTM0MjU=", "number": 917, "title": "Dependency roles wiped", "user": {"login": "bitozoid", "id": 1446552, "node_id": "MDQ6VXNlcjE0NDY1NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1446552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bitozoid", "html_url": "https://github.com/bitozoid", "followers_url": "https://api.github.com/users/bitozoid/followers", "following_url": "https://api.github.com/users/bitozoid/following{/other_user}", "gists_url": "https://api.github.com/users/bitozoid/gists{/gist_id}", "starred_url": "https://api.github.com/users/bitozoid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bitozoid/subscriptions", "organizations_url": "https://api.github.com/users/bitozoid/orgs", "repos_url": "https://api.github.com/users/bitozoid/repos", "events_url": "https://api.github.com/users/bitozoid/events{/privacy}", "received_events_url": "https://api.github.com/users/bitozoid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-08-10T09:55:33Z", "updated_at": "2017-08-29T17:07:06Z", "closed_at": "2017-08-11T04:33:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.3.2.0\r\n  config file = /home/bitozoid/.ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Mar  6 2017, 16:32:24) [GCC 5.4.0]\r\n$ molecule --version\r\nmolecule, version 2.0.0.0rc14\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired and Actual Behaviour\r\n\r\nRun this:\r\n```\r\nmolecule init role -r test --driver-name vagrant\r\ncd test\r\ncat > molecule/default/requirements.yml << EOF\r\n---\r\n\r\n- src: geerlingguy.repo-epel\r\nEOF\r\nmolecule dependency\r\nmolecule converge\r\nfind molecule/default/.molecule/roles -type d | wc -l # returns 6\r\nfind molecule/default/.molecule/roles -type f | wc -l # returns 7\r\nmolecule destroy\r\nfind molecule/default/.molecule/roles -type d | wc -l # returns 6\r\nfind molecule/default/.molecule/roles -type f | wc -l # returns 0\r\n```\r\n\r\nI'd expect the downloaded role not to be removed.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/917/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/907", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/907/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/907/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/907/events", "html_url": "https://github.com/ansible-community/molecule/issues/907", "id": 243656147, "node_id": "MDU6SXNzdWUyNDM2NTYxNDc=", "number": 907, "title": "Ansible complain when using vagrant driver (\" unknown key %C \")", "user": {"login": "pythondz", "id": 13331265, "node_id": "MDQ6VXNlcjEzMzMxMjY1", "avatar_url": "https://avatars.githubusercontent.com/u/13331265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pythondz", "html_url": "https://github.com/pythondz", "followers_url": "https://api.github.com/users/pythondz/followers", "following_url": "https://api.github.com/users/pythondz/following{/other_user}", "gists_url": "https://api.github.com/users/pythondz/gists{/gist_id}", "starred_url": "https://api.github.com/users/pythondz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pythondz/subscriptions", "organizations_url": "https://api.github.com/users/pythondz/orgs", "repos_url": "https://api.github.com/users/pythondz/repos", "events_url": "https://api.github.com/users/pythondz/events{/privacy}", "received_events_url": "https://api.github.com/users/pythondz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-18T09:35:26Z", "updated_at": "2017-07-27T05:19:00Z", "closed_at": "2017-07-27T01:06:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey guyz\r\n\r\n# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version :\r\n  ansible 2.3.1.0\r\n  config file = \r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.6 (default, Oct 26 2016, 20:30:19) [GCC 4.8.4]\r\nmolecule --version :\r\nmolecule, version 2.0.0.0rc10\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nAfter a fresh install on Ubuntu (4.4.0-31-generic #50~14.04.1-Ubuntu), init a new role using vagrant driver and start command molecule test.\r\n\r\nThe VM is created correctly but Ansible complain when trying to run the playbook :\r\n\r\n```\r\nfatal: [instance-1-default]: UNREACHABLE! => {\r\n        \"changed\": false, \r\n        \"msg\": \"Failed to connect to the host via ssh: percent_expand: unknown key %C\\r\\n\", \r\n        \"unreachable\": true\r\n    }\r\n```\r\n\r\nRunning with the debug flag give a hint : \r\n\r\n```\r\n<127.0.0.1> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/tmp/role-midpoint/molecule/default/.molecule/.vagrant/machines/instance-1-default/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=ubuntu -o ConnectTimeout=10 -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s -o IdentitiesOnly=yes -o StrictHostKeyChecking=no -o **'ControlPath=~/.ansible/cp/%C'** -tt 127.0.0.1 'test -e /usr/bin/python || (apt -y update && apt install -y python-minimal)'\r\n    <127.0.0.1> (255, '', 'percent_expand: unknown key %C\\r\\n')\r\n\r\n```\r\n\r\n# Actual Behaviour\r\n\r\nMolecule should be able to connect to the newly created and running VM.\r\n\r\n# Workaround\r\n\r\nBy removing this line https://github.com/metacloud/molecule/blob/1a10656d996beebf356cc070f50e6a6730e8b162/molecule/driver/base.py#L190.\r\n\r\nI'm now able to run molecule test without any trouble.\r\n\r\nWhy is this argument necessary ? Am I missing something ?\r\n\r\nThanks.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/907/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/886", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/886/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/886/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/886/events", "html_url": "https://github.com/ansible-community/molecule/issues/886", "id": 240514034, "node_id": "MDU6SXNzdWUyNDA1MTQwMzQ=", "number": 886, "title": "Destroy.yml missing after migrating to v2 with convert.py", "user": {"login": "butla", "id": 1710591, "node_id": "MDQ6VXNlcjE3MTA1OTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1710591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/butla", "html_url": "https://github.com/butla", "followers_url": "https://api.github.com/users/butla/followers", "following_url": "https://api.github.com/users/butla/following{/other_user}", "gists_url": "https://api.github.com/users/butla/gists{/gist_id}", "starred_url": "https://api.github.com/users/butla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/butla/subscriptions", "organizations_url": "https://api.github.com/users/butla/orgs", "repos_url": "https://api.github.com/users/butla/repos", "events_url": "https://api.github.com/users/butla/events{/privacy}", "received_events_url": "https://api.github.com/users/butla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-05T00:41:44Z", "updated_at": "2017-08-03T17:21:54Z", "closed_at": "2017-08-03T17:21:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.3.1.0\r\n  config file = /home/butla/.ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609]\r\n\r\nmolecule, version 2.0.0.0rc11\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nAfter converting a role that was being tested with a Vagrant driver with convert.py I go to role's directory, run `molecule test` and see the tests run.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\n# Changed the name of the project to \"bla\"\r\n\r\n$ python convert.py roles/bla_node/molecule.yml\r\n--> Creating roles/bla_node/molecule\r\n--> Creating roles/bla_node/molecule/default\r\n--> Creating roles/bla_node/molecule/default/tests\r\n--> Writing molecule.yml to roles/bla_node/molecule/default/molecule.yml\r\n--> Vagrant syle v1 config found\r\n--> Copying roles/bla_node/playbook.yml to roles/bla_node/molecule/default\r\nDeleting roles/bla_node/.molecule\r\nDeleting roles/bla_node/molecule.yml\r\nDeleting roles/bla_node/playbook.yml\r\n$ cd roles/bla_node\r\n$ molecule test\r\n--> Scenario: [default]\r\n--> Provisioner: [ansible]\r\n--> Playbook: [destroy.yml]\r\nERROR! the playbook: /home/butla/development/bla-ansible-playbooks/roles/bla_node/molecule/default/destroy.yml could not be found\r\nERROR:\r\n```\r\n\r\nHere's how the molecule.yml looks before change:\r\n```\r\n---\r\ndependency:\r\n  name: galaxy\r\ndriver:\r\n  name: vagrant\r\n\r\nvagrant:\r\n  platforms:\r\n  - name: centos7\r\n    box: centos/7\r\n  providers:\r\n  - name: virtualbox\r\n    type: virtualbox\r\n    options:\r\n      memory: 512\r\n      cpus: 2\r\n  instances:\r\n  - name: bla-node\r\n    ansible_groups:\r\n    - blas\r\n\r\nansible:\r\n  become: false\r\n\r\nmolecule:\r\n  test:\r\n    sequence:\r\n    - destroy\r\n    - dependency\r\n    - syntax\r\n    - create\r\n    - converge\r\n\r\n# I normally don't have that because the role isn't even idempotent yet,\r\n# but I had to add it because convert.py was crashing\r\nverifier:\r\n  name: testinfra\r\n```\r\n\r\nplaybook.yml:\r\n```\r\n---\r\n- hosts: all\r\n  gather_facts: false\r\n\r\n  pre_tasks:\r\n  # Ubuntu 16.04 doesn't have python2 by default\r\n  - name: install python2 for Ansible\r\n    raw: test -e /usr/bin/python || (sudo apt -qqy update && sudo apt install -qqy python-minimal)\r\n    register: output\r\n    changed_when: output.stdout != \"\"\r\n  - name: gather facts\r\n    setup:\r\n\r\n  roles:\r\n  - { role: bla_node, become: true }\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/886/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/873", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/873/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/873/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/873/events", "html_url": "https://github.com/ansible-community/molecule/issues/873", "id": 237728011, "node_id": "MDU6SXNzdWUyMzc3MjgwMTE=", "number": 873, "title": "Travis CI: E: Package 'docker-engine' has no installation candidate", "user": {"login": "popstas", "id": 3027126, "node_id": "MDQ6VXNlcjMwMjcxMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/3027126?v=4", "gravatar_id": "", "url": "https://api.github.com/users/popstas", "html_url": "https://github.com/popstas", "followers_url": "https://api.github.com/users/popstas/followers", "following_url": "https://api.github.com/users/popstas/following{/other_user}", "gists_url": "https://api.github.com/users/popstas/gists{/gist_id}", "starred_url": "https://api.github.com/users/popstas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/popstas/subscriptions", "organizations_url": "https://api.github.com/users/popstas/orgs", "repos_url": "https://api.github.com/users/popstas/repos", "events_url": "https://api.github.com/users/popstas/events{/privacy}", "received_events_url": "https://api.github.com/users/popstas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-06-22T04:18:05Z", "updated_at": "2017-11-13T17:55:38Z", "closed_at": "2017-06-22T19:48:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Actual Behaviour\r\n\r\nDue [Travis CI images update](https://blog.travis-ci.com/2017-06-21-trusty-updates-2017-Q2-launch) builds now fails with error:\r\n\r\nDocumentation still not updated: https://molecule.readthedocs.io/en/master/testing.html#travis-ci\r\n```\r\nE: Package 'docker-engine' has no installation candidate\r\n\r\nThe command \"sudo apt-get install -o Dpkg::Options::=\"--force-confold\" --force-yes -y docker-engine\" failed and exited with 100 during .\r\n```\r\n\r\nBuild fails on command:\r\n```\r\nsudo apt-get install -o Dpkg::Options::=\"--force-confold\" --force-yes -y docker-engine\r\n```\r\n\r\nAt this time travis images have not package `docker-engine`.\r\n\r\n# Possible solutions:\r\n- Remove docker-engine install command from `.travis-ci.yml (image have bundled Docker version 17.03.1-ce, build c6d412e)\r\n- Change to install docker-ce from docker repository: https://docs.travis-ci.com/user/docker/#Installing-a-newer-Docker-version\r\n```\r\nbefore_install:\r\n  - curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\r\n  - sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\r\n  - sudo apt-get update\r\n  - sudo apt-get -y install docker-ce\r\n```\r\n- Use old images, add to `.travis.yml`:\r\n```\r\ngroup: deprecated-2017Q2\r\n```\r\n\r\nDocumentation of using docker in travis now outdated:\r\n\r\n- https://molecule.readthedocs.io/en/master/testing.html#travis-ci\r\n- https://docs.travis-ci.com/user/docker/#Installing-a-newer-Docker-version", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/873/reactions", "total_count": 3, "+1": 1, "-1": 0, "laugh": 0, "hooray": 2, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/873/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/867", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/867/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/867/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/867/events", "html_url": "https://github.com/ansible-community/molecule/issues/867", "id": 235745354, "node_id": "MDU6SXNzdWUyMzU3NDUzNTQ=", "number": 867, "title": "Typo in molecule/molecule/command/dependency.py (defalt)", "user": {"login": "alainchiasson", "id": 1068561, "node_id": "MDQ6VXNlcjEwNjg1NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/1068561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alainchiasson", "html_url": "https://github.com/alainchiasson", "followers_url": "https://api.github.com/users/alainchiasson/followers", "following_url": "https://api.github.com/users/alainchiasson/following{/other_user}", "gists_url": "https://api.github.com/users/alainchiasson/gists{/gist_id}", "starred_url": "https://api.github.com/users/alainchiasson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alainchiasson/subscriptions", "organizations_url": "https://api.github.com/users/alainchiasson/orgs", "repos_url": "https://api.github.com/users/alainchiasson/repos", "events_url": "https://api.github.com/users/alainchiasson/events{/privacy}", "received_events_url": "https://api.github.com/users/alainchiasson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-06-14T02:31:00Z", "updated_at": "2017-06-14T17:26:53Z", "closed_at": "2017-06-14T17:26:39Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\n\r\n#ansible 2.3.1.0\r\n#  config file =\r\n#  configured module search path = Default w/o overrides\r\n#  python version = 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\r\n\r\nmolecule --version\r\n\r\n# molecule, version 2.0.0.0rc7\r\n\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: One of source, pip, OS package\r\n\r\n# Desired Behaviour\r\n\r\nrun\r\n\r\n```\r\nmolecule dependecy \r\n```\r\n\r\nand dependencies ( from the requirements.yml file in molecule/default)  would be pulled from galaxie\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nmolecule dependency fails with : \r\n\r\n# ERROR: Scenario 'defalt' not found.  Exiting.\r\n\r\nthere is a typo at https://github.com/metacloud/molecule/blob/26706768e01dd8e4e98a65fbbfcb16416b8b0634/molecule/command/dependency.py#L61\r\n\r\n```\r\n@click.command()\r\n58\t@click.pass_context\r\n59\t@click.option(\r\n60\t    '--scenario-name',\r\n61\t    default='defalt',\r\n62\t    help='Name of the scenario to target. (default)')\r\n```\r\nIt should be default.\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/867/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/852", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/852/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/852/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/852/events", "html_url": "https://github.com/ansible-community/molecule/issues/852", "id": 233928505, "node_id": "MDU6SXNzdWUyMzM5Mjg1MDU=", "number": 852, "title": "Logging behavior is different between Python 2 and Python 3", "user": {"login": "thomasjpfan", "id": 5402633, "node_id": "MDQ6VXNlcjU0MDI2MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/5402633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasjpfan", "html_url": "https://github.com/thomasjpfan", "followers_url": "https://api.github.com/users/thomasjpfan/followers", "following_url": "https://api.github.com/users/thomasjpfan/following{/other_user}", "gists_url": "https://api.github.com/users/thomasjpfan/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasjpfan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasjpfan/subscriptions", "organizations_url": "https://api.github.com/users/thomasjpfan/orgs", "repos_url": "https://api.github.com/users/thomasjpfan/repos", "events_url": "https://api.github.com/users/thomasjpfan/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasjpfan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-06T15:20:17Z", "updated_at": "2017-06-09T23:03:53Z", "closed_at": "2017-06-09T23:03:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version \r\n2.3.1.0\r\nmolecule --version\r\n2.0.0.0rc6\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nWhen running any molecule command in Python 3, an exception is raised, usually a TypeError:\r\n```\r\n    msg = msg % self.args\r\nTypeError: not all arguments converted during string formatting\r\n```\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nFor example, when `execute` is ran from https://github.com/metacloud/molecule/blob/v2/molecule/provisioner/ansible_playbook.py#L75, with the baked `_out` being a `CustomLogger.out` function the behavior is different between Python 2 and 3. Specifically, `CustomLogger.out` is handled with `construct_streamreader_callback` in https://github.com/amoffat/sh/blob/master/sh.py#L1560, where the local variable `num_args`=3 in Python 3 and `num_args`=2 in Python 2. An inconsistent `num_args` executes a different branch in https://github.com/amoffat/sh/blob/master/sh.py#L1608, which will raise the `TypeError` exception in Python 3. \r\n\r\n`get_num_args ` is implemented in https://github.com/amoffat/sh/blob/master/sh.py#L117. The behavior of `get_num_args` differs between Python 2 and Python 3, because of the changes in the `inspect` module. \r\n\r\nIn Python 2, `get_num_args` calls `inspect.getargspec(fn).args`:\r\n```python\r\n>>> from molecule.logger import get_logger\r\n>>> LOG = get_logger(\"test\")\r\n>>> argspec = inspect.getargspec(LOG.out)\r\n>>> argspec\r\nArgSpec(args=['self', 'msg'], varargs='args', keywords='kwargs', defaults=None)\r\n>>> len(argspec.args)\r\n2\r\n```\r\nThis makes `get_num_args` return 2 in Python 2.\r\n\r\nIn Python 3, `get_num_args` calls `inspect.signature(fn).parameters`:\r\n```python\r\n>>> from molecule.logger import get_logger\r\n>>> LOG = get_logger(\"test\")\r\n>>> log_signature = inspect.signature(LOG.out)\r\n<Signature (msg, *args, **kwargs)>\r\n>>> log_params = log_signature.parameters\r\n>>> log_params\r\nmappingproxy({'args': <Parameter \"*args\">,\r\n              'kwargs': <Parameter \"**kwargs\">,\r\n              'msg': <Parameter \"msg\">})\r\n>>> len(log_params)\r\n3\r\n```\r\nThis makes `get_num_args` return 3 in Python 3.\r\n\r\nFor the `construct_streamreader_callback` to function properly, the desired behavior is to have `get_num_args` return 2. I submitted a pull request in `sh` to address this issue, https://github.com/amoffat/sh/pull/388.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/852/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/845", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/845/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/845/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/845/events", "html_url": "https://github.com/ansible-community/molecule/issues/845", "id": 232920356, "node_id": "MDU6SXNzdWUyMzI5MjAzNTY=", "number": 845, "title": "if ANSIBLE_FILTER_PLUGINS set, provisioner create.yml can't find molecule_instance_with_scenario_name", "user": {"login": "ingvagabund", "id": 8055242, "node_id": "MDQ6VXNlcjgwNTUyNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/8055242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ingvagabund", "html_url": "https://github.com/ingvagabund", "followers_url": "https://api.github.com/users/ingvagabund/followers", "following_url": "https://api.github.com/users/ingvagabund/following{/other_user}", "gists_url": "https://api.github.com/users/ingvagabund/gists{/gist_id}", "starred_url": "https://api.github.com/users/ingvagabund/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ingvagabund/subscriptions", "organizations_url": "https://api.github.com/users/ingvagabund/orgs", "repos_url": "https://api.github.com/users/ingvagabund/repos", "events_url": "https://api.github.com/users/ingvagabund/events{/privacy}", "received_events_url": "https://api.github.com/users/ingvagabund/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-06-01T15:34:03Z", "updated_at": "2017-06-12T19:57:47Z", "closed_at": "2017-06-12T01:15:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.2.3.0\r\n$ molecule --version\r\nmolecule, version 2.0.0.0rc6\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: OS package\r\n\r\n# Desired Behaviour\r\n\r\nIf `ANSIBLE_FILTER_PLUGINS` is set in molecule.yml file (`provisioner.env`), molecule provisioning is still working and docker container are destroyed/created.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nIf `ANSIBLE_FILTER_PLUGINS` is set in molecule.yml file (`provisioner.env`), molecule provisioning of docker container fails with:\r\n```\r\ntemplate error while templating string: no filter named 'molecule_instance_with_scenario_name'. String: {{ item.name | molecule_instance_with_scenario_name(molecule_yml.scenario.name) }}\r\n```\r\n\r\n# Reproducer\r\n\r\nTake one of the examples in `https://github.com/metacloud/molecule/tree/v2/test/scenarios/driver/docker` directory and set the env. E.g.:\r\n```yaml\r\n...\r\nprovisioner:\r\n  name: ansible\r\n  env:\r\n    ANSIBLE_FILTER_PLUGINS: ../../../../filter_plugins\r\n...\r\n```\r\n\r\nWhen the `ansible-playbook` command for provisioning is created [1], all available env variables inside the provisioner are handed as well. So even if the generated `ansible.cfg` file is correct and `ANSIBLE_FILTER_PLUGINS` is set to `/usr/lib/python2.7/site-packages/molecule/provisioner/../../molecule/provisioner/ansible/plugins/filters:$ANSIBLE_FILTER_PLUGINS`, the command is run as:\r\n\r\n```sh\r\nANSIBLE_FILTER_PLUGINS=../../../../filter_plugins /usr/bin/ansible-playbook ...\r\n```\r\n\r\nGiven the `ANSIBLE_FILTER_PLUGINS` has higher precedence than the same env set in the `ansible.cfg` file, the `molecule/provisioner/ansible/plugins/filters` is always skipped.\r\n\r\nI would suggest to check if the env variable is set inside `molecule.yml` file and if so, just filter it out from the constructed command.\r\n\r\n[1] https://github.com/metacloud/molecule/blob/v2/molecule/provisioner/ansible_playbook.py#L71", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/845/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/800", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/800/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/800/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/800/events", "html_url": "https://github.com/ansible-community/molecule/issues/800", "id": 219627078, "node_id": "MDU6SXNzdWUyMTk2MjcwNzg=", "number": 800, "title": "Idempotence check throws exception when a non-idempotent task is found and user does not set ANSIBLE_NOCOWS=1", "user": {"login": "ehashman", "id": 4706131, "node_id": "MDQ6VXNlcjQ3MDYxMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/4706131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehashman", "html_url": "https://github.com/ehashman", "followers_url": "https://api.github.com/users/ehashman/followers", "following_url": "https://api.github.com/users/ehashman/following{/other_user}", "gists_url": "https://api.github.com/users/ehashman/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehashman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehashman/subscriptions", "organizations_url": "https://api.github.com/users/ehashman/orgs", "repos_url": "https://api.github.com/users/ehashman/repos", "events_url": "https://api.github.com/users/ehashman/events{/privacy}", "received_events_url": "https://api.github.com/users/ehashman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-05T15:39:17Z", "updated_at": "2017-04-14T17:59:49Z", "closed_at": "2017-04-14T17:59:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\nansible 2.2.2.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = ['/usr/share/ansible']\r\n\r\n$ molecule --version\r\nmolecule, version 1.23.0\r\n```\r\n\r\n- Molecule installation method: pip (in virtualenv)\r\n- Ansible installation method: pip (in virtualenv)\r\n\r\n# Desired Behaviour\r\n\r\nWhen I run an idempotence check that fails, I expect it to print an error listing the tasks that failed at idempotence.\r\n\r\n# Actual Behaviour\r\n\r\nI get a stacktrace indicating a regex match failed.\r\n\r\n<details>\r\n<h2>Stacktrace:</h2>\r\n<pre>\r\nERROR: Idempotence test failed because of the following tasks:\r\nTraceback (most recent call last):\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/bin/molecule\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/local/lib/python2.7/site-packages/molecule/cli.py\", line 41, in main\r\n    cli(obj={})\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/local/lib/python2.7/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/local/lib/python2.7/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/local/lib/python2.7/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/local/lib/python2.7/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/local/lib/python2.7/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/local/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/local/lib/python2.7/site-packages/molecule/command/idempotence.py\", line 120, in idempotence\r\n    util.sysexit(i.execute()[0])\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/local/lib/python2.7/site-packages/molecule/command/idempotence.py\", line 59, in execute\r\n    util.print_error('\\n'.join(self._non_idempotent_tasks(output)))\r\n  File \"/home/elana/src/rms-di-infrastructure/ansible/.ansible-venv/local/lib/python2.7/site-packages/molecule/command/idempotence.py\", line 104, in _non_idempotent_tasks\r\n    task_name = re.search(r'\\[(.*)\\]', task_line).groups()[0]\r\nAttributeError: 'NoneType' object has no attribute 'groups'\r\n</pre>\r\n</details>\r\n\r\n# Suggested solution\r\n\r\nEnsure that the environment variable (or general configuration) `ANSIBLE_NOCOWS=1` is set for all molecule runs.\r\n\r\n# More details\r\n\r\nThe issue clearly affects the [_non_idempotent_tasks](https://github.com/metacloud/molecule/blob/e668f46ccc4cf0843bf4e8e5126244f46dd257f3/molecule/command/idempotence.py#L85) method in `molecule/command/idempotence.py`.\r\n\r\nHere is a relevant snippet of what's bound to `output_lines` when we don't set `ANSIBLE_NOCOWS`:\r\n\r\n```\r\n< TASK [role : Some task name] >\r\n---------------------------------------------------\r\n\\   ^__^\r\n\\  (oo)\\_______\r\n(__)\\       )\\/\\\r\n||----w |\r\n||     ||\r\nchanged: [hostname]\r\n```\r\n\r\nHere is what `output_lines` looks like when we do set it:\r\n\r\n```\r\nTASK [role : Some task name] ******************************\r\nchanged: [hostname]\r\n```\r\n\r\nThe issue stems from the following code: https://github.com/metacloud/molecule/blob/e668f46ccc4cf0843bf4e8e5126244f46dd257f3/molecule/command/idempotence.py#L96-L105\r\n\r\nSince the cowsay version line with the taskname does not start with TASK and does not conform to the expected regexes in lines 103/104, the code blows up with a stacktrace when the regex match fails.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/800/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/800/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/749", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/749/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/749/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/749/events", "html_url": "https://github.com/ansible-community/molecule/issues/749", "id": 208765647, "node_id": "MDU6SXNzdWUyMDg3NjU2NDc=", "number": 749, "title": "`molecule login` - Too many authentication failures error", "user": {"login": "gtirloni", "id": 5902830, "node_id": "MDQ6VXNlcjU5MDI4MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/5902830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtirloni", "html_url": "https://github.com/gtirloni", "followers_url": "https://api.github.com/users/gtirloni/followers", "following_url": "https://api.github.com/users/gtirloni/following{/other_user}", "gists_url": "https://api.github.com/users/gtirloni/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtirloni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtirloni/subscriptions", "organizations_url": "https://api.github.com/users/gtirloni/orgs", "repos_url": "https://api.github.com/users/gtirloni/repos", "events_url": "https://api.github.com/users/gtirloni/events{/privacy}", "received_events_url": "https://api.github.com/users/gtirloni/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-02-20T01:44:30Z", "updated_at": "2017-02-21T19:53:49Z", "closed_at": "2017-02-21T19:53:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.2.1.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n\r\nmolecule, version 1.20.0\r\n\r\nvagrant version 1.9.1\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: OS package\r\n\r\n# Actual Behaviour\r\n\r\nBy default, SSH will try to offer all keys found under ~/.ssh. If it reaches the limit of authentication failures (default=6), the connection will be closed. This is a problem for people with many SSH keys. To work around this issue and only use the specified IdentifyFile (-i), the option IdentitiesOnly should be specified.\r\n\r\n```\r\n     IdentitiesOnly\r\n             Specifies that ssh(1) should only use the authentication identity and certificate files\r\n             explicitly configured in the ssh_config files or passed on the ssh(1) command-line, even if\r\n             ssh-agent(1) or a PKCS11Provider offers more identities.  The argument to this keyword must be\r\n             yes or no (the default).  This option is intended for situations where ssh-agent offers many\r\n             different identities.\r\n```\r\n\r\nIt seems Molecule retrieves the SSH client configuration from Vagrant (`vagrant ssh-config`) but fails to activate this option. This causes the issue to happen with molecule but it cannot be reproduced using Vagrant directly (with molecule's vagrantfile).\r\n\r\nThis is the error from molecule:\r\n```\r\n$ molecule login\r\nWarning: Permanently added '[127.0.0.1]:2222' (ECDSA) to the list of known hosts.\r\nReceived disconnect from 127.0.0.1 port 2222:2: Too many authentication failures for vagrant\r\nAuthentication failed.\r\n\r\n$ cp .molecule/vagrantfile Vagrantfile\r\n$ vagrant ssh\r\nLast login: Mon Feb 20 01:25:07 2017 from 10.0.2.2\r\n[vagrant@rolename ~]$ \r\n```\r\n\r\nI was tempted to edit [driver/vagrantdriver#L190](https://github.com/metacloud/molecule/blob/master/molecule/driver/vagrantdriver.py#L190) and add \"-o IdentitiesOnly=yes\" there but I'm not sure if that's appropriate (it works though).\r\n\r\nI understand I can add this option to .molecule/config but I stil think it's a bug that molecule and Vagrant differ when using the vagrant driver.\r\n\r\n# Additional Information\r\n\r\n```\r\n$ vagrant ssh-config\r\nHost rolename\r\n  HostName 127.0.0.1\r\n  User vagrant\r\n  Port 2222\r\n  UserKnownHostsFile /dev/null\r\n  StrictHostKeyChecking no\r\n  PasswordAuthentication no\r\n  IdentityFile /path/to/rolename/.vagrant/machines/rolename/virtualbox/private_key\r\n  IdentitiesOnly yes\r\n  LogLevel FATAL\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/749/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/744", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/744/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/744/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/744/events", "html_url": "https://github.com/ansible-community/molecule/issues/744", "id": 206891118, "node_id": "MDU6SXNzdWUyMDY4OTExMTg=", "number": 744, "title": "testinfra tests discovered twice in molecule 1.20", "user": {"login": "mrtyler", "id": 1369918, "node_id": "MDQ6VXNlcjEzNjk5MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1369918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrtyler", "html_url": "https://github.com/mrtyler", "followers_url": "https://api.github.com/users/mrtyler/followers", "following_url": "https://api.github.com/users/mrtyler/following{/other_user}", "gists_url": "https://api.github.com/users/mrtyler/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrtyler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrtyler/subscriptions", "organizations_url": "https://api.github.com/users/mrtyler/orgs", "repos_url": "https://api.github.com/users/mrtyler/repos", "events_url": "https://api.github.com/users/mrtyler/events{/privacy}", "received_events_url": "https://api.github.com/users/mrtyler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-10T19:54:03Z", "updated_at": "2017-02-21T20:55:59Z", "closed_at": "2017-02-21T20:37:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\nBug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nmansible 2.2.1.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n\r\nmolecule --version\r\nmolecule, version 1.20.0\r\n```\r\n\r\n- Molecule installation method: pip (in virtualenv)\r\n- Ansible installation method: pip (in virtualenv)\r\n\r\n# Desired Behaviour\r\n\r\nFollowing the Quick Start guide (http://molecule.readthedocs.io/en/latest/#quick-start), I expect the single test case provided by `molecule init` to be discovered and executed once.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nThe test is discovered and run twice. (Full gist including setup: https://gist.github.com/mrtyler/5cc9f5260f5585b64dd59cb04991d051)\r\n\r\n```\r\n(venv-double-jeopardy) $ molecule --debug test\r\n[...]\r\n--> Executing testinfra tests found in tests/...\r\nDEBUG: COMMAND\r\n/Users/tyler/rtf/roles/venv-double-jeopardy/bin/testinfra tests/test_default.py  --debug --connection=docker\r\nwriting pytestdebug information to /Users/tyler/rtf/roles/double-jeopardy/pytestdebug.log\r\n============================= test session starts ==============================\r\nplatform darwin -- Python 2.7.13, pytest-3.0.6, py-1.4.32, pluggy-0.4.0 -- /Users/tyler/rtf/roles/venv-double-jeopardy/bin/python\r\nusing: pytest-3.0.6 pylib-1.4.32\r\nsetuptools registered plugins:\r\n  testinfra-1.4.5 at /Users/tyler/rtf/roles/venv-double-jeopardy/lib/python2.7/site-packages/testinfra/plugin.py\r\nrootdir: /Users/tyler/rtf/roles/double-jeopardy, inifile:\r\nplugins: testinfra-1.4.5\r\ncollected 2 itemss\r\n\r\ntests/test_default.py ..\r\n\r\n============================ pytest-warning summary ============================\r\nWP1 None Module already imported so can not be re-written: testinfra\r\n================= 2 passed, 1 pytest-warnings in 1.49 seconds ==================\r\nwrote pytestdebug information to /Users/tyler/rtf/roles/double-jeopardy/pytestdebug.log\r\n--> Destroying instances...\r\nStopping container double-jeopardy...\r\nRemoved container double-jeopardy.\r\n\r\n(venv-double-jeopardy) $ cat >> tests/test_default.py\r\n\r\n\r\ndef test_double_jeopardy():\r\n    assert False\r\n\r\n(venv-double-jeopardy) $ molecule --debug test\r\n[...]\r\n--> Executing testinfra tests found in tests/...\r\nDEBUG: COMMAND\r\n/Users/tyler/rtf/roles/venv-double-jeopardy/bin/testinfra tests/test_default.py  --debug --connection=docker\r\nwriting pytestdebug information to /Users/tyler/rtf/roles/double-jeopardy/pytestdebug.log\r\n============================= test session starts ==============================\r\nplatform darwin -- Python 2.7.13, pytest-3.0.6, py-1.4.32, pluggy-0.4.0 -- /Users/tyler/rtf/roles/venv-double-jeopardy/bin/python\r\nusing: pytest-3.0.6 pylib-1.4.32\r\nsetuptools registered plugins:\r\n  testinfra-1.4.5 at /Users/tyler/rtf/roles/venv-double-jeopardy/lib/python2.7/site-packages/testinfra/plugin.py\r\nrootdir: /Users/tyler/rtf/roles/double-jeopardy, inifile:\r\nplugins: testinfra-1.4.5\r\ncollected 4 itemss\r\n\r\ntests/test_default.py ..FF\r\n\r\n=================================== FAILURES ===================================\r\n_____________________________ test_double_jeopardy _____________________________\r\n\r\n    def test_double_jeopardy():\r\n>       assert False\r\nE       assert False\r\n\r\ntests/test_default.py:16: AssertionError\r\n_____________________________ test_double_jeopardy _____________________________\r\n\r\n    def test_double_jeopardy():\r\n>       assert False\r\nE       assert False\r\n\r\ntests/test_default.py:16: AssertionError\r\n============================ pytest-warning summary ============================\r\nWP1 None Module already imported so can not be re-written: testinfra\r\n============ 2 failed, 2 passed, 1 pytest-warnings in 1.54 seconds =============\r\nwrote pytestdebug information to /Users/tyler/rtf/roles/double-jeopardy/pytestdebug.log\r\nERROR:\r\n\r\n  RAN: '/Users/tyler/rtf/roles/venv-double-jeopardy/bin/testinfra tests/test_default.py  --debug --connection=docker'\r\n\r\n  STDOUT:\r\n\r\n\r\n  STDERR:\r\n\r\n(venv-double-jeopardy) $ /Users/tyler/rtf/roles/venv-double-jeopardy/bin/testinfra tests/test_default.py  --debug --connection=docker\r\nwriting pytestdebug information to /Users/tyler/rtf/roles/double-jeopardy/pytestdebug.log\r\n============================================================================== test session starts ===============================================================================\r\nplatform darwin -- Python 2.7.13, pytest-3.0.6, py-1.4.32, pluggy-0.4.0 -- /Users/tyler/rtf/roles/venv-double-jeopardy/bin/python\r\nusing: pytest-3.0.6 pylib-1.4.32\r\nsetuptools registered plugins:\r\n  testinfra-1.4.5 at /Users/tyler/rtf/roles/venv-double-jeopardy/lib/python2.7/site-packages/testinfra/plugin.py\r\nrootdir: /Users/tyler/rtf/roles/double-jeopardy, inifile:\r\nplugins: testinfra-1.4.5\r\ncollected 2 items\r\n\r\ntests/test_default.py .F\r\n\r\n==================================================================================== FAILURES ====================================================================================\r\n______________________________________________________________________________ test_double_jeopardy ______________________________________________________________________________\r\n\r\n    def test_double_jeopardy():\r\n>       assert False\r\nE       assert False\r\n\r\ntests/test_default.py:16: AssertionError\r\n============================================================================= pytest-warning summary =============================================================================\r\nWP1 None Module already imported so can not be re-written: testinfra\r\n============================================================= 1 failed, 1 passed, 1 pytest-warnings in 1.54 seconds ==============================================================\r\nwrote pytestdebug information to /Users/tyler/rtf/roles/double-jeopardy/pytestdebug.log\r\n```\r\n\r\n# Additional notes\r\n* This seems to be Molecule's doing since running pytest or testinfra directly (e.g. by using the  `RAN:` command in the `molecule` output) works as expected:\r\n\r\n```\r\n(venv-double-jeopardy) $ /Users/tyler/rtf/roles/venv-double-jeopardy/bin/testinfra tests/test_default.py  --debug --connection=docker\r\nwriting pytestdebug information to /Users/tyler/rtf/roles/double-jeopardy/pytestdebug.log\r\n============================================================================== test session starts ===============================================================================\r\nplatform darwin -- Python 2.7.13, pytest-3.0.6, py-1.4.32, pluggy-0.4.0 -- /Users/tyler/rtf/roles/venv-double-jeopardy/bin/python\r\nusing: pytest-3.0.6 pylib-1.4.32\r\nsetuptools registered plugins:\r\n  testinfra-1.4.5 at /Users/tyler/rtf/roles/venv-double-jeopardy/lib/python2.7/site-packages/testinfra/plugin.py\r\nrootdir: /Users/tyler/rtf/roles/double-jeopardy, inifile:\r\nplugins: testinfra-1.4.5\r\ncollected 2 items\r\n\r\ntests/test_default.py .F\r\n\r\n==================================================================================== FAILURES ====================================================================================\r\n______________________________________________________________________________ test_double_jeopardy ______________________________________________________________________________\r\n\r\n    def test_double_jeopardy():\r\n>       assert False\r\nE       assert False\r\n\r\ntests/test_default.py:16: AssertionError\r\n============================================================================= pytest-warning summary =============================================================================\r\nWP1 None Module already imported so can not be re-written: testinfra\r\n============================================================= 1 failed, 1 passed, 1 pytest-warnings in 1.54 seconds ==============================================================\r\nwrote pytestdebug information to /Users/tyler/rtf/roles/double-jeopardy/pytestdebug.log\r\n```\r\n\r\n* This problem does not occur in molecule 1.19, so the workaround for me is to use that version :).\r\n\r\n* The warning `Module already imported so can not be re-written: testinfra` appears to be a testinfra issue: https://github.com/philpep/testinfra/issues/135\r\n\r\n* Molecule is pretty nifty. Thanks for sharing it :).", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/744/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/744/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/735", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/735/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/735/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/735/events", "html_url": "https://github.com/ansible-community/molecule/issues/735", "id": 203940104, "node_id": "MDU6SXNzdWUyMDM5NDAxMDQ=", "number": 735, "title": "How to pass `-vv` option to testinfra verifier?", "user": {"login": "tknerr", "id": 365744, "node_id": "MDQ6VXNlcjM2NTc0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/365744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tknerr", "html_url": "https://github.com/tknerr", "followers_url": "https://api.github.com/users/tknerr/followers", "following_url": "https://api.github.com/users/tknerr/following{/other_user}", "gists_url": "https://api.github.com/users/tknerr/gists{/gist_id}", "starred_url": "https://api.github.com/users/tknerr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tknerr/subscriptions", "organizations_url": "https://api.github.com/users/tknerr/orgs", "repos_url": "https://api.github.com/users/tknerr/repos", "events_url": "https://api.github.com/users/tknerr/events{/privacy}", "received_events_url": "https://api.github.com/users/tknerr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-01-30T07:06:15Z", "updated_at": "2017-02-05T12:44:00Z", "closed_at": "2017-02-04T21:46:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report (or Question :))\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ ansible --version\r\n2.1.1.0\r\n$ molecule --version\r\n1.8.4\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nI want to be able to pass the `-vv` option to testinfra, so that it shows the full length document if a string match is not found\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nWhen using this in `molecule.yml`:\r\n\r\n```\r\ntestinfra:\r\n  vv: yes\r\n```\r\n\r\nThen testinfra will be invoked with `--vv` causing an invalid argument error. \r\n\r\nI had tried this variation too:\r\n\r\n```\r\ntestinfra:\r\n  '-vv': yes\r\n```\r\n\r\nbut this ends up as `---vv` when testinfra is invoked", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/735/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/735/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/722", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/722/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/722/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/722/events", "html_url": "https://github.com/ansible-community/molecule/issues/722", "id": 202541874, "node_id": "MDU6SXNzdWUyMDI1NDE4NzQ=", "number": 722, "title": "\"Do not alter users known_hosts file in Openstack driver\" breaks _check_ssh_availability method", "user": {"login": "berendt", "id": 419091, "node_id": "MDQ6VXNlcjQxOTA5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/419091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berendt", "html_url": "https://github.com/berendt", "followers_url": "https://api.github.com/users/berendt/followers", "following_url": "https://api.github.com/users/berendt/following{/other_user}", "gists_url": "https://api.github.com/users/berendt/gists{/gist_id}", "starred_url": "https://api.github.com/users/berendt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berendt/subscriptions", "organizations_url": "https://api.github.com/users/berendt/orgs", "repos_url": "https://api.github.com/users/berendt/repos", "events_url": "https://api.github.com/users/berendt/events{/privacy}", "received_events_url": "https://api.github.com/users/berendt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-01-23T14:03:40Z", "updated_at": "2017-02-04T23:13:40Z", "closed_at": "2017-02-04T23:13:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I think that the Commit 470fb2f2fc81bf65cd32760a1dfb77208e95c94d breaks the ``_check_ssh_availability`` method in ``molecule/driver/openstackdriver.py``.\r\n\r\nIn the old implementation of the method the ``sshkey_filename`` was used to connect with the instance. In the new implementation this parameter is not used.\r\n\r\nBecause of that the command will always fail with the error ``Permission denied (publickey).`` and exit code ``255`` and the ``_check_ssh_availability`` will always return ``False``. Because of that the OpenStack driver is broken at the moment.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/722/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/722/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/718", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/718/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/718/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/718/events", "html_url": "https://github.com/ansible-community/molecule/issues/718", "id": 201560775, "node_id": "MDU6SXNzdWUyMDE1NjA3NzU=", "number": 718, "title": "Configurable SSH timeout for OpenStack instances", "user": {"login": "berendt", "id": 419091, "node_id": "MDQ6VXNlcjQxOTA5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/419091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berendt", "html_url": "https://github.com/berendt", "followers_url": "https://api.github.com/users/berendt/followers", "following_url": "https://api.github.com/users/berendt/following{/other_user}", "gists_url": "https://api.github.com/users/berendt/gists{/gist_id}", "starred_url": "https://api.github.com/users/berendt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berendt/subscriptions", "organizations_url": "https://api.github.com/users/berendt/orgs", "repos_url": "https://api.github.com/users/berendt/repos", "events_url": "https://api.github.com/users/berendt/events{/privacy}", "received_events_url": "https://api.github.com/users/berendt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-18T12:26:52Z", "updated_at": "2017-01-23T14:21:26Z", "closed_at": "2017-01-20T20:59:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Desired Behaviour\r\n\r\nAt the moment the maximum possible timeout (30 seconds) is hardcoded. Maximum of 5 tries with a timeout of 6 seconds. The number of tried and/or the timeout should be configurable because there are OpenStack environments where it takes longer then 30 seconds (I am using one of this environments at the moment).\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\nERROR: Could not reach instance molecule-betacloud.docker within limit of 30 seconds\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/718/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/718/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/702", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/702/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/702/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/702/events", "html_url": "https://github.com/ansible-community/molecule/issues/702", "id": 199521550, "node_id": "MDU6SXNzdWUxOTk1MjE1NTA=", "number": 702, "title": "[Bug] UnicodeDecodeError (molecule/util.py) when using verbose=v (or vv ...) on (ansible) large output", "user": {"login": "lhoss", "id": 3091244, "node_id": "MDQ6VXNlcjMwOTEyNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3091244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lhoss", "html_url": "https://github.com/lhoss", "followers_url": "https://api.github.com/users/lhoss/followers", "following_url": "https://api.github.com/users/lhoss/following{/other_user}", "gists_url": "https://api.github.com/users/lhoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/lhoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lhoss/subscriptions", "organizations_url": "https://api.github.com/users/lhoss/orgs", "repos_url": "https://api.github.com/users/lhoss/repos", "events_url": "https://api.github.com/users/lhoss/events{/privacy}", "received_events_url": "https://api.github.com/users/lhoss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-09T10:41:08Z", "updated_at": "2017-04-27T19:50:15Z", "closed_at": "2017-04-27T19:50:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n```\r\n# ansible --version\r\nansible 2.2.0.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n# molecule --version\r\nmolecule, version 1.17.3\r\n```\r\n- Molecule installation method: pip\r\n- Ansible installation method:  pip\r\n\r\n# Actual Behaviour (Bug report only)\r\nMolecule just hangs, after it outputed following  error, during my ansible playbook was deploying openjdk-8 (in ubuntu-14.04 using a ppa), and when using molecule's config `verbose: vv`.\r\nIt seems like the output somehow contains special chars (the output is also quite large) (I removed part in the middle):\r\n\r\n```\r\nTASK [lhoss.java : Ensure Java is installed.] **********************************\r\ntask path: /Users/lhoss/IdeaProjects/ansible-zookeeper/.molecule/roles/lhoss.java/tasks/setup-Debian.yml:15\r\nThe following additional packages will be installed:\r\n  ca-certificates ca-certificates-java dbus dbus-x11 fontconfig\r\n  fontconfig-config fonts-dejavu-core fonts-dejavu-extra gconf-service\r\n  gconf-service-backend gconf2 gconf2-common hicolor-icon-theme java-common\r\n  krb5-locales libasn1-8-heimdal libasound2 libasound2-data libasyncns0\r\n  libatk1.0-0 libatk1.0-data libavahi-client3 libavahi-common-data\r\n  libavahi-common3 libavahi-glib1 libbonobo2-0 libbonobo2-common libbsd0\r\n  libcairo2 libcanberra0 libcap-ng0 libcups2 libdatrie1 libdbus-1-3\r\n  libdbus-glib-1-2 libdrm-amdgpu1 libdrm-intel1 libdrm-nouveau2 libdrm-radeon1\r\n  libdrm2 libedit2 libelf1 libflac8 libfontconfig1 libfreetype6 libgconf-2-4\r\n  libgdk-pixbuf2.0-0 libgdk-pixbuf2.0-common libgif7 libgl1-mesa-dri\r\n  libgl1-mesa-glx libglapi-mesa libglib2.0-0 libglib2.0-data libgmp10\r\n  libgnome-2-0 libgnome2-common libgnomevfs2-0 libgnomevfs2-common libgnutls30\r\n  libgraphite2-3 libgssapi-krb5-2 libgssapi3-heimdal libgtk2.0-0 libgtk2.0-bin\r\n  libgtk2.0-common libharfbuzz0b libhcrypto4-heimdal libheimbase1-heimdal\r\n  libheimntlm0-heimdal libhogweed4 libhx509-5-heimdal libice-dev libice6\r\n  libicu55 libidn11 libjbig0 libjpeg-turbo8 libjpeg8 libjson-c2 libk5crypto3\r\n  libkeyutils1 libkrb5-26-heimdal libkrb5-3 libkrb5support0 liblcms2-2\r\n  libldap-2.4-2 libllvm3.8 libltdl7 libnettle6 libnspr4 libnss3 libnss3-nssdb\r\n  libogg0 liborbit-2-0 libp11-kit0 libpango-1.0-0 libpangocairo-1.0-0\r\n  libpangoft2-1.0-0 libpciaccess0 libpcsclite1 libpixman-1-0 libpng12-0\r\n  libpopt0 libpthread-stubs0-dev libpulse0 libroken18-heimdal libsasl2-2\r\n  libsasl2-modules libsasl2-modules-db libsm-dev libsm6 libsndfile1 libtasn1-6\r\n  libtdb1 libthai-data libthai0 libtiff5 libtxc-dxtn-s2tc0 libvorbis0a\r\n  libvorbisenc2 libvorbisfile3 libwind0-heimdal libwrap0 libx11-6 libx11-data\r\n  libx11-dev libx11-doc libx11-xcb1 libxau-dev libxau6 libxcb-dri2-0\r\n  libxcb-dri3-0 libxcb-glx0 libxcb-present0 libxcb-render0 libxcb-shm0\r\n  libxcb-sync1 libxcb1 libxcb1-dev libxcomposite1 libxcursor1 libxdamage1\r\n  libxdmcp-dev libxdmcp6 libxext6 libxfixes3 libxi6 libxinerama1 libxml2\r\n  libxrandr2 libxrender1 libxshmfence1 libxt-dev libxt6 libxtst6 libxxf86vm1\r\n  openjdk-8-jdk-headless openjdk-8-jre openjdk-8-jre-headless openssl psmisc\r\n  sgml-base shared-mime-info sound-theme-freedesktop tcpd ucf x11-common\r\n  x11proto-core-dev x11proto-input-dev x11proto-kb-dev xdg-user-dirs xml-core\r\n  xorg-sgml-doctools xtrans-dev\r\nSuggested packages:\r\n  gconf-defaults-service default-jre libasound2-plugins alsa-utils\r\n  libbonobo2-bin libcanberra-gtk0 libcanberra-pulse cups-common desktop-base\r\n  libgnomevfs2-bin libgnomevfs2-extra gamin | fam gnome-mime-data gnutls-bin\r\n  krb5-doc krb5-user librsvg2-common gvfs libice-doc liblcms2-utils pciutils\r\n  pcscd pulseaudio libsasl2-modules-otp libsasl2-modules-ldap\r\n  libsasl2-modules-sql libsasl2-modules-gssapi-mit\r\n  | libsasl2-modules-gssapi-heimdal libsm-doc libxcb-doc libxt-doc\r\n  openjdk-8-demo openjdk-8-source visualvm icedtea-8-plugin\r\n  openjdk-8-jre-jamvm libnss-mdns fonts-ipafont-gothic fonts-ipafont-mincho\r\n  ttf-wqy-microhei | ttf-wqy-zenhei fonts-indic sgml-base-doc debhelper\r\nThe following NEW packages will be installed:\r\n  ca-certificates ca-certificates-java dbus dbus-x11 fontconfig\r\n  fontconfig-config fonts-dejavu-core fonts-dejavu-extra gconf-service\r\n  gconf-service-backend gconf2 gconf2-common hicolor-icon-theme java-common\r\n  krb5-locales libasn1-8-heimdal libasound2 libasound2-data libasyncns0\r\n  libatk1.0-0 libatk1.0-data libavahi-client3 libavahi-common-data\r\n  libavahi-common3 libavahi-glib1 libbonobo2-0 libbonobo2-common libbsd0\r\n  libcairo2 libcanberra0 libcap-ng0 libcups2 libdatrie1 libdbus-1-3\r\n  libdbus-glib-1-2 libdrm-amdgpu1 libdrm-intel1 libdrm-nouveau2 libdrm-radeon1\r\n  libdrm2 libedit2 libelf1 libflac8 libfontconfig1 libfreetype6 libgconf-2-4\r\n  libgdk-pixbuf2.0-0 libgdk-pixbuf2.0-common libgif7 libgl1-mesa-dri\r\n  libgl1-mesa-glx libglapi-mesa libglib2.0-0 libglib2.0-data libgmp10\r\n  libgnome-2-0 libgnome2-common libgnomevfs2-0 libgnomevfs2-common libgnutls30\r\n  libgraphite2-3 libgssapi-krb5-2 libgssapi3-heimdal libgtk2.0-0 libgtk2.0-bin\r\n  libgtk2.0-common libharfbuzz0b libhcrypto4-heimdal libheimbase1-heimdal\r\n  libheimntlm0-heimdal libhogweed4 libhx509-5-heimdal libice-dev libice6\r\n  libicu55 libidn11 libjbig0 libjpeg-turbo8 libjpeg8 libjson-c2 libk5crypto3\r\n  libkeyutils1 libkrb5-26-heimdal libkrb5-3 libkrb5support0 liblcms2-2\r\n  libldap-2.4-2 libllvm3.8 libltdl7 libnettle6 libnspr4 libnss3 libnss3-nssdb\r\n  libogg0 liborbit-2-0 libp11-kit0 libpango-1.0-0 libpangocairo-1.0-0\r\n  libpangoft2-1.0-0 libpciaccess0 libpcsclite1 libpixman-1-0 libpng12-0\r\n  libpopt0 libpthread-stubs0-dev libpulse0 libroken18-heimdal libsasl2-2\r\n  libsasl2-modules libsasl2-modules-db libsm-dev libsm6 libsndfile1 libtasn1-6\r\n  libtdb1 libthai-data libthai0 libtiff5 libtxc-dxtn-s2tc0 libvorbis0a\r\n  libvorbisenc2 libvorbisfile3 libwind0-heimdal libwrap0 libx11-6 libx11-data\r\n  libx11-dev libx11-doc libx11-xcb1 libxau-dev libxau6 libxcb-dri2-0\r\n  libxcb-dri3-0 libxcb-glx0 libxcb-present0 libxcb-render0 libxcb-shm0\r\n  libxcb-sync1 libxcb1 libxcb1-dev libxcomposite1 libxcursor1 libxdamage1\r\n  libxdmcp-dev libxdmcp6 libxext6 libxfixes3 libxi6 libxinerama1 libxml2\r\n  libxrandr2 libxrender1 libxshmfence1 libxt-dev libxt6 libxtst6 libxxf86vm1\r\n  openjdk-8-jdk openjdk-8-jdk-headless openjdk-8-jre openjdk-8-jre-headless\r\n  openssl psmisc sgml-base shared-mime-info sound-theme-freedesktop tcpd ucf\r\n  x11-common x11proto-core-dev x11proto-input-dev x11proto-kb-dev\r\n  xdg-user-dirs xml-core xorg-sgml-doctools xtrans-dev\r\n0 upgraded, 176 newly installed, 0 to remove and 20 not upgraded.\r\n\r\nchanged: [zookeeper02] => (item=[u'openjdk-8-jdk']) => {\"cache_update_time\": 1483956303, \"cache_updated\": false, \"changed\": true, \"item\": [\"openjdk-8-jdk\"], \"stderr\": \"\\rExtracting templates from packages: 13%\\rExtracting templates from packages: 27%\\rExtracting templates from packages: 40%\\rExtracting templates from packages: 54%\\rExtracting templates from packages: 67%\\rExtracting templates from packages: 81%\\rExtracting templates from packages: 95%\\rExtracting templates from packages: 100%\\nupdate-initramfs: deferring update (trigger activated)\\n * Setting up X socket directories...\\n   ...done.\\n\\nCreating config file /etc/gconf/2/path with new version\\n\\n(gconftool-2:5254): GConf-WARNING **: Client failed to connect to the D-BUS daemon:\\nUnable to autolaunch a dbus-daemon without a $DISPLAY for X11\\n\", \"stdout\": \"Reading package lists...\\nBuilding dependency tree...\\nReading state information...\\nThe following extra packages will be installed:\\n  acl at-spi2-core ca-certificates-java colord cpp cp\r\np-4.8 dbus dbus-x11\\n  dconf-gsettings-backend dconf-service desktop-file-utils dosfstools\\n  fontconfig fontconfig-config fonts-dejavu-core fonts-dejavu-extra fuse\\n  gcc-4.8-base gconf-service gconf-service-ba\r\n\r\n...\r\n\r\nauto mode\", \"update-alternatives: using /usr/lib/jvm/java-8-openjdk-amd64/bin/xjc to provide /usr/bin/xjc (xjc) in auto mode\", \"Setting up openjdk-8-jdk:amd64 (8u111-b14-3~14.04.1) ...\", \"update-alternatives: using /usr/lib/jvm/java-8-openjdk-amd64/bin/appletviewer to provide /usr/bin/appletviewer (appletviewer) in auto mode\", \"update-alternatives: using /usr/lib/jvm/java-8-openjdk-amd64/bin/jconsole to provide /usr/bin/jconsole (jconsole) in auto mode\", \"Setting up ca-certificates-java (20130815ubuntu1) ...\", \"Adding debian:Entrust.net_Premium_2048_Secure_Server_CA.pem\", \"Adding debian:A-Trust-\r\nnQual-03.pem\", \"Adding debian:AffirmTrust_Commercial.pem\", \"Adding debian:SwissSign_Platinum_CA_-_G2.pem\", \"Adding debian:China_Internet_Network_Information_Center_EV_Certificates_Root.pem\", \"Adding debian:TWCA_Root_Certification_Authority.pem\", \"Adding debian:Visa_eCommerce_Root.pem\", \"Adding debian:GlobalSign_Root_CA.pem\", \"Adding debian:NetLock_Business_=Class_B=_Root.pem\", \"Adding debian:AddTrust_External_Root.pem\", \"Adding debian:Equifax_Secure_CA.pem\", \"Adding debian:VeriSign_Class_3_Public_Primary_Certification_Authority_-_G5.pem\", \"Adding debian:QuoVadis_Root_CA_3_G3.pem\", \"Adding debian:thawte_Primary_Root_CA_-_G3.pem\", \"Adding debian:GlobalSign_Root_CA_-_R3.pem\", \"Adding debian:Go_Daddy_Class_2_CA.pem\", \"Adding debian:D-TRUST_Root_Class_3_CA_2_EV_2009.pem\", \"Adding debian:Comodo_Secure_Services_root.pem\", \"Adding debian:UTN_USERFirst_Hardware_Root_CA.pem\", \"Adding debian:DST_ACES_CA_X6.pem\", \"Adding debian:Digital_Signature_Trust_Co._Global_CA_1.pem\", \"Adding debian:Root_CA_Generalitat_Valenciana.pe\r\nException in thread Thread-4:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/miniconda2/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\r\n    self.run()\r\n  File \"/usr/local/miniconda2/lib/python2.7/threading.py\", line 754, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"/usr/local/miniconda2/lib/python2.7/site-packages/sh.py\", line 1484, in output_thread\r\n    done = stream.read()\r\n  File \"/usr/local/miniconda2/lib/python2.7/site-packages/sh.py\", line 1974, in read\r\n    self.write_chunk(chunk)\r\n  File \"/usr/local/miniconda2/lib/python2.7/site-packages/sh.py\", line 1949, in write_chunk\r\n    self.should_quit = self.process_chunk(chunk)\r\n  File \"/usr/local/miniconda2/lib/python2.7/site-packages/sh.py\", line 1867, in process\r\n    return handler(chunk)\r\n  File \"/usr/local/miniconda2/lib/python2.7/site-packages/sh.py\", line 1106, in fn\r\n    return handler(chunk, *args)\r\n  File \"/usr/local/miniconda2/lib/python2.7/site-packages/molecule/util.py\", line 81, in callback_info\r\n    print_info(msg, pretty=False)\r\n  File \"/usr/local/miniconda2/lib/python2.7/site-packages/molecule/util.py\", line 45, in print_info\r\n    print_msg('{}', msg)\r\n  File \"/usr/local/miniconda2/lib/python2.7/site-packages/molecule/util.py\", line 76, in print_msg\r\n    print(template.format(msg.rstrip().encode('utf-8')))\r\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 976: ordinal not in range(128)\r\n\r\n\r\n```\r\nNote: It works with `verbose: False` (as the bad output is simply omitted)\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/702/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/702/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/688", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/688/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/688/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/688/events", "html_url": "https://github.com/ansible-community/molecule/issues/688", "id": 198957832, "node_id": "MDU6SXNzdWUxOTg5NTc4MzI=", "number": 688, "title": "Add openstack multiple network support", "user": {"login": "cseke", "id": 12721055, "node_id": "MDQ6VXNlcjEyNzIxMDU1", "avatar_url": "https://avatars.githubusercontent.com/u/12721055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cseke", "html_url": "https://github.com/cseke", "followers_url": "https://api.github.com/users/cseke/followers", "following_url": "https://api.github.com/users/cseke/following{/other_user}", "gists_url": "https://api.github.com/users/cseke/gists{/gist_id}", "starred_url": "https://api.github.com/users/cseke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cseke/subscriptions", "organizations_url": "https://api.github.com/users/cseke/orgs", "repos_url": "https://api.github.com/users/cseke/repos", "events_url": "https://api.github.com/users/cseke/events{/privacy}", "received_events_url": "https://api.github.com/users/cseke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-05T13:39:11Z", "updated_at": "2017-01-11T04:50:41Z", "closed_at": "2017-01-11T04:50:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nmolecule, version 1.14.1.dev53\r\nansible 2.2.0.0\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nThe openstack provider creates an openstack instance and attach multiple network interfaces. Networks could be defined in molecule.yml explicitly.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nFrankly speaking I could not realize how it should work currently. I have always error message:\r\n```\r\nshade.exc.OpenStackCloudException: Error in creating instance (Inner Exception: Multiple possible networks found, use a Network ID to be more specific. (HTTP 409) (Request-ID: req-547b661b-cd0f-43aa-a087-053c34aa0188))\r\n```", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/688/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/688/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/670", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/670/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/670/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/670/events", "html_url": "https://github.com/ansible-community/molecule/pull/670", "id": 198191491, "node_id": "MDExOlB1bGxSZXF1ZXN0OTk3ODExOTY=", "number": 670, "title": "Correct functional tests", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-12-30T20:31:32Z", "updated_at": "2016-12-30T20:31:47Z", "closed_at": "2016-12-30T20:31:47Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/670", "html_url": "https://github.com/ansible-community/molecule/pull/670", "diff_url": "https://github.com/ansible-community/molecule/pull/670.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/670.patch", "merged_at": "2016-12-30T20:31:47Z"}, "body": "Some tests call destroy prior to cleanup running.  Wrap cleanup to\r\nignore errors.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/670/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/670/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/668", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/668/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/668/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/668/events", "html_url": "https://github.com/ansible-community/molecule/issues/668", "id": 197930371, "node_id": "MDU6SXNzdWUxOTc5MzAzNzE=", "number": 668, "title": "Unicode issues", "user": {"login": "madrover", "id": 4009248, "node_id": "MDQ6VXNlcjQwMDkyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/4009248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madrover", "html_url": "https://github.com/madrover", "followers_url": "https://api.github.com/users/madrover/followers", "following_url": "https://api.github.com/users/madrover/following{/other_user}", "gists_url": "https://api.github.com/users/madrover/gists{/gist_id}", "starred_url": "https://api.github.com/users/madrover/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madrover/subscriptions", "organizations_url": "https://api.github.com/users/madrover/orgs", "repos_url": "https://api.github.com/users/madrover/repos", "events_url": "https://api.github.com/users/madrover/events{/privacy}", "received_events_url": "https://api.github.com/users/madrover/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-28T23:18:42Z", "updated_at": "2016-12-30T19:14:43Z", "closed_at": "2016-12-30T19:14:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\n$ansible --version\r\nansible 2.1.3.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n$molecule --version\r\nmolecule, version 1.17.0\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nWhen executing Ansible via molecule the following code should be executed without errors\r\n\r\n```\r\n- name: Check whether JDK is installed\r\n  command: \"rpm -q jdk1.{{ jdk_version_major }}.0_{{ jdk_version_minor }}\"\r\n  register: jdk_installed\r\n  changed_when: False\r\n  ignore_errors: True\r\n\r\n```\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nThe following errors is thrown:\r\n```\r\nTASK [ansible-jdk-localinstall : Check whether JDK is installed] ***************\r\ntask path: /Users/miqueladrover/Projects/ansible/ansible_sacyl_cassandra/roles/ansible-jdk-localinstall/tasks/redhat/package.yml:2\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -C -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/Users/miqueladrover/Projects/ansible/ansible_sacyl_cassandra/.vagrant/machines/cassandra/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=30 -o ControlPath=/Users/miqueladrover/.ansible/cp/ansible-ssh-%h-%p-%r 127.0.0.1 '/bin/sh -c '\"'\"'( umask 77 && mkdir -p \"` echo $HOME/.ansible/tmp/ansible-tmp-1482966597.61-166470479582663 `\" && echo ansible-tmp-1482966597.61-166470479582663=\"` echo $HOME/.ansible/tmp/ansible-tmp-1482966597.61-166470479582663 `\" ) && sleep 0'\"'\"''\r\n<127.0.0.1> PUT /var/folders/73/j851knkj11755mllmt85t9kh0000gn/T/tmpeMDtd4 TO /home/vagrant/.ansible/tmp/ansible-tmp-1482966597.61-166470479582663/command\r\n<127.0.0.1> SSH: EXEC sftp -b - -C -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/Users/miqueladrover/Projects/ansible/ansible_sacyl_cassandra/.vagrant/machines/cassandra/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=30 -o ControlPath=/Users/miqueladrover/.ansible/cp/ansible-ssh-%h-%p-%r '[127.0.0.1]'\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -C -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/Users/miqueladrover/Projects/ansible/ansible_sacyl_cassandra/.vagrant/machines/cassandra/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=30 -o ControlPath=/Users/miqueladrover/.ansible/cp/ansible-ssh-%h-%p-%r 127.0.0.1 '/bin/sh -c '\"'\"'chmod u+x /home/vagrant/.ansible/tmp/ansible-tmp-1482966597.61-166470479582663/ /home/vagrant/.ansible/tmp/ansible-tmp-1482966597.61-166470479582663/command && sleep 0'\"'\"''\r\n<127.0.0.1> ESTABLISH SSH CONNECTION FOR USER: vagrant\r\n<127.0.0.1> SSH: EXEC ssh -C -vvv -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o Port=2222 -o 'IdentityFile=\"/Users/miqueladrover/Projects/ansible/ansible_sacyl_cassandra/.vagrant/machines/cassandra/virtualbox/private_key\"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o User=vagrant -o ConnectTimeout=30 -o ControlPath=/Users/miqueladrover/.ansible/cp/ansible-ssh-%h-%p-%r -tt 127.0.0.1 '/bin/sh -c '\"'\"'sudo -H -S -n -u root /bin/sh -c '\"'\"'\"'\"'\"'\"'\"'\"'echo BECOME-SUCCESS-axlabkfvmbhpvectbdgxmeahvqmiqbfz; LANG=es_ES.UTF-8 LC_ALL=es_ES.UTF-8 LC_MESSAGES=es_ES.UTF-8 /usr/bin/python /home/vagrant/.ansible/tmp/ansible-tmp-1482966597.61-166470479582663/command; rm -rf \"/home/vagrant/.ansible/tmp/ansible-tmp-1482966597.61-166470479582663/\" > /dev/null 2>&1'\"'\"'\"'\"'\"'\"'\"'\"' && sleep 0'\"'\"''\r\nException in thread Thread-4:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\r\n    self.run()\r\n  File \"/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py\", line 754, in run\r\n    self.__target(*self.__args, **self.__kwargs)\r\n  File \"/usr/local/lib/python2.7/site-packages/sh.py\", line 1484, in output_thread\r\n    done = stream.read()\r\n  File \"/usr/local/lib/python2.7/site-packages/sh.py\", line 1974, in read\r\n    self.write_chunk(chunk)\r\n  File \"/usr/local/lib/python2.7/site-packages/sh.py\", line 1949, in write_chunk\r\n    self.should_quit = self.process_chunk(chunk)\r\n  File \"/usr/local/lib/python2.7/site-packages/sh.py\", line 1867, in process\r\n    return handler(chunk)\r\n  File \"/usr/local/lib/python2.7/site-packages/sh.py\", line 1106, in fn\r\n    return handler(chunk, *args)\r\n  File \"/usr/local/lib/python2.7/site-packages/molecule/util.py\", line 81, in callback_info\r\n    print_info(msg, pretty=False)\r\n  File \"/usr/local/lib/python2.7/site-packages/molecule/util.py\", line 45, in print_info\r\n    print_msg('{}', msg)\r\n  File \"/usr/local/lib/python2.7/site-packages/molecule/util.py\", line 76, in print_msg\r\n    print(template.format(msg.rstrip()))\r\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xe1' in position 480: ordinal not in range(128)\r\n```\r\n\r\nI'm using a spanish OSX box so this probably has something to do with the locale.\r\n\r\nThis issue apparently could be fixed by changing https://github.com/metacloud/molecule/blob/master/molecule/util.py#L76 to:\r\n\r\n`\r\n    print(template.format(msg.rstrip().encode('utf-8')))\r\n`\r\nI'm unsure if that's the best way, though.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/668/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/666", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/666/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/666/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/666/events", "html_url": "https://github.com/ansible-community/molecule/issues/666", "id": 196639791, "node_id": "MDU6SXNzdWUxOTY2Mzk3OTE=", "number": 666, "title": "serverspec example files are not created", "user": {"login": "m4rkw", "id": 124088, "node_id": "MDQ6VXNlcjEyNDA4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/124088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m4rkw", "html_url": "https://github.com/m4rkw", "followers_url": "https://api.github.com/users/m4rkw/followers", "following_url": "https://api.github.com/users/m4rkw/following{/other_user}", "gists_url": "https://api.github.com/users/m4rkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/m4rkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m4rkw/subscriptions", "organizations_url": "https://api.github.com/users/m4rkw/orgs", "repos_url": "https://api.github.com/users/m4rkw/repos", "events_url": "https://api.github.com/users/m4rkw/events{/privacy}", "received_events_url": "https://api.github.com/users/m4rkw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-12-20T10:40:09Z", "updated_at": "2016-12-30T22:17:00Z", "closed_at": "2016-12-30T22:17:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible 2.2.0.0\r\nmolecule, version 1.17.0\r\n```\r\n\r\n- Molecule installation method: pip\r\n- Ansible installation method: pip\r\n\r\n# Desired Behaviour\r\n\r\nwhen running:\r\n```\r\nmolecule init --verifier serverspec\r\n```\r\nThe serverspec section of the documentation says \"Example files are created\" but they are not.  Ideally if the docker driver is also specified it should create a spec_helper.rb that facilitates testing of the docker container.\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\nNo serverspec example files are created.", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/666/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/666/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/663", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/663/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/663/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/663/events", "html_url": "https://github.com/ansible-community/molecule/issues/663", "id": 196376293, "node_id": "MDU6SXNzdWUxOTYzNzYyOTM=", "number": 663, "title": "Please update ansible-lint", "user": {"login": "enricomingardo", "id": 912728, "node_id": "MDQ6VXNlcjkxMjcyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/912728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enricomingardo", "html_url": "https://github.com/enricomingardo", "followers_url": "https://api.github.com/users/enricomingardo/followers", "following_url": "https://api.github.com/users/enricomingardo/following{/other_user}", "gists_url": "https://api.github.com/users/enricomingardo/gists{/gist_id}", "starred_url": "https://api.github.com/users/enricomingardo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enricomingardo/subscriptions", "organizations_url": "https://api.github.com/users/enricomingardo/orgs", "repos_url": "https://api.github.com/users/enricomingardo/repos", "events_url": "https://api.github.com/users/enricomingardo/events{/privacy}", "received_events_url": "https://api.github.com/users/enricomingardo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-12-19T10:14:11Z", "updated_at": "2016-12-20T20:46:59Z", "closed_at": "2016-12-20T20:46:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.2.0.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\nmolecule --version\r\nmolecule, version 1.17.0\r\n```\r\n\r\n- Molecule installation method:  pip\r\n- Ansible installation method: homebrew (Mac OSX)\r\n\r\n# Desired Behaviour\r\n\r\nAnsible-lint should not exit with error when role dependency is in newer dictionary format see [ansible-lint exits when using newer role dependency dict structure #174](https://github.com/willthames/ansible-lint/issues/174)\r\n\r\n# Actual Behaviour (Bug report only)\r\n\r\n```\r\n--> Idempotence test in progress (can take a few minutes)...\r\n--> Starting Ansible Run...\r\nIdempotence test passed.\r\n--> Executing ansible-lint...\r\nrole dict {u'src': u'geerlingguy.repo-epel'} does not contain a \"role\" or \"name\" key\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/663/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/640", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/640/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/640/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/640/events", "html_url": "https://github.com/ansible-community/molecule/issues/640", "id": 194717498, "node_id": "MDU6SXNzdWUxOTQ3MTc0OTg=", "number": 640, "title": "Molecule verify does not work. ", "user": {"login": "pleegor", "id": 5149921, "node_id": "MDQ6VXNlcjUxNDk5MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/5149921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pleegor", "html_url": "https://github.com/pleegor", "followers_url": "https://api.github.com/users/pleegor/followers", "following_url": "https://api.github.com/users/pleegor/following{/other_user}", "gists_url": "https://api.github.com/users/pleegor/gists{/gist_id}", "starred_url": "https://api.github.com/users/pleegor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pleegor/subscriptions", "organizations_url": "https://api.github.com/users/pleegor/orgs", "repos_url": "https://api.github.com/users/pleegor/repos", "events_url": "https://api.github.com/users/pleegor/events{/privacy}", "received_events_url": "https://api.github.com/users/pleegor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-12-09T22:58:03Z", "updated_at": "2016-12-30T19:19:41Z", "closed_at": "2016-12-30T19:19:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Issue Type\r\n\r\n- Bug report\r\n- Feature request\r\n\r\n# Molecule and Ansible details\r\n\r\n```\r\nansible --version\r\nansible 2.2.0.0\r\n  config file =\r\nmolecule --version\r\nmolecule, version 1.16.1\r\n```\r\n\r\n- Molecule installation method: One of source, pip\r\n- Ansible installation method: One of source, pip, OS package\r\n\r\n# Desired Behaviour\r\n\r\nWhen I am running `molecule verify` I would expect having a dry run\r\n\r\n# Actual Behaviour (Bug report only)\r\nThis is what I am getting. https://gist.github.com/pleegor/48a4c0cb7cc4030cccdfe6d684d9289f\r\n\r\nPlease give some details of what is actually happening.\r\nInclude a [minimum complete verifiable example](http://stackoverflow.com/help/mcve) with\r\noutput of running `molecule --debug`.\r\n\r\nRan `molecule status`\r\n`molecule status\r\n\u2552\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2564\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2555\r\n\u2502 Name       \u2502 State       \u2502 Provider   \u2502\r\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\r\n\u2502 vagrant-01 \u2502 not_created \u2502 virtualbox \u2502\r\n\u2558\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2567\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255b\r\n--> AVAILABLE PLATFORMS\r\ntrusty64  (default)\r\n--> AVAILABLE PROVIDERS\r\nvirtualbox  (default)`\r\n\r\n`molecule test` on the other side works without any issues", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/640/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/640/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/559", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/559/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/559/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/559/events", "html_url": "https://github.com/ansible-community/molecule/issues/559", "id": 183201766, "node_id": "MDU6SXNzdWUxODMyMDE3NjY=", "number": 559, "title": "Goss test fail does not fail molecule test", "user": {"login": "lxhunter", "id": 841856, "node_id": "MDQ6VXNlcjg0MTg1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/841856?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lxhunter", "html_url": "https://github.com/lxhunter", "followers_url": "https://api.github.com/users/lxhunter/followers", "following_url": "https://api.github.com/users/lxhunter/following{/other_user}", "gists_url": "https://api.github.com/users/lxhunter/gists{/gist_id}", "starred_url": "https://api.github.com/users/lxhunter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lxhunter/subscriptions", "organizations_url": "https://api.github.com/users/lxhunter/orgs", "repos_url": "https://api.github.com/users/lxhunter/repos", "events_url": "https://api.github.com/users/lxhunter/events{/privacy}", "received_events_url": "https://api.github.com/users/lxhunter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-10-15T10:21:30Z", "updated_at": "2016-10-17T20:14:28Z", "closed_at": "2016-10-17T20:11:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey!\n\na failed goss does not seem to change molecule's exit code\n#### Here is my test file (tests/test_default.yml):\n\n``` yaml\n\n---\n- hosts: all\n  gather_facts: no\n  vars:\n    goss:\n      package:\n        php5.6:\n          installed: true\n        php5.6-cli:\n          installed: true\n        php5.6-fpm:\n          installed: true\n      service:\n        php5.6-fpm:\n          enabled: true\n          running: true\n\n  pre_tasks:\n\n    - name: Copy tests to remote\n      copy:\n        content: \"{{ goss | to_nice_yaml }}\"\n        dest: \"/tmp/goss.yml\"\n\n    - name: test goss files\n      goss:\n        path: \"/tmp/goss.yml\"\n        format: documentation\n```\n#### Here is the output by travis:\n\n![bildschirmfoto 2016-10-15 um 12 17 15](https://cloud.githubusercontent.com/assets/841856/19409311/7330e00c-92d1-11e6-9c30-fdff961909b7.png)\n\nDo you have any idea why?\n\nI totally love the goss support! Awesome!!!\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/559/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/554", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/554/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/554/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/554/events", "html_url": "https://github.com/ansible-community/molecule/issues/554", "id": 182862466, "node_id": "MDU6SXNzdWUxODI4NjI0NjY=", "number": 554, "title": "Idempotence edge case", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-10-13T18:18:49Z", "updated_at": "2016-10-14T20:24:29Z", "closed_at": "2016-10-14T19:04:05Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\n+ molecule idempotence\n--> Idempotence test in progress (can take a few minutes) ...\n--> Starting Ansible Run ...\nIdempotence test failed because of the following tasks:\nTraceback (most recent call last):\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/bin/molecule\", line 11, in <module>\n    sys.exit(main())\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/lib/python2.7/site-packages/molecule/cli.py\", line 41, in main\n    cli(obj={})\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/lib/python2.7/site-packages/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/lib/python2.7/site-packages/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/lib/python2.7/site-packages/click/core.py\", line 1060, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/lib/python2.7/site-packages/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/lib/python2.7/site-packages/click/core.py\", line 534, in invoke\n    return callback(*args, **kwargs)\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/lib/python2.7/site-packages/click/decorators.py\", line 17, in new_func\n    return f(get_current_context(), *args, **kwargs)\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/lib/python2.7/site-packages/molecule/command/idempotence.py\", line 119, in idempotence\n    util.sysexit(i.execute()[0])\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/lib/python2.7/site-packages/molecule/command/idempotence.py\", line 61, in execute\n    LOG.error('\\n'.join(self._non_idempotent_tasks(output)))\n  File \"/home/leeroy-jenkins/jenkins/workspace/ci-molecule-ansible-systems-cisco.metapod_common/venv/lib/python2.7/site-packages/molecule/command/idempotence.py\", line 104, in _non_idempotent_tasks\n    res.append('* {}'.format(task_name.groups()[0]))\nAttributeError: 'NoneType' object has no attribute 'groups'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/554/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/547", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/547/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/547/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/547/events", "html_url": "https://github.com/ansible-community/molecule/issues/547", "id": 182008555, "node_id": "MDU6SXNzdWUxODIwMDg1NTU=", "number": 547, "title": "molecule verify creates $HOME/.ansible/tmp/ in role's folder", "user": {"login": "tbondarchuk", "id": 3264588, "node_id": "MDQ6VXNlcjMyNjQ1ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3264588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tbondarchuk", "html_url": "https://github.com/tbondarchuk", "followers_url": "https://api.github.com/users/tbondarchuk/followers", "following_url": "https://api.github.com/users/tbondarchuk/following{/other_user}", "gists_url": "https://api.github.com/users/tbondarchuk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tbondarchuk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tbondarchuk/subscriptions", "organizations_url": "https://api.github.com/users/tbondarchuk/orgs", "repos_url": "https://api.github.com/users/tbondarchuk/repos", "events_url": "https://api.github.com/users/tbondarchuk/events{/privacy}", "received_events_url": "https://api.github.com/users/tbondarchuk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-10-10T12:59:00Z", "updated_at": "2016-10-10T18:45:35Z", "closed_at": "2016-10-10T17:48:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Since 1.11.5 introduced \"Pass ANSIBLE_CONFIG when executing ansible-lint.\" `molecule verify` creates `$HOME/.ansible/tmp/` in role's folder on every run.\n\nRunning ansible linter directly as `ANSIBLE_CONFIG=.molecule/ansible.cfg /usr/local/bin/ansible-lint playbook.yml` does not create any folders.\n\nI was able to fix this issue by modifying `molecule/verifier/ansible_lint.py` as follows:\n\n```\nimport os\n...\nself._env = {'ANSIBLE_CONFIG':\n             molecule.config.config['ansible']['config_file'],\n             'HOME': os.getenv('HOME')}\n```\n\nBut I'm not sure if it's a correct way to resolve it.\n\nI'm running molecule on Macos Sierra, iTerm2, Python 2.7.12. Please let me know if I can provide any additional info.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/547/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/547/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/531", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/531/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/531/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/531/events", "html_url": "https://github.com/ansible-community/molecule/issues/531", "id": 181009998, "node_id": "MDU6SXNzdWUxODEwMDk5OTg=", "number": 531, "title": "Provider config merging", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-10-04T21:30:00Z", "updated_at": "2016-12-30T19:28:26Z", "closed_at": "2016-12-30T19:28:11Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The way in which we manage the config:\n1. Defaults\n2. User config\n3. Project config\n\nIs troublesome (as mentioned by @bbaassssiiee in https://github.com/metacloud/molecule/issues/504#issuecomment-250490236).\n\nOur config merge strategy is [merge dicts](https://github.com/metacloud/molecule/blob/master/molecule/config.py#L30).  However, lists are not preserved.  This causes providers defined in the local config to be clobbered by providers in the project config.\n### Solutions\n1. Change the merge strategy to `MS_DICTS_AND_LISTS` -- This has the drawback of potentially duplicated items getting merged.\n2. Change the merge order by swapping project with local config -- This is \"test kitchen like\".  Kitchen merges the [user's config last](https://github.com/test-kitchen/test-kitchen/blob/master/lib/kitchen/loader/yaml.rb#L111-L131).\n3. Add all supported providers to the project config.\n4. Hybrid and perform both 1. and 2.\n5. Provider top level dict.\n### Molecule 2.0\n\nThis config syntax will change with Molecule 2.0, along with the configuration of providers and drivers.  However, the use-case described here will remain the same.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/531/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/531/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/527", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/527/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/527/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/527/events", "html_url": "https://github.com/ansible-community/molecule/issues/527", "id": 180934462, "node_id": "MDU6SXNzdWUxODA5MzQ0NjI=", "number": 527, "title": "Idempotence command does not display the non-idempotent tasks", "user": {"login": "rgreinho", "id": 6969134, "node_id": "MDQ6VXNlcjY5NjkxMzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6969134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgreinho", "html_url": "https://github.com/rgreinho", "followers_url": "https://api.github.com/users/rgreinho/followers", "following_url": "https://api.github.com/users/rgreinho/following{/other_user}", "gists_url": "https://api.github.com/users/rgreinho/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgreinho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgreinho/subscriptions", "organizations_url": "https://api.github.com/users/rgreinho/orgs", "repos_url": "https://api.github.com/users/rgreinho/repos", "events_url": "https://api.github.com/users/rgreinho/events{/privacy}", "received_events_url": "https://api.github.com/users/rgreinho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "rgreinho", "id": 6969134, "node_id": "MDQ6VXNlcjY5NjkxMzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6969134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgreinho", "html_url": "https://github.com/rgreinho", "followers_url": "https://api.github.com/users/rgreinho/followers", "following_url": "https://api.github.com/users/rgreinho/following{/other_user}", "gists_url": "https://api.github.com/users/rgreinho/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgreinho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgreinho/subscriptions", "organizations_url": "https://api.github.com/users/rgreinho/orgs", "repos_url": "https://api.github.com/users/rgreinho/repos", "events_url": "https://api.github.com/users/rgreinho/events{/privacy}", "received_events_url": "https://api.github.com/users/rgreinho/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rgreinho", "id": 6969134, "node_id": "MDQ6VXNlcjY5NjkxMzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6969134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgreinho", "html_url": "https://github.com/rgreinho", "followers_url": "https://api.github.com/users/rgreinho/followers", "following_url": "https://api.github.com/users/rgreinho/following{/other_user}", "gists_url": "https://api.github.com/users/rgreinho/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgreinho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgreinho/subscriptions", "organizations_url": "https://api.github.com/users/rgreinho/orgs", "repos_url": "https://api.github.com/users/rgreinho/repos", "events_url": "https://api.github.com/users/rgreinho/events{/privacy}", "received_events_url": "https://api.github.com/users/rgreinho/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2016-10-04T15:58:13Z", "updated_at": "2018-10-29T19:40:02Z", "closed_at": "2016-10-04T21:52:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The `molecule idempotence` command does not display the non idempotent tasks anymore. This forces the user to run `molecule converge` an extra time and manually look for the guilty tasks.\n\n``` sh\n$ molecule --version\n1.11.4\n```\n### Repro steps\n\n``` sh\nmkdir /tmp/molecule-idempotence\ncd /tmp/molecule-idempotence\nmolecule init\n```\n\nUse the following playbook:\n\n``` yaml\n\n---\n- hosts: all\n  pre_tasks:\n    - name: Idempotence test\n      command: echo \"Molecule idempotence check\"\n\n```\n\nThen run:\n\n``` sh\nmolecule idempotence\n```\n\nOutput:\n\n``` sh\n--> Idempotence test in progress (can take a few minutes) ...\n--> Starting Ansible Run ...\nIdempotence test failed.\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/527/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/512", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/512/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/512/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/512/events", "html_url": "https://github.com/ansible-community/molecule/issues/512", "id": 180448550, "node_id": "MDU6SXNzdWUxODA0NDg1NTA=", "number": 512, "title": "Ansible Lint never runs / runs against wrong roles", "user": {"login": "techraf", "id": 1206173, "node_id": "MDQ6VXNlcjEyMDYxNzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1206173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/techraf", "html_url": "https://github.com/techraf", "followers_url": "https://api.github.com/users/techraf/followers", "following_url": "https://api.github.com/users/techraf/following{/other_user}", "gists_url": "https://api.github.com/users/techraf/gists{/gist_id}", "starred_url": "https://api.github.com/users/techraf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/techraf/subscriptions", "organizations_url": "https://api.github.com/users/techraf/orgs", "repos_url": "https://api.github.com/users/techraf/repos", "events_url": "https://api.github.com/users/techraf/events{/privacy}", "received_events_url": "https://api.github.com/users/techraf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-10-01T09:52:16Z", "updated_at": "2016-10-04T03:11:32Z", "closed_at": "2016-10-03T18:01:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Situation\n\nI have:\n- \"development\" roles in: `~/molecule/`\n- \"production\" roles in: `/usr/local/etc/ansible/roles/` (synchronised with Git)\n\nMy global `ansible.cfg` points to `/usr/local/etc/ansible/roles/` and Molecule (by design) maintains its own `.molecule/ansible.cfg` with: `roles_path      = .molecule/roles:.molecule/../roles:../:../../`.\n## Problem\n\nDuring the verification phase, Molecule executes:\n\n```\n/usr/local/bin/ansible-lint playbook.yml\n```\n\n`ansible-lint` has no clue about `.molecule/ansible.cfg` and checks `my-role` in the globally defined path `/usr/local/etc/ansible/roles/`, not the one in the Molecule project directory (i.e. not from the `./../`.\n\nMoreover, if `ansible-lint` can't find the role specified in the `playbook.yml` it gracefully exits with return code `0`.\n## Workaround\n\n<strike>Create an additional `ansible.cfg` in the Molecule project directory (not under `.molecule` subdirectory) with `roles_path` pointing to `..`</strike>\n\nSetting the value of `ANSIBLE_CONFIG` temporarily when calling `molecule`. Namely creating an alias:\n\n```\nalias molecule=\"ANSIBLE_CONFIG=.molecule/ansible.cfg molecule\"\n```\n## Possible fixes\n- <strike>Call `/usr/local/bin/ansible-lint` after `chdir` to `.molecule` and call it against `../playbook.yml` (?)</strike>\n- Add the `-r` option to Ansible Lint call ...except that... it does not seem to work (!)\n- Call `ansible-lint` setting the value of `ANSIBLE_CONFIG` first:\n  \n  ```\n  ANSIBLE_CONFIG=.molecule/ansible.cfg /usr/local/bin/ansible-lint playbook.yml\n  ```\n## Other remarks\n\nThe only situation in which Molecule and Ansible Lint work correctly together is when the global `ansible.cfg` contains a reference to the directory containing Molecule projects (which might be true for many, but was not the case for me with the \"development\" and \"production\" split).\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/512/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/512/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/505", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/505/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/505/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/505/events", "html_url": "https://github.com/ansible-community/molecule/issues/505", "id": 179570027, "node_id": "MDU6SXNzdWUxNzk1NzAwMjc=", "number": 505, "title": "Error with ansible lint", "user": {"login": "fabMrc", "id": 11136019, "node_id": "MDQ6VXNlcjExMTM2MDE5", "avatar_url": "https://avatars.githubusercontent.com/u/11136019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fabMrc", "html_url": "https://github.com/fabMrc", "followers_url": "https://api.github.com/users/fabMrc/followers", "following_url": "https://api.github.com/users/fabMrc/following{/other_user}", "gists_url": "https://api.github.com/users/fabMrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/fabMrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fabMrc/subscriptions", "organizations_url": "https://api.github.com/users/fabMrc/orgs", "repos_url": "https://api.github.com/users/fabMrc/repos", "events_url": "https://api.github.com/users/fabMrc/events{/privacy}", "received_events_url": "https://api.github.com/users/fabMrc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-09-27T18:09:40Z", "updated_at": "2017-03-17T16:19:06Z", "closed_at": "2016-09-28T19:47:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\n\nI used molecule verify and it throw a console error\nMore generally when it run the complete test lifecycle it break the workflow when idempotence or lint failed I think it is not clean. It should end the cycle, destroy docker images and make a report instead.\nI am not really agree with the idea to force usage of lint because of some false positive and it exists software specialised like sonarQube for that.\nignore options does not work also\n\n[ANSIBLE0011] All tasks should be named\n/home/vagrant/global-resources/roles/artifacts-provider/tasks/nexus-provider-task.yml:2\nTask/Handler: set_fact outer_loop={{item}}\n\n[ANSIBLE0011] All tasks should be named\n/home/vagrant/global-resources/roles/artifacts-provider/tasks/nexus-provider-task.yml:23\nTask/Handler: include_vars {{ item }}\n\n[ANSIBLE0011] All tasks should be named\n/home/vagrant/global-resources/roles/artifacts-provider/tasks/nexus-provider-task.yml:44\nTask/Handler: set_fact artifacts={{mvn_result.dest}} {{artifacts | default()}}\n\nTraceback (most recent call last):\n  File \"/bin/molecule\", line 11, in <module>\n    sys.exit(main())\n  File \"/usr/lib/python2.7/site-packages/molecule/cli.py\", line 68, in main\n    CLI().main()\n  File \"/usr/lib/python2.7/site-packages/molecule/cli.py\", line 64, in main\n    util.sysexit(c.execute()[0])\n  File \"/usr/lib/python2.7/site-packages/molecule/command/test.py\", line 65, in execute\n    status, output = c.execute(exit=False)\n  File \"/usr/lib/python2.7/site-packages/molecule/command/verify.py\", line 59, in execute\n    v.execute()\n  File \"/usr/lib/python2.7/site-packages/molecule/verifier/ansible_lint.py\", line 50, in execute\n    sh.ansible_lint(self._playbook, _out=LOG.info, _err=LOG.error)\n  File \"/usr/lib/python2.7/site-packages/sh.py\", line 1021, in __call__\n    return RunningCommand(cmd, call_args, stdin, stdout, stderr)\n  File \"/usr/lib/python2.7/site-packages/sh.py\", line 486, in **init**\n    self.wait()\n  File \"/usr/lib/python2.7/site-packages/sh.py\", line 500, in wait\n    self.handle_command_exit_code(exit_code)\n  File \"/usr/lib/python2.7/site-packages/sh.py\", line 516, in handle_command_exit_code\n    raise exc(self.ran, self.process.stdout, self.process.stderr)\nsh.ErrorReturnCode_2:\n\n  RAN: '/bin/ansible-lint tests/nexus/test_nexus-provider.yml'\n\n  STDOUT:\n\n  STDERR:\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/505/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/505/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/496", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/496/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/496/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/496/events", "html_url": "https://github.com/ansible-community/molecule/issues/496", "id": 178483220, "node_id": "MDU6SXNzdWUxNzg0ODMyMjA=", "number": 496, "title": "Testinfra doesn't pass the sudo option", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-09-21T23:01:10Z", "updated_at": "2016-09-22T00:34:51Z", "closed_at": "2016-09-22T00:25:52Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The sudo option does not get passed to testinfra?\n\n```\nverifier:\n  name: testinfra\n  options:\n    sudo: True\n    v: True\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/496/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/496/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/492", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/492/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/492/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/492/events", "html_url": "https://github.com/ansible-community/molecule/issues/492", "id": 177469856, "node_id": "MDU6SXNzdWUxNzc0Njk4NTY=", "number": 492, "title": "molecule status doesn't report all platforms when run with --platform all", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-09-16T16:42:00Z", "updated_at": "2016-09-27T23:08:21Z", "closed_at": "2016-09-27T23:08:21Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Molecule status doesn't diaplay all platforms when `molecule create --platform centos7` was executed. \n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/492/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/490", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/490/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/490/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/490/events", "html_url": "https://github.com/ansible-community/molecule/issues/490", "id": 177439330, "node_id": "MDU6SXNzdWUxNzc0MzkzMzA=", "number": 490, "title": "Using \"--platform\" argument fails in 1.11.0", "user": {"login": "techraf", "id": 1206173, "node_id": "MDQ6VXNlcjEyMDYxNzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1206173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/techraf", "html_url": "https://github.com/techraf", "followers_url": "https://api.github.com/users/techraf/followers", "following_url": "https://api.github.com/users/techraf/following{/other_user}", "gists_url": "https://api.github.com/users/techraf/gists{/gist_id}", "starred_url": "https://api.github.com/users/techraf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/techraf/subscriptions", "organizations_url": "https://api.github.com/users/techraf/orgs", "repos_url": "https://api.github.com/users/techraf/repos", "events_url": "https://api.github.com/users/techraf/events{/privacy}", "received_events_url": "https://api.github.com/users/techraf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-09-16T14:28:02Z", "updated_at": "2016-09-16T17:49:42Z", "closed_at": "2016-09-16T17:27:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Whenever a `--platform` argument is added, Molecule 1.11.0 seems to fail:\n\n```\n# molecule create --platform osx\n--> Creating instances ...\nTraceback (most recent call last):\n  File \"/usr/local/bin/molecule\", line 11, in <module>\n    sys.exit(main())\n  File \"/usr/local/lib/python2.7/site-packages/molecule/cli.py\", line 68, in main\n    CLI().main()\n  File \"/usr/local/lib/python2.7/site-packages/molecule/cli.py\", line 64, in main\n    util.sysexit(c.execute()[0])\n  File \"/usr/local/lib/python2.7/site-packages/molecule/command/create.py\", line 55, in execute\n    self.molecule.driver.up(no_provision=True)\n  File \"/usr/local/lib/python2.7/site-packages/molecule/driver/vagrantdriver.py\", line 131, in up\n    self._populate_platform_instances()\n  File \"/usr/local/lib/python2.7/site-packages/molecule/driver/vagrantdriver.py\", line 190, in _populate_platform_instances\n    1) and (self.molecule.args['--platform'] == 'all'\nTypeError: object of type 'bool' has no len()\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/490/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/490/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/489", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/489/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/489/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/489/events", "html_url": "https://github.com/ansible-community/molecule/issues/489", "id": 177428396, "node_id": "MDU6SXNzdWUxNzc0MjgzOTY=", "number": 489, "title": "Molecule create throws error using Docker on macOS", "user": {"login": "yveslaroche", "id": 1151977, "node_id": "MDQ6VXNlcjExNTE5Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1151977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yveslaroche", "html_url": "https://github.com/yveslaroche", "followers_url": "https://api.github.com/users/yveslaroche/followers", "following_url": "https://api.github.com/users/yveslaroche/following{/other_user}", "gists_url": "https://api.github.com/users/yveslaroche/gists{/gist_id}", "starred_url": "https://api.github.com/users/yveslaroche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yveslaroche/subscriptions", "organizations_url": "https://api.github.com/users/yveslaroche/orgs", "repos_url": "https://api.github.com/users/yveslaroche/repos", "events_url": "https://api.github.com/users/yveslaroche/events{/privacy}", "received_events_url": "https://api.github.com/users/yveslaroche/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-09-16T13:40:48Z", "updated_at": "2016-11-14T16:28:58Z", "closed_at": "2016-09-16T16:37:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using:\n- Python 2.7.12\n- Molecule 1.11.0\n- Docker 1.12.1 (Docker for Mac)\n\n``` sh\n\u276f molecule init foo --docker && cd foo\n--> Initializing role foo...\nSuccessfully initialized new role in /Users/yves.laroche/Desktop/foo...\n\n~/Desktop/foo\n\u276f molecule create\n--> Creating instances ...\nTraceback (most recent call last):\n  File \"/usr/local/bin/molecule\", line 11, in <module>\n    sys.exit(main())\n  File \"/usr/local/lib/python2.7/site-packages/molecule/cli.py\", line 68, in main\n    CLI().main()\n  File \"/usr/local/lib/python2.7/site-packages/molecule/cli.py\", line 64, in main\n    util.sysexit(c.execute()[0])\n  File \"/usr/local/lib/python2.7/site-packages/molecule/command/create.py\", line 55, in execute\n    self.molecule.driver.up(no_provision=True)\n  File \"/usr/local/lib/python2.7/site-packages/molecule/driver/dockerdriver.py\", line 113, in up\n    self._build_ansible_compatible_image()\n  File \"/usr/local/lib/python2.7/site-packages/molecule/driver/dockerdriver.py\", line 216, in _build_ansible_compatible_image\n    for tag in image.get('RepoTags')]\nTypeError: 'NoneType' object is not iterable\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/489/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/466", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/466/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/466/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/466/events", "html_url": "https://github.com/ansible-community/molecule/issues/466", "id": 176424544, "node_id": "MDU6SXNzdWUxNzY0MjQ1NDQ=", "number": 466, "title": "`molecule status` raises IndexError when container is stopped", "user": {"login": "keyboardscience", "id": 9435271, "node_id": "MDQ6VXNlcjk0MzUyNzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9435271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keyboardscience", "html_url": "https://github.com/keyboardscience", "followers_url": "https://api.github.com/users/keyboardscience/followers", "following_url": "https://api.github.com/users/keyboardscience/following{/other_user}", "gists_url": "https://api.github.com/users/keyboardscience/gists{/gist_id}", "starred_url": "https://api.github.com/users/keyboardscience/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keyboardscience/subscriptions", "organizations_url": "https://api.github.com/users/keyboardscience/orgs", "repos_url": "https://api.github.com/users/keyboardscience/repos", "events_url": "https://api.github.com/users/keyboardscience/events{/privacy}", "received_events_url": "https://api.github.com/users/keyboardscience/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-09-12T16:42:55Z", "updated_at": "2016-09-22T20:39:58Z", "closed_at": "2016-09-22T20:27:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "`molecule status` raises an uncaught `IndexError` when container is stopped.\n\n Fix entails adding `all=True` to the `self._docker.containers(filters={'name': name})...` call in `molecule/drivers/dockerdriver.py:176`.\n\nI'm working on the PR to fix, but I could some advice on how best to test. Here is what I have so far:\n\n```\ndef test_status_when_stopped(docker_instance):\n    ''' Test docker_instance.status when test subject -- container -- is stopped or exited '''\n    docker_instance.up()\n    docker_instance._docker.stop(container='test1')\n\n    assert 'Exited' in docker_instance.status()[0].state\n```\n\nTo reproduce:\n\n```\n> docker stop test-01 && molecule -v && molecule status\n1.11.0\nTraceback (most recent call last):\n  File \"/usr/local/bin/molecule\", line 11, in <module>\n    sys.exit(main())\n  File \"/Library/Python/2.7/site-packages/molecule/cli.py\", line 68, in main\n    CLI().main()\n  File \"/Library/Python/2.7/site-packages/molecule/cli.py\", line 64, in main\n    util.sysexit(c.execute()[0])\n  File \"/Library/Python/2.7/site-packages/molecule/command/status.py\", line 57, in execute\n    status = self.molecule.driver.status()\n  File \"/Library/Python/2.7/site-packages/molecule/driver/dockerdriver.py\", line 176, in status\n    cd = self._docker.containers(filters={'name': name})[0]\nIndexError: list index out of range\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/466/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/466/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/459", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/459/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/459/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/459/events", "html_url": "https://github.com/ansible-community/molecule/issues/459", "id": 176099704, "node_id": "MDU6SXNzdWUxNzYwOTk3MDQ=", "number": 459, "title": "Docker driver renders inventory file with `connection=docker` rather than `ansible_connection=docker`", "user": {"login": "keyboardscience", "id": 9435271, "node_id": "MDQ6VXNlcjk0MzUyNzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9435271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keyboardscience", "html_url": "https://github.com/keyboardscience", "followers_url": "https://api.github.com/users/keyboardscience/followers", "following_url": "https://api.github.com/users/keyboardscience/following{/other_user}", "gists_url": "https://api.github.com/users/keyboardscience/gists{/gist_id}", "starred_url": "https://api.github.com/users/keyboardscience/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keyboardscience/subscriptions", "organizations_url": "https://api.github.com/users/keyboardscience/orgs", "repos_url": "https://api.github.com/users/keyboardscience/repos", "events_url": "https://api.github.com/users/keyboardscience/events{/privacy}", "received_events_url": "https://api.github.com/users/keyboardscience/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-09-09T20:17:50Z", "updated_at": "2016-09-09T22:37:26Z", "closed_at": "2016-09-09T22:37:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "The docker driver renders out `connection=docker` within `.molecule/ansible_inventory`. The variable should be `ansible_connection=...` so a `ansible.executor.task_queue_manager.TaskQueueManager` can pick up the connection type. Without the ansible_connection inventory variable testinfra falls back on the paramiko backend to connect, which doesn't work for containers.  I'm using molecule in conjunction with pytest and would like to be able to run tests without invoking `molecule verify`. It does not affect `molecule verify` because the command runs testinfra with a `--connection` flag rather than reading the inventory file to determine connection type. \n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/459/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/440", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/440/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/440/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/440/events", "html_url": "https://github.com/ansible-community/molecule/issues/440", "id": 174931940, "node_id": "MDU6SXNzdWUxNzQ5MzE5NDA=", "number": 440, "title": "Idempotence plugin doesn't work", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-09-04T05:14:15Z", "updated_at": "2016-09-04T22:36:25Z", "closed_at": "2016-09-04T22:17:37Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "It doesn't work for 1.9.6 nor does it work with Ansible 2.x.\n### 2.0\n\n`runner_on_ok` is actually `v2_runner_on_ok` with a different method signature.\n\nAlso, does not report any changes.\n### 1.9\n\nDoes not report changes being made.\n\n```\nPLAY [example-group] **********************************************************\n\nGATHERING FACTS ***************************************************************\nok: [test-scenario-01]\nok: [test-scenario-02]\n\nTASK: [shell echo 'hi'] *******************************************************\nchanged: [test-scenario-02]\nchanged: [test-scenario-01]\n\nTASK: [shell echo 'what'] *****************************************************\nchanged: [test-scenario-02]\nchanged: [test-scenario-01]\n\nPLAY RECAP ********************************************************************\nshell echo 'what'\ntest-scenario-01           : ok=3    changed=2    unreachable=0    failed=0\ntest-scenario-02           : ok=3    changed=2    unreachable=0    failed=0\n```\n\nSomething is causing `playbook_on_stats` to report the instance methods storing the state as empty.\n\nThese issues are somewhat related #437 and #291.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/440/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/440/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/437", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/437/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/437/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/437/events", "html_url": "https://github.com/ansible-community/molecule/issues/437", "id": 174920485, "node_id": "MDU6SXNzdWUxNzQ5MjA0ODU=", "number": 437, "title": "Idempotence test failed.", "user": {"login": "skitoo", "id": 493610, "node_id": "MDQ6VXNlcjQ5MzYxMA==", "avatar_url": "https://avatars.githubusercontent.com/u/493610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skitoo", "html_url": "https://github.com/skitoo", "followers_url": "https://api.github.com/users/skitoo/followers", "following_url": "https://api.github.com/users/skitoo/following{/other_user}", "gists_url": "https://api.github.com/users/skitoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/skitoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skitoo/subscriptions", "organizations_url": "https://api.github.com/users/skitoo/orgs", "repos_url": "https://api.github.com/users/skitoo/repos", "events_url": "https://api.github.com/users/skitoo/events{/privacy}", "received_events_url": "https://api.github.com/users/skitoo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-09-03T22:16:14Z", "updated_at": "2016-09-06T12:18:11Z", "closed_at": "2016-09-04T22:17:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\n- Python version: 2.7.12\n- Molecule version : 1.9.1\n- Distribution : archlinux\n\nI want to install docker via ansible and when I do that, I have on error:\n\n```\nIdempotence test failed.\nThe idempotence plugin was not found or did not provide the required information. Therefore the failure details cannot be displayed.\n```\n\nIf I remove docker installation into my Ansible config, molecule run correctly.\nI run molecule into a virtualenv and the following files exists in my virtualenv:\n- share/molecule/ansible/plugins/callback/idempotence\n- etc/bash_completion.d/molecule.bash-completion.sh\n\nI have a Github repository with a PullRequest where you can find my code : https://github.com/skitoo/bender/pull/1\nAs you can see, when travis computes my code, it indicates same error : https://travis-ci.org/skitoo/bender/builds/15736796\n\nThank you.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/437/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/437/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/432", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/432/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/432/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/432/events", "html_url": "https://github.com/ansible-community/molecule/issues/432", "id": 174722350, "node_id": "MDU6SXNzdWUxNzQ3MjIzNTA=", "number": 432, "title": "ValueError: ids must be list of strings, found: 'docker://zabbix-agent-centos' (type: unicode)", "user": {"login": "dj-wasabi", "id": 1171720, "node_id": "MDQ6VXNlcjExNzE3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1171720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dj-wasabi", "html_url": "https://github.com/dj-wasabi", "followers_url": "https://api.github.com/users/dj-wasabi/followers", "following_url": "https://api.github.com/users/dj-wasabi/following{/other_user}", "gists_url": "https://api.github.com/users/dj-wasabi/gists{/gist_id}", "starred_url": "https://api.github.com/users/dj-wasabi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dj-wasabi/subscriptions", "organizations_url": "https://api.github.com/users/dj-wasabi/orgs", "repos_url": "https://api.github.com/users/dj-wasabi/repos", "events_url": "https://api.github.com/users/dj-wasabi/events{/privacy}", "received_events_url": "https://api.github.com/users/dj-wasabi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-09-02T09:52:32Z", "updated_at": "2016-09-03T18:29:18Z", "closed_at": "2016-09-03T18:28:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\n\nI've installed the latest molecule version, but when running  verify I get the following error:\n\n```\n (master) $ molecule verify\nWARNING:vagrant:The Vagrant executable cannot be found. Please check if it is in the system path.\n--> Executing ansible-lint.\n--> Executing flake8 on *.py files found in tests/.\n--> Executing testinfra tests found in tests/.\n============================= test session starts ==============================\nplatform linux2 -- Python 2.7.5, pytest-3.0.2, py-1.4.31, pluggy-0.3.1\nrootdir: /git/ansible/ansible-zabbix-agent, inifile:\nplugins: cov-2.3.1, xdist-1.14, testinfra-1.4.1\ncollected 0 items / 1 errorss\n\n==================================== ERRORS ====================================\n____________________ ERROR collecting tests/test_docker.py _____________________\n/usr/lib/python2.7/site-packages/testinfra/plugin.py:128: in pytest_generate_tests\n    \"_testinfra_backend\", params, ids=ids, scope=\"module\")\n/usr/lib/python2.7/site-packages/_pytest/python.py:837: in parametrize\n    raise ValueError(msg % (saferepr(id_value), type(id_value).__name__))\nE   ValueError: ids must be list of strings, found: 'docker://zabbix-agent-centos' (type: unicode)\n============================ pytest-warning summary ============================\nWP1 None Modules are already imported so can not be re-written: testinfra\n!!!!!!!!!!!!!!!!!!! Interrupted: 1 errors during collection !!!!!!!!!!!!!!!!!!!!\n================== 1 pytest-warnings, 1 error in 0.41 seconds ==================\nERROR: \n\n  RAN: '/usr/bin/testinfra tests/test_docker.py --connection=docker'\n\n  STDOUT:\n\n\n  STDERR:\nvagrant@localhost [ /git/ansible/ansible-zabbix-agent -- Fri Sep 02 11:49:23 ]\n (master) $ molecule --version\nWARNING:vagrant:The Vagrant executable cannot be found. Please check if it is in the system path.\n1.10.0\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/432/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/432/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/397", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/397/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/397/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/397/events", "html_url": "https://github.com/ansible-community/molecule/issues/397", "id": 172773035, "node_id": "MDU6SXNzdWUxNzI3NzMwMzU=", "number": 397, "title": "Role path incorrect when using requirements_file on 1.9 molecule", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-08-23T18:33:02Z", "updated_at": "2016-08-23T20:07:23Z", "closed_at": "2016-08-23T20:07:23Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The role path is not set correctly when using a requirements_file in ansible.cfg.  Ansible is unable to find a path to the role.\n\n```\nERROR! the role 'yatesr.timezone' was not found in /Users/jodewey/git/molecule/test/functional/driver/docker/scenarios/command_test/roles:/Users/jodewey/git/molecule/test/functional/driver/docker/scenarios/command_test:/Users/jodewey/git/molecule/test/functional/driver/roles:/Users/jodewey/git/molecule/test/functional/roles\n\nThe error appears to have been in '/Users/jodewey/git/molecule/test/functional/driver/docker/scenarios/command_test/playbook.yml': line 4, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n  roles:\n    - role: yatesr.timezone\n      ^ here\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/397/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/397/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/395", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/395/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/395/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/395/events", "html_url": "https://github.com/ansible-community/molecule/issues/395", "id": 172763679, "node_id": "MDU6SXNzdWUxNzI3NjM2Nzk=", "number": 395, "title": "Converge --debug bug with 1.9 release", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-08-23T17:51:38Z", "updated_at": "2016-08-23T18:26:55Z", "closed_at": "2016-08-23T18:26:55Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Failure with `molecule converge --debug`\n\n```\nTraceback (most recent call last):\n  File \"/Users/jodewey/.homebrew/bin/molecule\", line 10, in <module>\n    sys.exit(main())\n  File \"/Users/jodewey/git/molecule/molecule/cli.py\", line 68, in main\n    CLI().main()\n  File \"/Users/jodewey/git/molecule/molecule/cli.py\", line 64, in main\n    util.sysexit(c.execute()[0])\n  File \"/Users/jodewey/git/molecule/molecule/command/converge.py\", line 136, in execute\n    util.debug('ANSIBLE PLAYBOOK', str(ansible.ansible))\nAttributeError: 'AnsiblePlaybook' object has no attribute 'ansible'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/395/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/381", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/381/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/381/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/381/events", "html_url": "https://github.com/ansible-community/molecule/issues/381", "id": 171976432, "node_id": "MDU6SXNzdWUxNzE5NzY0MzI=", "number": 381, "title": "defining `['test']['sequence']` seems to be ignored: atleast when driver is openstack", "user": {"login": "rjfellman", "id": 1470216, "node_id": "MDQ6VXNlcjE0NzAyMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1470216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rjfellman", "html_url": "https://github.com/rjfellman", "followers_url": "https://api.github.com/users/rjfellman/followers", "following_url": "https://api.github.com/users/rjfellman/following{/other_user}", "gists_url": "https://api.github.com/users/rjfellman/gists{/gist_id}", "starred_url": "https://api.github.com/users/rjfellman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rjfellman/subscriptions", "organizations_url": "https://api.github.com/users/rjfellman/orgs", "repos_url": "https://api.github.com/users/rjfellman/repos", "events_url": "https://api.github.com/users/rjfellman/events{/privacy}", "received_events_url": "https://api.github.com/users/rjfellman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-08-18T19:05:18Z", "updated_at": "2016-08-28T01:30:40Z", "closed_at": "2016-08-19T19:53:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've got a custom test sequence on a role, leaving idempotence out but it is still tested. This wasn't the case in the last release I used though `1.8.2` \n\n```\n  # sequence of commands to run when performing `molecule test`\n  test:\n    sequence:\n      - destroy\n      - create \n      - converge\n      - verify\n      - destroy\n\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/381/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/381/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/355", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/355/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/355/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/355/events", "html_url": "https://github.com/ansible-community/molecule/issues/355", "id": 170996374, "node_id": "MDU6SXNzdWUxNzA5OTYzNzQ=", "number": 355, "title": "Status returns empty on vagrant driver when .molecule dir doesn't exist", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-08-13T06:43:16Z", "updated_at": "2016-08-15T15:34:25Z", "closed_at": "2016-08-15T15:34:25Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "When the .molecule directory doesn't exist, the `molecule status` command returns empty.  This issue turned up since we implemented #349, and I happened to remove the `.vagrant/` and `.molecule/` directories while implementing another feature.\n\n```\n[jodewey:~/git/molecule/tests/functional/vagrant/scenarios/full] bug-345(+1/-0)+ 1 \u00b1 molecule status\n\n[jodewey:~/git/molecule/tests/functional/vagrant/scenarios/full] bug-345+* 1 \u00b1 pwd\n/Users/jodewey/git/molecule/tests/functional/vagrant/scenarios/full\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/355/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/355/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/350", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/350/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/350/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/350/events", "html_url": "https://github.com/ansible-community/molecule/issues/350", "id": 170981717, "node_id": "MDU6SXNzdWUxNzA5ODE3MTc=", "number": 350, "title": "Docker test_port_bindings unit tests fail on occasion", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-08-13T00:13:42Z", "updated_at": "2016-08-13T22:58:18Z", "closed_at": "2016-08-13T22:58:18Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The `test_port_bindings` docker [unit test](https://github.com/metacloud/molecule/blob/master/tests/unit/provisioner/test_dockerprovisioner.py#L102-L118) fails on occasion.\n\nI believe this is due to the test relying on the order of the dict.  Since dicts are unordered, we see spurious failures.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/350/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/345", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/345/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/345/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/345/events", "html_url": "https://github.com/ansible-community/molecule/issues/345", "id": 170769704, "node_id": "MDU6SXNzdWUxNzA3Njk3MDQ=", "number": 345, "title": "Ansible 1.9 syntax sub command fails", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2016-08-11T23:23:57Z", "updated_at": "2016-08-13T22:59:13Z", "closed_at": "2016-08-13T22:59:13Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Ansible 1.9 syntax subcommand fails.  Discovered this bug while writing tests for #344.\n\n```\n--> Checking playbooks syntax ...\nERROR: Unable to find an inventory file, specify one with -i ?\nNone\nERROR: InvocationError: '/Users/jodewey/git/molecule/tests/functional/test.bash'\n```\n\nThis seems to occur on occasion.  Haven't figured out what is triggering the bug.  Fails on occasion when running `tox` only with the `py27-ansible19-functional` environment.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/345/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/341", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/341/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/341/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/341/events", "html_url": "https://github.com/ansible-community/molecule/issues/341", "id": 170297268, "node_id": "MDU6SXNzdWUxNzAyOTcyNjg=", "number": 341, "title": "GalaxyInstall installs roles into wrong directory", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-08-09T23:46:37Z", "updated_at": "2016-08-12T18:44:04Z", "closed_at": "2016-08-12T18:44:03Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Roles are installed into .molecule/.molecule/roles/ by default.  Should be .molecule/roles.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/341/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/341/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/339", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/339/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/339/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/339/events", "html_url": "https://github.com/ansible-community/molecule/issues/339", "id": 170097749, "node_id": "MDU6SXNzdWUxNzAwOTc3NDk=", "number": 339, "title": "`molecule status` should also work if no instances created yet", "user": {"login": "tknerr", "id": 365744, "node_id": "MDQ6VXNlcjM2NTc0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/365744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tknerr", "html_url": "https://github.com/tknerr", "followers_url": "https://api.github.com/users/tknerr/followers", "following_url": "https://api.github.com/users/tknerr/following{/other_user}", "gists_url": "https://api.github.com/users/tknerr/gists{/gist_id}", "starred_url": "https://api.github.com/users/tknerr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tknerr/subscriptions", "organizations_url": "https://api.github.com/users/tknerr/orgs", "repos_url": "https://api.github.com/users/tknerr/repos", "events_url": "https://api.github.com/users/tknerr/events{/privacy}", "received_events_url": "https://api.github.com/users/tknerr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-08-09T07:16:21Z", "updated_at": "2016-08-12T17:34:40Z", "closed_at": "2016-08-12T17:34:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Not sure if something is running already, so the first thing I do is `molecule status`, but:\n\n```\n$ molecule status\nERROR: No instances created. Try `molecule create` first.\n```\n\nshould display status imho an tell us status is \"not created\"\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/339/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/334", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/334/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/334/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/334/events", "html_url": "https://github.com/ansible-community/molecule/issues/334", "id": 169499628, "node_id": "MDU6SXNzdWUxNjk0OTk2Mjg=", "number": 334, "title": "`molecule test` runs testinfra, but `molecule verify` does not", "user": {"login": "tknerr", "id": 365744, "node_id": "MDQ6VXNlcjM2NTc0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/365744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tknerr", "html_url": "https://github.com/tknerr", "followers_url": "https://api.github.com/users/tknerr/followers", "following_url": "https://api.github.com/users/tknerr/following{/other_user}", "gists_url": "https://api.github.com/users/tknerr/gists{/gist_id}", "starred_url": "https://api.github.com/users/tknerr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tknerr/subscriptions", "organizations_url": "https://api.github.com/users/tknerr/orgs", "repos_url": "https://api.github.com/users/tknerr/repos", "events_url": "https://api.github.com/users/tknerr/events{/privacy}", "received_events_url": "https://api.github.com/users/tknerr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-08-04T23:47:31Z", "updated_at": "2018-10-29T19:40:01Z", "closed_at": "2016-08-22T17:22:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Another weird corner case:\n- there is a whitespace issue in a dependency cookbook, which I cant easily fix\n- when I run `molecule test`, the whitespace issue is reported and after that testinfra runs\n- however, when I run `molecule converge` + `molecule verify` it exits early on the whitespace issue and does not run testinfra anymore\n\nRelated code is here:\nhttps://github.com/metacloud/molecule/blob/master/molecule/commands/verify.py#L57\n\nBoth make sense somehow, but the behaviour is currently not consistent. Imho the default should be to fail late as when `molecule test` is run. Maybe a `--fail-early` flag or similar would be needed for the other case?\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/332", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/332/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/332/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/332/events", "html_url": "https://github.com/ansible-community/molecule/issues/332", "id": 169407160, "node_id": "MDU6SXNzdWUxNjk0MDcxNjA=", "number": 332, "title": "Molecule checks playbook syntax too early (before requirement.yml is resolved)", "user": {"login": "tknerr", "id": 365744, "node_id": "MDQ6VXNlcjM2NTc0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/365744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tknerr", "html_url": "https://github.com/tknerr", "followers_url": "https://api.github.com/users/tknerr/followers", "following_url": "https://api.github.com/users/tknerr/following{/other_user}", "gists_url": "https://api.github.com/users/tknerr/gists{/gist_id}", "starred_url": "https://api.github.com/users/tknerr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tknerr/subscriptions", "organizations_url": "https://api.github.com/users/tknerr/orgs", "repos_url": "https://api.github.com/users/tknerr/repos", "events_url": "https://api.github.com/users/tknerr/events{/privacy}", "received_events_url": "https://api.github.com/users/tknerr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-08-04T15:46:16Z", "updated_at": "2016-08-12T17:44:48Z", "closed_at": "2016-08-12T17:44:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using a `requirements.yml` like that:\n\n``` yaml\n\n---\n- name: timezone\n  src: yatesr.timezone\n```\n\nWith this `molecule.yml`:\n\n``` yaml\n\n---\n#\n# see here for the possible configuration options:\n# https://molecule.readthedocs.io/en/master/usage.html#configuration\n#\n\n# configure serverspec and testinfra directories\nmolecule:\n  serverspec_dir: disabled\n  testinfra_dir: spec\n\n# force the ssh connection\ntestinfra:\n  connection: ssh\n  hosts: helloworld\n  ssh-config: .vagrant/ssh-config\n  spec: yes\n\n# ansible specific configuration, disabling SSH connection sharing\nansible:\n  playbook: site.yml\n  verbose: vvvv\n  requirements_file: requirements.yml\n  raw_ssh_args:\n    - -o UserKnownHostsFile=/dev/null\n    - -o IdentitiesOnly=yes\n    - -o ControlMaster=no\n\n# vagrant and instances configuration\nvagrant:\n  raw_config_args:\n    - \"ssh.insert_key = false\"\n  platforms:\n    - name: ubuntu1604\n      box: bento/ubuntu-16.04\n  providers:\n    - name: virtualbox\n      type: virtualbox\n      options:\n        name: '\"molecule-helloworld\"'\n        memory: 512\n        cpus: 2\n  instances:\n    - name: helloworld\n      options:\n        append_platform_to_hostname: no\n\n```\n\nWhen I run `molecule test`, it fails because it can not find the \"timezone\" dependency role:\n\n```\nY:\\repo\\devops\\devops-acceptance-tests\\vagrant-ansible>molecule test\n--> Destroying instances ...\n--> Checking playbooks syntax ...\nUsing .molecule/ansible.cfg as config file\nERROR! the role 'timezone' was not found in /cygdrive/y/repo/devops/devops-acceptance-tests/vagrant-ansible/roles:/cygdrive/y/repo/devops/devops-acceptance-tests/vagrant-ansible:./roles\n\nThe error appears to have been in '/cygdrive/y/repo/devops/devops-acceptance-tests/vagrant-ansible/site.yml': line 4, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n  roles:\n    - timezone\n      ^ here\n\nNone\n```\n\nImho it should first resolve the dependecies via `ansible-galaxy`, then check the playbook syntax.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/332/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/332/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/311", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/311/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/311/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/311/events", "html_url": "https://github.com/ansible-community/molecule/issues/311", "id": 168779076, "node_id": "MDU6SXNzdWUxNjg3NzkwNzY=", "number": 311, "title": "Syntax check broken on ansible 1.9.6.", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-08-02T01:24:15Z", "updated_at": "2016-08-02T03:01:55Z", "closed_at": "2016-08-02T03:01:55Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "#310 Introduced a vagrant init functional test.  This appears to be broken in ansible 1.9.6 when checking playbook syntax.\n\n```\n### Vagrant driver\n### Testing -> /Users/jodewey/git/molecule/tests/functional/vagrant/test_command_init.bash\n--> Initializing role foo...\nSuccessfully initialized new role in ./foo\n--> Destroying instances ...\n--> Checking playbooks syntax ...\nERROR: Unable to find an inventory file, specify one with -i ?\nNone\nERROR: InvocationError: '/Users/jodewey/git/molecule/tests/functional/test.bash'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/311/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/300", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/300/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/300/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/300/events", "html_url": "https://github.com/ansible-community/molecule/issues/300", "id": 168502550, "node_id": "MDU6SXNzdWUxNjg1MDI1NTA=", "number": 300, "title": "Ability to target docker hosts", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-07-31T05:28:26Z", "updated_at": "2019-02-07T15:37:04Z", "closed_at": "2016-08-02T23:03:51Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "We cannot [target](https://github.com/metacloud/molecule/blob/master/demo/molecule/tests/test_demo1.py#L1-Lundefined) docker hosts in testinfra like we can when using the ansible backend.\nThis was discovered while creating #298.\n\nThe problem is due to our docker driver passing all hosts to testinfra via the `--hosts` flag.  This forces all test files to execute across all hosts.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/300/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/300/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/299", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/299/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/299/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/299/events", "html_url": "https://github.com/ansible-community/molecule/issues/299", "id": 168489280, "node_id": "MDU6SXNzdWUxNjg0ODkyODA=", "number": 299, "title": "Molecule tests broken in ansible v1.9.x", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}, {"id": 288133123, "node_id": "MDU6TGFiZWwyODgxMzMxMjM=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2016-07-30T22:04:37Z", "updated_at": "2016-08-01T17:54:16Z", "closed_at": "2016-08-01T17:54:16Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Ansible 1.9.x cannot have a playbook in dict form.  2.x series seems to handle this.  The work performed in #298 discovered this bug.\n\n```\nERROR: playbook.yml: Expecting property name enclosed in double quotes: line 1 column 3 (char 2)\n============================================= 3 failed, 75 passed, 1 skipped, 1 pytest-warnings in 85.54 seconds =============================================\nERROR: InvocationError: '/Users/jodewey/git/molecule/.tox/py27-ansible19-unit/bin/py.test tests/unit/'\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/297", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/297/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/297/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/297/events", "html_url": "https://github.com/ansible-community/molecule/issues/297", "id": 168416938, "node_id": "MDU6SXNzdWUxNjg0MTY5Mzg=", "number": 297, "title": "Molecule broken - ansible v2.1.1.0", "user": {"login": "moh-abk", "id": 7813457, "node_id": "MDQ6VXNlcjc4MTM0NTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7813457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moh-abk", "html_url": "https://github.com/moh-abk", "followers_url": "https://api.github.com/users/moh-abk/followers", "following_url": "https://api.github.com/users/moh-abk/following{/other_user}", "gists_url": "https://api.github.com/users/moh-abk/gists{/gist_id}", "starred_url": "https://api.github.com/users/moh-abk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moh-abk/subscriptions", "organizations_url": "https://api.github.com/users/moh-abk/orgs", "repos_url": "https://api.github.com/users/moh-abk/repos", "events_url": "https://api.github.com/users/moh-abk/events{/privacy}", "received_events_url": "https://api.github.com/users/moh-abk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2016-07-29T21:20:00Z", "updated_at": "2018-10-29T19:40:01Z", "closed_at": "2016-08-02T17:33:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Molecule version: `1.8.3`\nCommand: `molecule test`\n\nThe latest version of molecule is broken. I first tried with my roles and then I cloned the molecule repo and tried with the demo and go the same error.\n\n```\nERROR! the role 'molecule' was not found in /Users/mohammed/Downloads/molecule-master/demo/molecule/roles:/Users/macuser/Downloads/molecule-master/demo/molecule:/Users/macuser/Downloads/molecule-master/demo/molecule/.molecule/.molecule/roles:/Users/macuser/Downloads/molecule-master/demo/molecule\n\nThe error appears to have been in '/Users/macuser/Downloads/molecule-master/demo/molecule/playbook.yml': line 4, column 7, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n  roles:\n    - role: molecule\n      ^ here\n\nNone\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/297/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/297/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/296", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/296/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/296/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/296/events", "html_url": "https://github.com/ansible-community/molecule/issues/296", "id": 168402524, "node_id": "MDU6SXNzdWUxNjg0MDI1MjQ=", "number": 296, "title": "Vagrant tests do not cleanup after themselves", "user": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-07-29T19:59:23Z", "updated_at": "2016-08-01T17:09:44Z", "closed_at": "2016-08-01T17:09:44Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The [vagrant provisioner](https://github.com/metacloud/molecule/blob/master/tests/provisioner/test_vagrantprovisioner.py#L63-L64) tests do not cleanup after themselves.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/296/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/296/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/291", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/291/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/291/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/291/events", "html_url": "https://github.com/ansible-community/molecule/issues/291", "id": 168009500, "node_id": "MDU6SXNzdWUxNjgwMDk1MDA=", "number": 291, "title": "Idempotence plugin was not found or did not provide the required information.", "user": {"login": "pgporada", "id": 2382565, "node_id": "MDQ6VXNlcjIzODI1NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2382565?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgporada", "html_url": "https://github.com/pgporada", "followers_url": "https://api.github.com/users/pgporada/followers", "following_url": "https://api.github.com/users/pgporada/following{/other_user}", "gists_url": "https://api.github.com/users/pgporada/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgporada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgporada/subscriptions", "organizations_url": "https://api.github.com/users/pgporada/orgs", "repos_url": "https://api.github.com/users/pgporada/repos", "events_url": "https://api.github.com/users/pgporada/events{/privacy}", "received_events_url": "https://api.github.com/users/pgporada/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2016-07-28T04:02:10Z", "updated_at": "2016-09-04T22:35:42Z", "closed_at": "2016-09-04T22:17:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Molecule version\n\n```\n1.8.3\n```\n\nHost details\n\n```\nUbuntu 16.04\nLinux laptappy 4.4.0-28-generic #47-Ubuntu SMP Fri Jun 24 10:09:13 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n```\n\nmolecule.yml\n\n```\n\n---\nansible:\n  playbook: tests/test.yml\n\ndocker:\n  containers:\n  - name: ansible-jinja-examples-01\n    ansible_groups:\n      - group1\n    image: centos\n    image_version: latest\n```\n\nI can run `molecule converge` but not `molecule idempotence`. When I try to, I receive the following message.\n\n```\nDEBUG: ANSIBLE ENVIRONMENT\nANSIBLE_CALLBACK_PLUGINS: /usr/share/molecule/ansible/plugins/callback/idempotence\nANSIBLE_CONFIG: .molecule/ansible.cfg\nANSIBLE_FORCE_COLOR: 'false'\nANSIBLE_HOST_KEY_CHECKING: 'false'\nANSIBLE_NOCOLOR: 'true'\nANSIBLE_SSH_ARGS: -o UserKnownHostsFile=/dev/null -o IdentitiesOnly=yes -o ControlMaster=auto\n  -o ControlPersist=60s\n\nDEBUG: ANSIBLE PLAYBOOK\n/usr/local/bin/ansible-playbook tests/test.yml --inventory-file=.molecule/ansible_inventory --sudo --connection=docker --limit=all --user=root --timeout=30 --diff\n--> Starting Ansible Run ...\nIdempotence test failed.\nThe idempotence plugin was not found or did not provide the required information. Therefore the failure details cannot be displayed.\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/291/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/288", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/288/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/288/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/288/events", "html_url": "https://github.com/ansible-community/molecule/issues/288", "id": 167781256, "node_id": "MDU6SXNzdWUxNjc3ODEyNTY=", "number": 288, "title": "Download dependencies ", "user": {"login": "dj-wasabi", "id": 1171720, "node_id": "MDQ6VXNlcjExNzE3MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1171720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dj-wasabi", "html_url": "https://github.com/dj-wasabi", "followers_url": "https://api.github.com/users/dj-wasabi/followers", "following_url": "https://api.github.com/users/dj-wasabi/following{/other_user}", "gists_url": "https://api.github.com/users/dj-wasabi/gists{/gist_id}", "starred_url": "https://api.github.com/users/dj-wasabi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dj-wasabi/subscriptions", "organizations_url": "https://api.github.com/users/dj-wasabi/orgs", "repos_url": "https://api.github.com/users/dj-wasabi/repos", "events_url": "https://api.github.com/users/dj-wasabi/events{/privacy}", "received_events_url": "https://api.github.com/users/dj-wasabi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-07-27T06:33:00Z", "updated_at": "2016-08-04T17:13:44Z", "closed_at": "2016-08-04T17:13:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\n\nOne of my ansible roles has some dependencies on other roles. So I have to execute `ansible-galaxy install -r requirements.yml` before running the `molecule test` the ansible-galaxy command to download the dependencies.\n\nIs it possible to let molecule handle this dependencies downloading?\n\nSo if for example we have this in the molecule.yml file:\n\n```\nansible:\n  playbook: playbook.yml\n  timeout: 30\n  requirement: requirements.yml\n```\n\nWithin the `converge` step it can download the dependencies. If it hasn't a value then this step is ignored.\n\nMy 2 cents.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/288/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/288/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/284", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/284/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/284/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/284/events", "html_url": "https://github.com/ansible-community/molecule/issues/284", "id": 167535559, "node_id": "MDU6SXNzdWUxNjc1MzU1NTk=", "number": 284, "title": "Molecule commands are broken when specifying an ansible.cfg file", "user": {"login": "identifystation", "id": 5855384, "node_id": "MDQ6VXNlcjU4NTUzODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5855384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/identifystation", "html_url": "https://github.com/identifystation", "followers_url": "https://api.github.com/users/identifystation/followers", "following_url": "https://api.github.com/users/identifystation/following{/other_user}", "gists_url": "https://api.github.com/users/identifystation/gists{/gist_id}", "starred_url": "https://api.github.com/users/identifystation/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/identifystation/subscriptions", "organizations_url": "https://api.github.com/users/identifystation/orgs", "repos_url": "https://api.github.com/users/identifystation/repos", "events_url": "https://api.github.com/users/identifystation/events{/privacy}", "received_events_url": "https://api.github.com/users/identifystation/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "retr0h", "id": 9895, "node_id": "MDQ6VXNlcjk4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retr0h", "html_url": "https://github.com/retr0h", "followers_url": "https://api.github.com/users/retr0h/followers", "following_url": "https://api.github.com/users/retr0h/following{/other_user}", "gists_url": "https://api.github.com/users/retr0h/gists{/gist_id}", "starred_url": "https://api.github.com/users/retr0h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retr0h/subscriptions", "organizations_url": "https://api.github.com/users/retr0h/orgs", "repos_url": "https://api.github.com/users/retr0h/repos", "events_url": "https://api.github.com/users/retr0h/events{/privacy}", "received_events_url": "https://api.github.com/users/retr0h/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-07-26T07:08:06Z", "updated_at": "2016-08-03T18:14:42Z", "closed_at": "2016-08-03T18:14:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When attempting to do a `molecule destroy` in a role where molecule.yml points to a custom location for ansible.cfg, the following error is produced:\n\n```\nmolecule destroy\nTraceback (most recent call last):\n  File \"/usr/local/bin/molecule\", line 10, in <module>\n    sys.exit(main())\n  File \"/Users/abrown/projects/cisco/molecule/molecule/cli.py\", line 68, in main\n    CLI().main()\n  File \"/Users/abrown/projects/cisco/molecule/molecule/cli.py\", line 64, in main\n    utilities.sysexit(c.execute()[0])\n  File \"/Users/abrown/projects/cisco/molecule/molecule/commands/destroy.py\", line 47, in execute\n    self.molecule._create_templates()\n  File \"/Users/abrown/projects/cisco/molecule/molecule/core.py\", line 197, in _create_templates\n    self._config.config['ansible']['config_file'], kwargs=kwargs)\n  File \"/Users/abrown/projects/cisco/molecule/molecule/utilities.py\", line 104, in write_template\n    with open(dest, 'w') as f:\nIOError: [Errno 2] No such file or directory: '.molecule/../../.molecule/ansible.cfg'\n```\n\nThe relevant values in molecule.yml are:\n\n```\nansible:\n  config_file: ../../.molecule/ansible.cfg\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/284/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/284/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/199", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/199/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/199/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/199/events", "html_url": "https://github.com/ansible-community/molecule/issues/199", "id": 162348740, "node_id": "MDU6SXNzdWUxNjIzNDg3NDA=", "number": 199, "title": "Multiple platforms support (--platform option not working)", "user": {"login": "michalgasek", "id": 1117361, "node_id": "MDQ6VXNlcjExMTczNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/1117361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michalgasek", "html_url": "https://github.com/michalgasek", "followers_url": "https://api.github.com/users/michalgasek/followers", "following_url": "https://api.github.com/users/michalgasek/following{/other_user}", "gists_url": "https://api.github.com/users/michalgasek/gists{/gist_id}", "starred_url": "https://api.github.com/users/michalgasek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michalgasek/subscriptions", "organizations_url": "https://api.github.com/users/michalgasek/orgs", "repos_url": "https://api.github.com/users/michalgasek/repos", "events_url": "https://api.github.com/users/michalgasek/events{/privacy}", "received_events_url": "https://api.github.com/users/michalgasek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2016-06-26T21:28:11Z", "updated_at": "2018-10-29T19:40:01Z", "closed_at": "2016-08-02T23:37:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\n$ molecule --version\n1.5.1\n```\n\nI would assume that Molecule would run `molecule test` for each platform listed in platforms but that doesn't seem to be the case. Below is my `molecule.yml` file.\n\n``` yaml\nvagrant:\n  raw_config_args:\n    - \"ssh.insert_key = false\"\n\n  platforms:\n    - name: trusty64\n      box: ubuntu/trusty64\n    - name: precise64\n      box: ubuntu/precise64\n\n  providers:\n    - name: virtualbox\n      type: virtualbox\n      options:\n        memory: 1024\n        cpus: 2\n\n  instances:\n    - name: s1\n      options:\n        append_platform_to_hostname: no\n```\n\nWhen running `molecule test`: \n\nOnly `trusty64` platform is tested in Vagrant. I would expect Molecule to run tests for each platform listed in `platforms`.\n\nWhen running `molecule test --platform=precise64`:\n\nStill trusty64 is being used.... `--platform` option doesn't change behaviour.\n\n```\nBringing machine 's1' up with 'virtualbox' provider...\n==> s1: Cloning VM...\n==> s1: Matching MAC address for NAT networking...\n==> s1: Checking if box 'ubuntu/trusty64' is up to date...\n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/199/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/199/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/85", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/85/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/85/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/85/events", "html_url": "https://github.com/ansible-community/molecule/issues/85", "id": 125414322, "node_id": "MDU6SXNzdWUxMjU0MTQzMjI=", "number": 85, "title": "Search in test/integration/default/ for tests", "user": {"login": "rndmh3ro", "id": 3198961, "node_id": "MDQ6VXNlcjMxOTg5NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3198961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rndmh3ro", "html_url": "https://github.com/rndmh3ro", "followers_url": "https://api.github.com/users/rndmh3ro/followers", "following_url": "https://api.github.com/users/rndmh3ro/following{/other_user}", "gists_url": "https://api.github.com/users/rndmh3ro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rndmh3ro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rndmh3ro/subscriptions", "organizations_url": "https://api.github.com/users/rndmh3ro/orgs", "repos_url": "https://api.github.com/users/rndmh3ro/repos", "events_url": "https://api.github.com/users/rndmh3ro/events{/privacy}", "received_events_url": "https://api.github.com/users/rndmh3ro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-01-07T15:24:11Z", "updated_at": "2018-10-29T19:40:00Z", "closed_at": "2016-01-07T17:38:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Test-kitchen searches for tests in `test/integration/default/`, see here:\nhttp://kitchen.ci/docs/getting-started/writing-test\n\nIt'd be nice if molecule could search there, too, so existing tests do not have to be changed (we test puppet/ansible/chef with the same tests, that reside in the aformentioned directory).\n\nMaybe its also possible to let the user specify where to search for tests?\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/85/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/85/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/84", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/84/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/84/events", "html_url": "https://github.com/ansible-community/molecule/issues/84", "id": 125374276, "node_id": "MDU6SXNzdWUxMjUzNzQyNzY=", "number": 84, "title": "Trailing whitespace in molecule.yml after molecule init", "user": {"login": "rndmh3ro", "id": 3198961, "node_id": "MDQ6VXNlcjMxOTg5NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3198961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rndmh3ro", "html_url": "https://github.com/rndmh3ro", "followers_url": "https://api.github.com/users/rndmh3ro/followers", "following_url": "https://api.github.com/users/rndmh3ro/following{/other_user}", "gists_url": "https://api.github.com/users/rndmh3ro/gists{/gist_id}", "starred_url": "https://api.github.com/users/rndmh3ro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rndmh3ro/subscriptions", "organizations_url": "https://api.github.com/users/rndmh3ro/orgs", "repos_url": "https://api.github.com/users/rndmh3ro/repos", "events_url": "https://api.github.com/users/rndmh3ro/events{/privacy}", "received_events_url": "https://api.github.com/users/rndmh3ro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-01-07T11:14:39Z", "updated_at": "2018-10-29T19:40:00Z", "closed_at": "2016-01-07T17:33:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "molecule.yml is the default one created with `molecule init`\n\n```\n(molecule)user $  molecule verify\nTrailing whitespace found in ./molecule.yml on lines: 100\n```\n\nAt `# box_version:`\n\n```\n  # molecule's --platform option will look for these names\n  platforms:\n    - name: trusty64\n      box: trusty64\n      box_url: https://vagrantcloud.com/ubuntu/boxes/trusty64/versions/14.04/providers/virtualbox.box\n      # Optional item, box_version - support for vagrant versioning\n      # box_version: \n```\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/84/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/84/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/35", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/35/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/35/events", "html_url": "https://github.com/ansible-community/molecule/pull/35", "id": 120972434, "node_id": "MDExOlB1bGxSZXF1ZXN0NTI5NTg5NjM=", "number": 35, "title": "Fix global vagrant arguments", "user": {"login": "bborysenko", "id": 3684918, "node_id": "MDQ6VXNlcjM2ODQ5MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3684918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bborysenko", "html_url": "https://github.com/bborysenko", "followers_url": "https://api.github.com/users/bborysenko/followers", "following_url": "https://api.github.com/users/bborysenko/following{/other_user}", "gists_url": "https://api.github.com/users/bborysenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/bborysenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bborysenko/subscriptions", "organizations_url": "https://api.github.com/users/bborysenko/orgs", "repos_url": "https://api.github.com/users/bborysenko/repos", "events_url": "https://api.github.com/users/bborysenko/events{/privacy}", "received_events_url": "https://api.github.com/users/bborysenko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-12-08T09:52:55Z", "updated_at": "2015-12-28T07:34:40Z", "closed_at": "2015-12-08T18:46:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/35", "html_url": "https://github.com/ansible-community/molecule/pull/35", "diff_url": "https://github.com/ansible-community/molecule/pull/35.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/35.patch", "merged_at": "2015-12-08T18:46:23Z"}, "body": "Fix typo in vagrantfile template\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/35/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/35/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/ansible-community/molecule/issues/34", "repository_url": "https://api.github.com/repos/ansible-community/molecule", "labels_url": "https://api.github.com/repos/ansible-community/molecule/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/ansible-community/molecule/issues/34/comments", "events_url": "https://api.github.com/repos/ansible-community/molecule/issues/34/events", "html_url": "https://github.com/ansible-community/molecule/pull/34", "id": 120843511, "node_id": "MDExOlB1bGxSZXF1ZXN0NTI4ODU4Nzg=", "number": 34, "title": "Cleaned up error message on bad login", "user": {"login": "identifystation", "id": 5855384, "node_id": "MDQ6VXNlcjU4NTUzODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5855384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/identifystation", "html_url": "https://github.com/identifystation", "followers_url": "https://api.github.com/users/identifystation/followers", "following_url": "https://api.github.com/users/identifystation/following{/other_user}", "gists_url": "https://api.github.com/users/identifystation/gists{/gist_id}", "starred_url": "https://api.github.com/users/identifystation/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/identifystation/subscriptions", "organizations_url": "https://api.github.com/users/identifystation/orgs", "repos_url": "https://api.github.com/users/identifystation/repos", "events_url": "https://api.github.com/users/identifystation/events{/privacy}", "received_events_url": "https://api.github.com/users/identifystation/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 288133120, "node_id": "MDU6TGFiZWwyODgxMzMxMjA=", "url": "https://api.github.com/repos/ansible-community/molecule/labels/bug", "name": "bug", "color": "fbca04", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-12-07T19:02:10Z", "updated_at": "2015-12-08T18:50:17Z", "closed_at": "2015-12-07T19:07:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/ansible-community/molecule/pulls/34", "html_url": "https://github.com/ansible-community/molecule/pull/34", "diff_url": "https://github.com/ansible-community/molecule/pull/34.diff", "patch_url": "https://github.com/ansible-community/molecule/pull/34.patch", "merged_at": "2015-12-07T19:07:06Z"}, "body": "- Error message wasn't formatted properly when logging into a non-existent host.\n- Removed check to make sure host is passed since docopt takes care of that for us.\n", "reactions": {"url": "https://api.github.com/repos/ansible-community/molecule/issues/34/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/ansible-community/molecule/issues/34/timeline", "performed_via_github_app": null, "state_reason": null}]