[{"url": "https://api.github.com/repos/altair-viz/altair/issues/3027", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/3027/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/3027/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/3027/events", "html_url": "https://github.com/altair-viz/altair/issues/3027", "id": 1677259244, "node_id": "I_kwDOAoxtyc5j-PHs", "number": 3027, "title": "Change width/height on Layer RepeatChart raises error", "user": {"login": "debbes80", "id": 54935651, "node_id": "MDQ6VXNlcjU0OTM1NjUx", "avatar_url": "https://avatars.githubusercontent.com/u/54935651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/debbes80", "html_url": "https://github.com/debbes80", "followers_url": "https://api.github.com/users/debbes80/followers", "following_url": "https://api.github.com/users/debbes80/following{/other_user}", "gists_url": "https://api.github.com/users/debbes80/gists{/gist_id}", "starred_url": "https://api.github.com/users/debbes80/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/debbes80/subscriptions", "organizations_url": "https://api.github.com/users/debbes80/orgs", "repos_url": "https://api.github.com/users/debbes80/repos", "events_url": "https://api.github.com/users/debbes80/events{/privacy}", "received_events_url": "https://api.github.com/users/debbes80/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-04-20T19:03:12Z", "updated_at": "2023-04-24T15:01:41Z", "closed_at": "2023-04-24T15:01:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using 5.0.0rc1, when setting the width and height of a layer repeat chart, I get an error.\r\n```\r\nSchemaValidationError: '{'layer': ['US_Gross', 'Worldwide_Gross']}' is an invalid value for `repeat`:\r\n\r\n{'layer': ['US_Gross', 'Worldwide_Gross']} is not of type 'array'\r\nAdditional properties are not allowed ('layer' was unexpected)\r\n```\r\nThis works fine on 4.2.2.\r\nNot setting the width/height property also works fine: https://altair-viz.github.io/gallery/line_chart_with_color_datum.html\r\n\r\nCode:\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nsource = data.movies()\r\n\r\nalt.Chart(source).mark_line().encode(\r\n    x=alt.X(\"IMDB_Rating\", bin=True),\r\n    y=alt.Y(\r\n        alt.repeat(\"layer\"), aggregate=\"mean\", title=\"Mean of US and Worldwide Gross\"\r\n    ),\r\n    color=alt.datum(alt.repeat(\"layer\")),\r\n).properties(\r\n    width=800, height=400,\r\n).repeat(\r\n    layer=[\"US_Gross\", \"Worldwide_Gross\"]\r\n)\r\n```\r\nThe only way I found to change the dimensions was with ```configure_view()```:\r\n```\r\nalt.Chart(source).mark_line().encode(\r\n    alt.X(\"IMDB_Rating\", bin=True),\r\n    alt.Y(alt.repeat(\"layer\"), aggregate=\"mean\",title=\"Mean of US and Worldwide Gross\"),\r\n    color=alt.datum(alt.repeat(\"layer\")),\r\n).repeat(\r\n    layer=[\"US_Gross\", \"Worldwide_Gross\"]\r\n).configure_view(\r\n    continuousHeight=400,\r\n    continuousWidth=800\r\n)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/3027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/3027/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/3025", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/3025/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/3025/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/3025/events", "html_url": "https://github.com/altair-viz/altair/issues/3025", "id": 1676387000, "node_id": "I_kwDOAoxtyc5j66K4", "number": 3025, "title": "Documentation: Categories transposed in 'data' documentation", "user": {"login": "m-charlton", "id": 7031487, "node_id": "MDQ6VXNlcjcwMzE0ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/7031487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-charlton", "html_url": "https://github.com/m-charlton", "followers_url": "https://api.github.com/users/m-charlton/followers", "following_url": "https://api.github.com/users/m-charlton/following{/other_user}", "gists_url": "https://api.github.com/users/m-charlton/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-charlton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-charlton/subscriptions", "organizations_url": "https://api.github.com/users/m-charlton/orgs", "repos_url": "https://api.github.com/users/m-charlton/repos", "events_url": "https://api.github.com/users/m-charlton/events{/privacy}", "received_events_url": "https://api.github.com/users/m-charlton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-20T09:50:12Z", "updated_at": "2023-04-21T09:37:36Z", "closed_at": "2023-04-21T09:37:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The data documentation (`doc/user_guide/data.rst`) contains the following example:\r\n\r\n```python\r\nimport altair as alt\r\nimport pandas as pd\r\n\r\ndata = pd.DataFrame({'x': ['A', 'B', 'C', 'D', 'E'],\r\n                     'y': [5, 3, 6, 7, 2]})\r\nalt.Chart(data).mark_bar().encode(\r\n    x='x',\r\n    y='y',\r\n)\r\n```\r\n\r\nThe description of the above code:\r\n\r\n> For example, here we specify data via a pandas DataFrame and Altair automatically \r\n> detects that the x-column should be visualized on a quantitative scale and that the\r\n> y-column should be visualized on a categorical (nominal) scale:\r\n\r\nThis strikes me as incorrect. The x-column is nominal. The y-column is\r\nquantitative.\r\n\r\nIf we print the chart object then this would seem to back the above assertions.\r\n\r\n```\r\n\"encoding\": {\r\n    \"x\": {\r\n      \"field\": \"x\",\r\n      \"type\": \"nominal\"\r\n    },\r\n    \"y\": {\r\n      \"field\": \"y\",\r\n      \"type\": \"quantitative\"\r\n    }\r\n  },\r\n```\r\n\r\nFix in PR: #3026 Categories transposed in data documentation \r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [x] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [x] Search for duplicate issues.\r\n- [x] Use the latest version of Altair.\r\n- [x] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/3025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/3025/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/3024", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/3024/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/3024/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/3024/events", "html_url": "https://github.com/altair-viz/altair/issues/3024", "id": 1670531323, "node_id": "I_kwDOAoxtyc5jkkj7", "number": 3024, "title": "naming parameter views of repeated charts + interactivity", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-04-17T06:52:57Z", "updated_at": "2023-04-24T15:02:01Z", "closed_at": "2023-04-24T15:02:00Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I was re-reading this comment https://github.com/vega/vega-lite/issues/8446#issuecomment-1437517310, but **I'm not** able to get\r\n- _repeat charts + interactivity_\r\n\r\nto work anymore.\r\n\r\nThe following `views` definition:  `<view-name>child__<repeat-row>_<data-field><repeat-column>_<data-field>` does not give interactivity in the charts with VL5.7.\r\n\r\nSee also this example where the interactivity (here zooming through `\"bind\": \"scales\"`) does not work anymore [Open the Chart in the Vega Editor](https://vega.github.io/editor/#/url/vega-lite/N4IgJAzgxgFgpgWwIYgFwhgF0wBwqgegIDc4BzJAOjIEtMYBXAI0poHsDp5kTykBaADZ04JAKyUATJQAMlAFYQ2AOxAAaEFBUAzGmTShiNOAHcDmlZhrKGbBhAAScPVjQBmGTI1blVm3YgAdRoAE3p3TwBfSI0cJAAnJAQINABtUCZrELQQaCRBOBSNZSS4HLjEhAB9AEZ1XLgCqExzOGUtEOsyFNRUkAAPeoBPEABdDUwhnDL0a0w4eOJ8kBiQI1MevvWTWtgaQRCqqvi2HenMfIAZNrJ6LUEGBGUqiDg4wWvlW5h67d2YfaHY6nKrnK43O5sB5PF5vfLBMI-DR-Gp7A5HE5nOAXQQIyHQ56vd6fb6-Yw7VEA9HArE4vEwe6PQlw3GhcKjSLjEDxN5wJAtVCgRlPNINYkQpFi+Fsn5czGisEfCX1RX0sarCDTKDmEoIGZrcm1eohfkoQUgBjxQQ5LC4fBEKAhZQKCAhRo0YjxSjKbEEZQ4BC8Cj8E0XV6YCAAAWINSkAE5ZARQ0gCDR4jQIC6VCsNMh4gBrcpsOb1NodLrme5seLmXSNbLoTVwKDGIogSbTHLKNgIazLVaDc11g7mHnTfk5YWqVYd-UARwYSF8dH5HrKqxGQ+MI-NY75Au5pxz7am88Xy4uVlIK1W8BcApqHg0JhlaBqADYZNEgA)\r\n\r\nI tried a few things and inspect [this PR](https://github.com/vega/vega-lite/pull/8733/files) at the VL repository, but I can't find a way how to make this work again. Any idea @domoritz?\r\n\r\n(issue distilled from https://github.com/altair-viz/altair/issues/2849)", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/3024/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/3024/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/3017", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/3017/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/3017/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/3017/events", "html_url": "https://github.com/altair-viz/altair/issues/3017", "id": 1661167517, "node_id": "I_kwDOAoxtyc5jA2ed", "number": 3017, "title": "Radial charts are \"inverted\" when used in concatenation", "user": {"login": "umichhaidn", "id": 79999494, "node_id": "MDQ6VXNlcjc5OTk5NDk0", "avatar_url": "https://avatars.githubusercontent.com/u/79999494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umichhaidn", "html_url": "https://github.com/umichhaidn", "followers_url": "https://api.github.com/users/umichhaidn/followers", "following_url": "https://api.github.com/users/umichhaidn/following{/other_user}", "gists_url": "https://api.github.com/users/umichhaidn/gists{/gist_id}", "starred_url": "https://api.github.com/users/umichhaidn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umichhaidn/subscriptions", "organizations_url": "https://api.github.com/users/umichhaidn/orgs", "repos_url": "https://api.github.com/users/umichhaidn/repos", "events_url": "https://api.github.com/users/umichhaidn/events{/privacy}", "received_events_url": "https://api.github.com/users/umichhaidn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-10T18:25:02Z", "updated_at": "2023-04-11T23:57:27Z", "closed_at": "2023-04-11T23:57:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Normally, a radial chart has arcs that extend outward from an inner radius. But when concatenated (either by hconcat, vconcat, or | operator) the arcs extend INWARD into the inner radius as depicted below:\r\n\r\n![image](https://user-images.githubusercontent.com/79999494/230967064-c49a6499-fb6c-472d-a3f5-670f767366fb.png)\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/79999494/230967228-e6499ded-6a03-42b8-987b-5dd367fc6ad9.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/3017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/3017/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/3012", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/3012/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/3012/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/3012/events", "html_url": "https://github.com/altair-viz/altair/issues/3012", "id": 1657270664, "node_id": "I_kwDOAoxtyc5ix_GI", "number": 3012, "title": "Using transform_regression with method \"poly\" and order 0 returns 3rd order fit", "user": {"login": "thomascamminady", "id": 24543638, "node_id": "MDQ6VXNlcjI0NTQzNjM4", "avatar_url": "https://avatars.githubusercontent.com/u/24543638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomascamminady", "html_url": "https://github.com/thomascamminady", "followers_url": "https://api.github.com/users/thomascamminady/followers", "following_url": "https://api.github.com/users/thomascamminady/following{/other_user}", "gists_url": "https://api.github.com/users/thomascamminady/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomascamminady/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomascamminady/subscriptions", "organizations_url": "https://api.github.com/users/thomascamminady/orgs", "repos_url": "https://api.github.com/users/thomascamminady/repos", "events_url": "https://api.github.com/users/thomascamminady/events{/privacy}", "received_events_url": "https://api.github.com/users/thomascamminady/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-04-06T11:46:45Z", "updated_at": "2023-04-06T13:38:58Z", "closed_at": "2023-04-06T13:38:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to use `transform_regression` to fit a constant through my data. My understanding is that I should use `method=\"poly\"` and `order=0`, since a 0th order polynomial is a constant. However, when using `order=0` it seems like `transform_regression` defaults back to `order=3`, at least in the example below (taking from the `altair` examples.)\r\n```python\r\nimport numpy as np\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\n# Generate some random data\r\nrng = np.random.RandomState(1)\r\nx = rng.rand(40) ** 2\r\ny = 10 - 1.0 / (x + 0.1) + rng.randn(40)\r\nsource = pd.DataFrame({\"x\": x, \"y\": y})\r\n\r\n# Define the degree of the polynomial fits\r\ndegree_list = [0, 1, 5]\r\n\r\nbase = alt.Chart(source).mark_circle(color=\"black\").encode(alt.X(\"x\"), alt.Y(\"y\"))\r\n\r\npolynomial_fit = [\r\n    base.transform_regression(\r\n        \"x\", \"y\", method=\"poly\", order=order, as_=[\"x\", str(order)]\r\n    )\r\n    .mark_line()\r\n    .transform_fold([str(order)], as_=[\"degree\", \"y\"])\r\n    .encode(alt.Color(\"degree:N\"))\r\n    for order in degree_list\r\n]\r\n\r\nalt.layer(base, *polynomial_fit)\r\n```\r\nInstead of a constant line for the 0th order polynomial, I get the same fit that I would get for the 3rd order model (which happens to be the default for `order`).\r\n\r\nIs this a bug? I think `order=0` is a valid input and should be evaluated as a 0th order polynomial, i.e. a constant function. \r\n\r\n\r\n![image](https://user-images.githubusercontent.com/24543638/230366928-72ba90ac-13f8-43bb-b75d-c482c57c1011.jpeg)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/3012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/3012/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/3006", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/3006/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/3006/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/3006/events", "html_url": "https://github.com/altair-viz/altair/issues/3006", "id": 1648055141, "node_id": "I_kwDOAoxtyc5iO1Nl", "number": 3006, "title": "module 'altair' has no attribute 'param'", "user": {"login": "umichhaidn", "id": 79999494, "node_id": "MDQ6VXNlcjc5OTk5NDk0", "avatar_url": "https://avatars.githubusercontent.com/u/79999494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umichhaidn", "html_url": "https://github.com/umichhaidn", "followers_url": "https://api.github.com/users/umichhaidn/followers", "following_url": "https://api.github.com/users/umichhaidn/following{/other_user}", "gists_url": "https://api.github.com/users/umichhaidn/gists{/gist_id}", "starred_url": "https://api.github.com/users/umichhaidn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umichhaidn/subscriptions", "organizations_url": "https://api.github.com/users/umichhaidn/orgs", "repos_url": "https://api.github.com/users/umichhaidn/repos", "events_url": "https://api.github.com/users/umichhaidn/events{/privacy}", "received_events_url": "https://api.github.com/users/umichhaidn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-30T17:52:04Z", "updated_at": "2023-04-03T21:40:03Z", "closed_at": "2023-04-03T21:40:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I used to use alt.param() to make selectors for interactive charts, and it's still in the documentation, but now I am getting this error. \r\n\r\nAltair version 4.2.2\r\nUsing Google Colab Jupyter Notebook\r\n\r\n![image](https://user-images.githubusercontent.com/79999494/228922055-78a74c8b-66ce-4ab5-b649-33a24053b1a9.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/3006/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/3006/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/3003", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/3003/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/3003/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/3003/events", "html_url": "https://github.com/altair-viz/altair/issues/3003", "id": 1646588814, "node_id": "I_kwDOAoxtyc5iJPOO", "number": 3003, "title": "Example stacked bar chart doesn't work with Polars in v5 rc", "user": {"login": "braaannigan", "id": 10512793, "node_id": "MDQ6VXNlcjEwNTEyNzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10512793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/braaannigan", "html_url": "https://github.com/braaannigan", "followers_url": "https://api.github.com/users/braaannigan/followers", "following_url": "https://api.github.com/users/braaannigan/following{/other_user}", "gists_url": "https://api.github.com/users/braaannigan/gists{/gist_id}", "starred_url": "https://api.github.com/users/braaannigan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/braaannigan/subscriptions", "organizations_url": "https://api.github.com/users/braaannigan/orgs", "repos_url": "https://api.github.com/users/braaannigan/repos", "events_url": "https://api.github.com/users/braaannigan/events{/privacy}", "received_events_url": "https://api.github.com/users/braaannigan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-03-29T21:53:39Z", "updated_at": "2023-03-30T04:02:47Z", "closed_at": "2023-03-30T04:02:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "If we try the example stacked bar chart but convert to Polars it doesn't work (I found this with a similar error on my own data):\r\n\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\nimport polars as pl\r\n\r\nsource = pl.from_pandas(data.seattle_weather())\r\n\r\nalt.Chart(source).mark_bar(\r\n    cornerRadiusTopLeft=3,\r\n    cornerRadiusTopRight=3\r\n).encode(\r\n    x='month(date):O',\r\n    y='count():Q',\r\n    color='weather:N'\r\n)\r\n```\r\nwith error message:\r\n```\r\nthread 'tokio-runtime-worker' panicked at 'assertion failed: `(left == right)`\r\n  left: `LargeUtf8`,\r\n right: `Utf8`: StringArray expects DataType::Utf8', /root/.cargo/registry/src/github.com-1ecc6299db9ec823/arrow-array-32.0.0/src/array/byte_array.rs:268:9\r\nthread 'tokio-runtime-worker' panicked at 'assertion failed: `(left == right)`\r\n  left: `LargeUtf8`,\r\n right: `Utf8`: StringArray expects DataType::Utf8', /root/.cargo/registry/src/github.com-1ecc6299db9ec823/arrow-array-32.0.0/src/array/byte_array.rs:268:9\r\nthread 'tokio-runtime-worker' panicked at 'assertion failed: `(left == right)`\r\n  left: `LargeUtf8`,\r\n right: `Utf8`: StringArray expects DataType::Utf8thread '', tokio-runtime-worker/root/.cargo/registry/src/github.com-1ecc6299db9ec823/arrow-array-32.0.0/src/array/byte_array.rs' panicked at ':assertion failed: `(left == right)`\r\n  left: `LargeUtf8`,\r\n right: `Utf8`: StringArray expects DataType::Utf8268', :/root/.cargo/registry/src/github.com-1ecc6299db9ec823/arrow-array-32.0.0/src/array/byte_array.rs9:\r\n268:9\r\nthread 'tokio-runtime-worker' panicked at 'assertion failed: `(left == right)`\r\n  left: `LargeUtf8`,\r\n right: `Utf8`: StringArray expects DataType::Utf8', /root/.cargo/registry/src/github.com-1ecc6299db9ec823/arrow-array-32.0.0/src/array/byte_array.rs:268:9\r\nthread 'tokio-runtime-worker' panicked at 'assertion failed: `(left == right)`\r\n  left: `LargeUtf8`,\r\n right: `Utf8`: StringArray expects DataType::Utf8', /root/.cargo/registry/src/github.com-1ecc6299db9ec823/arrow-array-32.0.0/src/array/byte_array.rs:268:9\r\n ```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/3003/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/3003/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/3002", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/3002/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/3002/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/3002/events", "html_url": "https://github.com/altair-viz/altair/issues/3002", "id": 1646379586, "node_id": "I_kwDOAoxtyc5iIcJC", "number": 3002, "title": "Extension error (sphinxext.altairgallery): `isotype_emoji.svg`", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-29T19:19:16Z", "updated_at": "2023-04-07T14:25:18Z", "closed_at": "2023-04-07T14:25:18Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I'm not able to successfully build the docs with default settings (on windows).\r\n\r\nThis is the error I'm facing:\r\n```\r\n-> saving C:\\Notebooks\\mattijn\\altair\\doc\\_images\\isotype_emoji.svg\r\n\r\nExtension error (sphinxext.altairgallery):\r\nHandler <function main at 0x000001DE2270E8B0> for event 'builder-inited' threw an exception (exception: 'charmap' codec can't encode character '\\U0001f404' in position 2488: character maps to <undefined>)\r\n```\r\nThe  `'\\U0001f404'` is the \ud83d\udc04 emoji, so it is something specific to this chart only. I remember we switched to svg-rendering for this chart specifically for this reason as it was not able to render when using `.png`.\r\n\r\nBut when I define this line: https://github.com/altair-viz/altair/blob/master/tests/examples_arguments_syntax/__init__.py#L5\r\nas `SVG_EXAMPLES = {}`, so forcing png only for all examples, it gives me still a reasonable png thumbnail for isotype_emoji (again, on windows):\r\n![image](https://user-images.githubusercontent.com/5186265/228644785-fdca7637-013d-4db9-90f4-f01ead608dee.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/3002/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/3002/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/3000", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/3000/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/3000/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/3000/events", "html_url": "https://github.com/altair-viz/altair/issues/3000", "id": 1642935751, "node_id": "I_kwDOAoxtyc5h7TXH", "number": 3000, "title": "`selection_interval` docs describe unusable `\"fields\"` parameter", "user": {"login": "dpoznik", "id": 6373515, "node_id": "MDQ6VXNlcjYzNzM1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6373515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dpoznik", "html_url": "https://github.com/dpoznik", "followers_url": "https://api.github.com/users/dpoznik/followers", "following_url": "https://api.github.com/users/dpoznik/following{/other_user}", "gists_url": "https://api.github.com/users/dpoznik/gists{/gist_id}", "starred_url": "https://api.github.com/users/dpoznik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dpoznik/subscriptions", "organizations_url": "https://api.github.com/users/dpoznik/orgs", "repos_url": "https://api.github.com/users/dpoznik/repos", "events_url": "https://api.github.com/users/dpoznik/events{/privacy}", "received_events_url": "https://api.github.com/users/dpoznik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2023-03-27T22:50:30Z", "updated_at": "2023-03-31T20:32:29Z", "closed_at": "2023-03-29T00:01:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm not sure whether this is just a documentation bug or an actual bug, as I've only been using `altair` for one day.\r\nI am using version `\"5.0.0rc1\"`.\r\n\r\nThe `altair.selection_interval` [docs](https://altair-viz.github.io/user_guide/generated/api/altair.selection_interval.html) include a description of a `fields` parameter, but attempting to use it:\r\n``` python\r\nimport altair as alt\r\nalt.selection_interval(fields=[\"iid\"])\r\n``` \r\nelicits:\r\n``` python\r\nSchemaValidationError: `IntervalSelectionConfig` has no parameter named 'fields'\r\n```\r\n\r\n#2365 suggests that this is indeed just a documentation bug. Perhaps it arose in #2908?\r\n\r\nThanks!\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/3000/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/3000/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2998", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2998/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2998/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2998/events", "html_url": "https://github.com/altair-viz/altair/issues/2998", "id": 1642254645, "node_id": "I_kwDOAoxtyc5h4tE1", "number": 2998, "title": "Error loading script: Script error for \"vega-embed\" https://requirejs.org/docs/errors.html#scripterror", "user": {"login": "jaanli", "id": 5317244, "node_id": "MDQ6VXNlcjUzMTcyNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5317244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaanli", "html_url": "https://github.com/jaanli", "followers_url": "https://api.github.com/users/jaanli/followers", "following_url": "https://api.github.com/users/jaanli/following{/other_user}", "gists_url": "https://api.github.com/users/jaanli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaanli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaanli/subscriptions", "organizations_url": "https://api.github.com/users/jaanli/orgs", "repos_url": "https://api.github.com/users/jaanli/repos", "events_url": "https://api.github.com/users/jaanli/events{/privacy}", "received_events_url": "https://api.github.com/users/jaanli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-03-27T14:51:39Z", "updated_at": "2023-04-03T21:41:59Z", "closed_at": "2023-04-03T21:41:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi! \r\n\r\nWe are trying to plot the following data: https://github.com/GulnaraY/codespaces-jupyter/blob/2e16b50885fee127d9d1eb9a21018bfa8231016c/data/chatgpt_users.csv#L33\r\n\r\nWe are using this notebook as an example for the datathinking.org class: https://github.com/altosaar/datathinking.org-codespace-230327/blob/main/230327-plotting-yyyymmdd-data-and-principles.ipynb\r\n\r\nHowever, the error we are receiving is `Error loading script: Script error for \"vega-embed\" https://requirejs.org/docs/errors.html#scripterror`.\r\n\r\nWe have tried following the advice of ChatGPT and Claude and changed web-browsers, installed missing dependencies, but we still cannot view the inline chart or the chart in a new browser window using GitHub codespaces. It is a blank window:\r\n\r\n<img width=\"1035\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5317244/227976780-55384be5-bc21-4bf3-8b55-55eac3f434b3.png\">\r\n\r\ncc @jakevdp @domoritz in case they have run into this before! Thank you so much. And cc @ghalimi who we learned the principles of data visualization from last week.\r\n\r\nThank you so much for any help!\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2998/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2994", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2994/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2994/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2994/events", "html_url": "https://github.com/altair-viz/altair/issues/2994", "id": 1640329729, "node_id": "I_kwDOAoxtyc5hxXIB", "number": 2994, "title": "Interactive cross filter example has the same x-axes", "user": {"login": "domoritz", "id": 589034, "node_id": "MDQ6VXNlcjU4OTAzNA==", "avatar_url": "https://avatars.githubusercontent.com/u/589034?v=4", "gravatar_id": "", "url": "https://api.github.com/users/domoritz", "html_url": "https://github.com/domoritz", "followers_url": "https://api.github.com/users/domoritz/followers", "following_url": "https://api.github.com/users/domoritz/following{/other_user}", "gists_url": "https://api.github.com/users/domoritz/gists{/gist_id}", "starred_url": "https://api.github.com/users/domoritz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/domoritz/subscriptions", "organizations_url": "https://api.github.com/users/domoritz/orgs", "repos_url": "https://api.github.com/users/domoritz/repos", "events_url": "https://api.github.com/users/domoritz/events{/privacy}", "received_events_url": "https://api.github.com/users/domoritz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-03-25T02:25:26Z", "updated_at": "2023-04-24T15:02:43Z", "closed_at": "2023-04-24T15:02:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is happening with Altair v5. See https://altair-viz.github.io/gallery/interactive_layered_crossfilter.html#interactive-crossfilter\r\n\r\n<img width=\"948\" alt=\"Screenshot 2023-03-24 at 22 23 54\" src=\"https://user-images.githubusercontent.com/589034/227681882-3fa6a5a0-d624-4a3a-aa79-3f1109aba628.png\">\r\n\r\nNote how the x-axis has the same name. It seems like the problem is that all repeated views have the same name.\r\n\r\nWith the current version of Vega-Lite from main, I get `Unrecognized signal name: \"param_8\"`.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2994/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2978", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2978/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2978/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2978/events", "html_url": "https://github.com/altair-viz/altair/issues/2978", "id": 1632118747, "node_id": "I_kwDOAoxtyc5hSCfb", "number": 2978, "title": "Interactive Crossfilter gallery example broken with Altair 5.0.0rc1", "user": {"login": "jonmmease", "id": 15064365, "node_id": "MDQ6VXNlcjE1MDY0MzY1", "avatar_url": "https://avatars.githubusercontent.com/u/15064365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonmmease", "html_url": "https://github.com/jonmmease", "followers_url": "https://api.github.com/users/jonmmease/followers", "following_url": "https://api.github.com/users/jonmmease/following{/other_user}", "gists_url": "https://api.github.com/users/jonmmease/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonmmease/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonmmease/subscriptions", "organizations_url": "https://api.github.com/users/jonmmease/orgs", "repos_url": "https://api.github.com/users/jonmmease/repos", "events_url": "https://api.github.com/users/jonmmease/events{/privacy}", "received_events_url": "https://api.github.com/users/jonmmease/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-03-20T13:31:19Z", "updated_at": "2023-03-20T20:54:46Z", "closed_at": "2023-03-20T20:54:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While digging into https://github.com/hex-inc/vegafusion/issues/267, I found that there's a regression in the [Interactive Crossfilter](https://altair-viz.github.io/gallery/interactive_layered_crossfilter.html) gallery example with Altair 5.\r\n\r\nIf you make a selection on the distance subplot, the bars for the distance and delayed subplots disappear.\r\n\r\n<img width=\"939\" alt=\"Screenshot 2023-03-20 at 9 28 06 AM\" src=\"https://user-images.githubusercontent.com/15064365/226354210-3189261a-01d9-482f-985c-0a3215fa29c2.png\">\r\n\r\nThis works as expected in the Altair 4 gallery: https://altair-viz.github.io/altair-viz-v4/gallery/interactive_layered_crossfilter.html\r\n\r\n<img width=\"766\" alt=\"Screenshot 2023-03-20 at 9 30 56 AM\" src=\"https://user-images.githubusercontent.com/15064365/226354908-aeb2a763-7665-4c16-95e0-6187cfa39ee4.png\">\r\n\r\nI haven't dug into whether this is an Altair or Vega-Lite issue, but wanted to bring it up ASAP, since it's probably something we need to get worked out before the final release of Altair 5.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2978/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2958", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2958/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2958/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2958/events", "html_url": "https://github.com/altair-viz/altair/issues/2958", "id": 1622102461, "node_id": "I_kwDOAoxtyc5gr1G9", "number": 2958, "title": "Plot don't display on local computer, but do on server", "user": {"login": "rcolpo", "id": 5889181, "node_id": "MDQ6VXNlcjU4ODkxODE=", "avatar_url": "https://avatars.githubusercontent.com/u/5889181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rcolpo", "html_url": "https://github.com/rcolpo", "followers_url": "https://api.github.com/users/rcolpo/followers", "following_url": "https://api.github.com/users/rcolpo/following{/other_user}", "gists_url": "https://api.github.com/users/rcolpo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rcolpo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rcolpo/subscriptions", "organizations_url": "https://api.github.com/users/rcolpo/orgs", "repos_url": "https://api.github.com/users/rcolpo/repos", "events_url": "https://api.github.com/users/rcolpo/events{/privacy}", "received_events_url": "https://api.github.com/users/rcolpo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-13T19:15:15Z", "updated_at": "2023-04-03T21:45:30Z", "closed_at": "2023-04-03T21:45:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI generate two HTML files with function with the function `altairChart.save('altairChart.html')`, and manually put both graphs into a single file. I can open the file and see the graphs, but my coworkers can't, as seen in the screenshots below:\r\n\r\n![screenShots](https://user-images.githubusercontent.com/5889181/224801602-fd253ac9-c773-4740-b59b-f10c4a666c34.jpg)\r\n\r\nTrying to solve this problem, and after reading [here](https://github.com/altair-viz/altair/issues/986) that AdBlockers could possibly be related to this issue, I created a version 2 of the file, including the \"data\" from the \"URL data sources\" directly into the HTML file, but it was still not working to my colleagues. You can find below these two files (I had to change the file extension to .TXT, because GitHub does not accept .HTML. Please rename the files before opening).\r\n\r\n[twoCharts.txt](https://github.com/altair-viz/altair/files/10960726/twoCharts.txt)\r\n[twoChartsv2.txt](https://github.com/altair-viz/altair/files/10960723/twoChartsv2.txt)\r\n\r\nMy coworkers could only see the graphs when I uploaded the files to a server and sent the link instead of the file. The links are:\r\n\r\nhttps://sbmlcomp.bioinf.uni-leipzig.de/jobs/twoChartsv1.html\r\nhttps://sbmlcomp.bioinf.uni-leipzig.de/jobs/twoChartsv2.html\r\n\r\nWhy can't they see the plot just by opening the file? (They can, however, open an HTML file with this [Simple Bar Chart](https://altair-viz.github.io/gallery/simple_bar_chart.html))\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2958/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2953", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2953/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2953/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2953/events", "html_url": "https://github.com/altair-viz/altair/issues/2953", "id": 1614124140, "node_id": "I_kwDOAoxtyc5gNZRs", "number": 2953, "title": "save using vl-convert doesn't work with json data_transformer", "user": {"login": "sid-kap", "id": 6425077, "node_id": "MDQ6VXNlcjY0MjUwNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/6425077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sid-kap", "html_url": "https://github.com/sid-kap", "followers_url": "https://api.github.com/users/sid-kap/followers", "following_url": "https://api.github.com/users/sid-kap/following{/other_user}", "gists_url": "https://api.github.com/users/sid-kap/gists{/gist_id}", "starred_url": "https://api.github.com/users/sid-kap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sid-kap/subscriptions", "organizations_url": "https://api.github.com/users/sid-kap/orgs", "repos_url": "https://api.github.com/users/sid-kap/repos", "events_url": "https://api.github.com/users/sid-kap/events{/privacy}", "received_events_url": "https://api.github.com/users/sid-kap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-03-07T20:06:25Z", "updated_at": "2023-03-15T10:03:02Z", "closed_at": "2023-03-15T10:03:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "In altair 5.0.0rc1, vl-convert produces images without any data points when the json transformer is enabled.\r\n\r\nExample code:\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nalt.data_transformers.enable('json')\r\n\r\nchart = alt.Chart(\r\n    data.iris()\r\n).mark_point().encode(\r\n    x='sepalWidth', y='sepalLength'\r\n)\r\nchart.save('test.png', engine='vl-convert', scale_factor=2)\r\n```\r\nIn my jupyter notebook, I see\r\n![visualization (8)](https://user-images.githubusercontent.com/6425077/223539893-2d18e1ad-c163-4310-8f4d-c760b5bd9281.png)\r\n\r\nbut the created `test.png` looks like:\r\n![test](https://user-images.githubusercontent.com/6425077/223539980-90bc2e59-26d8-4b01-81d6-6449d170a788.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2953/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2953/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2948", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2948/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2948/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2948/events", "html_url": "https://github.com/altair-viz/altair/issues/2948", "id": 1612117832, "node_id": "I_kwDOAoxtyc5gFvdI", "number": 2948, "title": "Altair not importing data json saved to disk", "user": {"login": "claysmyth", "id": 39106407, "node_id": "MDQ6VXNlcjM5MTA2NDA3", "avatar_url": "https://avatars.githubusercontent.com/u/39106407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claysmyth", "html_url": "https://github.com/claysmyth", "followers_url": "https://api.github.com/users/claysmyth/followers", "following_url": "https://api.github.com/users/claysmyth/following{/other_user}", "gists_url": "https://api.github.com/users/claysmyth/gists{/gist_id}", "starred_url": "https://api.github.com/users/claysmyth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claysmyth/subscriptions", "organizations_url": "https://api.github.com/users/claysmyth/orgs", "repos_url": "https://api.github.com/users/claysmyth/repos", "events_url": "https://api.github.com/users/claysmyth/events{/privacy}", "received_events_url": "https://api.github.com/users/claysmyth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-06T20:01:55Z", "updated_at": "2023-03-15T18:30:02Z", "closed_at": "2023-03-15T18:30:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI love Altair, but I believe it not importing data saved to disk in json format. I am attempting to save data to disk because my dataframes are quite large (1M+ rows). However, when I use the recommendations [here](https://altair-viz.github.io/user_guide/data_transformers.html#storing-json-data-in-a-separate-directory) and [here](https://altair-viz.github.io/user_guide/large_datasets.html), my jupyter notebook plots appear as figures with axes but no data (i.e. empty plots). It is correctly writing the data to the json file, which I have verified via inspection of the json in a text editor. Additionally, when running `chart.to_dict()`, the data field correctly points to the right json file.\r\nHowever, it appears that altair is unable to retrieve the data json that it writes to disk. \r\n\r\nIn terminal, there is a `404 GET /path/to/altairdata/data.json` within the jupyter notebook execution info. \r\n\r\nHere is some example code that recreates the issue on my end with Altair version 4.2.2:\r\n\r\n```import os\r\nfrom toolz.curried import pipe\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\n\r\ndef json_dir(data, data_dir='/path/to/altairdata'):\r\n    os.makedirs(data_dir, exist_ok=True)\r\n    return pipe(data, alt.to_json(filename=data_dir + '/{prefix}-{hash}.{extension}') )\r\n\r\n\r\nalt.data_transformers.register('json_dir', json_dir)\r\nalt.data_transformers.enable('json_dir')\r\nalt.data_transformers.disable_max_rows()\r\n\r\nchart = alt.Chart(pd.DataFrame({'A': [1,2,3], 'B': [5,8,10]})).mark_point().encode(x='A', y='B')\r\n```\r\n\r\nEDIT: It appears that my issue is covered here in #1867 , however, none the offered solutions fixed my problem working with jupyter in VS Code. Is there `data_transformers.enable()` method that is known to work for VS Code? It would be very helpful if I could save chart data to disk.\r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [x] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [x] Search for duplicate issues.\r\n- [x] Use the latest version of Altair.\r\n- [x] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2948/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2945", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2945/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2945/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2945/events", "html_url": "https://github.com/altair-viz/altair/issues/2945", "id": 1610530868, "node_id": "I_kwDOAoxtyc5f_sA0", "number": 2945, "title": "Sphinx autodoc can't find `parameter`", "user": {"login": "joelostblom", "id": 4560057, "node_id": "MDQ6VXNlcjQ1NjAwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4560057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelostblom", "html_url": "https://github.com/joelostblom", "followers_url": "https://api.github.com/users/joelostblom/followers", "following_url": "https://api.github.com/users/joelostblom/following{/other_user}", "gists_url": "https://api.github.com/users/joelostblom/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelostblom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelostblom/subscriptions", "organizations_url": "https://api.github.com/users/joelostblom/orgs", "repos_url": "https://api.github.com/users/joelostblom/repos", "events_url": "https://api.github.com/users/joelostblom/events{/privacy}", "received_events_url": "https://api.github.com/users/joelostblom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-06T02:20:50Z", "updated_at": "2023-03-06T16:27:48Z", "closed_at": "2023-03-06T16:27:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems sphinx autodoc is trying to include `parameter` in the autogenerated docs, but failing cause altair does not have anything names `parameter` (since we changed the name to `param`). However, I can't find where in the code this is detected.\r\n\r\n```\r\nWARNING: autodoc: failed to import function 'parameter' from module 'altair'; the following exception was raised:\r\nTraceback (most recent call last):\r\n  File \"/home/joel/miniconda3/envs/altdev/lib/python3.11/site-packages/sphinx/util/inspect.py\", line 376, in safe_getattr\r\n    return getattr(obj, name, *defargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAttributeError: module 'altair' has no attribute 'parameter'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/joel/miniconda3/envs/altdev/lib/python3.11/site-packages/sphinx/ext/autodoc/importer.py\", line 98, in import_object\r\n    obj = attrgetter(obj, mangled_name)\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/joel/miniconda3/envs/altdev/lib/python3.11/site-packages/sphinx/ext/autodoc/__init__.py\", line 306, in get_attr\r\n    return autodoc_attrgetter(self.env.app, obj, name, *defargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/joel/miniconda3/envs/altdev/lib/python3.11/site-packages/sphinx/ext/autodoc/__init__.py\", line 2804, in autodoc_attrgetter\r\n    return safe_getattr(obj, name, *defargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/joel/miniconda3/envs/altdev/lib/python3.11/site-packages/sphinx/util/inspect.py\", line 392, in safe_getattr\r\n    raise AttributeError(name) from exc\r\nAttributeError: parameter\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2945/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2945/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2935", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2935/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2935/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2935/events", "html_url": "https://github.com/altair-viz/altair/issues/2935", "id": 1604081313, "node_id": "I_kwDOAoxtyc5fnFah", "number": 2935, "title": "Unhelpful error message when a field is incorrectly used as the outer else value in a `condition`", "user": {"login": "joelostblom", "id": 4560057, "node_id": "MDQ6VXNlcjQ1NjAwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4560057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelostblom", "html_url": "https://github.com/joelostblom", "followers_url": "https://api.github.com/users/joelostblom/followers", "following_url": "https://api.github.com/users/joelostblom/following{/other_user}", "gists_url": "https://api.github.com/users/joelostblom/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelostblom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelostblom/subscriptions", "organizations_url": "https://api.github.com/users/joelostblom/orgs", "repos_url": "https://api.github.com/users/joelostblom/repos", "events_url": "https://api.github.com/users/joelostblom/events{/privacy}", "received_events_url": "https://api.github.com/users/joelostblom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-01T01:48:48Z", "updated_at": "2023-03-26T19:41:41Z", "closed_at": "2023-03-26T19:41:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The underlying issue in this spec is that conditions can't have an outer value in the else condition that equals a field, [it has to be a value or a datum](https://stackoverflow.com/a/75598865/2166823), but the error message gives no hint that this is the case:\r\n\r\n```py\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nsource = data.cars()\r\n\r\nalt.Chart(source).mark_circle(size=60).encode(\r\n    x='Horsepower',\r\n    y='Miles_per_Gallon',\r\n    color='Origin',\r\n    tooltip=alt.condition(\r\n        alt.datum.Origin == 'USA',\r\n        'Name',\r\n        'Miles_per_Gallon'\r\n    )\r\n)\r\n```\r\n\r\n```\r\nTool tip has no parameter \"field\"\r\n...\r\n```\r\n\r\nThe old error message was not very helpful here either, but at least not as directly misleading. On altair 4.2 I see this:\r\n\r\n```\r\nSchemaError: '#/definitions/FieldOrDatumDefWithCondition<MarkPropFieldDef,(Gradient|string|null)>' is not a 'uri-reference'\r\n\r\nFailed validating 'format' in metaschema['properties']['$ref']:\r\n    {'format': 'uri-reference', 'type': 'string'}\r\n\r\nOn schema['$ref']:\r\n    '#/definitions/FieldOrDatumDefWithCondition<MarkPropFieldDef,(Gradient|string|null)>'\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2935/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2924", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2924/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2924/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2924/events", "html_url": "https://github.com/altair-viz/altair/issues/2924", "id": 1597977120, "node_id": "I_kwDOAoxtyc5fPzIg", "number": 2924, "title": "`interactive` does not work for layered, faceted chart with independent xscale and nominal/oridinal x-axis", "user": {"login": "joelostblom", "id": 4560057, "node_id": "MDQ6VXNlcjQ1NjAwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4560057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelostblom", "html_url": "https://github.com/joelostblom", "followers_url": "https://api.github.com/users/joelostblom/followers", "following_url": "https://api.github.com/users/joelostblom/following{/other_user}", "gists_url": "https://api.github.com/users/joelostblom/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelostblom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelostblom/subscriptions", "organizations_url": "https://api.github.com/users/joelostblom/orgs", "repos_url": "https://api.github.com/users/joelostblom/repos", "events_url": "https://api.github.com/users/joelostblom/events{/privacy}", "received_events_url": "https://api.github.com/users/joelostblom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-02-24T06:25:18Z", "updated_at": "2023-02-24T06:34:29Z", "closed_at": "2023-02-24T06:34:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Quite the special case this one, as can be seen from the long title.\r\n\r\nHere is an example:\r\n\r\n```py\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nsource = data.cars()\r\nchart = alt.Chart(source).mark_point().encode(\r\n    x='Cylinders:N'\r\n)\r\n\r\nalt.layer(chart).facet('Cylinders:N').resolve_scale(x='independent').interactive()\r\n```\r\n\r\n```\r\nJavascript Error: Unrecognized signal name: \"child_width\"\r\n\r\n```\r\nChanging to `x='Cylinders:Q'` makes the spec render as expected, as does removing any one component of the spec:\r\n\r\n```py\r\n# These all work\r\n\r\n# No interactive\r\nalt.layer(chart).facet('Cylinders:N').resolve_scale(x='independent')\r\n# No resolve_scale\r\nalt.layer(chart).facet('Cylinders:N').interactive()\r\n# No facet\r\nalt.layer(chart).resolve_scale(x='independent').interactive()\r\n# No layer\r\nchart.facet('Cylinders:N').resolve_scale(x='independent').interactive()\r\n```\r\n\r\nNo idea what is going on and low priority but thought I would record it.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2924/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2924/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2919", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2919/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2919/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2919/events", "html_url": "https://github.com/altair-viz/altair/issues/2919", "id": 1596238777, "node_id": "I_kwDOAoxtyc5fJKu5", "number": 2919, "title": "Strange behavior (no datasets) when using .to_html from streamlit", "user": {"login": "arogozhnikov", "id": 6318811, "node_id": "MDQ6VXNlcjYzMTg4MTE=", "avatar_url": "https://avatars.githubusercontent.com/u/6318811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arogozhnikov", "html_url": "https://github.com/arogozhnikov", "followers_url": "https://api.github.com/users/arogozhnikov/followers", "following_url": "https://api.github.com/users/arogozhnikov/following{/other_user}", "gists_url": "https://api.github.com/users/arogozhnikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arogozhnikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arogozhnikov/subscriptions", "organizations_url": "https://api.github.com/users/arogozhnikov/orgs", "repos_url": "https://api.github.com/users/arogozhnikov/repos", "events_url": "https://api.github.com/users/arogozhnikov/events{/privacy}", "received_events_url": "https://api.github.com/users/arogozhnikov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-02-23T05:15:18Z", "updated_at": "2023-02-23T21:37:03Z", "closed_at": "2023-02-23T06:17:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Chasing a very strange bug that appeared recently, and I see no simple way to minimally reproduce it.\r\n\r\nAltair is used within streamlit app.\r\n\r\nThere are two ways to output altair plot in streamlit.\r\n\r\n1. built-in (st.altair_plot) - this works normally\r\n2. using export to html, and then showing with st.components.v1.html   \r\n     I use this second method in some cases, because streamlit uses old vega, and does not support some features.\r\n    Rendered plots shown in this way are each shown in a separate iframe.\r\n\r\nStarting from some moment, **all** plots generated with method 2, are not shown, all they look empty:\r\n\r\n<img width=\"400\" alt=\"Screenshot 2023-02-22 at 8 51 35 PM\" src=\"https://user-images.githubusercontent.com/6318811/220823818-34727409-5e21-4e50-963d-6174635dd6a9.png\">\r\n\r\nRedeploying the app helps for a while. \r\nSo it looks like something changes within altair at some point.\r\n(FYI streamlit uses long-living python processes, so there is no 'reimporting' after app was started)\r\n\r\nLooking at generated html, there are **no datasets within spec.**, but I am not sure where to go from here \r\n\r\n[vega editor link](https://vega.github.io/editor/#/url/vega-lite/N4Igxg9gdgZglgcxALlANzgUwO4tJKAFzigFcJSBnAdTgBNCALFAFgAY2AacaYsiygAlMiRoRQBmDgF9p3ADYBDAJ6YATigDaoALaK1AaxQg1mMOO6YokOiSSoe8iBofxM8uschO1AfXogCpgIVp7IZPLy3JRgivKYeCB0EHokWlwAjJwATJwSnCycAKycAGycAOycABycAJwAutxqilAhWiAAxIpFGQBG-YFdfTAZozBDnXR12RKzk3QwEn3Lk5gSRZtFkxJ0PYPcnSwVI2OTvdPzh6Usi6uHFdXrmyANciDEhPFeED5DhMoAA4JZAgKApEhxEDvQgQX7EQFaUBuDzGbDueT-IEgsEQqBQ6RNEAAD0SKLCjixwOM4J0kMx72UZKwqNBagguG4AOpoNp9Ohsk4un0Rgc3JxhEwxIsID6iko7hIEogiO4dCZyAAtNkKu8rDY7IlJdLme4KcbCL5KID5HAZeKaXiCVy4fIEUiQOS0RiqTi+fiGUTSa4WRTvL7HXSA9DuBrkaHjOzOR9sZH+bJCWrFIRFIl8TocRl2Bk6o9ShI6nVqpXsjGQIwRAgxJJSlwQNh6EwUBkMhxuAASGINvTGMSEQGUZAAeinaGCigAdAg7YxSH0F3AIFOh5g9LP55rbZLZywFxkKgu2AuAFaUaDQoA)\r\n\r\n\r\nEnv: ubuntu 20.04\r\nPython 3.10\r\nAltair: 4.2.0 and 4.2.2 both affected\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2919/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2917", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2917/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2917/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2917/events", "html_url": "https://github.com/altair-viz/altair/issues/2917", "id": 1595063207, "node_id": "I_kwDOAoxtyc5fErun", "number": 2917, "title": "Install altair version 5 candidate ", "user": {"login": "rcolpo", "id": 5889181, "node_id": "MDQ6VXNlcjU4ODkxODE=", "avatar_url": "https://avatars.githubusercontent.com/u/5889181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rcolpo", "html_url": "https://github.com/rcolpo", "followers_url": "https://api.github.com/users/rcolpo/followers", "following_url": "https://api.github.com/users/rcolpo/following{/other_user}", "gists_url": "https://api.github.com/users/rcolpo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rcolpo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rcolpo/subscriptions", "organizations_url": "https://api.github.com/users/rcolpo/orgs", "repos_url": "https://api.github.com/users/rcolpo/repos", "events_url": "https://api.github.com/users/rcolpo/events{/privacy}", "received_events_url": "https://api.github.com/users/rcolpo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-02-22T12:59:05Z", "updated_at": "2023-03-02T01:25:11Z", "closed_at": "2023-02-22T13:13:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI'm trying to install Altair v5 with \"pip install altair==5.0.0rc1\" (got the command from [here](https://binste.github.io/altair-docs/gallery/grouped_bar_chart2.html)), but I have an error from pip:\r\n\r\n`ERROR: Could not find a version that satisfies the requirement altair==5.0.0rc1 (from versions: 1.0.0rc1, 1.0.0rc2, 1.0.0rc3, 1.0.0rc4, 1.0.0, 1.2.0, 1.2.1, 2.0.0rc1, 2.0.0rc2, 2.0.0, 2.0.1, 2.1.0, 2.2.0, 2.2.1, 2.2.2, 2.3.0, 2.4.1, 3.0.0rc1, 3.0.0, 3.0.1, 3.1.0, 3.2.0, 3.3.0, 4.0.0, 4.0.1, 4.1.0, 4.2.0rc1, 4.2.0, 4.2.1, 4.2.2) \r\nERROR: No matching distribution found for altair==5.0.0rc1\"`\r\n\r\nI want to install the new version to check if it can help me to make [a graph that I described in StackOverflow](https://stackoverflow.com/questions/75522071/altair-plot-using-facet-column-and-shaded-area?noredirect=1#comment133253029_75522071). \r\n\r\nI'm using python 3.11 and pip 23.0.1. ", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2917/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2915", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2915/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2915/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2915/events", "html_url": "https://github.com/altair-viz/altair/issues/2915", "id": 1594426294, "node_id": "I_kwDOAoxtyc5fCQO2", "number": 2915, "title": "Some errors in layered or faceted specs raise the wrong error message", "user": {"login": "joelostblom", "id": 4560057, "node_id": "MDQ6VXNlcjQ1NjAwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4560057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelostblom", "html_url": "https://github.com/joelostblom", "followers_url": "https://api.github.com/users/joelostblom/followers", "following_url": "https://api.github.com/users/joelostblom/following{/other_user}", "gists_url": "https://api.github.com/users/joelostblom/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelostblom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelostblom/subscriptions", "organizations_url": "https://api.github.com/users/joelostblom/orgs", "repos_url": "https://api.github.com/users/joelostblom/repos", "events_url": "https://api.github.com/users/joelostblom/events{/privacy}", "received_events_url": "https://api.github.com/users/joelostblom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "binste", "id": 23366411, "node_id": "MDQ6VXNlcjIzMzY2NDEx", "avatar_url": "https://avatars.githubusercontent.com/u/23366411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binste", "html_url": "https://github.com/binste", "followers_url": "https://api.github.com/users/binste/followers", "following_url": "https://api.github.com/users/binste/following{/other_user}", "gists_url": "https://api.github.com/users/binste/gists{/gist_id}", "starred_url": "https://api.github.com/users/binste/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binste/subscriptions", "organizations_url": "https://api.github.com/users/binste/orgs", "repos_url": "https://api.github.com/users/binste/repos", "events_url": "https://api.github.com/users/binste/events{/privacy}", "received_events_url": "https://api.github.com/users/binste/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "binste", "id": 23366411, "node_id": "MDQ6VXNlcjIzMzY2NDEx", "avatar_url": "https://avatars.githubusercontent.com/u/23366411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binste", "html_url": "https://github.com/binste", "followers_url": "https://api.github.com/users/binste/followers", "following_url": "https://api.github.com/users/binste/following{/other_user}", "gists_url": "https://api.github.com/users/binste/gists{/gist_id}", "starred_url": "https://api.github.com/users/binste/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binste/subscriptions", "organizations_url": "https://api.github.com/users/binste/orgs", "repos_url": "https://api.github.com/users/binste/repos", "events_url": "https://api.github.com/users/binste/events{/privacy}", "received_events_url": "https://api.github.com/users/binste/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2023-02-22T04:11:09Z", "updated_at": "2023-04-25T15:22:05Z", "closed_at": "2023-04-25T15:22:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "A spec that is not layered will return to correct error in this case:\r\n\r\n```py\r\nalt.Chart().mark_point().encode(tooltip=[{'wrong'}])\r\n```\r\n\r\n```\r\nSchemaValidationError: '[{'field': {'wrong'}}]' is an invalid value for `tooltip`:\r\n\r\n[{'field': {'wrong'}}] is not of type 'object'\r\n[{'field': {'wrong'}}] is not of type 'object'\r\n{'wrong'} is not valid under any of the given schemas\r\n[{'field': {'wrong'}}] is not of type 'null'\r\n```\r\n\r\nHowever when the same error occurs within a layered spec, then the return error points in the wrong direction:\r\n\r\n```py\r\nalt.layer(\r\n    alt.Chart().mark_point().encode(tooltip=[{'wrong'}])\r\n)\r\n```\r\n\r\n```\r\nSchemaValidationError: `LayerChart` has no parameter named 'mark'\r\n\r\nExisting parameter names are:\r\nlayer        data          height    projection   usermeta   \r\nautosize     datasets      name      resolve      view       \r\nbackground   description   padding   title        width      \r\nconfig       encoding      params    transform               \r\n\r\nSee the help for `LayerChart` to read the full description of these parameters\r\n```\r\n\r\nSame with a facet (but concatenation works fine)the:\r\n\r\n```py\r\nalt.Chart(pd.DataFrame({'a': [1]})).mark_point().encode(tooltip=[{'wrong'}]).facet()\r\n```\r\n\r\n```\r\nSchemaValidationError: `Spec` has no parameter named 'mark'\r\n\r\nExisting parameter names are:\r\nargs   \r\n\r\nSee the help for `Spec` to read the full description of these parameters\r\n```\r\n\r\nI don't have time to investigate right now but this might be due to the specific error handling of parameters rather than the new we have retreating errors without deep validation. In other words, we might need a more specific check for when to include the suggested parameters in #2565.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2915/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2915/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2911", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2911/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2911/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2911/events", "html_url": "https://github.com/altair-viz/altair/issues/2911", "id": 1594038034, "node_id": "I_kwDOAoxtyc5fAxcS", "number": 2911, "title": "Basic example in documentation shouldn't link to advanced usage as preread", "user": {"login": "dylancashman", "id": 1182068, "node_id": "MDQ6VXNlcjExODIwNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/1182068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dylancashman", "html_url": "https://github.com/dylancashman", "followers_url": "https://api.github.com/users/dylancashman/followers", "following_url": "https://api.github.com/users/dylancashman/following{/other_user}", "gists_url": "https://api.github.com/users/dylancashman/gists{/gist_id}", "starred_url": "https://api.github.com/users/dylancashman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dylancashman/subscriptions", "organizations_url": "https://api.github.com/users/dylancashman/orgs", "repos_url": "https://api.github.com/users/dylancashman/repos", "events_url": "https://api.github.com/users/dylancashman/events{/privacy}", "received_events_url": "https://api.github.com/users/dylancashman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-02-21T20:09:17Z", "updated_at": "2023-03-22T14:58:04Z", "closed_at": "2023-03-22T14:58:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A documentation bug IMO: The *Basic Statistical Visualization* page in the *Getting Started* section of the documentation lists as a preread the *Displaying Altair Plots* page, which is in the *Advanced Usage* section of the documentation.  \r\n\r\n> First, you will need to make sure you have the Altair package and its dependencies installed (see [Installation](https://altair-viz.github.io/getting_started/installation.html#installation)) and make sure you understand how altair plots are displayed (see [Displaying Altair Charts](https://altair-viz.github.io/user_guide/display_frontends.html#displaying-charts)).\r\n\r\nI think this is a bit misleading and could turn people off of trying out Altair - they'll go to the first example, click the preread, and see it's advanced usage and step away.\r\n\r\nI think the wording should be changed so that the display frontends section is optional - \"read *Displaying Altair Plots* if you aren't using jupyter as a backend\", something like that.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2911/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2911/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2896", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2896/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2896/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2896/events", "html_url": "https://github.com/altair-viz/altair/issues/2896", "id": 1590463776, "node_id": "I_kwDOAoxtyc5ezI0g", "number": 2896, "title": "Multiple rounds of the same error message", "user": {"login": "joelostblom", "id": 4560057, "node_id": "MDQ6VXNlcjQ1NjAwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4560057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelostblom", "html_url": "https://github.com/joelostblom", "followers_url": "https://api.github.com/users/joelostblom/followers", "following_url": "https://api.github.com/users/joelostblom/following{/other_user}", "gists_url": "https://api.github.com/users/joelostblom/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelostblom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelostblom/subscriptions", "organizations_url": "https://api.github.com/users/joelostblom/orgs", "repos_url": "https://api.github.com/users/joelostblom/repos", "events_url": "https://api.github.com/users/joelostblom/events{/privacy}", "received_events_url": "https://api.github.com/users/joelostblom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-18T20:38:51Z", "updated_at": "2023-03-18T18:43:44Z", "closed_at": "2023-03-18T18:43:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I noticed that some specs shows the same error multiple time, for example:\r\n\r\n```py\r\nsource = data.cars()\r\nalt.Chart(source).mark_text(align=\"right\").encode(\r\n    alt.Text(\"Horsepower:N\", bandPosition='4')\r\n)\r\n```\r\n\r\n```\r\n'4' is not of type 'number'\r\nAdditional properties are not allowed ('field' was unexpected)\r\n'4' is not of type 'number'\r\nAdditional properties are not allowed ('bandPosition', 'field', 'type' were unexpected)\r\n```\r\n\r\nSometimes these messages can become quite long:\r\n\r\n```python\r\nalt.Text(\"Horsepower:N\", type=dict(text=\"Horsepower\", align=\"right\"))\r\n```\r\n\r\n```\r\n{'text': 'Horsepower', 'align': 'right'} is not one of ['quantitative', 'ordinal', 'temporal', 'nominal']\r\n{'text': 'Horsepower', 'align': 'right'} is not of type 'string'\r\nAdditional properties are not allowed ('field' was unexpected)\r\n{'text': 'Horsepower', 'align': 'right'} is not one of ['quantitative', 'ordinal', 'temporal', 'nominal', 'geojson']\r\n{'text': 'Horsepower', 'align': 'right'} is not of type 'string'\r\nAdditional properties are not allowed ('field', 'type' were unexpected)\r\n```\r\n\r\nGranted that these multiple errors are likely rare this is probably not high priority (and maybe even desirable for some reasons that escapes me right now), but I thought I would document them anyways.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2896/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2896/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2895", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2895/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2895/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2895/events", "html_url": "https://github.com/altair-viz/altair/issues/2895", "id": 1590283002, "node_id": "I_kwDOAoxtyc5eycr6", "number": 2895, "title": "ga: `DeprecationWarning`: SelectableGroups dict interface is deprecated. Use select.", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-18T10:09:49Z", "updated_at": "2023-02-19T18:11:21Z", "closed_at": "2023-02-19T18:11:21Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I see the following deprecation warning in our tests:\r\n```cmd\r\ntests/vegalite/v5/tests/test_display.py::test_check_renderer_options\r\n[51](https://github.com/altair-viz/altair/actions/runs/4210647283/jobs/7308470442#step:5:52)\r\n  /home/runner/work/altair/altair/altair/utils/plugin_registry.py:124: \r\nDeprecationWarning: SelectableGroups dict interface is deprecated. Use select.\r\n\r\n[52](https://github.com/altair-viz/altair/actions/runs/4210647283/jobs/7308470442#step:5:53)\r\n\r\n    more_exts = [ep.name for ep in entry_points().get(self.entry_point_group, [])]\r\n```\r\nIt is around here in the code: https://github.com/altair-viz/altair/blob/master/altair/utils/plugin_registry.py#L124", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2895/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2895/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2894", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2894/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2894/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2894/events", "html_url": "https://github.com/altair-viz/altair/issues/2894", "id": 1590282023, "node_id": "I_kwDOAoxtyc5eyccn", "number": 2894, "title": "ga: `DeprecationWarning`: The metaschema specified by $schema was not found. Using the latest draft to validate, but this will raise an error in the future.", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-18T10:05:45Z", "updated_at": "2023-02-19T17:59:36Z", "closed_at": "2023-02-19T17:59:36Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I see the following deprecation warning in our GitHub tests:\r\n```cmd\r\n/home/runner/work/altair/altair/altair/utils/schemapi.py:58: DeprecationWarning: \r\nThe metaschema specified by $schema was not found. \r\nUsing the latest draft to validate, but this will raise an error in the future.\r\n\r\n[56](https://github.com/altair-viz/altair/actions/runs/4210647283/jobs/7308470442#step:5:57)\r\n\r\n    validator_cls = jsonschema.validators.validator_for(rootschema)\r\n```\r\nIt is around here in the code: https://github.com/altair-viz/altair/blob/master/altair/utils/schemapi.py#L58.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2894/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2894/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2879", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2879/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2879/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2879/events", "html_url": "https://github.com/altair-viz/altair/issues/2879", "id": 1581127040, "node_id": "I_kwDOAoxtyc5ePhWA", "number": 2879, "title": "tooltip throws error for Categorical variable", "user": {"login": "jbloom", "id": 1906801, "node_id": "MDQ6VXNlcjE5MDY4MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1906801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbloom", "html_url": "https://github.com/jbloom", "followers_url": "https://api.github.com/users/jbloom/followers", "following_url": "https://api.github.com/users/jbloom/following{/other_user}", "gists_url": "https://api.github.com/users/jbloom/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbloom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbloom/subscriptions", "organizations_url": "https://api.github.com/users/jbloom/orgs", "repos_url": "https://api.github.com/users/jbloom/repos", "events_url": "https://api.github.com/users/jbloom/events{/privacy}", "received_events_url": "https://api.github.com/users/jbloom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-02-12T05:15:41Z", "updated_at": "2023-02-18T10:14:12Z", "closed_at": "2023-02-18T10:14:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following code used to work in recent versions of `altair` including the current in-development branch\r\n\r\nBut by commit f8912bad75d4247ab7 this code throws an error.\r\n\r\nThe problem appears to be that specifying a variable for a tooltip without a type throws an error if the variable in a `pandas.Categorical`.\r\n\r\nSpecifically, this code:\r\n\r\n````\r\nimport altair as alt\r\nimport pandas as pd\r\n\r\ndf = (\r\n    pd.DataFrame({\"x\": [1, 2], \"y\": [1, 2], \"note\": [\"a\", \"b\"]})\r\n    .assign(note=lambda x: pd.Categorical(x[\"note\"], ordered=True))\r\n)\r\n\r\nalt.Chart(df).encode(x=\"x\", y=\"y\", tooltip=[\"x\", \"y\", \"note\"]).mark_point()\r\n```\r\n\r\nNow throws an error.\r\n\r\nThe error is:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nSchemaValidationError                     Traceback (most recent call last)\r\nFile /fh/fast/bloom_j/software/miniconda3/envs/dms-vep-pipeline/lib/python3.11/site-packages/altair/vegalite/v5/api.py:2194, in Chart.to_dict(self, *args, **kwargs)\r\n   2192     copy.data = core.InlineData(values=[{}])\r\n   2193     return super(Chart, copy).to_dict(*args, **kwargs)\r\n-> 2194 return super().to_dict(*args, **kwargs)\r\n\r\nFile /fh/fast/bloom_j/software/miniconda3/envs/dms-vep-pipeline/lib/python3.11/site-packages/altair/vegalite/v5/api.py:559, in TopLevelMixin.to_dict(self, *args, **kwargs)\r\n    556 context[\"top_level\"] = False\r\n    557 kwargs[\"context\"] = context\r\n--> 559 dct = super(TopLevelMixin, copy).to_dict(*args, **kwargs)\r\n    561 # TODO: following entries are added after validation. Should they be validated?\r\n    562 if is_top_level:\r\n    563     # since this is top-level we add $schema if it's missing\r\n\r\nFile /fh/fast/bloom_j/software/miniconda3/envs/dms-vep-pipeline/lib/python3.11/site-packages/altair/utils/schemapi.py:422, in SchemaBase.to_dict(self, validate, ignore, context)\r\n    420         self.validate(result)\r\n    421     except jsonschema.ValidationError as err:\r\n--> 422         raise SchemaValidationError(self, err)\r\n    423 return result\r\n\r\nSchemaValidationError: Invalid specification\r\n\r\n        altair.vegalite.v5.api.Chart->0, validating 'type'\r\n\r\n        [{'field': 'x', 'type': 'quantitative'}, {'field': 'y', 'type': 'quantitative'}, {'field': 'note', 'type': 'ordinal', 'sort': ['a', 'b']}] is not of type 'object'\r\n        [{'field': 'x', 'type': 'quantitative'}, {'field': 'y', 'type': 'quantitative'}, {'field': 'note', 'type': 'ordinal', 'sort': ['a', 'b']}] is not of type 'object'\r\n        Additional properties are not allowed ('sort' was unexpected)\r\n        [{'field': 'x', 'type': 'quantitative'}, {'field': 'y', 'type': 'quantitative'}, {'field': 'note', 'type': 'ordinal', 'sort': ['a', 'b']}] is not of type 'null'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2879/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2876", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2876/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2876/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2876/events", "html_url": "https://github.com/altair-viz/altair/issues/2876", "id": 1574207796, "node_id": "I_kwDOAoxtyc5d1IE0", "number": 2876, "title": "Repeated values in date axis", "user": {"login": "lucasbalponti", "id": 122104166, "node_id": "U_kgDOB0cpZg", "avatar_url": "https://avatars.githubusercontent.com/u/122104166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucasbalponti", "html_url": "https://github.com/lucasbalponti", "followers_url": "https://api.github.com/users/lucasbalponti/followers", "following_url": "https://api.github.com/users/lucasbalponti/following{/other_user}", "gists_url": "https://api.github.com/users/lucasbalponti/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucasbalponti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucasbalponti/subscriptions", "organizations_url": "https://api.github.com/users/lucasbalponti/orgs", "repos_url": "https://api.github.com/users/lucasbalponti/repos", "events_url": "https://api.github.com/users/lucasbalponti/events{/privacy}", "received_events_url": "https://api.github.com/users/lucasbalponti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-02-07T12:05:26Z", "updated_at": "2023-02-07T15:22:16Z", "closed_at": "2023-02-07T15:22:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello guys!\r\n\r\nI'm trying to make a bar graph which has its X axis's type as time. I formatted it using 'utcyearmonth', but the X axis's label repeats values.\r\n\r\nIs it a bug? Is there a way to solve it?\r\n\r\n[This is what happens to the graph](https://i.stack.imgur.com/z5qoX.png)\r\n\r\nThe code I've written is:\r\n\r\n```\r\nserie_temporal = alt.Chart(base_filtrada).mark_bar(size=60).encode(\r\n    x=alt.X(\r\n        'utcyearmonth(Data):T', \r\n        axis=alt.Axis(format=\"%Y %B\"),\r\n        scale = alt.Scale(nice={'interval': 'month', 'step': 1})\r\n    ),\r\n    y='sum(Valor):Q',\r\n    color='Tipo de despesa'\r\n).properties(\r\n    height=400\r\n)\r\n```\r\n\r\nI already tried changing the axis type from time to nominal, ordinal and quantitative and removing the scale configuration.\r\n\r\nThank you in advance!", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2876/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2876/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2875", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2875/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2875/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2875/events", "html_url": "https://github.com/altair-viz/altair/issues/2875", "id": 1573009178, "node_id": "I_kwDOAoxtyc5dwjca", "number": 2875, "title": "\"Open in Vega Editor\" does not work in VS Code Notebooks", "user": {"login": "JannisKoeksel", "id": 65769490, "node_id": "MDQ6VXNlcjY1NzY5NDkw", "avatar_url": "https://avatars.githubusercontent.com/u/65769490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JannisKoeksel", "html_url": "https://github.com/JannisKoeksel", "followers_url": "https://api.github.com/users/JannisKoeksel/followers", "following_url": "https://api.github.com/users/JannisKoeksel/following{/other_user}", "gists_url": "https://api.github.com/users/JannisKoeksel/gists{/gist_id}", "starred_url": "https://api.github.com/users/JannisKoeksel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JannisKoeksel/subscriptions", "organizations_url": "https://api.github.com/users/JannisKoeksel/orgs", "repos_url": "https://api.github.com/users/JannisKoeksel/repos", "events_url": "https://api.github.com/users/JannisKoeksel/events{/privacy}", "received_events_url": "https://api.github.com/users/JannisKoeksel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-02-06T17:44:41Z", "updated_at": "2023-04-03T23:01:27Z", "closed_at": "2023-04-03T23:01:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "The actions View Source, View Compiled Vega and Open in Vega Editor provided next to the plot do not work in VS Code. \r\nThe links redirect to the top of the notebook, so I'm guessing the event handlers do not work as intended.\r\nI am using Version 4.2.2. ", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2875/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2875/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2857", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2857/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2857/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2857/events", "html_url": "https://github.com/altair-viz/altair/issues/2857", "id": 1559099540, "node_id": "I_kwDOAoxtyc5c7fiU", "number": 2857, "title": "Issue: type object 'Draft7Validator' has no attribute 'FORMAT_CHECKER'", "user": {"login": "driadi", "id": 9815020, "node_id": "MDQ6VXNlcjk4MTUwMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/9815020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/driadi", "html_url": "https://github.com/driadi", "followers_url": "https://api.github.com/users/driadi/followers", "following_url": "https://api.github.com/users/driadi/following{/other_user}", "gists_url": "https://api.github.com/users/driadi/gists{/gist_id}", "starred_url": "https://api.github.com/users/driadi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/driadi/subscriptions", "organizations_url": "https://api.github.com/users/driadi/orgs", "repos_url": "https://api.github.com/users/driadi/repos", "events_url": "https://api.github.com/users/driadi/events{/privacy}", "received_events_url": "https://api.github.com/users/driadi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-27T03:11:56Z", "updated_at": "2023-01-27T23:17:17Z", "closed_at": "2023-01-27T23:15:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Came here because I found this error when running Great Expectations and it seems that the issue occurred in v4.2.1. \r\n\r\nI haven't verified this yet but it seems that `jsonschema.Draft7Validator` only has `FORMAT_CHECKER` attribute since jsonschema >= v4.3.0 so perhaps the requirements file in this module needs to be updated?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2857/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2857/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2856", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2856/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2856/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2856/events", "html_url": "https://github.com/altair-viz/altair/issues/2856", "id": 1558912759, "node_id": "I_kwDOAoxtyc5c6x73", "number": 2856, "title": "Unrecognized signal name while rendering altair example 'Multiple Interactions' in VL", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-26T23:10:46Z", "updated_at": "2023-02-25T23:48:25Z", "closed_at": "2023-02-25T23:48:25Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "There is an issue with the rendering of example Multiple Interactions in Vega-Lite ([Open the Chart in the Vega Editor](https://vega.github.io/editor/#/url/vega-lite/N4Igxg9gdgZglgcxALlANzgUwO4tJKAFzigFcJSBnAdTgBNCALFAFgAY2AacaYsiygAlMiRoRQBmDgF9p3NATABDccgDaoRopUoNIALZKATgGs8IQgE8ADphQhrEEuO7wANm8x0UhI6UxyIJhQkHQkSKgWEBBuxNbm8Jhu3sggACpwhJ4g3Fa29lAQ+iRKbiCBAB4JWMn21BBGydj0mAD6AOJGEJSUOSCUytmRYG5K+vHIvv7cdEVKJLoAjBwrnMsrG2wAuoF5dqkAjqRKRJkqcGh2gZbVSSkgAJIAsgAiAEKtAErnUEi5NvsQEcTsRCOdLuVAowRAgxCgAEwcbiUJKYMDEaDmT6opQogAEAE1MMZWuY9vZKOFstwAEYkFKgEjWUiqEBGE4IOzcQxVZCIxYADm5C2QiwAnAA2MXIwiYCaLQKJZK9dQgbGeXFtInGEA7XaZIYgADKbhaRjxADE4LFMEZwn1fCdKDAGvpdPhSmBSKNZfYYG5okYABR0FSkfQAOme7y+PwQAEo+rj7J8KFA6F5WtGPt8+Eg5B63F6fYDQ4RwxGAApdOikdFwaCtN6kOicwh4gB8ePWmzYEbYeIA-N2OHjkCOkyqQIJSOmjJmntbTY3qxBa-XMQXwJ7vSpAZZicGyxX1cSUa0XnvE9xk6lT5rWtqjOVOKB3LLn6kQ2HI9nY3nOzxNhEy3d9bVuWpUieSsAEEYP-e1uGgTAAHkYF0EB2j6AA5ABhABaRYAHY+krLDuDIwiJD6T5dVkV8QDAz9QBRTwNygFMcXxJ9SVkLZuGaBhmD5GQGMMUwyQBexHGcPp3E8FIpgCbhglCe1IkIaJYjgCY3xqe4MiyLkLCk1JCmKKBShfEBeT0u46gaJoWg6Loej6AZSn2fBRnGHw-EwGY5hFNQeyRULNh2f58kOY5TjBYgIWuCD7j-XNEJM6KgVi0FwSuKEYThESuH6VF2PMdpgnnSTMspX5qUY-SVTUEAniUAArBoOkqux+JAOl03MJkWQpUqXBACBrAxKAmpAGCyu4GC6EuIhSCq7g3lGMATDxXCii8G5uF2-R9r6XaQltQgAHpK1tF0jEMc6+heCAvWOohjAOkAXnZQw+kEBoumfbgnioOBBhouZTjAHa9roT60kYO0PFtS6jSoWxpuM6hMEoD8OL1fUjPsb6JtmbAoEta0P3Sx1prut11ELYs9z9AMGm-ctf1eHM42vEBbzVNMMzoLNuYQ34XyZ3dfVSY9I1XdcpqbFs20A8KVn7IcRwHcdlknewZznBclwbKBWgVuspsl7ci2l-dDw5k8uLaS9ZT5gX73PJ9raY+xHa5mM0t+QDgJ9qnwMiJV7mguDxb+caoFQ9DVXIkA8MIkiKNTyjFmo7haL1BjfciVi0St1IKqgKq+IE+gmARGRIs0bRVD0cSzA00yHCcIg5KXLw-P8QJVLXdT8BiBpzAIMJy7syCWtg+Cg-jzxOQG5AyA8KLAXMkoymRUbTZTONrLQUp-HsU1YUIBB2RuXYtLiZL7EM+ryTMoo9+s2yGvs1J6kaHQQSbROjdF6MiQYXlwA+QmEpQKhhgrhTWL2FYkUMqAmBHFXK1kbiR30vYVKJ9t72EwTlBKeVuDQlEKoRExVS5lUiMvaqgJaoIHqlHGaMcl4n16v1BkIAhqsnZGECAfQJpTRmqndOxFSLZ3aFRGidF6IWANICb4Ii8TNkIJpCmghRBXzEDTdkdNXTuhtszGWjE2ZHh-FGMWy93ZTlTLOYWotA4ny3IMCxpZbEW3YsrVsmB2xdnVhwTWw51hjgnDeKchs6DzhFouDwptzY1ktkfTxO4Sz2APMYf2EZPYuyvPrO8ztHyHjDjaT8IB8mEIAl2UOoFw7MV-vPLhccxGJzQhhKRBEZFZ1kQo-OSjeqCXrkVLc7dmHSR7mNeSA9Jj+WHiEUeEsS5wAAF5QOnpkI+kQz5uAvnyAArAfNi5cQBvEQJolWQTKZuH0L0RU+DUhxISa0JJy4zZ+KtsQmKIIzjkOsppGIT88F-3SKoh0Xdd6WTKJUZ+-9HJAOcqAtyEDPJTxgYPAKIBZgII4uoJBoSOBoPfllAF8ULhXG4LgueKV7FEPQSQ7KgLqWQkoQVGhSISrnL2aAK5CAbmBPbFaB5KpQDktYfVPhg0oDMlZGAaEW0aQQCqLIQmhpcLKpMKqiolpXQqDzA6YxzpTGM3MXbVmgZamMrzI4lMQtMx1PtJk222TZa+LSf45sIq1YoL7AOCJo5dZsBKdOFx7zPkpJ+RkhiXirWpFyTYzmBSymu0wA60pGovYVKaVUv2cs7HuPqUBECRdmmIoXrHJhSEunJ2ar0jOsjBm50UXqUZddhK0OkDsXqZYlDmFWmUVIYhCDWEoMgS6l0wB0CgBGNqlAMymjQEYCMicrryv0JdS4CAlD4QHSiQglAAACaBFgRnhGKfsl0B2XX0BADAOMF2UExK4Q1qhQDWGMCiLE6aWaet9Bq7gAASAY0Jfqju0ROqdO7MB7ojAgTIjBSA0gjA2S64HMCGDg3u-CppZQ7pYBGYi-YX2biAA)).\r\n\r\nIt renders OK in [current documentation](https://altair-viz.github.io/gallery/multiple_interactions.html) and in the [proposed v5 documentation](https://joelostblom.github.io/altair-docs/gallery/multiple_interactions.html).\r\nBut there is this `Big_Budget_Films__vgsid_` option in the parameters. I don't know where this `__vgsid_` comes from.\r\n\r\n If I open the chart in 'Open in Vega Editor' using the three dots then it will present the following error:\r\n```cmd\r\nUnrecognized signal name: \"Big_Budget_Films_tuple_fields\"\r\n```\r\nI feel this specification requires a bit of reworking.\r\n\r\n[Reproduce the Issue in Colab](https://colab.research.google.com/gist/mattijn/783fea12dbf806d208066716057191da/altair_issue_-2856.ipynb)", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2856/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2845", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2845/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2845/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2845/events", "html_url": "https://github.com/altair-viz/altair/issues/2845", "id": 1551622211, "node_id": "I_kwDOAoxtyc5ce-BD", "number": 2845, "title": "jsonschema.validators.SchemaError when Compound Charts", "user": {"login": "Cecily123", "id": 53707030, "node_id": "MDQ6VXNlcjUzNzA3MDMw", "avatar_url": "https://avatars.githubusercontent.com/u/53707030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cecily123", "html_url": "https://github.com/Cecily123", "followers_url": "https://api.github.com/users/Cecily123/followers", "following_url": "https://api.github.com/users/Cecily123/following{/other_user}", "gists_url": "https://api.github.com/users/Cecily123/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cecily123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cecily123/subscriptions", "organizations_url": "https://api.github.com/users/Cecily123/orgs", "repos_url": "https://api.github.com/users/Cecily123/repos", "events_url": "https://api.github.com/users/Cecily123/events{/privacy}", "received_events_url": "https://api.github.com/users/Cecily123/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-01-21T00:41:01Z", "updated_at": "2023-03-02T01:30:08Z", "closed_at": "2023-01-26T19:05:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I'm using latest version of altair(4.2.0) and my python version is 3.9.5. Codes worked before now breaks with SchemaError.\r\n\r\nPlease see below codes and Stacktrace: \r\n\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nsource = data.cars()\r\n\r\nbrush = alt.selection(type='interval', resolve='global')\r\n\r\nbase = alt.Chart(source).mark_point().encode(\r\n    y='Miles_per_Gallon',\r\n    color=alt.condition(brush, 'Origin', alt.ColorValue('gray')),\r\n).add_selection(\r\n    brush\r\n).properties(\r\n    width=250,\r\n    height=250\r\n)\r\n\r\nbase.encode(x='Horsepower') | base.encode(x='Acceleration')\r\n```\r\n```\r\n---------------------------------------------------------------------------\r\nSchemaError                               Traceback (most recent call last)\r\n/usr/local/lib/python3.9/site-packages/altair/vegalite/v4/api.py in TopLevelMixin.to_dict(self, *args, **kwargs)\r\n    381 kwargs[\"context\"] = context\r\n    383 try:\r\n--> 384     dct = super(TopLevelMixin, copy).to_dict(*args, **kwargs)\r\n    385 except jsonschema.ValidationError:\r\n    386     dct = None\r\n\r\n/usr/local/lib/python3.9/site-packages/altair/utils/schemapi.py in SchemaBase.to_dict(self, validate, ignore, context)\r\n    336 if validate:\r\n    337     try:\r\n--> 338         self.validate(result)\r\n    339     except jsonschema.ValidationError as err:\r\n    340         raise SchemaValidationError(self, err)\r\n\r\n/usr/local/lib/python3.9/site-packages/altair/utils/schemapi.py in SchemaBase.validate(cls, instance, schema)\r\n    441     schema = cls._schema\r\n    442 resolver = jsonschema.RefResolver.from_schema(cls._rootschema or cls._schema)\r\n--> 443 return jsonschema.validate(\r\n    444     instance, schema, cls=cls._validator, resolver=resolver\r\n    445 )\r\n\r\n/usr/local/lib/python3.9/site-packages/jsonschema/validators.py in validate(instance, schema, cls, *args, **kwargs)\r\n   1114 if cls is None:\r\n   1115     cls = validator_for(schema)\r\n-> 1117 cls.check_schema(schema)\r\n   1118 validator = cls(schema, *args, **kwargs)\r\n   1119 error = exceptions.best_match(validator.iter_errors(instance))\r\n\r\n/usr/local/lib/python3.9/site-packages/jsonschema/validators.py in create.<locals>.Validator.check_schema(cls, schema, format_checker)\r\n    226 validator = Validator(\r\n    227     schema=cls.META_SCHEMA,\r\n    228     format_checker=format_checker,\r\n    229 )\r\n    230 for error in validator.iter_errors(schema):\r\n--> 231     raise exceptions.SchemaError.create_from(error)\r\n\r\nSchemaError: '#/definitions/TopLevelNormalizedHConcatSpec<GenericSpec>' is not a 'uri-reference'\r\n\r\nFailed validating 'format' in metaschema['properties']['$ref']:\r\n    {'format': 'uri-reference', 'type': 'string'}\r\n\r\nOn schema['$ref']:\r\n    '#/definitions/TopLevelNormalizedHConcatSpec<GenericSpec>'\r\n\r\nalt.HConcatChart(...)\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2845/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2839", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2839/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2839/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2839/events", "html_url": "https://github.com/altair-viz/altair/issues/2839", "id": 1536628602, "node_id": "I_kwDOAoxtyc5blxd6", "number": 2839, "title": "Ranged dot plot documentation mismatch (between Altair and vega-lite)", "user": {"login": "johanneswerner", "id": 34099811, "node_id": "MDQ6VXNlcjM0MDk5ODEx", "avatar_url": "https://avatars.githubusercontent.com/u/34099811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johanneswerner", "html_url": "https://github.com/johanneswerner", "followers_url": "https://api.github.com/users/johanneswerner/followers", "following_url": "https://api.github.com/users/johanneswerner/following{/other_user}", "gists_url": "https://api.github.com/users/johanneswerner/gists{/gist_id}", "starred_url": "https://api.github.com/users/johanneswerner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johanneswerner/subscriptions", "organizations_url": "https://api.github.com/users/johanneswerner/orgs", "repos_url": "https://api.github.com/users/johanneswerner/repos", "events_url": "https://api.github.com/users/johanneswerner/events{/privacy}", "received_events_url": "https://api.github.com/users/johanneswerner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-01-17T15:57:59Z", "updated_at": "2023-03-02T01:29:32Z", "closed_at": "2023-01-18T16:52:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "The documentation for the ranged dot plot for [Altair](https://altair-viz.github.io/gallery/ranged_dot_plot.html) and [Vega-lite](https://vega.github.io/vega-lite/examples/layer_ranged_dot.html) shows different outcomes. \r\n\r\nI believe that the plot for Altair is incorrect (as the dots are missing). \r\n\r\n**Altair**\r\n\r\n![image](https://user-images.githubusercontent.com/34099811/212946487-46d58456-3a92-48c2-b74c-f75efbec8647.png)\r\n\r\n\r\n**Vega-Lite**\r\n\r\n![image](https://user-images.githubusercontent.com/34099811/212946809-6f033041-b64b-4893-a4c4-dcb63cb26633.png)\r\n\r\nProbably not the correct place to ask this question, but how can I produce the lower plot with Altair?\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2839/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2839/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2819", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2819/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2819/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2819/events", "html_url": "https://github.com/altair-viz/altair/issues/2819", "id": 1524480205, "node_id": "I_kwDOAoxtyc5a3bjN", "number": 2819, "title": "Methods missing from chart completion menu", "user": {"login": "joelostblom", "id": 4560057, "node_id": "MDQ6VXNlcjQ1NjAwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4560057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelostblom", "html_url": "https://github.com/joelostblom", "followers_url": "https://api.github.com/users/joelostblom/followers", "following_url": "https://api.github.com/users/joelostblom/following{/other_user}", "gists_url": "https://api.github.com/users/joelostblom/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelostblom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelostblom/subscriptions", "organizations_url": "https://api.github.com/users/joelostblom/orgs", "repos_url": "https://api.github.com/users/joelostblom/repos", "events_url": "https://api.github.com/users/joelostblom/events{/privacy}", "received_events_url": "https://api.github.com/users/joelostblom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-08T12:03:13Z", "updated_at": "2023-01-14T15:17:52Z", "closed_at": "2023-01-14T15:17:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It seems like several methods such as `save`, `to_dict`, `to_json` etc are missing from the (auto/tab) completion menu on charts. Ideally all of these should be discoverable via the completion menu. @ChristopherDavisUCI  do you have any idea of what might be going on here since you were working on other aspects of completion previously?\r\n\r\nExample:\r\n\r\n```py\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\n\r\ncars = data.cars.url\r\n\r\nscatter = alt.Chart(cars).mark_point().encode(\r\n    x='Weight_in_lbs:Q',\r\n    y='Horsepower:Q',\r\n    color='Origin:N')\r\n\r\ndir(scatter)\r\n```\r\n\r\n```\r\n['align',\r\n 'autosize',\r\n 'background',\r\n 'bounds',\r\n 'center',\r\n 'config',\r\n 'data',\r\n 'datasets',\r\n 'description',\r\n 'encoding',\r\n 'height',\r\n 'mark',\r\n 'name',\r\n 'padding',\r\n 'params',\r\n 'projection',\r\n 'resolve',\r\n 'selection',\r\n 'spacing',\r\n 'title',\r\n 'transform',\r\n 'usermeta',\r\n 'view',\r\n 'width']\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2819/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2819/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2810", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2810/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2810/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2810/events", "html_url": "https://github.com/altair-viz/altair/issues/2810", "id": 1523833002, "node_id": "I_kwDOAoxtyc5a09iq", "number": 2810, "title": "ValueError: There are inconsistent values", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-07T13:37:45Z", "updated_at": "2023-01-07T19:10:04Z", "closed_at": "2023-01-07T19:10:04Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The following specification works with Altair 4.2, but errors with the main version on the Github repository.\r\n\r\n```python\r\nimport altair as alt\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\n# Compute x^2 + y^2 across a 2D grid\r\nx, y = np.meshgrid(range(-5, 5), range(-5, 5))\r\nz = x**2 + y**2\r\n\r\n# Convert this grid to columnar data expected by Altair\r\nsource = pd.DataFrame({\"x\": x.ravel(), \"y\": y.ravel(), \"z\": z.ravel()})\r\n\r\nc = alt.Chart(source, height=alt.Step(12), width=alt.Step(12)).mark_rect().encode(\r\n    x=\"x:O\",\r\n    y=\"y:O\", \r\n    color=alt.Color(\"z:Q\", scale=alt.Scale(scheme='reds'))\r\n)\r\nc + c.mark_text(size=7).encode(text=alt.Text(\"z\"), color=alt.value(\"white\"))\r\n```\r\n<img width=\"203\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5186265/211153311-08cf9481-fe4a-4d93-a6f0-9eb166f33943.png\">\r\n\r\nThe error with the main version of Altair from Github is as following:\r\n\r\n```cmd\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\nInput In [5], in <cell line: 17>()\r\n     10 source = pd.DataFrame({\"x\": x.ravel(), \"y\": y.ravel(), \"z\": z.ravel()})\r\n     12 c = (\r\n     13     alt.Chart(source, height=alt.Step(12), width=alt.Step(12))\r\n     14     .mark_rect()\r\n     15     .encode(x=\"x:O\", y=\"y:O\", color=\"z:Q\")\r\n     16 )\r\n---> 17 c + c.mark_text(size=8).encode(text=alt.Text(\"z\"), color=alt.value(\"black\"))\r\n\r\nFile ~/altair/altair/altair/vegalite/v5/api.py:678, in TopLevelMixin.__add__(self, other)\r\n    676 if not isinstance(other, TopLevelMixin):\r\n    677     raise ValueError(\"Only Chart objects can be layered.\")\r\n--> 678 return layer(self, other)\r\n\r\nFile ~/altair/altair/altair/vegalite/v5/api.py:2724, in layer(*charts, **kwargs)\r\n   2722 def layer(*charts, **kwargs):\r\n   2723     \"\"\"layer multiple charts\"\"\"\r\n-> 2724     return LayerChart(layer=charts, **kwargs)\r\n\r\nFile ~/altair/altair/altair/vegalite/v5/api.py:2654, in LayerChart.__init__(self, data, layer, **kwargs)\r\n   2652 # Some properties are not allowed within layer; we'll move to parent.\r\n   2653 layer_props = (\"height\", \"width\", \"view\")\r\n-> 2654 combined_dict, self.layer = _remove_layer_props(self, self.layer, layer_props)\r\n   2656 for prop in combined_dict:\r\n   2657     self[prop] = combined_dict[prop]\r\n\r\nFile ~/altair/altair/altair/vegalite/v5/api.py:3048, in _remove_layer_props(chart, subcharts, layer_props)\r\n   3046         output_dict[prop] = values[0]\r\n   3047     else:\r\n-> 3048         raise ValueError(f\"There are inconsistent values {values} for {prop}\")\r\n   3049 else:\r\n   3050     # Top level has this prop; subchart props must be either\r\n   3051     # Undefined or identical to proceed.\r\n   3052     if all(c[prop] is Undefined or c[prop] is chart[prop] for c in subcharts):\r\n\r\nValueError: There are inconsistent values [Step({\r\n  step: 12\r\n}), Step({\r\n  step: 12\r\n})] for height\r\n```\r\nIs this something that you recognise @ChristopherDavisUCI?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2810/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2803", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2803/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2803/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2803/events", "html_url": "https://github.com/altair-viz/altair/issues/2803", "id": 1518733721, "node_id": "I_kwDOAoxtyc5ahgmZ", "number": 2803, "title": "autosize=\"none\" does not work on concatenations", "user": {"login": "salcc", "id": 52110876, "node_id": "MDQ6VXNlcjUyMTEwODc2", "avatar_url": "https://avatars.githubusercontent.com/u/52110876?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salcc", "html_url": "https://github.com/salcc", "followers_url": "https://api.github.com/users/salcc/followers", "following_url": "https://api.github.com/users/salcc/following{/other_user}", "gists_url": "https://api.github.com/users/salcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/salcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salcc/subscriptions", "organizations_url": "https://api.github.com/users/salcc/orgs", "repos_url": "https://api.github.com/users/salcc/repos", "events_url": "https://api.github.com/users/salcc/events{/privacy}", "received_events_url": "https://api.github.com/users/salcc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-04T10:38:51Z", "updated_at": "2023-04-03T22:49:21Z", "closed_at": "2023-04-03T22:49:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following minimal working example shows the problem:\r\n\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\n\r\nsource = data.wheat()\r\n\r\na = alt.Chart(source).mark_line().encode(\r\n    x=\"year:O\",\r\n    y='wheat:Q'\r\n).transform_filter(\r\n    alt.datum.year >= 1700\r\n).properties(\r\n    width=400,\r\n    height=200\r\n)\r\n\r\nb = alt.Chart(source).mark_line().encode(\r\n    x=\"year:O\",\r\n    y='wheat:Q'\r\n).transform_filter(\r\n    alt.datum.year >= 1700\r\n).properties(\r\n    width=400,\r\n    height=200\r\n)\r\n\r\n(a | b).properties(autosize=\"none\")\r\n```\r\n\r\nThe resulting chart, although having specified the width and height of both charts composing it, is the following:\r\n\r\n![visualization](https://user-images.githubusercontent.com/52110876/210536340-7878ab0f-d790-4358-a6eb-19eea61e311e.png)\r\n\r\nWhich of course is not what I expected.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2803/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2794", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2794/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2794/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2794/events", "html_url": "https://github.com/altair-viz/altair/issues/2794", "id": 1515642425, "node_id": "I_kwDOAoxtyc5aVt45", "number": 2794, "title": "Vega-lite JSON schema validation fails with uri-reference errors", "user": {"login": "dechamps", "id": 866859, "node_id": "MDQ6VXNlcjg2Njg1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/866859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dechamps", "html_url": "https://github.com/dechamps", "followers_url": "https://api.github.com/users/dechamps/followers", "following_url": "https://api.github.com/users/dechamps/following{/other_user}", "gists_url": "https://api.github.com/users/dechamps/gists{/gist_id}", "starred_url": "https://api.github.com/users/dechamps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dechamps/subscriptions", "organizations_url": "https://api.github.com/users/dechamps/orgs", "repos_url": "https://api.github.com/users/dechamps/repos", "events_url": "https://api.github.com/users/dechamps/events{/privacy}", "received_events_url": "https://api.github.com/users/dechamps/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-01-01T15:27:39Z", "updated_at": "2023-01-04T19:31:00Z", "closed_at": "2023-01-04T19:31:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Steps to reproduce:\r\n\r\n```shell\r\nvirtualenv venv &&\r\ncd venv &&\r\nbin/pip install altair rfc3986-validator &&\r\nbin/python <<EOF\r\nimport altair as alt\r\nprint(alt.Chart().mark_line().properties(usermeta={}).to_json())\r\nEOF\r\n```\r\n\r\nWith `altair-4.2.0`, the above fails with:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 2, in <module>\r\n  File \"\u2026/venv/lib/python3.10/site-packages/altair/vegalite/v4/api.py\", line 588, in properties\r\n    self.validate_property(key, val)\r\n  File \"\u2026/venv/lib/python3.10/site-packages/altair/utils/schemapi.py\", line 464, in validate_property\r\n    return jsonschema.validate(value, props.get(name, {}), resolver=resolver)\r\n  File \"\u2026/venv/lib/python3.10/site-packages/jsonschema/validators.py\", line 1117, in validate\r\n    cls.check_schema(schema)\r\n  File \"\u2026/venv/lib/python3.10/site-packages/jsonschema/validators.py\", line 231, in check_schema\r\n    raise exceptions.SchemaError.create_from(error)\r\njsonschema.exceptions.SchemaError: '#/definitions/Dict<unknown>' is not a 'uri-reference'\r\n\r\nFailed validating 'format' in metaschema['allOf'][0]['properties']['$ref']:\r\n    {'format': 'uri-reference', 'type': 'string'}\r\n\r\nOn schema['$ref']:\r\n    '#/definitions/Dict<unknown>'\r\n```\r\n\r\nBut here's the twist: if you remove `rfc3986-validator` from the `pip install` command in the above repro, it works!\r\n\r\nAs you can imagine this is a bit of an head-scratcher. Here's what's going on:\r\n\r\n`jsonschema` fails to validate the Vega-lite schema. To be clear, the problem is not the vega-lite *output* - it's the *[schema itself](https://vega.github.io/schema/vega-lite/v4.17.0.json)* that's invalid, because it contains `$ref` values that are not valid `uri-reference`s. In the example above, the `$ref` is `#/definitions/Dict<unknown>` which is invalid because the `<` and `>` characters are not allowed in a RFC 3986 URI reference.\r\n\r\nEven though the schema is invalid, that goes unnoticed most of the time because `jsonschema` [only validates uri-references if the `rfc3986-validator` or `rfc3987` package is installed](https://python-jsonschema.readthedocs.io/en/v4.17.3/validate/#validating-formats)! This explains why Altair seems to work fine if these packages are missing.\r\n\r\nYou may wonder how I ended up in this situation. Well this is where things gets a bit worrying, because I ended up triggering this latent bug **simply by installing `jupyter`!** This is because, a few months ago, `jupyter_events` (which `jupyter` depends on) added a dependency on `jsonschema[format-nongpl]` (see jupyter/jupyter_events@decd0ecda21190cbe1b25d434cd74e8ef2e55845), which in turns pulls `rfc3986-validator` (figuring out that dependency chain was surprisingly hard - see pypa/pip#11683). Hilarity ensues, with the somewhat mind-blowing outcome that **Altair is broken when a recent `jupyter` is also installed**.\r\n\r\nOne workaround is to uninstall `rfc3986-validator` right after installing the package that pulled it (e.g. `jupyter`):\r\n\r\n```shell\r\npip uninstall rfc3986-validator\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2794/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2794/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2777", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2777/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2777/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2777/events", "html_url": "https://github.com/altair-viz/altair/issues/2777", "id": 1512741062, "node_id": "I_kwDOAoxtyc5aKpjG", "number": 2777, "title": "GitHub Actions `set-output` deprecated", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-28T12:19:18Z", "updated_at": "2022-12-29T22:23:46Z", "closed_at": "2022-12-29T22:23:46Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The following warning is raised:\n\nThe `set-output` command is deprecated and will be disabled soon. Please upgrade to using Environment Files. For more information see: https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2777/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2777/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2776", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2776/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2776/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2776/events", "html_url": "https://github.com/altair-viz/altair/issues/2776", "id": 1512740171, "node_id": "I_kwDOAoxtyc5aKpVL", "number": 2776, "title": "GitHub Actions node.js 12 deprecated", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-28T12:18:08Z", "updated_at": "2022-12-29T22:34:08Z", "closed_at": "2022-12-29T22:34:08Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The following warning is raised:\n\nNode.js 12 actions are deprecated. For more information see: https://github.blog/changelog/2022-09-22-github-actions-all-actions-will-begin-running-on-node16-instead-of-node12/. Please update the following actions to use Node.js 16: actions/setup-python@v1", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2776/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2776/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2775", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2775/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2775/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2775/events", "html_url": "https://github.com/altair-viz/altair/issues/2775", "id": 1512697130, "node_id": "I_kwDOAoxtyc5aKe0q", "number": 2775, "title": "Fix documentation page for mobile devices", "user": {"login": "binste", "id": 23366411, "node_id": "MDQ6VXNlcjIzMzY2NDEx", "avatar_url": "https://avatars.githubusercontent.com/u/23366411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binste", "html_url": "https://github.com/binste", "followers_url": "https://api.github.com/users/binste/followers", "following_url": "https://api.github.com/users/binste/following{/other_user}", "gists_url": "https://api.github.com/users/binste/gists{/gist_id}", "starred_url": "https://api.github.com/users/binste/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binste/subscriptions", "organizations_url": "https://api.github.com/users/binste/orgs", "repos_url": "https://api.github.com/users/binste/repos", "events_url": "https://api.github.com/users/binste/events{/privacy}", "received_events_url": "https://api.github.com/users/binste/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-28T11:23:59Z", "updated_at": "2022-12-29T15:41:20Z", "closed_at": "2022-12-29T15:41:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See https://github.com/altair-viz/altair/pull/2755#issuecomment-1366574385\r\n\r\n@mattijn I'll look into it. Probably need to make the `max-width` of the sidebar in `custom.css` dependent on the device. It's currently set to a constant `20%`.\r\n\r\n```css\r\n.bd-sidebar-primary {\r\n  max-width: 20%\r\n}\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2775/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2775/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2766", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2766/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2766/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2766/events", "html_url": "https://github.com/altair-viz/altair/issues/2766", "id": 1504584228, "node_id": "I_kwDOAoxtyc5ZriIk", "number": 2766, "title": "Bug: altair.Scale seems to incorrectly label single data entry value with a decimal point", "user": {"login": "taosharma", "id": 58982963, "node_id": "MDQ6VXNlcjU4OTgyOTYz", "avatar_url": "https://avatars.githubusercontent.com/u/58982963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taosharma", "html_url": "https://github.com/taosharma", "followers_url": "https://api.github.com/users/taosharma/followers", "following_url": "https://api.github.com/users/taosharma/following{/other_user}", "gists_url": "https://api.github.com/users/taosharma/gists{/gist_id}", "starred_url": "https://api.github.com/users/taosharma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taosharma/subscriptions", "organizations_url": "https://api.github.com/users/taosharma/orgs", "repos_url": "https://api.github.com/users/taosharma/repos", "events_url": "https://api.github.com/users/taosharma/events{/privacy}", "received_events_url": "https://api.github.com/users/taosharma/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-20T13:43:40Z", "updated_at": "2023-01-11T20:47:32Z", "closed_at": "2022-12-20T16:20:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello! I have found some strange behaviour when representing a small dataset that includes a single data entry with a decimal point value. Here is a simplified version of the code I have to reproduce the bug:\r\n\r\n```python\r\n\r\ndef get_chart(df, dt_format, y_title):\r\n\tchart_base = alt.Chart(df)\r\n\t\r\n\tline_chart = chart_base.mark_line().encode(\r\n\t    x=alt.X(\"day\", axis=alt.Axis(title=None, format=dt_format)),\r\n\t    y=alt.Y(\r\n\t        \"value_float\",\r\n\t        axis=alt.Axis(title=y_title),\r\n\t        scale=alt.Scale(zero=False),\r\n\t    ),\r\n\t)\r\n\t\r\n\tchart = alt.layer(line_chart).properties(width=\"container\", title=\"\")\r\n\t\r\n\treturn chart.to_json()\r\n```\r\n\r\nThe df is:\r\n\r\n```\r\n  day         metric             \tsample  \t\t\t\tvalue_float\r\n0 2022-04-01  Nodulation of legumes  Arch Field: Hedge          0.5\r\n1 2022-07-27  Nodulation of legumes  Arch Field: Hedge          0.5\r\n```\r\n\r\nAnd the chart looks like this:\r\n\r\n![image](https://user-images.githubusercontent.com/58982963/208664094-16625cc6-4121-4128-92c7-a02e80790916.png)\r\n\r\nI would expect the scale on the y axis to be labeled `0.5` rather than `1`! \r\n\r\nIf we try the same code with a slightly bigger dataset, it works as expected.\r\n\r\n```\r\ndf\r\n  day              metric              \tsample                value_float\r\n0 2022-05-06  Nodulation of legumes  Mud Mead: Sample 1          1.5\r\n1 2022-07-29  Nodulation of legumes  Mud Mead: Sample 1          0.5\r\n2 2022-08-12  Nodulation of legumes  Mud Mead: Sample 1          0.5\r\n3 2022-09-28  Nodulation of legumes  Mud Mead: Sample 1          1.5\r\n4 2022-11-28  Nodulation of legumes  Mud Mead: Sample 1          1.5\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/58982963/208665235-c9685248-53f1-4ef7-8c34-8d919fc07061.png)\r\n\r\nI'm not sure if it's relevant to the issue, but I am using a django template the display the chart. Here is the code from the template in case it is relevant:\r\n\r\n```html\r\n<div id=\"chart\" class=\"vega-plot col-12\"></div>\r\n<script type=\"text/javascript\">\r\n\twindow.addEventListener('DOMContentLoaded', function() {\r\n\t  vegaEmbed('#chart', {{ chart|safe }}, {renderer: 'svg'})\r\n\t})\r\n</script>\r\n```\r\n\r\nWhere `chart` is the `chart.to_json()` returned above.\r\n\r\nThanks for your help! Let me know if you need any more information.\r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [ ] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor. - Apologies, but I can't find the 'Action Button' on my chart!\r\n- [x] Search for duplicate issues.\r\n- [x] Use the latest version of Altair.\r\n- [x] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2766/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2766/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2764", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2764/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2764/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2764/events", "html_url": "https://github.com/altair-viz/altair/issues/2764", "id": 1503186584, "node_id": "I_kwDOAoxtyc5ZmM6Y", "number": 2764, "title": "Padding is not working correctily for Y-axis", "user": {"login": "tokedo", "id": 34224827, "node_id": "MDQ6VXNlcjM0MjI0ODI3", "avatar_url": "https://avatars.githubusercontent.com/u/34224827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tokedo", "html_url": "https://github.com/tokedo", "followers_url": "https://api.github.com/users/tokedo/followers", "following_url": "https://api.github.com/users/tokedo/following{/other_user}", "gists_url": "https://api.github.com/users/tokedo/gists{/gist_id}", "starred_url": "https://api.github.com/users/tokedo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tokedo/subscriptions", "organizations_url": "https://api.github.com/users/tokedo/orgs", "repos_url": "https://api.github.com/users/tokedo/repos", "events_url": "https://api.github.com/users/tokedo/events{/privacy}", "received_events_url": "https://api.github.com/users/tokedo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-19T15:55:40Z", "updated_at": "2022-12-19T17:38:45Z", "closed_at": "2022-12-19T17:38:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nWhen I set the `padding = 0` for Y axis the range on Y axis still starts  at 0 even  though my data start at 44. Example below \r\nreproduces the bug: \r\n\r\n```python\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\n\r\ndf = pd.DataFrame({\r\n    'a': [1, 2, 3, 4, 5, 6, 7],\r\n    'b': [44, 45, 46, 47, 48, 49, 50]\r\n    })\r\n\r\n\r\nplot = (alt.Chart(df)\r\n        .mark_line()\r\n        .encode(\r\n            x='a',\r\n            y=alt.Y('b', \r\n                    scale=alt.Scale(\r\n                        nice=False,\r\n                        padding=0\r\n                        )\r\n                    ),\r\n            )         \r\n        )\r\n\r\n\r\nplot\r\n```\r\n\r\nActual outcome:\r\n<img width=\"499\" alt=\"image\" src=\"https://user-images.githubusercontent.com/34224827/208465922-6dfbc4d2-8ac3-421c-a00f-9b37c4289ab5.png\">\r\n\r\nExpected outcome: \r\n<img width=\"499\" alt=\"image\" src=\"https://user-images.githubusercontent.com/34224827/208466078-d86ac851-ae55-4dd8-8970-6f11da875f4a.png\">\r\n\r\nI know it can be solved ad-hoc with `domain=[44, 50]` but I'm looking for a systematic solution, as my data contain many metrics and slices I'm visualizing Altair. I though this is what `padding` for. At least for x-axis it works as intended. Would appreciate any help.\r\n\r\nThanks in advance.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2764/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2744", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2744/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2744/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2744/events", "html_url": "https://github.com/altair-viz/altair/issues/2744", "id": 1476777144, "node_id": "I_kwDOAoxtyc5YBdS4", "number": 2744, "title": "Incorrect error message when an unknown param value is used", "user": {"login": "joelostblom", "id": 4560057, "node_id": "MDQ6VXNlcjQ1NjAwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4560057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelostblom", "html_url": "https://github.com/joelostblom", "followers_url": "https://api.github.com/users/joelostblom/followers", "following_url": "https://api.github.com/users/joelostblom/following{/other_user}", "gists_url": "https://api.github.com/users/joelostblom/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelostblom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelostblom/subscriptions", "organizations_url": "https://api.github.com/users/joelostblom/orgs", "repos_url": "https://api.github.com/users/joelostblom/repos", "events_url": "https://api.github.com/users/joelostblom/events{/privacy}", "received_events_url": "https://api.github.com/users/joelostblom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-12-05T15:08:46Z", "updated_at": "2023-02-05T19:27:59Z", "closed_at": "2023-02-05T19:27:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I just noted that in a spec that contains a condition, using an unknown parameter value anywhere in the spec will always return an error pointing to the condition even when it has nothing to do with actual error. For example, the following spec:\r\n\r\n```py\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nsource = data.barley()\r\n\r\nalt.Chart(source).mark_bar().encode(\r\n    x='variety',\r\n    y=alt.Y('sum(yield)', stack='asdf'),\r\n    opacity=alt.condition('datum.yield > 0', alt.value(1), alt.value(0.2))\r\n)\r\n```\r\n\r\nreturns:\r\n\r\n```\r\nSchemaValidationError: Invalid specification\r\n\r\n        altair.vegalite.v4.schema.channels.OpacityValue, validating 'additionalProperties'\r\n\r\n        Additional properties are not allowed ('test' was unexpected)\r\n```\r\n\r\nIf we change to `opacity=alt.value(0.6)` we get the expected output:\r\n\r\n```\r\nSchemaValidationError: Invalid specification\r\n\r\n        altair.vegalite.v4.schema.channels.Y->0, validating 'enum'\r\n\r\n        '' is not one of ['zero', 'center', 'normalize']\r\n```\r\n\r\nNote that there is nothing wrong the opacity condition here and removing the incorrect `stack` value leads to zero errors. Looking closer at the error raising sequence, it seems like the stack error is always raised first, but if there is a conditional in the spec there will also be a second error raised. Not sure how raising one error leads to the other or why the sequence doesn't stop at the first raised error.\r\n\r\nIt seems like `{'test': 'datum.yield > 0', 'value': 1}` is evaluating against a schema that only contains the `condition` key, so it should have been `{'condition': {'test': 'datum.yield > 0', 'value': 1}}` instead and then `{'test': 'datum.yield > 0', 'value': 1}` in the next validation.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2744/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2744/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2742", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2742/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2742/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2742/events", "html_url": "https://github.com/altair-viz/altair/issues/2742", "id": 1472134162, "node_id": "I_kwDOAoxtyc5XvvwS", "number": 2742, "title": "Error persists when trying to concat facetted charts although it is fixed in VegaLite", "user": {"login": "joelostblom", "id": 4560057, "node_id": "MDQ6VXNlcjQ1NjAwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4560057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelostblom", "html_url": "https://github.com/joelostblom", "followers_url": "https://api.github.com/users/joelostblom/followers", "following_url": "https://api.github.com/users/joelostblom/following{/other_user}", "gists_url": "https://api.github.com/users/joelostblom/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelostblom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelostblom/subscriptions", "organizations_url": "https://api.github.com/users/joelostblom/orgs", "repos_url": "https://api.github.com/users/joelostblom/repos", "events_url": "https://api.github.com/users/joelostblom/events{/privacy}", "received_events_url": "https://api.github.com/users/joelostblom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-12-02T00:19:58Z", "updated_at": "2023-02-22T22:28:30Z", "closed_at": "2022-12-02T20:24:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When I try to concatenate facetted charts with the latest Altair version from master, I am still seeing `Javascript Error: Undefined data set name: \"scale_concat_1_child_main\"` although this was fixed in https://github.com/vega/vega-lite/pull/7639. Exporting the spec to json and pasting it in the Vega editor also seems to work fine although the VegaLite version is 5.2.0 in both cases [Open the Chart in the Vega Editor](https://vega.github.io/editor/#/url/vega-lite/N4IgJAzgxgFgpgWwIYgFwhgF0wBwqgegIDc4BzJAOjIEtMYBXAI0poHsDp5kTykBaADZ04JAKyUATJQAMlAFYQ2AOxAAaEFBUAzGmTShiNOAHcDmlZhrKGbBhAAScPVjQBmGTI1blVm3YgAdRoAE3o0ABZPAF9ojRCkTBRUUGUkBDg0EASk-gAObQBGGTE4KAi8kKgxNyZtGQSSvJkATjcIwoi4PLaZEDjsxKQIOEwIcxyBAuLS8srq2vrGsWa2jq6ejzQAbVAIBgoAJzRJDSSITEzUFq8QTABPHCuLAGtMuL2DpGPUMTPhy5oADsfzuj2eWje-TUnyOaEK-wuVxaoIeTyykPeMJA+zhqFOdwBVzyqPBWSeeBo0Nh3zQqKJaGaZzJ6ApECpHxxXx+CMJSOBpPRrLglP6AF0BsQfFBEjtQNokFBRuZdHBBCEsmjMsyhSBlGwENYkIJoTinlBzHBlFoQtZ9CkQAAPFXGdVZXG0nXPACODCQvjoiRopFN9xdao16HOgK9WV9-qsSSsIdiGmQhxe5LY1kw-U5CqVuYdqrdUbJsfQ+sNaRNAwg5st1rYtuU9tAzuLrsjXLhFZA8YDSeDWJAYc7Ec1DL7A8TQZTA3TmdZ2d8eYlQA)\r\n\r\n@ChristopherDavisUCI Are you seeing this as well?\r\n\r\nExample spec:\r\n\r\n```py\r\nimport altair as alt\r\nimport pandas as pd\r\n\r\n\r\ndf = pd.DataFrame({\r\n    'type': ['coke', 'coke', 'coke', 'pepsi', 'pepsi', 'pepsi'],\r\n    'taste':[90,75,95,85,80,75],\r\n    'sugar':[2,5,1,2,5,1],\r\n})\r\n\r\nplot_a = alt.Chart(df).mark_point().encode(\r\n    x = 'sugar',\r\n    y = 'taste',\r\n).facet('type')\r\n\r\nplot_a & plot_a\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2742/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2742/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2736", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2736/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2736/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2736/events", "html_url": "https://github.com/altair-viz/altair/issues/2736", "id": 1471359426, "node_id": "I_kwDOAoxtyc5XsynC", "number": 2736, "title": "Some tables in documentation are cut off", "user": {"login": "binste", "id": 23366411, "node_id": "MDQ6VXNlcjIzMzY2NDEx", "avatar_url": "https://avatars.githubusercontent.com/u/23366411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binste", "html_url": "https://github.com/binste", "followers_url": "https://api.github.com/users/binste/followers", "following_url": "https://api.github.com/users/binste/following{/other_user}", "gists_url": "https://api.github.com/users/binste/gists{/gist_id}", "starred_url": "https://api.github.com/users/binste/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binste/subscriptions", "organizations_url": "https://api.github.com/users/binste/orgs", "repos_url": "https://api.github.com/users/binste/repos", "events_url": "https://api.github.com/users/binste/events{/privacy}", "received_events_url": "https://api.github.com/users/binste/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-01T13:54:45Z", "updated_at": "2022-12-30T06:40:26Z", "closed_at": "2022-12-30T06:40:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Some tables in the new documentation design are too wide to be displayed. For example https://binste.github.io/altair-docs/user_guide/encoding.html#color-fill-and-stroke\r\n\r\n![image](https://user-images.githubusercontent.com/23366411/205069201-f1dee255-70d8-4a19-af4d-18a7a2ff2544.png)\r\n\r\nThis happens because some types in the second column are too big and so they push the table beyond 100% width:\r\n\r\n![image](https://user-images.githubusercontent.com/23366411/205069358-e79ab463-6193-426d-92fb-34482e4be008.png)\r\n\r\nI'm not very familiar with the layout and how these tables are generated so I don't know how to fix this. Some ideas:\r\n\r\n* Is it possible to shorten the names of these types? The long ones are not very useful anyway in my opinion. I'm aware that the tables are autogenerated so it would probably require some adjustment in that Sphinx directive. \r\n* Make the table scrollable horizontally. This is still not very convenient as the scrollbar will be at the bottom and some of the tables are very long.\r\n* Shorten section titles in left navigation bar (\"Interactive Charts: Parameters, Conditions, Bindings\" -> \"Interactive Charts\", I prefer this anyway) and then make it narrower. This won't solve it completely but helps.\r\n* If the layout is responsive, we could make the tables wider on bigger screens. On a 13'' laptop screen the documentation has a good size but on a 27'' 2560x1440 monitor it does look rather narrow:\r\n\r\n![image](https://user-images.githubusercontent.com/23366411/205070651-a33d4993-4de1-4a08-9106-a71b9c1bd995.png)\r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [x] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [x] Search for duplicate issues.\r\n- [x] Use the latest version of Altair.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2736/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2736/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2733", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2733/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2733/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2733/events", "html_url": "https://github.com/altair-viz/altair/issues/2733", "id": 1469034087, "node_id": "I_kwDOAoxtyc5Xj65n", "number": 2733, "title": "Tests involving render", "user": {"login": "ChristopherDavisUCI", "id": 82750240, "node_id": "MDQ6VXNlcjgyNzUwMjQw", "avatar_url": "https://avatars.githubusercontent.com/u/82750240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChristopherDavisUCI", "html_url": "https://github.com/ChristopherDavisUCI", "followers_url": "https://api.github.com/users/ChristopherDavisUCI/followers", "following_url": "https://api.github.com/users/ChristopherDavisUCI/following{/other_user}", "gists_url": "https://api.github.com/users/ChristopherDavisUCI/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChristopherDavisUCI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChristopherDavisUCI/subscriptions", "organizations_url": "https://api.github.com/users/ChristopherDavisUCI/orgs", "repos_url": "https://api.github.com/users/ChristopherDavisUCI/repos", "events_url": "https://api.github.com/users/ChristopherDavisUCI/events{/privacy}", "received_events_url": "https://api.github.com/users/ChristopherDavisUCI/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-11-30T04:34:58Z", "updated_at": "2022-12-01T14:27:24Z", "closed_at": "2022-12-01T14:27:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Has anything changed recently involving the render tests?  I have installed `vl-convert-python` 0.5.0.  The tests worked for me about a month ago last time I tried, but tonight all of the render tests were failing.  I'm not sure if it's an issue on my computer's end, or if there is some change to the workflow related to vl-convert.\r\n\r\nHere is a typical error message I'm getting:\r\n```\r\npy::test_render_examples_to_png[bar_chart_with_highlighted_segment.py-altair_saver] Failed: [undefined]subprocess.CalledProcessError: Command '['/Users/christopherdavis/miniconda3/envs/alt/bin/npm', 'bin', '--global']' returned non-zero exit status 1.\r\nengine = 'altair_saver', filename = 'bar_chart_with_highlighted_segment.py'\r\n```\r\n\r\nMy Mac OS did update I think within the last month, so it could also be something like that.\r\n\r\nThanks for any tips!", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2733/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2733/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2723", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2723/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2723/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2723/events", "html_url": "https://github.com/altair-viz/altair/issues/2723", "id": 1462265521, "node_id": "I_kwDOAoxtyc5XKGax", "number": 2723, "title": "Use .items instead (Python 3.11)", "user": {"login": "berryny", "id": 5661607, "node_id": "MDQ6VXNlcjU2NjE2MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5661607?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berryny", "html_url": "https://github.com/berryny", "followers_url": "https://api.github.com/users/berryny/followers", "following_url": "https://api.github.com/users/berryny/following{/other_user}", "gists_url": "https://api.github.com/users/berryny/gists{/gist_id}", "starred_url": "https://api.github.com/users/berryny/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berryny/subscriptions", "organizations_url": "https://api.github.com/users/berryny/orgs", "repos_url": "https://api.github.com/users/berryny/repos", "events_url": "https://api.github.com/users/berryny/events{/privacy}", "received_events_url": "https://api.github.com/users/berryny/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-11-23T19:04:17Z", "updated_at": "2023-03-02T01:27:32Z", "closed_at": "2022-11-23T20:41:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I wrote the code below which can be found [here](https://github.com/berryny/escooterdata/blob/master/311_The_Bronx_E_Scooter.ipynb)\r\n\r\n```\r\n#make a bar graph of the df using Altair\r\nalt.Chart(df).mark_bar().encode(\r\n    x = 'community_board', #x axis is encoded by the Bronx community boards\r\n    y='count()',\r\n)\r\n```\r\n\r\nThe graphic appears in Visual Code Notebook however VS and github displays the below error message\r\n```\r\n/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/altair/utils/core.py:317: FutureWarning: iteritems is deprecated and will be removed in a future version. Use .items instead.\r\n  for col_name, dtype in df.dtypes.iteritems():\r\n```\r\n\r\nThoughts?\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [x] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [x] Search for duplicate issues.\r\n- [x] Use the latest version of Altair.\r\n- [x] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2723/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2723/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2715", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2715/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2715/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2715/events", "html_url": "https://github.com/altair-viz/altair/issues/2715", "id": 1450041866, "node_id": "I_kwDOAoxtyc5WbeIK", "number": 2715, "title": "jsonschema validation error in Graticule Generator example", "user": {"login": "mknz", "id": 6409704, "node_id": "MDQ6VXNlcjY0MDk3MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6409704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mknz", "html_url": "https://github.com/mknz", "followers_url": "https://api.github.com/users/mknz/followers", "following_url": "https://api.github.com/users/mknz/following{/other_user}", "gists_url": "https://api.github.com/users/mknz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mknz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mknz/subscriptions", "organizations_url": "https://api.github.com/users/mknz/orgs", "repos_url": "https://api.github.com/users/mknz/repos", "events_url": "https://api.github.com/users/mknz/events{/privacy}", "received_events_url": "https://api.github.com/users/mknz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-15T16:16:52Z", "updated_at": "2022-11-15T18:25:59Z", "closed_at": "2022-11-15T18:25:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, thanks for the awesome project!\r\n\r\nI tried to run the example code below, but got `AttributeError: 'list' object has no attribute 'get'` error in jsonschema.\r\n\r\nhttps://altair-viz.github.io/user_guide/data.html\r\n\r\nI'm using the latest version of Altair (4.2.0) and jsonschema (4.17.0)\r\n\r\n**Example code to reproduce the error**\r\n```\r\nimport altair as alt\r\n\r\ndata = alt.graticule(step=[15, 15])\r\n\r\nalt.Chart(data).mark_geoshape(stroke='black').project(\r\n    'orthographic',\r\n    rotate=[0, -45, 0]\r\n)\r\n```\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [x] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [x] Search for duplicate issues.\r\n- [x] Use the latest version of Altair.\r\n- [x] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2715/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2715/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2712", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2712/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2712/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2712/events", "html_url": "https://github.com/altair-viz/altair/issues/2712", "id": 1440496268, "node_id": "I_kwDOAoxtyc5V3DqM", "number": 2712, "title": "Heatmaps are non interactive", "user": {"login": "josephernest", "id": 6168083, "node_id": "MDQ6VXNlcjYxNjgwODM=", "avatar_url": "https://avatars.githubusercontent.com/u/6168083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josephernest", "html_url": "https://github.com/josephernest", "followers_url": "https://api.github.com/users/josephernest/followers", "following_url": "https://api.github.com/users/josephernest/following{/other_user}", "gists_url": "https://api.github.com/users/josephernest/gists{/gist_id}", "starred_url": "https://api.github.com/users/josephernest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josephernest/subscriptions", "organizations_url": "https://api.github.com/users/josephernest/orgs", "repos_url": "https://api.github.com/users/josephernest/repos", "events_url": "https://api.github.com/users/josephernest/events{/privacy}", "received_events_url": "https://api.github.com/users/josephernest/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-11-08T16:11:33Z", "updated_at": "2023-02-06T00:06:39Z", "closed_at": "2023-02-06T00:06:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Is it normal that [Altair heatmaps](https://altair-viz.github.io/gallery/simple_heatmap.html) are non interactive, even when specifying `.interactive()`:\r\n\r\n```\r\nimport altair as alt, numpy as np, pandas as pd\r\nx, y = np.meshgrid(range(-5, 5), range(-5, 5))\r\nz = x ** 2 + y ** 2\r\nsource = pd.DataFrame({'x': x.ravel(), 'y': y.ravel(), 'z': z.ravel()})\r\nalt.Chart(source).mark_rect().encode(x='x:O', y='y:O', color='z:Q').interactive().save('test2.html')\r\n```\r\n\r\n?\r\n\r\nIs there a way to enable interactivity : moving, zooming, etc. in the browser?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2712/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2708", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2708/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2708/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2708/events", "html_url": "https://github.com/altair-viz/altair/issues/2708", "id": 1436806463, "node_id": "I_kwDOAoxtyc5Vo-0_", "number": 2708, "title": "Empty `project()` changes to old default geo-projection", "user": {"login": "joelostblom", "id": 4560057, "node_id": "MDQ6VXNlcjQ1NjAwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4560057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelostblom", "html_url": "https://github.com/joelostblom", "followers_url": "https://api.github.com/users/joelostblom/followers", "following_url": "https://api.github.com/users/joelostblom/following{/other_user}", "gists_url": "https://api.github.com/users/joelostblom/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelostblom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelostblom/subscriptions", "organizations_url": "https://api.github.com/users/joelostblom/orgs", "repos_url": "https://api.github.com/users/joelostblom/repos", "events_url": "https://api.github.com/users/joelostblom/events{/privacy}", "received_events_url": "https://api.github.com/users/joelostblom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-05T04:27:41Z", "updated_at": "2022-11-05T23:12:34Z", "closed_at": "2022-11-05T23:12:34Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\nsource = alt.topo_feature(data.world_110m.url, 'countries')\r\n```\r\n\r\nThe following works as expected to show the default projection `equalearth`\r\n\r\n```\r\nalt.Chart(source).mark_geoshape()\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/4560057/200100602-0343cc63-6b48-4ff3-ab9c-bf0e282bc920.png)\r\n\r\nHowever, adding an empty `project()` changes to the old default mercator by explicitly adding it to the spec, which seems wrong:\r\n\r\n```\r\nalt.Chart(source).mark_geoshape().project()\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/4560057/200100632-34a9d5ff-f1ce-409c-829d-bea7c8c44133.png)\r\n\r\nSomething similar was reported for layers in https://github.com/vega/vega-lite/issues/7331, not sure if it is related", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2708/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2708/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2707", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2707/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2707/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2707/events", "html_url": "https://github.com/altair-viz/altair/issues/2707", "id": 1436518282, "node_id": "I_kwDOAoxtyc5Vn4eK", "number": 2707, "title": "altair 4.2 `AttributeError: 'list' object has no attribute 'get'` on `chart.projection` with center", "user": {"login": "Casyfill", "id": 2675621, "node_id": "MDQ6VXNlcjI2NzU2MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/2675621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Casyfill", "html_url": "https://github.com/Casyfill", "followers_url": "https://api.github.com/users/Casyfill/followers", "following_url": "https://api.github.com/users/Casyfill/following{/other_user}", "gists_url": "https://api.github.com/users/Casyfill/gists{/gist_id}", "starred_url": "https://api.github.com/users/Casyfill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Casyfill/subscriptions", "organizations_url": "https://api.github.com/users/Casyfill/orgs", "repos_url": "https://api.github.com/users/Casyfill/repos", "events_url": "https://api.github.com/users/Casyfill/events{/privacy}", "received_events_url": "https://api.github.com/users/Casyfill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-11-04T19:03:42Z", "updated_at": "2022-11-04T21:27:58Z", "closed_at": "2022-11-04T20:13:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "with 4.2  Altair fails once I try to pass projection with center as a list:\r\n\r\n```python\r\n>>> import altair as alt\r\n>>> basic_chart = alt.Chart().properties(height=800, width=700)\r\n>>> NYC_PRJ = {\"type\": \"mercator\", \"center\": [-73.99, 40.72]}\r\n>>> basic_chart.project(**NYC_PRJ)\r\n```\r\nRaises this:\r\n\r\n```\r\n... /site-packages/jsonschema/validators.py\", line 101, in _id_of\r\n  return schema.get(\"$id\", \"\")\r\nAttributeError: 'list' object has no attribute 'get'\r\n```\r\n---", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2707/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2707/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2705", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2705/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2705/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2705/events", "html_url": "https://github.com/altair-viz/altair/issues/2705", "id": 1436121906, "node_id": "I_kwDOAoxtyc5VmXsy", "number": 2705, "title": "jsonschema.exceptions.SchemaError when saving chart as html", "user": {"login": "shnela", "id": 3773836, "node_id": "MDQ6VXNlcjM3NzM4MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/3773836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shnela", "html_url": "https://github.com/shnela", "followers_url": "https://api.github.com/users/shnela/followers", "following_url": "https://api.github.com/users/shnela/following{/other_user}", "gists_url": "https://api.github.com/users/shnela/gists{/gist_id}", "starred_url": "https://api.github.com/users/shnela/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shnela/subscriptions", "organizations_url": "https://api.github.com/users/shnela/orgs", "repos_url": "https://api.github.com/users/shnela/repos", "events_url": "https://api.github.com/users/shnela/events{/privacy}", "received_events_url": "https://api.github.com/users/shnela/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-11-04T14:02:35Z", "updated_at": "2023-01-04T19:30:31Z", "closed_at": "2023-01-04T19:30:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I'm uising newest version of `altair==4.2.0` and code which worked previously now breaks with `SchemaError`.\r\n\r\nI present whole code snippet and Stacktrace below.\r\n\r\n```python\r\nfrom io import StringIO\r\n\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\n\r\ndef save_to_stream(chart):\r\n    buffer = StringIO()\r\n    chart.save(buffer, format=\"html\")\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    source = data.cars()\r\n\r\n    brush = alt.selection(type='interval')\r\n\r\n    points = alt.Chart(source).mark_point().encode(\r\n        x='Horsepower:Q',\r\n        y='Miles_per_Gallon:Q',\r\n        color=alt.condition(brush, 'Origin:N', alt.value('lightgray'))\r\n    ).add_selection(\r\n        brush\r\n    )\r\n\r\n    bars = alt.Chart(source).mark_bar().encode(\r\n        y='Origin:N',\r\n        color='Origin:N',\r\n        x='count(Origin):Q'\r\n    ).transform_filter(\r\n        brush\r\n    )\r\n\r\n    chart = points & bars\r\n\r\n    save_to_stream(points)  # works\r\n    save_to_stream(bars)  # works\r\n    save_to_stream(chart)  # breaks\r\n\r\n\"\"\"\r\n/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/altair/utils/core.py:317: FutureWarning: iteritems is deprecated and will be removed in a future version. Use .items instead.\r\n  for col_name, dtype in df.dtypes.iteritems():\r\nTraceback (most recent call last):\r\n  File \"/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/jsonschema/_format.py\", line 135, in check\r\n    result = func(instance)\r\n  File \"/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/jsonschema/_format.py\", line 360, in is_uri_reference\r\n    return rfc3987.parse(instance, rule=\"URI_reference\")\r\n  File \"/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/rfc3987.py\", line 462, in parse\r\n    raise ValueError('%r is not a valid %r.' % (string, rule))\r\nValueError: '#/definitions/TopLevelNormalizedVConcatSpec<GenericSpec>' is not a valid 'URI_reference'.\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/jakub/Projects/neptune-client/alpha_integration_dev/tmp_upload2.py\", line 37, in <module>\r\n    save_to_stream(chart)  # breaks\r\n  File \"/home/jakub/Projects/neptune-client/alpha_integration_dev/tmp_upload2.py\", line 9, in save_to_stream\r\n    chart.save(buffer, format=\"html\")\r\n  File \"/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/altair/vegalite/v4/api.py\", line 488, in save\r\n    result = save(**kwds)\r\n  File \"/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/altair/utils/save.py\", line 83, in save\r\n    spec = chart.to_dict()\r\n  File \"/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/altair/vegalite/v4/api.py\", line 384, in to_dict\r\n    dct = super(TopLevelMixin, copy).to_dict(*args, **kwargs)\r\n  File \"/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/altair/utils/schemapi.py\", line 338, in to_dict\r\n    self.validate(result)\r\n  File \"/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/altair/utils/schemapi.py\", line 443, in validate\r\n    return jsonschema.validate(\r\n  File \"/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/jsonschema/validators.py\", line 1112, in validate\r\n    cls.check_schema(schema)\r\n  File \"/home/jakub/.venv/neptune-client/lib/python3.8/site-packages/jsonschema/validators.py\", line 227, in check_schema\r\n    raise exceptions.SchemaError.create_from(error)\r\njsonschema.exceptions.SchemaError: '#/definitions/TopLevelNormalizedVConcatSpec<GenericSpec>' is not a 'uri-reference'\r\n\r\nFailed validating 'format' in metaschema['properties']['$ref']:\r\n    {'format': 'uri-reference', 'type': 'string'}\r\n\r\nOn schema['$ref']:\r\n    '#/definitions/TopLevelNormalizedVConcatSpec<GenericSpec>'\r\n\r\nProcess finished with exit code 1\r\n\"\"\"\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2705/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2700", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2700/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2700/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2700/events", "html_url": "https://github.com/altair-viz/altair/issues/2700", "id": 1418075231, "node_id": "I_kwDOAoxtyc5Uhhxf", "number": 2700, "title": "Wrong height when using hconcat", "user": {"login": "raffo85h", "id": 8588341, "node_id": "MDQ6VXNlcjg1ODgzNDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8588341?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raffo85h", "html_url": "https://github.com/raffo85h", "followers_url": "https://api.github.com/users/raffo85h/followers", "following_url": "https://api.github.com/users/raffo85h/following{/other_user}", "gists_url": "https://api.github.com/users/raffo85h/gists{/gist_id}", "starred_url": "https://api.github.com/users/raffo85h/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raffo85h/subscriptions", "organizations_url": "https://api.github.com/users/raffo85h/orgs", "repos_url": "https://api.github.com/users/raffo85h/repos", "events_url": "https://api.github.com/users/raffo85h/events{/privacy}", "received_events_url": "https://api.github.com/users/raffo85h/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-21T09:54:19Z", "updated_at": "2023-02-06T00:19:58Z", "closed_at": "2023-02-06T00:19:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using altair version 4.2.0.\r\n\r\nIn a jupyter notebook, when hconcat 2 plots that are row-faceted the sizes are different. Here these 2 columns were built using the same height and width properties.\r\n\r\nNotice that each time the cell is run, a different height is shown.\r\n\r\n![image](https://user-images.githubusercontent.com/8588341/197168106-ea99e143-1a5d-4d17-a21b-cbcb865d9879.png)\r\n\r\n**I've also downloaded the jupyter notebook as HTML** file to look at the altair/vega code. And in the vega-json I do see the width and height as expected.\r\n\r\nCode to reproduce.\r\n\r\n```python\r\nimport pandas as pd\r\nimport numpy as np\r\nimport altair as alt\r\n\r\ndef change_firing_rate(r):\r\n    # The whole point is to have facets with x-scale shared by column but not by row\r\n    # This hack is to make the dataset suitable for the goal\r\n    if r['align'] == 'dots':\r\n        return r.firing_rate\r\n    return r.firing_rate + np.random.normal(150, 10)\r\n\r\ndots_df = (\r\n    pd.read_csv('https://raw.githubusercontent.com/mwaskom/seaborn-data/master/dots.csv')\r\n    .assign(time=lambda x: x.time.clip(-80, 50))\r\n    .assign(new_firing_rate=lambda x: x.apply(change_firing_rate, axis=1))\r\n)\r\n\r\ndef strip_plot_row(df, y=True):\r\n    row_header = alt.Header(title='', labelAngle=0, labelAlign='left', labelPadding=0, labelFontSize=14 if y else 0)\r\n    return (\r\n        alt.Chart(df)#, height=45, width=45*8)\r\n        .mark_circle(size=30)\r\n        .encode(\r\n            y=alt.Y('jitter:Q', title=None, axis=alt.Axis(values=[0], ticks=True, grid=False, labels=False)),\r\n            x=alt.X('new_firing_rate:Q', title='Firing Rate'),\r\n            row=alt.Row('time:N', header=row_header),\r\n            column=alt.Column('align:N', header=alt.Header(title='', labelAngle=0, labelAlign='left', labelPadding=0, labelFontSize=14))\r\n        )\r\n        .transform_calculate(jitter='sqrt(-2*log(random()))*cos(2*PI*random())')\r\n    )\r\n\r\n\r\n(\r\n    alt.hconcat(\r\n        strip_plot_row(dots_df.query('align==\"dots\"')).properties(height=45, width=45*8), \r\n        strip_plot_row(dots_df.query('align==\"sacc\"'), y=False).properties(height=45, width=45*8), \r\n    )\r\n    .configure_facet(spacing=5)\r\n    .configure_view(stroke=None)\r\n)\r\n```\r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [ ] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [x] Search for duplicate issues.\r\n- [x] Use the latest version of Altair.\r\n- [x] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2700/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2698", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2698/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2698/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2698/events", "html_url": "https://github.com/altair-viz/altair/issues/2698", "id": 1414748510, "node_id": "I_kwDOAoxtyc5UU1le", "number": 2698, "title": "`FutureWarning` with `pandas` 1.5.0", "user": {"login": "pharmpy-dev-123", "id": 101794402, "node_id": "U_kgDOBhFCYg", "avatar_url": "https://avatars.githubusercontent.com/u/101794402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pharmpy-dev-123", "html_url": "https://github.com/pharmpy-dev-123", "followers_url": "https://api.github.com/users/pharmpy-dev-123/followers", "following_url": "https://api.github.com/users/pharmpy-dev-123/following{/other_user}", "gists_url": "https://api.github.com/users/pharmpy-dev-123/gists{/gist_id}", "starred_url": "https://api.github.com/users/pharmpy-dev-123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pharmpy-dev-123/subscriptions", "organizations_url": "https://api.github.com/users/pharmpy-dev-123/orgs", "repos_url": "https://api.github.com/users/pharmpy-dev-123/repos", "events_url": "https://api.github.com/users/pharmpy-dev-123/events{/privacy}", "received_events_url": "https://api.github.com/users/pharmpy-dev-123/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-19T10:52:40Z", "updated_at": "2022-10-29T18:03:07Z", "closed_at": "2022-10-29T18:03:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using `.to_dict()` on an `altair` 4.2.0 object I get the following `FutureWarning` with `pandas` 1.5.0:\r\n\r\n```\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/vegalite/v4/api.py:384: in to_dict\r\n    dct = super(TopLevelMixin, copy).to_dict(*args, **kwargs)\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/utils/schemapi.py:326: in to_dict\r\n    result = _todict(\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/utils/schemapi.py:60: in _todict\r\n    return {\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/utils/schemapi.py:61: in <dictcomp>\r\n    k: _todict(v, validate, context)\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/utils/schemapi.py:58: in _todict\r\n    return [_todict(v, validate, context) for v in obj]\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/utils/schemapi.py:58: in <listcomp>\r\n    return [_todict(v, validate, context) for v in obj]\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/utils/schemapi.py:56: in _todict\r\n    return obj.to_dict(validate=validate, context=context)\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/vegalite/v4/api.py:2020: in to_dict\r\n    return super().to_dict(*args, **kwargs)\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/vegalite/v4/api.py:374: in to_dict\r\n    copy.data = _prepare_data(original_data, context)\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/vegalite/v4/api.py:89: in _prepare_data\r\n    data = _pipe(data, data_transformers.get())\r\n.tox/py39-unit/lib/python3.9/site-packages/toolz/functoolz.py:628: in pipe\r\n    data = func(data)\r\n.tox/py39-unit/lib/python3.9/site-packages/toolz/functoolz.py:304: in __call__\r\n    return self._partial(*args, **kwargs)\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/vegalite/data.py:19: in default_data_transformer\r\n    return curried.pipe(data, limit_rows(max_rows=max_rows), to_values)\r\n.tox/py39-unit/lib/python3.9/site-packages/toolz/functoolz.py:628: in pipe\r\n    data = func(data)\r\n.tox/py39-unit/lib/python3.9/site-packages/toolz/functoolz.py:304: in __call__\r\n    return self._partial(*args, **kwargs)\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/utils/data.py:149: in to_values\r\n    data = sanitize_dataframe(data)\r\n.tox/py39-unit/lib/python3.9/site-packages/altair/utils/core.py:317: in sanitize_dataframe\r\n    for col_name, dtype in df.dtypes.iteritems():\r\n.tox/py39-unit/lib/python3.9/site-packages/pandas/core/series.py:1845: in iteritems\r\n    warnings.warn(\r\nE   FutureWarning: iteritems is deprecated and will be removed in a future version. Use .items instead.\r\n```\r\n\r\nI believe it's just a matter of using `.items()` rather than `.iteritems()`. `.items()` was introduced for Python 3 only in https://github.com/pandas-dev/pandas/commit/16dbeaba9ec2cc6d87636981644a08cb9bb9b2cd and then for Python 2 in https://github.com/pandas-dev/pandas/commit/3b02e73b856a6f8d53382bf3908f04447bf90e03.\r\n\r\nSince `altair` requires Python >= 3.7 this should not conflict with the current requirements of `pandas>=0.18`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2698/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2698/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2685", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2685/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2685/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2685/events", "html_url": "https://github.com/altair-viz/altair/issues/2685", "id": 1389073125, "node_id": "I_kwDOAoxtyc5Sy5Ll", "number": 2685, "title": "layer order with defined params", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-09-28T09:55:42Z", "updated_at": "2022-09-29T14:11:07Z", "closed_at": "2022-09-29T14:11:07Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I tried to recreate the following Vega-Lite chart with Vega-Altair:\r\n[Open the Chart in the Vega Editor](https://vega.github.io/editor/#/url/vega-lite/N4IgJAzgxgFgpgWwIYgFwhgF0wBwqgegIDc4BzJAOjIEtMYBXAI0poHsDp5kTykBaADZ04JAKyUAVhDYA7EABoQOJACckCCGgDaoWRrhoQATQD6AZQAyASQAiAUQBKikExqyAJmlDucDTEbqsmSGSsgAHmgALAAMMWHuaPEgEJhwOGgAjAC+SsRIggyGqADMcdkAukqCSACecKo6oB5ImCiooPmFcFqouiC2dVlKAGoFRWhiUZQAHLmgg7VoAEyj48WZmcuUOQoLQ6Vr3WgAbCWUJ-MDB1FHE6UA7BdXi5N3xQ8AnJQPLwcn7yyJSenz+S1QD0BqC2MR2YLQMyhmRi5xK8NQnyhJU+0zme2u4ORSM+3zE6M2UIe2zR+Ne0NWIDGx1QYkycNpB0yJSRW3Jt0Z6yyD2mZI5hLESLKlDJFVyIBq9UafVAyFUAGsjEw1C44LIoGwPO4yN4QJEOiAAGY0OCCLzoV5KTC1HDFEBsVSG-SCFxIcI0XqgGpMG0AQWCgmKMWycvBoCtNrtAuOjudroAjgwkLJMHRWjRSCBo1dVRr0FrGo6ghALe6EE1LTRBGklSAWpgGAhKEyigACAB8AF4e2YrHYnIX8VAClAGDU0kYRzYHM4lEheq41zb3IZKkpdfrPcbzWa49bbUYHSAnS6jO7PQUJyBYw2E5rN8JZKEr6mjBmszm2hzAtHToCMjAABQAWW2MQe27HclFqZYTXjc90Hgx99UEd0TS6e4QAAYjgKIxAeMQxELaNZXxNt2k6dZel0So5X3A0jRNZ82w7E04HCHAW0XMdnDla900zbNcyAnc5QVBp6xLQJZwQlU1FLUBRKMNJwgCVdhDIeR0FUGgyCwFwtQgLdP01NhsDYOslA8M1+AZDxwWcpQzRAAB3GgPHoFwtICdAYCQAAvNQPDYBgtCo5igA)\r\n\r\n<img width=\"356\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5186265/192746586-3f2b5916-37a6-4cb7-b7a7-86617191bc56.png\">\r\n\r\nUsing the following code:\r\n\r\n```python\r\n!python -m pip install git+https://github.com/ChristopherDavisUCI/altair.git@liftparams\r\nimport altair as alt\r\nimport pandas as pd\r\n\r\ndata = [\r\n    {\"Day\": 1, \"Value\": 54.8},\r\n    {\"Day\": 2, \"Value\": 112.1},\r\n    {\"Day\": 3, \"Value\": 63.6},\r\n    {\"Day\": 4, \"Value\": 37.6},\r\n    {\"Day\": 5, \"Value\": 79.7},\r\n    {\"Day\": 6, \"Value\": 137.9},\r\n    {\"Day\": 7, \"Value\": 120.1},\r\n    {\"Day\": 8, \"Value\": 103.3},\r\n    {\"Day\": 9, \"Value\": 394.8},\r\n    {\"Day\": 10, \"Value\": 199.5},\r\n    {\"Day\": 11, \"Value\": 72.3},\r\n    {\"Day\": 12, \"Value\": 51.1},\r\n    {\"Day\": 13, \"Value\": 112},\r\n    {\"Day\": 14, \"Value\": 174.5},\r\n    {\"Day\": 15, \"Value\": 130.5},\r\n]\r\n\r\ndf = pd.DataFrame.from_records(data)\r\n\r\nslider = alt.binding_range(min=0, max=400, step=1)\r\nrule = alt.param(bind=slider, value=177, name='Y_SLIDER')\r\n\r\nbar_blue_background = alt.Chart().mark_bar().encode(\r\n    x=alt.X('Day:O',axis=alt.Axis(labelAngle=0)),\r\n    y=alt.Y('Value:Q')\r\n)\r\n\r\nbar_red_foreground = (\r\n    alt.Chart().mark_bar()\r\n    .transform_filter(alt.datum.Value >= rule)\r\n    .transform_calculate(baseline=rule.name)\r\n    .encode(\r\n        x=alt.X('Day:O',axis=alt.Axis(labelAngle=0)),\r\n        y=alt.Y('baseline:Q', title=\"PM2.5 Value\"),\r\n        y2=alt.Y2('Value:Q'),\r\n        color=alt.value(\"#e45755\")\r\n    )\r\n    .add_params(rule)\r\n)\r\n\r\nrule_base = alt.Chart().encode(\r\n    y=alt.datum(rule, type='quantitative')).add_params(rule)\r\n\r\nrule_horizontal = rule_base.mark_rule()\r\n\r\nrule_label = rule_base.mark_text(\r\n      align='right',\r\n      baseline='bottom',\r\n      dx=-2,\r\n      dy=-2,\r\n      x='width',\r\n      text='hazardous'\r\n    )\r\n\r\nlayer_background = alt.layer(bar_blue_background, bar_red_foreground, data=df)\r\nlayer_foreground = alt.layer(rule_horizontal, rule_label)\r\nalt.layer(layer_background, layer_foreground)\r\n```\r\nBut no matter what I try, it seems I cannot control the order of the bars, the `bar_blue_background` will always appear in front of the `bar_red_foreground`:\r\n<img width=\"353\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5186265/192748669-03c57c38-c436-40b2-b46f-80c40fa4f8f7.png\">\r\n\r\nBut if I remove the `params` definition from the chart. It will work as expected:\r\n```python\r\nbar_blue_background = alt.Chart().mark_bar().encode(\r\n    x=alt.X('Day:O',axis=alt.Axis(labelAngle=0)),\r\n    y=alt.Y('Value:Q')\r\n)\r\n\r\nbar_red_foreground = (\r\n    alt.Chart().mark_bar()\r\n    .transform_filter(alt.datum.Value >= 177)\r\n    .transform_calculate(baseline='177')\r\n    .encode(\r\n        x=alt.X('Day:O',axis=alt.Axis(labelAngle=0)),\r\n        y=alt.Y('baseline:Q', title=\"PM2.5 Value\"),\r\n        y2=alt.Y2('Value:Q'),\r\n        color=alt.value(\"#e45755\")\r\n    )\r\n)\r\n\r\nrule_base = alt.Chart().encode(\r\n    y=alt.datum('177', type='quantitative'))\r\n\r\nrule_horizontal = rule_base.mark_rule()\r\n\r\nrule_label = rule_base.mark_text(\r\n      align='right',\r\n      baseline='bottom',\r\n      dx=-2,\r\n      dy=-2,\r\n      x='width',\r\n      text='hazardous'\r\n    )\r\n\r\nlayer_background = alt.layer(bar_blue_background, bar_red_foreground, data=df)\r\nlayer_foreground = alt.layer(rule_horizontal, rule_label)\r\nalt.layer(layer_background, layer_foreground)\r\n```\r\n<img width=\"353\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5186265/192748464-703a1249-a435-4e6c-972d-35fb63c1876b.png\">\r\n\r\n@ChristopherDavisUCI \r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2685/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2685/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2680", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2680/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2680/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2680/events", "html_url": "https://github.com/altair-viz/altair/issues/2680", "id": 1376684331, "node_id": "I_kwDOAoxtyc5SDokr", "number": 2680, "title": "Scale for axis with string values", "user": {"login": "arogozhnikov", "id": 6318811, "node_id": "MDQ6VXNlcjYzMTg4MTE=", "avatar_url": "https://avatars.githubusercontent.com/u/6318811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arogozhnikov", "html_url": "https://github.com/arogozhnikov", "followers_url": "https://api.github.com/users/arogozhnikov/followers", "following_url": "https://api.github.com/users/arogozhnikov/following{/other_user}", "gists_url": "https://api.github.com/users/arogozhnikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arogozhnikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arogozhnikov/subscriptions", "organizations_url": "https://api.github.com/users/arogozhnikov/orgs", "repos_url": "https://api.github.com/users/arogozhnikov/repos", "events_url": "https://api.github.com/users/arogozhnikov/events{/privacy}", "received_events_url": "https://api.github.com/users/arogozhnikov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-09-17T06:33:05Z", "updated_at": "2022-10-22T12:05:15Z", "closed_at": "2022-09-21T19:26:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to use 'lookup scaling' (don't know the right term) for axis encoding the same way it works for other encodings (e.g. for colors and sizes), but it fails at vega-validation\r\n\r\n```python\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\ndf = pd.DataFrame(dict(\r\n    x=['A', 'B', 'C', 'D'], \r\n    y=[1, 2, 3, 4]\r\n))\r\n\r\nalt.Chart(df).mark_point().encode(\r\n    x=alt.X('x', \r\n        scale=alt.Scale(\r\n            domain=['A', 'B', 'C', 'D'],\r\n            range=[1, 2, 11, 12],\r\n        ),\r\n    ),\r\n    y=alt.Y('y'),\r\n)\r\n```\r\n\r\n\r\nResult is a JS error:\r\n```\r\nJavascript Error: layout size is step although width/height is not step.\r\nThis usually means there's a typo in your chart specification. See the javascript console for the full traceback.\r\n```\r\n\r\nIf I provide height and width explicitly, resulting values are treated as pixels (so 800 are total pixels in the example below and points are put at 101, 102, 211, 212), and I found no way to change this behavior \r\n```\r\nalt.Chart(df).mark_point().encode(\r\n    x=alt.X('x', \r\n        scale=alt.Scale(\r\n            domain=['A', 'B', 'C', 'D'],\r\n            range=[100, 102, 211, 212],\r\n        ),\r\n    ),\r\n    y=alt.Y('y'),\r\n).properties(\r\n    width=800,\r\n    height=100\r\n)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2680/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2680/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2678", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2678/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2678/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2678/events", "html_url": "https://github.com/altair-viz/altair/issues/2678", "id": 1366394742, "node_id": "I_kwDOAoxtyc5RcYd2", "number": 2678, "title": "Inconsistent draw order for layered histograms", "user": {"login": "Bonnevie", "id": 5861991, "node_id": "MDQ6VXNlcjU4NjE5OTE=", "avatar_url": "https://avatars.githubusercontent.com/u/5861991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bonnevie", "html_url": "https://github.com/Bonnevie", "followers_url": "https://api.github.com/users/Bonnevie/followers", "following_url": "https://api.github.com/users/Bonnevie/following{/other_user}", "gists_url": "https://api.github.com/users/Bonnevie/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bonnevie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bonnevie/subscriptions", "organizations_url": "https://api.github.com/users/Bonnevie/orgs", "repos_url": "https://api.github.com/users/Bonnevie/repos", "events_url": "https://api.github.com/users/Bonnevie/events{/privacy}", "received_events_url": "https://api.github.com/users/Bonnevie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-08T13:58:54Z", "updated_at": "2023-01-06T12:40:09Z", "closed_at": "2023-01-06T12:40:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "When bar charts (histograms) are drawn stacked with transparency, as in the following gallery example,\r\nhttps://altair-viz.github.io/gallery/layered_histogram.html, \r\nthen, in the areas where the histograms intersect, the drawing order for each set of bars appears to be inconsistent leading to inconsistent coloring where colors dominate alternatingly, as in the crop below:\r\n![cropped_histogram](https://user-images.githubusercontent.com/5861991/189140054-71479a00-5410-433b-8f7d-281198adefe2.png)\r\nThis can look pretty weird in some scenarios:\r\n![image](https://user-images.githubusercontent.com/5861991/189140409-27162d0f-e769-445c-b09b-a82d025562c4.png)\r\nwhich was generated with code inspired by the example above:\r\n```python\r\nchart = (\r\n    alt.Chart(df)\r\n    .mark_bar(opacity=0.5, binSpacing=0)\r\n    .encode(alt.X('x_col', bin=alt.BinParams(maxbins=50)), alt.Y(\"count()\", stack=False), color='group_col')\r\n)\r\n```\r\nI don't know if I'm missing some option? In [this old issue](https://github.com/altair-viz/altair/pull/2419) where they use `mark_area`, the problem does not seem to occur.  \r\n\r\nI assume using explicit layering with `+` might fix it, but then a lot of the convenience is lost\r\n\r\nThe problem is not immediately apparent in the vega-lite examples I have been able to find: https://vega.github.io/vega-lite/docs/stack.html#layered-bar-chart", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2678/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2678/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2675", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2675/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2675/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2675/events", "html_url": "https://github.com/altair-viz/altair/issues/2675", "id": 1360399375, "node_id": "I_kwDOAoxtyc5RFgwP", "number": 2675, "title": "entrypoints is in maintenance mode", "user": {"login": "EdgyNortal", "id": 108864217, "node_id": "U_kgDOBn0i2Q", "avatar_url": "https://avatars.githubusercontent.com/u/108864217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EdgyNortal", "html_url": "https://github.com/EdgyNortal", "followers_url": "https://api.github.com/users/EdgyNortal/followers", "following_url": "https://api.github.com/users/EdgyNortal/following{/other_user}", "gists_url": "https://api.github.com/users/EdgyNortal/gists{/gist_id}", "starred_url": "https://api.github.com/users/EdgyNortal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EdgyNortal/subscriptions", "organizations_url": "https://api.github.com/users/EdgyNortal/orgs", "repos_url": "https://api.github.com/users/EdgyNortal/repos", "events_url": "https://api.github.com/users/EdgyNortal/events{/privacy}", "received_events_url": "https://api.github.com/users/EdgyNortal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-02T16:26:33Z", "updated_at": "2023-01-04T11:44:17Z", "closed_at": "2023-01-04T11:44:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "![image](https://user-images.githubusercontent.com/108864217/188197431-6f23baa1-9643-4a49-b1b5-937fddbc5d58.png)\r\nRan into an issue building a Docker image that involved altair, and a conflicting entrypoints version. The work around was to hard pin `entrypoints` in our code. But as that project is in maintenance mode, it might be nice to decouple altair from it.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2675/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2668", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2668/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2668/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2668/events", "html_url": "https://github.com/altair-viz/altair/issues/2668", "id": 1331088617, "node_id": "I_kwDOAoxtyc5PVszp", "number": 2668, "title": "Mark_bar step increase of the bar width", "user": {"login": "stebaski", "id": 76164559, "node_id": "MDQ6VXNlcjc2MTY0NTU5", "avatar_url": "https://avatars.githubusercontent.com/u/76164559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stebaski", "html_url": "https://github.com/stebaski", "followers_url": "https://api.github.com/users/stebaski/followers", "following_url": "https://api.github.com/users/stebaski/following{/other_user}", "gists_url": "https://api.github.com/users/stebaski/gists{/gist_id}", "starred_url": "https://api.github.com/users/stebaski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stebaski/subscriptions", "organizations_url": "https://api.github.com/users/stebaski/orgs", "repos_url": "https://api.github.com/users/stebaski/repos", "events_url": "https://api.github.com/users/stebaski/events{/privacy}", "received_events_url": "https://api.github.com/users/stebaski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-07T18:26:27Z", "updated_at": "2022-08-08T07:14:49Z", "closed_at": "2022-08-08T07:14:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "The width of the bars in mark_bar plot is not proportional to the given size:\r\ndata = pd.DataFrame({'name': ['a', 'b','c','d'], 'value': [8, 9,10,11]})\r\n\r\nalt.Chart(data).mark_bar(size=50).encode(\r\n    x=alt.X('name:N'),\r\n    y='value:Q',\r\n    size = alt.Size('value:N'),\r\n).properties(width={\"step\": 30})\r\n![altair_bug](https://user-images.githubusercontent.com/76164559/183305583-8a66d29e-0775-4c14-83c7-c7d6cdc3b874.png)\r\nNo matter what numbers are given as the size values the difference between bar widths will always be the same. I don't like how the smallest width is too tiny. Is there a way to fix this?\r\n\r\nThank you!\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2668/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2665", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2665/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2665/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2665/events", "html_url": "https://github.com/altair-viz/altair/issues/2665", "id": 1327256786, "node_id": "I_kwDOAoxtyc5PHFTS", "number": 2665, "title": "Issue with resolve_scale and faceted heatmap", "user": {"login": "XaviFar", "id": 7207214, "node_id": "MDQ6VXNlcjcyMDcyMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7207214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/XaviFar", "html_url": "https://github.com/XaviFar", "followers_url": "https://api.github.com/users/XaviFar/followers", "following_url": "https://api.github.com/users/XaviFar/following{/other_user}", "gists_url": "https://api.github.com/users/XaviFar/gists{/gist_id}", "starred_url": "https://api.github.com/users/XaviFar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/XaviFar/subscriptions", "organizations_url": "https://api.github.com/users/XaviFar/orgs", "repos_url": "https://api.github.com/users/XaviFar/repos", "events_url": "https://api.github.com/users/XaviFar/events{/privacy}", "received_events_url": "https://api.github.com/users/XaviFar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-08-03T13:53:22Z", "updated_at": "2023-01-06T12:42:29Z", "closed_at": "2023-01-06T12:42:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello everyone!\r\n\r\nI am trying to visualize the data using a heatmap but I wanted to separate the variables from the y-axis into meaningful categories. But for some reason it doesn't work for the Y axis but it does for the X axis. I will use the data from the heatmap example.\r\n\r\nI will create 3 mock groups as an example using pd.cut.\r\n\r\n```\r\nimport altair as alt\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\n# Compute x^2 + y^2 across a 2D grid\r\nx, y = np.meshgrid(range(-5, 5), range(-5, 5))\r\nz = x ** 2 + y ** 2\r\n\r\n# Convert this grid to columnar data expected by Altair\r\nsource = pd.DataFrame({'x': x.ravel(),\r\n                     'y': y.ravel(),\r\n                     'z': z.ravel()})\r\n\r\nbins= [-6, 0, 2, 6]\r\n\r\nsource['bins'] = pd.cut(source['x'], bins, labels=range(len(bins) - 1))\r\n\r\nalt.Chart(source).mark_rect().encode(\r\n    x='x:O',\r\n    y='y:O',\r\n    color='z:Q',\r\n     column=alt.Column(\"bins:O\", \r\n                      title=None, \r\n                      header=alt.Header(labelFontSize=0))\r\n).resolve_scale(\r\n    x=\"independent\"           \r\n).configure_facet(\r\n    spacing=5\r\n)\r\n\r\n```\r\n![visualization(26)](https://user-images.githubusercontent.com/7207214/182623599-ee8cbaae-6d34-4ca3-821e-ece3f5ee721b.png)\r\n\r\nIt works as intended, but if I try to do the same with the y axis, which in my case is what I need it doesn't work.\r\n\r\n```\r\nbins= [-6, 0, 2, 6]\r\nsource['bins'] = pd.cut(source['y'], bins, labels=range(len(bins) - 1))\r\n\r\nalt.Chart(source).mark_rect().encode(\r\n    x='x:O',\r\n    y='y:O',\r\n    color='z:Q',\r\n     row=alt.Row(\"bins:O\", \r\n                      title=None, \r\n                      header=alt.Header(labelFontSize=0))\r\n).resolve_scale(\r\n    y=\"independent\"           \r\n).configure_facet(\r\n    spacing=5\r\n)\r\n```\r\n\r\nDo you have any idea why this is happening? or do you have any workaround for this issue?\r\n\r\nThanks!\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2665/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2664", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2664/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2664/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2664/events", "html_url": "https://github.com/altair-viz/altair/issues/2664", "id": 1326162804, "node_id": "I_kwDOAoxtyc5PC6N0", "number": 2664, "title": "PNG blurry when compared to HTML and SVG", "user": {"login": "mcp292", "id": 49123398, "node_id": "MDQ6VXNlcjQ5MTIzMzk4", "avatar_url": "https://avatars.githubusercontent.com/u/49123398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcp292", "html_url": "https://github.com/mcp292", "followers_url": "https://api.github.com/users/mcp292/followers", "following_url": "https://api.github.com/users/mcp292/following{/other_user}", "gists_url": "https://api.github.com/users/mcp292/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcp292/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcp292/subscriptions", "organizations_url": "https://api.github.com/users/mcp292/orgs", "repos_url": "https://api.github.com/users/mcp292/repos", "events_url": "https://api.github.com/users/mcp292/events{/privacy}", "received_events_url": "https://api.github.com/users/mcp292/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-02T17:29:10Z", "updated_at": "2022-08-02T18:00:09Z", "closed_at": "2022-08-02T18:00:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "HTML:\r\n![image](https://user-images.githubusercontent.com/49123398/182426329-4fb5b7fa-bb23-4f00-8274-d21292481272.png)\r\n\r\nPNG:\r\n![image](https://user-images.githubusercontent.com/49123398/182426420-a2bc28d0-5700-4dc7-90df-9099d3c72b08.png)\r\n\r\nSVG:  \r\nSlightly clearer than HTML; I'm not able to easily upload or copy into post.\r\n\r\nUsing geckodriver and selenium 4.2.0, calling `save(\"chart.png\", webdriver=\"firefox\"). Confirmed with chromedriver as well.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2664/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2664/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2663", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2663/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2663/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2663/events", "html_url": "https://github.com/altair-viz/altair/issues/2663", "id": 1323605155, "node_id": "I_kwDOAoxtyc5O5Jyj", "number": 2663, "title": "when using `sort` on ordinal axes, `Maximum call stack exceeded error`", "user": {"login": "jbloom", "id": 1906801, "node_id": "MDQ6VXNlcjE5MDY4MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1906801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbloom", "html_url": "https://github.com/jbloom", "followers_url": "https://api.github.com/users/jbloom/followers", "following_url": "https://api.github.com/users/jbloom/following{/other_user}", "gists_url": "https://api.github.com/users/jbloom/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbloom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbloom/subscriptions", "organizations_url": "https://api.github.com/users/jbloom/orgs", "repos_url": "https://api.github.com/users/jbloom/repos", "events_url": "https://api.github.com/users/jbloom/events{/privacy}", "received_events_url": "https://api.github.com/users/jbloom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-07-31T23:14:43Z", "updated_at": "2022-08-22T20:06:09Z", "closed_at": "2022-08-22T20:06:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to sort an ordinal axis using the `sort` keyword. However, when the number of values being sorted is large, I get the following error:\r\n\r\n```\r\nJavascript Error: Maximum call stack size exceeded\r\nThis usually means there's a typo in your chart specification. See the javascript console for the full traceback.\r\n```\r\n\r\nHere is a minimum reproducible example. (This is a toy example, I realize this particular toy plot could be done with a quantitative axis, but the example captures the problem with the real data I want to plot).\r\n\r\nSpecifically, the following code gives the above error when the value of `n` is large (say 1500), but not when it is smaller (say 200):\r\n```\r\nimport altair as alt\r\n\r\nimport pandas as pd\r\n\r\nn = 1500\r\n\r\ndf = pd.DataFrame({\"site\": map(str, range(n)), \"value\": 1})\r\n\r\n(\r\n    alt.Chart(df)\r\n    .encode(\r\n        x=alt.X(\"site:N\", sort=list(range(n))),\r\n        y=\"value\",\r\n    )\r\n    .mark_point()\r\n)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2663/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2650", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2650/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2650/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2650/events", "html_url": "https://github.com/altair-viz/altair/issues/2650", "id": 1294982253, "node_id": "I_kwDOAoxtyc5NL9xt", "number": 2650, "title": "Incompatible with selenium 4.3.0", "user": {"login": "cgbahk", "id": 34672141, "node_id": "MDQ6VXNlcjM0NjcyMTQx", "avatar_url": "https://avatars.githubusercontent.com/u/34672141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgbahk", "html_url": "https://github.com/cgbahk", "followers_url": "https://api.github.com/users/cgbahk/followers", "following_url": "https://api.github.com/users/cgbahk/following{/other_user}", "gists_url": "https://api.github.com/users/cgbahk/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgbahk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgbahk/subscriptions", "organizations_url": "https://api.github.com/users/cgbahk/orgs", "repos_url": "https://api.github.com/users/cgbahk/repos", "events_url": "https://api.github.com/users/cgbahk/events{/privacy}", "received_events_url": "https://api.github.com/users/cgbahk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-07-06T01:30:34Z", "updated_at": "2022-07-13T06:05:26Z", "closed_at": "2022-07-13T06:05:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "## TL;DR;\r\n`chart.save(...)` doesn't work with `selenium 4.3.0` (released 2022/6/24), due to API deprecation\r\n\r\n## Detail\r\nWhen I try to save chart in png or svg using `chart.save(...)`, it fails like this\r\n```\r\nAttributeError: 'WebDriver' object has no attribute 'find_element_by_id'\r\n```\r\n<details>\r\n<summary>\r\nFull error trace\r\n</summary>\r\n\r\n```\r\nTraceback (most recent call last):\r\n  ...\r\n  File \"<REDACTED>.py\", line 62, in main\r\n    chart.save(\"image.png\")\r\n  File \"<REDACTED>/lib/python3.8/site-packages/altair/vegalite/v4/api.py\", line 488, in save\r\n    result = save(**kwds)\r\n  File \"<REDACTED>/lib/python3.8/site-packages/altair/utils/save.py\", line 116, in save\r\n    mimebundle = spec_to_mimebundle(\r\n  File \"<REDACTED>/lib/python3.8/site-packages/altair/utils/mimebundle.py\", line 60, in spec_to_mimebundle\r\n    return altair_saver.render(spec, format, mode=mode, **kwargs)\r\n  File \"<REDACTED>/lib/python3.8/site-packages/altair_saver/_core.py\", line 257, in render\r\n    mimebundle.update(saver.mimebundle(fmt))\r\n  File \"<REDACTED>/lib/python3.8/site-packages/altair_saver/savers/_saver.py\", line 90, in mimebundle\r\n    bundle[mimetype] = self._serialize(fmt, \"mimebundle\")\r\n  File \"<REDACTED>/lib/python3.8/site-packages/altair_saver/savers/_selenium.py\", line 284, in _serialize\r\n    out = self._extract(fmt)\r\n  File \"<REDACTED>/lib/python3.8/site-packages/altair_saver/savers/_selenium.py\", line 267, in _extract\r\n    driver.find_element_by_id(\"vis\")\r\nAttributeError: 'WebDriver' object has no attribute 'find_element_by_id'\r\n```\r\n\r\n</details>\r\n\r\nThis stackoverflow answer was helpful to find why it fails: \r\n> Selenium 4.3.0\r\n> * Deprecated `find_element_by_*` and `find_elements_by_*` are now removed (# 10712)\r\n>\r\n> (from https://stackoverflow.com/a/72773269/4214521)\r\n\r\n`selenium 4.3.0` released on 2022/6/24 https://github.com/SeleniumHQ/selenium/releases/tag/selenium-4.3.0\r\n\r\n## Reproduction\r\n\r\nI guess any `save()` call can reproduce it. For example, I can reproduce this issue with most simple example: [:link:](https://altair-viz.github.io/gallery/simple_bar_chart.html)\r\n\r\n`save()` successful case:\r\n```\r\n$ cat requirements.txt\r\n\r\nselenium<4.3.0\r\naltair\r\naltair_saver\r\nvega-datasets\r\nrequests\r\n```\r\n\r\n<details>\r\n<summary>\r\npip list\r\n</summary>\r\n\r\n```\r\n$ pip list\r\n\r\nPackage             Version\r\n------------------- ---------\r\naltair              4.2.0\r\naltair-data-server  0.4.1\r\naltair-saver        0.5.0\r\naltair-viewer       0.4.0\r\nasync-generator     1.10\r\nattrs               21.4.0\r\ncertifi             2022.6.15\r\ncffi                1.15.1\r\ncharset-normalizer  2.1.0\r\ncryptography        37.0.4\r\nentrypoints         0.4\r\nh11                 0.13.0\r\nidna                3.3\r\nimportlib-resources 5.8.0\r\nJinja2              3.1.2\r\njsonschema          4.6.1\r\nMarkupSafe          2.1.1\r\nnumpy               1.23.0\r\noutcome             1.2.0\r\npandas              1.4.3\r\npip                 22.1.2\r\npkg_resources       0.0.0\r\nportpicker          1.5.2\r\npsutil              5.9.1\r\npycparser           2.21\r\npyOpenSSL           22.0.0\r\npyrsistent          0.18.1\r\nPySocks             1.7.1\r\npython-dateutil     2.8.2\r\npytz                2022.1\r\nrequests            2.28.1\r\nselenium            4.2.0\r\nsetuptools          44.0.0\r\nsix                 1.16.0\r\nsniffio             1.2.0\r\nsortedcontainers    2.4.0\r\ntoolz               0.11.2\r\ntornado             6.2\r\ntrio                0.21.0\r\ntrio-websocket      0.9.2\r\nurllib3             1.26.9\r\nvega-datasets       0.9.0\r\nwsproto             1.1.0\r\nzipp                3.8.0\r\n```\r\n\r\n</details>\r\n\r\n--\r\n\r\n`save()` failure case (with above error log):\r\n```\r\n$ cat requirements.txt\r\n\r\nselenium==4.3.0\r\naltair\r\naltair_saver\r\nvega-datasets\r\nrequests\r\n```\r\n\r\n<details>\r\n<summary>\r\npip list\r\n</summary>\r\n\r\n```\r\nPackage             Version\r\n------------------- ---------\r\naltair              4.2.0\r\naltair-data-server  0.4.1\r\naltair-saver        0.5.0\r\naltair-viewer       0.4.0\r\nasync-generator     1.10\r\nattrs               21.4.0\r\ncertifi             2022.6.15\r\ncffi                1.15.1\r\ncharset-normalizer  2.1.0\r\ncryptography        37.0.4\r\nentrypoints         0.4\r\nh11                 0.13.0\r\nidna                3.3\r\nimportlib-resources 5.8.0\r\nJinja2              3.1.2\r\njsonschema          4.6.1\r\nMarkupSafe          2.1.1\r\nnumpy               1.23.0\r\noutcome             1.2.0\r\npandas              1.4.3\r\npip                 22.1.2\r\npkg_resources       0.0.0\r\nportpicker          1.5.2\r\npsutil              5.9.1\r\npycparser           2.21\r\npyOpenSSL           22.0.0\r\npyrsistent          0.18.1\r\nPySocks             1.7.1\r\npython-dateutil     2.8.2\r\npytz                2022.1\r\nrequests            2.28.1\r\nselenium            4.3.0\r\nsetuptools          44.0.0\r\nsix                 1.16.0\r\nsniffio             1.2.0\r\nsortedcontainers    2.4.0\r\ntoolz               0.11.2\r\ntornado             6.2\r\ntrio                0.21.0\r\ntrio-websocket      0.9.2\r\nurllib3             1.26.9\r\nvega-datasets       0.9.0\r\nwsproto             1.1.0\r\nzipp                3.8.0\r\n```\r\n\r\n</details>\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2650/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2650/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2638", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2638/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2638/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2638/events", "html_url": "https://github.com/altair-viz/altair/issues/2638", "id": 1290844517, "node_id": "I_kwDOAoxtyc5M8Lll", "number": 2638, "title": "Dots aren't showing up in ranged dot plot", "user": {"login": "palewire", "id": 9993, "node_id": "MDQ6VXNlcjk5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/9993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palewire", "html_url": "https://github.com/palewire", "followers_url": "https://api.github.com/users/palewire/followers", "following_url": "https://api.github.com/users/palewire/following{/other_user}", "gists_url": "https://api.github.com/users/palewire/gists{/gist_id}", "starred_url": "https://api.github.com/users/palewire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palewire/subscriptions", "organizations_url": "https://api.github.com/users/palewire/orgs", "repos_url": "https://api.github.com/users/palewire/repos", "events_url": "https://api.github.com/users/palewire/events{/privacy}", "received_events_url": "https://api.github.com/users/palewire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-01T03:02:46Z", "updated_at": "2022-07-03T19:09:49Z", "closed_at": "2022-07-03T19:09:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "![Screenshot from 2022-06-30 20-02-14](https://user-images.githubusercontent.com/9993/176815294-a1801b76-ed5a-4f3c-b38f-71850c131a5a.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2638/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2638/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2629", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2629/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2629/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2629/events", "html_url": "https://github.com/altair-viz/altair/issues/2629", "id": 1290668630, "node_id": "I_kwDOAoxtyc5M7gpW", "number": 2629, "title": "There are two U.S. Airports maps. There probably shouldn't be.", "user": {"login": "palewire", "id": 9993, "node_id": "MDQ6VXNlcjk5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/9993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palewire", "html_url": "https://github.com/palewire", "followers_url": "https://api.github.com/users/palewire/followers", "following_url": "https://api.github.com/users/palewire/following{/other_user}", "gists_url": "https://api.github.com/users/palewire/gists{/gist_id}", "starred_url": "https://api.github.com/users/palewire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palewire/subscriptions", "organizations_url": "https://api.github.com/users/palewire/orgs", "repos_url": "https://api.github.com/users/palewire/repos", "events_url": "https://api.github.com/users/palewire/events{/privacy}", "received_events_url": "https://api.github.com/users/palewire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-30T21:42:50Z", "updated_at": "2022-07-03T18:43:24Z", "closed_at": "2022-07-03T18:43:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://altair-viz.github.io/gallery/airports_count.html\r\n\r\nhttps://altair-viz.github.io/gallery/airports.html\r\n\r\n![Screenshot from 2022-06-30 14-42-01](https://user-images.githubusercontent.com/9993/176783857-c4d190a2-1d11-4ad0-b205-057ff3f979f9.png)\r\n![Screenshot from 2022-06-30 14-42-04](https://user-images.githubusercontent.com/9993/176783877-a4afb4b9-b40f-4f88-b062-6ca6fbda55a0.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2629/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2629/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2627", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2627/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2627/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2627/events", "html_url": "https://github.com/altair-viz/altair/issues/2627", "id": 1290652993, "node_id": "I_kwDOAoxtyc5M7c1B", "number": 2627, "title": "x-axis tick labels in Natural Disasters case study need clean up", "user": {"login": "palewire", "id": 9993, "node_id": "MDQ6VXNlcjk5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/9993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palewire", "html_url": "https://github.com/palewire", "followers_url": "https://api.github.com/users/palewire/followers", "following_url": "https://api.github.com/users/palewire/following{/other_user}", "gists_url": "https://api.github.com/users/palewire/gists{/gist_id}", "starred_url": "https://api.github.com/users/palewire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palewire/subscriptions", "organizations_url": "https://api.github.com/users/palewire/orgs", "repos_url": "https://api.github.com/users/palewire/repos", "events_url": "https://api.github.com/users/palewire/events{/privacy}", "received_events_url": "https://api.github.com/users/palewire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-30T21:21:25Z", "updated_at": "2022-07-04T04:36:12Z", "closed_at": "2022-07-04T04:36:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See:\r\n\r\n![Screenshot from 2022-06-30 14-20-48](https://user-images.githubusercontent.com/9993/176780327-c5f2ee5d-69e8-46fe-8bb2-89e7e3843e7a.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2627/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2627/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2619", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2619/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2619/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2619/events", "html_url": "https://github.com/altair-viz/altair/issues/2619", "id": 1274933585, "node_id": "I_kwDOAoxtyc5L_fFR", "number": 2619, "title": "projection with translate parameter raises attribute error", "user": {"login": "krlng", "id": 1107509, "node_id": "MDQ6VXNlcjExMDc1MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1107509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/krlng", "html_url": "https://github.com/krlng", "followers_url": "https://api.github.com/users/krlng/followers", "following_url": "https://api.github.com/users/krlng/following{/other_user}", "gists_url": "https://api.github.com/users/krlng/gists{/gist_id}", "starred_url": "https://api.github.com/users/krlng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/krlng/subscriptions", "organizations_url": "https://api.github.com/users/krlng/orgs", "repos_url": "https://api.github.com/users/krlng/repos", "events_url": "https://api.github.com/users/krlng/events{/privacy}", "received_events_url": "https://api.github.com/users/krlng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-06-17T11:46:47Z", "updated_at": "2022-10-29T19:24:18Z", "closed_at": "2022-10-29T19:11:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Code example: \r\n```\r\nimprot altair as alt\r\nfrom vega_datasets import data\r\nworld = data.world_110m.url\r\nalt.Chart(alt.topo_feature(world, 'countries')).mark_geoshape().project(\r\n    type='mercator', scale=400, translate=[100, 550]\r\n)\r\n```\r\n\r\nUsing altiar version 4.2.0\r\n\r\nStacktrace: \r\n```\r\n\r\nReturns: \r\nAttributeError                            Traceback (most recent call last)\r\n/var/folders/ym/_50l9__942705dh4x6gh9d9r0000gn/T/ipykernel_63747/2947034457.py in <module>\r\n      1 from vega_datasets import data\r\n      2 world = data.world_110m.url\r\n----> 3 alt.Chart(alt.topo_feature(world, 'countries')).mark_geoshape(\r\n      4     fill='#2a1d0c', stroke='#706545', strokeWidth=0.5\r\n      5 ).project(\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/altair/vegalite/v4/api.py in project(self, type, center, clipAngle, clipExtent, coefficient, distance, fraction, lobes, parallel, precision, radius, ratio, reflectX, reflectY, rotate, scale, spacing, tilt, translate, **kwds)\r\n    711             shorthand parsing.\r\n    712 \r\n--> 713         Returns\r\n    714         -------\r\n    715         self : Chart object\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/altair/vegalite/v4/api.py in properties(self, **kwargs)\r\n    586         tilt=Undefined,\r\n    587         translate=Undefined,\r\n--> 588         **kwds,\r\n    589     ):\r\n    590         \"\"\"Add a geographic projection to the chart.\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/altair/utils/schemapi.py in validate_property(cls, name, value, schema)\r\n    462 \r\n    463     def __dir__(self):\r\n--> 464         return list(self._kwds.keys())\r\n    465 \r\n    466 \r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in validate(instance, schema, cls, *args, **kwargs)\r\n    963     cls.check_schema(schema)\r\n    964     validator = cls(schema, *args, **kwargs)\r\n--> 965     error = exceptions.best_match(validator.iter_errors(instance))\r\n    966     if error is not None:\r\n    967         raise error\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/exceptions.py in best_match(errors, key)\r\n    352     \"\"\"\r\n    353     errors = iter(errors)\r\n--> 354     best = next(errors, None)\r\n    355     if best is None:\r\n    356         return\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in iter_errors(self, instance, _schema)\r\n    222 \r\n    223                     errors = validator(self, v, instance, _schema) or ()\r\n--> 224                     for error in errors:\r\n    225                         # set details if not already set by the called fn\r\n    226                         error._set(\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/_validators.py in ref(validator, ref, instance, schema)\r\n    296 \r\n    297         try:\r\n--> 298             yield from validator.descend(instance, resolved)\r\n    299         finally:\r\n    300             validator.resolver.pop_scope()\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in descend(self, instance, schema, path, schema_path)\r\n    238 \r\n    239         def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 240             for error in self.evolve(schema=schema).iter_errors(instance):\r\n    241                 if path is not None:\r\n    242                     error.path.appendleft(path)\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in iter_errors(self, instance, _schema)\r\n    222 \r\n    223                     errors = validator(self, v, instance, _schema) or ()\r\n--> 224                     for error in errors:\r\n    225                         # set details if not already set by the called fn\r\n    226                         error._set(\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/_validators.py in properties(validator, properties, instance, schema)\r\n    330     for property, subschema in properties.items():\r\n    331         if property in instance:\r\n--> 332             yield from validator.descend(\r\n    333                 instance[property],\r\n    334                 subschema,\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in descend(self, instance, schema, path, schema_path)\r\n    238 \r\n    239         def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 240             for error in self.evolve(schema=schema).iter_errors(instance):\r\n    241                 if path is not None:\r\n    242                     error.path.appendleft(path)\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in iter_errors(self, instance, _schema)\r\n    222 \r\n    223                     errors = validator(self, v, instance, _schema) or ()\r\n--> 224                     for error in errors:\r\n    225                         # set details if not already set by the called fn\r\n    226                         error._set(\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/_validators.py in ref(validator, ref, instance, schema)\r\n    296 \r\n    297         try:\r\n--> 298             yield from validator.descend(instance, resolved)\r\n    299         finally:\r\n    300             validator.resolver.pop_scope()\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in descend(self, instance, schema, path, schema_path)\r\n    238 \r\n    239         def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 240             for error in self.evolve(schema=schema).iter_errors(instance):\r\n    241                 if path is not None:\r\n    242                     error.path.appendleft(path)\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in iter_errors(self, instance, _schema)\r\n    222 \r\n    223                     errors = validator(self, v, instance, _schema) or ()\r\n--> 224                     for error in errors:\r\n    225                         # set details if not already set by the called fn\r\n    226                         error._set(\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/_validators.py in items(validator, items, instance, schema)\r\n     74     else:\r\n     75         for index in range(prefix, total):\r\n---> 76             yield from validator.descend(\r\n     77                 instance=instance[index],\r\n     78                 schema=items,\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in descend(self, instance, schema, path, schema_path)\r\n    238 \r\n    239         def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 240             for error in self.evolve(schema=schema).iter_errors(instance):\r\n    241                 if path is not None:\r\n    242                     error.path.appendleft(path)\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in iter_errors(self, instance, _schema)\r\n    212                 return\r\n    213 \r\n--> 214             scope = id_of(_schema)\r\n    215             if scope:\r\n    216                 self.resolver.push_scope(scope)\r\n\r\n~/Library/Caches/pypoetry/virtualenvs/py-dashboarding-lZuNvo2c-py3.8/lib/python3.8/site-packages/jsonschema/validators.py in _id_of(schema)\r\n     88     if schema is True or schema is False:\r\n     89         return \"\"\r\n---> 90     return schema.get(\"$id\", \"\")\r\n     91 \r\n     92 \r\n\r\nAttributeError: 'list' object has no attribute 'get'\r\n\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2619/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2619/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2618", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2618/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2618/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2618/events", "html_url": "https://github.com/altair-viz/altair/issues/2618", "id": 1274746855, "node_id": "I_kwDOAoxtyc5L-xfn", "number": 2618, "title": "Unexpected behaivor combining different pie charts", "user": {"login": "krlng", "id": 1107509, "node_id": "MDQ6VXNlcjExMDc1MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1107509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/krlng", "html_url": "https://github.com/krlng", "followers_url": "https://api.github.com/users/krlng/followers", "following_url": "https://api.github.com/users/krlng/following{/other_user}", "gists_url": "https://api.github.com/users/krlng/gists{/gist_id}", "starred_url": "https://api.github.com/users/krlng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/krlng/subscriptions", "organizations_url": "https://api.github.com/users/krlng/orgs", "repos_url": "https://api.github.com/users/krlng/repos", "events_url": "https://api.github.com/users/krlng/events{/privacy}", "received_events_url": "https://api.github.com/users/krlng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-06-17T08:39:33Z", "updated_at": "2022-06-17T13:07:35Z", "closed_at": "2022-06-17T13:07:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi :) \r\n\r\nI played a bit with the new pie charts and discovered, that its visualization depends on other pie charts it is displayed with. I guess its a bug in the way the alt.Theta works (it seems to calculate the full circle not for each chart, but the biggest one).\r\n<img width=\"975\" alt=\"Screenshot 2022-06-17 at 10 37 09\" src=\"https://user-images.githubusercontent.com/1107509/174261281-4fda8e5d-2fba-41ed-bfaa-9b19f15f18ee.png\">\r\n\r\n**Code for reproduction:**\r\n\r\n```\r\ndf = pd.DataFrame({'name': {995: 'Oceania', 372: 'Americas'},\r\n 'cement_co2': {995: 3.524, 372: 79.719},\r\n 'coal_co2': {995: 171.30100000000002, 372: 184.12},\r\n 'flaring_co2': {995: 21.362000000000002, 372: 66.902},\r\n 'gas_co2': {995: 89.064, 372: 632.215},\r\n 'oil_co2': {995: 154.49599999999998, 372: 1085.104},\r\n 'other_industry_co2': {995: 4.651, 372: 8.486}})\r\n\r\ncharts = []\r\nfor name in df.name:\r\n    charts.append(alt.Chart(df.loc[df.name == name].melt(\"name\"), title=name).mark_arc().encode(\r\n        theta=alt.Theta(\"value:Q\"),\r\n        color=\"variable:N\"\r\n    ))\r\n    \r\n# img1\r\ncharts[0]\r\n\r\n# img2\r\ncharts[0] | charts[1]\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2618/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2602", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2602/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2602/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2602/events", "html_url": "https://github.com/altair-viz/altair/issues/2602", "id": 1231586557, "node_id": "I_kwDOAoxtyc5JaIT9", "number": 2602, "title": "Selection Chart can't run independently", "user": {"login": "diegomarvid", "id": 33181424, "node_id": "MDQ6VXNlcjMzMTgxNDI0", "avatar_url": "https://avatars.githubusercontent.com/u/33181424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/diegomarvid", "html_url": "https://github.com/diegomarvid", "followers_url": "https://api.github.com/users/diegomarvid/followers", "following_url": "https://api.github.com/users/diegomarvid/following{/other_user}", "gists_url": "https://api.github.com/users/diegomarvid/gists{/gist_id}", "starred_url": "https://api.github.com/users/diegomarvid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/diegomarvid/subscriptions", "organizations_url": "https://api.github.com/users/diegomarvid/orgs", "repos_url": "https://api.github.com/users/diegomarvid/repos", "events_url": "https://api.github.com/users/diegomarvid/events{/privacy}", "received_events_url": "https://api.github.com/users/diegomarvid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-05-10T19:18:03Z", "updated_at": "2022-10-29T19:28:41Z", "closed_at": "2022-10-29T19:28:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have the following code for displaying the data:\r\n\r\n```\r\nbrush = alt.selection(type='interval')\r\n\r\npoints = alt.Chart(houses_prices).mark_point(opacity=0.2).encode(\r\n    x='id:Q',\r\n    y='SalePrice:Q',\r\n    color=alt.condition(brush, alt.value('blue'), alt.value('lightgray'))\r\n).add_selection(\r\n    brush\r\n)\r\n\r\nqual = alt.Chart(houses_prices).mark_bar().encode(\r\n    alt.Y('OverallQual:N', axis=alt.Axis()),\r\n    x='count(OverallQual):Q'\r\n).transform_filter(\r\n    brush\r\n)\r\n\r\npoints & qual\r\n```\r\n\r\nhouse_prices is a pandas DataFrame.\r\n\r\nThis code runs well and produces the following output:\r\n<img width=\"613\" alt=\"Screen Shot 2022-05-10 at 16 09 25\" src=\"https://user-images.githubusercontent.com/33181424/167704490-e7ab03e4-8217-4cb8-8d43-738a7f33c4ff.png\">\r\n\r\nHowever I want the possibility to run points and qual separately. If I run qual on its own (with points initialized) the following error ocurres:\r\n<img width=\"963\" alt=\"Screen Shot 2022-05-10 at 16 16 43\" src=\"https://user-images.githubusercontent.com/33181424/167705409-480b1cdf-3c13-49c4-a815-cc145876689a.png\">\r\n\r\nI would like this functionality because if I have lots of selections, the way they are displayed has to be more carefully.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2602/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2602/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2600", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2600/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2600/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2600/events", "html_url": "https://github.com/altair-viz/altair/issues/2600", "id": 1225455141, "node_id": "I_kwDOAoxtyc5JCvYl", "number": 2600, "title": "`transform_fold` does not work if hyphen (`-`) in column name", "user": {"login": "jbloom", "id": 1906801, "node_id": "MDQ6VXNlcjE5MDY4MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1906801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbloom", "html_url": "https://github.com/jbloom", "followers_url": "https://api.github.com/users/jbloom/followers", "following_url": "https://api.github.com/users/jbloom/following{/other_user}", "gists_url": "https://api.github.com/users/jbloom/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbloom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbloom/subscriptions", "organizations_url": "https://api.github.com/users/jbloom/orgs", "repos_url": "https://api.github.com/users/jbloom/repos", "events_url": "https://api.github.com/users/jbloom/events{/privacy}", "received_events_url": "https://api.github.com/users/jbloom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-04T14:30:49Z", "updated_at": "2022-05-06T00:12:32Z", "closed_at": "2022-05-06T00:12:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "The example of `transform_fold` here (https://altair-viz.github.io/user_guide/transform/fold.html#user-guide-fold-transform) fails if the columns are instead renamed to something like \"A-A\" and \"B-B\". I think there is a general problem with hyphens in column names. Is there a solution to this?\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2600/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2597", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2597/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2597/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2597/events", "html_url": "https://github.com/altair-viz/altair/issues/2597", "id": 1215718055, "node_id": "I_kwDOAoxtyc5IdmKn", "number": 2597, "title": "parameters added to a layer should be serialised outside the scope of the layer", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-04-26T10:07:46Z", "updated_at": "2022-10-29T19:34:58Z", "closed_at": "2022-10-29T19:34:58Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "A single chart object works with parameters\r\n\r\n```python\r\nimport altair as alt\r\n\r\nrange0 = alt.binding_range(min=-180, max=180, step=5)\r\nrotate0 = alt.parameter(value=90, bind=range0, name='rotate0')\r\n\r\nrange1 = alt.binding_range(min=-180, max=180, step=5)\r\nrotate1 = alt.parameter(value=-5, bind=range1, name='rotate1')\r\n\r\ngraticule = alt.Chart(alt.graticule(step=[15, 15])).mark_geoshape(\r\n    stroke='black'\r\n)\r\n\r\ngraticule.project(\r\n    'orthographic',\r\n    rotate=alt.ExprRef(f'[{rotate0.name}, {rotate1.name}, 0]')\r\n).add_parameter(rotate0, rotate1)\r\n```\r\n\r\n<img width=\"405\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5186265/165275810-f3640ed4-7731-4674-af3a-3a7f906bc538.gif\">\r\n\r\n\r\n\r\nNow I like to combine the graticules with a sphere, so I layer them. First without parameters (this still works):\r\n\r\n```python\r\nimport alt as alt\r\n\r\nsphere = alt.Chart(alt.sphere()).mark_geoshape(\r\n    fill='aliceblue', stroke='black'\r\n)\r\n\r\ngraticule = alt.Chart(alt.graticule(step=[15, 15])).mark_geoshape(\r\n    stroke='black'\r\n)\r\n\r\nalt.layer(sphere, graticule).project(\r\n    'orthographic',\r\n    rotate=[90, -5, 0]\r\n)\r\n```\r\n\r\n<img width=\"405\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5186265/165276294-810a8c55-f03f-428a-ac30-3c97feb27a80.png\">\r\n\r\n\r\nBut it breaks if I add the parameters on the layered chart:\r\n\r\n```python\r\nimport altair as alt\r\n\r\nrange0 = alt.binding_range(min=-180, max=180, step=5)\r\nrotate0 = alt.parameter(value=90, bind=range0, name='rotate0')\r\n\r\nrange1 = alt.binding_range(min=-180, max=180, step=5)\r\nrotate1 = alt.parameter(value=-5, bind=range1, name='rotate1')\r\n\r\nsphere = alt.Chart(alt.sphere()).mark_geoshape(\r\n    fill='aliceblue', stroke='black'\r\n)\r\n\r\ngraticule = alt.Chart(alt.graticule(step=[15, 15])).mark_geoshape(\r\n    stroke='black'\r\n)\r\n\r\nalt.layer(sphere, graticule).project(\r\n    'orthographic',\r\n    rotate=alt.ExprRef(f'[{rotate0.name}, {rotate1.name}, 0]')\r\n).add_parameter(rotate0, rotate1)\r\n```\r\n\r\n```cmd\r\nJavascript Error: Unrecognized signal name: \"rotate0\"\r\nThis usually means there's a typo in your chart specification. See the javascript console for the full traceback.\r\n```\r\n\r\nIt is because the `params` are added to the first feature in the `layer` instead of being serialised outside the scope of the layer. Here I would expect it to create a global `params` definition. I think the later is what I would expect if I add parameters to `alt.layer()`, so I don't feel that https://github.com/vega/vega-lite/issues/7812 applies here.  \r\n\r\nI can manually override, what I think is wrongly behaviour, with the following:\r\n\r\n```python\r\ncomb = alt.layer(sphere,graticule).project(\r\n    'orthographic',\r\n    rotate=[90, -5, 0]\r\n).add_parameter(rotate0, rotate1)\r\n\r\nchart_vl = comb.to_dict()\r\nchart_vl['params'] =  chart_vl['layer'][0].pop('params')\r\nchart_vl['projection']['rotate'] = {'expr':'[rotate0, rotate1, 0]'}\r\nalt.Chart().from_dict(chart_vl)\r\n```\r\n\r\n\r\n<img width=\"405\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5186265/165275960-dd86f528-e14b-443a-a05c-020cfaa4cfac.gif\">\r\n\r\n\r\n\r\nSide note: the `.project()` is also defined on the `alt.layer()`, but is serialised correctly outside the scope of the layer (here globally)\r\n\r\ncc: @ChristopherDavisUCI, what you think? Do we have control over this in Altair, or it happens in the VL-serialization?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2597/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2597/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2596", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2596/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2596/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2596/events", "html_url": "https://github.com/altair-viz/altair/issues/2596", "id": 1213613956, "node_id": "I_kwDOAoxtyc5IVkeE", "number": 2596, "title": "Links within interactive figure don't open on click (unless via SVG)", "user": {"login": "bmorris3", "id": 3497584, "node_id": "MDQ6VXNlcjM0OTc1ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3497584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmorris3", "html_url": "https://github.com/bmorris3", "followers_url": "https://api.github.com/users/bmorris3/followers", "following_url": "https://api.github.com/users/bmorris3/following{/other_user}", "gists_url": "https://api.github.com/users/bmorris3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmorris3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmorris3/subscriptions", "organizations_url": "https://api.github.com/users/bmorris3/orgs", "repos_url": "https://api.github.com/users/bmorris3/repos", "events_url": "https://api.github.com/users/bmorris3/events{/privacy}", "received_events_url": "https://api.github.com/users/bmorris3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-04-24T10:28:54Z", "updated_at": "2022-04-24T17:26:26Z", "closed_at": "2022-04-24T17:26:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all, \r\n\r\nI'm seeing a similar error to vega/vega#2641 again, where I'm trying to replicate [this altair docs example](https://altair-viz.github.io/gallery/scatter_href.html), but I find that clicking points doesn't trigger the href'ed link. My example figure is hosted [here](https://owls.readthedocs.io/en/latest/owls/sindices.html) on RTD and the source code is [here on GitHub](https://github.com/bmorris3/owls/blob/master/docs/owls/sindices.rst#interactive-plot). If I save the figure as an SVG, the links work properly. \r\n\r\nI tried using a newer version of vega with https://github.com/vega/vega/issues/2641#issuecomment-632459205 but it didn't help. Any tips?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2596/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2596/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2595", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2595/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2595/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2595/events", "html_url": "https://github.com/altair-viz/altair/issues/2595", "id": 1212551571, "node_id": "I_kwDOAoxtyc5IRhGT", "number": 2595, "title": "Orthographic projection of graticule fails.", "user": {"login": "gregparkes", "id": 22742021, "node_id": "MDQ6VXNlcjIyNzQyMDIx", "avatar_url": "https://avatars.githubusercontent.com/u/22742021?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gregparkes", "html_url": "https://github.com/gregparkes", "followers_url": "https://api.github.com/users/gregparkes/followers", "following_url": "https://api.github.com/users/gregparkes/following{/other_user}", "gists_url": "https://api.github.com/users/gregparkes/gists{/gist_id}", "starred_url": "https://api.github.com/users/gregparkes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gregparkes/subscriptions", "organizations_url": "https://api.github.com/users/gregparkes/orgs", "repos_url": "https://api.github.com/users/gregparkes/repos", "events_url": "https://api.github.com/users/gregparkes/events{/privacy}", "received_events_url": "https://api.github.com/users/gregparkes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-04-22T16:21:41Z", "updated_at": "2022-04-24T20:54:56Z", "closed_at": "2022-04-23T09:52:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Problem\r\n\r\nThere seems to be a basic bug projecting a geoshape into the orthographic space.\r\n\r\nHere's the code I run from Altair v4.2.0/Vega version 3.6.0(from docs: https://altair-viz.github.io/user_guide/data.html):\r\n\r\n```python\r\nimport altair as alt\r\n\r\nglobe = alt.graticule(step=[15, 15])\r\nalt.Chart(globe).mark_geoshape(stroke='black').project(\r\n    'orthographic',\r\n    rotate=[0, -45, 0]\r\n)\r\n```\r\n\r\nI have raised the issue with Vega Lite, however the schema generated appears to run perfectly within the Vega Editor. This leads me to believe it's an Altair error.\r\n\r\nFurthermore when one attempts to convert the Vega schema from JSON/dict we get the same error.\r\n\r\n```python\r\nschema = {\r\n  \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.17.0.json\",\r\n  \"config\": {\"view\": {\"continuousHeight\": 300, \"continuousWidth\": 400}},\r\n  \"data\": {\"graticule\": {\"step\": [15, 15]}},\r\n  \"mark\": {\"stroke\": \"black\", \"type\": \"geoshape\"},\r\n  \"projection\": {\"type\": \"orthographic\", \"rotate\": [0, -45, 0]}\r\n}\r\n\r\nalt.Chart.from_dict(schema)\r\n```\r\n\r\nSee closed issue in [Vega](https://github.com/vega/vega-lite/issues/8082). Thanks for your efforts. \r\n\r\n### Traceback\r\n\r\nThe traceback error returned is this:\r\n\r\n```python\r\nAttributeError                            Traceback (most recent call last)\r\nInput In [135], in <cell line: 2>()\r\n      1 globe = alt.graticule(step=[15, 15])\r\n----> 2 alt.Chart(globe).mark_geoshape(stroke='black').project(\r\n      3     'orthographic',\r\n      4     rotate=[0, -45, 0]\r\n      5 )\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\altair\\vegalite\\v4\\api.py:713, in TopLevelMixin.project(self, type, center, clipAngle, clipExtent, coefficient, distance, fraction, lobes, parallel, precision, radius, ratio, reflectX, reflectY, rotate, scale, spacing, tilt, translate, **kwds)\r\n    615 \"\"\"Add a geographic projection to the chart.\r\n    616 \r\n    617 This is generally used either with ``mark_geoshape`` or with the\r\n   (...)\r\n    689 \r\n    690 \"\"\"\r\n    691 projection = core.Projection(\r\n    692     center=center,\r\n    693     clipAngle=clipAngle,\r\n   (...)\r\n    711     **kwds,\r\n    712 )\r\n--> 713 return self.properties(projection=projection)\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\altair\\vegalite\\v4\\api.py:588, in TopLevelMixin.properties(self, **kwargs)\r\n    585     else:\r\n    586         # Don't validate data, because it hasn't been processed.\r\n    587         if key != \"data\":\r\n--> 588             self.validate_property(key, val)\r\n    589         setattr(copy, key, val)\r\n    590 return copy\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\altair\\utils\\schemapi.py:464, in SchemaBase.validate_property(cls, name, value, schema)\r\n    462 props = cls.resolve_references(schema or cls._schema).get(\"properties\", {})\r\n    463 resolver = jsonschema.RefResolver.from_schema(cls._rootschema or cls._schema)\r\n--> 464 return jsonschema.validate(value, props.get(name, {}), resolver=resolver)\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:1020, in validate(instance, schema, cls, *args, **kwargs)\r\n   1018 cls.check_schema(schema)\r\n   1019 validator = cls(schema, *args, **kwargs)\r\n-> 1020 error = exceptions.best_match(validator.iter_errors(instance))\r\n   1021 if error is not None:\r\n   1022     raise error\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\exceptions.py:356, in best_match(errors, key)\r\n    318 \"\"\"\r\n    319 Try to find an error that appears to be the best match among given errors.\r\n    320 \r\n   (...)\r\n    353     set of inputs from version to version if better heuristics are added.\r\n    354 \"\"\"\r\n    355 errors = iter(errors)\r\n--> 356 best = next(errors, None)\r\n    357 if best is None:\r\n    358     return\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:229, in create.<locals>.Validator.iter_errors(self, instance, _schema)\r\n    226     continue\r\n    228 errors = validator(self, v, instance, _schema) or ()\r\n--> 229 for error in errors:\r\n    230     # set details if not already set by the called fn\r\n    231     error._set(\r\n    232         validator=k,\r\n    233         validator_value=v,\r\n    234         instance=instance,\r\n    235         schema=_schema,\r\n    236     )\r\n    237     if k not in {\"if\", \"$ref\"}:\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\_validators.py:298, in ref(validator, ref, instance, schema)\r\n    295 validator.resolver.push_scope(scope)\r\n    297 try:\r\n--> 298     yield from validator.descend(instance, resolved)\r\n    299 finally:\r\n    300     validator.resolver.pop_scope()\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:245, in create.<locals>.Validator.descend(self, instance, schema, path, schema_path)\r\n    244 def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 245     for error in self.evolve(schema=schema).iter_errors(instance):\r\n    246         if path is not None:\r\n    247             error.path.appendleft(path)\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:229, in create.<locals>.Validator.iter_errors(self, instance, _schema)\r\n    226     continue\r\n    228 errors = validator(self, v, instance, _schema) or ()\r\n--> 229 for error in errors:\r\n    230     # set details if not already set by the called fn\r\n    231     error._set(\r\n    232         validator=k,\r\n    233         validator_value=v,\r\n    234         instance=instance,\r\n    235         schema=_schema,\r\n    236     )\r\n    237     if k not in {\"if\", \"$ref\"}:\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\_validators.py:332, in properties(validator, properties, instance, schema)\r\n    330 for property, subschema in properties.items():\r\n    331     if property in instance:\r\n--> 332         yield from validator.descend(\r\n    333             instance[property],\r\n    334             subschema,\r\n    335             path=property,\r\n    336             schema_path=property,\r\n    337         )\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:245, in create.<locals>.Validator.descend(self, instance, schema, path, schema_path)\r\n    244 def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 245     for error in self.evolve(schema=schema).iter_errors(instance):\r\n    246         if path is not None:\r\n    247             error.path.appendleft(path)\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:229, in create.<locals>.Validator.iter_errors(self, instance, _schema)\r\n    226     continue\r\n    228 errors = validator(self, v, instance, _schema) or ()\r\n--> 229 for error in errors:\r\n    230     # set details if not already set by the called fn\r\n    231     error._set(\r\n    232         validator=k,\r\n    233         validator_value=v,\r\n    234         instance=instance,\r\n    235         schema=_schema,\r\n    236     )\r\n    237     if k not in {\"if\", \"$ref\"}:\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\_validators.py:368, in anyOf(validator, anyOf, instance, schema)\r\n    366 all_errors = []\r\n    367 for index, subschema in enumerate(anyOf):\r\n--> 368     errs = list(validator.descend(instance, subschema, schema_path=index))\r\n    369     if not errs:\r\n    370         break\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:245, in create.<locals>.Validator.descend(self, instance, schema, path, schema_path)\r\n    244 def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 245     for error in self.evolve(schema=schema).iter_errors(instance):\r\n    246         if path is not None:\r\n    247             error.path.appendleft(path)\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:229, in create.<locals>.Validator.iter_errors(self, instance, _schema)\r\n    226     continue\r\n    228 errors = validator(self, v, instance, _schema) or ()\r\n--> 229 for error in errors:\r\n    230     # set details if not already set by the called fn\r\n    231     error._set(\r\n    232         validator=k,\r\n    233         validator_value=v,\r\n    234         instance=instance,\r\n    235         schema=_schema,\r\n    236     )\r\n    237     if k not in {\"if\", \"$ref\"}:\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\_validators.py:298, in ref(validator, ref, instance, schema)\r\n    295 validator.resolver.push_scope(scope)\r\n    297 try:\r\n--> 298     yield from validator.descend(instance, resolved)\r\n    299 finally:\r\n    300     validator.resolver.pop_scope()\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:245, in create.<locals>.Validator.descend(self, instance, schema, path, schema_path)\r\n    244 def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 245     for error in self.evolve(schema=schema).iter_errors(instance):\r\n    246         if path is not None:\r\n    247             error.path.appendleft(path)\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:229, in create.<locals>.Validator.iter_errors(self, instance, _schema)\r\n    226     continue\r\n    228 errors = validator(self, v, instance, _schema) or ()\r\n--> 229 for error in errors:\r\n    230     # set details if not already set by the called fn\r\n    231     error._set(\r\n    232         validator=k,\r\n    233         validator_value=v,\r\n    234         instance=instance,\r\n    235         schema=_schema,\r\n    236     )\r\n    237     if k not in {\"if\", \"$ref\"}:\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\_validators.py:76, in items(validator, items, instance, schema)\r\n     74 else:\r\n     75     for index in range(prefix, total):\r\n---> 76         yield from validator.descend(\r\n     77             instance=instance[index],\r\n     78             schema=items,\r\n     79             path=index,\r\n     80         )\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:245, in create.<locals>.Validator.descend(self, instance, schema, path, schema_path)\r\n    244 def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 245     for error in self.evolve(schema=schema).iter_errors(instance):\r\n    246         if path is not None:\r\n    247             error.path.appendleft(path)\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:219, in create.<locals>.Validator.iter_errors(self, instance, _schema)\r\n    210     yield exceptions.ValidationError(\r\n    211         f\"False schema does not allow {instance!r}\",\r\n    212         validator=None,\r\n   (...)\r\n    215         schema=_schema,\r\n    216     )\r\n    217     return\r\n--> 219 scope = id_of(_schema)\r\n    220 if scope:\r\n    221     self.resolver.push_scope(scope)\r\n\r\nFile ~\\anaconda3\\envs\\vega\\lib\\site-packages\\jsonschema\\validators.py:96, in _id_of(schema)\r\n     94 if schema is True or schema is False:\r\n     95     return \"\"\r\n---> 96 return schema.get(\"$id\", \"\")\r\n\r\nAttributeError: 'list' object has no attribute 'get'\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2595/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2595/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2587", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2587/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2587/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2587/events", "html_url": "https://github.com/altair-viz/altair/issues/2587", "id": 1192286381, "node_id": "I_kwDOAoxtyc5HENit", "number": 2587, "title": "Repetition of date in X axis", "user": {"login": "backtr4ck", "id": 15378813, "node_id": "MDQ6VXNlcjE1Mzc4ODEz", "avatar_url": "https://avatars.githubusercontent.com/u/15378813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/backtr4ck", "html_url": "https://github.com/backtr4ck", "followers_url": "https://api.github.com/users/backtr4ck/followers", "following_url": "https://api.github.com/users/backtr4ck/following{/other_user}", "gists_url": "https://api.github.com/users/backtr4ck/gists{/gist_id}", "starred_url": "https://api.github.com/users/backtr4ck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/backtr4ck/subscriptions", "organizations_url": "https://api.github.com/users/backtr4ck/orgs", "repos_url": "https://api.github.com/users/backtr4ck/repos", "events_url": "https://api.github.com/users/backtr4ck/events{/privacy}", "received_events_url": "https://api.github.com/users/backtr4ck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-04T20:36:27Z", "updated_at": "2022-04-11T19:57:41Z", "closed_at": "2022-04-11T19:57:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "![image](https://user-images.githubusercontent.com/15378813/161627348-c0cf2db7-a9f3-4155-9adc-4536a9870384.png)\r\n\r\nMy code is repeating the dates on the X axis filling blank space instead of having one label for each dot.\r\n\r\nIm generating the X axis with monthdate(creationTime):T\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2587/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2583", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2583/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2583/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2583/events", "html_url": "https://github.com/altair-viz/altair/issues/2583", "id": 1184521518, "node_id": "I_kwDOAoxtyc5Gml0u", "number": 2583, "title": "Concatenation distorts interactive legend", "user": {"login": "lbittarello", "id": 15511539, "node_id": "MDQ6VXNlcjE1NTExNTM5", "avatar_url": "https://avatars.githubusercontent.com/u/15511539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lbittarello", "html_url": "https://github.com/lbittarello", "followers_url": "https://api.github.com/users/lbittarello/followers", "following_url": "https://api.github.com/users/lbittarello/following{/other_user}", "gists_url": "https://api.github.com/users/lbittarello/gists{/gist_id}", "starred_url": "https://api.github.com/users/lbittarello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lbittarello/subscriptions", "organizations_url": "https://api.github.com/users/lbittarello/orgs", "repos_url": "https://api.github.com/users/lbittarello/repos", "events_url": "https://api.github.com/users/lbittarello/events{/privacy}", "received_events_url": "https://api.github.com/users/lbittarello/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-03-29T08:44:26Z", "updated_at": "2022-10-29T19:37:42Z", "closed_at": "2022-10-29T19:37:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "Sorry if this issue has been reported before!\r\n\r\nConsider this example from [the documentation](https://altair-viz.github.io/user_guide/interactions.html#selection-targets-fields-and-encodings):\r\n\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\ncars = data.cars.url\r\n\r\nselection = alt.selection_multi(fields=[\"Origin\"])\r\n\r\ncolor = alt.condition(\r\n    selection, alt.Color(\"Origin:N\", legend=None), alt.value(\"lightgray\")\r\n)\r\n\r\nscatter = (\r\n    alt.Chart(cars)\r\n    .mark_point()\r\n    .encode(x=\"Horsepower:Q\", y=\"Miles_per_Gallon:Q\", color=color, tooltip=\"Name:N\")\r\n)\r\n\r\nlegend = (\r\n    alt.Chart(cars)\r\n    .mark_point()\r\n    .encode(y=alt.Y(\"Origin:N\", axis=alt.Axis(orient=\"right\")), color=color)\r\n    .add_selection(selection)\r\n)\r\n\r\nscatter | legend\r\n```\r\nproduces\r\n\r\n![plot_1](https://user-images.githubusercontent.com/15511539/160570910-a5fd9e6d-b7ef-4ac3-bf2a-d91c8ac9fcad.png)\r\n\r\nHowever, if we change the last line to\r\n```python\r\nalt.vconcat(scatter) | legend\r\n```\r\nwe get\r\n\r\n![plot_2](https://user-images.githubusercontent.com/15511539/160570968-0173b66d-1c8b-4560-a1c1-b0b23a6cb4fa.png)\r\n\r\nThis seems to be a regression \u2013 both plots look the same with Altair 4.1.0.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2583/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2583/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2573", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2573/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2573/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2573/events", "html_url": "https://github.com/altair-viz/altair/issues/2573", "id": 1180127650, "node_id": "I_kwDOAoxtyc5GV1Gi", "number": 2573, "title": "serialization of expr in parameter", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-03-24T22:41:37Z", "updated_at": "2022-10-29T19:43:00Z", "closed_at": "2022-10-29T19:43:00Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "As is mentioned here: https://github.com/altair-viz/altair/pull/2528#issuecomment-1077773120. I've the feeling when an `expr` is defined within a `parameter` it is serialized into a debatable VL-spec.\r\n\r\nCurrent behavior also leads to not needing the `add_parameter`, when an `expr` is defined, as mentioned here: https://github.com/altair-viz/altair/pull/2528#issuecomment-1078171474.\r\n\r\nBTW, in VL one can write: `\"thetaOffset\": {\"expr\": \"-PI/length(data('MY_DATA'))\"}`, but in Altair one can not write `alt.expr(-PI/length(data('source_wind')))`.\r\n\r\n[Open the Chart in the Vega Editor](https://vega.github.io/editor/#/url/vega-lite/N4IgJghgLhIFygHYQLYFN4gLIE0D6AIgIIAqRIANCAG4QA2ArmgM7wDaoA7gJaJhjcATmgDGUbgHtE8AAxU6EAEZo6mAHITBUABYgAvhS69+Q0eKnwAnHJALlquCACiEZlH2GQPPgOFjJ0nAAjAAcNnYqmADKEgw6HkY+pv4WcABMAOzhSpGOAOos7noAugYgKBCCANbwoFAAngAOGI6VIpQgUBISdOKN8FCCTFQ6aDAA8gBmk8xjtSBoAB6NgpgAtAAKAJIA9HRoiADmOgAUkDAnAOS4hKRElwCUD-plByISAkfzozDzk9wqMCYbwmPzmaQjJotECICQoXj0Dwgd50TR-AF0IGOCKqSHNTCw+HIVR6MoAEmYIm0aAqmG0UCgjWYcB2O2oaEOEAAdIduDoGIouZIdpTqRU2RyIGs6Hy0GyAKxctJcmRcgBWzAseiAA)", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2573/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2573/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2571", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2571/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2571/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2571/events", "html_url": "https://github.com/altair-viz/altair/issues/2571", "id": 1177664930, "node_id": "I_kwDOAoxtyc5GMb2i", "number": 2571, "title": "Latitude/longitude not working for images", "user": {"login": "davibicudo", "id": 28100741, "node_id": "MDQ6VXNlcjI4MTAwNzQx", "avatar_url": "https://avatars.githubusercontent.com/u/28100741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davibicudo", "html_url": "https://github.com/davibicudo", "followers_url": "https://api.github.com/users/davibicudo/followers", "following_url": "https://api.github.com/users/davibicudo/following{/other_user}", "gists_url": "https://api.github.com/users/davibicudo/gists{/gist_id}", "starred_url": "https://api.github.com/users/davibicudo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davibicudo/subscriptions", "organizations_url": "https://api.github.com/users/davibicudo/orgs", "repos_url": "https://api.github.com/users/davibicudo/repos", "events_url": "https://api.github.com/users/davibicudo/events{/privacy}", "received_events_url": "https://api.github.com/users/davibicudo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-23T06:37:51Z", "updated_at": "2022-03-23T06:46:36Z", "closed_at": "2022-03-23T06:46:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nIt seems that latitude/longitude isn't working with images (only plain x/y coordinates), although this is supported by vega-lite.\r\n\r\nCode to reproduce:\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\nimport pandas as pd\r\n\r\natlanta_airport = pd.DataFrame.from_records([\r\n      {\"latitude\": 33.101805, \"longitude\": -94.19532694, \"img\": \"https://vega.github.io/vega-datasets/data/ffox.png\"}      \r\n])\r\n\r\nimages = alt.Chart(atlanta_airport).mark_image(\r\n    width=50,\r\n    height=50\r\n).encode(\r\n    latitude='latitude:Q',\r\n    longitude='longitude:Q',\r\n    url='img'\r\n)\r\n\r\nstates = alt.topo_feature(data.us_10m.url, 'states')\r\n\r\nusa_map = alt.Chart(states).mark_geoshape(\r\n).project(\r\n    type='albersUsa'\r\n).properties(\r\n    width=500,\r\n    height=300\r\n)\r\n\r\nusa_map + images\r\n```\r\nHow it should look like: [Open the Chart in the Vega Editor](https://vega.github.io/editor/#/url/vega-lite/N4Igxg9gdgZglgcxALlANzgUwO4tJKAFzigFcJSBnAdTgBNCALFAFgAY2AacaYsiygAlMiRoRQBmDgF9p3ADYBDAJ6YATigDaoOosKK8IUmvkoQYwgAdKyAPS20mBIoB0COE1IAjF3AgOnRQBaXX1KTEJKW1DFWyoggEY2AFsXACtKaBBuGAg1ZL1DGEw9Y0wzSn1CTEpskEJlS3LkeohLCAys2W4CtQBrMwRMCEpGRSa6xhEEMUkObks1DswwYizUesbmkEV5L3VKAFVKAzkQbHomFABWGU4dPQMNqEVk7ZiQgHZPsBgATkUXi8LDobAAHF4wWAISxvjAJMU-tcEl5FH8vCAzr0BhsGhMWnACkNJtNZshbtwLgxmOS2GdMFBIHQSEgNkpiIRSHRmqB4Jh5HQzOyPFzytw8dsAI6kRREDx6OCOTEKaDuTncopYAVC1UijXirZmaWyjkKpVnYymDZ87UE5JIA34kBQCDJEi7TGyAC63AAJJQwFMCmYLNY7AFnG4PIxvL5-AGg7FHM4gvIPJgHCwXAlPi42OlMlA6jFwpFDB86N9fgCgSDwZDocC4QjMEiUWiMchtCBhermhIJNm2AkwWxriqoGrRSggn8swkkRIAEwANjn3EJrPMhCsNnsydcapjPj8EeCJYiURithguQAHi5LJPMV7ZEA)\r\n\r\nBackground: I'm trying to put static tiles behind my map (no zoom or panning, just plain images). So far this has worked if I prepare it as a single image in advance and center it behind my map, but I'd like to directly access the tile server and use latitude/longitude to add them directly to the background and skip the intermediate step (since it also requires me hosting the image somewhere).\r\n\r\nThanks in advance for looking into it!\r\n\r\nP.S.: altair version is 4.2.0\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2571/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2571/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2560", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2560/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2560/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2560/events", "html_url": "https://github.com/altair-viz/altair/issues/2560", "id": 1148859335, "node_id": "I_kwDOAoxtyc5EejPH", "number": 2560, "title": "faceted chart does not re-size on `transform_filter`", "user": {"login": "jbloom", "id": 1906801, "node_id": "MDQ6VXNlcjE5MDY4MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1906801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbloom", "html_url": "https://github.com/jbloom", "followers_url": "https://api.github.com/users/jbloom/followers", "following_url": "https://api.github.com/users/jbloom/following{/other_user}", "gists_url": "https://api.github.com/users/jbloom/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbloom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbloom/subscriptions", "organizations_url": "https://api.github.com/users/jbloom/orgs", "repos_url": "https://api.github.com/users/jbloom/repos", "events_url": "https://api.github.com/users/jbloom/events{/privacy}", "received_events_url": "https://api.github.com/users/jbloom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-24T04:52:11Z", "updated_at": "2022-03-22T23:49:01Z", "closed_at": "2022-03-22T23:49:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "When a simple non-faceted chart includes a `transform_filter` that removes some of the data, the chart automatically resizes such that the drop-down selection boxes remain just below the chart.\r\n\r\nBut when a faceted chart is transformed to just include some facets via a drop down selection, there is a huge gap in whitespace between the remaining chart facets and the drop down as the space for all the empty facets remains.\r\n\r\nIs there a way to fix this?\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2560/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2558", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2558/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2558/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2558/events", "html_url": "https://github.com/altair-viz/altair/issues/2558", "id": 1142522444, "node_id": "I_kwDOAoxtyc5EGYJM", "number": 2558, "title": "Horizontal concat do not display correct graph but displayed perfectly on vega editor", "user": {"login": "HimanshuMittal01", "id": 44058642, "node_id": "MDQ6VXNlcjQ0MDU4NjQy", "avatar_url": "https://avatars.githubusercontent.com/u/44058642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HimanshuMittal01", "html_url": "https://github.com/HimanshuMittal01", "followers_url": "https://api.github.com/users/HimanshuMittal01/followers", "following_url": "https://api.github.com/users/HimanshuMittal01/following{/other_user}", "gists_url": "https://api.github.com/users/HimanshuMittal01/gists{/gist_id}", "starred_url": "https://api.github.com/users/HimanshuMittal01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HimanshuMittal01/subscriptions", "organizations_url": "https://api.github.com/users/HimanshuMittal01/orgs", "repos_url": "https://api.github.com/users/HimanshuMittal01/repos", "events_url": "https://api.github.com/users/HimanshuMittal01/events{/privacy}", "received_events_url": "https://api.github.com/users/HimanshuMittal01/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-18T07:14:37Z", "updated_at": "2022-02-19T03:57:20Z", "closed_at": "2022-02-19T03:57:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Objective:\r\nI want to show 3 donut charts in the 1st row and 1 chart in 2nd row.\r\n\r\n### Steps to reproduce:\r\n1. Run the following code in jupyter notebook\r\n```py\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\nsource = pd.DataFrame(\r\n    {\"category\": [\"a\", \"b\"], \"value\": [2, 4]}\r\n)\r\n\r\ndonut_inner_radius = 20\r\ndonut_outer_radius = 50\r\nbase = alt.Chart(source, width=donut_outer_radius*2+60, height=donut_outer_radius*2+60).encode(\r\n    theta=alt.Theta(\"value:Q\", stack=True), color=alt.Color(\"category:N\")\r\n)\r\n\r\npie = base.mark_arc(innerRadius=donut_inner_radius, outerRadius=donut_outer_radius)\r\ntext = base.mark_text(radius=donut_outer_radius+20, size=20).encode(text=\"category:N\")\r\n\r\nchart1 = pie+text\r\n\r\nsource = pd.DataFrame(\r\n    {\"category\": [\"a\", \"b\"], \"value\": [6, 4]}\r\n)\r\nbase = alt.Chart(source, width=donut_outer_radius*2+60, height=donut_outer_radius*2+60).encode(\r\n    theta=alt.Theta(\"value:Q\", stack=True), color=alt.Color(\"category:N\")\r\n)\r\n\r\npie = base.mark_arc(innerRadius=donut_inner_radius, outerRadius=donut_outer_radius)\r\ntext = base.mark_text(radius=donut_outer_radius+20, size=20).encode(text=\"category:N\")\r\n\r\nchart2 = pie+text\r\n\r\nsource = pd.DataFrame(\r\n    {\"category\": [\"a\", \"b\"], \"value\": [10, 4]}\r\n)\r\nbase = alt.Chart(source, width=donut_outer_radius*2+60, height=donut_outer_radius*2+60).encode(\r\n    theta=alt.Theta(\"value:Q\", stack=True), color=alt.Color(\"category:N\")\r\n)\r\n\r\npie = base.mark_arc(innerRadius=donut_inner_radius, outerRadius=donut_outer_radius)\r\ntext = base.mark_text(radius=donut_outer_radius+20, size=20).encode(text=\"category:N\")\r\n\r\nchart3 = pie+text\r\n\r\nsource = pd.DataFrame(\r\n    {\"category\": [\"a\", \"b\"], \"value\": [1, 4]}\r\n)\r\nbase = alt.Chart(source, width=(donut_outer_radius*2+60)*3+2, height=donut_outer_radius*2+60).encode(\r\n    theta=alt.Theta(\"value:Q\", stack=True), color=alt.Color(\"category:N\")\r\n)\r\n\r\npie = base.mark_arc(innerRadius=donut_inner_radius, outerRadius=donut_outer_radius)\r\ntext = base.mark_text(radius=donut_outer_radius+20, size=20).encode(text=\"category:N\")\r\n\r\nchart4 = pie+text\r\n\r\nall_pies = alt.HConcatChart(hconcat=[chart1, chart2, chart3], spacing=0)\r\nfinal_viz = alt.VConcatChart(vconcat=[all_pies, chart4])\r\n\r\nfinal_viz.configure_view(strokeWidth=0, continuousHeight=300, continuousWidth=400)\r\n```\r\n### Output in notebook\r\n![image](https://user-images.githubusercontent.com/44058642/154635034-b4883fec-f774-4530-9705-479e56f8eab5.png)\r\n\r\n### Interestingly\r\nIf I use \"open in vega editor\" from dots menu, the output shown is correct. This made me wonder what is causing the issue, is it version or something else. Please help me in this case, or if another way is possible to achieve the objective.\r\n\r\n### Expected output\r\n![image](https://user-images.githubusercontent.com/44058642/154634861-fded47fa-b9a2-436c-a435-1495eaa11342.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2558/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2558/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2557", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2557/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2557/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2557/events", "html_url": "https://github.com/altair-viz/altair/issues/2557", "id": 1140989642, "node_id": "I_kwDOAoxtyc5EAh7K", "number": 2557, "title": "Columns with a header labelOrient set to 'bottom' doesn't work as expected", "user": {"login": "nick-trustlab", "id": 92364287, "node_id": "U_kgDOBYFd_w", "avatar_url": "https://avatars.githubusercontent.com/u/92364287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nick-trustlab", "html_url": "https://github.com/nick-trustlab", "followers_url": "https://api.github.com/users/nick-trustlab/followers", "following_url": "https://api.github.com/users/nick-trustlab/following{/other_user}", "gists_url": "https://api.github.com/users/nick-trustlab/gists{/gist_id}", "starred_url": "https://api.github.com/users/nick-trustlab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nick-trustlab/subscriptions", "organizations_url": "https://api.github.com/users/nick-trustlab/orgs", "repos_url": "https://api.github.com/users/nick-trustlab/repos", "events_url": "https://api.github.com/users/nick-trustlab/events{/privacy}", "received_events_url": "https://api.github.com/users/nick-trustlab/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-02-17T07:55:32Z", "updated_at": "2023-01-06T12:45:08Z", "closed_at": "2023-01-06T12:45:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here's the code to recreate the issue:\r\n\r\n```python\r\nplot_df = pd.DataFrame({'severity': {0: 'Mild',\r\n                           1: 'Moderate',\r\n                           2: 'Severe',\r\n                           3: 'Mild',\r\n                           4: 'Moderate',\r\n                           5: 'Severe'},\r\n              'variable': {0: 'vote',\r\n                           1: 'vote',\r\n                           2: 'vote',\r\n                           3: 'actual',\r\n                           4: 'actual',\r\n                           5: 'actual'},\r\n              'value': {0: 0.1,\r\n                        1: 0.3,\r\n                        2: 0.6,\r\n                        3: 0.4,\r\n                        4: 0.3,\r\n                        5: 0.3}})\r\nalt.Chart(plot_df).mark_bar().encode(\r\n    x=alt.X('variable'),\r\n    y=alt.Y('value'),\r\n    color=alt.Color('variable'),\r\n    column=alt.Column('severity', header=alt.Header(titleOrient='bottom', labelOrient='bottom'))\r\n)\r\n```\r\nProduces the following output:\r\n![image](https://user-images.githubusercontent.com/92364287/154429652-f6a2e50c-2334-476b-bb16-ac43e284b971.png)\r\n\r\nWhile the `title` \"severity\" gets moved to the bottom as expected, the labels (Mild, Moderate, and Severe) are only slightly moved down and overlayed on top of the graph.  Changing the code to use `orient='bottom'` doesn't move either the labels or title down.\r\n\r\nI am expecting that both `labelOrient='bottom', titleOrient='bottom'` and `orient='bottom'` to have the same effect and to move the labels and title to the bottom of the graph.\r\n\r\nAltair version:  4.2.0\r\nPython version: 3.9.7\r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [x] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [x] Search for duplicate issues.\r\n- [x] Use the latest version of Altair.\r\n- [x] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2557/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2557/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2554", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2554/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2554/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2554/events", "html_url": "https://github.com/altair-viz/altair/issues/2554", "id": 1124116268, "node_id": "I_kwDOAoxtyc5DAKcs", "number": 2554, "title": "PyCharm-Debugger crash with selection with Altair 4.2", "user": {"login": "tzipperle", "id": 6015123, "node_id": "MDQ6VXNlcjYwMTUxMjM=", "avatar_url": "https://avatars.githubusercontent.com/u/6015123?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tzipperle", "html_url": "https://github.com/tzipperle", "followers_url": "https://api.github.com/users/tzipperle/followers", "following_url": "https://api.github.com/users/tzipperle/following{/other_user}", "gists_url": "https://api.github.com/users/tzipperle/gists{/gist_id}", "starred_url": "https://api.github.com/users/tzipperle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tzipperle/subscriptions", "organizations_url": "https://api.github.com/users/tzipperle/orgs", "repos_url": "https://api.github.com/users/tzipperle/repos", "events_url": "https://api.github.com/users/tzipperle/events{/privacy}", "received_events_url": "https://api.github.com/users/tzipperle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-04T11:49:23Z", "updated_at": "2022-02-09T13:18:25Z", "closed_at": "2022-02-09T13:18:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nwhen I use the PyCharm-Debugger and Altair 4.2 I have a problem. When I execute the line `brush = alt.selection_interval()` PyCharm crash. With Altair 4.1 PyCharm works well. I use Windows 10 and have installed Altair with conda-forge.\r\n\r\nExample:\r\n\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\ncars = data.cars.url\r\n\r\nbrush = alt.selection_interval() # here crash the PyCharm-Debugger\r\n\r\nalt.Chart(cars).mark_point().encode(\r\n    x='Miles_per_Gallon:Q',\r\n    y='Horsepower:Q',\r\n    color='Origin:N'\r\n).add_selection(\r\n    brush\r\n)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2554/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2548", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2548/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2548/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2548/events", "html_url": "https://github.com/altair-viz/altair/issues/2548", "id": 1110555216, "node_id": "I_kwDOAoxtyc5CMbpQ", "number": 2548, "title": "Example donut & radial chart does not work", "user": {"login": "swartchris8", "id": 3592919, "node_id": "MDQ6VXNlcjM1OTI5MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/3592919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swartchris8", "html_url": "https://github.com/swartchris8", "followers_url": "https://api.github.com/users/swartchris8/followers", "following_url": "https://api.github.com/users/swartchris8/following{/other_user}", "gists_url": "https://api.github.com/users/swartchris8/gists{/gist_id}", "starred_url": "https://api.github.com/users/swartchris8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swartchris8/subscriptions", "organizations_url": "https://api.github.com/users/swartchris8/orgs", "repos_url": "https://api.github.com/users/swartchris8/repos", "events_url": "https://api.github.com/users/swartchris8/events{/privacy}", "received_events_url": "https://api.github.com/users/swartchris8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-21T14:51:01Z", "updated_at": "2022-01-21T16:39:05Z", "closed_at": "2022-01-21T15:10:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to create a [donut chart from the altair examples](https://altair-viz.github.io/gallery/donut_chart.html) with the following code:\r\n\r\n```python\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\nsource = pd.DataFrame({\"category\": [1, 2, 3, 4, 5, 6], \"value\": [4, 6, 10, 3, 7, 8]})\r\n\r\nalt.Chart(source).mark_arc(innerRadius=50).encode(\r\n    theta=alt.Theta(field=\"value\", type=\"quantitative\"),\r\n    color=alt.Color(field=\"category\", type=\"nominal\"),\r\n)\r\n```\r\n\r\nIt's failing with the following error:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-14-a3c410647669> in <module>\r\n      4 source = pd.DataFrame({\"category\": [1, 2, 3, 4, 5, 6], \"value\": [4, 6, 10, 3, 7, 8]})\r\n      5 \r\n----> 6 alt.Chart(source).mark_arc(innerRadius=50).encode(\r\n      7     theta=alt.Theta(field=\"value\", type=\"quantitative\"),\r\n      8     color=alt.Color(field=\"category\", type=\"nominal\"),\r\n\r\n~/.pyenv/versions/3.8.9/envs/nlp/lib/python3.8/site-packages/altair/utils/schemapi.py in __getattr__(self, attr)\r\n    255             except AttributeError:\r\n    256                 _getattr = super(SchemaBase, self).__getattribute__\r\n--> 257             return _getattr(attr)\r\n    258 \r\n    259     def __setattr__(self, item, val):\r\n\r\nAttributeError: 'Chart' object has no attribute 'mark_arc'\r\n```\r\n\r\nEnvironment:\r\n\r\nAltair installed in Python 3.8.9 env with `pip` trying to run the donut chart example code in a jupyter notebook\r\n\r\nLib versions:\r\nvega-datasets==0.9.0\r\naltair==4.1.0\r\n\r\nThe https://altair-viz.github.io/gallery/radial_chart.html is also failing there the error is:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-13-1f1e718059b0> in <module>\r\n      5 \r\n      6 base = alt.Chart(source).encode(\r\n----> 7     theta=alt.Theta(\"values:Q\", stack=True),\r\n      8     radius=alt.Radius(\"values\", scale=alt.Scale(type=\"sqrt\", zero=True, rangeMin=20)),\r\n      9     color=\"values:N\",\r\n\r\nAttributeError: module 'altair' has no attribute 'Theta'\r\n\r\n---\r\n```\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [ ] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [x] Search for duplicate issues.\r\n- [x] Use the latest version of Altair.\r\n- [x] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2548/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2544", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2544/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2544/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2544/events", "html_url": "https://github.com/altair-viz/altair/issues/2544", "id": 1091763097, "node_id": "I_kwDOAoxtyc5BEvuZ", "number": 2544, "title": "title align not taking effect", "user": {"login": "thatlittleboy", "id": 30731072, "node_id": "MDQ6VXNlcjMwNzMxMDcy", "avatar_url": "https://avatars.githubusercontent.com/u/30731072?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thatlittleboy", "html_url": "https://github.com/thatlittleboy", "followers_url": "https://api.github.com/users/thatlittleboy/followers", "following_url": "https://api.github.com/users/thatlittleboy/following{/other_user}", "gists_url": "https://api.github.com/users/thatlittleboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/thatlittleboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thatlittleboy/subscriptions", "organizations_url": "https://api.github.com/users/thatlittleboy/orgs", "repos_url": "https://api.github.com/users/thatlittleboy/repos", "events_url": "https://api.github.com/users/thatlittleboy/events{/privacy}", "received_events_url": "https://api.github.com/users/thatlittleboy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-01T07:33:03Z", "updated_at": "2023-02-17T22:15:15Z", "closed_at": "2022-01-01T07:50:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm slightly modifying the example from the documentation on [Title Configuration](https://altair-viz.github.io/user_guide/configuration.html?highlight=title#title-configuration), see:\r\n\r\n\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nsource = data.cars.url\r\n\r\nchart = alt.Chart(source).mark_point().encode(\r\n    x='Horsepower:Q',\r\n    y='Miles_per_Gallon:Q',\r\n)\r\n\r\n(chart & chart).properties(\r\n    title='Cars Data'\r\n).configure_title(\r\n    fontSize=20,\r\n    font='Courier',\r\n    align='center',  # <---- does not take effect, why?\r\n    color='gray'\r\n)\r\n```\r\nproduces a viz with title aligned to the left, not to the center. Why is this the case?\r\n\r\n<img width=\"514\" alt=\"image\" src=\"https://user-images.githubusercontent.com/30731072/147845983-7fd208d8-b995-4e51-867d-786a48625925.png\">\r\n\r\nNote that the other configurations (fontSize, color) have taken effect, but it is only the alignment that has been ignored.\r\n\r\nBy the way, the example works if: the title was added to any one of the charts, as in \r\n```python\r\n(chart.properties(title='Cars Data') & chart).configure_title(...)  # gives a centered title as expected\r\n```\r\n\r\n### Details\r\n\r\nOn Jupyter notebook (on Jupyterhub), py3.6, Altair 4.1.0. (latest version on pypi at the moment)\r\nHappy to provide more details if needed.\r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [ ] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [X] Search for duplicate issues.\r\n- [X] Use the latest version of Altair.\r\n- [X] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2544/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2544/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2543", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2543/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2543/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2543/events", "html_url": "https://github.com/altair-viz/altair/issues/2543", "id": 1091310672, "node_id": "I_kwDOAoxtyc5BDBRQ", "number": 2543, "title": "cornerRadius in 4.2.0rc1 results in an error", "user": {"login": "roveo", "id": 5427958, "node_id": "MDQ6VXNlcjU0Mjc5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5427958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roveo", "html_url": "https://github.com/roveo", "followers_url": "https://api.github.com/users/roveo/followers", "following_url": "https://api.github.com/users/roveo/following{/other_user}", "gists_url": "https://api.github.com/users/roveo/gists{/gist_id}", "starred_url": "https://api.github.com/users/roveo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roveo/subscriptions", "organizations_url": "https://api.github.com/users/roveo/orgs", "repos_url": "https://api.github.com/users/roveo/repos", "events_url": "https://api.github.com/users/roveo/events{/privacy}", "received_events_url": "https://api.github.com/users/roveo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-12-30T21:24:48Z", "updated_at": "2021-12-31T03:09:43Z", "closed_at": "2021-12-31T03:08:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "```py\r\nfrom vega_datasets import data\r\nimport altair as alt\r\n\r\nsource = data.cars()\r\n\r\nch = alt.Chart(source).mark_bar(cornerRadius=4).encode(\r\n    x=\"sum(Cylinders):Q\",\r\n    color=\"Origin:N\",\r\n)\r\nch\r\n```\r\n\r\nThe resulting spec works in vega-editor: [Open the Chart in the Vega Editor](https://vega.github.io/editor/#/url/vega-lite/N4IgJAzgxgFgpgWwIYgFwhgF0wBwqgegIDc4BzJAOjIEtMYBXAI0poHsDp5kTykBaADZ04JACyUAjAHZKABkoArCGwB2IADQgoagGY0yaUMRpwA7ke1rMNVQzYMIACTgGsaAMxy5Wnapt2DhAA6jQAJvRoYt4AvjFaYUiYKKigqkgIcGggicn8unIATGIArHJITABskmIAnOWSHpUeJTJIcpL1YpKVhS0g8TlJSBBwmBCWuQIFxWUV1XUNTS1tHV09fSVoANqgAIJQUHCCcABOSezqqJKFWgDCAJ7CqmFnE6gAHFoAIjQQOIIkEdMv5PHJpFonGxTqMcGwzGc0I0fCAALI0E4QAD6ODOWIA4khBII1EiviAAHIZLLoWBwYinNgnTAAAjppGJcBZyGETAYmhAAHlTgZbNkAKoAZT2AuCrjIWCxtixgiY7xacjEWgAmnAkKdsp1pHJ+B1TZIACreVDW7wDDT7Q7HM4XUnXSSUEr3J62V4wtDk37-QHAuCg1AayHQ2HwxHXSpetEYuDY3GnAlEklXSSJqmZbJ8mhQADWLIgxae+tLHkKcgFwtFVxAUplWjlbkwStUKrVnkqtQ8Or1BvQRpNZo6VrkNundvijqOJ3ONjdkkk3uefvegb+AKBiDDmE8knJUJhcDhCJHOZR6MxOLxhOJq-JeZpIABDwQDnoZaSx2ETAsi0BtaCbFtZXlRVlVVdUxCaId9UNWpjXNc0pxnGd7QXZ1l0uJFbhAR5NzeAMfl3EMD3DLwtRAM8YyvJEyi0O8UwfdMnyzJFKi0N9sgyKAWVOOAmGOMsICPECRTAiVpUgjsux7OCPEHEBdSQ0cUPHSR0NtWc63nEADkXF0V2zBRE2I31SM+cjg33EEjwjIoo3PS84xqW9k1TR9M1XCFKWpbJdGhMIWUwaFbDYetpLFdAILbKDOxg3sIzEOpEJHEAxzQyc9KwwzjNw11zI3az-VskAgz3UNwzEQpalchiPNqclWJ8ji-OzXMgvQELTjCihAQAD1MFkyjrKTG1k1sQHbBVku7WCog8bpMuQ1CJ0tfK5wdIynSXEq0EaoifReGyd3s2qnNKWj6IvWMR0KWsWO89iM2fbNaL42l4AZJkxhZGgEBwIkUCmmT4rkxKFJS954JKWj1KynKtowvTsP2ky8LdD5PTK86KsumqqJu6ImoexjUEKHNXvvNMPq465vt6j9BC-H8YBZXQGFOB4gZoGgYumqHZvm6CltS+CbnWzTNp0vL9IKvaisOsykRRKzCe3OySccqISkTe73KewpE3a97ONXFn83QOF-BoIE2WGZ5waFWLwOhuaksU5bUHSs3ZeyrTcu2pXdpwtX8M+fHTpIondco-WI3qCmTaRVOk3p3zPqY3jWYElkMiYEYICQMJoRZMIAWFyHmy98XFqUzwPmYtThw27TdPDgyVYO0zo5kWOta3KJE4cw8kRUtPHqRWms7YhmrauOxiXz23tDoRkwyriB+BpllQeJEZa7ikAAFFebYXF5IW33Uq8TPkc70P0f0zHVYH1cPUss7R8q6qSdJ4RjbsbWe8ZzZvSXl1NAq9BDr3fOyRkzI2R-QAlyPwOheYQBZAACggGYAAlKfT2YsfZwyiDUQiz85Zd0VphCOWNirq3dATf+xMgHUVaDPKmOZVIW2gbnVAcCEHBVCuFSKqg2B4IIcQiGZ8Ere1hpLeGchVpB1RgrMODDe6Ry-uZYef8Lrj2ui3VSYDeHSEgdnTqQiRGBQ3p+b8DBfxlyAsSEQMiiEkJmrfCWzd-Y9B4u3DSwd5bdx0R-fuONszrjjuVHWVUKIT2opUFEFiPJWLpovHOTN7E-RAIXYSolBDiVZPg7x8jSF+Kbn7DwrcUQ0LCXQ7RGNCrRKOtcTWRiE5JKuqTMxPDMleRsYzVcPUN4VzCGQDBMBMxhhmacMswF3Yi3rmQ5RASWjNA0SHNGO1dFMKjrjNhxi+l62AatdJ0ZKYeTSdkjqYyvqiLtuzZxv4ADkUAGCJBZFcnxosan33VGkk6TTNERLaX3bGnTyQjzOYAlJTkvCEQydecmC9HnL1gQwNeDj3z9TCggRwyRVBkBZEwNgEAcEooBesoFFCIwtFUuCvZWi37Kz0TE46hj46JMRaY-23ghnXjbgI3J4yXnaD+sgwG35-AYP1CSOlijG7As8NIaouzwn0KhVyzpkhul8rIuczhN1DYirQM9axOTbFMxqFKwsJYWQpmSEBFkZgkBkDUF4uRqy66qvISosEHxgmsp1a09+7SYUsPnvCiqtEBUDPdOYm56dUC1BtVimB1Mbbvgig8NgyQ2TQjUEgbkVYBZ0oAFJIFBuoGGd9GV9GkNQjutDX4HKiTGweJReUJLQMEpNydOinjTeAzNDzLY5uelKpxnMq4ksRFU3xjb-F+0KB8aeISUZsshVG6FzDe39u1oOkxybOgnTRcdAK4q7UvilYXGA0JVBjBVQ3INATCjSGkEjdtzTO0927Ue1cwT43vCHckwVtZrluXAa3KdgimY0ylYSitpARQlnfRsptwbqYlA+AFcNLSOWMM-ty5mJ7-6Jqg8mlClrPhtSgRKq436pW5AgAwVQh9BCtEmv6s+tb60MrwzTLw2qSNdujSB1jFlTkJvPcnejdFx1UzEMEu9TyrXBIKcQJkxYCFep3muDwkgq7HAYMNLkoxEgNoE02S+jIb5rtqalE8LQJOAcidJ452ZZC-2Nf7RTwC1yweaiOQjiGWNWome+XEDAZlFvGpqOljnr4rLVc2yorbPP7KAz5-RSIJABYHUF01SKNYBWvRmkZtqtO5sfT8mgLJDVyBZIICYK70Bpec0o3DX74KNP-RC3VB79Wxv8-J+GwXwyGruqpuMk7MXTqEYHfF2Qy4VBZLUWoKzQJnx6xlz9G6PBZJ3S-PL3nD2+YIlRmyNH+kjpQypuDvDGhRfvaxnTrMmAIDMCyGDhRUtX165l0TfQ-2hJG5GzlRzCvXBK6e1AkHHshZ2wxzOmnsXUziQUwuZBhIIGeNhkTX7KhiHJMRrzeq4cUYdfEpHHCKsRnuS98LVr55Y5zYa1D4jdBm34-t6pLn1X+2qImKnl2afkYNYj9hM3kXggYzBj79Wefrd+vSfmUBawk5F4y+Cmrcvsqk9d+HjQ7u9OHZck8yv1dc6EWudjbBplcjCDBvXfX11S3qW2qHe7Ruw5l7GvGcuEW0eTjRBjnR+HMc+8dKVMBms3G8GET3YOAliGkDWY3+6g8dNjcVqbY9yuCuU9Vj4THRnY7YxroY4wuM8b4zWutSA7MZ43cibVWi89kYL8esPCnS8XoxdVzHcf6ubqlUggGrJSAUAB14QXHtV1e9c+8Z65Pu-U7G7Tg1tFwMl+t7N97bPbkjiWw75DsXsgFqLeWnQjJ0gt+E-r8HU-ztyx74HvvPbVwnUPzK2PyclagY3sSvzdDWwKTQxwFsAinT2O1SlrHU23yl132D2jhegZ2owVxvQYwp1V2x3yVZj00EAM09RmW404zTApTgDGBOBaxkGBycyO02T9iNEp2GxQm-xh1-xkynmL2R1wOphzzP3TVa0IO5xOjxwQEEgJ0QGJy63pTfzJ3UU-zCR4NI0OQwPGUtwg2EOtWjzkCzRW3tW+0cTeQXTcQAk8W+QkjYAQAQLYIfngjBS4OkE0NN3GwH0EJRwuXDAFyMNq2zUdwCgKRnxQXZHQQrV5H5CUMDWcPVBrDcP9w8J33zz-26j0LPWH2TkCLEPgyrzq2x06F5wGgkRFCkWS2XzWQSP6zqRRVQJN3yzNzpz7UH30NyOAT6FRQW2vGFWWyQwfTr0LmQGSArgNHiI-USM8E3U4NSM8JaO8NXEIkAKZ0FUjAKN4QTEkMdzzWyAiMBmBiPjdiF1Xw7yllrBSN3TSLQIyP4PdGyIAQj2AWiDC3PyRDOwgOeTr3thsCdigBdlsHLSYEZASzmUcKmJw293hnU0hxuMWKu2WOzA8CePWOTRWGjxKFj2r2532L6nESGiQFGi5AmicPqKlhzHhI2kROl371XFUjWOENMzHVew8jFQnxKPxLZg5hcS5h5j5gFiFihNJz9miFqDDXcNpPQPpNiTROZK3Wjw+GCNMJWOd1d25DLR0F9XJJhKiEzQlylPSL4Ju2uFWJ6X5ReLqgGOqxkBVKGJRLKLCiwX8EFIgAAEcGAaBhIdSRSVCxTf1JSFjjTtDZSCJBD0Tk43jo8vjOTudVICk-jHZBIy5dB9RmsKk-UzjAV-TUpWgMVw1pT7jTSLcOicjgCYtWT2d3R7TotrhXwC5ZCWRn1ThX1WR-hoRkhKUXFfT7NzjECN8JS-cESQzgMSyACLSj8rSnJPIGMctBi6zZ069Di58+BezszlC19Rdig5B5iRy7iTTzcyyhCuiAjQE+iNZaz49rhpDWYkynZ9BilvS08-StzGUawPhhyaTRyCs6ci9sCbI-CzUYt3j01K9dj7UGyN40NiUJI29DBXyLj1RGhrjvyDzQzMiitBCHt-CZylyK8NM4zVsEzWZMhThvlBTAScARQAdvAaiA1piKSN9nohtgz0KxzzcD9JygDpy55gkx8rzJ8oL3x0tSlOg7QlDDtRSkCbgWUjT2LfyDVagnicLgLUBpAr0Lz1LBLsdxNfi4AEs4AksaJmD0tpKN9wRqSv8fzWj98VLhDwKti4wjcFzry9LoDHZWQbgxAmBTLQcByrU5Adj1CjQizDy6cJzAtVLmcPCGNgrvjjwpU79i1H8mRAQWsPclChM29zLPjs8mje8MKHjbcAKh8Kz1Lei2SRx+wIK3QPM68ONG8U96LBNW928Ar4xT9CybLkSM5sLhDy8tLWcErqYwiSD9NDNKDNTXgxK1w-LWCmKyQ1DuqFLbKWFax7LTyQC4lqtjRaqvs51LC+S2RMNiw31EKOrOgLUQruCeq99Y12j+qtq55U0qrjoTCHSrVuTkqH9S10hmz9QIhr4X8crczmLpA9yNpCg7qdC-MnryqUJY4K8dKZ0b90ApkZkS1BBWQ5kBoIocBdT18OdCggybjobVreqRDNqEaqstLEZ9qrUSKN5SDyCjNuNMAHhcQ-l5rcrqYzYrKwlybmikT7rB5lLjzorBVZynKL8UbVsURwiZVZ8WR59TiV8cy3zRNohIa5YhbCqOK6dKhqbeKzTKrqzQ0GaccnTD44DpFTguMKgfxCbtzN9tU9af8iqSzzTAtIzLlzy3qIFLbT9Fb6RZVWRjiwZnaDdv0BajR3beDPbzdvbStfbrTQLwEZAPq6z6dEzrBkznZkhXYo68N4IEMbrW0YawzrhUTjzU7kUSrbSOTcTHc0aeT3l+TeZ+ZBZhS+yNakLKF6rw146tCDaDVGTuK67PBuEZamIcTii8TraiSSTqji7M8bhULdbK7MLHja7mTNQsS5b7UxqN5C5i5S5y5K5qVJJe7Nz+6Wd5yh6t7iq4kmTnr-YGplddyg7cdSKzgKL+ZkBThPS-hV6xTmg5LUjh6vDRaGT5S37NjG6s7rzg6fsvTnVMQKgfS7CIpISb66i9T-YygvzN6KaYGUS4HyqEGtKehD61S68mQwgIBvwmBkxzNsby1K8hI2AHgiQ9t1bb6Or0oShSaoan6vaKGTboyZ6bzaHHTlyYA+YIAlwWRX0zA4RThWRGQeHBBQGpZ6piHBaxHzca7BDVJyq9rpHlMRrSi69kAAAvX5U4YaQoEtBgXrDc7K9qmYkQvSx+0h2G27Xe+B-e6Rm8IO1u0Y4YCY9c-h-BomiMD4WoAxuOoxv8iMve2mgOrvVytXJmxBJWyItBTkEtVQLBGEGJ2oxigh8UnWwx-xqunodJ4Js2j45mWRgQuvNDAnNvCoqKCphi6E+J+qWoWOlCKBpYshrC0qy01HaiBu6hpu+evYw63k1xf8Dxd1bBhw-phRKpoZ8EIjdw8ZkWgJyjCW4Qm4Ha6hmWHJko4S7IUgvTFrUoLkTMnmsGq1AcCBsm1Jg1OFbiyWi9Z7Xawi5u5DQiXTCaigneboMzN5ySkHBaghs2J3cu45uk7ezoY22ZvC9OqmSLW5mdH+xxAyxLVkMoMQHZhzRF3mhqDSt235kPeGk2iUuKk6EakmqVYSdIXFLylx+Fm+qSj5nHRJhl+pzFsDAFi5-CrSi2wl1bCF1mGA22ql-s7xvoJbPx4WjF4qgKQAwFpTTJ6spJy2j-ApRq7jPjVV9ATx2luYsV7VmUzF-8-V6VvFxbW9Ii5DPJ2-bhn8X6p-ctQB0sQWa1kAW14VgXERkhx14so85lnF46Ks1p5U01+59Gl3TGnQbGsNuJ7cnoUZiu8V4qo285t+wagOxyjl4+-NP1lK0tY+FrNJNrAVjxtq2liQtFxlwecen25k-26szOoOn19AJ1UsI4fwTuv5MoXR+GTt8NDwbt7+CRxN5yebLJxZkI+1bkyJ8Y6EWdvsB+9wxd4tks3tlO-t919FJB3J6fApuVIkGgPkA9lORyhdpdr6Fd3CsEFp8Q07IO7krp84dmyRaKC67x6IeqbVE92N8Kg1QoL9tSlkg+8J9UrNv6wGLZ3BjcvN98n9Q51ImD-WxS2NH+Jp8q4Z6PUA+V+1RVjeMi-+itIBr0nBUEhwBUDIF9uoEoZJlCIjj20e2NZOxnYQqRxu9p6uu90O5WqizDDBQEalIsLjuE6Dj9jp1+yh6exuoordhk627Gl8vBvZ0XeCHZcu-jhOwTweF1ie5k+ZjdiTnOu8o638AU-mbpqguAWzLjltVT0983F+2zt+9KK9jnG9kokd6VRR5R1RlkQtU4M6pZNj8Ezj8Dxa-2bPQ0wjtT1haZk1Cj666rQwmjuhgpMdl1E4KATAc4AHM2NkElBwrjzNOJd9-zunQLvt+B1nW02MsFvTkYpss+6lC+pLsEjj7D2J4z98z8lr49nLnoJ4oC5nYr204woO9NtuhdYgR9tva+nDqbvDUzZ7Vr2DxOunf5wLJb6DAd1pzt6x8w-J6TlBKRbb+r+wibypwZ0XGsCGvz07qz0DXwgw0Q1bxzjbp9F9c6ozr75tEZrLm4izkekjweUtoHt+-IivHT1U7MDbmCpADDIsYsF9lFWb7Ltrg1SVy7i56jsfcLmdSL+dY6sIJdSY6H2lroP74jtazAjr0rA14BCt6slAkrg6uvFmyaneags4Wg+gvhtZIVzWgJK61ihH+brizrijm0hZxz4lx7-6FBCOwEJr5TE7rnymm4RD5nMT6h7LIOujglcRF06rh4JroKzngT5H-rjTk2poUL64Cx6xhnlzrmLDssZgXmXytL6phMQtxH6B05i3oJzTv3k8Rz+37IBhphtgFhhgkwOCk6lj5dNn4V9KdHcz+b48q75NHooI9bx9Js+QonMUKP+J79UV8v8n2NSKvngao1lNrHz66mBW1mH652SotWtZCNxXjdb9DesJOPiZhP8WhN79tpucwiDl3Xg4+91cigF9nc0n1XzvlH7F1fw1ZN9NEZ019P9GpITjbjaoFqpsKfu+ltOfo0Bfk5hpkxvLiMYQixgSnX1sbElHGw0DwCDS8bpcaYxQd3pZ09449T+alG4L+3gx09Hct5aCuIlgL+AwOxfafkgVMwq8Non-HViWXV6lYq+I6QrtQyVwi8OcUqBjlO1k7NZiAlQfflnl47Z4K+iA5nDTy0rj4+uovDykkAyqUsOyGjVxu434YK9X+JNeHsQPm7nsRO8DG7uIVKCod5GT3OVNYEVSnASQZYLjruU4EkCnWDxZfr-0npCo-efQRzg92yD3k5CwHMKNRRoDDQfOv3Dvv93gEZweBgqSoBf3AQZQ6B1MDAQSk8oZUPg7zfAe8BPC29PBZvSZgjl8EXpGm0jXrks2QzclRKFafwBPzrgyCOqNMAjLAKR7c9rYK-JAfTjHxxIOWw-E+k1hazeAOsUQ1-gRmMHcCy25VS5tHhubWNQhDzJkE8xqBiA9QLQwoaGlqYf95uvPZQZQ3s6DtN22PPOA1UzZu59QrILDsTw8Bl9TeHvMoT8VdZv1uhoTe3F60gLclNsTAbbLUBOBjD1WlQVnLsLgH7Cp4i3C5sI2jxLlahSVOtkG0rSCwIBtLZUgRyP5eCXhuXb3quyoZZNU2wQ1FgUkz7MNWGDhPgMTweGx95uqPX-pQLRwBCqYl+M4bJhWbt1F0EkIvvtxh6HdDUnAsQPNz1bcUcRARLXgHXAKEj6BnTcRMgAJ5YYW+25QjPILli0jj+gPbEcDxQG8IBifQ+voJBbJtl9+9QQ-htCFFgjze9Iqnuj1UEZ1JRbIhHFJ316AwXueQ3ZpSK2QqRo2YSZUQkKX4VCYqmlAOnEJGqmZ2Md-RvEwBphP9sgL-S6pmiIGCjMRyQp7OKLjCwiOWdggkuUWwHwFeRzaUoIqL9HCjWMMwnAm-VirSN4qOo0QgUlH6pVG2zVQEcK3czmijQlovYaqJtFS1R8WldIbp1Yyt0VyKtVEdGNEyIwaRdItHuVQx40DbBeosOqgnpDREeQT7BgGyAU4QAlOTYrZBDTjEWj5uF3CgQYWKEnDuxA3QSGMRG5ojRC4aEsc8PN5YjACjIpyCtxoFoDIKxIqwus0AjWYRIlRBCngLvpNAuq7hbcaUPN7kDZhPvFyKEwxT3dF6wHXplIi441BpxxYtXpbw2KajeEiwwfigw3jlcJ2mAKdoIEsyOBc2B3TPP2Hf4oRnx8fb-mBIxLzDbuUE7OtyQxoYIMOGwhrggFQkmixSpQEEUqMxHkcPxQY9FI50A6Ek-xEUSotIlbaTcaJUsZoJMKwkdCmJUIkJuJwA7SiK0e7JZLxM+6816oJQeifGJVGJCFunQllniODFz0axnzRrGEGawhQ3BCLFgnaxsZbiRJv-fnuGHpZpjPWgg7TFKnF7QtuMiQCAPAFZ4bkCh3jToGZwskJiisAYgXn33TQeDQxUqbIcgFyF3CoBS+bVNhMX4NM9xUrFMfxTpob8MxW-dANmL+pGjn+7bAseTkwm-p5u3fJHNZKciKk0xNQjMTf3rz38WQHhD0TawKnRDAqaieKaBI0mrtM4u1E8ZAQ26kSsae3PiR2zWz+TVJCfR6lZIGp+9qxSwhrJ03CE3BIhJksypG3P6dSApzMcsSkLSkB15pg-TlktJEHeVwoUAGKci2KBFjhJ20uNClK6FYEx89kjIecMTxqBfkUAGgCYAulZVWpr-CnMVISlf9MW00w4V0K-qWMdJC046QUk4wlx7a+YtqSIVqDATbpk0pKbtOTi2TqsDozKahnCHDQPQtQS6a3zopbSMZErdsSbSPEB0CRDkm8meOOrbdhAu3N7jg2J4k1C2JQRiaKI1Ep81ucIjbvWMNHE9SgxUnmdtOez7iFxc0jKQzPngFJGBgpeVPqFgBizNx7hSWZTOKrmCZZ-M9fhoOgKcj8eZwQnsTxzBCSrE0wvCVGWZGDsA+Oo1IbnQdgAkgSz+CcWA38HaptZVohpm+PlwqCU+6guEXWJ360FSkSAb0spwLJayupok1fsh1CZETkGYYzbsdQ85hQ3OynajuGl9mli1JP-SEYnK07UMCCcI9ieUQM5ccEwyksJPnJ3GJDpZDI4HlcyyanCFZNbAsGg3HaHhO6xPeoHXKNANyXxak0PNTNXadismgsn8ZoP+jHANhRTBgoOOfaeyH4iTIeShBHk4TMWZU-+AeMrI9DHOETJsmuImLE9s8vo+uaVInmr9aZxrfqTjyZmud+5a89UBDQFHXy7plfVuUfNNZZSQA5XcsA8DmRmAieb8sENsJ9mKDbZ3RXoH-OCFYEQ6+o1kPKjsblpCgAAaiBwQKIwz0NGdbLunCdA5lDT8baQ-pwjIuMFElPBSrS4LTMNVcutvMSlUyZp5bEKeAkOmLl+h2U34SWmQRG8-pr+ZGTTFTF5y2xbCroZWMrbQyjpVCrAbbX37NAJZvM-WR2JB5djTWdQ98PjkJyKE7xhQ1GdzNnFBTZs0i6smFJ1F9A50edJ2CMGq64CKRtLEoCayYUwLupZ-NQmPlBavTWM31PhalQ9k30vR6rY0JwOYUgyS2pikAnNJqkMyoC41MghL1ckjAPJpMl2tYrcV3S1RPfI4TY2emmsSJLo7jE1KRmtCQ54iu6TZ3VFdDUxBSoWdbUjGOLRpkbVqMYqqVYyBec0iThQshZJKXJQkCoCwxGny8aWBYgcJvMIU6ySyOSpHAfJEIsTjojnHhYUibKgwjgnklpcjJrCotKl0y+NpIpNprgjY-Ax+YzX0nJ4mhnWQVmMpEX9h2l+yunLMuTGPS-eVbKxQz1JZGVyWKWNaf5XVaZpJlES0gZxWiUEQ25xrAfouTqmPNpExQMQGEB0Z-KkWrfOHtArulFyHpRy4FtczOX4YpUlw64bcORW0tssBC4FaYJmVgqM0EK1ptiUtrboCkz6F4A-m+lFg2QxAQ4GUsuoaVP5w8yyeDKOW0CCKabAmadNMzpKYxW+cupUH9F7z7sFzVIRXjiW+KYsEU3EGJXqDNSL4ty2QVgXDSyqqllAeVWVSOXmLWmrijlnWLrQ0UARuCs2Ee1SKGrHlBqWQM8oVXlstJI4WyeFJWEals2IygZna2uoGruBSgl5UKtpVgVZFi5LuegG5ZIBeWGVTAEipuWmTI2tYTgc6r9mYtw14eMSScqybfinZk2Oeb2KiLFMV5w4qAKOPHEGKIORQ7VNmoLkJ881VuH3gRPEIpy1cacoaYEsBjJdxugEp+O4WbWNzW1xqhOUh3EnUMsC1jaaTIVXFRN929Cock2vm4Ic5x74qEaXI3byzVVZzX8T0y4lRQfO88UNd-MoABzAKBhNbKD2v7PyuYLMx2KCHoV9BvmG0MdaPIT7VL5xBs0JjPKsV1SRZbAbblsPpUyq6RlASnn+o7H2yU2Kq3SYtONnlEuRZsnkfWvS5eAbmF6l1RNmg23y1KNfSxj0oQ4nyZRkPQNcaN5peAy6uGnNQ8WeiUBiFHq8qmXWqw8dTWKy+sVEWwBy8g1kbNRHypQhfqd5jGhDkmNY2aS4qPS-8sgt7FmA2ALuF3vaoLbrqjVLG01T1O6VcanJ-2c4EwGGWSq8MMeSZaJpYW6sr1nS8MKjIYwQbHRkXZlZ9LZW-Tgl-0nlZq1HVQb3VFUeZffNu7aj4l2i7IENJGC4hPOaI6evRpbVV1m5NSmmRBOcpQrkGuPDiW3nLjloFQjsYnkpMLbmbIlJZI2pps6IdjEt14DuQepPCxwXZ-xQSKQEnY1cIAigNERUq83ZLKAW6-eQuK9XvUg6paxdYfH3BLIwgBAVNU4uFamYBw6mvDYPAQ7FapyPUjhVTFTEctzBfS1mlNQM1GaSVBYz8sJs1QSLBVq7djVWIk6ZjWYFrClPvENTcqfJO2K+UaHy0grDaVmw5YtrnJ4qzWI-AJQ20EVubhFr-HMPtqe2UrjGBGt7Wf3NWhT91SGkmtVqVYKKcB+-YRsDu4E+bpsRwvSqtxh0wzgt6AWFQDlKDGatkYTSDRiuY1TrmcSciSZQsfUq0mQ+oLkNRUQCmAlkxAVaZhoIbbDY5TqnLjTEnUQ6kBT02VslrVwrL4sZLZLGIGJ11Jv0D2kTQKpblHCPhAG0XSURWWj9g2dC-7aDREUDh5dB2u6UbXR3lkjl3s0JnOqdlYilZf9LzimH4CiRVAdjAHMqWuVeTdVHVX3AbpB1xs6cEmyneBJT4hird8OjeICQMnHwUy9IDEMSs51DN6k3ujdQHoxJlaiseKmCXr21w3bcF0QENW1pm2SoLBe9RZdXUc7yLyiugc-sT0IyJ6OlRe+Bp2ozrdqIuaHN3K1gvl57edd08eYLt4E9bkcaunNKZlD3vgnN5aWGo705Wua22AOwoZqH23SBQJnWqTauzXBRr4MZ2vHYAp7kshshfwBgHY2HEzVLM-G6jRtM703FF93e8HUdtX44y6ag+oRAhDrwJqk1JQFkGQBTUy63Me27VFfoL1ZEPFQukvay0QULrnOqzLmPqEZD-YyAburZa-zinl1-9DGwrR1us2VTC1Fis7T-3NbFLuY-AQ1ADUwCwAS4GGmfbrrvqdBWtqRFAzFsxZkbk9keQWbaRDnWN+trMHjTaqLDydS4da8bdssrwG66D46hpiapmZ3zuu1zRznGpACIjs+rDb5CmtLhh9md+YHPUFWEMwKTdzxKEY3t4RsGnZ4ByZKsM1LpBtSg6iEoBJ52X7QJ4h-LsxOjx6V51DAv+kwPY76gKUY3KwznoagL7-R163zbLIQXsGR92-LQRsLUBlN4D8kibTxy0NG6BdaimmU6IA2fa5MdeIBRWEBAJcxZ409wiIe-UNM3VhG5bnes0VwjxdwfenTkYwSUSNxCRgA31T5mla-e1Haxj3pQ2DRgOGWnLfkdoM2zJN7a1dtbxhHLiat+dTOYfBFDDR2szW3w-qoKM2zAjEhpDqnv97HywjmuFBWYc2ZKppEgIFlXETj0mceg-hohRTvr2a8U+AgyrcYfybRdpej+CuCXC441hzjTRw9VcZ967rB2QQ2eV0fCiMBCYLDAaG8cHpLGjVQB3gUtqS26axeULNmoMsM10B2ZjXHbcjOoONHUD5uGDeVPeHr78Wj+zIVsY-C2KUyXGUE86QcBSDYjIi39NifoPFU8Y82niu9rSGfa05OUgReWmEC6BMAZB8BTrsgFXTgq4aQo2JpLJ9pl9WmyHW8vZZWL7jYiVDTQrJQCwAc2C-flYg+M4mnlGBpNnFRjVuUMj8mmTmgj4379jCBCiUxZqlNJGsVPU-vVVIc2km+1TIVBQQA+4CaRF4IHU0ybQMrGFtq-QXq0zxkMz3KrMeGfqCP1jb+GIS9LqOj9OiHnWUgfUxmlhPeriTdVE04ko207w3JaSjE4DpHUDGoTpRisftONYvTYddUy7R8Gz3CmgR56yE58Yt4ymMdj0wkx5Aq2w6yOmRv7H8lrA913d6au5QMXFPuLTGDlFPj2Zhl9mlZSABxuWicb8BpdQiyg4UNbSMnkzjGvs7frUq9StK5ckavBFTMIn+lSJrbaidD4GSUwxwb-TENaj7aPgoEwM2yeDP96HhDKo2gArQz6BXUeUtVgmeVIG6Xzd05Sm+YqloAPBHGnHYPxrDoHgBS5j-YIEEjH6rMt2hM0+e1RgXWzeMPExGuO1YHWmjs8MxBedEN5uMboog2QGMmNnBNFjcNLhd1MU9Xt+53gV2eqpnafz70llWyBc0cquV65kU-E1T6gXFdGvGmVIfbnLKBdCIwQIwyREMElDo4v8FmC8PscfDJx98k0GfMwLWTlg6nWXNkskTTDBkgEA4SSAXyITqRZi-6aTqIXi506kvShS0WXGbd5FKdqrPIpcwstgFvup7qUniXwLlx5I5PNSOrd09ylOqQ4MPjPowwrguYzlpss3E7LO5ksiyfLPV94Nl-dI6SfrFVqLZF+jaGlaKOgzHLSuuDW8ryt1S-zUc04PKnKSJqIoWZBA4YrFPuFSrkpo8mxYdNymGM7y+JX2l-N856rjVvBFFNat0nX+W5nC1BtZN+byj08npTmYsKQGajjOjWcFdbOyAFrYojHCZakmYJQonM9XExe4HtnTd4VzixrDytpy4Jfct0riC+lEgthsI864kZ0N+acrqAtyxt2Vn8w7GF4GAA8E2XTXPd4IbayxZDyUAvrt64i+IVnPQT8LreouP8DDBojFjtl7gUMZK0Jb+9KedbmeYG3HXyiI22M+De8arQzrnV-S0wcuQsGy5UV9y5wfDmNXdB+gw44kGOMCH7xikua+TrfN+aIrNvdPSUcyM77hIQ0MsOo0iNuNXmCE04JSimvem+bNB1KzbIMvF6nDCphWXjBGsV6XEvMfywIypu1g9L5OnQ4Zf0MeRi1nc106YeQBkA7AVEjCxofeu03Ej0JsvJ+azNXAIzYe8ObxqAj78gdAt1sxIFZNQXq667B+aaw4MbxuTZaTC8i2EZQ37Lf5WG2mbXB2iqz8dlm5MnwPN5hLtLJAx9YjvUrDUCNzhXiq8ByWLtphhwqoGHNtX1WNg8O9Des4VWoqFzLxacv-nE3vthaFKscCLCZbWQfJgU0CCFMUGRL25VoBbdbPG7s7KuyK6a1RIxXqjZcHAOo2aWU2oBv6Re53f8g36+rSA34ym0+2okNu8hnPtZmSCnBHy1mOi7zfGHFW5YXV206CvsPvnKhudi1dWZhmokVll2mDPwAgAv24z7m9Vrno7sZ3Zc9pwLImC6Ei3p5RpyfAoEi6JqDJ1RbVd5KgFbp076VsHQRZvVHCzO5CsW05MGFwrycZACm-kI91U3pa5d4+1kR0PR3jhtpTnFYo9BpzCVO2eh6fupajmZrnm7G5esusnkuhFD6htunu4F24sXypLGkjEBKMHzngboEQ7KvFUJAP96O+312qIaFpw+1us5KRPQBvSbAQ4HvcYeiPvRJZjW4kdIeymDzvtrjaSbH0sgJ9VcyB5P2gdQDGgR9+Bw9V6vxbrrPQz7fObvLkn2siANvDglYGcz1bG0WoCYr2vo8fr+LZm-9bcOCkgbOAEG0sjYH2r7t2qNJ+1rbUdmzVbyv21agQ7l6s5Y16wCyDXPaXRMiTA3RU7wuhXKrKRkAytcUf8QmypNsKIipZAlP2nWyOQeU-9EuO8bk8pa4OyRuLkFAva0w2Fp3iTPX7VN33rM8vVvnDLjNrJs4ZLU9iZO3Bo4COL4PT7W7WGj4DYdScwLDn2ti3brcq2yA05aGAzu1jbzc2L5-Rm4t07YevCtbKgm69XTqfxhSTANj-U4KY7AMYjqtz3QaX2etm+0YLuYQTfqodGhnGbDUhJEoBCRyAIDehYQ7RcgvKMP9wy+sbDtwijaKy8rgBfdQUEfUck5FxBz2fl1gXITru1U4cM7qIXVCcJqSbQxO83SwDH0uy7P3Izc9hbHl8Q7aL02AicQyh0HWivnOUEVa654p0EjSvhc2ytJPtoVc6Oz2yr5FNJYWFg98rCjB4Eo2l4nAEZPqCKGYG4wAABVxq6X5j6ugLXOkZl07V5pnDHVY4x-BeJl6bkTwytE16YOxMOsLgLp55eqjsOVKzoZ2uxIAAXIBhovyeh2hYsxu36LmJreRS95fWwwnuShGk6bO19pZDbpnNnMhIMwBBT0bl9p0GbOpETX3VpV73qlo4rK2PS2QDuybL-BvSqJxFUosYvuFO3X9ijBtVxtoBkHRyqqbtUAdHS+03JBjnbtY5hhndS+QziOfWnbLsSAb9rS86DmfCr70+cuDHqdjHAJiF9AeeOand86JAUjzh2tDSGhvY1eLj8Mo5+VtOD3-yrDeJRLeKvOkTGzF1JbaM9LgHEUhS1nzvv1dlD1KNSz6ksOpcpndSeqCe9bMb3s7xz7Awysjt06WyNAOxqSHtUq5uXdh-D9XeW1na5NEBkkaR-I-s0oA4A1TW3HDTTuCt5uDVz2+TQnb7Rtdj0INPwPuiU7ZMrG0C9AkcOBqELxhY6NkBULwhEkc4J9PqNFnCh2Tbj6orPvM4cwEL247DrxjcksjlYBLu1mBgiB93dz5Ftlhw+Uu1wlAfl9I6OX5UThn2vGMLKDt0Ajo9qlxca43WIPYN7n16ss85OIX5LilhQwwRREL50PMbg1zNafcdu6bAnqgUZ5wOknYrhTtgAlb8ccuoBhsG6RpVk9pm+BB0nxUhu6CkniA+moZXQA0c450ouyZUiYrfcOV-76aYahmP1s-Dh7AbNKuWiAjkV7zJd8ZebtZTtfL13tujP3tIsHqELACnjeaZDuqbpPyEGb0vfLf4m36crXGbXd2sUWGphAyT9uTWBtfJMM71i3N8y8HXRVZamTn5-Vj2rssQk7b05-68ZeQsUOwoqayNqVymn3pRq-vxr1Xe+dCged7-YM8X3L+smlz0daiMnX6F3gD9ZpE++luEBcN9Hks4tWyWAFoW9G3Zh2dYb6kaMzH2B9Cedf2Fc5KF6tER8jEGhbxPB3G+RYngPv133j20Urt926ZPS5ShtyTv-VJ7gp8782g8IU+ufz211ZXeF0HSRPjPhc8hd6DbOoHs+9Vi2Ih-fzs7+S-gXBbrL-sGqRdogw29IPT3xfWtZalwUp+muerybo4ZDL6kMq5tA3+-PwuG+W+v0Mzm6rb67ey-9HKbuKnivUzg7lfOb1C1787w03-cfvm74Xl2+EWz+q948fnZAemGA1YP1L7ujj-c+lKvTnu-t7o9xh0xDM6IFF4u3ieGzs9jtjH5z-S-Qds7j0HJ-LZ+9jzOo9KEr5IINeUTGwvBLedGCCAVbsb+x+q13LCbc-Mv9aqiRb8I02-UL089yXq9VxUl0vXBAP+ODD+RHh7xAyla28N-fd+fn+4u9X19vqyYZpb4D4uW4OcE6-0wIP63-ZB8HyLH0dr8+P86afUi1Nz19XeG+t9m714D3hHdZ3R3JbPUZVH8sNfImm8D-ODljRr7CrwU9f-a8k7805Lxy+kfpFrAmgULKPx-0uPG3xgCzuWX1c8DHYvxHBWRMvwUAVlV-RzZKuTw3QthHJ-zZ9RLLdAn8CAgHifkfvGzQzNB0JAPqwVICvw3goze2irgGHVqg19AnFJwx82A7wSSFiArrzioDfa8gagBA98D0w8zbjCvMqNbfyA8CGE8EkDg4Sf0b8DUD0CFsLmc3VtJRCR0QQ5a3cT3a87GQrzECNzAFTr99-YL2PIzGE2gAEKjDlhn8GBRc1AF+AaQA-0kXRwLnsYxTbykCcbbOxlZK2en1bpquGgAYAQYLmGq4ggrBFpM7HHf0KEJoN-yc8JAOQKOE-vKmHICD1PoDD8EdFUzgo1THQFBITbXDlEx6gVgMO19PKWmFUqxRQL4CEObki8cfHMALrh4zK6UcdXAy9Vn8jleqgrxaIath-dGeX8GEhWZV9Uw8kCRYDa90WIwNjQr-TgJnI4feDEmCrFI2nusd9YBRyMZ7Oz1b5mgCf1WDD-BP0gt3hb-wnQOgmvGlNUbdMhTAPUL1DZdZEJRQiCDAy4NgDZtU+3Ccz+Dz24cYPG1wiN+LN1Hwh7VVtAuDgvQP0x1SAgMF2DwzLfRmCuYOYJfUtA311b56kWEMSN4Q8xm69wERcUdFlKABVH44KPQSh4a-AsW1MVggIyDc7gqmGlVSQunVgAMgAmlwUTwM7Gm9fgwgPWCzzdi0FR6zGTQZVhrXi2c0MA5EG1UBg0S01R5dT8ig1P-Flm4DkcXgN0oGnAlWYBozHAIsoOrWPz5D2AnwRuCi-YPwZUbAyiwBxq-dXycCsLHkJt9DQmQKHgCgtjSJDmQh4KH1xbLMT4VRvRcF1DAqPAINC9PQvwRoFPenwzc-A5C1zdWnf0JvI6NB0Jo9Ng260NMiPLO1+JqjFjx9QAPU4Jdp23HP0dDwRBbgd9K3M0OCEGfIHxdRoATslacLAe1Xn16QqWQUBRgx01LDVteu0wFyiFMEfxWQQoBgB9+BPQbCK7YsKFVEQ9SmRClvSLnMcpqRQDGBkgZrxpghgjHwLDzeJ4KTCukP3hKCkNBn1bpqAryg+AW7cAKyD1WGsAVDlwtSQkATQiGVVCuFNyl8C68Lx2Z0kJV4FjD8FU8P9FlQ1fSd8qxWuy6C3feth5MXwzYl5Cl9XXzdCPIQLSW8EOEB3E9vACBxfDxcQcK+9GfIUKBY5pccK3C+HSMN+RVfeCL38lwyH0T8V9SHQhdg9eJW+9EyP92SwSgHBEVtKUKuHv9xvNNSPDIA3xgTCDnaIKFcVna8mIJBApAC2wtVEIO0CUVPkWz8tvM8KX4AQ0L1X0Q5EFgZUmw6h0EAnmDf1EChImjRoZEIrH1ux5nK6zP5zA65mq8YZddz-CH8YSEU5EgF8K1UNIqnx7Zu7KSMh0mQjyEt14lYj2N9LQ+szaws3YGBNtZQ7cn10rIu3x58pHYW04jSNV7TK4d9eCVflFguCDzCxIm+W+Md1AWUi805W+0UMXEVS2aF6FGEP8j-ffDWh9vrWpzctarNLXSAI-Ynk0Mco+PxP5tItz0WdRwsulCM05WAEeMlkR131AfUMuC4h6FdTDxDWzZShqjOHG5kx5HvU00iJ8eR9nJEcwrLEFlgI6-QGjFVEvUGtSg2Qy4Nn1aXlZcSfKaNExycN8O71dfRaPDDNXTDnGjhAaXmhoK4FdWijGacR3zD-RYcNX0ho2VhE8bFV2UEhFAGDDaxRgYg3N9yDLaK-QlJXqKc95ohEIGt0ImGXT8NSF4JwRRgZHQTd8IvaLXDDPB70QVZDXL3itm7BwOS9NzPCJ+CGQxGKKDFsD0NWwKwtMhB8WnHmEVs6gtCQ3RQ0QGM0ih+Su22Dig3FHgREFLBxGdkfMmxUjsQ77iE1KovP1CcXQkcLnIwY+CzTkpwneE0D2sZr1HRdonp3ujgzMMPNCsIzLVQto3aWIm8fTOGNxj2tYGNDC4qen0zd-A1WMEhNhTWKoMtIfmKn8u7ZsLP4CPUM3QddKDbjRDmySKFY9uQP4Emj97dn21jR0cSOKNkIloPm85ybi1cNPLQUnZhVAWY25iArdVhuA6Y6yLLc7vELHl9zaenzTlm7YbioJSUdBRZAC3GkJEV1I3339iUzZONmw2ghX2-MJQ8fVlIUfQt1kEZotiJ28CQoVQW8GPYyI99j4F8NmArYtYN7QEAuKnVCh9DbjQCXNWMN8kE4gKIQdbYg80QCXfauP4sMA3BGas2AR-xalxA3QIlJJ43KJP4FY2eMHiGVMT0tDCBD-UxjPRAJ03ibouKMSNTAo4RFClxU1lboHrBrX5hhABABs95RfQL9jmgwEKI14FaRgai+vODxi9EPFSxUMvpF0H78GIof3KjYo+GIrsy4rYIciL8ImOQwmo213tdWokSHajuMTIESAPECjyuj8MeMKDCjVHH3UUXLXoSA0j1UqN5MwfHGO-jydFuOkjY7C1QMj4LOqWzFR7QEg-0sQ9eNtD7PfUNuiMVbO3GDZWUWMN91nf1VxpFkAHGY1+wyd1ISdrQOJDCjlJmMWwB3I6I2EMgdqPlFAw4RPRdJIvbykU3ldhNjVraWClJRyUehy1NFwnWPf8JAPWJVC7NVBLdBWvMXn+xYCEsDcZ5wnTybinPTCMRixEytgkS3KWs1MNzgEGCMx9+Pw17irgweBRtEY1OJIt3nEz2tpgORZC+Dt4qqP-xCI1xwM89fStlcT-bFbz+h+YPeGtDvY1vlmti4n8gABdQYDDAdAAyTJRLAbNn3ZUgEAH-MFLbIDOItADmhvh0AKRHfj0gHRkGA3BTpK9R5CCgBDt0ATjFwZuktPHQBD8fpM5p3wT0l24Xvb6SyA4gLQGDY2kyHlOAAAJWvdHAEvAGT3wBGQGAYgIAA)\r\n\r\nBut doesn't work in Jupyter, resulting in this (frontend) error:\r\n```\r\nJavascript Error: Cannot read property 'field' of undefined\r\nThis usually means there's a typo in your chart specification. See the javascript console for the full traceback.\r\n```\r\n\r\nThe problem is in the VegaLite wrapper:\r\n\r\n```py\r\nfrom altair.vegalite import VegaLite\r\n\r\nVegaLite(ch.to_dict())\r\n```\r\n\r\nAnd interestingly, if you add another position channel, it works alright:\r\n\r\n```py\r\nalt.Chart(source).mark_bar(cornerRadius=4).encode(\r\n    x=\"sum(Cylinders):Q\",\r\n    y=\"Year:O\",\r\n    color=\"Origin:N\",\r\n)\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2543/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2543/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2541", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2541/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2541/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2541/events", "html_url": "https://github.com/altair-viz/altair/issues/2541", "id": 1089096980, "node_id": "I_kwDOAoxtyc5A6k0U", "number": 2541, "title": "Documentation: Repeated Charts example is not working", "user": {"login": "macroking", "id": 9276139, "node_id": "MDQ6VXNlcjkyNzYxMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/9276139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/macroking", "html_url": "https://github.com/macroking", "followers_url": "https://api.github.com/users/macroking/followers", "following_url": "https://api.github.com/users/macroking/following{/other_user}", "gists_url": "https://api.github.com/users/macroking/gists{/gist_id}", "starred_url": "https://api.github.com/users/macroking/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/macroking/subscriptions", "organizations_url": "https://api.github.com/users/macroking/orgs", "repos_url": "https://api.github.com/users/macroking/repos", "events_url": "https://api.github.com/users/macroking/events{/privacy}", "received_events_url": "https://api.github.com/users/macroking/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-27T09:18:57Z", "updated_at": "2022-01-12T16:52:37Z", "closed_at": "2022-01-12T16:52:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "An example provided under the Repeated chart section is not working. \r\n\r\nhttps://altair-viz.github.io/user_guide/compound_charts.html#repeated-charts\r\n\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nsource = data.movies()\r\n\r\nalt.Chart(source).mark_line().encode(\r\n    x=alt.X(\"IMDB_Rating\", bin=True),\r\n    y=alt.Y(alt.repeat('layer'), aggregate='mean', title=\"Mean of US and Worldwide Gross\"),\r\n    color=alt.ColorDatum(alt.repeat('layer'))\r\n).repeat(layer=[\"US_Gross\", \"Worldwide_Gross\"])\r\n```\r\n\r\nWhen I tried to run the example, getting the following error.\r\n\r\n```log\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n/tmp/ipykernel_76023/2561862446.py in <module>\r\n      6 alt.Chart(source).mark_line().encode(\r\n      7     x=alt.X(\"IMDB_Rating\", bin=True),\r\n----> 8     y=alt.Y(alt.repeat('layer'), aggregate='mean', title=\"Mean of US and Worldwide Gross\"),\r\n      9     color=alt.ColorDatum(alt.repeat('layer'))\r\n     10 ).repeat(layer=[\"US_Gross\", \"Worldwide_Gross\"])\r\n\r\n~/.local/lib/python3.9/site-packages/altair/vegalite/v4/api.py in repeat(repeater)\r\n   2135     \"\"\"\r\n   2136     if repeater not in [\"row\", \"column\", \"repeat\"]:\r\n-> 2137         raise ValueError(\"repeater must be one of ['row', 'column', 'repeat']\")\r\n   2138     return core.RepeatRef(repeat=repeater)\r\n   2139 \r\n\r\nValueError: repeater must be one of ['row', 'column', 'repeat']\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2541/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2536", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2536/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2536/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2536/events", "html_url": "https://github.com/altair-viz/altair/issues/2536", "id": 1083822407, "node_id": "I_kwDOAoxtyc5AmdFH", "number": 2536, "title": "module 'altair' has no attribute 'Theta'", "user": {"login": "erikfilias", "id": 8010477, "node_id": "MDQ6VXNlcjgwMTA0Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/8010477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erikfilias", "html_url": "https://github.com/erikfilias", "followers_url": "https://api.github.com/users/erikfilias/followers", "following_url": "https://api.github.com/users/erikfilias/following{/other_user}", "gists_url": "https://api.github.com/users/erikfilias/gists{/gist_id}", "starred_url": "https://api.github.com/users/erikfilias/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erikfilias/subscriptions", "organizations_url": "https://api.github.com/users/erikfilias/orgs", "repos_url": "https://api.github.com/users/erikfilias/repos", "events_url": "https://api.github.com/users/erikfilias/events{/privacy}", "received_events_url": "https://api.github.com/users/erikfilias/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-12-18T12:26:52Z", "updated_at": "2022-01-12T16:53:31Z", "closed_at": "2022-01-12T16:53:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear, \r\n\r\nI tried to reproduce the radial chart with `Altair 4.1.0`  in `Python 3.9.5`: https://altair-viz.github.io/gallery/radial_chart.html\r\nWith the example:\r\n```\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\nsource = pd.DataFrame({\"values\": [12, 23, 47, 6, 52, 19]})\r\n\r\nbase = alt.Chart(source).encode(\r\n    theta=alt.Theta(\"values:Q\", stack=True),\r\n    radius=alt.Radius(\"values\", scale=alt.Scale(type=\"sqrt\", zero=True, rangeMin=20)),\r\n    color=\"values:N\",\r\n)\r\n\r\nc1 = base.mark_arc(innerRadius=20, stroke=\"#fff\")\r\n\r\nc2 = base.mark_text(radiusOffset=10).encode(text=\"values:Q\")\r\n\r\nc1 + c2\r\n```\r\n\r\nBut I got: `AttributeError: module 'altair' has no attribute 'Theta'`\r\n\r\nAny help will be appreciated.\r\nThanks.\r\nErik\r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [ ] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [ ] Search for duplicate issues.\r\n- [ ] Use the latest version of Altair.\r\n- [ ] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2536/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2536/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2534", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2534/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2534/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2534/events", "html_url": "https://github.com/altair-viz/altair/issues/2534", "id": 1080025204, "node_id": "I_kwDOAoxtyc5AX-B0", "number": 2534, "title": "problems adding altair charts in folium", "user": {"login": "corti-acs", "id": 82566952, "node_id": "MDQ6VXNlcjgyNTY2OTUy", "avatar_url": "https://avatars.githubusercontent.com/u/82566952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corti-acs", "html_url": "https://github.com/corti-acs", "followers_url": "https://api.github.com/users/corti-acs/followers", "following_url": "https://api.github.com/users/corti-acs/following{/other_user}", "gists_url": "https://api.github.com/users/corti-acs/gists{/gist_id}", "starred_url": "https://api.github.com/users/corti-acs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corti-acs/subscriptions", "organizations_url": "https://api.github.com/users/corti-acs/orgs", "repos_url": "https://api.github.com/users/corti-acs/repos", "events_url": "https://api.github.com/users/corti-acs/events{/privacy}", "received_events_url": "https://api.github.com/users/corti-acs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-14T17:23:13Z", "updated_at": "2022-02-20T16:47:16Z", "closed_at": "2022-02-20T16:47:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to add an Altair chart as popup in folium, but this chart is not working and appear empty.\r\n\r\ntesting below, it looks working well..\r\nchart = alt.Chart(source).transform_fold(['NO2_index', 'Temperature', 'WindSpeed'], \r\n                                 as_=['indice','NO2']).mark_line().encode(x='TIME:T', y='NO2:Q',\r\n                                                                             color='indice:N')\r\n\r\n![image](https://user-images.githubusercontent.com/82566952/146047857-e8621151-a8c4-478e-bdf1-ab4d44869846.png)\r\n\r\nbut in folium.. \r\npopup = folium.Popup(max_width=650)\r\nfolium.features.VegaLite(chart, height=350, width=450).add_to(popup)\r\n\r\nfolium.Marker([40.4400457,-3.6392422],\r\n                 icon=folium.Icon(color=\"gray\", icon='atom',prefix='fa'),popup=popup,tooltip=\"Station15\").add_to(map)\r\n\r\n\r\nappear empty...\r\n\r\n![image](https://user-images.githubusercontent.com/82566952/146048175-59783998-109a-4f2b-afba-ca940f403d1f.png)\r\n\r\nany clue what is wrong?\r\n\r\nthanks!!\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [ ] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [ ] Search for duplicate issues.\r\n- [ ] Use the latest version of Altair.\r\n- [ ] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2534/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2534/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2533", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2533/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2533/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2533/events", "html_url": "https://github.com/altair-viz/altair/issues/2533", "id": 1079179678, "node_id": "I_kwDOAoxtyc5AUvme", "number": 2533, "title": "Inaccurate positing of Gantt chart on quantitative y-axis", "user": {"login": "danhamill", "id": 11522898, "node_id": "MDQ6VXNlcjExNTIyODk4", "avatar_url": "https://avatars.githubusercontent.com/u/11522898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhamill", "html_url": "https://github.com/danhamill", "followers_url": "https://api.github.com/users/danhamill/followers", "following_url": "https://api.github.com/users/danhamill/following{/other_user}", "gists_url": "https://api.github.com/users/danhamill/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhamill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhamill/subscriptions", "organizations_url": "https://api.github.com/users/danhamill/orgs", "repos_url": "https://api.github.com/users/danhamill/repos", "events_url": "https://api.github.com/users/danhamill/events{/privacy}", "received_events_url": "https://api.github.com/users/danhamill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-14T00:40:29Z", "updated_at": "2021-12-16T20:38:33Z", "closed_at": "2021-12-16T20:38:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I want to overlay a horizontal bar (Gantt) chart that represents the window where the maximum center moving average was calculated.  Then, I want to add some text indicating what the maximum value is next to the horizontal bar.  In the example below, the `004-month` center moving average window and text are not plotting together.  I would expect to see a horizontal orange line at the y-axis value of 36.9375.\r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [X] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor\r\n    - The eample provided here works as intended in [vega-lite editor](https://vega.github.io/editor/#/url/vega-lite/N4Igxg9gdgZglgcxALlANzgUwO4tJKAFzigFcJSBnAdTgBNCALFAFgAY2AacaYsiygAlMiRoRQBmDgF9p3ADYBDAJ6YATigDaoALaK1AazwhCygA6YUIAEb6Q3RiIRiUAJjkhMUSHRJJUPPIQGgGmFlZQEDokivL2IPCY8nRWOpiEanBgIB4AHsZhlsgmmDpmwbHxiggIapgIioRFINFQ8YnJVnSNlnmuxtW19T2pivncHSnF3U053MoF5s0AjqSKRHCEjXBolhNYncVmmWC9HpRJmGDE0MYX8leEwRwAbIvhxSRNamiV3NYkKYgShgWKYSjxLw+PwQ5CaEDjEALAC650u12ebAA7O9ml91L84v9AVYQWCIdwoRBfFAELD4YiUbJuBl1pQYMEdFpQPB5N8rAAKGakHQAOjSGSyAAIAIQAXjlUoA5McspglQBKHKozi6fRGUJLKxNXLibixRBtYoPGBmmyKe4kZrROh0B7xOj5ZAARjYHipNP8+AgQRCoEKESiMSJCQOQIlJzmJVNuKsq3WxC2xF2VRqdQas2KekRkysqtOSa94aNxSaZQqMcG+ZGRbG7TjXRGHgWho+IHTGyzOz2ICbw0LoH0CGLndmHlLRxOZxZajZHLUXLhPLgfPUguFYoT0vlipVS812ukyO4M0UxigijSs8UAFowABWb0ADlcigAnK4ti2K4YASJgYFsD+LAvH+YBsGArjQTAMBJgAJCCjh6FYYiEGYlDIAA9ARuwNKKCCbIwpDWKKcAQARGGlIoxHDC+8ibJgxEsKKX6it6ooAFaULcN6NA66SwqAt5vp+P7-oBijAaB4GYJBiEwXBCFIShW4gDMzSuBwbAvmw3rGd6AAqHDIFZHDxEe2SLmq8TlkUEh-tx3pyJJLYgAZHBmWZllsNZwW2dw9lWBwLAvjovDMNwLmSC8op-hIWLvl5uk+X5RkmYFNmhWwdnpImxSvDFcXOUukhca4f6ZXpVg5cZrj5YVIXFZKDkgIlCXVcgEjJRIGW6llha+YZLVtSFHXhSVWSRWwrWxUQ8U9f1bmiliX4jd543NUt00FZ1pUgFFFWrVVTkDclqXpQ12WTYdJlBTNYUtPN3XlStTBXRWA21fVo2NcUB0SEdhUnQtjkVn110sBIoquO4wOPf5bDgy9BWzR9XWLctlVw-9m3bbtY36U9mMWdj70RWVbDRT9a2JTdKVpWTIMTejVOvcdc14-TLwXb9ROuYDD37U90VY+1tOfWW1Wi24PFpRLFPo9L1Oy0V-OnedTN-a5t3s2rTVSxDON02dbBCwbSsA0jQN7eruXvhbcsC+tTn26476iiwHNo677s67jes28LzMbeLqOS+jQsy29odW71XvE64orviwpug09Cda0nUNfRHdtp2Ljs51zuVYiHRcK97ZfK-7lcHV+te69Djc+zx2exy7xl-u3Yed6nLOIZnEgt5NvpDyniuN8grg8UtU-+d6pmJ3zw-daP-WuIjEi987Ztr61m+Qx3O-zyz3pYqKLyB3HG-P7zF-b-XsML+PX5H+TJ8b2fAuW854NzHr-TmfkN48xpsneWMMRxjwzr7VeG9Nav0tnAruX877vheCg4ybtz4YM9rva6S9eLgLRhvfO6CPanVIf9OqW18HYlnpghhRRXDGxYW3IhdCR7Xz3ojVwnk+7-wHmwkhgiyFsG4ijY+uc8ozz4bAqRoChH30furUy69JH0OkYw5K3p5F-0UTowBtDVH6PUWQ26WiT6AL0QImxjC-YAVXmfCxMC67wMNm4RGWJJ5iMUWfaB2sfFYLARPDxxk0HeMvh-BBe8+JcJiWwQhQC34gM-mPWRWJREKK5mfGh8T36+J9kg+xITjI1xUREjhKBvTuXfCYiBHAz68MycQ6xOT+pNJSliNJg86kJPKQvW+W0namKKS+ZRXT+FXxcZwvi91gkzN0SMspkSNHQRicYpxizelkL4hjVeVMDmJL8T6dyEgCnTL8pjLx4TRnbOuv0w+ZzjJhMLi8hp1ytp4LWQ82JFyxm5O4oMoFHBMYZMsfUgxnDZFsCmW0jGxkSnPK2X8gybNPmsM2dkpJxzM6AsKcCyCoLXmML4g-PFwz5lWOcUcxhGcYKfLmXC35CK3B8QDuyl+pTCVXJEbxdlTyflYu5YvDOuyoUMwCgS9hUrkb3xRWjaW4rgFKqWTyrakKyXnTRYqtRzLEX+1Jfcw1cTMVCp9ryqpXNpawsFdq01ur3xBINfKiOxqelEsYYjFglC47S1qQy+FOrF4Hy-KvaWnTOWSsjSqlg+rLXevpQm21X8M5Ygtai6KHKXUmv9ZwxGK85UFoFTa11Ja3BcTzeq2Zmqsk1uFVxFpq8MmUuxVxdenapq+qZbWqNvEHV+UId8rVxbhVIODerQh1qJVZrHsImNcrCHOurdOn2iMfz9p9eGrlSaM6pX3WGzNrad33znSfQh8ai1+uFX7Ya+6M0PqHcK3dnq01u0LVux9V611et-VWpdl6v5+3yf2-Zg7DnDvHnVVe+du3KqMTexRCdm3dI-T7P2DMkNfJQ0m59Da44J0XVOgD2bM4EfSURt1i8+JNNoxisD26v58SA2mhO5731wZnZnO5qKE73v-Thr+vbv3CYkbBy5uH75cek3+tjVGx63VI+rIWGzD2JoY64O+LwNMny01hhZcmv48W9FJtGYb6PwfctiVetTTOMv4z7ZKLxrNx1qZOlt7G1OihfXK2pFG-Oqb3irJzBC7PCvcn24L6KYs+zvn+MdHBam8bE257BNGEsUtk2Cved8Pl5bfVl8zY9l7oa5jXZTlHxMs2GqKU5CXtMXv8xtDOyKoswZ08u6Oq9OlJYXrc3iXn1a8JcxGvTyVHNyt4b57D2Wx53xEYNkFBWqWcOK9VvyvDN0qYa0VpGaX8usfq8tveyUU3rfxX18DUTVlet4aJw7l3bGBaM4o3hZW3sVb3pBxTaM251bC0d4l75U2opB6Bi7-23nuUM+t3r7XwtvJ4n+ITaN6XDZvh58bJ9hlTaPQx70fsvxY7jsMxbZnCtvJS2qqnG37sdYR9xXbHBhkHbh3Txhsj3yM-VsM87YP3sBv9q07HNTccaO-KvYZr2edbbrf7Anijhm-aV9iv2LBBeE9mblFnaPGF3xYEDpnbW+Pw8Ye5fT8um0y+ulIQLHO5mO8YcvNLyjie6fgzxF4UPHrKJp6563nCeIxtRNIIAA)\r\n- [X] Search for duplicate issues.\r\n- [X] Use the latest version of Altair.\r\n- [X] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n\r\n```python\r\nimport altair as alt\r\nimport pandas as pd\r\nfrom altair import datum\r\nfrom vega_datasets import data\r\nimport numpy as np\r\n\r\ndf = data.stocks()\r\n\r\ndf = df.loc[df.symbol == 'MSFT', :]\r\ndf = df.set_index('date')\r\n\r\nfor n_month in [2,4,6]:\r\n\r\n    met = f'{n_month}'.zfill(3) +'-month'\r\n    df.loc[:, met] = df.price.rolling(n_month, center=True).mean()\r\n\r\n    idx_max = df[met].idxmax()\r\n    max_val = df[met].max()\r\n\r\n\r\n    begin_date = (idx_max - pd.DateOffset(months = n_month/2)).isoformat()\r\n    end_date = (idx_max + pd.DateOffset(months = n_month/2)).isoformat()\r\n    mask = (df.index >= begin_date) & (df.index<end_date)\r\n    #Mask out all values outside window\r\n    df.loc[(mask ), met] = max_val\r\n    df.loc[df[met] != max_val, met] = np.nan\r\n\r\n\r\ndf = df.drop('symbol', axis=1)\r\ndf = df.stack()\r\ndf.index.names = ['date','metric']\r\ndf.name = 'price'\r\ndf = df.reset_index()\r\n\r\nrule = alt.Chart(df).mark_bar(height = 2).encode(\r\n        x = 'min(date):T',\r\n        x2 = 'max(date):T',\r\n        y = alt.Y('price',),\r\n        color = 'metric', \r\n    ).transform_filter(datum.metric != 'price').interactive()\r\n\r\ntex = alt.Chart(df).mark_text(align = 'left', baseline = 'middle', dx = 10).encode(\r\n    x = 'max(date):T',\r\n    y = alt.Y('price', aggregate={'argmax':'date'}),\r\n    color = 'metric',\r\n    text = alt.Text('max(price)')\r\n).transform_filter(datum.metric != 'price')\r\n\r\n(rule+tex).interactive()\r\n```\r\nwhich results in:\r\n\r\n![gantt_chart_quanitative_yaxis](https://user-images.githubusercontent.com/11522898/146063256-12f3018b-3c0e-4402-84b7-3def4ead99ca.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2533/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2529", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2529/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2529/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2529/events", "html_url": "https://github.com/altair-viz/altair/issues/2529", "id": 1067092172, "node_id": "I_kwDOAoxtyc4_mojM", "number": 2529, "title": "Displaying Altair map in Streamlit fails unless loading TopoJSON from remote", "user": {"login": "fgenoese", "id": 6893619, "node_id": "MDQ6VXNlcjY4OTM2MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/6893619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fgenoese", "html_url": "https://github.com/fgenoese", "followers_url": "https://api.github.com/users/fgenoese/followers", "following_url": "https://api.github.com/users/fgenoese/following{/other_user}", "gists_url": "https://api.github.com/users/fgenoese/gists{/gist_id}", "starred_url": "https://api.github.com/users/fgenoese/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fgenoese/subscriptions", "organizations_url": "https://api.github.com/users/fgenoese/orgs", "repos_url": "https://api.github.com/users/fgenoese/repos", "events_url": "https://api.github.com/users/fgenoese/events{/privacy}", "received_events_url": "https://api.github.com/users/fgenoese/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-11-30T10:59:33Z", "updated_at": "2022-01-17T19:01:17Z", "closed_at": "2022-01-17T19:01:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "Cross-posting this streamlit issue (see https://github.com/streamlit/streamlit/issues/1002).\r\n\r\nSummary:\r\n1. Altair map is displayed if TopoJSON is loaded via `alt.topo_feature()`\r\n2. Altair map is not displayed if exactly the same TopoJSON is loaded locally via `alt.InlineData`\r\n3. Streamlit throws an error if exactly the same TopoJSON file is loaded locally via Geopandas\r\n\r\nDemo with code snippets:\r\nhttps://share.streamlit.io/fgenoese/st_bugreports/main/geopandas_map.py\r\n\r\nApproach (3) is failing, because pyarrow does not yet support the geometry numpy.dtype (see https://github.com/geopandas/geo-arrow-spec). But why is approach (2) failing?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2529/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2529/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2527", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2527/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2527/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2527/events", "html_url": "https://github.com/altair-viz/altair/issues/2527", "id": 1062805036, "node_id": "I_kwDOAoxtyc4_WR4s", "number": 2527, "title": "Altair map chart does not rendered in GitHub", "user": {"login": "vcuspinera", "id": 53915521, "node_id": "MDQ6VXNlcjUzOTE1NTIx", "avatar_url": "https://avatars.githubusercontent.com/u/53915521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcuspinera", "html_url": "https://github.com/vcuspinera", "followers_url": "https://api.github.com/users/vcuspinera/followers", "following_url": "https://api.github.com/users/vcuspinera/following{/other_user}", "gists_url": "https://api.github.com/users/vcuspinera/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcuspinera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcuspinera/subscriptions", "organizations_url": "https://api.github.com/users/vcuspinera/orgs", "repos_url": "https://api.github.com/users/vcuspinera/repos", "events_url": "https://api.github.com/users/vcuspinera/events{/privacy}", "received_events_url": "https://api.github.com/users/vcuspinera/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-24T19:03:37Z", "updated_at": "2021-11-24T20:12:20Z", "closed_at": "2021-11-24T20:11:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am having troubles with maps (`mark_geoshape` charts), while these plots render on my local jupyter notebook, when I upload them to GitHub, these plots doesn't render anymore.\r\n\r\nThis also happens with map-charts that I upload before and render well on GitHub, and now that I ran them again and up load it, these plots doesn't render anymore.\r\n\r\nTo show this, I made a jupyter notebook with examples from Altair's Example Gallery: [Choropleth Map](https://altair-viz.github.io/gallery/choropleth.html), [Locations of US Airports](https://altair-viz.github.io/gallery/airports_count.html), and [Repeated Choropleth Map](https://altair-viz.github.io/gallery/choropleth_repeat.html), that can be found in the following link:\r\nhttps://github.com/vcuspinera/Datasets/blob/main/errors/Altair_map_error_maps_in_github.ipynb\r\n\r\n[<img width=\"701\" alt=\"image\" src=\"https://user-images.githubusercontent.com/53915521/143298709-a54abe79-5d1e-4b29-bb45-264053253d95.png\">](https://github.com/vcuspinera/Datasets/blob/main/errors/Altair_map_error_maps_in_github.ipynb)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2527/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2525", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2525/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2525/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2525/events", "html_url": "https://github.com/altair-viz/altair/issues/2525", "id": 1061125536, "node_id": "I_kwDOAoxtyc4_P32g", "number": 2525, "title": "transform_fold fails when using as_ argument on v4.1", "user": {"login": "david-berthelot", "id": 1187052, "node_id": "MDQ6VXNlcjExODcwNTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1187052?v=4", "gravatar_id": "", "url": "https://api.github.com/users/david-berthelot", "html_url": "https://github.com/david-berthelot", "followers_url": "https://api.github.com/users/david-berthelot/followers", "following_url": "https://api.github.com/users/david-berthelot/following{/other_user}", "gists_url": "https://api.github.com/users/david-berthelot/gists{/gist_id}", "starred_url": "https://api.github.com/users/david-berthelot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/david-berthelot/subscriptions", "organizations_url": "https://api.github.com/users/david-berthelot/orgs", "repos_url": "https://api.github.com/users/david-berthelot/repos", "events_url": "https://api.github.com/users/david-berthelot/events{/privacy}", "received_events_url": "https://api.github.com/users/david-berthelot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-23T11:13:27Z", "updated_at": "2021-11-23T20:23:21Z", "closed_at": "2021-11-23T13:12:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "From the code examples: https://altair-viz.github.io/gallery/scatter_with_loess.html\r\n\r\n```python\r\nimport altair as alt\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\nnp.random.seed(1)\r\n\r\nsource = pd.DataFrame({\r\n    'x': np.arange(100),\r\n    'A': np.random.randn(100).cumsum(),\r\n    'B': np.random.randn(100).cumsum(),\r\n    'C': np.random.randn(100).cumsum(),\r\n})\r\n\r\nbase = alt.Chart(source).mark_circle(opacity=0.5).transform_fold(\r\n    fold=['A', 'B', 'C'],\r\n    as_=['category', 'y']\r\n).encode(\r\n    alt.X('x:Q'),\r\n    alt.Y('y:Q'),\r\n    alt.Color('category:N')\r\n)\r\n```\r\n\r\nFails with a long stack trace, the last lines being:\r\n```\r\n    return schema.get(\"$id\", \"\")\r\nAttributeError: 'list' object has no attribute 'get'\r\n---\r\n\r\nI'm running v4.1.0 on Linux and it works in the Vega-Lite editor.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2525/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2525/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2518", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2518/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2518/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2518/events", "html_url": "https://github.com/altair-viz/altair/issues/2518", "id": 1049791508, "node_id": "I_kwDOAoxtyc4-kowU", "number": 2518, "title": "Bug in `transform_density`", "user": {"login": "SergioMarreroMarrero", "id": 18600509, "node_id": "MDQ6VXNlcjE4NjAwNTA5", "avatar_url": "https://avatars.githubusercontent.com/u/18600509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SergioMarreroMarrero", "html_url": "https://github.com/SergioMarreroMarrero", "followers_url": "https://api.github.com/users/SergioMarreroMarrero/followers", "following_url": "https://api.github.com/users/SergioMarreroMarrero/following{/other_user}", "gists_url": "https://api.github.com/users/SergioMarreroMarrero/gists{/gist_id}", "starred_url": "https://api.github.com/users/SergioMarreroMarrero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SergioMarreroMarrero/subscriptions", "organizations_url": "https://api.github.com/users/SergioMarreroMarrero/orgs", "repos_url": "https://api.github.com/users/SergioMarreroMarrero/repos", "events_url": "https://api.github.com/users/SergioMarreroMarrero/events{/privacy}", "received_events_url": "https://api.github.com/users/SergioMarreroMarrero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-10T12:59:36Z", "updated_at": "2021-11-10T13:19:34Z", "closed_at": "2021-11-10T13:19:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using this template code for producing a `density plot` I get an unusual error. \r\n\r\n```\r\npip install vega_datasets altair\r\n```\r\n\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nalt.Chart(data.movies.url).transform_density(\r\n    'IMDB_Rating',\r\n    as_=['IMDB_Rating', 'density'],\r\n).mark_area().encode(\r\n    x=\"IMDB_Rating:Q\",\r\n    y='density:Q',\r\n)\r\n```\r\noutput:\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n/tmp/ipykernel_114833/675806787.py in <module>\r\n      2 from vega_datasets import data\r\n      3 \r\n----> 4 alt.Chart(data.movies.url).transform_density(\r\n      5     'IMDB_Rating',\r\n      6     as_=['IMDB_Rating', 'density'],\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/altair/vegalite/v4/api.py in transform_density(self, density, as_, bandwidth, counts, cumulative, extent, groupby, maxsteps, minsteps, steps)\r\n    942         \"\"\"\r\n    943         return self._add_transform(\r\n--> 944             core.DensityTransform(\r\n    945                 density=density,\r\n    946                 bandwidth=bandwidth,\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/altair/vegalite/v4/schema/core.py in __init__(self, density, bandwidth, counts, cumulative, extent, groupby, maxsteps, minsteps, steps, **kwds)\r\n  18098                  extent=Undefined, groupby=Undefined, maxsteps=Undefined, minsteps=Undefined,\r\n  18099                  steps=Undefined, **kwds):\r\n> 18100         super(DensityTransform, self).__init__(density=density, bandwidth=bandwidth, counts=counts,\r\n  18101                                                cumulative=cumulative, extent=extent, groupby=groupby,\r\n  18102                                                maxsteps=maxsteps, minsteps=minsteps, steps=steps, **kwds)\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/altair/vegalite/v4/schema/core.py in __init__(self, *args, **kwds)\r\n  17973 \r\n  17974     def __init__(self, *args, **kwds):\r\n> 17975         super(Transform, self).__init__(*args, **kwds)\r\n  17976 \r\n  17977 \r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/altair/utils/schemapi.py in __init__(self, *args, **kwds)\r\n    174 \r\n    175         if DEBUG_MODE and self._class_is_valid_at_instantiation:\r\n--> 176             self.to_dict(validate=True)\r\n    177 \r\n    178     def copy(self, deep=True, ignore=()):\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    335         if validate:\r\n    336             try:\r\n--> 337                 self.validate(result)\r\n    338             except jsonschema.ValidationError as err:\r\n    339                 raise SchemaValidationError(self, err)\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/altair/utils/schemapi.py in validate(cls, instance, schema)\r\n    440             schema = cls._schema\r\n    441         resolver = jsonschema.RefResolver.from_schema(cls._rootschema or cls._schema)\r\n--> 442         return jsonschema.validate(instance, schema, resolver=resolver)\r\n    443 \r\n    444     @classmethod\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/validators.py in validate(instance, schema, cls, *args, **kwargs)\r\n    963     cls.check_schema(schema)\r\n    964     validator = cls(schema, *args, **kwargs)\r\n--> 965     error = exceptions.best_match(validator.iter_errors(instance))\r\n    966     if error is not None:\r\n    967         raise error\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/exceptions.py in best_match(errors, key)\r\n    352     \"\"\"\r\n    353     errors = iter(errors)\r\n--> 354     best = next(errors, None)\r\n    355     if best is None:\r\n    356         return\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/validators.py in iter_errors(self, instance, _schema)\r\n    222 \r\n    223                     errors = validator(self, v, instance, _schema) or ()\r\n--> 224                     for error in errors:\r\n    225                         # set details if not already set by the called fn\r\n    226                         error._set(\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/_validators.py in ref(validator, ref, instance, schema)\r\n    296 \r\n    297         try:\r\n--> 298             yield from validator.descend(instance, resolved)\r\n    299         finally:\r\n    300             validator.resolver.pop_scope()\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/validators.py in descend(self, instance, schema, path, schema_path)\r\n    238 \r\n    239         def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 240             for error in self.evolve(schema=schema).iter_errors(instance):\r\n    241                 if path is not None:\r\n    242                     error.path.appendleft(path)\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/validators.py in iter_errors(self, instance, _schema)\r\n    222 \r\n    223                     errors = validator(self, v, instance, _schema) or ()\r\n--> 224                     for error in errors:\r\n    225                         # set details if not already set by the called fn\r\n    226                         error._set(\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/_validators.py in properties(validator, properties, instance, schema)\r\n    330     for property, subschema in properties.items():\r\n    331         if property in instance:\r\n--> 332             yield from validator.descend(\r\n    333                 instance[property],\r\n    334                 subschema,\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/validators.py in descend(self, instance, schema, path, schema_path)\r\n    238 \r\n    239         def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 240             for error in self.evolve(schema=schema).iter_errors(instance):\r\n    241                 if path is not None:\r\n    242                     error.path.appendleft(path)\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/validators.py in iter_errors(self, instance, _schema)\r\n    222 \r\n    223                     errors = validator(self, v, instance, _schema) or ()\r\n--> 224                     for error in errors:\r\n    225                         # set details if not already set by the called fn\r\n    226                         error._set(\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/_validators.py in items(validator, items, instance, schema)\r\n     74     else:\r\n     75         for index in range(prefix, total):\r\n---> 76             yield from validator.descend(\r\n     77                 instance=instance[index],\r\n     78                 schema=items,\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/validators.py in descend(self, instance, schema, path, schema_path)\r\n    238 \r\n    239         def descend(self, instance, schema, path=None, schema_path=None):\r\n--> 240             for error in self.evolve(schema=schema).iter_errors(instance):\r\n    241                 if path is not None:\r\n    242                     error.path.appendleft(path)\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/validators.py in iter_errors(self, instance, _schema)\r\n    212                 return\r\n    213 \r\n--> 214             scope = id_of(_schema)\r\n    215             if scope:\r\n    216                 self.resolver.push_scope(scope)\r\n\r\n~/Documents/repos/prueba/venv/lib/python3.8/site-packages/jsonschema/validators.py in _id_of(schema)\r\n     88     if schema is True or schema is False:\r\n     89         return \"\"\r\n---> 90     return schema.get(\"$id\", \"\")\r\n     91 \r\n     92 \r\n\r\nAttributeError: 'list' object has no attribute 'get'\r\n```\r\n\r\nSystem:\r\n- Ubuntu 20.04\r\n- python 3.8.10", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2518/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2518/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2507", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2507/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2507/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2507/events", "html_url": "https://github.com/altair-viz/altair/issues/2507", "id": 1032396269, "node_id": "I_kwDOAoxtyc49iR3t", "number": 2507, "title": "Huge settings button overlayed on chart with Jupyter lab 1.1.4", "user": {"login": "Roald87", "id": 20192767, "node_id": "MDQ6VXNlcjIwMTkyNzY3", "avatar_url": "https://avatars.githubusercontent.com/u/20192767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Roald87", "html_url": "https://github.com/Roald87", "followers_url": "https://api.github.com/users/Roald87/followers", "following_url": "https://api.github.com/users/Roald87/following{/other_user}", "gists_url": "https://api.github.com/users/Roald87/gists{/gist_id}", "starred_url": "https://api.github.com/users/Roald87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Roald87/subscriptions", "organizations_url": "https://api.github.com/users/Roald87/orgs", "repos_url": "https://api.github.com/users/Roald87/repos", "events_url": "https://api.github.com/users/Roald87/events{/privacy}", "received_events_url": "https://api.github.com/users/Roald87/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-21T11:48:15Z", "updated_at": "2021-10-21T13:09:55Z", "closed_at": "2021-10-21T11:48:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just upgraded from Altair 3.x to 4.1.0. After the upgrade all charts show this huge settings button which on top of the regular chart.\r\n\r\n![image](https://user-images.githubusercontent.com/20192767/138267987-79c4cf29-5b0b-47c5-aec1-4449620a79ea.png)\r\n\r\nWhen I hoover over it, the button becomes darker and none of the chart interactive element can be used.\r\n\r\n![image](https://user-images.githubusercontent.com/20192767/138268056-c3ece75c-74a5-4e08-8cd4-e92ad1a0c00e.png)\r\n\r\nThis is only an issue when I use Jupyter Lab. In Jupyter Notebooks it works as expected.\r\n\r\n## Example code\r\n\r\n```python\r\nimport altair as alt\r\n\r\n# load a simple dataset as a pandas DataFrame\r\nfrom vega_datasets import data\r\ncars = data.cars()\r\n\r\nalt.Chart(cars).mark_point().encode(\r\n    x='Horsepower',\r\n    y='Miles_per_Gallon',\r\n    color='Origin',\r\n).interactive()\r\n```` \r\n\r\n## Jupyter versions\r\n```\r\njupyter                   1.0.0                    py37_7\r\njupyter-contrib-core      0.3.3                    pypi_0    pypi\r\njupyter-contrib-nbextensions 0.5.1                    pypi_0    pypi\r\njupyter-highlight-selected-word 0.2.0                    pypi_0    pypi\r\njupyter-latex-envs        1.4.6                    pypi_0    pypi\r\njupyter-nbextensions-configurator 0.4.1                    pypi_0    pypi\r\njupyter_client            5.3.3                    py37_1\r\njupyter_console           6.0.0                    py37_0\r\njupyter_core              4.5.0                      py_0\r\njupyterlab                1.1.4              pyhf63ae98_0\r\njupyterlab_server         1.0.6                      py_0\r\n```\r\n\r\n## Solution\r\nAfter upgrading to Jupyter Lab to v3.17 the issue was solved. After updating with conda, it also updated a few other versions:\r\n\r\n``` \r\njupyter                   1.0.0                    py37_7\r\njupyter-contrib-core      0.3.3                    pypi_0    pypi\r\njupyter-contrib-nbextensions 0.5.1                    pypi_0    pypi\r\njupyter-highlight-selected-word 0.2.0                    pypi_0    pypi\r\njupyter-latex-envs        1.4.6                    pypi_0    pypi\r\njupyter-nbextensions-configurator 0.4.1                    pypi_0    pypi\r\njupyter_client            7.0.1              pyhd3eb1b0_0\r\njupyter_console           6.0.0                    py37_0\r\njupyter_core              4.8.1            py37haa95532_0\r\njupyter_server            1.4.1            py37haa95532_0\r\njupyterlab                3.1.7              pyhd3eb1b0_0\r\njupyterlab_launcher       0.13.1                     py_2\r\njupyterlab_server         2.8.2              pyhd3eb1b0_0\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2507/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2501", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2501/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2501/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2501/events", "html_url": "https://github.com/altair-viz/altair/issues/2501", "id": 1025073643, "node_id": "I_kwDOAoxtyc49GWHr", "number": 2501, "title": "alt.Chart.from_json slow after upgrading jsonschema from 3.x to 4.x", "user": {"login": "the21st", "id": 4610874, "node_id": "MDQ6VXNlcjQ2MTA4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4610874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the21st", "html_url": "https://github.com/the21st", "followers_url": "https://api.github.com/users/the21st/followers", "following_url": "https://api.github.com/users/the21st/following{/other_user}", "gists_url": "https://api.github.com/users/the21st/gists{/gist_id}", "starred_url": "https://api.github.com/users/the21st/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the21st/subscriptions", "organizations_url": "https://api.github.com/users/the21st/orgs", "repos_url": "https://api.github.com/users/the21st/repos", "events_url": "https://api.github.com/users/the21st/events{/privacy}", "received_events_url": "https://api.github.com/users/the21st/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-13T10:30:57Z", "updated_at": "2023-02-06T00:28:43Z", "closed_at": "2023-02-06T00:28:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tested all of the below with altair version 4.1.0.\r\n\r\nI recently upgraded my jupyter stack to the following versions:\r\nnotebook==6.4.4\r\nipython==7.28.0\r\nipykernel==6.4.1\r\n\r\nUpdate: The culprit downstream dependency is `jsonschema==4.1.0`\r\n\r\nSince then, `alt.Chart.from_json(spec)` takes 2.6 seconds on my machine. Code to reproduce:\r\n\r\n```python\r\nimport time\r\nimport altair as alt\r\n\r\nspec = \"\"\"\r\n{\r\n  \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.json\",\r\n  \"mark\": {\r\n    \"type\": \"bar\",\r\n    \"tooltip\": {\r\n      \"content\": \"data\"\r\n    }\r\n  },\r\n  \"height\": 220,\r\n  \"autosize\": {\r\n    \"type\": \"fit\"\r\n  },\r\n  \"data\": {\r\n    \"name\": \"placeholder\"\r\n  },\r\n  \"encoding\": {\r\n    \"x\": {\r\n      \"field\": \"bookID\",\r\n      \"type\": \"quantitative\",\r\n      \"sort\": null,\r\n      \"scale\": {\r\n        \"type\": \"linear\",\r\n        \"zero\": false\r\n      }\r\n    },\r\n    \"y\": {\r\n      \"field\": \"title\",\r\n      \"type\": \"nominal\",\r\n      \"sort\": null,\r\n      \"scale\": {\r\n        \"type\": \"linear\",\r\n        \"zero\": true\r\n      }\r\n    },\r\n    \"color\": {\r\n      \"field\": \"\",\r\n      \"type\": \"nominal\",\r\n      \"sort\": null,\r\n      \"scale\": {\r\n        \"type\": \"linear\",\r\n        \"zero\": false\r\n      }\r\n    }\r\n  }\r\n}\r\n\"\"\"\r\n\r\nstart = time.time()\r\nchart = alt.Chart.from_json(spec)\r\nend = time.time()\r\nprint(end - start)\r\n```\r\n\r\nRunning the same code on an older version `jsonschema==3.2.0` executes in 0.03 seconds.\r\n\r\nNote that I am not yet passing any data to altair, just a data-less vega-lite spec.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2501/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2498", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2498/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2498/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2498/events", "html_url": "https://github.com/altair-viz/altair/issues/2498", "id": 1022159861, "node_id": "I_kwDOAoxtyc487Ov1", "number": 2498, "title": "Mimetype renderer does not fall back on png representation in jupyter book", "user": {"login": "joelostblom", "id": 4560057, "node_id": "MDQ6VXNlcjQ1NjAwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4560057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joelostblom", "html_url": "https://github.com/joelostblom", "followers_url": "https://api.github.com/users/joelostblom/followers", "following_url": "https://api.github.com/users/joelostblom/following{/other_user}", "gists_url": "https://api.github.com/users/joelostblom/gists{/gist_id}", "starred_url": "https://api.github.com/users/joelostblom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joelostblom/subscriptions", "organizations_url": "https://api.github.com/users/joelostblom/orgs", "repos_url": "https://api.github.com/users/joelostblom/repos", "events_url": "https://api.github.com/users/joelostblom/events{/privacy}", "received_events_url": "https://api.github.com/users/joelostblom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-11T01:28:33Z", "updated_at": "2021-10-24T16:26:55Z", "closed_at": "2021-10-24T16:26:54Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When I used the `mimetype` renderer with jupyter book, I encountered an error message that \"the renderer has not been properly enabled...\" which was unexpected to me because I thought the `mimetype` renderer would always fall back to the PNG representation in cases when it cannot render the interactive figure.\r\n\r\nThis can be seen in the screenshot below, which also shows that the default renderer works fine in the first cell, as does the manually specified fallback via altair_saver in the last cell\r\n\r\n![image](https://user-images.githubusercontent.com/4560057/136720550-4cb80601-093d-4ff5-86a6-ce35f8f052f9.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2498/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2496", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2496/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2496/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2496/events", "html_url": "https://github.com/altair-viz/altair/issues/2496", "id": 1013413494, "node_id": "I_kwDOAoxtyc48Z3Z2", "number": 2496, "title": "New version of jsonschema crash transform_fold", "user": {"login": "rikardn", "id": 12795317, "node_id": "MDQ6VXNlcjEyNzk1MzE3", "avatar_url": "https://avatars.githubusercontent.com/u/12795317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rikardn", "html_url": "https://github.com/rikardn", "followers_url": "https://api.github.com/users/rikardn/followers", "following_url": "https://api.github.com/users/rikardn/following{/other_user}", "gists_url": "https://api.github.com/users/rikardn/gists{/gist_id}", "starred_url": "https://api.github.com/users/rikardn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rikardn/subscriptions", "organizations_url": "https://api.github.com/users/rikardn/orgs", "repos_url": "https://api.github.com/users/rikardn/repos", "events_url": "https://api.github.com/users/rikardn/events{/privacy}", "received_events_url": "https://api.github.com/users/rikardn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-10-01T14:24:31Z", "updated_at": "2021-10-27T08:53:17Z", "closed_at": "2021-10-17T13:59:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The snippet below works fine with jsonschema 3.20, but crash with jsonschema 4.0.1:\r\n\r\n```python\r\nimport pandas as pd\r\nfrom io import StringIO\r\n\r\ndf = pd.read_table(StringIO(\"\"\"\r\nTVCL      TVV\r\n0.005298  1.30730\r\n0.006048  1.38692\r\n0.005624  1.53224\r\n0.005771  1.40115\r\n0.005932  1.42119\r\n\"\"\"), sep='\\s+')\r\n\r\nimport altair as alt\r\n\r\nbase = (\r\n    alt.Chart(df)\r\n    .transform_fold(list(df.columns), as_=['key_x', 'value_x'])\r\n)\r\n```\r\n\r\nthis is the error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n\r\n  File \"<ipython-input-8-50da994c20c5>\", line 2, in <module>\r\n    alt.Chart(df)\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/altair/vegalite/v4/api.py\", line 1159, in transform_fold\r\n    return self._add_transform(core.FoldTransform(fold=fold, **{\"as\": as_}))\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/altair/vegalite/v4/schema/core.py\", line 18192, in __init__\r\n    super(FoldTransform, self).__init__(fold=fold, **kwds)\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/altair/vegalite/v4/schema/core.py\", line 17975, in __init__\r\n    super(Transform, self).__init__(*args, **kwds)\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/altair/utils/schemapi.py\", line 176, in __init__\r\n    self.to_dict(validate=True)\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/altair/utils/schemapi.py\", line 337, in to_dict\r\n    self.validate(result)\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/altair/utils/schemapi.py\", line 442, in validate\r\n    return jsonschema.validate(instance, schema, resolver=resolver)\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/validators.py\", line 965, in validate\r\n    error = exceptions.best_match(validator.iter_errors(instance))\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/exceptions.py\", line 354, in best_match\r\n    best = next(errors, None)\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/validators.py\", line 224, in iter_errors\r\n    for error in errors:\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/_validators.py\", line 295, in ref\r\n    yield from validator.descend(instance, resolved)\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/validators.py\", line 240, in descend\r\n    for error in self.evolve(schema=schema).iter_errors(instance):\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/validators.py\", line 224, in iter_errors\r\n    for error in errors:\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/_validators.py\", line 329, in properties\r\n    yield from validator.descend(\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/validators.py\", line 240, in descend\r\n    for error in self.evolve(schema=schema).iter_errors(instance):\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/validators.py\", line 224, in iter_errors\r\n    for error in errors:\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/_validators.py\", line 76, in items\r\n    yield from validator.descend(\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/validators.py\", line 240, in descend\r\n    for error in self.evolve(schema=schema).iter_errors(instance):\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/validators.py\", line 214, in iter_errors\r\n    scope = id_of(_schema)\r\n\r\n  File \"/home/devel/pharmpy/.tox/py39/lib/python3.9/site-packages/jsonschema/validators.py\", line 90, in _id_of\r\n    return schema.get(\"$id\", \"\")\r\n\r\nAttributeError: 'list' object has no attribute 'get'\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2496/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2496/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2495", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2495/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2495/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2495/events", "html_url": "https://github.com/altair-viz/altair/issues/2495", "id": 1006047952, "node_id": "I_kwDOAoxtyc479xLQ", "number": 2495, "title": "Cannot edit properties in layer / FacetChart ", "user": {"login": "srush", "id": 35882, "node_id": "MDQ6VXNlcjM1ODgy", "avatar_url": "https://avatars.githubusercontent.com/u/35882?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srush", "html_url": "https://github.com/srush", "followers_url": "https://api.github.com/users/srush/followers", "following_url": "https://api.github.com/users/srush/following{/other_user}", "gists_url": "https://api.github.com/users/srush/gists{/gist_id}", "starred_url": "https://api.github.com/users/srush/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srush/subscriptions", "organizations_url": "https://api.github.com/users/srush/orgs", "repos_url": "https://api.github.com/users/srush/repos", "events_url": "https://api.github.com/users/srush/events{/privacy}", "received_events_url": "https://api.github.com/users/srush/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-09-24T03:44:54Z", "updated_at": "2021-09-24T19:35:59Z", "closed_at": "2021-09-24T19:35:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Following the examples here: \r\n\r\nhttps://altair-viz.github.io/gallery/grouped_bar_chart_with_error_bars.html\r\n\r\nI try to change the size of the graph. \r\n\r\nThis gives the error\r\n\r\n`SchemaValidationError: Invalid specification altair.vegalite.v4.api.Chart, validating 'required' 'data' is a required property`\r\n\r\nMy code is exactly the same as the example, with one line to edit the properties. \r\n\r\n```\r\nfrom vega_datasets import data                                                                                                                \r\n                                                                                                                                              \r\nsource = data.barley()                                                                                                                        \r\n                                                                                                                                              \r\nbars = alt.Chart().mark_bar().encode(                                                                                                         \r\n    x='year:O',                                                                                                                               \r\n    y=alt.Y('mean(yield):Q', title='Mean Yield'),                                                                                             \r\n    color='year:N',                                                                                                                           \r\n)                                                                                                                                             \r\n                                                                                                                                              \r\nerror_bars = alt.Chart().mark_errorbar(extent='ci').encode(                                                                                   \r\n    x='year:O',                                                                                                                               \r\n    y='yield:Q'                                                                                                                               \r\n)                                                                                                                                             \r\n                                                                                                                                              \r\no = alt.layer(bars, error_bars, data=source).facet(                                                                                           \r\n    column='site:N'                                                                                                                           \r\n).properties(height=100)   # only new part \r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2494", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2494/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2494/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2494/events", "html_url": "https://github.com/altair-viz/altair/issues/2494", "id": 995929048, "node_id": "I_kwDOAoxtyc47XKvY", "number": 2494, "title": "escape special characters in names...", "user": {"login": "franzhaas", "id": 11477153, "node_id": "MDQ6VXNlcjExNDc3MTUz", "avatar_url": "https://avatars.githubusercontent.com/u/11477153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/franzhaas", "html_url": "https://github.com/franzhaas", "followers_url": "https://api.github.com/users/franzhaas/followers", "following_url": "https://api.github.com/users/franzhaas/following{/other_user}", "gists_url": "https://api.github.com/users/franzhaas/gists{/gist_id}", "starred_url": "https://api.github.com/users/franzhaas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/franzhaas/subscriptions", "organizations_url": "https://api.github.com/users/franzhaas/orgs", "repos_url": "https://api.github.com/users/franzhaas/repos", "events_url": "https://api.github.com/users/franzhaas/events{/privacy}", "received_events_url": "https://api.github.com/users/franzhaas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-14T11:55:08Z", "updated_at": "2021-11-10T18:05:15Z", "closed_at": "2021-11-10T18:05:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear all,\r\n\r\nusing altair 4.1.0.\r\n\r\nI tried to use altair to plot data annotating the data with the dimension. For example volts written as [V]. If i remove the closing ], I even get a javascript error.\r\n\r\nIs there a way to use strings with special characters as names with altair? Is thsi related to #1326? Altogh for me a single bacslash did not solve my issue, the javascript error goes away but there is no data plotted...\r\n\r\nthanks,\r\nFranz \r\n\r\n\r\n---8<---8<---8<---8<---8<---8<---8<---8<---\r\n```python\r\nimport altair as alt\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\nx = np.arange(100)\r\n\r\nxname = \"x [mV\"\r\n\r\nsource = pd.DataFrame({xname: x, 'f(x)': np.sin(x / 5)})\r\n\r\nalt.Chart(source).mark_line().encode(\r\n    x=alt.X(field=xname, type=\"quantitative\"),\r\n    y='f(x)'\r\n)\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2494/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2494/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2487", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2487/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2487/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2487/events", "html_url": "https://github.com/altair-viz/altair/issues/2487", "id": 973760759, "node_id": "MDU6SXNzdWU5NzM3NjA3NTk=", "number": 2487, "title": "mark_geoshape does not show anything", "user": {"login": "krlng", "id": 1107509, "node_id": "MDQ6VXNlcjExMDc1MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1107509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/krlng", "html_url": "https://github.com/krlng", "followers_url": "https://api.github.com/users/krlng/followers", "following_url": "https://api.github.com/users/krlng/following{/other_user}", "gists_url": "https://api.github.com/users/krlng/gists{/gist_id}", "starred_url": "https://api.github.com/users/krlng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/krlng/subscriptions", "organizations_url": "https://api.github.com/users/krlng/orgs", "repos_url": "https://api.github.com/users/krlng/repos", "events_url": "https://api.github.com/users/krlng/events{/privacy}", "received_events_url": "https://api.github.com/users/krlng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-08-18T14:51:58Z", "updated_at": "2021-08-18T15:27:19Z", "closed_at": "2021-08-18T15:18:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I exported a topology of germany using https://pitchinteractiveinc.github.io/tilegrams/.\r\n\r\nI try to visualize it using:\r\n\r\n`alt.Chart(alt.topo_feature(\"tiles.topo.json\", 'tiles')).mark_geoshape()` \r\n\r\nbut only a blank chart is showed.\r\n\r\nThe json itself looks pretty good to me and I have no idea where to search for the bug.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2487/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2487/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2473", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2473/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2473/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2473/events", "html_url": "https://github.com/altair-viz/altair/issues/2473", "id": 913152251, "node_id": "MDU6SXNzdWU5MTMxNTIyNTE=", "number": 2473, "title": "latest altairplot sphinx extension uses deprecated methods", "user": {"login": "bmorris3", "id": 3497584, "node_id": "MDQ6VXNlcjM0OTc1ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3497584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmorris3", "html_url": "https://github.com/bmorris3", "followers_url": "https://api.github.com/users/bmorris3/followers", "following_url": "https://api.github.com/users/bmorris3/following{/other_user}", "gists_url": "https://api.github.com/users/bmorris3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmorris3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmorris3/subscriptions", "organizations_url": "https://api.github.com/users/bmorris3/orgs", "repos_url": "https://api.github.com/users/bmorris3/repos", "events_url": "https://api.github.com/users/bmorris3/events{/privacy}", "received_events_url": "https://api.github.com/users/bmorris3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-06-07T06:25:06Z", "updated_at": "2022-03-23T08:20:37Z", "closed_at": "2022-03-23T00:16:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Thanks for contributing to this useful tool! I'm using the altairplot sphinx directive, which is causing an error on readthedocs ([log](https://readthedocs.org/projects/owls/builds/13944611/)) similar to sphinx-doc/sphinx#7747, \r\n\r\n```python\r\nRunning Sphinx v4.0.2\r\nloading translations [en]... done\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/owls/envs/latest/lib/python3.7/site-packages/sphinx/cmd/build.py\", line 279, in build_main\r\n    args.tags, args.verbosity, args.jobs, args.keep_going)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/owls/envs/latest/lib/python3.7/site-packages/sphinx/application.py\", line 243, in __init__\r\n    self.setup_extension(extension)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/owls/envs/latest/lib/python3.7/site-packages/sphinx/application.py\", line 400, in setup_extension\r\n    self.registry.load_extension(self, extname)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/owls/envs/latest/lib/python3.7/site-packages/sphinx/registry.py\", line 433, in load_extension\r\n    metadata = setup(app)\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/owls/envs/latest/lib/python3.7/site-packages/altair/sphinxext/altairplot.py\", line 327, in setup\r\n    app.add_stylesheet(\"altair-plot.css\")\r\nAttributeError: 'Sphinx' object has no attribute 'add_stylesheet'\r\n\r\nException occurred:\r\n  File \"/home/docs/checkouts/readthedocs.org/user_builds/owls/envs/latest/lib/python3.7/site-packages/altair/sphinxext/altairplot.py\", line 327, in setup\r\n    app.add_stylesheet(\"altair-plot.css\")\r\nAttributeError: 'Sphinx' object has no attribute 'add_stylesheet'\r\nThe full traceback has been saved in /tmp/sphinx-err-uu3r76yw.log, if you want to report the issue to the developers.\r\nPlease also report this if it was a user error, so that a better error message can be provided next time.\r\nA bug report can be filed in the tracker at <https://github.com/sphinx-doc/sphinx/issues>. Thanks!\r\n```\r\n\r\nThe fix may be as simple as replacing\r\n```\r\napp.add_stylesheet(\"altair-plot.css\")\r\n```\r\nwith \r\n```\r\napp.add_css_file(\"altair-plot.css\")\r\n```\r\n\r\nI see that this change was made in [this commit](https://github.com/altair-viz/altair/commit/c6d7f581f357fa5d93066d18fa5842f016fc683e) but there hasn't been a new release since. Is a new release coming soon? Thanks!", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2473/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2473/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2472", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2472/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2472/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2472/events", "html_url": "https://github.com/altair-viz/altair/issues/2472", "id": 912856561, "node_id": "MDU6SXNzdWU5MTI4NTY1NjE=", "number": 2472, "title": "mark_bar with brush not working", "user": {"login": "erlebach", "id": 324708, "node_id": "MDQ6VXNlcjMyNDcwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/324708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erlebach", "html_url": "https://github.com/erlebach", "followers_url": "https://api.github.com/users/erlebach/followers", "following_url": "https://api.github.com/users/erlebach/following{/other_user}", "gists_url": "https://api.github.com/users/erlebach/gists{/gist_id}", "starred_url": "https://api.github.com/users/erlebach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erlebach/subscriptions", "organizations_url": "https://api.github.com/users/erlebach/orgs", "repos_url": "https://api.github.com/users/erlebach/repos", "events_url": "https://api.github.com/users/erlebach/events{/privacy}", "received_events_url": "https://api.github.com/users/erlebach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-06-06T15:03:34Z", "updated_at": "2021-06-06T16:45:28Z", "closed_at": "2021-06-06T16:45:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "I created a simple bar chart based off of synthetic data, generated within the code below (generate_dataframe). The image has a top chart with the data and a lower chart that allows me to drag a selection along the horizontal axis. There appears to be an error: the leftmost bar is not affected by the motion of my selection in the lower plot. I use streamlit to display the plot. Here is an image of what is happening. I list the code below the image. Thanks for any advice.\r\n\r\nImage produced when running the code, enhanced to illustrate the issue described above:\r\n![image](https://user-images.githubusercontent.com/324708/120929305-8f922800-c6b6-11eb-9c40-c29f708dead7.jpeg)\r\n\r\nHere is my MWE using streamlit: \r\n\r\n```python\r\nimport streamlit as st\r\nimport pandas as pd\r\nimport altair as alt\r\nimport numpy.random as random\r\n\r\ndef generate_dataframe():\r\n    nrows = 400\r\n    name = [ 'n' + str(i) for i in range(300) ]\r\n    names = random.choice(name, nrows)\r\n\r\n    centrality = random.rand(nrows)\r\n    multiplier = random.choice([.3, 1., 300.], nrows)\r\n    centrality *= multiplier\r\n    df = pd.DataFrame({'x':names, 'y':centrality})\r\n    return df\r\n\r\ndf = generate_dataframe()\r\n#----------------------------------\r\n\r\nbrush = alt.selection(type=\"interval\", encodings=['x'])\r\naxis = alt.Axis(labels=False)\r\n\r\nbase = alt.Chart(df, title=\"Base view\").mark_bar().encode(\r\n    x=alt.X('x:N', axis=axis),\r\n    y='y:Q'\r\n).add_selection(\r\n    brush\r\n).properties(\r\n    width=850,\r\n    height=50\r\n)\r\n\r\nzoomed = alt.Chart(df).mark_bar().encode(\r\n    x=alt.X('x:N', scale=alt.Scale(domain=brush), axis=axis),\r\n    y='y:Q'\r\n).properties(\r\n    width=850,\r\n    height=400\r\n)\r\n\r\nchart = zoomed & base\r\nst.altair_chart(chart)\r\n```\r\n\r\n---\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2472/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2468", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2468/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2468/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2468/events", "html_url": "https://github.com/altair-viz/altair/issues/2468", "id": 899877253, "node_id": "MDU6SXNzdWU4OTk4NzcyNTM=", "number": 2468, "title": "Binned bar charts are weirdly large - resetting height and width?", "user": {"login": "hannahburkhardt", "id": 4624654, "node_id": "MDQ6VXNlcjQ2MjQ2NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4624654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hannahburkhardt", "html_url": "https://github.com/hannahburkhardt", "followers_url": "https://api.github.com/users/hannahburkhardt/followers", "following_url": "https://api.github.com/users/hannahburkhardt/following{/other_user}", "gists_url": "https://api.github.com/users/hannahburkhardt/gists{/gist_id}", "starred_url": "https://api.github.com/users/hannahburkhardt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hannahburkhardt/subscriptions", "organizations_url": "https://api.github.com/users/hannahburkhardt/orgs", "repos_url": "https://api.github.com/users/hannahburkhardt/repos", "events_url": "https://api.github.com/users/hannahburkhardt/events{/privacy}", "received_events_url": "https://api.github.com/users/hannahburkhardt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-24T17:56:22Z", "updated_at": "2021-05-25T17:24:09Z", "closed_at": "2021-05-25T17:24:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I recently started getting weirly large charts when binning data. Bin example from the documentation:\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nmovies = data.movies.url\r\n\r\nalt.Chart(movies).mark_bar().encode(\r\n    alt.X(\"IMDB Rating:Q\", bin=True),\r\n    y='count()',\r\n)\r\n```\r\n![image](https://user-images.githubusercontent.com/4624654/119387723-31108700-bc7e-11eb-8a0e-d4990944ac9c.png)\r\n\r\n\r\nWhen opening this example in the Vega Editor I see that the height and width are specified:\r\n```json\r\n{\r\n  \"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}},\r\n  \"data\": {\"url\": \"https://vega.github.io/vega-datasets/data/movies.json\"},\r\n  \"mark\": \"bar\",\r\n  \"encoding\": {\r\n    \"x\": {\"type\": \"quantitative\", \"bin\": true, \"field\": \"IMDB Rating\"},\r\n    \"y\": {\"type\": \"quantitative\", \"aggregate\": \"count\"}\r\n  },\r\n  \"$schema\": \"https://vega.github.io/schema/vega-lite/v5.1.0.json\"\r\n}\r\n```\r\nHow can I make altair use calculated heights and widths, so I get the chart that I get in the Vega Editor if I remove the height and width specifications? Like this:\r\n![image](https://user-images.githubusercontent.com/4624654/119387382-b9425c80-bc7d-11eb-8222-7f4f9d7879b7.png)\r\nI've tried setting height and width to None or 0.\r\n\r\npython package versions: altair 4.1.0, vega 3.4.0", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2468/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2468/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2467", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2467/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2467/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2467/events", "html_url": "https://github.com/altair-viz/altair/issues/2467", "id": 893133592, "node_id": "MDU6SXNzdWU4OTMxMzM1OTI=", "number": 2467, "title": "Sphinx 4 cannot use altair.sphinxext", "user": {"login": "rikardn", "id": 12795317, "node_id": "MDQ6VXNlcjEyNzk1MzE3", "avatar_url": "https://avatars.githubusercontent.com/u/12795317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rikardn", "html_url": "https://github.com/rikardn", "followers_url": "https://api.github.com/users/rikardn/followers", "following_url": "https://api.github.com/users/rikardn/following{/other_user}", "gists_url": "https://api.github.com/users/rikardn/gists{/gist_id}", "starred_url": "https://api.github.com/users/rikardn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rikardn/subscriptions", "organizations_url": "https://api.github.com/users/rikardn/orgs", "repos_url": "https://api.github.com/users/rikardn/repos", "events_url": "https://api.github.com/users/rikardn/events{/privacy}", "received_events_url": "https://api.github.com/users/rikardn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-17T09:25:43Z", "updated_at": "2022-03-22T23:52:00Z", "closed_at": "2022-03-22T23:52:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Sphinx 4 was released a week ago and some functions that the `altair.sphinxext` use have now been removed. The fix #2305 has already been merged, but a new release of altair would be needed to be able to use `altair.sphinxext` with the new Sphinx version.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2467/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2467/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2458", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2458/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2458/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2458/events", "html_url": "https://github.com/altair-viz/altair/issues/2458", "id": 863229236, "node_id": "MDU6SXNzdWU4NjMyMjkyMzY=", "number": 2458, "title": "Choropleth Map not working with Two Different files for geomap plotting (.geojson for map and .csv for data)", "user": {"login": "rahulsingh7", "id": 49148178, "node_id": "MDQ6VXNlcjQ5MTQ4MTc4", "avatar_url": "https://avatars.githubusercontent.com/u/49148178?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rahulsingh7", "html_url": "https://github.com/rahulsingh7", "followers_url": "https://api.github.com/users/rahulsingh7/followers", "following_url": "https://api.github.com/users/rahulsingh7/following{/other_user}", "gists_url": "https://api.github.com/users/rahulsingh7/gists{/gist_id}", "starred_url": "https://api.github.com/users/rahulsingh7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rahulsingh7/subscriptions", "organizations_url": "https://api.github.com/users/rahulsingh7/orgs", "repos_url": "https://api.github.com/users/rahulsingh7/repos", "events_url": "https://api.github.com/users/rahulsingh7/events{/privacy}", "received_events_url": "https://api.github.com/users/rahulsingh7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-04-20T20:48:50Z", "updated_at": "2021-04-21T10:30:35Z", "closed_at": "2021-04-21T10:30:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Transform_lookup() not working when using Two separate files for map and data.\r\n\r\n.........Code Snippet..........\r\n\r\n```\r\ndata_uk =alt.UrlData(\"https://raw.githubusercontent.com/keto08/covid-19/master/COVID19-UK/morbidity_sensitivity.csv\")\r\ndata_geojson = alt.UrlData(\"https://raw.githubusercontent.com/keto08/covid-19/master/COVID19-UK/uk_corrected.geojson\")\r\n\r\ngeomap = alt.Chart(data_geojson,title = 'Effect of Population Density on Morbidity')\\\r\n.mark_geoshape(stroke='black',strokeWidth=0.125)\\\r\n.encode(color= 'dPOP:Q').transform_lookup(\r\n    lookup='code',\r\n    from_=alt.LookupData(data_uk, 'code', ['dPOP'])\r\n).project('mercator')\\\r\n.properties( \r\n    width=800,\r\n    height=500)\r\n\r\ngeomap\r\n```\r\nThis Gives a Blank Map in Altair.\r\n![visualization (32)](https://user-images.githubusercontent.com/49148178/115462042-c8ca2200-a247-11eb-96c0-1eda454bbc89.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2458/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2458/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2455", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2455/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2455/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2455/events", "html_url": "https://github.com/altair-viz/altair/issues/2455", "id": 855029112, "node_id": "MDU6SXNzdWU4NTUwMjkxMTI=", "number": 2455, "title": "Not able to see the full regression line when using alt.UrlData() as the data Source in altair", "user": {"login": "rahulsingh7", "id": 49148178, "node_id": "MDQ6VXNlcjQ5MTQ4MTc4", "avatar_url": "https://avatars.githubusercontent.com/u/49148178?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rahulsingh7", "html_url": "https://github.com/rahulsingh7", "followers_url": "https://api.github.com/users/rahulsingh7/followers", "following_url": "https://api.github.com/users/rahulsingh7/following{/other_user}", "gists_url": "https://api.github.com/users/rahulsingh7/gists{/gist_id}", "starred_url": "https://api.github.com/users/rahulsingh7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rahulsingh7/subscriptions", "organizations_url": "https://api.github.com/users/rahulsingh7/orgs", "repos_url": "https://api.github.com/users/rahulsingh7/repos", "events_url": "https://api.github.com/users/rahulsingh7/events{/privacy}", "received_events_url": "https://api.github.com/users/rahulsingh7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 262356187, "node_id": "MDU6TGFiZWwyNjIzNTYxODc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-10T09:50:52Z", "updated_at": "2021-04-20T18:36:38Z", "closed_at": "2021-04-11T01:12:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Type here...\r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [x] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [x] Search for duplicate issues.\r\n- [x] Use the latest version of Altair.\r\n- [x] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2455/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2450", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2450/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2450/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2450/events", "html_url": "https://github.com/altair-viz/altair/issues/2450", "id": 852111093, "node_id": "MDU6SXNzdWU4NTIxMTEwOTM=", "number": 2450, "title": "Color / legend overrides order of data", "user": {"login": "jasonhof", "id": 5325477, "node_id": "MDQ6VXNlcjUzMjU0Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/5325477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasonhof", "html_url": "https://github.com/jasonhof", "followers_url": "https://api.github.com/users/jasonhof/followers", "following_url": "https://api.github.com/users/jasonhof/following{/other_user}", "gists_url": "https://api.github.com/users/jasonhof/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasonhof/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasonhof/subscriptions", "organizations_url": "https://api.github.com/users/jasonhof/orgs", "repos_url": "https://api.github.com/users/jasonhof/repos", "events_url": "https://api.github.com/users/jasonhof/events{/privacy}", "received_events_url": "https://api.github.com/users/jasonhof/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-04-07T07:38:29Z", "updated_at": "2023-02-06T01:16:42Z", "closed_at": "2023-02-06T01:16:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Mick encouraged me to file this bug, as I hit it when developing [Assignment 1 for Data Visualization class](https://courses.cs.washington.edu/courses/cse512/21sp/a1.html) using [this dataset](https://observablehq.com/@uwdata/hours-of-sunshine).  He says that it seems like the color scale overrides the order of the data.\r\n\r\nFirst of all, I created a function to transform and add data for use in the visualization:\r\n``` python\r\ndef get_cum_val(df, cityname, mon_num, num_mons = 3):\r\n  agg_sum = 0\r\n  for i in range(num_mons):\r\n    ind = i+ mon_num\r\n    if ind > 11:\r\n      ind = ind - 11\r\n  agg_sum = agg_sum + df.loc[(df['city']==cityname) & (df['monthnum']==(ind))]['sunshine'].values[0]\r\n  return agg_sum\r\n\r\ndef get_col_val(df,agg3mo):\r\n  col = 'gray'\r\n  if agg3mo > 630:\r\n    col = 'plant'\r\n  elif agg3mo > 550:\r\n    col = 'maybe plant'\r\n  elif agg3mo > 400:\r\n    col = 'don\\'t plant'\r\n  else:\r\n    col = 'not a chance'\r\n  return col\r\n\r\ndef agg_mo(df, cityname, num_mons=3):\r\n  df_3mo = df\r\n  df_3mo['sum3mo'] = 0\r\n  num_rows = df_3mo.shape[0]\r\n  print(df_3mo.iloc[1])\r\n  print(df_3mo.shape)\r\n  df_3mo['sum3mo'] = df_3mo.apply(lambda row : get_cum_val(df_3mo,cityname,row['monthnum'],num_mons),axis=1)\r\n  df_3mo['plant?'] = df_3mo.apply(lambda row : get_col_val(df_3mo,row['sum3mo']),axis=1)\r\n  return df_3mo\r\n```\r\n\r\nAnd now, here are two versions of the same code, which don't work well together:\r\n\r\nVERSION 1: Working in chronological order with alt.condition for coloring (no legend):\r\n``` python\r\ndef create_sun_chart_bar_f1(df, cityname):\r\n df_3mo = df.copy()\r\n df_3mo = agg_mo(df_3mo, cityname, 3)\r\n print(df)\r\n print(df_3mo)\r\n print(df_3mo.loc[df_3mo['city']=='Seattle'])\r\n print(df_3mo.loc[df_3mo['city']=='MIami'])\r\n yran = [0,1000]\r\n mons = [11,0,1]\r\n sun_chart_city_3mo = alt.Chart(df_3mo).mark_bar(\r\n ).transform_filter(\r\n (datum.city == cityname) \r\n ).encode(\r\n alt.X('month', sort=alt.EncodingSortField(field='monthnum',order='ascending')),\r\n alt.Y('sum3mo:Q', title=('Sun Hours'),scale=Scale(domain=yran)),\r\n # color = (alt.Color('plant?',\r\n # scale=alt.Scale(domain=['plant', 'maybe plant','don\\'t plant','not a chance'], range=['green','yellow', 'pink','brown']),\r\n # legend=alt.Legend(orient='right'),\r\n # )),\r\n color = alt.condition(\r\n  alt.datum.sum3mo > 600,\r\n  alt.value('green'), alt.value('brown')),\r\n ).properties(\r\n  width=800,\r\n  height=300\r\n )\r\n sun_chart_city_pts = alt.Chart(df_3mo, title=cityname).mark_line(color = 'orange').encode(\r\n  alt.X('month', sort=alt.EncodingSortField(field='monthnum',order='ascending')),\r\n  alt.Y('sunshine', title=('Sun Hours')),\r\n ).transform_filter(\r\n  (datum.city == cityname)\r\n )\r\n sun_chart_city = alt.layer(sun_chart_city_3mo, sun_chart_city_pts)\r\n return sun_chart_city.copy()\r\n\r\nsun_chart_sea = create_sun_chart_bar_f1(sun_df,'Seattle')\r\nsun_chart_chi = create_sun_chart_bar_f1(sun_df,'San Francisco')\r\nsun_chart_mia = create_sun_chart_bar_f1(sun_df,'Miami')\r\n\r\nalt.vconcat(sun_chart_sea,sun_chart_chi,sun_chart_mia,title=titleQ)\r\n```\r\n\r\nVERSION 2: Not working in chronological order after un-commenting alt.Scale for coloring (legend appears):\r\n``` python\r\ndef create_sun_chart_bar_f1(df, cityname):\r\n df_3mo = df.copy()\r\n df_3mo = agg_mo(df_3mo, cityname, 3)\r\n yran = [0,1000]\r\n mons = [11,0,1]\r\n sun_chart_city_3mo = alt.Chart(df_3mo).mark_bar(\r\n ).transform_filter(\r\n  (datum.city == cityname) \r\n ).encode(\r\n  alt.X('month', sort=alt.EncodingSortField(field='monthnum',order='ascending')),\r\n  alt.Y('sum3mo:Q', title=('Sun Hours'),scale=Scale(domain=yran)),\r\n  color = (alt.Color('plant?',\r\n  scale=alt.Scale(domain=['plant', 'maybe plant','don\\'t plant','not a chance'], range=['green','yellow', 'pink','brown']),\r\n  legend=alt.Legend(orient='right'),\r\n )),\r\n # color = alt.condition(\r\n # alt.datum.sum3mo > 600,\r\n # alt.value('green'), alt.value('brown')),\r\n ).properties(\r\n  width=800,\r\n  height=300\r\n )\r\n sun_chart_city_pts = alt.Chart(df_3mo, title=cityname).mark_line(color = 'orange').encode(\r\n  alt.X('month', sort=alt.EncodingSortField(field='monthnum',order='ascending')),\r\n  alt.Y('sunshine', title=('Sun Hours')),\r\n ).transform_filter(\r\n  (datum.city == cityname)\r\n )\r\n sun_chart_city = alt.layer(sun_chart_city_3mo, sun_chart_city_pts)\r\n return sun_chart_city.copy()\r\n\r\nsun_chart_sea = create_sun_chart_bar_f1(sun_df,'Seattle')\r\nsun_chart_chi = create_sun_chart_bar_f1(sun_df,'San Francisco')\r\nsun_chart_mia = create_sun_chart_bar_f1(sun_df,'Miami')\r\n\r\nalt.vconcat(sun_chart_sea,sun_chart_chi,sun_chart_mia,title=titleQ)\r\n```\r\n\r\nI can also share images of the resultant charts if needed.  I fixed it by using:\r\n\r\n``` python\r\nmonths = ['Jan', 'Feb', ..., 'Dec']\r\nalt.X('month', scale=alt.Scale(domain=months))\r\n```\r\nBut the other behavior seems unintuitive, so Mick told me I should file a bug.  Thanks for taking a look!\r\n\r\n---\r\n\r\nPlease follow these steps to make it more efficient to solve your issue:\r\n\r\n- [ ] Since Altair is a Python wrapper around the Vega-Lite visualization grammar, [most bugs should be reported directly to Vega-Lite](https://github.com/vega/vega-lite/issues). You can click the Action Button of your Altair chart and \"Open in Vega Editor\" to create a reproducible Vega-Lite example and see if you get the same error in the Vega Editor.\r\n- [ ] Search for duplicate issues.\r\n- [ ] Use the latest version of Altair.\r\n- [ ] Describe how to reproduce the bug and include the full code and data to reproduce it, ideally using a sample data set from `vega_datasets`.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2450/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2448", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2448/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2448/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2448/events", "html_url": "https://github.com/altair-viz/altair/issues/2448", "id": 850540464, "node_id": "MDU6SXNzdWU4NTA1NDA0NjQ=", "number": 2448, "title": "configure_legend being seemingly ignored", "user": {"login": "BenAbyss", "id": 27304627, "node_id": "MDQ6VXNlcjI3MzA0NjI3", "avatar_url": "https://avatars.githubusercontent.com/u/27304627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BenAbyss", "html_url": "https://github.com/BenAbyss", "followers_url": "https://api.github.com/users/BenAbyss/followers", "following_url": "https://api.github.com/users/BenAbyss/following{/other_user}", "gists_url": "https://api.github.com/users/BenAbyss/gists{/gist_id}", "starred_url": "https://api.github.com/users/BenAbyss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BenAbyss/subscriptions", "organizations_url": "https://api.github.com/users/BenAbyss/orgs", "repos_url": "https://api.github.com/users/BenAbyss/repos", "events_url": "https://api.github.com/users/BenAbyss/events{/privacy}", "received_events_url": "https://api.github.com/users/BenAbyss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-04-05T17:50:58Z", "updated_at": "2021-04-05T18:15:29Z", "closed_at": "2021-04-05T18:15:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've been trying to modify my graph such that the color guide is on the left hand side of the graph. However, the configure_legend function seems to be ignored regardless of where used. I have three graphs being used:\r\n```\r\nchart = alt.Chart(self.data).mark_bar(size=20, angle=20).encode(\r\n            x=\"Tag\",\r\n            y=\"Weighting\",\r\n            color=\"Tag:N\"\r\n        ).properties(\r\n            title=\"Character Tags\",\r\n            width=200,\r\n            height=200\r\n        ).transform_filter(self.selector)\r\n```\r\n\r\n```\r\ndef slope_graph(self):\r\n        chart = alt.Chart(self.data).mark_line().encode(\r\n            x=\"Tag\",\r\n            y=\"Weighting\",\r\n            color=\"Character:N\"\r\n        ).properties(\r\n            title=\"Characters Compared\",\r\n            width=200,\r\n            height=200\r\n        )\r\n        return chart\r\n```\r\n\r\n```\r\ndef select_radar(self):\r\n            chart = alt.Chart(self.data).mark_bar(size=20).encode(\r\n            x=\"Weighting\",\r\n            y=alt.Y(\"Character:N\", sort=\"-x\"),\r\n            color=alt.condition(self.selector, alt.value(\"Gold\"), \"Tag:N\")\r\n        ).add_selection(self.selector)\r\n        return chart\r\n```\r\n\r\nAnd was then attempting to combine and change the position of the legend for two of them using:\r\n```\r\nbar_charts = alt.vconcat(chart, self.select_radar())\r\nbar_charts.configure_legend(\r\n    orient='left',\r\n    strokeColor='gray'\r\n)\r\nresult = alt.hconcat(bar_charts, self.slope_graph()).resolve_scale(color='independent')\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2448/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2444", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2444/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2444/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2444/events", "html_url": "https://github.com/altair-viz/altair/issues/2444", "id": 849890590, "node_id": "MDU6SXNzdWU4NDk4OTA1OTA=", "number": 2444, "title": "Setting custom domain in time axis", "user": {"login": "guibor", "id": 4966289, "node_id": "MDQ6VXNlcjQ5NjYyODk=", "avatar_url": "https://avatars.githubusercontent.com/u/4966289?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guibor", "html_url": "https://github.com/guibor", "followers_url": "https://api.github.com/users/guibor/followers", "following_url": "https://api.github.com/users/guibor/following{/other_user}", "gists_url": "https://api.github.com/users/guibor/gists{/gist_id}", "starred_url": "https://api.github.com/users/guibor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guibor/subscriptions", "organizations_url": "https://api.github.com/users/guibor/orgs", "repos_url": "https://api.github.com/users/guibor/repos", "events_url": "https://api.github.com/users/guibor/events{/privacy}", "received_events_url": "https://api.github.com/users/guibor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-04-04T14:49:37Z", "updated_at": "2021-04-17T19:09:20Z", "closed_at": "2021-04-17T19:09:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried the approach suggested in https://github.com/altair-viz/altair/issues/2296, but it doesn't seem to work for me:\r\n\r\n```\r\n>> alt.DateTime('2016-12-15')\r\n\r\nSchemaValidationError: Invalid specification\r\n\r\n        altair.vegalite.v4.schema.core.DateTime->date, validating 'type'\r\n\r\n        '2016-12-15' is not of type 'number'\r\n```\r\n\r\nand for the other options here using `domain=['2019-01-01', '2020-01-01']` for example, and get the error:\r\n\r\n```\r\n     altair.vegalite.v4.schema.channels.X->0->domain, validating 'type'\r\n\r\n        ['2019-01-01', '2020-01-01'] is not of type 'boolean'\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2444/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2444/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2443", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2443/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2443/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2443/events", "html_url": "https://github.com/altair-viz/altair/issues/2443", "id": 848476013, "node_id": "MDU6SXNzdWU4NDg0NzYwMTM=", "number": 2443, "title": "Domains of axis do not change with transform_filter's selection if type='log'", "user": {"login": "Make42", "id": 4905185, "node_id": "MDQ6VXNlcjQ5MDUxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/4905185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Make42", "html_url": "https://github.com/Make42", "followers_url": "https://api.github.com/users/Make42/followers", "following_url": "https://api.github.com/users/Make42/following{/other_user}", "gists_url": "https://api.github.com/users/Make42/gists{/gist_id}", "starred_url": "https://api.github.com/users/Make42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Make42/subscriptions", "organizations_url": "https://api.github.com/users/Make42/orgs", "repos_url": "https://api.github.com/users/Make42/repos", "events_url": "https://api.github.com/users/Make42/events{/privacy}", "received_events_url": "https://api.github.com/users/Make42/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-04-01T13:36:09Z", "updated_at": "2021-04-01T18:09:10Z", "closed_at": "2021-04-01T18:09:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using one of the examples of https://altair-viz.github.io/user_guide/interactions.html, namely\r\n\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\ncars = data.cars.url\r\ninput_dropdown = alt.binding_select(options=['Europe','Japan','USA'])\r\nselection = alt.selection_single(fields=['Origin'], bind=input_dropdown, name='Country of ')\r\ncolor = alt.condition(selection,\r\n                    alt.Color('Origin:N', legend=None),\r\n                    alt.value('lightgray'))\r\nchart = alt.Chart(cars).mark_point().encode(\r\n    x='Horsepower:Q',\r\n    y='Miles_per_Gallon:Q',\r\n    color='Origin:N',\r\n    tooltip='Name:N'\r\n).add_selection(\r\n    selection\r\n).transform_filter(\r\n    selection\r\n)\r\nchart.show()\r\n```\r\n\r\nwe get a nice filtering where the domains of the axis change if the selection of the country is changed. However, if we change the type from 'linear' to 'log', then the domain stays the same:\r\n\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\ncars = data.cars.url\r\ninput_dropdown = alt.binding_select(options=['Europe','Japan','USA'])\r\nselection = alt.selection_single(fields=['Origin'], bind=input_dropdown, name='Country of ')\r\ncolor = alt.condition(selection,\r\n                    alt.Color('Origin:N', legend=None),\r\n                    alt.value('lightgray'))\r\nchart = alt.Chart(cars).mark_point().encode(\r\n    x=alt.X('Horsepower:Q', scale=alt.Scale(type='log')),\r\n    y='Miles_per_Gallon:Q',\r\n    color='Origin:N',\r\n    tooltip='Name:N'\r\n).add_selection(\r\n    selection\r\n).transform_filter(\r\n    selection\r\n)\r\nchart.show()\r\n```\r\n\r\nI suspect this is a bug.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2443/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2443/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2438", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2438/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2438/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2438/events", "html_url": "https://github.com/altair-viz/altair/issues/2438", "id": 843868540, "node_id": "MDU6SXNzdWU4NDM4Njg1NDA=", "number": 2438, "title": "Error in documentation: selection targets fields and encodings", "user": {"login": "Make42", "id": 4905185, "node_id": "MDQ6VXNlcjQ5MDUxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/4905185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Make42", "html_url": "https://github.com/Make42", "followers_url": "https://api.github.com/users/Make42/followers", "following_url": "https://api.github.com/users/Make42/following{/other_user}", "gists_url": "https://api.github.com/users/Make42/gists{/gist_id}", "starred_url": "https://api.github.com/users/Make42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Make42/subscriptions", "organizations_url": "https://api.github.com/users/Make42/orgs", "repos_url": "https://api.github.com/users/Make42/repos", "events_url": "https://api.github.com/users/Make42/events{/privacy}", "received_events_url": "https://api.github.com/users/Make42/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-29T22:28:59Z", "updated_at": "2022-03-23T01:11:35Z", "closed_at": "2022-03-23T01:11:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "The tooltips in the images of https://altair-viz.github.io/user_guide/interactions.html#selection-targets-fields-and-encodings seem not to be working.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2438/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2438/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2437", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2437/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2437/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2437/events", "html_url": "https://github.com/altair-viz/altair/issues/2437", "id": 843841359, "node_id": "MDU6SXNzdWU4NDM4NDEzNTk=", "number": 2437, "title": "Error in documentation: Composing Multiple Selections", "user": {"login": "Make42", "id": 4905185, "node_id": "MDQ6VXNlcjQ5MDUxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/4905185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Make42", "html_url": "https://github.com/Make42", "followers_url": "https://api.github.com/users/Make42/followers", "following_url": "https://api.github.com/users/Make42/following{/other_user}", "gists_url": "https://api.github.com/users/Make42/gists{/gist_id}", "starred_url": "https://api.github.com/users/Make42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Make42/subscriptions", "organizations_url": "https://api.github.com/users/Make42/orgs", "repos_url": "https://api.github.com/users/Make42/repos", "events_url": "https://api.github.com/users/Make42/events{/privacy}", "received_events_url": "https://api.github.com/users/Make42/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-29T21:48:12Z", "updated_at": "2021-03-29T21:56:13Z", "closed_at": "2021-03-29T21:56:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am sure the graphic in https://altair-viz.github.io/user_guide/interactions.html#composing-multiple-selections should be interactive, but it is not.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2437/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2437/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2436", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2436/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2436/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2436/events", "html_url": "https://github.com/altair-viz/altair/issues/2436", "id": 843659693, "node_id": "MDU6SXNzdWU4NDM2NTk2OTM=", "number": 2436, "title": "4.0.1 to 4.1.0 change broke old code", "user": {"login": "johngillece", "id": 6164509, "node_id": "MDQ6VXNlcjYxNjQ1MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/6164509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johngillece", "html_url": "https://github.com/johngillece", "followers_url": "https://api.github.com/users/johngillece/followers", "following_url": "https://api.github.com/users/johngillece/following{/other_user}", "gists_url": "https://api.github.com/users/johngillece/gists{/gist_id}", "starred_url": "https://api.github.com/users/johngillece/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johngillece/subscriptions", "organizations_url": "https://api.github.com/users/johngillece/orgs", "repos_url": "https://api.github.com/users/johngillece/repos", "events_url": "https://api.github.com/users/johngillece/events{/privacy}", "received_events_url": "https://api.github.com/users/johngillece/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-03-29T18:20:58Z", "updated_at": "2021-04-22T21:03:47Z", "closed_at": "2021-04-22T20:22:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "I posted this a long while ago to the altair help site, but never received a response (link below). I'm also pasting the entirety of the original post. Can you let me know what might be causing the issue when I change versions? Was there a change to how one can achieve the same end?\r\n\r\n[https://groups.google.com/g/altair-viz/c/nzSWIK9bkHI](Link to original post on google help)\r\n\r\nHi Jake or To Whom it May Concern,\r\n\r\nI was installing altair on a new machine and went with the newest version, 4.1.0. I ported some of my old altair viz code to the new machine and got an error that I did not get with 4.0.1 (which was installed on my other machine). I thought it might be some oddity with conda packages or a mac vs windows thing. To test it, I went to my old machine and updated altair to 4.1.0. I received the same error that I obtained on the other machine running 4.1.0. I reverted back to 4.0.1 and it worked fine again. I am pasting the crux of the code and the error I obtained after upgrading. If you need more information, please let me know.\r\n\r\nIf it's expected, can you provide some insight as to what changed and how to resolve?\r\n```python\r\nselection = alt.selection_multi(fields=['SpeciesFinalLevel'], bind='legend', on='click', clear='dblclick')\r\ncolor = alt.condition(selection,\r\n                      alt.Color('SpeciesFinalLevel:N',\r\n                      scale=alt.Scale(scheme='tableau20'),\r\n                      legend=alt.Legend(labelFontStyle='italic', columns=2, title=None, \\\r\n                                        symbolLimit=40, symbolSize=200, symbolType='circle')),\r\n                      alt.value('lightgray')\r\n                      )\r\n\r\nchart1 = alt.Chart(top20).mark_bar().encode(\r\n    alt.X('Day', sort=alt.EncodingSortField(field=\"Collection\", order='ascending'), axis=alt.Axis(title=None)),\r\n    alt.Y('Relative_abundance:Q', scale=alt.Scale(domain=[0,100])),\r\n    color=color,\r\n    tooltip=['Patient:N', 'CycleDay', 'SpeciesFinalLevel', 'Relative_abundance'],\r\n    column=alt.Column('Patient', header=alt.Header(labelFontSize=18, titleFontSize=20))\r\n    ).resolve_scale(x='independent'\r\n    ).add_selection(selection\r\n    ).facet(row=alt.Row('Response', title=None, header=alt.Header(labelFontSize=16), sort=alt.EncodingSortField(field=\"Patient\", order='ascending'))\r\n    ).resolve_scale(color='independent'\r\n)\r\n\r\nchart1.display(\r\n)\r\n\r\n\r\n---------------------------------------------------------------------------\r\nSchemaValidationError                     Traceback (most recent call last)\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/vegalite/v4/api.py in to_dict(self, *args, **kwargs)\r\n    380         if dct is None:\r\n    381             kwargs[\"validate\"] = \"deep\"\r\n--> 382             dct = super(TopLevelMixin, copy).to_dict(*args, **kwargs)\r\n    383 \r\n    384         # TODO: following entries are added after validation. Should they be validated?\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    326                 {k: v for k, v in self._kwds.items() if k not in ignore},\r\n    327                 validate=sub_validate,\r\n--> 328                 context=context,\r\n    329             )\r\n    330         else:\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     60         return {\r\n     61             k: _todict(v, validate, context)\r\n---> 62             for k, v in obj.items()\r\n     63             if v is not Undefined\r\n     64         }\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in <dictcomp>(.0)\r\n     61             k: _todict(v, validate, context)\r\n     62             for k, v in obj.items()\r\n---> 63             if v is not Undefined\r\n     64         }\r\n     65     elif hasattr(obj, \"to_dict\"):\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     54     \"\"\"Convert an object to a dict representation.\"\"\"\r\n     55     if isinstance(obj, SchemaBase):\r\n---> 56         return obj.to_dict(validate=validate, context=context)\r\n     57     elif isinstance(obj, (list, tuple, np.ndarray)):\r\n     58         return [_todict(v, validate, context) for v in obj]\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/vegalite/v4/api.py in to_dict(self, *args, **kwargs)\r\n    380         if dct is None:\r\n    381             kwargs[\"validate\"] = \"deep\"\r\n--> 382             dct = super(TopLevelMixin, copy).to_dict(*args, **kwargs)\r\n    383 \r\n    384         # TODO: following entries are added after validation. Should they be validated?\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    326                 {k: v for k, v in self._kwds.items() if k not in ignore},\r\n    327                 validate=sub_validate,\r\n--> 328                 context=context,\r\n    329             )\r\n    330         else:\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     60         return {\r\n     61             k: _todict(v, validate, context)\r\n---> 62             for k, v in obj.items()\r\n     63             if v is not Undefined\r\n     64         }\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in <dictcomp>(.0)\r\n     61             k: _todict(v, validate, context)\r\n     62             for k, v in obj.items()\r\n---> 63             if v is not Undefined\r\n     64         }\r\n     65     elif hasattr(obj, \"to_dict\"):\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     54     \"\"\"Convert an object to a dict representation.\"\"\"\r\n     55     if isinstance(obj, SchemaBase):\r\n---> 56         return obj.to_dict(validate=validate, context=context)\r\n     57     elif isinstance(obj, (list, tuple, np.ndarray)):\r\n     58         return [_todict(v, validate, context) for v in obj]\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    326                 {k: v for k, v in self._kwds.items() if k not in ignore},\r\n    327                 validate=sub_validate,\r\n--> 328                 context=context,\r\n    329             )\r\n    330         else:\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     60         return {\r\n     61             k: _todict(v, validate, context)\r\n---> 62             for k, v in obj.items()\r\n     63             if v is not Undefined\r\n     64         }\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in <dictcomp>(.0)\r\n     61             k: _todict(v, validate, context)\r\n     62             for k, v in obj.items()\r\n---> 63             if v is not Undefined\r\n     64         }\r\n     65     elif hasattr(obj, \"to_dict\"):\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     54     \"\"\"Convert an object to a dict representation.\"\"\"\r\n     55     if isinstance(obj, SchemaBase):\r\n---> 56         return obj.to_dict(validate=validate, context=context)\r\n     57     elif isinstance(obj, (list, tuple, np.ndarray)):\r\n     58         return [_todict(v, validate, context) for v in obj]\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/vegalite/v4/schema/channels.py in to_dict(self, validate, ignore, context)\r\n     76         return super(ValueChannelMixin, copy).to_dict(validate=validate,\r\n     77                                                       ignore=ignore,\r\n---> 78                                                       context=context)\r\n     79 \r\n     80 \r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    326                 {k: v for k, v in self._kwds.items() if k not in ignore},\r\n    327                 validate=sub_validate,\r\n--> 328                 context=context,\r\n    329             )\r\n    330         else:\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     60         return {\r\n     61             k: _todict(v, validate, context)\r\n---> 62             for k, v in obj.items()\r\n     63             if v is not Undefined\r\n     64         }\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in <dictcomp>(.0)\r\n     61             k: _todict(v, validate, context)\r\n     62             for k, v in obj.items()\r\n---> 63             if v is not Undefined\r\n     64         }\r\n     65     elif hasattr(obj, \"to_dict\"):\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     54     \"\"\"Convert an object to a dict representation.\"\"\"\r\n     55     if isinstance(obj, SchemaBase):\r\n---> 56         return obj.to_dict(validate=validate, context=context)\r\n     57     elif isinstance(obj, (list, tuple, np.ndarray)):\r\n     58         return [_todict(v, validate, context) for v in obj]\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/vegalite/v4/schema/channels.py in to_dict(self, validate, ignore, context)\r\n     58             validate=validate,\r\n     59             ignore=ignore,\r\n---> 60             context=context\r\n     61         )\r\n     62 \r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    337                 self.validate(result)\r\n    338             except jsonschema.ValidationError as err:\r\n--> 339                 raise SchemaValidationError(self, err)\r\n    340         return result\r\n    341 \r\n\r\nSchemaValidationError: Invalid specification\r\n\r\n        altair.vegalite.v4.schema.channels.Color, validating 'additionalProperties'\r\n\r\n        Additional properties are not allowed ('selection' was unexpected)\r\n        \r\nalt.FacetChart(...)\r\n---------------------------------------------------------------------------\r\nSchemaValidationError                     Traceback (most recent call last)\r\n<ipython-input-1-a28672275ead> in <module>\r\n     86 )\r\n     87 \r\n---> 88 chart1.save('/Users/jgillece/Desktop/CityOfHope/BreastCancer/15342/15342-16S-NewMD-PFS-TaxaBarPlots.png')\r\n     89 chart1.save('/Users/jgillece/Desktop/CityOfHope/BreastCancer/15342/15342-16S-NewMD-PFS-TaxaBarPlots.html')\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/vegalite/v4/api.py in save(self, fp, format, override_data_transformer, scale_factor, vegalite_version, vega_version, vegaembed_version, **kwargs)\r\n    474         if override_data_transformer:\r\n    475             with data_transformers.disable_max_rows():\r\n--> 476                 result = save(**kwds)\r\n    477         else:\r\n    478             result = save(**kwds)\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/save.py in save(chart, fp, vega_version, vegaembed_version, format, mode, vegalite_version, embed_options, json_kwds, webdriver, scale_factor, **kwargs)\r\n     77             )\r\n     78 \r\n---> 79     spec = chart.to_dict()\r\n     80 \r\n     81     if mode is None:\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/vegalite/v4/api.py in to_dict(self, *args, **kwargs)\r\n    380         if dct is None:\r\n    381             kwargs[\"validate\"] = \"deep\"\r\n--> 382             dct = super(TopLevelMixin, copy).to_dict(*args, **kwargs)\r\n    383 \r\n    384         # TODO: following entries are added after validation. Should they be validated?\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    326                 {k: v for k, v in self._kwds.items() if k not in ignore},\r\n    327                 validate=sub_validate,\r\n--> 328                 context=context,\r\n    329             )\r\n    330         else:\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     60         return {\r\n     61             k: _todict(v, validate, context)\r\n---> 62             for k, v in obj.items()\r\n     63             if v is not Undefined\r\n     64         }\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in <dictcomp>(.0)\r\n     61             k: _todict(v, validate, context)\r\n     62             for k, v in obj.items()\r\n---> 63             if v is not Undefined\r\n     64         }\r\n     65     elif hasattr(obj, \"to_dict\"):\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     54     \"\"\"Convert an object to a dict representation.\"\"\"\r\n     55     if isinstance(obj, SchemaBase):\r\n---> 56         return obj.to_dict(validate=validate, context=context)\r\n     57     elif isinstance(obj, (list, tuple, np.ndarray)):\r\n     58         return [_todict(v, validate, context) for v in obj]\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/vegalite/v4/api.py in to_dict(self, *args, **kwargs)\r\n    380         if dct is None:\r\n    381             kwargs[\"validate\"] = \"deep\"\r\n--> 382             dct = super(TopLevelMixin, copy).to_dict(*args, **kwargs)\r\n    383 \r\n    384         # TODO: following entries are added after validation. Should they be validated?\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    326                 {k: v for k, v in self._kwds.items() if k not in ignore},\r\n    327                 validate=sub_validate,\r\n--> 328                 context=context,\r\n    329             )\r\n    330         else:\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     60         return {\r\n     61             k: _todict(v, validate, context)\r\n---> 62             for k, v in obj.items()\r\n     63             if v is not Undefined\r\n     64         }\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in <dictcomp>(.0)\r\n     61             k: _todict(v, validate, context)\r\n     62             for k, v in obj.items()\r\n---> 63             if v is not Undefined\r\n     64         }\r\n     65     elif hasattr(obj, \"to_dict\"):\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     54     \"\"\"Convert an object to a dict representation.\"\"\"\r\n     55     if isinstance(obj, SchemaBase):\r\n---> 56         return obj.to_dict(validate=validate, context=context)\r\n     57     elif isinstance(obj, (list, tuple, np.ndarray)):\r\n     58         return [_todict(v, validate, context) for v in obj]\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    326                 {k: v for k, v in self._kwds.items() if k not in ignore},\r\n    327                 validate=sub_validate,\r\n--> 328                 context=context,\r\n    329             )\r\n    330         else:\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     60         return {\r\n     61             k: _todict(v, validate, context)\r\n---> 62             for k, v in obj.items()\r\n     63             if v is not Undefined\r\n     64         }\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in <dictcomp>(.0)\r\n     61             k: _todict(v, validate, context)\r\n     62             for k, v in obj.items()\r\n---> 63             if v is not Undefined\r\n     64         }\r\n     65     elif hasattr(obj, \"to_dict\"):\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     54     \"\"\"Convert an object to a dict representation.\"\"\"\r\n     55     if isinstance(obj, SchemaBase):\r\n---> 56         return obj.to_dict(validate=validate, context=context)\r\n     57     elif isinstance(obj, (list, tuple, np.ndarray)):\r\n     58         return [_todict(v, validate, context) for v in obj]\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/vegalite/v4/schema/channels.py in to_dict(self, validate, ignore, context)\r\n     76         return super(ValueChannelMixin, copy).to_dict(validate=validate,\r\n     77                                                       ignore=ignore,\r\n---> 78                                                       context=context)\r\n     79 \r\n     80 \r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    326                 {k: v for k, v in self._kwds.items() if k not in ignore},\r\n    327                 validate=sub_validate,\r\n--> 328                 context=context,\r\n    329             )\r\n    330         else:\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     60         return {\r\n     61             k: _todict(v, validate, context)\r\n---> 62             for k, v in obj.items()\r\n     63             if v is not Undefined\r\n     64         }\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in <dictcomp>(.0)\r\n     61             k: _todict(v, validate, context)\r\n     62             for k, v in obj.items()\r\n---> 63             if v is not Undefined\r\n     64         }\r\n     65     elif hasattr(obj, \"to_dict\"):\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in _todict(obj, validate, context)\r\n     54     \"\"\"Convert an object to a dict representation.\"\"\"\r\n     55     if isinstance(obj, SchemaBase):\r\n---> 56         return obj.to_dict(validate=validate, context=context)\r\n     57     elif isinstance(obj, (list, tuple, np.ndarray)):\r\n     58         return [_todict(v, validate, context) for v in obj]\r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/vegalite/v4/schema/channels.py in to_dict(self, validate, ignore, context)\r\n     58             validate=validate,\r\n     59             ignore=ignore,\r\n---> 60             context=context\r\n     61         )\r\n     62 \r\n\r\n~/bin/anaconda3/lib/python3.7/site-packages/altair/utils/schemapi.py in to_dict(self, validate, ignore, context)\r\n    337                 self.validate(result)\r\n    338             except jsonschema.ValidationError as err:\r\n--> 339                 raise SchemaValidationError(self, err)\r\n    340         return result\r\n    341 \r\n\r\nSchemaValidationError: Invalid specification\r\n\r\n        altair.vegalite.v4.schema.channels.Color, validating 'additionalProperties'\r\n\r\n        Additional properties are not allowed ('selection' was unexpected)\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2436/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2436/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2435", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2435/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2435/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2435/events", "html_url": "https://github.com/altair-viz/altair/issues/2435", "id": 843559857, "node_id": "MDU6SXNzdWU4NDM1NTk4NTc=", "number": 2435, "title": "Error in documentation: Quantitative Encoding", "user": {"login": "Make42", "id": 4905185, "node_id": "MDQ6VXNlcjQ5MDUxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/4905185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Make42", "html_url": "https://github.com/Make42", "followers_url": "https://api.github.com/users/Make42/followers", "following_url": "https://api.github.com/users/Make42/following{/other_user}", "gists_url": "https://api.github.com/users/Make42/gists{/gist_id}", "starred_url": "https://api.github.com/users/Make42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Make42/subscriptions", "organizations_url": "https://api.github.com/users/Make42/orgs", "repos_url": "https://api.github.com/users/Make42/repos", "events_url": "https://api.github.com/users/Make42/events{/privacy}", "received_events_url": "https://api.github.com/users/Make42/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065442, "node_id": "MDU6TGFiZWw0NzQwNjU0NDI=", "url": "https://api.github.com/repos/altair-viz/altair/labels/documentation", "name": "documentation", "color": "c5def5", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-29T16:44:42Z", "updated_at": "2022-03-23T00:14:13Z", "closed_at": "2022-03-23T00:14:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "At https://altair-viz.github.io/user_guide/encoding.html#effect-of-data-type-on-axis-scales there are two images that show the effect of using `quantitative` data (a third one is about using `ordinal` data, but I do not adress this here). One is supposed to show how the graph would look like if the default `alt.Scale(zero=True)` is used and one i`alt.Scale(zero=False)` is used. However, both grahps are identical. I think the first one is actually wrong.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2435/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2435/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2434", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2434/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2434/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2434/events", "html_url": "https://github.com/altair-viz/altair/issues/2434", "id": 843475234, "node_id": "MDU6SXNzdWU4NDM0NzUyMzQ=", "number": 2434, "title": "Error in documentation: filter-transform", "user": {"login": "Make42", "id": 4905185, "node_id": "MDQ6VXNlcjQ5MDUxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/4905185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Make42", "html_url": "https://github.com/Make42", "followers_url": "https://api.github.com/users/Make42/followers", "following_url": "https://api.github.com/users/Make42/following{/other_user}", "gists_url": "https://api.github.com/users/Make42/gists{/gist_id}", "starred_url": "https://api.github.com/users/Make42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Make42/subscriptions", "organizations_url": "https://api.github.com/users/Make42/orgs", "repos_url": "https://api.github.com/users/Make42/repos", "events_url": "https://api.github.com/users/Make42/events{/privacy}", "received_events_url": "https://api.github.com/users/Make42/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065442, "node_id": "MDU6TGFiZWw0NzQwNjU0NDI=", "url": "https://api.github.com/repos/altair-viz/altair/labels/documentation", "name": "documentation", "color": "c5def5", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-03-29T15:16:00Z", "updated_at": "2022-03-23T00:17:38Z", "closed_at": "2022-03-23T00:17:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "The documentation in https://altair-viz.github.io/user_guide/transform/filter.html#user-guide-filter-transform says \" here we plot US population distributions for all data except the years 1950-1960\" but then uses the code \r\n\r\n```\r\n.transform_filter(\r\n    {'not': alt.FieldRangePredicate(field='year', range=[1900, 1950])}\r\n)\r\n```\r\n\r\nwhich seems to be wrong, when looking at the dates. If this is a mistake, please correct it.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2434/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2434/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2431", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2431/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2431/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2431/events", "html_url": "https://github.com/altair-viz/altair/issues/2431", "id": 840116904, "node_id": "MDU6SXNzdWU4NDAxMTY5MDQ=", "number": 2431, "title": "Boxplot whiskers incorrect when reading data from csv file on disk", "user": {"login": "hannahburkhardt", "id": 4624654, "node_id": "MDQ6VXNlcjQ2MjQ2NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4624654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hannahburkhardt", "html_url": "https://github.com/hannahburkhardt", "followers_url": "https://api.github.com/users/hannahburkhardt/followers", "following_url": "https://api.github.com/users/hannahburkhardt/following{/other_user}", "gists_url": "https://api.github.com/users/hannahburkhardt/gists{/gist_id}", "starred_url": "https://api.github.com/users/hannahburkhardt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hannahburkhardt/subscriptions", "organizations_url": "https://api.github.com/users/hannahburkhardt/orgs", "repos_url": "https://api.github.com/users/hannahburkhardt/repos", "events_url": "https://api.github.com/users/hannahburkhardt/events{/privacy}", "received_events_url": "https://api.github.com/users/hannahburkhardt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-03-24T19:56:00Z", "updated_at": "2023-02-06T01:22:08Z", "closed_at": "2023-02-06T01:22:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I seem to be getting two different boxplots when creating the chart from local data vs. data on disk. The box itself seems fine, but the upper whisker value is not correct in the version created from the dataset on disk.\r\nI'm using altair v4.1.0, vega v2.6.0, and pandas v0.25.0\r\n\r\n```python\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\ndata = pd.DataFrame([\r\n    [\"one\", 1385],\r\n    [\"one\", 1162],\r\n    [\"one\", 2827],\r\n    [\"one\", 2138],\r\n    [\"one\", 1847],\r\n    [\"one\", 1477],\r\n    [\"one\", 883],\r\n    [\"one\", 9071],\r\n    [\"one\", 835],\r\n    [\"one\", 2104],\r\n], columns=['a', 'b'])\r\ndata.to_csv('data.csv')\r\n\r\nalt.hconcat(\r\n    alt.Chart(data).mark_boxplot().encode(\r\n        x='a:O',\r\n        y='b:Q',\r\n    ),\r\n    alt.Chart('data.csv').mark_boxplot().encode(\r\n        x='a:O',\r\n        y='b:Q',\r\n    )\r\n)\r\n```\r\nOutput:\r\n\r\n![image](https://user-images.githubusercontent.com/4624654/112375205-3febb500-8ca0-11eb-9d1f-78cef6702203.png)\r\n\r\nI've been unsuccessful in trying to reproduce the problem in vega. I've tried using the barley dataset URL as \"file location\" in the Vega Editor, but can't reproduce the problem.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2431/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2431/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2429", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2429/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2429/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2429/events", "html_url": "https://github.com/altair-viz/altair/issues/2429", "id": 838184303, "node_id": "MDU6SXNzdWU4MzgxODQzMDM=", "number": 2429, "title": "Tooltips disappear in boxplot when selection is added", "user": {"login": "xujiboy", "id": 10766549, "node_id": "MDQ6VXNlcjEwNzY2NTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/10766549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xujiboy", "html_url": "https://github.com/xujiboy", "followers_url": "https://api.github.com/users/xujiboy/followers", "following_url": "https://api.github.com/users/xujiboy/following{/other_user}", "gists_url": "https://api.github.com/users/xujiboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/xujiboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xujiboy/subscriptions", "organizations_url": "https://api.github.com/users/xujiboy/orgs", "repos_url": "https://api.github.com/users/xujiboy/repos", "events_url": "https://api.github.com/users/xujiboy/events{/privacy}", "received_events_url": "https://api.github.com/users/xujiboy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-03-22T23:29:36Z", "updated_at": "2021-03-23T17:06:59Z", "closed_at": "2021-03-22T23:34:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\r\n\r\nI've encountered this problem where the tooltip would disappear in a boxplot (`mark_boxplot`) if selection is added. I found similar issue such as [this](https://stackoverflow.com/questions/60474039/tooltips-in-stacked-altair-vega-lite-chart-disappear-when-using-interval-selecti) but the workarounds provided (e.g. add `.interactive()`) seems to be not working for my specific case. Here is the python code snipet:\r\n```python\r\n\r\nfrom vega_datasets import data\r\ndf = data.cars()\r\nimport altair as alt\r\n\r\n\r\nselection = alt.selection_multi(fields=[\"Origin\"])\r\nbase = alt.Chart(data = df)\r\n\r\nchart = base.mark_boxplot().encode(\r\n    x = \"Origin:N\",\r\n    y = \"Miles_per_Gallon:Q\",\r\n    color = alt.Color(\"Origin:N\", legend=None),\r\n    tooltip = [\"Miles_per_Gallon\"]\r\n).transform_filter(\r\n    selection\r\n).add_selection(\r\n    selection\r\n)\r\n\r\nlegend = alt.Chart(df[['Origin']].drop_duplicates()).mark_rect().encode(\r\n    y=\"Origin:N\",\r\n    color = \"Origin:N\",\r\n    opacity = alt.condition(selection, alt.value(1), alt.value(0.1))\r\n).add_selection(selection)\r\n\r\nchart | legend\r\n```\r\n\r\nHowever, if I open this chart up in the [vega-lite editor](https://vega.github.io/editor/#/url/vega-lite/N4Igxg9gdgZglgcxALlANzgUwO4tJKAFzigFcJSBnAdTgBNCALFAFgAY2AacaYsiygAlMiRoRQBmDgF9p3RgTABDccgDaoOiqV4QUJQFtMKEFsJKAtDDYAmFgFY2SgEYA2AIwsAnE-cTXEvbuAOxKbO4+LO6uNoEgciAGSgBOANYmzhAAHgAOADYQ4tyYUJB0JEioPAXJuoQAnjnGyHoQBiRKeSDc8Jh5dCYA8smIJN0geZgIJQPIZHl5CYQQEHnEOSgaIA1NJgCOpEpEcObEaMY9WP0mALJwk5QA+k3JjwDinQVQ8QC63Fl1RrNVrtfRdS59WYgYajb4JeqA3YtA5HYinODnca9a4tO4PZ6YV4fBbQeIJSh9TBgYikqoUybUiDJcJsRHAgykNZwLFXOiUTbQkYIMY-WTcQjJI6UGBMgybUDwNaE3T0qk074tVWM5nuVmyUWcTTaXT6IwmMyWFiuFj+OheOg2GBeTARJReVxeZ3BOgSGD2KlKGwADiD9ni3CSaRMyTV4xKZQqukgNTZJigbQ64JA2KhMOFcO4EBySjAJwRVQI5XVujQnVIzXc3C11c1lO1LPDIFreXrKDYADp3PDUy106DOjzIUMhWMxSBm3BaaBm0yO1UduzOcRJ-1+epBbCQKL9dwACSUMCMTBJExiQg5SjIAD0T-OCCU-eFTFIzn7i6fF5Xkkr5TJYeQnJgr4sP2QaDv2ABWlCktwFoUoQe5GuYVi2A4ThuJ4PhKH4ARBKE4SRNEsRhuooAAHKGMCl6YGgySrJghAAARMecCyYBxSTgc4pDjHimBPC87yfLS7hBtwADC9TgVAdCEnuskgAAInAlD5CW14lKoUjBNwghMhSOQQNgyrIH4XAgNQIgIGIjwkI8eTOHugRsCw3AAIJgGAlKSi27g2NwACamApCYETBGwFjhAl7gACocMgaUcOMeZjC0ACqADKvnhnRDEZKQcBgKkHGUKkikpFVEg2Ky3CieJhKSSSGruPY8mKSQKnJGp3BaTpeR6UYRCSI4JlmZgFlWbUNmuD19mOc5rnuZ5HoSH5AVBSoi5de4-YrZF0UtLF8WJeEqVsOld2Zdw2UaiABVFXIJVmi0+T1AYFBMNVKh9OBhAXCArUEkSUldepClKQNQ2adpumBRNhkyTNg1zZZ1ndXZDmiIQLlQG5HmSDari7YFkzBYdKDuI2IBnYtICXUlSW3fd91ZTOL1vcVID0V9ICGGAHExs4fTVZQRTg-cYmQx1Xz05TIBw-1qkoOpI0o-pk3IFIPkgKZWPzbj02rYTxOk55No7SA-nU4SB3SWFTNRSzbPXSlGUPc1B75iY-MfYLpUtDKyR0BxywjOmIny21UOdfTxlq31yma8g2vI2NqMGZItiY+ZOOLZ4+NrUTG1kwbLDeFT+0hQOp0ezFXhxezN2+9zT280HhUC0LwIR1H75jVkWAcY4-sQxJxLKzZK3qxng1a8NOfjfnyAsDYXhF9jC30146kE05lck5trASFE9c0y7XV2czrft97nO+zzh55f3IeDyY3GsZMnE4AGGLGNeO+JZ7Q3pkbJeCNV5I1GhvfWDgjYm2LgfZANgmrcBPutc+1cbT2CNo7BudNkC73dudVmbcrruA5l3R6AccqvS-oaUOwsfp-VIADGApBkj1A4nAQRYCFYQOTjZaB6dYFZzXggvOSD2B7zNotGw3VsEV2thfLeEhQo32di2WCzdKFe1oZ3P23dGF8xYZ9YEFljgli4toJSOgWoJ0VnPaSEj4aZ2zrIvWqgHArVQfvaymCVo4LPjbVg28VrENvo3CKLcLrUI7j7MxDDnp93eqwn+LRRYcUMM4JQlBKBKDoEyDidB8jCMTkraSi9JHeJkbrNGkgfCKJLofcuVsq6eVDHZWJejSEGISUY5JL96H+wyZ-LJ1jf4nFYiUCplALAqI4iAsa-IXHgPau4jU8w8i9S8SvLeTTc5+PphIe2QSlH01UZbU+Gjq5SDaQ7PacTSEhBOiMz2YyTGpK5uk3uLQACivCizGG-mHcAV4WJsU4txYGfFFAUEGhxAAFJQbAABKapbjIFzE5ActORzEY6zOS0g2FtrkdKWmE9RPTWCeDdgM2m0ljqGJ+c-P5r8-bv0DtMgeULh7RyZCQCA6LMU4q2SInZ+L9mHI1scnxzTN6BEZtS9B3V7bhMeXudgV9dGsqOt8p+NC6FpMmUC5hMy2E2LyL9f6jBAagwWBBCV2LcWiPnvK4lirSXrzkYZIMVzZo3JssEOl3S8F6uiKrFld96ZNxNUkrl5qAWWo-tawVws8kSylsUziGKPXSpqbslAPqYGNPgSq-W-g7IatxhGtRUbIkGz6YahNNlGaPxTWa0x6a+VMODtkqFZS6DTC4owT4JRpjJGqmDGesqxF3MrUq05iCg0htNjSkIXSHkMspQEDt8SKGcr7f8t+PdM3Dtmd9e1nCAYAHIwCkC0BxK+09XFeo8Qq5e-rfEUo-e0zVrg924NbXW8h8b9HJqoam-tl6LGZOzUPJkUcOQyyOAgDimRinvtsJ6pd3rCW-qkcq8lqrC7G1DTuhR9zwOaMufYe20GhmweMWmxDUys2QuFn-OF-FeBIpSAUQjSd54roaWu6tFGkEcGA+bMDETGPBA8Me0hXgvmntNSknl5juM3ttWVCqVUxKnD4tgJQCBoDuqlXLbZ4mf2+r-XAslG7WD2ECTR9BoTm37ujQXIMca3mDOkg-RJcHz16cBdeqxRmWjLHqIUJQXEmTQBS5GKqQiS14rEXYUjmcjZucDbcrdaDrJeEjf51tsRgjMpC0a+mHKdPjItYOl6AApJQxYCy3pABwx1FSqCg1qDl79GpMEFeOarYr5ybJHwU4tSrfmGPV2DJc9TdStM9si7piZ7XkO8eBHkxgTIoDsTE7UmGU29wzYDXNiI5CG1LdTjqg9NhgjBCIQ1zt3VtsRY4wh3lV7+U8ZHcLYVSRzgjEqpdstGDGartu+ukrGD5PUe3eg0MK3lNrfsEGVOrHpKqx24Di9wOkMCqO+aFQlBSBQDWXkIIn6HNXZQB9m7rAUdzbbotrWx96UBYR1ITbXVoLNd7XttrIOmFdZ6yhkwaBVipExVZxZDNtEVL6KQLIfEKRaG+GNojtIbCqyR1zmT7myGp2e6wVWb2hcyUCKL9nSbtOS9awOmXL1QWsV2NT76mBSDTEKJPbycP8U2HqSSi3s2KUM3rd56yBOce6vZ64OrLvw3-dGfB8n+mrW+-BQr3Jr64AcV1GwDieRNn2ZlY5ibni-Wx-u-HtgNuk9LaU2njBNp+k-ZCuL9jvzOMU+40X-34PgQlJcBxT0C6v3G4m9H5vJzLeo91CgzvKBlv0dx3uWrMSB8fOCDns9UuveU5ABPiFU+MgGGwBxJqBGjcN-T5ztfcfN6hXVdvrt2rBcatYhvsnZGsbIbAz8WtuV9tvcTAb8S8RYDAxYEAYwDAlII88tEcpNkd18HtPQ+cyFu93trR1IicuoJddtPcuMrVDMclsw0MOIYAo8Wd682cbI7JzdpFcDANQMCCVEqtVs9UPAj9QDfsjZScR8gcC9YsbU6DuJ+EwAmoMCJMODsDXNW9KMO9McQl0cHdW0bRVMs87kJC89osM1QdaDR0IBx0+IHQGFF038u0P9yMrdtF1JbcEciChcbQgx6tRCQoJBICPdoDpcr9LDhZGBy9QoOABhX82DyFOCXDUdDYCCIgACW1NEWBghGojDhl3dKCQjL8DM4s6CzA6cGd8hmdlCTdU5OCisND9ZecMdytFoQxU93tbIjCh98jYo-lR9pDQc5cjgED+MAEOI3wUtYh7DF9HDgwP96iANv86MPCXk9DNFMFrQjD7Agi4M+ipCYsLCSioVEtktUtWJ9Bqjl95jud48-ACDd81i1tMFSDj8nMTC9j88DjZduthiA96DI41kSBlhLj2cV8XNP8GjVAFtmjglFofVHiD9vJgt-CPlyF3iL9qCZCEClc8gVdLNpgGc6cXgcNMB2JJgK8QgQSCUFhrjuDN4miPCWABcMjq5YoXiUSTdwtc8PizCDsQUwVJ8+s8kUDrx0C4j4cIgP87tFj9ZYg3YPDK92ihdTcDVXkOSup7Z0SqCx8aCjj2F71BsSkXUQYkVhs2gqTogpSbjN5fMYSw1dQBD99yYJAoNXjyCdjeiMSdSsS-jRj2JJ1mJEV+JOg4AhILTai1DkBpSa1VBmDUjdDADGNGpXT1SmsPS24eSYCwi9TUMASY4xUw8WDS18VJTnMpFozZNYyqU-82i98e9LkqMyC0yKDPTtSBih0cyTA8kkhzAylRs69izl1YZIyKyrc5T4yvCINgx2SSEtsWyMyvT2zLFZCoU-TAFgFOhnEBzcsJMm9wSki5svJUjlolT9CmoUzZyuo3YtTCjMTDiVz2FeA4B7FlBzAnEcNWJg8p05RxSSy9yyNrS5NE9tDS4m06yD1a5Ni1TLzbl0zghMzQjiiHzcyR5Nzx4+Ip4LT-yq0v9a0ghUjmNTzMjuoQCYKbJAj5z4LFyvjlyECBsuEnUeE+EBFsttzxsoFnDAL0Z3C-88YiL8E2B3QjDNSAcFy2yaLDs78Wgx0J0-p9BIBbMLS3ZEiuLJBg1UigxJzMjKsRCyKGY4KEKijdTkKTBhVIB6cJR+FKADg4AYxFLfzl17YVK6SgLUi4p+K9UvtkS9LrzRKqLxLzCOyTLvonz7ESkYAUhy8i07MHC2C7iyycLITWB0cFSwKESUAgg6MmzwDh9-LbzvT7yECTszt-SdImRzBMguF7K2Kl96ZhyY8ozVKMF8dUjdQPL2d3Q-C9KKLcrDK7ygqRiYV-5-SJjqrYr4dJsErjkFiYyoFgKWiUBM9wLlT2AZz3lpI0S-K+qCqBq-jbFiB7F4AJZbLYiarHDSzODRzUc4y7Sd0EyWTPJgwur1ryDerqLAraK-jIdhssMLT6rV8rq5sbqPDaz0qDY-ALyXqoEDL3q+Swc+sjBkgX1mLlAcgRgn8OAiydyTcnLIyZrKz6ZJqQb7dEynisFoKobxE3qAq4bwjgRwU8gK8fAsb2KMF-rwT8arcGZVYVitK1tQoWM3SOKeixL8qly4CBTb8+smhg9MBQ9DYqSRcpq9Umrggns-93Llqat29SLKaIgYaabYD+S-cpb4tsxnzOJQoWBnBFbVCGrObUdayPDDCtb1i2ATyKbQsxcDaxaJLjbi8-iTjzAzjVgxoK9n9FasD7bVbf8QKUAPawaQhsijDNruTYajaQAhjeszayj6dw7pjWd4dndlaW8ZTVAlqPCPR2qlp4rsqMYRa8r+i-bM6fjs66CcS8S1cGc-oVJGaGZ3AqSOcS6ISy6d8tCFqoy+a9wnddavbD5qbfaPqJaTa6KDSGKuIYdUgLsHL55TdaTcKoTY6J7NbE6dKs8mofam6l6qcpLtgIAktg7IBziUsp1I5lgNgd6TdsLpqmqNd7jHSe9MFgg1q56F44KbB06r8s6ECZKkVVhOJX6GAixB6wSpEHaedT8vM46s4p72dQpvK9bU4TCIHDbszgquxldVcCTo4gR31B7cbo6XKoTx7YSMqjYwbQlZ6wDYhwHIHx9JbBrmJhrOIJjB67bV90H49li-9VjSaD9VqU7eHSGkKEDhUcggTxVkh6cXB-pB6o6JHf6iaaySaHr2cNijDXAlHF7abOyWg1yBENzQFP6NTOKmGpp5rWHaVq7t4vsjDfLc8SHrGM66aTB9rnyxZXyQyLjnHhbnKD7kqPH7S0q5HL5sdPawCdEG7Amr6bHyH6LuFeF+FBFuQYmF5XH4nwaeLsG+LXb8E-BdK9aeqsm+HjLVGGDR4lB0LCysLymkrKUj7PGtVvHQpIbQH4riGWmfTb68kCkikSk+zpZZZxqSyIyGqDzANvICLcGDYM9nqxn2Vcrsn9jr74azbEbkb+FIwbLa9lnl19H9ymrt51bsGmpmTqtMiAhBbUynDmnlHWm-ihITNq8xIXA7KX0ZZzTSn4q4m+mjzbrNVPNvHHA9mMmmmJm-mpm+tVg+Q-pnB5Ytc1gUsQxxZ77OgF9C6SzlLIz1nVVqzqneDam9UHACGxm0W-KjnPiTmQm7HGA+FKAaYOJztsALJkhOJWJ6gJwoWGHV8aXXL4XcZZHTGt5t4UXfsIDKKOXeTgnbHEglAAAvN9ZILIGwVLUgXYKFhIyM+2CpzWlY17FJjBBs4SqxnJjO6Bv47s7QBZ6Ki01BxK0eg2TZ+V0uC2MGiQIMLwVVkKdVw5yZwq30oagTBFXiVLUoFFSgMamYuK6Vh5txwNlh+0pWsG9gaEuu8Q9luN3a2+4VFAo4EVWOcVH1qV3pgNqQeU3iujYtneLh37EnCtjF+N2+-Jp1I04GN1cF5YAwTNil5db+-9WayprZ7x9vQnIWqm35oJsh7E1YJXCvBwPiJts6uK9mtBwxgZ+0zJjhrwDbdJsQl145uG+Av4juqhxZKIdwad1giaqlxhipn-Agl2jhoIRmOu9SdFzd-hlevaoPEPTiRwFgT9wc3e+509vN6IgglPRljqtWxRjVytn3ARv4mMfQLccOxD7GibM3PGpqoS4N+O8hDhmSUZjJsD-tiDwvQj6thg9RogRtyVQen9gxtDox7BoLau2IXfOuvtgJ-DySvrXOhnZncj1muY4eyR+kgtmlSN8T6cowohtj11qB1uhAk4rhFLJ+9LYMtIFi5T2qx1-evp9Duj63cTxwFljJ7o8Dwz7jd12+2B1LNYWz2Yk9wrGjqpiezS8T6IHtkKPDgdqtvrIO8ztLBYFLaIDgILtgoeuomjzTrHN5wQvB9HKT+9zluG3zvrQFyqLiAyQp99RwC0nNgCvNuF1KgBiCxU29gI3KiQWTm+oUpA4M3spkHp4e2VwyINhU0Nh1-wJauug5hu3r+Lz62++xgSUM4SZtsbpq1rjt9roXF02suukS3PJb9jzFs2mtyUBnfMuOKFud9Q1tqjBUiQe1pV9gbeLouCs77z-5vz6widCz87eFM0n8o9iUv16TCptwpdrDg2T7Vd750Kb7vr05ug85urq58qDN5wT8pyQwJSlthdp51I6E4tyrKNj5Bbkwn7h97V8h+x1GmHJFDZSgCqRrongmreFK3i6b97q0GLj5fxzlWnsr+ntpgEtYU625iTJr-1hdtVAigrp0rRI9Lrj5E7kX1H7l-rNegp5i2twkzAA3UbmF1t+uqb7Z7eV7r7yi0XrVrdhNvlgVoVjiJLNIQkD8igfHsHmX6SOXqHvp2uRJmlfg7x7Ihp-Znr7XnVqr0zBkCUSYqPLiUHwn7bvNgJPgqPbxyrEDtdhmaP5buTs2mZgwQpYpUpcpXH7378jn9P6Hhltr6u8NlRIw7tPy+3rMlRvavXp1bsZ8yaKFkL6bJq20hUtgfbiDf99X4nFHov-rs2+x9MWsFPiF33rNiUqjhqwGilYG3i+695p5D7EBljwv87wdgbsWU7ZIYHv6q0vN8c5zzrq9hwCxs-37i7ugyHJQaHEzO-4enfjaTpYRdle9ZWwHnyR6WM7eMfPJr3yGwyxlQpTWIPfz-bQkVik-dYpEDf6LcYB27XEq+0JJmtPeksMkuSy-aR4t+QnCpgyT-xWhq6EQC2NlVb44D5+1+Tjn1nsZAIQEW5P3sanr5B8ee1TPnofz1SehEeelctqd1wFfUGC5lIgHwjT5m9ieggietEDe4iDWAPgdzmqzn7n8EuZtYdqv0nbVQfwvCG2ltyUFc860blK3stEF7+93+dPR3rfWxaUBcW+LDAJhg3rY9EB4PSlpz1cLADBmkXOHrXHwIz8ryugj-hfxL6DcRSaBMYEPxQF9NH+4-bZsf2Y6-ZoBrAnXklwcSxweBG-SPOIw5q5cMOoA97B9kyEhRU6WvVgRV0X6JsxiojJASh1C5odpG2DJahw3YAQC9KmmbIXoJW7ydacedDwCzTs6TUcuaHNgOF08ZeB2GDrWrNUI+RQDHBYvIzvLj+JJAsghrLIBIH-6cFrWfTW1jI3SFW1nWgw6Id8S2FccASPHYEhawc4BtQo7bUThgLWzaJ+8SPPIjT2kG30MeKNbrOjTQCuA9GyQl4Yiyf7t5xOWRSnm8Q77-C+s8AFQOHQQ5lVRWprc1n4LyyUDShebNAWcJ04e0662xK4U4Mg4B1VuTQ-0nJVBj5CCg1UX1gEOSJBD7Sr-UIbMPhEuMWBQw4vnQTCb2JDeUcNGnAABBQs8RzXCpuwBD4+Yi2DrHxif07QDD1hDvbvtWwtrh0gwg9S1r+z6auA5hYaOuHDxkgZ5cOqorvhxyg4uCmgjNJIEQEKEztd6D3Eegu25oAcPhB+bqEqNi5RCKRVoqkUKTLwV4OANeMRs8LdGeB7ijMIDr4S6IWjEKAYwUmbRxK7tPALAKKBaV1FUDHOzAhUpeyWFBYfRHyMkQmKMqZon2-3GwhUhSAg81+zI-geb0NE7phBhXA2C6RWFsoyx-VYYWbRnzOA58XgSYIPRdHqd9Y0-fMekNcAMsy23YnagR2tGJd76pxTLCxXDEADf69gHmrxUmocNNK4gxpn6I2E+djOfxVwe4PJJtBQIFpNoYH1bZsid0IQsNtOPsF8C-hOQnVoYLoDDZfBvA13BCLdGEjsGDxGbrqG5Eqw4KLAJEZdwYJQ5CQf-VoQBK57P4CC8JQsWBTrr6dc8UEj8eQ2Ko39t6OIiTNmPBKADZSORaEekJ8B9C9a0nTlDhL5EL85CNIziMv0dHkDl0kPHAhUz37VMD+bYy5P4D065UGJ1w3saUVGEM5nAKiCYY4W0QRiueOHZzmaJNGVZvh-QkSajwaFf9uOGjQepKPaF-sROEXdIQ4BoljM1hDdUSf6M-7HFlxj9FLmHWiKyS2CFE6YTa3PY0oE6DrJ3NoJbDMCTC1k48Vam0mrkWJ4xa8UgK4ml03RnQ4+p6NBKfcIhKcTSbhMEawoxiybckutyEhcRWe7PCUUhLHIPjNU-ElXq9yDDmSMmWE+idBLoKethu-ZP8UtCKnXUWqT-NqnD38AUTQOqUxiWjyhSGDR2rqekRSFx6JgkhG4h-tn2hEJSdmtdfPpZMCl1ShU7Ta7vWzFQWkDJd4hXs9w7ZW9PAVUsQn1LEn8ioUcfGrkQDq49gsgVATLhKQD7zsrBJUxTN4w9CdjvalFIKWqL+7ycAecDc4v6QnZtB7pf5FkYeQt688reDgA8ay0gkrSIca0utrdz47FoiJTmSwa4T2nVNO2CogIMWOJwnSbJMQ+qYNx7KV850h7ZqVGMbG7St8Qgq3lHlhkZNSxVkhGcdmDEyhxR6MibCRNQ7UDmxWOdIhoIwQqIPpEEr6aj0rF9YX2+JRZFoEoBXgmpRQ3EQpKtxKTK66gtsREDV6kj4ZrA6WWbQZrBkHR+ktWajhoFdCKhypKQOpL1qec-K30y0RWPYFm08hQPdiUh1pDyS1Oqtbcdg3sBuxE61ocWUtH1n9TQpwsBThxHgouSi6gnfERU3UrKSYxSwjgF8w0lsz6hp4qsYD3gaD1h+KtAkbKOsjJMlWKiGaWW3DmnSmJQqTUaFG1FIDRxNHEuYtDLkiyZJBM90pLINmuyv+9cuwNHDABmzfZaHS0s53bltjMEdA5Keu2Wm9zFxZtU7MpHM4YgCpPM9nM3OE6tyx6sIiNlsSJnBTM0kc6fD+BSCbcN5GCbaUXL-azD7iwsqeS6SOm+ie5EcnOciM1FZBjoXgSOubLmway-8KkjhpjWwHzz+phsgUXAP76ogjBkLS+RdRHKj8Zp6A5vqblfEqxcq9gdmb-HClsTDhiCh-i9NLgT9m+DgUOePJMJYK0p2wwkBc0Ez6AkazAKFtFMaqEKd5yAboTNxtDgSEcmC7BeHFgk-94JsOZha1KBpELFqQc0Ce1LroqiG6VC-qTr0FERNHEHQLaeDIpQyibBb0g0W3zgoKKa5A0vjOFMliM0lAtlBsZjNZHsLPAc02uFlXz6SDOUBi4mfoMgUOp16woxgoU3UW0yrBkMhmd428BdzoalFFxUfJJmrTJehAaXirN3IaLaWnkzVEyTen2BmZv2NlrnnCU-TbJwsC6YFCukKCoWqzAGqPx9mTjm+PgdJf5Pb5ZL+F0KIRhAD6DwoYUQZHKRfOpnXz46o-CRewTmnhsmioHfRfUoakUzLFBCnie1IqVdTsidssZrUKfjZLnZkS-Uh4v14IhJpl1JBVgwnogSlWFUyPhkwWUpolliY3JcCAuk1R6gU6bAOkEQlTSeJ5S3ip1LDZsAXSB8+RfUrW7QA9WkxAANQ2B1xVioGjEFarbNGozA47sMuoV3D0MP1KANhlYrUzHpj3XaW8NUE7xm+0QchcL0WX1L3Zjkz2RRw6p-yKUls+KVF3gqgK-Kpy8sYMXfkwT7hekpASitdFc8y4GHB+SrxVLkKapeKmFZfw4jxCxSl88mlsof4US0h4nLwDTKk58KBVBg0KmLCKQSgIA9DUlUsXYXANXO2nWeTJGhWKKdWBK5+iOI1XjjVSKxExh3Lig8K-ABqwxSfMVyUM5ZDOBWUrJQZmqoSWq1OeXMwQZzaJ9q1xQuMDE51JJMc3UKatHl-tSydrVzhyMwnyq35tw5EbpN474Lt+v9Klc5yaJXsgw6C8RIGoiVuKoUssruuLBcB4slmcSk3HzMMl9MXkztbZmkWqUfInF-K8BX3KhR5JiwgUZWU6I2piLd+kqokV1JUTPyT8iawxTryUDBjK8YYllZ6tuQ7L5hc003AsI+WUKpZna9hDBzlpwdw8C6qNbmPYWg0lhlWFtdJD5UnKt1i89uju3FR2AWAdALMM1KmHUdhOSSirNbJqwLDDld7MJTepDV0F+xg44cVFMXXgFP1pcO5Bwwzzjr-ehanJaDggVQpl5b6UsBgAiZoAAoitVlWOMPoEFCKJotWn+pCiYNJ1QakwI6vDj1ztEBciDbqDy7J4rVU8gXlsTgquBANyYugsbIiAF0OJu9FhfhtuT+yIuPqjuZgjmUZNLGxyuDJxoXlAbVywI8vEiurVXEj1LwuKfMKkXly0ltq6CLJtijybDV5DfzsmCrX9rKOEGoCcfQY5LCo8pGk-P2CvVyb6lxHGdYF1CiEAX1am9nCUsTmOdwgnKnTo2Xz7bFNeT8YzYYpQ3GLGlmU1pSm3aV5S5m686meRr8VYzl17IxmXcmO65UotlG2uVHP+kh1geXvL8gT0KkZbkiAS1Qa2JV5RAXkeWhugVqLXiSu1ZMr1iN2YVaZgVGzemRivBWdVnWhmtuK1qQ3FrEZAJQ3htLu7wLuifWxJQRR00izt4uW-PhAVY655xtyyybXajWV98QyqIAToOptLIL9+4K2IP6rGbbE21KaHbWcpWWMRcFEAWsCdoeUpDelDpZvoEGu0ecON9S7-r-xEWiqXRZE2MioM8aVTm+4QW1afjomRaRlg3a-rfyQExsPtAbVISOteVpNMJ-YBHfdq+XhSEUhAUGDqIg1pMPCgc8Tm8sc0m4ICuKwnQquYlxb-S2AFYHQA2Wg7et76gWQQQZaMcoKTAiArUs5QPa6Ve2xXI-klDOBK15OjTQuwbUa0m117C9d7UZ2uaFN3G1DdAHQ1rzh5pTG9u5PrVQaMqXKnvCEEk759T8d2zXUmt+K5y+IRSJoEbyBUTKUh52vieCuWjwauop+FzUZsB1Iz9Ab6JyM+XTWlK2FAHb9YxjSX5qApflcXT2LOmPk7EYsc4IUpSyUB4If1HnRmqj0dTvd8axaf2A12B7mdHWsWD2s950AnwPmyzSnDz2R7JlgsirP0rSJ6cYI+W+paWuoYy65dSAuRcboDbkrPGWaxOr4Tp2RCy9Y2rjabQknoQ86zgFZBGsN0Jz+ZfTSncrvoGegpNv2APbPuznJq3Z9k5Lv-CcairC5MUrnqPrDSTzuV3UKfRBNt3l77dbdKJSKOZWirLJw+2KVqpW1TytxT+8ivju70V7hYqYh9Q4Dd16iXhStcfgAfKk1M9ZB+1THPtXoHbxiqwFIHxDRrXgsAc6NAI3PgWsrxukgWrYM3q31kFhe+gIqXrAMma6Ku60PPByzEMbyaINGPUf01pMDv5DB6LduuBB5DVxqmhvfNlO3jitx8ZLgwfmva0GSxAOo-Q7oRq0LjeYkCwJLCgB6sn8mlG5r5rDksLwdKsVvaXHJphtfC8h2fqgaT3zjl6imvjKUnuC5x50GAXiFtKb25toeX2p8QqPDaWHIhouxHeAee3MQFCq+kgwkrwo2KORxbCfsAcyYmEbD4tIrShUYK6hiDyKyIxN3RWDN5R+ygnP4aaz8HCtRi4EP5zoCV46+i22tBQftJUGD0r3KEbOJa31K0NKWMgrIOw0G7L52iDwxvpH0mH46Mh13MXp+FwVggWkhlXQQunGztIpAPVqQAJY64yBXsjUErV-3sqC+znHw+XMf1fcttnKCY8EejAlAPNcHIVd5sVpdK2V6s55hPXakT7K5+fWCATrgxHGO1t6waXAJSCsRH8CAPQ2Iajx9G61Lw4yfMJY3crbZ7Gyiu8anU6to5MACwLqA4hTpCAl4QpCDuamXJgTP9PNlvq6Eq7RjelSxgcafiwmSj1GhpRlKBnKbAoyW4pKlv0OfIWFZBwNlltoz9KQwhR8AuMfqXniIAeLcki+m81zMTBeBs0MUqyPp4bFLyhUe7W5OlkTC5JtrSnrKMla5KJYcVNXwq3r8xDf2Fkzt1qMcnhmDipHoEVQPKmJt7W4WICIULe8Ug5Wn3uMrWY7dsZqgvI6tp3jxGDNuVS07tutMhHqT8KaAOZRXjFKcT3Ez7TKfBWByFTljF-W3D9OPbJdLQS5bVDGhRgkBbucVY8tN19LSFTxyAf2FG2fZ6lhgnEjgdgW6mBNA6jHQuzH4Xbm+AQBU-7t9NB7pt13UpEStZr6rDDPS9hWTxm6Bz4jJZpMxLoDOhMlVQq67iKJGBZBq8OeqrdUf8SQ77SOxz0+TXm6Dg2zxxnlqzs4h0jhMyQRkWNBXkdKmTrM5c+420WhDog8R46AmdLO7noUzvT3k-TKSFJfWEZ1FVzy0VP9FWq2xqPEYZ07nGDMgvMowHpwDQ8WkcXxVef6apFjRxbJjLb1AtwnyGvexZP3pOBVn5dGxq3LfppTarVJppiQbya13z7BpU58ojBajjmVsRr6hbbzsc74VtjwxjBF9jjNoWSjuQ0-SHVS7V44AMAQgBibuXf7rNTGtuautNzxHYIM+p82-ol5wrMMCKmzjYABUoNvzNxjfFprDT7y4eH2Jo2Fq70N0xzyelIzgv3MBlzgpOlY8SsDZaXhNZCQY1GXN3vYJ+vulKaZfqVmb4G-EJ8NWdWOSAmm+Fi2S5eTnAKMJxl0c-UrpyFItGFSevTWbWMlD+jiuyS-HS1kq8IguOkvY+bMu2GWglJzC66qKTurDd2Z5iyPoyscL2LYshU9BECMpoCryRtgZ8ajlhrKpccyPOvszhGHxEom+YVlcAaVTvT5FxSwCwfzvomoJTUVQt1CsPY8xzyqccVw20mWlT6B7Yfqz2EWAWAejLS8cIDYhDplHDOrAqcyWHHJjx+u9fgJdXlrZdOF4GVO3KBiQ+gVJG0NuYV0372FKS1Sble+YqI4KQYTa7CsYJYBMMVxz6wtbJUuXpx9AzSg1f7CPngbz5pIAaxSwIA8gYsXusscVqbaINxFqnYgYt1HwRzSN3KijYmt+cw10k5EwgG5lYnNMW8pOeyfQQn005PB546AYbqU2HVUxnXSvK4j66uIXRyG7eJvkm7+dTahGxY3Js82rryho2buAvGmkRTeGEpF8EdO18LWxZqU1fOjM-aSRxlyirzZ4vwmSt5QfIG0BUBZi5b8FmHk-1xn7KI+zreS6bZVMWWWgtp+hSkEvBCrIi3ZyYQOF6s7SrBbp3I3Zv2VpKFT+N+W8+eUVrJTsJQMUQudtsh3IzmOp5XxP6XMYybbtonVZfaViMtL-VlCdmvb1GWxj+d588Kgiq2U6R6KGdcsBir6GL66d7pQ-1XM0o0mV7I20j22KkmU07tq06qdMoME67yQBu2intEt3AT2xcW9fq5q6Xu7dVs6+xuRtlmoF2BmMMXb7PTTWbuMMqfWT7yd7q7YF6ZoN2RSwWdbYOspTkbDQAWBJMk0+xTfqX5LauzFHSFSGfJJWgraObmzmZSFZ3VBJCrqX4fY2D24Mw9-06Pa9u0K6uerOaIwHqB9rkrruEy4A8x1d2sc-S9vHGec2v3nz-nZ3SUFz3XHS7nu1QbKf2UxAFTsEVA9A+TMTnckl9kMwwVr2-37L+qhe6wpb2pEzDXCzqXrKatQOC7QZ+hfSOUDHnxUp5rQOeb1OaZ27XBaHqA4VIxGuFhZ7qvQbjvn3Ku5UarjGFHjVQRWwZogeikIBmCIAs9tB9nn83lkyleZu86QqJOHiN7Nd8e1wl4SB3zqsEHh6ybbapF3lo60B1ubPvoWYG6pqzGQCna65wyWl-x0aeSVW9Zh51ghzo-CcJsrLJOsnRVes2w26rexvVUtL8qMPxzsDu+g-TP3pZB66W6G9-gtUyNV1W4xG2E4pP82Ori+xTuEdfWn4lHTlhmHcaGvicoTeq6CAw4Vvv7it1YtoFAFmtYmBwta3E7fIPtSWdOStKuSbfxV8XqYFUDG5xHAjCXRL+1nh-04afASmn62pHtBEgdskJnGBh9CO26wis1VLK7R3U8kODX7SoD06y44slpOTCpT8y6UZMD8nBTeucwMkCOp64GbrdwIlfu0sPZWLINVdaGHiPw7CHuj0NZ04xrxRKAMLwE4EUWcS2XhMamRsNfezsAxrJZwF4VZbrXWu1wYqeN1bywDhWVK0P9sA8GZvLxOwaBU9sWpcg2ZZ96p-NaExvhkJDqgaIGVkGYzSw2HKvVYEVeO3OKLCBEDZ6Ext2WVOx0a4-06WvVMYNSwkjexvGcqvoOstUPKBhYD8t3DSj-q1K8CduWDuUQPl+tZKeCuUxzqstReFsoQAAoLzno-NaqsLt9LztcTdrN31fcBXpr2+m0Y4gdHJe+LmxzvEcthd+dBT4uiVyVdtwaXrVykwncmD2iM2oI-a3vdzOtV+ldgeI7dtypeB6l3txBzkGQdzowROt+F6XewfJ5V1EbvVXJZrftmo4E9hu3tbR39g8Nv9Ze-lx5dNbrdo7vt8+byRX2o4z6jiC29FXB2JX7OYdcBMu1929KvbhurW6IclaSHDOVd6+oHDkPtlYKw2-g6zdq0xHwjBxKKLpNgB8p3RtLXrakArOLk4KvNS68fOHvMXOk6JVHFkczq4n1x-x+HftKYqZlmj1x3O6A9QpvbXirHtpHcMGmWuSL3iuG0qWV2tH8lwDxk8d3VRCA-YcWFMHQ9D83n1LQ0y5fqbN9eX7Gwj2-f0emZMM9I-EjZiplMmZNn7r7VCOQszjHFutg9-29NbyCrKNlOyjx71OXnaPWHxx0lNiOEIvuEWlNER7NsM9wpSW19ylrFiyebH+tJR6ydNw1XQo-S0DFW8Q-EeOBvLeoPy096TB4rNmZYNgAZwAABCT5ZVBlDl4nO3RvlDMqWkXGmNnrT9iWl0VrHrqfQ3Xwa+tW4Q3GtMN9lcjbemwvHttq-YfZCdNQ9WNpY7E8N2NWKdnzryXNNihVvtHJhTTxl8pO+XAuqJ9EyWCqhPXFa2xOxyCcV3hWVdlzsiwB6R1iwdItlHC8+pqd22g37KvVyZPE4Z4+X6Xke57cSCqGVIOPEoNodtmxK57Y3hquy8c7Jzna5Lg7sxm5MX0RHsUar-N8y-a6HD5QVLmLEhBMhK+6q6rYeS+2yuZuzNTvX1-jvMH91w70Vb04Y3XwJ5yX+snxvPrXO5vMD-2ld-prK2BT+LYU6z0Bia3tTTp150S5-NjlAv27gs8d5Atif47cA6-nAD1bIQej0EPp7-VUfb6DLZdqFSx8J+YHifpPm7mAAOGFeU3Mw79xwvOGMCRPJZ871D+BfSUw1MkyOhg-G8Jfuf3k8ubYAVOKPIfTDqje06HiaiZYkodDTF56On4x3BIvM1XQMudFRn-zvyoL6V-Q-KLeStj9VHTP1RBL7QUGBt6TewRmbLFvM4-e5UzfqVueM32U4W+M8TgCaJAbBDbeZrpXF7Jp1bqR7HR1PcGX30C516gv8WV498Frcq3f6Jf+ev9snQ6mrq4oMd0T1V7LNTnG3TS2Z4m7-vYmhNm493+kM8x+SNelX03z3si8PWLNNjqIJz750TyITgDdMV9wP2aV3XdBY1aHRSwjZqYitXxxTsGdhoBdPk90CEpsgh-h8Q-pQ5M8DOPvsnmruzo1ChuS+wrAHc4ZueNur+osQvnXtHK+GK0Af8Xx2iV-QQy+O55EWWwmbX9U27PWTwP9WGD8MbsPOPgywzwl-aIHTJ3-Wz0ZUB3cxUnteAfSS28cxTTRPU6rAo1yJPrCQjADwvD1lYc02a+251dfP9n-9dlcFXTlz6AcFO8j4c-3N9hfUwGPcv7Q3HgVNMHhwodufD33rJw2Ty2X8TfUZHQCMvadWDEZRZl3ngr4Wdzv8MGaPSi4juYyxudyA4fzslKnUrRSwDnESya8dRTP3gC3RM50IDxOeCnYD9TM-zuctrdGxXdTccXzwDj1D0TjU4dUAIoC-fOl0VsF9coknhkTBr0YAjnQ3Xa8lnRzlJdgJYmwpdVSUkT0D1-Ezm2dCVPGxo9YDN0TvkJ5aS13c9abYhn1uAi70pM0bXL3fd9DK0AAcD-ObDE5lJVdQTxO9UbQSChfWrxK1zNUbwx8EXePCkNZpHl1WsrnOWzQDrAhP3hNRfbpzSCBweFyct8TCeif8p5PIL1UFfEWkKDKA4q1b9K1LiHRQXrekGsc-7WuGED3nL1QIJfrYBX+syKQG0H9Gg2lxi1gQNAEfw3VT3jRRJgvoGmD7LD61d8R9H6zqsULWeR4Z1gmQJzRGXTGgzYDg8GyODIbF0R29QTfXwO8f1PnyR5NMAoI2DWrLYJMBzmNQ2WRNDbQzsA2AJ30r9UrDr3ZUZ5TWVQVfg1YOOgpAoYJsDgQloFjcMNCqArwp4IVU4dWaWYJ1caOL4PhsUQw8XRDAQ5ukpN3NUjgZAHTHGwK9L5dgFE95grWG580JJVidw0XYQIaC7g0+XitFjEb0N04XCS351vg9YlsVciAII-8PXTuj70ovdvz-tk3DoKapEvbBlBUTRPNQq9Y-HKxpCTmLENMBRfIfz1YK-eyz393AjOzdFdFJ-gokr2IR3z4HzOUL5t6XG022sUsI1gsBggIVQBMk3c0w-xDrBdlOEvdWERP8kedHQFDAgwOhGBSAYBCdQJQX0Posd-OSWr9hOe+xXtXOWoL0p57V0JKNjQ76hUtsMSAFx5vHLLkVdAfdhW5CO5HwDGt9Q6QOfNY3eNxhDLQiAjOCIgmq04VfVadyR5bgmMKHY4BGMHAhjtJAVv8OQ8im5881WEV7DcwzgJ+RfCVjyBYrlDMzEtX1SxlJC0OAgKh1FhcuRIhX-Vf01YL-c22rFIqMSA4guPBnEM9VQgez-8H-CrB8DlSWhy+43-I8MoCdeAP3RAyfV9RCt3dF4Rz8TrQ13g8xmCAizdFwxnwecKPEcMH4ejOEI8C4DKcN3CO5cNmAtC-USnAikPYWDyFMMY80IlGbff3CDFJWfxpQHjHyQjR4jPj0GC3wmwLzc4BS8EMAP6Ho3KDOg+8MWgoKCfSisizV8NaNddVeUw0K8W2Va8CItQK55odZSSbVVMfBzICMIt0LsCoUOK3PlQg0wOqtJQmnRiCxmU-HRDqIoF1q8WggQO9lrQxe0dppfMrzbgybbiIHClxOQIn83rNwLScJwzUO6DHw7WkpCNI-kPQjtI2lySDPQwkLFg-vLEyK8RAslX192LHKwojDw-QMHCmfUVBZ8OIfyP0MhAwyIqDv8any1DHXIAh697ZNCK4DPI1qx15hUMSCfpOIFgFwAOfDsJv1YbVdW8gKIpvxyjxPQqPKon8JhVFV-gvJ351V1cB2uCBwQf1yjm6HXhKsOIeCHYhzAXDQY1Uo4+iQjeg2cKyj4g3qKNDBDE4xI5PNIMDmcEopi0IiuaDtzhISMAy0agXXLSMFDbwXiLWRhw19FTDXJQMKCiUorsOksnQuoIsj5Qkf2CDz9csPjk4AgLReFIg52g6jXI6TVdc6oyyKxcHA5-DxdQg5iN-ovAkBynFMosZgh8qIyKIRofImIDPcEo7V3YMtVSaM98M3LmwbCZItp3dCbEH7zDx7ADNgsdkgTIAqQXgokMmFp-K6PHEgfEGku11nNdgvoHogQ3atp8JQFnxmaf0L-sK0TIPjxJvQZmocO5GWz1Vq3eGOjchXPIF3ZDg6mLkluojd3ERufQDlAlhPP4O5s0AuaMfYFohLG2cYwBky0BNLW+zQ47Q-MV793sD7z1VQIiKMBj7AvOi6tgyceBvAm5MIOb1HOREJ3EqJZmLNN-ohcO1i3WFX2MxquApTJiudV9XbClY2IEccRYgSSiAKvA6OfMk-IUy4QkfedQz9IPHbi+1vnGbjqwRzW2MwjUjQ3i7NCQ4u1tdR+LaP5wYddWL0pT8aSIDjnBOz1fM50ZzxSAbMDW2-CmTdFzrNkJShyh1+lK0BqiwIhuPVFP-cR2UB++X8Vbt1QseUzDJ3QAJCd8+TTGHiH3JNh-4QyT3kvCanBjUyZODabxC8xmF4wLjwAlnXHj148CE94IGMpG61yfHeLnjk8S4Kj893Y+IwCh2Kc3ghn8KvApAUTFQEa9MTVGLviMOJp04jiTWqP9ifLY9xGBzwikDwsBY+p0QjXOYCOk0X4ngM-ES-JO3L9t4umMldtwh+3SEXbHtxQSLvfKPHsoAhux4QyY16MjxyopewHNnI9YiCwaotmNfjBVRd0SsnvCcO6g8zGsIEladEgNACR436Q9dbrMtWwt9nK4zGiVYzGJJsQhPWVxjBEl2Q5iQQnyMxsImUHmrwb-azRCiadJBN+x93LWIRizmFRLy8WvWLy0S03HfU5s+wzWI8jDE9xUgjmfGzHaAKQVB0r8Z45Z3510o6UN0TB8ecNbg8Y1BPIZvbe1CgB5zeWNclNw7v0bUouHxKc15E+pVmcK+QknMAtDFLBZCsTSJLMC2LKLhriso+cgCTEgoOOxDjolsIkTsExNBuiQtMa3ySFE+lQJiTAUf1S5FaGhI3wvomnw4ZK3WWwKDakm4TkiIiY6NxDUgsQ1w9ykshHJDVJdSJZkiEooKKSQAHEOFs0UJuysc8bcxOUkpQ1kndAKvHqLsTR0MNS+EhVC0NZoRkicJlVVI1SSfiA1WaJ2SrfIFlDjrpIBAghWwlTlLddvGOKolfnP6OYTAkhAmTjVbJH1LBnYCYKpjjgo5ND8H+bUORcYdGGOqlpk98J1ZLwZuOBYXPbumN5PgOmCQFMkyEVYid8ehLxwVgvJNhSbAkhI7MjgEuPCTv2KOK3cqHXFIPxg0Ma22Tnzd2T6BdnC4xWTRk-v2zULYp8MmSMlbKPAS7YqwmrF6I5IFnQn8UvTKTOE4uhBppE97Fe5zrQlKaDtPLJ0MA24rBM4TcErTiolfo-fXciAYwuLHsASDDBSTsMMVzHCqwjDi5SasNWhdcV458x2DASSqDNZ3rFpNEDnOanUN8fY1YOghbUj4yy9zQErUlANyaYDZTJUhBNp8Lk-ZhsS9Uk+I-1y1BFSnjATdxKyTnaSOw7kYgWSyjT+U-VL3M0AKyiRN9ItYxOcIY4iKxwaUvzQjD+heoNsTqFP4BNCsIAXltB7QR0GdBXQd0HnxvQX0H9BlAacmogtgUeKvxDZE8S2FjwIAA), then the tooltips *do* show up. Is this simply because `altair` is using `vega-lite` 4.8.1 while in the vega-lite editor version 5.0.0 is used?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2429/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2429/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2426", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2426/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2426/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2426/events", "html_url": "https://github.com/altair-viz/altair/issues/2426", "id": 823320073, "node_id": "MDU6SXNzdWU4MjMzMjAwNzM=", "number": 2426, "title": "Arranges to run examples from Altair's Density Transform", "user": {"login": "vcuspinera", "id": 53915521, "node_id": "MDQ6VXNlcjUzOTE1NTIx", "avatar_url": "https://avatars.githubusercontent.com/u/53915521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcuspinera", "html_url": "https://github.com/vcuspinera", "followers_url": "https://api.github.com/users/vcuspinera/followers", "following_url": "https://api.github.com/users/vcuspinera/following{/other_user}", "gists_url": "https://api.github.com/users/vcuspinera/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcuspinera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcuspinera/subscriptions", "organizations_url": "https://api.github.com/users/vcuspinera/orgs", "repos_url": "https://api.github.com/users/vcuspinera/repos", "events_url": "https://api.github.com/users/vcuspinera/events{/privacy}", "received_events_url": "https://api.github.com/users/vcuspinera/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-03-05T18:29:03Z", "updated_at": "2021-04-01T18:12:21Z", "closed_at": "2021-04-01T18:12:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was trying to run the [Density Transform examples](https://altair-viz.github.io/user_guide/transform/density.html) from Altair's users guide, but they didn't work out, so I made some arranges and could run them. I just wanted to share the changes that I made to make them work in case you want to double check the examples and make any corrections.\r\n\r\n## First plot -simple example-\r\n\r\n__Original code:__\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nalt.Chart(data.movies.url).transform_density(\r\n    'IMDB_Rating',\r\n    as_=['IMDB_Rating', 'density'],\r\n).mark_area().encode(\r\n    x=\"IMDB_Rating:Q\",\r\n    y='density:Q',\r\n)\r\n```\r\n\r\n__Changes to make it work:__\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nalt.Chart(pd.read_json(data.movies.url)).transform_density(\r\n    'IMDB Rating',\r\n    as_=['IMDB_Rating', 'density'],\r\n).mark_area().encode(\r\n    x=\"IMDB_Rating:Q\",\r\n    y='density:Q',\r\n)\r\n```\r\n\r\n<img width=\"346\" alt=\"image\" src=\"https://user-images.githubusercontent.com/53915521/110157821-43310680-7dae-11eb-8741-96298c9d9a82.png\">\r\n\r\n\r\n\r\n## Second plot -facet density plots-\r\n\r\n__Original code:__\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nalt.Chart(\r\n    data.movies.url,\r\n    width=120,\r\n    height=80\r\n).transform_filter(\r\n    'isValid(datum.Major_Genre)'\r\n).transform_density(\r\n    'IMDB_Rating',\r\n    groupby=['Major_Genre'],\r\n    as_=['IMDB_Rating', 'density'],\r\n    extent=[1, 10],\r\n).mark_area().encode(\r\n    x=\"IMDB_Rating:Q\",\r\n    y='density:Q',\r\n).facet(\r\n    'Major_Genre:N',\r\n    columns=4\r\n)\r\n```\r\n\r\n__Changes to make it work:__\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nalt.Chart(\r\n    pd.read_json(data.movies.url),\r\n    width=120,\r\n    height=80\r\n).transform_filter(\r\n    'isValid(datum[\"Major Genre\"])'\r\n).transform_density(\r\n    'IMDB Rating',\r\n    groupby=['Major Genre'],\r\n    as_=['IMDB_Rating', 'density'],\r\n    extent=[1, 10],\r\n).mark_area().encode(\r\n    x=\"IMDB_Rating:Q\",\r\n    y='density:Q',\r\n).facet(\r\n    'Major Genre:N',\r\n    columns=4\r\n)\r\n```\r\n\r\n<img width=\"448\" alt=\"image\" src=\"https://user-images.githubusercontent.com/53915521/110157884-52b04f80-7dae-11eb-8f40-9571c8a004c2.png\">\r\n\r\n## Spelling\r\nAlso there was a spelling mistake with the words __density__ in the following paragraph:\r\n> _The density can also be computed on a per-group basis, by specifying the groupby argument. Here we split the above __density__ computation across movie genres:_", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2426/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2426/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2423", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2423/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2423/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2423/events", "html_url": "https://github.com/altair-viz/altair/issues/2423", "id": 817516309, "node_id": "MDU6SXNzdWU4MTc1MTYzMDk=", "number": 2423, "title": "TimeUnit Transforms: Different behavior with mark_bar and mark_boxplot", "user": {"login": "suddenlyfleck", "id": 58106451, "node_id": "MDQ6VXNlcjU4MTA2NDUx", "avatar_url": "https://avatars.githubusercontent.com/u/58106451?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suddenlyfleck", "html_url": "https://github.com/suddenlyfleck", "followers_url": "https://api.github.com/users/suddenlyfleck/followers", "following_url": "https://api.github.com/users/suddenlyfleck/following{/other_user}", "gists_url": "https://api.github.com/users/suddenlyfleck/gists{/gist_id}", "starred_url": "https://api.github.com/users/suddenlyfleck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suddenlyfleck/subscriptions", "organizations_url": "https://api.github.com/users/suddenlyfleck/orgs", "repos_url": "https://api.github.com/users/suddenlyfleck/repos", "events_url": "https://api.github.com/users/suddenlyfleck/events{/privacy}", "received_events_url": "https://api.github.com/users/suddenlyfleck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-26T17:00:42Z", "updated_at": "2022-03-23T01:10:39Z", "closed_at": "2022-03-23T01:10:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Consider these two plots:\r\n\r\n```\r\nsource = data.github()\r\n\r\nbarPlot = alt.Chart(source).mark_bar().encode(\r\n    x='yearmonth(time):O',\r\n    y='count:Q'\r\n)\r\n\r\nboxPlot = alt.Chart(source).mark_boxplot().encode(\r\n    x='yearmonth(time):O',\r\n    y='count:Q',\r\n)\r\n\r\nbarPlot | boxPlot\r\n```\r\n![visualization](https://user-images.githubusercontent.com/58106451/109331019-9d851100-785c-11eb-80f8-5c62acc4a161.png)\r\n\r\nTwo things seem unintended to me:\r\n\r\n1) the x-axis labels for the box plot, after a TimeUnit Transform `yearmonth(time)`, are too verbose.\r\n\r\n2) I don't understand the `null` column.\r\n\r\nThe Vega Editor does these things differently. However, I like the label arrangement of altair's mark_bar() better.\r\n\r\nHope this is useful for you to improve altair.\r\n\r\n\r\nAnd last but not least: Thank you for this amazing plotting library! I am blown away. Best thing since sliced bread, no shit. Thank you very much! Altair is incredible!", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2423/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2411", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2411/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2411/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2411/events", "html_url": "https://github.com/altair-viz/altair/issues/2411", "id": 812668227, "node_id": "MDU6SXNzdWU4MTI2NjgyMjc=", "number": 2411, "title": "Layered Histogram fails to represent null values", "user": {"login": "harabat", "id": 45575009, "node_id": "MDQ6VXNlcjQ1NTc1MDA5", "avatar_url": "https://avatars.githubusercontent.com/u/45575009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harabat", "html_url": "https://github.com/harabat", "followers_url": "https://api.github.com/users/harabat/followers", "following_url": "https://api.github.com/users/harabat/following{/other_user}", "gists_url": "https://api.github.com/users/harabat/gists{/gist_id}", "starred_url": "https://api.github.com/users/harabat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harabat/subscriptions", "organizations_url": "https://api.github.com/users/harabat/orgs", "repos_url": "https://api.github.com/users/harabat/repos", "events_url": "https://api.github.com/users/harabat/events{/privacy}", "received_events_url": "https://api.github.com/users/harabat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}, {"id": 474065442, "node_id": "MDU6TGFiZWw0NzQwNjU0NDI=", "url": "https://api.github.com/repos/altair-viz/altair/labels/documentation", "name": "documentation", "color": "c5def5", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-20T17:33:01Z", "updated_at": "2022-03-23T01:08:35Z", "closed_at": "2022-03-23T01:08:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## Issue\r\n\r\nThe method for making layered histograms [suggested on altair-viz.github.io](https://altair-viz.github.io/gallery/layered_histogram.html) seems to fail to take into account null values within the range of the data: bins that should be empty are represented as having 1 observation. \r\n\r\n---\r\n\r\n## Examples\r\n\r\nAltair:\r\n```python\r\nimport pandas as pd\r\nimport altair as alt\r\nimport numpy as np\r\n\r\nnp.random.seed(42)\r\n\r\n# Generating Data\r\nsource = pd.DataFrame({\r\n    'Trial A': np.random.normal(0, 0.8, 1000),\r\n    'Trial B': np.random.normal(-2, 1, 1000),\r\n    'Trial C': np.random.normal(3, 2, 1000)\r\n})\r\n\r\nalt.Chart(source).transform_fold(\r\n    ['Trial A', 'Trial B', 'Trial C'],\r\n    as_=['Experiment', 'Measurement']\r\n).mark_area(\r\n    opacity=0.3,\r\n    interpolate='step'\r\n).encode(\r\n    alt.X('Measurement:Q', bin=alt.Bin(maxbins=100)),\r\n    alt.Y('count()', stack=None),\r\n    alt.Color('Experiment:N')\r\n)\r\n```\r\n![layered_histogram_altair](https://user-images.githubusercontent.com/45575009/108603170-45eb2f00-739e-11eb-88fe-0b1468d33a1c.png)\r\n---\r\n\r\nSeaborn:\r\n```python\r\nimport seaborn as sns\r\n\r\nsource_melt = source.melt(var_name='Experiment', value_name='Measurement')\r\nsns.displot(\r\n    source_melt,\r\n    x='Measurement',\r\n    binwidth=.2,\r\n    hue='Experiment',\r\n    aspect=2,\r\n    element='step'\r\n)\r\n```\r\n![layered_histogram_seaborn](https://user-images.githubusercontent.com/45575009/108603174-4b487980-739e-11eb-9db2-c52d958f6297.png)\r\n\r\n---\r\n\r\n## Solutions\r\n\r\nThe easiest solution would be to suggest another method. The one below solves the null values in bins, but is much more verbose, and requires manually setting the x-axis and the legend. \r\n\r\n```python\r\ntrial_a = alt.Chart(source).mark_bar(\r\n    opacity=0.5, color='#c9d6e5'\r\n).encode(\r\n    alt.X('Trial A:Q', bin=alt.Bin(maxbins=50), axis=None),\r\n    y='count()'\r\n)\r\n\r\ntrial_b = alt.Chart(source).mark_bar(\r\n    opacity=0.5, color='#fcdab9'\r\n).encode(\r\n    alt.X('Trial B:Q', bin=alt.Bin(maxbins=50), axis=None),\r\n    y='count()'\r\n)\r\n\r\ntrial_c = alt.Chart(source).mark_bar(\r\n    opacity=0.5, color='#f7cccc'\r\n).encode(\r\n    alt.X('Trial C:Q', bin=alt.Bin(maxbins=100), axis=None),\r\n    y='count()'\r\n)\r\n\r\ntrial_a + trial_b + trial_c\r\n```\r\n![layered_histogram_altair_solution](https://user-images.githubusercontent.com/45575009/108603706-6d8fc680-73a1-11eb-9222-b1f4a707174e.png)\r\n\r\n\r\nAnother would be to fix the issue. If this is a vega-lite issue, I can move it there, but thought I'd get an opinion here first. ", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2411/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2411/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2398", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2398/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2398/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2398/events", "html_url": "https://github.com/altair-viz/altair/issues/2398", "id": 800104239, "node_id": "MDU6SXNzdWU4MDAxMDQyMzk=", "number": 2398, "title": "Pandas dtype: Float64 is not supported", "user": {"login": "tzipperle", "id": 6015123, "node_id": "MDQ6VXNlcjYwMTUxMjM=", "avatar_url": "https://avatars.githubusercontent.com/u/6015123?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tzipperle", "html_url": "https://github.com/tzipperle", "followers_url": "https://api.github.com/users/tzipperle/followers", "following_url": "https://api.github.com/users/tzipperle/following{/other_user}", "gists_url": "https://api.github.com/users/tzipperle/gists{/gist_id}", "starred_url": "https://api.github.com/users/tzipperle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tzipperle/subscriptions", "organizations_url": "https://api.github.com/users/tzipperle/orgs", "repos_url": "https://api.github.com/users/tzipperle/repos", "events_url": "https://api.github.com/users/tzipperle/events{/privacy}", "received_events_url": "https://api.github.com/users/tzipperle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-03T08:38:07Z", "updated_at": "2021-11-12T16:22:12Z", "closed_at": "2021-11-12T16:22:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI have installed: python 3.8.6, pandas 1.2.1 and altair 4.1.0.  In the pandas version 1.2.0 they introduced a new \"experimental\" data type for nullable floats. I know that this type is experimental but a proper handling for nullable data is really convenient. \r\n\r\nWhen I use this new type with altair I get a type error:\r\n\r\n```python\r\ndf = pd.DataFrame({'a': [1, 2, 3, 4, 5], 'b': [1.1, 2.5, np.nan, 1, 3.3]})\r\ndf = df.convert_dtypes()  # convert b from float64 to Float64\r\nchart = alt.Chart(df).mark_line().encode(\r\n    x='a',\r\n    y='b'\r\n)\r\n```\r\n\r\n> TypeError: Cannot interpret 'Float64Dtype()' as a data type", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2368", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2368/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2368/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2368/events", "html_url": "https://github.com/altair-viz/altair/issues/2368", "id": 760548492, "node_id": "MDU6SXNzdWU3NjA1NDg0OTI=", "number": 2368, "title": "Concatenation disables tooltips / forces filtering", "user": {"login": "lbittarello", "id": 15511539, "node_id": "MDQ6VXNlcjE1NTExNTM5", "avatar_url": "https://avatars.githubusercontent.com/u/15511539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lbittarello", "html_url": "https://github.com/lbittarello", "followers_url": "https://api.github.com/users/lbittarello/followers", "following_url": "https://api.github.com/users/lbittarello/following{/other_user}", "gists_url": "https://api.github.com/users/lbittarello/gists{/gist_id}", "starred_url": "https://api.github.com/users/lbittarello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lbittarello/subscriptions", "organizations_url": "https://api.github.com/users/lbittarello/orgs", "repos_url": "https://api.github.com/users/lbittarello/repos", "events_url": "https://api.github.com/users/lbittarello/events{/privacy}", "received_events_url": "https://api.github.com/users/lbittarello/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-12-09T18:02:04Z", "updated_at": "2022-03-23T01:02:20Z", "closed_at": "2022-03-23T01:02:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Sorry if the issue has already been raised elsewhere.\r\n\r\nI've been running into trouble with concatenated charts. There are two issues, perhaps best explained by example.\r\n\r\nConsider a simple bar chart:\r\n```python\r\nimport altair as alt\r\nimport pandas as pd\r\n\r\nsource = pd.DataFrame(\r\n    {\r\n        \"a\": [\"a\", \"b\"],\r\n        \"b\": [1, 2],\r\n    }\r\n)\r\n\r\nbar_chart = (\r\n    alt.Chart(source)\r\n    .mark_bar()\r\n    .encode(x=\"a\", y=\"b\", tooltip=[\"a\"])\r\n)\r\n```\r\nThis chart works correctly and display the tooltip.\r\n\r\nNow let's concatenate it with an unrelated chart (inspired by [this section of the documentation](https://altair-viz.github.io/user_guide/interactions.html#selection-targets-fields-and-encodings)):\r\n```python\r\nx_selection = alt.selection_multi(fields=[\"a\"])\r\nx_color = alt.condition(x_selection, alt.value(\"black\"), alt.value(\"lightgray\"))\r\nselect_x = alt.Chart(source).mark_point().encode(y=\"a\", color=x_color).add_selection(x_selection)\r\n\r\njoint_chart = bar_chart | select_x \r\n```\r\nThe bar chart in `joint_chart` doesn't display the tooltip anymore. The selection chart works correctly: if one clicks on `\"a\"`, `\"b\"` goes gray.\r\n\r\nNow let's add a filter to the bar chart:\r\n```python\r\njoint_chart = bar_chart.transform_filter(x_selection) | select_x \r\n```\r\nThe bar chart still doesn't show the tooltip, but the filter works correctly and the selection chart is still fine.\r\n\r\nNow let's pretend to concatenate the bar chart:\r\n```python\r\njoint_chart = alt.hconcat(bar_chart).transform_filter(x_selection) | select_x \r\n```\r\nThe selection chart doesn't work correctly anymore: instead of changing colors, clicking on `\"a\"`  hides `\"b\"` completely.\r\n\r\nNot sure what's going on or if there's an easy fix. Any insight appreciated. :)", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2368/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2291", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2291/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2291/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2291/events", "html_url": "https://github.com/altair-viz/altair/issues/2291", "id": 702743695, "node_id": "MDU6SXNzdWU3MDI3NDM2OTU=", "number": 2291, "title": "Broken Example Gallery ", "user": {"login": "domsl", "id": 10066244, "node_id": "MDQ6VXNlcjEwMDY2MjQ0", "avatar_url": "https://avatars.githubusercontent.com/u/10066244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/domsl", "html_url": "https://github.com/domsl", "followers_url": "https://api.github.com/users/domsl/followers", "following_url": "https://api.github.com/users/domsl/following{/other_user}", "gists_url": "https://api.github.com/users/domsl/gists{/gist_id}", "starred_url": "https://api.github.com/users/domsl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/domsl/subscriptions", "organizations_url": "https://api.github.com/users/domsl/orgs", "repos_url": "https://api.github.com/users/domsl/repos", "events_url": "https://api.github.com/users/domsl/events{/privacy}", "received_events_url": "https://api.github.com/users/domsl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065442, "node_id": "MDU6TGFiZWw0NzQwNjU0NDI=", "url": "https://api.github.com/repos/altair-viz/altair/labels/documentation", "name": "documentation", "color": "c5def5", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-09-16T12:58:33Z", "updated_at": "2022-03-22T23:56:19Z", "closed_at": "2022-03-22T23:56:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey, I love the  example gallery of the docs a lot, because I always get confused which objects goes where after reading API, so the examples really help me grasp altair.\r\n[(Something like this aready confuses me alot :)](https://altair-viz.github.io/user_guide/generated/channels/altair.X.html#altair.X)\r\n\r\nSo I found several broken examples:\r\n\r\nhttps://altair-viz.github.io/gallery/simple_histogram.html\r\nhttps://altair-viz.github.io/gallery/cumulative_count_chart.html\r\nhttps://altair-viz.github.io/gallery/binned_scatterplot.html\r\nhttps://altair-viz.github.io/gallery/stripplot.html\r\nhttps://altair-viz.github.io/gallery/histogram_with_a_global_mean_overlay.html\r\nhttps://altair-viz.github.io/gallery/interactive_cross_highlight.html\r\nhttps://altair-viz.github.io/gallery/multiple_interactions.html\r\n\r\n(I stopped searching after the interactive ones.)\r\n\r\nI tried searching for an issue that already reports that, but I did not find anything.\r\n\r\nI do not know how to fix it unfortunately.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2291/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2237", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2237/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2237/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2237/events", "html_url": "https://github.com/altair-viz/altair/issues/2237", "id": 655662741, "node_id": "MDU6SXNzdWU2NTU2NjI3NDE=", "number": 2237, "title": "Sorted Row + Column with `sort` argument - Faceted Chart does not show data correctly", "user": {"login": "tonylee3399", "id": 16498167, "node_id": "MDQ6VXNlcjE2NDk4MTY3", "avatar_url": "https://avatars.githubusercontent.com/u/16498167?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tonylee3399", "html_url": "https://github.com/tonylee3399", "followers_url": "https://api.github.com/users/tonylee3399/followers", "following_url": "https://api.github.com/users/tonylee3399/following{/other_user}", "gists_url": "https://api.github.com/users/tonylee3399/gists{/gist_id}", "starred_url": "https://api.github.com/users/tonylee3399/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tonylee3399/subscriptions", "organizations_url": "https://api.github.com/users/tonylee3399/orgs", "repos_url": "https://api.github.com/users/tonylee3399/repos", "events_url": "https://api.github.com/users/tonylee3399/events{/privacy}", "received_events_url": "https://api.github.com/users/tonylee3399/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-13T08:44:44Z", "updated_at": "2023-01-16T19:09:39Z", "closed_at": "2023-01-16T19:09:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi peeps,\r\n\r\nI am running the code with the following environment:\r\n- **Python version**: 3.7.4 (default, Oct 24 2019, 16:20:49) [Clang 11.0.0 (clang-1100.0.33.8)]\r\n- **Altair version**: 4.1.0\r\n\r\nIt seems to me that the faceted chart does not show correctly if I facet it by Row and Column and throwing `sort` argument.\r\nI have looked into other [question](https://github.com/altair-viz/altair/issues/1703) and tried the `sort` argument with `altair.Row` and `altair.Column`.\r\nI'd really appreciate if you could point out something I am missing here. The following code would reproduce the issue:\r\n\r\nThanks!\r\n\r\n```\r\nimport pandas as pd\r\nimport altair as alt\r\nimport sys\r\nfrom io import StringIO\r\n\r\nprint(f\"Python Version: {sys.version}\")\r\nprint(f\"Altair version: {alt.__version__}\")\r\n\r\nselection = alt.selection_single(on='mouseover')\r\nw = 100\r\nh = 100\r\n\r\nx_domain = (-100, 100)\r\ny_domain = (-200, 200)\r\n\r\ndata = \"\"\"\tx\ty\tProject\tStage\r\n0\t-10.540327\t61.649657999999995\tP1\tS2\r\n1\t32.379704\t-130.71579599999998\tP1\tS2\r\n2\t-2.620516\t71.260701\tP1\tS2\r\n3\t13.978546\t31.711221000000002\tP1\tS4\r\n4\t41.391873\t88.070636\tP1\tS4\r\n5\t-0.303671\t-84.376145\tP1\tS4\r\n6\t-65.370553\t-7.694756\tP2\tS3\r\n7\t9.062894\t177.233938\tP2\tS3\r\n8\t17.029269\t-100.364923\tP2\tS3\r\n9\t13.354712\t73.78603100000001\tP2\tS2\r\n10\t18.781817999999998\t-109.3554\tP2\tS2\r\n11\t67.189193\t113.94348000000001\tP2\tS2\r\n12\t8.762746\t128.735548\tP2\tS1\r\n13\t59.287251\t11.017662\tP2\tS1\r\n14\t-2.4981430000000002\t-166.897776\tP2\tS1\r\n15\t1.1900870000000001\t-82.309501\tP3\tS3\r\n16\t21.938575\t-118.20861699999999\tP3\tS3\r\n17\t45.414544\t122.49246000000001\tP3\tS3\r\n18\t-36.322626\t-63.310702\tP3\tS2\r\n19\t53.568994999999994\t141.37641100000002\tP3\tS2\r\n20\t26.129929999999998\t153.706601\tP3\tS2\r\n21\t-3.9384330000000003\t102.90164399999999\tP3\tS6\r\n22\t-8.198288\t137.616797\tP3\tS6\r\n23\t-8.240618\t-146.80676\tP3\tS6\r\n24\t15.193395\t25.697023\tP3\tS5\r\n25\t20.886185\t68.356337\tP3\tS5\r\n26\t-22.101129999999998\t89.639481\tP3\tS5\"\"\"\r\n\r\nexp = pd.read_csv(StringIO(data), sep='\\t')\r\nbase = alt.Chart(exp)\r\n\r\npoint = base.mark_point().encode(\r\n    alt.X('x:Q', scale=alt.Scale(domain=x_domain)),\r\n    alt.Y('y:Q', scale=alt.Scale(domain=y_domain)),\r\n    tooltip=['x', 'y'],\r\n    color='Stage:N'\r\n).properties(\r\n    width=w, height=h\r\n).facet(\r\n    row=alt.Row('Project:N'),\r\n    column=alt.Column('Stage:N')\r\n).properties(\r\n    title='Correct Data in Faceted Chart'\r\n).configure_title(\r\n    orient='top', anchor='middle', color='blue', fontSize=16\r\n)\r\npoint.display()\r\n\r\npoint2 = base.mark_point().encode(\r\n    alt.X('x:Q', scale=alt.Scale(domain=x_domain)),\r\n    alt.Y('y:Q', scale=alt.Scale(domain=y_domain)),\r\n    tooltip=['x', 'y'],\r\n    color='Stage:N'\r\n).properties(\r\n    width=w, height=h\r\n).facet(\r\n    row=alt.Row('Project:N', sort=['P1', 'P2', 'P3']),\r\n    column=alt.Column('Stage:N', sort=['S1', 'S2', 'S3', 'S4', 'S5', 'S6'])\r\n).properties(\r\n    title='Wrong Data in Faceted Chart'\r\n).configure_title(\r\n    orient='top', anchor='middle', color='red', fontSize=16\r\n)\r\npoint2.display()\r\n```\r\n\r\n# Data Description\r\n![image](https://user-images.githubusercontent.com/16498167/87283645-15016c80-c528-11ea-834d-0d358a4d99d5.png)\r\n\r\n# Expected Plot\r\n![image](https://user-images.githubusercontent.com/16498167/87283055-7d038300-c527-11ea-95a6-9a144e5e6c2e.png)\r\n\r\n# Data is misaligned after throwing `sort` argument\r\n![image](https://user-images.githubusercontent.com/16498167/87283174-9ad0e800-c527-11ea-9671-bdc9360f7638.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2237/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2237/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2217", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2217/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2217/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2217/events", "html_url": "https://github.com/altair-viz/altair/issues/2217", "id": 643518823, "node_id": "MDU6SXNzdWU2NDM1MTg4MjM=", "number": 2217, "title": "Some example charts busted in the docs", "user": {"login": "palewire", "id": 9993, "node_id": "MDQ6VXNlcjk5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/9993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palewire", "html_url": "https://github.com/palewire", "followers_url": "https://api.github.com/users/palewire/followers", "following_url": "https://api.github.com/users/palewire/following{/other_user}", "gists_url": "https://api.github.com/users/palewire/gists{/gist_id}", "starred_url": "https://api.github.com/users/palewire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palewire/subscriptions", "organizations_url": "https://api.github.com/users/palewire/orgs", "repos_url": "https://api.github.com/users/palewire/repos", "events_url": "https://api.github.com/users/palewire/events{/privacy}", "received_events_url": "https://api.github.com/users/palewire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 262356187, "node_id": "MDU6TGFiZWwyNjIzNTYxODc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}, {"id": 474065442, "node_id": "MDU6TGFiZWw0NzQwNjU0NDI=", "url": "https://api.github.com/repos/altair-viz/altair/labels/documentation", "name": "documentation", "color": "c5def5", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-23T04:22:16Z", "updated_at": "2021-02-23T20:15:30Z", "closed_at": "2021-02-23T20:15:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://altair-viz.github.io/user_guide/compound_charts.html#faceted-charts\r\n\r\n![Screenshot from 2020-06-22 21-21-31](https://user-images.githubusercontent.com/9993/85360624-70fb4700-b4ce-11ea-852c-b36a18a1a3db.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2217/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2217/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2210", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2210/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2210/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2210/events", "html_url": "https://github.com/altair-viz/altair/issues/2210", "id": 641583453, "node_id": "MDU6SXNzdWU2NDE1ODM0NTM=", "number": 2210, "title": "Blank charts due to iris url not working in user guide", "user": {"login": "johnyrufus", "id": 4510962, "node_id": "MDQ6VXNlcjQ1MTA5NjI=", "avatar_url": "https://avatars.githubusercontent.com/u/4510962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johnyrufus", "html_url": "https://github.com/johnyrufus", "followers_url": "https://api.github.com/users/johnyrufus/followers", "following_url": "https://api.github.com/users/johnyrufus/following{/other_user}", "gists_url": "https://api.github.com/users/johnyrufus/gists{/gist_id}", "starred_url": "https://api.github.com/users/johnyrufus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johnyrufus/subscriptions", "organizations_url": "https://api.github.com/users/johnyrufus/orgs", "repos_url": "https://api.github.com/users/johnyrufus/repos", "events_url": "https://api.github.com/users/johnyrufus/events{/privacy}", "received_events_url": "https://api.github.com/users/johnyrufus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 262356187, "node_id": "MDU6TGFiZWwyNjIzNTYxODc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}, {"id": 474065442, "node_id": "MDU6TGFiZWw0NzQwNjU0NDI=", "url": "https://api.github.com/repos/altair-viz/altair/labels/documentation", "name": "documentation", "color": "c5def5", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-06-18T21:58:13Z", "updated_at": "2021-02-23T20:16:54Z", "closed_at": "2021-02-23T20:16:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the user guide: \r\nhttps://altair-viz.github.io/user_guide/compound_charts.html#\r\n\r\nThe iris charts are blank, because the iris url is broken, as 404 is returned when trying to access\r\n\r\nhttps://vega.github.io/vega-datasets/data/iris.json\r\n\r\nor when trying to execute the following code\r\n\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\niris = data.iris.url\r\nprint(iris)\r\nimport urllib.request, json \r\nwith urllib.request.urlopen(iris) as url:\r\n    data = json.loads(url.read().decode())\r\n    print(data)\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2210/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2210/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2201", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2201/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2201/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2201/events", "html_url": "https://github.com/altair-viz/altair/issues/2201", "id": 635309438, "node_id": "MDU6SXNzdWU2MzUzMDk0Mzg=", "number": 2201, "title": "Demo that \u201cquantitative scales always start at zero\u201d broken", "user": {"login": "pierre-haessig", "id": 1010404, "node_id": "MDQ6VXNlcjEwMTA0MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierre-haessig", "html_url": "https://github.com/pierre-haessig", "followers_url": "https://api.github.com/users/pierre-haessig/followers", "following_url": "https://api.github.com/users/pierre-haessig/following{/other_user}", "gists_url": "https://api.github.com/users/pierre-haessig/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierre-haessig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierre-haessig/subscriptions", "organizations_url": "https://api.github.com/users/pierre-haessig/orgs", "repos_url": "https://api.github.com/users/pierre-haessig/repos", "events_url": "https://api.github.com/users/pierre-haessig/events{/privacy}", "received_events_url": "https://api.github.com/users/pierre-haessig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065442, "node_id": "MDU6TGFiZWw0NzQwNjU0NDI=", "url": "https://api.github.com/repos/altair-viz/altair/labels/documentation", "name": "documentation", "color": "c5def5", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-09T10:27:59Z", "updated_at": "2022-04-07T09:08:03Z", "closed_at": "2022-03-23T00:21:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, \r\n\r\nI just noticed a broken example in the section [Effect of Data Type on Axis Scales](https://altair-viz.github.io/user_guide/encoding.html#effect-of-data-type-on-axis-scales) of the Encoding doc chapter (Altair 4.1.0). There is a pair of charts serving as a demo that \u201cquantitative scales always start at zero unless otherwise specified\u201d. However, in the left panel (title: year=quantitative), the zero value is not in the scale. Perhaps a smart heuristic was recently added in Vega lite, for example remove zero from the scale if the ratio xmin/xmax is \"close enough\" to 1 (altough I didn't see this mentioned in the doc on  [Continuous Scales](https://vega.github.io/vega-lite/docs/scale.html#continuous-scales))?\r\n\r\nThe following chart with the customized scale `scale=alt.Scale(zero=False)` appears identical.\r\n\r\nStill, it is useful to have this customization example (this is what I was looking for while reading the docs: in the chart I'm working on, zero is indeed included!).\r\n\r\nTo solve the issue, another dataset may be needed? I made some test with the cars dataset (e.g setting the cylinder, displacement of miles per gallon to ordinal), but the results are not great. Cylinders have not enough values to show how tick labels are simplified with the quantitative type. On the other hand, displacement and MPG have too many unique values making the ordinal scale extremely wide.\r\n\r\nBest,\r\nPierre", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2201/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2201/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2200", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2200/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2200/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2200/events", "html_url": "https://github.com/altair-viz/altair/issues/2200", "id": 635273566, "node_id": "MDU6SXNzdWU2MzUyNzM1NjY=", "number": 2200, "title": "Greek character \u00b5 resulting in corrupted characters in SVG produced using chart.save()", "user": {"login": "LeCyberDucky", "id": 19520383, "node_id": "MDQ6VXNlcjE5NTIwMzgz", "avatar_url": "https://avatars.githubusercontent.com/u/19520383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LeCyberDucky", "html_url": "https://github.com/LeCyberDucky", "followers_url": "https://api.github.com/users/LeCyberDucky/followers", "following_url": "https://api.github.com/users/LeCyberDucky/following{/other_user}", "gists_url": "https://api.github.com/users/LeCyberDucky/gists{/gist_id}", "starred_url": "https://api.github.com/users/LeCyberDucky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LeCyberDucky/subscriptions", "organizations_url": "https://api.github.com/users/LeCyberDucky/orgs", "repos_url": "https://api.github.com/users/LeCyberDucky/repos", "events_url": "https://api.github.com/users/LeCyberDucky/events{/privacy}", "received_events_url": "https://api.github.com/users/LeCyberDucky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-09T09:36:04Z", "updated_at": "2022-03-23T00:07:23Z", "closed_at": "2022-03-23T00:07:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, \r\n\r\nI'm running into an issue that I believe looks similar to this one https://github.com/altair-viz/altair/issues/1870, but that one wasn't resolved. I'm trying to use \u00b5 as an axis-label. See the following code for an example: \r\n\r\n```\r\nimport altair as alt\r\nimport pandas as pd\r\n\r\nalt.renderers.enable(\"svg\") # Only non-blurry way to show plots in hydrogen\r\n\r\ndata = {\"x\": [1, 2, 3], \"y\": [1, 2, 3]}\r\ndata = pd.DataFrame(data)\r\n\r\ntest = alt.Chart(data).mark_point().encode(\r\n    x = alt.X(\"x\", title = \"\u00b5\"),\r\n    y = \"y\"\r\n)\r\n\r\ntest.save(\"test.svg\")\r\n```\r\n\r\nThe example renders fine inside my editor: \r\n\r\n![image](https://user-images.githubusercontent.com/19520383/84130967-39a78780-aa44-11ea-99f4-8822edf78c7f.png)\r\n\r\nBut the produced svg file gives me the following when opening it in Inkscape. Notice what's going on on the x-axis: \r\n\r\n![image](https://user-images.githubusercontent.com/19520383/84131091-66f43580-aa44-11ea-94e4-25ea66030449.png)\r\n\r\nOpening the file in a browser gives me this: \r\n\r\n![image](https://user-images.githubusercontent.com/19520383/84131266-9efb7880-aa44-11ea-8e8c-a09bc827ffd4.png)\r\n\r\n\r\nNote that I type the \u00b5 character by using a button for that on my keyboard. I thought that this might result in a weird character, so I tried copying the character from the web (e.g. from here: http://kestrel.nmt.edu/~raymond/software/howtos/greekscape.xhtml). When I use that letter instead and try to save the chart, I get the following error: \r\n\r\n```\r\n---------------------------------------------------------------------------\r\nUnicodeEncodeError                        Traceback (most recent call last)\r\n<ipython-input-19-a102ef11db3f> in <module>\r\n----> 1 test.save(\"test.svg\")\r\n\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Python37_64\\lib\\site-packages\\altair\\vegalite\\v4\\api.py in save(self, fp, format, override_data_transformer, scale_factor, vegalite_version, vega_version, vegaembed_version, **kwargs)\r\n    445         if override_data_transformer:\r\n    446             with data_transformers.disable_max_rows():\r\n--> 447                 result = save(**kwds)\r\n    448         else:\r\n    449             result = save(**kwds)\r\n\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Python37_64\\lib\\site-packages\\altair\\utils\\save.py in save(chart, fp, vega_version, vegaembed_version, format, mode, vegalite_version, embed_options, json_kwds, webdriver, scale_factor, **kwargs)\r\n    104             write_file_or_filename(fp, mimebundle['image/png'], mode='wb')\r\n    105         else:\r\n--> 106             write_file_or_filename(fp, mimebundle['image/svg+xml'], mode='w')\r\n    107     else:\r\n    108         raise ValueError(\"unrecognized format: '{}'\".format(format))\r\n\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Python37_64\\lib\\site-packages\\altair\\utils\\save.py in write_file_or_filename(fp, content, mode)\r\n      8     if isinstance(fp, str):\r\n      9         with open(fp, mode) as f:\r\n---> 10             f.write(content)\r\n     11     else:\r\n     12         fp.write(content)\r\n\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Python37_64\\lib\\encodings\\cp1252.py in encode(self, input, final)\r\n     17 class IncrementalEncoder(codecs.IncrementalEncoder):\r\n     18     def encode(self, input, final=False):\r\n---> 19         return codecs.charmap_encode(input,self.errors,encoding_table)[0]\r\n     20 \r\n     21 class IncrementalDecoder(codecs.IncrementalDecoder):\r\n\r\nUnicodeEncodeError: 'charmap' codec can't encode character '\\u03bc' in position 3867: character maps to <undefined>\r\n```\r\n\r\nUsing the following results in the same error: \r\n\r\n```\r\ntest = alt.Chart(data).mark_point().encode(\r\n    x = alt.X(\"x\", title = \"\\u03bc\"),\r\n    y = \"y\"\r\n)\r\n\r\ntest.save(\"test.svg\")\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2200/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2191", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2191/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2191/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2191/events", "html_url": "https://github.com/altair-viz/altair/issues/2191", "id": 630326392, "node_id": "MDU6SXNzdWU2MzAzMjYzOTI=", "number": 2191, "title": "Altair 4.1 \"scale_factor\" seems to do nothing", "user": {"login": "zacharylawrence", "id": 4469505, "node_id": "MDQ6VXNlcjQ0Njk1MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/4469505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zacharylawrence", "html_url": "https://github.com/zacharylawrence", "followers_url": "https://api.github.com/users/zacharylawrence/followers", "following_url": "https://api.github.com/users/zacharylawrence/following{/other_user}", "gists_url": "https://api.github.com/users/zacharylawrence/gists{/gist_id}", "starred_url": "https://api.github.com/users/zacharylawrence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zacharylawrence/subscriptions", "organizations_url": "https://api.github.com/users/zacharylawrence/orgs", "repos_url": "https://api.github.com/users/zacharylawrence/repos", "events_url": "https://api.github.com/users/zacharylawrence/events{/privacy}", "received_events_url": "https://api.github.com/users/zacharylawrence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-03T20:58:24Z", "updated_at": "2023-01-16T19:02:11Z", "closed_at": "2023-01-16T19:02:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using Altair 4.0, I'm able to adjust the resolution of an output PNG with `scale_factor`:\r\n```python\r\nchart.save(\"filename.png\", scale_factor=2.0)\r\n```\r\n\r\nIn Altair 4.1, adjusting `scale_factor` doesn't seem to change the output resolution.\r\n\r\nIs this possibly related to altair_saver?\r\n\r\nAs referenced here: https://altair-viz.github.io/user_guide/saving_charts.html#figure-size-resolution", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2191/reactions", "total_count": 8, "+1": 8, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2191/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2163", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2163/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2163/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2163/events", "html_url": "https://github.com/altair-viz/altair/issues/2163", "id": 622142797, "node_id": "MDU6SXNzdWU2MjIxNDI3OTc=", "number": 2163, "title": "Interactive Legend is Unresponsive", "user": {"login": "hwilliams10", "id": 54678828, "node_id": "MDQ6VXNlcjU0Njc4ODI4", "avatar_url": "https://avatars.githubusercontent.com/u/54678828?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hwilliams10", "html_url": "https://github.com/hwilliams10", "followers_url": "https://api.github.com/users/hwilliams10/followers", "following_url": "https://api.github.com/users/hwilliams10/following{/other_user}", "gists_url": "https://api.github.com/users/hwilliams10/gists{/gist_id}", "starred_url": "https://api.github.com/users/hwilliams10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hwilliams10/subscriptions", "organizations_url": "https://api.github.com/users/hwilliams10/orgs", "repos_url": "https://api.github.com/users/hwilliams10/repos", "events_url": "https://api.github.com/users/hwilliams10/events{/privacy}", "received_events_url": "https://api.github.com/users/hwilliams10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-05-20T23:18:59Z", "updated_at": "2020-06-01T17:18:47Z", "closed_at": "2020-06-01T17:18:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nI've created plots with interactive legends that were working yesterday, but the interactivity appears to be completely unresponsive today. \r\n\r\nRunning the code in the examples gallery also fails to generate an interactive legend for me locally:\r\n```import altair as alt\r\nfrom vega_datasets import data\r\n\r\nsource = data.unemployment_across_industries.url\r\n\r\nselection = alt.selection_multi(fields=['series'], bind='legend')\r\n\r\nalt.Chart(source).mark_area().encode(\r\n    alt.X('yearmonth(date):T', axis=alt.Axis(domain=False, format='%Y', tickSize=0)),\r\n    alt.Y('sum(count):Q', stack='center', axis=None),\r\n    alt.Color('series:N', scale=alt.Scale(scheme='category20b')),\r\n    opacity=alt.condition(selection, alt.value(1), alt.value(0.2))\r\n).add_selection(\r\n    selection\r\n)\r\n```\r\n\r\nFor reference I am using Altair version 4.1.0 and working in Jupyter notebook.\r\n\r\nAny help would be greatly appreciated!", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2163/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2163/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2160", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2160/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2160/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2160/events", "html_url": "https://github.com/altair-viz/altair/issues/2160", "id": 621163530, "node_id": "MDU6SXNzdWU2MjExNjM1MzA=", "number": 2160, "title": "Legend placement on facet chart", "user": {"login": "kuchenrolle", "id": 20798845, "node_id": "MDQ6VXNlcjIwNzk4ODQ1", "avatar_url": "https://avatars.githubusercontent.com/u/20798845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kuchenrolle", "html_url": "https://github.com/kuchenrolle", "followers_url": "https://api.github.com/users/kuchenrolle/followers", "following_url": "https://api.github.com/users/kuchenrolle/following{/other_user}", "gists_url": "https://api.github.com/users/kuchenrolle/gists{/gist_id}", "starred_url": "https://api.github.com/users/kuchenrolle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kuchenrolle/subscriptions", "organizations_url": "https://api.github.com/users/kuchenrolle/orgs", "repos_url": "https://api.github.com/users/kuchenrolle/repos", "events_url": "https://api.github.com/users/kuchenrolle/events{/privacy}", "received_events_url": "https://api.github.com/users/kuchenrolle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-19T17:37:37Z", "updated_at": "2023-01-16T19:11:32Z", "closed_at": "2023-01-16T19:11:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Trying to orient a legend on a faceted chart does not seem to work properly.\r\n```\r\ndat = pd.DataFrame(dict(\r\n    one = [1,2,3,4],\r\n    two = [\"1\",\"1\",\"2\",\"2\"],\r\n    three = [1,4, 9, 16]))\r\nalt.Chart(dat).mark_line().encode(\r\n    x=\"one\",\r\n    y=\"three\",\r\n    color=\"two\").facet(\"two\").configure_legend(orient=\"bottom-right\")\r\n```\r\nThis should result in the legend being placed on the bottom right, inside the plot, but instead it is at the top left, outside the plot. I get the same behaviour when I directly encode it using altair.Legend inside altair.Color. With facet removed it works fine.\r\n\r\nThis is on `altair 4.1.0` with `jupyterlab 2.1.2`.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2160/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2160/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2124", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2124/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2124/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2124/events", "html_url": "https://github.com/altair-viz/altair/issues/2124", "id": 610180899, "node_id": "MDU6SXNzdWU2MTAxODA4OTk=", "number": 2124, "title": "Subtitle configuration bug dx", "user": {"login": "noklam", "id": 18221871, "node_id": "MDQ6VXNlcjE4MjIxODcx", "avatar_url": "https://avatars.githubusercontent.com/u/18221871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noklam", "html_url": "https://github.com/noklam", "followers_url": "https://api.github.com/users/noklam/followers", "following_url": "https://api.github.com/users/noklam/following{/other_user}", "gists_url": "https://api.github.com/users/noklam/gists{/gist_id}", "starred_url": "https://api.github.com/users/noklam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noklam/subscriptions", "organizations_url": "https://api.github.com/users/noklam/orgs", "repos_url": "https://api.github.com/users/noklam/repos", "events_url": "https://api.github.com/users/noklam/events{/privacy}", "received_events_url": "https://api.github.com/users/noklam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-30T15:56:25Z", "updated_at": "2022-03-23T00:56:57Z", "closed_at": "2022-03-23T00:56:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Expected\r\n![image](https://user-images.githubusercontent.com/18221871/80731943-27c9ef00-8b3e-11ea-80ea-34f3681d31ca.png)\r\nAccording to the documentation, it should align both Title and Subtitle, but it only changes dx of Title but not subtitle.\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/18221871/80731847-036e1280-8b3e-11ea-9fd9-d363399574d8.png)\r\n\r\n# Code Snippet\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nsource = data.cars()\r\n\r\nalt.Chart(source).mark_circle(size=60).encode(\r\n    x='Horsepower',\r\n    y='Miles_per_Gallon',\r\n    color='Origin',\r\n).properties(title={'text': 'Title',\r\n                     'subtitle': 'Subtitle'}\r\n).configure_title(anchor='start', dx=30)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2124/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2124/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2109", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2109/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2109/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2109/events", "html_url": "https://github.com/altair-viz/altair/issues/2109", "id": 606152563, "node_id": "MDU6SXNzdWU2MDYxNTI1NjM=", "number": 2109, "title": "Compound chart fails with faceted sub chart ", "user": {"login": "mansenfranzen", "id": 18086180, "node_id": "MDQ6VXNlcjE4MDg2MTgw", "avatar_url": "https://avatars.githubusercontent.com/u/18086180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mansenfranzen", "html_url": "https://github.com/mansenfranzen", "followers_url": "https://api.github.com/users/mansenfranzen/followers", "following_url": "https://api.github.com/users/mansenfranzen/following{/other_user}", "gists_url": "https://api.github.com/users/mansenfranzen/gists{/gist_id}", "starred_url": "https://api.github.com/users/mansenfranzen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mansenfranzen/subscriptions", "organizations_url": "https://api.github.com/users/mansenfranzen/orgs", "repos_url": "https://api.github.com/users/mansenfranzen/repos", "events_url": "https://api.github.com/users/mansenfranzen/events{/privacy}", "received_events_url": "https://api.github.com/users/mansenfranzen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-24T08:52:39Z", "updated_at": "2022-03-23T00:55:43Z", "closed_at": "2022-03-23T00:55:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi together,\r\n\r\nfirst I would like to thank you for all the efforts on this great library. It is my favorite tool for exploratory data analysis.\r\n\r\nThe problem I'm encountering is related to compound charts. Basically, there are two sub plots (bar and rect) which share the same data but are encoded differently. More specifically, the bar plot uses row faceting which might be the issue here. Here is a toy example:\r\n\r\n```python\r\n\r\nimport numpy as np\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\n# create some dummy data\r\nsize = 30\r\ndata = dict(\r\n    dates=pd.date_range(start=\"2020-01-01\", freq=\"d\", periods=size),\r\n    categorical=np.random.randint(0, 5, size=size),\r\n    quantitive=np.random.rand(size),\r\n)\r\n\r\ndf = pd.DataFrame(data)\r\n\r\n# bar plot\r\nplot_bar = (\r\n    alt.Chart(df, width=400, height=40).mark_bar()\r\n    .encode(\r\n        alt.X(\"yearmonthdate(dates):O\"),\r\n        alt.Y(\"quantitive:Q\", title=None),\r\n        alt.Row(\"categorical:O\"))\r\n)\r\n\r\n# rect ploct\r\nplot_rect = (\r\n    alt.Chart(df, width=400, height=100).mark_bar()\r\n    .encode(\r\n        alt.X(\"yearmonthdate(dates):O\"),\r\n        alt.Color(\"quantitive:Q\", title=None),\r\n        alt.Y(\"categorical:O\"))\r\n)\r\n\r\n# vconcat\r\ncompound = plot_bar & plot_rect\r\n\r\n```\r\n\r\nEach subplot by itself displays as expected:\r\n\r\n![image](https://user-images.githubusercontent.com/18086180/80193426-11410680-8619-11ea-9a3c-ace93d3bc4f7.png)\r\n\r\n![image](https://user-images.githubusercontent.com/18086180/80193467-2322a980-8619-11ea-8c83-8642b710be4c.png)\r\n\r\nHowever, the compound chart breaks:\r\n\r\n![image](https://user-images.githubusercontent.com/18086180/80193520-3b92c400-8619-11ea-8b0f-058a396c80f4.png)\r\n\r\nI was surprised by this behavior because I believe it that it used to work in the past with other examples. Hence, I tested a different vega lite version:\r\n\r\n```python\r\n\r\ncompound.save(\"SOME_PATH.html\", vegalite_version='3.1.0')\r\n\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/18086180/80193664-8f051200-8619-11ea-939e-fafb65486dd5.png)\r\n\r\nAll vega lite versions starting with 4.0.0 break, so I guess this issue is rather related to vega lite than to altair.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2089", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2089/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2089/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2089/events", "html_url": "https://github.com/altair-viz/altair/issues/2089", "id": 598962762, "node_id": "MDU6SXNzdWU1OTg5NjI3NjI=", "number": 2089, "title": "Transform Filter on Concatenated Chart appear to be cropped", "user": {"login": "tonylee3399", "id": 16498167, "node_id": "MDQ6VXNlcjE2NDk4MTY3", "avatar_url": "https://avatars.githubusercontent.com/u/16498167?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tonylee3399", "html_url": "https://github.com/tonylee3399", "followers_url": "https://api.github.com/users/tonylee3399/followers", "following_url": "https://api.github.com/users/tonylee3399/following{/other_user}", "gists_url": "https://api.github.com/users/tonylee3399/gists{/gist_id}", "starred_url": "https://api.github.com/users/tonylee3399/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tonylee3399/subscriptions", "organizations_url": "https://api.github.com/users/tonylee3399/orgs", "repos_url": "https://api.github.com/users/tonylee3399/repos", "events_url": "https://api.github.com/users/tonylee3399/events{/privacy}", "received_events_url": "https://api.github.com/users/tonylee3399/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-13T15:42:41Z", "updated_at": "2022-03-23T00:54:22Z", "closed_at": "2022-03-23T00:54:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, i'm trying to concatenate two different charts with linked interactivity. If I click on one of the `Choice` rectangle, it would only shows the `Category` that are assigned to that `Choice`. So, far so good, you can use the following code to reproduce it.\r\n\r\n```\r\nimport pandas as pd\r\nimport altair as alt\r\nimport numpy as np\r\n\r\nprint(f\"Altair version: {alt.__version__}\")\r\nprint(f\"Pandas version: {pd.__version__}\")\r\nprint(f\"Numpy  version: {np.__version__}\")\r\n\r\nnp.random.seed(77)\r\n\r\ndf = pd.DataFrame({\r\n    'Choice': np.random.choice(['A', 'B', 'C'], 50),\r\n    'Category': range(50)\r\n})\r\n\r\nchoice_selection = alt.selection_single(fields=['Choice'], name='Choice: ')\r\ncategory_selection = alt.selection_single(fields=['Category'], name='Category: ')\r\n\r\nrect = alt.Chart(df).mark_rect().encode(\r\n    y='Choice:N',\r\n    color=alt.condition(choice_selection, alt.Color('Choice:N', legend=None), alt.value('lightgray'))\r\n).add_selection(\r\n    choice_selection\r\n)\r\n\r\ncat_rect = alt.Chart(df).mark_rect().encode(\r\n    y='Category:N',\r\n    color=alt.condition(category_selection, alt.Color('Category:N', legend=None), alt.value('lightgray'))\r\n).add_selection(\r\n    category_selection\r\n).transform_filter(\r\n    choice_selection\r\n)\r\n\r\nrect | cat_rect\r\n```\r\n\r\nCode above produces this chart:\r\n![image](https://user-images.githubusercontent.com/16498167/79133731-18794080-7ddf-11ea-9e7f-e7c40069f2ff.png)\r\n\r\nHowever, if I initialize `choice_selection` with an `empty='none'` parameter on the code on `Line 16`, the concatenated `cat_rect` chart seems to be cropped. See the following code and screenshot:\r\n\r\n`choice_selection = alt.selection_single(fields=['Choice'], name='Choice: ', empty='none')`\r\n\r\n![image](https://user-images.githubusercontent.com/16498167/79133790-30e95b00-7ddf-11ea-8e2a-b03e23223f49.png)\r\n\r\nAnd it seems that it is related to the `canvas` of the JavaScript instead of the Vega-Lite:\r\n\r\n![image](https://user-images.githubusercontent.com/16498167/79134429-4743e680-7de0-11ea-97b0-7aa58e486368.png)\r\n\r\n\r\nI want to initiate them with an `empty='none'` parameter because `Category` field would contain a very long list of unique values. Is there a way to fix this? Thanks in advance.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2089/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2089/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2062", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2062/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2062/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2062/events", "html_url": "https://github.com/altair-viz/altair/issues/2062", "id": 593636789, "node_id": "MDU6SXNzdWU1OTM2MzY3ODk=", "number": 2062, "title": "chart.save does not support pdf as shown in docs", "user": {"login": "dlukes", "id": 2734517, "node_id": "MDQ6VXNlcjI3MzQ1MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/2734517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dlukes", "html_url": "https://github.com/dlukes", "followers_url": "https://api.github.com/users/dlukes/followers", "following_url": "https://api.github.com/users/dlukes/following{/other_user}", "gists_url": "https://api.github.com/users/dlukes/gists{/gist_id}", "starred_url": "https://api.github.com/users/dlukes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dlukes/subscriptions", "organizations_url": "https://api.github.com/users/dlukes/orgs", "repos_url": "https://api.github.com/users/dlukes/repos", "events_url": "https://api.github.com/users/dlukes/events{/privacy}", "received_events_url": "https://api.github.com/users/dlukes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2020-04-03T20:57:55Z", "updated_at": "2022-07-14T09:16:31Z", "closed_at": "2020-04-04T05:10:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "[The docs](https://altair-viz.github.io/user_guide/saving_charts.html#png-svg-and-pdf-format) for saving charts show `chart.save('chart.pdf')` as one of the options, but running that results in `ValueError: unrecognized format: 'pdf'`, even though `altair_saver` is installed and `from altair_saver import save; save(chart, \"chart.pdf\")` works.\r\n\r\nBy contrast, `chart.save(\"chart.svg\")` works fine.\r\n\r\nLooking at the [docstring of `Chart.save`](https://altair-viz.github.io/user_guide/generated/toplevel/altair.Chart.html#altair.Chart.save), it looks like pdf isn't even supposed to work: \"Supported formats are json, html, png, svg\". But maybe it's just a matter of wiring it up?\r\n\r\nIf the issue is more complicated than that (maybe because `Chart.save` is currently hardwired to use the Selenium backend, which doesn't offer pdf export?), then I would suggest just removing `chart.save('chart.pdf')` from the code example and refer users who are interested in pdf export functionality to `altair_saver`'s docs :)", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2062/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/2009", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/2009/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/2009/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/2009/events", "html_url": "https://github.com/altair-viz/altair/issues/2009", "id": 578589863, "node_id": "MDU6SXNzdWU1Nzg1ODk4NjM=", "number": 2009, "title": "Tooltips not showing up in chart", "user": {"login": "afonit", "id": 1798497, "node_id": "MDQ6VXNlcjE3OTg0OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1798497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonit", "html_url": "https://github.com/afonit", "followers_url": "https://api.github.com/users/afonit/followers", "following_url": "https://api.github.com/users/afonit/following{/other_user}", "gists_url": "https://api.github.com/users/afonit/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonit/subscriptions", "organizations_url": "https://api.github.com/users/afonit/orgs", "repos_url": "https://api.github.com/users/afonit/repos", "events_url": "https://api.github.com/users/afonit/events{/privacy}", "received_events_url": "https://api.github.com/users/afonit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-03-10T13:45:11Z", "updated_at": "2022-03-23T00:48:58Z", "closed_at": "2022-03-23T00:48:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have been puzzling over this for awhile.  I have developed a small reproducible example but I still have been unable to uncover the issue.\r\n\r\nHere is the reproducible example:\r\n```python\r\ndata = {'week_ending': ['2020-03-22', '2020-03-08', '2020-03-15',\r\n                       '2020-03-22', '2020-03-08', '2020-03-15',\r\n                       '2020-03-22', '2020-03-08', '2020-03-15',\r\n                       '2020-03-22', '2020-03-08', '2020-03-15',\r\n                       '2020-03-22', '2020-03-08', '2020-03-15',\r\n                       '2020-03-22', '2020-03-08', '2020-03-15',\r\n                       '2020-03-22', '2020-03-08', '2020-03-15',\r\n                       '2020-03-22', '2020-03-08', '2020-03-15'],\r\n       'impact_event': ['a', 'b', 'c',\r\n                       'b', 'c', 'a',\r\n                       'c', 'a', 'b',\r\n                       'a', 'b', 'c',\r\n                       'b', 'c', 'a',\r\n                       'c', 'a', 'b',\r\n                       'a', 'b', 'c',\r\n                       'a', 'b', 'c'],\r\n       'impact_level': [1, 4, 9,\r\n                       2, 7, 2,\r\n                       3, 9, 4,\r\n                       1, 7, 9,\r\n                       2, 7, 2,\r\n                       3, 2, 4,\r\n                       1, 4, 9,\r\n                       1, 4, 9,],\r\n       'typeof': ['g1', 'g1', 'g1',\r\n                 'g1', 'g1', 'g1',\r\n                 'g1', 'g1', 'g1',\r\n                 'g1', 'g1', 'g1',\r\n                 'g1', 'g1', 'g1',\r\n                 'g1', 'g1', 'g1',\r\n                 'g1', 'g1', 'g1',\r\n                 'g2', 'g2', 'g2',]}\r\n\r\ndf = pd.DataFrame(data)\r\n\r\n\r\n\r\ndf['agg_value'] = df.groupby(['week_ending', 'impact_event', 'typeof']).transform('sum')\r\ndf['cum_num'] = df.groupby(['week_ending', 'impact_event', 'typeof']).cumcount()\r\n\r\n# Generate the Chart\r\n\r\nselector = alt.selection_single(empty='none',\r\n                                fields=['week_ending', 'impact_event', 'typeof'])\r\nbase_data = alt.Chart(df)\r\n\r\nbase = base_data.mark_rect(color='green', opacity=.2).encode(\r\n    x='week_ending:O',\r\n    y='impact_event:O'\r\n).transform_filter('datum.cum_num==0')\r\n\r\ntextof = base_data.mark_text(color='white').encode(\r\n    x='week_ending:O',\r\n    y='impact_event:O',\r\n    text='agg_value:Q')\r\n\r\ndetail_breakout = base_data.mark_circle(color='orange', size=250, opacity=.3).encode(\r\n    x='impact_level:N',\r\n    y='impact_level:N',\r\n    tooltip=['impact_level', 'agg_value']).transform_filter(selector)\r\n\r\nalt.vconcat(detail_breakout, alt.layer(base.add_selection(selector), textof).facet(row=alt.Row('typeof:O')))\r\n```\r\n\r\nTo make sense of the data structure look at it this way:\r\n```python\r\ndf.sort_values(['week_ending', 'impact_event', 'typeof'])\r\n```\r\n\r\nUpon execution it looks like this:\r\n![image](https://user-images.githubusercontent.com/1798497/76318074-89df4400-62b3-11ea-8555-87c058585954.png)\r\n\r\nClick on the top left cell (I have left out coloring rules to keep the example as simple as possible), where the value is 11 and the chart will look like this:\r\n![image](https://user-images.githubusercontent.com/1798497/76318167-aed3b700-62b3-11ea-9ec9-a23c97a25aa0.png)\r\n\r\n\r\n**The issue is when I hover over the yellow circles, I am not getting the tool tips.**\r\n\r\nGenerating that top chart on its own gives me the tool tips, but when it is all put together, I am not getting them.\r\nFor example:\r\n```python\r\nbase_data.mark_circle(color='orange', size=250, opacity=.3).encode(\r\n    x='impact_level:N',\r\n    y='impact_level:N',\r\n    tooltip=['impact_level', 'agg_value'])\r\n```\r\nProduces:\r\n![image](https://user-images.githubusercontent.com/1798497/76318490-29043b80-62b4-11ea-8aff-d08a91db575f.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/2009/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/2009/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1996", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1996/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1996/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1996/events", "html_url": "https://github.com/altair-viz/altair/issues/1996", "id": 572093980, "node_id": "MDU6SXNzdWU1NzIwOTM5ODA=", "number": 1996, "title": "Ordinal scale turns into point scale when used for opacity encoding", "user": {"login": "pgorczak", "id": 1765698, "node_id": "MDQ6VXNlcjE3NjU2OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1765698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pgorczak", "html_url": "https://github.com/pgorczak", "followers_url": "https://api.github.com/users/pgorczak/followers", "following_url": "https://api.github.com/users/pgorczak/following{/other_user}", "gists_url": "https://api.github.com/users/pgorczak/gists{/gist_id}", "starred_url": "https://api.github.com/users/pgorczak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pgorczak/subscriptions", "organizations_url": "https://api.github.com/users/pgorczak/orgs", "repos_url": "https://api.github.com/users/pgorczak/repos", "events_url": "https://api.github.com/users/pgorczak/events{/privacy}", "received_events_url": "https://api.github.com/users/pgorczak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-27T13:43:43Z", "updated_at": "2020-02-28T09:42:34Z", "closed_at": "2020-02-28T09:42:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried to use my own ordinal scale for opacity and it looks like it's possible in Vega-Lite but Altair overwrites the scale type at some point.\r\n\r\nExample\r\n``` python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nalt.Chart(data.cars()).mark_point(filled=True).encode(\r\n    x='Horsepower',\r\n    y='Miles_per_Gallon',\r\n    color=alt.Color(\r\n        'Origin',\r\n        scale=alt.Scale(\r\n            domain=['Europe', 'Japan', 'USA'],\r\n            range=['tomato', 'royalblue', 'limegreen']\r\n        )\r\n    ),\r\n    opacity=alt.Opacity(\r\n        'Origin',\r\n        scale=alt.Scale(\r\n            type='ordinal',\r\n            domain=['Europe', 'Japan', 'USA'],\r\n            range=[1, 0.1, 1]\r\n        )\r\n    )\r\n)\r\n```\r\nInstead of assigning the ordinal opacity values to Europe, Japan and USA, the result looks like this:\r\n![](https://user-images.githubusercontent.com/1765698/75450142-8d4b0500-596e-11ea-80ab-2fd7ab7b5b0a.png)\r\nAfter checking the Vega-Lite output, it turns out that the opacity scale has been turned into a point scale:\r\n``` json\r\n\"scales\": [\r\n    {\r\n      \"name\": \"color\",\r\n      \"type\": \"ordinal\",\r\n      \"domain\": [\"Europe\", \"Japan\", \"USA\"],\r\n      \"range\": [\"tomato\", \"royalblue\", \"limegreen\"]\r\n    },\r\n    {\r\n      \"name\": \"opacity\",\r\n      \"type\": \"point\",\r\n      \"domain\": [\"Europe\", \"Japan\", \"USA\"],\r\n      \"range\": [1, 0.1, 1]\r\n    }\r\n  ],\r\n```\r\nManually changing the type of the opacity scale back to *ordinal* makes the plot show up as expected:\r\n![](https://user-images.githubusercontent.com/1765698/75450541-52959c80-596f-11ea-9fdd-46e0d78c4a85.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1996/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1984", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1984/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1984/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1984/events", "html_url": "https://github.com/altair-viz/altair/issues/1984", "id": 570081476, "node_id": "MDU6SXNzdWU1NzAwODE0NzY=", "number": 1984, "title": "Multiple views in JupyterLab blank with default html renderer", "user": {"login": "jasongrout", "id": 192614, "node_id": "MDQ6VXNlcjE5MjYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/192614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasongrout", "html_url": "https://github.com/jasongrout", "followers_url": "https://api.github.com/users/jasongrout/followers", "following_url": "https://api.github.com/users/jasongrout/following{/other_user}", "gists_url": "https://api.github.com/users/jasongrout/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasongrout/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasongrout/subscriptions", "organizations_url": "https://api.github.com/users/jasongrout/orgs", "repos_url": "https://api.github.com/users/jasongrout/repos", "events_url": "https://api.github.com/users/jasongrout/events{/privacy}", "received_events_url": "https://api.github.com/users/jasongrout/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-24T19:27:33Z", "updated_at": "2020-02-26T04:32:59Z", "closed_at": "2020-02-26T04:32:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "To reproduce:\r\n\r\n1. Create an environment with JupyterLab 1.2.6 and altair 4.0.1:\r\n\r\n```\r\nconda create -c conda-forge -yn testenv jupyterlab altair pandas\r\nconda activate testenv\r\n```\r\n\r\n2. Start JupyterLab:\r\n```\r\njupyter lab\r\n```\r\n3. Create a new notebook with an example plot:\r\n\r\n```\r\nimport altair as alt\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\n# Compute x^2 + y^2 across a 2D grid\r\nx, y = np.meshgrid(range(-5, 5), range(-5, 5))\r\nz = x ** 2 + y ** 2\r\n\r\n# Convert this grid to columnar data expected by Altair\r\nsource = pd.DataFrame({'x': x.ravel(),\r\n                     'y': y.ravel(),\r\n                     'z': z.ravel()})\r\n\r\nalt.Chart(source).mark_rect().encode(\r\n    x='x:O',\r\n    y='y:O',\r\n    color='z:Q'\r\n)\r\n```\r\n4. Right-click on the plot and choose \"Create New view for output\" to open a new jlab tab for the plot. The new tab is blank:\r\n<img width=\"622\" alt=\"Screen Shot 2020-02-24 at 11 22 23 AM\" src=\"https://user-images.githubusercontent.com/192614/75183729-f70da980-56f7-11ea-8e25-bf11bfda8b9f.png\">\r\n\r\nI also see the same issue if opening a new view of the notebook (right-clicking on the file's tab, selecting \"New View for Notebook\"\r\n\r\nI think at least part of the problem is that the plot div has a hard-coded id, and ids should be unique on a page, so viewing the same output multiple times can be a problem. There may be other issues with the js not knowing to redraw the plot in the new jlab tab, etc.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1984/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1984/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1977", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1977/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1977/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1977/events", "html_url": "https://github.com/altair-viz/altair/issues/1977", "id": 566938759, "node_id": "MDU6SXNzdWU1NjY5Mzg3NTk=", "number": 1977, "title": "invisible symbol in legend for mark_trail", "user": {"login": "YuliaGazizova", "id": 39081713, "node_id": "MDQ6VXNlcjM5MDgxNzEz", "avatar_url": "https://avatars.githubusercontent.com/u/39081713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YuliaGazizova", "html_url": "https://github.com/YuliaGazizova", "followers_url": "https://api.github.com/users/YuliaGazizova/followers", "following_url": "https://api.github.com/users/YuliaGazizova/following{/other_user}", "gists_url": "https://api.github.com/users/YuliaGazizova/gists{/gist_id}", "starred_url": "https://api.github.com/users/YuliaGazizova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YuliaGazizova/subscriptions", "organizations_url": "https://api.github.com/users/YuliaGazizova/orgs", "repos_url": "https://api.github.com/users/YuliaGazizova/repos", "events_url": "https://api.github.com/users/YuliaGazizova/events{/privacy}", "received_events_url": "https://api.github.com/users/YuliaGazizova/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-02-18T14:41:47Z", "updated_at": "2020-04-02T16:28:54Z", "closed_at": "2020-04-02T16:28:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey guys!\r\nThank you for Altair. \r\nRecently, I met a small but quite annoying bug: with mark_trail graph, symbols in a legend are not visible. Not only line thickness but all symbols in a legend. You can see an example of such behavior even on the Altair page https://altair-viz.github.io/gallery/trail_marker.html.\r\nAnother example I attached as a print screen:\r\n1. mark_trail graph. Symbols in the legend are not visible\r\n2. mark_line graph with the same data. Symbols in the legend are visible\r\n![1  mark_trail](https://user-images.githubusercontent.com/39081713/74745849-cbf10900-5264-11ea-8032-cf08aaace101.png)\r\n![2  mark_line](https://user-images.githubusercontent.com/39081713/74745864-d01d2680-5264-11ea-9ecc-22f13763c661.png)\r\nIs it because I am stupid or it is a bug?\r\nYulia\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1977/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1973", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1973/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1973/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1973/events", "html_url": "https://github.com/altair-viz/altair/issues/1973", "id": 566129464, "node_id": "MDU6SXNzdWU1NjYxMjk0NjQ=", "number": 1973, "title": "Are there any known bugs with altair.Column(sort)?", "user": {"login": "yannxaver", "id": 17554280, "node_id": "MDQ6VXNlcjE3NTU0Mjgw", "avatar_url": "https://avatars.githubusercontent.com/u/17554280?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannxaver", "html_url": "https://github.com/yannxaver", "followers_url": "https://api.github.com/users/yannxaver/followers", "following_url": "https://api.github.com/users/yannxaver/following{/other_user}", "gists_url": "https://api.github.com/users/yannxaver/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannxaver/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannxaver/subscriptions", "organizations_url": "https://api.github.com/users/yannxaver/orgs", "repos_url": "https://api.github.com/users/yannxaver/repos", "events_url": "https://api.github.com/users/yannxaver/events{/privacy}", "received_events_url": "https://api.github.com/users/yannxaver/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 262356187, "node_id": "MDU6TGFiZWwyNjIzNTYxODc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-17T08:19:00Z", "updated_at": "2020-02-17T14:43:05Z", "closed_at": "2020-02-17T14:43:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Code**\r\n```\r\ntop5_leagues = bvb[bvb['league'].isin(['LaLiga', 'Premier League', 'Bundesliga', 'Serie A', 'Ligue 1'])]\r\n\r\nalt.Chart(top5_leagues).mark_bar().encode(\r\n        x='trans_type:N',\r\n        y='sum(fee):Q',\r\n        column=alt.Column('league:N', sort=['LaLiga', 'Premier League', 'Bundesliga', 'Serie A', 'Ligue 1'])\r\n    )\r\n```\r\n**Output**\r\n![visualization-2](https://user-images.githubusercontent.com/17554280/74635000-0e044700-51a0-11ea-9374-74ebe865cbf8.png)\r\n\r\nThe code is the same as in the example from the docs (which works fine in my environment).\r\n\r\n**Example from docs**\r\n```\r\nalt.Chart(source).transform_filter(\r\n    alt.datum.symbol != 'GOOG'\r\n).mark_area().encode(\r\n    x='date:T',\r\n    y='price:Q',\r\n    color='symbol:N',\r\n    row=alt.Row('symbol:N', sort=['MSFT', 'AAPL', 'IBM', 'AMZN'])\r\n).properties(height=50, width=400)\r\n```\r\n\r\nI have restarted the kernel and double-checked all expressions but no success so far.\r\nChanging the order of the strings in the array also had no effect.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1973/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1971", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1971/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1971/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1971/events", "html_url": "https://github.com/altair-viz/altair/issues/1971", "id": 565853288, "node_id": "MDU6SXNzdWU1NjU4NTMyODg=", "number": 1971, "title": "hconcat() throws an error when two charts use the same transform_filter", "user": {"login": "yannxaver", "id": 17554280, "node_id": "MDQ6VXNlcjE3NTU0Mjgw", "avatar_url": "https://avatars.githubusercontent.com/u/17554280?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannxaver", "html_url": "https://github.com/yannxaver", "followers_url": "https://api.github.com/users/yannxaver/followers", "following_url": "https://api.github.com/users/yannxaver/following{/other_user}", "gists_url": "https://api.github.com/users/yannxaver/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannxaver/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannxaver/subscriptions", "organizations_url": "https://api.github.com/users/yannxaver/orgs", "repos_url": "https://api.github.com/users/yannxaver/repos", "events_url": "https://api.github.com/users/yannxaver/events{/privacy}", "received_events_url": "https://api.github.com/users/yannxaver/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-16T05:13:41Z", "updated_at": "2020-02-16T14:14:03Z", "closed_at": "2020-02-16T14:14:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Running\r\n```\r\nchart1 = alt.Chart(\r\n    bvb, \r\n    title={\r\n        'text': \"Chart 1\",\r\n        'subtitle': 'Excluding free agents'\r\n    }).transform_filter(\r\n    datum.fee > 0\r\n).transform_fold(\r\n    ['value', 'fee']\r\n).mark_bar().encode(\r\n    y='average(value):Q',\r\n    x='key:O',\r\n    color='key:N',\r\n    column='trans_type'\r\n)\r\n\r\nchart2 = alt.Chart(\r\n    bvb, \r\n    title={\r\n        'text': \"Chart 2\",\r\n        'subtitle': 'Excluding free agents'\r\n    }).transform_filter(\r\n    datum.fee > 0\r\n).transform_fold(\r\n    ['value', 'fee']\r\n).mark_bar().encode(\r\n    y='average(value):Q',\r\n    x='key:O',\r\n    color='key:N',\r\n    column='trans_type'\r\n)\r\n\r\nalt.hconcat(chart1, chart2)\r\n```\r\nthrows this error:\r\n```\r\nJavascript Error: Undefined data set name: \"scale_concat_1_child_main\"\r\nThis usually means there's a typo in your chart specification. See the javascript console for the full traceback.\r\n```\r\n\r\nCan get solved by making the criteria for `transform_filter` unique for each chart. Also happens with `hconcat()` when two out of three charts share the same `transform_filter` criteria.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1971/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1954", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1954/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1954/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1954/events", "html_url": "https://github.com/altair-viz/altair/issues/1954", "id": 561553200, "node_id": "MDU6SXNzdWU1NjE1NTMyMDA=", "number": 1954, "title": "save as svg changes fonts and margins", "user": {"login": "deisi", "id": 5436980, "node_id": "MDQ6VXNlcjU0MzY5ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/5436980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deisi", "html_url": "https://github.com/deisi", "followers_url": "https://api.github.com/users/deisi/followers", "following_url": "https://api.github.com/users/deisi/following{/other_user}", "gists_url": "https://api.github.com/users/deisi/gists{/gist_id}", "starred_url": "https://api.github.com/users/deisi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deisi/subscriptions", "organizations_url": "https://api.github.com/users/deisi/orgs", "repos_url": "https://api.github.com/users/deisi/repos", "events_url": "https://api.github.com/users/deisi/events{/privacy}", "received_events_url": "https://api.github.com/users/deisi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-07T10:31:59Z", "updated_at": "2022-03-23T00:47:08Z", "closed_at": "2022-03-23T00:47:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "saving a chart as svg with not default fontStyle and fontSize is troublesome. Here some example code:\r\n\r\n```python\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\ndf = pd.DataFrame([[1,2],[3, 4],[5,6]], columns=['A', \"B\"] )\r\nc = alt.Chart(df).mark_point().encode(\r\n    alt.X('A'),\r\n    alt.Y('B')\r\n)\r\nc.save('default_works.svg')\r\n\r\n# Now change the font size:\r\nc = c.configure_axis(\r\n        labelFontSize=20, labelFontWeight='normal', labelFontStyle='sans-serif', titleFont='sans-serif', titleFontWeight='normal'\r\n)\r\nc.save('buged.svg')\r\nc.save('works.png')\r\nc\r\n```\r\nThe result is, that the buged.svg has overlapping text, while all other do not.\r\n\r\n\r\nThe altair version I use is 4.0.1 and selenium is 3.141.0 with firefox 72.0.0 and geckodriver 0.26.0", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1954/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1954/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1948", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1948/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1948/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1948/events", "html_url": "https://github.com/altair-viz/altair/issues/1948", "id": 560434335, "node_id": "MDU6SXNzdWU1NjA0MzQzMzU=", "number": 1948, "title": "Error bars on binned scatter plot", "user": {"login": "danhamill", "id": 11522898, "node_id": "MDQ6VXNlcjExNTIyODk4", "avatar_url": "https://avatars.githubusercontent.com/u/11522898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhamill", "html_url": "https://github.com/danhamill", "followers_url": "https://api.github.com/users/danhamill/followers", "following_url": "https://api.github.com/users/danhamill/following{/other_user}", "gists_url": "https://api.github.com/users/danhamill/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhamill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhamill/subscriptions", "organizations_url": "https://api.github.com/users/danhamill/orgs", "repos_url": "https://api.github.com/users/danhamill/repos", "events_url": "https://api.github.com/users/danhamill/events{/privacy}", "received_events_url": "https://api.github.com/users/danhamill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 262356191, "node_id": "MDU6TGFiZWwyNjIzNTYxOTE=", "url": "https://api.github.com/repos/altair-viz/altair/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-05T15:08:43Z", "updated_at": "2020-02-06T14:51:24Z", "closed_at": "2020-02-06T14:51:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "For the data:\r\n\r\n```\r\n           date station  temp        CFGI      WY\r\n129  2011-12-04  MURPHY  -0.1   10.190000  2012.0\r\n3035 2015-12-01  MURPHY  -0.3   36.757195  2016.0\r\n919  2013-01-04  MURPHY  -0.5   76.801392  2013.0\r\n3823 2016-12-31  MURPHY  -0.6   73.128624  2017.0\r\n1593 2013-12-08  MURPHY  -1.1   53.808136  2014.0\r\n149  2011-12-14  MURPHY  -1.9   42.435001  2012.0\r\n3857 2017-01-17  MURPHY  -1.5  101.258446  2017.0\r\n3855 2017-01-16  MURPHY  -2.0   99.185310  2017.0\r\n1615 2013-12-19  MURPHY  -2.8   81.989189  2014.0\r\n171  2011-12-25  MURPHY  -3.6   72.879997  2012.0\r\n167  2011-12-23  MURPHY  -4.5   68.120003  2012.0\r\n949  2013-01-19  MURPHY  -5.7  143.160721  2013.0\r\n864  2012-12-08    ARCO  -0.3    8.227783  2013.0\r\n3000 2015-11-14    ARCO  -0.1    7.010424  2016.0\r\n866  2012-12-09    ARCO  -0.6   13.336325  2013.0\r\n3010 2015-11-19    ARCO  -0.6   15.052293  2016.0\r\n908  2012-12-30    ARCO  -1.0   40.121811  2013.0\r\n3094 2015-12-31    ARCO  -1.1   67.140869  2016.0\r\n1568 2013-11-26    ARCO  -1.5    6.881799  2014.0\r\n120  2011-11-30    ARCO  -2.0   55.988285  2012.0\r\n192  2012-01-05    ARCO  -2.8  178.937195  2012.0\r\n3014 2015-11-21    ARCO  -2.8   22.342173  2016.0\r\n3016 2015-11-22    ARCO  -3.0   23.216904  2016.0\r\n3026 2015-11-27    ARCO  -3.6   31.256996  2016.0\r\n3040 2015-12-04    ARCO  -4.2   58.135826  2016.0\r\n3028 2015-11-28    ARCO  -4.8   37.829914  2016.0\r\n3030 2015-11-29    ARCO  -5.3   43.879208  2016.0\r\n3036 2015-12-02    ARCO  -5.9   55.178341  2016.0\r\n3032 2015-11-30    ARCO  -6.2   48.211315  2016.0\r\n```\r\n\r\nI want to plot a binned scatter plot with error bars showing the standard deviation for each bin.\r\n\r\n```python\r\nchart1 = alt.Chart().mark_circle(color='red').encode(\r\n    x = alt.X('temp:Q', bin=alt.Bin(step=0.5), sort='descending', axis=alt.Axis(title='Soil Temperature (\u00b0C)')),\r\n    y = alt.Y('mean(CFGI)', axis = alt.Axis(title='CFGI'))\r\n    )\r\n\r\nerror = alt.Chart().mark_errorbar().encode(\r\n    x = alt.X('temp:Q', bin = alt.Bin(step = 0.5), sort='descending', ),\r\n    y = alt.Y('CFGI', scale=alt.Scale(zero = False)))\r\n\r\n    \r\ncombined = alt.layer(error, chart1, data = out).facet('station').configure_header(title=None).configure(background = 'white')\r\n```\r\n\r\nThis produces a plot with error bars that aren't vertical.\r\n\r\n![USCRN_Bin_temp_vs_CFGI](https://user-images.githubusercontent.com/11522898/73853694-48183500-47ff-11ea-8c39-97f5449c5e58.png)\r\n\r\nI would expect vertical error bars with no displacement on the x-axis.  Is this possible?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1948/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1944", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1944/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1944/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1944/events", "html_url": "https://github.com/altair-viz/altair/issues/1944", "id": 558652385, "node_id": "MDU6SXNzdWU1NTg2NTIzODU=", "number": 1944, "title": "mark_circle() mishandles NaN data when taking mean", "user": {"login": "zeqianli", "id": 36593276, "node_id": "MDQ6VXNlcjM2NTkzMjc2", "avatar_url": "https://avatars.githubusercontent.com/u/36593276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zeqianli", "html_url": "https://github.com/zeqianli", "followers_url": "https://api.github.com/users/zeqianli/followers", "following_url": "https://api.github.com/users/zeqianli/following{/other_user}", "gists_url": "https://api.github.com/users/zeqianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/zeqianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zeqianli/subscriptions", "organizations_url": "https://api.github.com/users/zeqianli/orgs", "repos_url": "https://api.github.com/users/zeqianli/repos", "events_url": "https://api.github.com/users/zeqianli/events{/privacy}", "received_events_url": "https://api.github.com/users/zeqianli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-02-02T06:45:51Z", "updated_at": "2022-03-23T00:45:25Z", "closed_at": "2022-03-23T00:45:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Notice left figure's top right corner: the data point is NaN and should not have been shown. This does not happen when mean is not taken (middle figure) or for mark_line() (right figure). \r\n\r\nThe wrong points always appear at the top. It also happens for other operations (e.g. stdev). \r\n\r\nI'm using Altair 4.0.0.\r\n\r\n```python\r\nimport altair as alt\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\n\r\nts=[0,0,1,1,2,2,3,3]\r\nrs=[1,2,1,2,1,2,1,2]\r\nys=[1,1,2,2,3,3,np.nan,np.nan]\r\ndata=pd.DataFrame({'t':ts,'r':rs,'y':ys})\r\nbase=alt.Chart(data,width=200)\r\nscatter_mean=base.mark_circle().encode(x='t',y='mean(y)')\r\nscatter=base.mark_circle().encode(x='t',y='y')\r\nline=base.mark_line().encode(x='t',y='mean(y)')\r\n\r\nscatter_mean|scatter|line\r\n```\r\n\r\n<img width=\"932\" alt=\"Screen Shot 2020-02-02 at 12 38 52 AM\" src=\"https://user-images.githubusercontent.com/36593276/73604331-9229be00-4554-11ea-8d38-412cd4b86b28.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1944/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1937", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1937/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1937/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1937/events", "html_url": "https://github.com/altair-viz/altair/issues/1937", "id": 557067368, "node_id": "MDU6SXNzdWU1NTcwNjczNjg=", "number": 1937, "title": "Transform filter generates JSON with invalid escaping", "user": {"login": "domoritz", "id": 589034, "node_id": "MDQ6VXNlcjU4OTAzNA==", "avatar_url": "https://avatars.githubusercontent.com/u/589034?v=4", "gravatar_id": "", "url": "https://api.github.com/users/domoritz", "html_url": "https://github.com/domoritz", "followers_url": "https://api.github.com/users/domoritz/followers", "following_url": "https://api.github.com/users/domoritz/following{/other_user}", "gists_url": "https://api.github.com/users/domoritz/gists{/gist_id}", "starred_url": "https://api.github.com/users/domoritz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/domoritz/subscriptions", "organizations_url": "https://api.github.com/users/domoritz/orgs", "repos_url": "https://api.github.com/users/domoritz/repos", "events_url": "https://api.github.com/users/domoritz/events{/privacy}", "received_events_url": "https://api.github.com/users/domoritz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-29T19:26:51Z", "updated_at": "2020-01-31T05:18:02Z", "closed_at": "2020-01-31T02:47:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```py\r\nimport altair as alt\r\nalt.Chart(data=alt.Data(url=\"\")).mark_point().transform_filter(alt.datum['foo'] == 2).to_json(indent=0).replace('\\n', '')\r\n```\r\n\r\nGenerates\r\n\r\n```json\r\n{\"$schema\": \"https://vega.github.io/schema/vega-lite/v4.0.0.json\",\"config\": {\"view\": {\"continuousHeight\": 300,\"continuousWidth\": 400}},\"data\": {\"url\": \"\"},\"mark\": \"point\",\"transform\": [{\"filter\": \"(datum[\\'foo\\'] === 2)\"}]}\r\n```\r\n\r\nWhich causes an error in JSON `Invalid escape character in string.`.\r\n\r\nThis is fixed by removing the escaping of `'`. \r\n\r\nDiscovered by @ldegreef", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1937/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1935", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1935/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1935/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1935/events", "html_url": "https://github.com/altair-viz/altair/issues/1935", "id": 556702741, "node_id": "MDU6SXNzdWU1NTY3MDI3NDE=", "number": 1935, "title": "Schema validation error fails to print", "user": {"login": "paulmelis", "id": 1408287, "node_id": "MDQ6VXNlcjE0MDgyODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1408287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulmelis", "html_url": "https://github.com/paulmelis", "followers_url": "https://api.github.com/users/paulmelis/followers", "following_url": "https://api.github.com/users/paulmelis/following{/other_user}", "gists_url": "https://api.github.com/users/paulmelis/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulmelis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulmelis/subscriptions", "organizations_url": "https://api.github.com/users/paulmelis/orgs", "repos_url": "https://api.github.com/users/paulmelis/repos", "events_url": "https://api.github.com/users/paulmelis/events{/privacy}", "received_events_url": "https://api.github.com/users/paulmelis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-29T08:10:43Z", "updated_at": "2020-02-09T22:55:21Z", "closed_at": "2020-02-09T22:55:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n$ cat test.py\r\nimport pandas, altair\r\n\r\nd = [{'WijkenEnBuurten': 'Nederland', 'Codering_3': 'NL00', 'Mannen_6': 8475102, 'Vrouwen_7': 8606405, 'SoortRegio_2': 'Land      ', 'GeboorteRelatief_25': 9}, {'WijkenEnBuurten': 'Aa en Hunze', 'Codering_3': 'GM1680', 'Mannen_6': 12603, 'Vrouwen_7': 12683, 'SoortRegio_2': 'Gemeente  ', 'GeboorteRelatief_25': 6}]\r\n\r\ndf = pandas.DataFrame(d)\r\na = altair.Data(df)\r\n\r\n$ python ./test.py\r\nTraceback (most recent call last):\r\n  File \"./t_altair_schema.py\", line 5, in <module>\r\n    a = altair.Data(df)\r\n  File \"/home/paulm/.local/lib/python3.8/site-packages/altair/vegalite/v3/schema/core.py\", line 3741, in __init__\r\n    super(Data, self).__init__(*args, **kwds)\r\n  File \"/home/paulm/.local/lib/python3.8/site-packages/altair/utils/schemapi.py\", line 154, in __init__\r\n    self.to_dict(validate=True)\r\n  File \"/home/paulm/.local/lib/python3.8/site-packages/altair/utils/schemapi.py\", line 302, in to_dict\r\n    raise SchemaValidationError(self, err)\r\naltair.utils.schemapi.SchemaValidationError: <exception str() failed>\r\n```\r\n\r\nSomehow the exception can't be turned into a string. I briefly looked at the relevant code in altair.utils.schemapi, but don't immediately see what is going wrong.\r\n\r\nThis is with Python 3.8.1, altair 3.2.0 on Arch Linux (64-bit)", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1935/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1933", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1933/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1933/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1933/events", "html_url": "https://github.com/altair-viz/altair/issues/1933", "id": 556089302, "node_id": "MDU6SXNzdWU1NTYwODkzMDI=", "number": 1933, "title": "Using empty dataframe creates chart with nonsense height", "user": {"login": "BielStela", "id": 9404338, "node_id": "MDQ6VXNlcjk0MDQzMzg=", "avatar_url": "https://avatars.githubusercontent.com/u/9404338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BielStela", "html_url": "https://github.com/BielStela", "followers_url": "https://api.github.com/users/BielStela/followers", "following_url": "https://api.github.com/users/BielStela/following{/other_user}", "gists_url": "https://api.github.com/users/BielStela/gists{/gist_id}", "starred_url": "https://api.github.com/users/BielStela/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BielStela/subscriptions", "organizations_url": "https://api.github.com/users/BielStela/orgs", "repos_url": "https://api.github.com/users/BielStela/repos", "events_url": "https://api.github.com/users/BielStela/events{/privacy}", "received_events_url": "https://api.github.com/users/BielStela/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-01-28T09:41:11Z", "updated_at": "2020-01-29T01:09:58Z", "closed_at": "2020-01-29T01:09:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, \r\nThe following chart definition when using an empty data frame creates an svg element with `height=\"1.7976931348623157e+308\"`. That's around 10^300 m long chart. Given that the observable universe is about 10^26 m I bet that's a bug. \r\n```python\r\nbase_chart = alt.Chart(df).mark_circle().properties(width='container', height=100)\r\nchart = (base_chart\r\n             .encode(x=alt.X('day_sameyear', axis=alt.Axis(title='', grid=False),\r\n                             scale=alt.Scale(padding=10)), \r\n                     y=alt.Y('season',\r\n                             sort=alt.EncodingSortField('season', order='ascending'),\r\n                             axis=alt.Axis(grid=True)),\r\n                     color=alt.Color('activity', scale=alt.Scale(domain=list(df['activity'].unique()),\r\n                                                                 range=base_colours)),\r\n                     )\r\n            )\r\n```\r\nIf I remove the color `scale` property it works well and shows an empty chart so the problem is in `color`. With an empty data frame, domain is `[]` but range is a list of 6 colors.\r\n\r\nI'm using `chart.to_json()` to render the plot in a html with vega-embed \r\nI'm using altair 4.0.1, vega-lite 4.0.2 and vega-embed 4.2.1\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1933/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1919", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1919/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1919/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1919/events", "html_url": "https://github.com/altair-viz/altair/issues/1919", "id": 551233494, "node_id": "MDU6SXNzdWU1NTEyMzM0OTQ=", "number": 1919, "title": "Subtitle Documentation and styling", "user": {"login": "mcnuttandrew", "id": 6854312, "node_id": "MDQ6VXNlcjY4NTQzMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/6854312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcnuttandrew", "html_url": "https://github.com/mcnuttandrew", "followers_url": "https://api.github.com/users/mcnuttandrew/followers", "following_url": "https://api.github.com/users/mcnuttandrew/following{/other_user}", "gists_url": "https://api.github.com/users/mcnuttandrew/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcnuttandrew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcnuttandrew/subscriptions", "organizations_url": "https://api.github.com/users/mcnuttandrew/orgs", "repos_url": "https://api.github.com/users/mcnuttandrew/repos", "events_url": "https://api.github.com/users/mcnuttandrew/events{/privacy}", "received_events_url": "https://api.github.com/users/mcnuttandrew/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 262356188, "node_id": "MDU6TGFiZWwyNjIzNTYxODg=", "url": "https://api.github.com/repos/altair-viz/altair/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}, {"id": 474065442, "node_id": "MDU6TGFiZWw0NzQwNjU0NDI=", "url": "https://api.github.com/repos/altair-viz/altair/labels/documentation", "name": "documentation", "color": "c5def5", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-01-17T06:43:29Z", "updated_at": "2022-03-23T00:44:24Z", "closed_at": "2022-03-23T00:44:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "At last! There are subtitles in for altair charts([via a vega-lite update](https://github.com/vega/vega-lite/issues/4055))! How splendid! This issue identifies a documentation bug and maybe a styling bug revolving around this newly birthed feature:\r\n\r\n- I don't believe that there is any documentation of the mechanism for adding subtitles (or multiline titles) to charts! It's a great feature it should be easy to find!\r\n\r\n\r\n- The [title configuration](https://altair-viz.github.io/user_guide/configuration.html#title-configuration) section of the documentation appears to suggest that there should be various subtitle styling operators  (subtitleColor, subtitleFont, subtitleFontSize, subtitleFontStyle, subtitleFontWeight, subtitleLineHeight, subtitlePadding specifically), but all of the variations that i've tried on them appear not to work? For instance the following should ostensibly produce a chart with a red subtitle \r\n\r\n```py\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nchart = alt.Chart(data.cars.url).mark_point().encode(\r\n    x='Horsepower:Q',\r\n    y='Miles_per_Gallon:Q',\r\n).properties(\r\n    title={\r\n      \"text\": [\"First line of title\", \"Second line of title\"], \r\n      \"subtitle\": [\"Cool first line of subtitle\", \"Even cooler second line wow dang\"]\r\n    }\r\n)\r\n\r\nchart.configure_title(\r\n    fontSize=20,\r\n    font='Courier',\r\n    anchor='start',\r\n    color='gray',\r\n   subtitleColor='red'\r\n)\r\n\r\n```\r\n\r\nUnfortunately it produces a chart with an unstyled subtitle:\r\n\r\n<img width=\"461\" alt=\"Screen Shot 2020-01-17 at 12 40 43 AM\" src=\"https://user-images.githubusercontent.com/6854312/72589864-0ceeaa00-38c2-11ea-8632-66001b7d6867.png\">\r\n\r\nI totally admit that i might be misreading this, but, if not, it seems like a bug. I'm happy to help contribute documentation once a solution is known", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1919/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1919/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1905", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1905/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1905/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1905/events", "html_url": "https://github.com/altair-viz/altair/issues/1905", "id": 547037928, "node_id": "MDU6SXNzdWU1NDcwMzc5Mjg=", "number": 1905, "title": "log transformation of size creates unlabeled legend glyphs", "user": {"login": "odoublewen", "id": 1421445, "node_id": "MDQ6VXNlcjE0MjE0NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1421445?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odoublewen", "html_url": "https://github.com/odoublewen", "followers_url": "https://api.github.com/users/odoublewen/followers", "following_url": "https://api.github.com/users/odoublewen/following{/other_user}", "gists_url": "https://api.github.com/users/odoublewen/gists{/gist_id}", "starred_url": "https://api.github.com/users/odoublewen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odoublewen/subscriptions", "organizations_url": "https://api.github.com/users/odoublewen/orgs", "repos_url": "https://api.github.com/users/odoublewen/repos", "events_url": "https://api.github.com/users/odoublewen/events{/privacy}", "received_events_url": "https://api.github.com/users/odoublewen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-01-08T18:44:37Z", "updated_at": "2022-03-23T00:42:40Z", "closed_at": "2022-03-23T00:42:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a plot where I would like a variable encoded in the size of the points, but with a log transform.  I think this is the right way to do it:\r\n\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\ncars = data.cars()\r\n\r\nalt.Chart(cars).mark_point().encode(\r\n    x=alt.X('Horsepower', axis=alt.Axis(labels=False)),\r\n    y=alt.Y('Acceleration', axis=alt.Axis(labels=False)),\r\n    color='Origin',\r\n    size=alt.Size('Displacement', scale=alt.Scale(\r\n        type='log'\r\n    )),\r\n)\r\n```\r\n\r\nBut the resulting plot has extra, unlabeled legend categories.  This toy example has just two:\r\n![visualization](https://user-images.githubusercontent.com/1421445/72005365-4b210500-3202-11ea-87e7-ae20ea2160a3.png)\r\n\r\n...but the real plot I'm making has a lot of them (see screenshot below).  (I provide the toy example above because I feel like it's the same fundamental problem at work?)\r\n\r\nThe variable in question is an integer (`np.int64`) and has a range of 2 through 7561, with no missing data.  Here is a screenshot of the legend:\r\n\r\n<img width=\"91\" alt=\"Screen Shot 2020-01-08 at 10 38 37 AM\" src=\"https://user-images.githubusercontent.com/1421445/72005707-15305080-3203-11ea-8044-510d0b66eb98.png\">\r\n\r\nAnd I see two warnings on the js debug console:\r\n\r\n[Warning] WARN \u2013 \"Scale bindings are currently only supported for scales with unbinned, continuous domains.\" (vega-lite@4.0.2, line 1, x2)\r\n[Warning] WARN \u2013 \"Symbol legend count exceeds limit, filtering items.\" (vega@5.9.0, line 1)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1905/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1867", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1867/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1867/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1867/events", "html_url": "https://github.com/altair-viz/altair/issues/1867", "id": 536471135, "node_id": "MDU6SXNzdWU1MzY0NzExMzU=", "number": 1867, "title": "altair.data_transformers.enable('json') leads to invalid data URLs in JupyterLab when switching from Altair 3.3.0 to 4.0.0 ", "user": {"login": "sdelarquier", "id": 1428179, "node_id": "MDQ6VXNlcjE0MjgxNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1428179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sdelarquier", "html_url": "https://github.com/sdelarquier", "followers_url": "https://api.github.com/users/sdelarquier/followers", "following_url": "https://api.github.com/users/sdelarquier/following{/other_user}", "gists_url": "https://api.github.com/users/sdelarquier/gists{/gist_id}", "starred_url": "https://api.github.com/users/sdelarquier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sdelarquier/subscriptions", "organizations_url": "https://api.github.com/users/sdelarquier/orgs", "repos_url": "https://api.github.com/users/sdelarquier/repos", "events_url": "https://api.github.com/users/sdelarquier/events{/privacy}", "received_events_url": "https://api.github.com/users/sdelarquier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 262356188, "node_id": "MDU6TGFiZWwyNjIzNTYxODg=", "url": "https://api.github.com/repos/altair-viz/altair/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-12-11T16:11:41Z", "updated_at": "2021-02-23T21:28:26Z", "closed_at": "2021-02-23T21:28:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "To reproduce, use the latest version (as of this writing) of altair and jupyterlab:\r\n```\r\naltair==4.0.0\r\nipykernel==5.1.3\r\nipython==7.10.1\r\njupyter==1.0.0\r\njupyter-client==5.3.4\r\njupyter-console==6.0.0\r\njupyter-core==4.6.1\r\njupyterlab==1.2.4\r\njupyterlab-server==1.0.6\r\nvega-datasets==0.7.0\r\n```\r\n\r\nIn Jupyter lab open a new notebook and try:\r\n```\r\nfrom vega_datasets import data\r\nimport altair as alt\r\n\r\nalt.data_transformers.enable('json')\r\nalt.renderers.enable('default')\r\n\r\nsource = data.cars()\r\n\r\nalt.Chart(source).mark_circle(size=60).encode(\r\n    x='Horsepower',\r\n    y='Miles_per_Gallon',\r\n    color='Origin',\r\n    tooltip=['Name', 'Origin', 'Horsepower', 'Miles_per_Gallon']\r\n).interactive()\r\n```\r\n\r\nThis leads to an empty chart with the following error in the JavaScript console:\r\n```\r\nvega@5?noext:1 GET http://localhost:8888/altair-data-4d45d69bbd706eda330e96e79ad4bf46.json 404 (Not Found)\r\nvega@5?noext:1 WARN Infinite extent for field \"Horsepower\": [Infinity, -Infinity]\r\nvega@5?noext:1 WARN Infinite extent for field \"Miles_per_Gallon\": [Infinity, -Infinity]\r\n```\r\n\r\nAnd in the Jupyter logs the error reads:\r\n```\r\n[W 16:56:10.144 LabApp] 404 GET /altair-data-4d45d69bbd706eda330e96e79ad4bf46.json (::1) 1.60ms referer=http://localhost:8888/lab\r\n```\r\n\r\nIf I revert to `altair==3.3.0` this error disappears and the data gets correctly loaded from disk and rendered. In that case the data URL (read from from the browser dev tools) becomes `http://localhost:8888/files/altair-data-4d45d69bbd706eda330e96e79ad4bf46.json?_xsrf=<blah>` (where I replaced the long string at the end with `<blah`).", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1867/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1867/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1821", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1821/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1821/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1821/events", "html_url": "https://github.com/altair-viz/altair/issues/1821", "id": 530179911, "node_id": "MDU6SXNzdWU1MzAxNzk5MTE=", "number": 1821, "title": "Axis title font size seems to change padding not text", "user": {"login": "Zylatis", "id": 1456631, "node_id": "MDQ6VXNlcjE0NTY2MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1456631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zylatis", "html_url": "https://github.com/Zylatis", "followers_url": "https://api.github.com/users/Zylatis/followers", "following_url": "https://api.github.com/users/Zylatis/following{/other_user}", "gists_url": "https://api.github.com/users/Zylatis/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zylatis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zylatis/subscriptions", "organizations_url": "https://api.github.com/users/Zylatis/orgs", "repos_url": "https://api.github.com/users/Zylatis/repos", "events_url": "https://api.github.com/users/Zylatis/events{/privacy}", "received_events_url": "https://api.github.com/users/Zylatis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-11-29T06:38:34Z", "updated_at": "2019-12-03T06:12:09Z", "closed_at": "2019-12-03T06:12:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi I must be missing something silly: i am using the following code \r\n\r\n```python\r\nchart = alt.Chart(pd.DataFrame(data)).mark_bar(color='#203082', size = 60).encode(\r\n    x='date',\r\n    y='n_bookings',\r\n\t).properties(\r\n    width=600,\r\n    height=300\r\n    ).configure_axis(\r\n    grid=False,\r\n    labelAngle=0,\r\n    labelFontSize=30,\r\n    titleFontSize=30,\r\n    titleFontWeight='normal',\r\n    titleFont=\"Museo Sans 300\",\r\n    labelFontWeight='normal',\r\n    labelFont=\"Museo Sans 300\"\r\n    ).configure_view(\r\n\tstrokeOpacity=0\r\n)\r\n\r\nchart.save('test.html')\r\n```\r\n\r\nWhat i am trying to do is increase the font size of the axes labels (date and n_bookings). Based on a (possibly incorrect) reading of the docs it looks like i want to configure the axis to change the titleFontSize (as label font size seems to change the tick labels, which makes sense).\r\n\r\nHere is a screenshot with titleFontSize = 30\r\n![size30](https://user-images.githubusercontent.com/1456631/69848752-020a9680-12cf-11ea-8838-e75aac1266b5.png)\r\n\r\nHere is a screenshot with titleFontSize = 60\r\n![size60](https://user-images.githubusercontent.com/1456631/69848758-06cf4a80-12cf-11ea-85ff-dff451fcf13a.png)\r\n\r\nAs far as i can tell all that has changed is some padding, what am I missing?\r\n\r\nThanks!\r\nZ\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1821/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1821/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1820", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1820/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1820/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1820/events", "html_url": "https://github.com/altair-viz/altair/issues/1820", "id": 530102709, "node_id": "MDU6SXNzdWU1MzAxMDI3MDk=", "number": 1820, "title": "How to set default selected bar", "user": {"login": "zouwenjiao", "id": 45547666, "node_id": "MDQ6VXNlcjQ1NTQ3NjY2", "avatar_url": "https://avatars.githubusercontent.com/u/45547666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zouwenjiao", "html_url": "https://github.com/zouwenjiao", "followers_url": "https://api.github.com/users/zouwenjiao/followers", "following_url": "https://api.github.com/users/zouwenjiao/following{/other_user}", "gists_url": "https://api.github.com/users/zouwenjiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/zouwenjiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zouwenjiao/subscriptions", "organizations_url": "https://api.github.com/users/zouwenjiao/orgs", "repos_url": "https://api.github.com/users/zouwenjiao/repos", "events_url": "https://api.github.com/users/zouwenjiao/events{/privacy}", "received_events_url": "https://api.github.com/users/zouwenjiao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 262356191, "node_id": "MDU6TGFiZWwyNjIzNTYxOTE=", "url": "https://api.github.com/repos/altair-viz/altair/labels/question", "name": "question", "color": "cc317c", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-28T23:54:25Z", "updated_at": "2019-11-29T23:23:24Z", "closed_at": "2019-11-29T23:23:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, Jake, do you know how to set default selected bar in the interactive Cross-hightlight?\r\nFor example, can I set my initial page with Drama selected instead of every bar?\r\nhttps://altair-viz.github.io/gallery/interactive_cross_highlight.html", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1820/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1820/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1750", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1750/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1750/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1750/events", "html_url": "https://github.com/altair-viz/altair/issues/1750", "id": 511889909, "node_id": "MDU6SXNzdWU1MTE4ODk5MDk=", "number": 1750, "title": "Can't use 'count' operation in join aggregate transform", "user": {"login": "TomBugnon", "id": 14128078, "node_id": "MDQ6VXNlcjE0MTI4MDc4", "avatar_url": "https://avatars.githubusercontent.com/u/14128078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TomBugnon", "html_url": "https://github.com/TomBugnon", "followers_url": "https://api.github.com/users/TomBugnon/followers", "following_url": "https://api.github.com/users/TomBugnon/following{/other_user}", "gists_url": "https://api.github.com/users/TomBugnon/gists{/gist_id}", "starred_url": "https://api.github.com/users/TomBugnon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TomBugnon/subscriptions", "organizations_url": "https://api.github.com/users/TomBugnon/orgs", "repos_url": "https://api.github.com/users/TomBugnon/repos", "events_url": "https://api.github.com/users/TomBugnon/events{/privacy}", "received_events_url": "https://api.github.com/users/TomBugnon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-24T11:42:54Z", "updated_at": "2019-11-23T17:00:52Z", "closed_at": "2019-11-23T17:00:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "Some join aggregate operations work as expected:\r\n\r\n\r\n```python\r\ndata = pd.DataFrame({\r\n    'x': [0, 1, 2, 0, 1, 2],\r\n    'a': [1, 1, 2, 3, 3, 4],\r\n    'group': [1, 1, 1, 2, 2, 2]\r\n})\r\n\r\nimport altair as alt\r\n\r\nalt.Chart(\r\n    data\r\n).transform_joinaggregate(\r\n    group_sum='sum(a)',\r\n    groupby=['group']\r\n).transform_calculate(\r\n    normalized_a=\"datum.a / datum.group_sum\",\r\n).mark_point().encode(\r\n    x='x:Q',\r\n    y=\"normalized_a:Q\",\r\n    color='group:N',\r\n)\r\n```\r\n\r\n![visualization](https://user-images.githubusercontent.com/14128078/67480639-a100fa80-f660-11e9-806f-1ed1d1e13ff1.png)\r\n\r\n...but the 'count' operation raises the following error:\r\n\r\n```python\r\nimport altair as alt\r\n\r\nalt.Chart(\r\n    data\r\n).transform_joinaggregate(\r\n    group_count='count()',\r\n    groupby=['group']\r\n).transform_calculate(\r\n    normalized_a=\"datum.a / datum.group_count\",\r\n).mark_point().encode(\r\n    x='x:Q',\r\n    y=\"normalized_a:Q\",\r\n    color='group:N',\r\n)\r\n```\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nValidationError                           Traceback (most recent call last)\r\n<ipython-input-142-2bf583dd0be9> in <module>()\r\n      5 ).transform_joinaggregate(\r\n      6     group_count='count()',\r\n----> 7     groupby=['group']\r\n      8 ).transform_calculate(\r\n      9     normalized_a=\"datum.a / datum.group_count\",\r\n\r\n~/.virtualenvs/simulate/lib/python3.6/site-packages/altair/vegalite/v3/api.py in transform_joinaggregate(self, joinaggregate, groupby, **kwargs)\r\n    929                    'field': parsed.get('field', Undefined),\r\n    930                    'op': parsed.get('aggregate', Undefined)}\r\n--> 931             joinaggregate.append(core.JoinAggregateFieldDef.from_dict(dct))\r\n    932         return self._add_transform(core.JoinAggregateTransform(\r\n    933             joinaggregate=joinaggregate, groupby=groupby\r\n\r\n~/.virtualenvs/simulate/lib/python3.6/site-packages/altair/utils/schemapi.py in from_dict(cls, dct, validate, _wrapper_classes)\r\n    366         \"\"\"\r\n    367         if validate:\r\n--> 368             cls.validate(dct)\r\n    369         if _wrapper_classes is None:\r\n    370             _wrapper_classes = cls._default_wrapper_classes()\r\n\r\n~/.virtualenvs/simulate/lib/python3.6/site-packages/altair/utils/schemapi.py in validate(cls, instance, schema)\r\n    402             schema = cls._schema\r\n    403         resolver = jsonschema.RefResolver.from_schema(cls._rootschema or cls._schema)\r\n--> 404         return jsonschema.validate(instance, schema, resolver=resolver)\r\n    405 \r\n    406     @classmethod\r\n\r\n~/.virtualenvs/simulate/lib/python3.6/site-packages/jsonschema/validators.py in validate(instance, schema, cls, *args, **kwargs)\r\n    897     error = exceptions.best_match(validator.iter_errors(instance))\r\n    898     if error is not None:\r\n--> 899         raise error\r\n    900 \r\n    901 \r\n\r\nValidationError: Undefined is not of type 'string'\r\n\r\nFailed validating 'type' in schema['properties']['field']:\r\n    {'type': 'string'}\r\n\r\nOn instance['field']:\r\n    Undefined\r\n```\r\n\r\nAm I missing something? \r\n\r\nAs a side note, if there's a simpler way of normalizing a histogram than using this type of transform, I'd love to hear about it.\r\nThanks", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1750/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1709", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1709/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1709/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1709/events", "html_url": "https://github.com/altair-viz/altair/issues/1709", "id": 499319239, "node_id": "MDU6SXNzdWU0OTkzMTkyMzk=", "number": 1709, "title": "Whiskers on boxplot notworking on temporal data", "user": {"login": "benjcabalona1029", "id": 55730940, "node_id": "MDQ6VXNlcjU1NzMwOTQw", "avatar_url": "https://avatars.githubusercontent.com/u/55730940?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benjcabalona1029", "html_url": "https://github.com/benjcabalona1029", "followers_url": "https://api.github.com/users/benjcabalona1029/followers", "following_url": "https://api.github.com/users/benjcabalona1029/following{/other_user}", "gists_url": "https://api.github.com/users/benjcabalona1029/gists{/gist_id}", "starred_url": "https://api.github.com/users/benjcabalona1029/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benjcabalona1029/subscriptions", "organizations_url": "https://api.github.com/users/benjcabalona1029/orgs", "repos_url": "https://api.github.com/users/benjcabalona1029/repos", "events_url": "https://api.github.com/users/benjcabalona1029/events{/privacy}", "received_events_url": "https://api.github.com/users/benjcabalona1029/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-09-27T08:48:46Z", "updated_at": "2022-03-23T00:37:38Z", "closed_at": "2022-03-23T00:37:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to make a boxplot with temporal data. I used the timeUnit functionality to check for seasonality. I made the plot using the code below.\r\n\r\n```python\r\nalt.Chart(data.reset_index()).mark_boxplot().encode(\r\n    x=alt.X('DATE:T',timeUnit='month'),\r\n    y='Sales')\r\n```\r\n\r\n![Selection_008](https://user-images.githubusercontent.com/55730940/65755615-0e933700-e146-11e9-8f97-15762d62c9b2.png)\r\n\r\nThe whiskers are working for regular quantitative data.\r\n\r\n```python\r\nalt.Chart(data.reset_index()).mark_boxplot().encode(x='Sales:Q')\r\n```\r\n\r\n![Selection_009](https://user-images.githubusercontent.com/55730940/65755766-56b25980-e146-11e9-8d61-ee674fdc530a.png)\r\n\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1709/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1683", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1683/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1683/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1683/events", "html_url": "https://github.com/altair-viz/altair/issues/1683", "id": 487940571, "node_id": "MDU6SXNzdWU0ODc5NDA1NzE=", "number": 1683, "title": "Wrong sorting of rows if 'count()' is used", "user": {"login": "gilbus", "id": 5910514, "node_id": "MDQ6VXNlcjU5MTA1MTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5910514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilbus", "html_url": "https://github.com/gilbus", "followers_url": "https://api.github.com/users/gilbus/followers", "following_url": "https://api.github.com/users/gilbus/following{/other_user}", "gists_url": "https://api.github.com/users/gilbus/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilbus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilbus/subscriptions", "organizations_url": "https://api.github.com/users/gilbus/orgs", "repos_url": "https://api.github.com/users/gilbus/repos", "events_url": "https://api.github.com/users/gilbus/events{/privacy}", "received_events_url": "https://api.github.com/users/gilbus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-01T23:02:40Z", "updated_at": "2022-03-23T00:31:53Z", "closed_at": "2022-03-23T00:31:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "The sorting of rows seems to be broken if one axis is encoded as 'count()'.\r\n\r\nWorking Example with correct sorting of the rows:\r\n```python\r\nimport altair as alt\r\nimport pandas as pd\r\n\r\n# init dataframe\r\ndf = pd.DataFrame({\r\n    \"type\": ['a', 'b', 'c', 'b', 'c', 'b', 'a'],\r\n    \"value\": [1,1,1,2,2,2,1]\r\n})\r\n\r\n# alt base\r\nbase = alt.Chart(df).encode(\r\n    y='value:O',\r\n    x='value',\r\n    color='type',\r\n)\r\n\r\nalt.layer(\r\n  base.mark_bar(),\r\n  base.mark_text(dx=5).encode(text='value')\r\n).facet(\r\n  row=alt.Row('type', sort=['a', 'c', 'b'])\r\n)\r\n```\r\n![bug_correct](https://user-images.githubusercontent.com/5910514/64083248-dbaf7c00-cd1c-11e9-8d6f-a603a598d964.png)\r\n\r\nOnce the encoding of `x` is changed to `count()` the explicit sorting order is ignored:\r\n```python\r\nimport altair as alt\r\nimport pandas as pd\r\n\r\n# init dataframe\r\ndf = pd.DataFrame({\r\n    \"type\": ['a', 'b', 'c', 'b', 'c', 'b', 'a'],\r\n    \"value\": [1,1,1,2,2,2,1]\r\n})\r\n\r\n# alt base\r\nbase = alt.Chart(df).encode(\r\n    y='value:O',\r\n    x='count()',\r\n    color='type',\r\n)\r\n\r\nalt.layer(\r\n  base.mark_bar(),\r\n  base.mark_text(dx=5).encode(text='value')\r\n).facet(\r\n  row=alt.Row('type', sort=['a', 'c', 'b'])\r\n)\r\n```\r\n![bug_wrong](https://user-images.githubusercontent.com/5910514/64083269-30eb8d80-cd1d-11e9-99c4-cf6f8af5acb1.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1683/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1683/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1681", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1681/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1681/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1681/events", "html_url": "https://github.com/altair-viz/altair/issues/1681", "id": 486956881, "node_id": "MDU6SXNzdWU0ODY5NTY4ODE=", "number": 1681, "title": "Unable to pickle or copy charts", "user": {"login": "bergtholdt", "id": 204942, "node_id": "MDQ6VXNlcjIwNDk0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/204942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bergtholdt", "html_url": "https://github.com/bergtholdt", "followers_url": "https://api.github.com/users/bergtholdt/followers", "following_url": "https://api.github.com/users/bergtholdt/following{/other_user}", "gists_url": "https://api.github.com/users/bergtholdt/gists{/gist_id}", "starred_url": "https://api.github.com/users/bergtholdt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bergtholdt/subscriptions", "organizations_url": "https://api.github.com/users/bergtholdt/orgs", "repos_url": "https://api.github.com/users/bergtholdt/repos", "events_url": "https://api.github.com/users/bergtholdt/events{/privacy}", "received_events_url": "https://api.github.com/users/bergtholdt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-29T13:24:58Z", "updated_at": "2019-11-24T13:57:48Z", "closed_at": "2019-11-24T13:57:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm unable to pickle a chart. Consider this minimal example:\r\n\r\n```python\r\nimport pickle\r\nimport altair\r\nfrom vega_datasets import data\r\niris = data.iris()\r\nch = altair.Chart(iris).mark_point().encode(\r\n    x='petalLength',\r\n    y='petalWidth',\r\n    color='species'\r\n)\r\n\r\nwith open('chart.pck', 'wb') as fid:\r\n    pickle.dump(ch, fid)\r\n\r\nwith open('chart.pck', 'rb') as fid:\r\n    pch = pickle.load(fid)\r\n```\r\n\r\nRunning this results in a RecursionError:\r\n```\r\n(py36) C:\\Develop\\plab>python sandbox\\test_altair_pickle.py                                              \r\nTraceback (most recent call last):                                                                       \r\n  File \"sandbox\\test_altair_pickle.py\", line 15, in <module>                                             \r\n    pch = pickle.load(fid)                                                                               \r\n  File \"C:\\opt\\Anaconda3\\envs\\py36\\lib\\site-packages\\altair\\utils\\schemapi.py\", line 213, in __getattr__ \r\n    if attr in self._kwds:                                                                               \r\n  File \"C:\\opt\\Anaconda3\\envs\\py36\\lib\\site-packages\\altair\\utils\\schemapi.py\", line 213, in __getattr__ \r\n    if attr in self._kwds:                                                                               \r\n  File \"C:\\opt\\Anaconda3\\envs\\py36\\lib\\site-packages\\altair\\utils\\schemapi.py\", line 213, in __getattr__ \r\n    if attr in self._kwds:                                                                               \r\n  [Previous line repeated 330 more times]                                                                \r\nRecursionError: maximum recursion depth exceeded while calling a Python object                           ```\r\n```\r\n\r\nIt can be fixed using\r\n\r\n```python\r\n    def __getattr__(self, attr):\r\n        # reminder: getattr is called after the normal lookups\r\n        if attr == '_kwds': \r\n            raise AttributeError()\r\n        if attr in self._kwds:\r\n            return self._kwds[attr]\r\n        else:\r\n            try:\r\n                _getattr = super(SchemaBase, self).__getattr__\r\n            except AttributeError:\r\n                _getattr = super(SchemaBase, self).__getattribute__\r\n            return _getattr(attr)\r\n```\r\n\r\nI can submit a pull request if desired.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1681/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1681/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1663", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1663/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1663/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1663/events", "html_url": "https://github.com/altair-viz/altair/issues/1663", "id": 481491410, "node_id": "MDU6SXNzdWU0ODE0OTE0MTA=", "number": 1663, "title": "y-aggregation with interactivity causes Vega error", "user": {"login": "toxyl", "id": 11501185, "node_id": "MDQ6VXNlcjExNTAxMTg1", "avatar_url": "https://avatars.githubusercontent.com/u/11501185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/toxyl", "html_url": "https://github.com/toxyl", "followers_url": "https://api.github.com/users/toxyl/followers", "following_url": "https://api.github.com/users/toxyl/following{/other_user}", "gists_url": "https://api.github.com/users/toxyl/gists{/gist_id}", "starred_url": "https://api.github.com/users/toxyl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/toxyl/subscriptions", "organizations_url": "https://api.github.com/users/toxyl/orgs", "repos_url": "https://api.github.com/users/toxyl/repos", "events_url": "https://api.github.com/users/toxyl/events{/privacy}", "received_events_url": "https://api.github.com/users/toxyl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-08-16T07:58:55Z", "updated_at": "2022-03-23T00:28:42Z", "closed_at": "2022-03-23T00:28:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "For some reason the combination of the `y='count()'` aggregation and `interactive()` mode keeps failing for me with the error `JavaScript Error: e is undefined`. See the code below:\r\n\r\n```\r\nimport altair as alt\r\nfrom pandas import DataFrame\r\n\r\ndata = DataFrame({'A': ['H','T','F','A','H','T','F','A'], 'B': [1, 2, 3, 4, 4, 3, 2, 1]}, columns= ['A', 'B'])\r\n\r\n# Interactivity without y-aggregation works:\r\nalt.Chart(data).mark_bar().encode(x = 'B').interactive().serve()\r\n\r\n# y-aggregation without interactivity works, too:\r\nalt.Chart(data).mark_bar().encode(x = 'B', y = 'count()' ).serve()\r\n\r\n# Interactivity with y-aggregation does NOT work:\r\nalt.Chart(data).mark_bar().encode(x = 'B', y = 'count()' ).interactive().serve()\r\n```\r\n\r\nOS: Kali GNU/Linux Rolling 2019.3\r\nBrowser: Firefox 60.8.0esr", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1663/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1635", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1635/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1635/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1635/events", "html_url": "https://github.com/altair-viz/altair/issues/1635", "id": 475688586, "node_id": "MDU6SXNzdWU0NzU2ODg1ODY=", "number": 1635, "title": "Sorting Colors with errorbars", "user": {"login": "deisi", "id": 5436980, "node_id": "MDQ6VXNlcjU0MzY5ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/5436980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deisi", "html_url": "https://github.com/deisi", "followers_url": "https://api.github.com/users/deisi/followers", "following_url": "https://api.github.com/users/deisi/following{/other_user}", "gists_url": "https://api.github.com/users/deisi/gists{/gist_id}", "starred_url": "https://api.github.com/users/deisi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deisi/subscriptions", "organizations_url": "https://api.github.com/users/deisi/orgs", "repos_url": "https://api.github.com/users/deisi/repos", "events_url": "https://api.github.com/users/deisi/events{/privacy}", "received_events_url": "https://api.github.com/users/deisi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-08-01T13:38:02Z", "updated_at": "2021-02-23T21:45:11Z", "closed_at": "2021-02-23T21:45:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hey, I'm trying to sort a colored plot with error bars and encounter an inconsistency/bug.\r\n\r\n``` python\r\ndata = pd.DataFrame(\r\n    [[2, 2, 1, 'a'],[3, 5, 1, 'b'],[4, 3, 1, \"c\"]],\r\n    columns=['pump_freq', 'value', 'error', 'lipid']\r\n)\r\n\r\nbase = alt.Chart(data).encode(\r\n    alt.X('pump_freq:Q'),\r\n    alt.Y(\r\n        'value', \r\n    ),\r\n    yError=alt.YError('error:Q'),\r\n    color=alt.Color(\r\n        'lipid', \r\n        sort=['b']\r\n    )\r\n)\r\nchart = base.mark_point()+base.mark_errorbar()\r\nchart\r\n```\r\n\r\nThis will not sort due to the `base.mark_errorbar()`. If you remove it it will work though. Any suggestion what is going on?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1635/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1605", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1605/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1605/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1605/events", "html_url": "https://github.com/altair-viz/altair/issues/1605", "id": 466578913, "node_id": "MDU6SXNzdWU0NjY1Nzg5MTM=", "number": 1605, "title": "BUG: Remove invalid methods from top-level chart objects", "user": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-10T23:44:41Z", "updated_at": "2019-07-12T02:11:14Z", "closed_at": "2019-07-12T02:11:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Examples of methods that never result in valid chart specs:\r\n\r\n- ``LayerChart.mark_*``\r\n- ``LayerChart.add_selection``\r\n- ``*ConcatChart.add_selection``\r\n- ``FacetChart.add_selection``\r\n- ``RepeatChart.add_selection``", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1605/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1605/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1603", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1603/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1603/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1603/events", "html_url": "https://github.com/altair-viz/altair/issues/1603", "id": 466122996, "node_id": "MDU6SXNzdWU0NjYxMjI5OTY=", "number": 1603, "title": "Using Categorical Schemes for non-categorical data results in unhelpful error", "user": {"login": "david-waterworth", "id": 5028974, "node_id": "MDQ6VXNlcjUwMjg5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5028974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/david-waterworth", "html_url": "https://github.com/david-waterworth", "followers_url": "https://api.github.com/users/david-waterworth/followers", "following_url": "https://api.github.com/users/david-waterworth/following{/other_user}", "gists_url": "https://api.github.com/users/david-waterworth/gists{/gist_id}", "starred_url": "https://api.github.com/users/david-waterworth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/david-waterworth/subscriptions", "organizations_url": "https://api.github.com/users/david-waterworth/orgs", "repos_url": "https://api.github.com/users/david-waterworth/repos", "events_url": "https://api.github.com/users/david-waterworth/events{/privacy}", "received_events_url": "https://api.github.com/users/david-waterworth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-07-10T06:24:14Z", "updated_at": "2019-11-24T14:14:51Z", "closed_at": "2019-11-24T14:14:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I tried to supply scheme='dark2' for a qualitative column I got\r\n\r\n> Javascript Error: e is undefined\r\n\r\nLooks like there's an error in an exception handler somewhere\r\n\r\ni.e.\r\n\r\n`color=alt.Color('Loss', scale=alt.Scale(scheme='dark2'))`\r\n\r\nFails (reasonably) since 'dark2' isn't a continuous scale, but the message could be more informative.\r\n\r\n`color=alt.Color('Loss', scale=alt.Scale(scheme='viridis'))`\r\n\r\nis ok.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1603/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1586", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1586/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1586/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1586/events", "html_url": "https://github.com/altair-viz/altair/issues/1586", "id": 462689685, "node_id": "MDU6SXNzdWU0NjI2ODk2ODU=", "number": 1586, "title": "alt.Tooltip not behaving the same way as not specifying the object", "user": {"login": "kaisengit", "id": 29574032, "node_id": "MDQ6VXNlcjI5NTc0MDMy", "avatar_url": "https://avatars.githubusercontent.com/u/29574032?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaisengit", "html_url": "https://github.com/kaisengit", "followers_url": "https://api.github.com/users/kaisengit/followers", "following_url": "https://api.github.com/users/kaisengit/following{/other_user}", "gists_url": "https://api.github.com/users/kaisengit/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaisengit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaisengit/subscriptions", "organizations_url": "https://api.github.com/users/kaisengit/orgs", "repos_url": "https://api.github.com/users/kaisengit/repos", "events_url": "https://api.github.com/users/kaisengit/events{/privacy}", "received_events_url": "https://api.github.com/users/kaisengit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-01T12:35:42Z", "updated_at": "2019-07-01T17:09:32Z", "closed_at": "2019-07-01T17:09:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Excuse the weird title but I am not sure how to properly phrase the issue. This is on Altair 3.1.\r\n\r\nLet's take the following example code from another issue: \r\n\r\n```\r\nfrom vega_datasets import data\r\ndf=data.barley()\r\nbase = alt.Chart(df).transform_joinaggregate(\r\n    yield_sum='sum(yield)',\r\n    groupby=['year', 'variety']\r\n).transform_calculate(\r\n    yield_norm='datum.yield / datum.yield_sum'  \r\n).mark_bar().encode(\r\n    x=alt.X('yield', stack='normalize', axis=alt.Axis(title='Normalized Yield', format='.0%')),\r\n    y=alt.Y('variety', title='Variety'),\r\n    tooltip=['yield', 'variety', 'year', 'yield_norm:Q'],\r\n    order='site'\r\n)\r\n\r\nbars = base.encode(\r\n    detail='site',\r\n    color=alt.Color('site', title='Site')\r\n)\r\n\r\ntext = base.mark_text(dx=-15, dy=3).encode(\r\n    text=alt.Text('yield_norm:Q', format='.0%'),\r\n)\r\n\r\nalt.layer(bars, text).facet(column=alt.Column('year:O', title='Year'))\r\n```\r\n\r\nThis works fine. However changing the tooltip line to\r\n`tooltip=alt.Tooltip(['yield', 'variety', 'year', 'yield_norm:Q'])`\r\n\r\nwill throw the following error:\r\n\r\n> ValueError: yield encoding field is specified without a type; the type cannot be automatically inferred because the data is not specified as a pandas.DataFrame.\r\n\r\nShould the two ways of specifying the tooltip not work interchangeably? Or is it maybe related to this issue #1573?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1586/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1573", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1573/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1573/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1573/events", "html_url": "https://github.com/altair-viz/altair/issues/1573", "id": 459015884, "node_id": "MDU6SXNzdWU0NTkwMTU4ODQ=", "number": 1573, "title": "Some new V3 encodings not properly handled", "user": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-06-21T05:31:30Z", "updated_at": "2019-07-04T06:15:14Z", "closed_at": "2019-07-04T06:15:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This fails:\r\n```python\r\nalt.Chart('data.txt').mark_point().encode(\r\n    strokeOpacity='x:Q'\r\n)\r\n```\r\nWhere it should do the same as this:\r\n```python\r\nalt.Chart('data.txt').mark_point().encode(\r\n    strokeOpacity=alt.StrokeOpacity('x:Q')\r\n)\r\n```\r\nThe issue is that this line is not correct for the new camel case encodings introduced in v3:\r\nhttps://github.com/altair-viz/altair/blob/d7a774a00dfb872ba02041a66ea8c2239a0ea0a1/altair/vegalite/v3/api.py#L1411\r\n\r\nWhile this is being fixed, the arg inferring mechanism should be factored out so that it can also be used in the ``facet()`` method, so that ``facet()`` operates similarly to ``encode()``.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1573/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1573/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1556", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1556/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1556/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1556/events", "html_url": "https://github.com/altair-viz/altair/issues/1556", "id": 453847594, "node_id": "MDU6SXNzdWU0NTM4NDc1OTQ=", "number": 1556, "title": "Repeat does not work with boxplot encoding", "user": {"login": "enotspe", "id": 47488630, "node_id": "MDQ6VXNlcjQ3NDg4NjMw", "avatar_url": "https://avatars.githubusercontent.com/u/47488630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/enotspe", "html_url": "https://github.com/enotspe", "followers_url": "https://api.github.com/users/enotspe/followers", "following_url": "https://api.github.com/users/enotspe/following{/other_user}", "gists_url": "https://api.github.com/users/enotspe/gists{/gist_id}", "starred_url": "https://api.github.com/users/enotspe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/enotspe/subscriptions", "organizations_url": "https://api.github.com/users/enotspe/orgs", "repos_url": "https://api.github.com/users/enotspe/repos", "events_url": "https://api.github.com/users/enotspe/events{/privacy}", "received_events_url": "https://api.github.com/users/enotspe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-09T00:10:40Z", "updated_at": "2021-02-23T21:52:41Z", "closed_at": "2021-02-23T21:52:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that there is a bug with trying to build a repeated boxplot vis. \r\n\r\nThis works:\r\n\r\n```python\r\nCY = alt.Chart(datareto).mark_boxplot().encode(\r\n    x='ConsultantType:N',\r\n    y='AverageUnit_CY:Q',   \r\n).properties(\r\n    width=300\r\n)\r\n\r\nES = alt.Chart(datareto).mark_boxplot().encode(\r\n    x='ConsultantType:N',\r\n    y='AverageUnit_ES:Q',   \r\n).properties(\r\n    width=300\r\n)\r\n\r\nLB = alt.Chart(datareto).mark_boxplot().encode(\r\n    x='ConsultantType:N',\r\n    y='AverageUnit_LB:Q',   \r\n).properties(\r\n    width=300\r\n)\r\n\r\n(CY | ES | LB)\r\n```\r\n![boxplot](https://user-images.githubusercontent.com/47488630/59153562-8e738500-8a21-11e9-94d1-beb723c1be4d.png)\r\n\r\nBut this doesn\u00b4t:\r\n\r\n```python\r\nalt.Chart(datareto).mark_boxplot().encode(\r\n    alt.X('ConsultantType', type='nominal'),\r\n    alt.Y(alt.repeat(\"column\"), type='quantitative'),\r\n).properties(\r\n    width=300\r\n).repeat(\r\n    column=['AverageUnit_CY', 'AverageUnit_ES', 'AverageUnit_LB']\r\n)\r\n```\r\n\r\nOutput:\r\n```\r\nJavaScript Error: Unexpected token ]\r\n\r\nThis usually means there's a typo in your chart specification. See the javascript console for the full traceback.\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1556/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1549", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1549/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1549/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1549/events", "html_url": "https://github.com/altair-viz/altair/issues/1549", "id": 451777577, "node_id": "MDU6SXNzdWU0NTE3Nzc1Nzc=", "number": 1549, "title": "valid() aggregation not working with source csv files", "user": {"login": "asuagar", "id": 19633, "node_id": "MDQ6VXNlcjE5NjMz", "avatar_url": "https://avatars.githubusercontent.com/u/19633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asuagar", "html_url": "https://github.com/asuagar", "followers_url": "https://api.github.com/users/asuagar/followers", "following_url": "https://api.github.com/users/asuagar/following{/other_user}", "gists_url": "https://api.github.com/users/asuagar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asuagar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asuagar/subscriptions", "organizations_url": "https://api.github.com/users/asuagar/orgs", "repos_url": "https://api.github.com/users/asuagar/repos", "events_url": "https://api.github.com/users/asuagar/events{/privacy}", "received_events_url": "https://api.github.com/users/asuagar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-06-04T03:13:42Z", "updated_at": "2019-06-04T10:35:41Z", "closed_at": "2019-06-04T10:35:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am using Altair 3.0.1. `valid()` aggregation does not handle correctly missing values when a CSV file is used as source. Here is the code:\r\n\r\n```\r\nimport altair as alt\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\ndata = {'col_1': [1,1,1,2,2,2], 'col_2': [1,2,3,np.nan,np.nan,np.nan]}\r\ndf = pd.DataFrame(data)\r\ndf.to_csv('data.csv')\r\n\r\ndataframe = alt.Chart(df).mark_bar().encode(\r\n    x='col_1:O',\r\n    y='valid(col_2):Q'\r\n)\r\n\r\ncsv = alt.Chart('data.csv').mark_bar().encode(\r\n    x='col_1:O',\r\n    y='valid(col_2):Q'\r\n)\r\n\r\ndataframe | csv\r\n```\r\n![image](https://user-images.githubusercontent.com/19633/58848250-253cec00-8686-11e9-9c64-92ebb6f821df.png)\r\n\r\nThank you for any help you can offer and working in Altair so hard.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1549/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1549/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1531", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1531/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1531/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1531/events", "html_url": "https://github.com/altair-viz/altair/issues/1531", "id": 447936046, "node_id": "MDU6SXNzdWU0NDc5MzYwNDY=", "number": 1531, "title": "mark_line() could not render line properly.", "user": {"login": "yoonghm", "id": 4215991, "node_id": "MDQ6VXNlcjQyMTU5OTE=", "avatar_url": "https://avatars.githubusercontent.com/u/4215991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yoonghm", "html_url": "https://github.com/yoonghm", "followers_url": "https://api.github.com/users/yoonghm/followers", "following_url": "https://api.github.com/users/yoonghm/following{/other_user}", "gists_url": "https://api.github.com/users/yoonghm/gists{/gist_id}", "starred_url": "https://api.github.com/users/yoonghm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yoonghm/subscriptions", "organizations_url": "https://api.github.com/users/yoonghm/orgs", "repos_url": "https://api.github.com/users/yoonghm/repos", "events_url": "https://api.github.com/users/yoonghm/events{/privacy}", "received_events_url": "https://api.github.com/users/yoonghm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-24T01:12:31Z", "updated_at": "2021-02-23T21:54:55Z", "closed_at": "2021-02-23T21:54:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using matplotlib, I have the following plot:\r\n![power_curve](https://user-images.githubusercontent.com/4215991/58295849-aa610f00-7e03-11e9-8a9a-f688d17c11d1.jpg)\r\n\r\nHowever if I use altair, I could not make it to draw properly. \r\n![power_curve2](https://user-images.githubusercontent.com/4215991/58295928-04fa6b00-7e04-11e9-89cf-051a0073fbfe.jpg)\r\n\r\n\r\nBelow is the code that I used:\r\n\r\n    import altair as alt\r\n\r\n    pc_csv = 'https://raw.githubusercontent.com/yoonghm/data/master/power_curve.csv'\r\n\r\n    alt.Chart(pc_csv, title=\"Power Curve\") \\\r\n            .mark_line(point=True) \\\r\n            .encode(\r\n                x=alt.X('Wind speed (m/s):Q'),\r\n                y=alt.Y('Output power (kW):Q'),\r\n            )\r\n\r\n`mark_point()` show the following plot:\r\n![power_curve3](https://user-images.githubusercontent.com/4215991/58295989-51de4180-7e04-11e9-8641-d10d8c08b596.jpg)\r\n\r\nDo you solution for this?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1531/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1531/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1514", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1514/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1514/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1514/events", "html_url": "https://github.com/altair-viz/altair/issues/1514", "id": 445267075, "node_id": "MDU6SXNzdWU0NDUyNjcwNzU=", "number": 1514, "title": "Can not pan the x axis of the second chart if only call interactive() once.", "user": {"login": "ruoyu0088", "id": 826871, "node_id": "MDQ6VXNlcjgyNjg3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/826871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ruoyu0088", "html_url": "https://github.com/ruoyu0088", "followers_url": "https://api.github.com/users/ruoyu0088/followers", "following_url": "https://api.github.com/users/ruoyu0088/following{/other_user}", "gists_url": "https://api.github.com/users/ruoyu0088/gists{/gist_id}", "starred_url": "https://api.github.com/users/ruoyu0088/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ruoyu0088/subscriptions", "organizations_url": "https://api.github.com/users/ruoyu0088/orgs", "repos_url": "https://api.github.com/users/ruoyu0088/repos", "events_url": "https://api.github.com/users/ruoyu0088/events{/privacy}", "received_events_url": "https://api.github.com/users/ruoyu0088/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-17T05:10:35Z", "updated_at": "2021-02-23T22:19:54Z", "closed_at": "2021-02-23T22:19:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Here is the code:\r\n\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\ncars = data.cars()\r\n\r\nchart = alt.Chart(cars).mark_point().properties(\r\n    width=250,\r\n    height=250\r\n).interactive()\r\n\r\nchart.encode(x='Miles_per_Gallon:Q', y='Weight_in_lbs:Q') | chart.encode(x='Acceleration:Q', y='Horsepower:Q')\r\n```\r\n\r\nthe second chart cannot be panned along x axis with mouse. Call `interactive()` for both charts can solve the problem.\r\n\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\ncars = data.cars()\r\n\r\nchart = alt.Chart(cars).mark_point().properties(\r\n    width=250,\r\n    height=250\r\n)\r\n\r\nchart.encode(x='Miles_per_Gallon:Q', y='Weight_in_lbs:Q').interactive() | chart.encode(x='Acceleration:Q', y='Horsepower:Q').interactive()\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1514/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1474", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1474/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1474/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1474/events", "html_url": "https://github.com/altair-viz/altair/issues/1474", "id": 440726984, "node_id": "MDU6SXNzdWU0NDA3MjY5ODQ=", "number": 1474, "title": "Encodings should be XError/YError, not Xerror/Yerror", "user": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-06T14:26:57Z", "updated_at": "2019-05-25T14:42:36Z", "closed_at": "2019-05-25T14:42:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "See #1473", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1474/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1474/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1468", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1468/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1468/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1468/events", "html_url": "https://github.com/altair-viz/altair/issues/1468", "id": 440309444, "node_id": "MDU6SXNzdWU0NDAzMDk0NDQ=", "number": 1468, "title": "interactive cross highlight example, strange legend position", "user": {"login": "iliatimofeev", "id": 11561581, "node_id": "MDQ6VXNlcjExNTYxNTgx", "avatar_url": "https://avatars.githubusercontent.com/u/11561581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iliatimofeev", "html_url": "https://github.com/iliatimofeev", "followers_url": "https://api.github.com/users/iliatimofeev/followers", "following_url": "https://api.github.com/users/iliatimofeev/following{/other_user}", "gists_url": "https://api.github.com/users/iliatimofeev/gists{/gist_id}", "starred_url": "https://api.github.com/users/iliatimofeev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iliatimofeev/subscriptions", "organizations_url": "https://api.github.com/users/iliatimofeev/orgs", "repos_url": "https://api.github.com/users/iliatimofeev/repos", "events_url": "https://api.github.com/users/iliatimofeev/events{/privacy}", "received_events_url": "https://api.github.com/users/iliatimofeev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-04T10:38:09Z", "updated_at": "2019-11-23T21:16:43Z", "closed_at": "2019-11-23T21:16:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "![image](https://user-images.githubusercontent.com/11561581/57177891-99ab2200-6e71-11e9-8429-1badd1c6ca25.png)\r\nhttps://altair-viz.github.io/gallery/interactive_cross_highlight.html", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1468/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1468/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1408", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1408/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1408/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1408/events", "html_url": "https://github.com/altair-viz/altair/issues/1408", "id": 427257152, "node_id": "MDU6SXNzdWU0MjcyNTcxNTI=", "number": 1408, "title": "Config title font size bug", "user": {"login": "noklam", "id": 18221871, "node_id": "MDQ6VXNlcjE4MjIxODcx", "avatar_url": "https://avatars.githubusercontent.com/u/18221871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noklam", "html_url": "https://github.com/noklam", "followers_url": "https://api.github.com/users/noklam/followers", "following_url": "https://api.github.com/users/noklam/following{/other_user}", "gists_url": "https://api.github.com/users/noklam/gists{/gist_id}", "starred_url": "https://api.github.com/users/noklam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noklam/subscriptions", "organizations_url": "https://api.github.com/users/noklam/orgs", "repos_url": "https://api.github.com/users/noklam/repos", "events_url": "https://api.github.com/users/noklam/events{/privacy}", "received_events_url": "https://api.github.com/users/noklam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-03-30T08:05:16Z", "updated_at": "2019-11-23T20:47:32Z", "closed_at": "2019-11-23T20:47:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Bug:\r\nWhen I change title font size, it changes my title color too\r\n\r\nExpected behavior:\r\nIt should only change my font size.\r\n\r\n\r\nThe library API of plotting is quite clean, but I found that there is not enough example to demo how to configure chart, which is also important to finetuning.\r\nSearching how to configure chart is difficult, like configure_title, configure_axis, properties. All these methods will not show up with tab completion and often I have to google around.\r\n\r\nA gist notebook demo:\r\nhttps://gist.github.com/noklam/2f2c8b07fe17174ae4107fb486d61f3b", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1408/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1379", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1379/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1379/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1379/events", "html_url": "https://github.com/altair-viz/altair/issues/1379", "id": 423756382, "node_id": "MDU6SXNzdWU0MjM3NTYzODI=", "number": 1379, "title": "Combining \"Interval Selection\" with \"Multi-Line Tooltip\" examples \u2014 the selection does not respect scale", "user": {"login": "xpl", "id": 1707, "node_id": "MDQ6VXNlcjE3MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/1707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xpl", "html_url": "https://github.com/xpl", "followers_url": "https://api.github.com/users/xpl/followers", "following_url": "https://api.github.com/users/xpl/following{/other_user}", "gists_url": "https://api.github.com/users/xpl/gists{/gist_id}", "starred_url": "https://api.github.com/users/xpl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xpl/subscriptions", "organizations_url": "https://api.github.com/users/xpl/orgs", "repos_url": "https://api.github.com/users/xpl/repos", "events_url": "https://api.github.com/users/xpl/events{/privacy}", "received_events_url": "https://api.github.com/users/xpl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-03-21T14:24:59Z", "updated_at": "2019-03-21T20:52:24Z", "closed_at": "2019-03-21T17:16:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello and thanks for the great project! I am trying to combine the code from the two examples:\r\n\r\nhttps://altair-viz.github.io/gallery/interval_selection.html\r\nhttps://altair-viz.github.io/gallery/multiline_tooltip.html\r\n\r\nBut I am getting that erratic behavior of the mouse hover when an interval is selected:\r\n\r\n<img width=\"788\" alt=\"Screen Shot 2019-03-21 at 17 22 05\" src=\"https://user-images.githubusercontent.com/1707/54758895-1fdf1200-4bfe-11e9-8f03-fb75d34d19ae.png\">\r\n\r\nWhat am I doing wrong and how to fix it?\r\n\r\nThe code:\r\n\r\n```python\r\nimport altair as alt\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\nnp.random.seed(42)\r\nsource = pd.DataFrame(np.cumsum(np.random.randn(100, 3), 0).round(2),\r\n                    columns=['A', 'B', 'C'], index=pd.RangeIndex(100, name='x'))\r\nsource = source.reset_index().melt('x', var_name='category', value_name='y')\r\n\r\n# Create a selection that chooses the nearest point & selects based on x-value\r\nnearest = alt.selection(type='single', nearest=True, on='mouseover',\r\n                        fields=['x'], empty='none')\r\n\r\nbrush = alt.selection(type='interval', encodings=['x'])\r\n\r\nx_scaled = alt.X('x:Q', scale={'domain': brush.ref()})\r\n\r\n# The basic line\r\nline = alt.Chart().mark_line(interpolate='basis').encode(\r\n    x=x_scaled,\r\n    y='y:Q',\r\n    color='category:N'\r\n).properties (width=600, height=300)\r\n\r\n# Transparent selectors across the chart. This is what tells us\r\n# the x-value of the cursor\r\nselectors = alt.Chart().mark_point().encode(\r\n    x=x_scaled,\r\n    opacity=alt.value(0),\r\n).add_selection(\r\n    nearest\r\n)\r\n\r\n# Draw points on the line, and highlight based on selection\r\npoints = line.mark_point().encode(\r\n    opacity=alt.condition(nearest, alt.value(1), alt.value(0))\r\n)\r\n\r\n# Draw text labels near the points, and highlight based on selection\r\ntext = line.mark_text(align='left', dx=5, dy=-5).encode(\r\n    text=alt.condition(nearest, 'y:Q', alt.value(' '))\r\n)\r\n\r\n# Draw a rule at the location of the selection\r\nrules = alt.Chart().mark_rule(color='gray').encode(\r\n    x='x:Q',\r\n).transform_filter(\r\n    nearest\r\n)\r\n\r\n# Put the five layers into a chart and bind the data\r\nalt.vconcat(alt.layer(line, selectors, points, rules, text),\r\n            line.properties(height=60).add_selection(brush),\r\n            data=source)\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1379/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1379/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1323", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1323/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1323/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1323/events", "html_url": "https://github.com/altair-viz/altair/issues/1323", "id": 407513137, "node_id": "MDU6SXNzdWU0MDc1MTMxMzc=", "number": 1323, "title": "JupyterLab freezes when passing in wrong column name", "user": {"login": "python152", "id": 17506882, "node_id": "MDQ6VXNlcjE3NTA2ODgy", "avatar_url": "https://avatars.githubusercontent.com/u/17506882?v=4", "gravatar_id": "", "url": "https://api.github.com/users/python152", "html_url": "https://github.com/python152", "followers_url": "https://api.github.com/users/python152/followers", "following_url": "https://api.github.com/users/python152/following{/other_user}", "gists_url": "https://api.github.com/users/python152/gists{/gist_id}", "starred_url": "https://api.github.com/users/python152/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/python152/subscriptions", "organizations_url": "https://api.github.com/users/python152/orgs", "repos_url": "https://api.github.com/users/python152/repos", "events_url": "https://api.github.com/users/python152/events{/privacy}", "received_events_url": "https://api.github.com/users/python152/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-02-07T02:04:21Z", "updated_at": "2021-02-23T22:45:33Z", "closed_at": "2021-02-23T22:45:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following snippet reproduce the behavior. All other columns other than `Q` will deal with the misspell gracefully, but `bw` column is serious when spelled wrong - the whole session just hang indefinitely.\r\n\r\n```\r\nimport pandas as pd\r\nimport altair as alt\r\n\r\ndf = pd.DataFrame([['random', 'read', 23.988], ['random', 'write', 43.988],['seq', 'write', 30.22]], columns=['pattern', 'mode', 'bw'])\r\n\r\nalt.Chart(df).mark_bar().encode(\r\n    x = 'bwX:Q',\r\n    y = 'mode:O',\r\n    row=\"pattern:O\",\r\n    color=\"mode:O\"\r\n)\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1323/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1296", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1296/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1296/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1296/events", "html_url": "https://github.com/altair-viz/altair/issues/1296", "id": 398976640, "node_id": "MDU6SXNzdWUzOTg5NzY2NDA=", "number": 1296, "title": "'bin-linear' not working as expected for piecewise color palettes", "user": {"login": "LukeMathWalker", "id": 20745048, "node_id": "MDQ6VXNlcjIwNzQ1MDQ4", "avatar_url": "https://avatars.githubusercontent.com/u/20745048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LukeMathWalker", "html_url": "https://github.com/LukeMathWalker", "followers_url": "https://api.github.com/users/LukeMathWalker/followers", "following_url": "https://api.github.com/users/LukeMathWalker/following{/other_user}", "gists_url": "https://api.github.com/users/LukeMathWalker/gists{/gist_id}", "starred_url": "https://api.github.com/users/LukeMathWalker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LukeMathWalker/subscriptions", "organizations_url": "https://api.github.com/users/LukeMathWalker/orgs", "repos_url": "https://api.github.com/users/LukeMathWalker/repos", "events_url": "https://api.github.com/users/LukeMathWalker/events{/privacy}", "received_events_url": "https://api.github.com/users/LukeMathWalker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-14T16:46:42Z", "updated_at": "2019-11-23T20:57:24Z", "closed_at": "2019-11-23T20:57:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have been working on a heatmap for service availability: we'd like to be able to set breakpoints and use a different color palette in each segment of the color range (e.g. green to yellow between 100 and 99, yellow to red between 99 and 80, etc.).\r\n\r\n'bin-linear' type and domain/range with more than 2 items seem to be the way to achieve it, but we observed a weird behaviour.\r\n\r\nThis is the minimal code example:\r\n```python\r\nimport altair as alt\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\n# Compute x^2 + y^2 across a 2D grid\r\nx, y = np.meshgrid(range(-5, 5), range(-5, 5))\r\nz = x ** 2 + y ** 2\r\n\r\n# Convert this grid to columnar data expected by Altair\r\nsource = pd.DataFrame({'x': x.ravel(),\r\n                     'y': y.ravel(),\r\n                     'z': z.ravel()})\r\n\r\nalt.Chart(source).mark_rect().encode(\r\n    alt.Color('z:Q', scale=alt.Scale(domain=[0, 25, 49, 50], \r\n                                     range=[\"black\", \"red\", \"yellow\", \"green\"], \r\n                                     type='bin-linear')),\r\n    x='x:O',\r\n    y='y:O',\r\n).save(\"bug.html\")\r\n```\r\nIf I open \"bug.html\", I see:\r\n![visualization 13](https://user-images.githubusercontent.com/20745048/51126731-c3393280-181b-11e9-956d-8973acf1e6a8.png)\r\nMy \"breakpoints\" have not been honored. If I select \"Open in Vega Editor\" in the HTML page, instead, I get:\r\n![download](https://user-images.githubusercontent.com/20745048/51126777-e5cb4b80-181b-11e9-9cc4-bbaf1bf7fa49.png)\r\nMy breakpoints work correctly!\r\n\r\nAny idea what might be the cause of this behaviour difference?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1296/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1296/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1270", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1270/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1270/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1270/events", "html_url": "https://github.com/altair-viz/altair/issues/1270", "id": 390927371, "node_id": "MDU6SXNzdWUzOTA5MjczNzE=", "number": 1270, "title": "Blank tooltips for datetime64[ns]", "user": {"login": "ejain", "id": 1323903, "node_id": "MDQ6VXNlcjEzMjM5MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1323903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ejain", "html_url": "https://github.com/ejain", "followers_url": "https://api.github.com/users/ejain/followers", "following_url": "https://api.github.com/users/ejain/following{/other_user}", "gists_url": "https://api.github.com/users/ejain/gists{/gist_id}", "starred_url": "https://api.github.com/users/ejain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ejain/subscriptions", "organizations_url": "https://api.github.com/users/ejain/orgs", "repos_url": "https://api.github.com/users/ejain/repos", "events_url": "https://api.github.com/users/ejain/events{/privacy}", "received_events_url": "https://api.github.com/users/ejain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-12-14T01:19:49Z", "updated_at": "2019-05-29T23:53:59Z", "closed_at": "2019-05-29T23:53:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This basic chart renders as expected, except that the \"date\" value in the tooltip is blank:\r\n\r\n    import altair as alt\r\n    from vega_datasets import data\r\n    \r\n    alt.Chart(data.stocks()).mark_point().encode(\r\n        x='date',\r\n        y='price',\r\n        tooltip=['date', 'price', 'symbol']\r\n    )\r\n\r\n![chart](https://user-images.githubusercontent.com/1323903/49977272-83b8b700-fefa-11e8-9548-b00eda181fb6.png)\r\n\r\nThis can be fixed by specifying an explicit format with e.g. `alt.Tooltip('date', format='%d/%m/%Y')`, but it might make sense to have a default format?\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1270/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1270/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1145", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1145/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1145/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1145/events", "html_url": "https://github.com/altair-viz/altair/issues/1145", "id": 363312028, "node_id": "MDU6SXNzdWUzNjMzMTIwMjg=", "number": 1145, "title": "sorting with interaction - potential bug", "user": {"login": "Alcampopiano", "id": 4624246, "node_id": "MDQ6VXNlcjQ2MjQyNDY=", "avatar_url": "https://avatars.githubusercontent.com/u/4624246?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alcampopiano", "html_url": "https://github.com/Alcampopiano", "followers_url": "https://api.github.com/users/Alcampopiano/followers", "following_url": "https://api.github.com/users/Alcampopiano/following{/other_user}", "gists_url": "https://api.github.com/users/Alcampopiano/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alcampopiano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alcampopiano/subscriptions", "organizations_url": "https://api.github.com/users/Alcampopiano/orgs", "repos_url": "https://api.github.com/users/Alcampopiano/repos", "events_url": "https://api.github.com/users/Alcampopiano/events{/privacy}", "received_events_url": "https://api.github.com/users/Alcampopiano/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-09-24T20:41:09Z", "updated_at": "2021-02-23T22:57:29Z", "closed_at": "2021-02-23T22:57:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi Jake,\r\n\r\nThe example below shows a bar chart on the left cross filtering a bar chart on the right. \r\n\r\nThe issue is that the chart on the right is only sorted in the initial and filtered views. Once I \"click off\" to return to the original view, the chart on the right is no longer sorted. This is not an issue in the VL editor. Any idea what is happening here?\r\n\r\n#### initial view (looks great)\r\n![visualization 46](https://user-images.githubusercontent.com/4624246/45977540-ef843580-c017-11e8-95b8-80155ec02394.png)\r\n---\r\n#### filtered view (looks great)\r\n![visualization 47](https://user-images.githubusercontent.com/4624246/45977619-2ce8c300-c018-11e8-9523-3085690c3382.png)\r\n---\r\n#### full view after filtering (not looking sorted anymore)\r\n![visualization 48](https://user-images.githubusercontent.com/4624246/45977641-370ac180-c018-11e8-929b-0ae1ed1edb82.png)\r\n---\r\n\r\n```python\r\nimport altair as alt\r\nimport pandas as pd\r\n\r\ndf=pd.DataFrame({'student name': ['allan', 'john', 'paul','george','ringo','yoko','keith','mick','charlie'], \r\n                 'school_code': ['sch1', 'sch2', 'sch3', 'sch1', 'sch2', 'sch3', 'sch1', 'sch2', 'sch3'], \r\n                 'totals_absences': [3,3,3,4,4,5,6,7,11]})\r\ndf=df.sort_values('totals_absences')\r\nsingle=alt.selection_single(encodings=['color'])\r\ncond=alt.condition(single, 'school_code', alt.value('lightgray'),legend=None)\r\nmax_val=int(df['totals_absences'].max())\r\n\r\nsch=alt.Chart().mark_bar().encode(\r\n    x=alt.X('sum(totals_absences)', title=None),\r\n    y=alt.Y('school_code', sort=alt.EncodingSortField(op='sum', field='totals_absences', order='descending'), title=None),\r\n    color=cond,\r\n    size=alt.Size('mean(totals_absences)', legend=None)\r\n).add_selection(single).properties(title='Number of Absences by School')\r\n\r\nstud=alt.Chart().mark_bar().encode(\r\n    x=alt.X('totals_absences', title=None, scale=alt.Scale(domain=[0,max_val])),\r\n    y=alt.Y('student name', sort=alt.EncodingSortField(op='count', field='totals_absences', order='descending'),title=None),\r\n    color=alt.Color('school_code', legend=None),\r\n    tooltip=['school_code', 'student name']\r\n).transform_filter(single).properties(title='Number of Absences by Student')\r\n\r\ntext=alt.Chart().mark_text(color='black', align='left').encode(\r\n    x=alt.X('totals_absences', scale=alt.Scale(domain=[0,max_val])),\r\n    y=alt.Y('student name', sort=alt.EncodingSortField(op='count', field='totals_absences', order='descending')),\r\n    text='totals_absences',\r\n    tooltip=['school_code', 'student name']\r\n).transform_filter(single)\r\n\r\nstud_text=alt.layer(stud,text)\r\nalt.hconcat(sch,stud_text, data=df)\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1145/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1145/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1140", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1140/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1140/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1140/events", "html_url": "https://github.com/altair-viz/altair/issues/1140", "id": 361974302, "node_id": "MDU6SXNzdWUzNjE5NzQzMDI=", "number": 1140, "title": "Using field predicates in conditions", "user": {"login": "fedarko", "id": 4177727, "node_id": "MDQ6VXNlcjQxNzc3Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/4177727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fedarko", "html_url": "https://github.com/fedarko", "followers_url": "https://api.github.com/users/fedarko/followers", "following_url": "https://api.github.com/users/fedarko/following{/other_user}", "gists_url": "https://api.github.com/users/fedarko/gists{/gist_id}", "starred_url": "https://api.github.com/users/fedarko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fedarko/subscriptions", "organizations_url": "https://api.github.com/users/fedarko/orgs", "repos_url": "https://api.github.com/users/fedarko/repos", "events_url": "https://api.github.com/users/fedarko/events{/privacy}", "received_events_url": "https://api.github.com/users/fedarko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-09-20T00:25:47Z", "updated_at": "2018-09-22T14:18:29Z", "closed_at": "2018-09-22T14:18:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi -- first off, thanks for developing Altair! It's already been very useful for our work.\r\n\r\nI've been looking into implementing conditional `size` encodings for marks in a visualization based on the value of an attribute. I figured I might do this by using a `FieldEqualPredicate` inside a `condition`, but every time I tried to use this predicate by itself in a `condition` I got the following error:\r\n\r\n```python\r\nNotImplementedError: condition predicate of type <class 'altair.vegalite.v2.schema.core.FieldEqualPredicate'>\r\n```\r\n\r\nAs an example of this, here's the Jupyter Notebook example code from the [installation page](https://altair-viz.github.io/getting_started/installation.html?highlight=data%20iris#quick-start-altair-notebook), with the only addition being a `size` argument that results in this error. The intended behavior of this `size` argument would be making each point with a `petalWidth` of 1 larger than the other points in the plot.\r\n\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nalt.renderers.enable('notebook')\r\n\r\niris = data.iris()\r\n\r\nalt.Chart(iris).mark_point().encode(\r\n    x='petalLength',\r\n    y='petalWidth',\r\n    color='species',\r\n    size=alt.condition(\r\n        alt.FieldEqualPredicate(field='petalWidth', equal=1.0),\r\n        alt.value(30.0),\r\n        alt.value(5.0)\r\n    )\r\n)\r\n```\r\n\r\nWrapping the `FieldEqualPredicate` inside a `Predicate` makes this work, though:\r\n\r\n```python\r\n...\r\n    size=alt.condition(\r\n        alt.Predicate(\r\n            alt.FieldEqualPredicate(field='petalWidth', equal=1.0)\r\n        ),\r\n        alt.value(30.0),\r\n        alt.value(5.0)\r\n    )\r\n...\r\n```\r\n\r\nIs this current behavior (of field predicates being required to be wrapped inside a general `Predicate` when being used in a `condition`) intentional? I can't find any explicit documentation of this requirement outside of the description of the `predicate` parameter of [`altair.condition()`](https://altair-viz.github.io/user_guide/generated/api/altair.condition.html) (and without some knowledge of the various `Predicate` object hierarchies in Altair, it seems at first like a field predicate would be usable by itself for that parameter).\r\n\r\nIf this behavior is intentional, I think it might be a good idea to update the docs to make this more clear. (As mentioned, from just looking at the `condition` ([1](https://altair-viz.github.io/user_guide/generated/api/altair.condition.html)) and `FieldEqualPredicate` ([1](https://altair-viz.github.io/user_guide/generated/core/altair.FieldEqualPredicate.html), [2](https://altair-viz.github.io/user_guide/transform.html#field-predicates)) docs, it isn't immediately clear why the first code example in this issue fails.) In either case, I'd be happy to look into making a pull request to either change this (so that field predicates can be directly passed into conditions) or update the documentation about this behavior.\r\n\r\nThanks again for Altair! :)", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1140/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1027", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1027/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1027/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1027/events", "html_url": "https://github.com/altair-viz/altair/issues/1027", "id": 341734428, "node_id": "MDU6SXNzdWUzNDE3MzQ0Mjg=", "number": 1027, "title": "Monthly data and ordinal encoding create an \"off by one\" error", "user": {"login": "palewire", "id": 9993, "node_id": "MDQ6VXNlcjk5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/9993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palewire", "html_url": "https://github.com/palewire", "followers_url": "https://api.github.com/users/palewire/followers", "following_url": "https://api.github.com/users/palewire/following{/other_user}", "gists_url": "https://api.github.com/users/palewire/gists{/gist_id}", "starred_url": "https://api.github.com/users/palewire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palewire/subscriptions", "organizations_url": "https://api.github.com/users/palewire/orgs", "repos_url": "https://api.github.com/users/palewire/repos", "events_url": "https://api.github.com/users/palewire/events{/privacy}", "received_events_url": "https://api.github.com/users/palewire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-07-17T01:38:39Z", "updated_at": "2018-07-28T18:19:56Z", "closed_at": "2018-07-28T18:19:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I uncovered this \"bug\" during some data exploration for development of a [open-source library](https://github.com/datadesk/cpi/blob/master/notebooks/analysis.ipynb) tracking the U.S. Consumer Price Index. \r\n\r\nThe source data is monthly, with the values linked with the first date of each month. \r\n\r\n```python\r\nimport pandas as pd\r\nimport altair as alt\r\ndf = pd.read_json(\"https://raw.githubusercontent.com/datadesk/cpi/master/notebooks/last_13.json\", dtype={\"date_label\": pd.np.datetime64})\r\ndf.head(13)[['date',  'pct_change_rounded']]\r\n```\r\n\r\n![screenshot from 2018-07-16 18-33-09](https://user-images.githubusercontent.com/9993/42791686-b7d773e0-8926-11e8-8c19-e7adaabb1e09.png)\r\n\r\nMy aim was to format the dates in the x-axis labels in the same manner as the government's sample chart.\r\n\r\n![screenshot from 2018-07-16 18-36-58](https://user-images.githubusercontent.com/9993/42791803-42d466c4-8927-11e8-9ca1-2310cc895e2e.png)\r\n\r\nI tried to do that with `timeUnit` and the `format` option to `axis`.\r\n\r\n```python\r\nalt.Chart(df).mark_bar().encode(\r\n    x=alt.X(\"date:O\", timeUnit=\"yearmonth\", axis=alt.Axis(format=\"%b %y\")),\r\n    y=\"pct_change_rounded:Q\"\r\n)\r\n```\r\n\r\nHere's what I got:\r\n\r\n![visualization 39](https://user-images.githubusercontent.com/9993/42791838-6427bbb4-8927-11e8-8207-4177b104c0a4.png)\r\n\r\nLook closely and you can see that the latest value, June 1, is rendered as May.\r\n\r\nWhat's up with that? \r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1027/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1027/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1022", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1022/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1022/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1022/events", "html_url": "https://github.com/altair-viz/altair/issues/1022", "id": 341483169, "node_id": "MDU6SXNzdWUzNDE0ODMxNjk=", "number": 1022, "title": "TypeError: data type not understood", "user": {"login": "brylie", "id": 17307, "node_id": "MDQ6VXNlcjE3MzA3", "avatar_url": "https://avatars.githubusercontent.com/u/17307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brylie", "html_url": "https://github.com/brylie", "followers_url": "https://api.github.com/users/brylie/followers", "following_url": "https://api.github.com/users/brylie/following{/other_user}", "gists_url": "https://api.github.com/users/brylie/gists{/gist_id}", "starred_url": "https://api.github.com/users/brylie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brylie/subscriptions", "organizations_url": "https://api.github.com/users/brylie/orgs", "repos_url": "https://api.github.com/users/brylie/repos", "events_url": "https://api.github.com/users/brylie/events{/privacy}", "received_events_url": "https://api.github.com/users/brylie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-16T11:33:18Z", "updated_at": "2018-07-16T15:27:31Z", "closed_at": "2018-07-16T15:27:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a DataFrame with the following data types:\r\n\r\n```py\r\ndate_trunc    datetime64[ns, UTC]\r\ncount                       int64\r\ncount_32                    int32\r\ndtype: object\r\n```\r\n\r\nWhen I try to plot the data with Altair, I get an error:\r\n\r\n```py\r\nalt.Chart(daily_booking_counts_results).mark_line(interpolate='step-after').encode(\r\n    x='date_trunc:T',\r\n    y='count:Q'\r\n)\r\n```\r\n\r\n```\r\nTypeError: data type not understood\r\n\r\nChart({\r\n  data:                   date_trunc  count  count_32\r\n  0  2018-04-20 00:00:00+00:00      7         7\r\n  1  2018-04-21 00:00:00+00:00      2         2\r\n  2  2018-04-22 00:00:00+00:00      3         3\r\n  3  2018-04-23 00:00:00+00:00      5         5\r\n  4  2018-04-24 00:00:00+00:00      4         4\r\n  5  2018-04-25 00:00:00+00:00      3         3\r\n  6  2018-04-26 00:00:00+00:00      4         4\r\n  7  2018-04-27 00:00:00+00:00      3         3\r\n  8  2018-04-28 00:00:00+00:00      4         4\r\n  9  2018-04-29 00:00:00+00:00      2         2\r\n  10 2018-04-30 00:00:00+00:00      4         4\r\n  11 2018-05-02 00:00:00+00:00      6         6\r\n  12 2018-05-03 00:00:00+00:00      7         7\r\n  13 2018-05-04 00:00:00+00:00      2         2\r\n  14 2018-05-05 00:00:00+00:00      1         1\r\n  15 2018-05-06 00:00:00+00:00      2         2\r\n  16 2018-05-07 00:00:00+00:00      2         2\r\n  17 2018-05-08 00:00:00+00:00      7         7\r\n  18 2018-05-09 00:00:00+00:00      4         4\r\n  19 2018-05-10 00:00:00+00:00      3         3\r\n  20 2018-05-11 00:00:00+00:00      5         5\r\n  21 2018-05-12 00:00:00+00:00      3         3\r\n  22 2018-05-13 00:00:00+00:00      1         1\r\n  23 2018-05-14 00:00:00+00:00      5         5\r\n  24 2018-05-15 00:00:00+00:00      6         6\r\n  25 2018-05-16 00:00:00+00:00      3         3\r\n  26 2018-05-17 00:00:00+00:00      4         4\r\n  27 2018-05-18 00:00:00+00:00      4         4\r\n  28 2018-05-20 00:00:00+00:00      3         3\r\n  29 2018-05-21 00:00:00+00:00      6         6\r\n```\r\n\r\nWhy might Altair, or a related dependency, be throwing this error?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1022/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1022/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/1014", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/1014/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/1014/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/1014/events", "html_url": "https://github.com/altair-viz/altair/issues/1014", "id": 340278871, "node_id": "MDU6SXNzdWUzNDAyNzg4NzE=", "number": 1014, "title": "Log colour scales don't seem to choose sensible default domains/ranges", "user": {"login": "claresloggett", "id": 1815107, "node_id": "MDQ6VXNlcjE4MTUxMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/1815107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claresloggett", "html_url": "https://github.com/claresloggett", "followers_url": "https://api.github.com/users/claresloggett/followers", "following_url": "https://api.github.com/users/claresloggett/following{/other_user}", "gists_url": "https://api.github.com/users/claresloggett/gists{/gist_id}", "starred_url": "https://api.github.com/users/claresloggett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claresloggett/subscriptions", "organizations_url": "https://api.github.com/users/claresloggett/orgs", "repos_url": "https://api.github.com/users/claresloggett/repos", "events_url": "https://api.github.com/users/claresloggett/events{/privacy}", "received_events_url": "https://api.github.com/users/claresloggett/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-07-11T14:53:40Z", "updated_at": "2020-02-02T08:13:10Z", "closed_at": "2020-02-02T08:13:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Summary: If I use a log colour scale by setting colour to `alt.Color('colorvariable:Q', scale=alt.Scale(type='log')`, there is very little variation across the colour range. If I log-transform the variable myself, or, oddly, if set the `range` on the `alt.Scale()` object, I get a much better result.\r\n\r\nI assume it is about the range being chosen by default in this case. I don't have this issue with linear colour scales, and don't see any analogous issue with using a log scale on a spatial axis.\r\n\r\nI'm guessing this may be a vega-lite issue but don't know how to tell.\r\n\r\nHere's a toy example:\r\n\r\n```\r\nx = [1,2,3,4]\r\ny = x\r\nc = [1,10,100,1000]\r\ndf = pd.DataFrame({'x':x, 'y':y, 'c':c})\r\n\r\nlogscale_plot = alt.Chart(df).mark_circle(size=90)\\\r\n                             .encode(x='x',y='y',\r\n                                     color=alt.Color('c:Q', \r\n                                                scale=alt.Scale(type='log')))\\\r\n                             .properties(title='A: log scale')\r\n\r\nlogtransform_plot = alt.Chart(df).mark_circle(size=90)\\\r\n                       .encode(x='x', y='y',\r\n                               color=alt.Color('logc:Q'))\\\r\n                       .transform_calculate(logc='log(datum.c)')\\\r\n                       .properties(title='B: log transform, linear scale')\r\n\r\nlogscale_range_plot = alt.Chart(df).mark_circle(size=90)\\\r\n                                   .encode(x='x',y='y',\r\n                                           color=alt.Color('c:Q', \r\n                                                            scale=alt.Scale(type='log',\r\n                                                                            range=['red','blue'])))\\\r\n                                   .properties(title='C: log scale with range set')\r\n\r\nlogtransform_range_plot = alt.Chart(df).mark_circle(size=90)\\\r\n                                       .encode(x='x', y='y',\r\n                                               color=alt.Color('logc:Q',\r\n                                                               scale=alt.Scale(type='linear',\r\n                                                                               range=['red','blue'])))\\\r\n                                       .transform_calculate(logc='log(datum.c)')\\\r\n                                       .properties(title='D: log transform, linear scale, range set')\r\n\r\nlogscale_plot & logtransform_plot & logscale_range_plot & logtransform_range_plot\r\n```\r\n\r\n![altair_logcolourbug](https://user-images.githubusercontent.com/1815107/42580324-db40524c-84ef-11e8-85c2-753ee6421385.png)\r\n\r\nThe problem occurs in Plot A, where I use a log colour scale and *do not* set the range. I would expect A to look very similar to B, where I use a log data transform instead of a scale transform. As you can see though the colour bar covers a pretty small range - Plot B, which uses a transform instead of a scale, is much better. Conversely, Plot C *does* look very similar to D. The only difference is in these two plots I have set the scale range explicitly.\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/1014/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/1014/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/994", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/994/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/994/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/994/events", "html_url": "https://github.com/altair-viz/altair/issues/994", "id": 337835272, "node_id": "MDU6SXNzdWUzMzc4MzUyNzI=", "number": 994, "title": "Unable to save a chart in PNG with python 2.7", "user": {"login": "MeTaNoV", "id": 11166016, "node_id": "MDQ6VXNlcjExMTY2MDE2", "avatar_url": "https://avatars.githubusercontent.com/u/11166016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeTaNoV", "html_url": "https://github.com/MeTaNoV", "followers_url": "https://api.github.com/users/MeTaNoV/followers", "following_url": "https://api.github.com/users/MeTaNoV/following{/other_user}", "gists_url": "https://api.github.com/users/MeTaNoV/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeTaNoV/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeTaNoV/subscriptions", "organizations_url": "https://api.github.com/users/MeTaNoV/orgs", "repos_url": "https://api.github.com/users/MeTaNoV/repos", "events_url": "https://api.github.com/users/MeTaNoV/events{/privacy}", "received_events_url": "https://api.github.com/users/MeTaNoV/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 262356189, "node_id": "MDU6TGFiZWwyNjIzNTYxODk=", "url": "https://api.github.com/repos/altair-viz/altair/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-07-03T10:18:59Z", "updated_at": "2019-03-10T03:43:10Z", "closed_at": "2019-03-10T03:43:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\ncongratulations for this very nice library.\r\n\r\nI was trying to save a chart as PNG, but I am currently encountering the following error:\r\n\r\n```\r\n/home/pascal/Wks/GitHub/PEAT-AI/Albatros/venv/local/lib/python2.7/site-packages/altair/vegalite/v2/api.pyc in save(self, fp, format, override_data_transformer, scale_factor, **kwargs)\r\n    412         if override_data_transformer:\r\n    413             with data_transformers.enable('default', max_rows=None):\r\n--> 414                 result = save(**kwds)\r\n    415         else:\r\n    416             result = save(**kwds)\r\n\r\n/home/pascal/Wks/GitHub/PEAT-AI/Albatros/venv/local/lib/python2.7/site-packages/altair/utils/save.pyc in save(chart, fp, vega_version, vegaembed_version, format, mode, vegalite_version, embed_options, json_kwds, webdriver, scale_factor)\r\n     92                                         vegaembed_version=vegaembed_version,\r\n     93                                         webdriver=webdriver,\r\n---> 94                                         scale_factor=scale_factor)\r\n     95         if format == 'png':\r\n     96             write_file_or_filename(fp, mimebundle['image/png'], mode='wb')\r\n\r\n/home/pascal/Wks/GitHub/PEAT-AI/Albatros/venv/local/lib/python2.7/site-packages/altair/utils/mimebundle.pyc in spec_to_mimebundle(spec, format, mode, vega_version, vegaembed_version, vegalite_version, **kwargs)\r\n     56                               vegalite_version=vegalite_version, **kwargs)\r\n     57         if format == 'png':\r\n---> 58             render = base64.decodebytes(render.split(',', 1)[1].encode())\r\n     59             return {'image/png': render}\r\n     60         elif format == 'svg':\r\n\r\nAttributeError: 'module' object has no attribute 'decodebytes'\r\n```\r\nIt looks like `decodebytes` method is only available starting from Python 3.1\r\nhttps://docs.python.org/3/library/base64.html\r\nvs\r\nhttps://docs.python.org/2/library/base64.html\r\n\r\nCheers,\r\nPascal", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/994/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/962", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/962/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/962/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/962/events", "html_url": "https://github.com/altair-viz/altair/issues/962", "id": 334928095, "node_id": "MDU6SXNzdWUzMzQ5MjgwOTU=", "number": 962, "title": "hconcat of more than 2 mark_geoshape() causes projection error", "user": {"login": "sidravi1", "id": 14125957, "node_id": "MDQ6VXNlcjE0MTI1OTU3", "avatar_url": "https://avatars.githubusercontent.com/u/14125957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sidravi1", "html_url": "https://github.com/sidravi1", "followers_url": "https://api.github.com/users/sidravi1/followers", "following_url": "https://api.github.com/users/sidravi1/following{/other_user}", "gists_url": "https://api.github.com/users/sidravi1/gists{/gist_id}", "starred_url": "https://api.github.com/users/sidravi1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sidravi1/subscriptions", "organizations_url": "https://api.github.com/users/sidravi1/orgs", "repos_url": "https://api.github.com/users/sidravi1/repos", "events_url": "https://api.github.com/users/sidravi1/events{/privacy}", "received_events_url": "https://api.github.com/users/sidravi1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-06-22T15:46:24Z", "updated_at": "2021-02-23T23:07:08Z", "closed_at": "2021-02-23T23:07:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nThis is using the US population, engineers, hurricane data in the examples.\r\n\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nstates = alt.topo_feature(data.us_10m.url, 'states')\r\npop_eng_hur = data.population_engineers_hurricanes.url\r\n\r\nvariable_list = ['population', 'engineers', 'hurricanes']\r\n\r\nbase = alt.Chart(states).mark_geoshape().transform_lookup(\r\n    lookup='id',\r\n    from_=alt.LookupData(pop_eng_hur, 'id', variable_list)\r\n).properties(\r\n    width=100,\r\n    height=100\r\n)\r\n\r\nrow_chart = [] \r\nfor field in variable_list: \r\n    field = field+\":Q\"\r\n    row_chart.append(base.encode(\r\n        color=alt.Color(field,legend=None),\r\n    ).project(\r\n        type='albersUsa'\r\n    ))\r\n    \r\nalt.hconcat(*row_chart, resolve = alt.Resolve(scale=alt.LegendResolveMap(color=alt.ResolveMode('independent'))))\r\n```\r\n\r\nThe output looks like this:\r\n\r\n![image](https://user-images.githubusercontent.com/14125957/41785603-1a3200ce-7611-11e8-812d-4bfc20f9d8b9.png)\r\n\r\nIt works fine when I use .repeat() but I want to be able to arrange the plots as a grid (3 x 3) of plots and want to be able to customize it.\r\n\r\nLooks like a vegalite problem to me since the json generated looks consistent for all the sub-maps. Has this been noticed and if so, is there an issue I can track?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/962/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/962/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/935", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/935/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/935/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/935/events", "html_url": "https://github.com/altair-viz/altair/issues/935", "id": 331301223, "node_id": "MDU6SXNzdWUzMzEzMDEyMjM=", "number": 935, "title": "Doc on altair.Scale format broken", "user": {"login": "iliatimofeev", "id": 11561581, "node_id": "MDQ6VXNlcjExNTYxNTgx", "avatar_url": "https://avatars.githubusercontent.com/u/11561581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iliatimofeev", "html_url": "https://github.com/iliatimofeev", "followers_url": "https://api.github.com/users/iliatimofeev/followers", "following_url": "https://api.github.com/users/iliatimofeev/following{/other_user}", "gists_url": "https://api.github.com/users/iliatimofeev/gists{/gist_id}", "starred_url": "https://api.github.com/users/iliatimofeev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iliatimofeev/subscriptions", "organizations_url": "https://api.github.com/users/iliatimofeev/orgs", "repos_url": "https://api.github.com/users/iliatimofeev/repos", "events_url": "https://api.github.com/users/iliatimofeev/events{/privacy}", "received_events_url": "https://api.github.com/users/iliatimofeev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 262356189, "node_id": "MDU6TGFiZWwyNjIzNTYxODk=", "url": "https://api.github.com/repos/altair-viz/altair/labels/help%20wanted", "name": "help wanted", "color": "159818", "default": true, "description": null}, {"id": 474065442, "node_id": "MDU6TGFiZWw0NzQwNjU0NDI=", "url": "https://api.github.com/repos/altair-viz/altair/labels/documentation", "name": "documentation", "color": "c5def5", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-06-11T18:33:09Z", "updated_at": "2018-07-25T15:42:49Z", "closed_at": "2018-07-25T15:42:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://altair-viz.github.io/user_guide/API.html?highlight=scale#altair.Scale\r\n![image](https://user-images.githubusercontent.com/11561581/41250199-e6066a6a-6dbe-11e8-9913-9c26ee7fc2e4.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/935/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/934", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/934/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/934/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/934/events", "html_url": "https://github.com/altair-viz/altair/issues/934", "id": 331290353, "node_id": "MDU6SXNzdWUzMzEyOTAzNTM=", "number": 934, "title": "BUG: alt.datum does not support nested properties", "user": {"login": "Casyfill", "id": 2675621, "node_id": "MDQ6VXNlcjI2NzU2MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/2675621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Casyfill", "html_url": "https://github.com/Casyfill", "followers_url": "https://api.github.com/users/Casyfill/followers", "following_url": "https://api.github.com/users/Casyfill/following{/other_user}", "gists_url": "https://api.github.com/users/Casyfill/gists{/gist_id}", "starred_url": "https://api.github.com/users/Casyfill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Casyfill/subscriptions", "organizations_url": "https://api.github.com/users/Casyfill/orgs", "repos_url": "https://api.github.com/users/Casyfill/repos", "events_url": "https://api.github.com/users/Casyfill/events{/privacy}", "received_events_url": "https://api.github.com/users/Casyfill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/9", "html_url": "https://github.com/altair-viz/altair/milestone/9", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/9/labels", "id": 3405507, "node_id": "MDk6TWlsZXN0b25lMzQwNTUwNw==", "number": 9, "title": "2.2", "description": null, "creator": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2018-06-06T16:58:02Z", "updated_at": "2023-01-03T22:36:24Z", "due_on": null, "closed_at": "2023-01-03T22:36:24Z"}, "comments": 10, "created_at": "2018-06-11T18:00:13Z", "updated_at": "2021-02-23T23:09:56Z", "closed_at": "2021-02-23T23:09:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "and those nested properties are typical for topojson/geojson objects; consider example:\r\n\r\n```python\r\n\r\nboundaries = alt.topo_feature(map_url, 'area')\r\n\r\n\r\nalt.Chart(boundaries).transform_filter(alt.datum.properties['area_type'] == 'neighborhood').mark_geoshape(fill='red').encode(color='area_id:N').project(\r\n    type=\"mercator\",\r\n    center=[-73.99,40.72]\r\n).properties(width=500,height=300)\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/934/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/934/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/929", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/929/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/929/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/929/events", "html_url": "https://github.com/altair-viz/altair/issues/929", "id": 330991407, "node_id": "MDU6SXNzdWUzMzA5OTE0MDc=", "number": 929, "title": "scale_factor causes chromedriver to timeout intermittently", "user": {"login": "jploudre", "id": 305291, "node_id": "MDQ6VXNlcjMwNTI5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/305291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jploudre", "html_url": "https://github.com/jploudre", "followers_url": "https://api.github.com/users/jploudre/followers", "following_url": "https://api.github.com/users/jploudre/following{/other_user}", "gists_url": "https://api.github.com/users/jploudre/gists{/gist_id}", "starred_url": "https://api.github.com/users/jploudre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jploudre/subscriptions", "organizations_url": "https://api.github.com/users/jploudre/orgs", "repos_url": "https://api.github.com/users/jploudre/repos", "events_url": "https://api.github.com/users/jploudre/events{/privacy}", "received_events_url": "https://api.github.com/users/jploudre/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-10T18:31:31Z", "updated_at": "2018-06-13T16:18:49Z", "closed_at": "2018-06-13T16:18:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm generating about 1200 graphs with a loop. When I try to use:\r\n\r\nchart.save with scale_factor = 2,\r\n\r\nit repeatedly crashes after about 300 graphs -- not at the same spot. Replicated on 2 different computers. Timeouts resolve when removing scale_factor.\r\n\r\n(That said, **Love** scale_factor.)", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/929/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/828", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/828/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/828/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/828/events", "html_url": "https://github.com/altair-viz/altair/issues/828", "id": 321944813, "node_id": "MDU6SXNzdWUzMjE5NDQ4MTM=", "number": 828, "title": "Transform filter from selection of temporal data is empty", "user": {"login": "gschivley", "id": 10373332, "node_id": "MDQ6VXNlcjEwMzczMzMy", "avatar_url": "https://avatars.githubusercontent.com/u/10373332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gschivley", "html_url": "https://github.com/gschivley", "followers_url": "https://api.github.com/users/gschivley/followers", "following_url": "https://api.github.com/users/gschivley/following{/other_user}", "gists_url": "https://api.github.com/users/gschivley/gists{/gist_id}", "starred_url": "https://api.github.com/users/gschivley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gschivley/subscriptions", "organizations_url": "https://api.github.com/users/gschivley/orgs", "repos_url": "https://api.github.com/users/gschivley/repos", "events_url": "https://api.github.com/users/gschivley/events{/privacy}", "received_events_url": "https://api.github.com/users/gschivley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-05-10T14:08:57Z", "updated_at": "2021-02-23T23:25:07Z", "closed_at": "2021-02-23T23:25:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to use `selection_interval` to show a histogram of values selected from a scatterplot. This works fine with quantitative data but fails with temporal data that has not been transformed.\r\n\r\n```Python\r\nimport altair as alt\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\n# Make dataframe from datetimes, random values, and sequential counts\r\ndates = pd.date_range(start='1-1-2017-01', periods=200, freq='H')\r\nvalues = np.random.randint(0, 20, size=200)\r\ncount = range(len(dates))\r\n\r\ndata = pd.DataFrame({'dt': dates, 'values': values, 'count': count})\r\n\r\nbrush = alt.selection_interval(encodings=['x'])\r\n\r\npoints = alt.Chart(data).mark_point().encode(\r\n# Unmodified datetime, counts, and transformed datatime data for the x-axis\r\n    x='dt:T',\r\n#     x='count:Q',\r\n#     x=alt.X('dt:T', timeUnit='yearmonthdatehours', axis=alt.Axis(title='Transformed dt')),\r\n    y='values:Q',\r\n).properties(\r\n    selection=brush\r\n)\r\n\r\nbars = alt.Chart(data).mark_bar().encode(\r\n    x='values:Q',\r\n    y='count()'\r\n).transform_filter(\r\n    brush.ref()\r\n)\r\n\r\npoints | bars\r\n```\r\nInitial plot with temporal `dt` on the x-axis\r\n![image](https://user-images.githubusercontent.com/10373332/39872726-e6240f76-5436-11e8-8551-0219140edb29.png)\r\n\r\nEmpty bar chart/histogram when I select data in the scatterplot\r\n![image](https://user-images.githubusercontent.com/10373332/39872747-f56a33d4-5436-11e8-8f9f-1e87f7cd771e.png)\r\n\r\nWorks fine with quantitative `counts` on the x-axis\r\n![image](https://user-images.githubusercontent.com/10373332/39872897-70cabea4-5437-11e8-9875-98e43ad7cdd8.png)\r\n\r\nAlso works when `dt` is transformed\r\n![image](https://user-images.githubusercontent.com/10373332/39873005-c71073b2-5437-11e8-883f-f15d1f545789.png)\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/828/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/828/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/754", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/754/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/754/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/754/events", "html_url": "https://github.com/altair-viz/altair/issues/754", "id": 314075383, "node_id": "MDU6SXNzdWUzMTQwNzUzODM=", "number": 754, "title": "How to set the axis range on histograms, shared with other subplots?", "user": {"login": "mtzl", "id": 9432929, "node_id": "MDQ6VXNlcjk0MzI5Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/9432929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mtzl", "html_url": "https://github.com/mtzl", "followers_url": "https://api.github.com/users/mtzl/followers", "following_url": "https://api.github.com/users/mtzl/following{/other_user}", "gists_url": "https://api.github.com/users/mtzl/gists{/gist_id}", "starred_url": "https://api.github.com/users/mtzl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mtzl/subscriptions", "organizations_url": "https://api.github.com/users/mtzl/orgs", "repos_url": "https://api.github.com/users/mtzl/repos", "events_url": "https://api.github.com/users/mtzl/events{/privacy}", "received_events_url": "https://api.github.com/users/mtzl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-04-13T11:44:50Z", "updated_at": "2019-05-30T05:33:17Z", "closed_at": "2019-05-30T05:33:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, I am trying to make a facetted scatterplot with marginal histograms (similar to the one in https://altair-viz.github.io/user_guide/compound_charts.html?highlight=bin%20scale#horizontal-concatenation), but I can't figure out how to make the scatterplot share its x/y limits with the histograms.\r\n\r\nThis is what I've got so far:\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\niris = data.iris()\r\n\r\nxrange = (3, 9)\r\nyrange = (1, 6)\r\n\r\npoints = alt.Chart(iris).mark_circle().encode(\r\n    alt.X('sepalLength', scale=alt.Scale(domain=xrange)),\r\n    alt.Y('sepalWidth', scale=alt.Scale(domain=yrange)),\r\n    color='species',\r\n)\r\n\r\ntop_hist = alt.Chart(iris).mark_area(\r\n    opacity=.4, interpolate='step'\r\n).encode(\r\n    alt.X('sepalLength:Q', \r\n          bin=alt.Bin(maxbins=20, extent=xrange), \r\n          stack=None, \r\n          scale=alt.Scale(domain=xrange),\r\n         ),\r\n    alt.Y('count(*):Q', \r\n          stack=None, \r\n         ),\r\n    alt.Color('species:N'),\r\n).properties(height=60)\r\n\r\nright_hist = alt.Chart(iris).mark_area(\r\n    opacity=.4, interpolate='step'\r\n).encode(\r\n    alt.Y('sepalWidth:Q', \r\n          bin=alt.Bin(maxbins=20, extent=yrange), \r\n          stack=None,\r\n          scale=alt.Scale(domain=yrange),\r\n         ),\r\n    alt.X('count(*):Q', \r\n          stack=None, \r\n         ),\r\n    alt.Color('species:N'),\r\n).properties(width=60)\r\n\r\nchart = top_hist & (points | right_hist)\r\n```\r\nwhich yields this (axis limits on the scatterplot are very wide to illustrate the effect better): \r\n![](https://gist.githubusercontent.com/mtzl/df0ef1a9017a5b577db7d2923b1c12f5/raw/179c2253d7cd6ee2e48890b1c5d5242419f487a1/scatter_marginal_hist.png)\r\n\r\nHow can I make the marginal histograms share the same x, y axis range `3-9` and `1-6`?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/754/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/754/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/747", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/747/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/747/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/747/events", "html_url": "https://github.com/altair-viz/altair/issues/747", "id": 313453034, "node_id": "MDU6SXNzdWUzMTM0NTMwMzQ=", "number": 747, "title": "example london tube lines not working with `alt.renderers.enable('notebook')`", "user": {"login": "mattijn", "id": 5186265, "node_id": "MDQ6VXNlcjUxODYyNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5186265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattijn", "html_url": "https://github.com/mattijn", "followers_url": "https://api.github.com/users/mattijn/followers", "following_url": "https://api.github.com/users/mattijn/following{/other_user}", "gists_url": "https://api.github.com/users/mattijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattijn/subscriptions", "organizations_url": "https://api.github.com/users/mattijn/orgs", "repos_url": "https://api.github.com/users/mattijn/repos", "events_url": "https://api.github.com/users/mattijn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattijn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/3", "html_url": "https://github.com/altair-viz/altair/milestone/3", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/3/labels", "id": 2108078, "node_id": "MDk6TWlsZXN0b25lMjEwODA3OA==", "number": 3, "title": "2.0", "description": "", "creator": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2016-11-01T21:58:17Z", "updated_at": "2023-03-02T02:03:54Z", "due_on": "2018-04-30T07:00:00Z", "closed_at": "2018-05-18T19:14:50Z"}, "comments": 4, "created_at": "2018-04-11T19:16:42Z", "updated_at": "2018-04-13T17:00:59Z", "closed_at": "2018-04-13T17:00:59Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Im trying out `altair` examples in `jupyter notebook`. \r\nIt took me some time to figure that I can make the visualization works using `alt.renderers.enable('notebook')`, since this option is not documented in the [Renderer API](https://altair-viz.github.io/user_guide/display.html#renderer-api) section\r\n\r\nAll examples I tried worked so far, except the example of [London Tube Lines](https://altair-viz.github.io/gallery/london_tube.html). For that one I get the following error:\r\n```\r\n\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\nc:\\python35\\lib\\site-packages\\IPython\\core\\formatters.py in __call__(self, obj, include, exclude)\r\n    968 \r\n    969             if method is not None:\r\n--> 970                 return method(include=include, exclude=exclude)\r\n    971             return None\r\n    972         else:\r\n\r\nc:\\python35\\lib\\site-packages\\altair\\vegalite\\v2\\api.py in _repr_mimebundle_(self, include, exclude)\r\n    416             return {}\r\n    417         else:\r\n--> 418             return renderers.get()(dct)\r\n    419 \r\n    420     def repeat(self, row=Undefined, column=Undefined, **kwargs):\r\n\r\nc:\\python35\\lib\\site-packages\\vega3\\vegalite.py in entry_point_renderer(spec)\r\n     19 \r\n     20 def entry_point_renderer(spec):\r\n---> 21     vl = VegaLite(spec)\r\n     22     vl.display()\r\n     23     return {}\r\n\r\nc:\\python35\\lib\\site-packages\\vega3\\base.py in __init__(self, spec, data)\r\n     21         \"\"\"Initialize the visualization object.\"\"\"\r\n     22         spec = utils.nested_update(copy.deepcopy(self.DEFAULTS), spec)\r\n---> 23         self.spec = self._prepare_spec(spec, data)\r\n     24 \r\n     25     def _prepare_spec(self, spec, data):\r\n\r\nc:\\python35\\lib\\site-packages\\vega3\\vegalite.py in _prepare_spec(self, spec, data)\r\n     15 \r\n     16     def _prepare_spec(self, spec, data):\r\n---> 17         return prepare_spec(spec, data)\r\n     18 \r\n     19 \r\n\r\nc:\\python35\\lib\\site-packages\\vega3\\utils.py in prepare_spec(spec, data)\r\n     91         # Data is either passed in spec or error\r\n     92         if 'data' not in spec:\r\n---> 93             raise ValueError('No data provided')\r\n     94     else:\r\n     95         # As a last resort try to pass the data to a DataFrame and use it\r\n\r\nValueError: No data provided\r\n``` \r\n\r\nBy using;\r\n\r\n```\r\nimport altair as alt\r\nfrom vega_datasets import data\r\nalt.renderers.enable('notebook')\r\n```\r\n\r\nBut the input data contains something\r\n\r\n```\r\nprint('Boroughs {}\\nTubelines {}\\n Centroids {}'.format(boroughs, tubelines, centroids))\r\n\r\nBoroughs UrlData({\r\n  format: TopoDataFormat({\r\n    feature: 'boroughs',\r\n    type: 'topojson'\r\n  }),\r\n  url: 'https://vega.github.io/vega-datasets/data/londonBoroughs.json'\r\n})\r\nTubelines UrlData({\r\n  format: TopoDataFormat({\r\n    feature: 'line',\r\n    type: 'topojson'\r\n  }),\r\n  url: 'https://vega.github.io/vega-datasets/data/londonTubeLines.json'\r\n})\r\n Centroids https://vega.github.io/vega-datasets/data/londonCentroids.json\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/747/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/747/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/698", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/698/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/698/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/698/events", "html_url": "https://github.com/altair-viz/altair/issues/698", "id": 310626175, "node_id": "MDU6SXNzdWUzMTA2MjYxNzU=", "number": 698, "title": "sort channel not working when I add text on top of my bars", "user": {"login": "palewire", "id": 9993, "node_id": "MDQ6VXNlcjk5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/9993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/palewire", "html_url": "https://github.com/palewire", "followers_url": "https://api.github.com/users/palewire/followers", "following_url": "https://api.github.com/users/palewire/following{/other_user}", "gists_url": "https://api.github.com/users/palewire/gists{/gist_id}", "starred_url": "https://api.github.com/users/palewire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/palewire/subscriptions", "organizations_url": "https://api.github.com/users/palewire/orgs", "repos_url": "https://api.github.com/users/palewire/repos", "events_url": "https://api.github.com/users/palewire/events{/privacy}", "received_events_url": "https://api.github.com/users/palewire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2018-04-02T22:01:26Z", "updated_at": "2023-03-30T20:51:50Z", "closed_at": "2019-05-27T13:33:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This sorts like I want.\r\n\r\n```python\r\nimport altair as alt\r\nfrom vega_datasets import data\r\n\r\nbarley = data.barley()\r\nalt.Chart(cars.head(10)).mark_bar().encode(\r\n    x='Miles_per_Gallon:Q',\r\n    y=alt.Y('Name:N', sort=alt.SortField(field=\"Miles_per_Gallon\", op=\"sum\", order=\"descending\"))\r\n)\r\n```\r\n\r\n![visualization 24](https://user-images.githubusercontent.com/9993/38218436-a9f37122-3686-11e8-91d1-c21a371f6dcf.png)\r\n\r\nThis does not.\r\n\r\n```python\r\nbars = alt.Chart(cars.head(10)).mark_bar().encode(\r\n    x='Miles_per_Gallon:Q',\r\n    y=alt.Y('Name:N', sort=alt.SortField(field=\"Miles_per_Gallon\", op=\"sum\", order=\"descending\"))\r\n)\r\n\r\ntext = bars.mark_text(\r\n    align='left',\r\n    baseline='middle',\r\n    dx=3,\r\n).encode(text='Miles_per_Gallon:Q')\r\n\r\nbars + text\r\n```\r\n\r\n![visualization 25](https://user-images.githubusercontent.com/9993/38218443-ae8a7adc-3686-11e8-8cdb-112ed9c470df.png)\r\n\r\n\r\nWhy?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/698/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/698/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/649", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/649/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/649/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/649/events", "html_url": "https://github.com/altair-viz/altair/issues/649", "id": 308314080, "node_id": "MDU6SXNzdWUzMDgzMTQwODA=", "number": 649, "title": "save PNG/SVG in Windows", "user": {"login": "pagpires", "id": 7856031, "node_id": "MDQ6VXNlcjc4NTYwMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/7856031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pagpires", "html_url": "https://github.com/pagpires", "followers_url": "https://api.github.com/users/pagpires/followers", "following_url": "https://api.github.com/users/pagpires/following{/other_user}", "gists_url": "https://api.github.com/users/pagpires/gists{/gist_id}", "starred_url": "https://api.github.com/users/pagpires/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pagpires/subscriptions", "organizations_url": "https://api.github.com/users/pagpires/orgs", "repos_url": "https://api.github.com/users/pagpires/repos", "events_url": "https://api.github.com/users/pagpires/events{/privacy}", "received_events_url": "https://api.github.com/users/pagpires/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2018-03-25T01:36:16Z", "updated_at": "2018-04-04T20:11:23Z", "closed_at": "2018-03-26T04:37:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I encountered a problem saving PNG/SVG in Windows. I installed Selenium by \r\n`\r\nconda install selenium\r\n`\r\nthen downloaded chromedriver and put it under the system PATH variable (I think this is working). When I do chart.savechart('test.png'), there's problem message as follows:\r\n\r\n```python-traceback\r\n---------------------------------------------------------------------------\r\nPermissionError                           Traceback (most recent call last)\r\n<ipython-input-16-c16ecf6573c1> in <module>()\r\n----> 1 chart.savechart('test.png')\r\n\r\nG:\\Software\\Anaconda2\\envs\\py36\\lib\\site-packages\\altair\\vegalite\\v2\\api.py in savechart(self, fp, format, **kwargs)\r\n    331             utils.write_file_or_filename(fp, spec_html, mode='w')\r\n    332         elif format in ['png', 'svg']:\r\n--> 333             utils.save_spec(self.to_dict(), fp, format=format, **kwargs)\r\n    334         else:\r\n    335             raise ValueError(\"unrecognized format: '{0}'\".format(format))\r\n\r\nG:\\Software\\Anaconda2\\envs\\py36\\lib\\site-packages\\altair\\utils\\headless.py in save_spec(spec, fp, mode, format, driver_timeout)\r\n    136                                                  spec, mode)\r\n    137         finally:\r\n--> 138             os.remove(htmlfile)\r\n    139     finally:\r\n    140         driver.close()\r\n\r\nPermissionError: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\\\Users\\\\PAGPI_~1\\\\AppData\\\\Local\\\\Temp\\\\tmpbyp9uhvp.html'\r\n```\r\n\r\nI suppose the temp html file is somehow being used in Windows so it's better to remove it after the chromedriver is closed? Let me know if you guys need further testing under Win environment", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/649/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/634", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/634/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/634/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/634/events", "html_url": "https://github.com/altair-viz/altair/issues/634", "id": 307544631, "node_id": "MDU6SXNzdWUzMDc1NDQ2MzE=", "number": 634, "title": "JSON representation printed under plot in notebook", "user": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/3", "html_url": "https://github.com/altair-viz/altair/milestone/3", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/3/labels", "id": 2108078, "node_id": "MDk6TWlsZXN0b25lMjEwODA3OA==", "number": 3, "title": "2.0", "description": "", "creator": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2016-11-01T21:58:17Z", "updated_at": "2023-03-02T02:03:54Z", "due_on": "2018-04-30T07:00:00Z", "closed_at": "2018-05-18T19:14:50Z"}, "comments": 6, "created_at": "2018-03-22T08:20:39Z", "updated_at": "2018-04-12T17:02:52Z", "closed_at": "2018-04-12T17:02:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Opening to track the issue here: https://github.com/vega/ipyvega/issues/75", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/634/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/634/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/626", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/626/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/626/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/626/events", "html_url": "https://github.com/altair-viz/altair/issues/626", "id": 307331600, "node_id": "MDU6SXNzdWUzMDczMzE2MDA=", "number": 626, "title": "LookupData doesn't handle DataFrame", "user": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-03-21T16:53:49Z", "updated_at": "2018-04-30T20:19:32Z", "closed_at": "2018-03-22T07:59:52Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "A student was trying to do a geographic map with countries mapped to color. He found that he couldn't get this example:\r\n\r\nhttps://altair-viz.github.io/gallery/choropleth.html\r\n\r\nworking with a DataFrame rather than a URL. The issue is that our `LookupData` object doesn't use the data transformer pipeline to properly handle a DataFrame argument. The following code did work:\r\n\r\n```python\r\ncountries = alt.topo_feature(data.world_110m.url,'countries')\r\ncountry_ses = pd.read_csv('/data/country_ses.csv')\r\ncountry_values = alt.pipe(country_ses[['id', 'ses']], alt.to_values)\r\n\r\nchart = alt.Chart(countries).mark_geoshape().properties(\r\n    projection={'type': 'equirectangular'},\r\n    width=500,\r\n    height=300\r\n).encode(\r\n    color='ses:Q'\r\n).transform_lookup(\r\n    lookup='id',\r\n    from_=alt.LookupData(country_values, 'id', ['ses'])\r\n)\r\nchart\r\n```\r\n\r\nShould be an easy fix for `LookupData` to use the data transformers. Are there other parts of the API where we are not fully handling DataFrames?", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/626/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/611", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/611/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/611/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/611/events", "html_url": "https://github.com/altair-viz/altair/issues/611", "id": 306672744, "node_id": "MDU6SXNzdWUzMDY2NzI3NDQ=", "number": 611, "title": "MaxRowsError for pandas.df with > 5000 rows", "user": {"login": "lzamparo", "id": 1569186, "node_id": "MDQ6VXNlcjE1NjkxODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1569186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzamparo", "html_url": "https://github.com/lzamparo", "followers_url": "https://api.github.com/users/lzamparo/followers", "following_url": "https://api.github.com/users/lzamparo/following{/other_user}", "gists_url": "https://api.github.com/users/lzamparo/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzamparo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzamparo/subscriptions", "organizations_url": "https://api.github.com/users/lzamparo/orgs", "repos_url": "https://api.github.com/users/lzamparo/repos", "events_url": "https://api.github.com/users/lzamparo/events{/privacy}", "received_events_url": "https://api.github.com/users/lzamparo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/3", "html_url": "https://github.com/altair-viz/altair/milestone/3", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/3/labels", "id": 2108078, "node_id": "MDk6TWlsZXN0b25lMjEwODA3OA==", "number": 3, "title": "2.0", "description": "", "creator": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2016-11-01T21:58:17Z", "updated_at": "2023-03-02T02:03:54Z", "due_on": "2018-04-30T07:00:00Z", "closed_at": "2018-05-18T19:14:50Z"}, "comments": 39, "created_at": "2018-03-19T23:17:09Z", "updated_at": "2020-04-05T18:07:59Z", "closed_at": "2018-04-13T17:14:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey,\r\n\r\nThanks for the package, I'm very keen to try it out on my own data.  When trying to create a [simple histogram](https://altair-viz.github.io/gallery/histogram.html) with my own data, VegaLite fails on dataframes with more than 5000 rows.  Here's a minimal reproducible example:\r\n\r\n```\r\nimport altair as alt\r\nimport os\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\nlengths = np.random.randint(0,2000,6000)\r\nlengths_list = lengths.tolist()\r\nlabels = [str(i) for i in lengths_list]\r\npeak_lengths = pd.DataFrame.from_dict({'coords': labels, 'length': lengths_list},orient='columns')\r\nalt.Chart(peak_lengths).mark_bar().encode(alt.X('lengths:Q', bin=True),y='count(*):Q')\r\n```\r\n\r\nHere's the error: \r\n```\r\n---------------------------------------------------------------------------\r\nMaxRowsError                              Traceback (most recent call last)\r\n~/anaconda/envs/py3/lib/python3.5/site-packages/altair/vegalite/v2/api.py in to_dict(self, *args, **kwargs)\r\n    259         copy = self.copy()\r\n    260         original_data = getattr(copy, 'data', Undefined)\r\n--> 261         copy._prepare_data()\r\n    262 \r\n    263         # We make use of two context markers:\r\n\r\n~/anaconda/envs/py3/lib/python3.5/site-packages/altair/vegalite/v2/api.py in _prepare_data(self)\r\n    251             pass\r\n    252         elif isinstance(self.data, pd.DataFrame):\r\n--> 253             self.data = pipe(self.data, data_transformers.get())\r\n    254         elif isinstance(self.data, six.string_types):\r\n    255             self.data = core.UrlData(self.data)\r\n\r\n~/anaconda/envs/py3/lib/python3.5/site-packages/toolz/functoolz.py in pipe(data, *funcs)\r\n    550     \"\"\"\r\n    551     for func in funcs:\r\n--> 552         data = func(data)\r\n    553     return data\r\n    554 \r\n\r\n~/anaconda/envs/py3/lib/python3.5/site-packages/toolz/functoolz.py in __call__(self, *args, **kwargs)\r\n    281     def __call__(self, *args, **kwargs):\r\n    282         try:\r\n--> 283             return self._partial(*args, **kwargs)\r\n    284         except TypeError as exc:\r\n    285             if self._should_curry(args, kwargs, exc):\r\n\r\n~/anaconda/envs/py3/lib/python3.5/site-packages/altair/vegalite/data.py in default_data_transformer(data)\r\n    122 @curry\r\n    123 def default_data_transformer(data):\r\n--> 124     return pipe(data, limit_rows, to_values)\r\n    125 \r\n    126 \r\n\r\n~/anaconda/envs/py3/lib/python3.5/site-packages/toolz/functoolz.py in pipe(data, *funcs)\r\n    550     \"\"\"\r\n    551     for func in funcs:\r\n--> 552         data = func(data)\r\n    553     return data\r\n    554 \r\n\r\n~/anaconda/envs/py3/lib/python3.5/site-packages/toolz/functoolz.py in __call__(self, *args, **kwargs)\r\n    281     def __call__(self, *args, **kwargs):\r\n    282         try:\r\n--> 283             return self._partial(*args, **kwargs)\r\n    284         except TypeError as exc:\r\n    285             if self._should_curry(args, kwargs, exc):\r\n\r\n~/anaconda/envs/py3/lib/python3.5/site-packages/altair/vegalite/data.py in limit_rows(data, max_rows)\r\n     47             return data\r\n     48     if len(values) > max_rows:\r\n---> 49         raise MaxRowsError('The number of rows in your dataset is greater than the max of {}'.format(max_rows))\r\n     50     return data\r\n     51 \r\n\r\nMaxRowsError: The number of rows in your dataset is greater than the max of 5000\r\n```\r\n\r\nA quick issues search didn't turn up any hits for `MaxRowsError`.  There is a related issue (#287), but this was a data set with > 300k rows, and I have a measly 35k.  Also, the FAQ link referenced in that issue now [turns up a 404](https://altair-viz.github.io/faq.html).  For the meantime, does the advice in #249 still apply?\r\n\r\nPackage info: Running on `Altair 2.0.0rc1`, `JupyterLab 0.31.12-py35_1 conda-forge`", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/611/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/599", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/599/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/599/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/599/events", "html_url": "https://github.com/altair-viz/altair/issues/599", "id": 306179833, "node_id": "MDU6SXNzdWUzMDYxNzk4MzM=", "number": 599, "title": "Interactive charts don't show correct result on load (but refresh after interaction)", "user": {"login": "stsievert", "id": 1320475, "node_id": "MDQ6VXNlcjEzMjA0NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1320475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stsievert", "html_url": "https://github.com/stsievert", "followers_url": "https://api.github.com/users/stsievert/followers", "following_url": "https://api.github.com/users/stsievert/following{/other_user}", "gists_url": "https://api.github.com/users/stsievert/gists{/gist_id}", "starred_url": "https://api.github.com/users/stsievert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stsievert/subscriptions", "organizations_url": "https://api.github.com/users/stsievert/orgs", "repos_url": "https://api.github.com/users/stsievert/repos", "events_url": "https://api.github.com/users/stsievert/events{/privacy}", "received_events_url": "https://api.github.com/users/stsievert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065037, "node_id": "MDU6TGFiZWw0NzQwNjUwMzc=", "url": "https://api.github.com/repos/altair-viz/altair/labels/vega-lite-related", "name": "vega-lite-related", "color": "e99695", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-03-17T18:37:26Z", "updated_at": "2021-02-23T23:32:04Z", "closed_at": "2021-02-23T23:32:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've noticed that various interactive elements don't render on load. This is best explained by an example ([US Population over time], copy/pasted from docs):\r\n\r\n[US Population over time]:https://altair-viz.github.io/gallery/us_population_over_time.html\r\n\r\n<img src=\"https://user-images.githubusercontent.com/1320475/37558785-66132582-2a11-11e8-92e8-d7ba84e0c8d8.gif\" width=\"500\">\r\n\r\nHere's screenshots of before and after I move the slider around (and leaving it in the same place it started):\r\n\r\n| Before | After |\r\n| :--:|:--:|\r\n|  <img width=\"773\" alt=\"screen shot 2018-03-17 at 12 27 13 pm\" src=\"https://user-images.githubusercontent.com/1320475/37558233-a56db462-2a08-11e8-9444-4c9ac07698b9.png\"> | <img width=\"773\" alt=\"screen shot 2018-03-17 at 12 27 26 pm\" src=\"https://user-images.githubusercontent.com/1320475/37558236-a94a4ba4-2a08-11e8-986d-1c159d3b4983.png\"> |\r\n\r\nI'm on Altair 2.0.0rc1\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/599/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/599/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/587", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/587/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/587/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/587/events", "html_url": "https://github.com/altair-viz/altair/issues/587", "id": 305804419, "node_id": "MDU6SXNzdWUzMDU4MDQ0MTk=", "number": 587, "title": "Transformed field raises KeyError when data type not specified", "user": {"login": "malramsay64", "id": 10113564, "node_id": "MDQ6VXNlcjEwMTEzNTY0", "avatar_url": "https://avatars.githubusercontent.com/u/10113564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malramsay64", "html_url": "https://github.com/malramsay64", "followers_url": "https://api.github.com/users/malramsay64/followers", "following_url": "https://api.github.com/users/malramsay64/following{/other_user}", "gists_url": "https://api.github.com/users/malramsay64/gists{/gist_id}", "starred_url": "https://api.github.com/users/malramsay64/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malramsay64/subscriptions", "organizations_url": "https://api.github.com/users/malramsay64/orgs", "repos_url": "https://api.github.com/users/malramsay64/repos", "events_url": "https://api.github.com/users/malramsay64/events{/privacy}", "received_events_url": "https://api.github.com/users/malramsay64/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/3", "html_url": "https://github.com/altair-viz/altair/milestone/3", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/3/labels", "id": 2108078, "node_id": "MDk6TWlsZXN0b25lMjEwODA3OA==", "number": 3, "title": "2.0", "description": "", "creator": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 38, "state": "closed", "created_at": "2016-11-01T21:58:17Z", "updated_at": "2023-03-02T02:03:54Z", "due_on": "2018-04-30T07:00:00Z", "closed_at": "2018-05-18T19:14:50Z"}, "comments": 2, "created_at": "2018-03-16T05:13:11Z", "updated_at": "2018-03-16T21:24:22Z", "closed_at": "2018-03-16T21:24:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When using a transform and missing the type specification, Altair raises a KeyError which isn't handled properly raising an additional KeyError. This can be replicated using the code below, which is missing the type on the X axis.\r\n\r\n```\r\nimport altair as alt\r\n\r\ncars = alt.load_dataset('cars')\r\n\r\nchart = alt.Chart(cars).mark_point().encode(\r\n    x=alt.X('watts', axis=alt.Axis(title='W'), bin=alt.Bin(maxbins=15)),\r\n    y=alt.Y('count(*):Q', axis=alt.Axis(title='# Cars')),\r\n).transform_calculate(\r\n   'watts', 'datum.Horsepower * 746' \r\n)\r\nchart\r\n```\r\nWhen the X axis has the type and it is instead removed from the Y axis, a SchemaValidationError is raised specifying `'type' is a required property` which I would expect to be the intended behaviour in the above example.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/587/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/392", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/392/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/392/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/392/events", "html_url": "https://github.com/altair-viz/altair/issues/392", "id": 261153874, "node_id": "MDU6SXNzdWUyNjExNTM4NzQ=", "number": 392, "title": "Safer enabling of MIME rendering", "user": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/6", "html_url": "https://github.com/altair-viz/altair/milestone/6", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/6/labels", "id": 2632254, "node_id": "MDk6TWlsZXN0b25lMjYzMjI1NA==", "number": 6, "title": "1.2.1", "description": "A minor release in the 1.2 series with will add support for rendering Altair visualizations in JupyterLab and nteract.", "creator": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2017-07-10T16:31:00Z", "updated_at": "2023-01-03T22:36:17Z", "due_on": null, "closed_at": "2023-01-03T22:36:17Z"}, "comments": 0, "created_at": "2017-09-28T00:02:19Z", "updated_at": "2017-10-02T21:45:21Z", "closed_at": "2017-10-02T21:45:21Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Right now the `enable_mime_rendering()` function is not very safe:\r\n\r\n* Can't call twice.\r\n* Can't disable.\r\n\r\nEasy to fix, but need to wait for #377 to be merged.", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/392/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/392/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/288", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/288/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/288/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/288/events", "html_url": "https://github.com/altair-viz/altair/issues/288", "id": 197602537, "node_id": "MDU6SXNzdWUxOTc2MDI1Mzc=", "number": 288, "title": "ValueError or TypeError in 08-GroupedRegressionCharts.ipynb", "user": {"login": "GeweiWang", "id": 6565365, "node_id": "MDQ6VXNlcjY1NjUzNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6565365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GeweiWang", "html_url": "https://github.com/GeweiWang", "followers_url": "https://api.github.com/users/GeweiWang/followers", "following_url": "https://api.github.com/users/GeweiWang/following{/other_user}", "gists_url": "https://api.github.com/users/GeweiWang/gists{/gist_id}", "starred_url": "https://api.github.com/users/GeweiWang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GeweiWang/subscriptions", "organizations_url": "https://api.github.com/users/GeweiWang/orgs", "repos_url": "https://api.github.com/users/GeweiWang/repos", "events_url": "https://api.github.com/users/GeweiWang/events{/privacy}", "received_events_url": "https://api.github.com/users/GeweiWang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/4", "html_url": "https://github.com/altair-viz/altair/milestone/4", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/4/labels", "id": 2142418, "node_id": "MDk6TWlsZXN0b25lMjE0MjQxOA==", "number": 4, "title": "1.3", "description": null, "creator": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 21, "state": "closed", "created_at": "2016-11-17T18:26:29Z", "updated_at": "2023-01-25T19:42:59Z", "due_on": null, "closed_at": "2018-05-18T19:15:12Z"}, "comments": 1, "created_at": "2016-12-26T16:27:19Z", "updated_at": "2017-05-26T18:34:20Z", "closed_at": "2017-05-26T18:34:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "In 08-GroupedRegressionCharts.ipynb, \r\n\r\n```python\r\nif not isinstance(self.data, pd.DataFrame):\r\n    raise ValueError(\"regress() requires data to be specified as pandas DataFrame\")\r\n```\r\nI wonder if `TypeError` is more suitable?\r\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/288/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/288/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/281", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/281/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/281/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/281/events", "html_url": "https://github.com/altair-viz/altair/issues/281", "id": 195005093, "node_id": "MDU6SXNzdWUxOTUwMDUwOTM=", "number": 281, "title": "Default Mark Property", "user": {"login": "nielsmde", "id": 7059356, "node_id": "MDQ6VXNlcjcwNTkzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7059356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nielsmde", "html_url": "https://github.com/nielsmde", "followers_url": "https://api.github.com/users/nielsmde/followers", "following_url": "https://api.github.com/users/nielsmde/following{/other_user}", "gists_url": "https://api.github.com/users/nielsmde/gists{/gist_id}", "starred_url": "https://api.github.com/users/nielsmde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nielsmde/subscriptions", "organizations_url": "https://api.github.com/users/nielsmde/orgs", "repos_url": "https://api.github.com/users/nielsmde/repos", "events_url": "https://api.github.com/users/nielsmde/events{/privacy}", "received_events_url": "https://api.github.com/users/nielsmde/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/4", "html_url": "https://github.com/altair-viz/altair/milestone/4", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/4/labels", "id": 2142418, "node_id": "MDk6TWlsZXN0b25lMjE0MjQxOA==", "number": 4, "title": "1.3", "description": null, "creator": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 21, "state": "closed", "created_at": "2016-11-17T18:26:29Z", "updated_at": "2023-01-25T19:42:59Z", "due_on": null, "closed_at": "2018-05-18T19:15:12Z"}, "comments": 2, "created_at": "2016-12-12T15:37:00Z", "updated_at": "2017-06-30T17:22:35Z", "closed_at": "2017-06-30T17:22:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "I came accross a problem with the display of altair plots in Jupyter notebooks.\r\nTake the following code, where df is any dataset:\r\n    \r\n    from altair import Chart\r\n    Chart(df).to_dict().get('mark')\r\n    \r\nThis would return 'point' in altair 1.0.0. In altair 1.2.0 this returns None, which results in a javascript error of the jupyter-vega extension and no display of the plot.\r\n\r\nIf the latter behavior is anticipated (i.e. the mark property of vega-lite plots may be undefined) the jupyter-vega extension would need a fix.\r\n\r\nNiels", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/281/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/281/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/245", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/245/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/245/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/245/events", "html_url": "https://github.com/altair-viz/altair/issues/245", "id": 184885906, "node_id": "MDU6SXNzdWUxODQ4ODU5MDY=", "number": 245, "title": "Support of ordinal based on pandas' ordered Categorical type?", "user": {"login": "pierre-haessig", "id": 1010404, "node_id": "MDQ6VXNlcjEwMTA0MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierre-haessig", "html_url": "https://github.com/pierre-haessig", "followers_url": "https://api.github.com/users/pierre-haessig/followers", "following_url": "https://api.github.com/users/pierre-haessig/following{/other_user}", "gists_url": "https://api.github.com/users/pierre-haessig/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierre-haessig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierre-haessig/subscriptions", "organizations_url": "https://api.github.com/users/pierre-haessig/orgs", "repos_url": "https://api.github.com/users/pierre-haessig/repos", "events_url": "https://api.github.com/users/pierre-haessig/events{/privacy}", "received_events_url": "https://api.github.com/users/pierre-haessig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}, {"id": 474065442, "node_id": "MDU6TGFiZWw0NzQwNjU0NDI=", "url": "https://api.github.com/repos/altair-viz/altair/labels/documentation", "name": "documentation", "color": "c5def5", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/4", "html_url": "https://github.com/altair-viz/altair/milestone/4", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/4/labels", "id": 2142418, "node_id": "MDk6TWlsZXN0b25lMjE0MjQxOA==", "number": 4, "title": "1.3", "description": null, "creator": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 21, "state": "closed", "created_at": "2016-11-17T18:26:29Z", "updated_at": "2023-01-25T19:42:59Z", "due_on": null, "closed_at": "2018-05-18T19:15:12Z"}, "comments": 17, "created_at": "2016-10-24T16:11:40Z", "updated_at": "2023-01-25T19:42:59Z", "closed_at": "2023-01-25T19:42:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've just started to play with altair, using the [diamonds](http://vincentarelbundock.github.io/Rdatasets/datasets.html) dataset. Here is the notebook to clarify what I did https://gist.github.com/pierre-haessig/09fa9268aa0a0e7d91356f681f96ca18\n\nSince, I'm not familiar with altair, I maybe missed something, but I've got the feeling that ordered Categorical types from pandas are not supported.\n\nIndeed, if I use a color='cut' encoding, when cut is a pandas Series with an _ordered_ category dtype, I get by default a nominal type of coloring (with \"unordered\" colors).\n\nOn the other hand, if I force the use of ordered with color='cut:O', I indeed get the ordered colored (the shades of green), but the _order is wrong_! (I get Fair, Good, Ideal, Premium, Very Good, while the correct order is 'Fair', 'Good', 'Very Good', 'Premium', 'Ideal', as manually defined in pandas' category)\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/245/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/245/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/199", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/199/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/199/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/199/events", "html_url": "https://github.com/altair-viz/altair/issues/199", "id": 175660811, "node_id": "MDU6SXNzdWUxNzU2NjA4MTE=", "number": 199, "title": "Printing in the same cell as a chart suppresses plot display", "user": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/4", "html_url": "https://github.com/altair-viz/altair/milestone/4", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/4/labels", "id": 2142418, "node_id": "MDk6TWlsZXN0b25lMjE0MjQxOA==", "number": 4, "title": "1.3", "description": null, "creator": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 21, "state": "closed", "created_at": "2016-11-17T18:26:29Z", "updated_at": "2023-01-25T19:42:59Z", "due_on": null, "closed_at": "2018-05-18T19:15:12Z"}, "comments": 5, "created_at": "2016-09-08T04:09:16Z", "updated_at": "2021-02-23T23:52:59Z", "closed_at": "2021-02-23T23:52:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "e.g.\n\n``` python\nfrom altair import Chart, load_dataset\n\nprint('hello world')\ncars = load_dataset('cars')\nChart(cars).mark_tick().encode(x='Miles_per_Gallon')\n```\n\nComment-out the print statement and the plot will show again.\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/199/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/199/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/180", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/180/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/180/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/180/events", "html_url": "https://github.com/altair-viz/altair/issues/180", "id": 173402908, "node_id": "MDU6SXNzdWUxNzM0MDI5MDg=", "number": 180, "title": "Error in layered graphs", "user": {"login": "Hisham-Hussein", "id": 8206337, "node_id": "MDQ6VXNlcjgyMDYzMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/8206337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hisham-Hussein", "html_url": "https://github.com/Hisham-Hussein", "followers_url": "https://api.github.com/users/Hisham-Hussein/followers", "following_url": "https://api.github.com/users/Hisham-Hussein/following{/other_user}", "gists_url": "https://api.github.com/users/Hisham-Hussein/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hisham-Hussein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hisham-Hussein/subscriptions", "organizations_url": "https://api.github.com/users/Hisham-Hussein/orgs", "repos_url": "https://api.github.com/users/Hisham-Hussein/repos", "events_url": "https://api.github.com/users/Hisham-Hussein/events{/privacy}", "received_events_url": "https://api.github.com/users/Hisham-Hussein/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/4", "html_url": "https://github.com/altair-viz/altair/milestone/4", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/4/labels", "id": 2142418, "node_id": "MDk6TWlsZXN0b25lMjE0MjQxOA==", "number": 4, "title": "1.3", "description": null, "creator": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 21, "state": "closed", "created_at": "2016-11-17T18:26:29Z", "updated_at": "2023-01-25T19:42:59Z", "due_on": null, "closed_at": "2018-05-18T19:15:12Z"}, "comments": 29, "created_at": "2016-08-26T08:54:07Z", "updated_at": "2018-03-27T13:18:50Z", "closed_at": "2018-03-27T13:18:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello, and thanks for the beautiful package. \n\nI followed the instructions here: [layered charts](https://github.com/ellisonbg/altair/blob/master/altair/notebooks/07-LayeredCharts.ipynb)\n\nI even copied and pasted all the code as is, but it produces this error:\n\"ValueError: No data provided\"\n\nAlthough when I try to plot each individual chart it is plotted without any errors, but when using the (+) operator to combine them and then plot the layered chart it produces the aforementioned error. \n\nThank you\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/180/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/180/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/108", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/108/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/108/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/108/events", "html_url": "https://github.com/altair-viz/altair/issues/108", "id": 156325195, "node_id": "MDU6SXNzdWUxNTYzMjUxOTU=", "number": 108, "title": "Fix Datetime Serialization", "user": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-05-23T17:45:18Z", "updated_at": "2016-06-03T17:50:53Z", "closed_at": "2016-06-03T17:50:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In https://github.com/ellisonbg/altair/pull/107/commits/976bd5f36708b2f24a9dbf3c6bb64f942c230d4e I added a quick fix for the most common case: `datetime64[ns]`. We should add suitable string formatting for other units as well.\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/108/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/96", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/96/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/96/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/96/events", "html_url": "https://github.com/altair-viz/altair/issues/96", "id": 155837049, "node_id": "MDU6SXNzdWUxNTU4MzcwNDk=", "number": 96, "title": "Serialization of lists is broken", "user": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-05-19T21:16:10Z", "updated_at": "2016-05-20T05:10:13Z", "closed_at": "2016-05-20T05:10:13Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Right now, some attributes of the different objects can be lists. Right now, those don't serialize. We probably want to create a `serialize` function that can be called recursively to better deal with this situation.\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/96/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/96/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/91", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/91/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/91/events", "html_url": "https://github.com/altair-viz/altair/issues/91", "id": 153706464, "node_id": "MDU6SXNzdWUxNTM3MDY0NjQ=", "number": 91, "title": "Make the defaults of our custom Enum types is None", "user": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/1", "html_url": "https://github.com/altair-viz/altair/milestone/1", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/1/labels", "id": 1818291, "node_id": "MDk6TWlsZXN0b25lMTgxODI5MQ==", "number": 1, "title": "1.0", "description": "The initial release of altair will be a 1.0 release. We are planning for our major versions to follow those of Vega-Lite.", "creator": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2016-06-09T17:30:31Z", "updated_at": "2023-01-03T22:36:07Z", "due_on": null, "closed_at": "2023-01-03T22:36:07Z"}, "comments": 2, "created_at": "2016-05-09T05:37:29Z", "updated_at": "2016-06-17T01:11:47Z", "closed_at": "2016-06-17T01:11:22Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "All of our default values should be None when we don't define anything. Right now, the default values for custom `Enum` types are empty strings rather than None. This is forcing is to add extra logic.\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/91/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/91/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/90", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/90/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/90/events", "html_url": "https://github.com/altair-viz/altair/issues/90", "id": 153706361, "node_id": "MDU6SXNzdWUxNTM3MDYzNjE=", "number": 90, "title": "Test type inference", "user": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-05-09T05:36:14Z", "updated_at": "2016-06-27T21:10:03Z", "closed_at": "2016-06-27T21:10:03Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "When the `Layer.data` attribute is set, we trigger logic to infer the vegalite type of the channels based on what field (column) they are pointing to. Likewise, if `data` is set to `None`, the type inference should be reset. \n\nWe need to write tests to make sure all of this is working.\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/90/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/90/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/46", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/46/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/46/events", "html_url": "https://github.com/altair-viz/altair/issues/46", "id": 107374965, "node_id": "MDU6SXNzdWUxMDczNzQ5NjU=", "number": 46, "title": "name/type parsing breaks column names with whitespace", "user": {"login": "jakevdp", "id": 781659, "node_id": "MDQ6VXNlcjc4MTY1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/781659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakevdp", "html_url": "https://github.com/jakevdp", "followers_url": "https://api.github.com/users/jakevdp/followers", "following_url": "https://api.github.com/users/jakevdp/following{/other_user}", "gists_url": "https://api.github.com/users/jakevdp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakevdp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakevdp/subscriptions", "organizations_url": "https://api.github.com/users/jakevdp/orgs", "repos_url": "https://api.github.com/users/jakevdp/repos", "events_url": "https://api.github.com/users/jakevdp/events{/privacy}", "received_events_url": "https://api.github.com/users/jakevdp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/altair-viz/altair/milestones/1", "html_url": "https://github.com/altair-viz/altair/milestone/1", "labels_url": "https://api.github.com/repos/altair-viz/altair/milestones/1/labels", "id": 1818291, "node_id": "MDk6TWlsZXN0b25lMTgxODI5MQ==", "number": 1, "title": "1.0", "description": "The initial release of altair will be a 1.0 release. We are planning for our major versions to follow those of Vega-Lite.", "creator": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2016-06-09T17:30:31Z", "updated_at": "2023-01-03T22:36:07Z", "due_on": null, "closed_at": "2023-01-03T22:36:07Z"}, "comments": 1, "created_at": "2015-09-20T05:45:15Z", "updated_at": "2016-07-09T15:47:59Z", "closed_at": "2016-07-09T15:47:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I think the best fix is to not `strip` everything.\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/46/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/46/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/45", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/45/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/45/events", "html_url": "https://github.com/altair-viz/altair/issues/45", "id": 107374942, "node_id": "MDU6SXNzdWUxMDczNzQ5NDI=", "number": 45, "title": "The width and height of config are not being respected by vega-lite", "user": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-09-20T05:44:16Z", "updated_at": "2015-10-08T01:37:33Z", "closed_at": "2015-10-08T01:37:33Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/45/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/45/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/altair-viz/altair/issues/34", "repository_url": "https://api.github.com/repos/altair-viz/altair", "labels_url": "https://api.github.com/repos/altair-viz/altair/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/altair-viz/altair/issues/34/comments", "events_url": "https://api.github.com/repos/altair-viz/altair/issues/34/events", "html_url": "https://github.com/altair-viz/altair/issues/34", "id": 107367860, "node_id": "MDU6SXNzdWUxMDczNjc4NjA=", "number": 34, "title": "Warning on `df==None`", "user": {"login": "ellisonbg", "id": 27600, "node_id": "MDQ6VXNlcjI3NjAw", "avatar_url": "https://avatars.githubusercontent.com/u/27600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ellisonbg", "html_url": "https://github.com/ellisonbg", "followers_url": "https://api.github.com/users/ellisonbg/followers", "following_url": "https://api.github.com/users/ellisonbg/following{/other_user}", "gists_url": "https://api.github.com/users/ellisonbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ellisonbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ellisonbg/subscriptions", "organizations_url": "https://api.github.com/users/ellisonbg/orgs", "repos_url": "https://api.github.com/users/ellisonbg/repos", "events_url": "https://api.github.com/users/ellisonbg/events{/privacy}", "received_events_url": "https://api.github.com/users/ellisonbg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262356186, "node_id": "MDU6TGFiZWwyNjIzNTYxODY=", "url": "https://api.github.com/repos/altair-viz/altair/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-09-20T02:48:37Z", "updated_at": "2016-05-24T01:33:16Z", "closed_at": "2016-05-24T01:33:16Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "When the `data` attribute of a `Viz` class changed, traitlets does a `df==None` test to see if the value has changed. This raises a warning.\n", "reactions": {"url": "https://api.github.com/repos/altair-viz/altair/issues/34/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/altair-viz/altair/issues/34/timeline", "performed_via_github_app": null, "state_reason": "completed"}]