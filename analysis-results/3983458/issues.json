[{"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1314", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1314/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1314/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1314/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/1314", "id": 1353353887, "node_id": "I_kwDODPXGp85Qqoqf", "number": 1314, "title": "implicitron:\"ValidationError: Unexpected object type: _empty\"---video synthesis", "user": {"login": "cinamon123", "id": 104305930, "node_id": "U_kgDOBjeVCg", "avatar_url": "https://avatars.githubusercontent.com/u/104305930?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cinamon123", "html_url": "https://github.com/cinamon123", "followers_url": "https://api.github.com/users/cinamon123/followers", "following_url": "https://api.github.com/users/cinamon123/following{/other_user}", "gists_url": "https://api.github.com/users/cinamon123/gists{/gist_id}", "starred_url": "https://api.github.com/users/cinamon123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cinamon123/subscriptions", "organizations_url": "https://api.github.com/users/cinamon123/orgs", "repos_url": "https://api.github.com/users/cinamon123/repos", "events_url": "https://api.github.com/users/cinamon123/events{/privacy}", "received_events_url": "https://api.github.com/users/cinamon123/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2022-08-28T13:28:18Z", "updated_at": "2022-09-22T02:06:04Z", "closed_at": "2022-09-22T02:06:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "\ud83d\udc1b Hello, there is something wrong with video making in implicitron.\r\n\r\nINPUT\r\n`python pytorch3d/implicitron_trainer/visualize_reconstruction.py exp_dir='pytorch3d/projects/implicitron_trainer/checkpoint' \\\r\n    visdom_show_preds=True visdom_server=True n_eval_cameras=40 render_size=\"[64,64]\" video_size=\"[256,256]\"`\r\n\r\nOUTPUT ERROR\r\n`raise ValidationError(f\"Unexpected object type: {type_str(type_)}\")\r\nomegaconf.errors.ValidationError: Unexpected object type: _empty\r\n    full_key: visdom_server\r\n    object_type=_export_scenes_default_args_\r\n`\r\nI read many relative py files. `visdom_server` is defined as `str`. I have no idea how the error comes.\r\nTHANK U", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1314/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1314/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1287", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1287/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1287/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1287/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/1287", "id": 1333703719, "node_id": "I_kwDODPXGp85PfrQn", "number": 1287, "title": "box3d_overlap gives unexpected results even with correct order of vertices", "user": {"login": "psteeves", "id": 34142964, "node_id": "MDQ6VXNlcjM0MTQyOTY0", "avatar_url": "https://avatars.githubusercontent.com/u/34142964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psteeves", "html_url": "https://github.com/psteeves", "followers_url": "https://api.github.com/users/psteeves/followers", "following_url": "https://api.github.com/users/psteeves/following{/other_user}", "gists_url": "https://api.github.com/users/psteeves/gists{/gist_id}", "starred_url": "https://api.github.com/users/psteeves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psteeves/subscriptions", "organizations_url": "https://api.github.com/users/psteeves/orgs", "repos_url": "https://api.github.com/users/psteeves/repos", "events_url": "https://api.github.com/users/psteeves/events{/privacy}", "received_events_url": "https://api.github.com/users/psteeves/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2022-08-09T19:38:53Z", "updated_at": "2022-08-22T13:10:24Z", "closed_at": "2022-08-22T13:10:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\nbox3d_overlap gives unexpected results even with correct order of vertices.\r\n\r\n## Instructions To Reproduce the Issue:\r\nI have the following code which takes two sets of cuboid points and attempts to use the IoU function. The cuboids are nearly identical, so I expect the IoU to be very close to 1. The order of the vertices are originally not in the expected order, but I do reorder them:\r\n```\r\nimport numpy as np\r\nfrom torch import FloatTensor\r\nfrom pytorch3d.ops import box3d_overlap\r\n\r\n\r\nPOINTS_ORDER = [3, 1, 0, 2, 7, 5, 4, 6]\r\ndef cuboid_to_tensor(points):\r\n    reordered_points = np.array(points)[POINTS_ORDER]\r\n    tensor = FloatTensor(reordered_points)\r\n    return tensor[None]\r\n\r\ncuboid_points_1 = [[-34.67156, -2.65437, -0.95367], [-34.67156, -2.65437, 0.96941], [-33.94158, -4.51639, -0.95367], [-33.94158, -4.51639, 0.96941], [-39.48952, -4.54319, -0.95367], [-39.48952, -4.54319, 0.96941], [-38.75954, -6.40521, -0.95367], [-38.75954, -6.40521, 0.96941]]\r\ncuboid_points_2 = [[-34.67158, -2.65437, -0.95368], [-34.67158, -2.65437, 0.96939], [-33.94159, -4.51638, -0.95368], [-33.94159, -4.51638, 0.96939], [-39.48953, -4.54321, -0.95368], [-39.48953, -4.54321, 0.96939], [-38.75954, -6.40523, -0.95368], [-38.75954, -6.40523, 0.96939]]\r\n\r\ntensor_1 = cuboid_to_tensor(cuboid_points_1)\r\ntensor_2 = cuboid_to_tensor(cuboid_points_2)\r\n\r\nprint(box3d_overlap(tensor_1, tensor_2))  # Returns (25.7176, 1.8253)\r\nprint(box3d_overlap(tensor_2, tensor_1))  # Returns (35.8715, 9.1139)\r\n```\r\n\r\nAs shown in the comments on the last lines, the IoU returned is greater than 1. Not only that, if I flip the tensor arguments the return value changes. Any idea what is going on here? \r\nThanks in advance \ud83d\ude42 ", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1287/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1287/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1280", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1280/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1280/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1280/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/1280", "id": 1329699171, "node_id": "I_kwDODPXGp85PQZlj", "number": 1280, "title": "small typo in the LLFF data loader? (os.path.listdir -> os.listdir)", "user": {"login": "sergeyprokudin", "id": 8117267, "node_id": "MDQ6VXNlcjgxMTcyNjc=", "avatar_url": "https://avatars.githubusercontent.com/u/8117267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sergeyprokudin", "html_url": "https://github.com/sergeyprokudin", "followers_url": "https://api.github.com/users/sergeyprokudin/followers", "following_url": "https://api.github.com/users/sergeyprokudin/following{/other_user}", "gists_url": "https://api.github.com/users/sergeyprokudin/gists{/gist_id}", "starred_url": "https://api.github.com/users/sergeyprokudin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sergeyprokudin/subscriptions", "organizations_url": "https://api.github.com/users/sergeyprokudin/orgs", "repos_url": "https://api.github.com/users/sergeyprokudin/repos", "events_url": "https://api.github.com/users/sergeyprokudin/events{/privacy}", "received_events_url": "https://api.github.com/users/sergeyprokudin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2022-08-05T09:38:02Z", "updated_at": "2022-08-08T12:49:18Z", "closed_at": "2022-08-08T08:08:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi folks!\r\n\r\nI've just noticed a potential typo in the LLFF data loader:\r\n\r\nhttps://github.com/facebookresearch/pytorch3d/blob/a0f786f4cf600a8b1741ef8b5b24bc99272ab0e7/pytorch3d/implicitron/dataset/load_llff.py#L297\r\n\r\nshould be os.**listdir** instead of os.**path.listdir** I guess?\r\n\r\nP.S. thanks for the amazing work! ", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1280/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1280/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1279", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1279/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1279/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1279/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/1279", "id": 1327613648, "node_id": "I_kwDODPXGp85PIcbQ", "number": 1279, "title": "pip install of pytorch3d leaks a python module called `projects`", "user": {"login": "igozali", "id": 1359333, "node_id": "MDQ6VXNlcjEzNTkzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1359333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igozali", "html_url": "https://github.com/igozali", "followers_url": "https://api.github.com/users/igozali/followers", "following_url": "https://api.github.com/users/igozali/following{/other_user}", "gists_url": "https://api.github.com/users/igozali/gists{/gist_id}", "starred_url": "https://api.github.com/users/igozali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igozali/subscriptions", "organizations_url": "https://api.github.com/users/igozali/orgs", "repos_url": "https://api.github.com/users/igozali/repos", "events_url": "https://api.github.com/users/igozali/events{/privacy}", "received_events_url": "https://api.github.com/users/igozali/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-03T18:12:17Z", "updated_at": "2022-08-05T09:50:46Z", "closed_at": "2022-08-05T09:50:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\n<!-- A clear and concise description of the issue -->\r\n\r\nUpon doing `pip install pytorch3d`, it also installs a module called `projects` to the `site-packages`. I expected all code coming from `pytorch3d` to be nicely stored under `import pytorch3d`.\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\n```\r\n[11:07:58 | last: 21s] (  0) | ~/venvs\r\nigozali@hostname $ pip freeze | grep pytorch3d\r\npytorch3d==0.6.2\r\n\r\n[11:08:49 | last: 50s] (  0) | ~/venvs\r\nigozali@hostname $ python -c \"import projects; print(projects)\"\r\n<module 'projects' from '/Users/igozali/venvs/venv/lib/python3.9/site-packages/projects/__init__.py'>\r\n\r\n[11:09:01 | last: 12s] (  0) | ~/venvs\r\nigozali@hostname $ ls /Users/igozali/venvs/venv/lib/python3.9/site-packages/projects\r\n__init__.py  __pycache__  implicitron_trainer  nerf\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1279/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1279/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1174", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1174/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1174/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1174/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/1174", "id": 1213963900, "node_id": "I_kwDODPXGp85IW558", "number": 1174, "title": "x_lengths / y_lenghts in chamfer_distance loss", "user": {"login": "Hiusam", "id": 43744525, "node_id": "MDQ6VXNlcjQzNzQ0NTI1", "avatar_url": "https://avatars.githubusercontent.com/u/43744525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Hiusam", "html_url": "https://github.com/Hiusam", "followers_url": "https://api.github.com/users/Hiusam/followers", "following_url": "https://api.github.com/users/Hiusam/following{/other_user}", "gists_url": "https://api.github.com/users/Hiusam/gists{/gist_id}", "starred_url": "https://api.github.com/users/Hiusam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Hiusam/subscriptions", "organizations_url": "https://api.github.com/users/Hiusam/orgs", "repos_url": "https://api.github.com/users/Hiusam/repos", "events_url": "https://api.github.com/users/Hiusam/events{/privacy}", "received_events_url": "https://api.github.com/users/Hiusam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-04-25T04:42:10Z", "updated_at": "2022-05-27T10:07:32Z", "closed_at": "2022-05-27T10:07:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \u2753 Questions on chamfer_distance\r\n\r\nI encountered \"nan\" loss when using chamfer_distance loss. Could you please give some hints of what may cause the \"nan\"?\r\n\r\nI found that if there is zero point in a cloud, the loss will be \"nan\". I also tried specifying negative numbers of points in x_lengths / y_lenghts and a larger number of points than it actually is, in both cases the loss is 0.0 rather \"nan\". \r\n\r\nI wonder what it will behave when x_lengths / y_lenghts is set to be a wrong number (zero, negative, larger than P of [N, P, D]).\r\n\r\nThank you very much!\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1174/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1174/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1144", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1144/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1144/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1144/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/1144", "id": 1185233635, "node_id": "I_kwDODPXGp85GpTrj", "number": 1144, "title": "pickle error when saving implictron models", "user": {"login": "CoolChameleon", "id": 23183849, "node_id": "MDQ6VXNlcjIzMTgzODQ5", "avatar_url": "https://avatars.githubusercontent.com/u/23183849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CoolChameleon", "html_url": "https://github.com/CoolChameleon", "followers_url": "https://api.github.com/users/CoolChameleon/followers", "following_url": "https://api.github.com/users/CoolChameleon/following{/other_user}", "gists_url": "https://api.github.com/users/CoolChameleon/gists{/gist_id}", "starred_url": "https://api.github.com/users/CoolChameleon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CoolChameleon/subscriptions", "organizations_url": "https://api.github.com/users/CoolChameleon/orgs", "repos_url": "https://api.github.com/users/CoolChameleon/repos", "events_url": "https://api.github.com/users/CoolChameleon/events{/privacy}", "received_events_url": "https://api.github.com/users/CoolChameleon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3109660194, "node_id": "MDU6TGFiZWwzMTA5NjYwMTk0", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/Stale", "name": "Stale", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2022-03-29T18:07:24Z", "updated_at": "2022-05-07T05:32:26Z", "closed_at": "2022-05-07T05:32:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "I\u2018m just running projects/implicitron_trainer/experiment.py and I get the following error when an epoch ends and the code starts to save model:\r\n![1648577163(1)](https://user-images.githubusercontent.com/23183849/160676606-c1ad8fbd-c144-415d-ac69-2c803df36e66.png)\r\nI wonder why I got this error. Could it be inconsistent versions of some dependencies?", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1144/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1104", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1104/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1104/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1104/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/1104", "id": 1161033377, "node_id": "I_kwDODPXGp85FM_ah", "number": 1104, "title": "Bug when loading ply mesh from open3d", "user": {"login": "dalnoguer", "id": 26818829, "node_id": "MDQ6VXNlcjI2ODE4ODI5", "avatar_url": "https://avatars.githubusercontent.com/u/26818829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dalnoguer", "html_url": "https://github.com/dalnoguer", "followers_url": "https://api.github.com/users/dalnoguer/followers", "following_url": "https://api.github.com/users/dalnoguer/following{/other_user}", "gists_url": "https://api.github.com/users/dalnoguer/gists{/gist_id}", "starred_url": "https://api.github.com/users/dalnoguer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dalnoguer/subscriptions", "organizations_url": "https://api.github.com/users/dalnoguer/orgs", "repos_url": "https://api.github.com/users/dalnoguer/repos", "events_url": "https://api.github.com/users/dalnoguer/events{/privacy}", "received_events_url": "https://api.github.com/users/dalnoguer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-03-07T08:01:33Z", "updated_at": "2022-03-14T12:25:54Z", "closed_at": "2022-03-14T12:25:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Problem loading ply mesh. Triangle faces expected in int32 type. However, when parsed from the ply the resulting array is uint32.\r\n\r\nThis is the original line: https://github.com/facebookresearch/pytorch3d/blob/main/pytorch3d/io/ply_io.py#L1043\r\n\r\nGit diff\r\n```\r\n# original line\r\nfaces = torch.LongTensor(np.vstack(face_arrays))\r\n\r\n# fix\r\nfaces = torch.LongTensor(np.vstack(face_arrays).astype(np.int32))\r\n```\r\n\r\nLet me know what you thing about the fix.\r\n\r\nThanks!\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1104/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1072", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1072/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1072/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1072/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/1072", "id": 1132939135, "node_id": "I_kwDODPXGp85Dh0d_", "number": 1072, "title": "Transform3d Stacking", "user": {"login": "davezdeng8", "id": 19213627, "node_id": "MDQ6VXNlcjE5MjEzNjI3", "avatar_url": "https://avatars.githubusercontent.com/u/19213627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davezdeng8", "html_url": "https://github.com/davezdeng8", "followers_url": "https://api.github.com/users/davezdeng8/followers", "following_url": "https://api.github.com/users/davezdeng8/following{/other_user}", "gists_url": "https://api.github.com/users/davezdeng8/gists{/gist_id}", "starred_url": "https://api.github.com/users/davezdeng8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davezdeng8/subscriptions", "organizations_url": "https://api.github.com/users/davezdeng8/orgs", "repos_url": "https://api.github.com/users/davezdeng8/repos", "events_url": "https://api.github.com/users/davezdeng8/events{/privacy}", "received_events_url": "https://api.github.com/users/davezdeng8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-02-11T18:18:33Z", "updated_at": "2022-02-15T14:50:37Z", "closed_at": "2022-02-15T14:50:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "Unless I am understanding stacking incorrectly, there seems to be an issue with stacking Transform3D. \r\n\r\nTo reproduce:\r\n```\r\nimport torch\r\nfrom pytorch3d.transforms import Transform3D\r\ntransform3 = Transform3d().rotate(torch.stack([torch.eye(3)]*3)).translate(torch.zeros(3,3))\r\ntransform1 = Transform3d()\r\ntransform4 = transform1.stack(transform3)\r\nprint(len(transform3))\r\nprint(len(transform1))\r\nprint(len(transform4))\r\ntransform4.transform_points(torch.zeros(4,5,3))\r\n```\r\n\r\nThe last line errors with:\r\n```\r\nValueError: Expected batch dim for bmm to be equal or 1; got torch.Size([4, 5, 4]), torch.Size([2, 4, 4])\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/1072/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/992", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/992/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/992/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/992/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/992", "id": 1079016466, "node_id": "I_kwDODPXGp85AUHwS", "number": 992, "title": "Wrong box3d_overlap output", "user": {"login": "mikeedi", "id": 28559636, "node_id": "MDQ6VXNlcjI4NTU5NjM2", "avatar_url": "https://avatars.githubusercontent.com/u/28559636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikeedi", "html_url": "https://github.com/mikeedi", "followers_url": "https://api.github.com/users/mikeedi/followers", "following_url": "https://api.github.com/users/mikeedi/following{/other_user}", "gists_url": "https://api.github.com/users/mikeedi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikeedi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikeedi/subscriptions", "organizations_url": "https://api.github.com/users/mikeedi/orgs", "repos_url": "https://api.github.com/users/mikeedi/repos", "events_url": "https://api.github.com/users/mikeedi/events{/privacy}", "received_events_url": "https://api.github.com/users/mikeedi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2021-12-13T20:54:41Z", "updated_at": "2022-08-10T13:42:52Z", "closed_at": "2021-12-18T18:36:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Strange behaviour of pytorch3d.ops.box3d_overlap  \r\n\r\nFirst case - zero overlap expected, but non-zero value is returned (and also different values depending on the order of the arguments):\r\n```\r\nimport torch\r\nfrom pytorch3d.ops import box3d_overlap\r\na = torch.tensor([[-1.0000, -1.0000, -0.5000],\r\n        [ 1.0000, -1.0000, -0.5000],\r\n        [ 1.0000,  1.0000, -0.5000],\r\n        [-1.0000,  1.0000, -0.5000],\r\n        [-1.0000, -1.0000,  0.5000],\r\n        [ 1.0000, -1.0000,  0.5000],\r\n        [ 1.0000,  1.0000,  0.5000],\r\n        [-1.0000,  1.0000,  0.5000]])\r\nb = torch.tensor([[0., 0., 0.],\r\n        [0., 0., 0.],\r\n        [0., 0., 0.],\r\n        [0., 0., 0.],\r\n        [0., 0., 0.],\r\n        [0., 0., 0.],\r\n        [0., 0., 0.],\r\n        [0., 0., 0.]])\r\n\r\nprint(box3d_overlap(a[None], b[None]))\r\nprint(box3d_overlap(b[None], a[None]))\r\n```\r\nReturns:\r\n```\r\n(tensor([[4.0000]]), tensor([[inf]]))\r\n(tensor([[0.]]), tensor([[0.]]))\r\n```\r\n\r\nSecond case:\r\n```\r\nimport torch\r\nfrom pytorch3d.ops import box3d_overlap\r\n# function from https://github.com/facebookresearch/pytorch3d/blob/main/tests/test_iou_box3d.py \r\ndef create_box(xyz, whl):\r\n    x, y, z = xyz\r\n    w, h, le = whl\r\n\r\n    verts = torch.tensor(\r\n        [\r\n            [x - w / 2.0, y - h / 2.0, z - le / 2.0],\r\n            [x + w / 2.0, y - h / 2.0, z - le / 2.0],\r\n            [x + w / 2.0, y + h / 2.0, z - le / 2.0],\r\n            [x - w / 2.0, y + h / 2.0, z - le / 2.0],\r\n            [x - w / 2.0, y - h / 2.0, z + le / 2.0],\r\n            [x + w / 2.0, y - h / 2.0, z + le / 2.0],\r\n            [x + w / 2.0, y + h / 2.0, z + le / 2.0],\r\n            [x - w / 2.0, y + h / 2.0, z + le / 2.0],\r\n        ],\r\n        device=xyz.device,\r\n        dtype=torch.float32,\r\n    )\r\n    return verts\r\n\r\n\r\nctrs = torch.tensor([[0., 0., 0.], [-1., 1., 0.]])\r\nwhl = torch.tensor([[2., 2., 2.], [2., 2, 2]])\r\nbox8a = create_box(ctrs[0], whl[0])\r\nbox8b = create_box(ctrs[1], whl[1])\r\nprint(box3d_overlap(box8a[None], box8b[None]))\r\n```\r\nReturns:\r\n```\r\n(tensor([[1.3704]]), tensor([[0.0937]]))\r\n```\r\nif you calculate the overlap area by hand, you get exactly 2, but the function gives a different result.\r\n\r\nMoreover, if you slightly change the values, then the answer will be correct:\r\n```\r\nctrs = torch.tensor([[0., 0., 0.], [-0.999999, 1., 0.]])\r\nwhl = torch.tensor([[2., 2., 2.], [2., 2, 2]])\r\nbox8a = create_box(ctrs[0], whl[0])\r\nbox8b = create_box(ctrs[1], whl[1])\r\nprint(box3d_overlap(box8a[None], box8b[None]))\r\n\r\nctrs = torch.tensor([[0., 0., 0.], [-1., 1., 0.]])\r\nwhl = torch.tensor([[2., 2., 2.], [2., 2, 2]])\r\nbox8a = create_box(ctrs[0], whl[0])\r\nbox8b = create_box(ctrs[1], whl[1])\r\nprint(box3d_overlap(box8a[None], box8b[None]))\r\n\r\nctrs = torch.tensor([[0., 0., 0.], [-1.000001, 1., 0.]])\r\nwhl = torch.tensor([[2., 2., 2.], [2., 2, 2]])\r\nbox8a = create_box(ctrs[0], whl[0])\r\nbox8b = create_box(ctrs[1], whl[1])\r\nprint(box3d_overlap(box8a[None], box8b[None]))\r\n```\r\nReturns:\r\n```\r\n(tensor([[2.0002]]), tensor([[0.1429]]))\r\n(tensor([[1.3704]]), tensor([[0.0937]]))\r\n(tensor([[1.9998]]), tensor([[0.1428]]))\r\n```\r\n\r\n\r\nWas checked with\r\n```\r\ntorch == 1.6.0+cu101\r\npytorch3d==0.6.1\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/992/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/992/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/873", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/873/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/873/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/873/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/873", "id": 1021102898, "node_id": "I_kwDODPXGp8483Msy", "number": 873, "title": "ops.add_points_features_to_volume_densities_features Error", "user": {"login": "hywkim-private", "id": 67227358, "node_id": "MDQ6VXNlcjY3MjI3MzU4", "avatar_url": "https://avatars.githubusercontent.com/u/67227358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hywkim-private", "html_url": "https://github.com/hywkim-private", "followers_url": "https://api.github.com/users/hywkim-private/followers", "following_url": "https://api.github.com/users/hywkim-private/following{/other_user}", "gists_url": "https://api.github.com/users/hywkim-private/gists{/gist_id}", "starred_url": "https://api.github.com/users/hywkim-private/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hywkim-private/subscriptions", "organizations_url": "https://api.github.com/users/hywkim-private/orgs", "repos_url": "https://api.github.com/users/hywkim-private/repos", "events_url": "https://api.github.com/users/hywkim-private/events{/privacy}", "received_events_url": "https://api.github.com/users/hywkim-private/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-10-08T13:32:19Z", "updated_at": "2021-10-16T21:42:03Z", "closed_at": "2021-10-16T21:42:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\nRunning this code outputs the following error although I haven't specified any \"grid_size\" (in which case should be set to None and not raise any such errors). The parameter grid_size is not even documented in the API documentation. Could you look into this issue? The forward() function seems to be checking errors for all parameters, including those that are optional. (voxel_ds.cloud() in my function is a valid PointCloud datatype). Thanks!\r\n\r\nfeatures=torch.zeros(len(voxel_ds.cloud.points_list()), 10000, 5)\r\nvolume_densities, volume_features = ops.add_points_features_to_volume_densities_features(torch.stack(voxel_ds.cloud.points_list(), axis=0), features,  torch.zeros(30, 1, 32, 32, 32),torch.zeros(30, 5, 32, 32, 32))\r\n\r\nyield the error\r\n/usr/local/lib/python3.7/dist-packages/pytorch3d/ops/points_to_volumes.py in forward(ctx, points_3d, points_features, volume_densities, volume_features, grid_sizes, point_weight, mask, align_corners, splat)\r\n    108             raise ValueError(\"Bad volume_features shape\")\r\n    109         if grid_sizes.dtype != torch.int64:\r\n--> 110             raise ValueError(\"grid_sizes must be int64\")\r\n    111         N4, D1 = grid_sizes.shape\r\n    112         if N4 != N or D1 != 3:\r\n\r\nValueError: grid_sizes must be int64\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/873/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/873/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/826", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/826/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/826/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/826/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/826", "id": 985179331, "node_id": "MDU6SXNzdWU5ODUxNzkzMzE=", "number": 826, "title": "function \"join_meshes_as_scene\" produces wrong UV coordinates", "user": {"login": "WhoTHU", "id": 20219437, "node_id": "MDQ6VXNlcjIwMjE5NDM3", "avatar_url": "https://avatars.githubusercontent.com/u/20219437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WhoTHU", "html_url": "https://github.com/WhoTHU", "followers_url": "https://api.github.com/users/WhoTHU/followers", "following_url": "https://api.github.com/users/WhoTHU/following{/other_user}", "gists_url": "https://api.github.com/users/WhoTHU/gists{/gist_id}", "starred_url": "https://api.github.com/users/WhoTHU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WhoTHU/subscriptions", "organizations_url": "https://api.github.com/users/WhoTHU/orgs", "repos_url": "https://api.github.com/users/WhoTHU/repos", "events_url": "https://api.github.com/users/WhoTHU/events{/privacy}", "received_events_url": "https://api.github.com/users/WhoTHU/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-09-01T13:50:17Z", "updated_at": "2021-09-14T14:46:47Z", "closed_at": "2021-09-14T14:46:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seems that the function join_meshes_as_scene produces weird results.\r\nI joined several single meshes as a whole mesh by running:\r\n```\r\nmesh = p3d.structures.join_meshes_as_scene(meshes)\r\n```\r\nwhere \"meshes\" is a list of meshes with textures. However, when I render \"mesh\", it comes to this\r\n![image](https://user-images.githubusercontent.com/20219437/131683704-499c19ef-c680-4bdd-8002-429cda69c6f7.png)\r\n\r\nBut it is supposed to be\r\n![image](https://user-images.githubusercontent.com/20219437/131683678-f865b8f5-79e7-4d64-b67e-a80bedc069ca.png)\r\nwhich I got by  joining these meshes manually\r\n\r\nI checked the map of the new mesh:\r\n![image](https://user-images.githubusercontent.com/20219437/131682597-86490370-604e-4564-b487-63995328cced.png)\r\n\r\nIt seems that the black area on the body results from the black area on the texture map. The function may mistake the transformed UV coordinates.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/826/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/826/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/746", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/746/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/746/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/746/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/746", "id": 938855866, "node_id": "MDU6SXNzdWU5Mzg4NTU4NjY=", "number": 746, "title": "RuntimeError in CPU version of cubify", "user": {"login": "patmjen", "id": 40742349, "node_id": "MDQ6VXNlcjQwNzQyMzQ5", "avatar_url": "https://avatars.githubusercontent.com/u/40742349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patmjen", "html_url": "https://github.com/patmjen", "followers_url": "https://api.github.com/users/patmjen/followers", "following_url": "https://api.github.com/users/patmjen/following{/other_user}", "gists_url": "https://api.github.com/users/patmjen/gists{/gist_id}", "starred_url": "https://api.github.com/users/patmjen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patmjen/subscriptions", "organizations_url": "https://api.github.com/users/patmjen/orgs", "repos_url": "https://api.github.com/users/patmjen/repos", "events_url": "https://api.github.com/users/patmjen/events{/privacy}", "received_events_url": "https://api.github.com/users/patmjen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-07T12:46:51Z", "updated_at": "2021-07-14T02:44:47Z", "closed_at": "2021-07-14T02:44:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "The CPU version of `cubify` may raise a `RuntimeError` due to inconsistent behavior of PyTorch's `Tensor.scatter_`.\r\nFull details can be found in the comments of Issue #513. Since the tests were done with the GPU version of `cubify` the problem was not reproduced and the issue closed. However, the issue can be reproduced using the CPU version of `cubify`.\r\n\r\nSince the issue has already been raised and discussed in issue #513, feel free to re-open that and close this issue. I'm simply creating a new issue since no response was given in the previous.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/746/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/746/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/723", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/723/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/723/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/723/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/723", "id": 928216375, "node_id": "MDU6SXNzdWU5MjgyMTYzNzU=", "number": 723, "title": "Silhouette render outputs leave some unexpected black patches", "user": {"login": "Wi-sc", "id": 32695851, "node_id": "MDQ6VXNlcjMyNjk1ODUx", "avatar_url": "https://avatars.githubusercontent.com/u/32695851?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Wi-sc", "html_url": "https://github.com/Wi-sc", "followers_url": "https://api.github.com/users/Wi-sc/followers", "following_url": "https://api.github.com/users/Wi-sc/following{/other_user}", "gists_url": "https://api.github.com/users/Wi-sc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Wi-sc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Wi-sc/subscriptions", "organizations_url": "https://api.github.com/users/Wi-sc/orgs", "repos_url": "https://api.github.com/users/Wi-sc/repos", "events_url": "https://api.github.com/users/Wi-sc/events{/privacy}", "received_events_url": "https://api.github.com/users/Wi-sc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284750, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzUw", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-06-23T12:43:06Z", "updated_at": "2021-06-24T07:03:45Z", "closed_at": "2021-06-24T07:03:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\nI want to render some silhouette images from Shapnet datasets. But I got unexpected black patches from outputs.\r\n![78BA{}L_UOA7$W%_ )5(@DB](https://user-images.githubusercontent.com/32695851/123098094-1fd0bb00-d474-11eb-8c9a-115ba3568ae8.png)\r\nThe raw mesh should look like this:\r\n![13](https://user-images.githubusercontent.com/32695851/123098236-44c52e00-d474-11eb-8412-a1b86433f929.png)\r\n\r\nThe mesh id in Shapenet is : '02691156/1c93b0eb9c313f5d9a6e43b878d5b335'.\r\n\r\n\r\nThis is my code:\r\n```\r\n    verts, faces, _  = load_obj(os.path.join(\"./data/ShapeNet/ShapeNetCore.v1\", catid, objid, 'model.obj'), load_textures=False)\r\n    verts_corrected = torch.cat([verts[:, 2, None], verts[:, 1, None], verts[:, 0, None]], 1)\r\n    mesh = Meshes(verts=[verts_corrected], faces=[faces.verts_idx]).cuda()\r\n    device = mesh.device\r\n\r\n    with open(os.path.join(render_path, 'rendering/rendering_metadata.txt'),'r') as f:\r\n        lines = f.readlines()\r\n        line = lines[0].rstrip()\r\n        cam_param = line.split(' ')\r\n        distance = torch.FloatTensor([float(cam_param[3])*1.75]).to(device)\r\n        view = torch.FloatTensor([float(cam_param[4])*2]).to(device)\r\n\r\n    mesh = mesh.extend(16)\r\n    elevation= torch.FloatTensor([45, -45]).to(device)\r\n    azimuth = torch.FloatTensor([0, 45, 90, 135, 180, 225, 270, 315]).to(device)\r\n    elevation, azimuth = torch.meshgrid(elevation, azimuth)\r\n    elevation = elevation.reshape(16)\r\n    azimuth = azimuth.reshape(16)\r\n    distance = distance.expand(16)\r\n    view = view.expand(16)\r\n    R, T = look_at_view_transform(dist=distance, elev=elevation, azim=azimuth)\r\n    # print(R, T)\r\n    cameras = FoVPerspectiveCameras(device=device, R=R, T=T, fov=view)\r\n    lights = PointLights(location=[[0.0, 0.0, -10.0]], device=device)\r\n    sigma = 1e-5\r\n    raster_settings = RasterizationSettings(image_size=224, blur_radius=np.log(1. / 1e-4 - 1.)*sigma, faces_per_pixel=150, perspective_correct=False)\r\n    renderer_silhouette = MeshRenderer(rasterizer=MeshRasterizer(cameras=cameras, raster_settings=raster_settings), shader=SoftSilhouetteShader())\r\n    silhouette = renderer_silhouette(mesh, cameras=cameras, lights=lights)[..., 3] # B*H*W\r\n    silhouette = torch.flip(silhouette, dims=[2]).detach()\r\n    silhouette = np.uint8(silhouette.cpu().numpy()*255)\r\n    for i in range(16):\r\n        pil_image = Image.fromarray(silhouette[i])\r\n        pil_image.save(os.path.join(save_path, \"%02d_%02d_%03d.jpg\"%(i, elevation[i], azimuth[i])))\r\n    \r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/723/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/723/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/710", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/710/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/710/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/710/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/710", "id": 922153216, "node_id": "MDU6SXNzdWU5MjIxNTMyMTY=", "number": 710, "title": "save ply from verts and faces", "user": {"login": "nairouzshehata", "id": 22748581, "node_id": "MDQ6VXNlcjIyNzQ4NTgx", "avatar_url": "https://avatars.githubusercontent.com/u/22748581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nairouzshehata", "html_url": "https://github.com/nairouzshehata", "followers_url": "https://api.github.com/users/nairouzshehata/followers", "following_url": "https://api.github.com/users/nairouzshehata/following{/other_user}", "gists_url": "https://api.github.com/users/nairouzshehata/gists{/gist_id}", "starred_url": "https://api.github.com/users/nairouzshehata/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nairouzshehata/subscriptions", "organizations_url": "https://api.github.com/users/nairouzshehata/orgs", "repos_url": "https://api.github.com/users/nairouzshehata/repos", "events_url": "https://api.github.com/users/nairouzshehata/events{/privacy}", "received_events_url": "https://api.github.com/users/nairouzshehata/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-06-16T06:29:23Z", "updated_at": "2021-06-21T13:44:51Z", "closed_at": "2021-06-21T13:44:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \u2753 Questions on how to use PyTorch3D\r\n\r\n<!-- A clear and concise description of the question you need help with. -->\r\nmeshv is a torch Tensor of num of verts by 3\r\nmeshf is torch.long of num of faces by 3\r\nsave_obj(filename, meshv, meshf) works perfectly but save_ply(filename, meshv, meshf) produces the below error:\r\n\r\n```\r\npytorch3d/io/ply_io.py in save_ply(f, verts, faces, verts_normals, ascii, decimal_places, path_manager)\r\n   1157         path_manager = PathManager()\r\n   1158     with _open_file(f, path_manager, \"wb\") as f:\r\n-> 1159         _save_ply(\r\n   1160             f,\r\n   1161             verts=verts,\r\n```\r\n   \r\n```\r\nin _save_ply(f, verts, faces, verts_normals, verts_colors, ascii, decimal_places)\r\n   1096                 # rows are 13 bytes: a one-byte 3 followed by three four-byte face indices.\r\n   1097                 faces_uints = np.full((len(faces_array), 13), 3, dtype=np.uint8)\r\n-> 1098                 faces_uints[:, 1:] = faces_array.astype(np.uint32).view(np.uint8)\r\n   1099                 if isinstance(f, BytesIO):\r\n   1100                     f.write(faces_uints.tobytes())\r\n\r\nValueError: could not broadcast input array from shape (3000,3) into shape (750,12)\r\n```\r\n\r\nNOTE: Please look at the existing list of Issues tagged with the label ['question`](https://github.com/facebookresearch/pytorch3d/issues?q=label%3Aquestion) or ['how-to`](https://github.com/facebookresearch/pytorch3d/issues?q=label%3A%22how+to%22). **Only open a new issue if you cannot find an answer there**.\r\n\r\nAlso note the following:\r\n\r\n1. If you encountered any errors or unexpected issues while using PyTorch3D and need help resolving them,\r\n   please use the \"Bugs / Unexpected behaviors\" issue template.\r\n\r\n2. We do not answer general machine learning / computer vision questions that are not specific to\r\n\t PyTorch3D, such as how a model works or what algorithm/methods can be\r\n\t used to achieve X.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/710/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/710/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/698", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/698/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/698/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/698/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/698", "id": 911368722, "node_id": "MDU6SXNzdWU5MTEzNjg3MjI=", "number": 698, "title": "Wrong distance btw triangle and point", "user": {"login": "ATeryohin", "id": 46560822, "node_id": "MDQ6VXNlcjQ2NTYwODIy", "avatar_url": "https://avatars.githubusercontent.com/u/46560822?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ATeryohin", "html_url": "https://github.com/ATeryohin", "followers_url": "https://api.github.com/users/ATeryohin/followers", "following_url": "https://api.github.com/users/ATeryohin/following{/other_user}", "gists_url": "https://api.github.com/users/ATeryohin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ATeryohin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ATeryohin/subscriptions", "organizations_url": "https://api.github.com/users/ATeryohin/orgs", "repos_url": "https://api.github.com/users/ATeryohin/repos", "events_url": "https://api.github.com/users/ATeryohin/events{/privacy}", "received_events_url": "https://api.github.com/users/ATeryohin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "patricklabatut", "id": 60359573, "node_id": "MDQ6VXNlcjYwMzU5NTcz", "avatar_url": "https://avatars.githubusercontent.com/u/60359573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patricklabatut", "html_url": "https://github.com/patricklabatut", "followers_url": "https://api.github.com/users/patricklabatut/followers", "following_url": "https://api.github.com/users/patricklabatut/following{/other_user}", "gists_url": "https://api.github.com/users/patricklabatut/gists{/gist_id}", "starred_url": "https://api.github.com/users/patricklabatut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patricklabatut/subscriptions", "organizations_url": "https://api.github.com/users/patricklabatut/orgs", "repos_url": "https://api.github.com/users/patricklabatut/repos", "events_url": "https://api.github.com/users/patricklabatut/events{/privacy}", "received_events_url": "https://api.github.com/users/patricklabatut/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "patricklabatut", "id": 60359573, "node_id": "MDQ6VXNlcjYwMzU5NTcz", "avatar_url": "https://avatars.githubusercontent.com/u/60359573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patricklabatut", "html_url": "https://github.com/patricklabatut", "followers_url": "https://api.github.com/users/patricklabatut/followers", "following_url": "https://api.github.com/users/patricklabatut/following{/other_user}", "gists_url": "https://api.github.com/users/patricklabatut/gists{/gist_id}", "starred_url": "https://api.github.com/users/patricklabatut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patricklabatut/subscriptions", "organizations_url": "https://api.github.com/users/patricklabatut/orgs", "repos_url": "https://api.github.com/users/patricklabatut/repos", "events_url": "https://api.github.com/users/patricklabatut/events{/privacy}", "received_events_url": "https://api.github.com/users/patricklabatut/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2021-06-04T10:33:26Z", "updated_at": "2021-06-19T11:39:13Z", "closed_at": "2021-06-07T09:14:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have triangle with vertecies: \r\n[10.67399979, 8.61225986, 0.77146602]\r\n[10.67269993, 8.61141968, 0.77197701]\r\n[10.67399979, 8.61225986, 0.77197701]\r\nAnd point with coords:\r\n[5, 5, 5]\r\nI created from this data pytorch3d.structures.meshes.Meshes and pytorch3d.structures.pointclouds.Pointclouds.\r\nUsing loss.loss.point_mesh_face_distance i get distance = 0.0042.\r\nWhy distance so small?\r\nOr am I using the method incorrectly?\r\n\r\nBelow code to repeat this behavior:\r\n------------------------------------------------\r\nfrom pytorch3d import loss\r\nimport torch\r\nfrom pytorch3d.structures.meshes import Meshes as torch_mesh\r\nfrom pytorch3d.structures.pointclouds import Pointclouds as torch_pc\r\n\r\nvertecies = [torch.cuda.FloatTensor([[10.67399979, 8.61225986, 0.77146602], \r\n[10.67269993, 8.61141968, 0.77197701], \r\n[10.67399979, 8.61225986, 0.77197701]])]\r\nfaces = [torch.cuda.LongTensor([[0, 1, 2]])]\r\npoints_tensor = [torch.cuda.FloatTensor([[5, 5, 5]])]\r\ntorch_mesh_test = torch_mesh(verts=vertecies, faces=faces, textures=None)\r\ntorch_pc_test = torch_pc(points_tensor)\r\ntorch_error = loss.point_mesh_face_distance(torch_mesh_test, torch_pc_test)\r\nprint(torch_error)\r\n------------------------------------------------\r\n\r\nVersions of libs:\r\ntorch==1.7.1+cu101\r\npytorch3d==0.4.0\r\nPython 3.6.8\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/698/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/663", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/663/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/663/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/663/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/663", "id": 873699584, "node_id": "MDU6SXNzdWU4NzM2OTk1ODQ=", "number": 663, "title": "`pytorch3d.io().load_mesh()` can not handle `.off` file without newline or space after 'OFF'", "user": {"login": "yadiszzz", "id": 52457921, "node_id": "MDQ6VXNlcjUyNDU3OTIx", "avatar_url": "https://avatars.githubusercontent.com/u/52457921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yadiszzz", "html_url": "https://github.com/yadiszzz", "followers_url": "https://api.github.com/users/yadiszzz/followers", "following_url": "https://api.github.com/users/yadiszzz/following{/other_user}", "gists_url": "https://api.github.com/users/yadiszzz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yadiszzz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yadiszzz/subscriptions", "organizations_url": "https://api.github.com/users/yadiszzz/orgs", "repos_url": "https://api.github.com/users/yadiszzz/repos", "events_url": "https://api.github.com/users/yadiszzz/events{/privacy}", "received_events_url": "https://api.github.com/users/yadiszzz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284751, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzUx", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-05-01T15:18:12Z", "updated_at": "2021-05-07T12:02:02Z", "closed_at": "2021-05-07T12:02:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\n\r\nLots of off files from [ModelNet40](https://modelnet.cs.princeton.edu/) dataset don't have the newline or space after 'OFF' at the beginning of the file.\r\n\r\ne.g. for file `monitor/train/monitor_0284.off`\r\n\r\nIt begins with\r\n\r\n```\r\nOFF1046 900 0\r\n-0.797495 -6.623700 9.540650 \r\n...\r\n```\r\n\r\ninstead of\r\n\r\n```\r\nOFF\r\n1046 900 0\r\n-0.797495 -6.623700 9.540650 \r\n...\r\n```\r\n\r\nBut the header skip logic below can not handle it \r\nhttps://github.com/facebookresearch/pytorch3d/blob/097b0ef2c640aa0b962495714f83ad9eb5e08fdf/pytorch3d/io/off_io.py#L229-L237\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\nPlease include the following (depending on what the issue is):\r\n\r\n1. Any changes you made (`git diff`) or code you wrote\r\n```\r\nfrom pytorch3d.io import IO\r\n\r\nmesh = IO().load_mesh(path_to_off_file)\r\n```\r\n\r\n2. The exact command(s) you ran:\r\n\r\nIn order to read off file, I installed the pytorch3d from source via \r\n\r\n```\r\npip install \"git+https://github.com/facebookresearch/pytorch3d.git\"\r\n```\r\n\r\nSince the last stable 0.4.0 doesn't contain https://github.com/facebookresearch/pytorch3d/commit/0345f860d4d44e0a36b3a366644f6432458ae5cc.\r\n\r\n3. What you observed (including the full logs):\r\n```\r\nTraceback (most recent call last):                                                                                                                                                                                                                                              \r\n  File \"<...>/env/lib/python3.8/site-packages/pytorch3d/io/off_io.py\", line 242, in _load_off_stream                                                                                                                         \r\n    n_verts = int(items[0])                                                                                                                                                                                                                                                     \r\nValueError: invalid literal for int() with base 10: b'OFF150'                                                                                                                                                                                                                   \r\n                                                                                                                                                                                                                                                                                \r\nDuring handling of the above exception, another exception occurred: \r\n\r\nTraceback (most recent call last):                                                                                                                                                                                                                                              \r\n\r\n[omitted stack]\r\n  File \"<my_project>/src/datamodules/datasets/modelnet40_dataset.py\", line 58, in off_vertex_parser\r\n    mesh = IO().load_mesh(path_to_off_file)\r\n  File \"/data/daizhu/workspace/pc_mesh_transformer_pylight/conda/env/lib/python3.8/site-packages/pytorch3d/io/pluggable.py\", line 124, in load_mesh\r\n    mesh = mesh_interpreter.read(\r\n  File \"/data/daizhu/workspace/pc_mesh_transformer_pylight/conda/env/lib/python3.8/site-packages/pytorch3d/io/off_io.py\", line 430, in read\r\n    data = _load_off_stream(f)\r\n  File \"/data/daizhu/workspace/pc_mesh_transformer_pylight/conda/env/lib/python3.8/site-packages/pytorch3d/io/off_io.py\", line 244, in _load_off_stream\r\n    raise ValueError(\"Invalid counts line: %s\" % header)\r\nValueError: Invalid counts line: b'OFF150 92 0\\n'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n  File \"./run.py\", line 31, in <module>\r\n    main()\r\n  File \"<my_project>/conda/env/lib/python3.8/site-packages/hydra/main.py\", line 49, in decorated_main\r\n    _run_hydra(\r\n  File \"<my_project>/conda/env/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 370, in _run_hydra\r\n    run_and_report(\r\n  File \"<my_project>/conda/env/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 215, in run_and_report\r\n    raise ex\r\n  File \"<my_project>/conda/env/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 212, in run_and_report\r\n    return func()\r\n  File \"<my_project>/conda/env/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 371, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"<my_project>/conda/env/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 107, in run\r\n    _ = ret.return_value\r\n  File \"<my_project>/conda/env/lib/python3.8/site-packages/hydra/core/utils.py\", line 207, in return_value\r\n    raise HydraJobException(\r\nhydra.errors.HydraJobException: Error executing job with overrides: []\r\n\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/663/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/652", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/652/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/652/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/652/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/652", "id": 863403258, "node_id": "MDU6SXNzdWU4NjM0MDMyNTg=", "number": 652, "title": "Errors when rendering with batch cameras", "user": {"login": "itswyri", "id": 17693735, "node_id": "MDQ6VXNlcjE3NjkzNzM1", "avatar_url": "https://avatars.githubusercontent.com/u/17693735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itswyri", "html_url": "https://github.com/itswyri", "followers_url": "https://api.github.com/users/itswyri/followers", "following_url": "https://api.github.com/users/itswyri/following{/other_user}", "gists_url": "https://api.github.com/users/itswyri/gists{/gist_id}", "starred_url": "https://api.github.com/users/itswyri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itswyri/subscriptions", "organizations_url": "https://api.github.com/users/itswyri/orgs", "repos_url": "https://api.github.com/users/itswyri/repos", "events_url": "https://api.github.com/users/itswyri/events{/privacy}", "received_events_url": "https://api.github.com/users/itswyri/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-04-21T03:01:38Z", "updated_at": "2021-06-15T17:18:35Z", "closed_at": "2021-06-15T17:18:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "I found a bug when rendering images with multiple cameras (batch_sized cameras).\r\nI fixed it on my own. But I'd like to know if it is correct and want to share it with you.\r\n\r\n## \ud83d\udc1b Bugs / Unexpected behaviors\r\nerror occurs at `pytorch3d/renderer/blending.py` line 187 (or 188) `z_inv = (zfar - fragments.zbuf) / (zfar - znear) * mask`\r\n\r\n`zfar`'s shape at dimension -1 doesn't coincide with its `fragments.zbuf`\r\n\r\n## Instructions To Reproduce the Issue:\r\n```python\r\n# camera\r\n        R, T = look_at_view_transform(2.7, 0., 0.) # (1, 3, 3), (1, 3)\r\n        cameras = FoVOrthographicCameras(device=device, R=R, T=T, znear=0.05, zfar=1000)\r\n\r\n        # light\r\n        lights = PointLights(device=device, location=[[0, -1, 1]])\r\n\r\n        # materials\r\n        materials = Materials(device=device,\r\n                              specular_color=[color],\r\n                              shininess=0.0)\r\n\r\n        # Rasterization settings for differentiable rendering, where the blur_radius\r\n        # initialization is based on Liu et al, 'Soft Rasterizer\"\r\n        sigma = 1e-4\r\n        raster_settings_soft = RasterizationSettings(\r\n            image_size=resolution[::-1],\r\n            blur_radius=np.log(1. / 1e-4 - 1.) * sigma,\r\n            faces_per_pixel=50,\r\n            perspective_correct=False\r\n        )\r\n\r\n        # Differentiable soft renderer using per vertex RGB colors for texture\r\n        renderer = MeshRenderer(\r\n            rasterizer=MeshRasterizer(\r\n                cameras=cameras,\r\n                raster_settings=raster_settings_soft,\r\n            ),\r\n            shader=SoftPhongShader(\r\n                device=device,\r\n                cameras=cameras,\r\n                lights=lights,\r\n                materials=materials\r\n            )\r\n        )\r\n        \r\n\r\n\r\n\r\n        scale_xyz = torch.stack([sx, sy, torch.ones_like(sx)], dim=1)\r\n\r\n        R_, T_ = look_at_view_transform(2.7, 0., 0.)\r\n        R = R_.expand(verts.shape[0], -1, -1)\r\n        T = T_.expand(verts.shape[0], -1)\r\n        cameras = FoVOrthographicCameras(device=device, R=R, T=T, znear=self.znear, zfar=self.zfar, max_x=max_x, min_x=min_x, max_y=max_y, min_y=min_y, scale_xyz=scale_xyz)\r\n        # max_x, min_x, max_y, min_y : (N) sized tensor with different values\r\n\r\n\r\n        textures = TexturesVertex(verts_features=torch.ones_like(verts))\r\n\r\n        meshes = Meshes(verts=verts,\r\n                        faces=faces,\r\n                        textures=textures)\r\n        images = self.renderer(meshes, cameras=cameras)\r\n```\r\n\r\n### How I fixed it\r\nWhen doing an element-wise operation, PyTorch tries to duplicate the shape 1 dimension of one tensor to the shape of the other tensor (>1). The matching order seems last dimension first. In this case, `zfar` has shape (N) and `fragments.zbuf` has shape (N, ..., 50) (the first dimension's shape is batch_size, and the last dimension's shape is faces_per_pixel).\r\nAccording to broadcasting rule, it occurs errors. So I add shape reshaping code prior to the `z_inv` computation at line 187\r\n```\r\n    if isinstance(zfar, torch.Tensor):\r\n        if zfar.ndim > 0:\r\n            if zfar.shape[0] > 1:\r\n                zfar = zfar.reshape(*((zfar.shape[0],) + (1,)*(fragments.zbuf.ndim - 1)))\r\n    if isinstance(znear, torch.Tensor):\r\n        if znear.ndim > 0:\r\n            if znear.shape[0] > 1:\r\n                znear = znear.reshape(*((znear.shape[0],) + (1,)*(fragments.zbuf.ndim - 1)))\r\n\r\n    z_inv = (zfar - fragments.zbuf) / (zfar - znear) * mask\r\n```\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/652/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/652/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/646", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/646/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/646/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/646/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/646", "id": 859706767, "node_id": "MDU6SXNzdWU4NTk3MDY3Njc=", "number": 646, "title": "Sign issue about quaternion_to_matrix and matrix_to_quaternion", "user": {"login": "sailor-z", "id": 26895204, "node_id": "MDQ6VXNlcjI2ODk1MjA0", "avatar_url": "https://avatars.githubusercontent.com/u/26895204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sailor-z", "html_url": "https://github.com/sailor-z", "followers_url": "https://api.github.com/users/sailor-z/followers", "following_url": "https://api.github.com/users/sailor-z/following{/other_user}", "gists_url": "https://api.github.com/users/sailor-z/gists{/gist_id}", "starred_url": "https://api.github.com/users/sailor-z/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sailor-z/subscriptions", "organizations_url": "https://api.github.com/users/sailor-z/orgs", "repos_url": "https://api.github.com/users/sailor-z/repos", "events_url": "https://api.github.com/users/sailor-z/events{/privacy}", "received_events_url": "https://api.github.com/users/sailor-z/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2021-04-16T10:57:08Z", "updated_at": "2021-06-19T17:10:08Z", "closed_at": "2021-06-19T17:10:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\n\r\nHi, Thanks for releasing the amazing project. I'm trying to use \"quaternion_to_matrix\" and \"matrix_to_quaternion\" to transform the rotation matrix. The initial rotation is acquired by \r\n\r\nR, T = look_at_view_transform(distance, elevation, azimuth, device=device).\r\n(https://pytorch3d.org/tutorials/camera_position_optimization_with_differentiable_rendering)\r\n\r\nThen I perform quaternion_to_matrix and matrix_to_quaternion as\r\n\r\nR = matrix_to_quaternion(R)\r\nR = quaternion_to_matrix(R)\r\n\r\nIdeally, the transformed matrix should be identical to the initial one, but I found that there is a sign issue like\r\n\r\n![image](https://user-images.githubusercontent.com/26895204/115014836-227ec500-9eb3-11eb-9cdd-2340462b8135.png)\r\n\r\nHow can I solve this problem?\r\n\r\nBests\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/646/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/633", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/633/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/633/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/633/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/633", "id": 853833697, "node_id": "MDU6SXNzdWU4NTM4MzM2OTc=", "number": 633, "title": "`Transform3d.to()` ignores `dtype` changes if `device` unchanged and `copy=False` (the default)", "user": {"login": "AndreiBarsan", "id": 1260898, "node_id": "MDQ6VXNlcjEyNjA4OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1260898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreiBarsan", "html_url": "https://github.com/AndreiBarsan", "followers_url": "https://api.github.com/users/AndreiBarsan/followers", "following_url": "https://api.github.com/users/AndreiBarsan/following{/other_user}", "gists_url": "https://api.github.com/users/AndreiBarsan/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreiBarsan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreiBarsan/subscriptions", "organizations_url": "https://api.github.com/users/AndreiBarsan/orgs", "repos_url": "https://api.github.com/users/AndreiBarsan/repos", "events_url": "https://api.github.com/users/AndreiBarsan/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreiBarsan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, {"login": "patricklabatut", "id": 60359573, "node_id": "MDQ6VXNlcjYwMzU5NTcz", "avatar_url": "https://avatars.githubusercontent.com/u/60359573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patricklabatut", "html_url": "https://github.com/patricklabatut", "followers_url": "https://api.github.com/users/patricklabatut/followers", "following_url": "https://api.github.com/users/patricklabatut/following{/other_user}", "gists_url": "https://api.github.com/users/patricklabatut/gists{/gist_id}", "starred_url": "https://api.github.com/users/patricklabatut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patricklabatut/subscriptions", "organizations_url": "https://api.github.com/users/patricklabatut/orgs", "repos_url": "https://api.github.com/users/patricklabatut/repos", "events_url": "https://api.github.com/users/patricklabatut/events{/privacy}", "received_events_url": "https://api.github.com/users/patricklabatut/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-04-08T20:02:33Z", "updated_at": "2021-06-10T15:52:17Z", "closed_at": "2021-06-10T10:24:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\n\r\nConverting back and forth between the `dtypes` used by a `Transform3d` should not care about the device, but currently it does. Changing, e.g., a transform from float32 to float64 only works when _also_ changing the device, or when `copy=True` is set explicitly, which can be a bit confusing to some users.\r\n\r\nThis can cause numerical problems in code. For example, `numerically_sensitive_stuff(pose.to(dtype=torch.float64))` will  currently not do what the programmer would expect, operating on 32-bit representations.\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\nClean commands:\r\n```python\r\nimport torch\r\nfrom pytorch3d.transforms import Transform3d\r\nt = Transform3d()\r\nprint(t.get_matrix().dtype)\r\nprint(t.to(dtype=torch.float64, device=\"cpu\").get_matrix().dtype)\r\n```\r\n\r\nCommands with output:\r\n```python\r\n>>> import torch\r\n>>> from pytorch3d.transforms import Transform3d\r\n>>> t = Transform3d()\r\n>>> t.get_matrix().dtype\r\ntorch.float32\r\n>>> t.to(dtype=torch.float64, device=\"cpu\").get_matrix().dtype\r\ntorch.float32   # oh no!\r\n```\r\n\r\n## Potential Solution\r\n\r\nThe culprit seems to be [here](https://github.com/facebookresearch/pytorch3d/blob/24ee279005c2c893f2f005837528e351b3168ad7/pytorch3d/transforms/transform3d.py#L418). That line should probably also check whether the dtype is also unchanged.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/633/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/633/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/613", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/613/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/613/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/613/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/613", "id": 838352339, "node_id": "MDU6SXNzdWU4MzgzNTIzMzk=", "number": 613, "title": "_C.point_face_dist_forward will fail under unknown conditions", "user": {"login": "hangg7", "id": 10098306, "node_id": "MDQ6VXNlcjEwMDk4MzA2", "avatar_url": "https://avatars.githubusercontent.com/u/10098306?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hangg7", "html_url": "https://github.com/hangg7", "followers_url": "https://api.github.com/users/hangg7/followers", "following_url": "https://api.github.com/users/hangg7/following{/other_user}", "gists_url": "https://api.github.com/users/hangg7/gists{/gist_id}", "starred_url": "https://api.github.com/users/hangg7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hangg7/subscriptions", "organizations_url": "https://api.github.com/users/hangg7/orgs", "repos_url": "https://api.github.com/users/hangg7/repos", "events_url": "https://api.github.com/users/hangg7/events{/privacy}", "received_events_url": "https://api.github.com/users/hangg7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-03-23T05:06:26Z", "updated_at": "2021-06-19T11:38:45Z", "closed_at": "2021-06-19T11:38:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\nThe current CUDA implementation of _C.point_face_dist_forward will fail <s>for small triangles</s> unexpectedly. I thought it was failing because of the small triangles that was being query, but further testing suggests it is not the case.\r\n\r\n## Instructions To Reproduce the Issue:\r\nTo fully explain what I mean and to reproduce it, please see the minimal script below:\r\n\r\n```python\r\nimport torch\r\nfrom pytorch3d import _C\r\n\r\n\r\ndef _test_point_face_dist_forward():\r\n    device = 'cuda'\r\n    pts = torch.tensor([-1.0, -1.0, -1.0], dtype=torch.float32, device=device)\r\n    # instaniate a small triangle.\r\n    # this triangle will fail the test.\r\n    tris = torch.tensor(\r\n        [\r\n            [-0.1630, -0.6029, 0.1093],\r\n            [-0.1633, -0.6029, 0.1095],\r\n            [-0.1641, -0.6041, 0.1075],\r\n        ],\r\n        device=device,\r\n    )\r\n    # yet this one will not.\r\n    #  tris = torch.tensor(\r\n    #      [\r\n    #          [-0.1616, -0.1020, -0.5773],\r\n    #          [-0.1637, -0.1023, -0.5774],\r\n    #          [-0.1635, -0.1008, -0.5773],\r\n    #      ],\r\n    #      device=device,\r\n    #  )\r\n    pts_first_idx = torch.tensor([0], dtype=torch.int64, device=device)\r\n    tris_first_idx = torch.tensor([0], dtype=torch.int64, device=device)\r\n    max_pts = 1\r\n\r\n    # ground-truth squared distance for testing.\r\n    dists = _point_to_tri_distance(pts, tris)\r\n    # squared distance from CUDA implementation.\r\n    dists_ = _C.point_face_dist_forward(\r\n        pts[None], pts_first_idx, tris[None], tris_first_idx, max_pts\r\n    )[0]\r\n\r\n    print(dists, dists_)  # 2.0820, 0.1138\r\n    assert torch.allclose(dists, dists_)  # AssertionError thrown.\r\n\r\n\r\n# untouched utils from TestPointMeshDistance (https://github.com/facebookresearch/pytorch3d/blob/327bd2b9762c05ec7a6f74c2ec1e46f2a764e326/tests/test_point_mesh_distance.py#L13) to provide ground-truth point-face distance.\r\n\r\n# COPY STARTS HERE.\r\ndef _point_to_bary(point: torch.Tensor, tri: torch.Tensor) -> torch.Tensor:\r\n    \"\"\"\r\n    Computes the barycentric coordinates of point wrt triangle (tri)\r\n    Note that point needs to live in the space spanned by tri = (a, b, c),\r\n    i.e. by taking the projection of an arbitrary point on the space spanned by\r\n    tri Args:\r\n        point: FloatTensor of shape (3)\r\n        tri: FloatTensor of shape (3, 3)\r\n    Returns:\r\n        bary: FloatTensor of shape (3)\r\n    \"\"\"\r\n    assert point.dim() == 1 and point.shape[0] == 3\r\n    assert tri.dim() == 2 and tri.shape[0] == 3 and tri.shape[1] == 3\r\n\r\n    a, b, c = tri.unbind(0)\r\n\r\n    v0 = b - a\r\n    v1 = c - a\r\n    v2 = point - a\r\n\r\n    d00 = v0.dot(v0)\r\n    d01 = v0.dot(v1)\r\n    d11 = v1.dot(v1)\r\n    d20 = v2.dot(v0)\r\n    d21 = v2.dot(v1)\r\n\r\n    denom = d00 * d11 - d01 * d01\r\n    s2 = (d11 * d20 - d01 * d21) / denom\r\n    s3 = (d00 * d21 - d01 * d20) / denom\r\n    s1 = 1.0 - s2 - s3\r\n\r\n    bary = torch.tensor([s1, s2, s3])\r\n    return bary\r\n\r\n\r\ndef _is_inside_triangle(point: torch.Tensor, tri: torch.Tensor) -> torch.Tensor:\r\n    \"\"\"\r\n    Computes whether point is inside triangle tri\r\n    Note that point needs to live in the space spanned by tri = (a, b, c)\r\n    i.e. by taking the projection of an arbitrary point on the space spanned by\r\n    tri Args:\r\n        point: FloatTensor of shape (3)\r\n        tri: FloatTensor of shape (3, 3)\r\n    Returns:\r\n        inside: BoolTensor of shape (1)\r\n    \"\"\"\r\n    bary = _point_to_bary(point, tri)\r\n    inside = ((bary >= 0.0) * (bary <= 1.0)).all()\r\n    return inside\r\n\r\n\r\ndef _point_to_edge_distance(\r\n    point: torch.Tensor, edge: torch.Tensor\r\n) -> torch.Tensor:\r\n    \"\"\"\r\n    Computes the squared euclidean distance of points to edges\r\n    Args:\r\n        point: FloatTensor of shape (3)\r\n        edge: FloatTensor of shape (2, 3)\r\n    Returns:\r\n        dist: FloatTensor of shape (1)\r\n    If a, b are the start and end points of the segments, we\r\n    parametrize a point p as\r\n        x(t) = a + t * (b - a)\r\n    To find t which describes p we minimize (x(t) - p) ^ 2\r\n    Note that p does not need to live in the space spanned by (a, b)\r\n    \"\"\"\r\n    s0, s1 = edge.unbind(0)\r\n\r\n    s01 = s1 - s0\r\n    norm_s01 = s01.dot(s01)\r\n\r\n    same_edge = norm_s01 < 1e-8\r\n    if same_edge:\r\n        dist = 0.5 * (point - s0).dot(point - s0) + 0.5 * (point - s1).dot(\r\n            point - s1\r\n        )\r\n        return dist\r\n\r\n    t = s01.dot(point - s0) / norm_s01\r\n    t = torch.clamp(t, min=0.0, max=1.0)\r\n    x = s0 + t * s01\r\n    dist = (x - point).dot(x - point)\r\n    return dist\r\n\r\n\r\ndef _point_to_tri_distance(\r\n    point: torch.Tensor, tri: torch.Tensor\r\n) -> torch.Tensor:\r\n    \"\"\"\r\n    Computes the squared euclidean distance of points to edges\r\n    Args:\r\n        point: FloatTensor of shape (3)\r\n        tri: FloatTensor of shape (3, 3)\r\n    Returns:\r\n        dist: FloatTensor of shape (1)\r\n    \"\"\"\r\n    a, b, c = tri.unbind(0)\r\n    cross = torch.cross(b - a, c - a)\r\n    norm = cross.norm()\r\n    normal = torch.nn.functional.normalize(cross, dim=0)\r\n\r\n    # p0 is the projection of p onto the plane spanned by (a, b, c)\r\n    # p0 = p + tt * normal, s.t. (p0 - a) is orthogonal to normal\r\n    # => tt = dot(a - p, n)\r\n    tt = normal.dot(a) - normal.dot(point)\r\n    p0 = point + tt * normal\r\n    dist_p = tt * tt\r\n\r\n    # Compute the distance of p to all edge segments\r\n    e01_dist = _point_to_edge_distance(point, tri[[0, 1]])\r\n    e02_dist = _point_to_edge_distance(point, tri[[0, 2]])\r\n    e12_dist = _point_to_edge_distance(point, tri[[1, 2]])\r\n\r\n    with torch.no_grad():\r\n        inside_tri = _is_inside_triangle(p0, tri)\r\n\r\n    if inside_tri and (norm > 1e-8):\r\n        return dist_p\r\n    else:\r\n        if e01_dist.le(e02_dist) and e01_dist.le(e12_dist):\r\n            return e01_dist\r\n        elif e02_dist.le(e01_dist) and e02_dist.le(e12_dist):\r\n            return e02_dist\r\n        else:\r\n            return e12_dist\r\n\r\n\r\n# COPY ENDS HERE.\r\n\r\n_test_point_face_dist_forward()\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/613/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/613/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/568", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/568/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/568/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/568/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/568", "id": 813214164, "node_id": "MDU6SXNzdWU4MTMyMTQxNjQ=", "number": 568, "title": "Unexpected behavior when adjusting image_size in raster_settings", "user": {"login": "cmis91", "id": 9816523, "node_id": "MDQ6VXNlcjk4MTY1MjM=", "avatar_url": "https://avatars.githubusercontent.com/u/9816523?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmis91", "html_url": "https://github.com/cmis91", "followers_url": "https://api.github.com/users/cmis91/followers", "following_url": "https://api.github.com/users/cmis91/following{/other_user}", "gists_url": "https://api.github.com/users/cmis91/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmis91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmis91/subscriptions", "organizations_url": "https://api.github.com/users/cmis91/orgs", "repos_url": "https://api.github.com/users/cmis91/repos", "events_url": "https://api.github.com/users/cmis91/events{/privacy}", "received_events_url": "https://api.github.com/users/cmis91/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2021-02-22T07:23:33Z", "updated_at": "2021-02-27T01:52:08Z", "closed_at": "2021-02-25T18:06:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is related to #482. I used the codes by @gkioxari and 3d teapot data in that post. The only change was the image_size in raster_settings to test out non-square rendering in the recent release. \r\nWhen image_size was (600,1200), I got the following rendered image: \r\n![image](https://user-images.githubusercontent.com/9816523/108675066-2128b180-749b-11eb-98d5-d8aa1c047647.png)\r\nHowever, after I changed image_size to (600,1199), the rendered image was \r\n![image](https://user-images.githubusercontent.com/9816523/108675179-474e5180-749b-11eb-9c27-6d3584b2ec6a.png)\r\nSomehow, the aspect ratio 2 is serving as a hard-coded threshold to decide whether stretch out the image during the rendering. \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/568/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/551", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/551/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/551/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/551/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/551", "id": 800935432, "node_id": "MDU6SXNzdWU4MDA5MzU0MzI=", "number": 551, "title": "Bug in 'cotcurv' mesh_laplacian_smoothing", "user": {"login": "shubham-goel", "id": 11925282, "node_id": "MDQ6VXNlcjExOTI1Mjgy", "avatar_url": "https://avatars.githubusercontent.com/u/11925282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shubham-goel", "html_url": "https://github.com/shubham-goel", "followers_url": "https://api.github.com/users/shubham-goel/followers", "following_url": "https://api.github.com/users/shubham-goel/following{/other_user}", "gists_url": "https://api.github.com/users/shubham-goel/gists{/gist_id}", "starred_url": "https://api.github.com/users/shubham-goel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shubham-goel/subscriptions", "organizations_url": "https://api.github.com/users/shubham-goel/orgs", "repos_url": "https://api.github.com/users/shubham-goel/repos", "events_url": "https://api.github.com/users/shubham-goel/events{/privacy}", "received_events_url": "https://api.github.com/users/shubham-goel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-02-04T05:06:50Z", "updated_at": "2021-02-11T05:23:25Z", "closed_at": "2021-02-11T05:23:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\nThe `cotcurv` method of the `mesh_laplacian_smoothing` function is supposed to compute loss as:\r\n`\\sum_j w_ij(u_j - u_i) / (4 A[i])`\r\nwhere `w_ij = (cot a_ij + cot b_ij)` following reference [1] in the [docs](https://github.com/facebookresearch/pytorch3d/blob/master/pytorch3d/loss/mesh_laplacian_smoothing.py#L9-L83). \r\n\r\nHowever, the implementation does not follow this, and computes loss as:\r\n`(\\sum_j (w_ij u_j) - u_i) / (4 A[i])` https://github.com/facebookresearch/pytorch3d/blob/cd9786e787386c185ef915b3983c5d2861a32907/pytorch3d/loss/mesh_laplacian_smoothing.py#L120\r\n \r\nThese two aren't equivalent as `\\sum_j w_ij` doesn't sum-up to 1. \r\n\r\n\r\n## Instructions To Reproduce the Issue:\r\nThe effect of this bug is evident when you compute the cotcurv laplacian loss for ico-spheres of different levels. Since the 'cotcurv' laplacian is supposed to capture mean curvature, we expect the laplacian loss to be the same at different level ico-spheres. However, that's not the case:\r\n```python\r\nfor i in range(5):\r\n    print(mesh_laplacian_smoothing(ico_sphere(i), 'cotcurv'))\r\n\r\n# Output:\r\n# tensor(0.1652)\r\n# tensor(1.3907)\r\n# tensor(6.1977)\r\n# tensor(25.4255)\r\n# tensor(102.4149)\r\n```\r\n\r\nThe implementation can be fixed as:\r\n```python\r\nL_sum = torch.sparse.sum(L, dim=1).to_dense().view(-1, 1)\r\nloss = (L.mm(verts_packed) - L_sum*verts_packed) * norm_w\r\n```\r\nOnce fixed, the cotcurv laplacian loss remains same across different ico_sphere levels:\r\n```python\r\nfor i in range(5):\r\n    print(mesh_laplacian_smoothing(ico_sphere(i), 'cotcurv'))\r\n\r\n# Output:\r\n# tensor(0.3333)\r\n# tensor(0.3354)\r\n# tensor(0.3341)\r\n# tensor(0.3335)\r\n# tensor(0.3334)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/551/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/551/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/550", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/550/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/550/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/550/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/550", "id": 800388480, "node_id": "MDU6SXNzdWU4MDAzODg0ODA=", "number": 550, "title": "Shape broadcast bug in blending", "user": {"login": "elliottwu", "id": 15921740, "node_id": "MDQ6VXNlcjE1OTIxNzQw", "avatar_url": "https://avatars.githubusercontent.com/u/15921740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottwu", "html_url": "https://github.com/elliottwu", "followers_url": "https://api.github.com/users/elliottwu/followers", "following_url": "https://api.github.com/users/elliottwu/following{/other_user}", "gists_url": "https://api.github.com/users/elliottwu/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottwu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottwu/subscriptions", "organizations_url": "https://api.github.com/users/elliottwu/orgs", "repos_url": "https://api.github.com/users/elliottwu/repos", "events_url": "https://api.github.com/users/elliottwu/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottwu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-02-03T14:35:07Z", "updated_at": "2021-06-14T19:11:04Z", "closed_at": "2021-06-14T19:11:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/facebookresearch/pytorch3d/blob/51de308b808ba28096d72ccd3f7c1019da4dea74/pytorch3d/renderer/blending.py#L188\r\n\r\nThis raises shape mismatch errors with batched cameras when the shape of `zfar` and `znear` is `(N,)` while the shape of `fragments.zbuf` and `mask` is `(N, H, W, K)`. ", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/550/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/550/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/381", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/381/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/381/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/381/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/381", "id": 712777660, "node_id": "MDU6SXNzdWU3MTI3Nzc2NjA=", "number": 381, "title": "Rendering ShapeNet Objects with Multiple Textures -- Issue with Loading Atlas", "user": {"login": "b7leung", "id": 20059131, "node_id": "MDQ6VXNlcjIwMDU5MTMx", "avatar_url": "https://avatars.githubusercontent.com/u/20059131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b7leung", "html_url": "https://github.com/b7leung", "followers_url": "https://api.github.com/users/b7leung/followers", "following_url": "https://api.github.com/users/b7leung/following{/other_user}", "gists_url": "https://api.github.com/users/b7leung/gists{/gist_id}", "starred_url": "https://api.github.com/users/b7leung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b7leung/subscriptions", "organizations_url": "https://api.github.com/users/b7leung/orgs", "repos_url": "https://api.github.com/users/b7leung/repos", "events_url": "https://api.github.com/users/b7leung/events{/privacy}", "received_events_url": "https://api.github.com/users/b7leung/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-10-01T12:03:45Z", "updated_at": "2020-10-07T22:26:08Z", "closed_at": "2020-10-07T22:26:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "\r\n## \ud83d\udc1b Bugs / Unexpected behaviors\r\n<!-- A clear and concise description of the issue -->\r\n\r\nIs it possible to render objects with multiple textures? I wasn't sure if #79 indicated this feature has been implemented yet or not. Otherwise, this is either a bug, or I am doing things wrong. When I try loading a shapenet mesh with textures, I get the following error: \r\n\r\n\"ValueError: Expected atlas to be a list of tensors of shape (F, R, R, D) with the same value of R.\"\r\n\r\nThis is because aux.texture_atlas returns None for some reason. This issue doesn't show up when I try to open the cow .obj in the examples.\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\nI am using the .obj and .mtl from a shapenet chair:\r\n\r\n[f9cdefd31b167f95e8f8c11a24c52ebb.zip](https://github.com/facebookresearch/pytorch3d/files/5311728/f9cdefd31b167f95e8f8c11a24c52ebb.zip)\r\n\r\nWhen opened in meshlab, we can see that some of the parts have texture (they're red).\r\n![SNAG-0002](https://user-images.githubusercontent.com/20059131/94806372-b15a4300-03a2-11eb-8939-80455b7ace62.png)\r\n\r\nThen, the code I'm using to try and load a mesh for rendering is:\r\n```\r\nfrom pytorch3d.io import load_obj\r\nfrom pytorch3d.renderer.mesh import TexturesAtlas\r\nfrom pytorch3d.structures.meshes import Meshes\r\n\r\nmesh_path = \"f9cdefd31b167f95e8f8c11a24c52ebb/model.obj\"\r\nverts, faces, aux = load_obj(mesh_path, load_textures=True, create_texture_atlas=True)\r\nmesh = Meshes(\r\n    verts=[verts],\r\n    faces=[faces.verts_idx],\r\n    textures=TexturesAtlas(atlas=[aux.texture_atlas]),\r\n)\r\n```\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/381/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/381/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/363", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/363/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/363/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/363/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/363", "id": 702407360, "node_id": "MDU6SXNzdWU3MDI0MDczNjA=", "number": 363, "title": ".ply loading is broken for files with additional point properties", "user": {"login": "classner", "id": 731387, "node_id": "MDQ6VXNlcjczMTM4Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/731387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/classner", "html_url": "https://github.com/classner", "followers_url": "https://api.github.com/users/classner/followers", "following_url": "https://api.github.com/users/classner/following{/other_user}", "gists_url": "https://api.github.com/users/classner/gists{/gist_id}", "starred_url": "https://api.github.com/users/classner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/classner/subscriptions", "organizations_url": "https://api.github.com/users/classner/orgs", "repos_url": "https://api.github.com/users/classner/repos", "events_url": "https://api.github.com/users/classner/events{/privacy}", "received_events_url": "https://api.github.com/users/classner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284751, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzUx", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-09-16T02:56:40Z", "updated_at": "2021-04-23T07:39:06Z", "closed_at": "2021-01-22T00:02:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\n\r\n.ply files with additional point properties can't be loaded with the `load_ply` function.\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\nConsider a file with the following header:\r\n\r\n```\r\nply\r\nformat ascii 1.0\r\nelement vertex 1\r\nproperty float x\r\nproperty float y\r\nproperty float z\r\nproperty uchar red\r\nproperty uchar green\r\nproperty uchar blue\r\nend_header\r\n0.0 0.0 0.0 0 0 0\r\n```\r\n\r\nThis will trigger the ValueError at https://github.com/facebookresearch/pytorch3d/blob/61121b9f2ce29601406d470468abffe2fb76057f/pytorch3d/io/ply_io.py#L656, even though this is a perfectly valid point according to spec and header. This goes for binary as well as ascii formats. The parsing of the points works in the first place, but this ValueError prevents successful completion of the method.\r\n\r\nIt's another question on how additional properties should be handled. I think it would be fair to emit a warning and drop them if PyTorch3D doesn't want to support them; or they could be returned in an additional dictionary[str, torch.Tensor] with one entry per property or similar.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/363/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/351", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/351/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/351/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/351/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/351", "id": 696529681, "node_id": "MDU6SXNzdWU2OTY1Mjk2ODE=", "number": 351, "title": "Seems to find a simple bug in a class PointLights.", "user": {"login": "WonwoongCho", "id": 20943085, "node_id": "MDQ6VXNlcjIwOTQzMDg1", "avatar_url": "https://avatars.githubusercontent.com/u/20943085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WonwoongCho", "html_url": "https://github.com/WonwoongCho", "followers_url": "https://api.github.com/users/WonwoongCho/followers", "following_url": "https://api.github.com/users/WonwoongCho/following{/other_user}", "gists_url": "https://api.github.com/users/WonwoongCho/gists{/gist_id}", "starred_url": "https://api.github.com/users/WonwoongCho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WonwoongCho/subscriptions", "organizations_url": "https://api.github.com/users/WonwoongCho/orgs", "repos_url": "https://api.github.com/users/WonwoongCho/repos", "events_url": "https://api.github.com/users/WonwoongCho/events{/privacy}", "received_events_url": "https://api.github.com/users/WonwoongCho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-09-09T07:32:25Z", "updated_at": "2020-12-09T17:28:44Z", "closed_at": "2020-09-11T08:32:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "If you do not know the root cause of the problem / bug, and wish someone to help you, please\r\npost according to this template:\r\n\r\n## \ud83d\udc1b Bugs / Unexpected behaviors\r\n<!-- A clear and concise description of the issue -->\r\nWhile doing my research, I just found out an unexpected bug in a light module. The reason was very simple, so if it is unexpected behavior, please update the code.\r\n\r\nTo elaborate,I was doing a batch process, so that all the input tensor of the light class were size of (B, 3). e.g., location=(B,3)\r\nThe problem that I encountered was caused by mismatched dimensions within normals and direction at line 67 in a script named lighting.py. After some struggles, I just noticed that it comes from an unexpected broadcasting when obtaining a direction vector (at line 263 in the lighting script). For the better understanding on my words, please refer to the picture below.\r\n\r\n![Screen Shot 2020-09-09 at 3 25 12 PM](https://user-images.githubusercontent.com/20943085/92564308-e7c90480-f2b3-11ea-902e-891b87a52f4b.png)\r\n\r\nAs can be seen in the bottom of the above picture, the third dimension (from zero) of the direction vector has a size of 64, which seems to be an unanticipated one.\r\n\r\n As an ad hoc way to settle, I just put the location vector of size (B,1,1,1,3), and this results in a direction vector of which size is (B,H,W,1,3).\r\n\r\nIf it is an unintended behavior, please update this.\r\nThank you! \r\n\r\nNOTE: Please look at the existing list of Issues tagged with the label ['bug`](https://github.com/facebookresearch/pytorch3d/issues?q=label%3Abug). **Only open a new issue if this bug has not already been reported. If an issue already exists, please comment there instead.**.\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\nPlease include the following (depending on what the issue is):\r\n\r\n1. Any changes you made (`git diff`) or code you wrote\r\n```\r\nPointLights(location=(l_param[:,:3].reshape(l_param.size(0),1,1,1,3)))\r\n```\r\n2. The exact command(s) you ran:\r\n3. What you observed (including the full logs):\r\n```\r\n  File \"/home/workspace/_3Dface.py\", line 129, in forward\r\n    self.rendering(id_param, exp_param, textures, angles, translation, img)\r\n  File \"/home/workspace/_3Dface.py\", line 183, in rendering\r\n    projected_img = self.phong_renderer(meshes_world=mesh, cameras=self.camera)\r\n  File \"/opt/conda/envs/3d/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/opt/conda/envs/3d/lib/python3.7/site-packages/pytorch3d/renderer/mesh/renderer.py\", line 49, in forward\r\n    images = self.shader(fragments, meshes_world, **kwargs)\r\n  File \"/opt/conda/envs/3d/lib/python3.7/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/opt/conda/envs/3d/lib/python3.7/site-packages/pytorch3d/renderer/mesh/shader.py\", line 70, in forward\r\n    materials=materials,\r\n  File \"/opt/conda/envs/3d/lib/python3.7/site-packages/pytorch3d/renderer/mesh/shading.py\", line 81, in phong_shading\r\n    pixel_coords, pixel_normals, lights, cameras, materials\r\n  File \"/opt/conda/envs/3d/lib/python3.7/site-packages/pytorch3d/renderer/mesh/shading.py\", line 28, in _apply_lighting\r\n    light_diffuse = lights.diffuse(normals=normals, points=points)\r\n  File \"/opt/conda/envs/3d/lib/python3.7/site-packages/pytorch3d/renderer/lighting.py\", line 265, in diffuse\r\n    return diffuse(normals=normals, color=self.diffuse_color, direction=direction)\r\n  File \"/opt/conda/envs/3d/lib/python3.7/site-packages/pytorch3d/renderer/lighting.py\", line 67, in diffuse\r\n    angle = F.relu(torch.sum(normals * direction, dim=-1))\r\nRuntimeError: The size of tensor a (64) must match the size of tensor b (268435456) at non-singleton dimension \r\n```\r\n\r\nPlease also simplify the steps as much as possible so they do not require additional resources to\r\n\t run, such as a private dataset.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/351/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/350", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/350/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/350/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/350/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/350", "id": 696235440, "node_id": "MDU6SXNzdWU2OTYyMzU0NDA=", "number": 350, "title": "transofrm3d gives weird Rotation matrix for some angles ", "user": {"login": "ajhamdi", "id": 26301932, "node_id": "MDQ6VXNlcjI2MzAxOTMy", "avatar_url": "https://avatars.githubusercontent.com/u/26301932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajhamdi", "html_url": "https://github.com/ajhamdi", "followers_url": "https://api.github.com/users/ajhamdi/followers", "following_url": "https://api.github.com/users/ajhamdi/following{/other_user}", "gists_url": "https://api.github.com/users/ajhamdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajhamdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajhamdi/subscriptions", "organizations_url": "https://api.github.com/users/ajhamdi/orgs", "repos_url": "https://api.github.com/users/ajhamdi/repos", "events_url": "https://api.github.com/users/ajhamdi/events{/privacy}", "received_events_url": "https://api.github.com/users/ajhamdi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-09-08T22:42:28Z", "updated_at": "2020-09-21T12:38:11Z", "closed_at": "2020-09-21T12:37:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\n\r\nWhen running the following minimal code:\r\n```python\r\nimport numpy as np\r\nfrom pytorch3d.renderer import ( look_at_view_transform, look_at_rotation, MeshRenderer, MeshRasterizer, BlendParams,\r\n, HardPhongShader, PointLights, SoftPhongShader)\r\n\r\nR, T = look_at_view_transform(dist=2.2, elev=torch.from_numpy(np.array([-35,35,35]))\r\n, azim=torch.from_numpy(np.array([-60,60,180])))\r\ncameras = OpenGLPerspectiveCameras(device=\"cpu\", R=R, T=T)\r\n\r\ncameras.get_camera_center() \r\n```\r\n\r\n I get the following error \r\n\r\n```\r\n/home/hamdiaj/anaconda3/envs/mytorch3d/lib/python3.7/site-packages/pytorch3d/transforms/transform3d.py:706: UserWarning: R is not a valid rotation matrix\r\n  warnings.warn(msg)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/hamdiaj/anaconda3/envs/mytorch3d/lib/python3.7/site-packages/pytorch3d/renderer/cameras.py\", line 123, in get_camera_center\r\n    P = w2v_trans.inverse().get_matrix()\r\n  File \"/home/hamdiaj/anaconda3/envs/mytorch3d/lib/python3.7/site-packages/pytorch3d/transforms/transform3d.py\", line 253, in inverse\r\n    i_matrix = self._get_matrix_inverse()\r\n  File \"/home/hamdiaj/anaconda3/envs/mytorch3d/lib/python3.7/site-packages/pytorch3d/transforms/transform3d.py\", line 223, in _get_matrix_inverse\r\n    return torch.inverse(self._matrix)\r\nRuntimeError: inverse_cpu: For batch 0: U(1,1) is zero, singular U.\r\n\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/350/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/348", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/348/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/348/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/348/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/348", "id": 695659953, "node_id": "MDU6SXNzdWU2OTU2NTk5NTM=", "number": 348, "title": "Unexpected rendering result wrt to the object's distance to the camera", "user": {"login": "unlugi", "id": 15035152, "node_id": "MDQ6VXNlcjE1MDM1MTUy", "avatar_url": "https://avatars.githubusercontent.com/u/15035152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unlugi", "html_url": "https://github.com/unlugi", "followers_url": "https://api.github.com/users/unlugi/followers", "following_url": "https://api.github.com/users/unlugi/following{/other_user}", "gists_url": "https://api.github.com/users/unlugi/gists{/gist_id}", "starred_url": "https://api.github.com/users/unlugi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unlugi/subscriptions", "organizations_url": "https://api.github.com/users/unlugi/orgs", "repos_url": "https://api.github.com/users/unlugi/repos", "events_url": "https://api.github.com/users/unlugi/events{/privacy}", "received_events_url": "https://api.github.com/users/unlugi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-09-08T08:16:11Z", "updated_at": "2022-08-01T19:51:35Z", "closed_at": "2020-09-12T10:53:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "First of all, thank you for the great library!\r\n\r\nI'm using Pytorch3D (nightly build 0.2.0 on Ubuntu 16.04) to render some models from the ShapeNet dataset. I noticed that the rendering result changes when I change the distance of the camera to the object. You can find the code, sample results and the .obj file below. (Note: I have implemented a custom shader called SoftFlatShader which is flat_shading followed by softmax blending: you can also find it below.)\r\n\r\n`\r\nimport os\r\nimport torch\r\nimport torch.nn as nn\r\nfrom skimage.io import imread, imsave\r\n\r\nfrom pytorch3d.io import load_objs_as_meshes\r\nfrom pytorch3d.io import load_obj\r\nfrom pytorch3d.structures import Meshes\r\nfrom pytorch3d.renderer import Textures\r\nfrom pytorch3d.renderer import ( \r\n    look_at_view_transform,\r\n    FoVPerspectiveCameras,\r\n    PerspectiveCameras,\r\n    PointLights,\r\n    DirectionalLights,\r\n    Materials,\r\n    RasterizationSettings,\r\n    MeshRenderer,\r\n    MeshRasterizer,\r\n    SoftPhongShader,\r\n    HardPhongShader,\r\n    HardFlatShader,\r\n    SoftSilhouetteShader,\r\n    SoftGouraudShader,\r\n    HardGouraudShader,\r\n    BlendParams,\r\n    softmax_rgb_blend\r\n)\r\n\r\nfrom pytorch3d.renderer.mesh.shading import flat_shading\r\n\r\nclass SoftFlatShader(nn.Module):\r\n\r\n    def __init__(\r\n        self, device=\"cpu\", cameras=None, lights=None, materials=None, blend_params=None):\r\n        super().__init__()\r\n        self.lights = lights if lights is not None else PointLights(device=device)\r\n        self.materials = (\r\n            materials if materials is not None else Materials(device=device)\r\n        )\r\n        self.cameras = cameras\r\n        self.blend_params = blend_params if blend_params is not None else BlendParams()\r\n\r\n    def forward(self, fragments, meshes, **kwargs) -> torch.Tensor:\r\n        cameras = kwargs.get(\"cameras\", self.cameras)\r\n        if cameras is None:\r\n            msg = \"Cameras must be specified either at initialization \\\r\n                or in the forward pass of HardFlatShader\"\r\n            raise ValueError(msg)\r\n        texels = meshes.sample_textures(fragments)\r\n        lights = kwargs.get(\"lights\", self.lights)\r\n        materials = kwargs.get(\"materials\", self.materials)\r\n        blend_params = kwargs.get(\"blend_params\", self.blend_params)\r\n        colors = flat_shading(\r\n            meshes=meshes,\r\n            fragments=fragments,\r\n            texels=texels,\r\n            lights=lights,\r\n            cameras=cameras,\r\n            materials=materials,\r\n        )\r\n        images = softmax_rgb_blend(colors, fragments, blend_params)\r\n        return images\r\n\r\n\r\ndef load_untextured_mesh(mesh_path, device):\r\n\r\n    verts, faces_idx, _ = load_obj(mesh_path, device=device)\r\n    faces = faces_idx.verts_idx\r\n    # Initialize each vertex to be white in color\r\n    verts_rgb = torch.ones_like(verts)[None]\r\n    textures = Textures(verts_rgb=verts_rgb.to(device))\r\n    mesh_no_texture = Meshes(verts=[verts.to(device)],\r\n                             faces=[faces.to(device)],\r\n                             textures=textures)\r\n    return  mesh_no_texture\r\n\r\ndef render_mesh(mesh, R, T, device, img_size=512):\r\n\r\n    cameras = FoVPerspectiveCameras(device=device, R=R, T=T, degrees=False, fov=0.7)\r\n    # cameras = PerspectiveCameras(device=device, R=R, T=T, focal_length=0.7)\r\n    raster_settings = RasterizationSettings(image_size=img_size,\r\n                                            blur_radius=0.0,\r\n                                            faces_per_pixel=1)\r\n\r\n    lights = PointLights(device=device, location=cameras.get_camera_center())\r\n\r\n    renderer = MeshRenderer(rasterizer=MeshRasterizer(cameras=cameras,\r\n                                                      raster_settings=raster_settings),\r\n                            shader=SoftFlatShader(device=device,\r\n                                                   cameras=cameras,\r\n                                                   lights=lights\r\n                                                  )\r\n                            )\r\n    images = renderer(mesh)\r\n    return images\r\n\r\ndef render_depth(mesh, R, T, device, img_size=512):\r\n\r\n    cameras = FoVPerspectiveCameras(device=device, R=R, T=T, degrees=False, fov=0.7)\r\n    raster_settings = RasterizationSettings(image_size=img_size,\r\n                                            blur_radius=0.0,\r\n                                            faces_per_pixel=1)\r\n\r\n    rasterizer = MeshRasterizer(cameras=cameras, raster_settings=raster_settings)\r\n    rasterizer_output = rasterizer(mesh)\r\n    return rasterizer_output\r\n\r\n\r\nif __name__ == \"__main__\":\r\n\r\n    if torch.cuda.is_available():\r\n        device = torch.device(\"cuda:0\")\r\n        torch.cuda.set_device(device)\r\n    else:\r\n        device = torch.device(\"cpu\")\r\n\r\n    # Set paths\r\n    DATA_DIR = \"./data\"\r\n    obj_file_name = os.path.join(DATA_DIR, \"model_normalized.obj\")\r\n    dist_to_cam = 1 # change between 0.6 and 1 to see the results\r\n\r\n    with torch.no_grad():\r\n        mesh = load_untextured_mesh(obj_file_name, device)\r\n        R, T = look_at_view_transform(dist=dist_to_cam , elev=0, azim=180)\r\n        rendered_image = render_mesh(mesh, R, T, device)\r\n        rendered_depth = render_depth(mesh, R, T, device)\r\n\r\n    imsave(os.path.join(DATA_DIR, \"renderedCar.png\"), rendered_image[0, ..., :3].cpu().numpy())\r\n    imsave(os.path.join(DATA_DIR,\"depthCar.png\"), rendered_depth[1][0, ..., 0].cpu().numpy())\r\n`\r\n\r\nWhen the dist_to_cam parameter is 1, the rendering result is weird(white rectangle on the windshield). I was wondering why this happens?\r\n![renderedCar](https://user-images.githubusercontent.com/15035152/92449775-73f30300-f1b2-11ea-8a28-c16daeded949.png)\r\n![depthCar](https://user-images.githubusercontent.com/15035152/92449861-9127d180-f1b2-11ea-9c61-721e2e855d3f.png)\r\n\r\nThis is the output for dist_to_cam=0.6:\r\n![renderedCar-close](https://user-images.githubusercontent.com/15035152/92449966-bd435280-f1b2-11ea-9b62-604f66091acf.png)\r\n![depthCar-close](https://user-images.githubusercontent.com/15035152/92449976-c0d6d980-f1b2-11ea-99ab-240376c24383.png)\r\n\r\nThis is the model file: \r\n[model_normalized.zip](https://github.com/facebookresearch/pytorch3d/files/5186990/model_normalized.zip)\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/348/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/348/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/345", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/345/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/345/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/345/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/345", "id": 693003016, "node_id": "MDU6SXNzdWU2OTMwMDMwMTY=", "number": 345, "title": "Mesh faces with some of the vertices behind the camera are not being rendered by MeshRasterizer", "user": {"login": "vevenom", "id": 9026494, "node_id": "MDQ6VXNlcjkwMjY0OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9026494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vevenom", "html_url": "https://github.com/vevenom", "followers_url": "https://api.github.com/users/vevenom/followers", "following_url": "https://api.github.com/users/vevenom/following{/other_user}", "gists_url": "https://api.github.com/users/vevenom/gists{/gist_id}", "starred_url": "https://api.github.com/users/vevenom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vevenom/subscriptions", "organizations_url": "https://api.github.com/users/vevenom/orgs", "repos_url": "https://api.github.com/users/vevenom/repos", "events_url": "https://api.github.com/users/vevenom/events{/privacy}", "received_events_url": "https://api.github.com/users/vevenom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "sbranson", "id": 279661, "node_id": "MDQ6VXNlcjI3OTY2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/279661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sbranson", "html_url": "https://github.com/sbranson", "followers_url": "https://api.github.com/users/sbranson/followers", "following_url": "https://api.github.com/users/sbranson/following{/other_user}", "gists_url": "https://api.github.com/users/sbranson/gists{/gist_id}", "starred_url": "https://api.github.com/users/sbranson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sbranson/subscriptions", "organizations_url": "https://api.github.com/users/sbranson/orgs", "repos_url": "https://api.github.com/users/sbranson/repos", "events_url": "https://api.github.com/users/sbranson/events{/privacy}", "received_events_url": "https://api.github.com/users/sbranson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sbranson", "id": 279661, "node_id": "MDQ6VXNlcjI3OTY2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/279661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sbranson", "html_url": "https://github.com/sbranson", "followers_url": "https://api.github.com/users/sbranson/followers", "following_url": "https://api.github.com/users/sbranson/following{/other_user}", "gists_url": "https://api.github.com/users/sbranson/gists{/gist_id}", "starred_url": "https://api.github.com/users/sbranson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sbranson/subscriptions", "organizations_url": "https://api.github.com/users/sbranson/orgs", "repos_url": "https://api.github.com/users/sbranson/repos", "events_url": "https://api.github.com/users/sbranson/events{/privacy}", "received_events_url": "https://api.github.com/users/sbranson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-09-04T10:12:38Z", "updated_at": "2021-05-27T00:33:39Z", "closed_at": "2021-05-27T00:33:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dear Pytorch3d team,\r\n\r\nFirst of all, I really appreciate your efforts on developing the really nice library. Thanks for that.\r\n\r\n###  Issue: Rendering mesh faces when some vertices are behind the camera.\r\n\r\nCurrently, the MeshRasterizer does not seem to support rendering faces for which some of the vertices are located behind the camera. According to a comment in `rasterize_meshes_python` function:\r\n\r\n> Faces with at least one vertex behind the camera won't render correctly and should be removed or clipped before calling the rasterizer\r\n\r\n**Is there some workaround for this issue? Is there maybe an easy way of clipping the faces before feeding them to the rasterizer like suggested in the comment?**\r\n\r\n### My current workaround\r\n\r\nI have tried subdividing the triangle mesh into larger number of meshes. After few iterations of these, the number of faces for individual meshes increases from 2 to 256, and the results are perfect. However, this workaround slows down the pipeline by a lot. Rendering in multi-view setting takes 0.8s compared to 0.08s before subdividing.\r\n\r\n### Motivation\r\n\r\nI believe this to be a large issue especially in room layout estimation, where planar surfaces like walls can be easily represented by a small number of triangles (typically 2) and hence the rendering pipeline should be really fast.\r\n\r\nThank you for your reply.\r\n\r\nKind regards,\r\nSinisa\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/345/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/342", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/342/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/342/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/342/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/342", "id": 689873102, "node_id": "MDU6SXNzdWU2ODk4NzMxMDI=", "number": 342, "title": "Blur rendering BUG, when I let create_texture_atlas=True and blur_radius>0", "user": {"login": "qmlu-cn", "id": 26488213, "node_id": "MDQ6VXNlcjI2NDg4MjEz", "avatar_url": "https://avatars.githubusercontent.com/u/26488213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qmlu-cn", "html_url": "https://github.com/qmlu-cn", "followers_url": "https://api.github.com/users/qmlu-cn/followers", "following_url": "https://api.github.com/users/qmlu-cn/following{/other_user}", "gists_url": "https://api.github.com/users/qmlu-cn/gists{/gist_id}", "starred_url": "https://api.github.com/users/qmlu-cn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qmlu-cn/subscriptions", "organizations_url": "https://api.github.com/users/qmlu-cn/orgs", "repos_url": "https://api.github.com/users/qmlu-cn/repos", "events_url": "https://api.github.com/users/qmlu-cn/events{/privacy}", "received_events_url": "https://api.github.com/users/qmlu-cn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-09-01T06:52:38Z", "updated_at": "2020-12-17T14:08:28Z", "closed_at": "2020-12-17T14:08:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Load obj stage**\r\n`mesh = load_objs_as_meshes(obj_path, device=args.device, create_texture_atlas=True, texture_atlas_size=4)`\r\nHere I let `create_texture_atlas=True`\r\n**Rendering stage**\r\n```\r\n       raster_settings = RasterizationSettings(\r\n            image_size=299,\r\n            blur_radius=1e-5, \r\n            faces_per_pixel=1, \r\n        )\r\n```\r\nHere I let `blur_radius>0`\r\n\r\nThen I run the code:\r\n```\r\n    mesh = load_objs_as_meshes(obj_path, device=args.device, create_texture_atlas=True, texture_atlas_size=4)\r\n    renderer = Renderer(args)\r\n    image = renderer(mesh)\r\n```\r\n## ERROR Info\r\n-sizes[i] && index < sizes[i] && \"index out of bounds\"` failed.\r\n/opt/conda/conda-bld/pytorch_1591914886554/work/aten/src/ATen/native/cuda/IndexKernel.cu:60: operator(): block: [75,0,0], thread: [20,0,0] Assertion `index >= -sizes[i] && index < sizes[i] && \"index out of bounds\"` failed.\r\n/opt/conda/conda-bld/pytorch_1591914886554/work/aten/src/ATen/native/cuda/IndexKernel.cu:60: operator(): block: [75,0,0], thread: [21,0,0] Assertion `index >= -sizes[i] && index < sizes[i] && \"index out of bounds\"` failed.\r\n/opt/conda/conda-bld/pytorch_1591914886554/work/aten/src/ATen/native/cuda/IndexKernel.cu:60: operator(): block: [75,0,0], thread: [22,0,0] Assertion `index >= -sizes[i] && index < sizes[i] && \"index out of bounds\"` failed.\r\n/opt/conda/conda-bld/pytorch_1591914886554/work/aten/src/ATen/native/cuda/IndexKernel.cu:60: operator(): block: [75,0,0], thread: [23,0,0] Assertion `index >= -sizes[i] && index < sizes[i] && \"index out of bounds\"` failed.\r\n/opt/conda/conda-bld/pytorch_1591914886554/work/aten/src/ATen/native/cuda/IndexKernel.cu:60: operator(): block: [75,0,0], thread: [24,0,0] Assertion `index >= -sizes[i] && index < sizes[i] && \"index out of bounds\"` failed.\r\nTraceback (most recent call last):\r\n  File \"/opt/data/private/lqm/adv3d/main.py\", line 132, in <module>\r\n    print_ori(['./data/cow_mesh/cow.obj'])\r\n  File \"/opt/data/private/lqm/adv3d/main.py\", line 117, in print_ori\r\n    image = renderer(mesh)\r\n  File \"/opt/data/private/lqm/adv3d/render/render.py\", line 76, in __call__\r\n    std_image = self.renderer(std_mesh)\r\n  File \"/root/anaconda3/envs/pytorch3d/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/root/anaconda3/envs/pytorch3d/lib/python3.8/site-packages/pytorch3d/renderer/mesh/renderer.py\", line 49, in forward\r\n    images = self.shader(fragments, meshes_world, **kwargs)\r\n  File \"/root/anaconda3/envs/pytorch3d/lib/python3.8/site-packages/torch/nn/modules/module.py\", line 550, in __call__\r\n    result = self.forward(*input, **kwargs)\r\n  File \"/root/anaconda3/envs/pytorch3d/lib/python3.8/site-packages/pytorch3d/renderer/mesh/shader.py\", line 112, in forward\r\n    colors = phong_shading(\r\n  File \"/root/anaconda3/envs/pytorch3d/lib/python3.8/site-packages/pytorch3d/renderer/mesh/shading.py\", line 71, in phong_shading\r\n    vertex_normals = meshes.verts_normals_packed()  # (V, 3)\r\n  File \"/root/anaconda3/envs/pytorch3d/lib/python3.8/site-packages/pytorch3d/structures/meshes.py\", line 684, in verts_normals_packed\r\n    self._compute_vertex_normals()\r\n  File \"/root/anaconda3/envs/pytorch3d/lib/python3.8/site-packages/pytorch3d/structures/meshes.py\", line 808, in _compute_vertex_normals\r\n    if self.isempty():\r\nRuntimeError: CUDA error: device-side assert triggered\r\n\r\n**In #327 , you suggest user doing `clip_barycentric_coords=True`. After I did this, the error still occured.**", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/342/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/342/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/327", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/327/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/327/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/327/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/327", "id": 681215013, "node_id": "MDU6SXNzdWU2ODEyMTUwMTM=", "number": 327, "title": "Blurred rendering bug", "user": {"login": "jhjo432", "id": 18064691, "node_id": "MDQ6VXNlcjE4MDY0Njkx", "avatar_url": "https://avatars.githubusercontent.com/u/18064691?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhjo432", "html_url": "https://github.com/jhjo432", "followers_url": "https://api.github.com/users/jhjo432/followers", "following_url": "https://api.github.com/users/jhjo432/following{/other_user}", "gists_url": "https://api.github.com/users/jhjo432/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhjo432/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhjo432/subscriptions", "organizations_url": "https://api.github.com/users/jhjo432/orgs", "repos_url": "https://api.github.com/users/jhjo432/repos", "events_url": "https://api.github.com/users/jhjo432/events{/privacy}", "received_events_url": "https://api.github.com/users/jhjo432/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-08-18T17:35:02Z", "updated_at": "2020-12-17T14:09:19Z", "closed_at": "2020-12-17T14:09:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "It seem like blurred rendering does not work in nightly build.\r\nSetting `blur_radius=0.001` causes `IndexError` or `CUDA error`.\r\n\r\n## \ud83d\udc1b Bugs / Unexpected behaviors\r\n<!-- A clear and concise description of the issue -->\r\n\r\n\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\n```\r\nimport os\r\n\r\nimport matplotlib.pyplot as plt\r\nimport pytorch3d.io\r\n\r\nimport torch\r\nfrom pytorch3d.structures import Meshes\r\nfrom pytorch3d.renderer.mesh import TexturesAtlas\r\nfrom pytorch3d.renderer import (look_at_view_transform, OpenGLPerspectiveCameras, RasterizationSettings, MeshRenderer,\r\n                                MeshRasterizer, BlendParams, SoftPhongShader, PointLights\r\n                                )\r\n\r\ndevice = torch.device('cuda:0')\r\n# device = torch.device('cpu')\r\n\r\n# load mesh\r\nbase_dir = os.path.dirname(os.path.realpath(__file__))\r\nDATA_DIR = \"data\"\r\nobj_filename = os.path.join(base_dir, DATA_DIR, \"cow_mesh/cow.obj\")\r\nverts, faces_idx, _ = pytorch3d.io.load_obj(obj_filename, load_textures=False)\r\nfaces = faces_idx.verts_idx\r\n\r\nF = faces.shape[0]\r\natlas = torch.ones(1, F, 1, 1, 3)  # (1, F, R=1, R=1, D=3) white\r\ntexture = TexturesAtlas(atlas)\r\n\r\n# create mesh with texture atlas\r\nmesh = Meshes(verts=[verts], faces=[faces], textures=texture).to(device)\r\n\r\n# renderer\r\nR, T = look_at_view_transform(5, 0, 0)\r\ncameras = OpenGLPerspectiveCameras(device=device, R=R, T=T)\r\nlights = PointLights(device=device, location=[[0.0, 0.0, -3.0]])\r\nraster_settings = RasterizationSettings(\r\n    image_size=512,\r\n    blur_radius=0.00001, # bug\r\n    faces_per_pixel=5,\r\n)\r\n\r\nblend_params = BlendParams(sigma=1e-4, gamma=1e-4, background_color=(0.0, 0.0, 0.0))\r\n\r\nrenderer_ = MeshRenderer(\r\n    rasterizer=MeshRasterizer(cameras=cameras, raster_settings=raster_settings),\r\n    shader=SoftPhongShader(device=device, cameras=cameras, lights=lights, blend_params=blend_params)\r\n)\r\nimages = renderer_(mesh, cameras=cameras)\r\n\r\ntt = images[0, ..., :].cpu().numpy()\r\n\r\nfig, ax = plt.subplots()\r\nax.imshow(tt)\r\nfig.show()\r\n\r\n```\r\n\r\nenvironment\r\n```\r\nUbuntu 20.04\r\npython 3.8\r\nconda install pytorch3d -c pytorch3d-nightly\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/327/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/327/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/326", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/326/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/326/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/326/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/326", "id": 681123985, "node_id": "MDU6SXNzdWU2ODExMjM5ODU=", "number": 326, "title": "Device mismatch in loading UV/Atlas textures", "user": {"login": "naoto0804", "id": 7067992, "node_id": "MDQ6VXNlcjcwNjc5OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/7067992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/naoto0804", "html_url": "https://github.com/naoto0804", "followers_url": "https://api.github.com/users/naoto0804/followers", "following_url": "https://api.github.com/users/naoto0804/following{/other_user}", "gists_url": "https://api.github.com/users/naoto0804/gists{/gist_id}", "starred_url": "https://api.github.com/users/naoto0804/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/naoto0804/subscriptions", "organizations_url": "https://api.github.com/users/naoto0804/orgs", "repos_url": "https://api.github.com/users/naoto0804/repos", "events_url": "https://api.github.com/users/naoto0804/events{/privacy}", "received_events_url": "https://api.github.com/users/naoto0804/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-08-18T15:15:40Z", "updated_at": "2020-09-20T17:07:18Z", "closed_at": "2020-09-17T18:08:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\n\r\nAs I show the codes below, when I pass/don't pass `create_texture_atlas=True` option in `pytorch3d.io.load_objs_as_meshes` to load a mesh, the resulting textures of meshes seem to be on a different device. This difference results in throwing errors (e.g., `RuntimeError: Expected object of device type cuda but got device type cpu`) in latter operations like rendering.\r\nI'm not sure this is a bug or expected behavior due to some undocumented reason (memory?), that's why I post here. \r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\n1. Any changes you made (`git diff`) or code you wrote\r\n```\r\nimport torch\r\nfrom pytorch3d.io import load_objs_as_meshes\r\n\r\ndevice = torch.device(\"cuda:0\")\r\ntorch.cuda.set_device(device)\r\nobj_filename = \"data/cow_mesh/cow.obj\"\r\n\r\nmesh_uv = load_objs_as_meshes([obj_filename], device=device)\r\nmesh_atlas = load_objs_as_meshes([obj_filename], device=device, create_texture_atlas=True)\r\nprint(mesh_uv.textures.device)\r\nprint(mesh_atlas.textures.device)\r\n```\r\n2. The exact command(s) you ran:\r\n3. What you observed (including the full logs):\r\n```\r\ncuda:0\r\ncpu\r\n```\r\n\r\nI guess this is caused because the information of the device is not passed in creating TexturesAtlas instance at [here](https://github.com/facebookresearch/pytorch3d/blob/6d76336501918e29b9cc15b5b4fe6d0f18818d67/pytorch3d/io/obj_io.py#L256)\r\n```\r\ntex = TexturesAtlas(atlas=[aux.texture_atlas])\r\n```\r\n, while it is passed in creating TexturesUV instance at [here](https://github.com/facebookresearch/pytorch3d/blob/6d76336501918e29b9cc15b5b4fe6d0f18818d67/pytorch3d/io/obj_io.py#L261-L266)\r\n```\r\nverts_uvs = aux.verts_uvs.to(device)  # (V, 2)\r\nfaces_uvs = faces.textures_idx.to(device)  # (F, 3)\r\nimage = list(tex_maps.values())[0].to(device)[None]\r\ntex = TexturesUV(\r\n    verts_uvs=[verts_uvs], faces_uvs=[faces_uvs], maps=image\r\n)\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/326/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/326/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/316", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/316/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/316/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/316/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/316", "id": 679558218, "node_id": "MDU6SXNzdWU2Nzk1NTgyMTg=", "number": 316, "title": "Weird result when render dense point cloud", "user": {"login": "niujinshuchong", "id": 13434986, "node_id": "MDQ6VXNlcjEzNDM0OTg2", "avatar_url": "https://avatars.githubusercontent.com/u/13434986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niujinshuchong", "html_url": "https://github.com/niujinshuchong", "followers_url": "https://api.github.com/users/niujinshuchong/followers", "following_url": "https://api.github.com/users/niujinshuchong/following{/other_user}", "gists_url": "https://api.github.com/users/niujinshuchong/gists{/gist_id}", "starred_url": "https://api.github.com/users/niujinshuchong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niujinshuchong/subscriptions", "organizations_url": "https://api.github.com/users/niujinshuchong/orgs", "repos_url": "https://api.github.com/users/niujinshuchong/repos", "events_url": "https://api.github.com/users/niujinshuchong/events{/privacy}", "received_events_url": "https://api.github.com/users/niujinshuchong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "sbranson", "id": 279661, "node_id": "MDQ6VXNlcjI3OTY2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/279661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sbranson", "html_url": "https://github.com/sbranson", "followers_url": "https://api.github.com/users/sbranson/followers", "following_url": "https://api.github.com/users/sbranson/following{/other_user}", "gists_url": "https://api.github.com/users/sbranson/gists{/gist_id}", "starred_url": "https://api.github.com/users/sbranson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sbranson/subscriptions", "organizations_url": "https://api.github.com/users/sbranson/orgs", "repos_url": "https://api.github.com/users/sbranson/repos", "events_url": "https://api.github.com/users/sbranson/events{/privacy}", "received_events_url": "https://api.github.com/users/sbranson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sbranson", "id": 279661, "node_id": "MDQ6VXNlcjI3OTY2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/279661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sbranson", "html_url": "https://github.com/sbranson", "followers_url": "https://api.github.com/users/sbranson/followers", "following_url": "https://api.github.com/users/sbranson/following{/other_user}", "gists_url": "https://api.github.com/users/sbranson/gists{/gist_id}", "starred_url": "https://api.github.com/users/sbranson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sbranson/subscriptions", "organizations_url": "https://api.github.com/users/sbranson/orgs", "repos_url": "https://api.github.com/users/sbranson/repos", "events_url": "https://api.github.com/users/sbranson/events{/privacy}", "received_events_url": "https://api.github.com/users/sbranson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-08-15T12:43:35Z", "updated_at": "2020-09-12T04:06:03Z", "closed_at": "2020-09-12T04:06:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Instructions To Reproduce the Issue:\r\n```\r\nimport os\r\nimport torch\r\nimport torch.nn.functional as F\r\nimport matplotlib.pyplot as plt\r\nfrom skimage.io import imread\r\n\r\n# Util function for loading point clouds\r\nimport numpy as np\r\n\r\n# Data structures and functions for rendering\r\nfrom pytorch3d.structures import Pointclouds\r\nfrom pytorch3d.renderer import (\r\n    look_at_view_transform,\r\n    OpenGLOrthographicCameras, \r\n    PointsRasterizationSettings,\r\n    PointsRenderer,\r\n    PointsRasterizer,\r\n    AlphaCompositor,\r\n    NormWeightedCompositor\r\n)\r\n\r\n# Setup\r\nif torch.cuda.is_available():\r\n    device = torch.device(\"cuda:0\")\r\n    torch.cuda.set_device(device)\r\nelse:\r\n    device = torch.device(\"cpu\")\r\n    \r\n#device = torch.device(\"cpu\")\r\n\r\n# Initialize an OpenGL perspective camera.\r\nR, T = look_at_view_transform(20, 10, 0)\r\ncameras = OpenGLOrthographicCameras(device=device, R=R, T=T, znear=0.01)\r\n\r\n# Define the settings for rasterization and shading. Here we set the output image to be of size\r\n# 512x512. As we are rendering images for visualization purposes only we will set faces_per_pixel=1\r\n# and blur_radius=0.0. Refer to rasterize_points.py for explanations of these parameters. \r\nraster_settings = PointsRasterizationSettings(\r\n    image_size=512, \r\n    radius = 0.02,\r\n    points_per_pixel = 8\r\n)\r\n\r\n\r\n# Create a points renderer by compositing points using an weighted compositor (3D points are\r\n# weighted according to their distance to a pixel and accumulated using a weighted sum)\r\nrenderer = PointsRenderer(\r\n    rasterizer=PointsRasterizer(cameras=cameras, raster_settings=raster_settings),\r\n    compositor=NormWeightedCompositor()\r\n)\r\n\r\nscale = 0.05\r\npoints = torch.randn((256*256, 3)).float().to(device) * scale\r\ncolor = torch.ones_like(points) * torch.Tensor([0.1, 0.5, 1.0]).view(-1, 3).to(device)\r\npoint_cloud = Pointclouds(points=[points], features=[color])\r\n\r\nimages = renderer(point_cloud)\r\nplt.figure(figsize=(10, 10))\r\nplt.imshow(images[0, ..., :3].cpu().numpy())\r\nplt.grid(\"off\") \r\nplt.axis(\"off\");\r\n\r\n```\r\nThe resulting image is as follows:\r\n\r\n![r](https://user-images.githubusercontent.com/13434986/90312403-d3a11a00-df36-11ea-8baa-d9560a24a810.png)\r\n\r\nHowever, setting scale to 0.1 or higher or device to cpu gets normal results like:\r\n\r\n![rr](https://user-images.githubusercontent.com/13434986/90312480-6346c880-df37-11ea-9442-074c1f65f1ce.png)\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/283", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/283/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/283/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/283/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/283", "id": 663685272, "node_id": "MDU6SXNzdWU2NjM2ODUyNzI=", "number": 283, "title": "The render result will become unexpected if the model on a batch is not the same!!!", "user": {"login": "densechen", "id": 14089191, "node_id": "MDQ6VXNlcjE0MDg5MTkx", "avatar_url": "https://avatars.githubusercontent.com/u/14089191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/densechen", "html_url": "https://github.com/densechen", "followers_url": "https://api.github.com/users/densechen/followers", "following_url": "https://api.github.com/users/densechen/following{/other_user}", "gists_url": "https://api.github.com/users/densechen/gists{/gist_id}", "starred_url": "https://api.github.com/users/densechen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/densechen/subscriptions", "organizations_url": "https://api.github.com/users/densechen/orgs", "repos_url": "https://api.github.com/users/densechen/repos", "events_url": "https://api.github.com/users/densechen/events{/privacy}", "received_events_url": "https://api.github.com/users/densechen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-07-22T11:21:41Z", "updated_at": "2020-08-24T09:49:23Z", "closed_at": "2020-08-24T09:49:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I use batch render for different model with different pose. I found that if the models on a batch are different, the render color image will go wrong, but the silhouette is ok. (not sure for depth image.) \r\nThe color image is fetched by: \r\n`\r\n    phong_raster_settings = RasterizationSettings(image_size=image_size,\r\n                                                  blur_radius=0.0,\r\n                                                  faces_per_pixel=1)\r\n    phong_renderer = MeshRendererDepth(\r\n        rasterizer=MeshRasterizer(cameras=cameras,\r\n                                  raster_settings=phong_raster_settings),\r\n        shader=TexturedSoftPhongShader(device=device)).to(device)\r\n`\r\n\r\nand the silhouette is fetched by:\r\n`\r\n    # To blend the 100 faces we set a few parameters which control the opacity and the sharpness of edges. Refer to blending.py for more details.\r\n    blend_params = BlendParams(sigma=1e-4, gamma=1e-4)\r\n\r\n    # Define the settings for rasterization and shading. Here we set the output image to be of size 640x640. To form the blended image we use 100 faces for each pixel. Refer to rasterize_meshes.py for an explanation of this parameter.\r\n    silhouette_raster_settings = RasterizationSettings(\r\n        image_size=image_size,  # longer side or scaled longer side\r\n        # blur_radius=np.log(1. / 1e-4 - 1.) * blend_params.sigma,\r\n        blur_radius=0.0,\r\n        # The nearest faces_per_pixel points along the z-axis.\r\n        faces_per_pixel=1)\r\n\r\n    # Create a silhouette mesh renderer by composing a rasterizer and a shader\r\n    silhouete_renderer = MeshRenderer(\r\n        rasterizer=MeshRasterizer(cameras=cameras,\r\n                                  raster_settings=silhouette_raster_settings),\r\n        shader=SoftSilhouetteShader(blend_params=blend_params)).to(device)\r\n`\r\n\r\nCan anyone tell me that, is it a feature or it is a bug?\r\n\r\nThe wrong result is look like:\r\n![19881595393137_ pic_hd](https://user-images.githubusercontent.com/14089191/88170551-77591c00-cc50-11ea-997d-29fda18cfaf7.jpg)\r\n(left is expected, right is rendered by pytorch3d.)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/283/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/283/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/244", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/244/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/244/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/244/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/244", "id": 643937742, "node_id": "MDU6SXNzdWU2NDM5Mzc3NDI=", "number": 244, "title": "Rendering from inside a surface results in uninterpretable images", "user": {"login": "hallpaz", "id": 5713977, "node_id": "MDQ6VXNlcjU3MTM5Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/5713977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hallpaz", "html_url": "https://github.com/hallpaz", "followers_url": "https://api.github.com/users/hallpaz/followers", "following_url": "https://api.github.com/users/hallpaz/following{/other_user}", "gists_url": "https://api.github.com/users/hallpaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/hallpaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hallpaz/subscriptions", "organizations_url": "https://api.github.com/users/hallpaz/orgs", "repos_url": "https://api.github.com/users/hallpaz/repos", "events_url": "https://api.github.com/users/hallpaz/events{/privacy}", "received_events_url": "https://api.github.com/users/hallpaz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-06-23T15:28:07Z", "updated_at": "2021-05-27T00:33:08Z", "closed_at": "2021-05-27T00:33:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\n\r\nHello, \r\n\r\nI'm trying to render views of an equirectangular panorama, just like Street View does. I have a sphere with normals pointing inward the surface, a parameterization in lat/long for texture coordinates and the equirectangular image as texture. \r\n\r\nFrom outside the surface, I can see a view as expected.\r\n\r\n![image](https://user-images.githubusercontent.com/5713977/85417367-e5250180-b545-11ea-8f32-f39f1f419d3c.png)\r\n\r\nHowever, when I put the camera inside the surface I see images like these (the pattern changes depending on the position, but are similar):\r\n\r\n![image](https://user-images.githubusercontent.com/5713977/85417622-37662280-b546-11ea-8cff-66573950b3ad.png)\r\n\r\nI have a very [detailed explanation of my steps here](https://hallpaz.github.io/3dsystems20/assignment2.html), as a report of research. The main conclusions are:\r\n1. Using Blender or Meshlab, I can see everything as expected ([v\u00eddeo](https://hallpaz.github.io/3dsystems20/img/meshlab_panorama_video.mp4)). \r\n2. If I move the c\u00e2mera inside the cow in the tutorial \"[Render a textured mesh](https://pytorch3d.org/tutorials/render_textured_meshes)\", I get the same unexpected result.\r\n\r\nI deleted more than half of the sphere, using only 135\u00ba, refined the mesh to small polygons and rendered a 360\u00ba tour around the up axis. This time, I could see some good images, but most of them presented the same unexpected pattern. This can be observed when rendering with and without texture. You can [check this video](https://youtu.be/RL1vkYgxJio) for the complete tour, but the images are like below.\r\n\r\n![Capture d\u2019e\u0301cran 2020-06-23 a\u0300 12 21 50](https://user-images.githubusercontent.com/5713977/85422754-52d42c00-b54c-11ea-8227-a63d69432edd.png)\r\n![Capture d\u2019e\u0301cran 2020-06-23 a\u0300 12 22 24](https://user-images.githubusercontent.com/5713977/85422771-57004980-b54c-11ea-88f1-5cdaa821f0fb.png)\r\n![Capture d\u2019e\u0301cran 2020-06-23 a\u0300 12 22 41](https://user-images.githubusercontent.com/5713977/85422786-5b2c6700-b54c-11ea-903d-81d5b263590d.png)\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/244/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/237", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/237/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/237/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/237/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/237", "id": 639645835, "node_id": "MDU6SXNzdWU2Mzk2NDU4MzU=", "number": 237, "title": "Failed to build from source with FORCE_CUDA=1 (NOT Conda)", "user": {"login": "jiapei100", "id": 154013, "node_id": "MDQ6VXNlcjE1NDAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/154013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiapei100", "html_url": "https://github.com/jiapei100", "followers_url": "https://api.github.com/users/jiapei100/followers", "following_url": "https://api.github.com/users/jiapei100/following{/other_user}", "gists_url": "https://api.github.com/users/jiapei100/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiapei100/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiapei100/subscriptions", "organizations_url": "https://api.github.com/users/jiapei100/orgs", "repos_url": "https://api.github.com/users/jiapei100/repos", "events_url": "https://api.github.com/users/jiapei100/events{/privacy}", "received_events_url": "https://api.github.com/users/jiapei100/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-06-16T13:01:10Z", "updated_at": "2021-04-09T15:06:31Z", "closed_at": "2020-06-17T23:27:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "- **ENV**: \r\n```console\r\n 4 \ue0b0 \u2714 \ue0b0 python --version                                                                                                                                                                                  \ue0b2 ~ \r\nPython 3.6.9\r\n 5 \ue0b0 \u2714 \ue0b0 gcc --version                                                                                                                                                                                     \ue0b2 ~ \r\ngcc (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nCopyright (C) 2017 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n 6 \ue0b0 \u2714 \ue0b0 lsb_release -a                                                                                                                                                                                    \ue0b2 ~ \r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 18.04.4 LTS\r\nRelease:\t18.04\r\nCodename:\tbionic\r\n 7 \ue0b0 \u2714 \ue0b0 uname -r                                                                                                                                                                                          \ue0b2 ~ \r\n5.3.0-53-generic\r\n 9 \ue0b0 \u2714 \ue0b0 nvidia-smi --query-gpu=driver_version --format=csv,noheader                                                                                                                                       \ue0b2 ~ \r\n440.82\r\n 10 \ue0b0 \u2714 \ue0b0 nvcc --version                                                                                                                                                                                   \ue0b2 ~ \r\nnvcc: NVIDIA (R) Cuda compiler driver\r\nCopyright (c) 2005-2019 NVIDIA Corporation\r\nBuilt on Wed_Oct_23_19:24:38_PDT_2019\r\nCuda compilation tools, release 10.2, V10.2.89\r\n```\r\n\r\n\r\n- **Success**\r\n```console\r\npip install -U pytorch3d\r\n```\r\nruns successfully.\r\n\r\n- **Fail**\r\nHowever, if I want to build from source, I got a lot of **ERROR** messages as:\r\n```console\r\n\u2718 \ue0b0 FORCE_CUDA=1 pip install -e .\r\nDefaulting to user installation because normal site-packages is not writeable\r\nObtaining file://....../pytorch3d\r\nRequirement already satisfied: torchvision>=0.4 in ~/.local/lib/python3.6/site-packages (from pytorch3d==0.2.0) (0.6.0)\r\nRequirement already satisfied: fvcore in ~/.local/lib/python3.6/site-packages (from pytorch3d==0.2.0) (0.1.1.post20200616)\r\nRequirement already satisfied: torch==1.5.0 in ~/.local/lib/python3.6/site-packages (from torchvision>=0.4->pytorch3d==0.2.0) (1.5.0)\r\nRequirement already satisfied: numpy in ~/.local/lib/python3.6/site-packages (from torchvision>=0.4->pytorch3d==0.2.0) (1.18.5)\r\nRequirement already satisfied: pillow>=4.1.1 in ~/.local/lib/python3.6/site-packages (from torchvision>=0.4->pytorch3d==0.2.0) (7.1.2)\r\nRequirement already satisfied: tabulate in ~/.local/lib/python3.6/site-packages (from fvcore->pytorch3d==0.2.0) (0.8.7)\r\nRequirement already satisfied: termcolor>=1.1 in ~/.local/lib/python3.6/site-packages (from fvcore->pytorch3d==0.2.0) (1.1.0)\r\nRequirement already satisfied: yacs>=0.1.6 in ~/.local/lib/python3.6/site-packages (from fvcore->pytorch3d==0.2.0) (0.1.7)\r\nRequirement already satisfied: portalocker in ~/.local/lib/python3.6/site-packages (from fvcore->pytorch3d==0.2.0) (1.7.0)\r\nRequirement already satisfied: tqdm in ~/.local/lib/python3.6/site-packages (from fvcore->pytorch3d==0.2.0) (4.46.1)\r\nRequirement already satisfied: pyyaml>=5.1 in ~/.local/lib/python3.6/site-packages (from fvcore->pytorch3d==0.2.0) (5.3.1)\r\nRequirement already satisfied: future in ~/.local/lib/python3.6/site-packages (from torch==1.5.0->torchvision>=0.4->pytorch3d==0.2.0) (0.18.2)\r\nInstalling collected packages: pytorch3d\r\n  Running setup.py develop for pytorch3d\r\n\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /usr/bin/python3 -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'....../pytorch3d/setup.py'\"'\"'; __file__='\"'\"'....../pytorch3d/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' develop --no-deps --user --prefix=\r\n         cwd: ....../pytorch3d/\r\n    Complete output (116 lines):\r\n    running develop\r\n    running egg_info\r\n    creating pytorch3d.egg-info\r\n    writing pytorch3d.egg-info/PKG-INFO\r\n    writing dependency_links to pytorch3d.egg-info/dependency_links.txt\r\n    writing requirements to pytorch3d.egg-info/requires.txt\r\n    writing top-level names to pytorch3d.egg-info/top_level.txt\r\n    writing manifest file 'pytorch3d.egg-info/SOURCES.txt'\r\n    writing manifest file 'pytorch3d.egg-info/SOURCES.txt'\r\n    running build_ext\r\n    building 'pytorch3d._C' extension\r\n    Emitting ninja build file ....../pytorch3d/build/temp.linux-x86_64-3.6/build.ninja...\r\n    Compiling objects...\r\n    Allowing ninja to set a default number of workers... (overridable by setting the environment variable MAX_JOBS=N)\r\n    [1/12] c++ -MMD -MF ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.o.d -pthread -DNDEBUG -g -fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.o -std=c++14 -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0\r\n    FAILED: ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.o\r\n    c++ -MMD -MF ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.o.d -pthread -DNDEBUG -g -fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.o -std=c++14 -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp: In function \u2018vec3<T> ExtractPoint(const at::TensorAccessor<T, 1>&)\u2019:\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:14:14: error: missing template arguments before \u2018(\u2019 token\r\n       return vec3(t[0], t[1], t[2]);\r\n                  ^\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp: At global scope:\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:23:13: error: explicit specialization in non-namespace scope \u2018struct ExtractHullHelper<Accessor>\u2019\r\n       template <>\r\n                 ^\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:25:27: error: template-id \u2018get<1>\u2019 in declaration of primary template\r\n       get<1>(const Accessor& t) {\r\n                               ^\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:29:13: error: explicit specialization in non-namespace scope \u2018struct ExtractHullHelper<Accessor>\u2019\r\n       template <>\r\n                 ^\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:31:27: error: template-id \u2018get<2>\u2019 in declaration of primary template\r\n       get<2>(const Accessor& t) {\r\n                               ^\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:31:3: error: \u2018static std::array<vec3<typename std::remove_pointer<typename Accessor::PtrType>::type>, 2> ExtractHullHelper<Accessor>::get(const Accessor&)\u2019 cannot be overloaded\r\n       get<2>(const Accessor& t) {\r\n       ^~~~~~\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:25:3: error: with \u2018static std::array<vec3<typename std::remove_pointer<typename Accessor::PtrType>::type>, 1> ExtractHullHelper<Accessor>::get(const Accessor&)\u2019\r\n       get<1>(const Accessor& t) {\r\n       ^~~~~~\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:35:13: error: explicit specialization in non-namespace scope \u2018struct ExtractHullHelper<Accessor>\u2019\r\n       template <>\r\n                 ^\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:37:27: error: template-id \u2018get<3>\u2019 in declaration of primary template\r\n       get<3>(const Accessor& t) {\r\n                               ^\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:37:3: error: \u2018static std::array<vec3<typename std::remove_pointer<typename Accessor::PtrType>::type>, 3> ExtractHullHelper<Accessor>::get(const Accessor&)\u2019 cannot be overloaded\r\n       get<3>(const Accessor& t) {\r\n       ^~~~~~\r\n    ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh.cpp:25:3: error: with \u2018static std::array<vec3<typename std::remove_pointer<typename Accessor::PtrType>::type>, 1> ExtractHullHelper<Accessor>::get(const Accessor&)\u2019\r\n       get<1>(const Accessor& t) {\r\n       ^~~~~~\r\n    [2/12] /usr/local/cuda/bin/nvcc -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/packed_to_padded_tensor/packed_to_padded_tensor.cu -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/packed_to_padded_tensor/packed_to_padded_tensor.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options '-fPIC' -DCUDA_HAS_FP16=1 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_52,code=sm_52 -std=c++14\r\n    [3/12] /usr/local/cuda/bin/nvcc -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/compositing/norm_weighted_sum.cu -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/compositing/norm_weighted_sum.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options '-fPIC' -DCUDA_HAS_FP16=1 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_52,code=sm_52 -std=c++14\r\n    [4/12] /usr/local/cuda/bin/nvcc -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/face_areas_normals/face_areas_normals.cu -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/face_areas_normals/face_areas_normals.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options '-fPIC' -DCUDA_HAS_FP16=1 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_52,code=sm_52 -std=c++14\r\n    [5/12] /usr/local/cuda/bin/nvcc -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/compositing/alpha_composite.cu -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/compositing/alpha_composite.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options '-fPIC' -DCUDA_HAS_FP16=1 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_52,code=sm_52 -std=c++14\r\n    [6/12] /usr/local/cuda/bin/nvcc -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/gather_scatter/gather_scatter.cu -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/gather_scatter/gather_scatter.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options '-fPIC' -DCUDA_HAS_FP16=1 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_52,code=sm_52 -std=c++14\r\n    [7/12] /usr/local/cuda/bin/nvcc -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/compositing/weighted_sum.cu -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/compositing/weighted_sum.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options '-fPIC' -DCUDA_HAS_FP16=1 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_52,code=sm_52 -std=c++14\r\n    [8/12] /usr/local/cuda/bin/nvcc -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh_edge.cu -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh_edge.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options '-fPIC' -DCUDA_HAS_FP16=1 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_52,code=sm_52 -std=c++14\r\n    [9/12] /usr/local/cuda/bin/nvcc -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh_face.cu -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/point_mesh/point_mesh_face.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options '-fPIC' -DCUDA_HAS_FP16=1 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_52,code=sm_52 -std=c++14\r\n    [10/12] /usr/local/cuda/bin/nvcc -DWITH_CUDA -I....../pytorch3d/pytorch3d/csrc -I~/.local/lib/python3.6/site-packages/torch/include -I~/.local/lib/python3.6/site-packages/torch/include/torch/csrc/api/include -I~/.local/lib/python3.6/site-packages/torch/include/TH -I~/.local/lib/python3.6/site-packages/torch/include/THC -I/usr/local/cuda/include -I/usr/include/python3.6m -c -c ....../pytorch3d/pytorch3d/csrc/knn/knn.cu -o ....../pytorch3d/build/temp.linux-x86_64-3.6....../pytorch3d/pytorch3d/csrc/knn/knn.o -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr --compiler-options '-fPIC' -DCUDA_HAS_FP16=1 -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_C -D_GLIBCXX_USE_CXX11_ABI=0 -gencode=arch=compute_52,code=sm_52 -std=c++14\r\n    ninja: build stopped: subcommand failed.\r\n    Traceback (most recent call last):\r\n      File \"~/.local/lib/python3.6/site-packages/torch/utils/cpp_extension.py\", line 1400, in _run_ninja_build\r\n        check=True)\r\n      File \"/usr/lib/python3.6/subprocess.py\", line 438, in run\r\n        output=stdout, stderr=stderr)\r\n    subprocess.CalledProcessError: Command '['ninja', '-v']' returned non-zero exit status 1.\r\n    \r\n    During handling of the above exception, another exception occurred:\r\n    \r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 1, in <module>\r\n      File \"....../pytorch3d/setup.py\", line 100, in <module>\r\n        cmdclass={\"build_ext\": BuildExtension},\r\n      File \"~/.local/lib/python3.6/site-packages/setuptools/__init__.py\", line 161, in setup\r\n        return distutils.core.setup(**attrs)\r\n      File \"/usr/lib/python3.6/distutils/core.py\", line 148, in setup\r\n        dist.run_commands()\r\n      File \"/usr/lib/python3.6/distutils/dist.py\", line 955, in run_commands\r\n        self.run_command(cmd)\r\n      File \"/usr/lib/python3.6/distutils/dist.py\", line 974, in run_command\r\n        cmd_obj.run()\r\n      File \"~/.local/lib/python3.6/site-packages/setuptools/command/develop.py\", line 38, in run\r\n        self.install_for_development()\r\n      File \"~/.local/lib/python3.6/site-packages/setuptools/command/develop.py\", line 140, in install_for_development\r\n        self.run_command('build_ext')\r\n      File \"/usr/lib/python3.6/distutils/cmd.py\", line 313, in run_command\r\n        self.distribution.run_command(command)\r\n      File \"/usr/lib/python3.6/distutils/dist.py\", line 974, in run_command\r\n        cmd_obj.run()\r\n      File \"~/.local/lib/python3.6/site-packages/setuptools/command/build_ext.py\", line 87, in run\r\n        _build_ext.run(self)\r\n      File \"~/.local/lib/python3.6/site-packages/Cython/Distutils/old_build_ext.py\", line 186, in run\r\n        _build_ext.build_ext.run(self)\r\n      File \"/usr/lib/python3.6/distutils/command/build_ext.py\", line 339, in run\r\n        self.build_extensions()\r\n      File \"~/.local/lib/python3.6/site-packages/torch/utils/cpp_extension.py\", line 580, in build_extensions\r\n        build_ext.build_extensions(self)\r\n      File \"~/.local/lib/python3.6/site-packages/Cython/Distutils/old_build_ext.py\", line 195, in build_extensions\r\n        _build_ext.build_ext.build_extensions(self)\r\n      File \"/usr/lib/python3.6/distutils/command/build_ext.py\", line 448, in build_extensions\r\n        self._build_extensions_serial()\r\n      File \"/usr/lib/python3.6/distutils/command/build_ext.py\", line 473, in _build_extensions_serial\r\n        self.build_extension(ext)\r\n      File \"~/.local/lib/python3.6/site-packages/setuptools/command/build_ext.py\", line 208, in build_extension\r\n        _build_ext.build_extension(self, ext)\r\n      File \"/usr/lib/python3.6/distutils/command/build_ext.py\", line 533, in build_extension\r\n        depends=ext.depends)\r\n      File \"~/.local/lib/python3.6/site-packages/torch/utils/cpp_extension.py\", line 423, in unix_wrap_ninja_compile\r\n        with_cuda=with_cuda)\r\n      File \"~/.local/lib/python3.6/site-packages/torch/utils/cpp_extension.py\", line 1140, in _write_ninja_file_and_compile_objects\r\n        error_prefix='Error compiling objects for extension')\r\n      File \"~/.local/lib/python3.6/site-packages/torch/utils/cpp_extension.py\", line 1413, in _run_ninja_build\r\n        raise RuntimeError(message)\r\n    RuntimeError: Error compiling objects for extension\r\n    ----------------------------------------\r\nERROR: Command errored out with exit status 1: /usr/bin/python3 -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'....../pytorch3d/setup.py'\"'\"'; __file__='\"'\"'....../pytorch3d/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' develop --no-deps --user --prefix= Check the logs for full command output.\r\n```\r\n\r\nCan anybody give me a hand?", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/237/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/219", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/219/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/219/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/219/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/219", "id": 627909888, "node_id": "MDU6SXNzdWU2Mjc5MDk4ODg=", "number": 219, "title": "Invalid rotation matrix when number of camera position is equal to 3", "user": {"login": "guanming001", "id": 38412160, "node_id": "MDQ6VXNlcjM4NDEyMTYw", "avatar_url": "https://avatars.githubusercontent.com/u/38412160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guanming001", "html_url": "https://github.com/guanming001", "followers_url": "https://api.github.com/users/guanming001/followers", "following_url": "https://api.github.com/users/guanming001/following{/other_user}", "gists_url": "https://api.github.com/users/guanming001/gists{/gist_id}", "starred_url": "https://api.github.com/users/guanming001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guanming001/subscriptions", "organizations_url": "https://api.github.com/users/guanming001/orgs", "repos_url": "https://api.github.com/users/guanming001/repos", "events_url": "https://api.github.com/users/guanming001/events{/privacy}", "received_events_url": "https://api.github.com/users/guanming001/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-05-31T07:22:55Z", "updated_at": "2020-06-01T01:00:11Z", "closed_at": "2020-06-01T01:00:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When trying to create rotation matrix using `look_at_rotation` with **3** camera positions, it will result in invalid rotation matrix\r\n\r\n```python\r\nimport torch\r\nfrom pytorch3d.renderer import look_at_rotation\r\n\r\nN = 3 # Number of cameras\r\ncamera_position = torch.zeros(N, 3)\r\ncamera_position[:,2] = 1.0 # Set camera z axis to a distance of one\r\nR = look_at_rotation(camera_position)\r\n\r\nprint('Output of R:\\n', R)\r\n```\r\n```\r\nOutput of R:\r\n tensor([[[ 0.,  0.,  0.],\r\n         [ 0.,  0.,  0.],\r\n         [ 0.,  0., -1.]],\r\n\r\n        [[ 0.,  0.,  0.],\r\n         [ 0.,  0.,  0.],\r\n         [ 0.,  0., -1.]],\r\n\r\n        [[ 0.,  0.,  0.],\r\n         [ 0.,  0.,  0.],\r\n         [ 0.,  0., -1.]]])\r\n\r\n```\r\nExpected output should be: \r\n(which can be obtained by changing the N to any numbers other than 3)\r\n```\r\nOutput of R:\r\n tensor([[[-1.,  0.,  0.],\r\n         [ 0.,  1.,  0.],\r\n         [ 0.,  0., -1.]]])\r\n...\r\n```\r\n\r\nI think the error occurs due to the use of `torch.cross` in the function `look_at_rotation` https://github.com/facebookresearch/pytorch3d/blob/3c6f9220fc061a527c6fb3533f5244c30c64ef47/pytorch3d/renderer/cameras.py#L881\r\n\r\nAs `torch.cross` [defaults to the first dimension found with the size 3](https://pytorch.org/docs/master/generated/torch.cross.html)\r\n\r\nWhen number of cameras is three, the first dimension of the variables (up, z_axis, x_axis) is also 3 and it will result in unexpected error when computing x_axis and y_axis using `torch.cross`\r\nhttps://github.com/facebookresearch/pytorch3d/blob/3c6f9220fc061a527c6fb3533f5244c30c64ef47/pytorch3d/renderer/cameras.py#L919\r\nhttps://github.com/facebookresearch/pytorch3d/blob/3c6f9220fc061a527c6fb3533f5244c30c64ef47/pytorch3d/renderer/cameras.py#L920\r\n\r\nIf dimension is specified for `torch.cross` it could eliminate the above error.\r\n```python\r\nx_axis = F.normalize(torch.cross(up, z_axis, dim=1), eps=1e-5)\r\ny_axis = F.normalize(torch.cross(z_axis, x_axis, dim=1), eps=1e-5)\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/219/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/219/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/192", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/192/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/192/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/192/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/192", "id": 616490343, "node_id": "MDU6SXNzdWU2MTY0OTAzNDM=", "number": 192, "title": "Unexpected rendering when using batch lights", "user": {"login": "Agent-INF", "id": 20737400, "node_id": "MDQ6VXNlcjIwNzM3NDAw", "avatar_url": "https://avatars.githubusercontent.com/u/20737400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Agent-INF", "html_url": "https://github.com/Agent-INF", "followers_url": "https://api.github.com/users/Agent-INF/followers", "following_url": "https://api.github.com/users/Agent-INF/following{/other_user}", "gists_url": "https://api.github.com/users/Agent-INF/gists{/gist_id}", "starred_url": "https://api.github.com/users/Agent-INF/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Agent-INF/subscriptions", "organizations_url": "https://api.github.com/users/Agent-INF/orgs", "repos_url": "https://api.github.com/users/Agent-INF/repos", "events_url": "https://api.github.com/users/Agent-INF/events{/privacy}", "received_events_url": "https://api.github.com/users/Agent-INF/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-05-12T09:07:39Z", "updated_at": "2021-06-14T19:11:45Z", "closed_at": "2021-06-14T19:11:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\n<!-- A clear and concise description of the issue -->\r\nHey!\r\nI'm trying to render different meshes with different lights, and process them in batches. However, I found the results are not what I was expected.\r\nTo simplify the steps as much as possible, let's try a simple case:\r\n\r\n`   \r\n\r\n    ambient_color = torch.FloatTensor([[0.0, 0.0, 0.0]]).to(self.device)\r\n    diffuse_color = torch.FloatTensor([[1.0, 1.0, 1.0]]).to(self.device)\r\n    specular_color = torch.FloatTensor([[0.0, 0.0, 0.0]]).to(self.device)\r\n    direction = torch.FloatTensor([[1, 0, 0]]).to(self.device)\r\n    lights = DirectionalLights(ambient_color=ambient_color,\r\n                               diffuse_color=diffuse_color,\r\n                               specular_color=specular_color,\r\n                               direction=direction,\r\n                               device=self.device)\r\n    shader = TexturedSoftPhongShader(device=self.device, cameras=self.cameras, lights=lights)\r\n    renderer = MeshRenderer(rasterizer=self.rasterizer, shader=shader)\r\n    render_image = renderer(meshes) # there are 2 meshes to be rendered \r\n`\r\nIn this case, the arguments of DirectionalLights are tensor of shape (1, 3), and the results seem OK.\r\n![renders0 - Copy](https://user-images.githubusercontent.com/20737400/81662244-ddb30880-946f-11ea-826e-2fa889bd7953.png) ![renders1 - Copy](https://user-images.githubusercontent.com/20737400/81662265-e3a8e980-946f-11ea-91a5-ae6cc8043cbd.png)\r\n\r\nHowever, if I change the shape of arguments of DirectionalLights to (2, 3), the results are wired:\r\n`   \r\n\r\n    ambient_color = torch.FloatTensor([[0.0, 0.0, 0.0]]).to(self.device).repeat(2, 1)\r\n    diffuse_color = torch.FloatTensor([[1.0, 1.0, 1.0]]).to(self.device).repeat(2, 1)\r\n    specular_color = torch.FloatTensor([[0.0, 0.0, 0.0]]).to(self.device).repeat(2, 1)\r\n    direction = torch.FloatTensor([[1, 0, 0]]).to(self.device).repeat(2, 1)\r\n    lights = DirectionalLights(ambient_color=ambient_color,\r\n                               diffuse_color=diffuse_color,\r\n                               specular_color=specular_color,\r\n                               direction=direction,\r\n                               device=self.device)\r\n`\r\n![renders1](https://user-images.githubusercontent.com/20737400/81662861-c0326e80-9470-11ea-83ff-21492dfabf4a.png)![renders3](https://user-images.githubusercontent.com/20737400/81662874-c32d5f00-9470-11ea-9bf3-dbb826f1d02b.png)\r\n\r\nTheoretically, the results should be the same as before, so I looked into the code and found the problem may be caused by broadcasting issue in \r\nhttps://github.com/facebookresearch/pytorch3d/blob/6a365d203fff6b10c53e7483b33eac48d067055b/pytorch3d/renderer/mesh/shading.py#L82\r\nIn my case, the shape of ambient is (2, 3) and diffuse is (2, 256, 256, 1, 3).\r\nAnd I believe this line could be fixed as:\r\n`\r\n    colors = (ambient[:, None, None, None] + diffuse) * texels + specular\r\n`\r\nIt produces the right results for me, but I'm not sure if this is the best way.\r\n\r\nP.S. I also found similar broadcasting issues in:\r\nhttps://github.com/facebookresearch/pytorch3d/blob/6a365d203fff6b10c53e7483b33eac48d067055b/pytorch3d/renderer/lighting.py#L251\r\nhttps://github.com/facebookresearch/pytorch3d/blob/6a365d203fff6b10c53e7483b33eac48d067055b/pytorch3d/renderer/lighting.py#L255\r\nand I think those should be:\r\n`\r\n        direction = self.location[:, None, None, None] - points\r\n`", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/192/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/192/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/189", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/189/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/189/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/189/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/189", "id": 613801767, "node_id": "MDU6SXNzdWU2MTM4MDE3Njc=", "number": 189, "title": "R=I outputs nans in so3_log_map()", "user": {"login": "juldaani", "id": 7114969, "node_id": "MDQ6VXNlcjcxMTQ5Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/7114969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/juldaani", "html_url": "https://github.com/juldaani", "followers_url": "https://api.github.com/users/juldaani/followers", "following_url": "https://api.github.com/users/juldaani/following{/other_user}", "gists_url": "https://api.github.com/users/juldaani/gists{/gist_id}", "starred_url": "https://api.github.com/users/juldaani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/juldaani/subscriptions", "organizations_url": "https://api.github.com/users/juldaani/orgs", "repos_url": "https://api.github.com/users/juldaani/repos", "events_url": "https://api.github.com/users/juldaani/events{/privacy}", "received_events_url": "https://api.github.com/users/juldaani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "davnov134", "id": 3605260, "node_id": "MDQ6VXNlcjM2MDUyNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3605260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davnov134", "html_url": "https://github.com/davnov134", "followers_url": "https://api.github.com/users/davnov134/followers", "following_url": "https://api.github.com/users/davnov134/following{/other_user}", "gists_url": "https://api.github.com/users/davnov134/gists{/gist_id}", "starred_url": "https://api.github.com/users/davnov134/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davnov134/subscriptions", "organizations_url": "https://api.github.com/users/davnov134/orgs", "repos_url": "https://api.github.com/users/davnov134/repos", "events_url": "https://api.github.com/users/davnov134/events{/privacy}", "received_events_url": "https://api.github.com/users/davnov134/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "davnov134", "id": 3605260, "node_id": "MDQ6VXNlcjM2MDUyNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3605260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davnov134", "html_url": "https://github.com/davnov134", "followers_url": "https://api.github.com/users/davnov134/followers", "following_url": "https://api.github.com/users/davnov134/following{/other_user}", "gists_url": "https://api.github.com/users/davnov134/gists{/gist_id}", "starred_url": "https://api.github.com/users/davnov134/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davnov134/subscriptions", "organizations_url": "https://api.github.com/users/davnov134/orgs", "repos_url": "https://api.github.com/users/davnov134/repos", "events_url": "https://api.github.com/users/davnov134/events{/privacy}", "received_events_url": "https://api.github.com/users/davnov134/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-05-07T06:18:37Z", "updated_at": "2020-05-15T19:31:50Z", "closed_at": "2020-05-15T19:31:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "When identity matrix is fed into so3_log_map() output is filled with nans:\r\n\r\n~~~~\r\nfrom pytorch3d.transforms.so3 import so3_log_map\r\nimport torch\r\n\r\nR = torch.eye(3).unsqueeze(0)\r\nax_angle = so3_log_map(R)\r\n\r\nprint(ax_angle)\r\n~~~~\r\n\r\nIt seems that when phi = 0 the phi.sign() outputs zero which further sets phi_valid to zero:https://github.com/facebookresearch/pytorch3d/blob/17ca6ecd81b49751fd4adcbd6effee9f3fbfc455/pytorch3d/transforms/so3.py#L155", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/189/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/176", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/176/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/176/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/176/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/176", "id": 609326884, "node_id": "MDU6SXNzdWU2MDkzMjY4ODQ=", "number": 176, "title": "pointclouds normals and features returned as None", "user": {"login": "yifita", "id": 8813291, "node_id": "MDQ6VXNlcjg4MTMyOTE=", "avatar_url": "https://avatars.githubusercontent.com/u/8813291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifita", "html_url": "https://github.com/yifita", "followers_url": "https://api.github.com/users/yifita/followers", "following_url": "https://api.github.com/users/yifita/following{/other_user}", "gists_url": "https://api.github.com/users/yifita/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifita/subscriptions", "organizations_url": "https://api.github.com/users/yifita/orgs", "repos_url": "https://api.github.com/users/yifita/repos", "events_url": "https://api.github.com/users/yifita/events{/privacy}", "received_events_url": "https://api.github.com/users/yifita/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2020-04-29T20:10:46Z", "updated_at": "2020-05-01T16:45:34Z", "closed_at": "2020-05-01T16:45:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "If you do not know the root cause of the problem / bug, and wish someone to help you, please\r\npost according to this template:\r\n\r\n## \ud83d\udc1b Bugs / Unexpected behaviors\r\nWhen the `_points_{FORM}` is set, the methods `normals_{FORM}()` and `features_{FORM}()` return `None`, even though the normals and features are present in other forms. \r\nHowever, a more reasonable behaviour should be returning the converted normals and features.\r\n\r\nThis seems to be caused by the early exist https://github.com/facebookresearch/pytorch3d/blob/master/pytorch3d/structures/pointclouds.py#L584\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\n```\r\nV = torch.rand(1,5,3)\r\npointclouds = Pointclouds(V).to(device=device)\r\npoints_packed = pointclouds.points_packed()\r\npointclouds.estimate_normals(assign_to_self=True)\r\nnormals_packed = pointclouds.normals_packed()\r\n```\r\n\r\n`normals_packed` is `None`\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/176/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/176/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/175", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/175/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/175/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/175/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/175", "id": 609213710, "node_id": "MDU6SXNzdWU2MDkyMTM3MTA=", "number": 175, "title": "CUDA error when joining meshes as batch", "user": {"login": "wboerdijk", "id": 34688619, "node_id": "MDQ6VXNlcjM0Njg4NjE5", "avatar_url": "https://avatars.githubusercontent.com/u/34688619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wboerdijk", "html_url": "https://github.com/wboerdijk", "followers_url": "https://api.github.com/users/wboerdijk/followers", "following_url": "https://api.github.com/users/wboerdijk/following{/other_user}", "gists_url": "https://api.github.com/users/wboerdijk/gists{/gist_id}", "starred_url": "https://api.github.com/users/wboerdijk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wboerdijk/subscriptions", "organizations_url": "https://api.github.com/users/wboerdijk/orgs", "repos_url": "https://api.github.com/users/wboerdijk/repos", "events_url": "https://api.github.com/users/wboerdijk/events{/privacy}", "received_events_url": "https://api.github.com/users/wboerdijk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-04-29T17:03:01Z", "updated_at": "2020-05-01T13:21:54Z", "closed_at": "2020-05-01T13:21:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "##  Description\r\nJoining meshes that have textures and are on the (same) gpu with ```join_meshes_as_batch()``` results in a CUDA error. The error happens because the image tensor is converted to numpy without calling ```.cpu()``` first here:\r\n\r\nhttps://github.com/facebookresearch/pytorch3d/blob/686c8666d31d932ed42d3cd7319f249fc75e89a9/pytorch3d/structures/textures.py#L45\r\n\r\n## Minimal working example (pytorch3d version = 0.2.0)\r\n\r\n```\r\nimport torch\r\nfrom pytorch3d.structures import Meshes, Textures, join_meshes_as_batch\r\n\r\n# create some vertices / faces\r\nverts = torch.randn(1, 10, 3)\r\nfaces = torch.randint(0, 10, size=(1, 10, 3))\r\n\r\n# create some texture\r\nverts_uvs = torch.randn(1, 10, 2)\r\nfaces_uvs = faces\r\ntexture_image = torch.randn(1, 100, 100, 3)\r\ntexture = Textures(verts_uvs=verts_uvs, faces_uvs=faces_uvs, maps=texture_image)\r\n\r\n# create meshes on cpu / gpu\r\nmesh_cpu = Meshes(verts=verts, faces=faces, textures=texture)\r\nmesh_cuda = mesh_cpu.clone().cuda()\r\n\r\n# works\r\njoined_mesh_cpu = join_meshes_as_batch([mesh_cpu, mesh_cpu, mesh_cpu])\r\n\r\n# CUDA error\r\njoined_mesh_cuda = join_meshes_as_batch([mesh_cuda, mesh_cuda, mesh_cuda])\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/175/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/175/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/141", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/141/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/141/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/141/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/141", "id": 594707539, "node_id": "MDU6SXNzdWU1OTQ3MDc1Mzk=", "number": 141, "title": "Bundle Asjustment: No module named 'camera_visualisation'", "user": {"login": "albertotono", "id": 11828200, "node_id": "MDQ6VXNlcjExODI4MjAw", "avatar_url": "https://avatars.githubusercontent.com/u/11828200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albertotono", "html_url": "https://github.com/albertotono", "followers_url": "https://api.github.com/users/albertotono/followers", "following_url": "https://api.github.com/users/albertotono/following{/other_user}", "gists_url": "https://api.github.com/users/albertotono/gists{/gist_id}", "starred_url": "https://api.github.com/users/albertotono/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albertotono/subscriptions", "organizations_url": "https://api.github.com/users/albertotono/orgs", "repos_url": "https://api.github.com/users/albertotono/repos", "events_url": "https://api.github.com/users/albertotono/events{/privacy}", "received_events_url": "https://api.github.com/users/albertotono/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-04-05T23:29:49Z", "updated_at": "2020-04-07T19:37:19Z", "closed_at": "2020-04-07T19:36:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## \ud83d\udc1b Bugs / Unexpected behaviors\r\nWhile running the Google Colab notebook (Absolute camera orientation given set of relative camera pairs) I got the following error: \r\n![image](https://user-images.githubusercontent.com/11828200/78512552-701e0900-775a-11ea-9ce1-e55c05013cc3.png)\r\n--2020-04-05 23:26:49--  https://raw.githubusercontent.com/facebookresearch/pytorch3d/master/docs/tutorials/utils/camera_visualisation.py\r\nResolving raw.githubusercontent.com (raw.githubusercontent.com)... 151.101.0.133, 151.101.64.133, 151.101.128.133, ...\r\nConnecting to raw.githubusercontent.com (raw.githubusercontent.com)|151.101.0.133|:443... connected.\r\nHTTP request sent, awaiting response... 404 Not Found\r\n2020-04-05 23:26:49 ERROR 404: Not Found.\r\n\r\n---------------------------------------------------------------------------\r\nModuleNotFoundError                       Traceback (most recent call last)\r\n<ipython-input-11-21501aefa026> in <module>()\r\n      1 get_ipython().system('wget https://raw.githubusercontent.com/facebookresearch/pytorch3d/master/docs/tutorials/utils/camera_visualisation.py')\r\n----> 2 from camera_visualisation import plot_camera_scene\r\n      3 \r\n      4 get_ipython().system('mkdir data')\r\n      5 get_ipython().system('wget -P data https://raw.githubusercontent.com/facebookresearch/pytorch3d/master/docs/tutorials/data/camera_graph.pth')\r\n\r\nModuleNotFoundError: No module named 'camera_visualisation'\r\n\r\n---------------------------------------------------------------------------\r\nNOTE: If your import is failing due to a missing package, you can\r\nmanually install dependencies using either !pip or !apt.\r\n\r\nTo view examples of installing some common dependencies, click the\r\n\"Open Examples\" button below.\r\n\r\n\r\nAny ideas? Thank you so much for the help", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/141/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/119", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/119/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/119/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/119/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/119", "id": 585126880, "node_id": "MDU6SXNzdWU1ODUxMjY4ODA=", "number": 119, "title": "Gradient not calculated for transforms.matrix_to_quaternion", "user": {"login": "m-nez", "id": 11790614, "node_id": "MDQ6VXNlcjExNzkwNjE0", "avatar_url": "https://avatars.githubusercontent.com/u/11790614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-nez", "html_url": "https://github.com/m-nez", "followers_url": "https://api.github.com/users/m-nez/followers", "following_url": "https://api.github.com/users/m-nez/following{/other_user}", "gists_url": "https://api.github.com/users/m-nez/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-nez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-nez/subscriptions", "organizations_url": "https://api.github.com/users/m-nez/orgs", "repos_url": "https://api.github.com/users/m-nez/repos", "events_url": "https://api.github.com/users/m-nez/events{/privacy}", "received_events_url": "https://api.github.com/users/m-nez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bottler", "id": 669761, "node_id": "MDQ6VXNlcjY2OTc2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/669761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bottler", "html_url": "https://github.com/bottler", "followers_url": "https://api.github.com/users/bottler/followers", "following_url": "https://api.github.com/users/bottler/following{/other_user}", "gists_url": "https://api.github.com/users/bottler/gists{/gist_id}", "starred_url": "https://api.github.com/users/bottler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bottler/subscriptions", "organizations_url": "https://api.github.com/users/bottler/orgs", "repos_url": "https://api.github.com/users/bottler/repos", "events_url": "https://api.github.com/users/bottler/events{/privacy}", "received_events_url": "https://api.github.com/users/bottler/received_events", "type": "User", "site_admin": false}, {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-20T14:59:37Z", "updated_at": "2020-10-15T11:48:20Z", "closed_at": "2020-10-15T11:48:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "It looks like the gradient is not calculated for transforms.matrix_to_quaternion.\r\n\r\n```python\r\nimport pytorch3d.transforms\r\nimport torch\r\n\r\nmatrix = torch.eye(3, requires_grad=True)\r\ntarget = torch.Tensor([0.984808, 0, 0.174, 0])\r\n\r\noptimizer = torch.optim.Adam([matrix], lr=0.05)\r\noptimizer.zero_grad()\r\nq = pytorch3d.transforms.matrix_to_quaternion(\r\n    matrix\r\n)\r\nloss = torch.sum((q - target)**2)\r\nloss.backward()\r\noptimizer.step()\r\n\r\nprint(matrix)\r\n```\r\nAfter running the code above the matrix after optimizer step shouldn't contain NaNs, but it does.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/119/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/119/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/117", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/117/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/117/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/117/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/117", "id": 584756101, "node_id": "MDU6SXNzdWU1ODQ3NTYxMDE=", "number": 117, "title": "CUDA error: device-side assert triggered in sample_points_from_meshes function", "user": {"login": "rahuldey91", "id": 5558012, "node_id": "MDQ6VXNlcjU1NTgwMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/5558012?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rahuldey91", "html_url": "https://github.com/rahuldey91", "followers_url": "https://api.github.com/users/rahuldey91/followers", "following_url": "https://api.github.com/users/rahuldey91/following{/other_user}", "gists_url": "https://api.github.com/users/rahuldey91/gists{/gist_id}", "starred_url": "https://api.github.com/users/rahuldey91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rahuldey91/subscriptions", "organizations_url": "https://api.github.com/users/rahuldey91/orgs", "repos_url": "https://api.github.com/users/rahuldey91/repos", "events_url": "https://api.github.com/users/rahuldey91/events{/privacy}", "received_events_url": "https://api.github.com/users/rahuldey91/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-03-19T23:23:50Z", "updated_at": "2020-03-20T21:37:21Z", "closed_at": "2020-03-20T21:37:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi. First of all, thanks for developing this long-desired tool. Now, coming to the bug.\r\n\r\nI just started working with PyTorch3D and was trying the tutorial from here: https://github.com/facebookresearch/pytorch3d/blob/master/docs/tutorials/deform_source_mesh_to_target_mesh.ipynb\r\n\r\nI started with my own jupyter notebook to reproduce the code. However, when I tried to visualize the meshes, by calling the plot_pointcloud() function in the tutorial, I came across the following error:\r\n`plot_pointcloud(trg_mesh, \"Target mesh\")`\r\n```\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-39-1e1d27f1793b> in <module>\r\n      3 # print(trg_mesh._N)\r\n      4 # trg_mesh.valid\r\n----> 5 plot_pointcloud(trg_mesh, \"Target mesh\")\r\n      6 # plot_pointcloud(src_mesh, \"Source mesh\")\r\n\r\n<ipython-input-30-fa31b9ded440> in plot_pointcloud(mesh, title)\r\n      2     # Sample points uniformly from the surface of the mesh\r\n      3     print(mesh)\r\n----> 4     points = sample_points_from_meshes(mesh, 5000)\r\n      5     x, y, z = points.clone().detach().cpu().squeeze().unbind(1)\r\n      6     fig = plt.figure(figsize=(5, 5))\r\n\r\n~/miniconda3/envs/pytorch3d/lib/python3.6/site-packages/pytorch3d/ops/sample_points_from_meshes.py in sample_points_from_meshes(meshes, num_samples, return_normals)\r\n     39           be filled with 0.\r\n     40     \"\"\"\r\n---> 41     if meshes.isempty():\r\n     42         raise ValueError(\"Meshes are empty.\")\r\n     43 \r\n\r\n~/miniconda3/envs/pytorch3d/lib/python3.6/site-packages/pytorch3d/structures/meshes.py in isempty(self)\r\n    430             bool indicating whether there is any data.\r\n    431         \"\"\"\r\n--> 432         return self._N == 0 or self.valid.eq(False).all()\r\n    433 \r\n    434     def verts_list(self):\r\n\r\nRuntimeError: CUDA error: device-side assert triggered\r\n```\r\n\r\nI noticed the error was coming by the member mesh.valid. When I called that member directly from the script, I got similar error.\r\n`trg_mesh.valid`\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n~/miniconda3/envs/pytorch3d/lib/python3.6/site-packages/IPython/core/formatters.py in __call__(self, obj)\r\n    700                 type_pprinters=self.type_printers,\r\n    701                 deferred_pprinters=self.deferred_printers)\r\n--> 702             printer.pretty(obj)\r\n    703             printer.flush()\r\n    704             return stream.getvalue()\r\n\r\n~/miniconda3/envs/pytorch3d/lib/python3.6/site-packages/IPython/lib/pretty.py in pretty(self, obj)\r\n    392                         if cls is not object \\\r\n    393                                 and callable(cls.__dict__.get('__repr__')):\r\n--> 394                             return _repr_pprint(obj, self, cycle)\r\n    395 \r\n    396             return _default_pprint(obj, self, cycle)\r\n\r\n~/miniconda3/envs/pytorch3d/lib/python3.6/site-packages/IPython/lib/pretty.py in _repr_pprint(obj, p, cycle)\r\n    682     \"\"\"A pprint that just redirects to the normal repr function.\"\"\"\r\n    683     # Find newlines and replace them with p.break_()\r\n--> 684     output = repr(obj)\r\n    685     lines = output.splitlines()\r\n    686     with p.group():\r\n\r\n~/miniconda3/envs/pytorch3d/lib/python3.6/site-packages/torch/tensor.py in __repr__(self)\r\n    157         # characters to replace unicode characters with.\r\n    158         if sys.version_info > (3,):\r\n--> 159             return torch._tensor_str._str(self)\r\n    160         else:\r\n    161             if hasattr(sys.stdout, 'encoding'):\r\n\r\n~/miniconda3/envs/pytorch3d/lib/python3.6/site-packages/torch/_tensor_str.py in _str(self)\r\n    309                 tensor_str = _tensor_str(self.to_dense(), indent)\r\n    310             else:\r\n--> 311                 tensor_str = _tensor_str(self, indent)\r\n    312 \r\n    313     if self.layout != torch.strided:\r\n\r\n~/miniconda3/envs/pytorch3d/lib/python3.6/site-packages/torch/_tensor_str.py in _tensor_str(self, indent)\r\n    207     if self.dtype is torch.float16 or self.dtype is torch.bfloat16:\r\n    208         self = self.float()\r\n--> 209     formatter = _Formatter(get_summarized_data(self) if summarize else self)\r\n    210     return _tensor_str_with_formatter(self, indent, formatter, summarize)\r\n    211 \r\n\r\n~/miniconda3/envs/pytorch3d/lib/python3.6/site-packages/torch/_tensor_str.py in __init__(self, tensor)\r\n     81         if not self.floating_dtype:\r\n     82             for value in tensor_view:\r\n---> 83                 value_str = '{}'.format(value)\r\n     84                 self.max_width = max(self.max_width, len(value_str))\r\n     85 \r\n\r\n~/miniconda3/envs/pytorch3d/lib/python3.6/site-packages/torch/tensor.py in __format__(self, format_spec)\r\n    407     def __format__(self, format_spec):\r\n    408         if self.dim() == 0:\r\n--> 409             return self.item().__format__(format_spec)\r\n    410         return object.__format__(self, format_spec)\r\n    411 \r\n\r\nRuntimeError: CUDA error: device-side assert triggered\r\n```\r\n\r\nMy configuration is:\r\nUbuntu: 18.04\r\nPython: 3.6.10\r\nPytorch: 1.4.0\r\nPytorch3D: 0.1.1\r\nCUDA: 10.1\r\n\r\nThanks!\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/117/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/117/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/115", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/115/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/115/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/115/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/115", "id": 584316681, "node_id": "MDU6SXNzdWU1ODQzMTY2ODE=", "number": 115, "title": "meshes.extend causes problem with tensor.view", "user": {"login": "mich-sanna", "id": 54891577, "node_id": "MDQ6VXNlcjU0ODkxNTc3", "avatar_url": "https://avatars.githubusercontent.com/u/54891577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mich-sanna", "html_url": "https://github.com/mich-sanna", "followers_url": "https://api.github.com/users/mich-sanna/followers", "following_url": "https://api.github.com/users/mich-sanna/following{/other_user}", "gists_url": "https://api.github.com/users/mich-sanna/gists{/gist_id}", "starred_url": "https://api.github.com/users/mich-sanna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mich-sanna/subscriptions", "organizations_url": "https://api.github.com/users/mich-sanna/orgs", "repos_url": "https://api.github.com/users/mich-sanna/repos", "events_url": "https://api.github.com/users/mich-sanna/events{/privacy}", "received_events_url": "https://api.github.com/users/mich-sanna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gkioxari", "id": 4369065, "node_id": "MDQ6VXNlcjQzNjkwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/4369065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gkioxari", "html_url": "https://github.com/gkioxari", "followers_url": "https://api.github.com/users/gkioxari/followers", "following_url": "https://api.github.com/users/gkioxari/following{/other_user}", "gists_url": "https://api.github.com/users/gkioxari/gists{/gist_id}", "starred_url": "https://api.github.com/users/gkioxari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gkioxari/subscriptions", "organizations_url": "https://api.github.com/users/gkioxari/orgs", "repos_url": "https://api.github.com/users/gkioxari/repos", "events_url": "https://api.github.com/users/gkioxari/events{/privacy}", "received_events_url": "https://api.github.com/users/gkioxari/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-03-19T10:39:39Z", "updated_at": "2020-03-20T09:58:43Z", "closed_at": "2020-03-20T03:17:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "simple code where an object of class \"Meshes\" is extended from 1 to a batch size > 1 via `meshes.extend(N)` causes:\r\n\r\n```\r\n  File \"/[...]/env/lib/python3.6/site-packages/pytorch3d/structures/utils.py\", line 194, in padded_to_packed\r\n    x_packed = x.view(-1, D)  # flatten padded\r\nRuntimeError: view size is not compatible with input tensor's size and stride (at least one dimension spans across two contiguous subspaces). Use .reshape(...) instead.\r\n```\r\n\r\ncode to replicate:\r\n```\r\nimport torch\r\nfrom pytorch3d.renderer import OpenGLPerspectiveCameras, BlendParams, \\\r\n    RasterizationSettings, MeshRasterizer, MeshRenderer, TexturedSoftPhongShader, DirectionalLights\r\nimport numpy as np\r\nfrom pytorch3d.io import load_objs_as_meshes\r\n\r\ndevice = torch.device(\"cuda:0\")\r\n\r\nmeshes = load_objs_as_meshes([\"./models/cow_mesh/cow.obj\"]).to(device)\r\nmeshes = meshes.extend(2)\r\n\r\n\r\ncameras = OpenGLPerspectiveCameras(device=device)\r\n\r\nblend_params = BlendParams(sigma=1e-4, gamma=1e-4, background_color=(0., 0., 0.))\r\n\r\nraster_settings = RasterizationSettings(\r\n    blur_radius=np.log(1. / 1e-4 - 1.) * blend_params.sigma,\r\n    faces_per_pixel=100\r\n)\r\n\r\nlights = DirectionalLights(device=device)\r\n\r\nrenderer = MeshRenderer(\r\n    rasterizer=MeshRasterizer(\r\n        cameras=cameras, raster_settings=raster_settings\r\n    ),\r\n    shader=TexturedSoftPhongShader(blend_params=blend_params, lights=lights)\r\n)\r\n\r\nimages = renderer(meshes_world=meshes)\r\n```\r\n\r\nin other versions of my own code i get the error somewhere else, e.g.:\r\n```\r\n./renderer/mesh/texturing.py\", line 56, in interpolate_texture_map\r\n    pixel_uvs = pixel_uvs.permute(0, 3, 1, 2, 4).view(N * K, H_out, W_out, 2)\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/115/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/115/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/110", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/110/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/110/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/110/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/110", "id": 580217683, "node_id": "MDU6SXNzdWU1ODAyMTc2ODM=", "number": 110, "title": "nan in Rasterizer gradients", "user": {"login": "shubhtuls", "id": 2220731, "node_id": "MDQ6VXNlcjIyMjA3MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/2220731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shubhtuls", "html_url": "https://github.com/shubhtuls", "followers_url": "https://api.github.com/users/shubhtuls/followers", "following_url": "https://api.github.com/users/shubhtuls/following{/other_user}", "gists_url": "https://api.github.com/users/shubhtuls/gists{/gist_id}", "starred_url": "https://api.github.com/users/shubhtuls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shubhtuls/subscriptions", "organizations_url": "https://api.github.com/users/shubhtuls/orgs", "repos_url": "https://api.github.com/users/shubhtuls/repos", "events_url": "https://api.github.com/users/shubhtuls/events{/privacy}", "received_events_url": "https://api.github.com/users/shubhtuls/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-03-12T21:04:17Z", "updated_at": "2020-04-24T04:05:36Z", "closed_at": "2020-04-24T04:04:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Description\r\nI encountered a case where two vertices of a triangle had same screen-space XY coordinates, and this led to a 'nan' value in the gradient.\r\n\r\nSome interesting things I noted:\r\n- Using CPU instead of GPU (Quadro GP100 in this case) leads to no issues\r\n- Using CPU vs GPU also gives different pix2face in forward pass of the rasterizer. The CPU run ignores the offending triangle's contribution, the GPU run does not. I am not sure why this happens, but I suspect this is what needs to be fixed.\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\n\r\n```python\r\nimport torch\r\n\r\nimport pytorch3d\r\nimport pytorch3d.renderer\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\n\r\ndevice = torch.device(\"cuda:0\")\r\n\r\n# using cpu instead of gpu leads no nan values!\r\n# device = torch.device(\"cpu\")\r\n\r\n# Note that v0 and v2 of the triangle have same x,y but different Z, so it's not a degenerate case (just a triangle that is parallel to camera)\r\n# These are actual vertex values that occured during a run\r\n# However, my attempts to manually create a simpler vertex location that reproduced this were unsuccessful\r\nvs = torch.Tensor([[0.7922, -0.1992,  6.8850],[0.8408, -0.1622,  6.8568],[0.7922, -0.1992,  6.89]]).to(device)\r\nfs = torch.Tensor([[0,1,2]]).to(device)\r\n\r\nvs.requires_grad = True\r\n\r\nmeshes = pytorch3d.structures.Meshes([vs],[fs])\r\ncameras = pytorch3d.renderer.OpenGLOrthographicCameras(znear=0, zfar=1, device=device)\r\n\r\nblend_params = pytorch3d.renderer.BlendParams(sigma=1e-4, gamma=1e-4)\r\nmask_raster_settings = pytorch3d.renderer.RasterizationSettings(\r\n    image_size=256, \r\n    blur_radius=np.log(1. / 1e-4 - 1.) * blend_params.sigma, \r\n    faces_per_pixel=20,\r\n    bin_size=0\r\n)\r\nmask_rasterizer = pytorch3d.renderer.MeshRasterizer(\r\n    cameras=cameras, \r\n    raster_settings=mask_raster_settings\r\n)\r\nmask_shader = pytorch3d.renderer.SoftSilhouetteShader(blend_params=blend_params)\r\nmask_renderer = pytorch3d.renderer.MeshRenderer(mask_rasterizer, mask_shader)\r\n\r\nimg_mask = mask_renderer(meshes)\r\n\r\nimg_mask[0,:,:,3].mean().backward()\r\nprint(vs.grad)\r\n\r\nplt.imshow(img_mask[0,:,:,3].detach().cpu().numpy())\r\nplt.show()\r\n```\r\n\r\n    tensor([[nan, nan, nan],\r\n            [nan, nan, nan],\r\n            [nan, nan, nan]], device='cuda:0')\r\n\r\n\r\n![output_3_0](https://user-images.githubusercontent.com/2220731/76566143-8352f700-6482-11ea-91cb-5c1ebc80b162.png)\r\n\r\n\r\n\r\n\r\n```python\r\n## debugging via checking barycentric coords\r\npix2face, _, barycentric_coords, _ = mask_rasterizer(meshes)\r\n(pix2face == 0).nonzero()[0]\r\n```\r\n\r\n\r\n\r\n\r\n    tensor([  0, 147,  17,   0], device='cuda:0')\r\n\r\n\r\n\r\n\r\n```python\r\nprint(barycentric_coords[0, 147, 17, 0])\r\n```\r\n\r\n    tensor([-3.5279e+26,  0.0000e+00,  3.5279e+26], device='cuda:0',\r\n           grad_fn=<SelectBackward>)\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/110/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/110/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/97", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/97/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/97/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/97", "id": 575097614, "node_id": "MDU6SXNzdWU1NzUwOTc2MTQ=", "number": 97, "title": "Error in Batched Rendering with PhongShader or GouraudShader", "user": {"login": "shubhtuls", "id": 2220731, "node_id": "MDQ6VXNlcjIyMjA3MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/2220731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shubhtuls", "html_url": "https://github.com/shubhtuls", "followers_url": "https://api.github.com/users/shubhtuls/followers", "following_url": "https://api.github.com/users/shubhtuls/following{/other_user}", "gists_url": "https://api.github.com/users/shubhtuls/gists{/gist_id}", "starred_url": "https://api.github.com/users/shubhtuls/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shubhtuls/subscriptions", "organizations_url": "https://api.github.com/users/shubhtuls/orgs", "repos_url": "https://api.github.com/users/shubhtuls/repos", "events_url": "https://api.github.com/users/shubhtuls/events{/privacy}", "received_events_url": "https://api.github.com/users/shubhtuls/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284752, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzUy", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good for newcomers"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-03-04T02:43:47Z", "updated_at": "2020-03-17T16:43:13Z", "closed_at": "2020-03-17T16:43:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "I run into errors when trying to use batched rendering in case of meshes with a per-vertex texture, using both SoftPhongShader or SoftGouraudShader.\r\n\r\nTo reproduce the error, one can use the [mesh rendering notebook](https://github.com/facebookresearch/pytorch3d/blob/master/docs/tutorials/render_textured_meshes.ipynb) and modify the last few lines in the 'Create a Renderer' cell to the following:\r\n\r\n```\r\nfrom pytorch3d.renderer import (\r\n    SoftPhongShader,\r\n    SoftGouraudShader\r\n)\r\n \r\n# Ignore texture of loaded mesh and create a mesh with per-vertex texture\r\nverts = mesh.verts_list()\r\nfaces = mesh.faces_list()\r\nverts_rgb = torch.ones_like(verts[0][None,:,:])\r\nmesh = Meshes(verts, faces, textures=Textures(verts_rgb=verts_rgb))\r\n\r\n# Create a renderer by composing a rasterizer and a shader.\r\nrenderer = MeshRenderer(\r\n    rasterizer=MeshRasterizer(\r\n        cameras=cameras, \r\n        raster_settings=raster_settings\r\n    ),\r\n    # both 'SoftPhongShader' and 'SoftGouraudShader' fail, but with different errors\r\n    #shader=SoftPhongShader(\r\n    shader=SoftGouraudShader(\r\n        device=device, \r\n        cameras=cameras,\r\n        lights=lights\r\n    )\r\n)\r\n```\r\n\r\nAll the examples except the batched rendering run as expected. However, the batched rendering produces issues for either SoftPhong or SoftGouraud shaders (I think other shaders might also have similar issues).\r\n\r\nFor the Phong one, the error log is:\r\n```\r\n~/code/pytorch3d/pytorch3d/renderer/mesh/shader.py in forward(self, fragments, meshes, **kwargs)\r\n    111 \r\n    112     def forward(self, fragments, meshes, **kwargs) -> torch.Tensor:\r\n--> 113         texels = interpolate_vertex_colors(fragments, meshes)\r\n    114         cameras = kwargs.get(\"cameras\", self.cameras)\r\n    115         lights = kwargs.get(\"lights\", self.lights)\r\n\r\n~/code/pytorch3d/pytorch3d/renderer/mesh/texturing.py in interpolate_vertex_colors(fragments, meshes)\r\n    109         fragments.pix_to_face.\r\n    110     \"\"\"\r\n--> 111     vertex_textures = meshes.textures.verts_rgb_padded().view(-1, 3)  # (V, C)\r\n    112     vertex_textures = vertex_textures[meshes.verts_padded_to_packed_idx(), :]\r\n    113     faces_packed = meshes.faces_packed()\r\n\r\nRuntimeError: view size is not compatible with input tensor's size and stride (at least one dimension spans across two contiguous subspaces). Use .reshape(...) instead.\r\n```\r\n\r\nFor the Gouraud one, the error log is:\r\n```\r\n~/code/pytorch3d/pytorch3d/renderer/mesh/shading.py in gouraud_shading(meshes, fragments, lights, cameras, materials)\r\n    118     if len(meshes) > 1:\r\n    119         lights = lights.clone().gather_props(vert_to_mesh_idx)\r\n--> 120         cameras = cameras.clone().gather_props(vert_to_mesh_idx)\r\n    121         materials = materials.clone().gather_props(vert_to_mesh_idx)\r\n    122 \r\n\r\n~/code/pytorch3d/pytorch3d/renderer/utils.py in gather_props(self, batch_idx)\r\n    236                         msg = \"batch_idx cannot have more dimensions than %s. \"\r\n    237                         msg += \"got shape %r and %s has shape %r\"\r\n--> 238                         raise ValueError(msg % (k, idx_dims, k, tensor_dims))\r\n    239                     if idx_dims != tensor_dims:\r\n    240                         # To use torch.gather the index tensor (batch_idx) has\r\n\r\nValueError: batch_idx cannot have more dimensions than T. got shape torch.Size([58600, 3, 3]) and T has shape torch.Size([20, 3])\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/97/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/97/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/96", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/96/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/96/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/96/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/96", "id": 574474086, "node_id": "MDU6SXNzdWU1NzQ0NzQwODY=", "number": 96, "title": "R is not an valid rotation matrix problem", "user": {"login": "tjdhg456", "id": 52290290, "node_id": "MDQ6VXNlcjUyMjkwMjkw", "avatar_url": "https://avatars.githubusercontent.com/u/52290290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjdhg456", "html_url": "https://github.com/tjdhg456", "followers_url": "https://api.github.com/users/tjdhg456/followers", "following_url": "https://api.github.com/users/tjdhg456/following{/other_user}", "gists_url": "https://api.github.com/users/tjdhg456/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjdhg456/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjdhg456/subscriptions", "organizations_url": "https://api.github.com/users/tjdhg456/orgs", "repos_url": "https://api.github.com/users/tjdhg456/repos", "events_url": "https://api.github.com/users/tjdhg456/events{/privacy}", "received_events_url": "https://api.github.com/users/tjdhg456/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284750, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzUw", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/duplicate", "name": "duplicate", "color": "cfd3d7", "default": true, "description": "This issue or pull request already exists"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-03T07:38:03Z", "updated_at": "2020-03-03T11:17:39Z", "closed_at": "2020-03-03T11:17:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "If you do not know the root cause of the problem / bug, and wish someone to help you, please\r\npost according to this template:\r\n\r\n## \ud83d\udc1b Bugs / Unexpected behaviors\r\n<!-- A clear and concise description of the issue -->\r\nHello, At first thank you for sharing the wonderful library; pytorch3d. It was really helpful.\r\n\r\nWhen trying to optimize the camera position by following the tutorial 4, I encountered 'R is not a valid rotation matrix' problem. \r\n\r\nI only changed the obj file (my own file).\r\nWhen the problem happened ('R is not a valid rotation matrix'), the camera position parameter changed into nan, which means couldn't be backpropagated.\r\n\r\nI checked similar issues, but there is also no solution. So raise the issue again.\r\nThank you.\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\nPlease include the following (depending on what the issue is):\r\n\r\n1. Any changes you made (`git diff`) or code you wrote\r\n\r\nI only used one of the ShapeNet chair object files.\r\nanother partis same.\r\n\r\n2. The exact command(s) you ran:\r\n3. What you observed (including the full logs):\r\n\r\n\r\nPlease also simplify the steps as much as possible so they do not require additional resources to\r\n\t run, such as a private dataset.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/96/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/96/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/94", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/94/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/94/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/94/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/94", "id": 574234746, "node_id": "MDU6SXNzdWU1NzQyMzQ3NDY=", "number": 94, "title": "Batch lighting position is not working for point light", "user": {"login": "Jiayi-Wang-MPI", "id": 61058020, "node_id": "MDQ6VXNlcjYxMDU4MDIw", "avatar_url": "https://avatars.githubusercontent.com/u/61058020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jiayi-Wang-MPI", "html_url": "https://github.com/Jiayi-Wang-MPI", "followers_url": "https://api.github.com/users/Jiayi-Wang-MPI/followers", "following_url": "https://api.github.com/users/Jiayi-Wang-MPI/following{/other_user}", "gists_url": "https://api.github.com/users/Jiayi-Wang-MPI/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jiayi-Wang-MPI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jiayi-Wang-MPI/subscriptions", "organizations_url": "https://api.github.com/users/Jiayi-Wang-MPI/orgs", "repos_url": "https://api.github.com/users/Jiayi-Wang-MPI/repos", "events_url": "https://api.github.com/users/Jiayi-Wang-MPI/events{/privacy}", "received_events_url": "https://api.github.com/users/Jiayi-Wang-MPI/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284753, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzUz", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Extra attention is needed"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2020-03-02T20:40:13Z", "updated_at": "2021-06-14T19:12:31Z", "closed_at": "2021-06-14T19:12:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "The diffuse and specular function of point light gives a runtime error about mismatched tensor size when the input locations is batched. This is due to tensor broadcasting. Is batch light location supported?", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/94/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/94/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/82", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/82/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/82/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/82", "id": 569440621, "node_id": "MDU6SXNzdWU1Njk0NDA2MjE=", "number": 82, "title": "CUDA Multinomial Bug in Mesh Sampling", "user": {"login": "weichengkuo", "id": 769205, "node_id": "MDQ6VXNlcjc2OTIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/769205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weichengkuo", "html_url": "https://github.com/weichengkuo", "followers_url": "https://api.github.com/users/weichengkuo/followers", "following_url": "https://api.github.com/users/weichengkuo/following{/other_user}", "gists_url": "https://api.github.com/users/weichengkuo/gists{/gist_id}", "starred_url": "https://api.github.com/users/weichengkuo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weichengkuo/subscriptions", "organizations_url": "https://api.github.com/users/weichengkuo/orgs", "repos_url": "https://api.github.com/users/weichengkuo/repos", "events_url": "https://api.github.com/users/weichengkuo/events{/privacy}", "received_events_url": "https://api.github.com/users/weichengkuo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2020-02-23T05:23:30Z", "updated_at": "2020-06-12T08:54:34Z", "closed_at": "2020-02-25T19:48:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using Mesh R-CNN evaluation pipeline that depends on Pytorch3D. Everything works fine for the most part and I was able to reproduce the numbers in the paper. However, every once in a while I ran into the following error for meshes that look normal to me. I tried printing the mesh tensor and they seem reasonable. I noticed that in line 62 of pytorch3d/ops/sample_points_from_meshes.py there's a TODO to fix a multinomial bug. I wonder if that's exactly what I'm running into here.\r\n\r\nIs there anything I can do to avoid this? \r\n\r\n`\r\n/opt/conda/conda-bld/pytorch_1579027003190/work/aten/src/ATen/native/cuda/MultinomialKernel.cu:87: int at::native::<unnamed>::binarySearchForMultinomial(scalar_t *, scalar_t *, int, scalar_t) [with scalar_t = float]: block: [21,0,0], thread: [0,1,0] Assertion `cumdist[size - 1] > static_cast<scalar_t>(0)` failed.                                           /opt/conda/conda-bld/pytorch_1579027003190/work/aten/src/ATen/native/cuda/MultinomialKernel.cu:87: int at::native::<unnamed>::binarySearchForMultinomial(scalar_t *, scalar_t *, int, scalar_t) [with scalar_t = float]: block: [21,0,0], thread: [0,2,0] Assertion `cumdist[size - 1] > static_cast<scalar_t>(0)` failed.                                           /opt/conda/conda-bld/pytorch_1579027003190/work/aten/src/ATen/native/cuda/MultinomialKernel.cu:87: int at::native::<unnamed>::binarySearchForMultinomial(scalar_t *, scalar_t *, int, scalar_t) [with scalar_t = float]: block: [21,0,0], thread: [0,0,0] Assertion `cumdist[size - 1] > static_cast<scalar_t>(0)` failed.                                           /opt/conda/conda-bld/pytorch_1579027003190/work/aten/src/ATen/native/cuda/MultinomialKernel.cu:87: int at::native::<unnamed>::binarySearchForMultinomial(scalar_t *, scalar_t *, int, scalar_t) [with scalar_t = float]: block: [21,0,0], thread: [0,3,0] Assertion `cumdist[size - 1] > static_cast<scalar_t>(0)` failed.                                           Traceback (most recent call last):                                                                                       File \"tools/train_net.py\", line 292, in <module>                                                                         args=(args,),                                                                                                        File \"/usr/local/google/home/weicheng/Documents/research/detectron2_repo/detectron2/engine/launch.py\", line 52, in launch                                                                                                                       main_func(*args)                                                                                                     File \"tools/train_net.py\", line 274, in main                                                                             args.num_eval_images)                                                                                                File \"tools/train_net.py\", line 213, in eval_no_predict                                                                  results_i = evaluation_on_dataset(model_preds, evaluator)                                                            File \"/usr/local/google/home/weicheng/Documents/research/detectron2_repo/detectron2/evaluation/evaluator.py\", line 185, in evaluation_on_dataset                                                                                                results = evaluator.evaluate()                                                                                       File \"/google/src/cloud/weicheng/movemesh/google3/third_party/py/cadretinanet/meshrcnn/meshrcnn/evaluation/pix3d_evaluation.py\", line 170, in evaluate                                                                                          self._eval_predictions()                                                                                             File \"/google/src/cloud/weicheng/movemesh/google3/third_party/py/cadretinanet/meshrcnn/meshrcnn/evaluation/pix3d_evaluation.py\", line 192, in _eval_predictions                                                                                 vis_output_name=self._vis_output_name,                                                                               File \"/google/src/cloud/weicheng/movemesh/google3/third_party/py/cadretinanet/meshrcnn/meshrcnn/evaluation/pix3d_evaluation.py\", line 443, in evaluate_for_pix3d                                                                                shape_metrics = compare_meshes(meshes, gt_mesh, reduce=False)                                                        File \"/usr/local/google/home/weicheng/Documents/research/miniconda3/envs/pytorch3d2/lib/python3.6/site-packages/torch/autograd/grad_mode.py\", line 49, in decorate_no_grad                                                                      return func(*args, **kwargs)                                                                                         File \"/google/src/cloud/weicheng/movemesh/google3/third_party/py/cadretinanet/meshrcnn/meshrcnn/utils/metrics.py\", line 68, in compare_meshes                                                                                                   pred_points, pred_normals = _sample_meshes(pred_meshes, num_samples_pred)                                            File \"/google/src/cloud/weicheng/movemesh/google3/third_party/py/cadretinanet/meshrcnn/meshrcnn/utils/metrics.py\", line 153, in _sample_meshes                                                                                                  verts, normals = sample_points_from_meshes(meshes, num_samples, return_normals=True)                                 File \"/usr/local/google/home/weicheng/Documents/research/miniconda3/envs/pytorch3d2/lib/python3.6/site-packages/pytorch3d/ops/sample_points_from_meshes.py\", line 66, in sample_points_from_meshes                                              print(meshes.valid)                                                                                                  File \"/usr/local/google/home/weicheng/Documents/research/miniconda3/envs/pytorch3d2/lib/python3.6/site-packages/torch/tensor.py\", line 159, in __repr__                                                                                         return torch._tensor_str._str(self)                                                                                  File \"/usr/local/google/home/weicheng/Documents/research/miniconda3/envs/pytorch3d2/lib/python3.6/site-packages/torch/_tensor_str.py\", line 311, in _str                                                                                        tensor_str = _tensor_str(self, indent)                                                                               File \"/usr/local/google/home/weicheng/Documents/research/miniconda3/envs/pytorch3d2/lib/python3.6/site-packages/torch/_tensor_str.py\", line 209, in _tensor_str                                                                                 formatter = _Formatter(get_summarized_data(self) if summarize else self)                                             File \"/usr/local/google/home/weicheng/Documents/research/miniconda3/envs/pytorch3d2/lib/python3.6/site-packages/torch/_tensor_str.py\", line 83, in __init__                                                                                     value_str = '{}'.format(value)                                                                                       File \"/usr/local/google/home/weicheng/Documents/research/miniconda3/envs/pytorch3d2/lib/python3.6/site-packages/torch/tensor.py\", line 409, in __format__                                                                                       return self.item().__format__(format_spec)                                                                         RuntimeError: CUDA error: device-side assert triggered\r\n`", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/82/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/82/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/78", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/78/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/78/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/78", "id": 568293716, "node_id": "MDU6SXNzdWU1NjgyOTM3MTY=", "number": 78, "title": "Rendering is flipped", "user": {"login": "HectorAnadon", "id": 12595599, "node_id": "MDQ6VXNlcjEyNTk1NTk5", "avatar_url": "https://avatars.githubusercontent.com/u/12595599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HectorAnadon", "html_url": "https://github.com/HectorAnadon", "followers_url": "https://api.github.com/users/HectorAnadon/followers", "following_url": "https://api.github.com/users/HectorAnadon/following{/other_user}", "gists_url": "https://api.github.com/users/HectorAnadon/gists{/gist_id}", "starred_url": "https://api.github.com/users/HectorAnadon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HectorAnadon/subscriptions", "organizations_url": "https://api.github.com/users/HectorAnadon/orgs", "repos_url": "https://api.github.com/users/HectorAnadon/repos", "events_url": "https://api.github.com/users/HectorAnadon/events{/privacy}", "received_events_url": "https://api.github.com/users/HectorAnadon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 21, "created_at": "2020-02-20T13:18:56Z", "updated_at": "2023-01-01T18:07:34Z", "closed_at": "2020-03-06T14:59:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI believe that the rendering is being flipped in the X axis. For example, if we see the image render in the tutorial [render_textured_meshes](https://github.com/facebookresearch/pytorch3d/blob/master/docs/tutorials/render_textured_meshes.ipynb) the image looks like this: \r\n![image](https://user-images.githubusercontent.com/12595599/74937118-bd812980-53eb-11ea-85da-7c0035fd0a0b.png)\r\nHowever, in meshlab\r\n![Screenshot from 2020-02-20 14-12-36](https://user-images.githubusercontent.com/12595599/74937151-cbcf4580-53eb-11ea-83d8-bdbbe49af487.png)\r\nYou can see in the texture that the eyes are in the other direction. It is not the texture mapping as I have tested with non-symmetric objs.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/78/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/78/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/63", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/63/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/63/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/63/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/63", "id": 565792877, "node_id": "MDU6SXNzdWU1NjU3OTI4Nzc=", "number": 63, "title": "Cuda runtime error during mesh optimization", "user": {"login": "vilhub", "id": 10402864, "node_id": "MDQ6VXNlcjEwNDAyODY0", "avatar_url": "https://avatars.githubusercontent.com/u/10402864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vilhub", "html_url": "https://github.com/vilhub", "followers_url": "https://api.github.com/users/vilhub/followers", "following_url": "https://api.github.com/users/vilhub/following{/other_user}", "gists_url": "https://api.github.com/users/vilhub/gists{/gist_id}", "starred_url": "https://api.github.com/users/vilhub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vilhub/subscriptions", "organizations_url": "https://api.github.com/users/vilhub/orgs", "repos_url": "https://api.github.com/users/vilhub/repos", "events_url": "https://api.github.com/users/vilhub/events{/privacy}", "received_events_url": "https://api.github.com/users/vilhub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-02-15T18:49:27Z", "updated_at": "2020-03-17T19:25:33Z", "closed_at": "2020-03-17T19:25:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nFirst of all, fantastic work I love it :) \r\nI'm modifying the mesh deformation code to learn a mesh from 2D views. The optimization process starts but after about 100 optimization steps, the code crashes with the following (the log is output with `CUDA_LAUNCH_BLOCKING=1`).\r\n```\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-17-d220a60da988> in <module>\r\n     29     # We sample 5k points from the surface of each mesh\r\n     30     sample_trg = sample_points_from_meshes(trg_mesh, 5000)\r\n---> 31     sample_src = sample_points_from_meshes(new_src_mesh, 5000)\r\n     32 \r\n\r\n~/coding/python/pytorch3d/env/lib/python3.7/site-packages/pytorch3d/ops/sample_points_from_meshes.py in sample_points_from_meshes(meshes, num_samples, return_normals)\r\n     64             num_samples, replacement=True\r\n     65         )  # (N, num_samples)\r\n---> 66         sample_face_idxs += mesh_to_face[meshes.valid].view(num_valid_meshes, 1)\r\n     67 \r\n     68     # Get the vertex coordinates of the sampled faces.\r\n\r\nRuntimeError: cuda runtime error (710) : device-side assert triggered at /pytorch/aten/src/THC/THCGeneral.cpp:313\r\n```\r\nThe error could be related to the other issue [here](https://github.com/facebookresearch/pytorch3d/issues/62) but I'm not sure if it's the same root cause. The error seems to happen at different points in the optimization process depending on parameters like loss weights, optimizer used.\r\n\r\nPython : 3.7.5\r\nPytorch : 1.4.0\r\nCUDA : 10.2\r\nUbuntu : 19.10\r\n\r\nThanks!", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/63/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/63/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/61", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/61/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/61/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/61", "id": 565411740, "node_id": "MDU6SXNzdWU1NjU0MTE3NDA=", "number": 61, "title": "Soft blending is not differentiable", "user": {"login": "Jiayi-Wang-MPI", "id": 61058020, "node_id": "MDQ6VXNlcjYxMDU4MDIw", "avatar_url": "https://avatars.githubusercontent.com/u/61058020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jiayi-Wang-MPI", "html_url": "https://github.com/Jiayi-Wang-MPI", "followers_url": "https://api.github.com/users/Jiayi-Wang-MPI/followers", "following_url": "https://api.github.com/users/Jiayi-Wang-MPI/following{/other_user}", "gists_url": "https://api.github.com/users/Jiayi-Wang-MPI/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jiayi-Wang-MPI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jiayi-Wang-MPI/subscriptions", "organizations_url": "https://api.github.com/users/Jiayi-Wang-MPI/orgs", "repos_url": "https://api.github.com/users/Jiayi-Wang-MPI/repos", "events_url": "https://api.github.com/users/Jiayi-Wang-MPI/events{/privacy}", "received_events_url": "https://api.github.com/users/Jiayi-Wang-MPI/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284751, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzUx", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-14T15:54:57Z", "updated_at": "2020-03-03T11:18:39Z", "closed_at": "2020-03-03T11:18:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "The current implementations of sigmoid_alpha_blend and softmax_rgb_blend in blending.py are not differentiable. This is due the to the replacement of cumulative product with the exponential of log sums for the alpha calculation. When prob_map is 1.0, the gradient is not defined. \r\n\r\n```\r\n# alpha = 1.0 - torch.cumprod((1.0 - prob), dim=-1)[..., -1]\r\nalpha = 1.0 - torch.exp(torch.log((1.0 - prob_map)).sum(dim=-1))\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/61/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/61/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/58", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/58/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/58/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/58", "id": 565074673, "node_id": "MDU6SXNzdWU1NjUwNzQ2NzM=", "number": 58, "title": "Error in class transforms.Translate", "user": {"login": "hfutcgncas", "id": 8881290, "node_id": "MDQ6VXNlcjg4ODEyOTA=", "avatar_url": "https://avatars.githubusercontent.com/u/8881290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hfutcgncas", "html_url": "https://github.com/hfutcgncas", "followers_url": "https://api.github.com/users/hfutcgncas/followers", "following_url": "https://api.github.com/users/hfutcgncas/following{/other_user}", "gists_url": "https://api.github.com/users/hfutcgncas/gists{/gist_id}", "starred_url": "https://api.github.com/users/hfutcgncas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hfutcgncas/subscriptions", "organizations_url": "https://api.github.com/users/hfutcgncas/orgs", "repos_url": "https://api.github.com/users/hfutcgncas/repos", "events_url": "https://api.github.com/users/hfutcgncas/events{/privacy}", "received_events_url": "https://api.github.com/users/hfutcgncas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-14T03:05:37Z", "updated_at": "2020-04-21T23:18:05Z", "closed_at": "2020-02-14T09:24:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "## \ud83d\udc1b Error in class **pytorch3d.transforms.Translate**\r\n\r\nI suppose the \u201ctranslate\u201d part should be in the last column of matrix, not in the last row. \r\n\r\n## Instructions To Reproduce the Issue:\r\nwhen I wrote the code like this:\r\n```\r\nimport pytorch3d.transforms as p3d_t\r\nt = p3d_t.Transform3d().translate(1,2,3)\r\nprint(t.get_matrix())\r\n```\r\nI got\r\n```\r\ntensor([[[1., 0., 0., 0.],\r\n         [0., 1., 0., 0.],\r\n         [0., 0., 1., 0.],\r\n         [1., 2., 3., 1.]]])\r\n```\r\n\r\nwhile I suppose the correct response should be \r\n```\r\ntensor([[[1., 0., 0., 1.],\r\n         [0., 1., 0., 2.],\r\n         [0., 0., 1., 3.],\r\n         [0., 0., 0., 1.]]])\r\n```\r\n\r\nI suppose chang the ```mat[:, :3, 3]``` to ```mat[:, 3, :3]``` in line 388 and 394 of  pytorch3d.transforms would fix it.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/58/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/58/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/50", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/50/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/50/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/50", "id": 563409966, "node_id": "MDU6SXNzdWU1NjM0MDk5NjY=", "number": 50, "title": " R is not a valid rotation matrix", "user": {"login": "jahaniam", "id": 13435607, "node_id": "MDQ6VXNlcjEzNDM1NjA3", "avatar_url": "https://avatars.githubusercontent.com/u/13435607?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jahaniam", "html_url": "https://github.com/jahaniam", "followers_url": "https://api.github.com/users/jahaniam/followers", "following_url": "https://api.github.com/users/jahaniam/following{/other_user}", "gists_url": "https://api.github.com/users/jahaniam/gists{/gist_id}", "starred_url": "https://api.github.com/users/jahaniam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jahaniam/subscriptions", "organizations_url": "https://api.github.com/users/jahaniam/orgs", "repos_url": "https://api.github.com/users/jahaniam/repos", "events_url": "https://api.github.com/users/jahaniam/events{/privacy}", "received_events_url": "https://api.github.com/users/jahaniam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284755, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzU1", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Further information is requested"}], "state": "closed", "locked": false, "assignee": {"login": "davnov134", "id": 3605260, "node_id": "MDQ6VXNlcjM2MDUyNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3605260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davnov134", "html_url": "https://github.com/davnov134", "followers_url": "https://api.github.com/users/davnov134/followers", "following_url": "https://api.github.com/users/davnov134/following{/other_user}", "gists_url": "https://api.github.com/users/davnov134/gists{/gist_id}", "starred_url": "https://api.github.com/users/davnov134/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davnov134/subscriptions", "organizations_url": "https://api.github.com/users/davnov134/orgs", "repos_url": "https://api.github.com/users/davnov134/repos", "events_url": "https://api.github.com/users/davnov134/events{/privacy}", "received_events_url": "https://api.github.com/users/davnov134/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "davnov134", "id": 3605260, "node_id": "MDQ6VXNlcjM2MDUyNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3605260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davnov134", "html_url": "https://github.com/davnov134", "followers_url": "https://api.github.com/users/davnov134/followers", "following_url": "https://api.github.com/users/davnov134/following{/other_user}", "gists_url": "https://api.github.com/users/davnov134/gists{/gist_id}", "starred_url": "https://api.github.com/users/davnov134/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davnov134/subscriptions", "organizations_url": "https://api.github.com/users/davnov134/orgs", "repos_url": "https://api.github.com/users/davnov134/repos", "events_url": "https://api.github.com/users/davnov134/events{/privacy}", "received_events_url": "https://api.github.com/users/davnov134/received_events", "type": "User", "site_admin": false}, {"login": "nikhilaravi", "id": 5912647, "node_id": "MDQ6VXNlcjU5MTI2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5912647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhilaravi", "html_url": "https://github.com/nikhilaravi", "followers_url": "https://api.github.com/users/nikhilaravi/followers", "following_url": "https://api.github.com/users/nikhilaravi/following{/other_user}", "gists_url": "https://api.github.com/users/nikhilaravi/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhilaravi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhilaravi/subscriptions", "organizations_url": "https://api.github.com/users/nikhilaravi/orgs", "repos_url": "https://api.github.com/users/nikhilaravi/repos", "events_url": "https://api.github.com/users/nikhilaravi/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhilaravi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2020-02-11T18:59:20Z", "updated_at": "2022-09-20T12:57:22Z", "closed_at": "2020-10-01T01:01:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Tried to run the _'camera_position_optimization_with_differentiable_rendering.ipynb_' with my custom obj. Although it works fine for the provided obj, for my custom obj the `look_at_view_transform` and `look_at_rotation` sometime returns :\r\n\r\n `R is not a valid rotation matrix`  which is weird! ", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/50/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/50/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/34", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/34/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/34/events", "html_url": "https://github.com/facebookresearch/pytorch3d/pull/34", "id": 562113068, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyNzgzNTU2", "number": 34, "title": "fix small typo in deform_source_mesh_to_target_mesh.ipynb", "user": {"login": "gnoilednad", "id": 8944165, "node_id": "MDQ6VXNlcjg5NDQxNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/8944165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnoilednad", "html_url": "https://github.com/gnoilednad", "followers_url": "https://api.github.com/users/gnoilednad/followers", "following_url": "https://api.github.com/users/gnoilednad/following{/other_user}", "gists_url": "https://api.github.com/users/gnoilednad/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnoilednad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnoilednad/subscriptions", "organizations_url": "https://api.github.com/users/gnoilednad/orgs", "repos_url": "https://api.github.com/users/gnoilednad/repos", "events_url": "https://api.github.com/users/gnoilednad/events{/privacy}", "received_events_url": "https://api.github.com/users/gnoilednad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1637284929, "node_id": "MDU6TGFiZWwxNjM3Mjg0OTI5", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/CLA%20Signed", "name": "CLA Signed", "color": "009900", "default": false, "description": "This label is managed by the Facebook bot. Authors need to sign the CLA before a PR can be reviewed."}, {"id": 1802226138, "node_id": "MDU6TGFiZWwxODAyMjI2MTM4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/Merged", "name": "Merged", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-02-09T02:59:58Z", "updated_at": "2020-02-10T18:23:48Z", "closed_at": "2020-02-10T17:14:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/pulls/34", "html_url": "https://github.com/facebookresearch/pytorch3d/pull/34", "diff_url": "https://github.com/facebookresearch/pytorch3d/pull/34.diff", "patch_url": "https://github.com/facebookresearch/pytorch3d/pull/34.patch", "merged_at": null}, "body": "fixed target object data folder path './data/doplhin'-> './data/dolphin'", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/34/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/34/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/33", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/33/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/33/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/33", "id": 562055067, "node_id": "MDU6SXNzdWU1NjIwNTUwNjc=", "number": 33, "title": "import error", "user": {"login": "amiltonwong", "id": 2517000, "node_id": "MDQ6VXNlcjI1MTcwMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/2517000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amiltonwong", "html_url": "https://github.com/amiltonwong", "followers_url": "https://api.github.com/users/amiltonwong/followers", "following_url": "https://api.github.com/users/amiltonwong/following{/other_user}", "gists_url": "https://api.github.com/users/amiltonwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/amiltonwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amiltonwong/subscriptions", "organizations_url": "https://api.github.com/users/amiltonwong/orgs", "repos_url": "https://api.github.com/users/amiltonwong/repos", "events_url": "https://api.github.com/users/amiltonwong/events{/privacy}", "received_events_url": "https://api.github.com/users/amiltonwong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-02-08T17:56:51Z", "updated_at": "2021-07-01T14:03:48Z", "closed_at": "2020-02-10T17:38:50Z", "author_association": "NONE", "active_lock_reason": "resolved", "body": "Hi, all,\r\n\r\nI got the following import error:\r\n\r\n```\r\n>>> from pytorch3d import _C\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nImportError: /data/code11/pytorch3d/pytorch3d/_C.cpython-36m-x86_64-linux-gnu.so: undefined symbol: _ZTIN3c1021AutogradMetaInterfaceE\r\n```\r\n\r\nMy config is pytorch==1.4, torchvision==0.5.0, CUDA=10.0. It seems there's conflicts with the packages? Any hints to solve it?\r\n\r\nTHX!", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/33/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/33/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/26", "repository_url": "https://api.github.com/repos/facebookresearch/pytorch3d", "labels_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/26/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/26/comments", "events_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/26/events", "html_url": "https://github.com/facebookresearch/pytorch3d/issues/26", "id": 561711261, "node_id": "MDU6SXNzdWU1NjE3MTEyNjE=", "number": 26, "title": "ImportError: dlopen(): Symbol not found after installation", "user": {"login": "semihcanturk", "id": 20279851, "node_id": "MDQ6VXNlcjIwMjc5ODUx", "avatar_url": "https://avatars.githubusercontent.com/u/20279851?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semihcanturk", "html_url": "https://github.com/semihcanturk", "followers_url": "https://api.github.com/users/semihcanturk/followers", "following_url": "https://api.github.com/users/semihcanturk/following{/other_user}", "gists_url": "https://api.github.com/users/semihcanturk/gists{/gist_id}", "starred_url": "https://api.github.com/users/semihcanturk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semihcanturk/subscriptions", "organizations_url": "https://api.github.com/users/semihcanturk/orgs", "repos_url": "https://api.github.com/users/semihcanturk/repos", "events_url": "https://api.github.com/users/semihcanturk/events{/privacy}", "received_events_url": "https://api.github.com/users/semihcanturk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1637284748, "node_id": "MDU6TGFiZWwxNjM3Mjg0NzQ4", "url": "https://api.github.com/repos/facebookresearch/pytorch3d/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2020-02-07T15:36:24Z", "updated_at": "2020-02-10T21:54:50Z", "closed_at": "2020-02-10T21:54:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "After installing the requirements, running the `render_textured_meshes.ipynb` fails on the first cell with the following error:\r\n```\r\nImportError                               Traceback (most recent call last)\r\n\r\n<ipython-input-5-ce664553dc67> in <module>\r\n      8 \r\n      9 # Data structures and functions for rendering\r\n---> 10 from pytorch3d.structures import Meshes, Textures\r\n     11 from pytorch3d.renderer import (\r\n     12     look_at_view_transform,\r\n\r\n~/PycharmProjects/pytorch3d/pytorch3d/structures/__init__.py in <module>\r\n      1 # Copyright (c) Facebook, Inc. and its affiliates. All rights reserved.\r\n      2 \r\n----> 3 from .meshes import Meshes\r\n      4 from .textures import Textures\r\n      5 from .utils import (\r\n\r\n~/PycharmProjects/pytorch3d/pytorch3d/structures/meshes.py in <module>\r\n      4 import torch\r\n      5 \r\n----> 6 from pytorch3d import _C\r\n      7 \r\n      8 from . import utils as struct_utils\r\n\r\nImportError: dlopen(/Users/semo/PycharmProjects/pytorch3d/pytorch3d/_C.cpython-37m-darwin.so, 2): Symbol not found: __Z23RasterizeMeshesFineCudaRKN2at6TensorES2_ifiib\r\n  Referenced from: /Users/semo/PycharmProjects/pytorch3d/pytorch3d/_C.cpython-37m-darwin.so\r\n  Expected in: flat namespace\r\n in /Users/semo/PycharmProjects/pytorch3d/pytorch3d/_C.cpython-37m-darwin.so\r\n```\r\n\r\n## Instructions To Reproduce the Issue:\r\n\r\n1. PyCharm -> Get From Version Control -> https://github.com/facebookresearch/pytorch3d\r\n2. Install requirements\r\n3. run `python setup.py build develop` from root directory\r\n4. run `render_textured_meshes.ipynb`\r\n\r\nAny help is much appreciated, thanks!", "reactions": {"url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/26/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/pytorch3d/issues/26/timeline", "performed_via_github_app": null, "state_reason": "completed"}]