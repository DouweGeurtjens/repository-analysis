[{"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2631", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2631/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2631/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2631/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2631", "id": 1650884168, "node_id": "I_kwDOC2wWEs5iZn5I", "number": 2631, "title": "[Bug] multirun cannot reset torch.cuda.max_memory_allocated() automatically", "user": {"login": "LukeLIN-web", "id": 60426396, "node_id": "MDQ6VXNlcjYwNDI2Mzk2", "avatar_url": "https://avatars.githubusercontent.com/u/60426396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LukeLIN-web", "html_url": "https://github.com/LukeLIN-web", "followers_url": "https://api.github.com/users/LukeLIN-web/followers", "following_url": "https://api.github.com/users/LukeLIN-web/following{/other_user}", "gists_url": "https://api.github.com/users/LukeLIN-web/gists{/gist_id}", "starred_url": "https://api.github.com/users/LukeLIN-web/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LukeLIN-web/subscriptions", "organizations_url": "https://api.github.com/users/LukeLIN-web/orgs", "repos_url": "https://api.github.com/users/LukeLIN-web/repos", "events_url": "https://api.github.com/users/LukeLIN-web/events{/privacy}", "received_events_url": "https://api.github.com/users/LukeLIN-web/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-02T09:58:25Z", "updated_at": "2023-04-15T19:53:30Z", "closed_at": "2023-04-15T19:53:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nmultirun cannot reset cuda memory status automatically.\r\n\r\n## Checklist\r\n- [\u221a ] I checked on the latest version of Hydra\r\n- [\u221a ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n```python\r\n@hydra.main(config_path=\"./conf\", config_name=\"config\", version_base=\"1.1\")\r\ndef train(conf):\r\n\r\n    # move a tensor to the GPU\r\n    x = torch.randn(conf.num_epoch*1000, conf.num_epoch*1000).cuda()\r\n\r\n    # get the maximum GPU memory allocated so far\r\n    max_memory = torch.cuda.max_memory_allocated()\r\n\r\n    # do some computations that might use GPU memory\r\n    y = x.mm(x.t())\r\n\r\n    # get the new maximum GPU memory allocated\r\n    new_max_memory = torch.cuda.max_memory_allocated() - max_memory\r\n\r\n    print(f\"Max memory used: {new_max_memory/1024/1024:.2f} MB\")\r\n\r\nif __name__ == \"__main__\":\r\n    train()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nMax memory used: 858.31 MB\r\n[2023-04-02 09:55:14,639][HYDRA]        #1 : num_epoch=10\r\nMax memory used: 0.00 MB\r\n[2023-04-02 09:55:15,760][HYDRA]        #2 : num_epoch=5\r\nMax memory used: 0.00 MB\r\n[2023-04-02 09:55:16,177][HYDRA]        #3 : num_epoch=1\r\nMax memory used: 0.00 MB\r\n```\r\n\r\n## Expected Behavior\r\n```\r\n\r\n[2023-04-02 09:54:53,561][HYDRA]        #3 : num_epoch=15\r\nMax memory used: 858.31 MB\r\n[2023-04-02 09:55:14,639][HYDRA]        #1 : num_epoch=10\r\nMax memory used: 382.00 MB\r\n[2023-04-02 09:55:15,760][HYDRA]        #2 : num_epoch=5\r\nMax memory used: 96.00 MB\r\n[2023-04-02 09:55:16,177][HYDRA]        #3 : num_epoch=1\r\nMax memory used: 3.81 MB\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.3.2\r\n- **Python version** : Python 3.8.12\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2631/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2631/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2629", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2629/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2629/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2629/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2629", "id": 1644233278, "node_id": "I_kwDOC2wWEs5iAQI-", "number": 2629, "title": "[Bug] OmegaConf produces hydra interpolation error in ddp_spawn training in PyTorch Lightning", "user": {"login": "libokj", "id": 66983285, "node_id": "MDQ6VXNlcjY2OTgzMjg1", "avatar_url": "https://avatars.githubusercontent.com/u/66983285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/libokj", "html_url": "https://github.com/libokj", "followers_url": "https://api.github.com/users/libokj/followers", "following_url": "https://api.github.com/users/libokj/following{/other_user}", "gists_url": "https://api.github.com/users/libokj/gists{/gist_id}", "starred_url": "https://api.github.com/users/libokj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/libokj/subscriptions", "organizations_url": "https://api.github.com/users/libokj/orgs", "repos_url": "https://api.github.com/users/libokj/repos", "events_url": "https://api.github.com/users/libokj/events{/privacy}", "received_events_url": "https://api.github.com/users/libokj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-28T15:48:45Z", "updated_at": "2023-04-17T06:42:04Z", "closed_at": "2023-04-16T13:44:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nomegaconf produces an interpolation error in ddp_spawn training in PyTorch Lightning 1.9.4 when interpolating strings with hydra resolver `${hydra:...}`\r\n\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\ntrainer.yaml for PL trainer\r\n```\r\n_target_: pytorch_lightning.Trainer\r\n\r\nmin_epochs: 1\r\nmax_epochs: 50\r\ncheck_val_every_n_epoch: 1\r\ndeterministic: False\r\nstrategy: ddp_spawn\r\naccelerator: gpu\r\ndevices: 4\r\nnum_nodes: 1\r\nsync_batchnorm: True\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n[2023-01-04 16:34:17,037][src.utils.utils][ERROR] - \r\nTraceback (most recent call last):\r\n  File \"/nvme/louzekun/playground/lightning-hydra-template-1.5.0/src/utils/utils.py\", line 38, in wrap\r\n    metric_dict, object_dict = task_func(cfg=cfg)\r\n######## (This part is about multiprocessing)\r\n  File \"/nvme/louzekun/miniconda3/envs/ml/lib/python3.10/site-packages/torch/multiprocessing/spawn.py\", line 160, in join\r\n    raise ProcessRaisedException(msg, error_index, failed_process.pid)\r\ntorch.multiprocessing.spawn.ProcessRaisedException: \r\n\r\n-- Process 0 terminated with the following error:\r\nTraceback (most recent call last):\r\n  File \"/nvme/louzekun/miniconda3/envs/ml/lib/python3.10/site-packages/torch/multiprocessing/spawn.py\", line 69, in _wrap\r\n    fn(i, *args)\r\n######## (This part is about omegaconf)\r\n  File \"/nvme/louzekun/miniconda3/envs/ml/lib/python3.10/site-packages/omegaconf/base.py\", line 703, in _evaluate_custom_resolver\r\n    raise UnsupportedInterpolationType(\r\nomegaconf.errors.UnsupportedInterpolationType: Unsupported interpolation type hydra\r\n    full_key: trainer.default_root_dir\r\n    object_type=dict\r\n\r\n[2023-01-04 16:34:17,039][src.utils.utils][INFO] - Output dir: /nvme/louzekun/playground/lightning-hydra-template-1.5.0/logs/train/runs/2023-01-04_16-34-10\r\n[2023-01-04 16:34:17,039][src.utils.utils][INFO] - Closing loggers...\r\nError executing job with overrides: ['trainer=ddp', 'trainer.max_epochs=5', 'logger=csv']\r\nTraceback (most recent call last):\r\n  File \"/nvme/louzekun/playground/lightning-hydra-template-1.5.0/src/train.py\", line 122, in main\r\n    metric_dict, _ = train(cfg)\r\n######## (This part repeated the same errors as above)\r\n  File \"/nvme/louzekun/miniconda3/envs/ml/lib/python3.10/site-packages/omegaconf/base.py\", line 703, in _evaluate_custom_resolver\r\n    raise UnsupportedInterpolationType(\r\nomegaconf.errors.UnsupportedInterpolationType: Unsupported interpolation type hydra\r\n    full_key: trainer.default_root_dir\r\n    object_type=dict\r\n```\r\n\r\n## Expected Behavior\r\nThe hydra resolver should not cause omegaconf error `Unsupported interpolation type` \r\n\r\n## System information\r\n- **Hydra Version** :  1.31\r\n- **Python version** : 3.9\r\n- **Virtual environment type and version** : conda 22.11.0\r\n- **Operating system** : Windows 11\r\n\r\n## Additional context\r\nMultiple reports of this error were received by users of the lightning-hydra-template project:\r\nhttps://github.com/ashleve/lightning-hydra-template/issues/495\r\nPotentially related issue: https://github.com/facebookresearch/hydra/issues/2070", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2629/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2629/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2628", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2628/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2628/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2628/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2628", "id": 1643896761, "node_id": "I_kwDOC2wWEs5h-9-5", "number": 2628, "title": "[Bug] Cannot override @_global_ package from CLI", "user": {"login": "jbaczek", "id": 45043825, "node_id": "MDQ6VXNlcjQ1MDQzODI1", "avatar_url": "https://avatars.githubusercontent.com/u/45043825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbaczek", "html_url": "https://github.com/jbaczek", "followers_url": "https://api.github.com/users/jbaczek/followers", "following_url": "https://api.github.com/users/jbaczek/following{/other_user}", "gists_url": "https://api.github.com/users/jbaczek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbaczek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbaczek/subscriptions", "organizations_url": "https://api.github.com/users/jbaczek/orgs", "repos_url": "https://api.github.com/users/jbaczek/repos", "events_url": "https://api.github.com/users/jbaczek/events{/privacy}", "received_events_url": "https://api.github.com/users/jbaczek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-28T12:57:29Z", "updated_at": "2023-04-15T19:48:29Z", "closed_at": "2023-04-15T19:47:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI have a config file like this:\r\n```yaml\r\ndefaults:\r\n  - model: ???\r\n  - optional overrides@_global_:  # Empty by default\r\n```\r\nIn hydra 1.1.1 I used the overrides package to override values in other branches of tree (for example with the best values for model parameters). If I wanted to do a bunch of overrides at once I used `python my_app.py model=foo overrides=best` which worked fine. But since hydra 1.2.0 this behavior has changed and now hydra yells at me with\r\n```\r\nCould not override 'overrides'.\r\nDid you mean to override overrides@_global_?\r\nTo append to your default list use +overrides=best\r\n```\r\nThe previous behavior can be achieved by introducing `# @package _global_` at the beginning of each override file. But this is cumbersome, because it can be easily overlooked. It was easier to put `@_global_` once in the defaults list.\r\nIs this behavior intended?\r\n\r\n## Checklist\r\n- [ x] I checked on the latest version of Hydra\r\n- [ x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n** Minimal Code/Config snippet to reproduce **\r\nConfig structure:\r\n```\r\nconf\r\n\u251c\u2500\u2500 config.yaml\r\n\u251c\u2500\u2500 model\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bar.yaml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 foo.yaml\r\n\u2514\u2500\u2500 overrides\r\n    \u2514\u2500\u2500 best.yaml\r\n```\r\nFile content:\r\n/conf/model/foo.yaml\r\n```yaml\r\nconfig:\r\n  hdim: 4\r\n  cdim: 8\r\n```\r\n./conf/model/bar.yaml\r\n```yaml\r\nconfig:\r\n  hdim: 2\r\n  cdim: 16\r\n```\r\n./conf/overrides/best.yaml\r\n```yaml\r\nconfig:\r\n  hdim: 3\r\n```\r\n./conf/config.yaml\r\n```yaml\r\ndefaults:\r\n  - model: ???\r\n  - optional overrides@_global_: # Empty by default\r\n```\r\n```python\r\n# my_app.py\r\nfrom omegaconf import OmegaConf\r\nimport hydra\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef my_app(cfg) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\nmy_app()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"my_app.py\", line 9, in <module>\r\n    my_app()\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/main.py\", line 90, in decorated_main\r\n    _run_hydra(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/utils.py\", line 394, in _run_hydra\r\n    _run_app(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/utils.py\", line 457, in _run_app\r\n    run_and_report(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/utils.py\", line 222, in run_and_report\r\n    raise ex\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/utils.py\", line 219, in run_and_report\r\n    return func()\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/utils.py\", line 458, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/hydra.py\", line 105, in run\r\n    cfg = self.compose_config(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/hydra.py\", line 594, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/config_loader_impl.py\", line 142, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/config_loader_impl.py\", line 253, in _load_configuration_impl\r\n    defaults_list = create_defaults_list(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/defaults_list.py\", line 753, in create_defaults_list\r\n    overrides.ensure_overrides_used()\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/defaults_list.py\", line 168, in ensure_overrides_used\r\n    raise ConfigCompositionException(msg)\r\nhydra.errors.ConfigCompositionException: Could not override 'overrides'.\r\nDid you mean to override overrides@_global_?\r\nTo append to your default list use +overrides=best\r\n```\r\n\r\n## Expected Behavior\r\nA correct substitution should take place at _global_ level. The output of running `python my_app.py model=foo overrides=best` should be\r\n```\r\nmodel:        \r\n  config:                                                                                                                                    \r\n    hdim: 3\r\n    cdim: 8 \r\n```\r\n## System information\r\n- **Hydra Version** : 1.3.0 \r\n- **Python version** : 3.8.10\r\n- **Virtual environment type and version** : Docker container\r\n- **Operating system** : Linux jbaczek-ws 5.15.0-67-generic #74~20.04.1-Ubuntu SMP Wed Feb 22 14:52:34 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n## Additional context\r\nhttps://github.com/facebookresearch/hydra/issues/1784\r\nhttps://github.com/facebookresearch/hydra/pull/1791\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2628/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2628/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2627", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2627/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2627/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2627/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2627", "id": 1643891608, "node_id": "I_kwDOC2wWEs5h-8uY", "number": 2627, "title": "[Bug]", "user": {"login": "ori-noked-imagen", "id": 125193141, "node_id": "U_kgDOB3ZLtQ", "avatar_url": "https://avatars.githubusercontent.com/u/125193141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ori-noked-imagen", "html_url": "https://github.com/ori-noked-imagen", "followers_url": "https://api.github.com/users/ori-noked-imagen/followers", "following_url": "https://api.github.com/users/ori-noked-imagen/following{/other_user}", "gists_url": "https://api.github.com/users/ori-noked-imagen/gists{/gist_id}", "starred_url": "https://api.github.com/users/ori-noked-imagen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ori-noked-imagen/subscriptions", "organizations_url": "https://api.github.com/users/ori-noked-imagen/orgs", "repos_url": "https://api.github.com/users/ori-noked-imagen/repos", "events_url": "https://api.github.com/users/ori-noked-imagen/events{/privacy}", "received_events_url": "https://api.github.com/users/ori-noked-imagen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-28T12:54:31Z", "updated_at": "2023-04-18T14:39:37Z", "closed_at": "2023-04-18T14:39:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI tried to add a resolver that works on a list \\ dictionary \r\nsimilar to the example here \r\nhttps://stackoverflow.com/questions/71527303/hydra-combine-lists-in-config/75866348#75866348\r\nbut it seems that the solution here does not work for me \r\n\r\n## Checklist\r\n- [v] I checked on the latest version of Hydra\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nI created a yaml with the following fields :\r\n```\r\nlist1 : [0]\r\nlist2 : [1,2,3]\r\nlist3 : ${merge:${list1},${list2}}\r\n```\r\nand registered the merge resolver with :\r\n`OmegaConf.register_new_resolver(\"merge\", lambda x, y: x + y)\r\n`and I'm getting an error (on version 1.1.2 and latest)\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 394, in _run_hydra\r\n    _run_app(\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 457, in _run_app\r\n    run_and_report(\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 223, in run_and_report\r\n    raise ex\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 220, in run_and_report\r\n    return func()\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 458, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\_internal\\hydra.py\", line 105, in run\r\n    cfg = self.compose_config(\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\_internal\\hydra.py\", line 594, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\_internal\\config_loader_impl.py\", line 142, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\_internal\\config_loader_impl.py\", line 244, in _load_configuration_impl\r\n    parsed_overrides, caching_repo = self._parse_overrides_and_create_caching_repo(\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\_internal\\config_loader_impl.py\", line 228, in _parse_overrides_and_create_caching_repo\r\n    parsed_overrides = parser.parse_overrides(overrides=overrides)\r\n  File \"C:\\venvs\\color-correction\\lib\\site-packages\\hydra\\core\\override_parser\\overrides_parser.py\", line 96, in parse_overrides\r\n    raise OverrideParseException(\r\nhydra.errors.OverrideParseException: Error parsing override 'list3=${merge:${list1},${list2}}'\r\nextraneous input '}' expecting <EOF>\r\nSee https://hydra.cc/docs/1.2/advanced/override_grammar/basic for details\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :   1.1.2\r\n- **Python version** :  3.8\r\n- **Virtual environment type and version** : venv \r\n- **Operating system** :  windows \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2627/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2627/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2612", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2612/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2612/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2612/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2612", "id": 1626206212, "node_id": "I_kwDOC2wWEs5g7fAE", "number": 2612, "title": "[Bug] The nevergrad sweeper is not properly handling quoted strings", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-03-15T20:04:28Z", "updated_at": "2023-03-20T18:30:40Z", "closed_at": "2023-03-20T18:30:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nThe nevergrad sweeper does not properly handle quoted strings (this also manifests in other problems, e.g., with `null` values).\r\n\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [X] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```bash\r\npython example/my_app.py -m hydra.sweeper.optim.budget=1 hydra.sweeper.optim.num_workers=1 +key=\"'a&b'\"\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n[2023-03-15 13:01:58,886][HYDRA] NevergradSweeper(optimizer=OnePlusOne, budget=1, num_workers=1) minimization\r\n[2023-03-15 13:01:58,886][HYDRA] with parametrization Dict(+key=a&b,batch_size=Scalar{Cl(4,16,b),Int}[sigma=Scalar{exp=2.03}],db=Choice(choices=Tuple(mnist,cifar),indices=Array{(1,2),SoftmaxSampling}),dropout=Scalar{Cl(0,1,b)}[sigma=Scalar{exp=2.03}],lr=Log{exp=2.00}):{'db': 'mnist', 'lr': 0.020000000000000004, 'dropout': 0.5, 'batch_size': 10, '+key': 'a&b'}\r\n[2023-03-15 13:01:58,888][HYDRA] Sweep output dir: multirun/2023-03-15/13-01-57\r\nLexerNoViableAltException: +key=a&b\r\n```\r\n\r\n## Expected Behavior\r\nIt should work, passing the override `+key='a&b'` to the job being launched.\r\n\r\n## System information\r\n- **Hydra Version** :  latest master\r\n- **Python version** : Python 3.9", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2612/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2612/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2602", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2602/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2602/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2602/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2602", "id": 1610086174, "node_id": "I_kwDOC2wWEs5f9_ce", "number": 2602, "title": "CUDA error: invalid device ordinal when using multirun", "user": {"login": "nuomizai", "id": 17938642, "node_id": "MDQ6VXNlcjE3OTM4NjQy", "avatar_url": "https://avatars.githubusercontent.com/u/17938642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nuomizai", "html_url": "https://github.com/nuomizai", "followers_url": "https://api.github.com/users/nuomizai/followers", "following_url": "https://api.github.com/users/nuomizai/following{/other_user}", "gists_url": "https://api.github.com/users/nuomizai/gists{/gist_id}", "starred_url": "https://api.github.com/users/nuomizai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nuomizai/subscriptions", "organizations_url": "https://api.github.com/users/nuomizai/orgs", "repos_url": "https://api.github.com/users/nuomizai/repos", "events_url": "https://api.github.com/users/nuomizai/events{/privacy}", "received_events_url": "https://api.github.com/users/nuomizai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-05T07:13:46Z", "updated_at": "2023-03-27T14:33:40Z", "closed_at": "2023-03-27T14:33:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "# CUDA error: invalid device ordinal when using --multirun\r\n## Description\r\nI got the error when I run my code with the multirun mode in hydra, but everything works fine when I remove the multirun config.\r\nHere's what I got when I use the multirun mode:\r\n```\r\n(drqv2) liuchi@omnisky:~/zhaoyinuo/drqv2$ [2023-03-05 14:51:55,069][HYDRA] Submitit 'local' sweep output dir : ./exp_local\r\n[2023-03-05 14:51:55,070][HYDRA]        #0 : device=1 agent=share_encoder_svea seed=0 task=cartpole_swingup\r\n[2023-03-05 14:51:55,074][HYDRA]        #1 : device=1 agent=share_encoder_svea seed=1 task=cartpole_swingup\r\n[2023-03-05 14:51:55,077][HYDRA]        #2 : device=1 agent=share_encoder_svea seed=2 task=cartpole_swingup\r\nError executing job with overrides: ['device=1', 'agent=share_encoder_svea', 'seed=0', 'task=cartpole_swingup']\r\nTraceback (most recent call last):\r\n  File \"/home/liuchi/anaconda3/envs/drqv2/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 211, in run_and_report\r\n    return func()\r\n  File \"/home/liuchi/anaconda3/envs/drqv2/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 376, in <lambda>\r\n    lambda: hydra.multirun(\r\n  File \"/home/liuchi/anaconda3/envs/drqv2/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 139, in multirun\r\n    ret = sweeper.sweep(arguments=task_overrides)\r\n  File \"/home/liuchi/anaconda3/envs/drqv2/lib/python3.8/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 161, in sweep\r\n    _ = r.return_value\r\n  File \"/home/liuchi/anaconda3/envs/drqv2/lib/python3.8/site-packages/hydra/core/utils.py\", line 233, in return_value\r\n    raise self._return_value\r\nRuntimeError: Error instantiating 'algos.share_encoder_svea.SVEAAgent' : CUDA error: invalid device ordinal\r\nCUDA kernel errors might be asynchronously reported at some other API call,so the stacktrace below might be incorrect.\r\nFor debugging consider passing CUDA_LAUNCH_BLOCKING=1.\r\n```\r\n\r\nMy command is as follows:\r\n```\r\npython train.py --multirun device=1 agent=share_encoder_svea seed=0,1,2 task=cartpole_swingup\r\n```\r\n\r\nMy hydra configuring file is as follows:\r\n\r\n```\r\ndefaults:\r\n  - _self_\r\n  - task@_global_: quadruped_walk\r\n  - agent@_global_: svea\r\n  - override hydra/launcher: submitit_local\r\n\r\nhydra:\r\n  sweep:\r\n    dir: ./exp_local\r\n    subdir: ${now:%Y.%m.%d}/${hydra.job.override_dirname}/${seed}\r\n  job:\r\n    config:\r\n      override_dirname:\r\n        exclude_keys:\r\n          - seed\r\n  launcher:\r\n    timeout_min: 4300\r\n    cpus_per_task: 10\r\n    gpus_per_node: 1\r\n    tasks_per_node: 1\r\n    mem_gb: 160\r\n    nodes: 1\r\n```\r\n\r\nDoes anyone know what's wrong with my configuration/code?", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2602/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2602/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2601", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2601/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2601/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2601/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2601", "id": 1607019208, "node_id": "I_kwDOC2wWEs5fySrI", "number": 2601, "title": "Importing args from original search path into added search path", "user": {"login": "slerman12", "id": 9126603, "node_id": "MDQ6VXNlcjkxMjY2MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/9126603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slerman12", "html_url": "https://github.com/slerman12", "followers_url": "https://api.github.com/users/slerman12/followers", "following_url": "https://api.github.com/users/slerman12/following{/other_user}", "gists_url": "https://api.github.com/users/slerman12/gists{/gist_id}", "starred_url": "https://api.github.com/users/slerman12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slerman12/subscriptions", "organizations_url": "https://api.github.com/users/slerman12/orgs", "repos_url": "https://api.github.com/users/slerman12/repos", "events_url": "https://api.github.com/users/slerman12/events{/privacy}", "received_events_url": "https://api.github.com/users/slerman12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-02T15:29:34Z", "updated_at": "2023-03-02T20:16:21Z", "closed_at": "2023-03-02T20:16:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is continuing from: https://github.com/facebookresearch/hydra/issues/2600\r\n\r\nLet's say I have the following directory structure:\r\n\r\n```\r\n-> ./Project\r\n     run_script.py\r\n     -> ./Args\r\n          args.yaml\r\n          -> ./task\r\n               different_args.yaml\r\n```\r\n\r\nand an external file called `args2.yaml`.\r\n\r\nI can load `args2.yaml` by adding it to the search path `-cd path/to/args2.yaml`.\r\n\r\nHowever, `args2.yaml` references `different_args.yaml`:\r\n\r\n```\r\ndefaults:\r\n  - different_args\r\n  - _self_\r\n```\r\n\r\nAnd while this doesn't crash, `different_args` don't get loaded when I call `task=args2`.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2601/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2601/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2599", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2599/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2599/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2599/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2599", "id": 1605605754, "node_id": "I_kwDOC2wWEs5fs5l6", "number": 2599, "title": "[Bug] Config reads string as scientific notation unless explicitly wrapped in quotes", "user": {"login": "CSCaudill", "id": 416692, "node_id": "MDQ6VXNlcjQxNjY5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/416692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CSCaudill", "html_url": "https://github.com/CSCaudill", "followers_url": "https://api.github.com/users/CSCaudill/followers", "following_url": "https://api.github.com/users/CSCaudill/following{/other_user}", "gists_url": "https://api.github.com/users/CSCaudill/gists{/gist_id}", "starred_url": "https://api.github.com/users/CSCaudill/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CSCaudill/subscriptions", "organizations_url": "https://api.github.com/users/CSCaudill/orgs", "repos_url": "https://api.github.com/users/CSCaudill/repos", "events_url": "https://api.github.com/users/CSCaudill/events{/privacy}", "received_events_url": "https://api.github.com/users/CSCaudill/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-01T20:15:09Z", "updated_at": "2023-03-04T15:28:35Z", "closed_at": "2023-03-04T15:28:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen the config yaml file contains a string with all numeric values and an 'E' in the string (e.g., 1E234), it will read the string as scientific notation (1e+234). This occurs even if the structured config defines the field as string.\r\n\r\n## Checklist\r\n- [ X ] I checked on the latest version of Hydra\r\n- [ X ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nA minimal example has been created in [this repository](https://github.com/CSCaudill/hydra_err).\r\n\r\nA short summary to reproduce:\r\n1. Create a project with a config yaml file\r\n2. Within the config yaml, create a parameter with a string of all numbers and a single 'E' character (e.g., 123E456)\r\n3. Create an app script that loads the config and prints the parameter values\r\n4. Notice that the parameter created in step 2 was handled as a number in scientific notation (e.g., 123e+456)\r\n\r\nThis even occurs if a structured config store instance is created to enforce a schema that defines this parameter as a string. This can be found in the repo mentioned above.\r\n\r\n** Stack trace/error message **\r\nThe output below can be obtained by cloning the previously mentioned repository and running `python app.py`\r\n\r\n```\r\naccount:\r\n  user: user_123\r\n  password: '1e+234'\r\n```\r\n\r\n## Expected Behavior\r\nIt would be expected that the schema defined within the structured config store instance would be enforced, and the string would not be converted to a number. \r\n\r\n## System information\r\n- **Hydra Version** :  1.3.2\r\n- **Python version** : 3.8.16\r\n- **Virtual environment type and version** : NA\r\n- **Operating system** : all\r\n\r\n## Additional context\r\nAdding quotes around the value will prevent this from occurring, but our project has numerous config files with long alphanumeric strings as parameter values, and this only occurs when the value happens to be only numbers with a single 'E' character.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2599/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2599/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2591", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2591/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2591/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2591/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2591", "id": 1593994809, "node_id": "I_kwDOC2wWEs5fAm45", "number": 2591, "title": "[Bug] `hydra.utils.instantiate` converts instantiated objects back to their configs when passing as arguments", "user": {"login": "lematt1991", "id": 13142923, "node_id": "MDQ6VXNlcjEzMTQyOTIz", "avatar_url": "https://avatars.githubusercontent.com/u/13142923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lematt1991", "html_url": "https://github.com/lematt1991", "followers_url": "https://api.github.com/users/lematt1991/followers", "following_url": "https://api.github.com/users/lematt1991/following{/other_user}", "gists_url": "https://api.github.com/users/lematt1991/gists{/gist_id}", "starred_url": "https://api.github.com/users/lematt1991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lematt1991/subscriptions", "organizations_url": "https://api.github.com/users/lematt1991/orgs", "repos_url": "https://api.github.com/users/lematt1991/repos", "events_url": "https://api.github.com/users/lematt1991/events{/privacy}", "received_events_url": "https://api.github.com/users/lematt1991/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-02-21T19:30:21Z", "updated_at": "2023-04-22T19:15:32Z", "closed_at": "2023-04-22T19:15:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen using `hydra.utils.instantiate`, if I pass an instantiated object from a config as a `kwarg` to `instantiate`, it converts it back to a it's corresponding config.  For example:\r\n\r\n```Python\r\nmodel = hydra.utils.instantiate(model_config)\r\nevaluator = hydra.utils.instantiate(evaluator_config, model=model)\r\n# At this point `evaluator.model` will be `model_config` rather than the instantiated model\r\n```\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```Python\r\nimport hydra\r\nimport torch\r\nfrom omegaconf import OmegaConf\r\nfrom dataclasses import dataclass\r\n\r\n@dataclass\r\nclass Model:\r\n    N: int\r\n\r\n    def __post_init__(self):\r\n        self.param = torch.nn.Parameter(torch.rand(self.N, self.N))\r\n\r\n@dataclass\r\nclass Sampler:\r\n    model: Model\r\n\r\n    def sample(self, x):\r\n        raise NotImplemented(\"Sample from the model\")\r\n\r\nmodel = Model(5)\r\nsampler_cfg = OmegaConf.create({\"_target_\": \"repro.Sampler\"})\r\nsampler = hydra.utils.instantiate(sampler_cfg, model=model)\r\n\r\n# At this point `sampler.model` was converted back to it's config format rather than an instantiated model\r\n```\r\n\r\n## Expected Behavior\r\nI would expect the argument to get passed in un-changed\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2591/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2588", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2588/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2588/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2588/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2588", "id": 1585624001, "node_id": "I_kwDOC2wWEs5egrPB", "number": 2588, "title": "[Bug] Unexpected ConfigKeyError while composing config", "user": {"login": "SZiesche", "id": 125353938, "node_id": "U_kgDOB3i_0g", "avatar_url": "https://avatars.githubusercontent.com/u/125353938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SZiesche", "html_url": "https://github.com/SZiesche", "followers_url": "https://api.github.com/users/SZiesche/followers", "following_url": "https://api.github.com/users/SZiesche/following{/other_user}", "gists_url": "https://api.github.com/users/SZiesche/gists{/gist_id}", "starred_url": "https://api.github.com/users/SZiesche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SZiesche/subscriptions", "organizations_url": "https://api.github.com/users/SZiesche/orgs", "repos_url": "https://api.github.com/users/SZiesche/repos", "events_url": "https://api.github.com/users/SZiesche/events{/privacy}", "received_events_url": "https://api.github.com/users/SZiesche/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2023-02-15T10:42:02Z", "updated_at": "2023-04-21T12:09:36Z", "closed_at": "2023-04-19T16:10:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen configs based on Baseclasses are nested more than once merging doesn't work anymore.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```python\r\nfrom dataclasses import dataclass, field\r\nfrom typing import Any, List\r\n\r\nimport hydra.utils\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom omegaconf import MISSING\r\n\r\n# I have multiple datasets\r\n\r\n\r\n@dataclass\r\nclass DataConfig:\r\n    \"\"\"This is just a common base class.\"\"\"\r\n\r\n\r\n@dataclass\r\nclass Dataset1Config(DataConfig):\r\n    some_member1: int = 1\r\n\r\n\r\n@dataclass\r\nclass Dataset2Config(DataConfig):\r\n    some_member2: int = 2\r\n\r\n\r\n# I register them at some place in my folder structure.\r\ncs = ConfigStore.instance()\r\ncs.store(group=\"some/data/folder\", name=Dataset1Config.__name__, node=Dataset1Config)\r\ncs.store(group=\"some/data/folder\", name=Dataset2Config.__name__, node=Dataset2Config)\r\n\r\n\r\n# I have multiple training routines (listed only one here deriving from a common base class)\r\n\r\n\r\n@dataclass\r\nclass TrainingConfig:\r\n    pass\r\n\r\n\r\n@dataclass\r\nclass SpecialTrainingConfig:\r\n    some_member4: int = 4\r\n\r\n\r\ncs.store(group=\"some/training/folder\", name=SpecialTrainingConfig.__name__, node=SpecialTrainingConfig)\r\n\r\n\r\n# finally I have multiple models that can be trained differently. Model1 is usually trained by the special training, so\r\n# I want to have this as a default.\r\n\r\n\r\n@dataclass\r\nclass ModelConfig:\r\n    \"\"\"This is just a common base class.\"\"\"\r\n\r\n\r\n@dataclass\r\nclass Model1Config(ModelConfig):\r\n    defaults: List[Any] = field(default_factory=lambda: [{\"/some/training/folder@training\": \"SpecialTrainingConfig\"}])\r\n\r\n    training: TrainingConfig = MISSING\r\n\r\n\r\n@dataclass\r\nclass Model2Config(ModelConfig):\r\n    some_member: int = 3\r\n\r\n\r\n# I register them at some place in my folder structure.\r\ncs.store(group=\"some/model/folder\", name=Model1Config.__name__, node=Model1Config)\r\ncs.store(group=\"some/model/folder\", name=Model2Config.__name__, node=Model2Config)\r\n\r\n\r\n# main.py:\r\n# for the main routine of my machine learning project, I also have a config.\r\n# usually I would use dataset1, so I have this as a default. But the model changes often and I don't want to use a\r\n# default there.\r\n@dataclass\r\nclass ScriptConfig:\r\n    defaults: List[Any] = field(default_factory=lambda: [{\"some/data/folder@dataset\": \"Dataset1Config\"}, \"_self_\"])\r\n\r\n    dataset: DataConfig = MISSING\r\n    model: ModelConfig = MISSING\r\n\r\n\r\ncs.store(name=\"ScriptConfig\", node=ScriptConfig)\r\n\r\n\r\n@hydra.main(config_name=\"my_config2\", version_base=\"1.2\", config_path=\".\")\r\ndef main(cfg):\r\n    print(cfg)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nthe `my_config2.yaml` looks like this: \r\n```yaml\r\ndefaults:\r\n  - ScriptConfig\r\n  - /some/model/folder@model: Model1Config\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 542, in _compose_config_from_defaults_list\r\n    cfg.merge_with(loaded.config)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 492, in merge_with\r\n    self._format_and_raise(key=None, value=None, cause=e)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/base.py\", line 231, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 819, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 797, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set env var OC_CAUSE=1 for full trace\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 490, in merge_with\r\n    self._merge_with(*others)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 514, in _merge_with\r\n    BaseContainer._map_merge(self, other)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 399, in _map_merge\r\n    dest_node._merge_with(src_node)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 514, in _merge_with\r\n    BaseContainer._map_merge(self, other)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 432, in _map_merge\r\n    dest[key] = src._get_node(key)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 310, in __setitem__\r\n    self._format_and_raise(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/base.py\", line 231, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 819, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 797, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set env var OC_CAUSE=1 for full trace\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 308, in __setitem__\r\n    self.__set_impl(key=key, value=value)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 318, in __set_impl\r\n    self._set_item_impl(key, value)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 545, in _set_item_impl\r\n    self._validate_set(key, value)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 180, in _validate_set\r\n    target = self._get_node(key) if key is not None else self\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 476, in _get_node\r\n    self._validate_get(key)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 164, in _validate_get\r\n    self._format_and_raise(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/base.py\", line 231, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 899, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 797, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set env var OC_CAUSE=1 for full trace\r\nomegaconf.errors.ConfigKeyError: Key 'training' not in 'ModelConfig'\r\n    full_key: model.training\r\n    reference_type=ModelConfig\r\n    object_type=ModelConfig\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 394, in _run_hydra\r\n    _run_app(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 457, in _run_app\r\n    run_and_report(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 222, in run_and_report\r\n    raise ex\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 219, in run_and_report\r\n    return func()\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 458, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 105, in run\r\n    cfg = self.compose_config(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 594, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 142, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 263, in _load_configuration_impl\r\n    cfg = self._compose_config_from_defaults_list(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 544, in _compose_config_from_defaults_list\r\n    raise ConfigCompositionException(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 542, in _compose_config_from_defaults_list\r\n    cfg.merge_with(loaded.config)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 492, in merge_with\r\n    self._format_and_raise(key=None, value=None, cause=e)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/base.py\", line 231, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 819, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 797, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set env var OC_CAUSE=1 for full trace\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 490, in merge_with\r\n    self._merge_with(*others)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 514, in _merge_with\r\n    BaseContainer._map_merge(self, other)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 399, in _map_merge\r\n    dest_node._merge_with(src_node)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 514, in _merge_with\r\n    BaseContainer._map_merge(self, other)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 432, in _map_merge\r\n    dest[key] = src._get_node(key)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 310, in __setitem__\r\n    self._format_and_raise(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/base.py\", line 231, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 819, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 797, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set env var OC_CAUSE=1 for full trace\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 308, in __setitem__\r\n    self.__set_impl(key=key, value=value)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 318, in __set_impl\r\n    self._set_item_impl(key, value)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 545, in _set_item_impl\r\n    self._validate_set(key, value)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 180, in _validate_set\r\n    target = self._get_node(key) if key is not None else self\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 476, in _get_node\r\n    self._validate_get(key)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 164, in _validate_get\r\n    self._format_and_raise(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/base.py\", line 231, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 899, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/zis2rng/Coding/letas_workspaces/dev1-letas/.venv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 797, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set env var OC_CAUSE=1 for full trace\r\nhydra.errors.ConfigCompositionException: In 'some/training/folder/SpecialTrainingConfig': ConfigKeyError raised while composing config:\r\nKey 'training' not in 'ModelConfig'\r\n    full_key: model.training\r\n    reference_type=ModelConfig\r\n    object_type=ModelConfig\r\npython-BaseException\r\n```\r\n\r\n## Expected Behavior\r\nI would expect that this runs through smoothly as it does, when I nest only one level. E.g., by choosing the following `my_config2.yaml`:\r\n```\r\ndefaults:\r\n  - /some/model/folder@_global_: Model1Config\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.3.1\r\n- **Python version** :  3.8.10\r\n- **Virtual environment type and version** :  poetry/venv\r\n- **Operating system** : ubuntu\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2588/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2588/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2585", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2585/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2585/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2585/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2585", "id": 1580055899, "node_id": "I_kwDOC2wWEs5eLb1b", "number": 2585, "title": "[Bug] Project dependencies.", "user": {"login": "jackokring", "id": 594069, "node_id": "MDQ6VXNlcjU5NDA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/594069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackokring", "html_url": "https://github.com/jackokring", "followers_url": "https://api.github.com/users/jackokring/followers", "following_url": "https://api.github.com/users/jackokring/following{/other_user}", "gists_url": "https://api.github.com/users/jackokring/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackokring/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackokring/subscriptions", "organizations_url": "https://api.github.com/users/jackokring/orgs", "repos_url": "https://api.github.com/users/jackokring/repos", "events_url": "https://api.github.com/users/jackokring/events{/privacy}", "received_events_url": "https://api.github.com/users/jackokring/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-02-10T17:16:23Z", "updated_at": "2023-02-16T14:47:11Z", "closed_at": "2023-02-16T14:47:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "`hydra-core 1.3.1 has requirement antlr4-python3-runtime==4.9.*, but you have antlr4-python3-runtime 4.11.1.`", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2585/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2585/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2573", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2573/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2573/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2573/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2573", "id": 1569988462, "node_id": "I_kwDOC2wWEs5dlB9u", "number": 2573, "title": "[Bug]", "user": {"login": "Monrer11", "id": 124226295, "node_id": "U_kgDOB2eK9w", "avatar_url": "https://avatars.githubusercontent.com/u/124226295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Monrer11", "html_url": "https://github.com/Monrer11", "followers_url": "https://api.github.com/users/Monrer11/followers", "following_url": "https://api.github.com/users/Monrer11/following{/other_user}", "gists_url": "https://api.github.com/users/Monrer11/gists{/gist_id}", "starred_url": "https://api.github.com/users/Monrer11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Monrer11/subscriptions", "organizations_url": "https://api.github.com/users/Monrer11/orgs", "repos_url": "https://api.github.com/users/Monrer11/repos", "events_url": "https://api.github.com/users/Monrer11/events{/privacy}", "received_events_url": "https://api.github.com/users/Monrer11/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-03T15:09:34Z", "updated_at": "2023-04-18T17:17:11Z", "closed_at": "2023-04-18T17:17:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## Checklist\r\n- [ ] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n** Stack trace/error message **\r\n```\r\n// Paste the bad output here!\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  \r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2573/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2573/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2570", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2570/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2570/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2570/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2570", "id": 1567749029, "node_id": "I_kwDOC2wWEs5dcfOl", "number": 2570, "title": "[Bug] Argument parsing fails for multirun with `range` if `PYTHONOPTIMIZE=1`", "user": {"login": "EspenHa", "id": 8143383, "node_id": "MDQ6VXNlcjgxNDMzODM=", "avatar_url": "https://avatars.githubusercontent.com/u/8143383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EspenHa", "html_url": "https://github.com/EspenHa", "followers_url": "https://api.github.com/users/EspenHa/followers", "following_url": "https://api.github.com/users/EspenHa/following{/other_user}", "gists_url": "https://api.github.com/users/EspenHa/gists{/gist_id}", "starred_url": "https://api.github.com/users/EspenHa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EspenHa/subscriptions", "organizations_url": "https://api.github.com/users/EspenHa/orgs", "repos_url": "https://api.github.com/users/EspenHa/repos", "events_url": "https://api.github.com/users/EspenHa/events{/privacy}", "received_events_url": "https://api.github.com/users/EspenHa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-02-02T10:17:15Z", "updated_at": "2023-04-20T07:34:26Z", "closed_at": "2023-04-20T07:34:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nHydra will fail to parse a `range` statement in multi-run mode if `PYTHONOPTIMIZE=1`.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nCreate a simple hydra app like this:\r\n```python\r\n# run.py\r\nfrom dataclasses import dataclass\r\n\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\n\r\n@dataclass\r\nclass MySQLConfig:\r\n    host: str = \"localhost\"\r\n    port: int = 3306\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(name=\"config\", node=MySQLConfig)\r\n\r\n@hydra.main(version_base=None, config_name=\"config\")\r\ndef my_app(cfg: MySQLConfig) -> None:\r\n    if cfg.port == 80:\r\n        print(\"Is this a webserver?!\")\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\nNow run `PYTHONOPTIMIZE=1 python run.py -m port=80,81`.\r\nHydra should handle this correctly, outputting something like:\r\n```\r\n[2023-02-02 10:05:07,993][HYDRA] Launching 2 jobs locally\r\n[2023-02-02 10:05:07,993][HYDRA]        #0 : port=80\r\nIs this a webserver?!\r\n[2023-02-02 10:05:08,294][HYDRA]        #1 : port=81\r\n```\r\n\r\nIf we instead run `PYTHONOPTIMIZE=1 python run.py -m port=\"range(80,82)\"`, which should be equivalent, we get an error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/utils.py\", line 219, in run_and_report\r\n    return func()\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/utils.py\", line 466, in <lambda>\r\n    lambda: hydra.multirun(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/hydra.py\", line 143, in multirun\r\n    cfg = self.compose_config(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/hydra.py\", line 594, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/config_loader_impl.py\", line 142, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/config_loader_impl.py\", line 244, in _load_configuration_impl\r\n    parsed_overrides, caching_repo = self._parse_overrides_and_create_caching_repo(\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/_internal/config_loader_impl.py\", line 228, in _parse_overrides_and_create_caching_repo\r\n    parsed_overrides = parser.parse_overrides(overrides=overrides)\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/core/override_parser/overrides_parser.py\", line 82, in parse_overrides\r\n    parsed = self.parse_rule(override, \"override\")\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/core/override_parser/overrides_parser.py\", line 67, in parse_rule\r\n    ret = visitor.visit(tree)\r\n  File \"/usr/local/lib/python3.8/dist-packages/antlr4/tree/Tree.py\", line 34, in visit\r\n    return tree.accept(self)\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/grammar/gen/OverrideParser.py\", line 195, in accept\r\n    return visitor.visitOverride(self)\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/core/override_parser/overrides_visitor.py\", line 174, in visitOverride\r\n    value = self.visitValue(ctx.value())  # type: ignore[no-untyped-call]\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/core/override_parser/overrides_visitor.py\", line 132, in visitValue\r\n    return self.visitElement(ctx.element())  # type: ignore[no-untyped-call]\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/core/override_parser/overrides_visitor.py\", line 118, in visitElement\r\n    return self.visitFunction(ctx.function())  # type: ignore\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/core/override_parser/overrides_visitor.py\", line 233, in visitFunction\r\n    value = self.visitElement(cur)\r\n  File \"/usr/local/lib/python3.8/dist-packages/hydra/core/override_parser/overrides_visitor.py\", line 117, in visitElement\r\n    if ctx.function():  # type: ignore[no-untyped-call]\r\nAttributeError: 'TerminalNodeImpl' object has no attribute 'function'\r\n```\r\n\r\n\r\n## Expected Behavior\r\nExpected the output of  `PYTHONOPTIMIZE=1 python run.py -m port=\"range(80,82)\"` to be identical to the output of `PYTHONOPTIMIZE=1 python run.py -m port=80,81`.\r\n\r\n## System information\r\n- **Hydra Version** :  1.3.1\r\n- **Python version** :  3.8.10\r\n- **Virtual environment type and version** : System install inside docker\r\n- **Operating system** :  Ubuntu 20.04 (docker) / Ubuntu 22.04 (host)\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2570/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2570/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2552", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2552/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2552/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2552/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2552", "id": 1535297290, "node_id": "I_kwDOC2wWEs5bgscK", "number": 2552, "title": "Error executing job with overrides: ['task=detect', 'mode=train', 'model=yolov8s.pt', 'data=ChePaiJianCe\\\\data.yaml', 'epochs=100', 'imgsz=640', 'device=0'][Bug]", "user": {"login": "DarkAdu", "id": 48617553, "node_id": "MDQ6VXNlcjQ4NjE3NTUz", "avatar_url": "https://avatars.githubusercontent.com/u/48617553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DarkAdu", "html_url": "https://github.com/DarkAdu", "followers_url": "https://api.github.com/users/DarkAdu/followers", "following_url": "https://api.github.com/users/DarkAdu/following{/other_user}", "gists_url": "https://api.github.com/users/DarkAdu/gists{/gist_id}", "starred_url": "https://api.github.com/users/DarkAdu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DarkAdu/subscriptions", "organizations_url": "https://api.github.com/users/DarkAdu/orgs", "repos_url": "https://api.github.com/users/DarkAdu/repos", "events_url": "https://api.github.com/users/DarkAdu/events{/privacy}", "received_events_url": "https://api.github.com/users/DarkAdu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-16T17:48:15Z", "updated_at": "2023-01-19T13:24:09Z", "closed_at": "2023-01-18T02:31:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "yolov8 \r\n\r\nEverything is normal when using cpu to train, but it will report an error if it is replaced by gpu\r\n\r\n```\r\nC:\\Users\\Cola>yolo task=detect mode=train model=yolov8s.pt data=ChePaiJianCe\\data.yaml epochs=100 imgsz=640 device=0\r\nyolo\\engine\\trainer: task=detect, mode=train, model=yolov8s.pt, data=ChePaiJianCe\\data.yaml, epochs=100, patience=50, batch=16, imgsz=640, save=True, cache=False, device=0, workers=8, project=None, name=None, exist_ok=False, pretrained=False, optimizer=SGD, verbose=False, seed=0, deterministic=True, single_cls=False, image_weights=False, rect=False, cos_lr=False, close_mosaic=10, resume=False, overlap_mask=True, mask_ratio=4, dropout=0.0, val=True, save_json=False, save_hybrid=False, conf=None, iou=0.7, max_det=300, half=False, dnn=False, plots=True, source=None, show=False, save_txt=False, save_conf=False, save_crop=False, hide_labels=False, hide_conf=False, vid_stride=1, line_thickness=3, visualize=False, augment=False, agnostic_nms=False, retina_masks=False, format=torchscript, keras=False, optimize=False, int8=False, dynamic=False, simplify=False, opset=17, workspace=4, nms=False, lr0=0.01, lrf=0.01, momentum=0.937, weight_decay=0.0005, warmup_epochs=3.0, warmup_momentum=0.8, warmup_bias_lr=0.1, box=7.5, cls=0.5, dfl=1.5, fl_gamma=0.0, label_smoothing=0.0, nbs=64, hsv_h=0.015, hsv_s=0.7, hsv_v=0.4, degrees=0.0, translate=0.1, scale=0.5, shear=0.0, perspective=0.0, flipud=0.0, fliplr=0.5, mosaic=1.0, mixup=0.0, copy_paste=0.0, hydra={'output_subdir': None, 'run': {'dir': '.'}}, v5loader=False, save_dir=runs\\detect\\train6\r\nUltralytics YOLOv8.0.3  Python-3.9.13 torch-1.13.1+cu117 CUDA:0 (NVIDIA GeForce RTX 3070 Ti Laptop GPU, 8192MiB)\r\nOverriding model.yaml nc=80 with nc=5\r\n\r\n                   from  n    params  module                                       arguments\r\n  0                  -1  1       928  ultralytics.nn.modules.Conv                  [3, 32, 3, 2]\r\n  1                  -1  1     18560  ultralytics.nn.modules.Conv                  [32, 64, 3, 2]\r\n  2                  -1  1     29056  ultralytics.nn.modules.C2f                   [64, 64, 1, True]\r\n  3                  -1  1     73984  ultralytics.nn.modules.Conv                  [64, 128, 3, 2]\r\n  4                  -1  2    197632  ultralytics.nn.modules.C2f                   [128, 128, 2, True]\r\n  5                  -1  1    295424  ultralytics.nn.modules.Conv                  [128, 256, 3, 2]\r\n  6                  -1  2    788480  ultralytics.nn.modules.C2f                   [256, 256, 2, True]\r\n  7                  -1  1   1180672  ultralytics.nn.modules.Conv                  [256, 512, 3, 2]\r\n  8                  -1  1   1838080  ultralytics.nn.modules.C2f                   [512, 512, 1, True]\r\n  9                  -1  1    656896  ultralytics.nn.modules.SPPF                  [512, 512, 5]\r\n 10                  -1  1         0  torch.nn.modules.upsampling.Upsample         [None, 2, 'nearest']\r\n 11             [-1, 6]  1         0  ultralytics.nn.modules.Concat                [1]\r\n 12                  -1  1    591360  ultralytics.nn.modules.C2f                   [768, 256, 1]\r\n 13                  -1  1         0  torch.nn.modules.upsampling.Upsample         [None, 2, 'nearest']\r\n 14             [-1, 4]  1         0  ultralytics.nn.modules.Concat                [1]\r\n 15                  -1  1    148224  ultralytics.nn.modules.C2f                   [384, 128, 1]\r\n 16                  -1  1    147712  ultralytics.nn.modules.Conv                  [128, 128, 3, 2]\r\n 17            [-1, 12]  1         0  ultralytics.nn.modules.Concat                [1]\r\n 18                  -1  1    493056  ultralytics.nn.modules.C2f                   [384, 256, 1]\r\n 19                  -1  1    590336  ultralytics.nn.modules.Conv                  [256, 256, 3, 2]\r\n 20             [-1, 9]  1         0  ultralytics.nn.modules.Concat                [1]\r\n 21                  -1  1   1969152  ultralytics.nn.modules.C2f                   [768, 512, 1]\r\n 22        [15, 18, 21]  1   2117983  ultralytics.nn.modules.Detect                [5, [128, 256, 512]]\r\nModel summary: 225 layers, 11137535 parameters, 11137519 gradients, 28.7 GFLOPs\r\n\r\nTransferred 349/355 items from pretrained weights\r\noptimizer: SGD(lr=0.01) with parameter groups 57 weight(decay=0.0), 64 weight(decay=0.0005), 63 bias\r\ntrain: Scanning C:\\Users\\Cola\\ChePaiJianCe\\train\\labels.cache... 243 images, 0 backgrounds, 0 corrupt: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588|\r\nval: Scanning C:\\Users\\Cola\\ChePaiJianCe\\valid\\labels.cache... 21 images, 0 backgrounds, 0 corrupt: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 21\r\nImage sizes 640 train, 640 val\r\nUsing 8 dataloader workers\r\nLogging results to runs\\detect\\train6\r\nStarting training for 100 epochs...\r\n\r\n      Epoch    GPU_mem   box_loss   cls_loss   dfl_loss  Instances       Size\r\n      1/100      3.86G      1.201      5.759      1.288          7        640: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 16/16 [00:07<00:00,  2.\r\n                 Class     Images  Instances      Box(P          R      mAP50  mAP50-95):   0%|          | 0/1 [00:06<?\r\nError executing job with overrides: ['task=detect', 'mode=train', 'model=yolov8s.pt', 'data=ChePaiJianCe\\\\data.yaml', 'epochs=100', 'imgsz=640', 'device=0']\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\runpy.py\", line 197, in _run_module_as_main\r\n    return _run_code(code, main_globals, None,\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\Scripts\\yolo.exe\\__main__.py\", line 7, in <module>\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\hydra\\main.py\", line 90, in decorated_main\r\n    _run_hydra(\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 394, in _run_hydra\r\n    _run_app(\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 457, in _run_app\r\n    run_and_report(\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 222, in run_and_report\r\n    raise ex\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 219, in run_and_report\r\n    return func()\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 458, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\hydra\\_internal\\hydra.py\", line 132, in run\r\n    _ = ret.return_value\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\hydra\\core\\utils.py\", line 260, in return_value\r\n    raise self._return_value\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\hydra\\core\\utils.py\", line 186, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\ultralytics\\yolo\\cli.py\", line 52, in cli\r\n    func(cfg)\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\hydra\\main.py\", line 79, in decorated_main\r\n    return task_function(cfg_passthrough)\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\ultralytics\\yolo\\v8\\detect\\train.py\", line 206, in train\r\n    model.train(**cfg)\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\ultralytics\\yolo\\engine\\model.py\", line 193, in train\r\n    self.trainer.train()\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\ultralytics\\yolo\\engine\\trainer.py\", line 177, in train\r\n    self._do_train(int(os.getenv(\"RANK\", -1)), world_size)\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\ultralytics\\yolo\\engine\\trainer.py\", line 332, in _do_train\r\n    self.metrics, self.fitness = self.validate()\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\ultralytics\\yolo\\engine\\trainer.py\", line 418, in validate\r\n    metrics = self.validator(self)\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\torch\\autograd\\grad_mode.py\", line 27, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\ultralytics\\yolo\\engine\\validator.py\", line 151, in __call__\r\n    preds = self.postprocess(preds)\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\ultralytics\\yolo\\v8\\detect\\val.py\", line 62, in postprocess\r\n    preds = ops.non_max_suppression(preds,\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\ultralytics\\yolo\\utils\\ops.py\", line 212, in non_max_suppression\r\n    i = torchvision.ops.nms(boxes, scores, iou_thres)  # NMS\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\torchvision\\ops\\boxes.py\", line 41, in nms\r\n    return torch.ops.torchvision.nms(boxes, scores, iou_threshold)\r\n  File \"C:\\Users\\Cola\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\torch\\_ops.py\", line 442, in __call__\r\n    return self._op(*args, **kwargs or {})\r\nNotImplementedError: Could not run 'torchvision::nms' with arguments from the 'CUDA' backend. This could be because the operator doesn't exist for this backend, or was omitted during the selective/custom build process (if using custom build). If you are a Facebook employee using PyTorch on mobile, please visit https://fburl.com/ptmfixes for possible resolutions. 'torchvision::nms' is only available for these backends: [CPU, QuantizedCPU, BackendSelect, Python, FuncTorchDynamicLayerBackMode, Functionalize, Named, Conjugate, Negative, ZeroTensor, ADInplaceOrView, AutogradOther, AutogradCPU, AutogradCUDA, AutogradXLA, AutogradMPS, AutogradXPU, AutogradHPU, AutogradLazy, Tracer, AutocastCPU, AutocastCUDA, FuncTorchBatched, FuncTorchVmapMode, Batched, VmapMode, FuncTorchGradWrapper, PythonTLSSnapshot, FuncTorchDynamicLayerFrontMode, PythonDispatcher].\r\n\r\nCPU: registered at C:\\Users\\circleci\\project\\torchvision\\csrc\\ops\\cpu\\nms_kernel.cpp:112 [kernel]\r\nQuantizedCPU: registered at C:\\Users\\circleci\\project\\torchvision\\csrc\\ops\\quantized\\cpu\\qnms_kernel.cpp:124 [kernel]\r\nBackendSelect: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\BackendSelectFallbackKernel.cpp:3 [backend fallback]\r\nPython: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\PythonFallbackKernel.cpp:140 [backend fallback]\r\nFuncTorchDynamicLayerBackMode: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\functorch\\DynamicLayer.cpp:488 [backend fallback]\r\nFunctionalize: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\FunctionalizeFallbackKernel.cpp:291 [backend fallback]\r\nNamed: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\NamedRegistrations.cpp:7 [backend fallback]\r\nConjugate: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\ConjugateFallback.cpp:18 [backend fallback]\r\nNegative: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\native\\NegateFallback.cpp:18 [backend fallback]\r\nZeroTensor: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\ZeroTensorFallback.cpp:86 [backend fallback]\r\nADInplaceOrView: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\VariableFallbackKernel.cpp:64 [backend fallback]\r\nAutogradOther: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\VariableFallbackKernel.cpp:35 [backend fallback]\r\nAutogradCPU: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\VariableFallbackKernel.cpp:39 [backend fallback]\r\nAutogradCUDA: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\VariableFallbackKernel.cpp:47 [backend fallback]\r\nAutogradXLA: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\VariableFallbackKernel.cpp:51 [backend fallback]\r\nAutogradMPS: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\VariableFallbackKernel.cpp:59 [backend fallback]\r\nAutogradXPU: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\VariableFallbackKernel.cpp:43 [backend fallback]\r\nAutogradHPU: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\VariableFallbackKernel.cpp:68 [backend fallback]\r\nAutogradLazy: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\VariableFallbackKernel.cpp:55 [backend fallback]\r\nTracer: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\torch\\csrc\\autograd\\TraceTypeManual.cpp:296 [backend fallback]\r\nAutocastCPU: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\autocast_mode.cpp:482 [backend fallback]\r\nAutocastCUDA: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\autocast_mode.cpp:324 [backend fallback]\r\nFuncTorchBatched: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\functorch\\LegacyBatchingRegistrations.cpp:743 [backend fallback]\r\nFuncTorchVmapMode: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\functorch\\VmapModeRegistrations.cpp:28 [backend fallback]\r\nBatched: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\BatchingRegistrations.cpp:1064 [backend fallback]\r\nVmapMode: fallthrough registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\VmapModeRegistrations.cpp:33 [backend fallback]\r\nFuncTorchGradWrapper: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\functorch\\TensorWrapper.cpp:189 [backend fallback]\r\nPythonTLSSnapshot: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\PythonFallbackKernel.cpp:148 [backend fallback]\r\nFuncTorchDynamicLayerFrontMode: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\functorch\\DynamicLayer.cpp:484 [backend fallback]\r\nPythonDispatcher: registered at C:\\actions-runner\\_work\\pytorch\\pytorch\\builder\\windows\\pytorch\\aten\\src\\ATen\\core\\PythonFallbackKernel.cpp:144 [backend fallback]\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2552/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2535", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2535/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2535/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2535/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2535", "id": 1520836757, "node_id": "I_kwDOC2wWEs5apiCV", "number": 2535, "title": "[Bug] MissingConfigException cannot be correctly deserialized, due to lack of  missing_cfg_file ctor default", "user": {"login": "gazonk", "id": 6096058, "node_id": "MDQ6VXNlcjYwOTYwNTg=", "avatar_url": "https://avatars.githubusercontent.com/u/6096058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gazonk", "html_url": "https://github.com/gazonk", "followers_url": "https://api.github.com/users/gazonk/followers", "following_url": "https://api.github.com/users/gazonk/following{/other_user}", "gists_url": "https://api.github.com/users/gazonk/gists{/gist_id}", "starred_url": "https://api.github.com/users/gazonk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gazonk/subscriptions", "organizations_url": "https://api.github.com/users/gazonk/orgs", "repos_url": "https://api.github.com/users/gazonk/repos", "events_url": "https://api.github.com/users/gazonk/events{/privacy}", "received_events_url": "https://api.github.com/users/gazonk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-05T14:26:10Z", "updated_at": "2023-01-12T14:46:14Z", "closed_at": "2023-01-12T14:46:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nin https://github.com/facebookresearch/hydra/blob/main/hydra/errors.py\r\nthe missing_cfg_file parameter of the `MissingConfigException` should be defaulted to `None` since it is optional, otherwise deserialization will fail.\r\n## Checklist\r\n- [x] I checked on latest commit [7bc2b1a] of errors.py (https://github.com/facebookresearch/hydra/commit/7bc2b1ad66da91a12c6158f9413c908b211bff1e) \r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n** Minimal Code/Config snippet to reproduce **\r\n```python\r\nimport pickle\r\nimport hydra\r\ne = hydra.errors.MissingConfigException(\"missing\", \"file\")\r\nx = pickle.dumps(e)\r\ny = pickle.loads(x)\r\n```\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: __init__() missing 1 required positional argument: 'missing_cfg_file'\r\n```\r\n\r\n## Expected Behavior\r\nsuccessful deserialization:\r\n```\r\n>>> y\r\nMissingConfigException('missing')\r\n```\r\n## System information\r\n- **Hydra Version** :  hydra-core==1.3.1\r\n- **Python version** : Python 3.8.13\r\n- **Virtual environment type and version** : None\r\n- **Operating system** : Ubuntu 22.04.1 LT\r\n\r\n## Additional context\r\nThis exception was serialized/deserialized when using ray tune.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2535/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2534", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2534/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2534/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2534/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2534", "id": 1519003531, "node_id": "I_kwDOC2wWEs5aiieL", "number": 2534, "title": "[Documentation Bug] Use of the term 'duck type' in documentation", "user": {"login": "Gazoo101", "id": 2774866, "node_id": "MDQ6VXNlcjI3NzQ4NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2774866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gazoo101", "html_url": "https://github.com/Gazoo101", "followers_url": "https://api.github.com/users/Gazoo101/followers", "following_url": "https://api.github.com/users/Gazoo101/following{/other_user}", "gists_url": "https://api.github.com/users/Gazoo101/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gazoo101/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gazoo101/subscriptions", "organizations_url": "https://api.github.com/users/Gazoo101/orgs", "repos_url": "https://api.github.com/users/Gazoo101/repos", "events_url": "https://api.github.com/users/Gazoo101/events{/privacy}", "received_events_url": "https://api.github.com/users/Gazoo101/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-04T13:42:46Z", "updated_at": "2023-01-11T22:13:40Z", "closed_at": "2023-01-11T14:15:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "This may be me being a stickler but I was super confused by the use of the term duck-typing on this (and related pages):\r\n\r\nhttps://hydra.cc/docs/tutorials/structured_config/minimal_example/\r\n\r\nThe [official Python documentation](https://docs.python.org/3/library/typing.html) refers to this functionality as type hinting. I understand duck typing as a concept is all about testing for functionality rather than being explicit about type. So in short, I'm super confused about the documentation using the term 'duck typing' when referring to the `cfg: MySQLConfig` code.\r\n\r\nThat being said the official Python page also uses the term duck typing in various places on the page, but the overarching term to me still appears to be type hinting, unless I'm missing something.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2534/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2534/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2510", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2510/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2510/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2510/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2510", "id": 1505126222, "node_id": "I_kwDOC2wWEs5ZtmdO", "number": 2510, "title": "[Bug] Relax pin to allow omegaconf 2.3", "user": {"login": "weiji14", "id": 23487320, "node_id": "MDQ6VXNlcjIzNDg3MzIw", "avatar_url": "https://avatars.githubusercontent.com/u/23487320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weiji14", "html_url": "https://github.com/weiji14", "followers_url": "https://api.github.com/users/weiji14/followers", "following_url": "https://api.github.com/users/weiji14/following{/other_user}", "gists_url": "https://api.github.com/users/weiji14/gists{/gist_id}", "starred_url": "https://api.github.com/users/weiji14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weiji14/subscriptions", "organizations_url": "https://api.github.com/users/weiji14/orgs", "repos_url": "https://api.github.com/users/weiji14/repos", "events_url": "https://api.github.com/users/weiji14/events{/privacy}", "received_events_url": "https://api.github.com/users/weiji14/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-20T19:16:56Z", "updated_at": "2022-12-21T05:23:56Z", "closed_at": "2022-12-21T05:23:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nJust reporting an issue when installing `hydra` with Python 3.11 on conda=forge. Currently, `hydra=1.3.0` is pinned to `omegaconf~=2.2` (>=2.2, <2.3) (see https://github.com/facebookresearch/hydra/blob/v1.3.0/requirements/requirements.txt#L1). Support for Python 3.11 in `hydra` was added in https://github.com/facebookresearch/hydra/issues/2443, but Python 3.11 support was only added in `omegaconf=2.3` (see https://github.com/omry/omegaconf/releases/tag/v2.3.0).\r\n\r\nSo for Python 3.11 to work properly, the version pinning needs to be relaxed to something like `omegaconf>=2.2` instead.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```bash\r\nmamba create -n temp python=3.11 hydra-core=1.3.0\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nEncountered problems while solving:\r\n  - package hydra-core-1.3.0-pyhd8ed1ab_0 requires omegaconf 2.2.*, but none of the providers can be installed\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nThe installation command should work\r\n\r\n## System information\r\n- **Hydra Version** :  1.3.0\r\n- **Python version** : 3.11\r\n- **Virtual environment type and version** : n/a\r\n- **Operating system** : Linux\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n\r\nThe unpinning will need to be done first on https://github.com/facebookresearch/hydra, and a patch version (1.3.1?) released, before the change can be propagated to https://github.com/conda-forge/hydra-core-feedstock.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2510/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2510/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2504", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2504/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2504/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2504/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2504", "id": 1497813971, "node_id": "I_kwDOC2wWEs5ZRtPT", "number": 2504, "title": "[Bug] Instantiate recursive list with _target_ witch is annotated as dataclass has unexpected behavior", "user": {"login": "npuichigo", "id": 11533479, "node_id": "MDQ6VXNlcjExNTMzNDc5", "avatar_url": "https://avatars.githubusercontent.com/u/11533479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/npuichigo", "html_url": "https://github.com/npuichigo", "followers_url": "https://api.github.com/users/npuichigo/followers", "following_url": "https://api.github.com/users/npuichigo/following{/other_user}", "gists_url": "https://api.github.com/users/npuichigo/gists{/gist_id}", "starred_url": "https://api.github.com/users/npuichigo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/npuichigo/subscriptions", "organizations_url": "https://api.github.com/users/npuichigo/orgs", "repos_url": "https://api.github.com/users/npuichigo/repos", "events_url": "https://api.github.com/users/npuichigo/events{/privacy}", "received_events_url": "https://api.github.com/users/npuichigo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471574, "node_id": "MDU6TGFiZWwxNDAzNDcxNTc0", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}, {"id": 3948538137, "node_id": "LA_kwDOC2wWEs7rWekZ", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/has-workaround", "name": "has-workaround", "color": "5319e7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/16", "html_url": "https://github.com/facebookresearch/hydra/milestone/16", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/16/labels", "id": 8773404, "node_id": "MI_kwDOC2wWEs4Ahd8c", "number": 16, "title": "Hydra 2.0.0", "description": "", "creator": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 1, "state": "open", "created_at": "2022-12-17T03:10:39Z", "updated_at": "2022-12-17T03:42:26Z", "due_on": null, "closed_at": null}, "comments": 3, "created_at": "2022-12-15T05:28:26Z", "updated_at": "2023-01-12T15:06:31Z", "closed_at": "2022-12-17T03:42:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## To reproduce\r\nI want to instantiate a huggingface accelerate for deep learning training, while some of it's argument need [a list of dataclass objects](https://huggingface.co/docs/accelerate/package_reference/accelerator#accelerate.Accelerator.kwargs_handlers) like (https://huggingface.co/docs/accelerate/package_reference/kwargs#accelerate.DistributedDataParallelKwargs)\r\n\r\nIt's okay outside a list.\r\n```python\r\nIn [35]: kwargs = hydra.utils.instantiate({'_target_': 'accelerate.DistributedDataParallelKwargs'})\r\n\r\nIn [36]: kwargs\r\nOut[36]: DistributedDataParallelKwargs(dim=0, broadcast_buffers=True, bucket_cap_mb=25, find_unused_parameters=False, check_reduction=False, gradient_as_bucket_view=False, static_graph=False)\r\n```\r\n\r\nIt's not.\r\n```python\r\nIn [38]: kwargs = hydra.utils.instantiate([{'_target_': 'accelerate.DistributedDataParallelKwargs'}])\r\n\r\nIn [39]: kwargs\r\nOut[39]: [{'dim': 0, 'broadcast_buffers': True, 'bucket_cap_mb': 25, 'find_unused_parameters': False, 'check_reduction': False, 'gradient_as_bucket_view': False, 'static_graph': False}]\r\n```\r\n\r\n## Expected Behavior\r\nA list of original dataclass object\r\n\r\n## System information\r\n- **Hydra Version** :  1.2.0\r\n- **Python version** :  3.8", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2504/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2504/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2448", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2448/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2448/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2448/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2448", "id": 1433473026, "node_id": "I_kwDOC2wWEs5VcRAC", "number": 2448, "title": "[Bug] config module not found when I use `initialize_config_module`", "user": {"login": "PoojaAg18", "id": 28338450, "node_id": "MDQ6VXNlcjI4MzM4NDUw", "avatar_url": "https://avatars.githubusercontent.com/u/28338450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PoojaAg18", "html_url": "https://github.com/PoojaAg18", "followers_url": "https://api.github.com/users/PoojaAg18/followers", "following_url": "https://api.github.com/users/PoojaAg18/following{/other_user}", "gists_url": "https://api.github.com/users/PoojaAg18/gists{/gist_id}", "starred_url": "https://api.github.com/users/PoojaAg18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PoojaAg18/subscriptions", "organizations_url": "https://api.github.com/users/PoojaAg18/orgs", "repos_url": "https://api.github.com/users/PoojaAg18/repos", "events_url": "https://api.github.com/users/PoojaAg18/events{/privacy}", "received_events_url": "https://api.github.com/users/PoojaAg18/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-11-02T16:49:57Z", "updated_at": "2022-11-08T15:29:23Z", "closed_at": "2022-11-08T15:29:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nPrimary config module not found is returned whenever I use initialize_config_module\r\n\r\nIt works for some of the paths but failed for most. not sure why is this inconsistency\r\n\r\n\r\n## Checklist\r\n- [ yes] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```python\r\n# my_app.py\r\nwith initialize_config_module(\"relative path\"):\r\n    print(\"yes\")\r\n    hydra_config = compose(\"file name\")\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nPrimary config module 'free.ads_creative_ranking.conf_demo' not found.\r\nCheck that it's correct and contains an __init__.py file\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2448/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2417", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2417/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2417/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2417/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2417", "id": 1409729638, "node_id": "I_kwDOC2wWEs5UBsRm", "number": 2417, "title": "Returning `ListConfig` instead of `DictConfig`?", "user": {"login": "jonathanloganmoran", "id": 22329957, "node_id": "MDQ6VXNlcjIyMzI5OTU3", "avatar_url": "https://avatars.githubusercontent.com/u/22329957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathanloganmoran", "html_url": "https://github.com/jonathanloganmoran", "followers_url": "https://api.github.com/users/jonathanloganmoran/followers", "following_url": "https://api.github.com/users/jonathanloganmoran/following{/other_user}", "gists_url": "https://api.github.com/users/jonathanloganmoran/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathanloganmoran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathanloganmoran/subscriptions", "organizations_url": "https://api.github.com/users/jonathanloganmoran/orgs", "repos_url": "https://api.github.com/users/jonathanloganmoran/repos", "events_url": "https://api.github.com/users/jonathanloganmoran/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathanloganmoran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1620049642, "node_id": "MDU6TGFiZWwxNjIwMDQ5NjQy", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/awaiting_response", "name": "awaiting_response", "color": "edac74", "default": false, "description": "Awaiting response"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-14T18:51:47Z", "updated_at": "2022-11-27T21:30:20Z", "closed_at": "2022-11-27T21:30:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nFor some reason, I'm getting back a `list` object (`ListConfig` type?) in only one of my Python script files. Yet, in all others, I get a `DictConfig` type (which I expect). \r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```yaml\r\n### config.yaml ###\r\ndefaults:\r\n    dataset: dataset_name\r\n    model: model_name\r\n    ...\r\n```\r\n```yaml\r\n### model_name.yaml ###\r\nparam_1: value_1\r\nparam_2: value_2\r\n...\r\n```\r\n```yaml\r\n### dataset_name.yaml ###\r\nparam_3: value_3\r\nparam_4: value_4\r\n\r\nnested_keys:\r\n    param_5: value_5 \r\n```\r\n\r\n```python\r\n### dataclasses.py ###\r\nfrom dataclasses import dataclass\r\n\r\n@dataclass\r\nclass Dataset:\r\n    param_3: type_3\r\n    param_4: type_4\r\n\r\n@dataclass\r\nclass TFModel:\r\n    param_1: type_1\r\n    param_2: type_2\r\n\r\n@dataclass\r\nclass MyModel:\r\n    model: TFModel\r\n    dataset: Dataset\r\n```\r\n```python\r\n### my_script.py ###\r\nfrom dataclasses import MyModel\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nimport omegaconf\r\nfrom omegaconf import DictConfig, OmegaConf\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(name='model_config', node=MyModel)\r\nOmegaConf.register_new_resolver(\r\n    'custom_resolver': lambda x: custom_fn(x)\r\n)\r\n\r\n@hydra.main(version_base=None, config_path='../configs', config_name='config.yaml')\r\ndef main(cfg: MyModel):\r\n    cfg = OmegaConf.create(cfg)\r\n    print(cfg['model'].param_1)\r\n    ...\r\n```\r\n```text\r\n> python3 my_script.py model.param1={VALUE_1} ...\r\n```\r\n** Stack trace/error message **\r\n```text\r\nFile \"/root/miniconda3/lib/python3.7/site-packages/omegaconf/listconfig.py\", line 87, in _validate_get\r\n    \"ListConfig indices must be integers or slices, not $KEY_TYPE\"\r\nomegaconf.errors.KeyValidationError: ListConfig indices must be integers or slices, not str\r\n    full_key: [model]\r\n    object_type=list\r\n```\r\n\r\n## Expected Behavior\r\nI override *some* (not all) of the parameters defined in `model_name.yaml` using the Basic Override Syntax in CLI. These overrides are combined with the other (unmodified) parameters from `model_name.yaml`, then loaded into `my_script.py` as a structured config (`MyModel`). Then, I expect to access `cfg` attributes either by attribute or dictionary style, just like I have done in my other Python files without issue.\r\n\r\nCurrently, I get back a `list` object of *only* the configs I've overridden in CLI, i.e., `['model.param_1=VALUE_1', ...]` and not any others defined in `model_name.yaml`. Running the same on other Python files in my project results in a structured config `dict` instance, i.e., `cfg = {'model': {VALUE_1, value_2}, 'dataset': {value_3, value_4} ... }`, which is what I expect.\r\n\r\n## System information\r\n- **Hydra Version** :  1.2.0\r\n- **Python version** : 3.7.3\r\n- **Virtual environment type and version** : NoVNC\r\n- **Operating system** : Ubuntu 16.04.6 LTS (Xenial)\r\n\r\n## Additional context\r\nI am using Basic Override syntax inside a Jupyter Notebook cell, e.g.,\r\n```\r\n!python3 my_script.py model.param_1={VALUE_1} ...\r\n```\r\nWhen I override params with the above for other Python files, I get back the `MyModel` dict-like object as I would expect.\r\n\r\nOne other thing, the `main()` function inside `my_script` is called by the [`tf.compat.v1.run()`](https://www.tensorflow.org/api_docs/python/tf/compat/v1/app/run) function wrapper. The wrapper accepts two keyword arguments, a Callable to `main()` and its positional argument (if any), i.e., `tf...run(main=main, argv=argv)`. Right now, I'm not passing it anything (the `sys.modules['__main__'].main` is called by default). \r\n\r\nA workaround I can think of right now would be to use the Hydra [Compose API](https://hydra.cc/docs/advanced/compose_api/) and pass the `cfg` result into the wrapper, i.e., `tf...run(main=__main__, argv=cfg)`. Is there a better way to resolve this?\r\n\r\n**UPDATE**: Proposed workaround above doesn't work; TF expects the `argv` to be a list of `absl` flags.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2417/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2417/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2414", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2414/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2414/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2414/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2414", "id": 1405080175, "node_id": "I_kwDOC2wWEs5Tv9Jv", "number": 2414, "title": "Hydra working directory", "user": {"login": "pietrolesci", "id": 61748653, "node_id": "MDQ6VXNlcjYxNzQ4NjUz", "avatar_url": "https://avatars.githubusercontent.com/u/61748653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietrolesci", "html_url": "https://github.com/pietrolesci", "followers_url": "https://api.github.com/users/pietrolesci/followers", "following_url": "https://api.github.com/users/pietrolesci/following{/other_user}", "gists_url": "https://api.github.com/users/pietrolesci/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietrolesci/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietrolesci/subscriptions", "organizations_url": "https://api.github.com/users/pietrolesci/orgs", "repos_url": "https://api.github.com/users/pietrolesci/repos", "events_url": "https://api.github.com/users/pietrolesci/events{/privacy}", "received_events_url": "https://api.github.com/users/pietrolesci/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-11T18:45:02Z", "updated_at": "2022-10-14T08:12:41Z", "closed_at": "2022-10-14T08:12:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "After upgrading to hydra 1.2 if I call\r\n\r\n```python\r\n@hydra.main(version_base=None, config_path=\"conf\", config_name=\"config\")\r\ndef main(cfg):\r\n    print(os.getcwd())\r\n```\r\nit prints the directory where the conf is rather than the usual `./outputs`\r\n\r\nContext:\r\n- Hydra config and `*.log` are still saved in the correct `./outputs` folder\r\n- Any file I save from within the script is still relative to where the conf folder is located while before it was relative to the hydra output directory\r\n\r\nQuestions:\r\n- Is this a new behaviour?\r\n- Is there anything I can do to force hydra to the change the current directory for me?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2414/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2414/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2405", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2405/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2405/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2405/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2405", "id": 1397360304, "node_id": "I_kwDOC2wWEs5TSgaw", "number": 2405, "title": "[Bug] Interpolation Key error when using absolute path", "user": {"login": "MathKlim", "id": 48051974, "node_id": "MDQ6VXNlcjQ4MDUxOTc0", "avatar_url": "https://avatars.githubusercontent.com/u/48051974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MathKlim", "html_url": "https://github.com/MathKlim", "followers_url": "https://api.github.com/users/MathKlim/followers", "following_url": "https://api.github.com/users/MathKlim/following{/other_user}", "gists_url": "https://api.github.com/users/MathKlim/gists{/gist_id}", "starred_url": "https://api.github.com/users/MathKlim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MathKlim/subscriptions", "organizations_url": "https://api.github.com/users/MathKlim/orgs", "repos_url": "https://api.github.com/users/MathKlim/repos", "events_url": "https://api.github.com/users/MathKlim/events{/privacy}", "received_events_url": "https://api.github.com/users/MathKlim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-10-05T07:29:02Z", "updated_at": "2022-10-07T19:58:49Z", "closed_at": "2022-10-07T19:58:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThis might be Omegaconf related, but this happens when I use the Hydra `defaults` list option. Here's the architecture of the project for the record.\r\n\r\n```\r\n.\r\n\u251c\u2500\u2500 bug\r\n\u2502   \u251c\u2500\u2500 config.py\r\n\u2502   \u251c\u2500\u2500 configs\r\n\u2502   \u2502   \u251c\u2500\u2500 data_sources\r\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 sources.yaml\r\n\u2502   \u2502   \u251c\u2500\u2500 params.yaml\r\n\u2502   \u2502   \u2514\u2500\u2500 training\r\n\u2502   \u2502       \u2514\u2500\u2500 custom.yaml\r\n\u2502   \u2514\u2500\u2500 __init__.py\r\n\u2514\u2500\u2500 requirements.txt\r\n```\r\n\r\nWhen I try to use absolute path to do interpolation in config file which are in the default list I get an InterpolationKey error.\r\n\r\n```yaml\r\n# params.yaml\r\n---\r\ndefaults:\r\n    - _self_\r\n    - data_sources: sources\r\n    - training: custom\r\n\r\nmonitoring:\r\n    name: test\r\n    exp: ${monitoring.name}_exp\r\n\r\nhydra:\r\n    job:\r\n        chdir: false\r\n    run:\r\n        dir: outputs/hydra/${now:%Y-%m-%d_%H-%M-%S}\r\n```\r\n\r\nFor example, with `data_cources/sources.yaml` I am forced to use relative path so that the resolution of the config with `initialize` is successful, i.e. like \r\n\r\n```yaml\r\n# sources.yaml\r\ndata:\r\n      data_dir: /path\r\nraw:\r\n      data_dir_raw: ${..data.data_dir}/raw1\r\n      data_dir_raw2: ${.data_dir_raw}/raw2\r\ntest: ${training.lr}\r\n```\r\n then, with \r\n\r\n```python\r\n# config.py\r\nfrom hydra import compose, initialize\r\nfrom omegaconf import OmegaConf, DictConfig\r\nimport hydra\r\n\r\nwith initialize(version_base=\"1.2\", config_path=\"./configs/\"):\r\n    cfg = compose(config_name=\"params\")\r\n    print(OmegaConf.to_yaml(cfg, resolve=True))\r\n\r\n\r\n    print(f\"{cfg.data_sources.raw.data_dir_raw}\")\r\n    print(f\"{cfg.data_sources.data.data_dir}\")\r\n```\r\n\r\nI have a successful interpolation, \r\n\r\n```shell\r\n\u276f python bug/config.py\r\nmonitoring:\r\n  name: test\r\n  exp: test_exp\r\ndata_sources:\r\n  data:\r\n    data_dir: /path\r\n  raw:\r\n    data_dir_raw: /path/raw1\r\n    data_dir_raw2: /path/raw1/raw2\r\n  test: 0.003\r\ntraining:\r\n  lr: 0.003\r\n\r\n/path/raw1\r\n/path\r\n```\r\n\r\nBut, if I put absolute paths\r\n\r\n```yaml\r\n#sources.yaml\r\ndata:\r\n      data_dir: /path\r\nraw:\r\n      data_dir_raw: ${data.data_dir}/raw1\r\n      data_dir_raw2: ${raw.data_dir_raw}/raw2\r\ntest: ${training.lr}\r\n```\r\nI get the following error.\r\n\r\n```shell\r\n...\r\n    raise InterpolationKeyError(f\"Interpolation key '{inter_key}' not found\")\r\nomegaconf.errors.InterpolationKeyError: Interpolation key 'data.data_dir' not found\r\n    full_key: data_sources.raw.data_dir_raw\r\n    object_type=dict\r\n```\r\n\r\nI was thinking, maybe it's because `data` defines another dictionary than `raw`, but even with this configuration, where the absolute path refers to a path in the same dictionary, it fails.\r\n\r\n```yaml\r\ndata:\r\n      data_dir: /path\r\nraw:\r\n      data_dir_raw: ${..data.data_dir}/raw1\r\n      data_dir_raw2: ${raw.data_dir_raw}/raw2\r\ntest: ${training.lr}\r\n```\r\n\r\nI was certain I could use absolute path like that in older versions of Hydra, but now I'm confused. Did I miss something ?\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra : I'm using Hydra 1.2\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips). : Here's the link to a repo with the code, [click here](https://github.com/MathKlim/hydra_compose_behavior).\r\n\r\n## To reproduce\r\n\r\n1. git clone the [repo](https://github.com/MathKlim/hydra_compose_behavior).\r\n2. Install the requirements (hydra-core==1.2.0)\r\n3. Launch `python bug/config.py` to see everything goes well.\r\n4. Change `data_sources/sources.yaml` to\r\n```yaml\r\ndata:\r\n      data_dir: /path\r\nraw:\r\n      data_dir_raw: ${data.data_dir}/raw1\r\n      data_dir_raw2: ${raw.data_dir_raw}/raw2\r\ntest: ${training.lr}\r\n```\r\n5. Launch `python bug/config.py` to see it fail.\r\n\r\n** Stack trace/error message **\r\n```shell\r\n\u276f python bug/config.py\r\nTraceback (most recent call last):\r\n  File \"bug/config.py\", line 7, in <module>\r\n    print(OmegaConf.to_yaml(cfg, resolve=True))\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 747, in to_yaml\r\n    container = OmegaConf.to_container(cfg, resolve=resolve, enum_to_str=True)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 561, in to_container\r\n    return BaseContainer._to_content(\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 292, in _to_content\r\n    value = get_node_value(key)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 247, in get_node_value\r\n    value = BaseContainer._to_content(\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 292, in _to_content\r\n    value = get_node_value(key)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 247, in get_node_value\r\n    value = BaseContainer._to_content(\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 292, in _to_content\r\n    value = get_node_value(key)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 244, in get_node_value\r\n    conf._format_and_raise(key=key, value=None, cause=e)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/base.py\", line 231, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/_utils.py\", line 900, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/_utils.py\", line 798, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set env var OC_CAUSE=1 for full trace\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 242, in get_node_value\r\n    node = node._dereference_node()\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/base.py\", line 246, in _dereference_node\r\n    node = self._dereference_node_impl(throw_on_resolution_failure=True)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/base.py\", line 277, in _dereference_node_impl\r\n    return parent._resolve_interpolation_from_parse_tree(\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/base.py\", line 584, in _resolve_interpolation_from_parse_tree\r\n    resolved = self.resolve_parse_tree(\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/base.py\", line 764, in resolve_parse_tree\r\n    return visitor.visit(parse_tree)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/antlr4/tree/Tree.py\", line 34, in visit\r\n    return tree.accept(self)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/grammar/gen/OmegaConfGrammarParser.py\", line 206, in accept\r\n    return visitor.visitConfigValue(self)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 101, in visitConfigValue\r\n    return self.visit(ctx.getChild(0))\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/antlr4/tree/Tree.py\", line 34, in visit\r\n    return tree.accept(self)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/grammar/gen/OmegaConfGrammarParser.py\", line 342, in accept\r\n    return visitor.visitText(self)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 301, in visitText\r\n    return self._unescape(list(ctx.getChildren()))\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 389, in _unescape\r\n    text = str(self.visitInterpolation(node))\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 125, in visitInterpolation\r\n    return self.visit(ctx.getChild(0))\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/antlr4/tree/Tree.py\", line 34, in visit\r\n    return tree.accept(self)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/grammar/gen/OmegaConfGrammarParser.py\", line 921, in accept\r\n    return visitor.visitInterpolationNode(self)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 158, in visitInterpolationNode\r\n    return self.node_interpolation_callback(inter_key, self.memo)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/base.py\", line 745, in node_interpolation_callback\r\n    return self._resolve_node_interpolation(inter_key=inter_key, memo=memo)\r\n  File \"/home/vorph/miniconda3/envs/bug/lib/python3.8/site-packages/omegaconf/base.py\", line 676, in _resolve_node_interpolation\r\n    raise InterpolationKeyError(f\"Interpolation key '{inter_key}' not found\")\r\nomegaconf.errors.InterpolationKeyError: Interpolation key 'raw.data_dir_raw' not found\r\n    full_key: data_sources.raw.data_dir_raw2\r\n    object_type=dict\r\n```\r\n\r\n## Expected Behavior\r\nThe configuration should be resolved whether I use absolute path or relative path.\r\n\r\n## System information\r\n- **Hydra Version** :  1.2\r\n- **Python version** :  3.8\r\n- **Virtual environment type and version** :  conda\r\n- **Operating system** : Ubuntu 20.04\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2405/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2390", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2390/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2390/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2390/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2390", "id": 1381421919, "node_id": "I_kwDOC2wWEs5SVtNf", "number": 2390, "title": "[Bug] Cannot override group and group variable at the same time", "user": {"login": "camall3n", "id": 9636544, "node_id": "MDQ6VXNlcjk2MzY1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9636544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camall3n", "html_url": "https://github.com/camall3n", "followers_url": "https://api.github.com/users/camall3n/followers", "following_url": "https://api.github.com/users/camall3n/following{/other_user}", "gists_url": "https://api.github.com/users/camall3n/gists{/gist_id}", "starred_url": "https://api.github.com/users/camall3n/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camall3n/subscriptions", "organizations_url": "https://api.github.com/users/camall3n/orgs", "repos_url": "https://api.github.com/users/camall3n/repos", "events_url": "https://api.github.com/users/camall3n/events{/privacy}", "received_events_url": "https://api.github.com/users/camall3n/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471572, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcy", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Hydra usage question"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-21T19:53:37Z", "updated_at": "2022-09-22T18:06:32Z", "closed_at": "2022-09-22T13:44:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nCannot override group and group variable at the same time.\r\n\r\nFor example:\r\n```text\r\n python main.py car=vw car/color=black\r\n```\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nDirectory structure:\r\n```text\r\n\u251c\u2500\u2500 conf\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 car\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 vw.yaml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 config.yaml\r\n\u2514\u2500\u2500 main.py\r\n```\r\n\r\nmain.py:\r\n```python\r\nimport hydra\r\n\r\n@hydra.main(config_path=\"./conf\", config_name='config', version_base=None)\r\n\r\ndef main(cfg):\r\n    pass\r\n\r\nmain()\r\n```\r\n\r\nconf/config.yaml:\r\n```yaml\r\ndefaults:\r\n  - _self_\r\n  - car: null\r\n\r\nname: Alice\r\ncar: ???\r\n```\r\n\r\nconf/car/vw.yaml:\r\n```yaml\r\nmake: vw\r\nmodel: beetle\r\ncolor: red\r\n```\r\n\r\nI can print the default config and optionally override the `car` with `vw` or a dictionary that sets the `color` field, but when I try to set both the `car=vw` and the `car/color=black` at the same time, it fails.\r\n```text\r\n$ python main.py --cfg job\r\nname: Alice\r\ncar: ???\r\n\r\n$ python main.py car=vw --cfg job\r\nname: Alice\r\ncar:\r\n  make: vw\r\n  model: beetle\r\n  color: red\r\n\r\n$ python main.py car=\"{make:bmw,model:3series,color:black}\" --cfg job\r\nname: Alice\r\ncar:\r\n  make: bmw\r\n  model: 3series\r\n  color: black\r\n\r\n$ python main.py car=vw car/color=black --cfg job\r\nCould not override 'car/color'.\r\nTo append to your config use +car/color=black\r\nKey 'car/color' is not in struct\r\n    full_key: car/color\r\n    object_type=dict\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/cam/dev/hydra/hydra/_internal/config_loader_impl.py\", line 384, in _apply_overrides_to_config\r\n    OmegaConf.update(cfg, key, value, merge=True)\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/omegaconf.py\", line 729, in update\r\n    root.__setattr__(last_key, value)\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 337, in __setattr__\r\n    raise e\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 334, in __setattr__\r\n    self.__set_impl(key, value)\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 318, in __set_impl\r\n    self._set_item_impl(key, value)\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/basecontainer.py\", line 547, in _set_item_impl\r\n    self._validate_set(key, value)\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 180, in _validate_set\r\n    target = self._get_node(key) if key is not None else self\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 475, in _get_node\r\n    self._validate_get(key)\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 164, in _validate_get\r\n    self._format_and_raise(\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/base.py\", line 231, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/_utils.py\", line 900, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/Users/cam/dev/hydra/venv/lib/python3.9/site-packages/omegaconf/_utils.py\", line 798, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set env var OC_CAUSE=1 for full trace\r\nomegaconf.errors.ConfigAttributeError: Key 'car/color' is not in struct\r\n    full_key: car/color\r\n    object_type=dict\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/cam/dev/factored-reps/hydra-test/main.py\", line 7, in <module>\r\n    main()\r\n  File \"/Users/cam/dev/hydra/hydra/main.py\", line 90, in decorated_main\r\n    _run_hydra(\r\n  File \"/Users/cam/dev/hydra/hydra/_internal/utils.py\", line 403, in _run_hydra\r\n    run_and_report(\r\n  File \"/Users/cam/dev/hydra/hydra/_internal/utils.py\", line 220, in run_and_report\r\n    raise ex\r\n  File \"/Users/cam/dev/hydra/hydra/_internal/utils.py\", line 217, in run_and_report\r\n    return func()\r\n  File \"/Users/cam/dev/hydra/hydra/_internal/utils.py\", line 404, in <lambda>\r\n    lambda: hydra.show_cfg(\r\n  File \"/Users/cam/dev/hydra/hydra/_internal/hydra.py\", line 195, in show_cfg\r\n    cfg = self.compose_config(\r\n  File \"/Users/cam/dev/hydra/hydra/_internal/hydra.py\", line 594, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/Users/cam/dev/hydra/hydra/_internal/config_loader_impl.py\", line 142, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/Users/cam/dev/hydra/hydra/_internal/config_loader_impl.py\", line 270, in _load_configuration_impl\r\n    ConfigLoaderImpl._apply_overrides_to_config(config_overrides, cfg)\r\n  File \"/Users/cam/dev/hydra/hydra/_internal/config_loader_impl.py\", line 386, in _apply_overrides_to_config\r\n    raise ConfigCompositionException(\r\nhydra.errors.ConfigCompositionException: Could not override 'car/color'.\r\nTo append to your config use +car/color=black\r\n```\r\n\r\n## Expected Behavior\r\nThe `car` group info should come from vw.yaml, and the `color` field should be 'black':\r\n```text\r\n$ python main.py car=vw --cfg job\r\nname: Alice\r\ncar:\r\n  make: vw\r\n  model: beetle\r\n  color: black\r\n```\r\n\r\n**Note:** Overriding the variable using `+car/color=black` also doesn't work:\r\n```text\r\n$ python main.py car=vw +car/color=black --cfg job\r\nname: Alice\r\ncar:\r\n  make: vw\r\n  model: beetle\r\n  color: red\r\ncar/color: black\r\n```\r\n\r\n## System information\r\n- **Hydra Version** : 1.3.0.dev - 92a53421\r\n- **Python version** : 3.9.13\r\n- **Virtual environment type and version** : python venv + pip (22.1.1)\r\n- **Operating system** : macOS 10.15.7\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2390/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2383", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2383/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2383/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2383/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2383", "id": 1373667582, "node_id": "I_kwDOC2wWEs5R4ID-", "number": 2383, "title": "[Bug] setuptools: Installing 'hydra.core' as data is deprecated", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2169700018, "node_id": "MDU6TGFiZWwyMTY5NzAwMDE4", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/maintenance", "name": "maintenance", "color": "f7d331", "default": false, "description": "Project maintenance"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-14T22:44:21Z", "updated_at": "2022-09-15T22:49:33Z", "closed_at": "2022-09-15T22:49:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm getting a deprecation warning from setuptools when running the following at the root of the hydra repo:\r\n```text\r\npip install wheel\r\npython setup.py bdist_wheel\r\n```\r\nOutput:\r\n```\r\n  check.warn(importable)\r\n/home/rig1/miniconda3/envs/hydra310/lib/python3.10/site-packages/setuptools/command/build_py.py:202: SetuptoolsDeprecationWarning:     Installing 'hydra.test_utils.configs.package_tests' as data is deprecated, please list it in `packages`.\r\n    !!\r\n\r\n\r\n    ############################\r\n    # Package would be ignored #\r\n    ############################\r\n    Python recognizes 'hydra.test_utils.configs.package_tests' as an importable package,\r\n    but it is not listed in the `packages` configuration of setuptools.\r\n\r\n    'hydra.test_utils.configs.package_tests' has been automatically added to the distribution only\r\n    because it may contain data files, but this behavior is likely to change\r\n    in future versions of setuptools (and therefore is considered deprecated).\r\n\r\n    Please make sure that 'hydra.test_utils.configs.package_tests' is included as a package by using\r\n    the `packages` configuration field or the proper discovery methods\r\n    (for example by using `find_namespace_packages(...)`/`find_namespace:`\r\n    instead of `find_packages(...)`/`find:`).\r\n\r\n    You can read more about \"package discovery\" and \"data files\" on setuptools\r\n    documentation page.\r\n```\r\n\r\nThis output is repeated several times (once for each subpackage of `hydra`). I noticed this when debugging failure of the ray launcher CI tests (e.g. see the CI output [here](https://app.circleci.com/pipelines/github/facebookresearch/hydra/14886/workflows/549c5d3d-2129-493b-9fdf-a7d33e6a0bfc/jobs/148445))", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2383/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2362", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2362/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2362/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2362/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2362", "id": 1360230737, "node_id": "I_kwDOC2wWEs5RE3lR", "number": 2362, "title": "[Bug] hydra-nevergrad-sweeper has a requirement on numpy<1.20.0", "user": {"login": "ajw1980", "id": 1461301, "node_id": "MDQ6VXNlcjE0NjEzMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1461301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajw1980", "html_url": "https://github.com/ajw1980", "followers_url": "https://api.github.com/users/ajw1980/followers", "following_url": "https://api.github.com/users/ajw1980/following{/other_user}", "gists_url": "https://api.github.com/users/ajw1980/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajw1980/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajw1980/subscriptions", "organizations_url": "https://api.github.com/users/ajw1980/orgs", "repos_url": "https://api.github.com/users/ajw1980/repos", "events_url": "https://api.github.com/users/ajw1980/events{/privacy}", "received_events_url": "https://api.github.com/users/ajw1980/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-02T13:54:54Z", "updated_at": "2022-09-09T20:07:00Z", "closed_at": "2022-09-09T20:06:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "In hydra_nevergrad_sweeper/setup.py:\r\n```\r\n\"numpy<1.20.0\",  # remove once nevergrad is upgraded to support numpy 1.20\r\n```\r\nI think nevergrad supports numpy > 1.20.0 so I think this requirement should be changed.\r\nhttps://github.com/facebookresearch/nevergrad/blob/main/requirements/main.txt", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2362/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2362/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2349", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2349/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2349/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2349/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2349", "id": 1344596667, "node_id": "I_kwDOC2wWEs5QJOq7", "number": 2349, "title": "Recursive upcast in config composition", "user": {"login": "Sathrovarr", "id": 93495148, "node_id": "U_kgDOBZKfbA", "avatar_url": "https://avatars.githubusercontent.com/u/93495148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sathrovarr", "html_url": "https://github.com/Sathrovarr", "followers_url": "https://api.github.com/users/Sathrovarr/followers", "following_url": "https://api.github.com/users/Sathrovarr/following{/other_user}", "gists_url": "https://api.github.com/users/Sathrovarr/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sathrovarr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sathrovarr/subscriptions", "organizations_url": "https://api.github.com/users/Sathrovarr/orgs", "repos_url": "https://api.github.com/users/Sathrovarr/repos", "events_url": "https://api.github.com/users/Sathrovarr/events{/privacy}", "received_events_url": "https://api.github.com/users/Sathrovarr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-08-19T15:34:16Z", "updated_at": "2022-09-22T21:00:25Z", "closed_at": "2022-09-10T16:26:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to have worker classes accept a list of arguments they would internally use for further computation, where inheritance thereof makes sense. Say a class `A` has a `query` function, class `B(A)` also has `query` function and accepts same arguments + possibly more.\r\nLet's say `A` has `arg1`, `arg2` for `query`. Then B may have `arg1`, `arg2`, `arg3` for its `query`. I want to encapsulate the arguments belonging to such functions (got multiple such and they have no meaning outside), so that they are part of a same 'package' (i.e. a dict).\r\n\r\nThe minimal example is as below:\r\n\r\n\r\n```python\r\nfrom dataclasses import dataclass\r\nimport hydra\r\n\r\nfrom hydra.core.config_store import ConfigStore\r\n\r\n@dataclass\r\nclass X:\r\n    d: int\r\n    p: int\r\n        \r\n@dataclass\r\nclass Y(X):\r\n    q: int\r\n        \r\n@dataclass\r\nclass A:\r\n    x: X\r\n\r\n@dataclass\r\nclass B(A):\r\n    x: Y\r\n\r\ncs = ConfigStore.instance()\r\n\r\ncs.store(\r\n    'A',\r\n    group = 'foo',\r\n    node = A\r\n)\r\ncs.store(\r\n    'B',\r\n    group = 'foo',\r\n    node = B\r\n)\r\n\r\n@hydra.main(config_name='config', config_path=\"config\")\r\ndef my_app(cfg):\r\n    pass\r\n\r\nmy_app()\r\n```\r\n\r\nWhat I then expect to work, is a setup as below:\r\n`foo/fA.yaml`\r\n```yaml\r\ndefaults:\r\n    - A\r\n\r\nx:\r\n  d: 10\r\n  p: 2\r\n```\r\n\r\n`foo/fB.yaml`\r\n```yaml\r\ndefaults:\r\n    - fA\r\n    - B\r\n\r\nx:\r\n  q: 10\r\n```\r\n\r\n, where `A.x` would get upcasted from `X` to `Y` when the entire config is being upcasted to `B`. That never happens, though, so I get `Key 'q' not in 'X'`. In this case I could just comment out `fA`, but it has other defaults I want to have there in my case.\r\n\r\nOf course, if I put the `x` in its own folder, established its ConfigStore instances, and included files so that the upcasting would happen on top level, it would work. But that is not quite the use-case here. It's just an encapsulation of parameters that belong to A, B; and I would like the upcast to go alongside the A, B upcasts.\r\n\r\nCheers for any ideas!\r\n\r\nPython 3.9.9\r\nHydra 1.2.0", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2349/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2349/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2342", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2342/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2342/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2342/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2342", "id": 1338218254, "node_id": "I_kwDOC2wWEs5Pw5cO", "number": 2342, "title": "[Bug] Hydra's exception formatting cannot handle exception raised in C extension", "user": {"login": "YouJiacheng", "id": 83971976, "node_id": "MDQ6VXNlcjgzOTcxOTc2", "avatar_url": "https://avatars.githubusercontent.com/u/83971976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YouJiacheng", "html_url": "https://github.com/YouJiacheng", "followers_url": "https://api.github.com/users/YouJiacheng/followers", "following_url": "https://api.github.com/users/YouJiacheng/following{/other_user}", "gists_url": "https://api.github.com/users/YouJiacheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/YouJiacheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YouJiacheng/subscriptions", "organizations_url": "https://api.github.com/users/YouJiacheng/orgs", "repos_url": "https://api.github.com/users/YouJiacheng/repos", "events_url": "https://api.github.com/users/YouJiacheng/events{/privacy}", "received_events_url": "https://api.github.com/users/YouJiacheng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-14T11:41:58Z", "updated_at": "2022-10-10T02:31:51Z", "closed_at": "2022-10-10T02:31:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI use `hydra` and `av`(PyAV), when `av` raise an error inside my hydra app, hydra cannot handle it correctly.\r\nBecause `inspect.getmodule` won't work for C extension.\r\n```python\r\nend: Optional[TracebackType] = tb\r\nnum_frames = 0\r\nwhile end is not None:\r\n    frame = end.tb_frame\r\n    mdl = inspect.getmodule(frame)\r\n    assert mdl is not None\r\n    name = mdl.__name__\r\n    if name.startswith(\"omegaconf.\"):\r\n        break\r\n    end = end.tb_next\r\n    num_frames = num_frames + 1\r\n```\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n**Minimal Code/Config snippet to reproduce**\r\n```python\r\n# foo.pyx\r\ndef foo():\r\n    raise Exception\r\n\r\n# main.py\r\nimport pyximport\r\npyximport.install() # to directly import pyx without `cythonize -i foo.pyx`\r\n\r\nimport hydra\r\nimport foo\r\n@hydra.main(version_base='1.2')\r\ndef app(_):\r\n    foo.foo()\r\napp()\r\n```\r\n\r\n**Stack trace/error message**\r\n```\r\nError executing job with overrides: []\r\nAn error occurred during Hydra's exception formatting:\r\nAssertionError()\r\nTraceback (most recent call last):\r\n  File \"/home/youjiacheng/miniconda3/envs/env/lib/python3.10/site-packages/hydra/_internal/utils.py\", line 254, in run_and_report\r\n    assert mdl is not None\r\nAssertionError\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/youjiacheng/test/main.py\", line 6, in <module>\r\n    app()\r\n  File \"/home/youjiacheng/miniconda3/envs/env/lib/python3.10/site-packages/hydra/main.py\", line 90, in decorated_main\r\n    _run_hydra(\r\n  File \"/home/youjiacheng/miniconda3/envs/env/lib/python3.10/site-packages/hydra/_internal/utils.py\", line 389, in _run_hydra\r\n    _run_app(\r\n  File \"/home/youjiacheng/miniconda3/envs/env/lib/python3.10/site-packages/hydra/_internal/utils.py\", line 452, in _run_app\r\n    run_and_report(\r\n  File \"/home/youjiacheng/miniconda3/envs/env/lib/python3.10/site-packages/hydra/_internal/utils.py\", line 296, in run_and_report\r\n    raise ex\r\n  File \"/home/youjiacheng/miniconda3/envs/env/lib/python3.10/site-packages/hydra/_internal/utils.py\", line 213, in run_and_report\r\n    return func()\r\n  File \"/home/youjiacheng/miniconda3/envs/env/lib/python3.10/site-packages/hydra/_internal/utils.py\", line 453, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/youjiacheng/miniconda3/envs/env/lib/python3.10/site-packages/hydra/_internal/hydra.py\", line 132, in run\r\n    _ = ret.return_value\r\n  File \"/home/youjiacheng/miniconda3/envs/env/lib/python3.10/site-packages/hydra/core/utils.py\", line 260, in return_value\r\n    raise self._return_value\r\n  File \"/home/youjiacheng/miniconda3/envs/env/lib/python3.10/site-packages/hydra/core/utils.py\", line 186, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"/home/youjiacheng/test/main.py\", line 5, in app\r\n    foo.foo()\r\n  File \"foo.pyx\", line 2, in foo.foo\r\n    raise Exception\r\nException\r\n```\r\n\r\n## Expected Behavior\r\n\r\nFollowing traceback is produced by renaming `foo.pyx` to `foo.py`. \r\n```\r\nError executing job with overrides: []\r\nTraceback (most recent call last):\r\n  File \"/home/youjiacheng/test/main.py\", line 5, in app\r\n    foo.foo()\r\n  File \"/home/youjiacheng/test/foo.py\", line 2, in foo\r\n    raise Exception\r\nException\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n```python\r\nend: Optional[TracebackType] = tb\r\nnum_frames = 0\r\nwhile end is not None:\r\n    frame = end.tb_frame\r\n    mdl = inspect.getmodule(frame)\r\n    if mdl is not None:\r\n        name = mdl.__name__\r\n        if name.startswith(\"omegaconf.\"):\r\n            break\r\n    end = end.tb_next\r\n    num_frames = num_frames + 1\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.2.0\r\n- **Python version** : 3.10.4\r\n- **Virtual environment type and version** : conda 4.13.0\r\n- **Operating system** : CentOS Linux release 7.9.2009 (Core)\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2342/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2342/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2336", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2336/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2336/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2336/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2336", "id": 1336683275, "node_id": "I_kwDOC2wWEs5PrCsL", "number": 2336, "title": "[Bug] Drop requirement for pickle5 in hydra_ray_launcher for python >= 3.8", "user": {"login": "colobas", "id": 12519843, "node_id": "MDQ6VXNlcjEyNTE5ODQz", "avatar_url": "https://avatars.githubusercontent.com/u/12519843?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colobas", "html_url": "https://github.com/colobas", "followers_url": "https://api.github.com/users/colobas/followers", "following_url": "https://api.github.com/users/colobas/following{/other_user}", "gists_url": "https://api.github.com/users/colobas/gists{/gist_id}", "starred_url": "https://api.github.com/users/colobas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colobas/subscriptions", "organizations_url": "https://api.github.com/users/colobas/orgs", "repos_url": "https://api.github.com/users/colobas/repos", "events_url": "https://api.github.com/users/colobas/events{/privacy}", "received_events_url": "https://api.github.com/users/colobas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-12T02:35:32Z", "updated_at": "2023-01-03T05:58:02Z", "closed_at": "2022-09-02T02:22:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI believe in the same spirit as what was done in this [commit](https://github.com/facebookresearch/hydra/commit/0da8ef59c3331d9c54d1d3b4e9aa51029030ef1c), this [line](https://github.com/facebookresearch/hydra/blob/782eb04eb5ac22e90aad0a440d871eb1bad198b4/plugins/hydra_ray_launcher/hydra_plugins/hydra_ray_launcher/_config.py#L182) also needs to be adapted.\r\n\r\n\r\n## Checklist\r\n- [ ] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n** Stack trace/error message **\r\n```\r\n// Paste the bad output here!\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  \r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2336/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2331", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2331/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2331/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2331/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2331", "id": 1332823812, "node_id": "I_kwDOC2wWEs5PcUcE", "number": 2331, "title": "[Bug] Link to upgrade guide documentation site still crashes", "user": {"login": "DanTremonti", "id": 58321625, "node_id": "MDQ6VXNlcjU4MzIxNjI1", "avatar_url": "https://avatars.githubusercontent.com/u/58321625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanTremonti", "html_url": "https://github.com/DanTremonti", "followers_url": "https://api.github.com/users/DanTremonti/followers", "following_url": "https://api.github.com/users/DanTremonti/following{/other_user}", "gists_url": "https://api.github.com/users/DanTremonti/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanTremonti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanTremonti/subscriptions", "organizations_url": "https://api.github.com/users/DanTremonti/orgs", "repos_url": "https://api.github.com/users/DanTremonti/repos", "events_url": "https://api.github.com/users/DanTremonti/events{/privacy}", "received_events_url": "https://api.github.com/users/DanTremonti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-09T07:20:36Z", "updated_at": "2022-08-09T23:26:00Z", "closed_at": "2022-08-09T23:26:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nIn hydra-core==1.2.0, basic_launcher produces the following warning:\r\n`Hydra versions will no longer change working directory at job runtime by default.`, but the provided website link doesn't work.\r\n\r\n**Stack trace/error message**\r\n```\r\n@hydra.main(config_path=\"../../../configs\", config_name=\"asr_benchmark\")\r\n/home/dantremonti/anaconda3/envs/mark-09-02/lib/python3.8/site-packages/hydra/_internal/hydra.py:119: UserWarning: Future Hydra versions will no longer change working directory at job runtime by default.\r\nSee https://hydra.cc/docs/next/upgrades/1.1_to_1.2/changes_to_job_working_dir/ for more information.\r\n```\r\nThe provided URL, https://hydra.cc/docs/next/upgrades/1.1_to_1.2/changes_to_job_working_dir/ , leads to a crash in the docs site.\r\nThis is similar to the bug addressed in the issue: #2158\r\n\r\nAlthough, the link: https://hydra.cc/docs/upgrades/1.1_to_1.2/changes_to_job_working_dir/ works!", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2331/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2318", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2318/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2318/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2318/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2318", "id": 1319651414, "node_id": "I_kwDOC2wWEs5OqEhW", "number": 2318, "title": "[Bug] pickle5 requires python version < 3.8", "user": {"login": "lupus83", "id": 51043078, "node_id": "MDQ6VXNlcjUxMDQzMDc4", "avatar_url": "https://avatars.githubusercontent.com/u/51043078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lupus83", "html_url": "https://github.com/lupus83", "followers_url": "https://api.github.com/users/lupus83/followers", "following_url": "https://api.github.com/users/lupus83/following{/other_user}", "gists_url": "https://api.github.com/users/lupus83/gists{/gist_id}", "starred_url": "https://api.github.com/users/lupus83/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lupus83/subscriptions", "organizations_url": "https://api.github.com/users/lupus83/orgs", "repos_url": "https://api.github.com/users/lupus83/repos", "events_url": "https://api.github.com/users/lupus83/events{/privacy}", "received_events_url": "https://api.github.com/users/lupus83/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-27T14:29:04Z", "updated_at": "2022-07-29T04:51:08Z", "closed_at": "2022-07-29T04:50:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\npickle5 requires python version < 3.8, thus, is not required for more recent python version.\r\n\r\n## Checklist\r\n- [x ] I checked on the latest version of Hydra", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2318/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2316", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2316/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2316/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2316/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2316", "id": 1318139030, "node_id": "I_kwDOC2wWEs5OkTSW", "number": 2316, "title": "[Bug] Compose order not respected when overriding built-in Hydra config node", "user": {"login": "nathanpainchaud", "id": 23144457, "node_id": "MDQ6VXNlcjIzMTQ0NDU3", "avatar_url": "https://avatars.githubusercontent.com/u/23144457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nathanpainchaud", "html_url": "https://github.com/nathanpainchaud", "followers_url": "https://api.github.com/users/nathanpainchaud/followers", "following_url": "https://api.github.com/users/nathanpainchaud/following{/other_user}", "gists_url": "https://api.github.com/users/nathanpainchaud/gists{/gist_id}", "starred_url": "https://api.github.com/users/nathanpainchaud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nathanpainchaud/subscriptions", "organizations_url": "https://api.github.com/users/nathanpainchaud/orgs", "repos_url": "https://api.github.com/users/nathanpainchaud/repos", "events_url": "https://api.github.com/users/nathanpainchaud/events{/privacy}", "received_events_url": "https://api.github.com/users/nathanpainchaud/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-07-26T12:01:32Z", "updated_at": "2023-02-21T04:48:29Z", "closed_at": "2023-02-10T16:13:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nMy real use-case is that I want to override some global config options when using a custom config of a launcher (Submitit). I see this as a legitimate use-case, because I want to override some config options related to the computing resources available (e.g. `num_workers`, `gpus`, etc.) from their default values set w.r.t. my local environment.\r\n\r\nHowever, it seems that even if I manually specify an `override hydra/launcher: my_launcher` entry at the very end of my default list (after `_self_`), the global config options set in `my_launcher` are overridden by the default options. I suspect that built-in Hydra config nodes are resolved before user-defined config nodes, and that therefore it's impossible to override global values from built-in Hydra configs. However, as stated in my first paragraph, I think there exists legitimate use-cases for this, because I don't want to have to create a whole new launcher-related config for global values that should be overridden.\r\n\r\nI also tried to workaround this issue using a [specialized configuration](https://hydra.cc/docs/patterns/specializing_config/), but the limited interpolation capabilities in the defaults list didn't allow me to interpolate using the `hydra/launcher` choice to specialize a config based on the launcher).\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nHere is the layout of my project:\r\n```shell\r\nmy_project/\r\n\u251c\u2500\u2500 config\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 example.yaml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 hydra\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 launcher\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 my_launcher.yaml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 __init__.py\r\n\u251c\u2500\u2500 my_app.py\r\n```\r\n\r\nAnd the content of each file:\r\n\r\n`example.yaml`:\r\n```yaml\r\ndefaults:\r\n  - _self_\r\n  - override hydra/launcher: my_launcher\r\n\r\nfizz: 3\r\nbuzz: 5\r\n```\r\n\r\n`my_launcher.yaml`:\r\n```yaml\r\n# @package _global_\r\n\r\ndefaults:\r\n  - basic@_group_\r\n\r\nhydra:\r\n  launcher:\r\n\r\nfizz: 7\r\n```\r\n\r\n`my_app.py`:\r\n```python\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\n\r\n@hydra.main(version_base=None, config_path=\"config\", config_name=\"example\")\r\ndef main(cfg: DictConfig):\r\n    print(cfg)\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nThe global values set in the custom plugin config should be able to override the default values, based on the order in the defaults list.\r\n\r\nIn the case of the minimal reproducible example above, when launching the application using the command:\r\n```shell\r\npython my_app.py hydra/launcher=my_launcher\r\n```\r\nthe output is:\r\n```shell\r\n{'fizz': 3, 'buzz': 5}\r\n```\r\nbut I would have expected:\r\n```shell\r\n{'fizz': 7, 'buzz': 5}\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.2.0\r\n- **Python version** : 3.10\r\n- **Virtual environment type and version** : conda 4.13.0\r\n- **Operating system** : Linux Ubuntu 18.04\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2311", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2311/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2311/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2311/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2311", "id": 1315308326, "node_id": "I_kwDOC2wWEs5OZgMm", "number": 2311, "title": "Overriding within the same config using a custom OmegaConf resolver", "user": {"login": "slerman12", "id": 9126603, "node_id": "MDQ6VXNlcjkxMjY2MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/9126603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slerman12", "html_url": "https://github.com/slerman12", "followers_url": "https://api.github.com/users/slerman12/followers", "following_url": "https://api.github.com/users/slerman12/following{/other_user}", "gists_url": "https://api.github.com/users/slerman12/gists{/gist_id}", "starred_url": "https://api.github.com/users/slerman12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slerman12/subscriptions", "organizations_url": "https://api.github.com/users/slerman12/orgs", "repos_url": "https://api.github.com/users/slerman12/repos", "events_url": "https://api.github.com/users/slerman12/events{/privacy}", "received_events_url": "https://api.github.com/users/slerman12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-07-22T18:35:57Z", "updated_at": "2022-07-23T15:16:48Z", "closed_at": "2022-07-22T21:50:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a custom `OmegaConf` resolver called `do_something`.\r\n\r\nWhen I structure my config like this:\r\n\r\n```\r\nblock1:\r\n     arg1: 1\r\n     arg2: 2\r\n\r\noverride block1: ${do_something:${block1}}\r\n```\r\n\r\nI'm expecting the custom resolver function to be applied to the whole structured config `block1`, but although this doesn't crash, the function does not get applied either.\r\n\r\nAm I missing some syntax for overriding in this way?", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2311/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2287", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2287/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2287/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2287/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2287", "id": 1302186446, "node_id": "I_kwDOC2wWEs5NncnO", "number": 2287, "title": "[Bug] Optuna sweeper plugin does not support deprecated search space anymore", "user": {"login": "MattiasDC", "id": 3415484, "node_id": "MDQ6VXNlcjM0MTU0ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3415484?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MattiasDC", "html_url": "https://github.com/MattiasDC", "followers_url": "https://api.github.com/users/MattiasDC/followers", "following_url": "https://api.github.com/users/MattiasDC/following{/other_user}", "gists_url": "https://api.github.com/users/MattiasDC/gists{/gist_id}", "starred_url": "https://api.github.com/users/MattiasDC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MattiasDC/subscriptions", "organizations_url": "https://api.github.com/users/MattiasDC/orgs", "repos_url": "https://api.github.com/users/MattiasDC/repos", "events_url": "https://api.github.com/users/MattiasDC/events{/privacy}", "received_events_url": "https://api.github.com/users/MattiasDC/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-12T14:58:39Z", "updated_at": "2022-07-26T08:39:01Z", "closed_at": "2022-07-26T08:39:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nSince Hydra 1.2 usage of hydra.sweeper.search_space is deprecated in favor of hydra.sweeper.params. An upgrade guide and more context is available [here](https://hydra.cc/docs/upgrades/1.1_to_1.2/changes_to_sweeper_config/).\r\nThe search_space usage does give a deprecation warning, but also results in a crash.\r\nThis crash was introduced by myself in [this commit](https://github.com/facebookresearch/hydra/commit/0c2af39b155f784329e85cd4212d04e86904b1e8).\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [X] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nI've created a separate branch that contains a unit test that shows the failure [here](https://github.com/MattiasDC/hydra/tree/optuna_sweeper_issue).\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/mattias/git/hydra/.env/lib/python3.9/site-packages/hydra/_internal/utils.py\", line 213, in run_and_report\r\n    return func()\r\n  File \"/home/mattias/git/hydra/.env/lib/python3.9/site-packages/hydra/_internal/utils.py\", line 461, in <lambda>\r\n    lambda: hydra.multirun(\r\n  File \"/home/mattias/git/hydra/.env/lib/python3.9/site-packages/hydra/_internal/hydra.py\", line 162, in multirun\r\n    ret = sweeper.sweep(arguments=task_overrides)\r\n  File \"/home/mattias/git/hydra/.env/lib/python3.9/site-packages/hydra_plugins/hydra_optuna_sweeper/optuna_sweeper.py\", line 54, in sweep\r\n    return self.sweeper.sweep(arguments)\r\n  File \"/home/mattias/git/hydra/.env/lib/python3.9/site-packages/hydra_plugins/hydra_optuna_sweeper/_impl.py\", line 293, in sweep\r\n    assert self.search_space is None\r\nAssertionError\r\n=== Error executing:\r\n/home/mattias/git/hydra/.env/bin/python3.9 -Werror example/sphere.py --multirun --config-dir=tests/conf --config-name=test_deprecated_search_space hydra.sweep.dir=/tmp/pytest-of-mattias/pytest-0/test_example_with_deprecated_s0 hydra.job.chdir=False hydra.sweeper.n_trials=20 hydra.sweeper.n_jobs=1\r\n```\r\n\r\n## Expected Behavior\r\nA deprecation warning should be shown, but then the Optuna sweeper should continue and succeed.\r\n\r\n## System information\r\n- **Hydra Version** :  1.2\r\n- **Python version** : 3.9\r\n- **Virtual environment type and version** : venv\r\n- **Operating system** : linux\r\n\r\n## Additional context\r\nI can and will create a PR to fix this issue I introduced myself.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2287/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2287/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2285", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2285/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2285/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2285/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2285", "id": 1300252769, "node_id": "I_kwDOC2wWEs5NgEhh", "number": 2285, "title": "[Bug] Value interpolation between different config files", "user": {"login": "apoorvagnihotri", "id": 22618985, "node_id": "MDQ6VXNlcjIyNjE4OTg1", "avatar_url": "https://avatars.githubusercontent.com/u/22618985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apoorvagnihotri", "html_url": "https://github.com/apoorvagnihotri", "followers_url": "https://api.github.com/users/apoorvagnihotri/followers", "following_url": "https://api.github.com/users/apoorvagnihotri/following{/other_user}", "gists_url": "https://api.github.com/users/apoorvagnihotri/gists{/gist_id}", "starred_url": "https://api.github.com/users/apoorvagnihotri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apoorvagnihotri/subscriptions", "organizations_url": "https://api.github.com/users/apoorvagnihotri/orgs", "repos_url": "https://api.github.com/users/apoorvagnihotri/repos", "events_url": "https://api.github.com/users/apoorvagnihotri/events{/privacy}", "received_events_url": "https://api.github.com/users/apoorvagnihotri/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-11T06:10:30Z", "updated_at": "2022-07-12T16:35:44Z", "closed_at": "2022-07-12T16:35:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nValue interpolation doesn't seem to be functioning when trying to push a value in parent config to the child config.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\nIn order to recreate the issue, you need 4 files. The idea is to run, `run.py` which is basically equivalent to a pipeline, and any arguments that are passed to `run.py`, like `debug`, should be passed down to `preprocesses.py`.\r\n\r\n```python\r\n# preprocesses.py\r\n\r\nimport hydra\r\nfrom omegaconf import DictConfig, OmegaConf\r\n\r\n\r\n@hydra.main(version_base=None, config_path=\"./conf/preprocess\", config_name=\"default\")\r\ndef preprocess(cfg: DictConfig):\r\n    print (\"Preprocessing Starting\", end=\"\\n\\n\")\r\n    print (OmegaConf.to_yaml(cfg))\r\n    print (\"Preprocessing Done\")\r\n\r\nif __name__ == \"__main__\":\r\n    preprocess()\r\n```\r\n\r\n```python\r\n# run.py\r\n\r\nimport hydra\r\nfrom omegaconf import DictConfig, OmegaConf\r\nfrom preprocesses import preprocess\r\n\r\n\r\n@hydra.main(version_base = None, config_path=\"./conf\", config_name=\"conf\")\r\ndef run(cfg: DictConfig):\r\n    print (\"Run Starting\")\r\n    print (OmegaConf.to_yaml(cfg))\r\n    preprocess(cfg.preprocess)\r\n    print (\"Run Done\")\r\n\r\nif __name__ == \"__main__\":\r\n    run()\r\n```\r\n\r\n```yaml\r\n# conf/preprocess/default.yaml\r\n\r\ndb:\r\n  user: omry\r\n  debug: false\r\n```\r\n\r\n```yaml\r\n# conf/main.yaml\r\n\r\ndefaults:\r\n  - preprocess: default\r\n  - _self_\r\n\r\napplication:\r\n  version: 1.0.0\r\n  debug: true\r\n\r\npreprocess:\r\n  db:\r\n    debug: ${application.debug}\r\n```\r\n\r\n** Output **\r\n\r\nWhen running the command `python .\\run.py --config-name=main`, I get the following output.\r\n```\r\nRun Starting\r\npreprocess:\r\n  db:\r\n    user: omry\r\n    debug: ${application.debug}\r\napplication:\r\n  version: 1.0.0\r\n  debug: true\r\n\r\nPreprocessing Starting\r\n\r\ndb:\r\n  user: omry\r\n  debug: ${application.debug}\r\n\r\nPreprocessing Done\r\nRun Done\r\n```\r\n\r\n## Expected Behavior\r\nI expected the value interpolation (as shown [here](https://hydra.cc/docs/tutorials/basic/your_first_app/using_config/)) to happen. Expected output:\r\n\r\n```\r\nRun Starting\r\npreprocess:\r\n  db:\r\n    user: omry\r\n    debug: true\r\napplication:\r\n  version: 1.0.0\r\n  debug: true\r\n\r\nPreprocessing Starting\r\n\r\ndb:\r\n  user: omry\r\n  debug: true\r\n\r\nPreprocessing Done\r\nRun Done\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.2.0\r\n- **Python version** :  3.10.5\r\n- **Virtual environment type and version** :  conda (4.12.0)\r\n- **Operating system** :  windows 11", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2285/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2276", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2276/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2276/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2276/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2276", "id": 1289296794, "node_id": "I_kwDOC2wWEs5M2Rua", "number": 2276, "title": "[Bug] distutils deprecation warning makes test_completion.py fail on Python 3.10", "user": {"login": "mdraw", "id": 6719909, "node_id": "MDQ6VXNlcjY3MTk5MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/6719909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdraw", "html_url": "https://github.com/mdraw", "followers_url": "https://api.github.com/users/mdraw/followers", "following_url": "https://api.github.com/users/mdraw/following{/other_user}", "gists_url": "https://api.github.com/users/mdraw/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdraw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdraw/subscriptions", "organizations_url": "https://api.github.com/users/mdraw/orgs", "repos_url": "https://api.github.com/users/mdraw/repos", "events_url": "https://api.github.com/users/mdraw/events{/privacy}", "received_events_url": "https://api.github.com/users/mdraw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-06-29T21:01:52Z", "updated_at": "2022-07-01T23:41:09Z", "closed_at": "2022-07-01T23:41:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\ndistutils is deprecated in Python 3.10 and its import in https://github.com/facebookresearch/hydra/blob/8b9ce30802165c1b24dbf4e513eb78d8ca8cacd6/tests/test_completion.py#L2 therefore emits a warning that makes the pytest run fail.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n- Run pytest with a Python 3.10 interpreter.\r\n\r\nSee conda build meta.yaml here: https://github.com/conda-forge/hydra-core-feedstock/blob/e62d99bd0afdcca166a731941f230b848015cbbe/recipe/meta.yaml\r\nand associated CI failure here: https://dev.azure.com/conda-forge/feedstock-builds/_build/results?buildId=529074&view=logs&j=656edd35-690f-5c53-9ba3-09c10d0bea97&t=e5c8ab1d-8ff9-5cae-b332-e15ae582ed2d\r\n\r\n(ignoring the warning per `-W` flag didn't work here)\r\n\r\n**Stack trace/error message**\r\n```\r\n==================================== ERRORS ====================================\r\n__________________ ERROR collecting tests/test_completion.py ___________________\r\ntests/test_completion.py:2: in <module>\r\n    import distutils.spawn\r\n../_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_place/lib/python3.10/distutils/__init__.py:19: in <module>\r\n    warnings.warn(_DEPRECATION_MESSAGE,\r\nE   DeprecationWarning: The distutils package is deprecated and slated for removal in Python 3.12. Use setuptools or check PEP 632 for potential alternatives\r\n=========================== short test summary info ============================\r\nERROR tests/test_completion.py - DeprecationWarning: The distutils package is...\r\n!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!\r\n=============================== 1 error in 1.18s ===============================\r\nTests failed for hydra-core-1.2.0-pyhd8ed1ab_0.tar.bz2 - moving package to /home/conda/feedstock_root/build_artifacts/broken\r\nWARNING:conda_build.build:Tests failed for hydra-core-1.2.0-pyhd8ed1ab_0.tar.bz2 - moving package to /home/conda/feedstock_root/build_artifacts/broken\r\nTESTS FAILED: hydra-core-1.2.0-pyhd8ed1ab_0.tar.bz2\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nTests pass\r\n\r\n## System information\r\n- **Hydra Version** :  1.2.0\r\n- **Python version** : 3.10.5\r\n- **Virtual environment type and version** : conda env\r\n- **Operating system** : Linux\r\n\r\n## Additional context\r\n\r\n~~This currently blocks the conda-forge feedstock update at https://github.com/conda-forge/hydra-core-feedstock/pull/19.\r\nWorkaround suggestions for this PR (preferably without file changes) are welcome.~~\r\nUpdate: Got the tests to pass by adding the `-W ignore::DeprecationWarning` flag to the pytest args. With this workaround I have completed the feedstock update and hydra-core 1.2 should be available from conda-forge in a few minutes.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2276/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2276/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2247", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2247/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2247/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2247/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2247", "id": 1252024474, "node_id": "I_kwDOC2wWEs5KoGCa", "number": 2247, "title": "[Bug] Setting sweep dir to cwd causes interpolation error", "user": {"login": "ashleve", "id": 43458894, "node_id": "MDQ6VXNlcjQzNDU4ODk0", "avatar_url": "https://avatars.githubusercontent.com/u/43458894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashleve", "html_url": "https://github.com/ashleve", "followers_url": "https://api.github.com/users/ashleve/followers", "following_url": "https://api.github.com/users/ashleve/following{/other_user}", "gists_url": "https://api.github.com/users/ashleve/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashleve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashleve/subscriptions", "organizations_url": "https://api.github.com/users/ashleve/orgs", "repos_url": "https://api.github.com/users/ashleve/repos", "events_url": "https://api.github.com/users/ashleve/events{/privacy}", "received_events_url": "https://api.github.com/users/ashleve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-05-29T23:51:27Z", "updated_at": "2022-06-10T21:28:27Z", "closed_at": "2022-06-10T21:28:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nI found an edge case when setting sweep dir results in interpolation error.\r\n\r\nConfig:\r\n```yaml\r\nhydra:\r\n  sweep:\r\n    dir: ${hydra:runtime.cwd}/logs/\r\n```\r\n\r\nRunning `python main.py -m` results in the following stack trace:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 213, in run_and_report\r\n    return func()\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 461, in <lambda>\r\n    lambda: hydra.multirun(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 162, in multirun\r\n    ret = sweeper.sweep(arguments=task_overrides)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 163, in sweep\r\n    sweep_dir = Path(self.config.hydra.sweep.dir)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 361, in __getattr__\r\n    self._format_and_raise(key=key, value=None, cause=e)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/base.py\", line 231, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 873, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/_utils.py\", line 771, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set env var OC_CAUSE=1 for full trace\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 353, in __getattr__\r\n    return self._get_impl(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 453, in _get_impl\r\n    return self._resolve_with_default(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 98, in _resolve_with_default\r\n    resolved_node = self._maybe_resolve_interpolation(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/base.py\", line 719, in _maybe_resolve_interpolation\r\n    return self._resolve_interpolation_from_parse_tree(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/base.py\", line 584, in _resolve_interpolation_from_parse_tree\r\n    resolved = self.resolve_parse_tree(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/base.py\", line 769, in resolve_parse_tree\r\n    raise InterpolationResolutionError(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/base.py\", line 764, in resolve_parse_tree\r\n    return visitor.visit(parse_tree)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/antlr4/tree/Tree.py\", line 34, in visit\r\n    return tree.accept(self)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/grammar/gen/OmegaConfGrammarParser.py\", line 206, in accept\r\n    return visitor.visitConfigValue(self)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 101, in visitConfigValue\r\n    return self.visit(ctx.getChild(0))\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/antlr4/tree/Tree.py\", line 34, in visit\r\n    return tree.accept(self)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/grammar/gen/OmegaConfGrammarParser.py\", line 342, in accept\r\n    return visitor.visitText(self)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 301, in visitText\r\n    return self._unescape(list(ctx.getChildren()))\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 389, in _unescape\r\n    text = str(self.visitInterpolation(node))\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 125, in visitInterpolation\r\n    return self.visit(ctx.getChild(0))\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/antlr4/tree/Tree.py\", line 34, in visit\r\n    return tree.accept(self)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/grammar/gen/OmegaConfGrammarParser.py\", line 1041, in accept\r\n    return visitor.visitInterpolationResolver(self)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 179, in visitInterpolationResolver\r\n    return self.resolver_interpolation_callback(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/base.py\", line 750, in resolver_interpolation_callback\r\n    return self._evaluate_custom_resolver(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/base.py\", line 694, in _evaluate_custom_resolver\r\n    return resolver(\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 439, in resolver_wrapper\r\n    ret = resolver(*args, **kwargs)\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/hydra/core/utils.py\", line 220, in <lambda>\r\n    lambda path: OmegaConf.select(cast(DictConfig, HydraConfig.get()), path),\r\n  File \"/home/ukasz/miniconda3/envs/myenv/lib/python3.8/site-packages/hydra/core/hydra_config.py\", line 31, in get\r\n    raise ValueError(\"HydraConfig was not set\")\r\nomegaconf.errors.InterpolationResolutionError: ValueError raised while resolving interpolation: HydraConfig was not set\r\n    full_key: hydra.sweep.dir\r\n    reference_type=SweepDir\r\n    object_type=SweepDir\r\n```\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n\r\n## Expected Behavior\r\nI know I could just omit the `${hydra:runtime.cwd}` since hydra would create output directory in cwd either way by default, but:\r\n1. It doesn't throw error if I set `hydra.run.dir=${hydra:runtime.cwd}/logs` so I see no reason for it not working with sweep dir\r\n2. I wanted to do something like this in my project simply because it seems clean:\r\n```yaml\r\n# assume current working directory is the root dir\r\nroot_dir: ${hydra:runtime.cwd}\r\ndata_dir: ${root_dir}/data\r\nlog_dir: ${root_dir}/logs\r\n\r\nhydra:\r\n  run:\r\n    dir: ${log_dir}/runs/${now:%Y-%m-%d}\r\n  sweep:\r\n    dir: ${log_dir}/multiruns/${now:%Y-%m-%d}\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.2\r\n- **Python version** : 3.10\r\n- **Virtual environment type and version** : conda \r\n- **Operating system** : linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2247/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2247/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2231", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2231/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2231/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2231/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2231", "id": 1247490565, "node_id": "I_kwDOC2wWEs5KWzIF", "number": 2231, "title": "[Bug] submitit_slurm passes unrecognized DDP arguments to _submit.py", "user": {"login": "alexsax", "id": 5157485, "node_id": "MDQ6VXNlcjUxNTc0ODU=", "avatar_url": "https://avatars.githubusercontent.com/u/5157485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexsax", "html_url": "https://github.com/alexsax", "followers_url": "https://api.github.com/users/alexsax/followers", "following_url": "https://api.github.com/users/alexsax/following{/other_user}", "gists_url": "https://api.github.com/users/alexsax/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexsax/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexsax/subscriptions", "organizations_url": "https://api.github.com/users/alexsax/orgs", "repos_url": "https://api.github.com/users/alexsax/repos", "events_url": "https://api.github.com/users/alexsax/events{/privacy}", "received_events_url": "https://api.github.com/users/alexsax/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-05-25T05:16:23Z", "updated_at": "2022-07-11T15:59:26Z", "closed_at": "2022-05-25T05:36:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Solution\r\nWell this is mostly user error on my part (oops--sorry!).\r\n\r\nI've used SLURM for many years, though, and this still caught me off guard! I'll post my solution to hopefully save someone else facing the same error.\r\n\r\nBasically, SLURM has some notion of 'tasks' and 'nodes' and resources can be allocated at either level. I was using multiple GPUs per task with only 1 task per node. Submitit, though, likes to use 1 gpu per task and multiple tasks per node. So instead of running \r\n```bash\r\n# Don't do this\r\nexport ngpu=2 && python train.py --multirun trainer=ddp +launcher=slurm hydra.launcher.gpus_per_node=${ngpu}\r\n```\r\n```bash\r\n# Do this instead\r\nexport ngpu=2 && python train.py --multirun trainer=ddp +launcher=slurm hydra.launcher.tasks_per_node=${ngpu}\r\n```\r\n\r\nAnd here's the config in launcher/slurm:\r\n```yaml\r\n# @package hydra.launcher\r\n_target_: hydra_plugins.hydra_submitit_launcher.submitit_launcher.SlurmLauncher\r\npartition: learnfair\r\ntimeout_min: 60\r\ncomment: null\r\nconstraint: 'volta32gb'\r\ncpus_per_task: null\r\ncpus_per_gpu: null\r\nexclude: null\r\ngpus_per_node: null\r\ngpus_per_task: 1\r\ntasks_per_node: 1\r\nmax_num_timeout: 3\r\nmem_gb: null\r\nmem_per_gpu: null\r\nmem_per_cpu: null\r\nnodes: 1\r\nname: ${hydra.job.name}\r\nsignal_delay_s: 120\r\nadditional_parameters: {}\r\narray_parallelism: 256\r\nsetup: null\r\n```\r\nEasy peasy.  [PL Issue #2727](https://github.com/PyTorchLightning/pytorch-lightning/issues/2727) was also helpful for me debugging. \r\n\r\n## Description\r\nI'm trying to launch a job that uses hydra/submitit_slurm for config and launching and pytorch-lightning's DDP implementation for training. Everything works locally, even submitit works locally, but SLURM jobs (specifically with submitit_slurm) fail. I realize this is a bit vague since I'm not posting a minimal code example, but the error message is so specific that I'm hoping this description will be enough. If not, please to let me know. \r\n\r\n\r\nSpecifically, the symptoms are:\r\n1) A 1-GPU DDP job with `submitit_slurm`:  job runs smoothly\r\n2) A multi-gpu DDP job with `submitit_local`: the job runs smoothly\r\n3) A multi-gpu DDP job with `submitit_slurm`: the process dies, leaving a zombie process. SLURM does not register an error and does not cancel the job. The slurm logs (e.g. `.submitit/57770369/57770369_0_log.err`) shows normal configuration in the main process, but the following from each non-main process. E.g. for a 4-gpu process, see the error message below.\r\n\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n** Stack trace/error message **\r\n```\r\nusage: _submit.py [-h] folder\r\n_submit.py: error: unrecognized arguments: hydra.run.dir=\"/checkpoint/ssax/consistentreps/multiruns/lroverfit_4gpu/0\" hydra.job.name=train_ddp_process_1\r\nusage: _submit.py [-h] folder\r\n_submit.py: error: unrecognized arguments: hydra.run.dir=\"/checkpoint/ssax/consistentreps/multiruns/lroverfit_4gpu/0\" hydra.job.name=train_ddp_process_1 hydra.run.dir=\"/checkpoint/ssax/consistentreps/multiruns/lroverfit_4gpu/0\" hydra.job.name=train_ddp_process_2\r\nusage: _submit.py [-h] folder\r\n_submit.py: error: unrecognized arguments: hydra.run.dir=\"/checkpoint/ssax/consistentreps/multiruns/lroverfit_4gpu/0\" hydra.job.name=train_ddp_process_1 hydra.run.dir=\"/checkpoint/ssax/consistentreps/multiruns/lroverfit_4gpu/0\" hydra.job.name=train_ddp_process_2 hydra.run.dir=\"/checkpoint/ssax/consistentreps/multiruns/lroverfit_4gpu/0\" hydra.job.name=train_ddp_process_3\r\n```\r\n\r\n## Expected Behavior\r\n_submit.py to not raise an argument error\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.2\r\n- **Python version** : Python 3.8.13\r\n- **Virtual environment type and version** :  conda 4.5.8\r\n- **Operating system** :  Ubuntu 20.04.2 LTS\r\n\r\n## Additional context\r\nPing me on workplace if needed!", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2231/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2224", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2224/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2224/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2224/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2224", "id": 1242293657, "node_id": "I_kwDOC2wWEs5KC-WZ", "number": 2224, "title": "[Bug] Hydra 1.2 introduction breaks downstream tests in detectron2", "user": {"login": "sstsai-adl", "id": 62612781, "node_id": "MDQ6VXNlcjYyNjEyNzgx", "avatar_url": "https://avatars.githubusercontent.com/u/62612781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sstsai-adl", "html_url": "https://github.com/sstsai-adl", "followers_url": "https://api.github.com/users/sstsai-adl/followers", "following_url": "https://api.github.com/users/sstsai-adl/following{/other_user}", "gists_url": "https://api.github.com/users/sstsai-adl/gists{/gist_id}", "starred_url": "https://api.github.com/users/sstsai-adl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sstsai-adl/subscriptions", "organizations_url": "https://api.github.com/users/sstsai-adl/orgs", "repos_url": "https://api.github.com/users/sstsai-adl/repos", "events_url": "https://api.github.com/users/sstsai-adl/events{/privacy}", "received_events_url": "https://api.github.com/users/sstsai-adl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 4149123423, "node_id": "LA_kwDOC2wWEs73Tplf", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/regression", "name": "regression", "color": "0C2F2B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-05-19T20:31:34Z", "updated_at": "2022-05-27T05:55:06Z", "closed_at": "2022-05-27T05:55:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nDetectron2 uses omegaconf which builds upon hydra. Updating the hydra to 1.2 seems to break tests. \r\n\r\nWe have a hydra 1.2 vs hydra 1.1 test results here:\r\nhydra 1.2: https://app.circleci.com/pipelines/github/facebookresearch/detectron2/2054/workflows/226048e0-33a0-4736-92e7-ecac81019997\r\nhydra 1.1: https://app.circleci.com/pipelines/github/facebookresearch/detectron2/2059/workflows/8cc6d6a9-207d-4f02-a26e-0e05bdfbe586\r\n\r\n\r\n## Checklist\r\n- [v] I checked on the latest version of Hydra\r\n- [v] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\nFor now, we've limited omegaconf package right now to <=2.20 to unbreak things. If we backtrack this fix, https://github.com/facebookresearch/detectron2/commit/32c32e36f7ca49ae4a2ae32bc751c4d837e07ee5 it can be reproduced.  \r\n\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n** Stack trace/error message **\r\n```\r\nex = ConfigAttributeError('ListConfig does not support attribute access\\n    full_key: [channels]\\n    object_type=list',)\r\ncause = ConfigAttributeError('ListConfig does not support attribute access',)\r\n```\r\n(full list of error can be found here: https://app.circleci.com/pipelines/github/facebookresearch/detectron2/2053/workflows/418077cf-c2e5-4f0b-bf6b-e750252c1de5/jobs/8694/parallel-runs/0/steps/0-106)\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nUnit tests pass.\r\n\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  \r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2224/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2218", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2218/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2218/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2218/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2218", "id": 1239714869, "node_id": "I_kwDOC2wWEs5J5Iw1", "number": 2218, "title": "[Bug] Obsolete typing.io import", "user": {"login": "srittau", "id": 52799, "node_id": "MDQ6VXNlcjUyNzk5", "avatar_url": "https://avatars.githubusercontent.com/u/52799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srittau", "html_url": "https://github.com/srittau", "followers_url": "https://api.github.com/users/srittau/followers", "following_url": "https://api.github.com/users/srittau/following{/other_user}", "gists_url": "https://api.github.com/users/srittau/gists{/gist_id}", "starred_url": "https://api.github.com/users/srittau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srittau/subscriptions", "organizations_url": "https://api.github.com/users/srittau/orgs", "repos_url": "https://api.github.com/users/srittau/repos", "events_url": "https://api.github.com/users/srittau/events{/privacy}", "received_events_url": "https://api.github.com/users/srittau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "pixelb", "id": 316894, "node_id": "MDQ6VXNlcjMxNjg5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/316894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pixelb", "html_url": "https://github.com/pixelb", "followers_url": "https://api.github.com/users/pixelb/followers", "following_url": "https://api.github.com/users/pixelb/following{/other_user}", "gists_url": "https://api.github.com/users/pixelb/gists{/gist_id}", "starred_url": "https://api.github.com/users/pixelb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pixelb/subscriptions", "organizations_url": "https://api.github.com/users/pixelb/orgs", "repos_url": "https://api.github.com/users/pixelb/repos", "events_url": "https://api.github.com/users/pixelb/events{/privacy}", "received_events_url": "https://api.github.com/users/pixelb/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pixelb", "id": 316894, "node_id": "MDQ6VXNlcjMxNjg5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/316894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pixelb", "html_url": "https://github.com/pixelb", "followers_url": "https://api.github.com/users/pixelb/followers", "following_url": "https://api.github.com/users/pixelb/following{/other_user}", "gists_url": "https://api.github.com/users/pixelb/gists{/gist_id}", "starred_url": "https://api.github.com/users/pixelb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pixelb/subscriptions", "organizations_url": "https://api.github.com/users/pixelb/orgs", "repos_url": "https://api.github.com/users/pixelb/repos", "events_url": "https://api.github.com/users/pixelb/events{/privacy}", "received_events_url": "https://api.github.com/users/pixelb/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-05-18T09:56:34Z", "updated_at": "2022-10-03T15:21:54Z", "closed_at": "2022-10-03T15:21:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nhydra-core 1.2.0 contains two generated files with an obsolete import `from typing.io import TextIO`. The `typing.io` namespace has been deprecated since Python 3.8 and will be removed in Python 3.12. (Cf. python/cpython#92871) The imports can simply be replaced with `from typing import TextIO`:\r\n\r\n* hydra/grammar/gen/OverrideLexer.py\r\n* hydra/grammar/gen/OverrideParser.py\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## System information\r\n- **Hydra Version** :  1.2.0\r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2218/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2211", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2211/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2211/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2211/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2211", "id": 1235724093, "node_id": "I_kwDOC2wWEs5Jp6c9", "number": 2211, "title": "[Bug] enable py3.10 tests for windows ", "user": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-13T21:18:00Z", "updated_at": "2022-10-26T09:58:51Z", "closed_at": "2022-10-26T09:58:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "context here https://github.com/facebookresearch/hydra/issues/2209", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2211/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2211/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2209", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2209/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2209/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2209/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2209", "id": 1234274325, "node_id": "I_kwDOC2wWEs5JkYgV", "number": 2209, "title": "[Bug] Windows tests are not actually been run due to python interpreter not found", "user": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11", "html_url": "https://github.com/facebookresearch/hydra/milestone/11", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11/labels", "id": 6445624, "node_id": "MDk6TWlsZXN0b25lNjQ0NTYyNA==", "number": 11, "title": "Hydra 1.2.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2021-02-17T21:35:22Z", "updated_at": "2022-05-18T14:42:50Z", "due_on": null, "closed_at": "2022-05-18T14:42:50Z"}, "comments": 4, "created_at": "2022-05-12T17:17:44Z", "updated_at": "2022-05-13T21:18:51Z", "closed_at": "2022-05-13T21:18:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "looks like it has been happening since Feb this year. started to happen after this commit https://github.com/facebookresearch/hydra/commit/f5a447fe8899e763dba70ccac0a88c5c8180e170 \r\n\r\nWe need to: 1) reenable the testing on windows 2) see if we can make the circleCI job fail instead of just skipping the tests.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2209/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2167", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2167/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2167/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2167/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2167", "id": 1211641735, "node_id": "I_kwDOC2wWEs5IOC-H", "number": 2167, "title": "[Bug] Strange error", "user": {"login": "slerman12", "id": 9126603, "node_id": "MDQ6VXNlcjkxMjY2MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/9126603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/slerman12", "html_url": "https://github.com/slerman12", "followers_url": "https://api.github.com/users/slerman12/followers", "following_url": "https://api.github.com/users/slerman12/following{/other_user}", "gists_url": "https://api.github.com/users/slerman12/gists{/gist_id}", "starred_url": "https://api.github.com/users/slerman12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/slerman12/subscriptions", "organizations_url": "https://api.github.com/users/slerman12/orgs", "repos_url": "https://api.github.com/users/slerman12/repos", "events_url": "https://api.github.com/users/slerman12/events{/privacy}", "received_events_url": "https://api.github.com/users/slerman12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-21T23:18:12Z", "updated_at": "2022-04-22T00:30:52Z", "closed_at": "2022-04-22T00:30:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "`python Run.py task=my_task`\r\n\r\nSomehow yields this error:\r\n\r\n```\r\nCould not override 'task'.\r\nDid you mean to override task@_global_?\r\nTo append to your default list use +task=classify/mnist\r\n```\r\n\r\nIf `task@_global_` is in my defaults list, then why would `task=` not refer to it...? \r\n\r\nHowever, `python Run.py task@_global_=my_task` works.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2167/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2158", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2158/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2158/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2158/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2158", "id": 1208375446, "node_id": "I_kwDOC2wWEs5IBliW", "number": 2158, "title": "[Bug] Link to upgrade guide crashes documentation site", "user": {"login": "rsokl", "id": 29104956, "node_id": "MDQ6VXNlcjI5MTA0OTU2", "avatar_url": "https://avatars.githubusercontent.com/u/29104956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsokl", "html_url": "https://github.com/rsokl", "followers_url": "https://api.github.com/users/rsokl/followers", "following_url": "https://api.github.com/users/rsokl/following{/other_user}", "gists_url": "https://api.github.com/users/rsokl/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsokl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsokl/subscriptions", "organizations_url": "https://api.github.com/users/rsokl/orgs", "repos_url": "https://api.github.com/users/rsokl/repos", "events_url": "https://api.github.com/users/rsokl/events{/privacy}", "received_events_url": "https://api.github.com/users/rsokl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11", "html_url": "https://github.com/facebookresearch/hydra/milestone/11", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11/labels", "id": 6445624, "node_id": "MDk6TWlsZXN0b25lNjQ0NTYyNA==", "number": 11, "title": "Hydra 1.2.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2021-02-17T21:35:22Z", "updated_at": "2022-05-18T14:42:50Z", "due_on": null, "closed_at": "2022-05-18T14:42:50Z"}, "comments": 2, "created_at": "2022-04-19T13:29:17Z", "updated_at": "2022-09-13T06:15:31Z", "closed_at": "2022-04-19T20:00:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In `hydra-core==1.2.0dev5`, `basic_launcher` produces the following warning:\r\n```    \r\n/home/runner/work/hydra-zen/hydra-zen/.tox/pre-release/lib/python3.8/site-packages/hydra/_internal/core_plugins\r\n/basic_launcher.py:74: \r\n\r\nUserWarning: Future Hydra versions will no longer change working directory at job runtime by default.\r\n    See https://hydra.cc/docs/upgrades/1.1_to_1.2/changes_to_job_working_dir for more information.\r\n```\r\n\r\nBut following the provided URL, https://hydra.cc/docs/upgrades/1.1_to_1.2/changes_to_job_working_dir , leads to a crash in the docs site:\r\n\r\n![image](https://user-images.githubusercontent.com/29104956/164014834-2884356a-bca0-4f37-a787-d4a8829dcbf9.png)", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2158/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 1, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2158/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2151", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2151/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2151/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2151/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2151", "id": 1204268868, "node_id": "I_kwDOC2wWEs5Hx69E", "number": 2151, "title": "cannot remove entry [Bug]", "user": {"login": "LucasZhan", "id": 41333680, "node_id": "MDQ6VXNlcjQxMzMzNjgw", "avatar_url": "https://avatars.githubusercontent.com/u/41333680?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LucasZhan", "html_url": "https://github.com/LucasZhan", "followers_url": "https://api.github.com/users/LucasZhan/followers", "following_url": "https://api.github.com/users/LucasZhan/following{/other_user}", "gists_url": "https://api.github.com/users/LucasZhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/LucasZhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LucasZhan/subscriptions", "organizations_url": "https://api.github.com/users/LucasZhan/orgs", "repos_url": "https://api.github.com/users/LucasZhan/repos", "events_url": "https://api.github.com/users/LucasZhan/events{/privacy}", "received_events_url": "https://api.github.com/users/LucasZhan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-14T09:19:22Z", "updated_at": "2022-04-14T11:43:10Z", "closed_at": "2022-04-14T11:43:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nI am new to hydra and familiar with it via tutorials. My current pwd is:\r\n**hydra/examples/tutorials/basic/your_first_hydra_app/5_defaults**\r\n\r\nMy issue is:\r\nCannot remove entry by command **python my_app.py ~db**\r\n\r\nall the code is cloned from github and have not been modified.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n1. clone this repo.\r\n2. cd **hydra/examples/tutorials/basic/your_first_hydra_app/5_defaults**\r\n3. run **python my_app.py ~db**\r\n\r\n** Stack trace/error message **\r\n```\r\nzsh: no such user or named directory: db\r\n```\r\n\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nIt should remove a entry.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.2\r\n- **Python version** : 3.8.12\r\n- **Virtual environment type and version** :  conda & conda 4.10.3\r\n- **Operating system** :  Mac OS 12.3.1\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2151/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2151/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2148", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2148/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2148/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2148/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2148", "id": 1203126503, "node_id": "I_kwDOC2wWEs5HtkDn", "number": 2148, "title": "[Bug] Error locating target during instantiation of python built-in functions", "user": {"login": "jzazo", "id": 25750092, "node_id": "MDQ6VXNlcjI1NzUwMDky", "avatar_url": "https://avatars.githubusercontent.com/u/25750092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jzazo", "html_url": "https://github.com/jzazo", "followers_url": "https://api.github.com/users/jzazo/followers", "following_url": "https://api.github.com/users/jzazo/following{/other_user}", "gists_url": "https://api.github.com/users/jzazo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jzazo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jzazo/subscriptions", "organizations_url": "https://api.github.com/users/jzazo/orgs", "repos_url": "https://api.github.com/users/jzazo/repos", "events_url": "https://api.github.com/users/jzazo/events{/privacy}", "received_events_url": "https://api.github.com/users/jzazo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-13T10:46:41Z", "updated_at": "2022-04-14T12:08:09Z", "closed_at": "2022-04-13T14:11:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nCannot instantiate a config that has python built-in functions, e.g., `len`, `getattr`.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```\r\n>>> from omegaconf import OmegaConf\r\n>>> from hydra.utils import instantiate\r\n>>> cfg = OmegaConf.create({\"_target_\": \"len\", \"obj\": \"foo\"})\r\n>>> cfg\r\n{'_target_': 'len', 'obj': 'foo'}\r\n>>> instantiate(cfg)\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n>>> instantiate(cfg)\r\nTraceback (most recent call last):\r\n  File \"/home/javier/.cache/pypoetry/virtualenvs/immunocam-workflows-iU6iGQo7-py3.8/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 574, in _locate\r\n    obj = import_module(part0)\r\n  File \"/home/javier/.pyenv/versions/3.8.10/lib/python3.8/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1014, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 991, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 973, in _find_and_load_unlocked\r\nModuleNotFoundError: No module named 'len'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/javier/.cache/pypoetry/virtualenvs/immunocam-workflows-iU6iGQo7-py3.8/lib/python3.8/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 130, in _resolve_target\r\n    target = _locate(target)\r\n  File \"/home/javier/.cache/pypoetry/virtualenvs/immunocam-workflows-iU6iGQo7-py3.8/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 576, in _locate\r\n    raise ImportError(\r\nImportError: Error loading 'len':\r\nModuleNotFoundError(\"No module named 'len'\")\r\nAre you sure that module 'len' is installed?\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/javier/.cache/pypoetry/virtualenvs/immunocam-workflows-iU6iGQo7-py3.8/lib/python3.8/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 218, in instantiate\r\n    return instantiate_node(\r\n  File \"/home/javier/.cache/pypoetry/virtualenvs/immunocam-workflows-iU6iGQo7-py3.8/lib/python3.8/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 321, in instantiate_node\r\n    _target_ = _resolve_target(node.get(_Keys.TARGET), full_key)\r\n  File \"/home/javier/.cache/pypoetry/virtualenvs/immunocam-workflows-iU6iGQo7-py3.8/lib/python3.8/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 135, in _resolve_target\r\n    raise InstantiationException(msg) from e\r\nhydra.errors.InstantiationException: Error locating target 'len', see chained exception above.\r\n```\r\n\r\n## Expected Behavior\r\nIt should instantiate python's built-in function which is in scope.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.2\r\n- **Python version** :  3.8.10\r\n- **Virtual environment type and version** :  poetry 1.1.12\r\n- **Operating system** :  Ubuntu 20.04\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2148/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2148/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2144", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2144/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2144/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2144/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2144", "id": 1202220276, "node_id": "I_kwDOC2wWEs5HqGz0", "number": 2144, "title": "optuna tests fails CI ", "user": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11", "html_url": "https://github.com/facebookresearch/hydra/milestone/11", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11/labels", "id": 6445624, "node_id": "MDk6TWlsZXN0b25lNjQ0NTYyNA==", "number": 11, "title": "Hydra 1.2.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2021-02-17T21:35:22Z", "updated_at": "2022-05-18T14:42:50Z", "due_on": null, "closed_at": "2022-05-18T14:42:50Z"}, "comments": 1, "created_at": "2022-04-12T18:09:50Z", "updated_at": "2022-04-12T20:05:12Z", "closed_at": "2022-04-12T20:05:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "example failure https://app.circleci.com/pipelines/github/facebookresearch/hydra/13938/workflows/df304aba-62d4-49c6-afe5-dbd107f94517/jobs/134407\r\n\r\ncaused by https://github.com/facebookresearch/hydra/pull/1909\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2144/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2122", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2122/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2122/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2122/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2122", "id": 1190099056, "node_id": "I_kwDOC2wWEs5G73hw", "number": 2122, "title": "[Bug]examples/jupyter_notebooks/compose_configs_in_notebook.ipynb tests failing", "user": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3962536393, "node_id": "LA_kwDOC2wWEs7sL4HJ", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/tests", "name": "tests", "color": "F5EDF8", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11", "html_url": "https://github.com/facebookresearch/hydra/milestone/11", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11/labels", "id": 6445624, "node_id": "MDk6TWlsZXN0b25lNjQ0NTYyNA==", "number": 11, "title": "Hydra 1.2.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2021-02-17T21:35:22Z", "updated_at": "2022-05-18T14:42:50Z", "due_on": null, "closed_at": "2022-05-18T14:42:50Z"}, "comments": 0, "created_at": "2022-04-01T17:43:26Z", "updated_at": "2022-04-01T19:12:29Z", "closed_at": "2022-04-01T19:12:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "_____ examples/jupyter_notebooks/compose_configs_in_notebook.ipynb::Cell 7 _____\r\npytest plugin exception: Exception ignored in: <socket.socket fd=-1, family=AddressFamily.AF_UNIX, type=SocketKind.SOCK_STREAM, proto=0>\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/project/.nox/test_jupyter_notebooks-3-8/lib/python3.8/site-packages/jupyter_client/utils.py\", line 14, in wrapped\r\n    loop = asyncio.get_running_loop()\r\nRuntimeError: no running event loop\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/miniconda3/envs/hydra/lib/python3.8/selectors.py\", line 72, in __getitem__\r\n    return self._selector._fd_to_key[fd]\r\nKeyError: 124\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/circleci/miniconda3/envs/hydra/lib/python3.8/selectors.py\", line 74, in __getitem__\r\n    raise KeyError(\"{!r} is not registered\".format(fileobj)) from None\r\nResourceWarning: unclosed <socket.socket fd=119, family=AddressFamily.AF_UNIX, type=SocketKind.SOCK_STREAM, proto=0>", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2122/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2122/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2105", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2105/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2105/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2105/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2105", "id": 1174576411, "node_id": "I_kwDOC2wWEs5GAp0b", "number": 2105, "title": "[Bug] Absolute path for overrides group does not work like defaults list", "user": {"login": "AdemFr", "id": 32066272, "node_id": "MDQ6VXNlcjMyMDY2Mjcy", "avatar_url": "https://avatars.githubusercontent.com/u/32066272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdemFr", "html_url": "https://github.com/AdemFr", "followers_url": "https://api.github.com/users/AdemFr/followers", "following_url": "https://api.github.com/users/AdemFr/following{/other_user}", "gists_url": "https://api.github.com/users/AdemFr/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdemFr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdemFr/subscriptions", "organizations_url": "https://api.github.com/users/AdemFr/orgs", "repos_url": "https://api.github.com/users/AdemFr/repos", "events_url": "https://api.github.com/users/AdemFr/events{/privacy}", "received_events_url": "https://api.github.com/users/AdemFr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-20T14:58:27Z", "updated_at": "2022-10-24T04:28:29Z", "closed_at": "2022-03-23T17:32:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nNot sure if a bug, or intended behaviour:\r\nThe override syntax does not allow for absolute path referencing with `/group/config`. This is possible in the defaults list.\r\nI think it would be nice to have the exact same syntax in both.\r\n\r\n## Checklist\r\n- [ x ] I checked on the latest version of Hydra\r\n- [ x ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n```python\r\nfrom dataclasses import dataclass, field\r\nfrom typing import Any, List\r\n\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom omegaconf import MISSING\r\n\r\n\r\n@dataclass\r\nclass Base:\r\n    arg: str = MISSING\r\n\r\n\r\n@dataclass\r\nclass SubConf(Base):\r\n    arg: str = \"arg1\"\r\n\r\n\r\n@dataclass\r\nclass SubConf2(Base):\r\n    arg: str = \"arg2\"\r\n\r\n\r\n@dataclass\r\nclass MetaConf:\r\n    defaults: List[Any] = field(\r\n        default_factory=lambda: [\r\n            {\"/sub/sub_group@sub_group\": \"SubConf2\"},\r\n        ]\r\n    )\r\n    sub_group: Base = MISSING\r\n\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(group=\"sub_group\", name=\"SubConf\", node=SubConf)\r\ncs.store(group=\"sub/sub_group\", name=\"SubConf2\", node=SubConf2)\r\ncs.store(name=\"MetaConf\", node=MetaConf)\r\n\r\n\r\n@hydra.main(config_path=None, config_name=\"MetaConf\")  # I would like to rely on the searchpath\r\ndef main(config):\r\n    print(config)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n    with hydra.initialize(config_path=None):\r\n        # I would expect the same syntax to work here.\r\n        config = hydra.compose(\"MetaConf\", overrides=[\"/sub/sub_group@sub_group=SubConf2\"])\r\n        print(config)\r\n\r\n```\r\n\r\n\r\n** Stack trace/error message **\r\n\r\n```\r\n{'sub_group': {'arg': 'arg2'}}\r\nTraceback (most recent call last):\r\n  File \"/Users/ademfrenk/merantix/scaffold/src/scaffold/entrypoints/my_main_example_1.py\", line 50, in <module>\r\n    config = hydra.compose(\"MetaConf\", overrides=[\"/sub/sub_group@sub_group=SubConf2\"])\r\n  File \"/Users/ademfrenk/merantix/scaffold/.venv/lib/python3.8/site-packages/hydra/compose.py\", line 33, in compose\r\n    cfg = gh.hydra.compose_config(\r\n  File \"/Users/ademfrenk/merantix/scaffold/.venv/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 559, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/Users/ademfrenk/merantix/scaffold/.venv/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 141, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/Users/ademfrenk/merantix/scaffold/.venv/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 231, in _load_configuration_impl\r\n    parsed_overrides = parser.parse_overrides(overrides=overrides)\r\n  File \"/Users/ademfrenk/merantix/scaffold/.venv/lib/python3.8/site-packages/hydra/core/override_parser/overrides_parser.py\", line 96, in parse_overrides\r\n    raise OverrideParseException(\r\nhydra.errors.OverrideParseException: Error parsing override '/sub/sub_group@sub_group=SubConf2'\r\nextraneous input '/' expecting {EQUAL, '~', '+', '@', KEY_SPECIAL, DOT_PATH, ID}\r\nSee https://hydra.cc/docs/next/advanced/override_grammar/basic for details\r\n```\r\n\r\n## Expected Behavior\r\nWould expect the output to look the same as if I would have use `\"sub/sub_group@sub_group=SubConf2\"` as an override (without leading `/`):\r\n```\r\n{'sub_group': {'arg': 'arg2'}}\r\n{'sub_group': {'arg': 'arg2'}}\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** : 3.8.3\r\n- **Virtual environment type and version** : 20.13.2\r\n- **Operating system** : macOS\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2105/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2095", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2095/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2095/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2095/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2095", "id": 1169589423, "node_id": "I_kwDOC2wWEs5FtoSv", "number": 2095, "title": "[Bug] Subclassing Launcher throws Mypy error", "user": {"login": "d-miketa", "id": 320321, "node_id": "MDQ6VXNlcjMyMDMyMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/320321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d-miketa", "html_url": "https://github.com/d-miketa", "followers_url": "https://api.github.com/users/d-miketa/followers", "following_url": "https://api.github.com/users/d-miketa/following{/other_user}", "gists_url": "https://api.github.com/users/d-miketa/gists{/gist_id}", "starred_url": "https://api.github.com/users/d-miketa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d-miketa/subscriptions", "organizations_url": "https://api.github.com/users/d-miketa/orgs", "repos_url": "https://api.github.com/users/d-miketa/repos", "events_url": "https://api.github.com/users/d-miketa/events{/privacy}", "received_events_url": "https://api.github.com/users/d-miketa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1620049642, "node_id": "MDU6TGFiZWwxNjIwMDQ5NjQy", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/awaiting_response", "name": "awaiting_response", "color": "edac74", "default": false, "description": "Awaiting response"}, {"id": 3979458836, "node_id": "LA_kwDOC2wWEs7tMbkU", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/priority_low", "name": "priority_low", "color": "570531", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/14", "html_url": "https://github.com/facebookresearch/hydra/milestone/14", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/14/labels", "id": 7323088, "node_id": "MI_kwDOC2wWEs4Ab73Q", "number": 14, "title": "Hydra 1.3.0", "description": "", "creator": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "open_issues": 28, "closed_issues": 6, "state": "open", "created_at": "2021-11-04T02:02:47Z", "updated_at": "2023-01-11T10:53:07Z", "due_on": null, "closed_at": null}, "comments": 3, "created_at": "2022-03-15T12:10:28Z", "updated_at": "2022-11-13T15:38:05Z", "closed_at": "2022-11-13T15:38:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI wanted to subclass `Launcher` to create a custom launcher plugin but Mypy is complaining of missing type information.\r\n\r\n## To reproduce\r\n\r\nSave the following file inside a custom repo which has access to a Hydra 1.1 installation:\r\nhttps://github.com/facebookresearch/hydra/blob/1.1_branch/examples/plugins/example_launcher_plugin/hydra_plugins/example_launcher_plugin/example_launcher.py\r\n\r\nThe Mypy error is:\r\n```\r\nClass cannot subclass \"Launcher\" (has type \"Any\")\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.1\r\n- **Python version** : 3.9.10\r\n- **Virtual environment type and version** : Conda\r\n- **Operating system** : Mac OS 11\r\n\r\n## Additional context\r\nThis is the same problem in another context: https://stackoverflow.com/questions/49888155/class-cannot-subclass-qobject-has-type-any-using-mypy\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2095/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2095/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2088", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2088/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2088/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2088/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2088", "id": 1167400304, "node_id": "I_kwDOC2wWEs5FlR1w", "number": 2088, "title": "[Bug] hydra-core==1.2.0.dev1 not compatible with omegaconf==2.2.0.dev1 when using poetry", "user": {"login": "pedropgusmao", "id": 847743, "node_id": "MDQ6VXNlcjg0Nzc0Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/847743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pedropgusmao", "html_url": "https://github.com/pedropgusmao", "followers_url": "https://api.github.com/users/pedropgusmao/followers", "following_url": "https://api.github.com/users/pedropgusmao/following{/other_user}", "gists_url": "https://api.github.com/users/pedropgusmao/gists{/gist_id}", "starred_url": "https://api.github.com/users/pedropgusmao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pedropgusmao/subscriptions", "organizations_url": "https://api.github.com/users/pedropgusmao/orgs", "repos_url": "https://api.github.com/users/pedropgusmao/repos", "events_url": "https://api.github.com/users/pedropgusmao/events{/privacy}", "received_events_url": "https://api.github.com/users/pedropgusmao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-03-12T21:05:01Z", "updated_at": "2022-03-14T17:41:42Z", "closed_at": "2022-03-14T17:41:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nPre-release `1.2.0.dev1` still depends on omegaconf (>=2.1.0,<2.2.0) and it should probably allow `omegaconf==2.2.0.dev1`.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n**pyproject.toml**:\r\n```\r\n[tool.poetry]\r\nname = \"minimal example\"\r\nversion = \"0.1.0\"\r\ndescription = \"\"\r\nauthors = [\"John Doe <fake@fake.abc>\"]\r\n\r\n[tool.poetry.dependencies]\r\npython = \"^3.7.12\"\r\nomegaconf = \"==2.2.0.dev1\"\r\nhydra-core = \"==1.2.0.dev1\"\r\n\r\n[tool.poetry.dev-dependencies]\r\n\r\n[build-system]\r\nrequires = [\"poetry-core>=1.0.0\"]\r\nbuild-backend = \"poetry.core.masonry.api\"\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nUpdating dependencies\r\nResolving dependencies... (0.0s)\r\n\r\n  SolverProblemError\r\n\r\n  Because hydra-core (1.2.0.dev1) depends on omegaconf (>=2.1.0,<2.2.0)\r\n   and minimal example depends on omegaconf (==2.2.0.dev1), hydra-core is forbidden.\r\n  So, because minimal example depends on hydra-core (==1.2.0.dev1), version solving failed.\r\n\r\n  at ~/.local/lib/python3.8/site-packages/poetry/puzzle/solver.py:241 in _solve\r\n      237\u2502             packages = result.packages\r\n      238\u2502         except OverrideNeeded as e:\r\n      239\u2502             return self.solve_in_compatibility_mode(e.overrides, use_latest=use_latest)\r\n      240\u2502         except SolveFailure as e:\r\n    \u2192 241\u2502             raise SolverProblemError(e)\r\n      242\u2502 \r\n      243\u2502         results = dict(\r\n      244\u2502             depth_first_search(\r\n      245\u2502                 PackageNode(self._package, packages), aggregate_package_nodes\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  1.2.0.dev1\r\n- **Python version** :  3.7.12\r\n- **Virtual environment type and version** : pyenv with poetry \r\n- **Operating system** :  Ubuntu 20.04\r\n\r\n## Additional context\r\nMaybe first line in https://github.com/facebookresearch/hydra/blob/main/requirements/requirements.txt needs to be changed to `omegaconf==2.2.*` for hydra-core==1.2.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2088/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2061", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2061/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2061/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2061/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2061", "id": 1152210323, "node_id": "I_kwDOC2wWEs5ErVWT", "number": 2061, "title": "[Bug] Regression in `hydra._internal.utils._locate`", "user": {"login": "rsokl", "id": 29104956, "node_id": "MDQ6VXNlcjI5MTA0OTU2", "avatar_url": "https://avatars.githubusercontent.com/u/29104956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsokl", "html_url": "https://github.com/rsokl", "followers_url": "https://api.github.com/users/rsokl/followers", "following_url": "https://api.github.com/users/rsokl/following{/other_user}", "gists_url": "https://api.github.com/users/rsokl/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsokl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsokl/subscriptions", "organizations_url": "https://api.github.com/users/rsokl/orgs", "repos_url": "https://api.github.com/users/rsokl/repos", "events_url": "https://api.github.com/users/rsokl/events{/privacy}", "received_events_url": "https://api.github.com/users/rsokl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-02-26T19:51:36Z", "updated_at": "2022-03-01T05:25:48Z", "closed_at": "2022-03-01T05:25:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n[hydra-zen's torch tests](https://github.com/mit-ll-responsible-ai/hydra-zen/blob/main/tests/test_third_party/test_against_torch.py) caught a regression that was introduced in 043ec9b: `hydra._internal.utils._locate` is no longer able to \"locate\" `torch.tensor`. \r\n\r\n**Edit: this is applicable for PyTorch 1.8.1 and earlier. See my comment later in this thread.**\r\n\r\n**Before 043ec9b:**\r\n\r\n```python\r\n>>> from hydra._internal.utils import _locate\r\n>>> import torch\r\n>>> _locate(\"torch.tensor\") is torch.tensor\r\nTrue\r\n```\r\n\r\n**After:**\r\n```python\r\n>>> _locate(\"torch.tensor\")\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-11-e8fe6ca69d39> in <module>\r\n----> 1 _locate(\"torch.tensor\")\r\n\r\n~\\Anaconda3\\envs\\hydra-zen\\lib\\site-packages\\hydra\\_internal\\utils.py in _locate(path)\r\n    599     else:\r\n    600         # reject if not callable & not a type\r\n--> 601         raise ValueError(f\"Invalid type ({type(obj)}) found for {path}\")\r\n    602 \r\n    603 \r\n\r\nValueError: Invalid type (<class 'module'>) found for torch.tensor", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2061/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2061/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2046", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2046/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2046/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2046/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2046", "id": 1145495995, "node_id": "I_kwDOC2wWEs5ERuG7", "number": 2046, "title": "[Bug] Key 'params' not in 'OptunaSweeperConf'", "user": {"login": "ai4prod", "id": 76774876, "node_id": "MDQ6VXNlcjc2Nzc0ODc2", "avatar_url": "https://avatars.githubusercontent.com/u/76774876?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ai4prod", "html_url": "https://github.com/ai4prod", "followers_url": "https://api.github.com/users/ai4prod/followers", "following_url": "https://api.github.com/users/ai4prod/following{/other_user}", "gists_url": "https://api.github.com/users/ai4prod/gists{/gist_id}", "starred_url": "https://api.github.com/users/ai4prod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ai4prod/subscriptions", "organizations_url": "https://api.github.com/users/ai4prod/orgs", "repos_url": "https://api.github.com/users/ai4prod/repos", "events_url": "https://api.github.com/users/ai4prod/events{/privacy}", "received_events_url": "https://api.github.com/users/ai4prod/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-02-21T08:52:29Z", "updated_at": "2022-02-21T10:22:26Z", "closed_at": "2022-02-21T10:21:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nI'am trying to use optuna with hydra using OptunaSweeper conf. I have followed the example inside hydra repo at this link.\r\n\r\nhttps://github.com/facebookresearch/hydra/tree/main/plugins/hydra_optuna_sweeper/example/\r\n\r\nI have installed optuna and hydra integration following the documentation https://hydra.cc/docs/next/plugins/optuna_sweeper/\r\n\r\n\r\n## Checklist\r\n- [OK ] I checked on the latest version of Hydra\r\n- [ NO ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\npython example/sphere.py hydra/sweeper=optuna --cfg hydra -p hydra.sweeper directly from hydra repository\r\n\r\n** Stack trace/error message **\r\n\r\nKey 'params' not in 'OptunaSweeperConf'\r\n    full_key: hydra.sweeper.params\r\n    object_type=OptunaSweeperConf\r\n\r\n## Expected Behavior\r\n\r\nParams will be in conf\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** :  3.8\r\n- **Virtual environment type and version** : Virtualenv \r\n- **Operating system** :  Linux\r\n\r\n## Additional context\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2046/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2037", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2037/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2037/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2037/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2037", "id": 1141065611, "node_id": "I_kwDOC2wWEs5EA0eL", "number": 2037, "title": "[Bug] Accessing resolved field re-runs resolver", "user": {"login": "nils-werner", "id": 88704, "node_id": "MDQ6VXNlcjg4NzA0", "avatar_url": "https://avatars.githubusercontent.com/u/88704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nils-werner", "html_url": "https://github.com/nils-werner", "followers_url": "https://api.github.com/users/nils-werner/followers", "following_url": "https://api.github.com/users/nils-werner/following{/other_user}", "gists_url": "https://api.github.com/users/nils-werner/gists{/gist_id}", "starred_url": "https://api.github.com/users/nils-werner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nils-werner/subscriptions", "organizations_url": "https://api.github.com/users/nils-werner/orgs", "repos_url": "https://api.github.com/users/nils-werner/repos", "events_url": "https://api.github.com/users/nils-werner/events{/privacy}", "received_events_url": "https://api.github.com/users/nils-werner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-17T09:15:46Z", "updated_at": "2022-02-23T14:40:40Z", "closed_at": "2022-02-23T14:40:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nWhenever I am using a resolver, that resolver gets run. That is of course expected behaviour:\r\n\r\n```\r\nhello: ${test:1}   # runs resolver `test`\r\n```\r\n\r\nHowever when I access the resolved field `${hello}`, that resolver will run again. To me that is unexpected behaviour.\r\n\r\n```\r\nhello: ${test:1}   # runs resolver `test`\r\nhello2: ${hello}   # runs resolver `test` again!\r\n```\r\n\r\nI would expect that the resolver is not run again, and instead just that already computed value is re-used.\r\n\r\nI of course can use `OmegaConf.register_new_resolver(..., use_cache=true)`, but I would still expect it to not be re-run when accessing an intermediate field.\r\n\r\nOr am I just misunderstanding a deliberate design choice?\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n```python\r\n# test.py\r\nimport hydra\r\nfrom omegaconf import OmegaConf\r\n\r\ndef test(x):\r\n    print(f\"running resolver 'test:{x}'\")\r\n    return x\r\n\r\nOmegaConf.register_new_resolver(\"test\", test)\r\n\r\n\r\n@hydra.main(config_path=\"./\", config_name=\"test.yaml\")\r\ndef main(config):\r\n    print(OmegaConf.to_yaml(config, resolve=True))\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n```yaml\r\n# test.yaml\r\nhello: ${test:1}\r\nhello2: ${test:2}\r\nhello3: ${hello2}\r\n```\r\n\r\n** Stack trace/error message **\r\n\r\n```\r\nrunning resolver 'test:1'\r\nrunning resolver 'test:2'\r\nrunning resolver 'test:2'\r\nhello: 1\r\nhello2: 2\r\nhello3: 2\r\n```\r\n\r\n## Expected Behavior\r\n\r\nThe resolver should only run once\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** : 3.9.9\r\n- **Virtual environment type and version** : `python -m venv`\r\n- **Operating system** : macOS Monterey", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2037/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2025", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2025/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2025/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2025/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2025", "id": 1129517746, "node_id": "I_kwDOC2wWEs5DUxKy", "number": 2025, "title": "[Bug] Basic example on Jupyter doesn't work", "user": {"login": "GlidingRaven", "id": 19312832, "node_id": "MDQ6VXNlcjE5MzEyODMy", "avatar_url": "https://avatars.githubusercontent.com/u/19312832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GlidingRaven", "html_url": "https://github.com/GlidingRaven", "followers_url": "https://api.github.com/users/GlidingRaven/followers", "following_url": "https://api.github.com/users/GlidingRaven/following{/other_user}", "gists_url": "https://api.github.com/users/GlidingRaven/gists{/gist_id}", "starred_url": "https://api.github.com/users/GlidingRaven/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GlidingRaven/subscriptions", "organizations_url": "https://api.github.com/users/GlidingRaven/orgs", "repos_url": "https://api.github.com/users/GlidingRaven/repos", "events_url": "https://api.github.com/users/GlidingRaven/events{/privacy}", "received_events_url": "https://api.github.com/users/GlidingRaven/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-10T06:28:11Z", "updated_at": "2023-01-26T06:59:09Z", "closed_at": "2023-01-26T06:59:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug (?)\r\n## Description\r\nI can't reproduce the Basic example on Jupyter notebook.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nConfig: (conf/config.yaml)\r\n```\r\ndb:\r\n  driver: mysql\r\n  user: omry\r\n  pass: secret\r\n```\r\n\r\n\r\nRun a cell:\r\n```\r\nimport hydra\r\nfrom omegaconf import DictConfig, OmegaConf\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef my_app(cfg : DictConfig) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\nOutput:\r\n```\r\n---------------------------------------------------------------------------\r\nSystemExit                                Traceback (most recent call last)\r\n<ipython-input-7-e492f95800ae> in <module>()\r\n      8 \r\n      9 if __name__ == \"__main__\":\r\n---> 10     app()\r\n     11 # %tb\r\n\r\nC:\\Users\\11\\AppData\\Roaming\\Python\\Python36\\site-packages\\hydra\\main.py in decorated_main(cfg_passthrough)\r\n     50                     task_function=task_function,\r\n     51                     config_path=config_path,\r\n---> 52                     config_name=config_name,\r\n     53                 )\r\n     54 \r\n\r\nC:\\Users\\11\\AppData\\Roaming\\Python\\Python36\\site-packages\\hydra\\_internal\\utils.py in _run_hydra(args_parser, task_function, config_path, config_name)\r\n    307     from .hydra import Hydra\r\n    308 \r\n--> 309     args = args_parser.parse_args()\r\n    310     if args.config_name is not None:\r\n    311         config_name = args.config_name\r\n\r\nC:\\Users\\11\\AppData\\Roaming\\Python\\Python36\\site-packages\\argparse.py in parse_args(self, args, namespace)\r\n   1726         if argv:\r\n   1727             msg = _('unrecognized arguments: %s')\r\n-> 1728             self.error(msg % ' '.join(argv))\r\n   1729         return args\r\n   1730 \r\n\r\nC:\\Users\\11\\AppData\\Roaming\\Python\\Python36\\site-packages\\argparse.py in error(self, message)\r\n   2390         \"\"\"\r\n   2391         self.print_usage(_sys.stderr)\r\n-> 2392         self.exit(2, _('%s: error: %s\\n') % (self.prog, message))\r\n\r\nC:\\Users\\11\\AppData\\Roaming\\Python\\Python36\\site-packages\\argparse.py in exit(self, status, message)\r\n   2378         if message:\r\n   2379             self._print_message(message, _sys.stderr)\r\n-> 2380         _sys.exit(status)\r\n   2381 \r\n   2382     def error(self, message):\r\n\r\nSystemExit: 2\r\n\r\n```\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Argparse  Version** :  1.4.0\r\n- **Python version** : Python 3.6.1 :: Anaconda 4.4.0 (64-bit)\r\n- **Virtual environment type and version** : virtual\r\n- **Operating system** : Windows 10\r\n\r\n## Additional context\r\nIs it possible to run the Hydra on Jupyter?\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2025/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2024", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2024/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2024/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2024/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2024", "id": 1128818952, "node_id": "I_kwDOC2wWEs5DSGkI", "number": 2024, "title": "[Bug] build error", "user": {"login": "fizwit", "id": 5123531, "node_id": "MDQ6VXNlcjUxMjM1MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/5123531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fizwit", "html_url": "https://github.com/fizwit", "followers_url": "https://api.github.com/users/fizwit/followers", "following_url": "https://api.github.com/users/fizwit/following{/other_user}", "gists_url": "https://api.github.com/users/fizwit/gists{/gist_id}", "starred_url": "https://api.github.com/users/fizwit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fizwit/subscriptions", "organizations_url": "https://api.github.com/users/fizwit/orgs", "repos_url": "https://api.github.com/users/fizwit/repos", "events_url": "https://api.github.com/users/fizwit/events{/privacy}", "received_events_url": "https://api.github.com/users/fizwit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-09T17:19:05Z", "updated_at": "2022-09-30T17:20:05Z", "closed_at": "2022-09-30T17:20:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nbuild error hydra-core-1.1.1 from Pypi\r\n      File \"setup.py\", line 8, in <module>\r\n        from build_helpers.build_helpers import (\r\n    ModuleNotFoundError: No module named 'build_helpers'\r\n\r\n## Checklist\r\n- [ x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\npip install hydra-core\r\n\r\n** Stack trace/error message **\r\n```\r\nProcessing /app/sources/p/PyTorch-Geometric/extensions/hydra-core-1.1.1.tar.gz\r\n    Preparing wheel metadata ... error\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /app/software/Python/3.8.6-GCCcore-10.2.0/bin/python /app/software/Python/3.8.6-GCCcore-10.2.0/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /tmp/tmpy0w202tk\r\n         cwd: /tmp/pip-req-build-qlhgdced\r\n    Complete output (16 lines):\r\n    Traceback (most recent call last):\r\n      File \"/app/software/Python/3.8.6-GCCcore-10.2.0/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 280, in <module>\r\n        main()\r\n      File \"/app/software/Python/3.8.6-GCCcore-10.2.0/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 263, in main\r\n        json_out['return_val'] = hook(**hook_input['kwargs'])\r\n      File \"/app/software/Python/3.8.6-GCCcore-10.2.0/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 133, in prepare_metadata_for_build_wheel\r\n        return hook(metadata_directory, config_settings)\r\n      File \"/app/software/Python/3.8.6-GCCcore-10.2.0/lib/python3.8/site-packages/setuptools/build_meta.py\", line 157, in prepare_metadata_for_build_wheel\r\n        self.run_setup()\r\n      File \"/app/software/Python/3.8.6-GCCcore-10.2.0/lib/python3.8/site-packages/setuptools/build_meta.py\", line 248, in run_setup\r\n        super(_BuildMetaLegacyBackend,\r\n      File \"/app/software/Python/3.8.6-GCCcore-10.2.0/lib/python3.8/site-packages/setuptools/build_meta.py\", line 142, in run_setup\r\n        exec(compile(code, __file__, 'exec'), locals())\r\n      File \"setup.py\", line 8, in <module>\r\n        from build_helpers.build_helpers import (\r\n    ModuleNotFoundError: No module named 'build_helpers'\r\n```\r\n\r\n## Expected Behavior\r\npip install should work from Pypi\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** :  3.8.6\r\n- **Virtual environment type and version** :\r\n- **Operating system** :  Ubuntu 18.04\r\n\r\n## Additional context\r\nbuilds if I manually download the tar file from github. Github and Pypi do not match. \r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2024/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2024/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2010", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2010/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2010/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2010/events", "html_url": "https://github.com/facebookresearch/hydra/issues/2010", "id": 1123538207, "node_id": "I_kwDOC2wWEs5C99Uf", "number": 2010, "title": "[Bug] AssertionError in multithread context", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-02-03T20:48:30Z", "updated_at": "2022-04-16T13:36:34Z", "closed_at": "2022-04-16T13:33:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I ran into an AssertionError using Hydra with python's `threading` library.\r\n\r\nIn theory, Hydra is not thread safe. However, we should be able to support using Hydra in a multithread application if Hydra is only used from one thread.\r\n\r\nHere is the relevant part of the traceback:\r\n```\r\nAn error occurred during Hydra's exception formatting:\r\nAssertionError()\r\nTraceback (most recent call last):\r\n  File \"/home/jasha10/miniconda3/envs/pysc/lib/python3.9/site-packages/hydra/_internal/utils.py\", line 252, in run_and_report\r\n    assert mdl is not None\r\nAssertionError\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/2010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/2010/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1998", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1998/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1998/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1998/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1998", "id": 1115183770, "node_id": "I_kwDOC2wWEs5CeFqa", "number": 1998, "title": "[Bug] instantiating 'my_app.Optimizer' : __init__() got an unexpected keyword argument '_partial_'", "user": {"login": "markovka17", "id": 20357655, "node_id": "MDQ6VXNlcjIwMzU3NjU1", "avatar_url": "https://avatars.githubusercontent.com/u/20357655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/markovka17", "html_url": "https://github.com/markovka17", "followers_url": "https://api.github.com/users/markovka17/followers", "following_url": "https://api.github.com/users/markovka17/following{/other_user}", "gists_url": "https://api.github.com/users/markovka17/gists{/gist_id}", "starred_url": "https://api.github.com/users/markovka17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/markovka17/subscriptions", "organizations_url": "https://api.github.com/users/markovka17/orgs", "repos_url": "https://api.github.com/users/markovka17/repos", "events_url": "https://api.github.com/users/markovka17/events{/privacy}", "received_events_url": "https://api.github.com/users/markovka17/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-01-26T15:57:36Z", "updated_at": "2022-01-27T15:06:48Z", "closed_at": "2022-01-26T16:28:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI just try to launch [`_partial_`](https://github.com/facebookresearch/hydra/tree/d674cd2803e561ca25cbd7ced127d69d9f4f633b/examples/instantiate/partial) instantiation from official example and get TypeError:\r\n```\r\nreturn _target_(*args, **kwargs)\r\nTypeError: Error instantiating 'my_app.Optimizer' : __init__() got an unexpected keyword argument '_partial_'\r\n```\r\n\r\n## Expected Behavior\r\nI expect to get partially initialised class\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** : 3.8.10\r\n- **Virtual environment type and version** : virtualenv\r\n- **Operating system** :  Ubuntu 20.04.1 LTS\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1998/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1986", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1986/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1986/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1986/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1986", "id": 1111767752, "node_id": "I_kwDOC2wWEs5CRDrI", "number": 1986, "title": "[Bug] Optuna sweeper silently changes None type to str.", "user": {"login": "YannDubs", "id": 24327668, "node_id": "MDQ6VXNlcjI0MzI3NjY4", "avatar_url": "https://avatars.githubusercontent.com/u/24327668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YannDubs", "html_url": "https://github.com/YannDubs", "followers_url": "https://api.github.com/users/YannDubs/followers", "following_url": "https://api.github.com/users/YannDubs/following{/other_user}", "gists_url": "https://api.github.com/users/YannDubs/gists{/gist_id}", "starred_url": "https://api.github.com/users/YannDubs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YannDubs/subscriptions", "organizations_url": "https://api.github.com/users/YannDubs/orgs", "repos_url": "https://api.github.com/users/YannDubs/repos", "events_url": "https://api.github.com/users/YannDubs/events{/privacy}", "received_events_url": "https://api.github.com/users/YannDubs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-01-23T04:10:32Z", "updated_at": "2022-01-23T13:36:11Z", "closed_at": "2022-01-23T13:36:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen using optuna sweeper if `null` is swept over it will (correctly) be converted to `None` but if it is not swept over it will be converted to the **string** `\"None\"`. \r\n\r\n## To reproduce\r\n\r\n**Minimal Code/Config snippet to reproduce**\r\n\r\nexamples/my_app.py:\r\n\r\n```python\r\nimport hydra\r\n\r\n@hydra.main(config_path=None)\r\ndef my_app(cfg):\r\n    print(cfg.value, type(cfg.value))\r\n    return 0\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\nCLI 1:\r\n`python examples/my_app.py hydra/sweeper=optuna hydra.sweeper.n_jobs=1 hydra.sweeper.n_trials=1 +value=null,1 hydra.sweeper.sampler.seed=2 -m`\r\n\r\nCLI 2: (only `null` for value)\r\n`python examples/my_app.py hydra/sweeper=optuna hydra.sweeper.n_jobs=1 hydra.sweeper.n_trials=1 +value=null hydra.sweeper.sampler.seed=2 -m`\r\n\r\n**Stack trace/error message**\r\n\r\nout for CLI 1:\r\n```\r\n...\r\nNone <class 'NoneType'>\r\n...\r\n```\r\n\r\nout for CLI 2:\r\n```\r\n...\r\nNone <class 'str'>\r\n...\r\n```\r\n\r\n## Expected Behavior\r\n\r\nThe type of `None` should always be `NoneType`. I.e.: `None <class 'NoneType'>` for both inputs.\r\n\r\n## System information\r\n- **Hydra Version** :  `1.1.1`\r\n- **Python version** : `3.8.12`\r\n\r\n## Additional context\r\nRelated to #1929 @Jasha10 ?\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1986/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1986/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1966", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1966/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1966/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1966/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1966", "id": 1106206971, "node_id": "I_kwDOC2wWEs5B72D7", "number": 1966, "title": "[Bug] submitit launcher: `additional_parameters` cannot be used with local", "user": {"login": "YannDubs", "id": 24327668, "node_id": "MDQ6VXNlcjI0MzI3NjY4", "avatar_url": "https://avatars.githubusercontent.com/u/24327668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YannDubs", "html_url": "https://github.com/YannDubs", "followers_url": "https://api.github.com/users/YannDubs/followers", "following_url": "https://api.github.com/users/YannDubs/following{/other_user}", "gists_url": "https://api.github.com/users/YannDubs/gists{/gist_id}", "starred_url": "https://api.github.com/users/YannDubs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YannDubs/subscriptions", "organizations_url": "https://api.github.com/users/YannDubs/orgs", "repos_url": "https://api.github.com/users/YannDubs/repos", "events_url": "https://api.github.com/users/YannDubs/events{/privacy}", "received_events_url": "https://api.github.com/users/YannDubs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-01-17T19:45:46Z", "updated_at": "2022-01-17T19:58:24Z", "closed_at": "2022-01-17T19:58:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nIn order to allow a parameters that are not yet available in the submitit plugin, there's an `additional_parameters` for `SlurmQueueConf` here:\r\n\r\nhttps://github.com/facebookresearch/hydra/blob/8ebc3ead43b5ebfe51c76ede5ee633a11de5cfc0/plugins/hydra_submitit_launcher/hydra_plugins/hydra_submitit_launcher/config.py#L68\r\n\r\nUnfortunately, it cannot be used for `LocalQueueConf`. I suggest to move `additional_parameters` from `SlurmQueueConf` to `BaseQueueConf` so that it can be used for all executors.\r\n\r\nAs additional context, I would like to use [`stderr_to_stdout`](https://github.com/facebookincubator/submitit/blob/6f9e1f67178b08b050576fe6bc02e4555568128a/submitit/auto/auto.py#L130) in submitit. This is not yet supported by the plugin, which would be ok if we could specify it through `additional_parameters`.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1966/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1917", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1917/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1917/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1917/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1917", "id": 1074194449, "node_id": "I_kwDOC2wWEs5ABugR", "number": 1917, "title": "[Bug] Overriding the config gives an error", "user": {"login": "Anirudh257", "id": 16001446, "node_id": "MDQ6VXNlcjE2MDAxNDQ2", "avatar_url": "https://avatars.githubusercontent.com/u/16001446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Anirudh257", "html_url": "https://github.com/Anirudh257", "followers_url": "https://api.github.com/users/Anirudh257/followers", "following_url": "https://api.github.com/users/Anirudh257/following{/other_user}", "gists_url": "https://api.github.com/users/Anirudh257/gists{/gist_id}", "starred_url": "https://api.github.com/users/Anirudh257/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Anirudh257/subscriptions", "organizations_url": "https://api.github.com/users/Anirudh257/orgs", "repos_url": "https://api.github.com/users/Anirudh257/repos", "events_url": "https://api.github.com/users/Anirudh257/events{/privacy}", "received_events_url": "https://api.github.com/users/Anirudh257/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-12-08T09:30:24Z", "updated_at": "2021-12-09T21:00:13Z", "closed_at": "2021-12-09T21:00:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nUnable to follow the steps in the tutorial and override the config value\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n1. Follow the steps mentioned in the [tutorial](https://hydra.cc/docs/tutorials/basic/your_first_app/config_file/).\r\n2. Create `my_app.py` and `config.yaml`\r\n3. Run `python3 my_app.py ++db.password=123`\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"my_app.py\", line 9, in <module>\r\n    my_app()\r\n  File \"/home/mbzuaiser/.local/lib/python3.7/site-packages/hydra/main.py\", line 33, in decorated_main\r\n    config_name=config_name,\r\n  File \"/home/mbzuaiser/.local/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 362, in _run_hydra\r\n    lambda: hydra.run(\r\n  File \"/home/mbzuaiser/.local/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 213, in run_and_report\r\n    raise ex\r\n  File \"/home/mbzuaiser/.local/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 210, in run_and_report\r\n    return func()\r\n  File \"/home/mbzuaiser/.local/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 365, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/mbzuaiser/.local/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 90, in run\r\n    run_mode=RunMode.RUN,\r\n  File \"/home/mbzuaiser/.local/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 524, in compose_config\r\n    from_shell=from_shell,\r\n  File \"/home/mbzuaiser/.local/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 150, in load_configuration\r\n    from_shell=from_shell,\r\n  File \"/home/mbzuaiser/.local/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 166, in _load_configuration_impl\r\n    parsed_overrides = parser.parse_overrides(overrides=overrides)\r\n  File \"/home/mbzuaiser/.local/lib/python3.7/site-packages/hydra/core/override_parser/overrides_parser.py\", line 100, in parse_overrides\r\n    ) from e.__cause__\r\nhydra.errors.OverrideParseException: no viable alternative at input '+'\r\nSee https://hydra.cc/docs/next/advanced/override_grammar/basic for details\r\n\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nThe output should have been \r\n````\r\ndb:\r\n driver: mysql\r\n user: root\r\n password: 1234\r\n````\r\nand the password in the `config.yaml` should be updated as well.\r\n## System information\r\n- **Hydra Version** :   `1.1.0dev4`\r\n- **Python version** : Python3.7.7 from Anaconda\r\n- **Virtual environment type and version** : Conda environment and `conda 4.10.3`\r\n- **Operating system** : Ubuntu 20.04.2 LTS (Focal Fossa)\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1917/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1914", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1914/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1914/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1914/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1914", "id": 1071030371, "node_id": "I_kwDOC2wWEs4_1qBj", "number": 1914, "title": "Passing callable as `instantiate` `_target_` fails for nested classes", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-03T22:50:54Z", "updated_at": "2021-12-15T03:29:56Z", "closed_at": "2021-12-15T03:29:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hydra's `instantiate` function allows users to pass a callable (rather than a\r\nstring) via the `_target_` keyword argument. For example:\r\n\r\n```python\r\ndef fn():\r\n    return \"fn return\"\r\n\r\n\r\nclass A:\r\n    def __init__(self):\r\n        print(\"in A.__init__\")\r\n\r\n    @classmethod\r\n    def method(self):\r\n        return \"A.method return\"\r\n\r\n# passing a callable (rather than a string) as _target_:\r\nfn_return = instantiate({}, _target_=fn)\r\nA_instance = instantiate({}, _target_=A)\r\nA_method_return = instantiate({}, _target_=A.method)\r\n```\r\n\r\nHowever, this fails when a nested class is passed as the `_target_`:\r\n```python\r\n\r\nclass A:\r\n    class B:\r\n        def __init__(self):\r\n            print(\"in A.B.__init__\")\r\n\r\nA_B_instance = instantiate({}, _target_=A.B)  # ImportError: Encountered AttributeError while loading '__main__.B': module '__main__' has no attribute 'B'\r\n```\r\nThe error message indicates that `__main__.B` could not be found. This indicates a mistake in handling the keyword argument `_target_=A.B`: it is `__main__.A.B` that should have been looked up, not `__main__.B`.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1914/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1914/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1912", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1912/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1912/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1912/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1912", "id": 1070599277, "node_id": "I_kwDOC2wWEs4_0Axt", "number": 1912, "title": "[Bug] Key not in struct", "user": {"login": "bhattbhuwan13", "id": 15955955, "node_id": "MDQ6VXNlcjE1OTU1OTU1", "avatar_url": "https://avatars.githubusercontent.com/u/15955955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bhattbhuwan13", "html_url": "https://github.com/bhattbhuwan13", "followers_url": "https://api.github.com/users/bhattbhuwan13/followers", "following_url": "https://api.github.com/users/bhattbhuwan13/following{/other_user}", "gists_url": "https://api.github.com/users/bhattbhuwan13/gists{/gist_id}", "starred_url": "https://api.github.com/users/bhattbhuwan13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bhattbhuwan13/subscriptions", "organizations_url": "https://api.github.com/users/bhattbhuwan13/orgs", "repos_url": "https://api.github.com/users/bhattbhuwan13/repos", "events_url": "https://api.github.com/users/bhattbhuwan13/events{/privacy}", "received_events_url": "https://api.github.com/users/bhattbhuwan13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-12-03T13:35:30Z", "updated_at": "2021-12-03T14:03:20Z", "closed_at": "2021-12-03T14:03:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nI was trying to override the value present in the config.yaml file through the command line but I get an error instead. The error reads:\r\n\r\n```\r\nKey 'perferences' is not in struct\r\n    full_key: perferences\r\n    object_type=dict\r\n```\r\n\r\nHowever the key is present in the yaml file.\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n``` yaml\r\n# config.yaml\r\npreferences:\r\n  user: raviraja\r\n  trait: i_like_my_sleeping\r\n```\r\n\r\n``` python\r\n# main.py\r\nimport hydra\r\nfrom omegaconf import OmegaConf\r\n\r\n@hydra.main(config_name=\"config.yaml\", config_path=\".\")\r\ndef main(cfg):\r\n    # Print the config file using `to_yaml` method which prints in a pretty manner\r\n    print(OmegaConf.to_yaml(cfg))\r\n    print(cfg.preferences.user)\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n**Command Used**  \r\n```bash\r\npython main.py perferences.trait=i_like_stars\r\n```\r\n** Stack trace/error message **\r\n```\r\nCould not override 'perferences.trait'.\r\nTo append to your config use +perferences.trait=i_like_stars\r\nKey 'perferences' is not in struct\r\n    full_key: perferences\r\n    object_type=dict\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** : 3.8.7\r\n- **Virtual environment type and version** : pyenv\r\n- **Operating system** : Mac\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1912/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1911", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1911/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1911/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1911/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1911", "id": 1070223458, "node_id": "I_kwDOC2wWEs4_ylBi", "number": 1911, "title": "Instantiation exception also raises an exception sometimes", "user": {"login": "bryant1410", "id": 3905501, "node_id": "MDQ6VXNlcjM5MDU1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/3905501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bryant1410", "html_url": "https://github.com/bryant1410", "followers_url": "https://api.github.com/users/bryant1410/followers", "following_url": "https://api.github.com/users/bryant1410/following{/other_user}", "gists_url": "https://api.github.com/users/bryant1410/gists{/gist_id}", "starred_url": "https://api.github.com/users/bryant1410/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bryant1410/subscriptions", "organizations_url": "https://api.github.com/users/bryant1410/orgs", "repos_url": "https://api.github.com/users/bryant1410/repos", "events_url": "https://api.github.com/users/bryant1410/events{/privacy}", "received_events_url": "https://api.github.com/users/bryant1410/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11", "html_url": "https://github.com/facebookresearch/hydra/milestone/11", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11/labels", "id": 6445624, "node_id": "MDk6TWlsZXN0b25lNjQ0NTYyNA==", "number": 11, "title": "Hydra 1.2.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2021-02-17T21:35:22Z", "updated_at": "2022-05-18T14:42:50Z", "due_on": null, "closed_at": "2022-05-18T14:42:50Z"}, "comments": 2, "created_at": "2021-12-03T05:06:33Z", "updated_at": "2021-12-15T05:37:21Z", "closed_at": "2021-12-15T05:37:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nWhen there's an instantiation exception, raising a chained exception sometimes also fails because it doesn't take an argument:\r\n\r\nhttps://github.com/facebookresearch/hydra/blob/9759f87673be1d41fe33279e1b7980f8efb38b19/hydra/_internal/instantiate/_instantiate2.py#L63-L66\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nTry to instantiate an object such that it raises an exception that doesn't take any argument.\r\n\r\n## Expected Behavior\r\n\r\nMaybe it should try to show another type of exception instead? Or chaining (`from e`).\r\n\r\n## System information\r\n- **Hydra Version** :  1.1\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : conda 4.11\r\n- **Operating system** : Ubuntu 18.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1911/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1911/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1908", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1908/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1908/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1908/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1908", "id": 1068379623, "node_id": "I_kwDOC2wWEs4_ri3n", "number": 1908, "title": "[Bug] BasicLauncher is not being used", "user": {"login": "nils-werner", "id": 88704, "node_id": "MDQ6VXNlcjg4NzA0", "avatar_url": "https://avatars.githubusercontent.com/u/88704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nils-werner", "html_url": "https://github.com/nils-werner", "followers_url": "https://api.github.com/users/nils-werner/followers", "following_url": "https://api.github.com/users/nils-werner/following{/other_user}", "gists_url": "https://api.github.com/users/nils-werner/gists{/gist_id}", "starred_url": "https://api.github.com/users/nils-werner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nils-werner/subscriptions", "organizations_url": "https://api.github.com/users/nils-werner/orgs", "repos_url": "https://api.github.com/users/nils-werner/repos", "events_url": "https://api.github.com/users/nils-werner/events{/privacy}", "received_events_url": "https://api.github.com/users/nils-werner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-01T13:01:59Z", "updated_at": "2021-12-01T16:22:18Z", "closed_at": "2021-12-01T16:22:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nWhile trying to add functionality to `BasicLauncher` (#1907), I noticed that the class is never actually called.\r\n\r\nApparently, `hydra._internal.core_plugins.basic_launcher.BasicLauncher` is never really used, despite being referenced by `hydra.launcher._target_`.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n 1. `cd examples/tutorials/basic/your_first_hydra_app/1_simple_cli/`\r\n 1. Run `python my_app.py -c hydra` and ensure that `BasicLauncher` is selected\r\n 1. Run `python my_app.py`\r\n 1. It works as expected\r\n 1. Delete the entire class `BasicLauncher` in `hydra/_internal/core_plugins/basic_launcher.py`\r\n 1. Run `python my_app.py`\r\n 1. It still works as expected\r\n\r\n## Expected Behavior\r\n\r\nAfter deleting `BasicLauncher`, nothing should work anymore.\r\n\r\n## System information\r\n- **Hydra Version** :  latest `main`: 9759f87\r\n- **Python version** : Python 3.7.12 from Homebrew\r\n- **Virtual environment type and version** : `python -m venv`\r\n- **Operating system** : macOS 10.15.7", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1908/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1897", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1897/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1897/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1897/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1897", "id": 1059384799, "node_id": "I_kwDOC2wWEs4_JO3f", "number": 1897, "title": "[Bug?] multirun does not work with hydra.verbose=True", "user": {"login": "BenFischer-ML", "id": 49691199, "node_id": "MDQ6VXNlcjQ5NjkxMTk5", "avatar_url": "https://avatars.githubusercontent.com/u/49691199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BenFischer-ML", "html_url": "https://github.com/BenFischer-ML", "followers_url": "https://api.github.com/users/BenFischer-ML/followers", "following_url": "https://api.github.com/users/BenFischer-ML/following{/other_user}", "gists_url": "https://api.github.com/users/BenFischer-ML/gists{/gist_id}", "starred_url": "https://api.github.com/users/BenFischer-ML/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BenFischer-ML/subscriptions", "organizations_url": "https://api.github.com/users/BenFischer-ML/orgs", "repos_url": "https://api.github.com/users/BenFischer-ML/repos", "events_url": "https://api.github.com/users/BenFischer-ML/events{/privacy}", "received_events_url": "https://api.github.com/users/BenFischer-ML/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3689707703, "node_id": "LA_kwDOC2wWEs7b7Hi3", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/sweep", "name": "sweep", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11", "html_url": "https://github.com/facebookresearch/hydra/milestone/11", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11/labels", "id": 6445624, "node_id": "MDk6TWlsZXN0b25lNjQ0NTYyNA==", "number": 11, "title": "Hydra 1.2.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2021-02-17T21:35:22Z", "updated_at": "2022-05-18T14:42:50Z", "due_on": null, "closed_at": "2022-05-18T14:42:50Z"}, "comments": 1, "created_at": "2021-11-21T13:47:41Z", "updated_at": "2022-01-19T23:32:24Z", "closed_at": "2022-01-19T23:32:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n--multirun does not seem to work when using hydra.verbose=True\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nconfig.yaml:\r\n```\r\na: 1\r\n\r\nhydra:\r\n  verbose: True\r\n```\r\ntest.py\r\n```\r\nimport hydra\r\n\r\n\r\n@hydra.main(config_path=\".\", config_name=\"config.yaml\")\r\ndef main(config):\r\n    print(config)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\nrunning the command `python test.py -m a=1,2` fails\r\n\r\n** Stack trace/error message **\r\n```\r\nAmbiguous value for argument 'a=1,2'\r\n1. To use it as a list, use key=[value1,value2]\r\n2. To use it as string, quote the value: key=\\'value1,value2\\'\r\n3. To sweep over it, add --multirun to your command line\r\n\r\n```\r\n\r\n## Expected Behavior\r\nWhen removing hydra.verbose=True from config.yaml it works as expected:\r\n```\r\n[2021-11-21 14:45:38,189][HYDRA] Launching 2 jobs locally\r\n[2021-11-21 14:45:38,189][HYDRA]        #0 : a=1\r\n{'a': 1}\r\n[2021-11-21 14:45:38,285][HYDRA]        #1 : a=2\r\n{'a': 2}\r\n```\r\n\r\n## System information\r\n- **Hydra Version** : 1.1.1\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : \r\n- **Operating system** : Windows 10\r\n\r\n## Additional context\r\nNot sure if this is an intended behaviour?\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1897/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1897/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1882", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1882/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1882/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1882/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1882", "id": 1049599737, "node_id": "I_kwDOC2wWEs4-j575", "number": 1882, "title": "[Bug?] hydra.runtime.choices seems not to reflect current choice during multi-run", "user": {"login": "kanada0727", "id": 22956498, "node_id": "MDQ6VXNlcjIyOTU2NDk4", "avatar_url": "https://avatars.githubusercontent.com/u/22956498?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kanada0727", "html_url": "https://github.com/kanada0727", "followers_url": "https://api.github.com/users/kanada0727/followers", "following_url": "https://api.github.com/users/kanada0727/following{/other_user}", "gists_url": "https://api.github.com/users/kanada0727/gists{/gist_id}", "starred_url": "https://api.github.com/users/kanada0727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kanada0727/subscriptions", "organizations_url": "https://api.github.com/users/kanada0727/orgs", "repos_url": "https://api.github.com/users/kanada0727/repos", "events_url": "https://api.github.com/users/kanada0727/events{/privacy}", "received_events_url": "https://api.github.com/users/kanada0727/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 3689707703, "node_id": "LA_kwDOC2wWEs7b7Hi3", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/sweep", "name": "sweep", "color": "c2e0c6", "default": false, "description": ""}, {"id": 3979473416, "node_id": "LA_kwDOC2wWEs7tMfII", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/priority_medium", "name": "priority_medium", "color": "A320A6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11", "html_url": "https://github.com/facebookresearch/hydra/milestone/11", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11/labels", "id": 6445624, "node_id": "MDk6TWlsZXN0b25lNjQ0NTYyNA==", "number": 11, "title": "Hydra 1.2.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2021-02-17T21:35:22Z", "updated_at": "2022-05-18T14:42:50Z", "due_on": null, "closed_at": "2022-05-18T14:42:50Z"}, "comments": 1, "created_at": "2021-11-10T09:37:49Z", "updated_at": "2022-04-04T16:26:24Z", "closed_at": "2022-04-04T16:26:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nconfig value `${hydra:runtime.choices}` seems not to reflect current choice under multi-run settings.\r\n\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nFor simple reproduction, I prepared a set of files with the following directory structure.\r\n```\r\nsrc/\r\n\u251c\u2500\u2500 config\r\n\u2502   \u251c\u2500\u2500 config.yaml\r\n\u2502   \u2514\u2500\u2500 option\r\n\u2502       \u251c\u2500\u2500 option1.yaml\r\n\u2502       \u2514\u2500\u2500 option2.yaml\r\n\u2514\u2500\u2500 main.py\r\n```\r\n\r\nThe contents of the files are described below.\r\n* `src/config/config.yaml`\r\n```yaml\r\ndefaults:\r\n  - option: option1\r\n  - _self_\r\nselected_option: ${hydra:runtime.choices.option}\r\noverriden_values: ${hydra:overrides}\r\n```\r\n* `src/config/option/option1.yaml`\r\n```yaml\r\nvalue: value1\r\n```\r\n\r\n* `src/config/option/option2.yaml`\r\n```yaml\r\nvalue: value2\r\n```\r\n\r\n* `src/main.py`\r\n```python\r\nimport hydra\r\n\r\n@hydra.main(config_path=\"config\", config_name=\"config\")\r\ndef main(config):\r\n    print(f\"option name: {config.selected_option}.\")\r\n    print(f\"option value: {config.option.value}\")\r\n    print(f\"overriden values: {config.overriden_values}\")\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n\r\n```\r\n\r\n\r\n** Stack trace/error message **\r\nI ran the following multi-run script and got the following logs.\r\n```\r\npython src/main.py -m option=option2,option1\r\n[2021-11-10 09:04:48,546][HYDRA] Launching 2 jobs locally\r\n[2021-11-10 09:04:48,546][HYDRA]        #0 : option=option2\r\noption name: option1.\r\noption value: value2\r\noverriden values: {'hydra': [], 'task': ['option=option2']}\r\n[2021-11-10 09:04:48,605][HYDRA]        #1 : option=option1\r\noption name: option1.\r\noption value: value1\r\noverriden values: {'hydra': [], 'task': ['option=option1']}\r\n```\r\nI expect the value of the config name (`config.selected_options`, retrieved by resolver `${hydra:runtime.choices.option}`) to change with respect to overridden `option` value, as well as `config.overridden_values` does. \r\nBut this value seems not to be changed.\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n```\r\npython src/main.py -m option=option2,option1\r\n[2021-11-10 09:04:48,546][HYDRA] Launching 2 jobs locally\r\n[2021-11-10 09:04:48,546][HYDRA]        #0 : option=option2\r\noption name: option2.  ## <-- this value is expected to be changed.\r\noption value: value2\r\noverriden values: {'hydra': [], 'task': ['option=option2']}\r\n[2021-11-10 09:04:48,605][HYDRA]        #1 : option=option1\r\noption name: option1.\r\noption value: value1\r\noverriden values: {'hydra': [], 'task': ['option=option1']}\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** : 3.8.10\r\n- **Virtual environment type and version** :  pipenv, version 2020.11.15\r\n- **Operating system** : Ubuntu 20.04.2 LTS\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1882/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1881", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1881/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1881/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1881/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1881", "id": 1047604548, "node_id": "I_kwDOC2wWEs4-cS1E", "number": 1881, "title": "[Bug] Override MISSING value in child config", "user": {"login": "mayeroa", "id": 23169699, "node_id": "MDQ6VXNlcjIzMTY5Njk5", "avatar_url": "https://avatars.githubusercontent.com/u/23169699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mayeroa", "html_url": "https://github.com/mayeroa", "followers_url": "https://api.github.com/users/mayeroa/followers", "following_url": "https://api.github.com/users/mayeroa/following{/other_user}", "gists_url": "https://api.github.com/users/mayeroa/gists{/gist_id}", "starred_url": "https://api.github.com/users/mayeroa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mayeroa/subscriptions", "organizations_url": "https://api.github.com/users/mayeroa/orgs", "repos_url": "https://api.github.com/users/mayeroa/repos", "events_url": "https://api.github.com/users/mayeroa/events{/privacy}", "received_events_url": "https://api.github.com/users/mayeroa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-08T15:43:28Z", "updated_at": "2021-11-09T08:17:17Z", "closed_at": "2021-11-08T19:18:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nHi!\r\n\r\nI suspect a bug when I want to create a child structured config (from a parent) and override MISSING values with default containers such as lists or dicts. Maybe the behavior is intended, do not hesitate to confirm. :) \r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```python\r\nfrom dataclasses import dataclass, field\r\nfrom typing import Any, Dict, List\r\n\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom omegaconf import MISSING\r\n\r\n\r\n@dataclass\r\nclass ParentConfig:\r\n    model_depth: int = MISSING\r\n    model_list: List[int] = field(default_factory=lambda: [5, 6])\r\n    model_list_2: List[int] = MISSING\r\n    model_dict: Dict[str, Any] = MISSING\r\n\r\n\r\n@dataclass\r\nclass ChildConfig(ParentConfig):\r\n    model_depth: int = 5\r\n    model_list_2: List[int] = field(default_factory=lambda: [1, 2, 3])\r\n    model_dict: Dict[str, Any] = field(default_factory=lambda: {'a': 5, 'b': 6})\r\n\r\n\r\nConfigStore.instance().store(name='config', node=ChildConfig)\r\n\r\n\r\n@hydra.main(config_path=None, config_name='config')\r\ndef main(cfg) -> None:\r\n    print(cfg)\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\nThat code produces the following config:\r\n\r\n```shell\r\n{'model_depth': 5, 'model_list': [5, 6], 'model_list_2': '???', 'model_dict': '???'}\r\n```\r\n\r\nAs we can see, the `model_list_2` and `model_dict` are not properly overridden (`model_depth` is a contrario properly set to `5`) since they remain `MISSING`, even if we use the `ChildConfig` as our primary config.\r\n\r\nBut if I give to the config store an instantiated config (instead of the class), it works as expected.\r\nMeaning replacing that line:\r\n\r\n```python\r\nConfigStore.instance().store(name='config', node=ChildConfig)\r\n```\r\n\r\ninto that line:\r\n\r\n```python\r\nConfigStore.instance().store(name='config', node=ChildConfig())\r\n```\r\n\r\nproduces:\r\n\r\n```shell\r\n{'model_depth': 5, 'model_list': [5, 6], 'model_list_2': [1, 2, 3], 'model_dict': {'a': 5, 'b': 6}}\r\n```\r\n\r\nAny idea?\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nI expect that passing either the class or an instance of the primary config should properly set the default values.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** : 3.8.11\r\n- **Virtual environment type and version** : MiniConda\r\n- **Operating system** : Linux Mint\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1881/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1858", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1858/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1858/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1858/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1858", "id": 1031332135, "node_id": "I_kwDOC2wWEs49eOEn", "number": 1858, "title": "[Bug] Wrong error on CLI when overriding some mandatory config group in defaults list", "user": {"login": "FrouxBY", "id": 23535665, "node_id": "MDQ6VXNlcjIzNTM1NjY1", "avatar_url": "https://avatars.githubusercontent.com/u/23535665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FrouxBY", "html_url": "https://github.com/FrouxBY", "followers_url": "https://api.github.com/users/FrouxBY/followers", "following_url": "https://api.github.com/users/FrouxBY/following{/other_user}", "gists_url": "https://api.github.com/users/FrouxBY/gists{/gist_id}", "starred_url": "https://api.github.com/users/FrouxBY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FrouxBY/subscriptions", "organizations_url": "https://api.github.com/users/FrouxBY/orgs", "repos_url": "https://api.github.com/users/FrouxBY/repos", "events_url": "https://api.github.com/users/FrouxBY/events{/privacy}", "received_events_url": "https://api.github.com/users/FrouxBY/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-20T12:09:18Z", "updated_at": "2021-10-20T21:22:51Z", "closed_at": "2021-10-20T21:22:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI set a config as mandatory in a default list, with relocation of the config group\r\nHowever the CLI error does not match this relocation:\r\n\r\nDirectories\r\n```bash\r\n\u251c\u2500\u2500 configs\r\n\u2502    \u251c\u2500\u2500 module\r\n\u2502    \u2502   \u2514\u2500\u2500 model\r\n\u2502    \u2502        \u251c\u2500\u2500 model_1.yaml\r\n\u2502    \u2502        \u2514\u2500\u2500 model_2.yaml\r\n\u2502    \u251c\u2500\u2500 predictor\r\n\u2502    \u2502   \u251c\u2500\u2500 pred_1.yaml\r\n\u2502    \u2502   \u2514\u2500\u2500 pred_2.yaml\r\n\u2502    \u2514\u2500\u2500 default_preds.yaml\r\n\u2514\u2500\u2500 my_app.py\r\n```\r\n\r\ndefault_preds.yaml\r\n```yaml\r\ndefaults:\r\n    - predictor: pred_1\r\n```\r\n\r\npredictor/pred_1.yaml\r\n\r\n```yaml\r\n_target_: src.predictor.Pred1\r\n\r\ndefaults:\r\n  - _self_\r\n  - /module/model@model: ???\r\n```\r\n\r\nif I run `python my_apps.py ` I get the following: \r\n\r\n```\r\nYou must specify 'module/model', e.g, module/model=<OPTION>\r\nAvailable options:\r\n        model_1\r\n        model_2\r\n```\r\n\r\nhowever `python my_apps.py module/model=model_1` give the same error, \r\n\r\nIndeed the correct command is:\r\n`python my_apps.py module/model@predictor.model=model_1` \r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nThe warning/error message should be the following\r\n```\r\nYou must specify 'predictor.model', e.g, module/model@predictor.model=<OPTION>\r\nAvailable options:\r\n        model_1\r\n        model_2\r\n```\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** :  3.9.2\r\n- **Operating system** :  Windows\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1858/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1854", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1854/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1854/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1854/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1854", "id": 1026269936, "node_id": "I_kwDOC2wWEs49K6Lw", "number": 1854, "title": "Plugin tests break on python 3.10 because of importlib and pytest assertion rewriting", "user": {"login": "martenlienen", "id": 339165, "node_id": "MDQ6VXNlcjMzOTE2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/339165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martenlienen", "html_url": "https://github.com/martenlienen", "followers_url": "https://api.github.com/users/martenlienen/followers", "following_url": "https://api.github.com/users/martenlienen/following{/other_user}", "gists_url": "https://api.github.com/users/martenlienen/gists{/gist_id}", "starred_url": "https://api.github.com/users/martenlienen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martenlienen/subscriptions", "organizations_url": "https://api.github.com/users/martenlienen/orgs", "repos_url": "https://api.github.com/users/martenlienen/repos", "events_url": "https://api.github.com/users/martenlienen/events{/privacy}", "received_events_url": "https://api.github.com/users/martenlienen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-10-14T11:13:57Z", "updated_at": "2022-05-08T05:27:42Z", "closed_at": "2022-05-08T05:27:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\npytest's assertion rewriting replaces the loader in a module's `__spec__` for modules with rewriting enabled. This loader does not implement `get_resource_reader` which `importlib.resources.is_resource` uses internally. For some reason, `hydra.test_utils` gets registered for assertion rewriting which means that `hydra.test_utils.configs` is not recognized as a resource and cannot be loaded as a config source by hydra.\r\n\r\nThe tests can be made to pass by disabling assertion rewriting with `pytest --assert=plain` or putting it in `pyproject.toml`.\r\n```toml\r\n[tool.pytest.ini_options]\r\naddopts = \"--assert=plain\"\r\n```\r\n\r\n## To reproduce\r\n\r\nThis can reproduced in the example sweeper plugin.\r\n```sh\r\n$ cd examples/plugins/example_sweeper_plugin\r\n$ pip install -e .\r\n$ pytest\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n# ...\r\n>       raise MissingConfigException(\r\n            missing_cfg_file=config_name, message=add_search_path()\r\n        )\r\nE       hydra.errors.MissingConfigException: Primary config module 'hydra.test_utils.configs' not found.\r\nE       Check that it's correct and contains an __init__.py file\r\n\r\n~/.pyenv/versions/3.10.0/envs/hydra/lib/python3.10/site-packages/hydra/_internal/config_loader_impl.py:103: MissingConfigException\r\n# ....\r\n```\r\n\r\n## Expected Behavior\r\n\r\nThe tests should succeed.\r\n\r\n## System information\r\n\r\n- **Hydra Version** :  master\r\n- **Python version** : 3.10\r\n- **Virtual environment type and version** : none\r\n- **Operating system** : Ubuntu 21.04", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1854/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1854/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1853", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1853/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1853/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1853/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1853", "id": 1026195599, "node_id": "I_kwDOC2wWEs49KoCP", "number": 1853, "title": "Hydra Ax plugin hangs forever [Bug]", "user": {"login": "kikohs", "id": 1793640, "node_id": "MDQ6VXNlcjE3OTM2NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1793640?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kikohs", "html_url": "https://github.com/kikohs", "followers_url": "https://api.github.com/users/kikohs/followers", "following_url": "https://api.github.com/users/kikohs/following{/other_user}", "gists_url": "https://api.github.com/users/kikohs/gists{/gist_id}", "starred_url": "https://api.github.com/users/kikohs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kikohs/subscriptions", "organizations_url": "https://api.github.com/users/kikohs/orgs", "repos_url": "https://api.github.com/users/kikohs/repos", "events_url": "https://api.github.com/users/kikohs/events{/privacy}", "received_events_url": "https://api.github.com/users/kikohs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-10-14T09:52:15Z", "updated_at": "2022-06-10T21:55:04Z", "closed_at": "2022-06-10T21:55:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\nI'm trying to use the Ax plugin with the default Banana function example.\r\n\r\nHere is my conf.yaml\r\n\r\n```\r\ndefaults:\r\n  - override hydra/sweeper: ax \r\nbanana:\r\n  x: ???\r\n  y: ???\r\n\r\nhydra:\r\n  sweeper:\r\n    _target_: hydra_plugins.hydra_ax_sweeper.ax_sweeper.AxSweeper\r\n    max_batch_size: null\r\n    ax_config:\r\n      max_trials: 20\r\n      early_stop:\r\n        minimize: true\r\n        max_epochs_without_improvement: 2\r\n        epsilon: 1.0e-02\r\n      experiment:\r\n        name: banana\r\n        objective_name: objective\r\n        minimize: true\r\n        parameter_constraints: null\r\n        outcome_constraints: null\r\n        status_quo: null\r\n      client:\r\n        verbose_logging: false\r\n        random_seed: null\r\n      is_noisy: true\r\n      params:\r\n        banana.x:\r\n          type: range\r\n          bounds: [-3, 3]\r\n\r\n        banana.y:\r\n          type: range\r\n          bounds: [-2, 2]\r\n```\r\n\r\nHydra hangs after finding the *New best value*.\r\n\r\nI tried with Optuna instead and it finishes normally.\r\n\r\n\r\nSee console output:\r\n\r\n```\r\n~/work/test_slurm \u00bb python my_app.py -m                                                        1 \u21b5 benzi@izar\r\n[2021-10-14 11:50:51,227][HYDRA] AxSweeper is optimizing the following parameters: \r\nbanana.x: range=[-3, 3]\r\nbanana.y: range=[-2, 2]\r\n[INFO 10-14 11:50:51] ax.service.utils.instantiation: Inferred value type of ParameterType.INT for parameter banana.x. If that is not the expected value type, you can explicity specify 'value_type' ('int', 'float', 'bool' or 'str') in parameter dict.\r\n[INFO 10-14 11:50:51] ax.service.utils.instantiation: Inferred value type of ParameterType.INT for parameter banana.y. If that is not the expected value type, you can explicity specify 'value_type' ('int', 'float', 'bool' or 'str') in parameter dict.\r\n[INFO 10-14 11:50:51] ax.modelbridge.dispatch_utils: Using Bayesian optimization since there are more ordered parameters than there are categories for the unordered categorical parameters.\r\n[INFO 10-14 11:50:51] ax.modelbridge.dispatch_utils: Using Bayesian Optimization generation strategy: GenerationStrategy(name='Sobol+GPEI', steps=[Sobol for 5 trials, GPEI for subsequent trials]). Iterations after 5 will take longer to generate due to  model-fitting.\r\n[2021-10-14 11:50:53,000][HYDRA] AxSweeper is launching 5 jobs\r\n[2021-10-14 11:50:53,941][HYDRA] Launching 5 jobs locally\r\n[2021-10-14 11:50:53,941][HYDRA]        #0 : banana.x=-2 banana.y=1\r\n[2021-10-14 11:50:54,097][__main__][INFO] - Banana_Function(x=-2, y=1)=909\r\n[2021-10-14 11:50:54,099][HYDRA]        #1 : banana.x=-3 banana.y=1\r\n[2021-10-14 11:50:54,254][__main__][INFO] - Banana_Function(x=-3, y=1)=6416\r\n[2021-10-14 11:50:54,255][HYDRA]        #2 : banana.x=0 banana.y=2\r\n[2021-10-14 11:50:54,411][__main__][INFO] - Banana_Function(x=0, y=2)=401\r\n[2021-10-14 11:50:54,412][HYDRA]        #3 : banana.x=0 banana.y=-2\r\n[2021-10-14 11:50:54,574][__main__][INFO] - Banana_Function(x=0, y=-2)=401\r\n[2021-10-14 11:50:54,575][HYDRA]        #4 : banana.x=0 banana.y=0\r\n[2021-10-14 11:50:54,731][__main__][INFO] - Banana_Function(x=0, y=0)=1\r\n[INFO 10-14 11:50:54] ax.service.utils.best_point: Could not use model predictions to identify best point, will use raw objective values.\r\n[2021-10-14 11:50:54,799][HYDRA] New best value: 1.0, best parameters: {'banana.x': 0, 'banana.y': 0}\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1853/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1843", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1843/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1843/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1843/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1843", "id": 1015284674, "node_id": "I_kwDOC2wWEs48hAPC", "number": 1843, "title": "[Bug] LexerNoViableAltException: word.p=a|b (error comes from the vertical bar)", "user": {"login": "zhaoyanpeng", "id": 6103009, "node_id": "MDQ6VXNlcjYxMDMwMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/6103009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhaoyanpeng", "html_url": "https://github.com/zhaoyanpeng", "followers_url": "https://api.github.com/users/zhaoyanpeng/followers", "following_url": "https://api.github.com/users/zhaoyanpeng/following{/other_user}", "gists_url": "https://api.github.com/users/zhaoyanpeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhaoyanpeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhaoyanpeng/subscriptions", "organizations_url": "https://api.github.com/users/zhaoyanpeng/orgs", "repos_url": "https://api.github.com/users/zhaoyanpeng/repos", "events_url": "https://api.github.com/users/zhaoyanpeng/events{/privacy}", "received_events_url": "https://api.github.com/users/zhaoyanpeng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-04T14:54:36Z", "updated_at": "2021-10-04T20:53:10Z", "closed_at": "2021-10-04T20:53:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi there,\r\n\r\nlooks hydra does not support escaping a vertical bar? I checked the doc and it says\r\n\r\n> ... by escaping them with a `\\`. These characters are: `\\()[]{}:=, \\t` (the last two ones being the whitespace and tab characters).\r\n\r\nany reason for not escaping vertical bar? one of my running parameters is a regex expression, which contains a vertical bar, but I cannot send it in from the command line, e.g, `python main.py word.p=a\\|b`\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1843/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1843/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1836", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1836/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1836/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1836/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1836", "id": 1007383662, "node_id": "I_kwDOC2wWEs48C3Ru", "number": 1836, "title": "[Bug] Allow additional arguments to structured configs using yaml config files", "user": {"login": "ExpectationMax", "id": 1303655, "node_id": "MDQ6VXNlcjEzMDM2NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1303655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ExpectationMax", "html_url": "https://github.com/ExpectationMax", "followers_url": "https://api.github.com/users/ExpectationMax/followers", "following_url": "https://api.github.com/users/ExpectationMax/following{/other_user}", "gists_url": "https://api.github.com/users/ExpectationMax/gists{/gist_id}", "starred_url": "https://api.github.com/users/ExpectationMax/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ExpectationMax/subscriptions", "organizations_url": "https://api.github.com/users/ExpectationMax/orgs", "repos_url": "https://api.github.com/users/ExpectationMax/repos", "events_url": "https://api.github.com/users/ExpectationMax/events{/privacy}", "received_events_url": "https://api.github.com/users/ExpectationMax/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-09-26T12:53:32Z", "updated_at": "2021-09-27T22:16:56Z", "closed_at": "2021-09-27T21:18:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nIt is not possible to provide additional arguments to a structured config from a yaml config file.  While this is easily possible using the `+` command line syntax, I cannot find a way to implement similar functionality using a yaml config file.\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [X] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n**minimal_example.py**:\r\n```python\r\nfrom dataclasses import dataclass\r\nimport hydra\r\n\r\nclass MyClass:\r\n    def __init__(self, **kwargs):\r\n        self.args = kwargs\r\n\r\n    def __str__(self):\r\n        return str(self.args)\r\n\r\n@dataclass\r\nclass MyClassConfig:\r\n    _target_: str = \"__main__.MyClass\"\r\n\r\n@dataclass\r\nclass MainConfig:\r\n    the_class: MyClassConfig = MyClassConfig()\r\n\r\ncs = hydra.core.config_store.ConfigStore.instance()\r\ncs.store(name=\"my_class\", node=MyClassConfig)\r\ncs.store(name=\"main_config_base\", node=MainConfig)\r\n\r\n@hydra.main(config_name=\"main_config_base\", config_path=None)\r\ndef main(cfg: MainConfig):\r\n    the_class = hydra.utils.instantiate(cfg.the_class)\r\n    print(the_class)\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n**minimal_conf.yaml**:\r\n```yaml\r\ndefaults:\r\n  - main_config_base\r\n  - _self_\r\n\r\nthe_class:\r\n  test_arg: 1\r\n```\r\n\r\n**Run:**\r\n```bash\r\n# Works perfectly\r\npython minimal_example.py +the_class.test_arg=1\r\n{'test_arg': 1}\r\n\r\n# Does not work\r\npython minimal_example.py --config-path . --config-name minimal_conf\r\nKey 'test_arg' not in 'MyClassConfig'                                                                                                                                     \r\n    full_key: the_class.test_arg                                                                                                                                              reference_type=BaseClassConfig                                                                                                                                        \r\n    object_type=MyClassConfig    \r\n```\r\n\r\n## Expected Behavior\r\nThere should be a way to implement the same behavior of the cli using a config file. I have until now not found out how this could be implemented. Further, as soon as a static configuration is used it is essentially impossible to override `the_class` using yaml config files.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** :  3.9.7 \r\n- **Virtual environment type and version** : venv\r\n- **Operating system** : macOS BigSur 11.5.2\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1834", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1834/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1834/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1834/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1834", "id": 1006802348, "node_id": "I_kwDOC2wWEs48ApWs", "number": 1834, "title": "`Dict[not-str, ...]` crashes when looking for key `__HYDRA_REMOVE_TOP_LEVEL_DEFAULTS__`", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-24T20:26:44Z", "updated_at": "2021-10-21T14:09:47Z", "closed_at": "2021-10-21T14:09:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThere is a bug in the logic to remove top-level defaults lists from structured configs.\r\nSpecifically, if a `DictConfig` instance has `key_type` that is typed as something like `int` or as a subclass of `Enum`, then the defaults list logic raises a `ConfigCompositionException` when `getattr(cfg, \"__HYDRA_REMOVE_TOP_LEVEL_DEFAULTS__\")` is called.\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nHere is `app.py`:\r\n```python\r\nfrom enum import Enum\r\nfrom dataclasses import dataclass, field\r\nfrom typing import Dict\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\n\r\ncs = ConfigStore.instance()\r\n\r\nclass Category(Enum):\r\n    X = 0\r\n    Y = 1\r\n    Z = 2\r\n\r\n@dataclass\r\nclass Conf:\r\n    enum_dict: Dict[Category, str] = field(default_factory=dict)\r\n    int_dict: Dict[int, str] = field(default_factory=dict)\r\n    str_dict: Dict[str, str] = field(default_factory=dict)\r\n\r\ncs.store(name=\"conf\", node=Conf)\r\n\r\n@hydra.main(config_path=None, config_name=\"conf\")\r\ndef app(cfg):\r\n    assert cfg == {\"enum_dict\": {}, \"int_dict\": {}, \"str_dict\": {}}\r\n\r\nif __name__ == \"__main__\":\r\n    app()\r\n```\r\nHere is the output from running `app.py`:\r\n```text\r\n$ HYDRA_FULL_ERROR=1 python app.py\r\nTraceback (most recent call last):\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 140, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 248, in _load_configuration_impl\r\n    cfg = self._compose_config_from_defaults_list(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 537, in _compose_config_from_defaults_list\r\n    strip_defaults(cfg)\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 535, in strip_defaults\r\n    strip_defaults(value)\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 530, in strip_defaults\r\n    if getattr(cfg, \"__HYDRA_REMOVE_TOP_LEVEL_DEFAULTS__\", False):\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 357, in __getattr__\r\n    self._format_and_raise(key=key, value=None, cause=e)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/base.py\", line 190, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/_utils.py\", line 821, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/_utils.py\", line 719, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set end OC_CAUSE=1 for full backtrace\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 351, in __getattr__\r\n    return self._get_impl(key=key, default_value=_DEFAULT_MARKER_)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 438, in _get_impl\r\n    node = self._get_node(key=key, throw_on_missing_key=True)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 457, in _get_node\r\n    key = self._validate_and_normalize_key(key)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 275, in _validate_and_normalize_key\r\n    return self._s_validate_and_normalize_key(self._metadata.key_type, key)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 300, in _s_validate_and_normalize_key\r\n    raise KeyValidationError(\r\nomegaconf.errors.KeyValidationError: Key '__HYDRA_REMOVE_TOP_LEVEL_DEFAULTS__' is incompatible with the enum type 'Category', valid: [X, Y, Z]\r\n    full_key: enum_dict.__HYDRA_REMOVE_TOP_LEVEL_DEFAULTS__\r\n    reference_type=Dict[Category, str]\r\n    object_type=dict\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/jasha10/hydra_tmp/D30996424/app.py\", line 27, in <module>\r\n    app()\r\n  File \"/home/jasha10/hydra.git/hydra/main.py\", line 48, in decorated_main\r\n    _run_hydra(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/utils.py\", line 377, in _run_hydra\r\n    run_and_report(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/utils.py\", line 214, in run_and_report\r\n    raise ex\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/utils.py\", line 211, in run_and_report\r\n    return func()\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/utils.py\", line 378, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/hydra.py\", line 88, in run\r\n    cfg = self.compose_config(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/hydra.py\", line 559, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 147, in load_configuration\r\n    raise ConfigCompositionException().with_traceback(sys.exc_info()[2]) from e\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 140, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 248, in _load_configuration_impl\r\n    cfg = self._compose_config_from_defaults_list(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 537, in _compose_config_from_defaults_list\r\n    strip_defaults(cfg)\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 535, in strip_defaults\r\n    strip_defaults(value)\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 530, in strip_defaults\r\n    if getattr(cfg, \"__HYDRA_REMOVE_TOP_LEVEL_DEFAULTS__\", False):\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 357, in __getattr__\r\n    self._format_and_raise(key=key, value=None, cause=e)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/base.py\", line 190, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/_utils.py\", line 821, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/_utils.py\", line 719, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set end OC_CAUSE=1 for full backtrace\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 351, in __getattr__\r\n    return self._get_impl(key=key, default_value=_DEFAULT_MARKER_)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 438, in _get_impl\r\n    node = self._get_node(key=key, throw_on_missing_key=True)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 457, in _get_node\r\n    key = self._validate_and_normalize_key(key)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 275, in _validate_and_normalize_key\r\n    return self._s_validate_and_normalize_key(self._metadata.key_type, key)\r\n  File \"/home/jasha10/miniconda3/envs/hydra/lib/python3.9/site-packages/omegaconf/dictconfig.py\", line 300, in _s_validate_and_normalize_key\r\n    raise KeyValidationError(\r\nhydra.errors.ConfigCompositionException\r\n```\r\n\r\n## Expected Behavior\r\nThe above repro should not crash, and the assertion in they python code should pass.\r\n\r\n## System information\r\n- **Hydra Version** :  `main` branch\r\n- **Python version** : 3.9\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1834/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1834/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1828", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1828/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1828/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1828/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1828", "id": 999035557, "node_id": "I_kwDOC2wWEs47jBKl", "number": 1828, "title": "[Bug] RecursionError when input config loads itself via defaults list", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-09-17T07:26:15Z", "updated_at": "2021-09-17T21:52:50Z", "closed_at": "2021-09-17T20:24:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\nI've been able to trigger a RecursionError by using the defaults list in `conf.yaml` to load `conf`.\r\n```yaml\r\n# conf.yaml\r\ndefaults:\r\n  - conf\r\n```\r\n```python\r\n# repro.py\r\nimport hydra\r\n\r\n@hydra.main(config_path=\".\", config_name=\"conf\")\r\ndef main(cfg):\r\n    pass\r\n\r\nmain()\r\n```\r\n```text\r\n$ python repro.py\r\nTraceback (most recent call last):\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/utils.py\", line 211, in run_and_report\r\n    return func()\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/utils.py\", line 378, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/hydra.py\", line 88, in run\r\n    cfg = self.compose_config(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/hydra.py\", line 559, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 141, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/config_loader_impl.py\", line 239, in _load_configuration_impl\r\n    defaults_list = create_defaults_list(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/defaults_list.py\", line 751, in create_defaults_list\r\n    defaults, tree = _create_defaults_list(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/defaults_list.py\", line 721, in _create_defaults_list\r\n    defaults_tree = _create_defaults_tree(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/defaults_list.py\", line 356, in _create_defaults_tree\r\n    ret = _create_defaults_tree_impl(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/defaults_list.py\", line 458, in _create_defaults_tree_impl\r\n    return _expand_virtual_root(repo, root, overrides, skip_missing)\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/defaults_list.py\", line 280, in _expand_virtual_root\r\n    subtree = _create_defaults_tree_impl(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/defaults_list.py\", line 578, in _create_defaults_tree_impl\r\n    add_child(children, new_root)\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/defaults_list.py\", line 521, in add_child\r\n    subtree_ = _create_defaults_tree_impl(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/defaults_list.py\", line 578, in _create_defaults_tree_impl\r\n    add_child(children, new_root)\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/defaults_list.py\", line 521, in add_child\r\n    subtree_ = _create_defaults_tree_impl(\r\n  File \"/home/jasha10/hydra.git/hydra/_internal/defaults_list.py\", line 578, in _create_defaults_tree_impl\r\n    add_child(children, new_root)\r\n...\r\nRecursionError: maximum recursion depth exceeded in comparison\r\n```\r\n\r\n## Expected Behavior:\r\nAn error message about not including `conf` in the defaults list of `conf`.\r\n\r\n## System information\r\n- **Hydra Version** :  1.2.0dev1\r\n- **Python version** : 3.9.6", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1828/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1828/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1819", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1819/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1819/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1819/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1819", "id": 992201672, "node_id": "MDU6SXNzdWU5OTIyMDE2NzI=", "number": 1819, "title": "[Bug] ValueError: Config must be a Dictionary, got ConfigResult", "user": {"login": "robogast", "id": 5969044, "node_id": "MDQ6VXNlcjU5NjkwNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5969044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robogast", "html_url": "https://github.com/robogast", "followers_url": "https://api.github.com/users/robogast/followers", "following_url": "https://api.github.com/users/robogast/following{/other_user}", "gists_url": "https://api.github.com/users/robogast/gists{/gist_id}", "starred_url": "https://api.github.com/users/robogast/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robogast/subscriptions", "organizations_url": "https://api.github.com/users/robogast/orgs", "repos_url": "https://api.github.com/users/robogast/repos", "events_url": "https://api.github.com/users/robogast/events{/privacy}", "received_events_url": "https://api.github.com/users/robogast/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-09-09T13:06:18Z", "updated_at": "2021-09-09T20:32:16Z", "closed_at": "2021-09-09T20:32:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI'm trying to extend the `submitit` plugin, which has a property called `setup`.  \r\nFollowing this, I've created the following folder structure and config files (simplified for reproducibility purposes)\r\n```\r\nconf\r\n|-hydra\r\n  |-launcher\r\n    |-custom_submitit.yaml\r\n    |-setup\r\n      |-custom_setup.yaml \r\n```\r\n`custom_submitit.yaml`:\r\n```yaml\r\ndefaults:\r\n  - submitit_slurm\r\n  - setup: custom_setup\r\n```\r\n`custom_setup.yaml`\r\n```\r\n- foo\r\n- bar\r\n```\r\nRunning `python <script.py> --cfg hydra` I would expect the resulting config to have:\r\n```\r\nhydra:\r\n  launcher:\r\n    <submitit_defaults>\r\n    setup:\r\n      - foo\r\n      - bar\r\n```\r\n\r\nHowever, I get:\r\n```python\r\nValueError: Config hydra/launcher/setup/custom_setup must be a Dictionary, got ConfigResult\r\n```\r\n## Circumventing the error\r\nI can circumvent the error by changing the two configs as follows:\r\n`custom_submitit.yaml`:\r\n```yaml\r\ndefaults:\r\n  - submitit_slurm\r\n  - setup@_here_: custom_setup\r\n```\r\n`custom_setup.yaml`:\r\n```yaml\r\nsetup:\r\n  - foo\r\n  - bar\r\n```\r\n\r\n## Considerations\r\nCircumventing the error, from the config level, it now seems that `custom_setup` is an element of the `hydra/launcher`group, instead of `hydra/launcher/setup` group, which is not so nice.\r\n\r\nTo me this seems like an error on the `YAML` parse level, configs should be able to have only a root level list as content.\r\n\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** :  3.8\r\n- **Virtual environment type and version** :  conda/pip\r\n- **Operating system** : Unix\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1819/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1819/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1811", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1811/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1811/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1811/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1811", "id": 988201327, "node_id": "MDU6SXNzdWU5ODgyMDEzMjc=", "number": 1811, "title": "[Bug] delete field when using optuna sweeper would throw error", "user": {"login": "chris-tkinter", "id": 86935669, "node_id": "MDQ6VXNlcjg2OTM1NjY5", "avatar_url": "https://avatars.githubusercontent.com/u/86935669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-tkinter", "html_url": "https://github.com/chris-tkinter", "followers_url": "https://api.github.com/users/chris-tkinter/followers", "following_url": "https://api.github.com/users/chris-tkinter/following{/other_user}", "gists_url": "https://api.github.com/users/chris-tkinter/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-tkinter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-tkinter/subscriptions", "organizations_url": "https://api.github.com/users/chris-tkinter/orgs", "repos_url": "https://api.github.com/users/chris-tkinter/repos", "events_url": "https://api.github.com/users/chris-tkinter/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-tkinter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-09-04T03:46:47Z", "updated_at": "2021-09-21T20:22:30Z", "closed_at": "2021-09-21T20:22:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nI was using optuna sweeper but I noticed that if i delete a field by `~field` it would throw an error.\r\n\r\n## To reproduce\r\nLet's [start with this](https://github.com/facebookresearch/hydra/tree/main/examples/advanced/defaults_list_interpolation). Let's modify `conf/db/sqlite.yaml` to be this\r\n```yaml\r\nname: sqlite\r\n\r\nmodel:\r\n  name: boring\r\n```\r\nthen create a directory called `exp`, and create a file `exp/exp.yaml`\r\n```yaml\r\n# @package _global_\r\n\r\ndefaults:\r\n  - override /hydra/sweeper: optuna\r\n  - override /db: sqlite\r\n```\r\nNow run the command `python my_app.py -m +exp=exp ~db.model` it would have the error\r\n> Could not delete from config. The value of 'db.model' is {'name': 'boring'} and not None.\r\n\r\nHowever if I did `python my_app.py +exp=exp ~db.model` (not activating sweeper), then the code would run correctly, making the db to be sqlite (the default is mysql) and the `model.name` part deleted. \r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0.rc1\r\n- **Python version** : 3.7.10\r\n- **Operating system** : Ubuntu 18.04.2 LTS\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1811/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1803", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1803/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1803/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1803/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1803", "id": 982853794, "node_id": "MDU6SXNzdWU5ODI4NTM3OTQ=", "number": 1803, "title": "[Bug] CLI override interacts poorly with `@_here_` usage in defaults list", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-08-30T14:25:20Z", "updated_at": "2021-09-02T02:54:10Z", "closed_at": "2021-09-01T17:24:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\nWhen the defaults list contains `- group@_here_: choice`, overriding from the command line gives unexpected results.\r\n\r\n## To reproduce\r\n```yaml\r\n# conf/base.yaml\r\ndefaults:\r\n  - _self_\r\n  - env@_here_: env1\r\na: 1\r\nb: 2\r\n```\r\n```yaml\r\n# conf/env/env1.yaml\r\nc: 5\r\nd: 6\r\n```\r\n```yaml\r\n# conf/env/env2.yaml\r\nc: 7\r\nd: 8\r\n```\r\n```python\r\n# my_app.py\r\nimport hydra\r\n@hydra.main(config_path=\"conf\", config_name=\"base\")\r\ndef my_app(cfg):\r\n    print(cfg)\r\nmy_app()\r\n```\r\n\r\n** Summary of current CLI override behavior: **\r\n\r\n`python my_app.py`: works as expected\r\n`python my_app.py env@_global_=env2`: produces error when no error is expected\r\n`python my_app.py +env@_global_=env2`: the error message is not accurate\r\n`python my_app.py env=env2`: does not error, an error would be expected\r\n`python my_app.py +env=env2`: produces an error when no error is expected\r\n\r\n** detailed descriptions below: **\r\n\r\n#### `python my_app.py`\r\nworks as expected: produces output `{'a': 1, 'b': 2, 'c': 5, 'd': 6}`\r\n\r\n#### `python my_app.py env@_global_=env2`\r\ndoes not work as expected: \r\n```text\r\nCould not override 'env@_global_'.\r\nDid you mean to override env?\r\nTo append to your default list use +env@_global_=env2\r\n```\r\nThe expected behavior is to produce `{'a': 1, 'b': 2, 'c': 7, 'd': 8}`.\r\n\r\n#### `python my_app.py +env@_global_=env2`\r\nproduces this error: `Multiple values for env. To override a value use 'override env: env2'`\r\nThe error message should say something like `\"Multiple values for env@_global_.\"`\r\n\r\n#### `python my_app.py env=env2`:\r\nproduces `{'a': 1, 'b': 2, 'c': 7, 'd': 8}`.\r\nThe expected behavior would be to error.\r\n\r\n#### `python my_app.py +env=env2`\r\nProduces this error: `Multiple values for env. To override a value use 'override env: env2'`\r\nThe expected behavior is to produce `{'a': 1, 'b': 2, 'c': 5, 'd': 6, 'env': {'c': 7, 'd': 8}}`.\r\n\r\n## Additional context\r\nBased on a question here: https://stackoverflow.com/questions/68984309/overriding-the-package-specified-in-default-list-from-cli\r\n\r\nEdit:\r\nSome of the above behavior with `_global_` may be related to #1784.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1803/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1802", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1802/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1802/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1802/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1802", "id": 981688256, "node_id": "MDU6SXNzdWU5ODE2ODgyNTY=", "number": 1802, "title": "[Bug] Issue loading modules when joblib launcher is configured for multiple CPUs", "user": {"login": "harwiltz", "id": 56648659, "node_id": "MDQ6VXNlcjU2NjQ4NjU5", "avatar_url": "https://avatars.githubusercontent.com/u/56648659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harwiltz", "html_url": "https://github.com/harwiltz", "followers_url": "https://api.github.com/users/harwiltz/followers", "following_url": "https://api.github.com/users/harwiltz/following{/other_user}", "gists_url": "https://api.github.com/users/harwiltz/gists{/gist_id}", "starred_url": "https://api.github.com/users/harwiltz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harwiltz/subscriptions", "organizations_url": "https://api.github.com/users/harwiltz/orgs", "repos_url": "https://api.github.com/users/harwiltz/repos", "events_url": "https://api.github.com/users/harwiltz/events{/privacy}", "received_events_url": "https://api.github.com/users/harwiltz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-08-28T01:16:56Z", "updated_at": "2021-08-30T22:23:27Z", "closed_at": "2021-08-28T01:43:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nI've used the joblib launcher many times, and this is the first time of encountered an issue. I'll preface the rest of this by saying that when `hydra.launcher.n_jobs` is 1, when all else is equal, I experience no issues.\r\n\r\nI have a package, let's call it `silly_envs`, that contains some [OpenAI gym environments](https://github.com/openai/gym). The first line in my script is `import silly_envs`, and in `silly_envs/__init__.py` my gym environments are \"registered\". When I execute my script with multirun and more than one job, an exception is raised saying\r\n\r\n```\r\ngym.error.UnregisteredEnv: Error instantiating 'gym.envs.registration.make' : No registered env with id: SillyEnvironment-v0\r\n```\r\n\r\nThis implies that there must've been an issue importing `silly_envs`. Again, when I run the exact same code from the same context but with only one joblib job, I experience no issues.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nIn **`silly_envs/__init__.py`**:\r\n\r\n```python\r\nfrom gym.envs.registration import register\r\n\r\nregister(\r\n    id=\"SillyEnv-v0\",\r\n    entry_point=\"silly_envs.silly:SillyEnv\",\r\n    max_episode_steps=150\r\n)\r\n```\r\n\r\nIn **`silly_envs/silly.py`**:\r\n\r\n```python\r\nimport gym\r\nfrom gym.spaces import Discrete\r\n\r\nclass SillyEnv(gym.Env):\r\n    def __init__(self):\r\n        self.observation_space = Discrete(3)\r\n        self.action_space = Discrete(2)\r\n        self.state = 0\r\n\r\n    def reset(self):\r\n        self.state = 0\r\n        return self.state\r\n\r\n    def step(self, action):\r\n        self.state = (self.state + action) % self.observation_space.n\r\n        done = self.state == 1\r\n        return self.state, 1, done, {}\r\n\r\n    def render(self):\r\n        print(self.state)\r\n```\r\n\r\nIn **`experiment.py`**:\r\n\r\n```python\r\nimport silly_envs\r\nimport gym\r\nimport hydra\r\n\r\n@hydra.main(config_name=\"config\", config_path=\".\")\r\ndef main(cfg):\r\n    env = hydra.utils.instantiate(cfg.env)\r\n    for _ in range(cfg.sillyness):\r\n        print(env.action_space.n)\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nIn **`config.yaml`**:\r\n\r\n```yaml\r\nsillyness: 1\r\n\r\nenv:\r\n  _target_: gym.make\r\n  _args_:\r\n    - \"SillyEnv-v0\"\r\n\r\nhydra:\r\n  launcher:\r\n    n_jobs: 4\r\n\r\ndefaults:\r\n  - override hydra/launcher: joblib\r\n```\r\n\r\n**Steps**:\r\n\r\n1. Write a minimal `setup.py` or for `silly_envs`\r\n2. `(venv) $ pip install gym hydra-core hydra-joblib-launcher`\r\n3. `(venv) $ python setup.py install`\r\n4. `(venv) $ python experiment.py -m sillyness=1,2,3`: This will crash with the exception I wrote above (this is the bug)\r\n5. `(venv) $ python experiment.py -m sillyness=1,2,3 hydra.launcher.n_jobs=1`: This will run without errors.\r\n\r\n## System information\r\n- **Hydra Version** :  `1.1.1` (and `hydra-joblib-launcher` version `1.1.5`)\r\n- **Python version** : Tested with `3.8.x` and `3.9.6`\r\n- **Virtual environment type and version** : Virtualenv\r\n- **Operating system** : {Gentoo, Arch} GNU/Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1802/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1797", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1797/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1797/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1797/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1797", "id": 980156442, "node_id": "MDU6SXNzdWU5ODAxNTY0NDI=", "number": 1797, "title": "[Bug] hydra-optuna-sweeper 1.1.0 requires numpy<1.20.0", "user": {"login": "elisim", "id": 17675462, "node_id": "MDQ6VXNlcjE3Njc1NDYy", "avatar_url": "https://avatars.githubusercontent.com/u/17675462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elisim", "html_url": "https://github.com/elisim", "followers_url": "https://api.github.com/users/elisim/followers", "following_url": "https://api.github.com/users/elisim/following{/other_user}", "gists_url": "https://api.github.com/users/elisim/gists{/gist_id}", "starred_url": "https://api.github.com/users/elisim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elisim/subscriptions", "organizations_url": "https://api.github.com/users/elisim/orgs", "repos_url": "https://api.github.com/users/elisim/repos", "events_url": "https://api.github.com/users/elisim/events{/privacy}", "received_events_url": "https://api.github.com/users/elisim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2169700018, "node_id": "MDU6TGFiZWwyMTY5NzAwMDE4", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/maintenance", "name": "maintenance", "color": "f7d331", "default": false, "description": "Project maintenance"}, {"id": 2169716916, "node_id": "MDU6TGFiZWwyMTY5NzE2OTE2", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/plugin", "name": "plugin", "color": "e59e90", "default": false, "description": "Plugins realted issues"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-08-26T11:51:59Z", "updated_at": "2021-09-02T16:42:17Z", "closed_at": "2021-09-02T16:42:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nI used the guide from\r\nhttps://hydra.cc/docs/plugins/optuna_sweeper/\r\n\r\nAnd install hydra-optuna-sweeper:\r\n\r\n```bash \r\npip install hydra-optuna-sweeper --upgrade\r\n```\r\n\r\nBut it seems this plugin requires numpy<1.20.0:\r\n\r\n![image](https://user-images.githubusercontent.com/17675462/130957784-7f3502c0-7002-41fa-9c71-f54bc5604044.png)\r\n\r\n**Edit:**\r\n\r\nI searched for optuna's requirements, found this:\r\n\r\nhttps://github.com/optuna/optuna/blob/cbae80476c15b6d39e1d8851dc6a501c63c3ca92/setup.py#L35\r\n\r\nWhy hydra-optuna-sweeper need to use  numpy<1.20.0?\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1797/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1788", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1788/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1788/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1788/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1788", "id": 976690821, "node_id": "MDU6SXNzdWU5NzY2OTA4MjE=", "number": 1788, "title": "[Bug] `config_path` search path is relative to file path, not python working directory", "user": {"login": "SunQpark", "id": 31339583, "node_id": "MDQ6VXNlcjMxMzM5NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/31339583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SunQpark", "html_url": "https://github.com/SunQpark", "followers_url": "https://api.github.com/users/SunQpark/followers", "following_url": "https://api.github.com/users/SunQpark/following{/other_user}", "gists_url": "https://api.github.com/users/SunQpark/gists{/gist_id}", "starred_url": "https://api.github.com/users/SunQpark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SunQpark/subscriptions", "organizations_url": "https://api.github.com/users/SunQpark/orgs", "repos_url": "https://api.github.com/users/SunQpark/repos", "events_url": "https://api.github.com/users/SunQpark/events{/privacy}", "received_events_url": "https://api.github.com/users/SunQpark/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-08-23T06:47:37Z", "updated_at": "2021-08-23T20:55:52Z", "closed_at": "2021-08-23T18:31:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen I launch python script outside of the directory where script lies, it fails to locate config directory.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nProject directory looks like\r\n```\r\nhydra-reprod\r\n\u251c\u2500\u2500 conf\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 a.yaml\r\n\u2514\u2500\u2500 script\r\n    \u2514\u2500\u2500 reprod.py\r\n```\r\n`reprod.py` contains\r\n```python\r\nimport hydra\r\nfrom pathlib import Path\r\n\r\n\r\n@hydra.main(config_path='conf/', config_name='a.yaml')\r\ndef main(config):\r\n    print('hello')\r\n\r\nif __name__ == '__main__':\r\n    cwd = Path.cwd()\r\n    print(cwd)\r\n    print((cwd / 'conf').exists())\r\n\r\n    main()\r\n```\r\nand script is launched with `HYDRA_FULL_ERROR=1 python3 -m script.reprod`\r\n\r\n** Stack trace/error message **\r\n```\r\n/home/louis/projects/hydra-reprod\r\nTrue\r\nTraceback (most recent call last):\r\n  File \"script/reprod.py\", line 14, in <module>\r\n    main()\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/main.py\", line 48, in decorated_main\r\n    _run_hydra(\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 377, in _run_hydra\r\n    run_and_report(\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 214, in run_and_report\r\n    raise ex\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 211, in run_and_report\r\n    return func()\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 378, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 88, in run\r\n    cfg = self.compose_config(\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 559, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 141, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 227, in _load_configuration_impl\r\n    self.ensure_main_config_source_available()\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 129, in ensure_main_config_source_available\r\n    self._missing_config_error(\r\n  File \"/home/louis/anaconda3/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 103, in _missing_config_error\r\n    raise MissingConfigException(\r\nhydra.errors.MissingConfigException: Primary config directory not found.\r\nCheck that the config directory '/home/louis/projects/hydra-reprod/script/conf' exists and readable\r\n```\r\n\r\n## Expected Behavior\r\nI think relative path is used for `config_path` it should be relative to python working directory, not to the location of python script.\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.1\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : conda 4.10.0\r\n- **Operating system** : ubuntu\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1788/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1788/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1786", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1786/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1786/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1786/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1786", "id": 976431675, "node_id": "MDU6SXNzdWU5NzY0MzE2NzU=", "number": 1786, "title": "Cannot  access HydraConfig in sweep using Hydra resolver", "user": {"login": "cnut1648", "id": 37067883, "node_id": "MDQ6VXNlcjM3MDY3ODgz", "avatar_url": "https://avatars.githubusercontent.com/u/37067883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cnut1648", "html_url": "https://github.com/cnut1648", "followers_url": "https://api.github.com/users/cnut1648/followers", "following_url": "https://api.github.com/users/cnut1648/following{/other_user}", "gists_url": "https://api.github.com/users/cnut1648/gists{/gist_id}", "starred_url": "https://api.github.com/users/cnut1648/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cnut1648/subscriptions", "organizations_url": "https://api.github.com/users/cnut1648/orgs", "repos_url": "https://api.github.com/users/cnut1648/repos", "events_url": "https://api.github.com/users/cnut1648/events{/privacy}", "received_events_url": "https://api.github.com/users/cnut1648/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1620049642, "node_id": "MDU6TGFiZWwxNjIwMDQ5NjQy", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/awaiting_response", "name": "awaiting_response", "color": "edac74", "default": false, "description": "Awaiting response"}, {"id": 3689707703, "node_id": "LA_kwDOC2wWEs7b7Hi3", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/sweep", "name": "sweep", "color": "c2e0c6", "default": false, "description": ""}, {"id": 3979473416, "node_id": "LA_kwDOC2wWEs7tMfII", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/priority_medium", "name": "priority_medium", "color": "A320A6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11", "html_url": "https://github.com/facebookresearch/hydra/milestone/11", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/11/labels", "id": 6445624, "node_id": "MDk6TWlsZXN0b25lNjQ0NTYyNA==", "number": 11, "title": "Hydra 1.2.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 32, "state": "closed", "created_at": "2021-02-17T21:35:22Z", "updated_at": "2022-05-18T14:42:50Z", "due_on": null, "closed_at": "2022-05-18T14:42:50Z"}, "comments": 12, "created_at": "2021-08-22T17:47:10Z", "updated_at": "2022-03-29T23:56:36Z", "closed_at": "2022-03-29T23:56:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\ude80 Feature Request\r\nHi I am wondering if it is possible to use `hydra:` namespace in the sweep.\r\n\r\n\r\n## Motivation\r\nI would like to customize the sweep dir, but however it seems that when I need to do a value interpolation I got the following error message\r\n```\r\nomegaconf.errors.InterpolationResolutionError: ValueError raised while resolving interpolation: HydraConfig was not set\r\n    full_key: hydra.sweep.dir\r\n    reference_type=SweepDir\r\n    object_type=SweepDir\r\n```\r\nMy config is (created from [this example](https://github.com/facebookresearch/hydra/blob/master/examples/configure_hydra/workdir/conf/config.yaml))\r\n```yaml\r\n# @package _global_\r\nhydra:\r\n  run:\r\n    dir: run_dir\r\n  sweep:\r\n    dir: ${log_dir}\r\n    subdir: ${hydra.job.num}\r\n\r\na: a1\r\nwork_dir: ${hydra:runtime.cwd}\r\nlog_dir: \"${work_dir}/../my_long_logs\"\r\n```\r\nIt seems that the `hydra:` namespace can't be accessed during the sweep. and my current workaround is making `log_dir` to be\r\n```\r\nlog_dir: \"../my_long_logs\"\r\n```\r\n## Additional context\r\nThe python version is python 3.6. and the hydra version is 1.1.1 (the latest)", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1786/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1784", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1784/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1784/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1784/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1784", "id": 976201723, "node_id": "MDU6SXNzdWU5NzYyMDE3MjM=", "number": 1784, "title": "[Bug] key collision when using option@_global_ in defaults list", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1518816165, "node_id": "MDU6TGFiZWwxNTE4ODE2MTY1", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/In%20progress", "name": "In progress", "color": "569dbf", "default": false, "description": "Work in progress"}], "state": "closed", "locked": false, "assignee": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2021-08-21T19:07:33Z", "updated_at": "2021-09-01T17:06:39Z", "closed_at": "2021-09-01T17:06:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When a defaults list contains entries for both `option` and `option@_global_`, there is a key collision resulting in `ConfigCompositionException`.\r\n\r\nConsider the following setup:\r\n```\r\n$ tree\r\n.\r\n\u251c\u2500\u2500 conf\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 config.yaml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 db\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 mysql.yaml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 sqlite.yaml\r\n\u2514\u2500\u2500 my_app.py\r\n\r\n2 directories, 4 files\r\n```\r\n```python\r\n# my_app.py\r\nfrom omegaconf import OmegaConf\r\nimport hydra\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef my_app(cfg) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\nmy_app()\r\n```\r\n```yaml\r\n# conf/db/mysql.yaml\r\nname: mysql\r\n```\r\n```yaml\r\n# conf/db/sqlite.yaml\r\nname: sqlite\r\n```\r\n**If `config.yaml` has a defaults list with just one entry, `db: mysql`, the result is as expected:**\r\n```text\r\n$ cat conf/config.yaml\r\ndefaults:\r\n  - db: mysql\r\n\r\n$ python my_app.py\r\ndb:\r\n  name: mysql\r\n```\r\n**If `config.yaml` has a defaults list with just one entry, `db@_global_: sqlite`, the result is as expected:**\r\n```text\r\n$ cat conf/config.yaml\r\ndefaults:\r\n  - db@_global_: sqlite\r\n\r\n$ python my_app.py\r\nname: sqlite\r\n```\r\n**If `config.yaml` has a defaults list with both of these entries, there is an unexpected key collision:**\r\n```text\r\n$ cat conf/config.yaml\r\ndefaults:\r\n  - db: mysql\r\n  - db@_global_: sqlite\r\n\r\n$ python my_app.py\r\nMultiple values for db. To override a value use 'override db: sqlite'\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\nThe expected output in this scenario would be the following:\r\n```text\r\nname: sqlite\r\ndb:\r\n  name: mysql\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1784/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1784/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1773", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1773/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1773/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1773/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1773", "id": 972478403, "node_id": "MDU6SXNzdWU5NzI0Nzg0MDM=", "number": 1773, "title": "[Bug] `output_subdir: null` does not work for `multirun`", "user": {"login": "nkueng", "id": 32466285, "node_id": "MDQ6VXNlcjMyNDY2Mjg1", "avatar_url": "https://avatars.githubusercontent.com/u/32466285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nkueng", "html_url": "https://github.com/nkueng", "followers_url": "https://api.github.com/users/nkueng/followers", "following_url": "https://api.github.com/users/nkueng/following{/other_user}", "gists_url": "https://api.github.com/users/nkueng/gists{/gist_id}", "starred_url": "https://api.github.com/users/nkueng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nkueng/subscriptions", "organizations_url": "https://api.github.com/users/nkueng/orgs", "repos_url": "https://api.github.com/users/nkueng/repos", "events_url": "https://api.github.com/users/nkueng/events{/privacy}", "received_events_url": "https://api.github.com/users/nkueng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2021-08-17T09:20:10Z", "updated_at": "2021-08-20T08:21:26Z", "closed_at": "2021-08-19T07:37:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nDisabling the ouput of a `.yaml` file via `hydra.output_subdir: null` works for the standard use-case but not in `multirun`. This still produces an undesired `multirun.yaml`. \r\n\r\n## Checklist\r\n- [x ] I checked on the latest version of Hydra\r\n- [x ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nFollowing the [intro](https://hydra.cc/docs/intro) tutorial should reproduce the issue with the following `conf/config.yaml`:\r\n```\r\ndefaults:\r\n  - db: mysql\r\n  \r\nhydra:\r\n  run:\r\n    dir: .\r\n  output_subdir: null\r\n  sweep:\r\n    dir: .\r\n    subdir: .\r\n```\r\nThis yields the unwanted `multirun.yaml` in directory `.`.\r\n\r\n\r\n## Expected Behavior\r\nNo output at all.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1\r\n- **Python version** :  3.8\r\n- **Virtual environment type and version** : virtualenv\r\n- **Operating system** : Linux Mint 20 Cinnamon\r\n\r\n## Additional context\r\nOn a side note, the [description](https://github.com/facebookresearch/hydra/blob/2a6cbfaa04c0a5569619d9a01e4dbd6f2e17b1b1/hydra/conf/__init__.py#L147-L148) for `output_subdir` mentiones `None` instead of `null`.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1773/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1773/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1765", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1765/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1765/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1765/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1765", "id": 969755894, "node_id": "MDU6SXNzdWU5Njk3NTU4OTQ=", "number": 1765, "title": "[Bug] ConfigKeyError: Key 'defaults' not in <ConfigDataClass>", "user": {"login": "karthikprasad", "id": 1632501, "node_id": "MDQ6VXNlcjE2MzI1MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1632501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karthikprasad", "html_url": "https://github.com/karthikprasad", "followers_url": "https://api.github.com/users/karthikprasad/followers", "following_url": "https://api.github.com/users/karthikprasad/following{/other_user}", "gists_url": "https://api.github.com/users/karthikprasad/gists{/gist_id}", "starred_url": "https://api.github.com/users/karthikprasad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karthikprasad/subscriptions", "organizations_url": "https://api.github.com/users/karthikprasad/orgs", "repos_url": "https://api.github.com/users/karthikprasad/repos", "events_url": "https://api.github.com/users/karthikprasad/events{/privacy}", "received_events_url": "https://api.github.com/users/karthikprasad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2021-08-12T23:32:44Z", "updated_at": "2021-09-14T16:59:01Z", "closed_at": "2021-09-14T16:59:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nComposing structured configs with defaults list results in the above error\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nhttps://drive.google.com/file/d/193vWa5zkRDBAPtJ55tS9Xlj9bOCEJNl0/view?usp=sharing\r\n**hydra_issue_1765.py**\r\n```python\r\nfrom dataclasses import dataclass, field\r\nfrom typing import Any, List, Optional\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom hydra.utils import instantiate\r\nfrom omegaconf import OmegaConf, MISSING\r\nfrom hydra.experimental import initialize, compose\r\n\r\n@dataclass\r\nclass Foo:\r\n    a: int = 1\r\n\r\n@dataclass\r\nclass Reducer:\r\n    _target_: str = \"__main__.T\"\r\n    foo: Foo = MISSING\r\n    defaults: List[Any] = field(default_factory=lambda: [{\"/foo\": \"base_foo\"}])\r\n\r\n@dataclass\r\nclass Trainer:\r\n    _target_: str = \"__main__.T\"\r\n    reducer: Reducer = MISSING\r\n    defaults: List[Any] = field(default_factory=lambda: [{\"/reducer\": \"base_reducer\"}])\r\n\r\n\r\nclass T:\r\n  def __init__(self, **kwargs):\r\n     print(self.__class__, kwargs)\r\n\r\nConfigStore.instance().store(\r\n    name=\"base_trainer\", node=Trainer(), group=\"trainer\"\r\n)\r\nConfigStore.instance().store(\r\n    name=\"base_reducer\", node=Reducer(), group=\"reducer\"\r\n)\r\nConfigStore.instance().store(\r\n    name=\"base_foo\", node=Foo(), group=\"foo\"\r\n)\r\n\r\n@hydra.main(config_path=None, config_name=None)\r\ndef run(cfg):\r\n  print(cfg)\r\n\r\nif __name__ == \"__main__\":\r\n    print(ConfigStore.instance().repo)\r\n    run()\r\n```\r\n\r\nTo repro, run:\r\n``` bash\r\npython hydra_issue_1765.py +trainer=base_trainer\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nConfigKeyError                            Traceback (most recent call last)\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/_internal/config_loader_impl.py in load_configuration(self, config_name, overrides, run_mode, from_shell)\r\n    149                 run_mode=run_mode,\r\n--> 150                 from_shell=from_shell,\r\n    151             )\r\n\r\n55 frames\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/_internal/config_loader_impl.py in _load_configuration_impl(self, config_name, overrides, run_mode, from_shell)\r\n    249         cfg = self._compose_config_from_defaults_list(\r\n--> 250             defaults=defaults_list.defaults, repo=caching_repo\r\n    251         )\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/_internal/config_loader_impl.py in _compose_config_from_defaults_list(self, defaults, repo)\r\n    516                 try:\r\n--> 517                     cfg.merge_with(loaded.config)\r\n    518                 except ValidationError as e:\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in merge_with(self, *others)\r\n    437         except Exception as e:\r\n--> 438             self._format_and_raise(key=None, value=None, cause=e)\r\n    439 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/base.py in _format_and_raise(self, key, value, cause, type_override)\r\n    195             cause=cause,\r\n--> 196             type_override=type_override,\r\n    197         )\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    740             ex.__dict__ = copy.deepcopy(cause.__dict__)\r\n--> 741         _raise(ex, cause)\r\n    742 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in _raise(ex, cause)\r\n    718         ex.__cause__ = None\r\n--> 719     raise ex.with_traceback(sys.exc_info()[2])  # set end OC_CAUSE=1 for full backtrace\r\n    720 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in merge_with(self, *others)\r\n    435         try:\r\n--> 436             self._merge_with(*others)\r\n    437         except Exception as e:\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _merge_with(self, *others)\r\n    459             if isinstance(self, DictConfig) and isinstance(other, DictConfig):\r\n--> 460                 BaseContainer._map_merge(self, other)\r\n    461             elif isinstance(self, ListConfig) and isinstance(other, ListConfig):\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _map_merge(dest, src)\r\n    342                     if isinstance(src_value, BaseContainer):\r\n--> 343                         dest_node._merge_with(src_value)\r\n    344                     elif not missing_src_value:\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _merge_with(self, *others)\r\n    459             if isinstance(self, DictConfig) and isinstance(other, DictConfig):\r\n--> 460                 BaseContainer._map_merge(self, other)\r\n    461             elif isinstance(self, ListConfig) and isinstance(other, ListConfig):\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _map_merge(dest, src)\r\n    342                     if isinstance(src_value, BaseContainer):\r\n--> 343                         dest_node._merge_with(src_value)\r\n    344                     elif not missing_src_value:\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _merge_with(self, *others)\r\n    459             if isinstance(self, DictConfig) and isinstance(other, DictConfig):\r\n--> 460                 BaseContainer._map_merge(self, other)\r\n    461             elif isinstance(self, ListConfig) and isinstance(other, ListConfig):\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _map_merge(dest, src)\r\n    377                 else:\r\n--> 378                     dest[key] = src._get_node(key)\r\n    379 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/dictconfig.py in __setitem__(self, key, value)\r\n    310             self._format_and_raise(\r\n--> 311                 key=key, value=value, type_override=ConfigKeyError, cause=e\r\n    312             )\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/base.py in _format_and_raise(self, key, value, cause, type_override)\r\n    195             cause=cause,\r\n--> 196             type_override=type_override,\r\n    197         )\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    740             ex.__dict__ = copy.deepcopy(cause.__dict__)\r\n--> 741         _raise(ex, cause)\r\n    742 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in _raise(ex, cause)\r\n    718         ex.__cause__ = None\r\n--> 719     raise ex.with_traceback(sys.exc_info()[2])  # set end OC_CAUSE=1 for full backtrace\r\n    720 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/dictconfig.py in __setitem__(self, key, value)\r\n    307         try:\r\n--> 308             self.__set_impl(key=key, value=value)\r\n    309         except AttributeError as e:\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/dictconfig.py in __set_impl(self, key, value)\r\n    317         key = self._validate_and_normalize_key(key)\r\n--> 318         self._set_item_impl(key, value)\r\n    319 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _set_item_impl(self, key, value)\r\n    502         input_config = isinstance(value, Container)\r\n--> 503         target_node_ref = self._get_node(key)\r\n    504         special_value = value is None or _is_missing_value(value)\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/dictconfig.py in _get_node(self, key, validate_access, throw_on_missing_value, throw_on_missing_key)\r\n    464         if validate_access:\r\n--> 465             self._validate_get(key)\r\n    466 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/dictconfig.py in _validate_get(self, key, value)\r\n    166                 self._format_and_raise(\r\n--> 167                     key=key, value=value, cause=ConfigAttributeError(msg)\r\n    168                 )\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/base.py in _format_and_raise(self, key, value, cause, type_override)\r\n    195             cause=cause,\r\n--> 196             type_override=type_override,\r\n    197         )\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    820 \r\n--> 821     _raise(ex, cause)\r\n    822 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in _raise(ex, cause)\r\n    718         ex.__cause__ = None\r\n--> 719     raise ex.with_traceback(sys.exc_info()[2])  # set end OC_CAUSE=1 for full backtrace\r\n    720 \r\n\r\nConfigKeyError: Key 'defaults' not in 'Reducer'\r\n    full_key: trainer.reducer.defaults\r\n    object_type=Reducer\r\n\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nConfigCompositionException                Traceback (most recent call last)\r\n\r\n<ipython-input-7-1d60f99ac6b0> in <module>()\r\n      1 with initialize(config_path=None):\r\n----> 2      cfg=compose(config_name=None, overrides=[\"+trainer=base_trainer\"])\r\n      3      print(cfg)\r\n      4      instantiate(cfg.trainer, _recursive_=False)\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/experimental/compose.py in compose(config_name, overrides, return_hydra_config)\r\n     22         config_name=config_name,\r\n     23         overrides=overrides,\r\n---> 24         return_hydra_config=return_hydra_config,\r\n     25     )\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/compose.py in compose(config_name, overrides, return_hydra_config)\r\n     31         run_mode=RunMode.RUN,\r\n     32         from_shell=False,\r\n---> 33         with_log_configuration=False,\r\n     34     )\r\n     35     assert isinstance(cfg, DictConfig)\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/_internal/hydra.py in compose_config(self, config_name, overrides, run_mode, with_log_configuration, from_shell)\r\n    566             overrides=overrides,\r\n    567             run_mode=run_mode,\r\n--> 568             from_shell=from_shell,\r\n    569         )\r\n    570         if with_log_configuration:\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/_internal/config_loader_impl.py in load_configuration(self, config_name, overrides, run_mode, from_shell)\r\n    151             )\r\n    152         except OmegaConfBaseException as e:\r\n--> 153             raise ConfigCompositionException().with_traceback(sys.exc_info()[2]) from e\r\n    154 \r\n    155     def _process_config_searchpath(\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/_internal/config_loader_impl.py in load_configuration(self, config_name, overrides, run_mode, from_shell)\r\n    148                 overrides=overrides,\r\n    149                 run_mode=run_mode,\r\n--> 150                 from_shell=from_shell,\r\n    151             )\r\n    152         except OmegaConfBaseException as e:\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/_internal/config_loader_impl.py in _load_configuration_impl(self, config_name, overrides, run_mode, from_shell)\r\n    248 \r\n    249         cfg = self._compose_config_from_defaults_list(\r\n--> 250             defaults=defaults_list.defaults, repo=caching_repo\r\n    251         )\r\n    252 \r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/_internal/config_loader_impl.py in _compose_config_from_defaults_list(self, defaults, repo)\r\n    515                 loaded = self._load_single_config(default=default, repo=repo)\r\n    516                 try:\r\n--> 517                     cfg.merge_with(loaded.config)\r\n    518                 except ValidationError as e:\r\n    519                     raise ConfigCompositionException(\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in merge_with(self, *others)\r\n    436             self._merge_with(*others)\r\n    437         except Exception as e:\r\n--> 438             self._format_and_raise(key=None, value=None, cause=e)\r\n    439 \r\n    440     def _merge_with(\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/base.py in _format_and_raise(self, key, value, cause, type_override)\r\n    194             msg=str(cause),\r\n    195             cause=cause,\r\n--> 196             type_override=type_override,\r\n    197         )\r\n    198         assert False\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    739             ex = type_override(str(cause))\r\n    740             ex.__dict__ = copy.deepcopy(cause.__dict__)\r\n--> 741         _raise(ex, cause)\r\n    742 \r\n    743     object_type: Optional[Type[Any]]\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in _raise(ex, cause)\r\n    717     else:\r\n    718         ex.__cause__ = None\r\n--> 719     raise ex.with_traceback(sys.exc_info()[2])  # set end OC_CAUSE=1 for full backtrace\r\n    720 \r\n    721 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in merge_with(self, *others)\r\n    434     ) -> None:\r\n    435         try:\r\n--> 436             self._merge_with(*others)\r\n    437         except Exception as e:\r\n    438             self._format_and_raise(key=None, value=None, cause=e)\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _merge_with(self, *others)\r\n    458 \r\n    459             if isinstance(self, DictConfig) and isinstance(other, DictConfig):\r\n--> 460                 BaseContainer._map_merge(self, other)\r\n    461             elif isinstance(self, ListConfig) and isinstance(other, ListConfig):\r\n    462                 BaseContainer._list_merge(self, other)\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _map_merge(dest, src)\r\n    341                 if isinstance(dest_node, BaseContainer):\r\n    342                     if isinstance(src_value, BaseContainer):\r\n--> 343                         dest_node._merge_with(src_value)\r\n    344                     elif not missing_src_value:\r\n    345                         dest.__setitem__(key, src_value)\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _merge_with(self, *others)\r\n    458 \r\n    459             if isinstance(self, DictConfig) and isinstance(other, DictConfig):\r\n--> 460                 BaseContainer._map_merge(self, other)\r\n    461             elif isinstance(self, ListConfig) and isinstance(other, ListConfig):\r\n    462                 BaseContainer._list_merge(self, other)\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _map_merge(dest, src)\r\n    341                 if isinstance(dest_node, BaseContainer):\r\n    342                     if isinstance(src_value, BaseContainer):\r\n--> 343                         dest_node._merge_with(src_value)\r\n    344                     elif not missing_src_value:\r\n    345                         dest.__setitem__(key, src_value)\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _merge_with(self, *others)\r\n    458 \r\n    459             if isinstance(self, DictConfig) and isinstance(other, DictConfig):\r\n--> 460                 BaseContainer._map_merge(self, other)\r\n    461             elif isinstance(self, ListConfig) and isinstance(other, ListConfig):\r\n    462                 BaseContainer._list_merge(self, other)\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _map_merge(dest, src)\r\n    376                         dest[key] = src._get_node(key)\r\n    377                 else:\r\n--> 378                     dest[key] = src._get_node(key)\r\n    379 \r\n    380         _update_types(node=dest, ref_type=src_ref_type, object_type=src_type)\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/dictconfig.py in __setitem__(self, key, value)\r\n    309         except AttributeError as e:\r\n    310             self._format_and_raise(\r\n--> 311                 key=key, value=value, type_override=ConfigKeyError, cause=e\r\n    312             )\r\n    313         except Exception as e:\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/base.py in _format_and_raise(self, key, value, cause, type_override)\r\n    194             msg=str(cause),\r\n    195             cause=cause,\r\n--> 196             type_override=type_override,\r\n    197         )\r\n    198         assert False\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    739             ex = type_override(str(cause))\r\n    740             ex.__dict__ = copy.deepcopy(cause.__dict__)\r\n--> 741         _raise(ex, cause)\r\n    742 \r\n    743     object_type: Optional[Type[Any]]\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in _raise(ex, cause)\r\n    717     else:\r\n    718         ex.__cause__ = None\r\n--> 719     raise ex.with_traceback(sys.exc_info()[2])  # set end OC_CAUSE=1 for full backtrace\r\n    720 \r\n    721 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/dictconfig.py in __setitem__(self, key, value)\r\n    306     def __setitem__(self, key: DictKeyType, value: Any) -> None:\r\n    307         try:\r\n--> 308             self.__set_impl(key=key, value=value)\r\n    309         except AttributeError as e:\r\n    310             self._format_and_raise(\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/dictconfig.py in __set_impl(self, key, value)\r\n    316     def __set_impl(self, key: DictKeyType, value: Any) -> None:\r\n    317         key = self._validate_and_normalize_key(key)\r\n--> 318         self._set_item_impl(key, value)\r\n    319 \r\n    320     # hide content while inspecting in debugger\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/basecontainer.py in _set_item_impl(self, key, value)\r\n    501 \r\n    502         input_config = isinstance(value, Container)\r\n--> 503         target_node_ref = self._get_node(key)\r\n    504         special_value = value is None or _is_missing_value(value)\r\n    505 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/dictconfig.py in _get_node(self, key, validate_access, throw_on_missing_value, throw_on_missing_key)\r\n    463 \r\n    464         if validate_access:\r\n--> 465             self._validate_get(key)\r\n    466 \r\n    467         value: Optional[Node] = self.__dict__[\"_content\"].get(key)\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/dictconfig.py in _validate_get(self, key, value)\r\n    165                     msg = f\"Key '{key}' is not in struct\"\r\n    166                 self._format_and_raise(\r\n--> 167                     key=key, value=value, cause=ConfigAttributeError(msg)\r\n    168                 )\r\n    169 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/base.py in _format_and_raise(self, key, value, cause, type_override)\r\n    194             msg=str(cause),\r\n    195             cause=cause,\r\n--> 196             type_override=type_override,\r\n    197         )\r\n    198         assert False\r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    819         ex.ref_type_str = ref_type_str\r\n    820 \r\n--> 821     _raise(ex, cause)\r\n    822 \r\n    823 \r\n\r\n/usr/local/lib/python3.7/dist-packages/omegaconf/_utils.py in _raise(ex, cause)\r\n    717     else:\r\n    718         ex.__cause__ = None\r\n--> 719     raise ex.with_traceback(sys.exc_info()[2])  # set end OC_CAUSE=1 for full backtrace\r\n    720 \r\n    721 \r\n\r\nConfigCompositionException: \r\n```\r\n\r\n## Expected Behavior\r\nThe config composition to work correctly.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0\r\n- **Python version** : 3.7.11\r\n- **Virtual environment type and version** :  Google Colab\r\n- **Operating system** : \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1765/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1765/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1752", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1752/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1752/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1752/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1752", "id": 960773474, "node_id": "MDU6SXNzdWU5NjA3NzM0NzQ=", "number": 1752, "title": "Can't override a dictionary argument via the CLI", "user": {"login": "lminer", "id": 5126549, "node_id": "MDQ6VXNlcjUxMjY1NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/5126549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lminer", "html_url": "https://github.com/lminer", "followers_url": "https://api.github.com/users/lminer/followers", "following_url": "https://api.github.com/users/lminer/following{/other_user}", "gists_url": "https://api.github.com/users/lminer/gists{/gist_id}", "starred_url": "https://api.github.com/users/lminer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lminer/subscriptions", "organizations_url": "https://api.github.com/users/lminer/orgs", "repos_url": "https://api.github.com/users/lminer/repos", "events_url": "https://api.github.com/users/lminer/events{/privacy}", "received_events_url": "https://api.github.com/users/lminer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-08-04T17:27:54Z", "updated_at": "2021-08-25T21:15:59Z", "closed_at": "2021-08-06T01:12:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to specify a fairly complicated \r\n\r\nI have a structured config defined as follows\r\n\r\n```python\r\n@dataclass\r\nMyConfig:\r\n   dict_arg: Optional[Dict[str, Tuple[str, float]] = None\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(group=\"model\", name=\"foo\", node=MyConfig)\r\n\r\n\r\n@hydra.main(config_path=\"../conf\", config_name=\"config_foo\")\r\ndef main(params: MyConfig) -> None:\r\n    # other stuff\r\n```\r\n\r\nUnfortunately, I can't seem to figure out how to override the value of this argument via the command-line.\r\n\r\nI try:\r\n\r\n```\r\npython foo.py dict_arg={foo:[(bar,.9),(baz,.8)]}\r\n```\r\n\r\nAnd I get the following error:\r\n\r\n```line 1: syntax error near unexpected token `('```\r\n\r\nIs there some sort of fancy escaping I should be doing?", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1752/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1752/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1748", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1748/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1748/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1748/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1748", "id": 958484425, "node_id": "MDU6SXNzdWU5NTg0ODQ0MjU=", "number": 1748, "title": "Legacy overriding of Hydra config groups results in an error if not at the end of the list.", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12", "html_url": "https://github.com/facebookresearch/hydra/milestone/12", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12/labels", "id": 6846992, "node_id": "MDk6TWlsZXN0b25lNjg0Njk5Mg==", "number": 12, "title": "Hydra 1.1.1", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2021-06-11T16:45:59Z", "updated_at": "2021-08-20T20:01:47Z", "due_on": null, "closed_at": "2021-08-20T20:01:47Z"}, "comments": 0, "created_at": "2021-08-02T20:30:03Z", "updated_at": "2021-08-06T03:07:11Z", "closed_at": "2021-08-06T03:07:11Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "If primary defaults list has an Hydra override that is not at the end of the list, Hydra 1.1 fails to start.\r\nWe should make this a warning for smoother migration. \r\n```\r\ndefaults:\r\n  - hydra/launcher: basic\r\n  - db: mysql\r\n```\r\n\r\n```\r\n$ python my_app.py\r\n/Users/omry/dev/hydra/hydra/_internal/defaults_list.py:389: UserWarning: In config: Invalid overriding of hydra/launcher:\r\nDefault list overrides requires 'override' keyword.\r\nSee https://hydra.cc/docs/next/upgrades/1.0_to_1.1/defaults_list_override for more information.\r\n\r\n  warnings.warn(msg, UserWarning)\r\nIn config: Override 'hydra/launcher : basic' is defined before 'db: mysql'.\r\nOverrides must be at the end of the defaults list\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1748/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1748/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1742", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1742/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1742/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1742/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1742", "id": 957306015, "node_id": "MDU6SXNzdWU5NTczMDYwMTU=", "number": 1742, "title": "[Bug] Incorrect error message when missing default has non-standard package", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/13", "html_url": "https://github.com/facebookresearch/hydra/milestone/13", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/13/labels", "id": 7077841, "node_id": "MI_kwDOC2wWEs4Aa__R", "number": 13, "title": "Hydra 1.1.2", "description": null, "creator": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2021-08-20T20:01:02Z", "updated_at": "2022-04-18T16:15:40Z", "due_on": null, "closed_at": "2022-04-18T16:15:40Z"}, "comments": 1, "created_at": "2021-07-31T19:20:16Z", "updated_at": "2021-08-25T23:50:23Z", "closed_at": "2021-08-25T23:50:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nIf the primary config's defaults list has an element of the form `- platform@foo: ???`, the user is required to select an option for `platform@foo`. If no option is selected for `platform@foo`, the resulting error message is misleading and incorrect.\r\n\r\n## To reproduce\r\nSuppose we have the following three files:\r\nHere is `main.py`:\r\n```python\r\nimport hydra\r\nfrom omegaconf import OmegaConf\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef my_app(cfg):\r\n    print(OmegaConf.to_yaml(cfg))\r\nmy_app()\r\n```\r\nHere is `conf/config.yaml`:\r\n```yaml\r\ndefaults:\r\n  - platform@foo: ???\r\n```\r\nHere is `conf/platform/platformA.yaml`:\r\n```yaml\r\nbar: baz\r\n```\r\n\r\nIf `main.py` is run with no command-line arguments, the following output is produced:\r\n```text\r\n$ python main.py\r\nYou must specify 'platform', e.g, platform=<OPTION>\r\nAvailable options:\r\n        platformA\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\nBut if I specify `platform=platformA` at the command line, this is what happens:\r\n```text\r\n$ python main.py platform=platformA\r\nYou must specify 'platform', e.g, platform=<OPTION>\r\nAvailable options:\r\n        platformA\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\nThis is confusing. The `platform` has already been specified, but the program still does not run.\r\n\r\n## Expected Behavior\r\nI think that `main.py`'s output should say this\r\n```text\r\nYou must specify 'platform@foo', e.g, platform@foo=<OPTION>\r\n```\r\ninstead of this:\r\n```text\r\nYou must specify 'platform', e.g, platform=<OPTION>\r\n```\r\n\r\nSpecifying `platform@foo` allows the program to run:\r\n```text\r\n$ python main.py platform@foo=platformA\r\nfoo:\r\n  bar: baz\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  master branch\r\n- **Python version** : 3.9", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1742/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1742/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1739", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1739/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1739/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1739/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1739", "id": 957080510, "node_id": "MDU6SXNzdWU5NTcwODA1MTA=", "number": 1739, "title": "[Bug] failure while sanitiainzg exception stack trace in some cases", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12", "html_url": "https://github.com/facebookresearch/hydra/milestone/12", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12/labels", "id": 6846992, "node_id": "MDk6TWlsZXN0b25lNjg0Njk5Mg==", "number": 12, "title": "Hydra 1.1.1", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2021-06-11T16:45:59Z", "updated_at": "2021-08-20T20:01:47Z", "due_on": null, "closed_at": "2021-08-20T20:01:47Z"}, "comments": 0, "created_at": "2021-07-30T21:51:45Z", "updated_at": "2021-08-06T01:09:45Z", "closed_at": "2021-08-06T01:09:45Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "In some scenarios, one of the insepected frames in the stack trace does not have a module, resulting in a failure to print the underlying error.\r\n\r\nThe following looks like it's resolving it:\r\n\r\n```diff\r\n++ hydra/_internal/utils.py\r\n@@ -248,6 +248,8 @@\r\n                 while end is not None:\r\n                     frame = end.tb_frame\r\n                     mdl = inspect.getmodule(frame)\r\n+                    if mdl is None:\r\n+                        break\r\n-                     assert mdl is not None\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1739/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1739/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1736", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1736/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1736/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1736/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1736", "id": 952714077, "node_id": "MDU6SXNzdWU5NTI3MTQwNzc=", "number": 1736, "title": "[Bug] Ray plugin error in CloudPickler", "user": {"login": "beerzyp", "id": 25772555, "node_id": "MDQ6VXNlcjI1NzcyNTU1", "avatar_url": "https://avatars.githubusercontent.com/u/25772555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beerzyp", "html_url": "https://github.com/beerzyp", "followers_url": "https://api.github.com/users/beerzyp/followers", "following_url": "https://api.github.com/users/beerzyp/following{/other_user}", "gists_url": "https://api.github.com/users/beerzyp/gists{/gist_id}", "starred_url": "https://api.github.com/users/beerzyp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beerzyp/subscriptions", "organizations_url": "https://api.github.com/users/beerzyp/orgs", "repos_url": "https://api.github.com/users/beerzyp/repos", "events_url": "https://api.github.com/users/beerzyp/events{/privacy}", "received_events_url": "https://api.github.com/users/beerzyp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-07-26T09:46:54Z", "updated_at": "2021-07-28T02:39:56Z", "closed_at": "2021-07-28T02:39:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI get the following error `RuntimeError: SimpleQueue objects should only be shared between processes through inheritance` when running any ray plugin example from the docs with the `--multirun`flag.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nJust adding default `- override hydra/launcher: ray_aws`or any ray_aws custom config from the examples, when adding the flag `--multirun` to python execution.\r\n** Stack trace/error message **\r\n```\r\n// Paste the bad output here!\r\n File \"/Users/bernardoramos/opt/miniconda3/envs/sn/lib/python3.9/site-packages/hydra/_internal/utils.py\", line 376, in <lambda>\r\n    lambda: hydra.multirun(\r\n  File \"/Users/bernardoramos/opt/miniconda3/envs/sn/lib/python3.9/site-packages/hydra/_internal/hydra.py\", line 139, in multirun\r\n    ret = sweeper.sweep(arguments=task_overrides)\r\n  File \"/Users/bernardoramos/opt/miniconda3/envs/sn/lib/python3.9/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 157, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/Users/bernardoramos/opt/miniconda3/envs/sn/lib/python3.9/site-packages/hydra_plugins/hydra_ray_launcher/ray_aws_launcher.py\", line 51, in launch\r\n    return _core_aws.launch(\r\n  File \"/Users/bernardoramos/opt/miniconda3/envs/sn/lib/python3.9/site-packages/hydra_plugins/hydra_ray_launcher/_core_aws.py\", line 93, in launch\r\n    _pickle_jobs(\r\n  File \"/Users/bernardoramos/opt/miniconda3/envs/sn/lib/python3.9/site-packages/hydra_plugins/hydra_ray_launcher/_core_aws.py\", line 47, in _pickle_jobs\r\n    cloudpickle.dump(jobspec, f)\r\n  File \"/Users/bernardoramos/opt/miniconda3/envs/sn/lib/python3.9/site-packages/cloudpickle/cloudpickle_fast.py\", line 55, in dump\r\n    CloudPickler(\r\n  File \"/Users/bernardoramos/opt/miniconda3/envs/sn/lib/python3.9/site-packages/cloudpickle/cloudpickle_fast.py\", line 563, in dump\r\n    return Pickler.dump(self, obj)\r\n  File \"/Users/bernardoramos/opt/miniconda3/envs/sn/lib/python3.9/multiprocessing/queues.py\", line 357, in __getstate__\r\n    context.assert_spawning(self)\r\n  File \"/Users/bernardoramos/opt/miniconda3/envs/sn/lib/python3.9/multiprocessing/context.py\", line 359, in assert_spawning\r\n    raise RuntimeError(\r\nRuntimeError: SimpleQueue objects should only be shared between processes through inheritance\r\n```\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n -  hydra_version: 1.0.6\r\n - ray_version: 1.4.1\r\n - cloudpickle_version: 1.6.0\r\n - omegaconf_version: 2.0.6\r\n - pickle5_version: 0.0.11\r\n - cloudpickle: 1.6.0\r\n - hydra_ray_launcher_version: 0.1.2\r\n- Virtual environment type and version: Miniconda3\r\n- Operating system: MacOS BigSur\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1736/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1736/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1732", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1732/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1732/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1732/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1732", "id": 950237402, "node_id": "MDU6SXNzdWU5NTAyMzc0MDI=", "number": 1732, "title": "Enable Hydra 1.0 instantiate to receive _recursive_=False", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-22T02:04:21Z", "updated_at": "2021-07-24T16:08:39Z", "closed_at": "2021-07-24T16:08:39Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Hydra 1.1 adds support for recursive instantiation and makes it the default.\r\nThis present a challenge for code that needs to work with both Hydra 1.0 and 1.1 and is depending on instantiate not being recursive.\r\n(This is typically code that would benefit from recursive instantiation, once it starts to depend on Hydra 1.1).\r\n\r\nTo facilitate smoother migration, a following diff will allow Hydra 1.0 to receive `_recursive_` flag in the instantiate callsite or in the config, much like Hydra 1.1. Since this does not really add recursive support, the code will fail if `_recursive_` is set to True.\r\n\r\nIn a typical scenario, the instantiate callsite can be changed to pass `_recursive_=False` which, after this diff - result in noon recursive instantiation in both Hydra 1.0 and 1.1.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1732/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1732/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1730", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1730/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1730/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1730/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1730", "id": 950145476, "node_id": "MDU6SXNzdWU5NTAxNDU0NzY=", "number": 1730, "title": "Overriding hydra config groups using legacy notation more than once is causing an error instead of a two deprecation warning", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-07-21T22:06:31Z", "updated_at": "2021-07-22T01:05:44Z", "closed_at": "2021-07-22T01:05:44Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "\r\n\r\nExample config:\r\n```yaml\r\ndefaults:\r\n  - hydra/hydra_logging: colorlog\r\n  - hydra/job_logging: colorlog\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1730/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1730/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1723", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1723/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1723/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1723/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1723", "id": 948832827, "node_id": "MDU6SXNzdWU5NDg4MzI4Mjc=", "number": 1723, "title": "[Bug] AttributeError: 'functools.partial' object has no attribute 'hydra'", "user": {"login": "IgorKasianenko", "id": 17688220, "node_id": "MDQ6VXNlcjE3Njg4MjIw", "avatar_url": "https://avatars.githubusercontent.com/u/17688220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IgorKasianenko", "html_url": "https://github.com/IgorKasianenko", "followers_url": "https://api.github.com/users/IgorKasianenko/followers", "following_url": "https://api.github.com/users/IgorKasianenko/following{/other_user}", "gists_url": "https://api.github.com/users/IgorKasianenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/IgorKasianenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IgorKasianenko/subscriptions", "organizations_url": "https://api.github.com/users/IgorKasianenko/orgs", "repos_url": "https://api.github.com/users/IgorKasianenko/repos", "events_url": "https://api.github.com/users/IgorKasianenko/events{/privacy}", "received_events_url": "https://api.github.com/users/IgorKasianenko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-07-20T16:22:39Z", "updated_at": "2021-07-21T16:12:13Z", "closed_at": "2021-07-21T06:44:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://github.com/IgorKasianenko/hydra-bug-AttributeError.git) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n`git clone https://github.com/IgorKasianenko/hydra-bug-AttributeError.git`\r\n`cd hydra-bug-AttributeError/hydra`\r\n`python test_hydra.py experiment=my`\r\n\r\n** Stack trace/error message **\r\n```\r\nHYDRA_FULL_ERROR=1 python test_hydra.py experiment=my\r\nTraceback (most recent call last):\r\n  File \"test_hydra.py\", line 11, in <module>\r\n    app()\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/hydra/main.py\", line 49, in decorated_main\r\n    _run_hydra(\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 367, in _run_hydra\r\n    run_and_report(\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 214, in run_and_report\r\n    raise ex\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 211, in run_and_report\r\n    return func()\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 368, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 97, in run\r\n    ret = run_job(\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/hydra/core/utils.py\", line 122, in run_job\r\n    working_dir = str(OmegaConf.select(config, job_dir_key))\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 685, in select\r\n    format_and_raise(node=cfg, key=key, value=None, cause=e, msg=str(e))\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/_utils.py\", line 821, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/_utils.py\", line 719, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set end OC_CAUSE=1 for full backtrace\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 677, in select\r\n    return select_value(\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/_impl.py\", line 58, in select_value\r\n    node = select_node(\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/_impl.py\", line 93, in select_node\r\n    _root, _last_key, node = cfg._select_impl(\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/base.py\", line 429, in _select_impl\r\n    value = root._maybe_resolve_interpolation(\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/base.py\", line 616, in _maybe_resolve_interpolation\r\n    return self._resolve_interpolation_from_parse_tree(\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/base.py\", line 482, in _resolve_interpolation_from_parse_tree\r\n    resolved = self.resolve_parse_tree(\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/base.py\", line 662, in resolve_parse_tree\r\n    return visitor.visit(parse_tree)\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/antlr4/tree/Tree.py\", line 34, in visit\r\n    return tree.accept(self)\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/grammar/gen/OmegaConfGrammarParser.py\", line 205, in accept\r\n    return visitor.visitConfigValue(self)\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 101, in visitConfigValue\r\n    return self.visit(ctx.getChild(0))\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/antlr4/tree/Tree.py\", line 34, in visit\r\n    return tree.accept(self)\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/grammar/gen/OmegaConfGrammarParser.py\", line 339, in accept\r\n    return visitor.visitText(self)\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 301, in visitText\r\n    return self._unescape(list(ctx.getChildren()))\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 389, in _unescape\r\n    text = str(self.visitInterpolation(node))\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 125, in visitInterpolation\r\n    return self.visit(ctx.getChild(0))\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/antlr4/tree/Tree.py\", line 34, in visit\r\n    return tree.accept(self)\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/grammar/gen/OmegaConfGrammarParser.py\", line 911, in accept\r\n    return visitor.visitInterpolationNode(self)\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/grammar_visitor.py\", line 158, in visitInterpolationNode\r\n    return self.node_interpolation_callback(inter_key, self.memo)\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/base.py\", line 643, in node_interpolation_callback\r\n    return self._resolve_node_interpolation(inter_key=inter_key, memo=memo)\r\n  File \"/home/exx/anaconda3/envs/py38gpu/lib/python3.8/site-packages/omegaconf/base.py\", line 573, in _resolve_node_interpolation\r\n    raise InterpolationKeyError(f\"Interpolation key '{inter_key}' not found\")\r\nomegaconf.errors.InterpolationKeyError: Interpolation key 'project.name' not found\r\n    full_key: hydra.run.dir\r\n    object_type=dict\r\n```\r\n\r\n## Expected Behavior\r\nPrint config as in hydra version 1.0.0rc1 before upgrade\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0\r\n- **Python version** : Python 3.8.8\r\n- **Virtual environment type and version** : 4.9.2\r\n- **Operating system** : Ubuntu 20.04.2 LTS\r\n\r\n## Additional context\r\nOmegaConf is latest version 2.1", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1723/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1723/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1721", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1721/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1721/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1721/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1721", "id": 948074325, "node_id": "MDU6SXNzdWU5NDgwNzQzMjU=", "number": 1721, "title": "[CI] trigger_plugin_piplines fails with `Permission denied`", "user": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1518816165, "node_id": "MDU6TGFiZWwxNTE4ODE2MTY1", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/In%20progress", "name": "In progress", "color": "569dbf", "default": false, "description": "Work in progress"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2021-07-19T22:22:45Z", "updated_at": "2021-07-20T18:23:44Z", "closed_at": "2021-07-20T18:23:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "[example failure](https://app.circleci.com/pipelines/github/facebookresearch/hydra/10875/workflows/54e321d0-cc34-4376-91b3-53c8a3c95ca0/jobs/98872)", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1721/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1721/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1718", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1718/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1718/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1718/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1718", "id": 946306654, "node_id": "MDU6SXNzdWU5NDYzMDY2NTQ=", "number": 1718, "title": "[Bug] Run out of the box Multi-Objective Optimization.", "user": {"login": "dalnoguer", "id": 26818829, "node_id": "MDQ6VXNlcjI2ODE4ODI5", "avatar_url": "https://avatars.githubusercontent.com/u/26818829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dalnoguer", "html_url": "https://github.com/dalnoguer", "followers_url": "https://api.github.com/users/dalnoguer/followers", "following_url": "https://api.github.com/users/dalnoguer/following{/other_user}", "gists_url": "https://api.github.com/users/dalnoguer/gists{/gist_id}", "starred_url": "https://api.github.com/users/dalnoguer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dalnoguer/subscriptions", "organizations_url": "https://api.github.com/users/dalnoguer/orgs", "repos_url": "https://api.github.com/users/dalnoguer/repos", "events_url": "https://api.github.com/users/dalnoguer/events{/privacy}", "received_events_url": "https://api.github.com/users/dalnoguer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1518816165, "node_id": "MDU6TGFiZWwxNTE4ODE2MTY1", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/In%20progress", "name": "In progress", "color": "569dbf", "default": false, "description": "Work in progress"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/13", "html_url": "https://github.com/facebookresearch/hydra/milestone/13", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/13/labels", "id": 7077841, "node_id": "MI_kwDOC2wWEs4Aa__R", "number": 13, "title": "Hydra 1.1.2", "description": null, "creator": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2021-08-20T20:01:02Z", "updated_at": "2022-04-18T16:15:40Z", "due_on": null, "closed_at": "2022-04-18T16:15:40Z"}, "comments": 4, "created_at": "2021-07-16T13:42:09Z", "updated_at": "2021-09-27T22:10:22Z", "closed_at": "2021-09-27T22:08:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\r\n\r\nIt seems there is a bug in the NSGAIISampler __init__ function.\r\n\r\nFollowing the run instructions: \r\n\r\n```\r\nTo run the optimization, use the following command in the plugins/hydra_optuna_sweeper directory:\r\n\r\npython example/multi-objective.py --multirun\r\n```\r\n\r\nLeads to the following error:\r\n\r\nmultiobj \u276f python example/multi-objective.py --multirun\r\nTraceback (most recent call last):\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 62, in _call_target\r\n    return target(*args, **kwargs)\r\nTypeError: __init__() got an unexpected keyword argument 'constraints_func'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 211, in run_and_report\r\n    return func()\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 379, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/_internal/hydra.py\", line 135, in multirun\r\n    task_function=task_function,\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/core/plugins.py\", line 174, in instantiate_sweeper\r\n    sweeper = self._instantiate(config.hydra.sweeper)\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/core/plugins.py\", line 93, in _instantiate\r\n    plugin = instantiate(config=config, _target_=clazz)\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 180, in instantiate\r\n    return instantiate_node(config, *args, recursive=_recursive_, convert=_convert_)\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 246, in instantiate_node\r\n    value, convert=convert, recursive=recursive\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 249, in instantiate_node\r\n    return _call_target(target, *args, **kwargs)\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 66, in _call_target\r\n    ).with_traceback(sys.exc_info()[2])\r\n  File \"/home/dnoguer/miniconda3/envs/multiobj/lib/python3.6/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 62, in _call_target\r\n    return target(*args, **kwargs)\r\nTypeError: Error instantiating 'optuna.samplers._nsga2.NSGAIISampler' : __init__() got an unexpected keyword argument 'constraints_func'\r\n\r\nThanks! ", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1718/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1718/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1717", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1717/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1717/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1717/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1717", "id": 946303913, "node_id": "MDU6SXNzdWU5NDYzMDM5MTM=", "number": 1717, "title": "[Bug]", "user": {"login": "dalnoguer", "id": 26818829, "node_id": "MDQ6VXNlcjI2ODE4ODI5", "avatar_url": "https://avatars.githubusercontent.com/u/26818829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dalnoguer", "html_url": "https://github.com/dalnoguer", "followers_url": "https://api.github.com/users/dalnoguer/followers", "following_url": "https://api.github.com/users/dalnoguer/following{/other_user}", "gists_url": "https://api.github.com/users/dalnoguer/gists{/gist_id}", "starred_url": "https://api.github.com/users/dalnoguer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dalnoguer/subscriptions", "organizations_url": "https://api.github.com/users/dalnoguer/orgs", "repos_url": "https://api.github.com/users/dalnoguer/repos", "events_url": "https://api.github.com/users/dalnoguer/events{/privacy}", "received_events_url": "https://api.github.com/users/dalnoguer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-16T13:38:48Z", "updated_at": "2021-07-16T13:43:36Z", "closed_at": "2021-07-16T13:43:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## Checklist\r\n- [ ] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n** Stack trace/error message **\r\n```\r\n// Paste the bad output here!\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  \r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1717/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1717/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1709", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1709/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1709/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1709/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1709", "id": 941470371, "node_id": "MDU6SXNzdWU5NDE0NzAzNzE=", "number": 1709, "title": "[Bug]", "user": {"login": "bambers936", "id": 77102463, "node_id": "MDQ6VXNlcjc3MTAyNDYz", "avatar_url": "https://avatars.githubusercontent.com/u/77102463?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bambers936", "html_url": "https://github.com/bambers936", "followers_url": "https://api.github.com/users/bambers936/followers", "following_url": "https://api.github.com/users/bambers936/following{/other_user}", "gists_url": "https://api.github.com/users/bambers936/gists{/gist_id}", "starred_url": "https://api.github.com/users/bambers936/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bambers936/subscriptions", "organizations_url": "https://api.github.com/users/bambers936/orgs", "repos_url": "https://api.github.com/users/bambers936/repos", "events_url": "https://api.github.com/users/bambers936/events{/privacy}", "received_events_url": "https://api.github.com/users/bambers936/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-11T14:58:43Z", "updated_at": "2021-07-11T19:01:22Z", "closed_at": "2021-07-11T19:01:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\n## Description\n<!-- A clear and concise description of what the bug is. -->\n\n## Checklist\n- [ ] I checked on the latest version of Hydra\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\n\n## To reproduce\n\n** Minimal Code/Config snippet to reproduce **\n\n** Stack trace/error message **\n```\n// Paste the bad output here!\n```\n\n## Expected Behavior\n<!-- A clear and concise description of what you expected to happen. -->\n\n## System information\n- **Hydra Version** :  \n- **Python version** : \n- **Virtual environment type and version** : \n- **Operating system** : \n\n## Additional context\nAdd any other context about the problem here.\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1709/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1706", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1706/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1706/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1706/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1706", "id": 939363108, "node_id": "MDU6SXNzdWU5MzkzNjMxMDg=", "number": 1706, "title": "[Bug] adding ColorLog override will disable other overrides", "user": {"login": "NinjaAtWork", "id": 14922997, "node_id": "MDQ6VXNlcjE0OTIyOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/14922997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NinjaAtWork", "html_url": "https://github.com/NinjaAtWork", "followers_url": "https://api.github.com/users/NinjaAtWork/followers", "following_url": "https://api.github.com/users/NinjaAtWork/following{/other_user}", "gists_url": "https://api.github.com/users/NinjaAtWork/gists{/gist_id}", "starred_url": "https://api.github.com/users/NinjaAtWork/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NinjaAtWork/subscriptions", "organizations_url": "https://api.github.com/users/NinjaAtWork/orgs", "repos_url": "https://api.github.com/users/NinjaAtWork/repos", "events_url": "https://api.github.com/users/NinjaAtWork/events{/privacy}", "received_events_url": "https://api.github.com/users/NinjaAtWork/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1518816165, "node_id": "MDU6TGFiZWwxNTE4ODE2MTY1", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/In%20progress", "name": "In progress", "color": "569dbf", "default": false, "description": "Work in progress"}], "state": "closed", "locked": false, "assignee": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12", "html_url": "https://github.com/facebookresearch/hydra/milestone/12", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12/labels", "id": 6846992, "node_id": "MDk6TWlsZXN0b25lNjg0Njk5Mg==", "number": 12, "title": "Hydra 1.1.1", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2021-06-11T16:45:59Z", "updated_at": "2021-08-20T20:01:47Z", "due_on": null, "closed_at": "2021-08-20T20:01:47Z"}, "comments": 8, "created_at": "2021-07-08T00:36:49Z", "updated_at": "2021-07-30T17:38:36Z", "closed_at": "2021-07-30T17:38:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\nhere i follow the basic tutorial and experiment section :\r\nmain.py:\r\n```\r\nfrom omegaconf import DictConfig, OmegaConf\r\nimport hydra\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef my_app(cfg: DictConfig) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\nconfig.yaml:\r\n\r\n```\r\ndefaults:\r\n  - segment : color\r\n  #- override hydra/job_logging: colorlog\r\n  #- override hydra/hydra_logging: colorlog\r\nvolume: 1\r\n```\r\n\r\nsegment/color.yaml :\r\n`color_num=1`\r\nsegment/color2.yaml :\r\n`color_num=10`\r\n\r\n\r\nexperiment/test.yaml :\r\n```\r\n# @package _global_\r\ndefaults:\r\n  - override /segment: color2\r\nvolume: 9999\r\n```\r\n\r\nrunning the\r\n `:\\python main.py +experiment=test`\r\nwill return `volume:9999`\r\nBUT while un-commenting colorlog override in config.yaml the volume returned will be `volume:1`\r\nwhy adding colorlog impact the other config ?\r\nbtw the colorlog do his job and the colorizing the output\r\n\r\nthanks", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1706/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1706/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1705", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1705/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1705/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1705/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1705", "id": 936333668, "node_id": "MDU6SXNzdWU5MzYzMzM2Njg=", "number": 1705, "title": "[Bug] Set a config value of a group using structured configs", "user": {"login": "avril-affine", "id": 13043189, "node_id": "MDQ6VXNlcjEzMDQzMTg5", "avatar_url": "https://avatars.githubusercontent.com/u/13043189?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avril-affine", "html_url": "https://github.com/avril-affine", "followers_url": "https://api.github.com/users/avril-affine/followers", "following_url": "https://api.github.com/users/avril-affine/following{/other_user}", "gists_url": "https://api.github.com/users/avril-affine/gists{/gist_id}", "starred_url": "https://api.github.com/users/avril-affine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avril-affine/subscriptions", "organizations_url": "https://api.github.com/users/avril-affine/orgs", "repos_url": "https://api.github.com/users/avril-affine/repos", "events_url": "https://api.github.com/users/avril-affine/events{/privacy}", "received_events_url": "https://api.github.com/users/avril-affine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-03T22:02:32Z", "updated_at": "2021-07-05T00:45:49Z", "closed_at": "2021-07-05T00:44:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI'm not sure to tag this as a bug or a feature.\r\nUsing structured configs, I'm trying to set a config value within a config group using the `defaults` field. Is this possible? If not, could this be an additional feature?\r\n\r\n## Checklist\r\n- [ x] I checked on the latest version of Hydra\r\n- [ x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n```\r\nfrom dataclasses import dataclass, field\r\nfrom typing import Any, List\r\n\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom omegaconf import MISSING\r\n\r\n@dataclass\r\nclass ConfigGroup:\r\n    pass\r\n\r\n@dataclass\r\nclass A(ConfigGroup):\r\n    x: str = \"a\"\r\n\r\n@dataclass\r\nclass B(ConfigGroup):\r\n    x: str = \"b\"\r\n\r\ndefault_list = [\r\n    {\"group/cfg\": \"B\"},\r\n    {\"cfg.x\": \"foo\"},  # I'm not sure what should this be?\r\n]\r\n@dataclass\r\nclass Main:\r\n    defaults: List[Any] = field(default_factory=lambda: default_list)\r\n    cfg: ConfigGroup = MISSING\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(group=\"group/cfg\", package=\"cfg\", name=\"A\", node=A)\r\ncs.store(group=\"group/cfg\", package=\"cfg\", name=\"B\", node=B)\r\ncs.store(name=\"main\", node=Main)\r\n\r\n@hydra.main(config_path=None, config_name=\"main\")\r\ndef main(cfg: Main):\r\n    print(cfg)\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nIn 'main': Could not find 'cfg.x/foo'\r\n```\r\n\r\n## Expected Behavior\r\nI expect the resulting config to be: `{'cfg': {'x': 'foo'}}`\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0 \r\n- **Python version** :  3.7.10\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1690", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1690/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1690/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1690/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1690", "id": 926701096, "node_id": "MDU6SXNzdWU5MjY3MDEwOTY=", "number": 1690, "title": "[Bug] Add param to defaults from child configs", "user": {"login": "singhay", "id": 14236438, "node_id": "MDQ6VXNlcjE0MjM2NDM4", "avatar_url": "https://avatars.githubusercontent.com/u/14236438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/singhay", "html_url": "https://github.com/singhay", "followers_url": "https://api.github.com/users/singhay/followers", "following_url": "https://api.github.com/users/singhay/following{/other_user}", "gists_url": "https://api.github.com/users/singhay/gists{/gist_id}", "starred_url": "https://api.github.com/users/singhay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/singhay/subscriptions", "organizations_url": "https://api.github.com/users/singhay/orgs", "repos_url": "https://api.github.com/users/singhay/repos", "events_url": "https://api.github.com/users/singhay/events{/privacy}", "received_events_url": "https://api.github.com/users/singhay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-06-21T23:59:19Z", "updated_at": "2021-06-22T21:43:27Z", "closed_at": "2021-06-22T21:38:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI'm am migrating from 0.11 and not able to resolve this one issue.\r\n\r\n## Checklist\r\n- [*] I checked on the latest version of Hydra\r\n- [*] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n`config.yaml`\r\n```\r\ndefaults:\r\n  - model: classification/cnn1d_dilation_rnn_sm\r\n  - data: classification\r\n  - optimizer: adam\r\n  - lr_scheduler: reduce_lr_on_plateau\r\n  - training: gpu\r\n\r\naml:\r\n  experiment_name: 'test'\r\n  experiment_folder: 'experiment_src'\r\n\r\n  docker:\r\n    base_image: 'mcr.microsoft.com/azureml/openmpi3.1.2-cuda10.2-cudnn8-ubuntu18.04'\r\n```\r\nNow in `0.11` for the `aml` part, I had some extra params that were present in `gpu.yaml` that got added. here's `gpu.yaml`\r\n```\r\naml:\r\n    cluster_name: 'gpu-cluster-nc6'\r\n    docker:\r\n        shm_size: '50g'\r\n```\r\n\r\n** Stack trace/error message **\r\nHowever, after migrating I only see the `aml` params mentioned in `config.yaml` instead of combined aml config from both `gpu.yaml` and `config.yaml`. \r\nCan anyone point to me what I might be missing here?\r\n\r\n## Expected Behavior\r\n`0.11` gives the final output that combines aml from both config.yaml and gpu.yaml\r\n```\r\naml:\r\n    experiment_name: 'test'\r\n    experiment_folder: 'experiment_src'\r\n    cluster_name: 'gpu-cluster-nc6'\r\n    docker:\r\n        base_image: 'mcr.microsoft.com/azureml/openmpi3.1.2-cuda10.2-cudnn8-ubuntu18.04'\r\n        shm_size: '50g' \r\n```\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0\r\n- **Python version** : 3.7.9\r\n- **Virtual environment type and version** :  Conda 4.10.1\r\n- **Operating system** : mac\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1690/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1681", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1681/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1681/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1681/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1681", "id": 925257489, "node_id": "MDU6SXNzdWU5MjUyNTc0ODk=", "number": 1681, "title": "[Bug] HydraConfig is not set while resolving config with --cfg job --resolve", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12", "html_url": "https://github.com/facebookresearch/hydra/milestone/12", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12/labels", "id": 6846992, "node_id": "MDk6TWlsZXN0b25lNjg0Njk5Mg==", "number": 12, "title": "Hydra 1.1.1", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2021-06-11T16:45:59Z", "updated_at": "2021-08-20T20:01:47Z", "due_on": null, "closed_at": "2021-08-20T20:01:47Z"}, "comments": 0, "created_at": "2021-06-18T23:14:54Z", "updated_at": "2021-07-17T23:25:24Z", "closed_at": "2021-07-17T23:25:23Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\r\n$ python my_app.py  '+a=${hydra:runtime.cwd}/data/MNIST' --cfg job --resolve\r\n...\r\nomegaconf.errors.InterpolationResolutionError: ValueError raised while resolving interpolation: HydraConfig was not set\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1681/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1681/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1677", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1677/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1677/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1677/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1677", "id": 922663484, "node_id": "MDU6SXNzdWU5MjI2NjM0ODQ=", "number": 1677, "title": "[Bug] When using compose API, get error about `Could not override 'hydra/job_logging'. No match in the defaults list.`", "user": {"login": "adefossez", "id": 1990078, "node_id": "MDQ6VXNlcjE5OTAwNzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1990078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adefossez", "html_url": "https://github.com/adefossez", "followers_url": "https://api.github.com/users/adefossez/followers", "following_url": "https://api.github.com/users/adefossez/following{/other_user}", "gists_url": "https://api.github.com/users/adefossez/gists{/gist_id}", "starred_url": "https://api.github.com/users/adefossez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adefossez/subscriptions", "organizations_url": "https://api.github.com/users/adefossez/orgs", "repos_url": "https://api.github.com/users/adefossez/repos", "events_url": "https://api.github.com/users/adefossez/events{/privacy}", "received_events_url": "https://api.github.com/users/adefossez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-16T14:08:21Z", "updated_at": "2021-06-21T09:49:45Z", "closed_at": "2021-06-21T09:49:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nI am using the compose API. I just updated to version 1.1. In version 1.0.* everything was working fine.\r\nNow I get the following error:\r\n\r\n```\r\nhydra.errors.ConfigCompositionException: In 'config': Could not override 'hydra/job_logging'. No match in the defaults list.\r\n```\r\n\r\nAny idea why this is happening and how to solve it ? That would save me a lot of time. thanks :)", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1677/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1677/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1674", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1674/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1674/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1674/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1674", "id": 921758951, "node_id": "MDU6SXNzdWU5MjE3NTg5NTE=", "number": 1674, "title": "[Bug] negative list indices in variable interpolation", "user": {"login": "vmichals", "id": 1757177, "node_id": "MDQ6VXNlcjE3NTcxNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1757177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmichals", "html_url": "https://github.com/vmichals", "followers_url": "https://api.github.com/users/vmichals/followers", "following_url": "https://api.github.com/users/vmichals/following{/other_user}", "gists_url": "https://api.github.com/users/vmichals/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmichals/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmichals/subscriptions", "organizations_url": "https://api.github.com/users/vmichals/orgs", "repos_url": "https://api.github.com/users/vmichals/repos", "events_url": "https://api.github.com/users/vmichals/events{/privacy}", "received_events_url": "https://api.github.com/users/vmichals/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-06-15T20:11:00Z", "updated_at": "2021-06-17T20:06:30Z", "closed_at": "2021-06-17T20:06:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI'm trying to use variable interpolation to automatically set the input size of one model based on the last layer's size of another model. I tried to index into the list of layers of the input model with index -1 and am getting an `InterpolationKeyError`\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nUsing the following `cfg.yaml` and `main.py`, run `python main.py`.\r\n\r\n_cfg.yaml_:\r\n```\r\nmodel:\r\n    encoder:\r\n        hid_channels: [8, 16, 32]\r\n    decoder:\r\n        in_channels: ${model.encoder.hid_channels[-1]}\r\n```\r\n\r\n_main.py_:\r\n```\r\nimport hydra\r\nfrom hydra.utils import instantiate\r\n\r\nfrom omegaconf import DictConfig\r\n\r\n@hydra.main(config_path=\".\", config_name=\"cfg\")\r\ndef my_app(cfg: DictConfig) -> None:\r\n    model = instantiate(cfg.model)\r\n    import ipdb; ipdb.set_trace()\r\n\r\n\r\nif __name__ == '__main__':\r\n    my_app()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nError executing job with overrides: []\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 11, in my_app\r\n    model = instantiate(cfg.model)\r\n  File \"/home/vince/dreamerv2venv/lib/python3.8/site-packages/hydra/_internal/instantiate/_instantiate2.py\", line 175, in instantiate\r\n    OmegaConf.resolve(config)\r\nomegaconf.errors.InterpolationKeyError: Interpolation key 'model.encoder.hid_channels[-1]' not found\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\nThe last element of `model.encoder.hid_channels` should be written to `model.decoder.in_channels`.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : virtualenv 20.0.17\r\n- **Operating system** : Ubuntu 20.04.2 LTS", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1674/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1674/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1669", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1669/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1669/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1669/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1669", "id": 918721302, "node_id": "MDU6SXNzdWU5MTg3MjEzMDI=", "number": 1669, "title": "[Bug] Cannot use `target` kwarg when instantiating with `hydra.utils.instantiate()`", "user": {"login": "fabiocarrara", "id": 7997320, "node_id": "MDQ6VXNlcjc5OTczMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/7997320?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fabiocarrara", "html_url": "https://github.com/fabiocarrara", "followers_url": "https://api.github.com/users/fabiocarrara/followers", "following_url": "https://api.github.com/users/fabiocarrara/following{/other_user}", "gists_url": "https://api.github.com/users/fabiocarrara/gists{/gist_id}", "starred_url": "https://api.github.com/users/fabiocarrara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fabiocarrara/subscriptions", "organizations_url": "https://api.github.com/users/fabiocarrara/orgs", "repos_url": "https://api.github.com/users/fabiocarrara/repos", "events_url": "https://api.github.com/users/fabiocarrara/events{/privacy}", "received_events_url": "https://api.github.com/users/fabiocarrara/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1518816165, "node_id": "MDU6TGFiZWwxNTE4ODE2MTY1", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/In%20progress", "name": "In progress", "color": "569dbf", "default": false, "description": "Work in progress"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12", "html_url": "https://github.com/facebookresearch/hydra/milestone/12", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12/labels", "id": 6846992, "node_id": "MDk6TWlsZXN0b25lNjg0Njk5Mg==", "number": 12, "title": "Hydra 1.1.1", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2021-06-11T16:45:59Z", "updated_at": "2021-08-20T20:01:47Z", "due_on": null, "closed_at": "2021-08-20T20:01:47Z"}, "comments": 2, "created_at": "2021-06-11T12:59:48Z", "updated_at": "2021-06-17T02:57:21Z", "closed_at": "2021-06-17T02:57:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n`hydra.utils.instantiate()` seems to fail when trying to instantiate a class with a keyword argument called `target`.\r\nIt seems like the two keys `_target_` and `target` are clashing, and this raises a \r\n`TypeError: _call_target() got multiple values for argument 'target'`.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n**Minimal Code/Config snippet to reproduce**\r\nAvailable as a Colab Gists:\r\nhttps://colab.research.google.com/gist/fabiocarrara/6bf5abaecf3f84c1e83239f8af3b8219/hydra_instantiate_bug.ipynb\r\n\r\n**Stack trace/error message**\r\n```\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-4-616e52dc8a9b> in <module>()\r\n----> 1 foo = hydra.utils.instantiate(cfg.bar)\r\n      2 foo.target\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/_internal/instantiate/_instantiate2.py in instantiate(config, *args, **kwargs)\r\n    178         _convert_ = config.pop(_Keys.CONVERT, ConvertMode.NONE)\r\n    179 \r\n--> 180         return instantiate_node(config, *args, recursive=_recursive_, convert=_convert_)\r\n    181     else:\r\n    182         raise InstantiationException(\r\n\r\n/usr/local/lib/python3.7/dist-packages/hydra/_internal/instantiate/_instantiate2.py in instantiate_node(node, convert, recursive, *args)\r\n    247                         )\r\n    248                     kwargs[key] = _convert_node(value, convert)\r\n--> 249             return _call_target(target, *args, **kwargs)\r\n    250         else:\r\n    251             # If ALL or PARTIAL non structured, instantiate in dict and resolve interpolations eagerly.\r\n\r\nTypeError: _call_target() got multiple values for argument 'target'\r\n```\r\n\r\n## Expected Behavior\r\n`target` should be a permitted key name for callable/constructor's kwargs.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1\r\n- **Python version** : 3.7.10 (Colab)\r\n- **Virtual environment type and version** : none\r\n- **Operating system** :  Colab\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1669/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1669/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1668", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1668/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1668/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1668/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1668", "id": 918421367, "node_id": "MDU6SXNzdWU5MTg0MjEzNjc=", "number": 1668, "title": "[bug] Interpolation of `hydra/launcher` configuration name in defaults list causes `hydra.errors.ConfigCompositionException`", "user": {"login": "nikvaessen", "id": 7225987, "node_id": "MDQ6VXNlcjcyMjU5ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/7225987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikvaessen", "html_url": "https://github.com/nikvaessen", "followers_url": "https://api.github.com/users/nikvaessen/followers", "following_url": "https://api.github.com/users/nikvaessen/following{/other_user}", "gists_url": "https://api.github.com/users/nikvaessen/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikvaessen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikvaessen/subscriptions", "organizations_url": "https://api.github.com/users/nikvaessen/orgs", "repos_url": "https://api.github.com/users/nikvaessen/repos", "events_url": "https://api.github.com/users/nikvaessen/events{/privacy}", "received_events_url": "https://api.github.com/users/nikvaessen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12", "html_url": "https://github.com/facebookresearch/hydra/milestone/12", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/12/labels", "id": 6846992, "node_id": "MDk6TWlsZXN0b25lNjg0Njk5Mg==", "number": 12, "title": "Hydra 1.1.1", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 10, "state": "closed", "created_at": "2021-06-11T16:45:59Z", "updated_at": "2021-08-20T20:01:47Z", "due_on": null, "closed_at": "2021-08-20T20:01:47Z"}, "comments": 4, "created_at": "2021-06-11T08:29:02Z", "updated_at": "2021-06-15T02:02:52Z", "closed_at": "2021-06-15T02:02:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Describe the bug**\r\nBy switching from version `1.0` to `1.1`, this configuration:\r\n\r\n```yaml\r\ndefaults:\r\n  ...\r\n  - override hydra/launcher: ${oc.env:HYDRA_LAUNCHER}\r\n```\r\nthrows the following error:\r\n```\r\n$ HYDRA_FULL_ERROR=1 python main.py\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 20, in <module>\r\n    run_hydra_config()\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/main.py\", line 49, in decorated_main\r\n    _run_hydra(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 367, in _run_hydra\r\n    run_and_report(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 214, in run_and_report\r\n    raise ex\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 211, in run_and_report\r\n    return func()\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 368, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 87, in run\r\n    cfg = self.compose_config(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 564, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 146, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 239, in _load_configuration_impl\r\n    defaults_list = create_defaults_list(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 719, in create_defaults_list\r\n    defaults, tree = _create_defaults_list(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 689, in _create_defaults_list\r\n    defaults_tree = _create_defaults_tree(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 337, in _create_defaults_tree\r\n    ret = _create_defaults_tree_impl(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 420, in _create_defaults_tree_impl\r\n    return _expand_virtual_root(repo, root, overrides, skip_missing)\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 262, in _expand_virtual_root\r\n    subtree = _create_defaults_tree_impl(\r\n  File \"/home/nik/.cache/pypoetry/virtualenvs/hydra-bug-report-rkSIWX38-py3.8/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 550, in _create_defaults_tree_impl\r\n    raise ConfigCompositionException(\r\nhydra.errors.ConfigCompositionException: In 'hydra/config': Defaults List interpolation is only supported in the primary config\r\n\r\n```\r\n\r\n**To Reproduce**\r\n\r\nzip file with a stand-alone repo to reproduce: [hydra-core-bug-report.zip](https://github.com/omry/omegaconf/files/6636823/hydra-core-bug-report.zip)\r\n\r\n#### environment variables\r\n```\r\n# either `basic` or `slurm`\r\nHYDRA_LAUNCHER=basic\r\n```\r\n#### main python script \r\n``` python\r\n# main.py\r\nimport hydra\r\nfrom omegaconf import DictConfig, OmegaConf\r\nfrom dotenv import load_dotenv\r\n\r\n\r\n@hydra.main(config_path=\"config\", config_name=\"main\")\r\ndef run_hydra_config(cfg: DictConfig) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\nif __name__ == \"__main__\":\r\n    load_dotenv()\r\n    run_hydra_config()\r\n```\r\n#### configuration directory\r\n```yaml\r\n# config/main.yaml\r\ndefaults:\r\n  - override hydra/launcher: ${oc.env:HYDRA_LAUNCHER}\r\n```\r\n\r\n**Expected behavior**\r\n\r\nThe configuration should behave the same as explicitly writing down the configuration name instead of interpolating it:\r\n\r\n```yaml\r\ndefaults:\r\n  - override hydra/launcher: slurm\r\n```\r\n\r\n\r\n**Additional context**\r\n- [ ] - **Hydra Version** :   version: 1.1\r\n- [ ] Python version: 3.8\r\n- [ ] Operating system: ubuntu 20.04\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1668/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1662", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1662/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1662/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1662/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1662", "id": 916621716, "node_id": "MDU6SXNzdWU5MTY2MjE3MTY=", "number": 1662, "title": "[Bug] Overriding of structured config with config", "user": {"login": "bonlime", "id": 14337581, "node_id": "MDQ6VXNlcjE0MzM3NTgx", "avatar_url": "https://avatars.githubusercontent.com/u/14337581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bonlime", "html_url": "https://github.com/bonlime", "followers_url": "https://api.github.com/users/bonlime/followers", "following_url": "https://api.github.com/users/bonlime/following{/other_user}", "gists_url": "https://api.github.com/users/bonlime/gists{/gist_id}", "starred_url": "https://api.github.com/users/bonlime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bonlime/subscriptions", "organizations_url": "https://api.github.com/users/bonlime/orgs", "repos_url": "https://api.github.com/users/bonlime/repos", "events_url": "https://api.github.com/users/bonlime/events{/privacy}", "received_events_url": "https://api.github.com/users/bonlime/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-06-09T19:50:34Z", "updated_at": "2021-06-10T18:44:43Z", "closed_at": "2021-06-10T06:53:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nNot really sure that it's a bug, maybe this is a design choice.\r\n\r\nThe issue is similar to https://github.com/facebookresearch/hydra/issues/1515\r\nOverriding params from CLI works fine but doesn't work if we try to overwrite with another config file. \r\nThe Docs says \"Running the experiments from the command line requires prefixing the experiment choice with a +. The experiment config group is an **addition**, not an **override**.\" but it doesn't provide any way to add new parameters from experiment configs. \r\n\r\n## Checklist\r\n- [ x ] I checked on the latest version of Hydra\r\n- [ x ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n./temp_cfg/bug_test.yaml\r\n```yaml\r\n# @package _global_\r\n\r\ndefaults:\r\n  - overrides ui: null\r\n\r\nui:\r\n  width: 100\r\n  some_new_arg: 1000\r\n```\r\n\r\n./my_app.py\r\n```python\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\n\r\nfrom dataclasses import dataclass\r\nfrom omegaconf import OmegaConf\r\n\r\n@dataclass\r\nclass UserInterface:\r\n    width: int = 1024\r\n\r\n@dataclass\r\nclass MyConfig:\r\n    ui: UserInterface = UserInterface()\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(name=\"struct_config\", node=MyConfig)\r\n\r\n@hydra.main(config_path=\".\", config_name=\"struct_config\")\r\ndef my_app(cfg: MyConfig) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\n\r\nThis works fine: `python3 my_app.py +ui.some_new_arg=100`\r\n```\r\nui:\r\n  width: 1024\r\n  some_new_arg: 1000\r\n```\r\n\r\nBut this doesn't: `python3 my_app.py +temp_cfg=bug_test`\r\n```\r\nKey 'some_new_arg' not in 'UserInterface'\r\n    full_key: ui.some\r\n    reference_type=UserInterface\r\n    object_type=UserInterface\r\n```\r\n\r\n## Expected Behavior\r\n\r\nIt would be nice to have ability to add parameters from experiment configs\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0rc1\r\n- **Python version** : 3.7.6\r\n- **Virtual environment type and version** : None\r\n- **Operating system** : Ubuntu 16.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1662/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1662/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1659", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1659/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1659/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1659/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1659", "id": 916294779, "node_id": "MDU6SXNzdWU5MTYyOTQ3Nzk=", "number": 1659, "title": "[Bug] Error when using config with UTF characters", "user": {"login": "michaelitvin", "id": 5813969, "node_id": "MDQ6VXNlcjU4MTM5Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/5813969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelitvin", "html_url": "https://github.com/michaelitvin", "followers_url": "https://api.github.com/users/michaelitvin/followers", "following_url": "https://api.github.com/users/michaelitvin/following{/other_user}", "gists_url": "https://api.github.com/users/michaelitvin/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelitvin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelitvin/subscriptions", "organizations_url": "https://api.github.com/users/michaelitvin/orgs", "repos_url": "https://api.github.com/users/michaelitvin/repos", "events_url": "https://api.github.com/users/michaelitvin/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelitvin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 4, "created_at": "2021-06-09T14:47:47Z", "updated_at": "2021-06-09T22:28:07Z", "closed_at": "2021-06-09T22:28:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nAn exception is thrown when using Unicode chars in the config.\r\n\r\n\r\n## Workaround\r\nIn `hydra/core/utils.py`:\r\n```\r\ndef _save_config(cfg: DictConfig, filename: str, output_dir: Path) -> None:\r\n    output_dir.mkdir(parents=True, exist_ok=True)\r\n    yaml = OmegaConf.to_yaml(cfg).encode(\"utf8\")\r\n    with open(str(output_dir / filename), \"wb\") as file:\r\n        file.write(yaml)\r\n```\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\nUse a `config.yaml` with unicode chars, and make Hydra store it in `outputs/`.\r\n\r\n## Minimal example\r\nUse the tutorial code:\r\n```\r\nfrom omegaconf import DictConfig, OmegaConf\r\nimport hydra\r\n\r\n@hydra.main(config_name='config')\r\ndef my_app(cfg: DictConfig) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\nAlong with a config that has Unicode chars:\r\n`config.yaml`:\r\n```\r\na: \u05d0\r\n```\r\n\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\n  File \"D:\\proj\\video-pipeline\\venv38\\lib\\site-packages\\hydra\\main.py\", line 32, in decorated_main\r\n    _run_hydra(\r\n  File \"D:\\proj\\video-pipeline\\venv38\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 346, in _run_hydra\r\n    run_and_report(\r\n  File \"D:\\proj\\video-pipeline\\venv38\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 201, in run_and_report\r\n    raise ex\r\n  File \"D:\\proj\\video-pipeline\\venv38\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"D:\\proj\\video-pipeline\\venv38\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 347, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"D:\\proj\\video-pipeline\\venv38\\lib\\site-packages\\hydra\\_internal\\hydra.py\", line 107, in run\r\n    return run_job(\r\n  File \"D:\\proj\\video-pipeline\\venv38\\lib\\site-packages\\hydra\\core\\utils.py\", line 122, in run_job\r\n    _save_config(task_cfg, \"config.yaml\", hydra_output)\r\n  File \"D:\\proj\\video-pipeline\\venv38\\lib\\site-packages\\hydra\\core\\utils.py\", line 70, in _save_config\r\n    file.write(OmegaConf.to_yaml(cfg))\r\n  File \"C:\\Users\\micha\\AppData\\Local\\Programs\\Python\\Python38\\lib\\encodings\\cp1252.py\", line 19, in encode\r\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\r\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 267-271: character maps to <undefined>\r\n\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.6\r\n- **Python version** : 3.8.10\r\n- **Virtual environment type and version** : pip\r\n- **Operating system** : Windows 10\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1659/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1647", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1647/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1647/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1647/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1647", "id": 907519366, "node_id": "MDU6SXNzdWU5MDc1MTkzNjY=", "number": 1647, "title": "[Bug] tilde ~ in override value will not work", "user": {"login": "roytseng-tw", "id": 5027936, "node_id": "MDQ6VXNlcjUwMjc5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/5027936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roytseng-tw", "html_url": "https://github.com/roytseng-tw", "followers_url": "https://api.github.com/users/roytseng-tw/followers", "following_url": "https://api.github.com/users/roytseng-tw/following{/other_user}", "gists_url": "https://api.github.com/users/roytseng-tw/gists{/gist_id}", "starred_url": "https://api.github.com/users/roytseng-tw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roytseng-tw/subscriptions", "organizations_url": "https://api.github.com/users/roytseng-tw/orgs", "repos_url": "https://api.github.com/users/roytseng-tw/repos", "events_url": "https://api.github.com/users/roytseng-tw/events{/privacy}", "received_events_url": "https://api.github.com/users/roytseng-tw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-05-31T14:26:59Z", "updated_at": "2021-07-10T01:56:20Z", "closed_at": "2021-06-01T22:26:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\ntilde (~) at the beginning of the value results in `hydra.errors.OverrideParseException`\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```\r\npython main.py hydra.run.dir=~/outputs\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nLexerNoViableAltException: hydra.run.dir=~/outputs\r\n                                         ^\r\nSee https://hydra.cc/docs/next/advanced/override_grammar/basic for details\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\nwork without error.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.6\r\n- **Python version** :  3.6\r\n- **Virtual environment type and version** :  pyenv 1.2.21\r\n- **Operating system** :  linux ubuntu 16.04.3 LTS\r\n\r\n## Additional context\r\nNone.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1647/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1647/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1640", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1640/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1640/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1640/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1640", "id": 902765122, "node_id": "MDU6SXNzdWU5MDI3NjUxMjI=", "number": 1640, "title": "website bug: relative links get broken on page refresh", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-26T18:10:20Z", "updated_at": "2021-06-04T18:23:29Z", "closed_at": "2021-06-04T18:23:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nA \"Page Not Found\" error is displayed when clicking relative links after performing a page refresh.\r\n\r\n## To reproduce\r\n\r\nStep 1:\r\n- In a web browser, go to this url: https://hydra.cc/docs/next/plugins/colorlog\r\nNear the bottom of the webpage there is a sentence that says \"Check [this page] for more information.\"\r\nThe [this page] link works.\r\n\r\nStep 2:\r\n- Refresh the webpage.\r\nThe url is changed to https://hydra.cc/docs/next/plugins/colorlog/ (note the trailing slash!).\r\n\r\nStep 3:\r\n- Click on the [this page] link. It now gives a \"Page Not Found\" error.\r\n- This is because, in the `hydra.git/website/docs/plugins/colorlog.md` file,\r\nthe [this page] link is defined with a relative path\r\n`[this page](../patterns/configuring_plugins)`\r\nand the trailing slash on the URL messes up the relative path resolution.\r\n\r\nI tried this in several web browsers (Firefox, Chrome, Safari). All the\r\nbrowsers added a trailing slash to the URL when the page was refreshed.\r\n\r\nThe bug only gets triggered with some of the relative links in the docs.\r\n\r\nI'm not sure why the trailing slashes are getting added to the URLs, but I think that [this](https://github.com/facebook/docusaurus/issues/3372) docusaurus issue is related...\r\n\r\n## System information\r\n- **Hydra Version** :  master branch\r\n- **Virtual environment type and version** : tested with live webseite and with local development server\r\n- **Operating system** : tested with Ubuntu and MacOS", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1640/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1640/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1629", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1629/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1629/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1629/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1629", "id": 896121814, "node_id": "MDU6SXNzdWU4OTYxMjE4MTQ=", "number": 1629, "title": "[Bug]", "user": {"login": "bambers936", "id": 77102463, "node_id": "MDQ6VXNlcjc3MTAyNDYz", "avatar_url": "https://avatars.githubusercontent.com/u/77102463?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bambers936", "html_url": "https://github.com/bambers936", "followers_url": "https://api.github.com/users/bambers936/followers", "following_url": "https://api.github.com/users/bambers936/following{/other_user}", "gists_url": "https://api.github.com/users/bambers936/gists{/gist_id}", "starred_url": "https://api.github.com/users/bambers936/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bambers936/subscriptions", "organizations_url": "https://api.github.com/users/bambers936/orgs", "repos_url": "https://api.github.com/users/bambers936/repos", "events_url": "https://api.github.com/users/bambers936/events{/privacy}", "received_events_url": "https://api.github.com/users/bambers936/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-05-20T00:49:35Z", "updated_at": "2021-05-20T04:16:19Z", "closed_at": "2021-05-20T00:53:16Z", "author_association": "NONE", "active_lock_reason": "spam", "body": "# \ud83d\udc1b Bug\n## Description\n<!-- A clear and concise description of what the bug is. -->\n\n## Checklist\n- [ ] I checked on the latest version of Hydra\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\n\n## To reproduce\n\n** Minimal Code/Config snippet to reproduce **\n\n** Stack trace/error message **\n```\n// Paste the bad output here!\n```\n\n## Expected Behavior\n<!-- A clear and concise description of what you expected to happen. -->\n\n## System information\n- **Hydra Version** :  \n- **Python version** : \n- **Virtual environment type and version** : \n- **Operating system** : \n\n## Additional context\nAdd any other context about the problem here.\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1629/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1629/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1621", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1621/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1621/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1621/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1621", "id": 893401055, "node_id": "MDU6SXNzdWU4OTM0MDEwNTU=", "number": 1621, "title": "[Bug] Recent release possibly mutating the structured config object", "user": {"login": "jgbos", "id": 2148522, "node_id": "MDQ6VXNlcjIxNDg1MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/2148522?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgbos", "html_url": "https://github.com/jgbos", "followers_url": "https://api.github.com/users/jgbos/followers", "following_url": "https://api.github.com/users/jgbos/following{/other_user}", "gists_url": "https://api.github.com/users/jgbos/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgbos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgbos/subscriptions", "organizations_url": "https://api.github.com/users/jgbos/orgs", "repos_url": "https://api.github.com/users/jgbos/repos", "events_url": "https://api.github.com/users/jgbos/events{/privacy}", "received_events_url": "https://api.github.com/users/jgbos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-05-17T14:37:32Z", "updated_at": "2021-05-18T19:12:36Z", "closed_at": "2021-05-18T19:12:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nJust playing around with Hydra and noticed the behavior below.  It only happens for the `submitit` and `joblib` launchers and not the `basic` launcher (that's all I've tested on).\r\n\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nFirst I define a sample structured config.\r\n\r\n```python\r\nfrom dataclasses import dataclass\r\n\r\nfrom hydra.core.config_store import ConfigStore\r\n\r\n\r\n@dataclass\r\nclass Test:\r\n    _target_: str = \"torch.nn.Softmax\"\r\n    dim: int = 1\r\n\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(name=\"test_config\", node=Test)\r\n```\r\n\r\nRunning the following command outputs:\r\n```python\r\n>>> from omegaconf import OmegaConf\r\n>>> OmegaConf.create(Test)\r\n{'_target_': 'torch.nn.Softmax', 'dim': 1}\r\n```\r\n\r\nNow if I run a `multirun` experiment with either `submitit` or `joblib` launchers (all I have to work with)\r\n\r\n```python\r\nfrom hydra._internal.hydra import Hydra\r\nfrom hydra._internal.utils import create_config_search_path\r\nfrom hydra.core.global_hydra import GlobalHydra\r\nfrom hydra.utils import instantiate\r\n\r\nsearch_path = create_config_search_path(None)\r\nhydra = Hydra.create_main_hydra2(task_name=\"test\", config_search_path=search_path)\r\nhydra.multirun(\r\n    config_name=\"test_config\",\r\n    task_function=instantiate,\r\n    overrides=[\"hydra/launcher=submitit_local\"],\r\n)\r\nGlobalHydra.instance().clear()\r\n\r\n```\r\n\r\nand then try to create the object again:\r\n\r\n```python\r\n>>> OmegaConf.create(Test)\r\n{}\r\n>>> OmegaConf.create(Test)._metadata\r\nContainerMetadata(ref_type=typing.Any, object_type=<class '__main__.Test'>, optional=True, key=None, flags={}, flags_root=False, resolver_cache=defaultdict(<class 'dict'>, {}), key_type=typing.Any, element_type=typing.Any)\r\n```\r\n\r\nThe only way to create the object again is to restart my notebook.\r\n\r\n## Expected Behavior\r\n\r\nI would expect no issues with creating the object after a run.  It seems some sort of mutation is happening on the object, but I'm not sure where this is happening.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.rc1\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** :  conda\r\n- **Operating system** :  Linux\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1621/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1613", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1613/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1613/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1613/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1613", "id": 881081834, "node_id": "MDU6SXNzdWU4ODEwODE4MzQ=", "number": 1613, "title": "[Bug] pdb support is broken", "user": {"login": "LouChao98", "id": 12984553, "node_id": "MDQ6VXNlcjEyOTg0NTUz", "avatar_url": "https://avatars.githubusercontent.com/u/12984553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LouChao98", "html_url": "https://github.com/LouChao98", "followers_url": "https://api.github.com/users/LouChao98/followers", "following_url": "https://api.github.com/users/LouChao98/following{/other_user}", "gists_url": "https://api.github.com/users/LouChao98/gists{/gist_id}", "starred_url": "https://api.github.com/users/LouChao98/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LouChao98/subscriptions", "organizations_url": "https://api.github.com/users/LouChao98/orgs", "repos_url": "https://api.github.com/users/LouChao98/repos", "events_url": "https://api.github.com/users/LouChao98/events{/privacy}", "received_events_url": "https://api.github.com/users/LouChao98/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 3, "created_at": "2021-05-08T17:24:55Z", "updated_at": "2021-05-11T00:14:30Z", "closed_at": "2021-05-11T00:14:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nIn patch #1239, debugger can work with hydra by setting `HYDRA_FULL_ERROR=1` , but pr #1465 breaks it. In #1465, `HydraJobException` is always raised if the job raise an exception, such that debugger will catch `HydraJobException` instead of the original exceptions.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```python\r\n# mini.py\r\nimport hydra\r\n\r\n@hydra.main()\r\ndef foo(cfg):\r\n    raise Exception\r\n\r\nfoo()\r\n```\r\nthen run `HYDRA_FULL_ERROR=1 python -m pdb -c continue mini.py` in shell.\r\n\r\npdb catch `HydraJobException` in `hydra/core/utils.py`\r\n\r\n## Expected Behavior\r\npdb catch `Exception` in `foo`.\r\n\r\n## System information\r\n- **Hydra Version** : 1.1.0dev6\r\n- **Python version** : 3.8.8\r\n- **Virtual environment type and version** : \r\n- **Operating system** : linux 5.9.10\r\n\r\n## Additional context\r\n\r\nI think add `if _is_env_set(\"HYDRA_FULL_ERROR\") or is_under_debugger():` in `JobReturn.return_value` can temporarily fix this.\r\n```python\r\n@dataclass\r\nclass JobReturn:\r\n    ....\r\n\r\n    @property\r\n    def return_value(self) -> Any:\r\n        assert self.status != JobStatus.UNKNOWN, \"return_value not yet available\"\r\n        if self.status == JobStatus.COMPLETED:\r\n            return self._return_value\r\n        else:\r\n            if _is_env_set(\"HYDRA_FULL_ERROR\") or is_under_debugger():  # add this\r\n                raise self._return_value\r\n            raise HydraJobException(\r\n                f\"Error executing job with overrides: {self.overrides}\"\r\n            ) from self._return_value\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1613/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1613/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1608", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1608/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1608/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1608/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1608", "id": 877522486, "node_id": "MDU6SXNzdWU4Nzc1MjI0ODY=", "number": 1608, "title": "[Bug] Removing multiple items from the defaults list", "user": {"login": "fses91", "id": 10779148, "node_id": "MDQ6VXNlcjEwNzc5MTQ4", "avatar_url": "https://avatars.githubusercontent.com/u/10779148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fses91", "html_url": "https://github.com/fses91", "followers_url": "https://api.github.com/users/fses91/followers", "following_url": "https://api.github.com/users/fses91/following{/other_user}", "gists_url": "https://api.github.com/users/fses91/gists{/gist_id}", "starred_url": "https://api.github.com/users/fses91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fses91/subscriptions", "organizations_url": "https://api.github.com/users/fses91/orgs", "repos_url": "https://api.github.com/users/fses91/repos", "events_url": "https://api.github.com/users/fses91/events{/privacy}", "received_events_url": "https://api.github.com/users/fses91/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-06T13:51:39Z", "updated_at": "2021-05-07T18:26:55Z", "closed_at": "2021-05-07T18:26:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug \r\n## Description \r\nHi, my problem is the following:\r\n\r\nI am trying to run two different config settings: Setting1 and Setting2 as shown below, with the repository mentioned below, for the Setting2 I got an IndexError. I just want to remove *grp2* and *grp4* from the defaults list. If I remove only one then it works. I am using https://hydra.cc/docs/advanced/override_grammar/basic#modifying-the-defaults-list as reference.\r\n\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repository (https://github.com/fses91/improved-spork).\r\n\r\n## To reproduce\r\n\r\n### Setting 1:\r\nCommand-line arguments:\r\n```\r\npython main.py ~grp2 \r\n```\r\nOutput:\r\n```\r\ngrp1:\r\n  text: grp1\r\ngrp3:\r\n  text: grp3\r\ngrp4:\r\n  text: grp4\r\n```\r\n\r\n### Setting 2:\r\nCommand-line arguments:\r\n```\r\npython main.py ~grp2 ~grp4\r\n```\r\n\r\nOutput:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/florian/PycharmProjects/pythonProject1/venv/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/home/florian/PycharmProjects/pythonProject1/venv/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 350, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/florian/PycharmProjects/pythonProject1/venv/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 104, in run\r\n    run_mode=RunMode.RUN,\r\n  File \"/home/florian/PycharmProjects/pythonProject1/venv/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 512, in compose_config\r\n    from_shell=from_shell,\r\n  File \"/home/florian/PycharmProjects/pythonProject1/venv/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 156, in load_configuration\r\n    from_shell=from_shell,\r\n  File \"/home/florian/PycharmProjects/pythonProject1/venv/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 252, in _load_configuration\r\n    ConfigLoaderImpl._apply_overrides_to_defaults(config_group_overrides, defaults)\r\n  File \"/home/florian/PycharmProjects/pythonProject1/venv/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 418, in _apply_overrides_to_defaults\r\n    del defaults[pair.idx]\r\nIndexError: list assignment index out of range\r\n```\r\n\r\n## Expected Behavior\r\nI expect the following output for Setting2, where *grp2* and *grp4* are removed.\r\n```\r\ngrp1:\r\n  text: grp1\r\ngrp3:\r\n  text: grp3\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.6\r\n- **Python version** : 3.7.9\r\n- **Virtual environment type and version** : [just using hydra and python for illustration purposes]\r\n- **Operating system** : Ubuntu 20.04.2 LTS\r\n\r\n## Additional context\r\nI think the problem lies here https://github.com/facebookresearch/hydra/blob/v1.0.6/hydra/_internal/config_loader_impl.py#L418, because we are removing configs based on the index, it is no problem for the first removal, but for 2 or more the indices in the list are not valid anymore, because some items were already removed. Another problem that can occur is that we are removing the wrong default values because the indices are not matching anymore.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1608/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1606", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1606/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1606/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1606/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1606", "id": 876811558, "node_id": "MDU6SXNzdWU4NzY4MTE1NTg=", "number": 1606, "title": "[Bug] Underlying type lost in some scenarios", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 1, "created_at": "2021-05-05T20:33:08Z", "updated_at": "2021-05-06T01:16:56Z", "closed_at": "2021-05-06T01:16:56Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Config:\r\n```\r\n$ tree conf/\r\nconf/\r\n\u2514\u2500\u2500 tasks\r\n    \u2514\u2500\u2500 task3.yaml\r\n\r\n$ cat conf/tasks/task3.yaml\r\ntask3:\r\n  name: task3\r\n```\r\n\r\nCode:\r\n```python\r\nfrom dataclasses import dataclass, field\r\n\r\nfrom omegaconf import MISSING, OmegaConf\r\nfrom typing import *\r\nfrom hydra.core.config_store import ConfigStore\r\nimport hydra\r\n\r\n\r\n@dataclass\r\nclass Task:\r\n    name: str\r\n\r\n\r\n@dataclass\r\nclass Config:\r\n    defaults: Any = field(\r\n        default_factory=lambda: [\r\n            {\"tasks\": [\"task1\", \"task3\"]},\r\n        ]\r\n    )\r\n\r\n    tasks: Dict[str, Task] = MISSING\r\n\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(name=\"config\", node=Config)\r\ncs.store(group=\"tasks\", name=\"task1\", node={\"task1\": Task(name=\"task1\")})\r\ncs.store(group=\"tasks\", name=\"task2\", node={\"task2\": Task(name=\"task2\")})\r\n\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef main(cfg: Config):\r\n    print(OmegaConf.to_yaml(cfg))\r\n    assert OmegaConf.get_type(cfg.tasks.task3) is Task # <<==========  FAILS\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1606/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1606/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1600", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1600/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1600/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1600/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1600", "id": 874708062, "node_id": "MDU6SXNzdWU4NzQ3MDgwNjI=", "number": 1600, "title": "[Bug] Override grammar: quoted strings ending with a trailing backslash may trigger parsing errors", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-05-03T16:10:43Z", "updated_at": "2021-05-06T17:26:33Z", "closed_at": "2021-05-06T17:26:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nThe following override examples cause exceptions (note: there is escaping from the shell, so when using `\\\\` below, Hydra only sees `\\`, and escaped quotes are also replaced, e.g. `\\\"` -> `\"`):\r\n```bash\r\npython my_app.py \"+foo=['#\\\\', 'x']\"  # case 1a\r\npython my_app.py \"+foo={a: '#\\\\', b: 'x'}\"  # case 2a\r\npython my_app.py \"+foo=['#\\\\\\\\', 'x']\"  # case 3a\r\npython my_app.py \"+foo={a: '#\\\\\\\\', b: 'x'}\"  # case 4a\r\n```\r\n\r\nNote that if the second string is using double quotes then there is no exception:\r\n```bash\r\npython my_app.py \"+foo=['#\\\\', \\\"x\\\"]\"  # case 1b\r\npython my_app.py \"+foo={a: '#\\\\', b: \\\"x\\\"}\"  # case 2b\r\npython my_app.py \"+foo=['#\\\\\\\\', \\\"x\\\"]\"  # case 3b\r\npython my_app.py \"+foo={a: '#\\\\\\\\', b: \\\"x\\\"}\"  # case 4b\r\n```\r\n\r\n## Expected behavior\r\n\r\nThe fix to this issue should make it so that:\r\n* Using single or double quotes in the second string ('x' vs \"x\") yields the same result (i.e., cases Xa and Xb should be similar)\r\n* Cases 1 and 2 trigger an exception\r\n* Cases 3 and 4 run without exception, with the first string containing characters `#\\` (i.e., with a single backslash), compared to the current behavior where 3b and 4b yield `#\\\\`\r\n\r\n## Migration instructions\r\n\r\nIf a working string in Hydra 1.0 triggers an exception or behaves unexpectedly in Hydra 1.1, this means some `\\` need to be properly escaped. Here are two examples (where again, `\\` are doubled because of shell escaping):\r\n```\r\n(Hydra 1.0)                           -> (Hydra 1.1)\r\npython my_app.py \"+foo='abc\\\\'\"       -> python my_app.py \"+foo='abc\\\\\\\\'\"        # abc\\\r\npython my_app.py \"+foo='abc\\\\\\\\'def'\" -> python my_app.py \"+foo='abc\\\\\\\\\\\\'def'\"  # abc\\'def\r\n```\r\n\r\n**Are you willing to open a pull request?** (See [CONTRIBUTING](../../CONTRIBUTING.md))\r\n\r\nYes I will.\r\n\r\n## Additional context\r\n\r\nThis is caused by the definition of `QUOTED_VALUE` in the grammar, similar to OmegaConf's issue https://github.com/omry/omegaconf/issues/617", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1600/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1592", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1592/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1592/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1592/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1592", "id": 873189351, "node_id": "MDU6SXNzdWU4NzMxODkzNTE=", "number": 1592, "title": "[Bug] Config composition error with latest version of OmegaConf", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-04-30T19:48:30Z", "updated_at": "2021-04-30T21:09:45Z", "closed_at": "2021-04-30T21:09:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nWhen using OmegaConf at commit 2dd15f9 (first commit where this problem occurs), there are multiple Hydra tests failures, for instance:\r\n\r\n```\r\npytest \"tests/test_basic_launcher.py::TestBasicLauncher::test_sweep_1_job[basic-overrides0]\"\r\n(...)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nself = __INVALID__, value = None\r\n\r\n    def validate_and_convert(self, value: Any) -> Any:\r\n        \"\"\"\r\n        Validates input and converts to canonical form\r\n        :param value: input value\r\n        :return: converted value (\"100\" may be converted to 100 for example)\r\n        \"\"\"\r\n        if value is None:\r\n            if self._is_optional():\r\n                return None\r\n>           raise ValidationError(\"Non optional field cannot be assigned None\")\r\nE           hydra.errors.ConfigCompositionException\r\n\r\n../omegaconf/omegaconf/nodes.py:55: ConfigCompositionException\r\n```\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [X] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nUse master branch of Hydra with OmegaConf's commit 2dd15f9\r\n\r\n## Additional context\r\n\r\nThis might actually be an OmegaConf bug (I'm not sure).", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1592/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1592/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1583", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1583/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1583/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1583/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1583", "id": 870355330, "node_id": "MDU6SXNzdWU4NzAzNTUzMzA=", "number": 1583, "title": "[Bug] Hydra-Ray plugin can only launch jobs on the head node", "user": {"login": "samuelstanton", "id": 22999782, "node_id": "MDQ6VXNlcjIyOTk5Nzgy", "avatar_url": "https://avatars.githubusercontent.com/u/22999782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samuelstanton", "html_url": "https://github.com/samuelstanton", "followers_url": "https://api.github.com/users/samuelstanton/followers", "following_url": "https://api.github.com/users/samuelstanton/following{/other_user}", "gists_url": "https://api.github.com/users/samuelstanton/gists{/gist_id}", "starred_url": "https://api.github.com/users/samuelstanton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samuelstanton/subscriptions", "organizations_url": "https://api.github.com/users/samuelstanton/orgs", "repos_url": "https://api.github.com/users/samuelstanton/repos", "events_url": "https://api.github.com/users/samuelstanton/events{/privacy}", "received_events_url": "https://api.github.com/users/samuelstanton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-04-28T20:32:09Z", "updated_at": "2021-04-29T16:53:46Z", "closed_at": "2021-04-29T16:53:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nMulti-node support for the Hydra-Ray plugin is currently broken. Although the Ray client is able to launch worker nodes, the worker nodes are unable to connect to the head node Ray runtime because the head IP address is not getting communicated to the worker nodes. The plugin config schema is based off of the Ray examples, such as this one,\r\n\r\nhttps://github.com/ray-project/ray/blob/master/python/ray/autoscaler/aws/example-full-legacy.yaml\r\n\r\nThe problem is in `worker_start_ray_commands`. Currently\r\n these commands are set as follows (just like the Ray example):\r\n```\r\n    worker_start_ray_commands: [\r\n            \"ray stop\",\r\n            \"ulimit -n 65536; ray start --address=$RAY_HEAD_IP:6379 --object-manager-port=8076\",\r\n}\r\n```\r\n\r\nThe issue is that `RAY_HEAD_IP` is never actually set as an environment variable on the worker node. In the Ray codebase it looks like they use a `export RAY_HEAD_IP=x.x.x.x` prefix whenever they call the worker startup commands.\r\n\r\nhttps://github.com/ray-project/ray/blob/42565d5bbe56412402e0126cf41fb92f6a411810/python/ray/autoscaler/_private/autoscaler.py#L604\r\n\r\nIt seems like that service is no longer getting called when the cluster is launched with the plugin, so the worker node can't identify the head node at all. I've verified that I can manually connect the worker node to the head node.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nI haven't made a stripped down version of the program yet, and it fails silently as all the jobs run sequentially on the head node. The worker node is there, but it isn't being used. You can see this happening if you connect to the Ray dashboard on the head node.\r\n\r\n## Expected Behavior\r\nThe worker nodes need some way of identifying the head node IP address so they can connect to the head node runtime. Once that happens, the jobs should be distributed to the worker nodes instead of all being executed by the head node.\r\n\r\n## System information\r\n- **Hydra Version** : hydra-core==1.1.0.dev5, hydra-ray-launcher==0.1.3\r\n- **Python version** : 3.8.8\r\n- **Virtual environment type and version** : conda 4.9.2\r\n- **Operating system** : Ubuntu 18.04\r\n\r\n## Additional context\r\n\r\nI'm willing to make a PR to fix the issue, the main issue I'm having is that I can't come up with a good way to determine the head node address and update the config before calling `ray up`. There's something of a chicken-and-egg problem the way it's currently structured. You can't call `ray up` until you know the host node IP address and update `worker_start_ray_commands`, but you won't know the host node IP address until _after_ you've called `ray up` (unless you are statically assigning the IP address). Obviously within `ray up` this isn't an issue, but it doesn't seem like the API exposes that kind of operability (as far as I know).\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1583/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1583/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1577", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1577/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1577/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1577/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1577", "id": 868878365, "node_id": "MDU6SXNzdWU4Njg4NzgzNjU=", "number": 1577, "title": "[Bug] mismatched input '=' expecting <EOF>", "user": {"login": "summelon", "id": 52701013, "node_id": "MDQ6VXNlcjUyNzAxMDEz", "avatar_url": "https://avatars.githubusercontent.com/u/52701013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/summelon", "html_url": "https://github.com/summelon", "followers_url": "https://api.github.com/users/summelon/followers", "following_url": "https://api.github.com/users/summelon/following{/other_user}", "gists_url": "https://api.github.com/users/summelon/gists{/gist_id}", "starred_url": "https://api.github.com/users/summelon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/summelon/subscriptions", "organizations_url": "https://api.github.com/users/summelon/orgs", "repos_url": "https://api.github.com/users/summelon/repos", "events_url": "https://api.github.com/users/summelon/events{/privacy}", "received_events_url": "https://api.github.com/users/summelon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-27T13:59:31Z", "updated_at": "2021-04-28T04:32:28Z", "closed_at": "2021-04-28T04:32:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThanks for your great work!\r\n\r\nUsing hydra with Pytorch Lightning.\r\nwhen I was overriding pretrained path:\r\n```shell=\r\npython3 main.py basic.pretrained='log/byol/resnet18/cifar10_byol_setting/checkpoints/epoch=999-step=87999.ckpt'\r\n```\r\nThe error came out:\r\n`mismatched input '=' expecting <EOF>`\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n- `configs.yaml`:\r\n```yaml\r\nbasic:\r\n  pretrained: null\r\n```\r\n- Run:\r\n```shell=\r\npython3 main.py basic.pretrained='log/byol/resnet18/cifar10_byol_setting/checkpoints/epoch=999-step=87999.ckpt'\r\n```\r\n** Stack trace/error message **\r\n```\r\nmismatched input '=' expecting <EOF>\r\nSee https://hydra.cc/docs/next/advanced/override_grammar/basic for details\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\nIt seems that Hydra uses the `=` sign to tokenize each overriding.\r\nShould I adjust this error by changing my checkpoint name? (which is default in PyTorch Lightning)\r\nOr there is any way to fix this?\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev5\r\n- **Python version** : python3.6\r\n- **Virtual environment type and version** : \r\n- **Operating system** : Ubuntu18.04\r\n\r\n## Additional context\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1577/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1577/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1572", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1572/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1572/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1572/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1572", "id": 866343612, "node_id": "MDU6SXNzdWU4NjYzNDM2MTI=", "number": 1572, "title": "[Bug] Params with default MISSING value in the Structured Config Schema don't get parsed from the command line", "user": {"login": "danielgafni", "id": 49863538, "node_id": "MDQ6VXNlcjQ5ODYzNTM4", "avatar_url": "https://avatars.githubusercontent.com/u/49863538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielgafni", "html_url": "https://github.com/danielgafni", "followers_url": "https://api.github.com/users/danielgafni/followers", "following_url": "https://api.github.com/users/danielgafni/following{/other_user}", "gists_url": "https://api.github.com/users/danielgafni/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielgafni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielgafni/subscriptions", "organizations_url": "https://api.github.com/users/danielgafni/orgs", "repos_url": "https://api.github.com/users/danielgafni/repos", "events_url": "https://api.github.com/users/danielgafni/events{/privacy}", "received_events_url": "https://api.github.com/users/danielgafni/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-04-23T18:35:01Z", "updated_at": "2021-04-25T20:56:48Z", "closed_at": "2021-04-25T20:56:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI'm trying to reproduce the code from [the documencation](https://hydra.cc/docs/next/tutorials/structured_config/defaults) on the defaults list. I want to have a param with no default value (`MISSING`) for my `Structured Config Schema` and also have this param not specified in my `config.yaml` (`???`). I'm doing this because I don't want to get the `???` values for the param when running the script without specifying it, I want to get an error in this case (asking the user to specify the param).\r\n\r\nFor some reason, currently Hydra does not correctly parse the command line input and is completely missing this param even if it is in fact specified.\r\n\r\n## Checklist\r\n- [ x] I checked on the latest version of Hydra.\r\n- [ x] I created a minimal [repo](https://github.com/danielgafni/hydra-structured-config-schema-default-missing-bug) that reproduces the bug.\r\n\r\n## To reproduce\r\n\r\n`config.yaml`\r\n\r\n```yaml\r\ndefaults:\r\n  - base_config\r\n\r\nparam: ???\r\n```\r\n\r\n`configs/config.py`\r\n\r\n```python\r\nfrom dataclasses import dataclass, field\r\nfrom omegaconf import MISSING, DictConfig, OmegaConf\r\nfrom typing import List, Any\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\n\r\ndefaults = [\r\n    {\"param\": MISSING},\r\n]\r\n\r\n\r\n@dataclass\r\nclass Config:\r\n    defaults: List[Any] = field(default_factory=lambda: defaults)\r\n\r\n    param: str = MISSING\r\n\r\n\r\ncs = ConfigStore()\r\ncs.store(name=\"base_config\", node=Config)\r\n\r\n\r\n@hydra.main(config_path=\"configs\", config_name=\"config\")\r\ndef main(cfg: DictConfig):\r\n    print(OmegaConf.to_yaml(cfg=cfg))\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nNow I\u2019m getting this error:\r\n```\r\n\u2570\u2500\u276f python config.py param=foo\r\nYou must specify 'param', e.g, param=<OPTION>\r\nAvailable options:\r\n\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n\r\n```\r\n\r\nAm I doing something wrong?\r\n\r\n## Expected Behavior\r\nparam should be passed to the script\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev5\r\n- **Python version** : 3.7.10\r\n- **Virtual environment type and version** : Poetry version 1.1.6\r\n- **Operating system** : Arch Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1572/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1572/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1568", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1568/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1568/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1568/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1568", "id": 864758524, "node_id": "MDU6SXNzdWU4NjQ3NTg1MjQ=", "number": 1568, "title": "[Bug] Incorrect wrapper config handling", "user": {"login": "topshik", "id": 6764141, "node_id": "MDQ6VXNlcjY3NjQxNDE=", "avatar_url": "https://avatars.githubusercontent.com/u/6764141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topshik", "html_url": "https://github.com/topshik", "followers_url": "https://api.github.com/users/topshik/followers", "following_url": "https://api.github.com/users/topshik/following{/other_user}", "gists_url": "https://api.github.com/users/topshik/gists{/gist_id}", "starred_url": "https://api.github.com/users/topshik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topshik/subscriptions", "organizations_url": "https://api.github.com/users/topshik/orgs", "repos_url": "https://api.github.com/users/topshik/repos", "events_url": "https://api.github.com/users/topshik/events{/privacy}", "received_events_url": "https://api.github.com/users/topshik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-04-22T09:49:36Z", "updated_at": "2021-04-29T08:15:44Z", "closed_at": "2021-04-29T08:15:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhile having two scripts and config file in the same folder, I cannot import a function decorated with `hydra.main`\r\n\r\n## Checklist\r\n- [+] I checked on the latest version of Hydra\r\n- [+] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nTree:\r\n```\r\n.\r\n\u251c\u2500\u2500 conf.yaml\r\n\u251c\u2500\u2500 first.py\r\n\u2514\u2500\u2500 second.py\r\n```\r\n```\r\n# conf.yaml\r\na: 123\r\n```\r\n\r\n```\r\n# first.py\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\n\r\n@hydra.main(config_path=\".\", config_name=\"./conf.yaml\")\r\ndef main(config: DictConfig) -> None:\r\n    print(config.a)\r\n\r\n\r\ndef entry():\r\n    main()\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n```\r\n# second.py\r\nfrom first import entry\r\n\r\nentry()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\npython first.py\r\n> 123\r\n\r\npython second.py\r\n> Traceback (most recent call last):\r\n  File \"/Users/topshik/test/hydra-conf-test/second.py\", line 3, in <module>\r\n    entry()\r\n  File \"/Users/topshik/test/hydra-conf-test/first.py\", line 11, in entry\r\n    main()\r\n  File \"/usr/local/anaconda3/envs/p39/lib/python3.9/site-packages/hydra/main.py\", line 32, in decorated_main\r\n    _run_hydra(\r\n  File \"/usr/local/anaconda3/envs/p39/lib/python3.9/site-packages/hydra/_internal/utils.py\", line 346, in _run_hydra\r\n    run_and_report(\r\n  File \"/usr/local/anaconda3/envs/p39/lib/python3.9/site-packages/hydra/_internal/utils.py\", line 201, in run_and_report\r\n    raise ex\r\n  File \"/usr/local/anaconda3/envs/p39/lib/python3.9/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/usr/local/anaconda3/envs/p39/lib/python3.9/site-packages/hydra/_internal/utils.py\", line 347, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/usr/local/anaconda3/envs/p39/lib/python3.9/site-packages/hydra/_internal/hydra.py\", line 100, in run\r\n    cfg = self.compose_config(\r\n  File \"/usr/local/anaconda3/envs/p39/lib/python3.9/site-packages/hydra/_internal/hydra.py\", line 505, in compose_config\r\n    self.config_loader.ensure_main_config_source_available()\r\n  File \"/usr/local/anaconda3/envs/p39/lib/python3.9/site-packages/hydra/_internal/config_loader_impl.py\", line 138, in ensure_main_config_source_available\r\n    self.missing_config_error(\r\n  File \"/usr/local/anaconda3/envs/p39/lib/python3.9/site-packages/hydra/_internal/config_loader_impl.py\", line 112, in missing_config_error\r\n    raise MissingConfigException(\r\nhydra.errors.MissingConfigException: Primary config module is empty.\r\nPython requires resources to be in a module with an __init__.py file\r\n```\r\n\r\n## Expected Behavior\r\nI expect both commands `python first.py` and `python second.py` to have the same output `123`. However, it happens only with one of the files.\r\n\r\n## System information\r\nOS: macOS 11.2.3 (x86_64)\r\nGCC version: Could not collect\r\nClang version: 11.0.3 (clang-1103.0.32.62)\r\nCMake version: version 3.18.3\r\n\r\n- **Hydra Version** :  hydra-core==1.0.6\r\n- **Python version** : Python 3.9.2\r\n- **Virtual environment type and version** : conda 4.9.2\r\n\r\n## Additional context\r\nAdding `__init__.py` to the same folder does not help. However, changing structure to\r\n```\r\n.\r\n\u251c\u2500\u2500 my_package\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 conf.yaml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 first.py\r\n\u2514\u2500\u2500 second.py\r\n```\r\nworks great. I do not think that such explicit packaging should be obligatory to reuse hydra-decorated functions between python modules.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1568/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1568/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1565", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1565/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1565/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1565/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1565", "id": 862976276, "node_id": "MDU6SXNzdWU4NjI5NzYyNzY=", "number": 1565, "title": "[Bug] Unable to Interpolate Config for Hydra Launcher", "user": {"login": "Queuecumber", "id": 5865387, "node_id": "MDQ6VXNlcjU4NjUzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/5865387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Queuecumber", "html_url": "https://github.com/Queuecumber", "followers_url": "https://api.github.com/users/Queuecumber/followers", "following_url": "https://api.github.com/users/Queuecumber/following{/other_user}", "gists_url": "https://api.github.com/users/Queuecumber/gists{/gist_id}", "starred_url": "https://api.github.com/users/Queuecumber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Queuecumber/subscriptions", "organizations_url": "https://api.github.com/users/Queuecumber/orgs", "repos_url": "https://api.github.com/users/Queuecumber/repos", "events_url": "https://api.github.com/users/Queuecumber/events{/privacy}", "received_events_url": "https://api.github.com/users/Queuecumber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 13, "created_at": "2021-04-20T16:06:16Z", "updated_at": "2021-04-27T23:44:23Z", "closed_at": "2021-04-27T23:28:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nFollow up from Zulip discussion\r\n\r\nI'm trying to allow users to define a cluster setting in a top level config group and then use interpolations to copy that config to the hydra/launcher config group, but it fails with the error \r\n\r\n```\r\nMerge error: str is not a subclass of SlurmQueueConf. value: ${cluster}\r\n    full_key: \r\n    object_type=ExperimentConfig\r\n```\r\n\r\neven though the types appear correct. \r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\ncluster/test_cluster.yaml\r\n```\r\nname: test\r\ntimeout_min: 2160\r\n```\r\n\r\nminimal.yaml\r\n```\r\ndefaults:\r\n  - experiment\r\n  - cluster: test_cluster\r\n  - override hydra/launcher: submitit_slurm\r\n\r\nhydra:\r\n  launcher: ${cluster}\r\n```\r\n\r\nminimal.py\r\n```\r\nfrom dataclasses import dataclass\r\n\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom hydra_plugins.hydra_submitit_launcher.config import SlurmQueueConf\r\n\r\n\r\n@dataclass\r\nclass ExperimentConfig:\r\n    cluster: SlurmQueueConf\r\n\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(name=\"experiment\", node=ExperimentConfig)\r\n\r\n\r\n@hydra.main(config_name=\"minimal\", config_path=\".\")\r\ndef main(cfg) -> None:\r\n    print(cfg)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nrun `python minimal.py --cfg job`\r\n\r\nif you comment out the bottom two lines of `minimal.yaml` so that it looks instead like:\r\n\r\n```\r\ndefaults:\r\n  - experiment\r\n  - cluster: test_cluster\r\n  - override hydra/launcher: submitit_slurm\r\n\r\n#hydra:\r\n#  launcher: ${cluster}\r\n```\r\n\r\nthe script is successful and the `cluster` node seems to have all the correct settings. \r\n\r\n\r\n** Stack trace/error message **\r\n```\r\nMerge error: str is not a subclass of SlurmQueueConf. value: ${cluster}\r\n    full_key: \r\n    object_type=ExperimentConfig\r\n```\r\n\r\nThis also seems to work if I'm using a custom config, i.e., not a `hydra/` config but something which I defined myself, I can provide an example of this as well.\r\n\r\n## Expected Behavior\r\nIt should be able to copy that config into the hydra/launchers config group \r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev5\r\n- **Python version** : Python 3.8.2\r\n- **Virtual environment type and version** : venv (not sure of the version)\r\n- **Operating system** : RHEL 7.9\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1565/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1557", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1557/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1557/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1557/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1557", "id": 860218055, "node_id": "MDU6SXNzdWU4NjAyMTgwNTU=", "number": 1557, "title": "[Bug] Additional config search paths are not included when using --info defaults commands", "user": {"login": "brian-bazyk", "id": 7001527, "node_id": "MDQ6VXNlcjcwMDE1Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/7001527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brian-bazyk", "html_url": "https://github.com/brian-bazyk", "followers_url": "https://api.github.com/users/brian-bazyk/followers", "following_url": "https://api.github.com/users/brian-bazyk/following{/other_user}", "gists_url": "https://api.github.com/users/brian-bazyk/gists{/gist_id}", "starred_url": "https://api.github.com/users/brian-bazyk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brian-bazyk/subscriptions", "organizations_url": "https://api.github.com/users/brian-bazyk/orgs", "repos_url": "https://api.github.com/users/brian-bazyk/repos", "events_url": "https://api.github.com/users/brian-bazyk/events{/privacy}", "received_events_url": "https://api.github.com/users/brian-bazyk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 3, "created_at": "2021-04-16T22:16:51Z", "updated_at": "2021-04-22T21:06:17Z", "closed_at": "2021-04-22T21:06:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen running hydra apps with additional paths added to the hydra search paths and the command line option `--info defaults` or `--info` is used it seems the additional config search paths are not included. If the config refers to another config in one of the additional config search path locations then a missing config exception will be raised.\r\n\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** SIMPLER REPRO **\r\nRun `python examples/advanced/config_search_path/my_app.py dataset=imagenet --info`\r\n\r\n** ORIGINAL REPRO - Minimal Code/Config snippet to reproduce **\r\n\r\nIn `examples/advanced/config_search_path/conf/config.yaml` change `dataset: cifar10` to `dataset: imagenet`\r\nRun `python examples/advanced/config_search_path/my_app.py --info defaults`\r\n\r\n** Stack trace/error message **\r\n```\r\n~/hydra$ python examples/advanced/config_search_path/my_app.py --info defaults\r\nTraceback (most recent call last):\r\n  File \"examples/advanced/config_search_path/my_app.py\", line 13, in <module>\r\n    my_app()\r\n  File \"/venv/lib/python3.8/site-packages/hydra/main.py\", line 29, in decorated_main\r\n    _run_hydra(\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 400, in _run_hydra\r\n    hydra.show_info(\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 610, in show_info\r\n    options[info](config_name=config_name, overrides=overrides)\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 447, in _print_defaults_list\r\n    defaults = self.config_loader.compute_defaults_list(\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 525, in compute_defaults_list\r\n    defaults_list = create_defaults_list(\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 712, in create_defaults_list\r\n    defaults, tree = _create_defaults_list(\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 682, in _create_defaults_list\r\n    defaults_tree = _create_defaults_tree(\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 337, in _create_defaults_tree\r\n    ret = _create_defaults_tree_impl(\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 420, in _create_defaults_tree_impl\r\n    return _expand_virtual_root(repo, root, overrides, skip_missing)\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 262, in _expand_virtual_root\r\n    subtree = _create_defaults_tree_impl(\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 532, in _create_defaults_tree_impl\r\n    add_child(children, new_root)\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 475, in add_child\r\n    subtree_ = _create_defaults_tree_impl(\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 451, in _create_defaults_tree_impl\r\n    config_not_found_error(repo=repo, tree=root)\r\n  File \"/venv/lib/python3.8/site-packages/hydra/_internal/defaults_list.py\", line 766, in config_not_found_error\r\n    raise MissingConfigException(\r\nhydra.errors.MissingConfigException: In 'config': Could not find 'dataset/imagenet'\r\n\r\nAvailable options in 'dataset':\r\n        cifar10\r\nConfig search path:\r\n        provider=hydra, path=pkg://hydra.conf\r\n        provider=main, path=file:///home/brian/hydra/examples/advanced/config_search_path/conf\r\n        provider=schema, path=structured://\r\n```\r\n\r\n## Expected Behavior\r\nExpect no exception to occur and for both `imagenet` and `cifar10` to appear as available options in `dataset` from the `--info defaults` output.\r\nAlso expect `additional_conf` to appear in the `Config search path:` listing in `--info defaults` output.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0dev5\r\n- **Python version** : 3.8.7\r\n- **Virtual environment type and version** : \r\n- **Operating system** : 18.04.5 LTS (Bionic Beaver)\r\n\r\n## Additional context\r\nn/a\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1557/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1557/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1553", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1553/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1553/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1553/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1553", "id": 858686435, "node_id": "MDU6SXNzdWU4NTg2ODY0MzU=", "number": 1553, "title": "hydra job logging is not compatible with wandb - by hand logger configuration works![Bug]", "user": {"login": "somedadaism", "id": 20669735, "node_id": "MDQ6VXNlcjIwNjY5NzM1", "avatar_url": "https://avatars.githubusercontent.com/u/20669735?v=4", "gravatar_id": "", "url": "https://api.github.com/users/somedadaism", "html_url": "https://github.com/somedadaism", "followers_url": "https://api.github.com/users/somedadaism/followers", "following_url": "https://api.github.com/users/somedadaism/following{/other_user}", "gists_url": "https://api.github.com/users/somedadaism/gists{/gist_id}", "starred_url": "https://api.github.com/users/somedadaism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/somedadaism/subscriptions", "organizations_url": "https://api.github.com/users/somedadaism/orgs", "repos_url": "https://api.github.com/users/somedadaism/repos", "events_url": "https://api.github.com/users/somedadaism/events{/privacy}", "received_events_url": "https://api.github.com/users/somedadaism/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-04-15T09:26:22Z", "updated_at": "2021-04-16T21:00:53Z", "closed_at": "2021-04-16T07:32:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "**Description**\r\nI try to combine `hydra` and `wandb` in a common framework.\r\n`hydra` configures my (python, not wandb) loggers in a manner I think is convenient and allows to flexible alter them.\r\nHowever the logger configurations made by `hydra` are overwritten by the `wandb.init()` function.\r\nThe issue exists in public repos too:\r\nhttps://github.com/ashleve/lightning-hydra-template \r\nis an example I checked.\r\n\r\n**How to reproduce**\r\n```\r\nimport hydra\r\nimport sys\r\nimport wandb\r\nimport logging\r\nimport warnings\r\n\r\nlog = logging.getLogger(__name__)\r\nwarnings.filterwarnings('ignore', category=UserWarning)\r\n\r\n\r\n@hydra.main(config_path='../configs', config_name='benchmark_config.yaml')\r\ndef reproduce_bug(config):\r\n    log.info('foo')\r\n    wandb.init(project='Test',\r\n               dir='..',\r\n               reinit=True)\r\n    log.info('bar')\r\n\r\n\r\nif __name__ == '__main__':\r\n    reproduce_bug()\r\n\"\"\"\r\noutput: \r\n[2021-04-15 11:17:16,642][__main__][INFO] - foo\r\n\r\nexpected: \r\n[2021-04-15 11:17:16,642][__main__][INFO] - foo\r\n[2021-04-15 11:17:16,642][__main__][INFO] - bar\r\n```\r\n\r\n**Environment**\r\nMultiple, python3.8 on Mac, Ubuntu\r\n\r\nOriginally I thought this was an issue with wandb, however I have since experimented and learned that this works:\r\n\r\n```\r\nimport sys\r\nimport logging\r\nimport wandb\r\n\r\n\r\ndef reproduce_bug():\r\n    log = logging.getLogger()\r\n    root = logging.getLogger()\r\n    root.setLevel(logging.INFO)\r\n    handler = logging.StreamHandler(sys.stdout)\r\n    formatter = logging.Formatter(\r\n        \"[%(asctime)s][%(name)s][%(levelname)s] - %(message)s\"\r\n    )\r\n    handler.setFormatter(formatter)\r\n    root.addHandler(handler)\r\n\r\n    log.info('foo')\r\n    wandb.init(project='Test',\r\n               dir='..',\r\n               reinit=True)\r\n    log.info('bar')\r\n\r\nreproduce_bug()\r\noutput: \r\n[2021-04-15 11:17:16,642][__main__][INFO] - foo\r\n[2021-04-15 11:17:16,642][__main__][INFO] - bar\r\n\r\nexpected: \r\n[2021-04-15 11:17:16,642][__main__][INFO] - foo\r\n[2021-04-15 11:17:16,642][__main__][INFO] - bar\r\n```\r\nMy understanding is that it is possible to configure job logging in a wandb compatible way but hydra does not do this.\r\nI have raised a parallel issue on `wandb/client`: https://github.com/wandb/client/issues/2075\r\nHope this helps to resolve the conflict.\r\nhydra version is 1.1.0dev3\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1553/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1552", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1552/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1552/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1552/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1552", "id": 857694609, "node_id": "MDU6SXNzdWU4NTc2OTQ2MDk=", "number": 1552, "title": "[Bug] hydra.errors.MissingConfigException: Could not load datasets/dpr_default.", "user": {"login": "cn-boop", "id": 57133250, "node_id": "MDQ6VXNlcjU3MTMzMjUw", "avatar_url": "https://avatars.githubusercontent.com/u/57133250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cn-boop", "html_url": "https://github.com/cn-boop", "followers_url": "https://api.github.com/users/cn-boop/followers", "following_url": "https://api.github.com/users/cn-boop/following{/other_user}", "gists_url": "https://api.github.com/users/cn-boop/gists{/gist_id}", "starred_url": "https://api.github.com/users/cn-boop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cn-boop/subscriptions", "organizations_url": "https://api.github.com/users/cn-boop/orgs", "repos_url": "https://api.github.com/users/cn-boop/repos", "events_url": "https://api.github.com/users/cn-boop/events{/privacy}", "received_events_url": "https://api.github.com/users/cn-boop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-04-14T09:12:54Z", "updated_at": "2021-04-14T20:50:23Z", "closed_at": "2021-04-14T20:50:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## Checklist\r\n- [ ] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n** Stack trace/error message **\r\n```\r\n// Paste the bad output here!\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  \r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nmy version of hydra is 1.0.6, the error occurs\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1552/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1548", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1548/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1548/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1548/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1548", "id": 854377564, "node_id": "MDU6SXNzdWU4NTQzNzc1NjQ=", "number": 1548, "title": "[Bug] Cannot use experiment pattern when using overrides in main config file", "user": {"login": "ashleve", "id": 43458894, "node_id": "MDQ6VXNlcjQzNDU4ODk0", "avatar_url": "https://avatars.githubusercontent.com/u/43458894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashleve", "html_url": "https://github.com/ashleve", "followers_url": "https://api.github.com/users/ashleve/followers", "following_url": "https://api.github.com/users/ashleve/following{/other_user}", "gists_url": "https://api.github.com/users/ashleve/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashleve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashleve/subscriptions", "organizations_url": "https://api.github.com/users/ashleve/orgs", "repos_url": "https://api.github.com/users/ashleve/repos", "events_url": "https://api.github.com/users/ashleve/events{/privacy}", "received_events_url": "https://api.github.com/users/ashleve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1518816165, "node_id": "MDU6TGFiZWwxNTE4ODE2MTY1", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/In%20progress", "name": "In progress", "color": "569dbf", "default": false, "description": "Work in progress"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 1, "created_at": "2021-04-09T10:05:12Z", "updated_at": "2021-04-23T15:26:24Z", "closed_at": "2021-04-23T15:26:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\nWhen using any override in main config, e.g. for color logging or sweeper:\r\n```yaml\r\ndefaults:\r\n    - override hydra/hydra_logging: colorlog\r\n    - override hydra/job_logging: colorlog\r\n```\r\n\r\nThen the experiment configs can't be loaded:\r\n```bash\r\npython main.py +experiment=experiment_name\r\n```\r\nStack trace:\r\n```\r\nIn config.yaml: Override 'hydra/job_logging : colorlog' is defined before 'experiment: experiment_name'.\r\nOverrides must be at the end of the defaults list\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev5\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : conda\r\n- **Operating system** : Ubuntu20.04\r\n\r\n## Additional context\r\nI believe this issue didn't exist on 1.1.0.dev4.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1548/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1543", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1543/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1543/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1543/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1543", "id": 852171432, "node_id": "MDU6SXNzdWU4NTIxNzE0MzI=", "number": 1543, "title": "[Bug] Many calls to deepcopy slow down creating a large number of configs.", "user": {"login": "adefossez", "id": 1990078, "node_id": "MDQ6VXNlcjE5OTAwNzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1990078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adefossez", "html_url": "https://github.com/adefossez", "followers_url": "https://api.github.com/users/adefossez/followers", "following_url": "https://api.github.com/users/adefossez/following{/other_user}", "gists_url": "https://api.github.com/users/adefossez/gists{/gist_id}", "starred_url": "https://api.github.com/users/adefossez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adefossez/subscriptions", "organizations_url": "https://api.github.com/users/adefossez/orgs", "repos_url": "https://api.github.com/users/adefossez/repos", "events_url": "https://api.github.com/users/adefossez/events{/privacy}", "received_events_url": "https://api.github.com/users/adefossez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-07T08:43:23Z", "updated_at": "2021-04-07T16:09:39Z", "closed_at": "2021-04-07T13:01:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nAs part of an experiment management tool, I typically have to create up to 100 configurations with Hydra, roughly from scratch, using the `compose` API. It seems for a moderately complex config up (around 100 lines), each call to create the Hydra config takes about 0.5 seconds.\r\n\r\nWhile in itself it is not much, when multiplied by the number of XP, this quickly adds up. After running some profiling, it seems about 75% of the time is spent in the `__deepcopy__` method in OmegaConf `DictConfig` (let me know if I should rather open my issue there). For creating one config, there are about 50,000 calls to it.\r\n\r\nIt would be really helpful to have a way to reduce that number of calls and time spent in creating the config for my usecase.\r\n\r\n\r\n## Checklist\r\n- [ ] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nI don't have a minimum viable example at the moment but I can work on one.\r\n\r\n## Expected Behavior\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.4\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : virtual env\r\n- **Operating system** : Mac OS X, Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1543/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1543/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1539", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1539/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1539/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1539/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1539", "id": 851353448, "node_id": "MDU6SXNzdWU4NTEzNTM0NDg=", "number": 1539, "title": "[Bug] String interpolation does not work when overwriting a list as another list from a different config group", "user": {"login": "apugoneappu", "id": 15952329, "node_id": "MDQ6VXNlcjE1OTUyMzI5", "avatar_url": "https://avatars.githubusercontent.com/u/15952329?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apugoneappu", "html_url": "https://github.com/apugoneappu", "followers_url": "https://api.github.com/users/apugoneappu/followers", "following_url": "https://api.github.com/users/apugoneappu/following{/other_user}", "gists_url": "https://api.github.com/users/apugoneappu/gists{/gist_id}", "starred_url": "https://api.github.com/users/apugoneappu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apugoneappu/subscriptions", "organizations_url": "https://api.github.com/users/apugoneappu/orgs", "repos_url": "https://api.github.com/users/apugoneappu/repos", "events_url": "https://api.github.com/users/apugoneappu/events{/privacy}", "received_events_url": "https://api.github.com/users/apugoneappu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-04-06T12:00:48Z", "updated_at": "2021-04-06T18:50:47Z", "closed_at": "2021-04-06T18:49:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nFor a key with a list as its value defined in a config_group, I get an error when trying to overwrite that key from another config_group as a list using string interpolation. This error does not happen when the original key is overwritten to a regular string using string interpolation. \r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n**Minimal Code/Config snippet to reproduce**\r\n\r\nconfigs/config.yaml\r\n```\r\nfoo: 55\r\n\r\ndefaults:\r\n- first_group: a\r\n- second_group: b\r\n```\r\n\r\nconfigs/first_group/a.yaml\r\n```\r\n# @package _group_\r\n\r\na_list:\r\n- first_item\r\n- second_item\r\n```\r\n\r\nconfigs/second_group/b.yaml\r\n```\r\n# @package _global_\r\n\r\n# Does not cause an error\r\n# first_group:\r\n#   a_list: ${foo}\r\n\r\n# Causes an error\r\nfirst_group:\r\n  a_list:\r\n    - ${foo}\r\n```\r\n\r\n**Stack trace/error message**\r\n\r\nShort error message\r\n```\r\nError merging second_group=b\r\nstr interpolation key 'foo' not found\r\n        full_key: first_group.a_list[0]\r\n        reference_type=Optional[List[Any]]\r\n        object_type=list\r\n```\r\n\r\n<details>\r\n<summary>\r\nstack trace (click to unfold)\r\n</summary>\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 720, in _merge_config\r\n    ret = OmegaConf.merge(cfg, loaded_cfg)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/omegaconf.py\", line 321, in merge\r\n    target.merge_with(*others[1:])\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/basecontainer.py\", line 331, in merge_with\r\n    self._format_and_raise(key=None, value=None, cause=e)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/base.py\", line 101, in _format_and_raise\r\n    type_override=type_override,\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/_utils.py\", line 629, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/_utils.py\", line 610, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/basecontainer.py\", line 329, in merge_with\r\n    self._merge_with(*others)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/basecontainer.py\", line 347, in _merge_with\r\n    BaseContainer._map_merge(self, other)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/basecontainer.py\", line 294, in _map_merge\r\n    dest_node._merge_with(src_value)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/basecontainer.py\", line 347, in _merge_with\r\n    BaseContainer._map_merge(self, other)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/basecontainer.py\", line 294, in _map_merge\r\n    dest_node._merge_with(src_value)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/basecontainer.py\", line 367, in _merge_with\r\n    for item in other:\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/listconfig.py\", line 457, in __next__\r\n    v = self.lst[self.index]\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/listconfig.py\", line 176, in __getitem__\r\n    self._format_and_raise(key=index, value=None, cause=e)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/base.py\", line 101, in _format_and_raise\r\n    type_override=type_override,\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/_utils.py\", line 694, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/omegaconf/_utils.py\", line 610, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nomegaconf.errors.ConfigKeyError: str interpolation key 'foo' not found\r\n        full_key: first_group.a_list[0]\r\n        reference_type=Optional[List[Any]]\r\n        object_type=list\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 11, in <module>\r\n    run_app()\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/main.py\", line 37, in decorated_main\r\n    strict=strict,\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 347, in _run_hydra\r\n    lambda: hydra.run(\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 201, in run_and_report\r\n    raise ex\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 350, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 104, in run\r\n    run_mode=RunMode.RUN,\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 512, in compose_config\r\n    from_shell=from_shell,\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 156, in load_configuration\r\n    from_shell=from_shell,\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 262, in _load_configuration\r\n    run_mode=run_mode,\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 805, in _merge_defaults_into_config\r\n    hydra_cfg = merge_defaults_list_into_config(hydra_cfg, user_list)\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 783, in merge_defaults_list_into_config\r\n    package_override=default1.package,\r\n  File \"/Users/apoorve/anaconda3/envs/adven/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 726, in _merge_config\r\n    ) from ex\r\nhydra.errors.ConfigCompositionException: Error merging second_group=b\r\n```\r\n</details>\r\n\r\n\r\n## Expected Behavior\r\nI expected the final config to be like:\r\n\r\n```json\r\nfoo: 55\r\nfirst_group:\r\n  a_list: [55]\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.6\r\n- **Python version** : 3.7.9\r\n- **Virtual environment type and version** : Anaconda 4.9.2\r\n- **Operating system** : macOS Big Sur 11.2.3 (20D91)\r\n\r\n## Additional context\r\nThe problem does not occur if the key is not a list in either a.yaml or b.yaml", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1539/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1539/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1524", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1524/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1524/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1524/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1524", "id": 847784343, "node_id": "MDU6SXNzdWU4NDc3ODQzNDM=", "number": 1524, "title": "[Bug] Basic tutorial is missing `# @package _group_` directive", "user": {"login": "tomsercu", "id": 4034984, "node_id": "MDQ6VXNlcjQwMzQ5ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4034984?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomsercu", "html_url": "https://github.com/tomsercu", "followers_url": "https://api.github.com/users/tomsercu/followers", "following_url": "https://api.github.com/users/tomsercu/following{/other_user}", "gists_url": "https://api.github.com/users/tomsercu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomsercu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomsercu/subscriptions", "organizations_url": "https://api.github.com/users/tomsercu/orgs", "repos_url": "https://api.github.com/users/tomsercu/repos", "events_url": "https://api.github.com/users/tomsercu/events{/privacy}", "received_events_url": "https://api.github.com/users/tomsercu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-01T02:59:23Z", "updated_at": "2021-04-03T09:22:47Z", "closed_at": "2021-04-01T15:03:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThe examples in the Basic tutorial are not up to date; they seem to need a `# @package _group_\r\n` directive to behave as expected; following [these instructions](https://hydra.cc/docs/upgrades/0.11_to_1.0/adding_a_package_directive).\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra : `1.0.6`\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```\r\ncd hydra-src/examples/tutorials/basic/your_first_hydra_app/4_config_groups/\r\npython my_app.py +db=mysql\r\ncd ../5_defaults/\r\npython my_app.py\r\n```\r\n\r\nObserved output:\r\n```\r\n$ python my_app.py +db=postgresql\r\ndriver: mysql\r\nuser: omry\r\npass: secret\r\n```\r\n\r\n## Expected Behavior\r\nMatching the [tutorial page](https://hydra.cc/docs/next/tutorials/basic/your_first_app/config_groups), so under package `db`\r\n```\r\n$ python my_app.py +db=postgresql\r\ndb:\r\n  driver: postgresql\r\n  pass: drowssap\r\n  timeout: 10\r\n  user: postgres_user\r\n```\r\n## System information\r\n- **Hydra Version** : tried both 1.0.5 and   1.0.6\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1524/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1515", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1515/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1515/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1515/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1515", "id": 843748378, "node_id": "MDU6SXNzdWU4NDM3NDgzNzg=", "number": 1515, "title": "[Bug] Bug for overriding to sub-structured config", "user": {"login": "strx2322", "id": 25627733, "node_id": "MDQ6VXNlcjI1NjI3NzMz", "avatar_url": "https://avatars.githubusercontent.com/u/25627733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/strx2322", "html_url": "https://github.com/strx2322", "followers_url": "https://api.github.com/users/strx2322/followers", "following_url": "https://api.github.com/users/strx2322/following{/other_user}", "gists_url": "https://api.github.com/users/strx2322/gists{/gist_id}", "starred_url": "https://api.github.com/users/strx2322/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/strx2322/subscriptions", "organizations_url": "https://api.github.com/users/strx2322/orgs", "repos_url": "https://api.github.com/users/strx2322/repos", "events_url": "https://api.github.com/users/strx2322/events{/privacy}", "received_events_url": "https://api.github.com/users/strx2322/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 1, "created_at": "2021-03-29T19:55:11Z", "updated_at": "2021-04-16T18:27:46Z", "closed_at": "2021-04-16T18:27:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nOverriding variable to sub-structured config fails when using CLI \r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```\r\nfrom dataclasses import dataclass\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\n\r\n\r\n@dataclass\r\nclass A:\r\n    i: int = 1\r\n\r\n\r\n@dataclass\r\nclass Config:\r\n    a: A = A()\r\n\r\n\r\n@hydra.main(config_name=\"config\")\r\ndef hydra_main(cfg: Config):\r\n    print(cfg)\r\n\r\n\r\nif __name__ == '__main__':\r\n    cs = ConfigStore.instance()\r\n    cs.store(name='config', node=Config)\r\n\r\n    hydra_main()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n$ python hydra.py +a.j=2\r\nError merging override +a.j=2\r\nKey 'j' not in 'A'\r\n\tfull_key: a.j\r\n\treference_type=A\r\n\tobject_type=A\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\n```\r\n{'a': {'i': 1, 'j': 2}}\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.6, 1.1.0 dev5\r\n- **Python version** : 3.7.9\r\n- **Virtual environment type and version** : pyenv, vent\r\n- **Operating system** : Mac, Ubuntu\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1515/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1486", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1486/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1486/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1486/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1486", "id": 837972758, "node_id": "MDU6SXNzdWU4Mzc5NzI3NTg=", "number": 1486, "title": "[Bug] initializing wandb run prevents hydra logs on dev version", "user": {"login": "ashleve", "id": 43458894, "node_id": "MDQ6VXNlcjQzNDU4ODk0", "avatar_url": "https://avatars.githubusercontent.com/u/43458894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashleve", "html_url": "https://github.com/ashleve", "followers_url": "https://api.github.com/users/ashleve/followers", "following_url": "https://api.github.com/users/ashleve/following{/other_user}", "gists_url": "https://api.github.com/users/ashleve/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashleve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashleve/subscriptions", "organizations_url": "https://api.github.com/users/ashleve/orgs", "repos_url": "https://api.github.com/users/ashleve/repos", "events_url": "https://api.github.com/users/ashleve/events{/privacy}", "received_events_url": "https://api.github.com/users/ashleve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-03-22T17:55:06Z", "updated_at": "2021-03-24T16:19:53Z", "closed_at": "2021-03-23T17:55:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen wandb run is instantiated, hydra logs disappear.\r\nThis works incorrectly only on hydra dev version (1.1.0.dev4).\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```python\r\nimport hydra\r\nimport wandb\r\n\r\nfrom hydra.utils import log\r\n\r\n\r\n@hydra.main(config_name=\"config\", config_path=\".\")\r\ndef main(config):    \r\n    # this message shows up correctly\r\n    log.info(\"First message.\")\r\n\r\n    wandb.init(project=\"test\")\r\n    \r\n    # this message doesn't show up at all\r\n    log.info(\"Second message.\")\r\n\r\n\r\nmain()\r\n```\r\nOn hydra 1.0.6 the second message shows up correctly.\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev4\r\n- **Python version** :  3.8.8\r\n- **Virtual environment type and version** : conda\r\n- **Operating system** : Ubuntu 20.04", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1486/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1484", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1484/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1484/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1484/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1484", "id": 837145429, "node_id": "MDU6SXNzdWU4MzcxNDU0Mjk=", "number": 1484, "title": "[Bug] [configen] configen fails on modules with `from __future__ import annotations` (default in python 3.10)", "user": {"login": "tmke8", "id": 7741417, "node_id": "MDQ6VXNlcjc3NDE0MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7741417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmke8", "html_url": "https://github.com/tmke8", "followers_url": "https://api.github.com/users/tmke8/followers", "following_url": "https://api.github.com/users/tmke8/following{/other_user}", "gists_url": "https://api.github.com/users/tmke8/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmke8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmke8/subscriptions", "organizations_url": "https://api.github.com/users/tmke8/orgs", "repos_url": "https://api.github.com/users/tmke8/repos", "events_url": "https://api.github.com/users/tmke8/events{/privacy}", "received_events_url": "https://api.github.com/users/tmke8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-03-21T18:11:03Z", "updated_at": "2021-03-25T21:31:28Z", "closed_at": "2021-03-25T21:31:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThis is the same issue as in omry/omegaconf#303 for which I provided a fix in omry/omegaconf#424. The behavior that will become default in python 3.10, and which can be activated since python 3.7 with `from __future__ import annotations`, breaks configen, because it causes the type annotations to be stored as strings, so it is required to use `get_type_hints()` to parse them.\r\n\r\nPython 3.10 is currently only in [alpha 6](https://www.python.org/downloads/release/python-3100a6/), but it's always good to prepare early, I think.\r\n\r\nI'm willing to send a pull request!\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n\r\n## To reproduce\r\n\r\n```python\r\nfrom __future__ import annotations\r\n\r\n\r\nclass User:\r\n    def __init__(self, age: int, name: str):\r\n        self.age = age\r\n        self.name = name\r\n\r\n    def __repr__(self):\r\n        return f\"User: name={self.name}, age={self.age}\"\r\n\r\n\r\nclass Admin(User):\r\n    def __init__(self, private_key: str, age: int, name: str) -> None:\r\n        super().__init__(age, name)\r\n        self.private_key = private_key\r\n\r\n    def __repr__(self):\r\n        return (\r\n            f\"Admin: name={self.name}, age={self.age}, private_key={self.private_key}\"\r\n        )\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/tk324/dev/python/hydra/tools/configen/configen/configen.py\", line 263, in main\r\n    code = generate_module(cfg=cfg.configen, module=module)\r\n  File \"/Users/tk324/dev/python/hydra/tools/configen/configen/configen.py\", line 182, in generate_module\r\n    not missing_annotation_type and is_incompatible(type_)\r\n  File \"/Users/tk324/dev/python/hydra/tools/configen/configen/configen.py\", line 118, in is_incompatible\r\n    if type_ is Any or issubclass(type_, (int, float, str, bool, Enum)):\r\nTypeError: issubclass() arg 1 must be a class\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\nconfigen should work in this case as well.\r\n\r\n## System information\r\n- **Hydra Version** :  master\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : conda 4.8.3\r\n- **Operating system** : MacOS\r\n\r\n## Additional context\r\n(In case you're wondering why I would care about this. I usually use `from __future__ import annotations` in my code, because it allows me to use newer type annotation syntax like lowercase `list` instead of `typing.List`, and the new union syntax `str | int` instead of `Union[str, int]`.)\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1484/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1484/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1483", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1483/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1483/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1483/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1483", "id": 837081328, "node_id": "MDU6SXNzdWU4MzcwODEzMjg=", "number": 1483, "title": "[Bug] PyTorch Lightning crashes run when optimizer is instatiated with Hydra (dev version)", "user": {"login": "ashleve", "id": 43458894, "node_id": "MDQ6VXNlcjQzNDU4ODk0", "avatar_url": "https://avatars.githubusercontent.com/u/43458894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashleve", "html_url": "https://github.com/ashleve", "followers_url": "https://api.github.com/users/ashleve/followers", "following_url": "https://api.github.com/users/ashleve/following{/other_user}", "gists_url": "https://api.github.com/users/ashleve/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashleve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashleve/subscriptions", "organizations_url": "https://api.github.com/users/ashleve/orgs", "repos_url": "https://api.github.com/users/ashleve/repos", "events_url": "https://api.github.com/users/ashleve/events{/privacy}", "received_events_url": "https://api.github.com/users/ashleve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 5, "created_at": "2021-03-21T13:42:54Z", "updated_at": "2021-03-25T00:42:47Z", "closed_at": "2021-03-25T00:42:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\nHi, should bugs related to hydra dev version be reported? If so I have a couple of interesting edge cases. Here comes the first one.\r\n\r\nWhen instantiating optimizer with Hydra using PyTorch Lightning, using \"betas\" parameter crashes a run after end of first epoch.\r\n```python\r\ndef configure_optimizers(self):\r\n        optim_conf = {\r\n            \"_target_\": \"torch.optim.Adam\",\r\n            \"lr\": 0.001,\r\n            \"eps\": 1e-08,\r\n            \"weight_decay\": 0,\r\n            \"betas\": [ 0.9, 0.999 ] # without this param everything works correctly\r\n        }\r\n        \r\n        # this doesnt work :(\r\n        optim = hydra.utils.instantiate(optim_conf, params=self.parameters())\r\n        \r\n        # this works\r\n        # optim = torch.optim.Adam(self.parameters())\r\n\r\n        return optim\r\n```\r\n\r\n**Everything works correctly when using hydra 1.0.6**\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nRepo:\r\nhttps://github.com/hobogalaxy/lit-bug1\r\n\r\n\r\n**Stack trace/error message**\r\n```\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 86, in <module>\r\n    trainer.fit(model, train, val)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/trainer/trainer.py\", line 498, in fit\r\n    self.dispatch()\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/trainer/trainer.py\", line 545, in dispatch\r\n    self.accelerator.start_training(self)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/accelerators/accelerator.py\", line 73, in start_training\r\n    self.training_type_plugin.start_training(trainer)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/plugins/training_type/training_type_plugin.py\", line 114, in start_training\r\n    self._results = trainer.run_train()\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/trainer/trainer.py\", line 668, in run_train\r\n    self.train_loop.on_train_end()\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/trainer/training_loop.py\", line 134, in on_train_end\r\n    self.check_checkpoint_callback(should_update=True, is_last=True)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/trainer/training_loop.py\", line 164, in check_checkpoint_callback\r\n    cb.on_validation_end(self.trainer, model)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/callbacks/model_checkpoint.py\", line 212, in on_validation_end\r\n    self.save_checkpoint(trainer, pl_module)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/callbacks/model_checkpoint.py\", line 262, in save_checkpoint\r\n    self._save_last_checkpoint(trainer, pl_module, monitor_candidates)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/callbacks/model_checkpoint.py\", line 546, in _save_last_checkpoint\r\n    self._save_model(last_filepath, trainer, pl_module)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/callbacks/model_checkpoint.py\", line 335, in _save_model\r\n    self.save_function(filepath, self.save_weights_only)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/trainer/properties.py\", line 327, in save_checkpoint\r\n    self.checkpoint_connector.save_checkpoint(filepath, weights_only)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/trainer/connectors/checkpoint_connector.py\", line 404, in save_checkpoint\r\n    atomic_save(checkpoint, filepath)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/pytorch_lightning/utilities/cloud_io.py\", line 63, in atomic_save\r\n    torch.save(checkpoint, bytesbuffer)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/torch/serialization.py\", line 372, in save\r\n    _save(obj, opened_zipfile, pickle_module, pickle_protocol)\r\n  File \"/home/ash/miniconda3/envs/tmp/lib/python3.8/site-packages/torch/serialization.py\", line 476, in _save\r\n    pickler.dump(obj)\r\nTypeError: cannot pickle 'generator' object\r\n```\r\n\r\nShould I post it on PyTorch Lightning repo instead?", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1483/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1483/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1481", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1481/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1481/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1481/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1481", "id": 835408473, "node_id": "MDU6SXNzdWU4MzU0MDg0NzM=", "number": 1481, "title": "[Bug] Cannot write to file with h5py inside main function", "user": {"login": "davidcian", "id": 15704815, "node_id": "MDQ6VXNlcjE1NzA0ODE1", "avatar_url": "https://avatars.githubusercontent.com/u/15704815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidcian", "html_url": "https://github.com/davidcian", "followers_url": "https://api.github.com/users/davidcian/followers", "following_url": "https://api.github.com/users/davidcian/following{/other_user}", "gists_url": "https://api.github.com/users/davidcian/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidcian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidcian/subscriptions", "organizations_url": "https://api.github.com/users/davidcian/orgs", "repos_url": "https://api.github.com/users/davidcian/repos", "events_url": "https://api.github.com/users/davidcian/events{/privacy}", "received_events_url": "https://api.github.com/users/davidcian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-03-19T00:51:28Z", "updated_at": "2021-03-19T19:06:51Z", "closed_at": "2021-03-19T17:29:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nFor some reason, opening an HDF5 file in write mode with h5py, inside the Hydra main function, does not create a file.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```\r\nimport h5py\r\n\r\nfrom omegaconf import DictConfig\r\nimport hydra\r\n\r\n@hydra.main(config_path='ds_conf', config_name='config')\r\ndef main_func(cfg: DictConfig) -> None:\r\n  hdf5()\r\n\r\ndef hdf5():\r\n  hdf_file = h5py.File(\"test_hdf.hdf5\", 'w')\r\n  hdf_file.close()\r\n\r\nif __name__ == '__main__':\r\n  main_func()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n// Paste the bad output here!\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nI expected a file called `test_hdf.hdf5` to be created at the root directory of my project.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.6\r\n- **Python version** : 3.7.8\r\n- **Virtual environment type and version** : conda\r\n- **Operating system** : Windows 10\r\n\r\n## Additional context\r\n\r\nUsing a context manager changes nothing.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1481/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1481/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1480", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1480/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1480/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1480/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1480", "id": 835279107, "node_id": "MDU6SXNzdWU4MzUyNzkxMDc=", "number": 1480, "title": "[Bug] ConfigStore.store() extremely slow", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-18T21:28:46Z", "updated_at": "2021-03-18T22:36:14Z", "closed_at": "2021-03-18T22:36:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nCalling `ConfigStore.store(name=..., node=MyDataclass)` is extremely slow with *certain* dataclasses.\r\n\r\n```python\r\n(tmp) jbss@rig1:~/mwe$ cat mwe.py\r\nfrom hydra.core.config_store import ConfigStore\r\nimport time\r\nfrom dataclasses import dataclass\r\nfrom omegaconf import OmegaConf\r\n\r\ncs = ConfigStore.instance()\r\n\r\n@dataclass\r\nclass Config:\r\n    iterp: str = \"${long_string1xxx}_${long_string2xxx:${a_key}}\"       # cs.store takes ~27s\r\n\r\nt0 = time.time()\r\ncs.store(name=\"config_schema\", node=Config)\r\nt1 = time.time()\r\nprint(f\"Config Elapsed time = {t1-t0}\")\r\n```\r\n```bash\r\n(tmp) jbss@rig1:~/mwe$ python mwe.py\r\nConfig Elapsed time = 26.96069574356079\r\n```\r\nThat's almost 27 seconds for the call to `cs.store`!\r\nI did an ablation study to find that the length of `long_string1xxx` and `long_string2xxx` do matter; longer strings are slower.\r\n\r\n```python\r\n@dataclass\r\nclass Config:\r\n    iterp: str = \"${long_string1xxx}_${long_string2xxx:${a_key}}\"       # cs.store takes ~27s\r\n\r\n    # ablation:\r\n\r\n    # iterp: str = \"${short1}_${short2:${a_key}}\"                            # cs.store takes ~0.0002 seconds\r\n    # iterp: str = \"${long_string1}_${long_string2:${a_key}}\"                # cs.store takes ~0.5s\r\n    # iterp: str = \"${long_string1x}_${long_string2x:${a_key}}\"              # cs.store takes ~1.9s\r\n    # iterp: str = \"${long_string1xx}_${long_string2xx:${a_key}}\"            # cs.store takes ~6.9s\r\n\r\n    # iterp: str = \"${long_string1xxx}_${short:${a_key}}\"                    # cs.store takes ~0.07s\r\n    # iterp: str = \"${short}_${long_string2xxx:${a_key}}\"                    # cs.store takes ~0.06s\r\n    # iterp: str = \"${short1}_${short2:${a_very_very_very_very_long_key}}\"   # cs.store takes ~0.01 seconds\r\n\r\n    # iterp: str = \"${long_string2xxx:${a_key}}\"                             # cs.store takes ~0.01s\r\n    # iterp: str = \"_${long_string2xxx:${a_key}}\"                            # cs.store takes ~0.01s\r\n    # iterp: str = \"${long_string1xxx}_\"                                     # cs.store takes ~0.0003s\r\n    # iterp: str = \"${long_string1xxx}\"                                      # cs.store takes ~0.0003s\r\n    # iterp: str = \"${long_string1xxx}_${long_string2xxx}\"                   # cs.store takes ~0.0003s\r\n    # iterp: str = \"${long_string1xxx}_${long_string2xxx:a_key}\"             # cs.store takes ~0.003s\r\n```\r\n\r\n\r\n## System information\r\nUsing the latest omegaconf and hydra installed from master branch.\r\n```bash\r\nPython 3.8.5 (default, Sep  4 2020, 07:30:14)\r\n[GCC 7.3.0] :: Anaconda, Inc. on linux\r\nomegaconf.__version__='2.1.0dev23'\r\nhydra.__version__='1.1.0dev5'\r\n```\r\n- **Operating system** : Ubuntu 18.04\r\n\r\nEdit: I was *not* able to reproduce this with hydra/omegaconf downloaded from pip, only with the latest development versions of hydra/omegaconf.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1480/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1480/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1475", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1475/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1475/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1475/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1475", "id": 831196073, "node_id": "MDU6SXNzdWU4MzExOTYwNzM=", "number": 1475, "title": "[Bug] module 'hydra.core' has no attribute 'global_hydra'", "user": {"login": "RamanHacks", "id": 17014540, "node_id": "MDQ6VXNlcjE3MDE0NTQw", "avatar_url": "https://avatars.githubusercontent.com/u/17014540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RamanHacks", "html_url": "https://github.com/RamanHacks", "followers_url": "https://api.github.com/users/RamanHacks/followers", "following_url": "https://api.github.com/users/RamanHacks/following{/other_user}", "gists_url": "https://api.github.com/users/RamanHacks/gists{/gist_id}", "starred_url": "https://api.github.com/users/RamanHacks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RamanHacks/subscriptions", "organizations_url": "https://api.github.com/users/RamanHacks/orgs", "repos_url": "https://api.github.com/users/RamanHacks/repos", "events_url": "https://api.github.com/users/RamanHacks/events{/privacy}", "received_events_url": "https://api.github.com/users/RamanHacks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-14T16:18:18Z", "updated_at": "2021-03-14T17:25:41Z", "closed_at": "2021-03-14T17:25:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!--hydra.core has no attribute 'global_hydra -->\r\nmodule 'hydra.core' has no attribute 'global_hydra'\r\n## Checklist\r\n- [ ] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```\r\nimport hydra\r\nhydra.core.global_hydra.GlobalHydra().clear()\r\n```\r\n** Stack trace/error message **\r\n```\r\nAttributeError: module 'hydra.core' has no attribute 'global_hydra'\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nExpected no error to pop.\r\n## System information\r\n- **Hydra Version** :  1.0.6\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : conda \r\n- **Operating system** : linux\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1475/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1475/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1473", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1473/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1473/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1473/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1473", "id": 830189569, "node_id": "MDU6SXNzdWU4MzAxODk1Njk=", "number": 1473, "title": "[Bug] None is evaluated as a string", "user": {"login": "marksibrahim", "id": 6558776, "node_id": "MDQ6VXNlcjY1NTg3NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6558776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marksibrahim", "html_url": "https://github.com/marksibrahim", "followers_url": "https://api.github.com/users/marksibrahim/followers", "following_url": "https://api.github.com/users/marksibrahim/following{/other_user}", "gists_url": "https://api.github.com/users/marksibrahim/gists{/gist_id}", "starred_url": "https://api.github.com/users/marksibrahim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marksibrahim/subscriptions", "organizations_url": "https://api.github.com/users/marksibrahim/orgs", "repos_url": "https://api.github.com/users/marksibrahim/repos", "events_url": "https://api.github.com/users/marksibrahim/events{/privacy}", "received_events_url": "https://api.github.com/users/marksibrahim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-03-12T14:49:05Z", "updated_at": "2021-05-12T06:42:20Z", "closed_at": "2021-03-12T14:58:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nPython users would expect `None` to be evaluated the same as `null`, but `None` in a `config.yaml` is evaluated as a string. \r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n`config.yaml`\r\n\r\n```\r\nname: None\r\n```\r\n\r\n`hydra_app.py`\r\n\r\n```\r\nfrom omegaconf import DictConfig\r\nimport hydra\r\n\r\n\r\n@hydra.main(config_name=\"config\")\r\ndef my_app(cfg: DictConfig) -> None:\r\n    print(f\"{cfg.name=}\")\r\n    if cfg.name is None:\r\n        print(\"all good\")\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\n\r\n## Expected Behavior\r\n\r\nExpect `None` to be evaluated as None, not a string following Python's convention. \r\n\r\n## System information\r\n- **Hydra Version** :  `1.1.0.dev3`\r\n- **Python version** : 3.8 \r\n- **Virtual environment type and version** : \r\n- **Operating system** : Mac OS\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1473/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1461", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1461/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1461/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1461/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1461", "id": 824893589, "node_id": "MDU6SXNzdWU4MjQ4OTM1ODk=", "number": 1461, "title": "[Bug] --cfg=hydra CLI fails if top-level config is read-only", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1518816165, "node_id": "MDU6TGFiZWwxNTE4ODE2MTY1", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/In%20progress", "name": "In progress", "color": "569dbf", "default": false, "description": "Work in progress"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 3, "created_at": "2021-03-08T19:49:26Z", "updated_at": "2021-04-14T21:49:49Z", "closed_at": "2021-04-14T21:49:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThe --cfg=hydra flag on the command line fails when the top-level node is read-only\r\n```bash\r\n$ cd ~/hydra.git/examples/patterns/write_protect_config_node/\r\n$ python frozen.py\r\n{'baud_rate': 19200, 'data_bits': 8, 'stop_bits': 1}\r\n$ python frozen.py --cfg=hydra\r\nTraceback (most recent call last):\r\n  File \"/Users/lappy486/hydra.git/hydra/_internal/utils.py\", line 210, in run_and_report\r\n    return func()\r\n  File \"/Users/lappy486/hydra.git/hydra/_internal/utils.py\", line 378, in <lambda>\r\n    lambda: hydra.show_cfg(\r\n  File \"/Users/lappy486/hydra.git/hydra/_internal/hydra.py\", line 162, in show_cfg\r\n    cfg = self._get_cfg(\r\n  File \"/Users/lappy486/hydra.git/hydra/_internal/hydra.py\", line 152, in _get_cfg\r\n    cfg = self.get_sanitized_hydra_cfg(cfg)\r\n  File \"/Users/lappy486/hydra.git/hydra/_internal/hydra.py\", line 128, in get_sanitized_hydra_cfg\r\n    del cfg[key]\r\n  File \"/Users/lappy486/opt/miniconda3/envs/hydra/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 380, in __delitem__\r\n    self._format_and_raise(\r\n  File \"/Users/lappy486/opt/miniconda3/envs/hydra/lib/python3.8/site-packages/omegaconf/base.py\", line 171, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/Users/lappy486/opt/miniconda3/envs/hydra/lib/python3.8/site-packages/omegaconf/_utils.py\", line 640, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/Users/lappy486/opt/miniconda3/envs/hydra/lib/python3.8/site-packages/omegaconf/_utils.py\", line 543, in _raise\r\n    raise ex.with_traceback(sys.exc_info()[2])  # set end OC_CAUSE=1 for full backtrace\r\nomegaconf.errors.ReadonlyConfigError: DictConfig in read-only mode does not support deletion\r\n    full_key: baud_rate\r\n    object_type=SerialPort\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  '1.1.0dev5'\r\n- **Python version** : 3.8.8\r\n- **Virtual environment type and version** : conda\r\n- **Operating system** : MacOs", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1461/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1457", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1457/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1457/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1457/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1457", "id": 823782234, "node_id": "MDU6SXNzdWU4MjM3ODIyMzQ=", "number": 1457, "title": "CLI override of hydra/conf does not require `+` prefix", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 2, "created_at": "2021-03-06T23:52:28Z", "updated_at": "2021-03-10T17:02:22Z", "closed_at": "2021-03-10T17:02:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Not sure if this is a bug or a feature request.\r\n\r\nNormally adding a new key using CLI override requires a `+` prefix:\r\n```bash\r\n$ python my_app.py new_key=new_value\r\nCould not override 'new_key'.\r\nTo append to your config use +new_key=new_value\r\nKey 'new_key' is not in struct\r\n    full_key: new_key\r\n    object_type=dict\r\n```\r\n\r\nBut no `+` is required to override the `hydra` config:\r\n```bash\r\n$ python my_app.py hydra.new_key=new_value\r\n...  # no error\r\n```\r\n\r\n## Expected Behavior\r\nA `+` is required to add new keys to `hydra` conf at the CLI.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0dev5\r\n- **Python version** : CPython 3.8.8\r\n- **Virtual environment type and version** : conda\r\n- **Operating system** : MacOS\r\n\r\n## Additional context\r\nI ran into this when I was trying to override `hydra.output_subdir=custom_dirname`, but I misspelled as `ouput_subdir` instead of `output_subdir`.\r\nSince there was no error message, I was confused when the output dir was still `.hydra` and not `custom_dirname`.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1457/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1455", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1455/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1455/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1455/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1455", "id": 823471894, "node_id": "MDU6SXNzdWU4MjM0NzE4OTQ=", "number": 1455, "title": "[Bug] Custom resolver interpolation with interpolated parameters does not work", "user": {"login": "kdonbekci", "id": 27675252, "node_id": "MDQ6VXNlcjI3Njc1MjUy", "avatar_url": "https://avatars.githubusercontent.com/u/27675252?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kdonbekci", "html_url": "https://github.com/kdonbekci", "followers_url": "https://api.github.com/users/kdonbekci/followers", "following_url": "https://api.github.com/users/kdonbekci/following{/other_user}", "gists_url": "https://api.github.com/users/kdonbekci/gists{/gist_id}", "starred_url": "https://api.github.com/users/kdonbekci/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kdonbekci/subscriptions", "organizations_url": "https://api.github.com/users/kdonbekci/orgs", "repos_url": "https://api.github.com/users/kdonbekci/repos", "events_url": "https://api.github.com/users/kdonbekci/events{/privacy}", "received_events_url": "https://api.github.com/users/kdonbekci/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-03-05T22:43:43Z", "updated_at": "2021-03-06T00:32:38Z", "closed_at": "2021-03-06T00:32:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nNested custom resolver interpolations do not work as expected. Specifically when registering a custom resolver whose parameters are themselves variable interpolations, the custom resolver is treated as a string.\r\n\r\n## To reproduce\r\nIf we have a `config.yaml` file as follows: \r\n```\r\na: 10\r\nb: 10\r\nc: \"${add:${a},${b}}\"\r\nd: \"${add:10,10}\"\r\n```\r\nand a `main.py` file as follows:\r\n```\r\nfrom omegaconf import OmegaConf\r\nimport hydra\r\nOmegaConf.register_resolver(\"add\", lambda x, y: int(x) + int(y))\r\n\r\n@hydra.main(config_name='config')\r\ndef main(cfg):\r\n    print(cfg.c) # WRONG >> ${add:10,10}\r\n    print(cfg.d) # CORRECT >> 20 \r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n## Expected Behavior\r\nWe would expect first output to be the addition of `a` and `b` = 20. This is said to be supported at the OmegaConf documentation [here](https://omegaconf.readthedocs.io/en/latest/usage.html#custom-interpolations).\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.6\r\n- **Python version** : 3.6.9\r\n- **Operating system** :  Ubuntu 18.04\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1455/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1453", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1453/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1453/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1453/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1453", "id": 822619781, "node_id": "MDU6SXNzdWU4MjI2MTk3ODE=", "number": 1453, "title": "[Bug]", "user": {"login": "miraodasilva", "id": 17463598, "node_id": "MDQ6VXNlcjE3NDYzNTk4", "avatar_url": "https://avatars.githubusercontent.com/u/17463598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miraodasilva", "html_url": "https://github.com/miraodasilva", "followers_url": "https://api.github.com/users/miraodasilva/followers", "following_url": "https://api.github.com/users/miraodasilva/following{/other_user}", "gists_url": "https://api.github.com/users/miraodasilva/gists{/gist_id}", "starred_url": "https://api.github.com/users/miraodasilva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miraodasilva/subscriptions", "organizations_url": "https://api.github.com/users/miraodasilva/orgs", "repos_url": "https://api.github.com/users/miraodasilva/repos", "events_url": "https://api.github.com/users/miraodasilva/events{/privacy}", "received_events_url": "https://api.github.com/users/miraodasilva/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-05T00:15:44Z", "updated_at": "2021-03-05T00:32:48Z", "closed_at": "2021-03-05T00:32:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nNested defaults don't seem to be working for me.\r\n## Checklist\r\n- [ X ] I checked on the latest version of Hydra\r\n- [ X ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nI just used the example under examples/advanced/nested_defaults_list\r\n** Stack trace/error message **\r\n```\r\ndebug: false\r\nname: apache\r\n```\r\n\r\n## Expected Behavior\r\nIt is missing \"name: mysql\", which would have been imported in the defaults on apache.yaml.\r\n\r\nI suppose maybe this example is outdated? If so, how would one update it to produce the expected result on 1.0.6? I am asking because I am trying nested defaults in my own project using the same logic as this example, and it does not work. Defaults work fine for config.yaml, but any defaults on nested config files don't work. I looked through the docs for quite a while but maybe I missed something.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.6\r\n- **Python version** : Python 3.7.6\r\n- **Virtual environment type and version** : conda 4.8.2\r\n- **Operating system** :  Ubuntu 18.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1453/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1452", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1452/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1452/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1452/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1452", "id": 822539888, "node_id": "MDU6SXNzdWU4MjI1Mzk4ODg=", "number": 1452, "title": "[Bug] Ax Sweeper broken with PyTorch 1.8.0", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-03-04T21:54:52Z", "updated_at": "2021-06-04T00:10:54Z", "closed_at": "2021-06-04T00:10:45Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Ax plugin tests are failing with pytorch 1.8.\r\nFor now, I am pinning to pytorch 1.7.1.\r\n\r\nOnce solve, revert #1451\r\n\r\n@bernardbeckerman, can you take a look? this looks very worrying, the optimization result looks flat-out wrong.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1452/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1452/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1446", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1446/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1446/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1446/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1446", "id": 821928848, "node_id": "MDU6SXNzdWU4MjE5Mjg4NDg=", "number": 1446, "title": "[Bug] AssertionError triggered with multiple configs from a Config Group specified at CLI", "user": {"login": "Jasha10", "id": 8935917, "node_id": "MDQ6VXNlcjg5MzU5MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/8935917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jasha10", "html_url": "https://github.com/Jasha10", "followers_url": "https://api.github.com/users/Jasha10/followers", "following_url": "https://api.github.com/users/Jasha10/following{/other_user}", "gists_url": "https://api.github.com/users/Jasha10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jasha10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jasha10/subscriptions", "organizations_url": "https://api.github.com/users/Jasha10/orgs", "repos_url": "https://api.github.com/users/Jasha10/repos", "events_url": "https://api.github.com/users/Jasha10/events{/privacy}", "received_events_url": "https://api.github.com/users/Jasha10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 2, "created_at": "2021-03-04T09:13:47Z", "updated_at": "2021-03-06T01:51:25Z", "closed_at": "2021-03-06T01:51:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nAn assertion error is raised if the CLI is used to select multiple options from a Config Group:\r\n```python\r\n$ cat my_app.py\r\nimport hydra\r\nfrom omegaconf import OmegaConf\r\n\r\n@hydra.main()\r\ndef my_app(cfg):\r\n    print(OmegaConf.to_yaml(cfg, resolve=True))\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n```bash\r\n$ ls\r\ndb              my_app.py       outputs\r\n$ ls db/\r\nmysql.yaml      postgresql.yaml\r\n$ python my_app.py +db=['mysql','postgresql']\r\nTraceback (most recent call last):\r\n  File \"/Users/lappy486/hydra/hydra/_internal/utils.py\", line 210, in run_and_report\r\n    return func()\r\n  File \"/Users/lappy486/hydra/hydra/_internal/utils.py\", line 362, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/Users/lappy486/hydra/hydra/_internal/hydra.py\", line 86, in run\r\n    cfg = self.compose_config(\r\n  File \"/Users/lappy486/hydra/hydra/_internal/hydra.py\", line 520, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/Users/lappy486/hydra/hydra/_internal/config_loader_impl.py\", line 146, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/Users/lappy486/hydra/hydra/_internal/config_loader_impl.py\", line 172, in _load_configuration_impl\r\n    defaults_list = create_defaults_list(\r\n  File \"/Users/lappy486/hydra/hydra/_internal/defaults_list.py\", line 709, in create_defaults_list\r\n    defaults, tree = _create_defaults_list(\r\n  File \"/Users/lappy486/hydra/hydra/_internal/defaults_list.py\", line 679, in _create_defaults_list\r\n    defaults_tree = _create_defaults_tree(\r\n  File \"/Users/lappy486/hydra/hydra/_internal/defaults_list.py\", line 338, in _create_defaults_tree\r\n    ret = _create_defaults_tree_impl(\r\n  File \"/Users/lappy486/hydra/hydra/_internal/defaults_list.py\", line 421, in _create_defaults_tree_impl\r\n    return _expand_virtual_root(repo, root, overrides, skip_missing)\r\n  File \"/Users/lappy486/hydra/hydra/_internal/defaults_list.py\", line 263, in _expand_virtual_root\r\n    subtree = _create_defaults_tree_impl(\r\n  File \"/Users/lappy486/hydra/hydra/_internal/defaults_list.py\", line 430, in _create_defaults_tree_impl\r\n    update_package_header(repo=repo, node=parent)\r\n  File \"/Users/lappy486/hydra/hydra/_internal/defaults_list.py\", line 239, in update_package_header\r\n    loaded = repo.load_config(config_path=node.get_config_path())\r\n  File \"/Users/lappy486/hydra/hydra/core/default_element.py\", line 470, in get_config_path\r\n    return f\"{group_path}/{self.get_name()}\"\r\n  File \"/Users/lappy486/hydra/hydra/core/default_element.py\", line 479, in get_name\r\n    assert self.value is None or isinstance(self.value, str)\r\nAssertionError\r\n```\r\n\r\nNote that there is no error if we remove the `db` directory:\r\n```bash\r\n$ rm -rf db/\r\n$ ls\r\nmy_app.py       outputs\r\n$ python my_app.py +db=['mysql','postgresql']\r\ndb:\r\n- mysql\r\n- postgresql\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0dev5\r\n- **Python version** : CPython 3.8\r\n- **Virtual environment type and version** : Conda\r\n- **Operating system** : MacOS\r\n\r\n## Additional context\r\nThe inspiration for this bug report came from the hydra docs on [Selecting multiple configs from a Config Group](https://hydra.cc/docs/next/patterns/select_multiple_configs_from_config_group/)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1446/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1442", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1442/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1442/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1442/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1442", "id": 820535980, "node_id": "MDU6SXNzdWU4MjA1MzU5ODA=", "number": 1442, "title": "[Bug] Fish shell tests are broken with fish 3.2.0", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2169700018, "node_id": "MDU6TGFiZWwyMTY5NzAwMDE4", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/maintenance", "name": "maintenance", "color": "f7d331", "default": false, "description": "Project maintenance"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 4, "created_at": "2021-03-03T01:27:51Z", "updated_at": "2021-03-21T03:10:42Z", "closed_at": "2021-03-21T03:10:42Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "There are a few expected outputs from fish 3.2.0 that seems to be breaking the tests.\r\n\r\n@binshengliu - mind taking a look?\r\nIt looks like the trick to start fish without configuration no longer works as it was in previous versions:\r\n```\r\n # Start fish without user configuration\r\n set env(HOME) /dev/null\r\n```\r\n\r\nThis is example output:\r\n```\r\nomry@Coronadev:~/dev/hydra$ HOME=/dev/null fish;\r\nerror: Your history will not be saved.\r\nwarning-path: Unable to locate data directory derived from $HOME: '/dev/null/.local/share/fish'.\r\nwarning-path: The error was 'Not a directory'.\r\nwarning-path: Please set $HOME to a directory where you have write access.\r\n\r\nerror: Your personal settings will not be saved.\r\nwarning-path: Unable to locate config directory derived from $HOME: '/dev/null/.config/fish'.\r\nwarning-path: The error was 'Not a directory'.\r\nwarning-path: Please set $HOME to a directory where you have write access.\r\n\r\nWelcome to fish, the friendly interactive shell\r\nType help for instructions on how to use fish\r\nomry@Coronadev /h/o/d/hydra (fish)> \r\n```\r\n\r\nEven providing a clean home dir does not achieve the required behavior:\r\n```\r\nomry@Coronadev:~/dev/hydra$ HOME=/tmp/3231232 fish\r\nWelcome to fish, the friendly interactive shell\r\nType help for instructions on how to use fish\r\nomry@Coronadev /h/o/d/hydra (fish)> \r\n```\r\n\r\nAs a temp workaround I am disabling fish shell tests.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1442/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1442/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1430", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1430/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1430/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1430/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1430", "id": 816997768, "node_id": "MDU6SXNzdWU4MTY5OTc3Njg=", "number": 1430, "title": "[Bug] Cannot Instantiate a nested interpolated target multiple times", "user": {"login": "mantaco1", "id": 79609435, "node_id": "MDQ6VXNlcjc5NjA5NDM1", "avatar_url": "https://avatars.githubusercontent.com/u/79609435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mantaco1", "html_url": "https://github.com/mantaco1", "followers_url": "https://api.github.com/users/mantaco1/followers", "following_url": "https://api.github.com/users/mantaco1/following{/other_user}", "gists_url": "https://api.github.com/users/mantaco1/gists{/gist_id}", "starred_url": "https://api.github.com/users/mantaco1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mantaco1/subscriptions", "organizations_url": "https://api.github.com/users/mantaco1/orgs", "repos_url": "https://api.github.com/users/mantaco1/repos", "events_url": "https://api.github.com/users/mantaco1/events{/privacy}", "received_events_url": "https://api.github.com/users/mantaco1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 1, "created_at": "2021-02-26T03:10:09Z", "updated_at": "2021-02-27T03:26:34Z", "closed_at": "2021-02-27T03:26:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThe recent push to master fixed the original bug referenced in #1410 and #1420. This is essentially the same, but attempting it twice. If the interpolation is instantiated more than once, it doesn't work\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [X] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n#### config_test.yaml\r\n```yaml\r\nchild:\r\n    _target_: config_test.Child\r\nparent:\r\n    _target_: config_test.Parent\r\n    child: ${child}\r\n```\r\n\r\n##### config_test.py\r\n```python\r\nimport hydra\r\nfrom hydra.utils import instantiate\r\n\r\n\r\nclass Child:\r\n    pass\r\n\r\nclass Parent:\r\n    def __init__(self, child):\r\n        self.child = child\r\n\r\n@hydra.main(config_name=\"config_test\")\r\ndef run(cfg):\r\n    parent = instantiate(cfg.parent)\r\n    parent = instantiate(cfg.parent)\r\n\r\n    print(parent.child)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    run()\r\n```\r\n\r\n```\r\n{}\r\n```\r\n\r\n## Expected Behavior\r\nThe child object should be correctly instantiated both times.\r\n## System information\r\n- **Hydra Version** :  master (1.1.dev4)\r\n- **Python version** :  3.8\r\n- **Operating system** :  Ubuntu 20.04\r\n\r\n## Additional context\r\nDeep copying the dict object allows this to work", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1430/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1430/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1415", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1415/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1415/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1415/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1415", "id": 814412914, "node_id": "MDU6SXNzdWU4MTQ0MTI5MTQ=", "number": 1415, "title": "Config variable interpolation with custom resolver doesn't call the resolver", "user": {"login": "mfuntowicz", "id": 2241520, "node_id": "MDQ6VXNlcjIyNDE1MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/2241520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mfuntowicz", "html_url": "https://github.com/mfuntowicz", "followers_url": "https://api.github.com/users/mfuntowicz/followers", "following_url": "https://api.github.com/users/mfuntowicz/following{/other_user}", "gists_url": "https://api.github.com/users/mfuntowicz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mfuntowicz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mfuntowicz/subscriptions", "organizations_url": "https://api.github.com/users/mfuntowicz/orgs", "repos_url": "https://api.github.com/users/mfuntowicz/repos", "events_url": "https://api.github.com/users/mfuntowicz/events{/privacy}", "received_events_url": "https://api.github.com/users/mfuntowicz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471570, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-23T12:20:25Z", "updated_at": "2021-02-28T05:20:20Z", "closed_at": "2021-02-28T05:16:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using the following configuration:\r\n\r\n_foo.yaml_\r\n```yaml\r\nnum_threads: 0\r\n```\r\n\r\n_main.py_\r\n```python\r\nif __name__ == '__main__':\r\n    # Custom resolver to fill empty env variable\r\n    OmegaConf.register_resolver(\"plus_10\", lambda x: str(int(x) + 10))\r\n    run()\r\n```\r\n\r\nWhen using value interpolation, the resolver is not being called while statically setting the value correctly calls the resolver.\r\n\r\n**Static Value**\r\n\r\n_openmp.yaml_\r\n```yaml\r\n# @package hydra.job.env_set\r\nOMP_NUM_THREADS: ${plus_10:0}\r\n```\r\n\r\nResult: \r\n```python\r\n>>> OMP_NUM_THREADS: 10\r\n```\r\n\r\n**Dynamic Value**\r\n\r\n_openmp.yaml_\r\n```yaml\r\n# @package hydra.job.env_set\r\nOMP_NUM_THREADS: ${plus_10:${num_threads}}\r\n```\r\n\r\nResult: \r\n```python\r\n>>> OMP_NUM_THREADS: ${plus_10:0}\r\n```\r\n\r\n**I'm using Hydra v1.1-pre3**", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1415/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1415/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1411", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1411/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1411/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1411/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1411", "id": 812720342, "node_id": "MDU6SXNzdWU4MTI3MjAzNDI=", "number": 1411, "title": "[Bug] --hydra-help hangs/crashes running in home directory", "user": {"login": "laughingrice", "id": 1391281, "node_id": "MDQ6VXNlcjEzOTEyODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1391281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laughingrice", "html_url": "https://github.com/laughingrice", "followers_url": "https://api.github.com/users/laughingrice/followers", "following_url": "https://api.github.com/users/laughingrice/following{/other_user}", "gists_url": "https://api.github.com/users/laughingrice/gists{/gist_id}", "starred_url": "https://api.github.com/users/laughingrice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laughingrice/subscriptions", "organizations_url": "https://api.github.com/users/laughingrice/orgs", "repos_url": "https://api.github.com/users/laughingrice/repos", "events_url": "https://api.github.com/users/laughingrice/events{/privacy}", "received_events_url": "https://api.github.com/users/laughingrice/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-20T22:23:27Z", "updated_at": "2021-02-22T03:00:09Z", "closed_at": "2021-02-22T03:00:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nIt looks like --hydra-help tries to scan the entire subdirectory tree making it hang or crash if run in home directory or high up in the hierarchy.\r\n\r\nRunning the attached minimal example in it's own directory works fine, but trying to do the same in the home directory on a mac (`python ./hydra_test.py --hydra-help`) first complained on no access to .Trash (default security setting on modern osx), then when that was \"fixed\" it ran for several minutes, finally crashing apparently going into some link tracking loop (error message attached)\r\n\r\n## Checklist\r\n- [v ] I checked on the latest version of Hydra\r\n- [v ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```\r\n import omegaconf as oc\r\n import hydra\r\n\r\n @hydra.main()\r\n def app(cfg: oc.DictConfig) -> None:\r\n     print(oc.OmegaConf.to_yaml(cfg))\r\n\r\n if __name__ == '__main__':\r\n     app()\r\n```\r\n\r\n** Stack trace/error message **\r\n\r\n```\r\nOSError: [Errno 63] File name too long: '/Users/micha/opt/miniconda3/lib/python3.8/site-packages/hydra/conf/Library/Caches/org.videolan.vlc/org.sparkle-project.Sparkle/VLC 3.0.12/Applications/Microsoft Teams.app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/Microsoft Teams Helper (GPU).app/Contents/Frameworks/ADAL.framework/Versions/A/_CodeSignature'\r\n```\r\n\r\n## Expected Behavior\r\n\r\nReturn a help message without scanning recursively through the entire directory structure\r\n\r\n## System information\r\n- **Hydra Version** :   1.0.6\r\n- **Python version** :  3.8.8\r\n- **Virtual environment type and version** :  none\r\n- **Operating system** : osx big sur (11.2.1)\r\n\r\nall installed via anaconda\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1411/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1411/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1410", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1410/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1410/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1410/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1410", "id": 812322539, "node_id": "MDU6SXNzdWU4MTIzMjI1Mzk=", "number": 1410, "title": "[Bug] Interpolations with their own _target_ break recursive instantiation", "user": {"login": "jeffknaide", "id": 45574991, "node_id": "MDQ6VXNlcjQ1NTc0OTkx", "avatar_url": "https://avatars.githubusercontent.com/u/45574991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffknaide", "html_url": "https://github.com/jeffknaide", "followers_url": "https://api.github.com/users/jeffknaide/followers", "following_url": "https://api.github.com/users/jeffknaide/following{/other_user}", "gists_url": "https://api.github.com/users/jeffknaide/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffknaide/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffknaide/subscriptions", "organizations_url": "https://api.github.com/users/jeffknaide/orgs", "repos_url": "https://api.github.com/users/jeffknaide/repos", "events_url": "https://api.github.com/users/jeffknaide/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffknaide/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 1, "created_at": "2021-02-19T20:26:40Z", "updated_at": "2021-02-24T18:42:16Z", "closed_at": "2021-02-24T18:42:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nInterpolations with `_target_` fail in recursive instantiation\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [X] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\ngiven a config file, `myconfig.yaml`:\r\n```\r\nA:\r\n  _target_: adder.add_values\r\n  a: 1\r\n  b: 2\r\nB:\r\n  _target_: adder.add_values\r\n  a: ${A}\r\n  b: 5\r\n```\r\nthe `_target_` values in above config point to `adder.py`, which looks like the following:\r\n```\r\ndef add_values(a, b):\r\n    return a + b\r\n```\r\n\r\nread this into python directly using OmegaConf.load() and instantiate B (i did this in a jupyter notebook):\r\n```\r\nfrom hydra.utils import instantiate\r\nfrom omegaconf import OmegaConf\r\n\r\ncfg = OmegaConf.load(\"myconfig.yaml\")\r\nprint(instantiate(cfg.B.a))\r\nprint(instantiate(cfg.B))\r\n```\r\n\r\n** Stack trace/error message **\r\nprints out 3 (as expected) then raises an error\r\n```\r\nTypeError                                 Traceback (most recent call last)\r\n~/SageMaker/hydra/hydra/utils.py in instantiate(config, *args, **kwargs)\r\n    108         elif convert == ConvertMode.NONE:\r\n--> 109             return target(*args, **final_kwargs)\r\n    110         else:\r\n\r\n~/SageMaker/JeffsBooks/hydra_instantiate_dataclass_from_yaml/adder.py in add_values(a, b)\r\n      1 def add_values(a, b):\r\n----> 2     return a + b\r\n\r\nTypeError: unsupported operand type(s) for +: 'DictConfig' and 'int'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-7-81063e9b4365> in <module>\r\n      4 cfg = OmegaConf.load(\"myconfig.yaml\")\r\n      5 print(instantiate(cfg.B.a))\r\n----> 6 print(instantiate(cfg.B))\r\n\r\n~/SageMaker/hydra/hydra/utils.py in instantiate(config, *args, **kwargs)\r\n    114         raise type(e)(\r\n    115             f\"Error instantiating/calling '{_convert_target_to_string(target)}' : {e}\"\r\n--> 116         ).with_traceback(sys.exc_info()[2])\r\n    117 \r\n    118 \r\n\r\n~/SageMaker/hydra/hydra/utils.py in instantiate(config, *args, **kwargs)\r\n    107             return target(*args, **final_kwargs)\r\n    108         elif convert == ConvertMode.NONE:\r\n--> 109             return target(*args, **final_kwargs)\r\n    110         else:\r\n    111             assert False\r\n\r\n~/SageMaker/JeffsBooks/hydra_instantiate_dataclass_from_yaml/adder.py in add_values(a, b)\r\n      1 def add_values(a, b):\r\n----> 2     return a + b\r\n\r\nTypeError: Error instantiating/calling 'adder.add_values' : unsupported operand type(s) for +: 'DictConfig' and 'int'\r\n```\r\n\r\n## Expected Behavior\r\nthe expected behavior with recursive instantiation would be to see a printout of 3 (1 + 2 in cfg.B.A) followed by a printout of 8 (cfg.B.A + 5 in cfg.B). \r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev3\r\n- **Python version** : 3.7.6 \r\n- **Virtual environment type and version** : \r\n- **Operating system** : Linux\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1410/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1389", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1389/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1389/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1389/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1389", "id": 804783084, "node_id": "MDU6SXNzdWU4MDQ3ODMwODQ=", "number": 1389, "title": "[Bug] Parsing list of configurations with a structured config", "user": {"login": "jzazo", "id": 25750092, "node_id": "MDQ6VXNlcjI1NzUwMDky", "avatar_url": "https://avatars.githubusercontent.com/u/25750092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jzazo", "html_url": "https://github.com/jzazo", "followers_url": "https://api.github.com/users/jzazo/followers", "following_url": "https://api.github.com/users/jzazo/following{/other_user}", "gists_url": "https://api.github.com/users/jzazo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jzazo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jzazo/subscriptions", "organizations_url": "https://api.github.com/users/jzazo/orgs", "repos_url": "https://api.github.com/users/jzazo/repos", "events_url": "https://api.github.com/users/jzazo/events{/privacy}", "received_events_url": "https://api.github.com/users/jzazo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471570, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}, {"id": 3826166006, "node_id": "LA_kwDOC2wWEs7kDqj2", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/list%20composition", "name": "list composition", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-09T17:59:24Z", "updated_at": "2022-08-25T19:59:57Z", "closed_at": "2021-02-09T23:07:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI cannot parse a list of configs as attribute in a schema that requires a list type. Using latest dev version of Hydra 1.1. I think this feature is [supported](https://hydra.cc/docs/next/tutorials/structured_config/intro/), although I have not found examples in the documentation.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro.\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nThis snipped is almost exactly as the documented [example](https://github.com/facebookresearch/hydra/tree/master/examples/tutorials/structured_configs/5.1_structured_config_schema_same_config_group). Changes are in line 36 of `my_app.py` where I specify a List type, and `config.yaml`, where I input a list instead of an entry:\r\n```python\r\nfrom dataclasses import dataclass, field\r\nfrom typing import List\r\n\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom omegaconf import MISSING, OmegaConf\r\n\r\n\r\n@dataclass\r\nclass DBConfig:\r\n    driver: str = MISSING\r\n    host: str = \"localhost\"\r\n    port: int = MISSING\r\n\r\n\r\n@dataclass\r\nclass MySQLConfig(DBConfig):\r\n    driver: str = \"mysql\"\r\n    port: int = 3306\r\n    user: str = MISSING\r\n    password: str = MISSING\r\n\r\n\r\n@dataclass\r\nclass PostGreSQLConfig(DBConfig):\r\n    driver: str = \"postgresql\"\r\n    user: str = MISSING\r\n    port: int = 5432\r\n    password: str = MISSING\r\n    timeout: int = 10\r\n\r\n\r\n@dataclass\r\nclass Config:\r\n    db: List[DBConfig] = field(default_factory=list)\r\n    debug: bool = False\r\n\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(name=\"base_config\", node=Config)\r\ncs.store(group=\"db\", name=\"base_mysql\", node=MySQLConfig)\r\ncs.store(group=\"db\", name=\"base_postgresql\", node=PostGreSQLConfig)\r\n\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef my_app(cfg: Config) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\nand `config.yaml` specifies a list input, instead of a single entry:\r\n```yaml\r\ndefaults:\r\n  - base_config\r\n  - db: \r\n    - mysql\r\n    - postgresql\r\n\r\ndebug: true\r\n```\r\n\r\n** Stack trace/error message **\r\n```text\r\n$ python src/hydra_listconfigs/script.py\r\n\r\nCannot merge DictConfig with ListConfig\r\n    full_key: \r\n    object_type=Config\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\nI expected that `db` group would be a `ListConfig` of two `DBConfig` elements and the whole schema would work, but it fails.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev3\r\n- **Python version** : Python 3.6.8\r\n- **Operating system** :  Ubuntu 18.04\r\n\r\n## Additional context\r\nI first asked this question in [stackoverflow](https://stackoverflow.com/questions/66104919/set-list-of-config-nodes-as-value-entries-in-yaml-contrasting-with-sructured-con).\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1389/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1389/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1388", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1388/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1388/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1388/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1388", "id": 804272730, "node_id": "MDU6SXNzdWU4MDQyNzI3MzA=", "number": 1388, "title": "[Bug] `in` operator over list-object slows down in hydra.utils.instatiate", "user": {"login": "S-aiueo32", "id": 14917234, "node_id": "MDQ6VXNlcjE0OTE3MjM0", "avatar_url": "https://avatars.githubusercontent.com/u/14917234?v=4", "gravatar_id": "", "url": "https://api.github.com/users/S-aiueo32", "html_url": "https://github.com/S-aiueo32", "followers_url": "https://api.github.com/users/S-aiueo32/followers", "following_url": "https://api.github.com/users/S-aiueo32/following{/other_user}", "gists_url": "https://api.github.com/users/S-aiueo32/gists{/gist_id}", "starred_url": "https://api.github.com/users/S-aiueo32/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/S-aiueo32/subscriptions", "organizations_url": "https://api.github.com/users/S-aiueo32/orgs", "repos_url": "https://api.github.com/users/S-aiueo32/repos", "events_url": "https://api.github.com/users/S-aiueo32/events{/privacy}", "received_events_url": "https://api.github.com/users/S-aiueo32/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-09T06:58:45Z", "updated_at": "2021-02-09T21:28:17Z", "closed_at": "2021-02-09T21:28:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nIf through the `hydra.utils.instantiate`, the built-in `in` operator over list-objects slows down. It takes 200-times seconds.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```python\r\nimport random\r\nimport time\r\nfrom contextlib import contextmanager\r\nfrom typing import List\r\n\r\nimport hydra\r\nfrom omegaconf import OmegaConf\r\n\r\n\r\n@contextmanager\r\ndef timer(name: str) -> None:\r\n    t0 = time.time()\r\n    yield\r\n    print(f'[{name}] done in {time.time() - t0:.03f} s')\r\n\r\n\r\nclass Filter:\r\n    def __init__(self, min: int, max: int, n_samples: int, targets: List[int]) -> None:\r\n        samples = [random.randint(min, max) for _ in range(n_samples)]\r\n        # targets = set(targets)\r\n        filtered = [s for s in samples if s in targets]\r\n\r\n\r\ndef app() -> None:\r\n\r\n    config = OmegaConf.create({\r\n        '_target_': '__main__.Filter',\r\n        'min': 0,\r\n        'max': 100,\r\n        'n_samples': 100_000,\r\n        'targets': [1, 2, 3]\r\n    })\r\n\r\n    kwargs = OmegaConf.to_container(config)\r\n    kwargs.pop('_target_')\r\n\r\n    with timer('Hydra instantiate'):\r\n        _ = hydra.utils.instantiate(config)\r\n\r\n    with timer('Basic instantiate'):\r\n        _ = Filter(**kwargs)\r\n\r\n\r\nif __name__ == '__main__':\r\n    app()\r\n\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n[Hydra instantiate] done in 16.938 s\r\n[Basic instantiate] done in 0.084 s\r\n```\r\n\r\n## Expected Behavior\r\nIf the comment-out for the conversion to set is removed, the execution time becomes almost the same.\r\n```python\r\n[Hydra instantiate] done in 0.085 s\r\n[Basic instantiate] done in 0.078 s\r\n```\r\nI think the performance over list-objects should be improved like this\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.6 (also 1.1.0.dev3)\r\n- **Python version** : 3.8.6\r\n- **Virtual environment type and version** : pyenv+poetry\r\n- **Operating system** : ubuntu 18.04\r\n\r\n## Additional context\r\n:+1:\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1388/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1388/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1386", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1386/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1386/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1386/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1386", "id": 803009825, "node_id": "MDU6SXNzdWU4MDMwMDk4MjU=", "number": 1386, "title": "[Bug][Ax-plugin]Plugin raises SearchSpaceExhausted Exception when the search space is exhausted.", "user": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2169716916, "node_id": "MDU6TGFiZWwyMTY5NzE2OTE2", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/plugin", "name": "plugin", "color": "e59e90", "default": false, "description": "Plugins realted issues"}], "state": "closed", "locked": false, "assignee": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2021-02-07T17:46:01Z", "updated_at": "2021-06-08T21:15:10Z", "closed_at": "2021-06-08T21:15:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nSame as title.\r\n\r\n## Checklist\r\n- [ y] I checked on the latest version of Hydra\r\n- [ y] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n```\r\ncd hydra/plugins/hydra_ax_sweeper\r\npython tests/apps/polynomial.py -m polynomial.y=1 'polynomial.x=range(2,4)'\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n[2021-02-07 09:03:38,001][HYDRA] AxSweeper is optimizing the following parameters: \r\npolynomial.x: choice=[2, 3]\r\npolynomial.y: fixed=1\r\n[INFO 02-07 09:03:38] ax.service.utils.instantiation: Inferred value type of ParameterType.INT for parameter polynomial.x. If that is not the expected value type, you can explicity specify 'value_type' ('int', 'float', 'bool' or 'str') in parameter dict.\r\n[INFO 02-07 09:03:38] ax.modelbridge.dispatch_utils: Using Sobol generation strategy.\r\nTraceback (most recent call last):\r\n  File \"/private/home/sodhani/projects/hydra/hydra/_internal/utils.py\", line 212, in run_and_report\r\n    return func()\r\n  File \"/private/home/sodhani/projects/hydra/hydra/_internal/utils.py\", line 373, in <lambda>\r\n    lambda: hydra.multirun(\r\n  File \"/private/home/sodhani/projects/hydra/hydra/_internal/hydra.py\", line 136, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/private/home/sodhani/projects/hydra/plugins/hydra_ax_sweeper/hydra_plugins/hydra_ax_sweeper/ax_sweeper.py\", line 29, in sweep\r\n    return self.sweeper.sweep(arguments)\r\n  File \"/private/home/sodhani/projects/hydra/plugins/hydra_ax_sweeper/hydra_plugins/hydra_ax_sweeper/_core.py\", line 142, in sweep\r\n    batch_of_trials = get_one_batch_of_trials(\r\n  File \"/private/home/sodhani/projects/hydra/plugins/hydra_ax_sweeper/hydra_plugins/hydra_ax_sweeper/_core.py\", line 79, in get_one_batch_of_trials\r\n    parameters, trial_index = ax_client.get_next_trial()\r\n  File \"/private/home/sodhani/.conda/envs/hydra/lib/python3.8/site-packages/ax/utils/common/executils.py\", line 98, in actual_wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/private/home/sodhani/.conda/envs/hydra/lib/python3.8/site-packages/ax/service/ax_client.py\", line 307, in get_next_trial\r\n    generator_run=self._gen_new_generator_run(), ttl_seconds=ttl_seconds\r\n  File \"/private/home/sodhani/.conda/envs/hydra/lib/python3.8/site-packages/ax/service/ax_client.py\", line 910, in _gen_new_generator_run\r\n    return not_none(self.generation_strategy).gen(\r\n  File \"/private/home/sodhani/.conda/envs/hydra/lib/python3.8/site-packages/ax/modelbridge/generation_strategy.py\", line 400, in gen\r\n    return self._gen_multiple(\r\n  File \"/private/home/sodhani/.conda/envs/hydra/lib/python3.8/site-packages/ax/modelbridge/generation_strategy.py\", line 479, in _gen_multiple\r\n    generator_run = model.gen(\r\n  File \"/private/home/sodhani/.conda/envs/hydra/lib/python3.8/site-packages/ax/modelbridge/base.py\", line 621, in gen\r\n    observation_features, weights, best_obsf, gen_metadata = self._gen(\r\n  File \"/private/home/sodhani/.conda/envs/hydra/lib/python3.8/site-packages/ax/modelbridge/random.py\", line 86, in _gen\r\n    X, w = self.model.gen(\r\n  File \"/private/home/sodhani/.conda/envs/hydra/lib/python3.8/site-packages/ax/models/random/sobol.py\", line 112, in gen\r\n    points, weights = super().gen(\r\n  File \"/private/home/sodhani/.conda/envs/hydra/lib/python3.8/site-packages/ax/models/random/base.py\", line 109, in gen\r\n    points, attempted_draws = rejection_sample(\r\n  File \"/private/home/sodhani/.conda/envs/hydra/lib/python3.8/site-packages/ax/models/model_utils.py\", line 111, in rejection_sample\r\n    raise SearchSpaceExhausted(\r\nax.exceptions.core.SearchSpaceExhausted: Rejection sampling error (specified maximum draws (10000) exhausted, without finding sufficiently many (1) candidates). This likely means that there are no new points left in the search space.\r\n```\r\n\r\n## Expected Behavior\r\nHandle the exception in the plugin\r\n\r\n## System information\r\n- **Hydra Version** :  master\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : \r\n- **Operating system** : ubuntu 20.04\r\n\r\n## Additional context\r\nOriginally reported by Omry", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1386/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1383", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1383/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1383/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1383/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1383", "id": 802455612, "node_id": "MDU6SXNzdWU4MDI0NTU2MTI=", "number": 1383, "title": "[Bug] String values in defaults list are not overridable with lists", "user": {"login": "apsdehal", "id": 3616806, "node_id": "MDQ6VXNlcjM2MTY4MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/3616806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apsdehal", "html_url": "https://github.com/apsdehal", "followers_url": "https://api.github.com/users/apsdehal/followers", "following_url": "https://api.github.com/users/apsdehal/following{/other_user}", "gists_url": "https://api.github.com/users/apsdehal/gists{/gist_id}", "starred_url": "https://api.github.com/users/apsdehal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apsdehal/subscriptions", "organizations_url": "https://api.github.com/users/apsdehal/orgs", "repos_url": "https://api.github.com/users/apsdehal/repos", "events_url": "https://api.github.com/users/apsdehal/events{/privacy}", "received_events_url": "https://api.github.com/users/apsdehal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 2, "created_at": "2021-02-05T20:32:05Z", "updated_at": "2021-02-18T00:53:04Z", "closed_at": "2021-02-18T00:53:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nString values in defaults list are not overridable with lists.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\nFolder structure to reproduce:\r\n\r\n```\r\n\u251c\u2500\u2500 conf\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 conf.yaml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 dataset\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 textcaps.yaml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 textvqa.yaml\r\n\u251c\u2500\u2500 main.py\r\n```\r\n\r\nContents:\r\n\r\n1. main.py\r\n\r\n```py\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"conf\")\r\ndef my_app(cfg : DictConfig) -> None:\r\n    print(cfg)\r\n    \r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\n2. conf.yaml\r\n\r\n```yaml\r\ndefaults:\r\n- dataset: textvqa\r\n```\r\n\r\n3. conf/dataset/textvqa.yaml\r\n```yaml\r\ntextvqa:\r\n  b: c\r\n```\r\n\r\n4. conf/dataset/textcaps.yaml\r\n\r\n```yaml\r\ntextcaps:\r\n  a: b\r\n```\r\n\r\n### Command\r\n\r\n```bash\r\npython main.py dataset=[textvqa,textcaps]\r\n```\r\n\r\n**Stack trace/error message**\r\n```\r\nTraceback (most recent call last):\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/utils.py\", line 212, in run_and_report\r\n    return func()\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/utils.py\", line 368, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/hydra.py\", line 104, in run\r\n    run_mode=RunMode.RUN,\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/hydra.py\", line 544, in compose_config\r\n    from_shell=from_shell,\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/config_loader_impl.py\", line 156, in load_configuration\r\n    from_shell=from_shell,\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/config_loader_impl.py\", line 187, in _load_configuration_impl\r\n    skip_missing=run_mode == RunMode.MULTIRUN,\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/defaults_list.py\", line 720, in create_defaults_list\r\n    skip_missing=skip_missing,\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/defaults_list.py\", line 691, in _create_defaults_list\r\n    skip_missing=skip_missing,\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/defaults_list.py\", line 343, in _create_defaults_tree\r\n    overrides=overrides,\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/defaults_list.py\", line 420, in _create_defaults_tree_impl\r\n    return _expand_virtual_root(repo, root, overrides, skip_missing)\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/defaults_list.py\", line 268, in _expand_virtual_root\r\n    overrides=overrides,\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/defaults_list.py\", line 539, in _create_defaults_tree_impl\r\n    add_child(children, new_root)\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/defaults_list.py\", line 491, in add_child\r\n    overrides=overrides,\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/defaults_list.py\", line 439, in _create_defaults_tree_impl\r\n    update_package_header(repo=repo, node=parent)\r\n  File \"/my_hydra_clone/hydra/hydra/_internal/defaults_list.py\", line 238, in update_package_header\r\n    loaded = repo.load_config(config_path=node.get_config_path())\r\n  File \"/my_hydra_clone/hydra/hydra/core/default_element.py\", line 470, in get_config_path\r\n    return f\"{group_path}/{self.get_name()}\"\r\n  File \"/my_hydra_clone/hydra/hydra/core/default_element.py\", line 479, in get_name\r\n    assert self.value is None or isinstance(self.value, str)\r\nAssertionError\r\n```\r\n\r\n## Expected Behavior\r\nShould work and result in config:\r\n```\r\n{'dataset': {'textvqa': {'b': 'c'}, 'textcaps': {'a': 'b'}}}\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  Master\r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : conda 4.5.8\r\n- **Operating system** : Ubuntu 18.04\r\n\r\n## Additional context\r\n\r\nNote that this works in reverse way, if the defaults list value is a list and you override it with a string. \r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1383/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1382", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1382/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1382/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1382/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1382", "id": 802225412, "node_id": "MDU6SXNzdWU4MDIyMjU0MTI=", "number": 1382, "title": "[Bug] Mandatory values parsed as strings", "user": {"login": "czrcbl", "id": 15962140, "node_id": "MDQ6VXNlcjE1OTYyMTQw", "avatar_url": "https://avatars.githubusercontent.com/u/15962140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/czrcbl", "html_url": "https://github.com/czrcbl", "followers_url": "https://api.github.com/users/czrcbl/followers", "following_url": "https://api.github.com/users/czrcbl/following{/other_user}", "gists_url": "https://api.github.com/users/czrcbl/gists{/gist_id}", "starred_url": "https://api.github.com/users/czrcbl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/czrcbl/subscriptions", "organizations_url": "https://api.github.com/users/czrcbl/orgs", "repos_url": "https://api.github.com/users/czrcbl/repos", "events_url": "https://api.github.com/users/czrcbl/events{/privacy}", "received_events_url": "https://api.github.com/users/czrcbl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471570, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-05T14:48:49Z", "updated_at": "2021-02-07T08:24:31Z", "closed_at": "2021-02-07T08:24:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThe mandatory values (???) are being parsed as strings.\r\n\r\n## Checklist\r\n- [ x] I checked on the latest version of Hydra\r\n- [ x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n``` yaml\r\n# config.yaml\r\nPROJECT_DIR: ../../root\r\nexpname: ???\r\ntype: xxxx\r\n```\r\n\r\n``` python\r\n# main.py\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\n@hydra.main(config_path=\".\", config_name=\"config\")\r\ndef main(cfg: DictConfig):\r\n    print(cfg)\r\n    \r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\nThen `python main.py`\r\n```\r\n{'PROJECT_DIR': '../../root', 'expname': '???', 'type': 'xxxx'}\r\n```\r\n\r\n## Expected Behavior\r\nA error indicating that the `expname` parameter was not set on command line.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.6\r\n- **Python version** : 3.9.1\r\n- **Virtual environment type and version** : conda 4.9.2\r\n- **Operating system** : Pop OS 20.10\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1382/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1382/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1381", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1381/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1381/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1381/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1381", "id": 801964309, "node_id": "MDU6SXNzdWU4MDE5NjQzMDk=", "number": 1381, "title": "[Bug] (bash) autocomplete crashes with ??? in defaults", "user": {"login": "goens", "id": 1645148, "node_id": "MDQ6VXNlcjE2NDUxNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1645148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goens", "html_url": "https://github.com/goens", "followers_url": "https://api.github.com/users/goens/followers", "following_url": "https://api.github.com/users/goens/following{/other_user}", "gists_url": "https://api.github.com/users/goens/gists{/gist_id}", "starred_url": "https://api.github.com/users/goens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goens/subscriptions", "organizations_url": "https://api.github.com/users/goens/orgs", "repos_url": "https://api.github.com/users/goens/repos", "events_url": "https://api.github.com/users/goens/events{/privacy}", "received_events_url": "https://api.github.com/users/goens/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 1, "created_at": "2021-02-05T08:30:53Z", "updated_at": "2021-02-18T22:17:39Z", "closed_at": "2021-02-18T22:17:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nWhen having a configuration that uses ??? in the defaults (to make specifying it mandatory), autocomplete crashes because it looks for that argument first.\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\nA minimal example, `test.py`\r\n```\r\nimport hydra\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef main(cfg):\r\n    pass\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\nin `conf/config.yaml`: \r\n```\r\ndefaults: \r\n  - test: ???\r\n```\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n$> eval \"$(python test.py -sc install=bash)\"\r\n$> export HYDRA_FULL_ERROR=1\r\n$> python test.py t\\<tab\\>\r\n\r\n** Stack trace/error message **\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 262, in _load_configuration\r\n    run_mode=run_mode,\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 805, in _merge_defaults_into_config\r\n    hydra_cfg = merge_defaults_list_into_config(hydra_cfg, user_list)\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 757, in merge_defaults_list_into_config\r\n    config_group=default1.config_group\r\nhydra._internal.config_loader_impl.UnspecifiedMandatoryDefault\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 9, in <module>\r\n    main()\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/main.py\", line 37, in decorated_main\r\n    strict=strict,\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 372, in _run_hydra\r\n    lambda: hydra.shell_completion(\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 201, in run_and_report\r\n    raise ex\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 373, in <lambda>\r\n    config_name=config_name, overrides=args.overrides\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/hydra.py\", line 247, in shell_completion\r\n    plugin.query(config_name=config_name)\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/core_plugins/bash_completion.py\", line 84, in query\r\n    print(\" \".join(self._query(config_name=config_name, line=line)))\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/plugins/completion_plugin.py\", line 213, in _query\r\n    config_name=config_name, overrides=words, run_mode=run_mode, strict=True\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 156, in load_configuration\r\n    from_shell=from_shell,\r\n  File \"/home/goens/.virtualenvs/pykpn/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 272, in _load_configuration\r\n    raise ConfigCompositionException(msg) from e\r\nhydra.errors.ConfigCompositionException: You must specify 'test', e.g, test=<OPTION>\r\nAvailable options:\r\n\r\nst.py\r\n\r\n\r\n```\r\n\r\n## Expected Behavior\r\nHydra would ignore the ??? when called with `-sc` and give me possible autocompletions instead of crashing. \r\n\r\n## System information\r\n- **Hydra Version** : 1.0.6 \r\n- **Python version** : 3.6.10 \r\n- **Virtual environment type and version** : virtualenv 20.3.0+ds \r\n- **Operating system** :  Debian experimental (sid)\r\n\r\n## Additional context\r\nI'd imagine this would also happen with the fish shell, as it seems to be the order in which hydra resolves the `-sc` argument, which I suppose is shell-independent, but I did not test it.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1381/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1381/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1365", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1365/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1365/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1365/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1365", "id": 797849285, "node_id": "MDU6SXNzdWU3OTc4NDkyODU=", "number": 1365, "title": "Confusing error message when overriding hydra/launcher from a nested defaults list without absolute and global package", "user": {"login": "Queuecumber", "id": 5865387, "node_id": "MDQ6VXNlcjU4NjUzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/5865387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Queuecumber", "html_url": "https://github.com/Queuecumber", "followers_url": "https://api.github.com/users/Queuecumber/followers", "following_url": "https://api.github.com/users/Queuecumber/following{/other_user}", "gists_url": "https://api.github.com/users/Queuecumber/gists{/gist_id}", "starred_url": "https://api.github.com/users/Queuecumber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Queuecumber/subscriptions", "organizations_url": "https://api.github.com/users/Queuecumber/orgs", "repos_url": "https://api.github.com/users/Queuecumber/repos", "events_url": "https://api.github.com/users/Queuecumber/events{/privacy}", "received_events_url": "https://api.github.com/users/Queuecumber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 6, "created_at": "2021-02-01T00:10:21Z", "updated_at": "2021-02-02T02:44:16Z", "closed_at": "2021-02-02T02:42:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nI have a config file which, among other things, is supposed to turn on the \"submitit_slurm\" launcher. This is not the \"main\" config for the python file, it's another config which I add in using the command line. When I add this config, I get the following error:\r\n\r\n```\r\n/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/hydra/_internal/defaults_list.py:394: UserWarning: In cluster/slurm_fair: Invalid overriding of hydra/launcher:\r\nDefault list overrides requires 'override' keyword.\r\nSee https://hydra.cc/docs/next/upgrades/1.0_to_1.1/defaults_list_override for more information.\r\n\r\n  warnings.warn(msg, UserWarning)\r\nIn 'cluster/slurm_fair': Could not override 'hydra/launcher'. No match in the defaults list.\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\nbut I'm not trying to override hydra/launcher I'm trying to add it so I think it should work and changing the config to `override hydra/launcher: submitit_slurm` throws the same error. See minimal repro.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n**code** \r\n\r\nminimal.py:\r\n\r\n```\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\n\r\n@hydra.main(config_name=\"minimal\", config_path=\"configs\")\r\ndef main(cfg: DictConfig):\r\n    return\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n**configs**, place in a folder named `configs`\r\n\r\nminimal.yaml:\r\n\r\n```\r\ndefaults:\r\n  - hydra/launcher: submitit_slurm\r\n```\r\n\r\nNote: This file can be empty and it won't change the behavior at all\r\n\r\nslurm.yaml, place in `configs/launcher`\r\n\r\n```\r\ndefaults:\r\n  - hydra/launcher: submitit_slurm\r\n```\r\n\r\n**run** \r\n\r\n`python minimal.py` this will work fine\r\n`python minimal.py +launcher=slurm` this will crash with the stated error. Again this happens regardless of the contents of `minimal.yaml` and adding `override` in `slurm.yaml` also doesn't help.\r\n\r\n\r\n**Stack trace/error message**\r\n```\r\n/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/hydra/_internal/defaults_list.py:394: UserWarning: In cluster/slurm_fair: Invalid overriding of hydra/launcher:\r\nDefault list overrides requires 'override' keyword.\r\nSee https://hydra.cc/docs/next/upgrades/1.0_to_1.1/defaults_list_override for more information.\r\n\r\n  warnings.warn(msg, UserWarning)\r\nIn 'cluster/slurm_fair': Could not override 'hydra/launcher'. No match in the defaults list.\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\nNo error.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev3\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1365/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1365/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1360", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1360/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1360/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1360/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1360", "id": 797294331, "node_id": "MDU6SXNzdWU3OTcyOTQzMzE=", "number": 1360, "title": "[plugins] Incorrect package name in pyproject.toml in plugins", "user": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2169716916, "node_id": "MDU6TGFiZWwyMTY5NzE2OTE2", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/plugin", "name": "plugin", "color": "e59e90", "default": false, "description": "Plugins realted issues"}], "state": "closed", "locked": false, "assignee": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2021-01-30T00:52:14Z", "updated_at": "2021-01-30T11:44:41Z", "closed_at": "2021-01-30T11:44:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Example: https://github.com/facebookresearch/hydra/blob/master/plugins/hydra_submitit_launcher/pyproject.toml#L2", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1360/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1352", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1352/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1352/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1352/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1352", "id": 797264702, "node_id": "MDU6SXNzdWU3OTcyNjQ3MDI=", "number": 1352, "title": "[AxPlugin-Bug] Ax optimization does not return the optimal value", "user": {"login": "alexeib", "id": 3497946, "node_id": "MDQ6VXNlcjM0OTc5NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/3497946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexeib", "html_url": "https://github.com/alexeib", "followers_url": "https://api.github.com/users/alexeib/followers", "following_url": "https://api.github.com/users/alexeib/following{/other_user}", "gists_url": "https://api.github.com/users/alexeib/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexeib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexeib/subscriptions", "organizations_url": "https://api.github.com/users/alexeib/orgs", "repos_url": "https://api.github.com/users/alexeib/repos", "events_url": "https://api.github.com/users/alexeib/events{/privacy}", "received_events_url": "https://api.github.com/users/alexeib/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-01-29T23:12:47Z", "updated_at": "2021-02-24T07:11:42Z", "closed_at": "2021-02-24T07:11:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "ax optimization doesnt actually select the lowest target value for recommendation\r\n\r\ni run a job locally with the following ax config (\"ax_local.yaml\"):\r\n\r\n```\r\nhydra:\r\n  sweeper:\r\n    max_batch_size: 1\r\n    ax_config:\r\n      max_trials: 64\r\n      params:\r\n        p1:\r\n          value_type: float\r\n          type: range\r\n          bounds: [0.0,8.0]\r\n        p2:\r\n          value_type: float\r\n          type: range\r\n          bounds: [0.0,5.0]\r\n```\r\n\r\nthe job is launched like so:\r\n\r\n```\r\npython my_script.py -m --config-dir ~/configs --config-name my_config hydra/sweeper=ax +sweep_config=ax_local\r\n```\r\n\r\nmy main method returns a value (which is what is presumably optimized) and also prints this score (along with params)\r\n\r\nafter the optimization is finished i get \"best parameters\" method. If i cross reference the parameters to the actual scores printed out during the optimization, i see that these there are several scores that are much lower that are available.\r\n\r\nadditionally, when \"new best params\" message is printed out occasionally, the score that it lists is not the actual score that was returned by the main method (but something reasonably close), for example:\r\n\r\nNew best value: 8.640574264487782, best parameters: ...\r\n\r\nbut when I find my own print out for these parameters i see that the score is actually 11.79782511729088 \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1352/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1352/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1351", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1351/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1351/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1351/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1351", "id": 796975125, "node_id": "MDU6SXNzdWU3OTY5NzUxMjU=", "number": 1351, "title": "[Bug] Incorrect subtyping in hydra-core-1.1.0.dev3", "user": {"login": "lematt1991", "id": 13142923, "node_id": "MDQ6VXNlcjEzMTQyOTIz", "avatar_url": "https://avatars.githubusercontent.com/u/13142923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lematt1991", "html_url": "https://github.com/lematt1991", "followers_url": "https://api.github.com/users/lematt1991/followers", "following_url": "https://api.github.com/users/lematt1991/following{/other_user}", "gists_url": "https://api.github.com/users/lematt1991/gists{/gist_id}", "starred_url": "https://api.github.com/users/lematt1991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lematt1991/subscriptions", "organizations_url": "https://api.github.com/users/lematt1991/orgs", "repos_url": "https://api.github.com/users/lematt1991/repos", "events_url": "https://api.github.com/users/lematt1991/events{/privacy}", "received_events_url": "https://api.github.com/users/lematt1991/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-01-29T15:32:39Z", "updated_at": "2021-04-28T19:07:05Z", "closed_at": "2021-01-29T21:11:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nIncorrect subtyping in hydra-core-1.1.0.dev3\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```Python\r\nfrom dataclasses import dataclass, field\r\nfrom hydra.core.config_store import ConfigStore\r\nimport hydra\r\nfrom omegaconf import MISSING\r\nfrom typing import Any\r\n\r\n@dataclass\r\nclass Super:\r\n    x: int = MISSING\r\n\r\n@dataclass\r\nclass Sub(Super):\r\n    x: int = 4\r\n\r\n@dataclass\r\nclass Config:\r\n    defaults: Any = field(default_factory=lambda: [\r\n        {\"instance\": \"sub\"}\r\n    ])\r\n    instance: Super = Super()\r\n    \r\ncs = ConfigStore.instance()\r\ncs.store(group=\"instance\", name=\"super\", node=Super)\r\ncs.store(group=\"instance\", name=\"sub\", node=Sub)\r\ncs.store( name=\"config\", node=Config)\r\n\r\n\r\n@hydra.main( config_path=\".\", config_name=\"config\" )\r\ndef main(cfg):\r\n    print(cfg)\r\n\r\nmain()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 425, in _compose_config_from_defaults_list\r\n    cfg.merge_with(loaded.config)\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 455, in merge_with\r\n    self._format_and_raise(key=None, value=None, cause=e)\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/omegaconf/base.py\", line 147, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/omegaconf/_utils.py\", line 683, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/omegaconf/_utils.py\", line 593, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nomegaconf.errors.ValidationError: Invalid type assigned : Super is not a subclass of Sub. value: {'x': '???'}\r\n        full_key: \r\n        reference_type=Optional[Dict[Union[str, Enum], Any]]\r\n        object_type=dict\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 33, in <module>\r\n    main()\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/main.py\", line 33, in decorated_main\r\n    _run_hydra(\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 364, in _run_hydra\r\n    run_and_report(\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 215, in run_and_report\r\n    raise ex\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 212, in run_and_report\r\n    return func()\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 365, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 101, in run\r\n    cfg = self.compose_config(\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 542, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 151, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 192, in _load_configuration_impl\r\n    cfg = self._compose_config_from_defaults_list(\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 427, in _compose_config_from_defaults_list\r\n    raise ConfigCompositionException(\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 425, in _compose_config_from_defaults_list\r\n    cfg.merge_with(loaded.config)\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 455, in merge_with\r\n    self._format_and_raise(key=None, value=None, cause=e)\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/omegaconf/base.py\", line 147, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/omegaconf/_utils.py\", line 683, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/private/home/mattle/.conda/envs/ricci-filtering/lib/python3.8/site-packages/omegaconf/_utils.py\", line 593, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nhydra.errors.ConfigCompositionException: In 'config': Validation error while composing config:\r\nInvalid type assigned : Super is not a subclass of Sub. value: {'x': '???'}\r\n        full_key: \r\n        reference_type=Optional[Dict[Union[str, Enum], Any]]\r\n        object_type=dict\r\n```\r\n\r\n## Expected Behavior\r\nThis should not produce an error (and doesn't produce an error in hydra-1.0.5)\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev3\r\n- **Python version** : 3.8.6\r\n- **Virtual environment type and version** : conda 4.9.2\r\n- **Operating system** : linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1351/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1344", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1344/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1344/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1344/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1344", "id": 795591482, "node_id": "MDU6SXNzdWU3OTU1OTE0ODI=", "number": 1344, "title": "[Bug] Inconsistent behaviour of `hydra:job.override_dirname` across different launchers", "user": {"login": "shubham-goel", "id": 11925282, "node_id": "MDQ6VXNlcjExOTI1Mjgy", "avatar_url": "https://avatars.githubusercontent.com/u/11925282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shubham-goel", "html_url": "https://github.com/shubham-goel", "followers_url": "https://api.github.com/users/shubham-goel/followers", "following_url": "https://api.github.com/users/shubham-goel/following{/other_user}", "gists_url": "https://api.github.com/users/shubham-goel/gists{/gist_id}", "starred_url": "https://api.github.com/users/shubham-goel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shubham-goel/subscriptions", "organizations_url": "https://api.github.com/users/shubham-goel/orgs", "repos_url": "https://api.github.com/users/shubham-goel/repos", "events_url": "https://api.github.com/users/shubham-goel/events{/privacy}", "received_events_url": "https://api.github.com/users/shubham-goel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-01-28T01:38:07Z", "updated_at": "2021-02-05T04:59:42Z", "closed_at": "2021-02-05T04:59:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n`job.override_dirname` is evaluated differently, depending on (a) Launcher being used; and (b) whether the interpolation is done as ${hydra:job.override_dirname} or ${hydra.job.override_dirname}.\r\n\r\nI'm using `job.override_dirname` in `sweep.subdir`. There are 2 possible interpolation behaviors when running, say, `python test.py -m a=0,1`:\r\nBehaviour 1: `job.override_dirname` evaluates to `a=0,1` for both runs (`a=0` and `a=1`)\r\nBehaviour 2: `job.override_dirname` evaluates to `a=0` and `a=1` for the two runs.\r\n\r\nThe default launcher exhibits Behaviour2 irrespective of whether the variable is interpolated as `${hydra.job.override_dirname}` or `${hydra:job.override_dirname}`.\r\nThe submitit launchers (local and slurm) exhibit Behaviour2 with  `${hydra.job.override_dirname}` but Behaviour1 with `${hydra:job.override_dirname}`\r\n\r\nIf I'm not mistaken, `${hydra:job.override_dirname}` should exhibit Behaviour2 with the submitit launchers also?\r\n\r\n## Checklist\r\n- [ ] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\ntest.py\r\n```python\r\nimport hydra\r\n@hydra.main(config_name=\"test\")\r\ndef main(cfg):\r\n    print(cfg.a)\r\nmain()\r\n```\r\ntest.yaml (Change `hydra:job.override_dirname` to `hydra.job.override_dirname` depending on what you're testing)\r\n```yaml\r\na: 0\r\nhydra:\r\n  sweep:\r\n    dir: ${hydra:runtime.cwd}/outputs/sweep/${hydra:job.id}/\r\n    subdir: ${hydra:runtime.cwd}/outputs/${hydra:job.override_dirname}/${hydra.job.num}\r\n```\r\nRunning `python test.py -m a=0,1` with different launchers exhibits the behaviour mentioned above.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0dev3\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Ubuntu 20.04.1 LTS\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1344/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1344/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1343", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1343/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1343/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1343/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1343", "id": 795556289, "node_id": "MDU6SXNzdWU3OTU1NTYyODk=", "number": 1343, "title": "[Bug] (DictConfig) does not support deletion", "user": {"login": "lematt1991", "id": 13142923, "node_id": "MDQ6VXNlcjEzMTQyOTIz", "avatar_url": "https://avatars.githubusercontent.com/u/13142923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lematt1991", "html_url": "https://github.com/lematt1991", "followers_url": "https://api.github.com/users/lematt1991/followers", "following_url": "https://api.github.com/users/lematt1991/following{/other_user}", "gists_url": "https://api.github.com/users/lematt1991/gists{/gist_id}", "starred_url": "https://api.github.com/users/lematt1991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lematt1991/subscriptions", "organizations_url": "https://api.github.com/users/lematt1991/orgs", "repos_url": "https://api.github.com/users/lematt1991/repos", "events_url": "https://api.github.com/users/lematt1991/events{/privacy}", "received_events_url": "https://api.github.com/users/lematt1991/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-28T00:19:05Z", "updated_at": "2021-01-28T14:32:16Z", "closed_at": "2021-01-28T14:32:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nIt's possible this is just user error, but I'm trying to reproduce the [specializing_config](https://github.com/facebookresearch/hydra/tree/master/examples/patterns/specializing_config) example using structured configs instead of YAML, but I get the following error:\r\n\r\n```\r\nCIFAR10AlexNet (DictConfig) does not support deletion\r\n        full_key: defaults\r\n        reference_type=Optional[Config]\r\n        object_type=CIFAR10AlexNet\r\n```\r\n\r\n[Here's](https://gist.github.com/lematt1991/367b972806674e700224dbbfde347998) a gist with a traceback run with `HYDRA_FULL_ERROR=1`\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n```python\r\nfrom dataclasses import dataclass, field\r\nfrom typing import List, Any\r\nfrom hydra.core.config_store import ConfigStore\r\nimport hydra\r\nfrom omegaconf import MISSING\r\n\r\n@dataclass\r\nclass Dataset:\r\n    pass\r\n\r\n@dataclass\r\nclass Model:\r\n    pass\r\n\r\n@dataclass\r\nclass ImageNet(Dataset):\r\n    name: str = \"imagenet\"\r\n    path: str = \"/datasets/imagenet\"\r\n\r\n@dataclass \r\nclass CIFAR10(Dataset):\r\n    name: str = \"cifar10\"\r\n    path: str = \"/datasets/cifar10\"\r\n\r\n@dataclass\r\nclass AlexNet(Model):\r\n    typ: str = \"alexnet\"\r\n    num_layers: int = 7\r\n\r\n@dataclass\r\nclass Config:\r\n    defaults : List[Any] = field(default_factory=lambda: [\r\n        {\"dataset\": \"imagenet\"},\r\n        {\"model\": \"alexnet\"},\r\n        {\"dataset_model\": \"${defaults.0.dataset}_${defaults.1.model}\", \"optional\": True},\r\n    ])\r\n    dataset: Dataset = MISSING\r\n    model: Model = MISSING\r\n\r\n@dataclass\r\nclass CIFAR10AlexNet(Config):\r\n    @dataclass\r\n    class Model(AlexNet):\r\n        num_layers: int = 5\r\n    model: Model = Model()\r\n\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(name=\"config\", node=Config)\r\ncs.store(group=\"model\", name=\"alexnet\", node=AlexNet)\r\ncs.store(group=\"dataset\", name=\"imagenet\", node=ImageNet)\r\ncs.store(group=\"dataset\", name=\"cifar10\", node=CIFAR10)\r\ncs.store(group=\"dataset_model\", name=\"cifar10_alexnet\", node=CIFAR10AlexNet, package=\"_global_\")\r\n\r\n@hydra.main(config_path=\".\", config_name=\"config\")\r\ndef main(cfg):\r\n    print(cfg)\r\n\r\nmain()\r\n```\r\n\r\nRun with `python repro.py dataset=cifar10` to repro\r\n\r\n## Expected Behavior\r\nI would expect `cfg.num_layers` to be `5`\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.5\r\n- **Python version** : 3.8.6\r\n- **Virtual environment type and version** : conda 4.9.2\r\n- **Operating system** : ubuntu\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1343/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1343/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1340", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1340/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1340/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1340/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1340", "id": 794995520, "node_id": "MDU6SXNzdWU3OTQ5OTU1MjA=", "number": 1340, "title": "[Bug]", "user": {"login": "maxfrei750", "id": 36265931, "node_id": "MDQ6VXNlcjM2MjY1OTMx", "avatar_url": "https://avatars.githubusercontent.com/u/36265931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxfrei750", "html_url": "https://github.com/maxfrei750", "followers_url": "https://api.github.com/users/maxfrei750/followers", "following_url": "https://api.github.com/users/maxfrei750/following{/other_user}", "gists_url": "https://api.github.com/users/maxfrei750/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxfrei750/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxfrei750/subscriptions", "organizations_url": "https://api.github.com/users/maxfrei750/orgs", "repos_url": "https://api.github.com/users/maxfrei750/repos", "events_url": "https://api.github.com/users/maxfrei750/events{/privacy}", "received_events_url": "https://api.github.com/users/maxfrei750/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-27T10:57:26Z", "updated_at": "2021-01-27T11:09:38Z", "closed_at": "2021-01-27T11:09:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nApparently, `hydra.hydra_logging` is not populated automatically in the current master version, but has to be defined explicitly.\r\n\r\nTherefore, even the most basic examples, e.g. `examples/tutorials/basic/your_first_hydra_app/1_simple_cli/` raise an error.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (can be reproduced using `examples/tutorials/basic/your_first_hydra_app/1_simple_cli/`)\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n`python examples/tutorials/basic/your_first_hydra_app/1_simple_cli/my_app.py`\r\n\r\n```\r\nfrom omegaconf import DictConfig, OmegaConf\r\n\r\nimport hydra\r\n\r\n\r\n@hydra.main()\r\ndef my_app(cfg: DictConfig) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nomegaconf.errors.MissingMandatoryValue: Missing mandatory value: hydra.hydra_logging\r\n        full_key: hydra.hydra_logging\r\n        reference_type=Optional[Dict[Union[str, Enum], Any]]\r\n        object_type=HydraConf\r\n```\r\n\r\n## Expected Behavior\r\nhydra.hydra_logging should use the default configuration.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0dev4\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : conda 4.9.2\r\n- **Operating system** : Linux", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1340/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1340/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1335", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1335/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1335/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1335/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1335", "id": 794520033, "node_id": "MDU6SXNzdWU3OTQ1MjAwMzM=", "number": 1335, "title": "[Bug] Interpolation in Hydra config node not working correctly", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-26T19:59:41Z", "updated_at": "2021-01-26T23:03:01Z", "closed_at": "2021-01-26T22:46:11Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "repro:\r\n\r\n```python\r\nfrom omegaconf import DictConfig\r\nimport hydra\r\nfrom hydra.core.hydra_config import HydraConfig\r\n\r\n@hydra.main(config_name=\"config\")\r\ndef experiment(_cfg: DictConfig) -> None:\r\n    print(HydraConfig.get().job_logging.handlers.file.filename)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    experiment()\r\n```\r\n\r\nOutput:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/omry/dev/hydra/examples/configure_hydra/job_name/with_config_file_override.py\", line 10, in experiment\r\n    print(HydraConfig.get().job_logging.handlers.file.filename)\r\nomegaconf.errors.ConfigKeyError: str interpolation key 'hydra.job.name' not found\r\n\tfull_key: hydra.job_logging.handlers.file.filename\r\n\treference_type=Any\r\n\tobject_type=dict\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1335/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1332", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1332/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1332/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1332/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1332", "id": 792691399, "node_id": "MDU6SXNzdWU3OTI2OTEzOTk=", "number": 1332, "title": "[Question] Limit possible values of config fields using Literal?", "user": {"login": "hoangthienan95", "id": 25307953, "node_id": "MDQ6VXNlcjI1MzA3OTUz", "avatar_url": "https://avatars.githubusercontent.com/u/25307953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoangthienan95", "html_url": "https://github.com/hoangthienan95", "followers_url": "https://api.github.com/users/hoangthienan95/followers", "following_url": "https://api.github.com/users/hoangthienan95/following{/other_user}", "gists_url": "https://api.github.com/users/hoangthienan95/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoangthienan95/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoangthienan95/subscriptions", "organizations_url": "https://api.github.com/users/hoangthienan95/orgs", "repos_url": "https://api.github.com/users/hoangthienan95/repos", "events_url": "https://api.github.com/users/hoangthienan95/events{/privacy}", "received_events_url": "https://api.github.com/users/hoangthienan95/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-24T00:56:26Z", "updated_at": "2021-01-24T01:23:22Z", "closed_at": "2021-01-24T01:23:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nIs it possible to limit the possible values of a field in a config yaml file using type hints? I want to limit the values of the `STEP_NAME` variable in `step1.yaml` to only 2 values: `\"extract_info\"` and  `\"run_ovp\"`\r\n\r\nI tried using the `Literal[\"extract_info\", \"run_ovp\"]` type but it threw an error. When the type was `str` it worked fine\r\n\r\n## Checklist\r\n- [ X] I checked on the latest version of Hydra\r\n- [ X] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nDirectory structure:\r\n\r\n```\r\n\u251c\u2500\u2500 conf\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 hydra_all_confs\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 config.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 step\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 step1.yaml\r\n\u251c\u2500\u2500 hydra_test_app.py\r\n```\r\n\r\n<details><summary>Content of hydra_test_app.py</summary>\r\n<p>\r\n\r\n```python\r\nimport logging\r\nfrom dataclasses import dataclass\r\nimport os\r\nfrom typing import Literal, Union\r\nfrom enum import Enum\r\n\r\nfrom omegaconf import DictConfig, OmegaConf, MISSING\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\n\r\n\r\n# A logger for this file\r\nlog = logging.getLogger(__name__)\r\n\r\n\r\n# +\r\n@dataclass\r\nclass step1:\r\n    STEP_NAME: Literal[\"extract_info\", \"run_ovp\", \"???\"] = MISSING #read this from step1.yaml and limit the step name to 2 possible values\r\n\r\n@dataclass\r\nclass Config:\r\n    step = MISSING\r\n\r\n\r\n# -\r\n\r\ncs = ConfigStore.instance()\r\n\r\ncs.store(name=\"config\", node=Config)\r\ncs.store(group=\"step\", name=\"step1\", node=step1)\r\n\r\n@hydra.main(config_path='conf/hydra_all_confs', config_name=\"config\")\r\ndef my_app(cfg: DictConfig) -> None:\r\n    log.debug(cfg)\r\n    log.info(OmegaConf.to_yaml(cfg))\r\n    log.info(\"Working directory : {}\".format(os.getcwd()))\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n</p>\r\n</details>\r\n\r\n<details><summary>Content of config.yaml</summary>\r\n<p>\r\n\r\n```yaml\r\ndefaults:\r\n - step: ??? #want user to provide this at run time\r\n```\r\n</p>\r\n</details>\r\n\r\n<details><summary>** Stack trace/error message **</summary>\r\n\r\n<p>\r\n\r\n```python\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-26-89e95316894d> in <module>\r\n      1 cs.store(name=\"config\", node=Config)\r\n----> 2 cs.store(group=\"step\", name=\"step1\", node=step1)\r\n\r\n/lab/corradin_biobank/FOR_AN/OVP/2019_MSGWAS_OVGen_GWAS_PAIR_RUN/corradin_ovp_kedro/.venv/lib/python3.8/site-packages/hydra/core/config_store.py in store(self, name, node, group, package, provider)\r\n     83             name = f\"{name}.yaml\"\r\n     84         assert isinstance(cur, dict)\r\n---> 85         cfg = OmegaConf.structured(node)\r\n     86         cur[name] = ConfigNode(\r\n     87             name=name, node=cfg, group=group, package=package, provider=provider\r\n\r\n/lab/corradin_biobank/FOR_AN/OVP/2019_MSGWAS_OVGen_GWAS_PAIR_RUN/corradin_ovp_kedro/.venv/lib/python3.8/site-packages/omegaconf/omegaconf.py in structured(obj, parent)\r\n    138     @staticmethod\r\n    139     def structured(obj: Any, parent: Optional[BaseContainer] = None) -> Any:\r\n--> 140         return OmegaConf.create(obj, parent)\r\n    141 \r\n    142     @staticmethod\r\n\r\n/lab/corradin_biobank/FOR_AN/OVP/2019_MSGWAS_OVGen_GWAS_PAIR_RUN/corradin_ovp_kedro/.venv/lib/python3.8/site-packages/omegaconf/omegaconf.py in create(obj, parent)\r\n    175         obj: Any = _EMPTY_MARKER_, parent: Optional[BaseContainer] = None\r\n    176     ) -> Union[DictConfig, ListConfig]:\r\n--> 177         return OmegaConf._create_impl(obj=obj, parent=parent)\r\n    178 \r\n    179     @staticmethod\r\n\r\n/lab/corradin_biobank/FOR_AN/OVP/2019_MSGWAS_OVGen_GWAS_PAIR_RUN/corradin_ovp_kedro/.venv/lib/python3.8/site-packages/omegaconf/omegaconf.py in _create_impl(obj, parent)\r\n    219                     else:\r\n    220                         key_type, element_type = get_dict_key_value_types(ref_type)\r\n--> 221                     return DictConfig(\r\n    222                         content=obj,\r\n    223                         parent=parent,\r\n\r\n/lab/corradin_biobank/FOR_AN/OVP/2019_MSGWAS_OVGen_GWAS_PAIR_RUN/corradin_ovp_kedro/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py in __init__(self, content, key, parent, ref_type, key_type, element_type, is_optional)\r\n     72 \r\n     73         if is_structured_config(content) or is_structured_config(ref_type):\r\n---> 74             self._set_value(content)\r\n     75             if is_structured_config_frozen(content) or is_structured_config_frozen(\r\n     76                 ref_type\r\n\r\n/lab/corradin_biobank/FOR_AN/OVP/2019_MSGWAS_OVGen_GWAS_PAIR_RUN/corradin_ovp_kedro/.venv/lib/python3.8/site-packages/omegaconf/dictconfig.py in _set_value(self, value)\r\n    540             if is_structured_config(value):\r\n    541                 self._metadata.object_type = None\r\n--> 542                 data = get_structured_config_data(value)\r\n    543                 for k, v in data.items():\r\n    544                     self.__setitem__(k, v)\r\n\r\n/lab/corradin_biobank/FOR_AN/OVP/2019_MSGWAS_OVGen_GWAS_PAIR_RUN/corradin_ovp_kedro/.venv/lib/python3.8/site-packages/omegaconf/_utils.py in get_structured_config_data(obj)\r\n    316 def get_structured_config_data(obj: Any) -> Dict[str, Any]:\r\n    317     if is_dataclass(obj):\r\n--> 318         return get_dataclass_data(obj)\r\n    319     elif is_attr_class(obj):\r\n    320         return get_attr_data(obj)\r\n\r\n/lab/corradin_biobank/FOR_AN/OVP/2019_MSGWAS_OVGen_GWAS_PAIR_RUN/corradin_ovp_kedro/.venv/lib/python3.8/site-packages/omegaconf/_utils.py in get_dataclass_data(obj)\r\n    259             )\r\n    260             format_and_raise(node=None, key=None, value=value, cause=e, msg=str(e))\r\n--> 261         d[name] = _maybe_wrap(\r\n    262             ref_type=type_, is_optional=is_optional, key=name, value=value, parent=None\r\n    263         )\r\n\r\n/lab/corradin_biobank/FOR_AN/OVP/2019_MSGWAS_OVGen_GWAS_PAIR_RUN/corradin_ovp_kedro/.venv/lib/python3.8/site-packages/omegaconf/omegaconf.py in _maybe_wrap(ref_type, key, value, is_optional, parent)\r\n    762         return value\r\n    763     else:\r\n--> 764         return _node_wrap(\r\n    765             type_=ref_type,\r\n    766             parent=parent,\r\n\r\n/lab/corradin_biobank/FOR_AN/OVP/2019_MSGWAS_OVGen_GWAS_PAIR_RUN/corradin_ovp_kedro/.venv/lib/python3.8/site-packages/omegaconf/omegaconf.py in _node_wrap(type_, parent, is_optional, value, key, ref_type)\r\n    727     elif type_ == Any or type_ is None:\r\n    728         node = AnyNode(value=value, key=key, parent=parent, is_optional=is_optional)\r\n--> 729     elif issubclass(type_, Enum):\r\n    730         node = EnumNode(\r\n    731             enum_type=type_,\r\n\r\nTypeError: issubclass() arg 1 must be a class\r\n```\r\n</p>\r\n</details>\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  \r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1332/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1332/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1324", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1324/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1324/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1324/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1324", "id": 791896738, "node_id": "MDU6SXNzdWU3OTE4OTY3Mzg=", "number": 1324, "title": "[Bug] Multirun startup tends to become quite slow for large sweeps.", "user": {"login": "TommasoBendinelli", "id": 43389342, "node_id": "MDQ6VXNlcjQzMzg5MzQy", "avatar_url": "https://avatars.githubusercontent.com/u/43389342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TommasoBendinelli", "html_url": "https://github.com/TommasoBendinelli", "followers_url": "https://api.github.com/users/TommasoBendinelli/followers", "following_url": "https://api.github.com/users/TommasoBendinelli/following{/other_user}", "gists_url": "https://api.github.com/users/TommasoBendinelli/gists{/gist_id}", "starred_url": "https://api.github.com/users/TommasoBendinelli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TommasoBendinelli/subscriptions", "organizations_url": "https://api.github.com/users/TommasoBendinelli/orgs", "repos_url": "https://api.github.com/users/TommasoBendinelli/repos", "events_url": "https://api.github.com/users/TommasoBendinelli/events{/privacy}", "received_events_url": "https://api.github.com/users/TommasoBendinelli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-01-22T10:40:37Z", "updated_at": "2022-12-02T19:43:25Z", "closed_at": "2021-01-27T23:36:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [X] I created a minimal repro (See [this](https:// .com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\nI have create the following basic yaml file \r\n```yaml\r\ndefaults:\r\n  - parameters: case1\r\n  - parameters/additional: subvalues1\r\n\r\nhydra:\r\n  overrides:\r\n      task:\r\n      - parameters=case1,case2,case3\r\n      - +num=range(0,2)\r\n```\r\n\r\nassociated with this python script:\r\n```python\r\nimport hydra\r\nimport json\r\n\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef main(cfg):\r\n    print(cfg)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n\r\n\r\n```\r\nWhen I change num from range(0,2) to range(0,100), takes much more time start (i.e. from less than one second to about one minute)\r\n\r\n## Expected Behavior\r\nI would expect a much less slow down.\r\n\r\n## System information\r\n- Hydra 1 :  \r\n- Python 3.8* : \r\n- VirtualEnv: virtualenv : \r\n- Operating System: Ubuntu 20.04 : \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1324/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1324/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1323", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1323/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1323/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1323/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1323", "id": 791685367, "node_id": "MDU6SXNzdWU3OTE2ODUzNjc=", "number": 1323, "title": "[Bug] Problem overriding variables with default values that interpolate `hydra:job.config`.", "user": {"login": "shubham-goel", "id": 11925282, "node_id": "MDQ6VXNlcjExOTI1Mjgy", "avatar_url": "https://avatars.githubusercontent.com/u/11925282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shubham-goel", "html_url": "https://github.com/shubham-goel", "followers_url": "https://api.github.com/users/shubham-goel/followers", "following_url": "https://api.github.com/users/shubham-goel/following{/other_user}", "gists_url": "https://api.github.com/users/shubham-goel/gists{/gist_id}", "starred_url": "https://api.github.com/users/shubham-goel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shubham-goel/subscriptions", "organizations_url": "https://api.github.com/users/shubham-goel/orgs", "repos_url": "https://api.github.com/users/shubham-goel/repos", "events_url": "https://api.github.com/users/shubham-goel/events{/privacy}", "received_events_url": "https://api.github.com/users/shubham-goel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-22T04:22:17Z", "updated_at": "2021-01-22T21:15:10Z", "closed_at": "2021-01-22T21:15:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nHydra raises an error when trying to override variables with default values that interpolate `hydra:job.config`.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\ntest.py\r\n```python\r\nimport hydra\r\n@hydra.main(config_name=\"test\")\r\ndef main(cfg):\r\n    print(cfg.a)\r\nmain()\r\n```\r\n\r\n**test.yaml**\r\n```yaml\r\na: ${hydra:job.config_name}\r\n```\r\n\r\n**test1.yaml**\r\n```yaml\r\ndefaults:\r\n  - test\r\na: 1\r\n```\r\n\r\n`python test.py --config-name=test1` causes an error, trace below. The error goes away when I change `test.yaml` to `a: ${hydra.job.config_name}` but then `python test.py` stops working.\r\n\r\nError trace:\r\n```\r\n$ python test.py --config-name=test1\r\nTraceback (most recent call last):\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 212, in run_and_report\r\n    return func()\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 365, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 101, in run\r\n    cfg = self.compose_config(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 542, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 150, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 191, in _load_configuration_impl\r\n    cfg, composition_trace = self._compose_config_from_defaults_list(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 424, in _compose_config_from_defaults_list\r\n    merged = OmegaConf.merge(cfg, loaded.config)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 355, in merge\r\n    target.merge_with(*others[1:])\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 427, in merge_with\r\n    self._format_and_raise(key=None, value=None, cause=e)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/base.py\", line 107, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/_utils.py\", line 678, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/_utils.py\", line 588, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nValueError: HydraConfig was not set\r\n        full_key: job.config_name\r\n        reference_type=Optional[Dict[Union[str, Enum], Any]]\r\n        object_type=dict\r\n        full_key: \r\n        reference_type=Optional[Dict[Union[str, Enum], Any]]\r\n        object_type=dict\r\n```\r\n\r\nSetting `OC_CAUSE=1`:\r\n```\r\n$ OC_CAUSE=1 python test.py --config-name=test1\r\nTraceback (most recent call last):\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/base.py\", line 373, in _resolve_simple_interpolation\r\n    value = resolver(root_node, inter_key)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 388, in caching\r\n    cache[key] if key in cache else resolver(*OmegaConf._tokenize_args(key))\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/core/utils.py\", line 153, in <lambda>\r\n    lambda path: OmegaConf.select(cast(DictConfig, HydraConfig.get()), path),\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/core/hydra_config.py\", line 31, in get\r\n    raise ValueError(\"HydraConfig was not set\")\r\nValueError: HydraConfig was not set\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 425, in merge_with\r\n    self._merge_with(*others)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 447, in _merge_with\r\n    BaseContainer._map_merge(self, other)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 317, in _map_merge\r\n    target_node = dest_node._dereference_node(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/base.py\", line 135, in _dereference_node\r\n    v = parent._resolve_simple_interpolation(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/base.py\", line 382, in _resolve_simple_interpolation\r\n    self._format_and_raise(key=inter_key, value=None, cause=e)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/base.py\", line 107, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/_utils.py\", line 678, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/_utils.py\", line 588, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nValueError: HydraConfig was not set\r\n        full_key: job.config_name\r\n        reference_type=Optional[Dict[Union[str, Enum], Any]]\r\n        object_type=dict\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 212, in run_and_report\r\n    return func()\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 365, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 101, in run\r\n    cfg = self.compose_config(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 542, in compose_config\r\n    cfg = self.config_loader.load_configuration(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 150, in load_configuration\r\n    return self._load_configuration_impl(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 191, in _load_configuration_impl\r\n    cfg, composition_trace = self._compose_config_from_defaults_list(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 424, in _compose_config_from_defaults_list\r\n    merged = OmegaConf.merge(cfg, loaded.config)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 355, in merge\r\n    target.merge_with(*others[1:])\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 427, in merge_with\r\n    self._format_and_raise(key=None, value=None, cause=e)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/base.py\", line 107, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/_utils.py\", line 678, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/omegaconf/_utils.py\", line 588, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nValueError: HydraConfig was not set\r\n        full_key: job.config_name\r\n        reference_type=Optional[Dict[Union[str, Enum], Any]]\r\n        object_type=dict\r\n        full_key: \r\n        reference_type=Optional[Dict[Union[str, Enum], Any]]\r\n        object_type=dict\r\n```\r\n\r\n## Expected Behavior\r\nBoth `python test.py` and `python test.py --config-name=test1` should work.\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0dev1\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Ubuntu 20.04.1 LTS\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1323/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1322", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1322/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1322/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1322/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1322", "id": 791675798, "node_id": "MDU6SXNzdWU3OTE2NzU3OTg=", "number": 1322, "title": "Invalid error message: Unsupported value type : foo", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 2, "created_at": "2021-01-22T03:53:39Z", "updated_at": "2021-02-18T18:20:53Z", "closed_at": "2021-02-18T18:20:53Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The error message here does not make sense.\r\nThis is probably an OmegaConf issue but need to do some digging to be sure.\r\n```\r\n$ python examples/advanced/nested_defaults_list/my_app.py server.db=foo\r\nError merging override server.db=foo\r\nUnsupported value type : foo\r\n        full_key: server.db\r\n        reference_type=Optional[Dict[Union[str, Enum], Any]]\r\n        object_type=dict\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1322/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1322/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1321", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1321/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1321/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1321/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1321", "id": 791658588, "node_id": "MDU6SXNzdWU3OTE2NTg1ODg=", "number": 1321, "title": "[Bug] Dot Syntax doesn't work for nested default overrides", "user": {"login": "monney", "id": 6789710, "node_id": "MDQ6VXNlcjY3ODk3MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6789710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/monney", "html_url": "https://github.com/monney", "followers_url": "https://api.github.com/users/monney/followers", "following_url": "https://api.github.com/users/monney/following{/other_user}", "gists_url": "https://api.github.com/users/monney/gists{/gist_id}", "starred_url": "https://api.github.com/users/monney/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/monney/subscriptions", "organizations_url": "https://api.github.com/users/monney/orgs", "repos_url": "https://api.github.com/users/monney/repos", "events_url": "https://api.github.com/users/monney/events{/privacy}", "received_events_url": "https://api.github.com/users/monney/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471570, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-01-22T03:06:31Z", "updated_at": "2021-01-22T04:08:18Z", "closed_at": "2021-01-22T03:23:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen trying of override a nested default something like the following doesn't work:\r\n\r\n`foo.bar=baz`\r\nbut this does\r\n`foo/bar=baz`\r\n\r\nthe dot syntax works for defaults in the main defaults list.\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nIn the nested defaults example:\r\nhttps://github.com/facebookresearch/hydra/tree/master/examples/advanced/nested_defaults_list\r\n\r\nrun this from the terminal\r\n```bash\r\npython my_app.py server.db=sqlite\r\n```\r\n\r\n** Stack trace/error message **\r\n```bash\r\nError merging override server.db=sqlite\r\nUnsupported value type : sqlite\r\n\tfull_key: server.db\r\n\treference_type=Any\r\n\tobject_type=dict\r\n```\r\n\r\n## Expected Behavior\r\nThe property should be changed to the alternate config in the group.\r\nSame behavior as \r\n`python my_app.py server/db=sqlite`\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev2\r\n- **Python version** : Python 3.8.6 and 3.7.3\r\n- **Virtual environment type and version** : conda 4.8.5\r\n- **Operating system** : Ubuntu 18 and MacOS Catalina\r\n\r\n## Additional context\r\nNote that in this case the nested default the property is set using / syntax. This happens even it is originally set using the dot syntax.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1321/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1320", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1320/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1320/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1320/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1320", "id": 791658028, "node_id": "MDU6SXNzdWU3OTE2NTgwMjg=", "number": 1320, "title": "[Bug] hydra-joblib-launcher cannot find context for 'locky'  when run with wandb", "user": {"login": "qsh-zh", "id": 28699575, "node_id": "MDQ6VXNlcjI4Njk5NTc1", "avatar_url": "https://avatars.githubusercontent.com/u/28699575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qsh-zh", "html_url": "https://github.com/qsh-zh", "followers_url": "https://api.github.com/users/qsh-zh/followers", "following_url": "https://api.github.com/users/qsh-zh/following{/other_user}", "gists_url": "https://api.github.com/users/qsh-zh/gists{/gist_id}", "starred_url": "https://api.github.com/users/qsh-zh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qsh-zh/subscriptions", "organizations_url": "https://api.github.com/users/qsh-zh/orgs", "repos_url": "https://api.github.com/users/qsh-zh/repos", "events_url": "https://api.github.com/users/qsh-zh/events{/privacy}", "received_events_url": "https://api.github.com/users/qsh-zh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-22T03:04:54Z", "updated_at": "2021-01-22T03:42:23Z", "closed_at": "2021-01-22T03:21:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nHydra-joblib-launcher reports `cannot find context for 'locky' ` when run with wandb\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n[gist](https://gist.github.com/tomsercu/72acb8a435afcda0043ba351536d821a) \r\n\r\n> cat testconf.yaml\r\n```\r\ndefaults:\r\n  - hydra/launcher: joblib\r\nlearning_rate: 0.8\r\n```\r\n** Stack trace/error message **\r\n\r\n**hydra-1.0.0**\r\n> python bug.py -m learning_reate=1\r\n```\r\n[2021-01-21 21:55:52,794][HYDRA] Joblib.Parallel(n_jobs=-1,backend=loky,prefer=processes,require=None,verbose=0,timeout=None,pre_dispatch=2*n_jobs,batch_size=auto,temp_folder=None,max_nbytes=None,mmap_mode=r) is launching 1 jobs\r\n[2021-01-21 21:55:52,794][HYDRA] Launching jobs, sweep output dir : multirun/2021-01-21/21-55-52\r\n[2021-01-21 21:55:52,794][HYDRA]        #0 : learning_rate=1\r\nwandb: Currently logged in as: qinsheng (use `wandb login --relogin` to force relogin)\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/spawn.py\", line 105, in spawn_main\r\n    exitcode = _main(fd)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/spawn.py\", line 114, in _main\r\n    prepare(preparation_data)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/spawn.py\", line 220, in prepare\r\n    set_start_method(data['start_method'], force=True)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/context.py\", line 246, in set_start_method\r\n    self._actual_context = self.get_context(method)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/context.py\", line 238, in get_context\r\n    return super().get_context(method)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/context.py\", line 192, in get_context\r\n    raise ValueError('cannot find context for %r' % method) from None\r\nValueError: cannot find context for 'loky'\r\nProblem at: bug.py 15 run_train\r\njoblib.externals.loky.process_executor._RemoteTraceback:\r\n\"\"\"\r\nTraceback (most recent call last):\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/externals/loky/process_executor.py\", line 431, in _process_worker\r\n    r = call_item()\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/externals/loky/process_executor.py\", line 285, in __call__\r\n    return self.fn(*self.args, **self.kwargs)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/_parallel_backends.py\", line 595, in __call__\r\n    return self.func(*args, **kwargs)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/parallel.py\", line 263, in __call__\r\n    for func, args, kwargs in self.items]\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/parallel.py\", line 263, in <listcomp>\r\n    for func, args, kwargs in self.items]\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra_plugins/hydra_joblib_launcher/_core.py\", line 47, in execute_job\r\n    job_subdir_key=\"hydra.sweep.subdir\",\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/core/utils.py\", line 128, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"bug.py\", line 15, in run_train\r\n    project='foo'\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/wandb/sdk/wandb_init.py\", line 618, in init\r\n    run = wi.init()\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/wandb/sdk/wandb_init.py\", line 462, in init\r\n    raise UsageError(error_message)\r\nwandb.errors.error.UsageError: Error communicating with backend\r\n\"\"\"\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 358, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 136, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 154, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra_plugins/hydra_joblib_launcher/joblib_launcher.py\", line 46, in launch\r\n    launcher=self, job_overrides=job_overrides, initial_job_idx=initial_job_idx\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra_plugins/hydra_joblib_launcher/_core.py\", line 110, in launch\r\n    for idx, overrides in enumerate(job_overrides)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/parallel.py\", line 1054, in __call__\r\n    self.retrieve()\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/parallel.py\", line 933, in retrieve\r\n    self._output.extend(job.get(timeout=self.timeout))\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/_parallel_backends.py\", line 542, in wrap_future_result\r\n    return future.result(timeout=timeout)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/concurrent/futures/_base.py\", line 435, in result\r\n    return self.__get_result()\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/concurrent/futures/_base.py\", line 384, in __get_result\r\n    raise self._exception\r\nwandb.errors.error.UsageError: Error communicating with backend\r\n[2021-01-21 21:56:35,480][HYDRA] Internal process exited\r\n```\r\n\r\n\r\n**hydra-1.1.0**\r\n```\r\n/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/_internal/defaults_list.py:394: UserWarning: In testconf: Invalid overriding of hydra/launcher:\r\nDefault list overrides requires 'override' keyword.\r\nSee https://hydra.cc/docs/next/upgrades/1.0_to_1.1/defaults_list_override for more information.\r\n\r\n  warnings.warn(msg, UserWarning)\r\n[2021-01-21 21:45:35,072][HYDRA] Joblib.Parallel(n_jobs=-1,backend=loky,prefer=processes,require=None,verbose=0,timeout=None,pre_dispatch=2*n_jobs,batch_size=auto,temp_folder=None,max_nbytes=None,mmap_mode=r) is launching 1 jobs\r\n[2021-01-21 21:45:35,072][HYDRA] Launching jobs, sweep output dir : multirun/2021-01-21/21-45-34\r\n[2021-01-21 21:45:35,072][HYDRA]        #0 : learning_rate=1\r\n/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/_internal/defaults_list.py:394: UserWarning: In testconf: Invalid overriding of hydra/launcher:\r\nDefault list overrides requires 'override' keyword.\r\nSee https://hydra.cc/docs/next/upgrades/1.0_to_1.1/defaults_list_override for more information.\r\n\r\n  warnings.warn(msg, UserWarning)\r\nwandb: Currently logged in as: qinsheng (use `wandb login --relogin` to force relogin)\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/spawn.py\", line 105, in spawn_main\r\n    exitcode = _main(fd)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/spawn.py\", line 114, in _main\r\n    prepare(preparation_data)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/spawn.py\", line 220, in prepare\r\n    set_start_method(data['start_method'], force=True)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/context.py\", line 246, in set_start_method\r\n    self._actual_context = self.get_context(method)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/context.py\", line 238, in get_context\r\n    return super().get_context(method)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/multiprocessing/context.py\", line 192, in get_context\r\n    raise ValueError('cannot find context for %r' % method) from None\r\nValueError: cannot find context for 'loky'\r\nProblem at: bug.py 15 run_train\r\njoblib.externals.loky.process_executor._RemoteTraceback:\r\n\"\"\"\r\nTraceback (most recent call last):\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/externals/loky/process_executor.py\", line 431, in _process_worker\r\n    r = call_item()\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/externals/loky/process_executor.py\", line 285, in __call__\r\n    return self.fn(*self.args, **self.kwargs)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/_parallel_backends.py\", line 595, in __call__\r\n    return self.func(*args, **kwargs)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/parallel.py\", line 263, in __call__\r\n    for func, args, kwargs in self.items]\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/parallel.py\", line 263, in <listcomp>\r\n    for func, args, kwargs in self.items]\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra_plugins/hydra_joblib_launcher/_core.py\", line 47, in execute_job\r\n    job_subdir_key=\"hydra.sweep.subdir\",\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/core/utils.py\", line 129, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"bug.py\", line 15, in run_train\r\n    project='foo'\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/wandb/sdk/wandb_init.py\", line 618, in init\r\n    run = wi.init()\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/wandb/sdk/wandb_init.py\", line 462, in init\r\n    raise UsageError(error_message)\r\nwandb.errors.error.UsageError: Error communicating with backend\r\n\"\"\"\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 212, in run_and_report\r\n    return func()\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 376, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 139, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 154, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra_plugins/hydra_joblib_launcher/joblib_launcher.py\", line 46, in launch\r\n    launcher=self, job_overrides=job_overrides, initial_job_idx=initial_job_idx\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/hydra_plugins/hydra_joblib_launcher/_core.py\", line 110, in launch\r\n    for idx, overrides in enumerate(job_overrides)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/parallel.py\", line 1054, in __call__\r\n    self.retrieve()\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/parallel.py\", line 933, in retrieve\r\n    self._output.extend(job.get(timeout=self.timeout))\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/site-packages/joblib/_parallel_backends.py\", line 542, in wrap_future_result\r\n    return future.result(timeout=timeout)\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/concurrent/futures/_base.py\", line 435, in result\r\n    return self.__get_result()\r\n  File \"/home/zqs/anaconda3/envs/dev/lib/python3.7/concurrent/futures/_base.py\", line 384, in __get_result\r\n    raise self._exception\r\nwandb.errors.error.UsageError: Error communicating with backend\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0 / 1.1.0\r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : conda 4.9.1, wandb, version 0.10.14\r\n- **Operating system** : ubuntu 20.04\r\n\r\n## Additional context\r\n\r\nError [wandb/client#1314](https://github.com/wandb/client/issues/1314) drives me to try joblib launcher instead the default one .  If without wandb, the launcher works well.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1320/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1320/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1314", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1314/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1314/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1314/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1314", "id": 791262479, "node_id": "MDU6SXNzdWU3OTEyNjI0Nzk=", "number": 1314, "title": "[Bug] Submitit crashes when sweep dir contains `\\=`", "user": {"login": "shubham-goel", "id": 11925282, "node_id": "MDQ6VXNlcjExOTI1Mjgy", "avatar_url": "https://avatars.githubusercontent.com/u/11925282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shubham-goel", "html_url": "https://github.com/shubham-goel", "followers_url": "https://api.github.com/users/shubham-goel/followers", "following_url": "https://api.github.com/users/shubham-goel/following{/other_user}", "gists_url": "https://api.github.com/users/shubham-goel/gists{/gist_id}", "starred_url": "https://api.github.com/users/shubham-goel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shubham-goel/subscriptions", "organizations_url": "https://api.github.com/users/shubham-goel/orgs", "repos_url": "https://api.github.com/users/shubham-goel/repos", "events_url": "https://api.github.com/users/shubham-goel/events{/privacy}", "received_events_url": "https://api.github.com/users/shubham-goel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-01-21T16:00:07Z", "updated_at": "2021-01-22T04:16:37Z", "closed_at": "2021-01-22T04:16:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nSubmitit crashes with an error when sweep directory contains `\\=`, but the default launcher doesn't.\r\nThis could be a rather common occurence when the app contains `hydra.job.override_dirname` in the sweep dir, and a filename (say a checkpoint from a previous experiment) is passed in command line.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\ntest.py\r\n```python\r\nimport hydra\r\n@hydra.main(config_name=\"test\")\r\ndef main(cfg):\r\n    print(cfg.a)\r\nmain()\r\n```\r\ntest.yaml \r\n```yaml\r\nhydra:\r\n  run:\r\n    dir: outputs/${hydra.job.config_name}_${hydra.job.override_dirname}\r\n  sweep:\r\n    dir: ${hydra.run.dir}\r\n``` \r\n\r\n**Stack trace/error message**\r\nSubmitit works when arguments don't contain `\\=`\r\n```\r\n$ python test.py +a=\"0\" hydra/launcher=submitit_slurm hydra.launcher.partition=dev -m\r\n[2021-01-21 08:05:17,637][HYDRA] Submitit 'slurm' sweep output dir : outputs/test_+a=0\r\n[2021-01-21 08:05:17,639][HYDRA]        #0 : +a=0\r\n```\r\n\r\nDefault launcher works when arguments contain `\\=`:\r\n```\r\n$ python test.py +a=\"\\=0\" +b=0                                                                                             \r\n=0\r\n```\r\n\r\nSubmitit fails when arguments contain `\\=`\r\n```\r\n$ python test.py +a=\"\\=0\" hydra/launcher=submitit_slurm hydra.launcher.partition=dev -m\r\n[2021-01-21 08:06:01,298][HYDRA] Submitit 'slurm' sweep output dir : outputs/test_+a=\\=0\r\n[2021-01-21 08:06:01,302][HYDRA]        #0 : +a=\\=0\r\nTraceback (most recent call last):\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 212, in run_and_report\r\n    return func()\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 373, in <lambda>\r\n    lambda: hydra.multirun(\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 139, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 154, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 150, in launch\r\n    return [j.results()[0] for j in jobs]\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 150, in <listcomp>\r\n    return [j.results()[0] for j in jobs]  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/submitit/core/core.py\", line 289, in results\r\n    outcome, result = self._get_outcome_and_result()\r\n  File \"/private/home/shubhamgoel/.conda/envs/py3d-implicit/lib/python3.8/site-packages/submitit/core/core.py\", line 368, in _get_outcome_and_result    raise utils.UncompletedJobError(submitit.core.utils.UncompletedJobError: Job 35092817 (task: 0) with path /private/home/shubhamgoel/code/3Dify/hydra_test/outputs/test_+a=\\=0/.submitit/35092817/35092817_0_result.pkl\r\nhas not produced any output (state: FAILED)\r\nError stream produced:\r\n----------------------\r\nNone\r\n```\r\n\r\nFiles produced:\r\n```\r\n$ tree -a outputs/\r\noutputs/\r\n\u251c\u2500\u2500 test_+a=0\r\n\u2502   \u251c\u2500\u2500 .submitit\r\n\u2502   \u2502   \u2514\u2500\u2500 35092688\r\n\u2502   \u2502       \u251c\u2500\u2500 35092688_0_log.err\r\n\u2502   \u2502       \u251c\u2500\u2500 35092688_0_log.out\r\n\u2502   \u2502       \u251c\u2500\u2500 35092688_0_result.pkl\r\n\u2502   \u2502       \u251c\u2500\u2500 35092688_submission.sh\r\n\u2502   \u2502       \u2514\u2500\u2500 35092688_submitted.pkl\r\n\u2502   \u251c\u2500\u2500 0\r\n\u2502   \u2502   \u251c\u2500\u2500 .hydra\r\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 config.yaml\r\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 hydra.yaml\r\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 overrides.yaml\r\n\u2502   \u2502   \u2514\u2500\u2500 test.log\r\n\u2502   \u2514\u2500\u2500 multirun.yaml\r\n\u251c\u2500\u2500 test_+a=\\=0\r\n\u2502   \u251c\u2500\u2500 .submitit\r\n\u2502   \u2502   \u2514\u2500\u2500 35092817\r\n\u2502   \u2502       \u251c\u2500\u2500 35092817_submission.sh\r\n\u2502   \u2502       \u2514\u2500\u2500 35092817_submitted.pkl\r\n\u2502   \u2514\u2500\u2500 multirun.yaml\r\n\u2514\u2500\u2500 test_+a=\\=0,+b=0\r\n    \u251c\u2500\u2500 .hydra\r\n    \u2502   \u251c\u2500\u2500 config.yaml\r\n    \u2502   \u251c\u2500\u2500 hydra.yaml\r\n    \u2502   \u2514\u2500\u2500 overrides.yaml\r\n    \u2514\u2500\u2500 test.log\r\n\r\n10 directories, 17 files\r\n```\r\n\r\n\r\n## Expected Behavior\r\nSubmitit plugin should not throw an error.\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0dev1\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Ubuntu 20.04.1 LTS\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1314/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1314/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1308", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1308/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1308/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1308/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1308", "id": 789327868, "node_id": "MDU6SXNzdWU3ODkzMjc4Njg=", "number": 1308, "title": "[Bug] Cannot find configuration file if the file suffix is `.yml` instead of `.yaml`", "user": {"login": "binh-vu", "id": 4346739, "node_id": "MDQ6VXNlcjQzNDY3Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/4346739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binh-vu", "html_url": "https://github.com/binh-vu", "followers_url": "https://api.github.com/users/binh-vu/followers", "following_url": "https://api.github.com/users/binh-vu/following{/other_user}", "gists_url": "https://api.github.com/users/binh-vu/gists{/gist_id}", "starred_url": "https://api.github.com/users/binh-vu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binh-vu/subscriptions", "organizations_url": "https://api.github.com/users/binh-vu/orgs", "repos_url": "https://api.github.com/users/binh-vu/repos", "events_url": "https://api.github.com/users/binh-vu/events{/privacy}", "received_events_url": "https://api.github.com/users/binh-vu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 3, "created_at": "2021-01-19T20:10:41Z", "updated_at": "2021-01-28T00:05:49Z", "closed_at": "2021-01-28T00:05:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n`.yml` is also a popular suffix for YAML file. However, the code doesn't handle it correctly and assumes that people will use `.yaml` suffix. Either this needs to be mentioned explicitly in the documentation to avoid confusion or the code has to be fixed. This is an excerpt from `hydra/plugins/config_source.py` showing how this currently is handled.\r\n\r\n```python\r\n@staticmethod\r\ndef _normalize_file_name(filename: str) -> str:\r\n    if not any(filename.endswith(ext) for ext in [\".yaml\", \".yml\"]):\r\n        filename += \".yaml\"\r\n    return filename\r\n```\r\n\r\nThe code above seems recognize that people use `.yml` suffix but assuming people will always use `.yaml` by appending to it? The [documentation](https://hydra.cc/docs/next/tutorials/basic/your_first_app/config_file) suggests that the users should omit the suffix.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.5\r\n- **Python version** : 3.7.5\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1308/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1308/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1307", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1307/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1307/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1307/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1307", "id": 789046648, "node_id": "MDU6SXNzdWU3ODkwNDY2NDg=", "number": 1307, "title": "[Bug] Nested dictionary overwrite only keeps last k:v", "user": {"login": "bimtauer", "id": 30375389, "node_id": "MDQ6VXNlcjMwMzc1Mzg5", "avatar_url": "https://avatars.githubusercontent.com/u/30375389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bimtauer", "html_url": "https://github.com/bimtauer", "followers_url": "https://api.github.com/users/bimtauer/followers", "following_url": "https://api.github.com/users/bimtauer/following{/other_user}", "gists_url": "https://api.github.com/users/bimtauer/gists{/gist_id}", "starred_url": "https://api.github.com/users/bimtauer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bimtauer/subscriptions", "organizations_url": "https://api.github.com/users/bimtauer/orgs", "repos_url": "https://api.github.com/users/bimtauer/repos", "events_url": "https://api.github.com/users/bimtauer/events{/privacy}", "received_events_url": "https://api.github.com/users/bimtauer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-01-19T14:00:16Z", "updated_at": "2021-01-20T00:28:13Z", "closed_at": "2021-01-19T23:05:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI tried to use dictionary overrides from command line as shown [here](https://hydra.cc/docs/next/advanced/override_grammar/basic/#dictionaries), but cannot get the expected output.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] All code needed to reproduce is below:\r\n\r\n## To reproduce\r\n\r\napp.py\r\n```python\r\nimport hydra\r\nfrom omegaconf import DictConfig, OmegaConf\r\n\r\n@hydra.main(config_name='config')\r\ndef my_app(cfg: DictConfig) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\nconfig.yaml\r\n```yaml\r\ndb:\r\n  driver: mysql\r\n  user: omry\r\n  password: secret\r\n```\r\nRun:\r\n`python app.py db={user:root,pass:1234}\r\n`\r\n\r\n### The buggy output:\r\n`db: pass:1234`\r\n\r\n### Expected output:\r\n```\r\ndb:\r\n  driver: mysql\r\n  user: root\r\n  pass: 1234\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.5 \r\n- **Python version** :  3.7.6\r\n- **Virtual environment type and version** :  conda 4.8.3\r\n- **Operating system** :  Ubuntu 20.04\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1307/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1307/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1302", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1302/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1302/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1302/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1302", "id": 787716797, "node_id": "MDU6SXNzdWU3ODc3MTY3OTc=", "number": 1302, "title": "[Bug] `hydra.job.id` cannot be used in `hydra.sweep.dir`", "user": {"login": "YannDubs", "id": 24327668, "node_id": "MDQ6VXNlcjI0MzI3NjY4", "avatar_url": "https://avatars.githubusercontent.com/u/24327668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YannDubs", "html_url": "https://github.com/YannDubs", "followers_url": "https://api.github.com/users/YannDubs/followers", "following_url": "https://api.github.com/users/YannDubs/following{/other_user}", "gists_url": "https://api.github.com/users/YannDubs/gists{/gist_id}", "starred_url": "https://api.github.com/users/YannDubs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YannDubs/subscriptions", "organizations_url": "https://api.github.com/users/YannDubs/orgs", "repos_url": "https://api.github.com/users/YannDubs/repos", "events_url": "https://api.github.com/users/YannDubs/events{/privacy}", "received_events_url": "https://api.github.com/users/YannDubs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-01-17T14:24:41Z", "updated_at": "2021-01-17T18:31:02Z", "closed_at": "2021-01-17T17:56:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n`hydra.job.id` cannot be used in `hydra.sweep.dir` but it can be used in `hydra.sweep.subdir`. The same holds for `hydra.job.num`.\r\n\r\n## To reproduce\r\n\r\n`config.yaml`:\r\n\r\n```\r\nhydra:\r\n  sweep:\r\n    dir: ${hydra.runtime.cwd}/${hydra.job.id}\r\n    subdir: ${hydra.job.num}\r\n```\r\n\r\n`test.py`:\r\n\r\n```python\r\nimport hydra\r\n@hydra.main(config_name='config')\r\ndef main(cfg):\r\n        pass\r\nmain()\r\n```\r\n\r\nCommand `python test.py  -m`\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\nomegaconf.errors.MissingMandatoryValue: Missing mandatory value : hydra.job.id\r\n\tfull_key: hydra.sweep.dir\r\n\treference_type=SweepDir\r\n\tobject_type=SweepDir\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  I tested both on *1.0.5* (stabel) and *hydra-core-1.1.0.dev2* (pre)\r\n- **Python version** : 3.8.5\r\n- **Operating system** : Ubuntu\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1302/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1302/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1299", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1299/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1299/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1299/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1299", "id": 787507198, "node_id": "MDU6SXNzdWU3ODc1MDcxOTg=", "number": 1299, "title": "[Bug] Configen does not support `Callable` types", "user": {"login": "piraka9011", "id": 16828657, "node_id": "MDQ6VXNlcjE2ODI4NjU3", "avatar_url": "https://avatars.githubusercontent.com/u/16828657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piraka9011", "html_url": "https://github.com/piraka9011", "followers_url": "https://api.github.com/users/piraka9011/followers", "following_url": "https://api.github.com/users/piraka9011/following{/other_user}", "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}", "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions", "organizations_url": "https://api.github.com/users/piraka9011/orgs", "repos_url": "https://api.github.com/users/piraka9011/repos", "events_url": "https://api.github.com/users/piraka9011/events{/privacy}", "received_events_url": "https://api.github.com/users/piraka9011/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-16T16:56:34Z", "updated_at": "2021-06-04T00:24:36Z", "closed_at": "2021-06-04T00:24:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nWhen attempting to use configen to generate a [`Callable`](https://docs.python.org/3/library/typing.html#typing.Callable) type, a `TypeError` is thrown [here](https://github.com/facebookresearch/hydra/blob/dbe1e6882386fd1c1b721992542844e58bf0722a/tools/configen/configen/configen.py#L118).\r\n\r\nSee example config below.\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [X] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```\r\nconfigen --config-dir conf --config-name pytorch_lightning\r\n```\r\n\r\nExample config from lightning\r\n\r\n```yaml\r\n# pytorch_lightning.yaml\r\ndefaults:\r\n  - configen_schema\r\n\r\nconfigen:\r\n    output_dir: ${hydra:runtime.cwd}\r\n\r\n    header: |\r\n        # Autogenerated by configen, do not edit.\r\n        # If encountering an error, please file an issue @\r\n        # https://github.com/romesco/hydra-lightning\r\n        # fmt: off\r\n        # isort: skip_file\r\n        # flake8: noqa\r\n        # Hydra + Lightning\r\n\r\n    module_path_pattern: 'hydra_configs/{{module_path}}.py'\r\n\r\n    modules:\r\n        - name: pytorch_lightning.metrics.classification\r\n          classes:\r\n            - Accuracy\r\n            - Fbeta\r\n            - Precision\r\n```\r\n\r\n** Stack trace/error message **\r\n\r\n```sh\r\nTraceback (most recent call last):\r\n  File \"/home/allabana/.virtualenvs/light-ws/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 364, in _run_hydra\r\n    run_and_report(\r\n  File \"/home/allabana/.virtualenvs/light-ws/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 215, in run_and_report\r\n    raise ex\r\n  File \"/home/allabana/.virtualenvs/light-ws/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 212, in run_and_report\r\n    return func()\r\n  File \"/home/allabana/.virtualenvs/light-ws/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 365, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/allabana/.virtualenvs/light-ws/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 109, in run\r\n    return run_job(\r\n  File \"/home/allabana/.virtualenvs/light-ws/lib/python3.8/site-packages/hydra/core/utils.py\", line 129, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"/home/allabana/.virtualenvs/light-ws/lib/python3.8/site-packages/configen/configen.py\", line 263, in main\r\n    code = generate_module(cfg=cfg.configen, module=module)\r\n  File \"/home/allabana/.virtualenvs/light-ws/lib/python3.8/site-packages/configen/configen.py\", line 182, in generate_module\r\n    not missing_annotation_type and is_incompatible(type_)\r\n  File \"/home/allabana/.virtualenvs/light-ws/lib/python3.8/site-packages/configen/configen.py\", line 118, in is_incompatible\r\n    if type_ is Any or issubclass(type_, (int, float, str, bool, Enum)):\r\nTypeError: issubclass() arg 1 must be a class\r\npython-BaseException\r\n```\r\n\r\n## Expected Behavior\r\n\r\nConfig should be generated normally\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0dev5\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : virtualenv\r\n- **Operating system** : Ubuntu 20.04\r\n\r\n## Additional context\r\n\r\nIf I attempt to wrap the failing `if` statement with a try catch like below, I get another error [here](https://github.com/facebookresearch/hydra/blob/dbe1e6882386fd1c1b721992542844e58bf0722a/tools/configen/configen/utils.py#L87)\r\n\r\n```python\r\n    try:\r\n        if type_ is Any or issubclass(type_, (int, float, str, bool, Enum)):\r\n            return False\r\n    except TypeError:\r\n        return False\r\n```\r\n\r\nAnd so I wrapped that failing block with another try/catch:\r\n\r\n```\r\n                try:\r\n                    classname = t.__name__\r\n                except AttributeError:\r\n                    classname = t._name\r\n```\r\n\r\nAnd now configen works.\r\n\r\nThis is a hacky approach IMO, and a better solution could be proposed.\r\n\r\nI'm not too familiar with the internals of configen, so I don't know what the best way is to check for subclasses or check for names. (Maybe there are other helper methods somewhere?)\r\n\r\nI can open a PR if this is fine.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1295", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1295/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1295/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1295/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1295", "id": 784772713, "node_id": "MDU6SXNzdWU3ODQ3NzI3MTM=", "number": 1295, "title": "[Bug] utils.call forwarding behavior of ListConfig changes based on other types present", "user": {"login": "monney", "id": 6789710, "node_id": "MDQ6VXNlcjY3ODk3MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6789710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/monney", "html_url": "https://github.com/monney", "followers_url": "https://api.github.com/users/monney/followers", "following_url": "https://api.github.com/users/monney/following{/other_user}", "gists_url": "https://api.github.com/users/monney/gists{/gist_id}", "starred_url": "https://api.github.com/users/monney/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/monney/subscriptions", "organizations_url": "https://api.github.com/users/monney/orgs", "repos_url": "https://api.github.com/users/monney/repos", "events_url": "https://api.github.com/users/monney/events{/privacy}", "received_events_url": "https://api.github.com/users/monney/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1596515428, "node_id": "MDU6TGFiZWwxNTk2NTE1NDI4", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/blocked", "name": "blocked", "color": "ffa0a0", "default": false, "description": "Can't make progress"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 12, "created_at": "2021-01-13T04:16:32Z", "updated_at": "2021-03-24T02:44:00Z", "closed_at": "2021-02-24T00:43:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nI'm not sure if this is a bug or intended behavior but the forwarding behavior of `call` and  `instantiate` of a `ListConfig` object changes depending on the surrounding types. If a generator is passed in any surrounding arguments, the `ListConfig` becomes a generator. Otherwise it is not.\r\n\r\nIf this is intended how can I disable this?\r\n\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra \r\n- [x] I created a minimal repro \r\n\r\n## To reproduce\r\n\r\n```python\r\nimport pickle\r\nfrom hydra.utils import call\r\n\r\ndef example(foo, bar):\r\n    return foo\r\n\r\n\r\ndef pickle_test():\r\n    foo = call({'_target_': f'{__file__[:-3]}.example', 'foo': [1, 2, 3]}, bar=[i for i in range(10)])\r\n    pickle.dumps(foo) #this line succeeds\r\n\r\n    foo = call({'_target_': f'{__file__[:-3]}.example', 'foo': [1, 2, 3]}, bar=(i for i in range(10)))\r\n    pickle.dumps(foo) #this line fails -- TypeError: cannot pickle 'generator' object\r\n\r\n\r\nif __name__=='__main__':\r\n    pickle_test()\r\n```\r\n\r\n** Stack trace/error message **\r\n```bash\r\nTraceback (most recent call last):\r\n  File \"example_script.py\", line 17, in <module>\r\n    pickle_test()\r\n  File \"example_script.py\", line 13, in pickle_test\r\n    pickle.dumps(foo) #this line fails -- TypeError: cannot pickle 'generator' object\r\nTypeError: cannot pickle 'generator' object\r\n```\r\n\r\n## Expected Behavior\r\nBoth instances of foo should be picklable (or not picklable but the former is preferred)\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0.dev2\r\n- **Python version** :  3.8.6\r\n- **Virtual environment type and version** : conda 4.8.5\r\n- **Operating system** :  macOS and Ubuntu 18\r\n\r\n## Additional context\r\n- I don't think this happens in Hydra 1.0\r\n- An actual typing test to see if it's a generator returns false for some reason. Only pickling fails.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1295/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1285", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1285/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1285/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1285/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1285", "id": 782435118, "node_id": "MDU6SXNzdWU3ODI0MzUxMTg=", "number": 1285, "title": "[Bug] Ambiguous truth value error when passing DF to instantiate as a kwarg", "user": {"login": "jeffknaide", "id": 45574991, "node_id": "MDQ6VXNlcjQ1NTc0OTkx", "avatar_url": "https://avatars.githubusercontent.com/u/45574991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffknaide", "html_url": "https://github.com/jeffknaide", "followers_url": "https://api.github.com/users/jeffknaide/followers", "following_url": "https://api.github.com/users/jeffknaide/following{/other_user}", "gists_url": "https://api.github.com/users/jeffknaide/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffknaide/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffknaide/subscriptions", "organizations_url": "https://api.github.com/users/jeffknaide/orgs", "repos_url": "https://api.github.com/users/jeffknaide/repos", "events_url": "https://api.github.com/users/jeffknaide/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffknaide/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 3, "created_at": "2021-01-08T22:30:07Z", "updated_at": "2021-02-24T18:39:14Z", "closed_at": "2021-02-24T00:39:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen passing a dataframe as a passthrough to instantiate an error is raised. This only happens when passing the DF as a kwarg, not when passing as an argument\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra (hydra '1.1.0dev1', omegaconf '2.1.0dev14')\r\n- [X] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce \r\nusing three files\r\nmy_df_adder.py:\r\n```\r\ndef my_df_adder(df, add_column, add_value):\r\n    return df[add_column].apply(lambda x: x + add_value)\r\n```\r\n\r\ncfg.yaml:\r\n```\r\ndf_adder:\r\n _target_: my_df_adder.my_df_adder\r\n add_column: foo\r\n add_value: 1\r\n```\r\n\r\nnotebook.ipynb:\r\n```\r\ncfg = OmegaConf.load(\"cfg.yaml\")\r\nmy_df = pd.DataFrame([[1,2], [3,4], [5,6]], columns=[\"foo\", \"bar\"])\r\ninstantiate(cfg.df_adder, my_df) # no error\r\ninstantiate(cfg.df_adder, df=my_df)\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/dictconfig.py in __setitem__(self, key, value)\r\n    290         try:\r\n--> 291             self.__set_impl(key=key, value=value)\r\n    292         except AttributeError as e:\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/dictconfig.py in __set_impl(self, key, value)\r\n    300         key = self._validate_and_normalize_key(key)\r\n--> 301         self._set_item_impl(key, value)\r\n    302 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/basecontainer.py in _set_item_impl(self, key, value)\r\n    473         else:\r\n--> 474             self._validate_set(key, value)\r\n    475 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/dictconfig.py in _validate_set(self, key, value)\r\n    159 \r\n--> 160         vk = get_value_kind(value)\r\n    161         if vk in (ValueKind.INTERPOLATION, ValueKind.STR_INTERPOLATION):\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/_utils.py in get_value_kind(value, return_match_list)\r\n    359     value = _get_value(value)\r\n--> 360     if value == \"???\":\r\n    361         return ret(ValueKind.MANDATORY_MISSING)\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/pandas/core/generic.py in __nonzero__(self)\r\n   1326         raise ValueError(\r\n-> 1327             f\"The truth value of a {type(self).__name__} is ambiguous. \"\r\n   1328             \"Use a.empty, a.bool(), a.item(), a.any() or a.all().\"\r\n\r\nValueError: The truth value of a DataFrame is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nValueError                                Traceback (most recent call last)\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/dictconfig.py in __init__(self, content, key, parent, ref_type, key_type, element_type, is_optional, flags)\r\n    103                     self.__dict__[\"_metadata\"] = metadata\r\n--> 104                 self._set_value(content, flags=flags)\r\n    105         except Exception as ex:\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/dictconfig.py in _set_value(self, value, flags)\r\n    569             self.__dict__[\"_content\"] = previous_content\r\n--> 570             raise e\r\n    571 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/dictconfig.py in _set_value(self, value, flags)\r\n    566             previous_content = self.__dict__[\"_content\"]\r\n--> 567             self._set_value_impl(value, flags)\r\n    568         except Exception as e:\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/dictconfig.py in _set_value_impl(self, value, flags)\r\n    617                 for k, v in value.items():\r\n--> 618                     self.__setitem__(k, v)\r\n    619             else:  # pragma: no cover\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/dictconfig.py in __setitem__(self, key, value)\r\n    296         except Exception as e:\r\n--> 297             self._format_and_raise(key=key, value=value, cause=e)\r\n    298 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/base.py in _format_and_raise(self, key, value, cause, type_override)\r\n    112             cause=cause,\r\n--> 113             type_override=type_override,\r\n    114         )\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    677 \r\n--> 678     _raise(ex, cause)\r\n    679 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/_utils.py in _raise(ex, cause)\r\n    587         ex.__cause__ = None\r\n--> 588     raise ex  # set end OC_CAUSE=1 for full backtrace\r\n    589 \r\n\r\nValueError: The truth value of a DataFrame is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\r\n\tfull_key: df\r\n\treference_type=Optional[Dict[Union[str, Enum], Any]]\r\n\tobject_type=dict\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nValueError                                Traceback (most recent call last)\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/hydra/utils.py in instantiate(config, *args, **kwargs)\r\n     97         config._set_flag(\"allow_objects\", True)\r\n---> 98         final_kwargs = _get_kwargs(config, **kwargs)\r\n     99         convert = _pop_convert_mode(final_kwargs)\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/hydra/_internal/utils.py in _get_kwargs(config, root, **kwargs)\r\n    699     recursive = _is_recursive(config, kwargs)\r\n--> 700     overrides = OmegaConf.create(kwargs, flags={\"allow_objects\": True})\r\n    701     config.merge_with(overrides)\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/omegaconf.py in create(obj, parent, flags)\r\n    200             parent=parent,\r\n--> 201             flags=flags,\r\n    202         )\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/omegaconf.py in _create_impl(obj, parent, flags)\r\n    253                         element_type=element_type,\r\n--> 254                         flags=flags,\r\n    255                     )\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/dictconfig.py in __init__(self, content, key, parent, ref_type, key_type, element_type, is_optional, flags)\r\n    105         except Exception as ex:\r\n--> 106             format_and_raise(node=None, key=None, value=None, cause=ex, msg=str(ex))\r\n    107 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    677 \r\n--> 678     _raise(ex, cause)\r\n    679 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/_utils.py in _raise(ex, cause)\r\n    587         ex.__cause__ = None\r\n--> 588     raise ex  # set end OC_CAUSE=1 for full backtrace\r\n    589 \r\n\r\nValueError: The truth value of a DataFrame is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\r\n\tfull_key: df\r\n\treference_type=Optional[Dict[Union[str, Enum], Any]]\r\n\tobject_type=dict\r\n\tfull_key: \r\n\treference_type=None\r\n\tobject_type=None\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-14-7f2f3f6bfa3f> in <module>\r\n----> 1 instantiate(cfg.df_adder, df=my_df)\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/hydra/utils.py in instantiate(config, *args, **kwargs)\r\n    114         raise type(e)(\r\n    115             f\"Error instantiating/calling '{_convert_target_to_string(target)}' : {e}\"\r\n--> 116         ).with_traceback(sys.exc_info()[2])\r\n    117 \r\n    118 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/hydra/utils.py in instantiate(config, *args, **kwargs)\r\n     96     try:\r\n     97         config._set_flag(\"allow_objects\", True)\r\n---> 98         final_kwargs = _get_kwargs(config, **kwargs)\r\n     99         convert = _pop_convert_mode(final_kwargs)\r\n    100         if convert == ConvertMode.PARTIAL:\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/hydra/_internal/utils.py in _get_kwargs(config, root, **kwargs)\r\n    698 \r\n    699     recursive = _is_recursive(config, kwargs)\r\n--> 700     overrides = OmegaConf.create(kwargs, flags={\"allow_objects\": True})\r\n    701     config.merge_with(overrides)\r\n    702 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/omegaconf.py in create(obj, parent, flags)\r\n    199             obj=obj,\r\n    200             parent=parent,\r\n--> 201             flags=flags,\r\n    202         )\r\n    203 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/omegaconf.py in _create_impl(obj, parent, flags)\r\n    252                         key_type=key_type,\r\n    253                         element_type=element_type,\r\n--> 254                         flags=flags,\r\n    255                     )\r\n    256                 elif is_primitive_list(obj) or OmegaConf.is_list(obj):\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/dictconfig.py in __init__(self, content, key, parent, ref_type, key_type, element_type, is_optional, flags)\r\n    104                 self._set_value(content, flags=flags)\r\n    105         except Exception as ex:\r\n--> 106             format_and_raise(node=None, key=None, value=None, cause=ex, msg=str(ex))\r\n    107 \r\n    108     def __deepcopy__(self, memo: Dict[int, Any] = {}) -> \"DictConfig\":\r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    676         ex.ref_type_str = ref_type_str\r\n    677 \r\n--> 678     _raise(ex, cause)\r\n    679 \r\n    680 \r\n\r\n~/SageMaker/.envs/farmdev/lib/python3.7/site-packages/omegaconf/_utils.py in _raise(ex, cause)\r\n    586     else:\r\n    587         ex.__cause__ = None\r\n--> 588     raise ex  # set end OC_CAUSE=1 for full backtrace\r\n    589 \r\n    590 \r\n\r\nValueError: Error instantiating/calling 'my_df_adder.my_df_adder' : The truth value of a DataFrame is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\r\n\tfull_key: df\r\n\treference_type=Optional[Dict[Union[str, Enum], Any]]\r\n\tobject_type=dict\r\n\tfull_key: \r\n\treference_type=None\r\n\tobject_type=None\r\n```\r\n\r\n## Expected Behavior\r\nthe instantiate should return a new DataFrame with a value of 1 added to each row in column 'foo'\r\n\r\n## System information\r\n- **Hydra Version** :  1.1.0dev1\r\n- **Python version** : 3.7.6\r\n- **Virtual environment type and version** : \r\n- **Operating system** : Linux\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1285/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1278", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1278/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1278/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1278/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1278", "id": 780877037, "node_id": "MDU6SXNzdWU3ODA4NzcwMzc=", "number": 1278, "title": "[Bug] jobs launched by submitit plugin cannot access hydra.job.id and hydra.job.num ", "user": {"login": "shubham-goel", "id": 11925282, "node_id": "MDQ6VXNlcjExOTI1Mjgy", "avatar_url": "https://avatars.githubusercontent.com/u/11925282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shubham-goel", "html_url": "https://github.com/shubham-goel", "followers_url": "https://api.github.com/users/shubham-goel/followers", "following_url": "https://api.github.com/users/shubham-goel/following{/other_user}", "gists_url": "https://api.github.com/users/shubham-goel/gists{/gist_id}", "starred_url": "https://api.github.com/users/shubham-goel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shubham-goel/subscriptions", "organizations_url": "https://api.github.com/users/shubham-goel/orgs", "repos_url": "https://api.github.com/users/shubham-goel/repos", "events_url": "https://api.github.com/users/shubham-goel/events{/privacy}", "received_events_url": "https://api.github.com/users/shubham-goel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-06T22:06:01Z", "updated_at": "2021-01-06T23:02:15Z", "closed_at": "2021-01-06T23:02:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n`hydra.job.id` and `hydra.job.num` cannot be accessed using `HydraConfig.get()` for jobs launched by the submitit plugin.\r\n\r\n## Checklist\r\n- [ ] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n**test.py**\r\n```python\r\nimport hydra\r\nfrom hydra.core.hydra_config import HydraConfig\r\n@hydra.main()\r\ndef main(cfg):\r\n    print(\r\n        HydraConfig.get().job.get('id', None),\r\n        HydraConfig.get().job.get('num', None),\r\n        cfg.a\r\n    )\r\nmain()\r\n```\r\n\r\n**Terminal:**\r\n```\r\n$ python test.py +a=0,1\r\n[2021-01-05 12:57:30,599][HYDRA] Launching 2 jobs locally\r\n[2021-01-05 12:57:30,599][HYDRA]        #0 : +a=0\r\n0 0 0\r\n[2021-01-05 12:57:30,781][HYDRA]        #1 : +a=1\r\n1 1 1\r\n\r\n$ python test.py +a=0,1 hydra/launcher=submitit_slurm  -m\r\n...\r\n$ cat /checkpoint/shubhamgoel/outputs/2021-01-05/12-35-21/.submitit/*/*.out | grep -v INFO\r\nNone None 0\r\nNone None 1\r\n```\r\n\r\n## Expected Behavior\r\nExpected behaviour is for hydra.job.id and hydra.job.num to be set by submitit and be accessible from the application.\r\n\r\n## System information\r\n- **Hydra Version** : 1.1.0dev1\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Ubuntu 20.04.1 LTS\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1278/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1278/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1270", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1270/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1270/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1270/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1270", "id": 779659831, "node_id": "MDU6SXNzdWU3Nzk2NTk4MzE=", "number": 1270, "title": "[Bug] hydra.job.id and hydra.job.num are not properly transferred to jobs in multirun", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/10", "html_url": "https://github.com/facebookresearch/hydra/milestone/10", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/10/labels", "id": 6213228, "node_id": "MDk6TWlsZXN0b25lNjIxMzIyOA==", "number": 10, "title": "Hydra 1.0.5", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 5, "state": "closed", "created_at": "2020-12-15T02:01:19Z", "updated_at": "2021-01-07T23:56:32Z", "due_on": null, "closed_at": "2021-01-07T23:56:32Z"}, "comments": 0, "created_at": "2021-01-05T22:23:46Z", "updated_at": "2021-01-05T23:18:16Z", "closed_at": "2021-01-05T23:18:16Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1270/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1266", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1266/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1266/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1266/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1266", "id": 778500331, "node_id": "MDU6SXNzdWU3Nzg1MDAzMzE=", "number": 1266, "title": "[Bug] Pytorch Lightning loggers cannot be instantiated by hydra", "user": {"login": "piraka9011", "id": 16828657, "node_id": "MDQ6VXNlcjE2ODI4NjU3", "avatar_url": "https://avatars.githubusercontent.com/u/16828657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piraka9011", "html_url": "https://github.com/piraka9011", "followers_url": "https://api.github.com/users/piraka9011/followers", "following_url": "https://api.github.com/users/piraka9011/following{/other_user}", "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}", "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions", "organizations_url": "https://api.github.com/users/piraka9011/orgs", "repos_url": "https://api.github.com/users/piraka9011/repos", "events_url": "https://api.github.com/users/piraka9011/events{/privacy}", "received_events_url": "https://api.github.com/users/piraka9011/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-01-05T01:39:29Z", "updated_at": "2021-01-05T02:45:12Z", "closed_at": "2021-01-05T02:41:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nWhen attempting to instantiate a pytorch lightning `Trainer`, passing an instantiated pytorch Logger does not work.\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra (1.0.4)\r\n- [X] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\nRequires `pytorch-lightning`\r\n\r\n```python\r\nimport hydra\r\n\r\n@dataclass\r\nclass TrainerConf:\r\n    _target_: str = \"pytorch_lightning.trainer.Trainer\"\r\n    logger: Any = True # Union[LightningLoggerBase, Iterable[LightningLoggerBase], bool]\r\n    # There are other params but left out for brevity\r\n\r\n@dataclass\r\nclass WandbLoggerConfig:\r\n    _target_: str = \"pytorch_lightning.loggers.WandbLogger\"\r\n    save_dir: Optional[str] = None\r\n    offline: bool = False,\r\n    id: Optional[str] = None,\r\n    anonymous: bool = False,\r\n    version: Optional[str] = None,\r\n    project: Optional[str] = None,\r\n    log_model: bool = False,\r\n    experiment = None,\r\n    prefix: str = ''\r\n\r\n# This works\r\nlogger_config = WandbLoggerConfig()\r\nlogger = hydra.utils.instantiate(config=logger_config)\r\n\r\n# This doesn't. Throws error below\r\ntrainer_config = TrainerConf()\r\ntrainer = hydra.utils.instantiate(\r\n        config=trainer_config,\r\n        logger=logger,\r\n    )\r\n```\r\n\r\n<details>\r\n<summary>Stack trace/error message</summary>\r\n<br>\r\n<pre>\r\nTraceback (most recent call last):\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/hydra/utils.py\", line 63, in call\r\n    return _instantiate_class(type_or_callable, config, *args, **kwargs)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 499, in _instantiate_class\r\n    final_kwargs = _get_kwargs(config, **kwargs)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 598, in _get_kwargs\r\n    params.merge_with(config_overrides)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 427, in merge_with\r\n    self._format_and_raise(key=None, value=None, cause=e)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/base.py\", line 107, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/_utils.py\", line 613, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/_utils.py\", line 588, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 425, in merge_with\r\n    self._merge_with(*others)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 444, in _merge_with\r\n    other = _ensure_container(other, flags=my_flags)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/_utils.py\", line 729, in _ensure_container\r\n    target = OmegaConf.create(target, flags=flags)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 198, in create\r\n    return OmegaConf._create_impl(\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 277, in _create_impl\r\n    format_and_raise(node=None, key=None, value=None, msg=str(e), cause=e)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/_utils.py\", line 613, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/_utils.py\", line 588, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 248, in _create_impl\r\n    return DictConfig(\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 106, in __init__\r\n    format_and_raise(node=None, key=None, value=None, cause=ex, msg=str(ex))\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/_utils.py\", line 613, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/_utils.py\", line 588, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 104, in __init__\r\n    self._set_value(content, flags=flags)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 570, in _set_value\r\n    raise e\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 567, in _set_value\r\n    self._set_value_impl(value, flags)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 618, in _set_value_impl\r\n    self.__setitem__(k, v)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 297, in __setitem__\r\n    self._format_and_raise(key=key, value=value, cause=e)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/base.py\", line 107, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/_utils.py\", line 678, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/omegaconf/_utils.py\", line 588, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nomegaconf.errors.UnsupportedValueType: Value 'TensorBoardLogger' is not a supported primitive type\r\n\tfull_key: logger\r\n\treference_type=Optional[Dict[Union[str, Enum], Any]]\r\n\tobject_type=dict\r\nThe above exception was the direct cause of the following exception:\r\nTraceback (most recent call last):\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 346, in _run_hydra\r\n    run_and_report(\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 201, in run_and_report\r\n    raise ex\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 347, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 107, in run\r\n    return run_job(\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/hydra/core/utils.py\", line 125, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"/home/allabana/sandbox/deepspeech.pytorch/train.py\", line 21, in hydra_main\r\n    train(cfg=cfg)\r\n  File \"/home/allabana/sandbox/deepspeech.pytorch/deepspeech_pytorch/training.py\", line 62, in train\r\n    trainer = hydra.utils.instantiate(\r\n  File \"/home/allabana/.virtualenvs/sttpy/lib/python3.8/site-packages/hydra/utils.py\", line 70, in call\r\n    raise HydraException(f\"Error calling '{cls}' : {e}\") from e\r\nhydra.errors.HydraException: Error calling 'pytorch_lightning.trainer.Trainer' : Value 'TensorBoardLogger' is not a supported primitive type\r\n\tfull_key: logger\r\n\treference_type=Optional[Dict[Union[str, Enum], Any]]\r\n\tobject_type=dict\r\n</pre>\r\n</details>\r\n\r\n\r\n\r\n## Expected Behavior\r\n\r\nTrainer and logger should be instantiated correctly.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.4\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : `virtualenv` 20.1.0\r\n- **Operating system** : Ubuntu 20.04\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1266/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1266/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1262", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1262/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1262/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1262/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1262", "id": 778218104, "node_id": "MDU6SXNzdWU3NzgyMTgxMDQ=", "number": 1262, "title": "[Bug?] Hydra turns on global logging to the info level", "user": {"login": "JackUrb", "id": 1276867, "node_id": "MDQ6VXNlcjEyNzY4Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/1276867?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JackUrb", "html_url": "https://github.com/JackUrb", "followers_url": "https://api.github.com/users/JackUrb/followers", "following_url": "https://api.github.com/users/JackUrb/following{/other_user}", "gists_url": "https://api.github.com/users/JackUrb/gists{/gist_id}", "starred_url": "https://api.github.com/users/JackUrb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JackUrb/subscriptions", "organizations_url": "https://api.github.com/users/JackUrb/orgs", "repos_url": "https://api.github.com/users/JackUrb/repos", "events_url": "https://api.github.com/users/JackUrb/events{/privacy}", "received_events_url": "https://api.github.com/users/JackUrb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-01-04T16:39:59Z", "updated_at": "2021-01-16T01:13:14Z", "closed_at": "2021-01-04T21:09:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Description\r\nExtending on https://github.com/facebookresearch/hydra/issues/1012, Hydra doesn't simply duplicate logs, but it also turns on logging of _all_ loggers globally to the INFO level:\r\nhttps://github.com/facebookresearch/hydra/blob/bc3567da6d06e9e0e437de4d4bddf9c0a9d23516/hydra/core/utils.py#L46\r\nThis leads me to get all kinds of spam from other used packages... \r\n\r\nIs this actually a desired behavior? If so downstream packages will have to add:\r\n```\r\n {\"hydra/job_logging\": \"disabled\"},\r\n {\"hydra/hydra_logging\": \"disabled\"},\r\n```\r\nto all defaults lists to circumvent Hydra updating the global logger, but I'm not sure if I'm losing important logging info by doing this. Am I missing something?\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\nClone [Mephisto](https://github.com/facebookresearch/Mephisto).\r\nRun an example script, like `python examples/parlai_chat_task_demo/parlai_test_script.py`\r\nSee logs like the following:\r\n** Stack trace/error message **\r\n```\r\n...\r\n[2021-01-04 11:33:53,609][sh.command][INFO] - <Command '/bin/rm -rf /Users/jju/mephisto/data/data/runs/NO_PROJECT/1034/build/router'>: starting process\r\n[2021-01-04 11:33:53,617][sh.command][INFO] - <Command '/bin/rm -rf /Users/jju/mephisto/data/data/runs/NO_PROJECT/1034/build/router', pid 98262>: process started\r\n[2021-01-04 11:33:53,897][sh.command][INFO] - <Command '/bin/rm -rf /Users/jju/mephisto/data/data/runs/NO_PROJECT/1034/build/router', pid 98262>: process completed\r\n...\r\n```\r\n\r\n## Expected Behavior\r\nI wouldn't expect using Hydra would cause me to see info logs of other modules like `sh`.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0\r\n- **Python version** :  3.8.3\r\n- **Virtual environment type and version** : conda 4.8.3\r\n- **Operating system** : Mac OS 10.15.7\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1262/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1262/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1252", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1252/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1252/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1252/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1252", "id": 777321153, "node_id": "MDU6SXNzdWU3NzczMjExNTM=", "number": 1252, "title": "PicklingError using torch_xla with the RQ Launcher", "user": {"login": "viyx", "id": 25210142, "node_id": "MDQ6VXNlcjI1MjEwMTQy", "avatar_url": "https://avatars.githubusercontent.com/u/25210142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viyx", "html_url": "https://github.com/viyx", "followers_url": "https://api.github.com/users/viyx/followers", "following_url": "https://api.github.com/users/viyx/following{/other_user}", "gists_url": "https://api.github.com/users/viyx/gists{/gist_id}", "starred_url": "https://api.github.com/users/viyx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viyx/subscriptions", "organizations_url": "https://api.github.com/users/viyx/orgs", "repos_url": "https://api.github.com/users/viyx/repos", "events_url": "https://api.github.com/users/viyx/events{/privacy}", "received_events_url": "https://api.github.com/users/viyx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471566, "node_id": "MDU6TGFiZWwxNDAzNDcxNTY2", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Community help is wanted"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-01-01T17:32:35Z", "updated_at": "2021-06-04T01:04:15Z", "closed_at": "2021-06-04T01:04:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI can't use hydra rq_launcher to execute jobs with multiprocessing.\r\nMay I should use another sequence of calls in my code or is it expected behavior of hydra?\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro (See [this](https://stackoverflow.com/help/minimal-reproducible-example) for tips).\r\n\r\n## To reproduce\r\n\r\nI use torch_xla lib.\r\n\r\nMy code is:\r\n\r\n```\r\nimport torch_xla\r\n\r\ndef map_fn(rank):\r\n    print(rank)\r\n    return rank\r\n\r\n\r\n@hydra.main(config_path='conf', config_name=\"config\")\r\ndef main(cfg: DictConfig):\r\n    torch_xla.distributed.xla_multiprocessing.spawn(map_fn, nprocs=8, start_method='spawn')\r\n\r\n\r\nif __name__ == '__main__':\r\n    OmegaConf.register_resolver(\"wandb_id\", lambda: generate_id())\r\n    main()\r\n```\r\n\r\nthe code of  torch_xla.distributed.xla_multiprocessing.spawn for quick overview\r\n\r\n ```\r\n if not _is_xla_config():\r\n    # If this is not an XLA setup, jump to normal multi-processing.\r\n    return _run_direct(fn, args, nprocs, join, daemon, start_method)\r\n\r\n  pf_cfg = _pre_fork_setup(nprocs)\r\n  if pf_cfg.num_devices == 1:\r\n    _start_fn(0, pf_cfg, fn, args)\r\n  else:\r\n    return torch.multiprocessing.start_processes(\r\n        _mp_start_fn,\r\n        args=(pf_cfg, fn, args),\r\n        nprocs=pf_cfg.num_devices,\r\n        join=join,\r\n        daemon=daemon,\r\n        start_method=start_method)\r\n```\r\n\r\n\r\nI get this error on worker:\r\n```\r\n17:04:13 Worker rq:worker:657678dfb2d14e1aa46495aea0e0b494: started, version 1.7.0\r\n17:04:13 Subscribing to channel rq:pubsub:657678dfb2d14e1aa46495aea0e0b494\r\n17:04:13 *** Listening on default...\r\n17:04:13 Cleaning registries for queue: default\r\n17:04:13 default: n_epochs=5 train=tpu n_cores=8 (07b1aee1-f5b0-4ae6-92f7-568fd58c03d3)\r\nWARNING:root:TPU has started up successfully with version pytorch-1.7\r\n17:04:15 Traceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/rq/worker.py\", line 975, in perform_job\r\n    rv = job.perform()\r\n  File \"/usr/local/lib/python3.6/dist-packages/rq/job.py\", line 696, in perform\r\n    self._result = self._execute()\r\n  File \"/usr/local/lib/python3.6/dist-packages/rq/job.py\", line 719, in _execute\r\n    return self.func(*self.args, **self.kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra_plugins/hydra_rq_launcher/_core.py\", line 43, in execute_job\r\n    job_subdir_key=\"hydra.sweep.subdir\",\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra/core/utils.py\", line 125, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"test_hydra.py\", line 316, in main\r\n  File \"/usr/local/lib/python3.6/dist-packages/torch_xla/distributed/xla_multiprocessing.py\", line 395, in spawn\r\n    start_method=start_method)\r\n  File \"/usr/local/lib/python3.6/dist-packages/torch/multiprocessing/spawn.py\", line 148, in start_processes\r\n    process.start()\r\n  File \"/usr/lib/python3.6/multiprocessing/process.py\", line 105, in start\r\n    self._popen = self._Popen(self)\r\n  File \"/usr/lib/python3.6/multiprocessing/context.py\", line 284, in _Popen\r\n    return Popen(process_obj)\r\n  File \"/usr/lib/python3.6/multiprocessing/popen_spawn_posix.py\", line 32, in __init__\r\n    super().__init__(process_obj)\r\n  File \"/usr/lib/python3.6/multiprocessing/popen_fork.py\", line 19, in __init__\r\n    self._launch(process_obj)\r\n  File \"/usr/lib/python3.6/multiprocessing/popen_spawn_posix.py\", line 47, in _launch\r\n    reduction.dump(process_obj, fp)\r\n  File \"/usr/lib/python3.6/multiprocessing/reduction.py\", line 60, in dump\r\n    ForkingPickler(file, protocol).dump(obj)\r\n_pickle.PicklingError: Can't pickle <function map_fn at 0x7f8a9a0f3ea0>: attribute lookup map_fn on __main__ failed\r\n\r\n17:04:15 Worker rq:worker:657678dfb2d14e1aa46495aea0e0b494: finished executing 1 jobs, quitting\r\n17:04:15 Unsubscribing from channel rq:pubsub:657678dfb2d14e1aa46495aea0e0b494\r\n/usr/lib/python3.6/multiprocessing/semaphore_tracker.py:143: UserWarning: semaphore_tracker: There appear to be 2 leaked semaphores to clean up at shutdown\r\n  len(cache))\r\n```\r\n\r\n## Expected Behavior\r\nThe code works with **nprocs=1**. I expect it it should works with **nprocs=8**.\r\nI really don't understand if hydra is supporting tasks with multiprocessing and how to use it in such a case.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.4\r\n- **hydra-rq-launcher**: 1.0.1\r\n- **Python version** : 3.6 \r\n- **Virtual environment type and version** : \r\n- **Operating system** :  Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1252/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1242", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1242/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1242/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1242/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1242", "id": 774610240, "node_id": "MDU6SXNzdWU3NzQ2MTAyNDA=", "number": 1242, "title": "[Configen][Bug] Configs for classes that inherit from abstract class", "user": {"login": "romesco", "id": 14840767, "node_id": "MDQ6VXNlcjE0ODQwNzY3", "avatar_url": "https://avatars.githubusercontent.com/u/14840767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/romesco", "html_url": "https://github.com/romesco", "followers_url": "https://api.github.com/users/romesco/followers", "following_url": "https://api.github.com/users/romesco/following{/other_user}", "gists_url": "https://api.github.com/users/romesco/gists{/gist_id}", "starred_url": "https://api.github.com/users/romesco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/romesco/subscriptions", "organizations_url": "https://api.github.com/users/romesco/orgs", "repos_url": "https://api.github.com/users/romesco/repos", "events_url": "https://api.github.com/users/romesco/events{/privacy}", "received_events_url": "https://api.github.com/users/romesco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-12-25T03:06:41Z", "updated_at": "2020-12-25T05:02:50Z", "closed_at": "2020-12-25T04:38:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThese two classes inherit from the Dataset abstract class referenced in issue #1241 :\r\nhttps://github.com/romesco/configen-tests/blob/ae774572a5a541ea34b46590d0c18ef1c3230efe/configen_tests/utils/data/dataset.py#L36-L41\r\n```python\r\nclass IterableDataset(Dataset[T_co]):\r\n    def __iter__(self) -> Iterator[T_co]:\r\n        raise NotImplementedError\r\n\r\n    def __add__(self, other: Dataset[T_co]):\r\n        return ChainDataset([self, other])\r\n```\r\n\r\nand\r\nhttps://github.com/romesco/configen-tests/blob/ae774572a5a541ea34b46590d0c18ef1c3230efe/configen_tests/utils/data/dataset.py#L67-L116\r\n```python\r\n#class ConcatDataset(Dataset[T_co]):\r\nclass ConcatDataset(Dataset):\r\n    r\"\"\"Dataset as a concatenation of multiple datasets.\r\n\r\n    This class is useful to assemble different existing datasets.\r\n\r\n    Arguments:\r\n        datasets (sequence): List of datasets to be concatenated\r\n    \"\"\"\r\n    datasets: List[Dataset[T_co]]\r\n    cumulative_sizes: List[int]\r\n\r\n...\r\n    def __init__(self, datasets: Iterable[Dataset]) -> None:\r\n        super(ConcatDataset, self).__init__()\r\n        # Cannot verify that datasets is Sized\r\n        assert len(datasets) > 0, 'datasets should not be an empty iterable'  # type: ignore\r\n        self.datasets = list(datasets)\r\n        for d in self.datasets:\r\n            assert not isinstance(d, IterableDataset), \"ConcatDataset does not support IterableDataset\"\r\n        self.cumulative_sizes = self.cumsum(self.datasets)\r\n```\r\n\r\nNotice they have different characteristics. `IterableDataset` is again abstract in that it doesn't have its own `__init__` whereas `ConcatDataset` can actually be instnatiated. I needed to change the parent type of `ConcatDataset` to `Dataset` to get it to generate something.\r\n\r\nWhen generating, both yield the same problematic conf as `Dataset`:\r\nhttps://github.com/romesco/configen-tests/blob/ae774572a5a541ea34b46590d0c18ef1c3230efe/gen/configen_tests/utils/data/dataset.py#L33-L37\r\n```python\r\n@dataclass\r\nclass IterableDatasetConf:\r\n    _target_: str = \"configen_tests.utils.data.dataset.IterableDataset\"\r\n    args: Any = MISSING\r\n    kwds: Any = MISSING\r\n```\r\n\r\nand\r\n\r\nhttps://github.com/romesco/configen-tests/blob/ae774572a5a541ea34b46590d0c18ef1c3230efe/gen/configen_tests/utils/data/dataset.py#L46-L50\r\n```python\r\n@dataclass\r\nclass ConcatDatasetConf:\r\n    _target_: str = \"configen_tests.utils.data.dataset.ConcatDataset\"\r\n    args: Any = MISSING\r\n    kwds: Any = MISSING\r\n```\r\n## Expected Behavior\r\nI would expect to see:\r\n```python\r\n@dataclass\r\nclass IterableDatasetConf:\r\n    _target_: str = \"configen_tests.utils.data.dataset.IterableDataset\"\r\n```\r\n\r\nand\r\n```python\r\n@dataclass\r\nclass ConcatDatasetConf:\r\n    _target_: str = \"configen_tests.utils.data.dataset.ConcatDataset\"\r\n    datasets: Any = MISSING\r\n#eventually datasets: List = []\r\n```\r\n\r\n\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n```bash\r\ngit clone https://github.com/romesco/configen-tests\r\npip install -r requirements.txt\r\npip install .\r\nconfigen --config-dir conf\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  master\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : pyenv-virtualenv 1.2.21\r\n- **Operating system** : Ubuntu 18.04\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1242/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1242/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1238", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1238/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1238/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1238/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1238", "id": 774532418, "node_id": "MDU6SXNzdWU3NzQ1MzI0MTg=", "number": 1238, "title": "Ray Launcher CI fails", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-12-24T18:26:19Z", "updated_at": "2021-03-17T18:23:29Z", "closed_at": "2021-03-17T18:23:29Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Example:\r\n\r\nhttps://app.circleci.com/pipelines/github/facebookresearch/hydra/5707/workflows/7c5dbe70-f340-40f7-9c9d-0216f88932e0/jobs/42402\r\n\r\n> ValueError: lib version not matching, local_version: ray==1.1.0\r\n\r\nProbably related to the release of the latest Ray version.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1238/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1238/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1237", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1237/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1237/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1237/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1237", "id": 774526238, "node_id": "MDU6SXNzdWU3NzQ1MjYyMzg=", "number": 1237, "title": "Hydra does not work with pdb", "user": {"login": "ethanabrooks", "id": 10344742, "node_id": "MDQ6VXNlcjEwMzQ0NzQy", "avatar_url": "https://avatars.githubusercontent.com/u/10344742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ethanabrooks", "html_url": "https://github.com/ethanabrooks", "followers_url": "https://api.github.com/users/ethanabrooks/followers", "following_url": "https://api.github.com/users/ethanabrooks/following{/other_user}", "gists_url": "https://api.github.com/users/ethanabrooks/gists{/gist_id}", "starred_url": "https://api.github.com/users/ethanabrooks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ethanabrooks/subscriptions", "organizations_url": "https://api.github.com/users/ethanabrooks/orgs", "repos_url": "https://api.github.com/users/ethanabrooks/repos", "events_url": "https://api.github.com/users/ethanabrooks/events{/privacy}", "received_events_url": "https://api.github.com/users/ethanabrooks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-12-24T17:55:34Z", "updated_at": "2021-05-08T17:27:32Z", "closed_at": "2020-12-24T20:50:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen running `pdb` as in\r\n```\r\npython -m pdb myscript.py\r\n```\r\nthe debugger does not allow me to inspect local variables upon exception.\r\n\r\n## To reproduce\r\n```python\r\n# myscript.py\r\nimport hydra\r\n\r\n@hydra.main()\r\ndef app(cfg) -> None:\r\n    x = 0\r\n    assert False\r\n\r\nif __name__ == \"__main__\":\r\n    app()\r\n```\r\nRun:\r\n```\r\n\u276f python -m pdb -c continue myscript.py\r\nTraceback (most recent call last):\r\n  File \"/Users/ethanbrooks/ppo/myscript.py\", line 8, in app\r\n    assert False\r\nAssertionError\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\nThe program exited via sys.exit(). Exit status: 1\r\n> /Users/ethanbrooks/ppo/myscript.py(2)<module>()\r\n-> import hydra\r\n(Pdb)\r\n```\r\nAt the prompt, type `p x`\r\n```\r\n(Pdb) p x\r\n*** NameError: name 'x' is not defined\r\n```\r\n\r\n## Expected Behavior\r\n`pdb` should work as it does when not using `hydra`:\r\n```python\r\ndef app() -> None:\r\n    x = 0\r\n    assert False\r\n\r\nif __name__ == \"__main__\":\r\n    app()\r\n```\r\n```\r\n\u276f python -m pdb -c continue myscript.py\r\nTraceback (most recent call last):\r\n  File \"/Users/ethanbrooks/miniconda3/envs/ppo/lib/python3.8/pdb.py\", line 1704, in main\r\n    pdb._runscript(mainpyfile)\r\n  File \"/Users/ethanbrooks/miniconda3/envs/ppo/lib/python3.8/pdb.py\", line 1573, in _runscript\r\n    self.run(statement)\r\n  File \"/Users/ethanbrooks/miniconda3/envs/ppo/lib/python3.8/bdb.py\", line 580, in run\r\n    exec(cmd, globals, locals)\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/Users/ethanbrooks/ppo/myscript.py\", line 1, in <module>\r\n    def app() -> None:\r\n  File \"/Users/ethanbrooks/ppo/myscript.py\", line 3, in app\r\n    assert False\r\nAssertionError\r\nUncaught exception. Entering post mortem debugging\r\nRunning 'cont' or 'step' will restart the program\r\n> /Users/ethanbrooks/ppo/myscript.py(3)app()\r\n-> assert False\r\n(Pdb) p x\r\n0\r\n```\r\n## System information\r\n- **Hydra Version** :  1.0.4\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : conda 4.9.2\r\n- **Operating system** : BigSur 11.1\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1237/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1233", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1233/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1233/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1233/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1233", "id": 773693060, "node_id": "MDU6SXNzdWU3NzM2OTMwNjA=", "number": 1233, "title": "[Bug] Override config group option default parameters", "user": {"login": "mayeroa", "id": 23169699, "node_id": "MDQ6VXNlcjIzMTY5Njk5", "avatar_url": "https://avatars.githubusercontent.com/u/23169699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mayeroa", "html_url": "https://github.com/mayeroa", "followers_url": "https://api.github.com/users/mayeroa/followers", "following_url": "https://api.github.com/users/mayeroa/following{/other_user}", "gists_url": "https://api.github.com/users/mayeroa/gists{/gist_id}", "starred_url": "https://api.github.com/users/mayeroa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mayeroa/subscriptions", "organizations_url": "https://api.github.com/users/mayeroa/orgs", "repos_url": "https://api.github.com/users/mayeroa/repos", "events_url": "https://api.github.com/users/mayeroa/events{/privacy}", "received_events_url": "https://api.github.com/users/mayeroa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-12-23T11:41:01Z", "updated_at": "2020-12-24T17:02:22Z", "closed_at": "2020-12-24T17:02:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nHello guys,\r\n\r\nI do not know if this is a bug or a misunderstanding on my side but I definitely try to override a config group option default parameters from a config file but without any success.\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n\r\n## To reproduce\r\n\r\n**Minimal Code/Config snippet to reproduce**\r\nPython file : **main.py**\r\n\r\n```python\r\n# Standard libraries\r\nfrom dataclasses import dataclass\r\n\r\n# Third-party libraries\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom hydra.types import TargetConf\r\n\r\n\r\n@dataclass\r\nclass AlgorithmConfig(TargetConf):\r\n    _target_: str = 'test'\r\n    mode: str = 'max'\r\n\r\n\r\nConfigStore.instance().store(group='tune/algorithm', name='default', node=AlgorithmConfig)\r\n\r\n\r\n@dataclass\r\nclass TuneConfig:\r\n    algorithm: AlgorithmConfig = AlgorithmConfig()\r\n\r\n\r\nConfigStore.instance().store(group='tune', name='default', node=TuneConfig)\r\n\r\n\r\n@dataclass\r\nclass Config:\r\n    test: bool = True\r\n    tune: TuneConfig = TuneConfig()\r\n\r\n\r\n# Stores config node into the repository\r\nConfigStore.instance().store(name='config', node=Config)\r\n\r\n\r\n@hydra.main(config_path='conf', config_name='config')\r\ndef main(config: Config) -> None:\r\n    \"\"\"Main function.\"\"\"\r\n    print(config)\r\n    print(config.tune.algorithm)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nAnd the config file **conf/config.yaml:** \r\n\r\n```yaml\r\ndefaults:\r\n  - tune: default\r\n  - tune/algorithm: default\r\n\r\ntest: False\r\ntune:\r\n  algorithm:\r\n    mode: 5\r\n```\r\n\r\n**Stack trace/error message**\r\n```\r\n{'test': False, 'tune': {'algorithm': {'_target_': 'test', 'mode': 'max'}}}\r\n{'_target_': 'test', 'mode': 'max'}\r\n```\r\n\r\nWe clearly see that the **test** node is properly overriden with **False value**.\r\nBut if we have a look at the **tune/algorithm** group which has **default** as config group option, I can not override the **mode** parameter like this.\r\nDo you know if I'm doing something wrong or if hydra does not allow this for the moment?\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nWhat I expect from this short example is to override the **mode** parameter and output something like this: \r\n\r\n```\r\n{'test': False, 'tune': {'algorithm': {'_target_': 'test', 'mode': 5}}}\r\n{'_target_': 'test', 'mode': 5}\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.4\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : Conda environment \r\n- **Operating system** : Mac OS X\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1233/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1232", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1232/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1232/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1232/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1232", "id": 773676587, "node_id": "MDU6SXNzdWU3NzM2NzY1ODc=", "number": 1232, "title": "[Bug] Hydra installation failing if java is not installed (Docker build)", "user": {"login": "lalitpagaria", "id": 19303690, "node_id": "MDQ6VXNlcjE5MzAzNjkw", "avatar_url": "https://avatars.githubusercontent.com/u/19303690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lalitpagaria", "html_url": "https://github.com/lalitpagaria", "followers_url": "https://api.github.com/users/lalitpagaria/followers", "following_url": "https://api.github.com/users/lalitpagaria/following{/other_user}", "gists_url": "https://api.github.com/users/lalitpagaria/gists{/gist_id}", "starred_url": "https://api.github.com/users/lalitpagaria/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lalitpagaria/subscriptions", "organizations_url": "https://api.github.com/users/lalitpagaria/orgs", "repos_url": "https://api.github.com/users/lalitpagaria/repos", "events_url": "https://api.github.com/users/lalitpagaria/events{/privacy}", "received_events_url": "https://api.github.com/users/lalitpagaria/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-12-23T11:10:11Z", "updated_at": "2020-12-23T18:55:56Z", "closed_at": "2020-12-23T16:37:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nI am using hydra's master branch and trying to build docker image from `python:3.8-slim-buster`. The installation of hydra-core is failing which is I presume `antlr4` needing `java`. If using released version 1.0.4 then this issue do not occur.\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra (using master)\r\n- [X] I created a minimal repro\r\n\r\n## To reproduce\r\nBuild following Dockerfile -\r\n** Minimal Code/Config snippet to reproduce **\r\n```\r\nFROM python:3.8-slim-buster\r\n\r\nRUN apt-get update && apt-get upgrade -y && apt-get install -y curl git\r\nRUN pip install --upgrade pip\r\nRUN pip install --no-cache-dir git+https://github.com/facebookresearch/hydra.git#egg=hydra-core\r\n```\r\n** Stack trace/error message **\r\n```\r\n#7 12.46 Building wheels for collected packages: hydra-core, antlr4-python3-runtime, PyYAML\r\n#7 12.46   Building wheel for hydra-core (PEP 517): started\r\n#7 12.75   Building wheel for hydra-core (PEP 517): finished with status 'error'\r\n#7 12.75   ERROR: Command errored out with exit status 1:\r\n#7 12.75    command: /usr/local/bin/python /usr/local/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py build_wheel /tmp/tmp368nyn_3\r\n#7 12.75        cwd: /tmp/pip-install-utmk8rm3/hydra-core_2d93aca6edfb47c6a48f687c3a2baee1\r\n#7 12.75   Complete output (12 lines):\r\n#7 12.75   running bdist_wheel\r\n#7 12.75   running build\r\n#7 12.75   running build_py\r\n#7 12.75   running clean\r\n#7 12.75   Generating parsers with antlr4\r\n#7 12.75   running antlr\r\n#7 12.75   Generating parser for Python3: ['java', '-jar', '/tmp/pip-install-utmk8rm3/hydra-core_2d93aca6edfb47c6a48f687c3a2baee1/build_helpers/bin/antlr-4.8-complete.jar', '-Dlanguage=Python3', '-o', '/tmp/pip-install-utmk8rm3/hydra-core_2d93aca6edfb47c6a48f687c3a2baee1/hydra/grammar/gen/', '-Xexact-output-dir', '-visitor', '/tmp/pip-install-utmk8rm3/hydra-core_2d93aca6edfb47c6a48f687c3a2baee1/hydra/grammar/OverrideLexer.g4']\r\n#7 12.75   /tmp/pip-build-env-5l4uyv22/overlay/lib/python3.8/site-packages/setuptools/dist.py:452: UserWarning: Normalizing '1.1.0dev1' to '1.1.0.dev1'\r\n#7 12.75     warnings.warn(tmpl.format(**locals()))\r\n#7 12.75   ===========================================================================\r\n#7 12.75   | Unable to generate parsers: [Errno 2] No such file or directory: 'java' |\r\n#7 12.75   ===========================================================================\r\n#7 12.75   ----------------------------------------\r\n#7 12.75   ERROR: Failed building wheel for hydra-core\r\n#7 12.75   Building wheel for antlr4-python3-runtime (setup.py): started\r\n#7 13.09   Building wheel for antlr4-python3-runtime (setup.py): finished with status 'done'\r\n#7 13.09   Created wheel for antlr4-python3-runtime: filename=antlr4_python3_runtime-4.8-py3-none-any.whl size=141229 sha256=9144c973c22ab58faceed86545de9463583cc006044b6f8a7ccb428300281623\r\n#7 13.09   Stored in directory: /tmp/pip-ephem-wheel-cache-xrhpm62p/wheels/c8/d0/ab/d43c02eaddc5b9004db86950802442ad9a26f279c619e28da0\r\n#7 13.10   Building wheel for PyYAML (setup.py): started\r\n#7 13.37   Building wheel for PyYAML (setup.py): finished with status 'done'\r\n#7 13.37   Created wheel for PyYAML: filename=PyYAML-5.3.1-cp38-cp38-linux_x86_64.whl size=44619 sha256=2bba541976b262c690951aeb86e8937f9f19aaa295662b01a2ec2f9fc8314d89\r\n#7 13.37   Stored in directory: /tmp/pip-ephem-wheel-cache-xrhpm62p/wheels/13/90/db/290ab3a34f2ef0b5a0f89235dc2d40fea83e77de84ed2dc05c\r\n#7 13.38 Successfully built antlr4-python3-runtime PyYAML\r\n#7 13.38 Failed to build hydra-core\r\n#7 13.38 ERROR: Could not build wheels for hydra-core which use PEP 517 and cannot be installed directly\r\n------\r\nexecutor failed running [/bin/sh -c pip install --no-cache-dir git+https://github.com/facebookresearch/hydra.git#egg=hydra-core]: exit code: 1\r\n\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  Top of the branch\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : NA\r\n- **Operating system** : Ubuntu\r\n\r\n## Additional context\r\n\r\nUpdate: Installing java solve this issue, but it will increase image size and unnecessarily keep java in the image -\r\n```\r\nFROM python:3.8-slim-buster\r\nRUN mkdir -p /usr/share/man/man1\r\nRUN apt-get update && apt-get upgrade -y && apt-get install -y curl git default-jre\r\nRUN pip install --upgrade pip\r\nRUN pip install --no-cache-dir git+https://github.com/facebookresearch/hydra.git#egg=hydra-core\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1232/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1232/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1229", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1229/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1229/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1229/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1229", "id": 773205763, "node_id": "MDU6SXNzdWU3NzMyMDU3NjM=", "number": 1229, "title": "[Bug] Error when merging configs", "user": {"login": "normster", "id": 6687910, "node_id": "MDQ6VXNlcjY2ODc5MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6687910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/normster", "html_url": "https://github.com/normster", "followers_url": "https://api.github.com/users/normster/followers", "following_url": "https://api.github.com/users/normster/following{/other_user}", "gists_url": "https://api.github.com/users/normster/gists{/gist_id}", "starred_url": "https://api.github.com/users/normster/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/normster/subscriptions", "organizations_url": "https://api.github.com/users/normster/orgs", "repos_url": "https://api.github.com/users/normster/repos", "events_url": "https://api.github.com/users/normster/events{/privacy}", "received_events_url": "https://api.github.com/users/normster/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-12-22T19:53:39Z", "updated_at": "2020-12-22T21:04:41Z", "closed_at": "2020-12-22T21:04:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nMerging sub-configs within a config tries to access non-existent fields on the sub-configs and fails.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n```\r\nimport hydra\r\nfrom omegaconf import OmegaConf\r\n\r\n@hydra.main(config_path='config', config_name='test.yaml')\r\ndef launch(cfg):\r\n    cfg = OmegaConf.set_struct(cfg, False)\r\n    merged = OmegaConf.merge(cfg.net, cfg.trainer)\r\n    print(OmegaConf.to_yaml(merged))\r\n\r\nif __name__ == '__main__':\r\n    launch()\r\n\r\n```\r\n\r\nand run with `python launch.py -m` yields:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"launch.py\", line 19, in launch\r\n    merged = OmegaConf.merge(cfg.net, cfg.trainer)\r\nAttributeError: 'NoneType' object has no attribute 'net'\r\n```\r\n\r\nIf I set the struct flag to True instead it gives this error instead:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"launch.py\", line 18, in launch\r\n    merged = OmegaConf.merge(cfg.net, cfg.trainer)\r\nomegaconf.errors.ConfigKeyError: Key 'data' is not in struct\r\n\tfull_key: net.data\r\n\treference_type=Any\r\n\tobject_type=dict\r\n```\r\n\r\nIf I load the config from file with OmegaConf.load() or from string with OmegaConf.create() there are no issues.\r\n\r\n## Expected Behavior\r\nExpect hydra to return the correct merged config:\r\n\r\n```\r\ndata: /path/to/data\r\narch: resnet50\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.4\r\n- **Python version** : 3.8.5\r\n- **Operating system** : Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1229/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1229/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1227", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1227/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1227/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1227/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1227", "id": 773058709, "node_id": "MDU6SXNzdWU3NzMwNTg3MDk=", "number": 1227, "title": "[Bug] Submitit Handling of ListConfigs", "user": {"login": "jgbos", "id": 2148522, "node_id": "MDQ6VXNlcjIxNDg1MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/2148522?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgbos", "html_url": "https://github.com/jgbos", "followers_url": "https://api.github.com/users/jgbos/followers", "following_url": "https://api.github.com/users/jgbos/following{/other_user}", "gists_url": "https://api.github.com/users/jgbos/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgbos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgbos/subscriptions", "organizations_url": "https://api.github.com/users/jgbos/orgs", "repos_url": "https://api.github.com/users/jgbos/repos", "events_url": "https://api.github.com/users/jgbos/events{/privacy}", "received_events_url": "https://api.github.com/users/jgbos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2020-12-22T16:05:12Z", "updated_at": "2021-02-01T00:58:11Z", "closed_at": "2021-02-01T00:58:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nI'm currently using your master branch (love the direction this is going) and have found a bug that may exist for your released version as well.  If I add the following parameter to my `SlurmLauncher` config:\r\n\r\n```yaml\r\nsetup:\r\n  - export MASTER_ADDR=$(hostname -s)\r\n  - export MASTER_PORT=$(python -c 'import socket; s=socket.socket(); s.bind((\"\", 0)); print(s.getsockname()[1]); s.close()')\r\n```\r\n\r\nI get the following error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 196, in run_and_report\r\n    return func()\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 356, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 137, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 154, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 122, in launch\r\n    executor.update_parameters(**params)\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/submitit/core/core.py\", line 638, in update_parameters\r\n    self._internal_update_parameters(**kwargs)\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/submitit/auto/auto.py\", line 197, in _internal_update_parameters\r\n    self._executor._internal_update_parameters(**parameters)\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/submitit/slurm/slurm.py\", line 307, in _internal_update_parameters\r\n    _make_sbatch_string(command=\"nothing to do\", folder=self.folder, **kwargs)\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/submitit/slurm/slurm.py\", line 490, in _make_sbatch_string\r\n    lines += [\"\", \"# setup\"] + setup\r\nTypeError: can only concatenate list (not \"ListConfig\") to list\r\n```\r\n\r\nI tried adding `_convert_: all` to the config, but get the following error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/hydra/utils.py\", line 99, in instantiate\r\n    convert = _pop_convert_mode(final_kwargs)\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 631, in _pop_convert_mode\r\n    convert = d.pop(\"_convert_\")\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 453, in pop\r\n    self._format_and_raise(key=key, value=None, cause=e)\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/omegaconf/base.py\", line 113, in _format_and_raise\r\n    type_override=type_override,\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/omegaconf/_utils.py\", line 678, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/home/gridsan/JU17693/.conda/envs/raiden-release/lib/python3.7/site-packages/omegaconf/_utils.py\", line 588, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nomegaconf.errors.ReadonlyConfigError: Cannot pop from read-only node\r\n        full_key: hydra._convert_\r\n        reference_type=Optional[Dict[Union[str, Enum], Any]]\r\n        object_type=dict\r\n```\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro\r\n\r\n## System information\r\n- **Hydra Version** :  latest master\r\n- **Python version** :  3.7\r\n- **Virtual environment type and version** :  conda\r\n- **Operating system** :  Linux\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1227/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1227/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1194", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1194/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1194/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1194/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1194", "id": 762501702, "node_id": "MDU6SXNzdWU3NjI1MDE3MDI=", "number": 1194, "title": "[Bug] Running a python exec as module doesn't support overriding config with flags.", "user": {"login": "kwanUm", "id": 8011916, "node_id": "MDQ6VXNlcjgwMTE5MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8011916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kwanUm", "html_url": "https://github.com/kwanUm", "followers_url": "https://api.github.com/users/kwanUm/followers", "following_url": "https://api.github.com/users/kwanUm/following{/other_user}", "gists_url": "https://api.github.com/users/kwanUm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kwanUm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kwanUm/subscriptions", "organizations_url": "https://api.github.com/users/kwanUm/orgs", "repos_url": "https://api.github.com/users/kwanUm/repos", "events_url": "https://api.github.com/users/kwanUm/events{/privacy}", "received_events_url": "https://api.github.com/users/kwanUm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1620049642, "node_id": "MDU6TGFiZWwxNjIwMDQ5NjQy", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/awaiting_response", "name": "awaiting_response", "color": "edac74", "default": false, "description": "Awaiting response"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-11T15:44:41Z", "updated_at": "2021-06-04T01:30:23Z", "closed_at": "2021-06-04T01:30:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nRunning a python exec as module doesn't support overriding config with flags.\r\n\r\npython -m deployment.server_appio.server_webrtc rtc_server.port=9090 --> Doesn't override rtc_server.port param\r\npython  deployment/server_appio/server_webrtc.py rtc_server.port=9092  --> Overides rtc_server.port param successfully\r\n\r\n\r\n## Checklist\r\n- [ ] I checked on the latest version of Hydra - 1.0.4\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1194/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1194/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1192", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1192/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1192/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1192/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1192", "id": 761287680, "node_id": "MDU6SXNzdWU3NjEyODc2ODA=", "number": 1192, "title": "[Bug] hydra.errors.MissingConfigException: Could not load hydra/hydra_logging/default", "user": {"login": "OleNet", "id": 3206718, "node_id": "MDQ6VXNlcjMyMDY3MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3206718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OleNet", "html_url": "https://github.com/OleNet", "followers_url": "https://api.github.com/users/OleNet/followers", "following_url": "https://api.github.com/users/OleNet/following{/other_user}", "gists_url": "https://api.github.com/users/OleNet/gists{/gist_id}", "starred_url": "https://api.github.com/users/OleNet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OleNet/subscriptions", "organizations_url": "https://api.github.com/users/OleNet/orgs", "repos_url": "https://api.github.com/users/OleNet/repos", "events_url": "https://api.github.com/users/OleNet/events{/privacy}", "received_events_url": "https://api.github.com/users/OleNet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-12-10T14:27:41Z", "updated_at": "2022-03-10T13:20:05Z", "closed_at": "2020-12-16T18:34:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I run fairseq roberta pretraining, the error happens: \r\n\r\n```\r\n2020-12-10 22:19:38 | ERROR | fairseq.dataclass.utils | Error when composing. Overrides: ['common.no_progress_bar=False', 'common.log_interval=1', \"common.log_format='simple'\", 'common.tensorboard_logdir=null', 'common.wandb_project=null', 'common.seed=1', 'common.cpu=False', 'common.tpu=False', 'common.bf16=False', 'common.memory_efficient_bf16=False', 'common.fp16=True', 'common.memory_efficient_fp16=False', 'common.fp16_no_flatten_grads=False', 'common.fp16_init_scale=128', 'common.fp16_scale_window=null', 'common.fp16_scale_tolerance=0.0', 'common.min_loss_scale=0.0001', 'common.threshold_loss_scale=null', 'common.user_dir=null', 'common.empty_cache_freq=0', 'common.all_gather_list_size=16384', 'common.model_parallel_size=1', 'common.quantization_config_path=null', 'common.profile=False', 'common.reset_logging=True', 'common_eval.path=null', 'common_eval.post_process=null', 'common_eval.quiet=False', \"common_eval.model_overrides='{}'\", 'common_eval.results_path=null', 'distributed_training.distributed_world_size=8', 'distributed_training.distributed_rank=0', \"distributed_training.distributed_backend='nccl'\", 'distributed_training.distributed_init_method=null', 'distributed_training.distributed_port=-1', 'distributed_training.device_id=0', 'distributed_training.distributed_no_spawn=False', \"distributed_training.ddp_backend='c10d'\", 'distributed_training.bucket_cap_mb=25', 'distributed_training.fix_batches_to_gpus=False', 'distributed_training.find_unused_parameters=False', 'distributed_training.fast_stat_sync=False', 'distributed_training.broadcast_buffers=False', \"distributed_training.distributed_wrapper='DDP'\", 'distributed_training.slowmo_momentum=null', \"distributed_training.slowmo_algorithm='LocalSGD'\", 'distributed_training.localsgd_frequency=3', 'distributed_training.nprocs_per_node=8', 'distributed_training.pipeline_model_parallel=False', 'distributed_training.pipeline_balance=null', 'distributed_training.pipeline_devices=null', 'distributed_training.pipeline_chunks=0', 'distributed_training.pipeline_encoder_balance=null', 'distributed_training.pipeline_encoder_devices=null', 'distributed_training.pipeline_decoder_balance=null', 'distributed_training.pipeline_decoder_devices=null', \"distributed_training.pipeline_checkpoint='never'\", \"distributed_training.zero_sharding='none'\", 'distributed_training.tpu=False', 'dataset.num_workers=1', 'dataset.skip_invalid_size_inputs_valid_test=False', 'dataset.max_tokens=null', 'dataset.batch_size=16', 'dataset.required_batch_size_multiple=8', 'dataset.required_seq_len_multiple=1', 'dataset.dataset_impl=null', 'dataset.data_buffer_size=10', \"dataset.train_subset='train'\", \"dataset.valid_subset='valid'\", 'dataset.validate_interval=1', 'dataset.validate_interval_updates=0', 'dataset.validate_after_updates=0', 'dataset.fixed_validation_seed=null', 'dataset.disable_validation=False', 'dataset.max_tokens_valid=null', 'dataset.batch_size_valid=16', 'dataset.curriculum=0', \"dataset.gen_subset='test'\", 'dataset.num_shards=1', 'dataset.shard_id=0', 'optimization.max_epoch=0', 'optimization.max_update=125000', 'optimization.stop_time_hours=0.0', 'optimization.clip_norm=0.0', 'optimization.sentence_avg=False', 'optimization.update_freq=[16]', 'optimization.lr=[0.0005]', 'optimization.stop_min_lr=-1.0', 'optimization.use_bmuf=False', \"checkpoint.save_dir='checkpoints'\", \"checkpoint.restore_file='checkpoint_last.pt'\", 'checkpoint.finetune_from_model=null', 'checkpoint.reset_dataloader=False', 'checkpoint.reset_lr_scheduler=False', 'checkpoint.reset_meters=False', 'checkpoint.reset_optimizer=False', \"checkpoint.optimizer_overrides='{}'\", 'checkpoint.save_interval=1', 'checkpoint.save_interval_updates=0', 'checkpoint.keep_interval_updates=-1', 'checkpoint.keep_last_epochs=-1', 'checkpoint.keep_best_checkpoints=-1', 'checkpoint.no_save=False', 'checkpoint.no_epoch_checkpoints=False', 'checkpoint.no_last_checkpoints=False', 'checkpoint.no_save_optimizer_state=False', \"checkpoint.best_checkpoint_metric='loss'\", 'checkpoint.maximize_best_checkpoint_metric=False', 'checkpoint.patience=-1', \"checkpoint.checkpoint_suffix=''\", 'checkpoint.checkpoint_shard_count=1', 'checkpoint.load_checkpoint_on_all_dp_ranks=False', 'checkpoint.model_parallel_size=1', 'checkpoint.distributed_rank=0', 'bmuf.block_lr=1.0', 'bmuf.block_momentum=0.875', 'bmuf.global_sync_iter=50', 'bmuf.warmup_iterations=500', 'bmuf.use_nbm=False', 'bmuf.average_sync=False', 'bmuf.distributed_world_size=8', 'generation.beam=5', 'generation.nbest=1', 'generation.max_len_a=0.0', 'generation.max_len_b=200', 'generation.min_len=1', 'generation.match_source_len=False', 'generation.unnormalized=False', 'generation.no_early_stop=False', 'generation.no_beamable_mm=False', 'generation.lenpen=1.0', 'generation.unkpen=0.0', 'generation.replace_unk=null', 'generation.sacrebleu=False', 'generation.score_reference=False', 'generation.prefix_size=0', 'generation.no_repeat_ngram_size=0', 'generation.sampling=False', 'generation.sampling_topk=-1', 'generation.sampling_topp=-1.0', 'generation.constraints=null', 'generation.temperature=1.0', 'generation.diverse_beam_groups=-1', 'generation.diverse_beam_strength=0.5', 'generation.diversity_rate=-1.0', 'generation.print_alignment=False', 'generation.print_step=False', 'generation.lm_path=null', 'generation.lm_weight=0.0', 'generation.iter_decode_eos_penalty=0.0', 'generation.iter_decode_max_iter=10', 'generation.iter_decode_force_max_iter=False', 'generation.iter_decode_with_beam=1', 'generation.iter_decode_with_external_reranker=False', 'generation.retain_iter_history=False', 'generation.retain_dropout=False', 'generation.retain_dropout_modules=null', 'generation.decoding_format=null', 'generation.no_seed_provided=False', 'eval_lm.output_word_probs=False', 'eval_lm.output_word_stats=False', 'eval_lm.context_window=0', 'eval_lm.softmax_batch=9223372036854775807', 'interactive.buffer_size=0', \"interactive.input='-'\", 'optimizer=adam', 'optimizer._name=adam', \"optimizer.adam_betas='(0.9,0.98)'\", 'optimizer.adam_eps=1e-06', 'optimizer.weight_decay=0.01', 'optimizer.use_old_adam=False', 'optimizer.tpu=False', 'optimizer.lr=[0.0005]', 'lr_scheduler=polynomial_decay', 'lr_scheduler._name=polynomial_decay', 'lr_scheduler.warmup_updates=10000', 'lr_scheduler.force_anneal=null', 'lr_scheduler.end_learning_rate=0.0', 'lr_scheduler.power=1.0', 'lr_scheduler.total_num_update=125000.0', 'lr_scheduler.lr=[0.0005]', 'scoring=bleu', 'scoring._name=bleu', 'scoring.pad=1', 'scoring.eos=2', 'scoring.unk=3']\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/py36/bin/fairseq-train\", line 11, in <module>\r\n    load_entry_point('fairseq', 'console_scripts', 'fairseq-train')()\r\n  File \"/root/paddlejob/workspace/env_run/longformer/pretrain/fairseq-git/fairseq_cli/train.py\", line 393, in cli_main\r\n    cfg = convert_namespace_to_omegaconf(args)\r\n  File \"/root/paddlejob/workspace/env_run/longformer/pretrain/fairseq-git/fairseq/dataclass/utils.py\", line 351, in convert_namespace_to_omegaconf\r\n    composed_cfg = compose(\"config\", overrides=overrides, strict=False)\r\n  File \"/opt/conda/envs/py36/lib/python3.6/site-packages/hydra/experimental/compose.py\", line 37, in compose\r\n    with_log_configuration=False,\r\n  File \"/opt/conda/envs/py36/lib/python3.6/site-packages/hydra/_internal/hydra.py\", line 512, in compose_config\r\n    from_shell=from_shell,\r\n  File \"/opt/conda/envs/py36/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 156, in load_configuration\r\n    from_shell=from_shell,\r\n  File \"/opt/conda/envs/py36/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 262, in _load_configuration\r\n    run_mode=run_mode,\r\n  File \"/opt/conda/envs/py36/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 804, in _merge_defaults_into_config\r\n    hydra_cfg = merge_defaults_list_into_config(hydra_cfg, system_list)\r\n  File \"/opt/conda/envs/py36/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 783, in merge_defaults_list_into_config\r\n    package_override=default1.package,\r\n  File \"/opt/conda/envs/py36/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 715, in _merge_config\r\n    raise MissingConfigException(msg, new_cfg, options)\r\nhydra.errors.MissingConfigException: Could not load hydra/hydra_logging/default\r\n\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1192/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1192/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1191", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1191/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1191/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1191/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1191", "id": 761054188, "node_id": "MDU6SXNzdWU3NjEwNTQxODg=", "number": 1191, "title": "[Bug] Ray AWS plugin uses deprecated flags", "user": {"login": "samuelstanton", "id": 22999782, "node_id": "MDQ6VXNlcjIyOTk5Nzgy", "avatar_url": "https://avatars.githubusercontent.com/u/22999782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samuelstanton", "html_url": "https://github.com/samuelstanton", "followers_url": "https://api.github.com/users/samuelstanton/followers", "following_url": "https://api.github.com/users/samuelstanton/following{/other_user}", "gists_url": "https://api.github.com/users/samuelstanton/gists{/gist_id}", "starred_url": "https://api.github.com/users/samuelstanton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samuelstanton/subscriptions", "organizations_url": "https://api.github.com/users/samuelstanton/orgs", "repos_url": "https://api.github.com/users/samuelstanton/repos", "events_url": "https://api.github.com/users/samuelstanton/events{/privacy}", "received_events_url": "https://api.github.com/users/samuelstanton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2169716916, "node_id": "MDU6TGFiZWwyMTY5NzE2OTE2", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/plugin", "name": "plugin", "color": "e59e90", "default": false, "description": "Plugins realted issues"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2020-12-10T09:13:05Z", "updated_at": "2021-03-01T17:50:05Z", "closed_at": "2021-03-01T17:50:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThe Ray AWS launcher plugin says it requires ray>=1.0, but the plugin seems to have been written for ray<=0.8.6. In particular, the plugin uses the `--docker` flag [here](https://github.com/facebookresearch/hydra/blob/1.0_branch/plugins/hydra_ray_launcher/hydra_plugins/hydra_ray_launcher/_launcher_util.py#L132) when calling `ray exec`. The `--docker` flag seems to have been deprecated in favor of `--run-env` in [v0.8.7](https://docs.ray.io/en/releases-0.8.7/package-ref.html).\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n### The config\r\n```\r\nhydra:\r\n  launcher:\r\n    _target_: hydra_plugins.hydra_ray_launcher.ray_aws_launcher.RayAWSLauncher\r\n    mandatory_install:\r\n      hydra_version: 1.0.3\r\n      ray_version: 1.0.1\r\n      cloudpickle_version: 1.6.0\r\n      omegaconf_version: 2.0.3\r\n      pickle5_version: 0.0.11\r\n      hydra_ray_launcher_version: 0.1.1\r\n      install_commands:\r\n        - pip3 install omegaconf==${hydra.launcher.mandatory_install.omegaconf_version}\r\n        - pip3 install hydra-core==${hydra.launcher.mandatory_install.hydra_version}\r\n        - pip3 install hydra-ray-launcher==${hydra.launcher.mandatory_install.hydra_ray_launcher_version}\r\n        - pip3 install ray==${hydra.launcher.mandatory_install.ray_version}\r\n        - pip3 install cloudpickle==${hydra.launcher.mandatory_install.cloudpickle_version}\r\n        - pip3 install pickle5==${hydra.launcher.mandatory_install.pickle5_version}\r\n    ray_init_cfg: {}\r\n    ray_remote_cfg: {}\r\n    ray_cluster_cfg:\r\n      cluster_name: hydra-ray-cluster\r\n      min_workers: 0\r\n      max_workers: 1\r\n      initial_workers: 0\r\n      autoscaling_mode: default\r\n      target_utilization_fraction: 0.8\r\n      idle_timeout_minutes: 5\r\n      docker:\r\n        image: 'rayproject/ray-ml:latest-gpu'\r\n        container_name: 'hydra-ray-container'\r\n        pull_before_run: true\r\n        run_options: []\r\n      provider:\r\n        type: aws\r\n        region: us-east-2\r\n        availability_zone: us-east-2a,us-east-2b\r\n        cache_stopped_nodes: false\r\n        key_pair:\r\n          key_name: hydra\r\n      auth:\r\n        ssh_user: ubuntu\r\n      head_node:\r\n        IamInstanceProfile:\r\n          Arn: arn:aws:iam::<AWS_ACCOUNT_ID>:instance-profile/ray-head-v1\r\n        InstanceType: p2.xlarge\r\n        ImageId: ami-08e16447bd5caf26a\r\n      worker_nodes:\r\n        IamInstanceProfile:\r\n          Arn: arn:aws:iam::<AWS_ACCOUNT_ID>:instance-profile/ray-worker-v1\r\n        InstanceType: p2.xlarge\r\n        ImageId: ami-08e16447bd5caf26a\r\n      file_mounts: {}\r\n      initialization_commands: []\r\n      setup_commands: []\r\n      head_setup_commands: []\r\n      worker_setup_commands: []\r\n      head_start_ray_commands:\r\n      - ray stop\r\n      - ulimit -n 65536; ray start --head --port=6379 --object-manager-port=8076\r\n        --autoscaling-config=~/ray_bootstrap_config.yaml\r\n      worker_start_ray_commands:\r\n      - ray stop\r\n      - ulimit -n 65536; ray start --address=$RAY_HEAD_IP:6379 --object-manager-port=8076\r\n    stop_cluster: true\r\n    sync_up:\r\n      source_dir: null\r\n      target_dir: null\r\n      include: []\r\n      exclude: []\r\n    sync_down:\r\n      source_dir: null\r\n      target_dir: null\r\n      include: []\r\n      exclude: []\r\n```\r\n\r\n### The program\r\n```\r\nimport hydra\r\n\r\n\r\n@hydra.main(config_path='./config', config_name='hydra_ray_bug.yaml')\r\ndef main(cfg):\r\n    print('program launched successfully')\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\n[2020-12-10 13:18:50,056][HYDRA] Ray Launcher is launching 1 jobs,\r\n[2020-12-10 13:18:50,056][HYDRA]        #0 :\r\n[2020-12-10 13:18:50,335][HYDRA] Pickle for jobs: /tmp/tmpb4ropuxo/job_spec.pkl\r\n[2020-12-10 13:18:50,338][HYDRA] Saving RayClusterConf in a temp yaml file: /tmp/tmp2uz4ynig.yaml.\r\n[2020-12-10 13:18:50,340][HYDRA] Running command: ['ray', 'up', '-y', '/tmp/tmp2uz4ynig.yaml']\r\n[2020-12-10 13:25:39,406][HYDRA] Output: /usr/bin/xauth:  file /home/ubuntu/.Xauthority does not exist\r\n 18:20:11 up 0 min,  1 user,  load average: 1.59, 0.41, 0.14\r\nsending incremental file list\r\nray-bootstrap-1_t_b3_e\r\n\r\nsent 899 bytes  received 35 bytes  1,868.00 bytes/sec\r\ntotal size is 2,314  speedup is 2.48\r\nsending incremental file list\r\nhydra_key-1.pem\r\n\r\nsent 1,393 bytes  received 35 bytes  2,856.00 bytes/sec\r\ntotal size is 1,674  speedup is 1.17\r\nlatest-cpu: Pulling from rayproject/ray-ml\r\n6a5697faee43: Pull complete\r\nba13d3bc422b: Pull complete\r\na254829d9e55: Pull complete\r\n7d7be32e453d: Pull complete\r\n6a0d739f1b58: Pull complete\r\n48fe103a5137: Pull complete\r\n6ba3ed757423: Pull complete\r\n35d28d3e311c: Pull complete\r\nd866c872c6c4: Pull complete\r\n04f4ed2a074b: Pull complete\r\nf90845af33ae: Pull complete\r\n3dc6dece1a5a: Pull complete\r\nDigest: sha256:49277bb5129de9db9705e8d3a5a94703bdfb13f421e4709410801d8e7df48713\r\nStatus: Downloaded newer image for rayproject/ray-ml:latest-cpu\r\ndocker.io/rayproject/ray-ml:latest-cpu\r\nNVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver. Make sure that the latest NVIDIA driver is installed and running.\r\n\r\n2d262bdb8554f1e75e16cc2363b33325d8051122dad1b3166187c3a4a2395b79\r\nCollecting omegaconf==2.0.3\r\n  Downloading omegaconf-2.0.3-py3-none-any.whl (36 kB)\r\nRequirement already satisfied: PyYAML>=5.1.* in /root/anaconda3/lib/python3.7/site-packages (from omegaconf==2.0.3) (5.3.1)\r\nRequirement already satisfied: typing-extensions in /root/anaconda3/lib/python3.7/site-packages (from omegaconf==2.0.3) (3.7.4.3)\r\nInstalling collected packages: omegaconf\r\nSuccessfully installed omegaconf-2.0.3\r\nCollecting hydra-core==1.0.3\r\n  Downloading hydra_core-1.0.3-py3-none-any.whl (122 kB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 122 kB 4.8 MB/s\r\nCollecting importlib-resources; python_version < \"3.9\"\r\n  Downloading importlib_resources-3.3.0-py2.py3-none-any.whl (26 kB)\r\nCollecting antlr4-python3-runtime==4.8\r\n  Downloading antlr4-python3-runtime-4.8.tar.gz (112 kB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 112 kB 5.8 MB/s\r\nRequirement already satisfied: omegaconf>=2.0.2 in /root/anaconda3/lib/python3.7/site-packages (from hydra-core==1.0.3) (2.0.3)\r\nRequirement already satisfied: zipp>=0.4; python_version < \"3.8\" in /root/anaconda3/lib/python3.7/site-packages (from importlib-resources; python_version < \"3.9\"->hydra-core==1.0.3) (3.4.0)\r\nRequirement already satisfied: PyYAML>=5.1.* in /root/anaconda3/lib/python3.7/site-packages (from omegaconf>=2.0.2->hydra-core==1.0.3) (5.3.1)\r\nRequirement already satisfied: typing-extensions in /root/anaconda3/lib/python3.7/site-packages (from omegaconf>=2.0.2->hydra-core==1.0.3) (3.7.4.3)\r\nBuilding wheels for collected packages: antlr4-python3-runtime\r\n  Building wheel for antlr4-python3-runtime (setup.py) ... done\r\n  Created wheel for antlr4-python3-runtime: filename=antlr4_python3_runtime-4.8-py3-none-any.whl size=142054 sha256=a70b51a8a90ef4a4e8e28f44e1357d75c0306f1023ccef17bbef6d021260eaed\r\n  Stored in directory: /root/.cache/pip/wheels/ca/33/b7/336836125fc9bb4ceaa4376d8abca10ca8bc84ddc824baea6c\r\nSuccessfully built antlr4-python3-runtime\r\nInstalling collected packages: importlib-resources, antlr4-python3-runtime, hydra-core\r\nSuccessfully installed antlr4-python3-runtime-4.8 hydra-core-1.0.3 importlib-resources-3.3.0\r\nCollecting hydra-ray-launcher==0.1.1\r\n  Downloading hydra_ray_launcher-0.1.1-py3-none-any.whl (13 kB)\r\nCollecting boto3==1.15.6\r\n  Downloading boto3-1.15.6-py2.py3-none-any.whl (129 kB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 129 kB 4.5 MB/s\r\nRequirement already satisfied: hydra-core>=1.0.0 in /root/anaconda3/lib/python3.7/site-packages (from hydra-ray-launcher==0.1.1) (1.0.3)\r\nRequirement already satisfied: ray>=1.0.0 in /root/anaconda3/lib/python3.7/site-packages (from hydra-ray-launcher==0.1.1) (1.0.1.post1)\r\nCollecting pickle5\r\n  Downloading pickle5-0.0.11.tar.gz (132 kB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 132 kB 4.9 MB/s\r\nRequirement already satisfied: cloudpickle>=1.6.0 in /root/anaconda3/lib/python3.7/site-packages (from hydra-ray-launcher==0.1.1) (1.6.0)\r\nRequirement already satisfied: jmespath<1.0.0,>=0.7.1 in /root/anaconda3/lib/python3.7/site-packages (from boto3==1.15.6->hydra-ray-launcher==0.1.1) (0.10.0)\r\nCollecting botocore<1.19.0,>=1.18.6\r\n  Downloading botocore-1.18.18-py2.py3-none-any.whl (6.7 MB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 6.7 MB 4.7 MB/s\r\nCollecting s3transfer<0.4.0,>=0.3.0\r\n  Downloading s3transfer-0.3.3-py2.py3-none-any.whl (69 kB)\r\n     |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 69 kB 797 kB/s\r\nRequirement already satisfied: antlr4-python3-runtime==4.8 in /root/anaconda3/lib/python3.7/site-packages (from hydra-core>=1.0.0->hydra-ray-launcher==0.1.1) (4.8)\r\nRequirement already satisfied: importlib-resources; python_version < \"3.9\" in /root/anaconda3/lib/python3.7/site-packages (from hydra-core>=1.0.0->hydra-ray-launcher==0.1.1) (3.3.0)\r\nRequirement already satisfied: omegaconf>=2.0.2 in /root/anaconda3/lib/python3.7/site-packages (from hydra-core>=1.0.0->hydra-ray-launcher==0.1.1) (2.0.3)\r\nRequirement already satisfied: msgpack<2.0.0,>=1.0.0 in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.0.0)\r\nRequirement already satisfied: google in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (3.0.0)\r\nRequirement already satisfied: requests in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (2.24.0)\r\nRequirement already satisfied: pyyaml in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (5.3.1)\r\nRequirement already satisfied: numpy>=1.16 in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.19.4)\r\nRequirement already satisfied: colorama in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.4.4)\r\nRequirement already satisfied: aiohttp-cors in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.7.0)\r\nRequirement already satisfied: aioredis in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.3.1)\r\nRequirement already satisfied: prometheus-client>=0.7.1 in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.9.0)\r\nRequirement already satisfied: colorful in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.5.4)\r\nRequirement already satisfied: filelock in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (3.0.12)\r\nRequirement already satisfied: grpcio>=1.28.1 in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.33.2)\r\nRequirement already satisfied: click>=7.0 in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (7.1.2)\r\nRequirement already satisfied: opencensus in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.7.11)\r\nRequirement already satisfied: gpustat in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.6.0)\r\nRequirement already satisfied: jsonschema in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (3.2.0)\r\nRequirement already satisfied: py-spy>=0.2.0 in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.3.3)\r\nRequirement already satisfied: redis<3.5.0,>=3.3.2 in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (3.4.1)\r\nRequirement already satisfied: aiohttp in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (3.7.3)\r\nRequirement already satisfied: protobuf>=3.8.0 in /root/anaconda3/lib/python3.7/site-packages (from ray>=1.0.0->hydra-ray-launcher==0.1.1) (3.14.0)\r\nRequirement already satisfied: urllib3<1.26,>=1.20; python_version != \"3.4\" in /root/anaconda3/lib/python3.7/site-packages (from botocore<1.19.0,>=1.18.6->boto3==1.15.6->hydra-ray-launcher==0.1.1) (1.25.11)\r\nRequirement already satisfied: python-dateutil<3.0.0,>=2.1 in /root/anaconda3/lib/python3.7/site-packages (from botocore<1.19.0,>=1.18.6->boto3==1.15.6->hydra-ray-launcher==0.1.1) (2.8.1)\r\nRequirement already satisfied: zipp>=0.4; python_version < \"3.8\" in /root/anaconda3/lib/python3.7/site-packages (from importlib-resources; python_version < \"3.9\"->hydra-core>=1.0.0->hydra-ray-launcher==0.1.1) (3.4.0)\r\nRequirement already satisfied: typing-extensions in /root/anaconda3/lib/python3.7/site-packages (from omegaconf>=2.0.2->hydra-core>=1.0.0->hydra-ray-launcher==0.1.1) (3.7.4.3)\r\nRequirement already satisfied: beautifulsoup4 in /root/anaconda3/lib/python3.7/site-packages (from google->ray>=1.0.0->hydra-ray-launcher==0.1.1) (4.9.3)\r\nRequirement already satisfied: idna<3,>=2.5 in /root/anaconda3/lib/python3.7/site-packages (from requests->ray>=1.0.0->hydra-ray-launcher==0.1.1) (2.9)\r\nRequirement already satisfied: chardet<4,>=3.0.2 in /root/anaconda3/lib/python3.7/site-packages (from requests->ray>=1.0.0->hydra-ray-launcher==0.1.1) (3.0.4)\r\nRequirement already satisfied: certifi>=2017.4.17 in /root/anaconda3/lib/python3.7/site-packages (from requests->ray>=1.0.0->hydra-ray-launcher==0.1.1) (2020.6.20)\r\nRequirement already satisfied: hiredis in /root/anaconda3/lib/python3.7/site-packages (from aioredis->ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.1.0)\r\nRequirement already satisfied: async-timeout in /root/anaconda3/lib/python3.7/site-packages (from aioredis->ray>=1.0.0->hydra-ray-launcher==0.1.1) (3.0.1)\r\nRequirement already satisfied: six>=1.5.2 in /root/anaconda3/lib/python3.7/site-packages (from grpcio>=1.28.1->ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.15.0)\r\nRequirement already satisfied: google-api-core<2.0.0,>=1.0.0 in /root/anaconda3/lib/python3.7/site-packages (from opencensus->ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.23.0)\r\nRequirement already satisfied: opencensus-context==0.1.2 in /root/anaconda3/lib/python3.7/site-packages (from opencensus->ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.1.2)\r\nRequirement already satisfied: nvidia-ml-py3>=7.352.0 in /root/anaconda3/lib/python3.7/site-packages (from gpustat->ray>=1.0.0->hydra-ray-launcher==0.1.1) (7.352.0)\r\nRequirement already satisfied: blessings>=1.6 in /root/anaconda3/lib/python3.7/site-packages (from gpustat->ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.7)\r\nRequirement already satisfied: psutil in /root/anaconda3/lib/python3.7/site-packages (from gpustat->ray>=1.0.0->hydra-ray-launcher==0.1.1) (5.7.3)\r\nRequirement already satisfied: pyrsistent>=0.14.0 in /root/anaconda3/lib/python3.7/site-packages (from jsonschema->ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.17.3)\r\nRequirement already satisfied: attrs>=17.4.0 in /root/anaconda3/lib/python3.7/site-packages (from jsonschema->ray>=1.0.0->hydra-ray-launcher==0.1.1) (20.3.0)\r\nRequirement already satisfied: importlib-metadata; python_version < \"3.8\" in /root/anaconda3/lib/python3.7/site-packages (from jsonschema->ray>=1.0.0->hydra-ray-launcher==0.1.1) (2.0.0)\r\nRequirement already satisfied: setuptools in /root/anaconda3/lib/python3.7/site-packages (from jsonschema->ray>=1.0.0->hydra-ray-launcher==0.1.1) (50.3.1.post20201107)\r\nRequirement already satisfied: multidict<7.0,>=4.5 in /root/anaconda3/lib/python3.7/site-packages (from aiohttp->ray>=1.0.0->hydra-ray-launcher==0.1.1) (5.0.2)\r\nRequirement already satisfied: yarl<2.0,>=1.0 in /root/anaconda3/lib/python3.7/site-packages (from aiohttp->ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.6.3)\r\nRequirement already satisfied: soupsieve>1.2; python_version >= \"3.0\" in /root/anaconda3/lib/python3.7/site-packages (from beautifulsoup4->google->ray>=1.0.0->hydra-ray-launcher==0.1.1) (2.0.1)\r\nRequirement already satisfied: google-auth<2.0dev,>=1.21.1 in /root/anaconda3/lib/python3.7/site-packages (from google-api-core<2.0.0,>=1.0.0->opencensus->ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.23.0)\r\nRequirement already satisfied: googleapis-common-protos<2.0dev,>=1.6.0 in /root/anaconda3/lib/python3.7/site-packages (from google-api-core<2.0.0,>=1.0.0->opencensus->ray>=1.0.0->hydra-ray-launcher==0.1.1) (1.52.0)\r\nRequirement already satisfied: pytz in /root/anaconda3/lib/python3.7/site-packages (from google-api-core<2.0.0,>=1.0.0->opencensus->ray>=1.0.0->hydra-ray-launcher==0.1.1) (2020.4)\r\nRequirement already satisfied: rsa<5,>=3.1.4; python_version >= \"3.5\" in /root/anaconda3/lib/python3.7/site-packages (from google-auth<2.0dev,>=1.21.1->google-api-core<2.0.0,>=1.0.0->opencensus->ray>=1.0.0->hydra-ray-launcher==0.1.1) (4.6)\r\nRequirement already satisfied: pyasn1-modules>=0.2.1 in /root/anaconda3/lib/python3.7/site-packages (from google-auth<2.0dev,>=1.21.1->google-api-core<2.0.0,>=1.0.0->opencensus->ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.2.8)\r\nRequirement already satisfied: cachetools<5.0,>=2.0.0 in /root/anaconda3/lib/python3.7/site-packages (from google-auth<2.0dev,>=1.21.1->google-api-core<2.0.0,>=1.0.0->opencensus->ray>=1.0.0->hydra-ray-launcher==0.1.1) (4.1.1)\r\nRequirement already satisfied: pyasn1>=0.1.3 in /root/anaconda3/lib/python3.7/site-packages (from rsa<5,>=3.1.4; python_version >= \"3.5\"->google-auth<2.0dev,>=1.21.1->google-api-core<2.0.0,>=1.0.0->opencensus->ray>=1.0.0->hydra-ray-launcher==0.1.1) (0.4.8)\r\nBuilding wheels for collected packages: pickle5\r\n  Building wheel for pickle5 (setup.py) ... error\r\n  ERROR: Command errored out with exit status 1:\r\n   command: /root/anaconda3/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-install-we50x98m/pickle5/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-install-we50x98m/pickle5/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' bdist_wheel -d /tmp/pip-wheel-_z2c2oz0\r\n       cwd: /tmp/pip-install-we50x98m/pickle5/\r\n  Complete output (21 lines):\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  creating build\r\n  creating build/lib.linux-x86_64-3.7\r\n  creating build/lib.linux-x86_64-3.7/pickle5\r\n  copying pickle5/pickle.py -> build/lib.linux-x86_64-3.7/pickle5\r\n  copying pickle5/pickletools.py -> build/lib.linux-x86_64-3.7/pickle5\r\n  copying pickle5/__init__.py -> build/lib.linux-x86_64-3.7/pickle5\r\n  creating build/lib.linux-x86_64-3.7/pickle5/test\r\n  copying pickle5/test/pickletester.py -> build/lib.linux-x86_64-3.7/pickle5/test\r\n  copying pickle5/test/test_picklebuffer.py -> build/lib.linux-x86_64-3.7/pickle5/test\r\n  copying pickle5/test/test_pickle.py -> build/lib.linux-x86_64-3.7/pickle5/test\r\n  copying pickle5/test/__init__.py -> build/lib.linux-x86_64-3.7/pickle5/test\r\n  running build_ext\r\n  building 'pickle5._pickle' extension\r\n  creating build/temp.linux-x86_64-3.7\r\n  creating build/temp.linux-x86_64-3.7/pickle5\r\n  gcc -pthread -B /root/anaconda3/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/root/anaconda3/include/python3.7m -c pickle5/_pickle.c -o build/temp.linux-x86_64-3.7/pickle5/_pickle.o -std=c99\r\n  unable to execute 'gcc': No such file or directory\r\n  error: command 'gcc' failed with exit status 1\r\n  ----------------------------------------\r\n  ERROR: Failed building wheel for pickle5\r\n  Running setup.py clean for pickle5\r\nFailed to build pickle5\r\nInstalling collected packages: botocore, s3transfer, boto3, pickle5, hydra-ray-launcher\r\n  Attempting uninstall: botocore\r\n    Found existing installation: botocore 1.8.50\r\n    Uninstalling botocore-1.8.50:\r\n      Successfully uninstalled botocore-1.8.50\r\n  Attempting uninstall: s3transfer\r\n    Found existing installation: s3transfer 0.1.13\r\n    Uninstalling s3transfer-0.1.13:\r\n      Successfully uninstalled s3transfer-0.1.13\r\n  Attempting uninstall: boto3\r\n    Found existing installation: boto3 1.4.8\r\n    Uninstalling boto3-1.4.8:\r\n      Successfully uninstalled boto3-1.4.8\r\n    Running setup.py install for pickle5 ... error\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /root/anaconda3/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-install-we50x98m/pickle5/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-install-we50x98m/pickle5/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record /tmp/pip-record-kj3mznv1/install-record.txt --single-version-externally-managed --compile --install-headers /root/anaconda3/include/python3.7m/pickle5\r\n         cwd: /tmp/pip-install-we50x98m/pickle5/\r\n    Complete output (21 lines):\r\n    running install\r\n    running build\r\n    running build_py\r\n    creating build\r\n    creating build/lib.linux-x86_64-3.7\r\n    creating build/lib.linux-x86_64-3.7/pickle5\r\n    copying pickle5/pickle.py -> build/lib.linux-x86_64-3.7/pickle5\r\n    copying pickle5/pickletools.py -> build/lib.linux-x86_64-3.7/pickle5\r\n    copying pickle5/__init__.py -> build/lib.linux-x86_64-3.7/pickle5\r\n    creating build/lib.linux-x86_64-3.7/pickle5/test\r\n    copying pickle5/test/pickletester.py -> build/lib.linux-x86_64-3.7/pickle5/test\r\n    copying pickle5/test/test_picklebuffer.py -> build/lib.linux-x86_64-3.7/pickle5/test\r\n    copying pickle5/test/test_pickle.py -> build/lib.linux-x86_64-3.7/pickle5/test\r\n    copying pickle5/test/__init__.py -> build/lib.linux-x86_64-3.7/pickle5/test\r\n    running build_ext\r\n    building 'pickle5._pickle' extension\r\n    creating build/temp.linux-x86_64-3.7\r\n    creating build/temp.linux-x86_64-3.7/pickle5\r\n    gcc -pthread -B /root/anaconda3/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/root/anaconda3/include/python3.7m -c pickle5/_pickle.c -o build/temp.linux-x86_64-3.7/pickle5/_pickle.o -std=c99\r\n    unable to execute 'gcc': No such file or directory\r\n    error: command 'gcc' failed with exit status 1\r\n    ----------------------------------------\r\nERROR: Command errored out with exit status 1: /root/anaconda3/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-install-we50x98m/pickle5/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-install-we50x98m/pickle5/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record /tmp/pip-record-kj3mznv1/install-record.txt --single-version-externally-managed --compile --install-headers /root/anaconda3/include/python3.7m/pickle5 Check the logs for full command output.\r\nCluster: hydra-ray-cluster\r\n\r\nChecking AWS environment settings\r\nAWS config\r\n  IAM Profile: ray-head-v1\r\n  EC2 Key pair (head & workers): hydra_key-1 [default]\r\n  VPC Subnets (head & workers): subnet-7df0af07, subnet-db16f7b0 [default]\r\n  EC2 Security groups (head & workers): sg-07777bf2f9d59ad1c [default]\r\n  EC2 AMI (head & workers): ami-08e16447bd5caf26a\r\n\r\nNo head node found. Launching a new cluster. Confirm [y/N]: y [automatic, due to --yes]\r\n\r\nAcquiring an up-to-date head node\r\n  Launched 1 nodes [subnet_id=subnet-7df0af07]\r\n    Launched instance i-0f356b75af10f43b3 [state=pending, info=pending]\r\n  Launched a new head node\r\n  Fetching the new head node\r\n\r\n<1/1> Setting up head node\r\n  Prepared bootstrap config\r\n  New status: waiting-for-ssh\r\n  [1/6] Waiting for SSH to become available\r\n    Running `uptime` as a test.\r\n    Waiting for IP\r\n      Not yet available, retrying in 10 seconds\r\n      Not yet available, retrying in 10 seconds\r\n      Received: 18.222.27.12\r\n    SSH still not available SSH command failed., retrying in 5 seconds.\r\n    SSH still not available SSH command failed., retrying in 5 seconds.\r\n    SSH still not available SSH command failed., retrying in 5 seconds.\r\n    SSH still not available SSH command failed., retrying in 5 seconds.\r\n    SSH still not available SSH command failed., retrying in 5 seconds.\r\n    Success.\r\n  Updating cluster configuration. [hash=a08b593e3cc7e8cff4536186fc51fb9763b37243]\r\n  New status: syncing-files\r\n  [3/6] Processing file mounts\r\n  [4/6] No worker file mounts to sync\r\n  New status: setting-up\r\n  [3/6] No initialization commands to run.\r\n  [4/6] Running setup commands\r\n    (0/6) pip3 install omegaconf==2.0.3\r\n    (1/6) pip3 install hydra-core==1.0.3\r\n    (2/6) pip3 install hydra-ray-launche...\r\n  New status: update-failed\r\n  !!!\r\n  SSH command failed.\r\n  !!!\r\n\r\n  Failed to setup head node.\r\n Error: ssh: connect to host 18.222.27.12 port 22: Connection timed out\r\nssh: connect to host 18.222.27.12 port 22: Connection timed out\r\nssh: connect to host 18.222.27.12 port 22: Connection timed out\r\nssh: connect to host 18.222.27.12 port 22: Connection refused\r\nssh: connect to host 18.222.27.12 port 22: Connection refused\r\nWarning: Permanently added '18.222.27.12' (ECDSA) to the list of known hosts.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\n2020-12-10 13:24:39,917 WARNING command_runner.py:773 -- Nvidia Container Runtime is present, but no GPUs found.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\nShared connection to 18.222.27.12 closed.\r\n[2020-12-10 13:25:40,197][HYDRA] Running command: ['ray', 'exec', '--docker', '/tmp/tmp2uz4ynig.yaml', 'echo $(mktemp -d)']\r\n[2020-12-10 13:25:40,445][HYDRA] Output:\r\n Error: Usage: ray exec [OPTIONS] CLUSTER_CONFIG_FILE CMD\r\nTry 'ray exec --help' for help.\r\n\r\nError: no such option: --docker\r\nTraceback (most recent call last):\r\n  File \"/home/sam/miniconda3/envs/gnosis/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/home/sam/miniconda3/envs/gnosis/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 358, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/sam/miniconda3/envs/gnosis/lib/python3.6/site-packages/hydra/_internal/hydra.py\", line 136, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/home/sam/miniconda3/envs/gnosis/lib/python3.6/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 154, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/home/sam/miniconda3/envs/gnosis/lib/python3.6/site-packages/hydra_plugins/hydra_ray_launcher/ray_aws_launcher.py\", line 59, in launch\r\n    launcher=self, job_overrides=job_overrides, initial_job_idx=initial_job_idx\r\n  File \"/home/sam/miniconda3/envs/gnosis/lib/python3.6/site-packages/hydra_plugins/hydra_ray_launcher/_core_aws.py\", line 104, in launch\r\n    launcher, local_tmp_dir, Path(HydraConfig.get().sweep.dir)\r\n  File \"/home/sam/miniconda3/envs/gnosis/lib/python3.6/site-packages/hydra_plugins/hydra_ray_launcher/_core_aws.py\", line 115, in launch_jobs\r\n    launcher.ray_yaml_path, launcher.docker_enabled\r\n  File \"/home/sam/miniconda3/envs/gnosis/lib/python3.6/contextlib.py\", line 81, in __enter__\r\n    return next(self.gen)\r\n  File \"/home/sam/miniconda3/envs/gnosis/lib/python3.6/site-packages/hydra_plugins/hydra_ray_launcher/_launcher_util.py\", line 96, in ray_tmp_dir\r\n    assert len(tmppath) == 1, f\"tmppath is : {tmppath}\"\r\nAssertionError: tmppath is : []\r\n```\r\n\r\n## Expected Behavior\r\nWhen you launch a job with `hydra/launcher=ray_aws`, there shouldn't be issues arising from outdated flags in the ray calls. \r\n\r\n## System information\r\n- **Hydra Version** :  1.0.3\r\n- **Python version** :  3.6\r\n- **Virtual environment type and version** : conda 4.8.0\r\n- **Operating system** : Ubuntu 16.04 LTS\r\n\r\n## Additional context\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1191/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1191/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1184", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1184/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1184/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1184/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1184", "id": 757681819, "node_id": "MDU6SXNzdWU3NTc2ODE4MTk=", "number": 1184, "title": "[Bug] Initialisation pydantic BaseModel with List causing validation error", "user": {"login": "lalitpagaria", "id": 19303690, "node_id": "MDQ6VXNlcjE5MzAzNjkw", "avatar_url": "https://avatars.githubusercontent.com/u/19303690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lalitpagaria", "html_url": "https://github.com/lalitpagaria", "followers_url": "https://api.github.com/users/lalitpagaria/followers", "following_url": "https://api.github.com/users/lalitpagaria/following{/other_user}", "gists_url": "https://api.github.com/users/lalitpagaria/gists{/gist_id}", "starred_url": "https://api.github.com/users/lalitpagaria/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lalitpagaria/subscriptions", "organizations_url": "https://api.github.com/users/lalitpagaria/orgs", "repos_url": "https://api.github.com/users/lalitpagaria/repos", "events_url": "https://api.github.com/users/lalitpagaria/events{/privacy}", "received_events_url": "https://api.github.com/users/lalitpagaria/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-12-05T13:28:23Z", "updated_at": "2020-12-06T22:07:22Z", "closed_at": "2020-12-05T17:33:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nFirst thank you for awesome project.\r\nI am using compose API to initialise class which have only `List[str]` parameter. When passing config in init `pydantic` throwing validation error that `value is not a valid list (type=type_error.list)`. I found that config is reading list as `ListConfig[str]` and `pydantic` expect it as `List[str].\r\n\r\nPlease suggest how to instruct compose to force parse config in python's fields.\r\n\r\n## Checklist\r\n- [ X ] I checked on the latest version of Hydra\r\n- [ X ] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nMy config.yaml is as follows -\r\n```\r\nallowed_list:\r\n - \"8080\"\r\n - \"8081\"\r\n```\r\nMy Model class as follows -\r\n```\r\nclass AllowedPorts(BaseModel):\r\n     allowed_list: List[str]\r\n```\r\nThis is how I am using hydra -\r\n```\r\nwith initialize(config_path=\"/home/user\"):\r\n    cfg = compose(\"config.yaml\")\r\n    allowed_ports = AllowedPort(**cfg)\r\n```\r\nAt `allowed_ports = AllowedPort(**cfg)`, `pydantic` will throw validation error.\r\n** Stack trace/error message **\r\n```\r\n// Paste the bad output here!\r\nTraceback (most recent call last):\r\n  File \"/Applications/PyCharm CE.app/Contents/plugins/python-ce/helpers/pydev/pydevd.py\", line 1477, in _exec\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"/Applications/PyCharm CE.app/Contents/plugins/python-ce/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n...\r\n...\r\n\r\n  value is not a valid list (type=type_error.list)\r\npython-BaseException\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\ncompose should have way to parse config in python default types.\r\n## System information\r\n- **Hydra Version** :  1.0.4\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : 20.0.31 \r\n- **Operating system** : MacOS\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1184/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1184/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1183", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1183/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1183/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1183/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1183", "id": 757365340, "node_id": "MDU6SXNzdWU3NTczNjUzNDA=", "number": 1183, "title": "[Bug] Impossible to instantiate nested dataclasses ", "user": {"login": "guillaumegenthial", "id": 13119229, "node_id": "MDQ6VXNlcjEzMTE5MjI5", "avatar_url": "https://avatars.githubusercontent.com/u/13119229?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guillaumegenthial", "html_url": "https://github.com/guillaumegenthial", "followers_url": "https://api.github.com/users/guillaumegenthial/followers", "following_url": "https://api.github.com/users/guillaumegenthial/following{/other_user}", "gists_url": "https://api.github.com/users/guillaumegenthial/gists{/gist_id}", "starred_url": "https://api.github.com/users/guillaumegenthial/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guillaumegenthial/subscriptions", "organizations_url": "https://api.github.com/users/guillaumegenthial/orgs", "repos_url": "https://api.github.com/users/guillaumegenthial/repos", "events_url": "https://api.github.com/users/guillaumegenthial/events{/privacy}", "received_events_url": "https://api.github.com/users/guillaumegenthial/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 22, "created_at": "2020-12-04T19:57:09Z", "updated_at": "2021-02-24T18:42:16Z", "closed_at": "2021-02-24T18:42:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nI want to instantiate recursively nested dataclass instances.\r\n\r\nBecause OmegaConf considers dataclasses instances to be configs, when calling `_get_kwargs` during the `instantiate` call, the dataclass instance is converted back to a config because parameters are added to a OmegaConf list / dict.\r\n\r\nSee https://github.com/facebookresearch/hydra/blob/c1eb2435b6314412d7029acbf87efd63d84d384c/hydra/_internal/utils.py#L685\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\nIn a script `my_app.py`\r\n\r\n```python\r\n\"\"\"Test hydra dataclass instantiation.\"\"\"\r\n\r\nfrom dataclasses import dataclass\r\nfrom omegaconf import OmegaConf\r\nfrom hydra.utils import instantiate\r\n\r\n@dataclass\r\nclass A:\r\n    x: int\r\n\r\n@dataclass\r\nclass B:\r\n    a: A\r\n\r\nconf = {\r\n    \"_target_\": \"__main__.B\",\r\n    \"a\": {\r\n        \"_target_\": \"__main__.A\",\r\n        \"x\": 1\r\n    }\r\n}\r\nparsed = OmegaConf.create(conf)\r\ninstance = instantiate(parsed)\r\nprint(instance)\r\n```\r\n\r\nrun `python my_app.py`.\r\n\r\nYou get\r\n\r\n```bash\r\nB(a={'x': 1})\r\n```\r\n\r\n## Expected Behavior\r\n\r\nI expect the result to be `B(a=A(x=1))`.\r\n\r\nIt seems strange to me that the config schema interferes with the instantiation.\r\n\r\nI work with a codebase where a bunch of classes are dataclasses and using hydra for configuration would be a plus.\r\n\r\n## System information\r\n- **Hydra Version** :  master\r\n- **Python version** :  3.6\r\n- **Virtual environment type and version** : instantiated with `python -m venv`\r\n- **Operating system** :  macOS 11.0.1\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1183/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1180", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1180/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1180/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1180/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1180", "id": 755971839, "node_id": "MDU6SXNzdWU3NTU5NzE4Mzk=", "number": 1180, "title": "[Bug] cannot pickle 'CudnnModule' object when using Joblib", "user": {"login": "briankosw", "id": 10988056, "node_id": "MDQ6VXNlcjEwOTg4MDU2", "avatar_url": "https://avatars.githubusercontent.com/u/10988056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/briankosw", "html_url": "https://github.com/briankosw", "followers_url": "https://api.github.com/users/briankosw/followers", "following_url": "https://api.github.com/users/briankosw/following{/other_user}", "gists_url": "https://api.github.com/users/briankosw/gists{/gist_id}", "starred_url": "https://api.github.com/users/briankosw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/briankosw/subscriptions", "organizations_url": "https://api.github.com/users/briankosw/orgs", "repos_url": "https://api.github.com/users/briankosw/repos", "events_url": "https://api.github.com/users/briankosw/events{/privacy}", "received_events_url": "https://api.github.com/users/briankosw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-12-03T08:15:35Z", "updated_at": "2021-06-04T01:31:44Z", "closed_at": "2021-06-04T01:31:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nIt seems that CUDNN does not play well with Hydra's Joblib pluging. See the repro below.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n```python\r\nimport hydra\r\nimport torch.backends.cudnn as cudnn\r\n\r\n@hydra.main(config_name=\"cudnn\")\r\ndef main(cfg):\r\n    cudnn.benchmark = False\r\n    cudnn.deterministic = True\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n```\r\ndefaults:\r\n    - hydra/launcher: joblib\r\n```\r\n\r\n```bash\r\n>>> python main.py -m +gpu=0,1,2,3\r\n\r\n[2020-12-03 08:10:44,560][HYDRA] Joblib.Parallel(n_jobs=-1,backend=loky,prefer=processes,require=None,verbose=0,timeout=None,pre_dispatch=2*n_jobs,batch_size=auto,temp_folder=None,max_nbytes=None,mmap_mode=r) is launching 4 jobs\r\n[2020-12-03 08:10:44,560][HYDRA] Launching jobs, sweep output dir : multirun/2020-12-03/08-10-44\r\n[2020-12-03 08:10:44,560][HYDRA]        #0 : +gpu=0\r\n[2020-12-03 08:10:44,560][HYDRA]        #1 : +gpu=1\r\n[2020-12-03 08:10:44,560][HYDRA]        #2 : +gpu=2\r\n[2020-12-03 08:10:44,560][HYDRA]        #3 : +gpu=3\r\njoblib.externals.loky.process_executor._RemoteTraceback:\r\n\"\"\"\r\nTraceback (most recent call last):\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/joblib/externals/loky/backend/queues.py\", line 153, in _feed\r\n    obj_ = dumps(obj, reducers=reducers)\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/joblib/externals/loky/backend/reduction.py\", line 271, in dumps\r\n    dump(obj, buf, reducers=reducers, protocol=protocol)\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/joblib/externals/loky/backend/reduction.py\", line 264, in dump\r\n    _LokyPickler(file, reducers=reducers, protocol=protocol).dump(obj)\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/joblib/externals/cloudpickle/cloudpickle_fast.py\", line 563, in dump\r\n    return Pickler.dump(self, obj)\r\nTypeError: cannot pickle 'CudnnModule' object\r\n\"\"\"\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 355, in <lambda>\r\n    lambda: hydra.multirun(\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 136, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 154, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/hydra_plugins/hydra_joblib_launcher/joblib_launcher.py\", line 45, in launch\r\n    return _core.launch(\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/hydra_plugins/hydra_joblib_launcher/_core.py\", line 101, in launch\r\n    runs = Parallel(**joblib_cfg)(\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/joblib/parallel.py\", line 1061, in __call__\r\n    self.retrieve()\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/joblib/parallel.py\", line 940, in retrieve\r\n    self._output.extend(job.get(timeout=self.timeout))\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/site-packages/joblib/_parallel_backends.py\", line 542, in wrap_future_result\r\n    return future.result(timeout=timeout)\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/concurrent/futures/_base.py\", line 439, in result\r\n    return self.__get_result()\r\n  File \"/home/vishwam/anaconda3/envs/hydra-torch/lib/python3.8/concurrent/futures/_base.py\", line 388, in __get_result\r\n    raise self._exception\r\n_pickle.PicklingError: Could not pickle the task to send it to the workers.\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.4\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : conda 4.8.3\r\n- **Operating system** : Ubuntu 18.04.3 LTS\r\n\r\n## Additional context\r\nThis seems to be a problem with how the global CUDNN state is being set and its interaction with Joblib. This snippet works perfectly well with PyTorch and Python's distributed processing primitives.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1180/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1180/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1171", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1171/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1171/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1171/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1171", "id": 752136735, "node_id": "MDU6SXNzdWU3NTIxMzY3MzU=", "number": 1171, "title": "[Bug] hydra.utils.instantiate can not accept kwargs \"root\" (ignored and never passed to object)", "user": {"login": "DaGuT", "id": 7759336, "node_id": "MDQ6VXNlcjc3NTkzMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/7759336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DaGuT", "html_url": "https://github.com/DaGuT", "followers_url": "https://api.github.com/users/DaGuT/followers", "following_url": "https://api.github.com/users/DaGuT/following{/other_user}", "gists_url": "https://api.github.com/users/DaGuT/gists{/gist_id}", "starred_url": "https://api.github.com/users/DaGuT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DaGuT/subscriptions", "organizations_url": "https://api.github.com/users/DaGuT/orgs", "repos_url": "https://api.github.com/users/DaGuT/repos", "events_url": "https://api.github.com/users/DaGuT/events{/privacy}", "received_events_url": "https://api.github.com/users/DaGuT/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 7, "created_at": "2020-11-27T10:10:37Z", "updated_at": "2021-07-23T03:03:45Z", "closed_at": "2021-02-24T18:42:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nUPD: Found a comment in code that says, you know about it :) THen may be someone should add `raise error` saying that 'root is not available as arg')\r\n\r\nfunction hydra._internal.utils._get_wargs eats my `root` kwarg that I passed to hydra.utils.instantiate. \r\n\r\nI was just trying to instantiate new object that has `root` as one of its arguments, and I was constantly getting error (I was passing it as KWARG, not via config. I need that because among full list ,)\r\n\r\nI have already replaced my root with new argument, but still.. I had to go through source code to figure out why the heck it did not pass my `root` argument :)\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nconfig.yaml\r\n```\r\nrepr:\r\n  _target_: train_model.MyReprClass\r\n```\r\ntrain_model.py\r\n```\r\nimport hydra\r\nfrom omegaconf import DictConfig,\r\nclass MyReprClass:\r\n    def __init__(self, root):\r\n        self.root = root\r\n\r\n@hydra.main(config_path=\"../configs\", config_name=\"config.yaml\")\r\ndef my_app(cfg: DictConfig) -> None:\r\n    hydra.utils.instantiate(cfg.repr, root=123)\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"train_model.py\", line 101, in <module>\r\n    my_app()\r\n  File \"/home/alexander/anaconda3/envs/pt18/lib/python3.7/site-packages/hydra/main.py\", line 37, in decorated_main\r\n    strict=strict,\r\n  File \"/home/alexander/anaconda3/envs/pt18/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 345, in _run_hydra\r\n    lambda: hydra.run(\r\n  File \"/home/alexander/anaconda3/envs/pt18/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 199, in run_and_report\r\n    raise ex\r\n  File \"/home/alexander/anaconda3/envs/pt18/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 196, in run_and_report\r\n    return func()\r\n  File \"/home/alexander/anaconda3/envs/pt18/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 348, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/alexander/anaconda3/envs/pt18/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 112, in run\r\n    configure_logging=with_log_configuration,\r\n  File \"/home/alexander/anaconda3/envs/pt18/lib/python3.7/site-packages/hydra/core/utils.py\", line 126, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"train_model.py\", line 69, in my_app\r\n    hydra.utils.instantiate(cfg.repr)\r\n  File \"/home/alexander/anaconda3/envs/pt18/lib/python3.7/site-packages/hydra/utils.py\", line 121, in instantiate\r\n    ).with_traceback(sys.exc_info()[2])\r\n  File \"/home/alexander/anaconda3/envs/pt18/lib/python3.7/site-packages/hydra/utils.py\", line 114, in instantiate\r\n    return target(*args, **final_kwargs)\r\nTypeError: Error instantiating/calling 'train_model.MyReprClass' : __init__() missing 1 required positional argument: 'root'\r\n\r\n```\r\n\r\n## Expected Behavior\r\nIt should init class without any error\r\n\r\n## System information\r\n- **Hydra Version** :  \r\n1.0.0dev1 (pip install git+LINK_TO_THIS_REPO_HERE)\r\n- **Python version** :\r\n3.7 \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\nubuntu 16\r\n\r\n## Additional context\r\nProblem is localised\r\n```\r\ndef _get_kwargs(\r\n    config: Union[DictConfig, ListConfig],\r\n    root: bool = True,\r\n    **kwargs: Any,\r\n) -> Any:\r\n```\r\n\r\nJust replace this root argument in _get_kwargs with anything else :) Or change the way kwargs are parsed. Or give warning/throw error before `_get_kwargs` call that 'root and config arguments can not be passed'", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1171/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1171/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1163", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1163/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1163/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1163/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1163", "id": 746476916, "node_id": "MDU6SXNzdWU3NDY0NzY5MTY=", "number": 1163, "title": "[Bug] String argumant incorrectly parsed as integer", "user": {"login": "weiwei-ww", "id": 34023339, "node_id": "MDQ6VXNlcjM0MDIzMzM5", "avatar_url": "https://avatars.githubusercontent.com/u/34023339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weiwei-ww", "html_url": "https://github.com/weiwei-ww", "followers_url": "https://api.github.com/users/weiwei-ww/followers", "following_url": "https://api.github.com/users/weiwei-ww/following{/other_user}", "gists_url": "https://api.github.com/users/weiwei-ww/gists{/gist_id}", "starred_url": "https://api.github.com/users/weiwei-ww/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weiwei-ww/subscriptions", "organizations_url": "https://api.github.com/users/weiwei-ww/orgs", "repos_url": "https://api.github.com/users/weiwei-ww/repos", "events_url": "https://api.github.com/users/weiwei-ww/events{/privacy}", "received_events_url": "https://api.github.com/users/weiwei-ww/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-19T11:06:13Z", "updated_at": "2020-11-19T11:40:25Z", "closed_at": "2020-11-19T11:40:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nA string argument is incorrectly parsed as an integer if this string only contains numbers and underscores.\r\n\r\n## To reproduce\r\n\r\nIn _config/hydra_test.yaml_:\r\n```\r\nid: ???\r\n```\r\nIn _hydra_test.py_:\r\n```\r\nimport hydra\r\n\r\n@hydra.main(config_path='config', config_name='hydra_test')\r\ndef main(cfg):\r\n    print(cfg.id)\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\nRun the following command:\r\n```\r\npython hydra_test.py id=1_1_1\r\n```\r\nor:\r\n```\r\npython hydra_test.py id=\"1_1_1\"\r\n```\r\n\r\n## Expected Behavior\r\n\r\nThe expected output is:\r\n```\r\n1_1_1\r\n```\r\nHowever, the program outputs this instead:\r\n```\r\n111\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.3\r\n- **Python version** : 3.7.9\r\n- **Operating system** : Ubuntu 20.04\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1163/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1163/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1156", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1156/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1156/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1156/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1156", "id": 746179149, "node_id": "MDU6SXNzdWU3NDYxNzkxNDk=", "number": 1156, "title": "[Bug] submitit launcher doesnt work with dynamically defined enums", "user": {"login": "alexeib", "id": 3497946, "node_id": "MDQ6VXNlcjM0OTc5NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/3497946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexeib", "html_url": "https://github.com/alexeib", "followers_url": "https://api.github.com/users/alexeib/followers", "following_url": "https://api.github.com/users/alexeib/following{/other_user}", "gists_url": "https://api.github.com/users/alexeib/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexeib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexeib/subscriptions", "organizations_url": "https://api.github.com/users/alexeib/orgs", "repos_url": "https://api.github.com/users/alexeib/repos", "events_url": "https://api.github.com/users/alexeib/events{/privacy}", "received_events_url": "https://api.github.com/users/alexeib/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2020-11-19T01:54:14Z", "updated_at": "2020-12-04T07:18:40Z", "closed_at": "2020-12-04T07:18:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "this works:\r\n```python fairseq_cli/hydra_train.py --multirun  distributed_training.distributed_world_size=2 checkpoint.save_dir=/checkpoint/abaevski/tmp task.data=/checkpoint/abaevski/data/speech/libri/960h/wav2vec/raw/ +optimization.update_freq='[2]' --config-path /private/home/abaevski/fairseq-py/examples/wav2vec/config/pretraining --config-name wav2vec2_large_librivox```\r\n\r\nthis does not work:\r\n```python fairseq_cli/hydra_train.py --multirun hydra/launcher=submitit_slurm hydra.launcher.cpus_per_task=80 hydra.launcher.gpus_per_node=8 hydra.launcher.tasks_per_node=1 hydra.launcher.nodes=2 hydra.launcher.partition=dev hydra.launcher.mem_gb=400 distributed_training.distributed_world_size=16 checkpoint.save_dir=/checkpoint/abaevski/tmp task.data=/checkpoint/abaevski/data/speech/libri/960h/wav2vec/raw/ +optimization.update_freq='[2]' --config-path /private/home/abaevski/fairseq-py/examples/wav2vec/config/pretraining --config-name wav2vec2_large_librivox```\r\n\r\nerror is:\r\n```\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 156, in load_configuration\r\n    from_shell=from_shell,\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 262, in _load_configuration\r\n    run_mode=run_mode,\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 804, in _merge_defaults_into_config\r\n    hydra_cfg = merge_defaults_list_into_config(hydra_cfg, system_list)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/hydra/_internal/config_loader_impl.py\", line 772, in merge_defaults_list_into_config\r\n    merged_cfg.merge_with(job_cfg)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/basecontainer.py\", line 327, in merge_with\r\n    self._format_and_raise(key=None, value=None, cause=e)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/base.py\", line 101, in _format_and_raise\r\n    type_override=type_override,\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/_utils.py\", line 610, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/_utils.py\", line 591, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/basecontainer.py\", line 325, in merge_with\r\n    self._merge_with(*others)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/basecontainer.py\", line 343, in _merge_with\r\n    BaseContainer._map_merge(self, other)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/basecontainer.py\", line 290, in _map_merge\r\n    dest_node._merge_with(src_value)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/basecontainer.py\", line 343, in _merge_with\r\n    BaseContainer._map_merge(self, other)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/basecontainer.py\", line 301, in _map_merge\r\n    dest._format_and_raise(key=key, value=src_value, cause=e)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/base.py\", line 101, in _format_and_raise\r\n    type_override=type_override,\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/_utils.py\", line 675, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/_utils.py\", line 591, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nomegaconf.errors.ValidationError: Value json (Choices) is not a valid input for <enum 'Choices'>\r\n        full_key: common.log_format\r\n        reference_type=CommonConfig\r\n        object_type=CommonConfig\r\n```\r\n\r\ncommon.logformat is defined as follows:\r\n```python\r\nlog_format: Optional[LOG_FORMAT_CHOICES] = field(\r\n        default=None, metadata={\"help\": \"log format to use\"}\r\n    )\r\n```\r\nwhere LOG_FORMAT_CHOICES is `LOG_FORMAT_CHOICES = ChoiceEnum([\"json\", \"none\", \"simple\", \"tqdm\"])`\r\n\r\nand ChoiceEnum is\r\n\r\n```\r\nclass StrEnum(Enum):\r\n    def __str__(self):\r\n        return self.value\r\n\r\n    def __eq__(self, other: str):\r\n        return self.value == other\r\n\r\n    def __repr__(self):\r\n        return self.value\r\n\r\n    def __hash__(self):\r\n        return hash(str(self))\r\n\r\n\r\ndef ChoiceEnum(choices: List[str]):\r\n    \"\"\"return the Enum class used to enforce list of choices\"\"\"\r\n    return StrEnum(\"Choices\", {k: k for k in choices})\r\n```\r\n\r\n(you can find these here: https://github.com/pytorch/fairseq/blob/master/fairseq/dataclass/constants.py)", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1156/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1126", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1126/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1126/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1126/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1126", "id": 737098916, "node_id": "MDU6SXNzdWU3MzcwOTg5MTY=", "number": 1126, "title": "[Bug] I can't see any log with pytorch DDP", "user": {"login": "ryul99", "id": 16446699, "node_id": "MDQ6VXNlcjE2NDQ2Njk5", "avatar_url": "https://avatars.githubusercontent.com/u/16446699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ryul99", "html_url": "https://github.com/ryul99", "followers_url": "https://api.github.com/users/ryul99/followers", "following_url": "https://api.github.com/users/ryul99/following{/other_user}", "gists_url": "https://api.github.com/users/ryul99/gists{/gist_id}", "starred_url": "https://api.github.com/users/ryul99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ryul99/subscriptions", "organizations_url": "https://api.github.com/users/ryul99/orgs", "repos_url": "https://api.github.com/users/ryul99/repos", "events_url": "https://api.github.com/users/ryul99/events{/privacy}", "received_events_url": "https://api.github.com/users/ryul99/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471572, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcy", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/question", "name": "question", "color": "d876e3", "default": true, "description": "Hydra usage question"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 34, "created_at": "2020-11-05T16:51:07Z", "updated_at": "2021-02-18T19:40:22Z", "closed_at": "2021-02-18T18:42:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\nWhen I use PyTorch's Distributed Data Parallel I can't see any logs in system out and log file is empty except wandb log like below.\r\n```\r\n[2020-11-06 01:32:08,629][wandb.internal.internal][INFO] - Internal process exited\r\n```\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\nYou can reproduce by running this repo(https://github.com/ryul99/pytorch-project-template/tree/a80f0284c5b22fba2d4892bb906a9bc2b6075838) with `python trainer.py train.working_dir=$(pwd) train.train.dist.gpus=1`(DDP with one gpu)\r\nI'm sorry that this is not that minimal code \ud83d\ude05\r\n** Stack trace/error message **\r\n```\r\n\u276f python trainer.py train.working_dir=$(pwd) train.train.dist.gpus=1\r\n/home/ryul99/.pyenv/versions/LWD/lib/python3.8/site-packages/hydra/core/utils.py:204: UserWarning: \r\nUsing config_path to specify the config name is deprecated, specify the config name via config_name\r\nSee https://hydra.cc/docs/next/upgrades/0.11_to_1.0/config_path_changes\r\n  warnings.warn(category=UserWarning, message=msg)\r\n/home/ryul99/.pyenv/versions/LWD/lib/python3.8/site-packages/hydra/plugins/config_source.py:190: UserWarning: \r\nMissing @package directive train/default.yaml in file:///home/ryul99/Workspace/pytorch-project-template/config.\r\nSee https://hydra.cc/docs/next/upgrades/0.11_to_1.0/adding_a_package_directive\r\n  warnings.warn(message=msg, category=UserWarning)\r\nDownloading http://yann.lecun.com/exdb/mnist/train-images-idx3-ubyte.gz to dataset/meta/MNIST/raw/train-images-idx3-ubyte.gz\r\n100.1%Extracting dataset/meta/MNIST/raw/train-images-idx3-ubyte.gz to dataset/meta/MNIST/raw\r\nDownloading http://yann.lecun.com/exdb/mnist/train-labels-idx1-ubyte.gz to dataset/meta/MNIST/raw/train-labels-idx1-ubyte.gz\r\n113.5%Extracting dataset/meta/MNIST/raw/train-labels-idx1-ubyte.gz to dataset/meta/MNIST/raw\r\nDownloading http://yann.lecun.com/exdb/mnist/t10k-images-idx3-ubyte.gz to dataset/meta/MNIST/raw/t10k-images-idx3-ubyte.gz\r\n100.4%Extracting dataset/meta/MNIST/raw/t10k-images-idx3-ubyte.gz to dataset/meta/MNIST/raw\r\nDownloading http://yann.lecun.com/exdb/mnist/t10k-labels-idx1-ubyte.gz to dataset/meta/MNIST/raw/t10k-labels-idx1-ubyte.gz\r\n180.4%Extracting dataset/meta/MNIST/raw/t10k-labels-idx1-ubyte.gz to dataset/meta/MNIST/raw\r\nProcessing...\r\n/home/ryul99/.pyenv/versions/LWD/lib/python3.8/site-packages/torchvision/datasets/mnist.py:480: UserWarning: The given NumPy array is not writeable, and PyTorch does not support non-writeable tensors. This means you can write to the underlying (supposedly non-writeable) NumPy array using the tensor. You may want to copy the array to protect its data or make it writeable before converting it to a tensor. This type of warning will be suppressed for the rest of this program. (Triggered internally at  /pytorch/torch/csrc/utils/tensor_numpy.cpp:141.)\r\n  return torch.from_numpy(parsed.astype(m[2], copy=False)).view(*s)\r\nDone!\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nIf you run with `python trainer.py train.working_dir=$(pwd) train.train.dist.gpus=0`(not using DDP), you can see many logs like this.\r\n```\r\n\u276f python trainer.py train.working_dir=$(pwd) train.train.dist.gpus=0\r\n/home/ryul99/.pyenv/versions/LWD/lib/python3.8/site-packages/hydra/core/utils.py:204: UserWarning: \r\nUsing config_path to specify the config name is deprecated, specify the config name via config_name\r\nSee https://hydra.cc/docs/next/upgrades/0.11_to_1.0/config_path_changes\r\n  warnings.warn(category=UserWarning, message=msg)\r\n/home/ryul99/.pyenv/versions/LWD/lib/python3.8/site-packages/hydra/plugins/config_source.py:190: UserWarning: \r\nMissing @package directive train/default.yaml in file:///home/ryul99/Workspace/pytorch-project-template/config.\r\nSee https://hydra.cc/docs/next/upgrades/0.11_to_1.0/adding_a_package_directive\r\n  warnings.warn(message=msg, category=UserWarning)\r\n[2020-11-06 01:48:33,990][trainer.py][INFO] - Config:\r\ntrain:\r\n  name: First_training\r\n  working_dir: /home/ryul99/Workspace/pytorch-project-template\r\n  data:\r\n    train_dir: dataset/meta/train\r\n    test_dir: dataset/meta/test\r\n    file_format: '*.file_extension'\r\n    use_background_generator: true\r\n    divide_dataset_per_gpu: true\r\n  train:\r\n    random_seed: 3750\r\n    num_epoch: 10000\r\n    num_workers: 4\r\n    batch_size: 64\r\n    optimizer:\r\n      mode: adam\r\n      adam:\r\n        lr: 0.001\r\n        betas:\r\n        - 0.9\r\n        - 0.999\r\n    dist:\r\n      master_addr: localhost\r\n      master_port: '12355'\r\n      mode: nccl\r\n      gpus: 0\r\n      timeout: 30\r\n  test:\r\n    num_workers: 4\r\n    batch_size: 64\r\n  model:\r\n    device: cuda\r\n  log:\r\n    use_tensorboard: true\r\n    use_wandb: false\r\n    wandb_init_conf:\r\n      name: ${train.name}\r\n      entity: null\r\n      project: null\r\n    summary_interval: 1\r\n    chkpt_interval: 10\r\n    chkpt_dir: chkpt\r\n  load:\r\n    wandb_load_path: null\r\n    network_chkpt_path: null\r\n    strict_load: false\r\n    resume_state_path: null\r\n\r\n[2020-11-06 01:48:33,991][trainer.py][INFO] - Set up train process\r\n[2020-11-06 01:48:33,991][trainer.py][INFO] - BackgroundGenerator is turned off when Distributed running is on\r\nDownloading http://yann.lecun.com/exdb/mnist/train-images-idx3-ubyte.gz to dataset/meta/MNIST/raw/train-images-idx3-ubyte.gz\r\n100.1%Extracting dataset/meta/MNIST/raw/train-images-idx3-ubyte.gz to dataset/meta/MNIST/raw\r\nDownloading http://yann.lecun.com/exdb/mnist/train-labels-idx1-ubyte.gz to dataset/meta/MNIST/raw/train-labels-idx1-ubyte.gz\r\n113.5%Extracting dataset/meta/MNIST/raw/train-labels-idx1-ubyte.gz to dataset/meta/MNIST/raw\r\nDownloading http://yann.lecun.com/exdb/mnist/t10k-images-idx3-ubyte.gz to dataset/meta/MNIST/raw/t10k-images-idx3-ubyte.gz\r\n100.4%Extracting dataset/meta/MNIST/raw/t10k-images-idx3-ubyte.gz to dataset/meta/MNIST/raw\r\nDownloading http://yann.lecun.com/exdb/mnist/t10k-labels-idx1-ubyte.gz to dataset/meta/MNIST/raw/t10k-labels-idx1-ubyte.gz\r\n180.4%Extracting dataset/meta/MNIST/raw/t10k-labels-idx1-ubyte.gz to dataset/meta/MNIST/raw\r\nProcessing...\r\n/home/ryul99/.pyenv/versions/LWD/lib/python3.8/site-packages/torchvision/datasets/mnist.py:480: UserWarning: The given NumPy array is not writeable, and PyTorch does not support non-writeable tensors. This means you can write to the underlying (supposedly non-writeable) NumPy array using the tensor. You may want to copy the array to protect its data or make it writeable before converting it to a tensor. This type of warning will be suppressed for the rest of this program. (Triggered internally at  /pytorch/torch/csrc/utils/tensor_numpy.cpp:141.)\r\n  return torch.from_numpy(parsed.astype(m[2], copy=False)).view(*s)\r\nDone!\r\n[2020-11-06 01:48:38,886][trainer.py][INFO] - Making train dataloader...\r\n[2020-11-06 01:48:38,905][trainer.py][INFO] - Making test dataloader...\r\n[2020-11-06 01:48:40,366][trainer.py][INFO] - Starting new training run.\r\n[2020-11-06 01:48:40,467][train_model.py][INFO] - Train Loss 2.3010 at step 1\r\n[2020-11-06 01:48:40,473][train_model.py][INFO] - Train Loss 2.3133 at step 2\r\n```\r\n## System information\r\n- **Hydra Version** :  1.0.3\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : pyenv 1.2.21\r\n- **Operating system** : Ubuntu server 18.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1126/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1125", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1125/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1125/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1125/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1125", "id": 736512900, "node_id": "MDU6SXNzdWU3MzY1MTI5MDA=", "number": 1125, "title": "[Bug] omegaconf is doing interpolation during merges when it shouldnt", "user": {"login": "alexeib", "id": 3497946, "node_id": "MDQ6VXNlcjM0OTc5NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/3497946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexeib", "html_url": "https://github.com/alexeib", "followers_url": "https://api.github.com/users/alexeib/followers", "following_url": "https://api.github.com/users/alexeib/following{/other_user}", "gists_url": "https://api.github.com/users/alexeib/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexeib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexeib/subscriptions", "organizations_url": "https://api.github.com/users/alexeib/orgs", "repos_url": "https://api.github.com/users/alexeib/repos", "events_url": "https://api.github.com/users/alexeib/events{/privacy}", "received_events_url": "https://api.github.com/users/alexeib/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9", "html_url": "https://github.com/facebookresearch/hydra/milestone/9", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9/labels", "id": 6007978, "node_id": "MDk6TWlsZXN0b25lNjAwNzk3OA==", "number": 9, "title": "1.0.4", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2020-10-19T16:15:14Z", "updated_at": "2020-12-01T08:40:50Z", "due_on": null, "closed_at": "2020-12-01T08:40:50Z"}, "comments": 0, "created_at": "2020-11-05T00:26:00Z", "updated_at": "2020-11-11T19:37:14Z", "closed_at": "2020-11-05T07:45:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "repro:\r\n\r\n```\r\n>>> from dataclasses import dataclass\r\n>>> from typing import List\r\n>>> @dataclass\r\n... class test_class:\r\n...     x: List[float] = \"${optimization.lr}\"\r\n...\r\n>>> dc = test_class()\r\n>>> a = DictConfig(dc)\r\n>>> b = DictConfig({\"x\": [0.1]})\r\n>>> OmegaConf.merge(a,b)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/omegaconf.py\", line 321, in merge\r\n    target.merge_with(*others[1:])\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/basecontainer.py\", line 327, in merge_with\r\n    self._format_and_raise(key=None, value=None, cause=e)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/base.py\", line 101, in _format_and_raise\r\n    type_override=type_override,\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/_utils.py\", line 675, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/private/home/abaevski/.conda/envs/fairseq-fp16-20200821/lib/python3.6/site-packages/omegaconf/_utils.py\", line 591, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nomegaconf.errors.ConfigKeyError: str interpolation key 'optimization.lr' not found\r\n\tfull_key:\r\n\treference_type=Any\r\n\tobject_type=test_class\r\n```\r\n\r\nif instead you set a to be DictConfig initialized from a dict, everything works\r\n```\r\n>>> a = DictConfig({'x': '${optimization.lr}'})\r\n>>> OmegaConf.merge(a,b)\r\n{'x': [0.1]}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1125/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1117", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1117/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1117/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1117/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1117", "id": 735683520, "node_id": "MDU6SXNzdWU3MzU2ODM1MjA=", "number": 1117, "title": "[Bug] Optional[List] params defaulted to None don't work", "user": {"login": "alexeib", "id": 3497946, "node_id": "MDQ6VXNlcjM0OTc5NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/3497946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexeib", "html_url": "https://github.com/alexeib", "followers_url": "https://api.github.com/users/alexeib/followers", "following_url": "https://api.github.com/users/alexeib/following{/other_user}", "gists_url": "https://api.github.com/users/alexeib/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexeib/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexeib/subscriptions", "organizations_url": "https://api.github.com/users/alexeib/orgs", "repos_url": "https://api.github.com/users/alexeib/repos", "events_url": "https://api.github.com/users/alexeib/events{/privacy}", "received_events_url": "https://api.github.com/users/alexeib/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9", "html_url": "https://github.com/facebookresearch/hydra/milestone/9", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9/labels", "id": 6007978, "node_id": "MDk6TWlsZXN0b25lNjAwNzk3OA==", "number": 9, "title": "1.0.4", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2020-10-19T16:15:14Z", "updated_at": "2020-12-01T08:40:50Z", "due_on": null, "closed_at": "2020-12-01T08:40:50Z"}, "comments": 4, "created_at": "2020-11-03T22:43:44Z", "updated_at": "2020-11-06T16:26:38Z", "closed_at": "2020-11-06T16:26:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "see title. \r\nVersion: 1.0.3\r\nexample:\r\n\r\nhydra_ex.py\r\n```\r\nimport hydra\r\n\r\nfrom dataclasses import dataclass, field\r\nfrom typing import Optional, List\r\nfrom hydra.core.config_store import ConfigStore\r\n\r\n@dataclass\r\nclass Config:\r\n    my_field: Optional[List[int]] = None\r\n    other_field: int = 5\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(name=\"hydra_ex\", node=Config)\r\n\r\n@hydra.main(config_path=\".\", config_name=\"hydra_ex\")\r\ndef main(cfg):\r\n    print(cfg)\r\n\r\nmain()\r\n```\r\n\r\nhydea_ex.yaml:\r\n```\r\n# @package _group_\r\nother_field: 42\r\n```\r\n\r\noutput:\r\n```\r\nCannot iterate a ListConfig object representing None\r\n\tfull_key: my_field\r\n\treference_type=Optional[List[int]]\r\n\tobject_type=list\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1117/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1117/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1102", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1102/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1102/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1102/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1102", "id": 732814897, "node_id": "MDU6SXNzdWU3MzI4MTQ4OTc=", "number": 1102, "title": "[Bug] Recursive default list + Package overrides", "user": {"login": "ppwwyyxx", "id": 1381301, "node_id": "MDQ6VXNlcjEzODEzMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1381301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppwwyyxx", "html_url": "https://github.com/ppwwyyxx", "followers_url": "https://api.github.com/users/ppwwyyxx/followers", "following_url": "https://api.github.com/users/ppwwyyxx/following{/other_user}", "gists_url": "https://api.github.com/users/ppwwyyxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppwwyyxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppwwyyxx/subscriptions", "organizations_url": "https://api.github.com/users/ppwwyyxx/orgs", "repos_url": "https://api.github.com/users/ppwwyyxx/repos", "events_url": "https://api.github.com/users/ppwwyyxx/events{/privacy}", "received_events_url": "https://api.github.com/users/ppwwyyxx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 2, "created_at": "2020-10-30T01:37:58Z", "updated_at": "2021-01-01T22:17:28Z", "closed_at": "2021-01-01T22:17:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nRecursive default List + Package overrides not working. A continuation of https://github.com/facebookresearch/hydra/issues/171#issuecomment-719106222\r\n\r\n\r\n## To reproduce\r\n\r\nConfigs:\r\n```\r\n# model/maskrcnn.yaml:\r\n# @package _group_\r\na: 1\r\nb: 2\r\n\r\n# model/maskrcnn2.yaml:\r\n# @package _group_\r\nb: 3\r\nc: 4\r\n\r\ndefaults:\r\n  - model/maskrcnn   # ??\r\n  - _self_\r\n\r\n# main.yaml:\r\ndefaults:\r\n  - model@model.submodule: maskrcnn2\r\n```\r\nCode:\r\n```\r\n@hydra.main(config_name=\"main\")\r\ndef my_app(cfg: DictConfig) -> None:\r\n    print(cfg)\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\nIt gives me:\r\n```\r\n{'model': {'a': 1, 'b': 2, 'submodule': {'b': 3, 'c': 4}}}\r\n```\r\n\r\n## Expected Behavior\r\nI expect to get an equivalent of\r\n```\r\nmodel:\r\n  submodule:\r\n    a: 1\r\n    b: 3\r\n    c: 4\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  master\r\n- **Python version** :  3.8.6", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1102/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1102/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1094", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1094/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1094/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1094/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1094", "id": 730898696, "node_id": "MDU6SXNzdWU3MzA4OTg2OTY=", "number": 1094, "title": "[Bug] Joblib launcher plugin doesn't properly convert some joblib arguments to integers", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9", "html_url": "https://github.com/facebookresearch/hydra/milestone/9", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9/labels", "id": 6007978, "node_id": "MDk6TWlsZXN0b25lNjAwNzk3OA==", "number": 9, "title": "1.0.4", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2020-10-19T16:15:14Z", "updated_at": "2020-12-01T08:40:50Z", "due_on": null, "closed_at": "2020-12-01T08:40:50Z"}, "comments": 8, "created_at": "2020-10-27T22:24:04Z", "updated_at": "2020-11-03T22:00:34Z", "closed_at": "2020-11-03T22:00:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nThe following `joblib.Parallel` arguments are currently provided as strings to joblib when they should be integers:\r\n* `pre_dispatch`\r\n* `batch_size`\r\n* `max_nbytes`\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [X] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```bash\r\nwget https://raw.githubusercontent.com/facebookresearch/hydra/master/examples/tutorials/basic/your_first_hydra_app/1_simple_cli/my_app.py\r\npython my_app.py hydra.launcher.batch_size=1 hydra/launcher=joblib -m\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n[2020-10-27 18:20:48,363][HYDRA] Joblib.Parallel(n_jobs=-1,backend=loky,prefer=processes,require=None,verbose=0,timeout=None,pre_dispatch=2*n_jobs,batch_size=1,temp_folder=None,max_nbytes=None,mmap_mode=r) is launching 1 jobs\r\n[2020-10-27 18:20:48,363][HYDRA] Launching jobs, sweep output dir : multirun/2020-10-27/18-20-48\r\n[2020-10-27 18:20:48,363][HYDRA]        #0 :\r\nTraceback (most recent call last):\r\n  File \"/Users/odelalleau/src/hydra/hydra/_internal/utils.py\", line 207, in run_and_report\r\n    return func()\r\n  File \"/Users/odelalleau/src/hydra/hydra/_internal/utils.py\", line 364, in <lambda>\r\n    lambda: hydra.multirun(\r\n  File \"/Users/odelalleau/src/hydra/hydra/_internal/hydra.py\", line 136, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/Users/odelalleau/src/hydra/hydra/_internal/core_plugins/basic_sweeper.py\", line 154, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/Users/odelalleau/src/hydra/plugins/hydra_joblib_launcher/hydra_plugins/hydra_joblib_launcher/joblib_launcher.py\", line 45, in launch\r\n    return _core.launch(\r\n  File \"/Users/odelalleau/src/hydra/plugins/hydra_joblib_launcher/hydra_plugins/hydra_joblib_launcher/_core.py\", line 89, in launch\r\n    runs = Parallel(**joblib_cfg)(\r\n  File \"/Users/odelalleau/.local/lib/python3.8/site-packages/joblib/parallel.py\", line 715, in __init__\r\n    raise ValueError(\r\nValueError: batch_size must be 'auto' or a positive integer, got: '1'\r\n```\r\n\r\n(with `max_nbytes` it also crashes due to the string issue, `pre_dispatch` actually runs but not sure what happens exactly since it's given as a string)\r\n\r\n## Expected Behavior\r\n\r\nRunning without error, providing appropriate integer arguments to `joblib.Parallel` when they should be integers (obviously there are situations where they should remain strings).\r\n\r\n## System information\r\n- **Hydra Version** :  master\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** : conda 4.8.5\r\n- **Operating system** : MacOS\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1094/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1094/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1090", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1090/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1090/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1090/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1090", "id": 728946376, "node_id": "MDU6SXNzdWU3Mjg5NDYzNzY=", "number": 1090, "title": "UnicodeDecodeError: 'charmap' codec can't decode byte 0x8d in position 1: character maps to <undefined>", "user": {"login": "arisliang", "id": 1115503, "node_id": "MDQ6VXNlcjExMTU1MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1115503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arisliang", "html_url": "https://github.com/arisliang", "followers_url": "https://api.github.com/users/arisliang/followers", "following_url": "https://api.github.com/users/arisliang/following{/other_user}", "gists_url": "https://api.github.com/users/arisliang/gists{/gist_id}", "starred_url": "https://api.github.com/users/arisliang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arisliang/subscriptions", "organizations_url": "https://api.github.com/users/arisliang/orgs", "repos_url": "https://api.github.com/users/arisliang/repos", "events_url": "https://api.github.com/users/arisliang/events{/privacy}", "received_events_url": "https://api.github.com/users/arisliang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9", "html_url": "https://github.com/facebookresearch/hydra/milestone/9", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9/labels", "id": 6007978, "node_id": "MDk6TWlsZXN0b25lNjAwNzk3OA==", "number": 9, "title": "1.0.4", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2020-10-19T16:15:14Z", "updated_at": "2020-12-01T08:40:50Z", "due_on": null, "closed_at": "2020-12-01T08:40:50Z"}, "comments": 11, "created_at": "2020-10-25T05:35:42Z", "updated_at": "2020-11-06T16:26:25Z", "closed_at": "2020-11-06T16:26:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nCodec error when yaml has some chinese characters\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nmain.py\r\n```\r\nimport hydra\r\nimport omegaconf\r\n\r\n\r\n@hydra.main(config_path='.', config_name='config')\r\ndef print_hi(cfg: omegaconf.DictConfig) -> None:\r\n    print(omegaconf.OmegaConf.to_yaml(cfg))\r\n\r\n\r\nif __name__ == '__main__':\r\n    print_hi()\r\n```\r\nconfig.yaml\r\n```\r\n\u5355: 1\r\n```\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 350, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\hydra.py\", line 104, in run\r\n    run_mode=RunMode.RUN,\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\hydra.py\", line 512, in compose_config\r\n    from_shell=from_shell,\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\config_loader_impl.py\", line 156, in load_configuration\r\n    from_shell=from_shell,\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\config_loader_impl.py\", line 262, in _load_configuration\r\n    run_mode=run_mode,\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\config_loader_impl.py\", line 805, in _merge_defaults_into_config\r\n    hydra_cfg = merge_defaults_list_into_config(hydra_cfg, user_list)\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\config_loader_impl.py\", line 793, in merge_defaults_list_into_config\r\n    package_override=default1.package,\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\config_loader_impl.py\", line 698, in _merge_config\r\n    package_override=package_override,\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\config_loader_impl.py\", line 592, in _load_config_impl\r\n    package_override=package_override,\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\config_repository.py\", line 48, in load_config\r\n    package_override=package_override,\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\site-packages\\hydra\\_internal\\core_plugins\\file_config_source.py\", line 33, in load_config\r\n    header_text = f.read(512)\r\n  File \"C:\\Users\\user\\anaconda3\\envs\\poolobs\\lib\\encodings\\cp1252.py\", line 23, in decode\r\n    return codecs.charmap_decode(input,self.errors,decoding_table)[0]\r\nUnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 117: character maps to <undefined>\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nRun without error, and print:\r\n```\r\n\u5355: 1\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.3\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.8.5\r\n- **Operating system** : Windows 7\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1090/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1090/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1083", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1083/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1083/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1083/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1083", "id": 725991215, "node_id": "MDU6SXNzdWU3MjU5OTEyMTU=", "number": 1083, "title": "Submitit plugin breaks when using structured configs", "user": {"login": "calebho", "id": 16418728, "node_id": "MDQ6VXNlcjE2NDE4NzI4", "avatar_url": "https://avatars.githubusercontent.com/u/16418728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebho", "html_url": "https://github.com/calebho", "followers_url": "https://api.github.com/users/calebho/followers", "following_url": "https://api.github.com/users/calebho/following{/other_user}", "gists_url": "https://api.github.com/users/calebho/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebho/subscriptions", "organizations_url": "https://api.github.com/users/calebho/orgs", "repos_url": "https://api.github.com/users/calebho/repos", "events_url": "https://api.github.com/users/calebho/events{/privacy}", "received_events_url": "https://api.github.com/users/calebho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2169716916, "node_id": "MDU6TGFiZWwyMTY5NzE2OTE2", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/plugin", "name": "plugin", "color": "e59e90", "default": false, "description": "Plugins realted issues"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 13, "created_at": "2020-10-20T22:35:28Z", "updated_at": "2020-10-22T17:07:03Z", "closed_at": "2020-10-22T17:07:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI get a pickling error when my main function exits when I use a structured config\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n```python\r\n# foo.py\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom dataclasses import dataclass\r\nfrom omegaconf import OmegaConf\r\n\r\n@dataclass\r\nclass Config:\r\n    x: int = 42\r\n\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(name=\"config\", node=Config)\r\n\r\n\r\n@hydra.main(config_name=\"config\")\r\ndef main(cfg: Config) -> None:\r\n    print(OmegaConf.to_yaml(cfg))\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n```yaml\r\n# config.yaml\r\ndefaults:\r\n    - hydra/launcher: submitit_local\r\n```\r\n\r\nRun:\r\n```\r\n$ python foo.py -m\r\n[2020-10-20 15:27:55,392][HYDRA] Submitit 'local' sweep output dir : multirun/2020-10-20/15-27-55\r\n[2020-10-20 15:27:55,393][HYDRA] \t#0 :\r\nTraceback (most recent call last):\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 358, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 136, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 154, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 150, in launch\r\n    return [j.results()[0] for j in jobs]\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 150, in <listcomp>\r\n    return [j.results()[0] for j in jobs]\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/submitit/core/core.py\", line 286, in results\r\n    outcome, result = self._get_outcome_and_result()\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/submitit/core/core.py\", line 366, in _get_outcome_and_result\r\n    f\"Job {self.job_id} (task: {self.task_id}) with path {self.paths.result_pickle}\\n\"\r\nsubmitit.core.utils.UncompletedJobError: Job 22319 (task: 0) with path /private/home/calebh/scratch/hydra-submitit-bug/multirun/2020-10-20/15-27-55/.submitit/22319/22319_0_result.pkl\r\nhas not produced any output (state: FINISHED)\r\nError stream produced:\r\n----------------------\r\nsubmitit ERROR (2020-10-20 15:27:55,943) - Could not dump error:\r\nCan't pickle <class '__main__.Config'>: attribute lookup Config on __main__ failed\r\n\r\nbecause of A temporary saved file already exists.\r\nsubmitit ERROR (2020-10-20 15:27:55,943) - Submitted job triggered an exception\r\nTraceback (most recent call last):\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/submitit/core/_submit.py\", line 11, in <module>\r\n    submitit_main()\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/submitit/core/submission.py\", line 65, in submitit_main\r\n    process_job(args.folder)\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/submitit/core/submission.py\", line 58, in process_job\r\n    raise error\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/submitit/core/submission.py\", line 49, in process_job\r\n    utils.pickle_dump((\"success\", result), tmppath)\r\n  File \"/private/home/calebh/miniconda3/envs/hydra-submitit-bug/lib/python3.7/site-packages/submitit/core/utils.py\", line 278, in pickle_dump\r\n    pickle.dump(obj, ofile, pickle.HIGHEST_PROTOCOL)\r\n_pickle.PicklingError: Can't pickle <class '__main__.Config'>: attribute lookup Config on __main__ failed\r\n```\r\n\r\n## Expected Behavior\r\nShould exit without throwing. Note that the body of `main` does execute properly as I am able to see the `print` output in the log, so I'm pretty certain this is happening after `main` returns.\r\n\r\n## System information\r\n- **Hydra Version** :\r\n    ```\r\n    hydra-core              1.0.3\r\n    hydra-submitit-launcher 1.0.0\r\n    ```\r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : Conda 4.7.10\r\n- **Operating system** : Ubuntu 18.04.3", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1083/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1083/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1074", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1074/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1074/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1074/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1074", "id": 724758984, "node_id": "MDU6SXNzdWU3MjQ3NTg5ODQ=", "number": 1074, "title": "[Bug] Cannot use overrides containing '@' character", "user": {"login": "pringshia", "id": 425059, "node_id": "MDQ6VXNlcjQyNTA1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/425059?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pringshia", "html_url": "https://github.com/pringshia", "followers_url": "https://api.github.com/users/pringshia/followers", "following_url": "https://api.github.com/users/pringshia/following{/other_user}", "gists_url": "https://api.github.com/users/pringshia/gists{/gist_id}", "starred_url": "https://api.github.com/users/pringshia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pringshia/subscriptions", "organizations_url": "https://api.github.com/users/pringshia/orgs", "repos_url": "https://api.github.com/users/pringshia/repos", "events_url": "https://api.github.com/users/pringshia/events{/privacy}", "received_events_url": "https://api.github.com/users/pringshia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9", "html_url": "https://github.com/facebookresearch/hydra/milestone/9", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9/labels", "id": 6007978, "node_id": "MDk6TWlsZXN0b25lNjAwNzk3OA==", "number": 9, "title": "1.0.4", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2020-10-19T16:15:14Z", "updated_at": "2020-12-01T08:40:50Z", "due_on": null, "closed_at": "2020-12-01T08:40:50Z"}, "comments": 1, "created_at": "2020-10-19T16:00:04Z", "updated_at": "2020-10-19T18:04:46Z", "closed_at": "2020-10-19T18:04:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI am unable to override a value that contains the '@' character, e.g. in the case of providing email addresses\r\n\r\n## To reproduce\r\n\r\nBorrowed from #962:\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```\r\n# test.py\r\n\r\nimport hydra\r\n\r\n@hydra.main()\r\ndef foo(*args, **kargs):\r\n    pass\r\n\r\nfoo()\r\n```\r\n\r\n```\r\n$ python test.py +bar=example@example.com\r\n```\r\n\r\n** Stack trace/error message **\r\n\r\n```\r\nLexerNoViableAltException: +bar=example@example.com\r\n                                       ^\r\nSee https://hydra.cc/docs/next/advanced/override_grammar/basic for details\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\n\r\nNo error and bar's value should be set to \"example@example.com\".\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0\r\n- **Python version** : 3.7.4\r\n- **Virtual environment type and version** :\r\n- **Operating system** : \r\n\r\n## Additional context\r\n\r\nSimilar to #962\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1074/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1074/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1071", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1071/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1071/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1071/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1071", "id": 723529521, "node_id": "MDU6SXNzdWU3MjM1Mjk1MjE=", "number": 1071, "title": "[Bug][Configen] Generating from untyped signatures results in `str` default values without quotes", "user": {"login": "romesco", "id": 14840767, "node_id": "MDQ6VXNlcjE0ODQwNzY3", "avatar_url": "https://avatars.githubusercontent.com/u/14840767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/romesco", "html_url": "https://github.com/romesco", "followers_url": "https://api.github.com/users/romesco/followers", "following_url": "https://api.github.com/users/romesco/following{/other_user}", "gists_url": "https://api.github.com/users/romesco/gists{/gist_id}", "starred_url": "https://api.github.com/users/romesco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/romesco/subscriptions", "organizations_url": "https://api.github.com/users/romesco/orgs", "repos_url": "https://api.github.com/users/romesco/repos", "events_url": "https://api.github.com/users/romesco/events{/privacy}", "received_events_url": "https://api.github.com/users/romesco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2349519660, "node_id": "MDU6TGFiZWwyMzQ5NTE5NjYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/configen", "name": "configen", "color": "5d9fdd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-10-16T21:02:16Z", "updated_at": "2020-10-20T03:58:06Z", "closed_at": "2020-10-20T03:58:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nConfigen will create fields typed as `Any` if there is no type in the signature, but if there's a default value which is a `str` type, it will not include it in quotes. Here's an example: https://github.com/pytorch/hydra-torch/blob/master/config/torch/optim/lr_scheduler.py#L74\r\n\r\n## To reproduce\r\n```\r\ngit clone https://github.com/pytorch/hydra-torch/\r\nconfigen --config-dir=conf\r\n```\r\nCheck output `/config/torch/optim/lr_scheduler.py` for example @\r\nhttps://github.com/pytorch/hydra-torch/blob/master/config/torch/optim/lr_scheduler.py#L74\r\n\r\n## System information\r\n- **Hydra/configen Version** : https://github.com/facebookresearch/hydra/tree/1.1_dev_branch\r\n- **Python version** : 3.8.6\r\n- **Virtual environment type and version** : pyenv-virtualenv 1.2.20\r\n- **Operating system** : Ubuntu 18.04\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1071/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1059", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1059/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1059/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1059/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1059", "id": 721538550, "node_id": "MDU6SXNzdWU3MjE1Mzg1NTA=", "number": 1059, "title": "[Bug] os.environ[\"USER\"] is set unconditionally in hydra/hydra/test_utils/test_utils.py", "user": {"login": "ajw1980", "id": 1461301, "node_id": "MDQ6VXNlcjE0NjEzMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1461301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajw1980", "html_url": "https://github.com/ajw1980", "followers_url": "https://api.github.com/users/ajw1980/followers", "following_url": "https://api.github.com/users/ajw1980/following{/other_user}", "gists_url": "https://api.github.com/users/ajw1980/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajw1980/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajw1980/subscriptions", "organizations_url": "https://api.github.com/users/ajw1980/orgs", "repos_url": "https://api.github.com/users/ajw1980/repos", "events_url": "https://api.github.com/users/ajw1980/events{/privacy}", "received_events_url": "https://api.github.com/users/ajw1980/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9", "html_url": "https://github.com/facebookresearch/hydra/milestone/9", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9/labels", "id": 6007978, "node_id": "MDk6TWlsZXN0b25lNjAwNzk3OA==", "number": 9, "title": "1.0.4", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2020-10-19T16:15:14Z", "updated_at": "2020-12-01T08:40:50Z", "due_on": null, "closed_at": "2020-12-01T08:40:50Z"}, "comments": 5, "created_at": "2020-10-14T15:01:04Z", "updated_at": "2020-10-19T16:17:08Z", "closed_at": "2020-10-15T16:55:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "Since os.environ[\"USER\"] is set and hydra-core installs a pytest plugin any other pytest tests that use the $USER environment variable will get overridden to use \"test_user\" as the user. I think this should probably be a conditional check or something. We had a test start failing that was using $USER and it took some time to figure out why that was being set to test_user.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1059/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1059/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1053", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1053/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1053/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1053/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1053", "id": 719128166, "node_id": "MDU6SXNzdWU3MTkxMjgxNjY=", "number": 1053, "title": "[Bug] logging error on shutdown when using PL and Wandb logger", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9", "html_url": "https://github.com/facebookresearch/hydra/milestone/9", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/9/labels", "id": 6007978, "node_id": "MDk6TWlsZXN0b25lNjAwNzk3OA==", "number": 9, "title": "1.0.4", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2020-10-19T16:15:14Z", "updated_at": "2020-12-01T08:40:50Z", "due_on": null, "closed_at": "2020-12-01T08:40:50Z"}, "comments": 6, "created_at": "2020-10-12T07:14:52Z", "updated_at": "2020-11-16T20:53:36Z", "closed_at": "2020-11-16T20:53:36Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Repro [here](https://github.com/tadejsv/wandb-log-bug).\r\n\r\nOnce fixed backport to 1.0.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1053/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1051", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1051/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1051/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1051/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1051", "id": 718779164, "node_id": "MDU6SXNzdWU3MTg3NzkxNjQ=", "number": 1051, "title": "[Bug]", "user": {"login": "KamWithK", "id": 51506271, "node_id": "MDQ6VXNlcjUxNTA2Mjcx", "avatar_url": "https://avatars.githubusercontent.com/u/51506271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KamWithK", "html_url": "https://github.com/KamWithK", "followers_url": "https://api.github.com/users/KamWithK/followers", "following_url": "https://api.github.com/users/KamWithK/following{/other_user}", "gists_url": "https://api.github.com/users/KamWithK/gists{/gist_id}", "starred_url": "https://api.github.com/users/KamWithK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KamWithK/subscriptions", "organizations_url": "https://api.github.com/users/KamWithK/orgs", "repos_url": "https://api.github.com/users/KamWithK/repos", "events_url": "https://api.github.com/users/KamWithK/events{/privacy}", "received_events_url": "https://api.github.com/users/KamWithK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-10-11T07:32:25Z", "updated_at": "2020-10-11T08:16:37Z", "closed_at": "2020-10-11T07:36:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nCan't use variable interpolation when using nested config.\r\n\r\n## To reproduce\r\nCreate and load the following config:\r\n```yaml\r\nmode: \"2d\"\r\ndefaults:\r\n       - modelling: ${mode}\r\n```\r\nThis complains that `str interpolation key 'mode' not found`, even though the following does work fine:\r\n```\r\n       - ${mode}\r\n```\r\n\r\nI believe this is because of the `modelling` package, but how do I actually reference that `mode` parameter then?\r\n\r\n## Expected Behavior\r\nShould reference the config file \"2d\" (because it's the value in `mode`)...\r\n\r\n## System information\r\n- **Hydra Version** : 1.0.3  \r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda\r\n- **Operating system** : WSL running Ubuntu\r\n\r\n## Additional context\r\nI've also tried to create a second config file within the modelling directory and then interpolate like this `${defaults.mode}`, but it complains about mode not being an int.\r\nIf I then try `${defaults.0.mode}`, it also won't work (can't find it just like for `mode` by itself).\r\n\r\nAny help will be greatly appreciated!!!\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1051/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1051/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1045", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1045/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1045/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1045/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1045", "id": 717981041, "node_id": "MDU6SXNzdWU3MTc5ODEwNDE=", "number": 1045, "title": "[Bug] tools/configen/README.md refers to configen.samples.user, but configen.samples.user is not a package", "user": {"login": "EspenHa", "id": 8143383, "node_id": "MDQ6VXNlcjgxNDMzODM=", "avatar_url": "https://avatars.githubusercontent.com/u/8143383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EspenHa", "html_url": "https://github.com/EspenHa", "followers_url": "https://api.github.com/users/EspenHa/followers", "following_url": "https://api.github.com/users/EspenHa/following{/other_user}", "gists_url": "https://api.github.com/users/EspenHa/gists{/gist_id}", "starred_url": "https://api.github.com/users/EspenHa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EspenHa/subscriptions", "organizations_url": "https://api.github.com/users/EspenHa/orgs", "repos_url": "https://api.github.com/users/EspenHa/repos", "events_url": "https://api.github.com/users/EspenHa/events{/privacy}", "received_events_url": "https://api.github.com/users/EspenHa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2349519660, "node_id": "MDU6TGFiZWwyMzQ5NTE5NjYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/configen", "name": "configen", "color": "5d9fdd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-10-09T09:03:30Z", "updated_at": "2021-03-08T16:35:04Z", "closed_at": "2021-03-08T16:35:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Like the title says. Instead of `configen.samples.user` it should refer to `configen.samples.my_module`.\r\nThis mistake is also present in `tools/configen/configen/templates/sample_config.yaml`\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1045/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1045/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1038", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1038/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1038/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1038/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1038", "id": 715871559, "node_id": "MDU6SXNzdWU3MTU4NzE1NTk=", "number": 1038, "title": "[Bug] OmegaConf.save doesn't seem to be interpolated a value", "user": {"login": "tchaton", "id": 12861981, "node_id": "MDQ6VXNlcjEyODYxOTgx", "avatar_url": "https://avatars.githubusercontent.com/u/12861981?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tchaton", "html_url": "https://github.com/tchaton", "followers_url": "https://api.github.com/users/tchaton/followers", "following_url": "https://api.github.com/users/tchaton/following{/other_user}", "gists_url": "https://api.github.com/users/tchaton/gists{/gist_id}", "starred_url": "https://api.github.com/users/tchaton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tchaton/subscriptions", "organizations_url": "https://api.github.com/users/tchaton/orgs", "repos_url": "https://api.github.com/users/tchaton/repos", "events_url": "https://api.github.com/users/tchaton/events{/privacy}", "received_events_url": "https://api.github.com/users/tchaton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-10-06T17:16:40Z", "updated_at": "2020-10-06T17:46:24Z", "closed_at": "2020-10-06T17:35:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nI was using Pytorch Lightning and OmegaConf with hydra generated configuration. And Omegaconf fails to save the hparams from`LightningModule` with OmegaConf\r\n\r\nThe exact line is there: https://github.com/PyTorchLightning/pytorch-lightning/blob/master/pytorch_lightning/core/saving.py#L372\r\n\r\nI am not sure why yet. I can access correctly num_classes in debugger, but OmegaConf.save raise a ConfigKeyError\r\n\r\n```\r\n(Pdb) hparams[\"criterion\"].params.num_classes\r\n90\r\n(Pdb) hparams\r\n{'name': 'efficientdet-d0', 'compound_coef': 0, 'backbone': 'efficientnet-b0', 'img_size': [512, 64], 'r_input': 512, 'w_bifpn': 64, 'd_bifpn': 3, 'd_class': 3, 'min_level': 3, 'max_level': 7, 'num_levels': '7 - 3 + 1', 'params': '3.9M', 'num_examples_per_epoch': 117266, 'criterion': {'_target_': 'src.cv_obj_det.utils.tools.DetectionLoss', 'params': {'alpha': 0.25, 'gamma': 1.5, 'delta': 0.1, 'box_loss_weight': 50, 'num_classes': '${dataset.params.num_classes}'}}, 'optimizer': {'_target_': 'torch.optim.SGD', 'params': {'lr': 0.04, 'weight_decay': 4e-05, 'momentum': 0.9}}, 'aspect_ratios': [[1.0, 1.0], [1.4, 0.7], [0.7, 1.4]], 'num_scales': 3, 'anchor_scale': 4.0, 'num_anchors': 9, 'num_classes': 90}\r\n(Pdb) OmegaConf.save(hparams, config_yaml, resolve=True)\r\n*** omegaconf.errors.ConfigKeyError: str interpolation key 'dataset.params.num_classes' not found\r\n(Pdb) OmegaConf.save(OmegaConf.create(hparams), config_yaml, resolve=True)\r\n*** omegaconf.errors.ConfigKeyError: str interpolation key 'dataset.params.num_classes' not found\r\n```\r\n\r\n```\r\n# Model is instantiated this way\r\nmodel = hydra.utils.instantiate(cfg.model, **data_module.hyper_parameters)\r\n\r\nclass EfficientDetModel(pl.LightningModule):\r\n    def __init__(self, *args, **kwargs):\r\n        super().__init__()\r\n\r\n       # hparams are created there as list of all kwargs and args\r\n        self.save_hyperparameters()\r\n```\r\n\r\nI am investigating but any guidance would be appreciated :)\r\n\r\nWorks fine if I do\r\n\r\n```\r\nclass EfficientDetModel(pl.LightningModule):\r\n    def __init__(self, *args, **kwargs):\r\n        super().__init__()\r\n\r\n        kwargs[\"criterion\"].params.num_classes = kwargs[\"criterion\"].params.num_classes\r\n\r\n        self.save_hyperparameters()\r\n```\r\n\r\n## Checklist\r\n- [ ] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n** Stack trace/error message **\r\n```\r\n// Paste the bad output here!\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  \r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1038/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1038/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1018", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1018/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1018/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1018/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1018", "id": 710381297, "node_id": "MDU6SXNzdWU3MTAzODEyOTc=", "number": 1018, "title": "[Bug] \"hydra/job_logging: disabled\" disables all existing loggers", "user": {"login": "Vozf", "id": 22998537, "node_id": "MDQ6VXNlcjIyOTk4NTM3", "avatar_url": "https://avatars.githubusercontent.com/u/22998537?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vozf", "html_url": "https://github.com/Vozf", "followers_url": "https://api.github.com/users/Vozf/followers", "following_url": "https://api.github.com/users/Vozf/following{/other_user}", "gists_url": "https://api.github.com/users/Vozf/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vozf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vozf/subscriptions", "organizations_url": "https://api.github.com/users/Vozf/orgs", "repos_url": "https://api.github.com/users/Vozf/repos", "events_url": "https://api.github.com/users/Vozf/events{/privacy}", "received_events_url": "https://api.github.com/users/Vozf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-09-28T15:45:33Z", "updated_at": "2020-09-29T08:41:28Z", "closed_at": "2020-09-28T16:41:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "When \"hydra/job_logging\": \"disabled\" all existing non hydra loggers are also disabled. This is unexpected behavior. When setting this flag I expect to disable only hydra logging features not disable all the loggers in program", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1018/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1018/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1015", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1015/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1015/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1015/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1015", "id": 708762414, "node_id": "MDU6SXNzdWU3MDg3NjI0MTQ=", "number": 1015, "title": "[Bug] speed regression when using ListConfig in place of tuple when configuring Adam with instantiate", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 1, "created_at": "2020-09-25T08:46:11Z", "updated_at": "2020-10-02T01:35:06Z", "closed_at": "2020-10-02T01:35:06Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "#1011 reports performance regression in Adam when using instantiate.\r\nThe root cause appears to be that ListConfig is used to configure the betas where tuple or list would be more performant.\r\n\r\nAdam is accessing the betas twice per layer during the optimization, which - in some scenarios - is enough to cause a speed regression.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1015/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1015/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1012", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1012/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1012/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1012/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1012", "id": 708157385, "node_id": "MDU6SXNzdWU3MDgxNTczODU=", "number": 1012, "title": "[Bug] Duplicate logging", "user": {"login": "Vozf", "id": 22998537, "node_id": "MDQ6VXNlcjIyOTk4NTM3", "avatar_url": "https://avatars.githubusercontent.com/u/22998537?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vozf", "html_url": "https://github.com/Vozf", "followers_url": "https://api.github.com/users/Vozf/followers", "following_url": "https://api.github.com/users/Vozf/following{/other_user}", "gists_url": "https://api.github.com/users/Vozf/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vozf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vozf/subscriptions", "organizations_url": "https://api.github.com/users/Vozf/orgs", "repos_url": "https://api.github.com/users/Vozf/repos", "events_url": "https://api.github.com/users/Vozf/events{/privacy}", "received_events_url": "https://api.github.com/users/Vozf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471566, "node_id": "MDU6TGFiZWwxNDAzNDcxNTY2", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/help%20wanted", "name": "help wanted", "color": "008672", "default": true, "description": "Community help is wanted"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2020-09-24T13:09:25Z", "updated_at": "2021-03-25T20:42:54Z", "closed_at": "2021-01-11T07:48:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI am using pytorch lightning with hydra and output from pytorch-lightning is duplicated by hydra\r\nHere is an example \r\n```\r\nCometLogger will be initialized in online mode\r\n[2020-09-24 16:04:43,389][lightning][INFO] - CometLogger will be initialized in online mode\r\nGPU available: True, used: True\r\n[2020-09-24 16:04:43,441][lightning][INFO] - GPU available: True, used: True\r\nTPU available: False, using: 0 TPU cores\r\n[2020-09-24 16:04:43,442][lightning][INFO] - TPU available: False, using: 0 TPU cores\r\nCUDA_VISIBLE_DEVICES: [2]\r\n[2020-09-24 16:04:43,442][lightning][INFO] - CUDA_VISIBLE_DEVICES: [2]\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1012/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1011", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1011/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1011/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1011/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1011", "id": 708048136, "node_id": "MDU6SXNzdWU3MDgwNDgxMzY=", "number": 1011, "title": "[Bug] Structured config for torch optimizer", "user": {"login": "Vozf", "id": 22998537, "node_id": "MDQ6VXNlcjIyOTk4NTM3", "avatar_url": "https://avatars.githubusercontent.com/u/22998537?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vozf", "html_url": "https://github.com/Vozf", "followers_url": "https://api.github.com/users/Vozf/followers", "following_url": "https://api.github.com/users/Vozf/following{/other_user}", "gists_url": "https://api.github.com/users/Vozf/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vozf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vozf/subscriptions", "organizations_url": "https://api.github.com/users/Vozf/orgs", "repos_url": "https://api.github.com/users/Vozf/repos", "events_url": "https://api.github.com/users/Vozf/events{/privacy}", "received_events_url": "https://api.github.com/users/Vozf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 11, "created_at": "2020-09-24T10:22:57Z", "updated_at": "2020-09-25T08:42:10Z", "closed_at": "2020-09-25T08:42:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI am using structured config for instantiating torch optimizer\r\n```\r\n@dataclass\r\nclass AdamConfig(OptimizerConfig):\r\n    _target_: str = \"torch.optim.Adam\"\r\n    lr: float = 0.001\r\n    betas: tuple = (0.9, 0.999)\r\n    eps: float = 1e-08\r\n    weight_decay: float = 0\r\n```\r\nLater I init the optimizer with \r\n```\r\noptimizer = instantiate(self.cfg.optimizer, self.model.parameters())\r\n```\r\nAfter reading this config I get wrong type for `betas` which should be tuple(or at least list)\r\n```\r\n>>> type(self.cfg.optimizer.betas)\r\n<class 'omegaconf.listconfig.ListConfig'>\r\n```\r\nThis leads to major performance degradation(2.25 it\\s for ListConfig vs 2.45 it\\s for normal adam initialization on my task)\r\nto recreate it you can avoid all the config stuff and just use \r\n```\r\nfrom omegaconf import ListConfig\r\n\r\ntorch.optim.Adam(\r\n            self.model.parameters(),\r\n            lr=0.001,\r\n            # betas=ListConfig([0.9, 0.999]),\r\n            betas=[0.9, 0.999],\r\n            eps=1e-08,\r\n            weight_decay=0.0,\r\n        )\r\n```\r\nWith ListConfig optimizer degrades performance as I mentioned.\r\nThis way ListConfig shouldn't be used when initializing object\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1011/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1005", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1005/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1005/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1005/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1005", "id": 706541740, "node_id": "MDU6SXNzdWU3MDY1NDE3NDA=", "number": 1005, "title": "logging not working in  Process Pool", "user": {"login": "Chizkiyahu", "id": 37312901, "node_id": "MDQ6VXNlcjM3MzEyOTAx", "avatar_url": "https://avatars.githubusercontent.com/u/37312901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chizkiyahu", "html_url": "https://github.com/Chizkiyahu", "followers_url": "https://api.github.com/users/Chizkiyahu/followers", "following_url": "https://api.github.com/users/Chizkiyahu/following{/other_user}", "gists_url": "https://api.github.com/users/Chizkiyahu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chizkiyahu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chizkiyahu/subscriptions", "organizations_url": "https://api.github.com/users/Chizkiyahu/orgs", "repos_url": "https://api.github.com/users/Chizkiyahu/repos", "events_url": "https://api.github.com/users/Chizkiyahu/events{/privacy}", "received_events_url": "https://api.github.com/users/Chizkiyahu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5", "html_url": "https://github.com/facebookresearch/hydra/milestone/5", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/5/labels", "id": 5061304, "node_id": "MDk6TWlsZXN0b25lNTA2MTMwNA==", "number": 5, "title": "Hydra 1.1.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 94, "state": "closed", "created_at": "2020-01-31T18:56:07Z", "updated_at": "2021-06-11T16:45:48Z", "due_on": null, "closed_at": "2021-06-11T16:45:48Z"}, "comments": 10, "created_at": "2020-09-22T16:49:52Z", "updated_at": "2021-02-18T19:08:50Z", "closed_at": "2021-02-18T19:08:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nlogging not working  in the following cases\r\n\r\n1. `multiprocessing.pool.Pool`\r\n2. `concurrent.futures.ProcessPoolExecutor`\r\n\r\nand is work ok in\r\n\r\n1. `multiprocessing.pool.ThreadPool`\r\n2. `multiprocessing.Process`\r\n3. `concurrent.futures.ThreadPoolExecutor`\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n **Minimal Code/Config snippet to reproduce** \r\n```\r\nimport hydra\r\nfrom omegaconf import DictConfig, OmegaConf\r\nimport logging\r\n\r\nimport multiprocessing\r\nfrom multiprocessing.pool import Pool, ThreadPool\r\nfrom concurrent.futures import ProcessPoolExecutor, ThreadPoolExecutor\r\n\r\nlog = logging.getLogger(__name__)\r\n\r\ndef w_l(i):\r\n    log.info(i)\r\n    print(i)\r\n\r\n@hydra.main()\r\ndef my_app(cfg : DictConfig) -> None:\r\n    with ThreadPool(processes=4) as pool:\r\n        pool.map(w_l,[\"ThreadPool\"])\r\n\r\n    with Pool(processes=4) as pool:\r\n        pool.map(w_l,['Pool'])\r\n\r\n    with ProcessPoolExecutor(max_workers=4) as executor:\r\n        executor.map(w_l,['ProcessPoolExecutor'])\r\n\r\n    with ThreadPoolExecutor(max_workers=4) as executor:\r\n        executor.map(w_l,['ThreadPoolExecutor'])\r\n\r\n    multiprocessing.Process(target=w_l,args=[\"multiprocessing.Process\"]).run()\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\n\r\n **Stack trace/error message** \r\n```\r\n[2020-09-22 19:42:28,821][__main__][INFO] - ThreadPool\r\nThreadPool\r\nPool\r\nProcessPoolExecutor\r\n[2020-09-22 19:42:29,427][__main__][INFO] - ThreadPoolExecutor\r\nThreadPoolExecutor\r\n[2020-09-22 19:42:29,427][__main__][INFO] - multiprocessing.Process\r\nmultiprocessing.Process\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nI Expected to get 5 log row and 5 print row and i got only 3 log row because `Pool` and  `ProcessPoolExecutor` not working\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.2\r\n- **Python version** : 3.8.2\r\n- **Virtual environment type and version** : virtualenv\r\n- **Operating system** : mac os 10.15.6\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1005/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1005/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1003", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1003/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1003/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1003/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1003", "id": 706344789, "node_id": "MDU6SXNzdWU3MDYzNDQ3ODk=", "number": 1003, "title": "[Bug] ", "user": {"login": "usasho", "id": 42601116, "node_id": "MDQ6VXNlcjQyNjAxMTE2", "avatar_url": "https://avatars.githubusercontent.com/u/42601116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/usasho", "html_url": "https://github.com/usasho", "followers_url": "https://api.github.com/users/usasho/followers", "following_url": "https://api.github.com/users/usasho/following{/other_user}", "gists_url": "https://api.github.com/users/usasho/gists{/gist_id}", "starred_url": "https://api.github.com/users/usasho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/usasho/subscriptions", "organizations_url": "https://api.github.com/users/usasho/orgs", "repos_url": "https://api.github.com/users/usasho/repos", "events_url": "https://api.github.com/users/usasho/events{/privacy}", "received_events_url": "https://api.github.com/users/usasho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-09-22T12:35:18Z", "updated_at": "2020-09-22T16:35:56Z", "closed_at": "2020-09-22T16:35:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "What is this\r\nAn error has occurred and it cannot be executed at all.\r\n\r\n File \"/usr/local/lib/python3.6/dist-packages/hydra/_internal/utils.py\", line 207, in run_and_report\r\n    return func ()\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra/_internal/utils.py\", line 359, in <lambda>\r\n    overrides = args.overrides,\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra/_internal/hydra.py\", line 104, in run\r\n    run_mode = RunMode.RUN,\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra/_internal/hydra.py\", line 512, in compose_config\r\n    from_shell = from_shell,\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra/_internal/config_loader_impl.py\", line 153, in load_configuration\r\n    from_shell = from_shell,\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra/_internal/config_loader_impl.py\", line 219, in _load_configuration\r\n    cfg_filename = config_name, record_load = False\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra/_internal/config_loader_impl.py\", line 815, in _load_primary_config\r\n    record_load = record_load,\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra/_internal/config_loader_impl.py\", line 584, in _load_config_impl\r\n    package_override = package_override,\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra/_internal/config_repository.py\", line 48, in load_config\r\n    package_override = package_override,\r\n  File \"/usr/local/lib/python3.6/dist-packages/hydra/_internal/core_plugins/importlib_resources_config_source.py\", line 42, in load_config\r\n    f.seek (0)\r\nio.UnsupportedOperation: underlying stream is not seekable", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1003/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1003/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1001", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1001/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1001/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1001/events", "html_url": "https://github.com/facebookresearch/hydra/issues/1001", "id": 706301449, "node_id": "MDU6SXNzdWU3MDYzMDE0NDk=", "number": 1001, "title": "[Bug] String interpolation in instantiate is broken in hydra 1.0.2", "user": {"login": "cmnrd", "id": 6460123, "node_id": "MDQ6VXNlcjY0NjAxMjM=", "avatar_url": "https://avatars.githubusercontent.com/u/6460123?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmnrd", "html_url": "https://github.com/cmnrd", "followers_url": "https://api.github.com/users/cmnrd/followers", "following_url": "https://api.github.com/users/cmnrd/following{/other_user}", "gists_url": "https://api.github.com/users/cmnrd/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmnrd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmnrd/subscriptions", "organizations_url": "https://api.github.com/users/cmnrd/orgs", "repos_url": "https://api.github.com/users/cmnrd/repos", "events_url": "https://api.github.com/users/cmnrd/events{/privacy}", "received_events_url": "https://api.github.com/users/cmnrd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/8", "html_url": "https://github.com/facebookresearch/hydra/milestone/8", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/8/labels", "id": 5902883, "node_id": "MDk6TWlsZXN0b25lNTkwMjg4Mw==", "number": 8, "title": "1.0.3", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2020-09-22T06:11:19Z", "updated_at": "2020-09-26T07:17:58Z", "due_on": null, "closed_at": "2020-09-26T07:17:58Z"}, "comments": 6, "created_at": "2020-09-22T11:31:10Z", "updated_at": "2020-09-23T10:26:59Z", "closed_at": "2020-09-22T18:19:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nString interpolation does not work when the config node is used in instantiate().\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\ndemo.py:\r\n```\r\nimport hydra\r\n\r\nclass Test:\r\n\r\n    def __init__(self, string):\r\n        print(\"init: \" + string)\r\n\r\n@hydra.main(config_path='conf', config_name='test')\r\ndef main(cfg):\r\n    print(\"main: \" + cfg['test']['string'])\r\n    hydra.utils.instantiate(cfg['test'])\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nconf/test.yaml:\r\n```\r\n# @package _global_\r\nfoo: 42\r\ntest:\r\n  _target_: demo.Test\r\n  string: \"21 * 2 = ${foo}\"\r\nconf/test.yaml (END)\r\n```\r\n\r\n** Stack trace/error message **\r\n\r\nNo error is produced, but the output printed by the code above is erroneous when using hydra 1.0.2 or the latest master.\r\n```\r\nmain: 21 * 2 = 42\r\ninit: 21 * 2 = ${foo}\r\n```\r\nWhen referencing `test.string` directly from the python code, `foo` gets resolved correctly to `42` (first line). However, when passing the interpolated string via `instantiate()` to the class `Test`, `${foo}` does not get resolved (second line).\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nThe expected output is:\r\n```\r\nmain: 21 * 2 = 42\r\ninit: 21 * 2 = 42\r\n```\r\nThis output was produced with hydra 1.0.1.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.2\r\n- **Python version** : 3.8.5\r\n- **Virtual environment type and version** :  virtualenv 20.0.23\r\n- **Operating system** : Linux (Manjaro)\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/1001/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/1001/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/999", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/999/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/999/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/999/events", "html_url": "https://github.com/facebookresearch/hydra/issues/999", "id": 706090871, "node_id": "MDU6SXNzdWU3MDYwOTA4NzE=", "number": 999, "title": "multirun is inconsistently misinterpreting cmdline values for float as str, but only for specific (and arbitrary) range of floats [Bug]", "user": {"login": "JacobARose", "id": 31635761, "node_id": "MDQ6VXNlcjMxNjM1NzYx", "avatar_url": "https://avatars.githubusercontent.com/u/31635761?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JacobARose", "html_url": "https://github.com/JacobARose", "followers_url": "https://api.github.com/users/JacobARose/followers", "following_url": "https://api.github.com/users/JacobARose/following{/other_user}", "gists_url": "https://api.github.com/users/JacobARose/gists{/gist_id}", "starred_url": "https://api.github.com/users/JacobARose/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JacobARose/subscriptions", "organizations_url": "https://api.github.com/users/JacobARose/orgs", "repos_url": "https://api.github.com/users/JacobARose/repos", "events_url": "https://api.github.com/users/JacobARose/events{/privacy}", "received_events_url": "https://api.github.com/users/JacobARose/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/8", "html_url": "https://github.com/facebookresearch/hydra/milestone/8", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/8/labels", "id": 5902883, "node_id": "MDk6TWlsZXN0b25lNTkwMjg4Mw==", "number": 8, "title": "1.0.3", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 2, "state": "closed", "created_at": "2020-09-22T06:11:19Z", "updated_at": "2020-09-26T07:17:58Z", "due_on": null, "closed_at": "2020-09-26T07:17:58Z"}, "comments": 6, "created_at": "2020-09-22T05:37:01Z", "updated_at": "2020-09-23T17:18:37Z", "closed_at": "2020-09-22T07:33:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThis bug just cost me about a day of frustration looking deep into tensorflow's source code before I realized it disappeared immediately when I stopped using the '--multirun' cmdline flag.\r\n\r\nBasically, it seems like Hydra is interpreting numerical values passed via cmdline as a different type depending on the numerical value, in a way that does not raise any explicit warnings and seems arbitrary enough that I can't imagine an actual reason for its inclusion. Thus, I believe it's a bug.\r\n\r\nTldr; \r\n1. --multirun is leading to inconsistent parsing of cmdline floating point overridden parameters that differs from when the user passes the same values without multirun.\r\n2. The parser seems to have a preference for interpreting any floats <=1e-5 and >=1e-9 as string type, regardless of any possible user specification via formatting.\r\n\r\n## Checklist\r\n- [X] I checked on the latest version of Hydra\r\n- [X] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\ndemo.py\r\n```\r\nfrom omegaconf import DictConfig\r\nfrom omegaconf import OmegaConf\r\nimport hydra\r\n    \r\n@hydra.main(config_path='configs', config_name='config')\r\ndef main(config):\r\n\r\n    print('='*40)\r\n    print(f'lr={config.model.lr}, type(config.model.lr)={type(config.model.lr)}')\r\n    print(f'l2={config.model.regularization.l2}, type(config.model.regularization.l2)={type(config.model.regularization.l2)}')\r\n    \r\n    print('-'*30)\r\n    for k,v in config.model.items():\r\n        if type(v)==DictConfig:\r\n            for k0,v0 in v.items():\r\n                print(k0, v0, type(v0))\r\n        else:\r\n            print(k, v, type(v))\r\n          \r\n    print('='*40)\r\n    \r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\nThe directory containing demo.py also contains\r\n\r\nconfigs/config.yaml\r\n```\r\n# @package _global_\r\n\r\nmodel:\r\n    lr: 1.0e-5\r\n    lr_momentum: 0.0\r\n    regularization:\r\n        l2: 4.0e-10\r\n    coefficients:\r\n        c1: 0.01\r\n```\r\n---------------------------------------------------------------------------------\r\nWhen I call the script using the command:\r\n`\r\npython demo.py --multirun model.regularization.l2=1e-3 model.lr=1.0e-5 model.lr_momentum=1e-5,1e-6,1e-7,1e-8,1e-9,1e-10\r\n`\r\nI get the output:\r\n\r\n** Stack trace/error message **\r\n```\r\n[2020-09-22 00:49:10,280][HYDRA] Launching 6 jobs locally\r\n[2020-09-22 00:49:10,280][HYDRA]        #0 : model.regularization.l2=0.001 model.lr=1e-05 model.lr_momentum=1e-05\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'str'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'str'>\r\nlr_momentum 1e-05 <class 'str'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n[2020-09-22 00:49:10,617][HYDRA]        #1 : model.regularization.l2=0.001 model.lr=1e-05 model.lr_momentum=1e-06\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'str'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'str'>\r\nlr_momentum 1e-06 <class 'str'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n[2020-09-22 00:49:10,950][HYDRA]        #2 : model.regularization.l2=0.001 model.lr=1e-05 model.lr_momentum=1e-07\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'str'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'str'>\r\nlr_momentum 1e-07 <class 'str'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n[2020-09-22 00:49:11,283][HYDRA]        #3 : model.regularization.l2=0.001 model.lr=1e-05 model.lr_momentum=1e-08\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'str'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'str'>\r\nlr_momentum 1e-08 <class 'str'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n[2020-09-22 00:49:11,617][HYDRA]        #4 : model.regularization.l2=0.001 model.lr=1e-05 model.lr_momentum=1e-09\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'str'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'str'>\r\nlr_momentum 1e-09 <class 'str'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n[2020-09-22 00:49:11,950][HYDRA]        #5 : model.regularization.l2=0.001 model.lr=1e-05 model.lr_momentum=1e-10\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'str'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'str'>\r\nlr_momentum 1e-10 <class 'float'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n```\r\n\r\nHighlighting the important info from above:\r\n- lr_momentum is interpreted as a str for values 1e-5 through 1e-9, and for some reason is then interpreted as a float for 1e-10. \r\n---------------------------------------------------------------------------------------\r\n\r\nA second, contrasting example below:\r\n```\r\n(hydra) jacob@serrep3:~/Documents/github issues$ python demo.py --multirun model.regularization.l2=1e-3 model.lr_momentum=1.0,1e-1,1e-2,1e-3,1e-4\r\n[2020-09-22 00:53:56,412][HYDRA] Launching 5 jobs locally\r\n[2020-09-22 00:53:56,412][HYDRA]        #0 : model.regularization.l2=0.001 model.lr_momentum=1.0\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'float'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'float'>\r\nlr_momentum 1.0 <class 'float'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n[2020-09-22 00:53:56,753][HYDRA]        #1 : model.regularization.l2=0.001 model.lr_momentum=0.1\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'float'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'float'>\r\nlr_momentum 0.1 <class 'float'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n[2020-09-22 00:53:57,083][HYDRA]        #2 : model.regularization.l2=0.001 model.lr_momentum=0.01\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'float'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'float'>\r\nlr_momentum 0.01 <class 'float'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n[2020-09-22 00:53:57,410][HYDRA]        #3 : model.regularization.l2=0.001 model.lr_momentum=0.001\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'float'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'float'>\r\nlr_momentum 0.001 <class 'float'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n[2020-09-22 00:53:57,737][HYDRA]        #4 : model.regularization.l2=0.001 model.lr_momentum=0.0001\r\n========================================\r\nlr=1e-05, type(config.model.lr)=<class 'float'>\r\nl2=0.001, type(config.model.regularization.l2)=<class 'float'>\r\n------------------------------\r\nlr 1e-05 <class 'float'>\r\nlr_momentum 0.0001 <class 'float'>\r\nl2 0.001 <class 'float'>\r\nc1 0.01 <class 'float'>\r\n========================================\r\n```\r\n- lr_momentum is correctly interpreted as float for the range 1.0,1e-1,1e-2,1e-3,1e-4\r\n- lr is defined as 1.0e-5 in the config, and when no override is passed via cmdline the config value is interpreted correctly as float. However, if the same exact value formatted identically is passed via cmdline it's interpreted as a str!\r\n- wrapping each statement in single quotations does not change the behavior.\r\ne.g.\r\n`'model.lr=1.0e-5'`\r\nis the same as \r\n`model.lr=1.0e-5`\r\n- Similarly, formatting the same floats using decimal instead of scientific notation does not result in any different behavior.\r\n- Finally, passing any value < 1e-4 or >= 1e-9 is interpreted as str (e.g. 9.99e-5 is a str, but 9.99e-10 is still a float)\r\n\r\n\r\n## Expected Behavior\r\nI'd expect the cmdline overrides to be interpreted in a consistent way independent of the numerical value. At the moment it appears as if Hydra simply expects the user to manually convert certain numerical values after they've been parsed for the config, and the specification of which values those are is nonexistent and highly arbitrary.\r\n\r\nMy expectation, based on having read through the docs, is that the user should expect all of the following to be interpreted as float:\r\n```\r\nmodel.lr=1e-5\r\n'model.lr=1e-5'\r\nmodel.lr=1e-5,1e-6 --multirun\r\n'model.lr=1e-5,1e-6' --multirun\r\n```\r\nand expect all of the following to be interpreted as str:\r\n```\r\nmodel.lr=\"1e-5\"\r\n'model.lr=\"1e-5\"'\r\nmodel.lr=\"1e-5\",\"1e-6\" --multirun\r\n'model.lr=\"1e-5\",\"1e-6\"' --multirun\r\n\r\n```\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.2\r\n- **Python version** : 3.7.9\r\n- **Virtual environment type and version** : conda 4.7.12\r\n- **Operating system** : Ubuntu Linux\r\n\r\n\r\nPlease let me know if you'd like any other info/find the cause and a way to fix that doesnt require me to write a whole config verification script (especially after I just typed all this out!)\r\n\r\nCheers,\r\nJacob", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/999/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/988", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/988/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/988/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/988/events", "html_url": "https://github.com/facebookresearch/hydra/issues/988", "id": 704489397, "node_id": "MDU6SXNzdWU3MDQ0ODkzOTc=", "number": 988, "title": "[Bug] Custom Resolver Only Works Somtimes", "user": {"login": "Queuecumber", "id": 5865387, "node_id": "MDQ6VXNlcjU4NjUzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/5865387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Queuecumber", "html_url": "https://github.com/Queuecumber", "followers_url": "https://api.github.com/users/Queuecumber/followers", "following_url": "https://api.github.com/users/Queuecumber/following{/other_user}", "gists_url": "https://api.github.com/users/Queuecumber/gists{/gist_id}", "starred_url": "https://api.github.com/users/Queuecumber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Queuecumber/subscriptions", "organizations_url": "https://api.github.com/users/Queuecumber/orgs", "repos_url": "https://api.github.com/users/Queuecumber/repos", "events_url": "https://api.github.com/users/Queuecumber/events{/privacy}", "received_events_url": "https://api.github.com/users/Queuecumber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2020-09-18T16:00:06Z", "updated_at": "2020-09-22T01:17:28Z", "closed_at": "2020-09-18T16:12:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nThis may be an OmegaConf issue, I'm not sure where is the more appropriate place to put it.\r\n\r\nI have a custom OmegaConf resolver registered that uses eval because sometimes I need to pass real python objects in a generic way (e.g. I can't assume what the type will be in code but the writer of the config file knows):\r\n\r\n```\r\nOmegaConf.register_resolver(\"eval\", lambda x: eval(x))\r\n```\r\n\r\nThis resolver only seems to work sometimes, and I'm not sure exactly what the rule is. I have a bunch of examples, some work and some don't work. One notable example that doesnt work is a tuple: \r\n\r\n```\r\ntest_fails_tuple: ${eval:(1,2,3)}\r\n```\r\n\r\nwill be a string containing \"${eval:(1,2,3)}\" when I read the value from the DictConfig.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\nConfig:\r\n```\r\ntest_fails_tuple: ${eval:(1,2,3)}\r\ntest_fails_tuple_2: ${eval:tuple([1,2,3])}\r\ntest_fails_list: ${eval:[1,2,3]}\r\ntest_works_function: ${eval:time.time}\r\ntest_works_int: ${eval:42}\r\n```\r\n\r\nCode:\r\n```\r\nimport hydra\r\nfrom omegaconf import OmegaConf\r\nimport time\r\n\r\n\r\n@hydra.main(config_name=\"minimal_test.yaml\")\r\ndef main(cfg):\r\n    OmegaConf.register_resolver(\"eval\", lambda x: eval(x))\r\n\r\n    print(cfg.test_fails_tuple)\r\n    print(cfg.test_fails_tuple_2)\r\n    print(cfg.test_fails_list)\r\n    print(cfg.test_works_function())\r\n    print(cfg.test_works_int)\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n** Stack trace/error message **\r\nResults of above print messages:\r\n```\r\n${eval:(1,2,3)}\r\n${eval:tuple([1,2,3])}\r\n${eval:[1,2,3]}\r\n1600444490.9921494\r\n42\r\n```\r\n\r\n## Expected Behavior\r\nNo matter what python expression I put in the eval handler, it gets passed to eval and returned. \r\n\r\n## System information\r\n- **Hydra Version** :  Git master\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : Conda 4.5.8\r\n- **Operating system** : Ubuntu 18.04\r\n\r\n## Additional context\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/988/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/968", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/968/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/968/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/968/events", "html_url": "https://github.com/facebookresearch/hydra/issues/968", "id": 701821855, "node_id": "MDU6SXNzdWU3MDE4MjE4NTU=", "number": 968, "title": "Failed to merge configurations", "user": {"login": "vfdev-5", "id": 2459423, "node_id": "MDQ6VXNlcjI0NTk0MjM=", "avatar_url": "https://avatars.githubusercontent.com/u/2459423?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vfdev-5", "html_url": "https://github.com/vfdev-5", "followers_url": "https://api.github.com/users/vfdev-5/followers", "following_url": "https://api.github.com/users/vfdev-5/following{/other_user}", "gists_url": "https://api.github.com/users/vfdev-5/gists{/gist_id}", "starred_url": "https://api.github.com/users/vfdev-5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vfdev-5/subscriptions", "organizations_url": "https://api.github.com/users/vfdev-5/orgs", "repos_url": "https://api.github.com/users/vfdev-5/repos", "events_url": "https://api.github.com/users/vfdev-5/events{/privacy}", "received_events_url": "https://api.github.com/users/vfdev-5/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471570, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-15T10:46:22Z", "updated_at": "2020-09-15T16:00:07Z", "closed_at": "2020-09-15T15:59:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nI'm migrating the code and configs from hydra-core < 1.0 to 1.X following : \r\nhttps://hydra.cc/docs/upgrades/0.11_to_1.0/config_path_changes and other sections \r\n\r\nBut I encounter an issue with merging configs, which is related to the following warning:\r\n```\r\n/opt/conda/lib/python3.7/site-packages/omegaconf/omegaconf.py:579: UserWarning: update() merge flag is is not specified, defaulting to False.\r\nFor more details, see https://github.com/omry/omegaconf/issues/367                                               \r\n  stacklevel=1,                                                                                                                                      \r\n```\r\n\r\nThe config I have is the that:\r\n1) global file : `config/train_gan.yaml`  where `data` object is defined by a group and some other global fields are added after:\r\n```yaml\r\n# @package _global_\r\n...\r\ndefaults:\r\n  - dataset: simple\r\n...\r\ndata:\r\n  root: /path/to/data\r\n  extensions:\r\n    - png\r\n  loader:\r\n    # batch size per each device\r\n    batch_size: 32\r\n    workers: 2\r\n...\r\n```\r\nAnd the group is defined here `config/dataset/simple.yaml` as \r\n```yaml\r\n# @package _group_\r\ndata:\r\n  type: simple\r\n  transforms:\r\n    to_tensor:\r\n      _target_: torchvision.transforms.ToTensor\r\n    normalize:\r\n      _target_: torchvision.transforms.Normalize\r\n      params:\r\n        mean: [0.5, 0.5, 0.5]\r\n        std: [0.5, 0.5, 0.5]\r\n```\r\n\r\nHowever, in the code final configuration does not contain fields from `simple.yaml`.\r\n\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [ ] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n** Stack trace/error message **\r\n```\r\n// Paste the bad output here!\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0\r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/968/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/968/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/967", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/967/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/967/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/967/events", "html_url": "https://github.com/facebookresearch/hydra/issues/967", "id": 701654907, "node_id": "MDU6SXNzdWU3MDE2NTQ5MDc=", "number": 967, "title": "[Bug] [configen] Verify configen output to only valid OmegaConf types", "user": {"login": "romesco", "id": 14840767, "node_id": "MDQ6VXNlcjE0ODQwNzY3", "avatar_url": "https://avatars.githubusercontent.com/u/14840767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/romesco", "html_url": "https://github.com/romesco", "followers_url": "https://api.github.com/users/romesco/followers", "following_url": "https://api.github.com/users/romesco/following{/other_user}", "gists_url": "https://api.github.com/users/romesco/gists{/gist_id}", "starred_url": "https://api.github.com/users/romesco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/romesco/subscriptions", "organizations_url": "https://api.github.com/users/romesco/orgs", "repos_url": "https://api.github.com/users/romesco/repos", "events_url": "https://api.github.com/users/romesco/events{/privacy}", "received_events_url": "https://api.github.com/users/romesco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2349519660, "node_id": "MDU6TGFiZWwyMzQ5NTE5NjYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/configen", "name": "configen", "color": "5d9fdd", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-09-15T06:35:53Z", "updated_at": "2020-09-15T23:37:03Z", "closed_at": "2020-09-15T23:37:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nCurrently, configen will generate configs with types which may not be supported by hydra.\r\n\r\nExample:\r\n```\r\n@dataclass\r\nclass SGDConf:\r\n    _target_: str = \"torch.optim.SGD\"\r\n    params: Any = MISSING\r\n    lr: Any = <required parameter>\r\n    momentum: Any = 0\r\n    dampening: Any = 0\r\n    weight_decay: Any = 0\r\n    nesterov: Any = False\r\n```\r\n\r\nwhere `<required parameter>` is a string.\r\n\r\nIdeally, this line should be: `lr: Any = MISSING`\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/967/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/967/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/964", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/964/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/964/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/964/events", "html_url": "https://github.com/facebookresearch/hydra/issues/964", "id": 700955575, "node_id": "MDU6SXNzdWU3MDA5NTU1NzU=", "number": 964, "title": "[Bug] hydra-joblib-launcher crashes when PyTorch DataLoader num_workers>0", "user": {"login": "gerardsn", "id": 33763579, "node_id": "MDQ6VXNlcjMzNzYzNTc5", "avatar_url": "https://avatars.githubusercontent.com/u/33763579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gerardsn", "html_url": "https://github.com/gerardsn", "followers_url": "https://api.github.com/users/gerardsn/followers", "following_url": "https://api.github.com/users/gerardsn/following{/other_user}", "gists_url": "https://api.github.com/users/gerardsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gerardsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gerardsn/subscriptions", "organizations_url": "https://api.github.com/users/gerardsn/orgs", "repos_url": "https://api.github.com/users/gerardsn/repos", "events_url": "https://api.github.com/users/gerardsn/events{/privacy}", "received_events_url": "https://api.github.com/users/gerardsn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471570, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-09-14T10:01:09Z", "updated_at": "2022-05-30T14:27:57Z", "closed_at": "2020-09-15T18:06:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nAs title. The hydra-joblib-launcher fails when setting num_workers>0 in PyTorch's DataLoader.  If num_workers==0 everything works just fine. However, the speedup achieved with joblib multiprocessing barely (if at all) compensates for increased runtime of individual jobs. \r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n```python title=\"MNIST_hydra.py\"\r\nimport os\r\nimport torch\r\nimport torch.nn as nn\r\nimport torch.nn.functional as F\r\nfrom torch.utils.data import DataLoader\r\nfrom torchvision.datasets import MNIST\r\nfrom torchvision import transforms\r\nimport hydra\r\n\r\nclass Model(nn.Module):\r\n    def __init__(self):\r\n        super().__init__()\r\n        self.l1 = torch.nn.Linear(28 * 28, 10)\r\n\r\n    def forward(self, x):\r\n        return torch.relu(self.l1(x.view(x.size(0), -1)))\r\n\r\n@hydra.main()\r\ndef main(cfg):\r\n    data_set = MNIST(os.getcwd(), download=True, train=True, transform=transforms.ToTensor())\r\n    data_loader = DataLoader(data_set, batch_size=64, num_workers=cfg.num_workers)\r\n    model = Model().cuda()\r\n    optim = torch.optim.Adam(model.parameters(), lr=cfg.lr)\r\n\r\n    for batch in data_loader:\r\n        x, y = batch\r\n        y_hat = model(x.cuda())\r\n        loss = F.cross_entropy(y_hat, y.cuda())\r\n    print(f'completed {cfg.lr}')\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\nThis works:\r\n```commandline\r\npython MNIST_hydra.py +num_workers=0 +lr=1e-4,1e-3,1e-2 hydra/launcher=joblib -m\r\n```\r\n\r\nThis fails:\r\n```commandline\r\npython MNIST_hydra.py +num_workers=1 +lr=1e-4,1e-3,1e-2 hydra/launcher=joblib -m\r\n```\r\nwith error: (note that there are several times more cores available than required for this config.)\r\n\r\n** Stack trace/error message **\r\n```\r\n/usr/lib/python3.7/multiprocessing/semaphore_tracker.py:144: UserWarning: semaphore_tracker: There appear to be 1 leaked semaphores to clean up at shutdown\r\n  len(cache))\r\n/usr/lib/python3.7/multiprocessing/semaphore_tracker.py:144: UserWarning: semaphore_tracker: There appear to be 1 leaked semaphores to clean up at shutdown\r\n  len(cache))\r\n/usr/lib/python3.7/multiprocessing/semaphore_tracker.py:144: UserWarning: semaphore_tracker: There appear to be 1 leaked semaphores to clean up at shutdown\r\n  len(cache))\r\njoblib.externals.loky.process_executor._RemoteTraceback:\r\n\"\"\"\r\nTraceback (most recent call last):\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/externals/loky/process_executor.py\", line 431, in _process_worker\r\n    r = call_item()\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/externals/loky/process_executor.py\", line 285, in __call__\r\n    return self.fn(*self.args, **self.kwargs)\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/_parallel_backends.py\", line 595, in __call__\r\n    return self.func(*args, **kwargs)\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/parallel.py\", line 253, in __call__\r\n    for func, args, kwargs in self.items]\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/parallel.py\", line 253, in <listcomp>\r\n    for func, args, kwargs in self.items]\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/hydra_plugins/hydra_joblib_launcher/_core.py\", line 47, in execute_job\r\n    job_subdir_key=\"hydra.sweep.subdir\",\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/hydra/core/utils.py\", line 125, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"MNIST_hydra.py\", line 28, in main\r\n    for batch in data_loader:\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 291, in __iter__\r\n    return _MultiProcessingDataLoaderIter(self)\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/torch/utils/data/dataloader.py\", line 737, in __init__\r\n    w.start()\r\n  File \"/usr/lib/python3.7/multiprocessing/process.py\", line 112, in start\r\n    self._popen = self._Popen(self)\r\n  File \"/usr/lib/python3.7/multiprocessing/context.py\", line 223, in _Popen\r\n    return _default_context.get_context().Process._Popen(process_obj)\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/externals/loky/backend/process.py\", line 39, in _Popen\r\n    return Popen(process_obj)\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/externals/loky/backend/popen_loky_posix.py\", line 52, in __init__\r\n    self._launch(process_obj)\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/externals/loky/backend/popen_loky_posix.py\", line 157, in _launch\r\n    pid = fork_exec(cmd_python, self._fds, env=process_obj.env)\r\nAttributeError: 'Process' object has no attribute 'env'\r\n\"\"\"\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 207, in run_and_report\r\n    return func()\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 367, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 136, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 154, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/hydra_plugins/hydra_joblib_launcher/joblib_launcher.py\", line 46, in launch\r\n    launcher=self, job_overrides=job_overrides, initial_job_idx=initial_job_idx\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/hydra_plugins/hydra_joblib_launcher/_core.py\", line 98, in launch\r\n    for idx, overrides in enumerate(job_overrides)\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/parallel.py\", line 1042, in __call__\r\n    self.retrieve()\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/parallel.py\", line 921, in retrieve\r\n    self._output.extend(job.get(timeout=self.timeout))\r\n  File \"/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/_parallel_backends.py\", line 542, in wrap_future_result\r\n    return future.result(timeout=timeout)\r\n  File \"/usr/lib/python3.7/concurrent/futures/_base.py\", line 435, in result\r\n    return self.__get_result()\r\n  File \"/usr/lib/python3.7/concurrent/futures/_base.py\", line 384, in __get_result\r\n    raise self._exception\r\nAttributeError: 'Process' object has no attribute 'env'\r\n/opt/.virtualenvs/l2r/lib/python3.7/site-packages/joblib/externals/loky/backend/resource_tracker.py:320: UserWarning: resource_tracker: There appear to be 22 leaked semlock objects to clean up at shutdown\r\n  (len(rtype_registry), rtype))\r\n```\r\n\r\n## Expected Behavior\r\nBeing able to use hydra-joblib-launcher and num_workers>0 in PyTorch at the same time. \r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0\r\n- **hydra-joblib-launcher**: 1.1.0\r\n- **Python version** : 3.6.9 and 3.7.5\r\n- **Virtual environment type and version** : virtualenv==15.1.0\r\n- **Operating system** : Ubuntu 18.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/964/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/964/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/962", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/962/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/962/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/962/events", "html_url": "https://github.com/facebookresearch/hydra/issues/962", "id": 699971926, "node_id": "MDU6SXNzdWU2OTk5NzE5MjY=", "number": 962, "title": "[Bug] Cannot use overrides containing '%' character", "user": {"login": "another-pjohnson", "id": 24667483, "node_id": "MDQ6VXNlcjI0NjY3NDgz", "avatar_url": "https://avatars.githubusercontent.com/u/24667483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/another-pjohnson", "html_url": "https://github.com/another-pjohnson", "followers_url": "https://api.github.com/users/another-pjohnson/followers", "following_url": "https://api.github.com/users/another-pjohnson/following{/other_user}", "gists_url": "https://api.github.com/users/another-pjohnson/gists{/gist_id}", "starred_url": "https://api.github.com/users/another-pjohnson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/another-pjohnson/subscriptions", "organizations_url": "https://api.github.com/users/another-pjohnson/orgs", "repos_url": "https://api.github.com/users/another-pjohnson/repos", "events_url": "https://api.github.com/users/another-pjohnson/events{/privacy}", "received_events_url": "https://api.github.com/users/another-pjohnson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/6", "html_url": "https://github.com/facebookresearch/hydra/milestone/6", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/6/labels", "id": 5846358, "node_id": "MDk6TWlsZXN0b25lNTg0NjM1OA==", "number": 6, "title": "1.0.1", "description": "Bugfix release for 1.0.0", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2020-09-04T22:04:10Z", "updated_at": "2020-09-17T02:29:48Z", "due_on": null, "closed_at": "2020-09-17T02:29:48Z"}, "comments": 4, "created_at": "2020-09-12T02:28:53Z", "updated_at": "2020-10-19T16:00:37Z", "closed_at": "2020-09-12T22:08:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI am unable to override a value that contains the '%' character without doing special quoting around the override\r\n\r\n## To reproduce\r\n\r\n```\r\nimport hydra\r\n\r\n@hydra.main()\r\ndef foo(*args, **kargs):\r\n    pass\r\n\r\nfoo()\r\n```\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```\r\npython test.py +bar=/path/to/pattern_%r.bin\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nLexerNoViableAltException: +bar=/path/to/pattern_%r.bin\r\n                                                 ^\r\nSee https://hydra.cc/docs/next/advanced/override_grammar/basic for details\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\nbar's value should be set to \"/path/to/pattern_%r.bin\".\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nSimilar error to: Issue #798.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/962/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/962/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/960", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/960/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/960/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/960/events", "html_url": "https://github.com/facebookresearch/hydra/issues/960", "id": 699667671, "node_id": "MDU6SXNzdWU2OTk2Njc2NzE=", "number": 960, "title": "Add jinja2 to requirements for configen", "user": {"login": "romesco", "id": 14840767, "node_id": "MDQ6VXNlcjE0ODQwNzY3", "avatar_url": "https://avatars.githubusercontent.com/u/14840767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/romesco", "html_url": "https://github.com/romesco", "followers_url": "https://api.github.com/users/romesco/followers", "following_url": "https://api.github.com/users/romesco/following{/other_user}", "gists_url": "https://api.github.com/users/romesco/gists{/gist_id}", "starred_url": "https://api.github.com/users/romesco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/romesco/subscriptions", "organizations_url": "https://api.github.com/users/romesco/orgs", "repos_url": "https://api.github.com/users/romesco/repos", "events_url": "https://api.github.com/users/romesco/events{/privacy}", "received_events_url": "https://api.github.com/users/romesco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-09-11T19:25:23Z", "updated_at": "2020-09-12T19:22:44Z", "closed_at": "2020-09-11T19:45:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "## System information\r\n- **Hydra Version** :  master\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : conda w/ pip\r\n- **Operating system** : 16.0.4", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/960/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/949", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/949/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/949/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/949/events", "html_url": "https://github.com/facebookresearch/hydra/issues/949", "id": 694207748, "node_id": "MDU6SXNzdWU2OTQyMDc3NDg=", "number": 949, "title": "[Bug]", "user": {"login": "Chizkiyahu", "id": 37312901, "node_id": "MDQ6VXNlcjM3MzEyOTAx", "avatar_url": "https://avatars.githubusercontent.com/u/37312901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chizkiyahu", "html_url": "https://github.com/Chizkiyahu", "followers_url": "https://api.github.com/users/Chizkiyahu/followers", "following_url": "https://api.github.com/users/Chizkiyahu/following{/other_user}", "gists_url": "https://api.github.com/users/Chizkiyahu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chizkiyahu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chizkiyahu/subscriptions", "organizations_url": "https://api.github.com/users/Chizkiyahu/orgs", "repos_url": "https://api.github.com/users/Chizkiyahu/repos", "events_url": "https://api.github.com/users/Chizkiyahu/events{/privacy}", "received_events_url": "https://api.github.com/users/Chizkiyahu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-09-05T23:43:01Z", "updated_at": "2020-09-06T00:47:33Z", "closed_at": "2020-09-05T23:48:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen I try to open the Hydra in Jupyter Notebooks with Binder and get error **404** \r\n\r\n## To reproduce\r\ngo to [hydra/examples/jupyter_notebooks/](https://github.com/facebookresearch/hydra/tree/e46b09b888df23eee6a84180659d8ae591d34bde/examples/jupyter_notebooks#jupyter-notebooks) and click the Binder button \r\n\r\n```\r\n404 : Not Found\r\nYou are requesting a page that does not exist!\r\n\r\n```\r\n\r\n## Expected Behavior\r\nthe page open with no errors \r\n\r\n\r\n## Additional context\r\nthe [link](https://mybinder.org/v2/gh/facebookresearch/hydra/e46b09b888df23eee6a84180659d8ae591d34bde) working but is open the root git folder  and not specific file [hydra/examples/jupyter_notebooks/compose_configs_in_notebook.ipynb](https://github.com/facebookresearch/hydra/blob/master/examples/jupyter_notebooks/compose_configs_in_notebook.ipynb)\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/949/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/949/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/947", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/947/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/947/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/947/events", "html_url": "https://github.com/facebookresearch/hydra/issues/947", "id": 693717582, "node_id": "MDU6SXNzdWU2OTM3MTc1ODI=", "number": 947, "title": "[Bug] Overriding dict using cmd", "user": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-04T22:08:21Z", "updated_at": "2020-09-04T22:42:47Z", "closed_at": "2020-09-04T22:42:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nCan not override a dict from commandline\r\n\r\n## Checklist\r\n- [x ] I checked on the latest version of Hydra\r\n- [x ] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\nhttps://gist.github.com/shagunsodhani/29f8937047fbc10f351a02f1601724ce\r\n\r\n** Stack trace/error message **\r\n\r\n```\r\n$ python bug/main.py polynomial.x=1 polynomial.y=2 polynomial.z=3\r\n\r\n121 (works fine)\r\n```\r\n\r\n```\r\n$ python bug/main.py 'polynomial={x:1, y:2, z:3}'\r\n\r\nCould not override 'polynomial'. No match in config.\r\nTo append to your config use +polynomial={x:1, y:2, z:3}\r\nKey 'x' is not in struct\r\n\tfull_key: polynomial.x\r\n\treference_type=Any\r\n\tobject_type=dict\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n```\r\n$ python bug/main.py '+polynomial={x:1, y:2, z:3}'\r\n\r\nCould not append to config. An item is already at 'polynomial'.\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\n\r\n## System information\r\n- **Hydra Version** :  master\r\n- **Python version** : 3.8\r\n- **Virtual environment type and version** : Conda\r\n- **Operating system** : Ubuntu\r\n\r\n## Additional context\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/947/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/947/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/946", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/946/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/946/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/946/events", "html_url": "https://github.com/facebookresearch/hydra/issues/946", "id": 693711669, "node_id": "MDU6SXNzdWU2OTM3MTE2Njk=", "number": 946, "title": "[Bug] Assigning a dictionary to untyped field fails", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/6", "html_url": "https://github.com/facebookresearch/hydra/milestone/6", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/6/labels", "id": 5846358, "node_id": "MDk6TWlsZXN0b25lNTg0NjM1OA==", "number": 6, "title": "1.0.1", "description": "Bugfix release for 1.0.0", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2020-09-04T22:04:10Z", "updated_at": "2020-09-17T02:29:48Z", "due_on": null, "closed_at": "2020-09-17T02:29:48Z"}, "comments": 0, "created_at": "2020-09-04T22:03:22Z", "updated_at": "2020-09-09T02:10:08Z", "closed_at": "2020-09-09T02:10:08Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "I am expecting this to work:\r\n```\r\n$ python examples/tutorials/basic/your_first_hydra_app/5_defaults/my_app.py  'db.driver={a:10,b:20}' \r\nCould not override 'db.driver'. No match in config.\r\nTo append to your config use +db.driver={a:10,b:20}\r\nKey 'a' is not in struct\r\n        full_key: db.driver.a\r\n        reference_type=Any\r\n        object_type=dict\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/946/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/946/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/939", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/939/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/939/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/939/events", "html_url": "https://github.com/facebookresearch/hydra/issues/939", "id": 691413622, "node_id": "MDU6SXNzdWU2OTE0MTM2MjI=", "number": 939, "title": "[Feature Request] Support merging dictionaries from command line", "user": {"login": "divchenko", "id": 2816557, "node_id": "MDQ6VXNlcjI4MTY1NTc=", "avatar_url": "https://avatars.githubusercontent.com/u/2816557?v=4", "gravatar_id": "", "url": "https://api.github.com/users/divchenko", "html_url": "https://github.com/divchenko", "followers_url": "https://api.github.com/users/divchenko/followers", "following_url": "https://api.github.com/users/divchenko/following{/other_user}", "gists_url": "https://api.github.com/users/divchenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/divchenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/divchenko/subscriptions", "organizations_url": "https://api.github.com/users/divchenko/orgs", "repos_url": "https://api.github.com/users/divchenko/repos", "events_url": "https://api.github.com/users/divchenko/events{/privacy}", "received_events_url": "https://api.github.com/users/divchenko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471565, "node_id": "MDU6TGFiZWwxNDAzNDcxNTY1", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "Enhanvement request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/6", "html_url": "https://github.com/facebookresearch/hydra/milestone/6", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/6/labels", "id": 5846358, "node_id": "MDk6TWlsZXN0b25lNTg0NjM1OA==", "number": 6, "title": "1.0.1", "description": "Bugfix release for 1.0.0", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 4, "state": "closed", "created_at": "2020-09-04T22:04:10Z", "updated_at": "2020-09-17T02:29:48Z", "due_on": null, "closed_at": "2020-09-17T02:29:48Z"}, "comments": 2, "created_at": "2020-09-02T20:54:08Z", "updated_at": "2020-09-09T02:10:08Z", "closed_at": "2020-09-09T02:10:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n@dataclass\r\nclass Stage:\r\n    value: int = 1\r\n\r\n@dataclass\r\nclass Config:\r\n  stages: List[Stage] = field(default_factory=list)\r\n```\r\n\r\nThe following doesn't work when using structured Config from command line as it complains about mismatched types dict vs Stage:\r\n```\r\nstages=[{value:10}]\r\n```\r\n\r\nError:\r\n```\r\nError merging override stages=[{value: 10}]\r\nInvalid type assigned : dict is not a subclass of Stage. value: {'value': 10}\r\n        full_key: stages[0]\r\n        reference_type=List[Stage]\r\n        object_type=list\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/939/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/939/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/933", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/933/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/933/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/933/events", "html_url": "https://github.com/facebookresearch/hydra/issues/933", "id": 689272068, "node_id": "MDU6SXNzdWU2ODkyNzIwNjg=", "number": 933, "title": "yaml.constructor.ConstructorError: could not determine a constructor for the tag", "user": {"login": "a-z-e-r-i-l-a", "id": 43846417, "node_id": "MDQ6VXNlcjQzODQ2NDE3", "avatar_url": "https://avatars.githubusercontent.com/u/43846417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a-z-e-r-i-l-a", "html_url": "https://github.com/a-z-e-r-i-l-a", "followers_url": "https://api.github.com/users/a-z-e-r-i-l-a/followers", "following_url": "https://api.github.com/users/a-z-e-r-i-l-a/following{/other_user}", "gists_url": "https://api.github.com/users/a-z-e-r-i-l-a/gists{/gist_id}", "starred_url": "https://api.github.com/users/a-z-e-r-i-l-a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a-z-e-r-i-l-a/subscriptions", "organizations_url": "https://api.github.com/users/a-z-e-r-i-l-a/orgs", "repos_url": "https://api.github.com/users/a-z-e-r-i-l-a/repos", "events_url": "https://api.github.com/users/a-z-e-r-i-l-a/events{/privacy}", "received_events_url": "https://api.github.com/users/a-z-e-r-i-l-a/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-31T14:56:30Z", "updated_at": "2020-08-31T20:30:44Z", "closed_at": "2020-08-31T20:30:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a yaml file which has the following lines:\r\n\r\n    grasp_pose: !!python/object/new:geometry_msgs.msg._Pose.Pose\r\n        state:\r\n          - !!python/object/new:geometry_msgs.msg._Point.Point\r\n            state: [0.445, -0.449, 0.116]\r\n\r\nwhich loads with no problem using yaml:\r\n\r\n    with open(os.path.expanduser(config_path), 'r') as f:\r\n        self.config = yaml.load(f, Loader=yaml.Loader)\r\n\r\nHowever, using hydra and the `@hydra.main(config_path=config_path, strict=True)` as described [here][1], I get the following error:\r\n\r\n        main()\r\n      File \"/xxx/lib/python3.6/site-packages/hydra/main.py\", line 24, in decorated_main\r\n        strict=strict,\r\n      File \"xxx/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 174, in run_hydra\r\n        overrides=args.overrides,\r\n      File \"xxx/lib/python3.6/site-packages/hydra/_internal/hydra.py\", line 79, in run\r\n        config_file=config_file, overrides=overrides, with_log_configuration=True\r\n      File \"xxx/lib/python3.6/site-packages/hydra/_internal/hydra.py\", line 343, in compose_config\r\n        config_file=config_file, overrides=overrides, strict=strict\r\n      File \"xxx/lib/python3.6/site-packages/hydra/_internal/config_loader.py\", line 61, in load_configuration\r\n        job_cfg = self._create_cfg(cfg_filename=config_file, record_load=False)\r\n      File \"xxx/lib/python3.6/site-packages/hydra/_internal/config_loader.py\", line 437, in _create_cfg\r\n        cfg = self._load_config_impl(cfg_filename, record_load=record_load)\r\n      File \"xxx/lib/python3.6/site-packages/hydra/_internal/config_loader.py\", line 253, in _load_config_impl\r\n        loaded_cfg = OmegaConf.load(fullpath)\r\n      File \"xxx/lib/python3.6/site-packages/omegaconf/omegaconf.py\", line 61, in load\r\n        return OmegaConf.create(yaml.load(f, Loader=get_yaml_loader()))\r\n      File \"xxx/lib/python3.6/site-packages/yaml/__init__.py\", line 114, in load\r\n        return loader.get_single_data()\r\n      File \"xxx/lib/python3.6/site-packages/yaml/constructor.py\", line 43, in get_single_data\r\n        return self.construct_document(node)\r\n      File \"xxx/lib/python3.6/site-packages/yaml/constructor.py\", line 52, in construct_document\r\n        for dummy in generator:\r\n      File \"xxx/lib/python3.6/site-packages/yaml/constructor.py\", line 404, in construct_yaml_map\r\n        value = self.construct_mapping(node)\r\n      File \"xxx/lib/python3.6/site-packages/yaml/constructor.py\", line 210, in construct_mapping\r\n        return super().construct_mapping(node, deep=deep)\r\n      File \"xxx/lib/python3.6/site-packages/yaml/constructor.py\", line 135, in construct_mapping\r\n        value = self.construct_object(value_node, deep=deep)\r\n      File \"xxx/lib/python3.6/site-packages/yaml/constructor.py\", line 92, in construct_object\r\n        data = constructor(self, node)\r\n      File \"xxx/lib/python3.6/site-packages/yaml/constructor.py\", line 420, in construct_undefined\r\n        node.start_mark)\r\n    yaml.constructor.ConstructorError: could not determine a constructor for the tag 'tag:yaml.org,2002:python/object/new:geometry_msgs.msg._Pose.Pose'\r\n      in \"xxxxxxxxx/config/rl_config.yaml\", line 85, column 15\r\n\r\n\r\n\r\nI'm not sure what the problem is however and lack experience in how yaml works.\r\n\r\n  [1]: https://hydra.cc/docs/intro/", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/933/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/926", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/926/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/926/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/926/events", "html_url": "https://github.com/facebookresearch/hydra/issues/926", "id": 687521350, "node_id": "MDU6SXNzdWU2ODc1MjEzNTA=", "number": 926, "title": "pdb can't be used if hydra main decorator used", "user": {"login": "ferrine", "id": 11705326, "node_id": "MDQ6VXNlcjExNzA1MzI2", "avatar_url": "https://avatars.githubusercontent.com/u/11705326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ferrine", "html_url": "https://github.com/ferrine", "followers_url": "https://api.github.com/users/ferrine/followers", "following_url": "https://api.github.com/users/ferrine/following{/other_user}", "gists_url": "https://api.github.com/users/ferrine/gists{/gist_id}", "starred_url": "https://api.github.com/users/ferrine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ferrine/subscriptions", "organizations_url": "https://api.github.com/users/ferrine/orgs", "repos_url": "https://api.github.com/users/ferrine/repos", "events_url": "https://api.github.com/users/ferrine/events{/privacy}", "received_events_url": "https://api.github.com/users/ferrine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 4, "created_at": "2020-08-27T20:32:02Z", "updated_at": "2020-08-28T23:28:20Z", "closed_at": "2020-08-28T23:28:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\ude80 Feature Request: PDB support\r\n\r\n<!-- A clear and concise description of the feature you are requesting -->\r\n\r\n## Motivation\r\n\r\nI got used to debug pipelines with `pdb`, but it looks to be impossible with hydra decorator\r\n\r\n### Example\r\nConsider a script\r\n```\r\n# test.py\r\nfrom omegaconf import DictConfig\r\nimport hydra\r\n\r\n\r\n@hydra.main()\r\ndef main(cfg: DictConfig):\r\n    1/0\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\nand you want to use `pdb` to fix the error. For deep learning it might be inspecting weights for nans, grad norms, stack levels.\r\nWithout any interaction, program finishes with error code `1`\r\n\r\n```\r\n$ python test.py\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 7, in main\r\n    1/0\r\nZeroDivisionError: division by zero\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\nwith `HYDRA_FULL_ERROR=1` \r\n```\r\n$ HYDRA_FULL_ERROR=1 python test.py\r\nTraceback (most recent call last):\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 203, in run_and_report\r\n    return func()\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 353, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 105, in run\r\n    return run_job(\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/core/utils.py\", line 123, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"test.py\", line 7, in main\r\n    1/0\r\nZeroDivisionError: division by zero\r\n```\r\nwith python debugger `pdb` which is possible to catch any unexpected exception\r\n```\r\n$ HYDRA_FULL_ERROR=1 python -m pdb -c continue test.py\r\nTraceback (most recent call last):\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 203, in run_and_report\r\n    return func()\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 353, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 105, in run\r\n    return run_job(\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/core/utils.py\", line 123, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"/home/ferres/ntl/cfan/experiments/hydra/test.py\", line 7, in main\r\n    1/0\r\nZeroDivisionError: division by zero\r\nThe program exited via sys.exit(). Exit status: 1\r\n> /home/ferres/ntl/cfan/experiments/hydra/test.py(1)<module>()\r\n-> from omegaconf import DictConfig\r\n(Pdb) ll\r\n  1  -> from omegaconf import DictConfig\r\n  2     import hydra\r\n  3     \r\n  4     \r\n  5     @hydra.main()\r\n  6     def main(cfg: DictConfig):\r\n  7         1/0\r\n  8     \r\n  9     \r\n 10     if __name__ == '__main__':\r\n 11         main()\r\n(Pdb) \r\n```\r\nbut expected to be \r\n```\r\n HYDRA_FULL_ERROR=1 python -m pdb -c continue test.py                  \r\nTraceback (most recent call last):\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 203, in run_and_report\r\n    return func()\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 353, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 105, in run\r\n    return run_job(\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/core/utils.py\", line 123, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"/home/ferres/ntl/cfan/experiments/hydra/test.py\", line 7, in main\r\n    1/0\r\nZeroDivisionError: division by zero\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.8/pdb.py\", line 1704, in main\r\n    pdb._runscript(mainpyfile)\r\n  File \"/usr/lib/python3.8/pdb.py\", line 1573, in _runscript\r\n    self.run(statement)\r\n  File \"/usr/lib/python3.8/bdb.py\", line 580, in run\r\n    exec(cmd, globals, locals)\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/home/ferres/ntl/cfan/experiments/hydra/test.py\", line 1, in <module>\r\n    from omegaconf import DictConfig\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/main.py\", line 32, in decorated_main\r\n    _run_hydra(\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 352, in _run_hydra\r\n    run_and_report(\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 276, in run_and_report\r\n    raise ex\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 203, in run_and_report\r\n    return func()\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 353, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 105, in run\r\n    return run_job(\r\n  File \"/home/ferres/ntl/venv/lib/python3.8/site-packages/hydra/core/utils.py\", line 123, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"/home/ferres/ntl/cfan/experiments/hydra/test.py\", line 7, in main\r\n    1/0\r\nZeroDivisionError: division by zero\r\nUncaught exception. Entering post mortem debugging\r\nRunning 'cont' or 'step' will restart the program\r\n> /home/ferres/ntl/cfan/experiments/hydra/test.py(7)main()\r\n-> 1/0\r\n(Pdb) ll\r\n  5     @hydra.main()\r\n  6     def main(cfg: DictConfig):\r\n  7  ->     1/0\r\n\r\n```\r\n## Pitch\r\n\r\nI see some possible solutions\r\nA simple solution is to add a flag `HYDRA_DEBUG` to env variables as done with `HYDRA_FULL_TRACE`. [Here](https://github.com/facebookresearch/hydra/blob/adb5808d8e221847dd591874cacaa7fbe34b393d/hydra/_internal/utils.py#L276) Exception handling is too broad and after a clean up you can still decide between `sys.exit(1)` and `raise ex` (changing this locally solved my problems)\r\n\r\n**Describe alternatives you've considered**\r\nI considered manually hacking source code of `/hydra/_internal/utils.py` (1 line change)\r\n\r\n**Are you willing to open a pull request?** (See [CONTRIBUTING](../../CONTRIBUTING.md)) <-- broken link in template\r\nYes, why not\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/926/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/926/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/922", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/922/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/922/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/922/events", "html_url": "https://github.com/facebookresearch/hydra/issues/922", "id": 686292738, "node_id": "MDU6SXNzdWU2ODYyOTI3Mzg=", "number": 922, "title": "[Bug] hydra breaks relative paths in config file", "user": {"login": "rvorias", "id": 21060408, "node_id": "MDQ6VXNlcjIxMDYwNDA4", "avatar_url": "https://avatars.githubusercontent.com/u/21060408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rvorias", "html_url": "https://github.com/rvorias", "followers_url": "https://api.github.com/users/rvorias/followers", "following_url": "https://api.github.com/users/rvorias/following{/other_user}", "gists_url": "https://api.github.com/users/rvorias/gists{/gist_id}", "starred_url": "https://api.github.com/users/rvorias/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rvorias/subscriptions", "organizations_url": "https://api.github.com/users/rvorias/orgs", "repos_url": "https://api.github.com/users/rvorias/repos", "events_url": "https://api.github.com/users/rvorias/events{/privacy}", "received_events_url": "https://api.github.com/users/rvorias/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-08-26T12:48:47Z", "updated_at": "2022-09-29T05:29:01Z", "closed_at": "2020-08-26T14:35:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nIn my config file, `test_config.yaml` I have:\r\n```yaml\r\nDATA:\r\n  BGR: true\r\n  COCO_ANNOTATIONS: null\r\n  CROP_HEIGHT: 64\r\n  CROP_WIDTH: 256\r\n  DATA_DIR: ../datasets/train\r\n```\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```python\r\nimport hydra\r\n\r\n@hydra.main(config_name=\"test_config.yaml\")\r\ndef run(cfg):\r\n    print(os.getcwd())\r\n```\r\n** Stack trace/error message **\r\n```\r\nnormal_work_dir/outputs/2020-08-26/12-40-31\r\n```\r\n\r\n## Expected Behavior\r\nThe normal working directory should not change.\r\n\r\n## System information\r\n- **Hydra Version** :  hydra-core==1.0.0rc4\r\n- **Python version** :  Python 3.6.9\r\n- **Virtual environment type and version** : Custom TF2.3 docker version\r\n- **Operating system** : Linux\r\n\r\n## Additional context\r\n/\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/922/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/922/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/919", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/919/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/919/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/919/events", "html_url": "https://github.com/facebookresearch/hydra/issues/919", "id": 685358474, "node_id": "MDU6SXNzdWU2ODUzNTg0NzQ=", "number": 919, "title": "[Bug] AttributeError: module 'hydra' has no attribute 'main'", "user": {"login": "paantya", "id": 2975813, "node_id": "MDQ6VXNlcjI5NzU4MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2975813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paantya", "html_url": "https://github.com/paantya", "followers_url": "https://api.github.com/users/paantya/followers", "following_url": "https://api.github.com/users/paantya/following{/other_user}", "gists_url": "https://api.github.com/users/paantya/gists{/gist_id}", "starred_url": "https://api.github.com/users/paantya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paantya/subscriptions", "organizations_url": "https://api.github.com/users/paantya/orgs", "repos_url": "https://api.github.com/users/paantya/repos", "events_url": "https://api.github.com/users/paantya/events{/privacy}", "received_events_url": "https://api.github.com/users/paantya/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-25T10:12:16Z", "updated_at": "2021-03-11T13:08:19Z", "closed_at": "2020-08-25T16:10:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nAttributeError: module 'hydra' has no attribute 'main'\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n```\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\n@hydra.main(config_path=\"config\", config_name=\"config\", strict=False)\r\ndef run(cfg: DictConfig) -> None:\r\n    print(cfg)\r\n\r\nif __name__ == '__main__':\r\n    run()\r\n```\r\n\r\n```\r\n    @hydra.main(config_path=\"config\", config_name=\"config\", strict=False)\r\nAttributeError: module 'hydra' has no attribute 'main'\r\n```\r\n\r\n## Expected Behavior\r\nJust works\r\n\r\n## System information\r\nHydra: hydra-core-1.0.0rc4\r\nOS: Ubuntu 18.04.5 LTS (x86_64)\r\nGCC version: (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\nClang version: Could not collect\r\nCMake version: Could not collect\r\n\r\nPython version: 3.6 (64-bit runtime)\r\nIs CUDA available: N/A\r\nCUDA runtime version: 9.1.85\r\nGPU models and configuration: Could not collect\r\nNvidia driver version: Could not collect\r\ncuDNN version: Could not collect\r\n\r\nVersions of relevant libraries:\r\n[pip3] numpy==1.19.0\r\n[conda] Could not collect\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/919/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/904", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/904/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/904/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/904/events", "html_url": "https://github.com/facebookresearch/hydra/issues/904", "id": 683831698, "node_id": "MDU6SXNzdWU2ODM4MzE2OTg=", "number": 904, "title": "[Bug] Not able to Access Parent Fields in instantiate Interpolation", "user": {"login": "Queuecumber", "id": 5865387, "node_id": "MDQ6VXNlcjU4NjUzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/5865387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Queuecumber", "html_url": "https://github.com/Queuecumber", "followers_url": "https://api.github.com/users/Queuecumber/followers", "following_url": "https://api.github.com/users/Queuecumber/following{/other_user}", "gists_url": "https://api.github.com/users/Queuecumber/gists{/gist_id}", "starred_url": "https://api.github.com/users/Queuecumber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Queuecumber/subscriptions", "organizations_url": "https://api.github.com/users/Queuecumber/orgs", "repos_url": "https://api.github.com/users/Queuecumber/repos", "events_url": "https://api.github.com/users/Queuecumber/events{/privacy}", "received_events_url": "https://api.github.com/users/Queuecumber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 2, "created_at": "2020-08-21T21:16:13Z", "updated_at": "2020-08-24T00:06:16Z", "closed_at": "2020-08-24T00:06:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nFollowup on #388 the parent fields seem to be getting lost again. If I have a field that is an interpolation of a field higher up in the hierarchy, I can print out the value fine but I can't use it within instiantiate.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n**Minimal** code snippet which should print three times the same integer value. \r\n\r\nThe first print is the parent field\r\nThe second print accesses the child field, which is an interpolation of the parent field\r\nThe third print uses instantiate to create an object which takes the child field as a parameter and prints from that object\r\n\r\nBefore the third print happens the exception is thrown\r\n\r\n```\r\nimport time\r\nimport hydra\r\nimport submitit\r\n\r\nclass GetsTheInteger:\r\n    def __init__(self, same_integer):\r\n        self.intval = intval\r\n        \r\n\r\n@hydra.main(config_name=\"test2.yaml\")\r\ndef main(cfg) -> None:\r\n    print(cfg.data.integer)\r\n    print(cfg.data.test.same_integer)\r\n\r\n    g = hydra.utils.instantiate(cfg.data.test)\r\n    print(g.intval)    \r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 203, in run_and_report\r\n    return func()\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 355, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 110, in run\r\n    job_subdir_key=None,\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/hydra/core/utils.py\", line 123, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"test2.py\", line 15, in main\r\n    g = hydra.utils.instantiate(cfg.data.test)\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/hydra/utils.py\", line 68, in call\r\n    raise HydraException(f\"Error calling '{cls}' : {e}\") from e\r\nhydra.errors.HydraException: Error calling 'test2.GetsTheInteger' : str interpolation key 'data.integer' not found\r\n        full_key: same_integer\r\n        reference_type=Any\r\n        object_type=dict\r\n```\r\n\r\n## Expected Behavior\r\n\r\nNo crash, can instantiate objects whose parameters depend on interpolations of parent fields\r\n\r\n## System information\r\n- **Hydra Version** :  git master\r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : Conda\r\n- **Operating system** :  Ubuntu 18.04 (fair cluster)", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/904/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/904/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/903", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/903/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/903/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/903/events", "html_url": "https://github.com/facebookresearch/hydra/issues/903", "id": 683818598, "node_id": "MDU6SXNzdWU2ODM4MTg1OTg=", "number": 903, "title": "[Bug] Hydra Resolvers Not Being Propagated ", "user": {"login": "Queuecumber", "id": 5865387, "node_id": "MDQ6VXNlcjU4NjUzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/5865387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Queuecumber", "html_url": "https://github.com/Queuecumber", "followers_url": "https://api.github.com/users/Queuecumber/followers", "following_url": "https://api.github.com/users/Queuecumber/following{/other_user}", "gists_url": "https://api.github.com/users/Queuecumber/gists{/gist_id}", "starred_url": "https://api.github.com/users/Queuecumber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Queuecumber/subscriptions", "organizations_url": "https://api.github.com/users/Queuecumber/orgs", "repos_url": "https://api.github.com/users/Queuecumber/repos", "events_url": "https://api.github.com/users/Queuecumber/events{/privacy}", "received_events_url": "https://api.github.com/users/Queuecumber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 6, "created_at": "2020-08-21T20:44:44Z", "updated_at": "2020-08-21T21:40:39Z", "closed_at": "2020-08-21T21:40:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\n\r\nFollow up for #861 I'm using submitit to launch jobs and they can't resolve the `${hyda:...}` interpolations. \r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\nThis **minimal** code makes sure the error message is written to the console used to launch: \r\n\r\n```\r\nimport time\r\nimport hydra\r\nimport submitit\r\n\r\ndef single_job(cfg) -> None:\r\n    print(cfg.data.stats)\r\n\r\n\r\ndef follow(job):\r\n    with open(job.paths.stdout) as fo:\r\n        with open(job.paths.stderr) as fe:\r\n            while True:\r\n                lo = fo.readline()\r\n                    \r\n                if lo:\r\n                    yield lo   \r\n\r\n                le = fe.readline()\r\n                if le:\r\n                    yield le\r\n\r\n                if job.state != 'RUNNING' and not (le or lo):\r\n                    break\r\n                else:\r\n                    time.sleep(0.1)\r\n\r\n\r\n@hydra.main(config_name=\"../configs/test.yaml\")\r\ndef main(cfg) -> None:\r\n    executor = submitit.LocalExecutor(folder='output')\r\n    job = executor.submit(single_job, cfg)\r\n\r\n    while job.state != \"RUNNING\":\r\n        time.sleep(1)\r\n\r\n    while not job.paths.stdout.exists():\r\n        time.sleep(1)\r\n\r\n    loglines = follow(job)\r\n    for line in loglines:\r\n        print(line, end='', flush=True)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nConfig:\r\n\r\n```\r\ndata:\r\n  stats: ${hydra:runtime.cwd}/stats/cstats.pt\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/submitit/core/_submit.py\", line 11, in <module>\r\n    submitit_main()\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/submitit/core/submission.py\", line 65, in submitit_main\r\n    process_job(args.folder)\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/submitit/core/submission.py\", line 58, in process_job\r\n    raise error\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/submitit/core/submission.py\", line 47, in process_job\r\n    result = delayed.result()\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/submitit/core/utils.py\", line 123, in result\r\n    self._result = self.function(*self.args, **self.kwargs)\r\n  File \"scripts/test.py\", line 12, in single_job\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 297, in __getattr__\r\n    self._format_and_raise(key=key, value=None, cause=e)\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/omegaconf/base.py\", line 101, in _format_and_raise\r\n    type_override=type_override,\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/omegaconf/_utils.py\", line 675, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/private/home/mehrlich/.conda/envs/qgac/lib/python3.7/site-packages/omegaconf/_utils.py\", line 591, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nomegaconf.errors.UnsupportedInterpolationType: Unsupported interpolation type hydra\r\n        full_key: data.stats\r\n        reference_type=Any\r\n        object_type=dict\r\n```\r\n\r\n## Expected Behavior\r\n\r\nNo crash, able to use `${hydra:...}` interpolations\r\n\r\n## System information\r\n- **Hydra Version** :  git master \r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : Conda\r\n- **Operating system** :  Ubuntu 18.04 (FAIR cluster)\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/903/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/903/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/895", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/895/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/895/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/895/events", "html_url": "https://github.com/facebookresearch/hydra/issues/895", "id": 682801925, "node_id": "MDU6SXNzdWU2ODI4MDE5MjU=", "number": 895, "title": "[Bug] trying to use the mandatory attribute according to tutorial", "user": {"login": "Alexfinkelshtein", "id": 16181467, "node_id": "MDQ6VXNlcjE2MTgxNDY3", "avatar_url": "https://avatars.githubusercontent.com/u/16181467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alexfinkelshtein", "html_url": "https://github.com/Alexfinkelshtein", "followers_url": "https://api.github.com/users/Alexfinkelshtein/followers", "following_url": "https://api.github.com/users/Alexfinkelshtein/following{/other_user}", "gists_url": "https://api.github.com/users/Alexfinkelshtein/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alexfinkelshtein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alexfinkelshtein/subscriptions", "organizations_url": "https://api.github.com/users/Alexfinkelshtein/orgs", "repos_url": "https://api.github.com/users/Alexfinkelshtein/repos", "events_url": "https://api.github.com/users/Alexfinkelshtein/events{/privacy}", "received_events_url": "https://api.github.com/users/Alexfinkelshtein/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-08-20T15:17:11Z", "updated_at": "2020-08-20T20:12:35Z", "closed_at": "2020-08-20T20:12:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\nHi, thanks for Hydra, seem like a perfect solution for me from reading the docs. especially the instance features\r\n\r\nI'm trying to run some basic stuff to get familiar with Hydra, and when I'm trying to use the MISSING required attribute it crashes.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra (the recommended one from the README)\r\n\r\n- [x] I created a minimal repro\r\n\r\n\r\nIt is demonstrated in the following notebook:\r\n\r\nhttps://colab.research.google.com/drive/1fsWCyEiZCntZarBjcc8VUgYG14C6K0DT?usp=sharing\r\n\r\n** Stack trace/error message **\r\n```\r\nRecursionError                            Traceback (most recent call last)\r\n/usr/local/lib/python3.6/dist-packages/omegaconf/dictconfig.py in __getattr__(self, key)\r\n    294 \r\n--> 295             return self._get_impl(key=key, default_value=DEFAULT_VALUE_MARKER)\r\n    296         except Exception as e:\r\n\r\n1438 frames\r\nRecursionError: maximum recursion depth exceeded\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nKeyError                                  Traceback (most recent call last)\r\nKeyError: '_content'\r\n```\r\n\r\n## Expected Behavior\r\ncreating an instance\r\n\r\n## System information\r\n- **Hydra Version** :  1.0\r\n- **Python version** : COLAB\r\n- **Virtual environment type and version** :  COLAB\r\n- **Operating system** : COLAB\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/895/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/895/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/891", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/891/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/891/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/891/events", "html_url": "https://github.com/facebookresearch/hydra/issues/891", "id": 682052044, "node_id": "MDU6SXNzdWU2ODIwNTIwNDQ=", "number": 891, "title": "[Bug] Hydra's override grammar allows quoted resolver args, but OmegaConf does not recognize them", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 0, "created_at": "2020-08-19T18:37:26Z", "updated_at": "2020-08-22T02:41:47Z", "closed_at": "2020-08-22T02:41:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n## Description\r\n\r\nBest explained with an example (assume a basic `my_app.py` that prints the resolved config):\r\n\r\n```bash\r\npython my_app.py +port='${env:PORT}'     # works, may crash if PORT is not defined\r\npython my_app.py +port='${env:PORT,80}'  # crashes: not recognized by Hydra's grammar\r\npython my_app.py +port='${env:PORT,\"80\"}'  # accepted by Hydra but OmegaConf does not resolve it\r\n```\r\n\r\nThis is because in the current version of OmegaConf, quotes are not allowed inside interpolations.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```python\r\nfrom omegaconf import DictConfig, OmegaConf\r\nimport hydra\r\n\r\n@hydra.main()\r\ndef my_app(cfg: DictConfig) -> None:\r\n    print(OmegaConf.to_yaml(cfg, resolve=True))\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\nThen try the examples above.\r\n\r\n** Stack trace/error message **\r\n\r\nJust showing the last example:\r\n```\r\nport: ${env:PORT,\"80\"}\r\n```\r\n\r\n## Expected Behavior\r\nHydra should allow the same characters as OmegaConf.\r\n\r\n## System information\r\n- **Hydra Version** :  current master (7afee097)\r\n- **Python version** : 3.8.3\r\n- **Virtual environment type and version** : conda 4.8.3\r\n- **Operating system** : MacOS\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/891/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/891/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/887", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/887/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/887/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/887/events", "html_url": "https://github.com/facebookresearch/hydra/issues/887", "id": 680761574, "node_id": "MDU6SXNzdWU2ODA3NjE1NzQ=", "number": 887, "title": "[Bug] instantiate fails if None config is passed ", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-18T07:24:02Z", "updated_at": "2020-08-18T16:07:05Z", "closed_at": "2020-08-18T16:07:05Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "should return None.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/887/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/887/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/881", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/881/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/881/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/881/events", "html_url": "https://github.com/facebookresearch/hydra/issues/881", "id": 679660075, "node_id": "MDU6SXNzdWU2Nzk2NjAwNzU=", "number": 881, "title": "[Bug]: Nevergrad sweeper does not work with integers if there are less than 6 choices", "user": {"login": "YannDubs", "id": 24327668, "node_id": "MDQ6VXNlcjI0MzI3NjY4", "avatar_url": "https://avatars.githubusercontent.com/u/24327668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YannDubs", "html_url": "https://github.com/YannDubs", "followers_url": "https://api.github.com/users/YannDubs/followers", "following_url": "https://api.github.com/users/YannDubs/following{/other_user}", "gists_url": "https://api.github.com/users/YannDubs/gists{/gist_id}", "starred_url": "https://api.github.com/users/YannDubs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YannDubs/subscriptions", "organizations_url": "https://api.github.com/users/YannDubs/orgs", "repos_url": "https://api.github.com/users/YannDubs/repos", "events_url": "https://api.github.com/users/YannDubs/events{/privacy}", "received_events_url": "https://api.github.com/users/YannDubs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1620049642, "node_id": "MDU6TGFiZWwxNjIwMDQ5NjQy", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/awaiting_response", "name": "awaiting_response", "color": "edac74", "default": false, "description": "Awaiting response"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-15T23:46:46Z", "updated_at": "2020-08-20T20:14:37Z", "closed_at": "2020-08-20T20:14:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Nevergrad sweeper complains if it has less than 6 values to sweep over in a range (e.g. `lower: 1` `upper:3`) and asks to use a list instead (`ValueError: For integers with 6 or fewer values, use a choice instead`). But if you use a list with integers it does not work because it assumes that choices contain only strings:\r\n\r\n![Screen Shot 2020-08-15 at 7 42 39 PM](https://user-images.githubusercontent.com/24327668/90323444-84a3b680-df2f-11ea-8d77-1ce82ab9c7c6.png)\r\n\r\nLine where the first error is raised: https://github.com/facebookresearch/hydra/blob/0e001afb2a55275b6f7dc33e79035dbf3a797c00/plugins/hydra_nevergrad_sweeper/hydra_plugins/hydra_nevergrad_sweeper/core.py#L178\r\nHydra Version: 1.0.0rc2\r\n\r\n\r\nOf course I can give a string and then convert in my code, but it would probably be better to solve it differently? For example sliently treating it as a list without raising the first error ? Or at least to say in the raised error that you have to use a list and convert the str to int in your own code ? Not sure what is the best way..\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/881/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/873", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/873/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/873/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/873/events", "html_url": "https://github.com/facebookresearch/hydra/issues/873", "id": 678597019, "node_id": "MDU6SXNzdWU2Nzg1OTcwMTk=", "number": 873, "title": "command line is incorrectly removing whitespace in primitives", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1518816165, "node_id": "MDU6TGFiZWwxNTE4ODE2MTY1", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/In%20progress", "name": "In progress", "color": "569dbf", "default": false, "description": "Work in progress"}], "state": "closed", "locked": false, "assignee": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 5, "created_at": "2020-08-13T16:57:26Z", "updated_at": "2020-08-20T21:29:11Z", "closed_at": "2020-08-20T21:29:11Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```commandline\r\n$ python foo.py \"+x=a b c\"\r\n```\r\nresults in:\r\n```yaml\r\nx: abc\r\n```\r\n\r\nbecause the grammar is ignoring whitespace outside of quoted strings and there is a concatenation phase for primitives.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/873/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/873/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/861", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/861/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/861/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/861/events", "html_url": "https://github.com/facebookresearch/hydra/issues/861", "id": 676543828, "node_id": "MDU6SXNzdWU2NzY1NDM4Mjg=", "number": 861, "title": "[Bug] Custom OmegaConf resolvers registered at module level aren't propagated to submitit launcher processes", "user": {"login": "calebho", "id": 16418728, "node_id": "MDQ6VXNlcjE2NDE4NzI4", "avatar_url": "https://avatars.githubusercontent.com/u/16418728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebho", "html_url": "https://github.com/calebho", "followers_url": "https://api.github.com/users/calebho/followers", "following_url": "https://api.github.com/users/calebho/following{/other_user}", "gists_url": "https://api.github.com/users/calebho/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebho/subscriptions", "organizations_url": "https://api.github.com/users/calebho/orgs", "repos_url": "https://api.github.com/users/calebho/repos", "events_url": "https://api.github.com/users/calebho/events{/privacy}", "received_events_url": "https://api.github.com/users/calebho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 7, "created_at": "2020-08-11T03:06:52Z", "updated_at": "2020-08-21T19:16:57Z", "closed_at": "2020-08-21T02:02:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nNot sure whether this is expected behavior. If it is, it should be documented somewhere. If you register a custom OmegaConf resolver at module scope, they won't be propagated to the launcher processes. Thus when you try to access a config node which uses a custom resolver, you get an exception.\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n```python\r\n# foo.py\r\nimport hydra\r\nfrom omegaconf import OmegaConf\r\n\r\n\r\ndef my_custom_resolver():\r\n    return \"foo\"\r\n\r\n\r\nOmegaConf.register_resolver(\"my_custom_resolver\", my_custom_resolver)\r\n\r\n\r\n@hydra.main(config_name=\"foo\")\r\ndef main(cfg):\r\n    assert cfg.x == \"foo\"\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n```yaml\r\n# foo.yaml\r\nx: ${my_custom_resolver:}\r\n```\r\nRegular run works fine:\r\n```\r\n$ python foo.py\r\n```\r\nMultirun with submitit throws an exception:\r\n```\r\n$ python foo.py -m hydra/launcher=submitit_local\r\n[2020-08-10 19:56:14,485][HYDRA] Submitit 'local' sweep output dir : multirun/2020-08-10/19-56-14\r\n[2020-08-10 19:56:14,487][HYDRA] \t#0 :\r\nTraceback (most recent call last):\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 344, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 132, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 135, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 149, in launch\r\n    return [j.results()[0] for j in jobs]\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 149, in <listcomp>\r\n    return [j.results()[0] for j in jobs]\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/submitit/core/core.py\", line 291, in results\r\n    raise job_exception  # pylint: disable=raising-bad-type\r\nsubmitit.core.utils.FailedJobError: Job (task=0) failed during processing with trace:\r\n----------------------\r\nTraceback (most recent call last):\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/submitit/core/submission.py\", line 47, in process_job\r\n    result = delayed.result()\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/submitit/core/utils.py\", line 123, in result\r\n    self._result = self.function(*self.args, **self.kwargs)\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 80, in __call__\r\n    job_subdir_key=\"hydra.sweep.subdir\",\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra/core/utils.py\", line 123, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"foo.py\", line 14, in main\r\n    assert cfg.x == \"foo\"\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 315, in __getattr__\r\n    self._format_and_raise(key=key, value=None, cause=e)\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/omegaconf/base.py\", line 101, in _format_and_raise\r\n    type_override=type_override,\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/omegaconf/_utils.py\", line 669, in format_and_raise\r\n    _raise(ex, cause)\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/omegaconf/_utils.py\", line 583, in _raise\r\n    raise ex  # set end OC_CAUSE=1 for full backtrace\r\nomegaconf.errors.UnsupportedInterpolationType: Unsupported interpolation type my_custom_resolver\r\n\tfull_key: x\r\n\treference_type=Optional[Dict[Any, Any]]\r\n\tobject_type=dict\r\n\r\n----------------------\r\nYou can check full logs with 'job.stderr(0)' and 'job.stdout(0)'or at paths:\r\n  - /private/home/calebh/scratch/hydra-bug/multirun/2020-08-10/19-56-14/.submitit/34113/34113_0_log.err\r\n  - /private/home/calebh/scratch/hydra-bug/multirun/2020-08-10/19-56-14/.submitit/34113/34113_0_log.out\r\n```\r\n\r\nMoving `OmegaConf.register_resolver` inside `main` works:\r\n```diff\r\n--- foo.py\t2020-08-10 19:51:10.401891000 -0700\r\n+++ foo_fixed.py\t2020-08-10 19:58:19.693452000 -0700\r\n@@ -6,11 +6,9 @@\r\n     return \"foo\"\r\n\r\n\r\n-OmegaConf.register_resolver(\"my_custom_resolver\", my_custom_resolver)\r\n-\r\n-\r\n @hydra.main(config_name=\"foo\")\r\n def main(cfg):\r\n+    OmegaConf.register_resolver(\"my_custom_resolver\", my_custom_resolver)\r\n     assert cfg.x == \"foo\"\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version**: \r\n    ```\r\n    pip list | grep hydra\r\n    hydra-core              1.0.0rc2\r\n    hydra-submitit-launcher 1.0.0rc4\r\n    ```\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.8.3\r\n- **Operating system** : Ubuntu 18.04.3\r\n\r\n## Additional context\r\nI think this is an issue with how submitit is serializing the Python interpreter state to the worker processes. Might require a non-trivial change in its design\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/861/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/861/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/858", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/858/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/858/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/858/events", "html_url": "https://github.com/facebookresearch/hydra/issues/858", "id": 676303009, "node_id": "MDU6SXNzdWU2NzYzMDMwMDk=", "number": 858, "title": "[Bug] autocompletion is not working if PATH environment has `.` in the list", "user": {"login": "thoth291", "id": 2971670, "node_id": "MDQ6VXNlcjI5NzE2NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2971670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thoth291", "html_url": "https://github.com/thoth291", "followers_url": "https://api.github.com/users/thoth291/followers", "following_url": "https://api.github.com/users/thoth291/following{/other_user}", "gists_url": "https://api.github.com/users/thoth291/gists{/gist_id}", "starred_url": "https://api.github.com/users/thoth291/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thoth291/subscriptions", "organizations_url": "https://api.github.com/users/thoth291/orgs", "repos_url": "https://api.github.com/users/thoth291/repos", "events_url": "https://api.github.com/users/thoth291/events{/privacy}", "received_events_url": "https://api.github.com/users/thoth291/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-08-10T17:38:36Z", "updated_at": "2020-08-19T03:22:01Z", "closed_at": "2020-08-19T03:22:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nBasically when you install it for that terminal it is not working.\r\nSo I did comparison with my MacOS installation (all the same versions of hydra and stuff) and got that the difference in behavior comes from `command` tool.\r\nHere is how it reacts on working side (on my mac):\r\n```shell\r\n$ command -v python simple.py\r\n/path/to/bin/python\r\n```\r\nAnd how it reacts in CentOS:\r\n```shell\r\n$ command -v python simple.py\r\n/path/to/bin/python\r\n./simple.py\r\n```\r\n## Expected Behavior\r\nI was able to fix it by replacing this in the autocompletion installation script:\r\n```bash\r\n if ! [ -x \"$(command -v $helper)\" ]; then\r\n        false\r\n fi\r\n```\r\nto this one:\r\n```bash\r\ncmd=($(command -v $helper))\r\nif ! [ -x \"${cmd[0]}\" ]; then\r\n        false\r\nfi\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc3\r\n- **Python version** : 3.8.3\r\n- **Virtual environment type and version** : conda, 4.8.3\r\n- **Operating system** : CentOS7\r\n- **Bash Version** : 4.2.46(2)\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/858/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/856", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/856/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/856/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/856/events", "html_url": "https://github.com/facebookresearch/hydra/issues/856", "id": 676261910, "node_id": "MDU6SXNzdWU2NzYyNjE5MTA=", "number": 856, "title": "[Bug] multirun is not working well with bash autocompletion when sweeps are lists (p=1,2)", "user": {"login": "thoth291", "id": 2971670, "node_id": "MDQ6VXNlcjI5NzE2NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2971670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thoth291", "html_url": "https://github.com/thoth291", "followers_url": "https://api.github.com/users/thoth291/followers", "following_url": "https://api.github.com/users/thoth291/following{/other_user}", "gists_url": "https://api.github.com/users/thoth291/gists{/gist_id}", "starred_url": "https://api.github.com/users/thoth291/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thoth291/subscriptions", "organizations_url": "https://api.github.com/users/thoth291/orgs", "repos_url": "https://api.github.com/users/thoth291/repos", "events_url": "https://api.github.com/users/thoth291/events{/privacy}", "received_events_url": "https://api.github.com/users/thoth291/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 2, "created_at": "2020-08-10T16:26:39Z", "updated_at": "2020-08-19T21:53:50Z", "closed_at": "2020-08-19T21:53:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nWhen I do this:\r\n```shell\r\npython simple.py -m model.p1=1,2 model.p2=2 Ambiguous value for argument 'model.p1=1,2'\r\n1. To use it as a list, use model.p1=[1,2]\r\n2. To use it as string use model.p1=\\'1,2\\'\r\n3. To sweep over it, add --multirun to your command line\r\n```\r\n\r\n** with HYDRA_FULL_ERROR=1 Stack trace/error message **\r\n```\r\n  File \"/path/to/hydra/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 202, in run_and_report\r\n    return func()\r\n  File \"/path/to/hydra/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 362, in <lambda>\r\n    lambda: hydra.shell_completion(\r\n  File \"/path/to/hydra/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 243, in shell_completion\r\n    plugin.query(config_name=config_name)\r\n  File \"/path/to/hydra/lib/python3.8/site-packages/hydra/_internal/core_plugins/bash_completion.py\", line 80, in query\r\n    print(\" \".join(self._query(config_name=config_name, line=line)))\r\n  File \"/path/to/hydra/lib/python3.8/site-packages/hydra/plugins/completion_plugin.py\", line 214, in _query\r\n    config = self.config_loader.load_configuration(\r\n  File \"/path/to/hydra/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 152, in load_configuration\r\n    return self._load_configuration(\r\n  File \"/path/to/hydra/lib/python3.8/site-packages/hydra/_internal/config_loader_impl.py\", line 207, in _load_configuration\r\n    raise ConfigCompositionException(msg)\r\nhydra.errors.ConfigCompositionException: Ambiguous value for argument 'model.p1=1,2'\r\n1. To use it as a list, use model.p1=[1,2]\r\n2. To use it as string use model.p1=\\'1,2\\'\r\n3. To sweep over it, add --multirun to your command line\r\n```\r\n\r\n## Expected Behavior\r\nI would expect it not to fail.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc3\r\n- **Python version** : 3.8.3\r\n- **Virtual environment type and version** : conda 4.8.3\r\n- **Operating system** : MacOS, CentOS\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/856/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/854", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/854/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/854/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/854/events", "html_url": "https://github.com/facebookresearch/hydra/issues/854", "id": 675768586, "node_id": "MDU6SXNzdWU2NzU3Njg1ODY=", "number": 854, "title": "[Bug] Cannot add a value to hydra.job.set_env from the command line.", "user": {"login": "YannDubs", "id": 24327668, "node_id": "MDQ6VXNlcjI0MzI3NjY4", "avatar_url": "https://avatars.githubusercontent.com/u/24327668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YannDubs", "html_url": "https://github.com/YannDubs", "followers_url": "https://api.github.com/users/YannDubs/followers", "following_url": "https://api.github.com/users/YannDubs/following{/other_user}", "gists_url": "https://api.github.com/users/YannDubs/gists{/gist_id}", "starred_url": "https://api.github.com/users/YannDubs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YannDubs/subscriptions", "organizations_url": "https://api.github.com/users/YannDubs/orgs", "repos_url": "https://api.github.com/users/YannDubs/repos", "events_url": "https://api.github.com/users/YannDubs/events{/privacy}", "received_events_url": "https://api.github.com/users/YannDubs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 1, "created_at": "2020-08-09T20:41:47Z", "updated_at": "2020-08-20T02:12:37Z", "closed_at": "2020-08-20T02:12:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nI cannot add a append a config value for the hydra configuration (hydra installed from source)\r\n\r\n## To reproduce\r\n\r\n\r\n**Minimal Code/Config snippet to reproduce**\r\n\r\n\r\n```\r\npython main.py +hydra.job.env_set.WANDB_NOTES=\"X\"\r\n```\r\n\r\n**Stack trace/error message**\r\n```\r\nError merging override +hydra.job.env_set.WANDB_NOTES=\"X\"\r\nKey 'WANDB_NOTES' is not in struct\r\n\tfull_key: hydra.job.env_set.WANDB_NOTES\r\n\treference_type=Dict[str, str]\r\n\tobject_type=dict\r\n```\r\n\r\n## Additional context\r\n- I don't have the issue with `+` on non hydra config\r\n- if I add `hydra.job.env_set.WANDB_NOTES=\"\"` in the config then I can correctly override the value (without `+`)\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc2\r\n- **Python version** : 3.8.5\r\n- **Operating system** : Ubuntu 18.04.3 LTS\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/854/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/854/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/849", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/849/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/849/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/849/events", "html_url": "https://github.com/facebookresearch/hydra/issues/849", "id": 674749392, "node_id": "MDU6SXNzdWU2NzQ3NDkzOTI=", "number": 849, "title": "[Bug] Local submitit launcher can't fetch JobEnvironment", "user": {"login": "calebho", "id": 16418728, "node_id": "MDQ6VXNlcjE2NDE4NzI4", "avatar_url": "https://avatars.githubusercontent.com/u/16418728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebho", "html_url": "https://github.com/calebho", "followers_url": "https://api.github.com/users/calebho/followers", "following_url": "https://api.github.com/users/calebho/following{/other_user}", "gists_url": "https://api.github.com/users/calebho/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebho/subscriptions", "organizations_url": "https://api.github.com/users/calebho/orgs", "repos_url": "https://api.github.com/users/calebho/repos", "events_url": "https://api.github.com/users/calebho/events{/privacy}", "received_events_url": "https://api.github.com/users/calebho/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-08-07T04:32:25Z", "updated_at": "2020-08-10T19:45:01Z", "closed_at": "2020-08-09T23:10:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n## Description\r\nCalling `submitit.JobEnvironment()` raises an exception with `hydra/launcher=submitit_local`\r\n\r\n## Checklist\r\n- [x] I checked on the latest version of Hydra\r\n- [x] I created a minimal repro\r\n\r\n## To reproduce\r\n\r\nDirectory structure:\r\n```\r\n.\r\n\u251c\u2500\u2500 foo.py\r\n\u2514\u2500\u2500 foo.yaml\r\n```\r\nContents:\r\n```yaml\r\ndefaults:\r\n  - hydra/launcher: submitit_local\r\n```\r\n```python\r\nimport hydra\r\nimport submitit\r\n\r\n\r\n@hydra.main(config_name=\"foo\")\r\ndef main(cfg):\r\n    submitit.JobEnvironment()\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n$ HYDRA_FULL_ERROR=1 python foo.py\r\nTraceback (most recent call last):\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 336, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 109, in run\r\n    job_subdir_key=None,\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/hydra/core/utils.py\", line 123, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"foo.py\", line 7, in main\r\n    submitit.JobEnvironment()\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/submitit/core/job_environment.py\", line 37, in __new__\r\n    return plugins.get_job_environment()\r\n  File \"/private/home/calebh/miniconda3/envs/bench-detectron2/lib/python3.7/site-packages/submitit/core/plugins.py\", line 82, in get_job_environment\r\n    f\"Could not figure out which environment the job is runnning in. Known environments: {', '.join(envs.keys())}.\"\r\nRuntimeError: Could not figure out which environment the job is runnning in. Known environments: slurm, local, debug.\r\n```\r\n\r\n## Expected Behavior\r\nShould not throw\r\n\r\n## System information\r\n- **Hydra Version** : \r\n    ```\r\n    $ pip list | grep hydra\r\n    hydra-core              1.0.0rc2\r\n    hydra-submitit-launcher 1.0.0rc4\r\n    ```\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.8.3 \r\n- **Operating system** : Ubuntu 18.04.3", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/849/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/849/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/844", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/844/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/844/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/844/events", "html_url": "https://github.com/facebookresearch/hydra/issues/844", "id": 671713327, "node_id": "MDU6SXNzdWU2NzE3MTMzMjc=", "number": 844, "title": "[Bug] Unable to import hydra config in notebooks", "user": {"login": "rohitgirdhar", "id": 1893429, "node_id": "MDQ6VXNlcjE4OTM0Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1893429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohitgirdhar", "html_url": "https://github.com/rohitgirdhar", "followers_url": "https://api.github.com/users/rohitgirdhar/followers", "following_url": "https://api.github.com/users/rohitgirdhar/following{/other_user}", "gists_url": "https://api.github.com/users/rohitgirdhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohitgirdhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohitgirdhar/subscriptions", "organizations_url": "https://api.github.com/users/rohitgirdhar/orgs", "repos_url": "https://api.github.com/users/rohitgirdhar/repos", "events_url": "https://api.github.com/users/rohitgirdhar/events{/privacy}", "received_events_url": "https://api.github.com/users/rohitgirdhar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-08-02T23:42:33Z", "updated_at": "2020-08-03T00:13:42Z", "closed_at": "2020-08-03T00:13:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\nI just updated hydra to the latest master and am unable to import configs into notebooks.\r\n\r\n## To reproduce\r\n\r\nThe following goes into a notebook cell\r\n```python\r\nfrom hydra.experimental import initialize as hydra_initialize, compose as hydra_compose\r\nwith hydra_initialize(config_path='../../temp'):\r\n        cfg = hydra_compose(config_name='config.yaml', return_hydra_config=True)\r\n```\r\n\r\n`../../temp/config.yaml`:\r\n```\r\na: 1\r\n```\r\n\r\n\r\n** Stack trace/error message **\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nMissingConfigException                    Traceback (most recent call last)\r\n<ipython-input-25-5f7c97e6976e> in <module>\r\n      2 with hydra_initialize(config_path='../../temp'):\r\n      3         cfg = hydra_compose(config_name='config.yaml',\r\n----> 4                             return_hydra_config=True)\r\n\r\n~/.conda/envs/vidcls2/lib/python3.7/site-packages/hydra/experimental/compose.py in compose(config_name, overrides, strict, return_hydra_config)\r\n\r\n~/.conda/envs/vidcls2/lib/python3.7/site-packages/hydra/_internal/hydra.py in compose_config(self, config_name, overrides, run_mode, strict, with_log_configuration, from_shell)\r\n\r\n~/.conda/envs/vidcls2/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py in load_configuration(self, config_name, overrides, run_mode, strict, from_shell)\r\n\r\n~/.conda/envs/vidcls2/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py in _load_configuration(self, config_name, overrides, run_mode, strict, from_shell)\r\n\r\n~/.conda/envs/vidcls2/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py in _merge_defaults_into_config(self, hydra_cfg, job_cfg, job_cfg_load_trace, defaults, split_at, run_mode)\r\n\r\n~/.conda/envs/vidcls2/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py in merge_defaults_list_into_config(merged_cfg, def_list)\r\n\r\n~/.conda/envs/vidcls2/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py in _merge_config(self, cfg, config_group, name, required, is_primary_config, package_override)\r\n\r\nMissingConfigException: Could not load hydra/hydra_logging/default.\r\nAvailable options:\r\n\tcolorlog\r\n```\r\n\r\n## Expected Behavior\r\nShould be able to load\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc3 (184cabfdc)\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/844/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/844/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/840", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/840/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/840/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/840/events", "html_url": "https://github.com/facebookresearch/hydra/issues/840", "id": 669519997, "node_id": "MDU6SXNzdWU2Njk1MTk5OTc=", "number": 840, "title": "[Bug] `HydraConfig.get().run.dir` different from actual cwd", "user": {"login": "SunQpark", "id": 31339583, "node_id": "MDQ6VXNlcjMxMzM5NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/31339583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SunQpark", "html_url": "https://github.com/SunQpark", "followers_url": "https://api.github.com/users/SunQpark/followers", "following_url": "https://api.github.com/users/SunQpark/following{/other_user}", "gists_url": "https://api.github.com/users/SunQpark/gists{/gist_id}", "starred_url": "https://api.github.com/users/SunQpark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SunQpark/subscriptions", "organizations_url": "https://api.github.com/users/SunQpark/orgs", "repos_url": "https://api.github.com/users/SunQpark/repos", "events_url": "https://api.github.com/users/SunQpark/events{/privacy}", "received_events_url": "https://api.github.com/users/SunQpark/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 4, "created_at": "2020-07-31T07:41:46Z", "updated_at": "2020-08-12T22:35:50Z", "closed_at": "2020-08-12T22:35:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nI discovered that `HydraConfig.get().run.dir` returns wrong working directory, when it is called some seconds after the initialization. It seems like the time-formatter in the `hydra.run.dir` is being evaluated when HydraConfig.get() is first called, not when hydra is being initialized. \r\n\r\n## To reproduce\r\n```python3\r\nimport time\r\nfrom pathlib import Path\r\nimport hydra\r\nfrom hydra.utils import get_original_cwd\r\nfrom hydra.core.hydra_config import HydraConfig\r\n\r\n\r\n@hydra.main(config_path='conf/', config_name='db')\r\ndef main(_):\r\n    actual_cwd = Path.cwd()\r\n    print(actual_cwd.relative_to(get_original_cwd()))\r\n    # outputs/2020-07-31/16-27-21\r\n\r\n    time.sleep(3)\r\n\r\n    hydra_cwd = HydraConfig.get().run.dir\r\n    print(hydra_cwd)\r\n    # outputs/2020-07-31/16-27-24 -> this should be same as above\r\n\r\nif __name__ == '__main__':\r\n    # pylint: disable=no-value-for-parameter\r\n    main()\r\n```\r\n\r\n## Expected Behavior\r\nwritten in code abobe\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc1\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : \r\n- **Operating system** : Ubuntu 18.04.3 LTS\r\n\r\n## Additional context\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/840/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/840/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/839", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/839/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/839/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/839/events", "html_url": "https://github.com/facebookresearch/hydra/issues/839", "id": 668811801, "node_id": "MDU6SXNzdWU2Njg4MTE4MDE=", "number": 839, "title": "[Bug] Quick start guide on Colab", "user": {"login": "celsofranssa", "id": 11181748, "node_id": "MDQ6VXNlcjExMTgxNzQ4", "avatar_url": "https://avatars.githubusercontent.com/u/11181748?v=4", "gravatar_id": "", "url": "https://api.github.com/users/celsofranssa", "html_url": "https://github.com/celsofranssa", "followers_url": "https://api.github.com/users/celsofranssa/followers", "following_url": "https://api.github.com/users/celsofranssa/following{/other_user}", "gists_url": "https://api.github.com/users/celsofranssa/gists{/gist_id}", "starred_url": "https://api.github.com/users/celsofranssa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/celsofranssa/subscriptions", "organizations_url": "https://api.github.com/users/celsofranssa/orgs", "repos_url": "https://api.github.com/users/celsofranssa/repos", "events_url": "https://api.github.com/users/celsofranssa/events{/privacy}", "received_events_url": "https://api.github.com/users/celsofranssa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471570, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-30T14:43:05Z", "updated_at": "2020-07-30T15:22:22Z", "closed_at": "2020-07-30T15:20:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nUnable to run a quick start guide on Colab.\r\n\r\n## To reproduce\r\n\r\nJust run this [Colab](https://colab.research.google.com/drive/11AF7sQW3A5xdL6hVf0NL_8-ke4iuxsAd?usp=sharing) example\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-3-b7ef6b9d7e46> in <module>()\r\n      7 \r\n      8 if __name__ == \"__main__\":\r\n----> 9     my_app()\r\n\r\n2 frames\r\n/usr/local/lib/python3.6/dist-packages/hydra/main.py in decorated_main()\r\n     22                     task_function=task_function,\r\n     23                     config_path=config_path,\r\n---> 24                     strict=strict,\r\n     25                 )\r\n     26             except KeyboardInterrupt:\r\n\r\n/usr/local/lib/python3.6/dist-packages/hydra/_internal/utils.py in run_hydra(args_parser, task_function, config_path, strict)\r\n    143     config_dir, config_file = split_config_path(config_path)\r\n    144     strict = _strict_mode_strategy(strict, config_file)\r\n--> 145     task_name = detect_task_name(calling_file, calling_module)\r\n    146     search_path = create_automatic_config_search_path(\r\n    147         calling_file, calling_module, config_dir\r\n\r\n/usr/local/lib/python3.6/dist-packages/hydra/_internal/utils.py in detect_task_name(calling_file, calling_module)\r\n     71             task_name = calling_module\r\n     72     else:\r\n---> 73         raise ValueError()\r\n     74 \r\n     75     return task_name\r\n\r\nValueError: \r\n```\r\n\r\n## Expected Behavior\r\n1. Was expected that config.yaml is loaded automatically when I run my application;\r\n2. the output should be like:\r\n```python\r\n$ python my_app.py\r\ndb:\r\n  driver: mysql\r\n  pass: secret\r\n  user: omry\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/839/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/839/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/836", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/836/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/836/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/836/events", "html_url": "https://github.com/facebookresearch/hydra/issues/836", "id": 668048347, "node_id": "MDU6SXNzdWU2NjgwNDgzNDc=", "number": 836, "title": "[Bug] In some cases list with whitespace fails to parse", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 5, "created_at": "2020-07-29T18:25:46Z", "updated_at": "2022-03-16T02:27:05Z", "closed_at": "2020-08-11T22:12:52Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Example:\r\n```\r\n$ python examples/tutorials/structured_configs/1_minimal/my_app.py '+param=[[a, 1, 2], [b, 2, 3]]'\r\nno viable alternative at input '[[a, 1, 2], [': +param=[[a, 1, 2], [b, 2, 3]]\r\n                                                                   ^\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/833", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/833/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/833/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/833/events", "html_url": "https://github.com/facebookresearch/hydra/issues/833", "id": 667963646, "node_id": "MDU6SXNzdWU2Njc5NjM2NDY=", "number": 833, "title": "[Bug] root logger has FileHandler after using `hydra_task_runner`", "user": {"login": "nai62", "id": 31331343, "node_id": "MDQ6VXNlcjMxMzMxMzQz", "avatar_url": "https://avatars.githubusercontent.com/u/31331343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nai62", "html_url": "https://github.com/nai62", "followers_url": "https://api.github.com/users/nai62/followers", "following_url": "https://api.github.com/users/nai62/following{/other_user}", "gists_url": "https://api.github.com/users/nai62/gists{/gist_id}", "starred_url": "https://api.github.com/users/nai62/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nai62/subscriptions", "organizations_url": "https://api.github.com/users/nai62/orgs", "repos_url": "https://api.github.com/users/nai62/repos", "events_url": "https://api.github.com/users/nai62/events{/privacy}", "received_events_url": "https://api.github.com/users/nai62/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 5, "created_at": "2020-07-29T16:09:26Z", "updated_at": "2020-08-23T01:46:07Z", "closed_at": "2020-08-23T01:46:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\nOnce `hydra_task_runner` is called from a unit test, a FileHandler seems to be registered to the root logger of `logging`. When a logger tries to log something from another test, it fails because of the staled FileHandler.\r\n\r\nI could successfully make the tests pass by manually removing the FileHandler, i.e., adding `getLogger().handlers.pop()` at the end of `test_1()`. But it doesn't seem to be an elegant solution. Probably is it possible to remove additional handlers in `TaskTestFunction.__exit__()` or somewhere?\r\n\r\n## To reproduce\r\n```\r\nfrom logging import getLogger\r\n\r\n\r\ndef test_1(hydra_restore_singletons, hydra_task_runner):\r\n    with hydra_task_runner(\r\n        calling_file=\"test_hydra.py\",\r\n        calling_module=None,\r\n        config_path=\".\",\r\n        config_name=\"config.yaml\",\r\n    ):\r\n        logger = getLogger(__name__)\r\n        logger.info('test_1')\r\n\r\n\r\ndef test_2():\r\n    logger = getLogger(__name__)\r\n    logger.info('test_2')\r\n```\r\n\r\nThen run pytest.\r\n\r\n** Stack trace/error message **\r\n```\r\nE       FileNotFoundError: [Errno 2] No such file or directory: '/tmp/[TEMPORARY DIRECTORY]/test_hydra.log'\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  I tried both 1.0.0rc2 and master.\r\n- **Python version** : 3.8.3\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/833/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/831", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/831/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/831/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/831/events", "html_url": "https://github.com/facebookresearch/hydra/issues/831", "id": 667320469, "node_id": "MDU6SXNzdWU2NjczMjA0Njk=", "number": 831, "title": "[Bug] example notebook on binder failed to build.", "user": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 8, "created_at": "2020-07-28T19:36:30Z", "updated_at": "2020-08-15T01:44:12Z", "closed_at": "2020-08-15T01:44:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\nto reproduce, click on launch binder link from the doc\r\nhttps://hydra.cc/docs/next/advanced/jupyter_notebooks\r\n\r\nstack trace from the binder console:\r\n```\r\nBuilding wheels for collected packages: hydra-core, antlr4-python3-runtime, PyYAML\r\n  Building wheel for hydra-core (PEP 517): started\r\n  Building wheel for hydra-core (PEP 517): finished with status 'error'\r\n  ERROR: Command errored out with exit status 1:\r\n   command: /srv/conda/envs/notebook/bin/python3.7 /srv/conda/envs/notebook/lib/python3.7/site-packages/pip/_vendor/pep517/_in_process.py build_wheel /tmp/tmpff7xyxzh\r\n       cwd: /tmp/pip-req-build-rzr0b1rr\r\n  Complete output (10 lines):\r\n  running bdist_wheel\r\n  running build\r\n  running build_py\r\n  running clean\r\n  Generating parsers with antlr4\r\n  running antlr\r\n  Generating parser for Python3: ['java', '-jar', '/tmp/pip-req-build-rzr0b1rr/build_helpers/bin/antlr-4.8-complete.jar', '-Dlanguage=Python3', '-o', '/tmp/pip-req-build-rzr0b1rr/hydra/grammar/gen/', '-Xexact-output-dir', '-visitor', '/tmp/pip-req-build-rzr0b1rr/hydra/grammar/Override.g4']\r\n  ===================================================================================\r\n  | Unable to generate parsers: [Errno 2] No such file or directory: 'java': 'java' |\r\n  ===================================================================================\r\n  Building wheel for antlr4-python3-runtime (setup.py): started\r\n  Building wheel for antlr4-python3-runtime (setup.py): finished with status 'done'\r\n  Created wheel for antlr4-python3-runtime: filename=antlr4_python3_runtime-4.8-py3-none-any.whl size=141230 sha256=2addf0aa9b23342c36310e9e5291623a456acc78f2a2890851cadddd92ffc18b\r\n  Stored in directory: /tmp/pip-ephem-wheel-cache-uzsoqfww/wheels/ca/33/b7/336836125fc9bb4ceaa4376d8abca10ca8bc84ddc824baea6c\r\n  Building wheel for PyYAML (setup.py): started\r\n  Building wheel for PyYAML (setup.py): finished with status 'done'\r\n  Created wheel for PyYAML: filename=PyYAML-5.3.1-cp37-cp37m-linux_x86_64.whl size=393762 sha256=717fe48e2428266d08347c411d935a6c5ce495bd2b1067214e31bc2be89058c3\r\n  Stored in directory: /tmp/pip-ephem-wheel-cache-uzsoqfww/wheels/5e/03/1e/e1e954795d6f35dfc7b637fe2277bff021303bd9570ecea653\r\nSuccessfully built antlr4-python3-runtime PyYAML\r\nFailed to build hydra-core\r\nERROR: Could not build wheels for hydra-core which use PEP 517 and cannot be installed directly\r\nRemoving intermediate container 13bba172cf7d\r\nThe command '/bin/sh -c ${KERNEL_PYTHON_PREFIX}/bin/pip install --no-cache-dir .' returned a non-zero code: 1\r\n  ----------------------------------------\r\n  ERROR: Failed building wheel for hydra-core\r\n```\r\n\r\n\r\n![Screen Shot 2020-07-28 at 12 35 18 PM](https://user-images.githubusercontent.com/4642412/88712581-cda1e100-d0ce-11ea-9b56-efdfc613791b.png)\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/831/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/830", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/830/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/830/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/830/events", "html_url": "https://github.com/facebookresearch/hydra/issues/830", "id": 667302840, "node_id": "MDU6SXNzdWU2NjczMDI4NDA=", "number": 830, "title": "[Bug] MLFlow folder not created with Hydra context", "user": {"login": "nathansomavarapu", "id": 1735545, "node_id": "MDQ6VXNlcjE3MzU1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1735545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nathansomavarapu", "html_url": "https://github.com/nathansomavarapu", "followers_url": "https://api.github.com/users/nathansomavarapu/followers", "following_url": "https://api.github.com/users/nathansomavarapu/following{/other_user}", "gists_url": "https://api.github.com/users/nathansomavarapu/gists{/gist_id}", "starred_url": "https://api.github.com/users/nathansomavarapu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nathansomavarapu/subscriptions", "organizations_url": "https://api.github.com/users/nathansomavarapu/orgs", "repos_url": "https://api.github.com/users/nathansomavarapu/repos", "events_url": "https://api.github.com/users/nathansomavarapu/events{/privacy}", "received_events_url": "https://api.github.com/users/nathansomavarapu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-28T19:08:18Z", "updated_at": "2020-07-28T21:32:14Z", "closed_at": "2020-07-28T20:09:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nThis might not be a bug it might have more to do with my misunderstanding, but I can't find much info on it so I thought I would ask. How can MLflow be used in conjunction with hydra? When I try and use the MLflow context manager inside a main function with the Hydra decorator the MLflow logging directory is never created.\r\n\r\n## To reproduce\r\n\r\n```\r\nimport hydra\r\nimport mlflow\r\n\r\n# Commenting the below line make the script work as expected\r\n@hydra.main(config_path=\"conf\", config_name=\"test\")\r\ndef main(cfg):\r\n    params = [('test', 'test')]\r\n\r\n    with mlflow.start_run() as run:\r\n        for k,v in params:\r\n            mlflow.log_param(k, str(v))\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n// N/A\r\n```\r\n\r\n## Expected Behavior\r\nExpect a folder named mlruns to be created with a single run with the parameter test and value test.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0\r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : Conda\r\n- **Operating system** : Ubuntu 16.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/830/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/830/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/829", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/829/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/829/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/829/events", "html_url": "https://github.com/facebookresearch/hydra/issues/829", "id": 667132653, "node_id": "MDU6SXNzdWU2NjcxMzI2NTM=", "number": 829, "title": "[Bug] TypeError: initialize() got an unexpected keyword argument 'job_name'", "user": {"login": "turian", "id": 65918, "node_id": "MDQ6VXNlcjY1OTE4", "avatar_url": "https://avatars.githubusercontent.com/u/65918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/turian", "html_url": "https://github.com/turian", "followers_url": "https://api.github.com/users/turian/followers", "following_url": "https://api.github.com/users/turian/following{/other_user}", "gists_url": "https://api.github.com/users/turian/gists{/gist_id}", "starred_url": "https://api.github.com/users/turian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/turian/subscriptions", "organizations_url": "https://api.github.com/users/turian/orgs", "repos_url": "https://api.github.com/users/turian/repos", "events_url": "https://api.github.com/users/turian/events{/privacy}", "received_events_url": "https://api.github.com/users/turian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-07-28T14:44:38Z", "updated_at": "2022-02-24T21:50:44Z", "closed_at": "2020-07-28T21:23:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nThe [compose API doc](https://hydra.cc/docs/next/experimental/compose_api) specifies that you use parameter job_name to initialize, but this causes an error.\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```\r\nfrom hydra.experimental import compose, initialize\r\n\r\n# global initialization\r\ninitialize(config_path=\"conf\", job_name=\"test_app\")\r\n```\r\n\r\nThis is from the [compose API doc](https://hydra.cc/docs/next/experimental/compose_api) \r\n\r\n** Stack trace/error message **\r\n```\r\nTypeError: initialize() got an unexpected keyword argument 'job_name'\r\n```\r\n\r\n## Expected Behavior\r\n\r\nCode from the API doc should run without error.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc1\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : n/a\r\n- **Operating system** : OSX\r\n\r\n## Additional context\r\n\r\nn/a", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/829/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/829/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/828", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/828/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/828/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/828/events", "html_url": "https://github.com/facebookresearch/hydra/issues/828", "id": 667130802, "node_id": "MDU6SXNzdWU2NjcxMzA4MDI=", "number": 828, "title": "[Bug] With compose API, there is no `HydraConfig`", "user": {"login": "turian", "id": 65918, "node_id": "MDQ6VXNlcjY1OTE4", "avatar_url": "https://avatars.githubusercontent.com/u/65918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/turian", "html_url": "https://github.com/turian", "followers_url": "https://api.github.com/users/turian/followers", "following_url": "https://api.github.com/users/turian/following{/other_user}", "gists_url": "https://api.github.com/users/turian/gists{/gist_id}", "starred_url": "https://api.github.com/users/turian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/turian/subscriptions", "organizations_url": "https://api.github.com/users/turian/orgs", "repos_url": "https://api.github.com/users/turian/repos", "events_url": "https://api.github.com/users/turian/events{/privacy}", "received_events_url": "https://api.github.com/users/turian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-28T14:42:17Z", "updated_at": "2020-07-29T07:34:59Z", "closed_at": "2020-07-29T07:34:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nI am using the compose API within a Jupyter notebook. However, there is no `HydraConfig` even after there is a `GlobalHydra`. (I want to use `HydraConfig.get().runtime.cwd`.)\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```\r\nfrom hydra.experimental import compose, initialize\r\n\r\n# global initialization\r\ninitialize(config_path=\"conf\")\r\ncfg = compose(config_name=\"config\")\r\nprint(cfg.pretty())\r\n\r\nfrom hydra.core.hydra_config import HydraConfig\r\nassert HydraConfig.initialized()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nAssertionError\r\n```\r\n\r\n## Expected Behavior\r\n\r\nI would expect that using the compose API, we could still access HydraConfig.\r\n\r\n## System information\r\n- **Hydra Version** : 1.0.0rc1 \r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : n/a\r\n- **Operating system** : OSX\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/828/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/828/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/803", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/803/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/803/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/803/events", "html_url": "https://github.com/facebookresearch/hydra/issues/803", "id": 662517911, "node_id": "MDU6SXNzdWU2NjI1MTc5MTE=", "number": 803, "title": "[Bug] Submitit Launcher throws error for `cls` argument", "user": {"login": "jgbos", "id": 2148522, "node_id": "MDQ6VXNlcjIxNDg1MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/2148522?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jgbos", "html_url": "https://github.com/jgbos", "followers_url": "https://api.github.com/users/jgbos/followers", "following_url": "https://api.github.com/users/jgbos/following{/other_user}", "gists_url": "https://api.github.com/users/jgbos/gists{/gist_id}", "starred_url": "https://api.github.com/users/jgbos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jgbos/subscriptions", "organizations_url": "https://api.github.com/users/jgbos/orgs", "repos_url": "https://api.github.com/users/jgbos/repos", "events_url": "https://api.github.com/users/jgbos/events{/privacy}", "received_events_url": "https://api.github.com/users/jgbos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 1, "created_at": "2020-07-21T03:08:48Z", "updated_at": "2020-07-21T05:41:49Z", "closed_at": "2020-07-21T05:41:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nPyPI version is at `1.0.0rc3` and therefore fails with latest hydra-core rc2 release.\r\n\r\n## To reproduce\r\n\r\nRun \r\n\r\n`pip install hydra-core --pre`\r\n\r\nand then\r\n\r\n`pip install hydra-submitit-launcher --pre`\r\n\r\nThen try to run an example, you get the following error:\r\n\r\n```bash\r\nTraceback (most recent call last):\r\n  File \"my_app.py\", line 9, in <module>\r\n    my_app()\r\n  File \"/home/jgbos/.conda/envs/testing/lib/python3.8/site-packages/hydra/main.py\", line 29, in decorated_main\r\n    args = get_args_parser()\r\n  File \"/home/jgbos/.conda/envs/testing/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 436, in get_args_parser\r\n    help=f\"Install or Uninstall shell completion:\\n{_get_completion_help()}\",\r\n  File \"/home/jgbos/.conda/envs/testing/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 384, in _get_completion_help\r\n    completion_plugins = Plugins.instance().discover(CompletionPlugin)\r\n  File \"/home/jgbos/.conda/envs/testing/lib/python3.8/site-packages/hydra/core/plugins.py\", line 35, in instance\r\n    ret = Singleton.instance(Plugins, *args, **kwargs)\r\n  File \"/home/jgbos/.conda/envs/testing/lib/python3.8/site-packages/hydra/core/singleton.py\", line 14, in instance\r\n    return cls(*args, **kwargs)\r\n  File \"/home/jgbos/.conda/envs/testing/lib/python3.8/site-packages/hydra/core/singleton.py\", line 10, in __call__\r\n    cls._instances[cls] = super(Singleton, cls).__call__(*args, **kwargs)\r\n  File \"/home/jgbos/.conda/envs/testing/lib/python3.8/site-packages/hydra/core/plugins.py\", line 43, in __init__\r\n    self._initialize()\r\n  File \"/home/jgbos/.conda/envs/testing/lib/python3.8/site-packages/hydra/core/plugins.py\", line 56, in _initialize\r\n    self.plugin_type_to_subclass_list, self.stats = self._scan_all_plugins(\r\n  File \"/home/jgbos/.conda/envs/testing/lib/python3.8/site-packages/hydra/core/plugins.py\", line 168, in _scan_all_plugins\r\n    loaded_mod = m.load_module(modname)\r\n  File \"<frozen importlib._bootstrap_external>\", line 462, in _check_name_wrapper\r\n  File \"<frozen importlib._bootstrap_external>\", line 962, in load_module\r\n  File \"<frozen importlib._bootstrap_external>\", line 787, in load_module\r\n  File \"<frozen importlib._bootstrap>\", line 265, in _load_module_shim\r\n  File \"<frozen importlib._bootstrap>\", line 702, in _load\r\n  File \"<frozen importlib._bootstrap>\", line 671, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 783, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/jgbos/.conda/envs/testing/lib/python3.8/site-packages/hydra_plugins/hydra_submitit_launcher/config.py\", line 70, in <module>\r\n    node=ObjectConf(\r\nTypeError: __init__() got an unexpected keyword argument 'cls'\r\n```\r\n\r\n## Expected Behavior\r\n\r\nVersion should be at `1.0.0rc4` for running `pip install hydra-submitit-launcher --pre`\r\n\r\n## System information\r\n- Hydra version 1.0.0rc2\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/803/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/799", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/799/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/799/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/799/events", "html_url": "https://github.com/facebookresearch/hydra/issues/799", "id": 661475103, "node_id": "MDU6SXNzdWU2NjE0NzUxMDM=", "number": 799, "title": "[Bug] instatinate hides root cause of an import error", "user": {"login": "Khoa-NT", "id": 12138158, "node_id": "MDQ6VXNlcjEyMTM4MTU4", "avatar_url": "https://avatars.githubusercontent.com/u/12138158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Khoa-NT", "html_url": "https://github.com/Khoa-NT", "followers_url": "https://api.github.com/users/Khoa-NT/followers", "following_url": "https://api.github.com/users/Khoa-NT/following{/other_user}", "gists_url": "https://api.github.com/users/Khoa-NT/gists{/gist_id}", "starred_url": "https://api.github.com/users/Khoa-NT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Khoa-NT/subscriptions", "organizations_url": "https://api.github.com/users/Khoa-NT/orgs", "repos_url": "https://api.github.com/users/Khoa-NT/repos", "events_url": "https://api.github.com/users/Khoa-NT/events{/privacy}", "received_events_url": "https://api.github.com/users/Khoa-NT/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 3, "created_at": "2020-07-20T07:22:40Z", "updated_at": "2022-01-21T04:06:30Z", "closed_at": "2020-07-23T23:57:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nHydra rc1 and rc2 scan all the error in code and raise an error but it doesn't a correct error.\r\n\r\n## To reproduce\r\n**Minimal Code/Config snippet to reproduce**\r\nFolder structure:\r\n`code/example_code.py`\r\n```\r\nimport pytorch_lightning.metrics.functional as plm\r\n\r\nclass sample_fucntion:\r\n    def __init__(self, a, b, c):\r\n        self.a = a\r\n        self.b = b\r\n        self.c = c\r\n\r\n    def run(self):\r\n        print(self.a)\r\n        print(self.b)\r\n        print(self.c)\r\n```\r\n\r\n`conf/code/code_python.yaml`\r\n```yaml\r\n# @package _group_\r\nname: sample_fucntion\r\ntarget: code.example_code.sample_fucntion\r\nparams:\r\n  a: 1\r\n  b: 2\r\n  c: 3\r\n```\r\n`conf/config.yaml`\r\n```yaml\r\ndefaults:\r\n  - code: code_python\r\n```\r\n`my_app.py`\r\n\r\n```python\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef my_app(cfg: DictConfig) -> None:\r\n\r\n    python_class = hydra.utils.instantiate(cfg.code)\r\n    python_class.run()\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\n**Stack trace/error message**\r\nMy environment doesn't have `pytorch_lightning`. If I use `import pytorch_lightning.metrics.functional as plm` in `code/example_code.py`\r\nIt will generate the error\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\khoa\\Anaconda3\\envs\\py3\\lib\\site-packages\\hydra\\utils.py\", line 33, in call\r\n    type_or_callable = _locate(cls)\r\n  File \"C:\\Users\\khoa\\Anaconda3\\envs\\py3\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 520, in _locate\r\n    raise ImportError(f\"Could not locate '{path}'\")\r\nImportError: Could not locate 'code.example_code.sample_fucntion'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"my_app.py\", line 15, in my_app\r\n    python_class = hydra.utils.instantiate(cfg.code)\r\n  File \"C:\\Users\\khoa\\Anaconda3\\envs\\py3\\lib\\site-packages\\hydra\\utils.py\", line 40, in call\r\n    raise HydraException(f\"Error calling '{cls}' : {e}\") from e\r\nhydra.errors.HydraException: Error calling 'code.example_code.sample_fucntion' : Could not locate 'code.example_code.sample_fucntion'\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\nIt should show I'm missing the `pytorch_lightning` package, instead of the error above\r\n\r\n## System information\r\n- **Hydra Version** :  rc2 and previous\r\n- **Python version** : 3.7\r\n- **Operating system** : linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/799/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/799/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/798", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/798/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/798/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/798/events", "html_url": "https://github.com/facebookresearch/hydra/issues/798", "id": 661077434, "node_id": "MDU6SXNzdWU2NjEwNzc0MzQ=", "number": 798, "title": "[Bug] Can't use overrides containing an asterisk", "user": {"login": "greaber", "id": 8763901, "node_id": "MDQ6VXNlcjg3NjM5MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8763901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/greaber", "html_url": "https://github.com/greaber", "followers_url": "https://api.github.com/users/greaber/followers", "following_url": "https://api.github.com/users/greaber/following{/other_user}", "gists_url": "https://api.github.com/users/greaber/gists{/gist_id}", "starred_url": "https://api.github.com/users/greaber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/greaber/subscriptions", "organizations_url": "https://api.github.com/users/greaber/orgs", "repos_url": "https://api.github.com/users/greaber/repos", "events_url": "https://api.github.com/users/greaber/events{/privacy}", "received_events_url": "https://api.github.com/users/greaber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 5, "created_at": "2020-07-19T21:21:00Z", "updated_at": "2020-07-22T07:24:17Z", "closed_at": "2020-07-21T21:53:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nIt seems like it is not possible to use an override that contains an asterisk.  The lexer generates a token recognition error.  I didn't dig into the grammar to understand why though.\r\n\r\n## To reproduce\r\n```\r\nimport hydra\r\n\r\n@hydra.main()\r\ndef foo():\r\n    pass\r\n\r\nfoo()\r\n```\r\n```\r\n$ python test.py +bar=\\*\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n$ python test.py +bar=\\*\r\n\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/atn/LexerATNSimulator.py\", line 99, in match\r\n    return self.execATN(input, dfa.s0)\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/atn/LexerATNSimulator.py\", line 191, in execATN\r\n    return self.failOrAccept(self.prevAccept, input, s.configs, t)\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/atn/LexerATNSimulator.py\", line 250, in failOrAccept\r\n    raise LexerNoViableAltException(self.recog, input, self.startIndex, reach)\r\nantlr4.error.Errors.LexerNoViableAltException: LexerNoViableAltException('*')\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/core/override_parser/overrides_parser.py\", line 559, in parse_overrides\r\n    parsed = self.parse_rule(override, \"override\")\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/core/override_parser/overrides_parser.py\", line 544, in parse_rule\r\n    tree = getattr(parser, rule)()\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/grammar/gen/OverrideParser.py\", line 229, in override\r\n    self.match(OverrideParser.T__0)\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/Parser.py\", line 116, in match\r\n    self.consume()\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/Parser.py\", line 340, in consume\r\n    self.getInputStream().consume()\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/BufferedTokenStream.py\", line 99, in consume\r\n    if self.sync(self.index + 1):\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/BufferedTokenStream.py\", line 111, in sync\r\n    fetched = self.fetch(n)\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/BufferedTokenStream.py\", line 123, in fetch\r\n    t = self.tokenSource.nextToken()\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/Lexer.py\", line 130, in nextToken\r\n    self.notifyListeners(e)             # report error\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/Lexer.py\", line 285, in notifyListeners\r\n    listener.syntaxError(self, None, self._tokenStartLine, self._tokenStartColumn, msg, e)\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/antlr4/error/ErrorListener.py\", line 60, in syntaxError\r\n    delegate.syntaxError(recognizer, offendingSymbol, line, column, msg, e)\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/core/override_parser/overrides_parser.py\", line 485, in syntaxError\r\n    raise HydraException(msg)\r\nhydra.errors.HydraException: token recognition error at: '*'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 336, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 102, in run\r\n    run_mode=RunMode.RUN,\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 512, in compose_config\r\n    from_shell=from_shell,\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 150, in load_configuration\r\n    from_shell=from_shell,\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 174, in _load_configuration\r\n    parsed_overrides = parser.parse_overrides(overrides=overrides)\r\n  File \"/home/grant/miniconda3/lib/python3.7/site-packages/hydra/core/override_parser/overrides_parser.py\", line 562, in parse_overrides\r\n    f\"Error parsing override '{override}' : {e}\"\r\nhydra.errors.HydraException: Error parsing override '+bar=*' : token recognition error at: '*'\r\nSee https://hydra.cc/docs/next/advanced/command_line_syntax for details\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  latest dev version\r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/798/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/791", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/791/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/791/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/791/events", "html_url": "https://github.com/facebookresearch/hydra/issues/791", "id": 659795568, "node_id": "MDU6SXNzdWU2NTk3OTU1Njg=", "number": 791, "title": "[Bug] MISSING for Object Conf cls argument", "user": {"login": "anthonytec2", "id": 11021542, "node_id": "MDQ6VXNlcjExMDIxNTQy", "avatar_url": "https://avatars.githubusercontent.com/u/11021542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anthonytec2", "html_url": "https://github.com/anthonytec2", "followers_url": "https://api.github.com/users/anthonytec2/followers", "following_url": "https://api.github.com/users/anthonytec2/following{/other_user}", "gists_url": "https://api.github.com/users/anthonytec2/gists{/gist_id}", "starred_url": "https://api.github.com/users/anthonytec2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anthonytec2/subscriptions", "organizations_url": "https://api.github.com/users/anthonytec2/orgs", "repos_url": "https://api.github.com/users/anthonytec2/repos", "events_url": "https://api.github.com/users/anthonytec2/events{/privacy}", "received_events_url": "https://api.github.com/users/anthonytec2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 8, "created_at": "2020-07-18T01:18:37Z", "updated_at": "2020-07-18T14:32:15Z", "closed_at": "2020-07-18T14:32:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nOmegaConf cls argument should not be a mandatory value if target is defined. Can we change this to be an optional value with None being the default?\r\n \r\n** Stack trace/error message **\r\n```\r\nomegaconf.errors.MissingMandatoryValue: Missing mandatory value: scheduler.cls\r\n        full_key: scheduler.cls\r\n        reference_type=ObjectConf\r\n        object_type=ObjectConf\r\n```\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc2\r\n- **Python version** : 3.7.7\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/791/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/791/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/789", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/789/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/789/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/789/events", "html_url": "https://github.com/facebookresearch/hydra/issues/789", "id": 659511282, "node_id": "MDU6SXNzdWU2NTk1MTEyODI=", "number": 789, "title": "Commandline interpolation by indexing lists", "user": {"login": "senthilps8", "id": 9179485, "node_id": "MDQ6VXNlcjkxNzk0ODU=", "avatar_url": "https://avatars.githubusercontent.com/u/9179485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/senthilps8", "html_url": "https://github.com/senthilps8", "followers_url": "https://api.github.com/users/senthilps8/followers", "following_url": "https://api.github.com/users/senthilps8/following{/other_user}", "gists_url": "https://api.github.com/users/senthilps8/gists{/gist_id}", "starred_url": "https://api.github.com/users/senthilps8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/senthilps8/subscriptions", "organizations_url": "https://api.github.com/users/senthilps8/orgs", "repos_url": "https://api.github.com/users/senthilps8/repos", "events_url": "https://api.github.com/users/senthilps8/events{/privacy}", "received_events_url": "https://api.github.com/users/senthilps8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 1, "created_at": "2020-07-17T18:31:56Z", "updated_at": "2020-07-18T17:17:00Z", "closed_at": "2020-07-18T17:17:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "I recently switch to using the master branch due to #748 .\r\nIt looks like the commandline syntax has changed and it doesn't seem possible to do interpolation by indexing lists (or I couldn't figure it out).\r\n\r\nFor example, for a config containing:\r\n```\r\nlistconf: [2,3]\r\nnewlistconf: [3,4]\r\n```\r\n\r\nIn v0.11, I could do `python main.py newlistconf.0=\\${listconf.0}`\r\nBut now, on master, this throws the following error:\r\n```\r\nError parsing override 'newlistconf.0=${listconf.0}' : extraneous input '.0' expecting '='\r\n```\r\n\r\nEven `python main.py newlistconf=\\${listconf.0}`, throws the following error:\r\n```\r\nError parsing override 'newlistconf=${listconf.0}' : mismatched input '{' expecting <EOF>\r\n```\r\n\r\nCan you let me know if there's a new syntax for doing this? I couldn't figure it out from [https://github.com/facebookresearch/hydra/blob/master/hydra/grammar/Override.g4](url)\r\n\r\nThanks! ", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/789/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/789/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/785", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/785/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/785/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/785/events", "html_url": "https://github.com/facebookresearch/hydra/issues/785", "id": 658521151, "node_id": "MDU6SXNzdWU2NTg1MjExNTE=", "number": 785, "title": "[Bug] Optional field as config group set to None throws AttributeError", "user": {"login": "adriansahlman", "id": 7781148, "node_id": "MDQ6VXNlcjc3ODExNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7781148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adriansahlman", "html_url": "https://github.com/adriansahlman", "followers_url": "https://api.github.com/users/adriansahlman/followers", "following_url": "https://api.github.com/users/adriansahlman/following{/other_user}", "gists_url": "https://api.github.com/users/adriansahlman/gists{/gist_id}", "starred_url": "https://api.github.com/users/adriansahlman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adriansahlman/subscriptions", "organizations_url": "https://api.github.com/users/adriansahlman/orgs", "repos_url": "https://api.github.com/users/adriansahlman/repos", "events_url": "https://api.github.com/users/adriansahlman/events{/privacy}", "received_events_url": "https://api.github.com/users/adriansahlman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 2, "created_at": "2020-07-16T20:03:17Z", "updated_at": "2020-07-18T00:36:35Z", "closed_at": "2020-07-18T00:36:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nSetting the type of a field in the root dataclass config to another dataclass throws an AttributeError, setting this type to \r\n\r\n## To reproduce\r\n\r\n```\r\nimport dataclasses\r\nfrom typing import(\r\n    List,\r\n    Any,\r\n    Optional\r\n)\r\n\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nimport omegaconf\r\n\r\n\r\n@dataclasses.dataclass\r\nclass MyModuleConfig:\r\n    some_field: str = dataclasses.field(default='abc')\r\n\r\n\r\ndefaults = [{'module': None}]\r\n\r\n\r\n@dataclasses.dataclass\r\nclass MyModelConfig:\r\n    defaults: List[Any] = dataclasses.field(default_factory=lambda: defaults)\r\n    module: Optional[MyModuleConfig] = dataclasses.field(default=None)\r\n\r\n\r\ncs = ConfigStore.instance()\r\ncs.store(group='module', name='my_module', node=MyModuleConfig)\r\ncs.store(name='model', node=MyModelConfig)\r\n\r\n\r\n@hydra.main(config_name='model', config_path='../')\r\ndef main(cfg: omegaconf.DictConfig) -> None:\r\n    print(cfg.pretty())\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\nThis will run without any problems\r\n```shell\r\npython my_app.py\r\n```\r\nWhile this will throw an exception\r\n```shell\r\npython my_app.py module=my_module\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nWARNING, failed to detect relevant stack start\r\nTraceback (most recent call last):\r\n  File \"/home/as/anaconda3/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 198, in run_and_report\r\n    return func()\r\n  File \"/home/as/anaconda3/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 333, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/as/anaconda3/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 102, in run\r\n    run_mode=RunMode.RUN,\r\n  File \"/home/as/anaconda3/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 512, in compose_config\r\n    from_shell=from_shell,\r\n  File \"/home/as/anaconda3/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 150, in load_configuration\r\n    from_shell=from_shell,\r\n  File \"/home/as/anaconda3/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 251, in _load_configuration\r\n    run_mode=run_mode,\r\n  File \"/home/as/anaconda3/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 769, in _merge_defaults_into_config\r\n    hydra_cfg = merge_defaults_list_into_config(hydra_cfg, user_list)\r\n  File \"/home/as/anaconda3/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 747, in merge_defaults_list_into_config\r\n    package_override=default1.package,\r\n  File \"/home/as/anaconda3/lib/python3.7/site-packages/hydra/_internal/config_loader_impl.py\", line 686, in _merge_config\r\n    ret = OmegaConf.merge(cfg, loaded_cfg)\r\nAttributeError: 'NoneType' object has no attribute 'get'\r\n\tfull_key:\r\n\treference_type=Optional[MyModelConfig]\r\n\tobject_type=MyModelConfig\r\n\r\nSet the environment variable HYDRA_FULL_ERROR=1 for a complete stack trace.\r\n```\r\n\r\n## Expected Behavior\r\nIt should set the `module` field of the root config to `MyModuleConfig`\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc2\r\n- **Python version** : 3.7.4\r\n- **Virtual environment type and version** : Conda\r\n- **Operating system** :  Ubuntu 18.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/785/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/785/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/775", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/775/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/775/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/775/events", "html_url": "https://github.com/facebookresearch/hydra/issues/775", "id": 657547757, "node_id": "MDU6SXNzdWU2NTc1NDc3NTc=", "number": 775, "title": "[Bug] No error raised when using / instead of . for some command-line parameters", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 4, "created_at": "2020-07-15T18:03:26Z", "updated_at": "2020-07-17T06:12:44Z", "closed_at": "2020-07-17T06:12:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nThe following command *seems* to run fine but actually ignores the partition:\r\n```\r\npython my_app.py hydra/launcher=submitit_slurm hydra/launcher/params/partition=dev -m\r\n```\r\n\r\nThis is because the correct syntax should be `hydra.launcher.params.partition=dev` (no /).\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\nRun https://github.com/facebookresearch/hydra/blob/master/examples/tutorials/structured_configs/1_minimal/my_app.py with the command line above.\r\n\r\n** Stack trace/error message **\r\n\r\nNo error: it launches the job on the cluster, but not on the dev partition.\r\n\r\n## Expected Behavior\r\n\r\nAn error should be raised to tell the user they messed up.\r\n\r\n## System information\r\n- **Hydra Version** :  current master (91c9c289a10a7076b388b61bee4cdcfd4a0e2f84)\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/775/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/775/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/771", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/771/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/771/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/771/events", "html_url": "https://github.com/facebookresearch/hydra/issues/771", "id": 657110916, "node_id": "MDU6SXNzdWU2NTcxMTA5MTY=", "number": 771, "title": "[Bug] interpolation to hydra.job.override_dirname containing another interpolation is not possible", "user": {"login": "immanuelweber", "id": 1731035, "node_id": "MDQ6VXNlcjE3MzEwMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1731035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/immanuelweber", "html_url": "https://github.com/immanuelweber", "followers_url": "https://api.github.com/users/immanuelweber/followers", "following_url": "https://api.github.com/users/immanuelweber/following{/other_user}", "gists_url": "https://api.github.com/users/immanuelweber/gists{/gist_id}", "starred_url": "https://api.github.com/users/immanuelweber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/immanuelweber/subscriptions", "organizations_url": "https://api.github.com/users/immanuelweber/orgs", "repos_url": "https://api.github.com/users/immanuelweber/repos", "events_url": "https://api.github.com/users/immanuelweber/events{/privacy}", "received_events_url": "https://api.github.com/users/immanuelweber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 6, "created_at": "2020-07-15T06:55:52Z", "updated_at": "2020-07-27T09:28:04Z", "closed_at": "2020-07-18T02:48:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nNow that #725 is fixed, I post an issue for the behavior I described in (https://github.com/facebookresearch/hydra/issues/725#issuecomment-653442315)\r\nIn the following example an interpolation to `hydra.job.override_dirname` containing another interpolation results in a crash:\r\n\r\n## To reproduce\r\n\r\ntest.py:\r\n```\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef run(config: DictConfig):\r\n    print(\"c\", config.c)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    run()\r\n\r\n```\r\n\r\nconf/config.yaml:\r\n```\r\na: 10\r\nb: 20\r\n\r\nc: override_${hydra:job.override_dirname}\r\n```\r\n\r\ncall:\r\n`python test.py b=\\${a}` (I have to escape $)\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 197, in run_and_report\r\n    return func()\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/hydra/_internal/utils.py\", line 271, in <lambda>\r\n    lambda: hydra.run(\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/hydra/_internal/hydra.py\", line 105, in run\r\n    return run_job(\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/hydra/core/utils.py\", line 122, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"/home/mtadmin/projects/debug_hydra/interpolation_jobdir/test.py\", line 16, in run\r\n    print(\"c\", config.c)\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 315, in __getattr__\r\n    self._format_and_raise(key=key, value=None, cause=e)\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/base.py\", line 95, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/_utils.py\", line 555, in format_and_raise\r\n    raise_(ex, cause)\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/_utils.py\", line 548, in raise_\r\n    raise ex\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 313, in __getattr__\r\n    return self._get_impl(key=key, default_value=DEFAULT_VALUE_MARKER)\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/dictconfig.py\", line 377, in _get_impl\r\n    return self._resolve_with_default(\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/basecontainer.py\", line 56, in _resolve_with_default\r\n    resolved = self._resolve_interpolation(\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/base.py\", line 370, in _resolve_interpolation\r\n    return self._resolve_simple_interpolation(\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/base.py\", line 344, in _resolve_simple_interpolation\r\n    self._format_and_raise(key=inter_key, value=None, cause=e)\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/base.py\", line 95, in _format_and_raise\r\n    format_and_raise(\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/_utils.py\", line 555, in format_and_raise\r\n    raise_(ex, cause)\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/_utils.py\", line 548, in raise_\r\n    raise ex\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/base.py\", line 335, in _resolve_simple_interpolation\r\n    value = resolver(root_node, inter_key)\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 335, in caching\r\n    cache[key] if key in cache else resolver(*OmegaConf._tokenize_args(key))\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/hydra/core/utils.py\", line 150, in <lambda>\r\n    lambda path: OmegaConf.select(cast(DictConfig, HydraConfig.get()), path),\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/omegaconf.py\", line 531, in select\r\n    format_and_raise(node=cfg, key=key, value=None, cause=e, msg=str(e))\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/_utils.py\", line 623, in format_and_raise\r\n    raise_(ex, cause)\r\n  File \"/home/mtadmin/miniconda3/envs/debug_hydra/lib/python3.8/site-packages/omegaconf/_utils.py\", line 548, in raise_\r\n    raise ex\r\nomegaconf.errors.ConfigKeyError: str interpolation key 'a' not found\r\n        full_key: hydra.job.override_dirname\r\n        reference_type=Optional[HydraConf]\r\n        object_type=HydraConf\r\n\r\n```\r\n\r\n## Expected Behavior\r\nthe `hydra.job.override_dirname` should be able to interpolate `a` via `b`\r\n\r\n## System information\r\n- **Hydra Version** :  master/1.0.0rc2\r\n- **Python version** :  3.8.3\r\n- **Virtual environment type and version** :  miniconda\r\n- **Operating system** :  ubuntu 18.04\r\n\r\n## Additional context\r\nThis can be worked arround with something like this:\r\n```\r\nhdr = HydraConfig.get()\r\noverride_dirname= hdr.job.override_dirname\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/771/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/771/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/770", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/770/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/770/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/770/events", "html_url": "https://github.com/facebookresearch/hydra/issues/770", "id": 657051928, "node_id": "MDU6SXNzdWU2NTcwNTE5Mjg=", "number": 770, "title": "[Bug] Crash when using postponed evaluation of annotations", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-15T04:31:46Z", "updated_at": "2020-07-15T04:37:26Z", "closed_at": "2020-07-15T04:37:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nStructured configs seem not to work with the upcoming postponed evaluation of annotations (https://www.python.org/dev/peps/pep-0563/) which will be the default in Python 3.10.\r\n\r\nObviously not really a problem yet but flagging it now as a FYI.\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\nStart from https://github.com/facebookresearch/hydra/blob/master/examples/tutorials/structured_configs/1_minimal/my_app.py and add on the first line:\r\n\r\n```\r\nfrom __future__ import annotations\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 18, in <module>\r\n    cs.store(name=\"config\", node=MySQLConfig)\r\n  File \"/private/home/odelalleau/.conda/envs/py37-hydra/lib/python3.7/site-packages/hydra/core/config_store.py\", line 85, in store\r\n    cfg = OmegaConf.structured(node)\r\n  File \"/private/home/odelalleau/.conda/envs/py37-hydra/lib/python3.7/site-packages/omegaconf/omegaconf.py\", line 134, in structured\r\n    return OmegaConf.create(obj, parent)\r\n  File \"/private/home/odelalleau/.conda/envs/py37-hydra/lib/python3.7/site-packages/omegaconf/omegaconf.py\", line 171, in create\r\n    return OmegaConf._create_impl(obj=obj, parent=parent)\r\n  File \"/private/home/odelalleau/.conda/envs/py37-hydra/lib/python3.7/site-packages/omegaconf/omegaconf.py\", line 220, in _create_impl\r\n    element_type=element_type,\r\n  File \"/private/home/odelalleau/.conda/envs/py37-hydra/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 74, in __init__\r\n    self._set_value(content)\r\n  File \"/private/home/odelalleau/.conda/envs/py37-hydra/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 546, in _set_value\r\n    data = get_structured_config_data(value)\r\n  File \"/private/home/odelalleau/.conda/envs/py37-hydra/lib/python3.7/site-packages/omegaconf/_utils.py\", line 258, in get_structured_config_data\r\n    return get_dataclass_data(obj)\r\n  File \"/private/home/odelalleau/.conda/envs/py37-hydra/lib/python3.7/site-packages/omegaconf/_utils.py\", line 202, in get_dataclass_data\r\n    ref_type=type_, is_optional=is_optional, key=name, value=value, parent=None,\r\n  File \"/private/home/odelalleau/.conda/envs/py37-hydra/lib/python3.7/site-packages/omegaconf/omegaconf.py\", line 681, in _maybe_wrap\r\n    key=key,\r\n  File \"/private/home/odelalleau/.conda/envs/py37-hydra/lib/python3.7/site-packages/omegaconf/omegaconf.py\", line 641, in _node_wrap\r\n    elif issubclass(type_, Enum):\r\nTypeError: issubclass() arg 1 must be a class\r\n```\r\n\r\n## Expected Behavior\r\nSame as without the added import.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc2\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Linux", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/770/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/769", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/769/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/769/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/769/events", "html_url": "https://github.com/facebookresearch/hydra/issues/769", "id": 657033437, "node_id": "MDU6SXNzdWU2NTcwMzM0Mzc=", "number": 769, "title": "[Bug] @hydra.main() does not preserve the function's return value", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471570, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-15T03:32:01Z", "updated_at": "2020-07-15T16:04:15Z", "closed_at": "2020-07-15T07:12:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nWrapping a function with `hydra.main()` makes it lose its return value.\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```\r\nimport hydra\r\n\r\n@hydra.main()\r\ndef my_app(cfg):\r\n    return 0\r\n\r\nif __name__ == \"__main__\":\r\n    print(my_app())\r\n```\r\n\r\n** Stack trace/error message **\r\nThe above code prints `None` instead of `0`.\r\n\r\n## Expected Behavior\r\nI'd expect @hydra.main() to return the original return value.\r\n\r\nOne typical use case is when we want to exit the program with specific return codes indicating success / failure:\r\n\r\n```\r\n@hydra.main()\r\ndef my_app(cfg):\r\n    ...\r\n    return 0 if success else 1\r\n\r\nif __name__ == \"__main__\":\r\n    sys.exit(my_app())\r\n```\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc1\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/769/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/769/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/768", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/768/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/768/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/768/events", "html_url": "https://github.com/facebookresearch/hydra/issues/768", "id": 657010403, "node_id": "MDU6SXNzdWU2NTcwMTA0MDM=", "number": 768, "title": "[Bug] Defaults Populated Structured Config", "user": {"login": "anthonytec2", "id": 11021542, "node_id": "MDQ6VXNlcjExMDIxNTQy", "avatar_url": "https://avatars.githubusercontent.com/u/11021542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anthonytec2", "html_url": "https://github.com/anthonytec2", "followers_url": "https://api.github.com/users/anthonytec2/followers", "following_url": "https://api.github.com/users/anthonytec2/following{/other_user}", "gists_url": "https://api.github.com/users/anthonytec2/gists{/gist_id}", "starred_url": "https://api.github.com/users/anthonytec2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anthonytec2/subscriptions", "organizations_url": "https://api.github.com/users/anthonytec2/orgs", "repos_url": "https://api.github.com/users/anthonytec2/repos", "events_url": "https://api.github.com/users/anthonytec2/events{/privacy}", "received_events_url": "https://api.github.com/users/anthonytec2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 2, "created_at": "2020-07-15T02:20:07Z", "updated_at": "2020-07-16T19:04:45Z", "closed_at": "2020-07-16T19:04:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nI am trying to create a top level structured configuration which is used to check my config.yaml.  At the moment, I cannot get the defaults to be populated and correctly working will null initializers. I created a sample of this here: https://github.com/anthonytec2/hydra/commit/38b94c57928f50f9f5ec196346dd445b5f96094c. Thing works when assigning defaults to be field(default_factory=lambda: defaults), but fails when assigned to MISSING. \r\n\r\n## To reproduce\r\n\r\n** Stack trace/error message **\r\n```\r\nCannot iterate a missing ListConfig\r\n\tfull_key: defaults\r\n\treference_type=List[Any]\r\n\tobject_type=list\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :   1.0.0rc2\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : \r\n- **Operating system** : Ubuntu 18.04\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/768/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/768/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/759", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/759/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/759/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/759/events", "html_url": "https://github.com/facebookresearch/hydra/issues/759", "id": 655991075, "node_id": "MDU6SXNzdWU2NTU5OTEwNzU=", "number": 759, "title": "[Bug] Using --help can be very slow", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471570, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-13T16:42:13Z", "updated_at": "2020-07-14T03:46:48Z", "closed_at": "2020-07-14T03:46:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nRunning `python app.py --help` can be very slow, probably because it seems to be scanning all subfolders.\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\nRun https://github.com/facebookresearch/hydra/blob/master/examples/tutorials/basic/your_first_hydra_app/1_simple_cli/my_app.py with `--help` in a folder that has lots of other folders / files in it.\r\n\r\n** Stack trace/error message **\r\n\r\nExample:\r\n\r\n```\r\nmy_app is powered by Hydra.\r\n\r\n== Configuration groups ==\r\nCompose your configuration from those groups (group=option)\r\n\r\nh: config\r\nh/outputs/2020-07-13/05-54-45/.hydra: config, hydra, overrides\r\ni/outputs/2020-07-13/09-16-49/.hydra: config, hydra, overrides\r\ni/outputs/2020-07-13/09-17-13/.hydra: config, hydra, overrides\r\ni/outputs/2020-07-13/09-22-06/.hydra: config, hydra, overrides\r\ni/outputs/2020-07-13/09-22-29/.hydra: config, hydra, overrides\r\ni/outputs/2020-07-13/09-23-14/.hydra: config, hydra, overrides\r\ni/outputs/2020-07-13/09-28-06/.hydra: config, hydra, overrides\r\ni/outputs/2020-07-13/09-29-45/.hydra: config, hydra, overrides\r\ni/outputs/2020-07-13/09-29-51/.hydra: config, hydra, overrides\r\ni/outputs/2020-07-13/09-29-54/.hydra: config, hydra, overrides\r\ni/outputs/2020-07-13/09-31-29/.hydra: config, hydra, overrides\r\nmultirun/2020-07-02/16-25-01: multirun\r\nmultirun/2020-07-02/16-25-01/0/.hydra: config, hydra, overrides\r\nmultirun/2020-07-02/16-25-01/1/.hydra: config, hydra, overrides\r\nmultirun/2020-07-02/16-25-01/2/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/09-24-55/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/09-25-56/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/09-26-18/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/09-26-33/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/09-30-21/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/09-30-26/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/09-34-27/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/10-31-57/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/10-35-32/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/10-38-02/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/12-47-27/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/12-47-56/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/13-25-31/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/13-25-42/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/13-45-40/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/13-49-22/.hydra: config, hydra, overrides\r\noutputs/2020-06-30/13-49-34/.hydra: config, hydra, overrides\r\n... (there are more in my folder)\r\n\r\n== Config ==\r\nOverride anything in the config (foo.bar=value)\r\n\r\n{}\r\n\r\n\r\nPowered by Hydra (https://hydra.cc)\r\nUse --hydra-help to view Hydra specific help\r\n```\r\n\r\n## Expected Behavior\r\nA quick help message not cluttered by lots of irrelevant data\r\n\r\n## System information\r\n- **Hydra Version** :  master (c82241ce107328894c77e9349f074acac4678af6)\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/759/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/759/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/758", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/758/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/758/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/758/events", "html_url": "https://github.com/facebookresearch/hydra/issues/758", "id": 655985542, "node_id": "MDU6SXNzdWU2NTU5ODU1NDI=", "number": 758, "title": "[Bug] With a List[int] config option (structured config), a single integer is still parsed as an integer", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-07-13T16:32:57Z", "updated_at": "2020-07-14T03:30:33Z", "closed_at": "2020-07-14T03:30:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nLet's say you have a structured config with a single `List[int]` option named `fudge`:\r\n\r\n```\r\n@dataclass\r\nclass Config(DictConfig):\r\n    fudge: List[int] = field(default_factory=lambda: [])\r\n```\r\n\r\nI would expect an error when running `python hydra_basic.py fudge=1`, however it runs fine and `fudge` becomes the integer `1` instead of being a list.\r\n\r\n## To reproduce\r\n\r\n```\r\nfrom dataclasses import dataclass, field\r\nfrom typing import List\r\n\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom omegaconf import DictConfig\r\n\r\n\r\n@dataclass\r\nclass Config(DictConfig):\r\n    fudge: List[int] = field(default_factory=lambda: [])\r\n\r\n\r\n@hydra.main(config_name=\"config\")\r\ndef my_app(cfg: DictConfig) -> None:\r\n    print(cfg.fudge, type(cfg.fudge))\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    cs = ConfigStore.instance()\r\n    cs.store(name=\"config\", node=Config)\r\n    my_app()\r\n```\r\n\r\nRun `python app.py fudge=1`\r\n\r\n** Stack trace/error message **\r\n```\r\n1 <class 'int'>\r\n```\r\n\r\n## Expected Behavior\r\nAn explicit error should be raised\r\n\r\n## System information\r\n- **Hydra Version** :  current master (c82241ce107328894c77e9349f074acac4678af6)\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/758/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/758/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/757", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/757/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/757/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/757/events", "html_url": "https://github.com/facebookresearch/hydra/issues/757", "id": 655829544, "node_id": "MDU6SXNzdWU2NTU4Mjk1NDQ=", "number": 757, "title": "[Bug] Empty config raises an AssertionError", "user": {"login": "odelalleau", "id": 507137, "node_id": "MDQ6VXNlcjUwNzEzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/507137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odelalleau", "html_url": "https://github.com/odelalleau", "followers_url": "https://api.github.com/users/odelalleau/followers", "following_url": "https://api.github.com/users/odelalleau/following{/other_user}", "gists_url": "https://api.github.com/users/odelalleau/gists{/gist_id}", "starred_url": "https://api.github.com/users/odelalleau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odelalleau/subscriptions", "organizations_url": "https://api.github.com/users/odelalleau/orgs", "repos_url": "https://api.github.com/users/odelalleau/repos", "events_url": "https://api.github.com/users/odelalleau/events{/privacy}", "received_events_url": "https://api.github.com/users/odelalleau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 1, "created_at": "2020-07-13T12:56:44Z", "updated_at": "2020-07-13T18:17:54Z", "closed_at": "2020-07-13T18:17:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nWith a basic Hydra app loading an empty config.yaml, the error message is a bit cryptic (AssertionError)\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\nRun https://github.com/facebookresearch/hydra/blob/master/examples/tutorials/basic/your_first_hydra_app/2_config_file/my_app.py with an empty `config.yaml`\r\n\r\n** Stack trace/error message **\r\n```\r\n...\r\n    assert isinstance(obj, (list, dict, str))\r\nAssertionError\r\n```\r\n\r\n## Expected Behavior\r\n\r\nEither working as if the config was empty, or raising an explicit \"Config is empty\" error.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc1\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/757/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/747", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/747/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/747/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/747/events", "html_url": "https://github.com/facebookresearch/hydra/issues/747", "id": 652787734, "node_id": "MDU6SXNzdWU2NTI3ODc3MzQ=", "number": 747, "title": "[Bug] Instantiating objects and calling methods and functions CRASHES", "user": {"login": "andrewjong", "id": 8121216, "node_id": "MDQ6VXNlcjgxMjEyMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8121216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewjong", "html_url": "https://github.com/andrewjong", "followers_url": "https://api.github.com/users/andrewjong/followers", "following_url": "https://api.github.com/users/andrewjong/following{/other_user}", "gists_url": "https://api.github.com/users/andrewjong/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewjong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewjong/subscriptions", "organizations_url": "https://api.github.com/users/andrewjong/orgs", "repos_url": "https://api.github.com/users/andrewjong/repos", "events_url": "https://api.github.com/users/andrewjong/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewjong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-07-08T00:50:23Z", "updated_at": "2020-07-09T03:42:20Z", "closed_at": "2020-07-09T02:40:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nhttps://hydra.cc/docs/next/patterns/objects#instantiating-objects-and-calling-methods-and-functions\r\nFollowing the 1.0rc instructions for object instantiation results in \"ValueError: Input config does not have a cls field\", followed by \"UnboundLocalError: local variable 'cls' referenced before assignment\". \r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## To reproduce\r\n** Minimal Code/Config snippet to reproduce **\r\n`pip install hydra-core --upgrade --pre`\r\n\r\nBasically copy pasted from the docs. All you have to do is make these files in the same dir, then run `python main.py`.\r\n\r\n```yaml\r\n# config.yaml\r\nmyobject:\r\n  target: models.Foo\r\n  params:\r\n    x: 10\r\n    y: 20\r\n    \r\nmyclassmethod:\r\n  target: models.Foo.class_method\r\n  params:\r\n    z: 5\r\n\r\nmystaticmethod:\r\n  target: models.Foo.static_method\r\n  params:\r\n    z: 15\r\n\r\nmyfunction:\r\n  target: models.bar\r\n  params:\r\n    z: 15\r\n```\r\n```python\r\n# models.py\r\nfrom typing import Any\r\nclass Foo:\r\n  def __init__(self, x: int, y: int) -> None:\r\n    self.x = x\r\n    self.y = y\r\n\r\n  @classmethod\r\n  def class_method(self, z: int) -> Any:\r\n    return self(z, 10)\r\n\r\n  @staticmethod\r\n  def static_method(z: int) -> int:\r\n    return z + 1\r\n\r\ndef bar(z: int) -> int:\r\n  return z + 2\r\n```\r\n```python\r\n# main.py\r\nimport hydra\r\nfrom models import Foo\r\n\r\n@hydra.main(config_name=\"config.yaml\")\r\ndef app(cfg):\r\n  foo1: Foo = hydra.utils.call(cfg.myobject)  # Foo(10, 20)\r\n  print(Foo)\r\n  foo2: Foo = hydra.utils.call(cfg.myclassmethod)  # Foo(5, 10)\r\n  print(Foo)\r\n  ret1: int = hydra.utils.call(cfg.mystaticmethod)  # 16\r\n  print(ret1)\r\n  ret2: int = hydra.utils.call(cfg.myfunction)  # 17\r\n  print(ret2)\r\n\r\nif __name__ == \"__main__\":\r\n    app()\r\n```\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/andrew/.miniconda3/envs/pt/lib/python3.7/site-packages/hydra/utils.py\", line 29, in call\r\n    cls = _get_cls_name(config)\r\n  File \"/home/andrew/.miniconda3/envs/pt/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 489, in _get_cls_name\r\n    raise ValueError(\"Input config does not have a cls field\")\r\nValueError: Input config does not have a cls field\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 16, in <module>\r\n    app()\r\n  File \"/home/andrew/.miniconda3/envs/pt/lib/python3.7/site-packages/hydra/main.py\", line 37, in decorated_main\r\n    strict=strict,\r\n  File \"/home/andrew/.miniconda3/envs/pt/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 253, in run_hydra\r\n    lambda: hydra.run(\r\n  File \"/home/andrew/.miniconda3/envs/pt/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 185, in run_and_report\r\n    func()\r\n  File \"/home/andrew/.miniconda3/envs/pt/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 256, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/andrew/.miniconda3/envs/pt/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 114, in run\r\n    job_subdir_key=None,\r\n  File \"/home/andrew/.miniconda3/envs/pt/lib/python3.7/site-packages/hydra/core/utils.py\", line 107, in run_job\r\n    ret.return_value = task_function(task_cfg)\r\n  File \"main.py\", line 6, in app\r\n    foo1: Foo = hydra.utils.call(cfg.myobject)  # Foo(10, 20)\r\n  File \"/home/andrew/.miniconda3/envs/pt/lib/python3.7/site-packages/hydra/utils.py\", line 37, in call\r\n    log.error(f\"Error instantiating '{cls}' : {e}\")\r\nUnboundLocalError: local variable 'cls' referenced before assignment\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nThe code in the docs for Hydra's class instantiation should work.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0rc\r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** :  None\r\n- **Operating system** :  Manjaro Linux\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/747/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/747/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/742", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/742/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/742/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/742/events", "html_url": "https://github.com/facebookresearch/hydra/issues/742", "id": 652332126, "node_id": "MDU6SXNzdWU2NTIzMzIxMjY=", "number": 742, "title": "[Bug] Config search path for hydra apps", "user": {"login": "jan-matthis", "id": 1239529, "node_id": "MDQ6VXNlcjEyMzk1Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1239529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jan-matthis", "html_url": "https://github.com/jan-matthis", "followers_url": "https://api.github.com/users/jan-matthis/followers", "following_url": "https://api.github.com/users/jan-matthis/following{/other_user}", "gists_url": "https://api.github.com/users/jan-matthis/gists{/gist_id}", "starred_url": "https://api.github.com/users/jan-matthis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jan-matthis/subscriptions", "organizations_url": "https://api.github.com/users/jan-matthis/orgs", "repos_url": "https://api.github.com/users/jan-matthis/repos", "events_url": "https://api.github.com/users/jan-matthis/events{/privacy}", "received_events_url": "https://api.github.com/users/jan-matthis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-07-07T13:39:21Z", "updated_at": "2022-07-19T20:02:12Z", "closed_at": "2020-07-08T22:20:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nFor packaged hydra apps, `pkg://` rather than `file://` should be used in the config search path. \r\n\r\n## To reproduce\r\n\r\nInstall `hydra_app` and run `hydra_app --info`.\r\n\r\n## Stack trace/error message\r\n\r\n```\r\nConfig search path\r\n******************\r\n| Provider | Search path        \r\n--------------------------------------------------------------------------------------------\r\n| hydra    | pkg://hydra.conf  \r\n| main     | file:///Users/jm/Git/hydra/examples/advanced/hydra_app_example/hydra_app/conf \r\n| schema   | structured:// \r\n--------------------------------------------------------------------------------------------\r\n```\r\n\r\n## Expected Behavior\r\n\r\n```\r\nConfig search path\r\n******************\r\n| Provider | Search path  \r\n--------------------------------------------------------------------------------------------\r\n| hydra    | pkg://hydra.conf\r\n| main     | pkg://hydra_app.conf\r\n| schema   | structured://\r\n--------------------------------------------------------------------------------------------\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  `master` at `dc8bed5a4d4a0324357f5baeae97962e759cdc6b`\r\n- **Python version** :  `3.7.7`\r\n- **Virtual environment type and version** : `conda`\r\n- **Operating system** :  macOS\r\n\r\n## Additional context\r\n\r\nUsing `pkg://` rather than `file://` would e.g. help with making configurations accessible across machines when using remote launchers where `file://`-based paths may differ.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/742/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/742/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/740", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/740/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/740/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/740/events", "html_url": "https://github.com/facebookresearch/hydra/issues/740", "id": 651084096, "node_id": "MDU6SXNzdWU2NTEwODQwOTY=", "number": 740, "title": "[Bug] Setting hydra/output_subdir = None still logs .yaml files in a folder called \"None\"", "user": {"login": "numpee", "id": 29429992, "node_id": "MDQ6VXNlcjI5NDI5OTky", "avatar_url": "https://avatars.githubusercontent.com/u/29429992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/numpee", "html_url": "https://github.com/numpee", "followers_url": "https://api.github.com/users/numpee/followers", "following_url": "https://api.github.com/users/numpee/following{/other_user}", "gists_url": "https://api.github.com/users/numpee/gists{/gist_id}", "starred_url": "https://api.github.com/users/numpee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/numpee/subscriptions", "organizations_url": "https://api.github.com/users/numpee/orgs", "repos_url": "https://api.github.com/users/numpee/repos", "events_url": "https://api.github.com/users/numpee/events{/privacy}", "received_events_url": "https://api.github.com/users/numpee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471570, "node_id": "MDU6TGFiZWwxNDAzNDcxNTcw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "This doesn't seem right"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-07-05T14:50:55Z", "updated_at": "2020-07-05T15:28:31Z", "closed_at": "2020-07-05T15:28:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nBasically the title. \r\nI've disabled hydra/job logging (set default to disabled) and set the output_subdir = None in the hydra.yaml file. \r\nHowever, now I get a new folder called None/None where all the config yaml files are stored. I've tried setting it to empty string \"\", and also null, but none of these seem to work. :(\r\n\r\n## Expected Behavior\r\nNo generation of new folders at all (to store yaml files)\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  0.11.3\r\n- **Python version** : 3.5\r\n- **Virtual environment type and version** : virtualenvwrapper\r\n- **Operating system** : Ubuntu 16.0.4\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/740/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/735", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/735/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/735/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/735/events", "html_url": "https://github.com/facebookresearch/hydra/issues/735", "id": 648412475, "node_id": "MDU6SXNzdWU2NDg0MTI0NzU=", "number": 735, "title": "Conditional config", "user": {"login": "pvnieo", "id": 22404728, "node_id": "MDQ6VXNlcjIyNDA0NzI4", "avatar_url": "https://avatars.githubusercontent.com/u/22404728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvnieo", "html_url": "https://github.com/pvnieo", "followers_url": "https://api.github.com/users/pvnieo/followers", "following_url": "https://api.github.com/users/pvnieo/following{/other_user}", "gists_url": "https://api.github.com/users/pvnieo/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvnieo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvnieo/subscriptions", "organizations_url": "https://api.github.com/users/pvnieo/orgs", "repos_url": "https://api.github.com/users/pvnieo/repos", "events_url": "https://api.github.com/users/pvnieo/events{/privacy}", "received_events_url": "https://api.github.com/users/pvnieo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 3, "created_at": "2020-06-30T18:46:02Z", "updated_at": "2020-07-06T08:58:58Z", "closed_at": "2020-07-06T08:58:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi!\r\n\r\nI'm using Hydra 1.0.0rc1.\r\nYou can find attached my config layout.\r\n\r\nBasically, I'm working on a DL project. I have many models, datasets and data transforms. Each model support only one data transform, which is indicated in it's config file.\r\n\r\nEach data transform has parameters that depends on the chosen dataset, and that get interpolated later.\r\n\r\nWhat I want to do, is when I ran my program, I only have to chose the model, then the data transform get chosen automatically, and get passed automatically to the dataset.\r\n\r\nBut when I ran the config I provided above, using:\r\n```\r\npython3 test_config.py dataset@trainset=in_memory_faust_remeshed model=geomfmaps_pointnet2\r\n```\r\nI got AssertionError.\r\n\r\nWhat I'm doing wrong?\r\n\r\n[conf.zip](https://github.com/facebookresearch/hydra/files/4853831/conf.zip)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/735/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/735/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/728", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/728/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/728/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/728/events", "html_url": "https://github.com/facebookresearch/hydra/issues/728", "id": 646831666, "node_id": "MDU6SXNzdWU2NDY4MzE2NjY=", "number": 728, "title": "[Bug] Unable to instantiate classes with non primitive data types", "user": {"login": "rohitgirdhar", "id": 1893429, "node_id": "MDQ6VXNlcjE4OTM0Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1893429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohitgirdhar", "html_url": "https://github.com/rohitgirdhar", "followers_url": "https://api.github.com/users/rohitgirdhar/followers", "following_url": "https://api.github.com/users/rohitgirdhar/following{/other_user}", "gists_url": "https://api.github.com/users/rohitgirdhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohitgirdhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohitgirdhar/subscriptions", "organizations_url": "https://api.github.com/users/rohitgirdhar/orgs", "repos_url": "https://api.github.com/users/rohitgirdhar/repos", "events_url": "https://api.github.com/users/rohitgirdhar/events{/privacy}", "received_events_url": "https://api.github.com/users/rohitgirdhar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-06-28T03:49:12Z", "updated_at": "2020-06-29T01:47:22Z", "closed_at": "2020-06-29T01:47:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nContinuing from issue https://github.com/facebookresearch/hydra/issues/650 \r\nI think the fix still doesn't seem to work for me. Here's a MWE that crashes for me, with the current master (0ccc2aad)\r\n\r\n## To reproduce\r\n\r\n```python\r\nfrom omegaconf import OmegaConf\r\nimport torch\r\nimport hydra\r\n\r\ndata_config = {\r\n    \"target\": \"torchvision.datasets.Kinetics400\",\r\n    \"params\": {\r\n        \"root\": \"/path/to/data\",\r\n        \"frames_per_clip\": 32,\r\n    }\r\n}\r\n\r\nconfig = OmegaConf.create(data_config)\r\ndataset = hydra.utils.instantiate(config, _precomputed_metadata={'a': torch.Tensor([1, 2, 3])})\r\n```\r\n\r\n\r\n** Stack trace/error message **\r\n\r\n```\r\nError instantiating 'torchvision.datasets.Kinetics400' : Value 'Tensor' is not a supported primitive type\r\n        full_key: _precomputed_metadata.a\r\n        reference_type=Optional[Dict[Any, Any]]\r\n        object_type=dict\r\nomegaconf.errors.UnsupportedValueType: Value 'Tensor' is not a supported primitive type\r\n        full_key: _precomputed_metadata.a\r\n        reference_type=Optional[Dict[Any, Any]]\r\n        object_type=dict\r\n```\r\n\r\n## Expected Behavior\r\n\r\nIt should be able to instantiate the object. While this example is simple (and I could perhaps cast the tensor to list and pass it in), in practice that tensor will be huge and converting it to a primitive lists will be prohibitively slow.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0rc1\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Linux \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/728/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/728/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/726", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/726/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/726/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/726/events", "html_url": "https://github.com/facebookresearch/hydra/issues/726", "id": 646667411, "node_id": "MDU6SXNzdWU2NDY2Njc0MTE=", "number": 726, "title": "multirun override for structured config parameter whose group is set by defaults does not work", "user": {"login": "immanuelweber", "id": 1731035, "node_id": "MDQ6VXNlcjE3MzEwMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1731035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/immanuelweber", "html_url": "https://github.com/immanuelweber", "followers_url": "https://api.github.com/users/immanuelweber/followers", "following_url": "https://api.github.com/users/immanuelweber/following{/other_user}", "gists_url": "https://api.github.com/users/immanuelweber/gists{/gist_id}", "starred_url": "https://api.github.com/users/immanuelweber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/immanuelweber/subscriptions", "organizations_url": "https://api.github.com/users/immanuelweber/orgs", "repos_url": "https://api.github.com/users/immanuelweber/repos", "events_url": "https://api.github.com/users/immanuelweber/events{/privacy}", "received_events_url": "https://api.github.com/users/immanuelweber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 5, "created_at": "2020-06-27T11:55:16Z", "updated_at": "2020-06-30T07:42:41Z", "closed_at": "2020-06-30T05:03:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nI have a few structured config classes, which I use mainly as verification schemes. \r\nI define defaults for the corresponding groups in the main config.yaml\r\nNow if I want to do a multi-run over a parameter from these groups, it crashes and it appears that hydra is unable to split the multiple values for that parameter.\r\nThe following small example shows that behavior. However, I found out that if I add the group to main config.yaml (the commented config lines below) then it works as expected.\r\n\r\n## To reproduce\r\n\r\nconf/config.yaml:\r\n```\r\ndefaults:\r\n  - test: default\r\n\r\n# test:\r\n#   param: 0\r\n```\r\n\r\nconf/test/default.yaml:\r\n```\r\n# @package _group_\r\nparam: 10\r\n```\r\n\r\ntest.py:\r\n```\r\nfrom dataclasses import dataclass\r\n\r\nimport hydra\r\nfrom hydra.core.config_store import ConfigStore\r\nfrom omegaconf import MISSING, DictConfig\r\n\r\n\r\n@dataclass\r\nclass TestConfig:\r\n    param: int = MISSING\r\n\r\n\r\nconfig_store = ConfigStore.instance()\r\nconfig_store.store(group=\"test\", name=\"default\", node=TestConfig)\r\n\r\n\r\n@hydra.main(config_path=\"conf\", config_name=\"config\")\r\ndef run(config: DictConfig):\r\n    print(config.pretty())\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    run()\r\n\r\n```\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\ntest.py -m test.param=42,23 \r\n```\r\n```\r\nError merging override test.param=42,23\r\nValue '42,23' could not be converted to Integer\r\n        full_key: test.param\r\n        reference_type=Optional[TestConfig]\r\n        object_type=TestConfig\r\n```\r\n\r\n## Expected Behavior\r\n\r\ndo multirun for values 42 and 23\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0.rc1\r\n- **Python version** :  Python 3.8.3\r\n- **Virtual environment type and version** : conda 4.8.3\r\n- **Operating system** :  ubuntu 18.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/726/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/725", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/725/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/725/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/725/events", "html_url": "https://github.com/facebookresearch/hydra/issues/725", "id": 646563088, "node_id": "MDU6SXNzdWU2NDY1NjMwODg=", "number": 725, "title": "Command line interpolations are not being evaluated lazily, leading to changed multirun behaviour", "user": {"login": "rohitgirdhar", "id": 1893429, "node_id": "MDQ6VXNlcjE4OTM0Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1893429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohitgirdhar", "html_url": "https://github.com/rohitgirdhar", "followers_url": "https://api.github.com/users/rohitgirdhar/followers", "following_url": "https://api.github.com/users/rohitgirdhar/following{/other_user}", "gists_url": "https://api.github.com/users/rohitgirdhar/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohitgirdhar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohitgirdhar/subscriptions", "organizations_url": "https://api.github.com/users/rohitgirdhar/orgs", "repos_url": "https://api.github.com/users/rohitgirdhar/repos", "events_url": "https://api.github.com/users/rohitgirdhar/events{/privacy}", "received_events_url": "https://api.github.com/users/rohitgirdhar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 8, "created_at": "2020-06-26T23:45:59Z", "updated_at": "2020-07-14T01:35:50Z", "closed_at": "2020-07-14T01:35:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "In v0.11, when I wanted to do multirun with certain parameters dependent on each other, I would do something like\r\n```\r\n./train.py param1=1,2,3 param2=\\${param1} -m\r\n```\r\nand this would launch 3 jobs, with same values for param1 and param2.\r\n\r\nWith v1.0, this seems to be launching 3*3 = 9 jobs, with all possible combinations of param1 and param2. Wondering if that's expected behavior? My understanding was that the interpolations are evaluated lazily, so it should have the same behavior as in v0.11.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0rc1\r\n- **Python version** : python 3.7.7\r\n- **Virtual environment type and version** : conda 4.7.10\r\n- **Operating system** : Linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/725/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/724", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/724/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/724/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/724/events", "html_url": "https://github.com/facebookresearch/hydra/issues/724", "id": 646461020, "node_id": "MDU6SXNzdWU2NDY0NjEwMjA=", "number": 724, "title": "Handle Frozen dataclasses during config composition", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 0, "created_at": "2020-06-26T19:15:19Z", "updated_at": "2020-07-15T18:09:40Z", "closed_at": "2020-07-15T18:09:40Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "marking a dataclass as frozen should prevent all manipulation, including composing and overriding from the command line.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/724/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/721", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/721/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/721/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/721/events", "html_url": "https://github.com/facebookresearch/hydra/issues/721", "id": 646369449, "node_id": "MDU6SXNzdWU2NDYzNjk0NDk=", "number": 721, "title": "[Bug] ObjectConf with cls Keyword Argument is not Supported on Python 3.6.9", "user": {"login": "cgerum", "id": 65497, "node_id": "MDQ6VXNlcjY1NDk3", "avatar_url": "https://avatars.githubusercontent.com/u/65497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgerum", "html_url": "https://github.com/cgerum", "followers_url": "https://api.github.com/users/cgerum/followers", "following_url": "https://api.github.com/users/cgerum/following{/other_user}", "gists_url": "https://api.github.com/users/cgerum/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgerum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgerum/subscriptions", "organizations_url": "https://api.github.com/users/cgerum/orgs", "repos_url": "https://api.github.com/users/cgerum/repos", "events_url": "https://api.github.com/users/cgerum/events{/privacy}", "received_events_url": "https://api.github.com/users/cgerum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 7, "created_at": "2020-06-26T16:17:13Z", "updated_at": "2020-06-28T03:00:06Z", "closed_at": "2020-06-28T03:00:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nIf one tries to instantiate ObjectConf with cls as a keyword argument python crashes. \r\n\r\nThis might be related to #634 and is probably ultimately caused by https://github.com/ericvsmith/dataclasses/issues/155 .\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```\r\nPython 3.6.9 (default, May 12 2020, 13:40:16) \r\n[GCC 9.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\nfrom hydra.types import ObjectConf \r\nObjectConf(cls=\"Test\") \r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: __new__() got multiple values for argument 'cls'\r\n\r\n```\r\n\r\n## Expected Behavior\r\n\r\n```\r\n>>> ObjectConf(\"Test\")\r\nObjectConf(cls='Test', params={})\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc1  \r\n- **Python version** : 3.6.9\r\n- **Virtual environment type and version** : pyenv  1.2.18\r\n- **Operating system** : Ubuntu 20.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/721/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/721/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/716", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/716/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/716/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/716/events", "html_url": "https://github.com/facebookresearch/hydra/issues/716", "id": 645434728, "node_id": "MDU6SXNzdWU2NDU0MzQ3Mjg=", "number": 716, "title": "interpolation using a hydra parameter not possible in jupyter notebook", "user": {"login": "immanuelweber", "id": 1731035, "node_id": "MDQ6VXNlcjE3MzEwMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1731035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/immanuelweber", "html_url": "https://github.com/immanuelweber", "followers_url": "https://api.github.com/users/immanuelweber/followers", "following_url": "https://api.github.com/users/immanuelweber/following{/other_user}", "gists_url": "https://api.github.com/users/immanuelweber/gists{/gist_id}", "starred_url": "https://api.github.com/users/immanuelweber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/immanuelweber/subscriptions", "organizations_url": "https://api.github.com/users/immanuelweber/orgs", "repos_url": "https://api.github.com/users/immanuelweber/repos", "events_url": "https://api.github.com/users/immanuelweber/events{/privacy}", "received_events_url": "https://api.github.com/users/immanuelweber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 7, "created_at": "2020-06-25T10:05:09Z", "updated_at": "2021-11-10T08:57:44Z", "closed_at": "2020-07-14T18:45:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nI'm testing some stuff in jupyter and trying to load configurations I'm using with normal python scripts.\r\nNow I have some parameters with interpolations to hydra parameters like `${hydra:job.name}`, however, accessing those with the compose API does not work. The error points to a not set HydraConfig as shown below.\r\n\r\n## To reproduce\r\n\r\nconfig.yaml:\r\n```test: ${hydra:job.name}```\r\n\r\nJupyter notebook cell:\r\n```\r\nfrom hydra.experimental import compose, initialize\r\ninitialize(config_path=\"conf\")\r\nconfig = compose(\"config.yaml\")\r\nconfig.test\r\n```\r\n\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-9-bebb51782d2a> in <module>\r\n      2 # initialize(config_path=\"conf\")\r\n      3 config = compose(\"config.yaml\")#, overrides=[\"wurst=hydra:job.name\"])\r\n----> 4 config.test\r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/dictconfig.py in __getattr__(self, key)\r\n    308             return self._get_impl(key=key, default_value=DEFAULT_VALUE_MARKER)\r\n    309         except Exception as e:\r\n--> 310             self._format_and_raise(key=key, value=None, cause=e)\r\n    311 \r\n    312     def __getitem__(self, key: Union[str, Enum]) -> Any:\r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/base.py in _format_and_raise(self, key, value, cause, type_override)\r\n     93         self, key: Any, value: Any, cause: Exception, type_override: Any = None,\r\n     94     ) -> None:\r\n---> 95         format_and_raise(\r\n     96             node=self,\r\n     97             key=key,\r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    561             )\r\n    562 \r\n--> 563         full_key = node._get_full_key(key=key, disable_warning=True)\r\n    564 \r\n    565         object_type = OmegaConf.get_type(node)\r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/basecontainer.py in _get_full_key(self, key, disable_warning)\r\n    530         if key is not None and key != \"\":\r\n    531             assert isinstance(self, Container)\r\n--> 532             cur, _ = _select_one(\r\n    533                 c=self,\r\n    534                 key=str(key),\r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/omegaconf.py in _select_one(c, key, throw_on_missing, throw_on_type_error, disable_warning)\r\n    696         )\r\n    697         if val is not None:\r\n--> 698             if val._is_missing():\r\n    699                 if throw_on_missing:\r\n    700                     raise MissingMandatoryValue(\r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/nodes.py in _is_missing(self)\r\n     96         try:\r\n     97             if self._is_interpolation():\r\n---> 98                 node = self._dereference_node(\r\n     99                     throw_on_resolution_failure=False, throw_on_missing=True\r\n    100                 )\r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/base.py in _dereference_node(self, throw_on_missing, throw_on_resolution_failure)\r\n    123             if value_kind == ValueKind.INTERPOLATION:\r\n    124                 assert parent is not None\r\n--> 125                 v = parent._resolve_simple_interpolation(\r\n    126                     key=key,\r\n    127                     inter_type=match.group(1),\r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/base.py in _resolve_simple_interpolation(self, key, inter_type, inter_key, throw_on_missing, throw_on_resolution_failure)\r\n    342                     )\r\n    343                 except Exception as e:\r\n--> 344                     self._format_and_raise(key=inter_key, value=None, cause=e)\r\n    345                     assert False\r\n    346             else:\r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/base.py in _format_and_raise(self, key, value, cause, type_override)\r\n     93         self, key: Any, value: Any, cause: Exception, type_override: Any = None,\r\n     94     ) -> None:\r\n---> 95         format_and_raise(\r\n     96             node=self,\r\n     97             key=key,\r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/_utils.py in format_and_raise(node, key, value, msg, cause, type_override)\r\n    610         ex.ref_type_str = ref_type_str\r\n    611 \r\n--> 612     raise_(ex, cause)\r\n    613 \r\n    614 \r\n\r\n~/miniconda3/envs/dev_pytorch15_38/lib/python3.8/site-packages/omegaconf/_utils.py in raise_(ex, cause)\r\n    535         else:\r\n    536             ex.__cause__ = None\r\n--> 537         raise ex\r\n    538 \r\n    539     if isinstance(cause, OmegaConfBaseException) and cause._initialized:\r\n\r\nValueError: HydraConfig was not set\r\n\tfull_key: job.name\r\n\treference_type=Optional[Dict[Any, Any]]\r\n\tobject_type=dict\r\n```\r\n\r\n## Expected Behavior\r\nthe interpolation should return the respective hydra parameter.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc1\r\n- **Python version** : Python 3.8.3\r\n- **Virtual environment type and version** :  conda 4.8.3\r\n- **Operating system** : ubuntu 18.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/716/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/716/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/712", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/712/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/712/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/712/events", "html_url": "https://github.com/facebookresearch/hydra/issues/712", "id": 644227123, "node_id": "MDU6SXNzdWU2NDQyMjcxMjM=", "number": 712, "title": "[Bug] Bad config group choice with a comma in normal run does not result in an error", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 0, "created_at": "2020-06-24T00:13:06Z", "updated_at": "2020-06-30T05:03:56Z", "closed_at": "2020-06-30T05:03:56Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\r\n$ python examples/tutorials/basic/your_first_hydra_app/5_defaults/my_app.py  db=mysql,a\r\n{}\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/712/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/695", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/695/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/695/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/695/events", "html_url": "https://github.com/facebookresearch/hydra/issues/695", "id": 642408175, "node_id": "MDU6SXNzdWU2NDI0MDgxNzU=", "number": 695, "title": "[Bug] KeyError: '_dh'", "user": {"login": "turian", "id": 65918, "node_id": "MDQ6VXNlcjY1OTE4", "avatar_url": "https://avatars.githubusercontent.com/u/65918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/turian", "html_url": "https://github.com/turian", "followers_url": "https://api.github.com/users/turian/followers", "following_url": "https://api.github.com/users/turian/following{/other_user}", "gists_url": "https://api.github.com/users/turian/gists{/gist_id}", "starred_url": "https://api.github.com/users/turian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/turian/subscriptions", "organizations_url": "https://api.github.com/users/turian/orgs", "repos_url": "https://api.github.com/users/turian/repos", "events_url": "https://api.github.com/users/turian/events{/privacy}", "received_events_url": "https://api.github.com/users/turian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 11, "created_at": "2020-06-20T16:44:13Z", "updated_at": "2020-06-24T22:51:28Z", "closed_at": "2020-06-24T22:50:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n`KeyError: '_dh'` when importing a module that uses `hydra.experimental.initialize`\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n\r\nmain.ipynb Jupyter notebook:\r\n\r\n```\r\nimport hydra.experimental\r\nhydra.experimental.initialize(config_path=\"conf\")\r\ncfg=hydra.experimental.compose(config_name=\"config.yaml\")\r\n\r\nimport module\r\n```\r\n\r\nmodule.py:\r\n```\r\nimport hydra.experimental\r\nhydra.experimental.initialize(config_path=\"conf\")\r\ncfg=hydra.experimental.compose(config_name=\"config.yaml\")\r\n```\r\n\r\n** Stack trace/error message **\r\n\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\n<ipython-input-8-ed3cf0961e67> in <module>()\r\n----> 1 import module\r\n\r\n~/dev/htest/module.py in <module>()\r\n      1 import hydra.experimental\r\n----> 2 hydra.experimental.initialize(config_path=\"conf\")\r\n      3 cfg=hydra.experimental.compose(config_name=\"config.yaml\")\r\n\r\n/usr/local/lib/python3.7/site-packages/hydra/experimental/compose.py in initialize(config_path, strict, caller_stack_depth)\r\n     23     \"\"\"\r\n     24     calling_file, calling_module = detect_calling_file_or_module_from_stack_frame(\r\n---> 25         caller_stack_depth + 1\r\n     26     )\r\n     27     Hydra.create_main_hydra_file_or_module(\r\n\r\n/usr/local/lib/python3.7/site-packages/hydra/_internal/utils.py in detect_calling_file_or_module_from_stack_frame(stack_depth)\r\n     59     frame = stack[stack_depth]\r\n     60     if is_notebook():\r\n---> 61         pynb_dir = frame[0].f_globals[\"_dh\"][0]\r\n     62         calling_file = join(pynb_dir, \"notebook.ipynb\")\r\n     63         return calling_file, None\r\n\r\nKeyError: '_dh'\r\n```\r\n\r\n\r\n## Expected Behavior\r\n\r\nUsing `hydra.experimental`, you should be able to import another module that also uses `hydra.experimental` instead of using the standard `@hydra.main()` to annotate a function\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc1\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : n/a\r\n- **Operating system** : OSX 10.14.6", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/695/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/695/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/678", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/678/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/678/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/678/events", "html_url": "https://github.com/facebookresearch/hydra/issues/678", "id": 638484553, "node_id": "MDU6SXNzdWU2Mzg0ODQ1NTM=", "number": 678, "title": "Save .hydra/*.yaml before task execution", "user": {"login": "binshengliu", "id": 441707, "node_id": "MDQ6VXNlcjQ0MTcwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/441707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binshengliu", "html_url": "https://github.com/binshengliu", "followers_url": "https://api.github.com/users/binshengliu/followers", "following_url": "https://api.github.com/users/binshengliu/following{/other_user}", "gists_url": "https://api.github.com/users/binshengliu/gists{/gist_id}", "starred_url": "https://api.github.com/users/binshengliu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binshengliu/subscriptions", "organizations_url": "https://api.github.com/users/binshengliu/orgs", "repos_url": "https://api.github.com/users/binshengliu/repos", "events_url": "https://api.github.com/users/binshengliu/events{/privacy}", "received_events_url": "https://api.github.com/users/binshengliu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 4, "created_at": "2020-06-15T01:55:07Z", "updated_at": "2020-06-16T08:55:52Z", "closed_at": "2020-06-16T08:55:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nSaving the configurations is a really cool idea that helps me check what I actually did. I noticed the save timing is delayed after task execution in the `1.0.0rc1`. I have encountered some scenarios that I think it would be better if the configs are saved earlier.\r\n\r\nFor example,\r\n\r\n1. Tasks may exit accidentally due to bugs. Knowing detailed configurations would be helpful.\r\n2. For time-consuming tasks like ML training which may last for several days, it would be helpful to be able to check the config.yaml. This helps me a lot when I have multiple tasks running but I can't remember the real difference. I do `diff config.yaml`.\r\n3. Some tasks don't need to be finished. The full training may be designed to run 100 epochs but it also happens it's aborted/killed in the middle.\r\n\r\n## To reproduce\r\n\r\nDefault behavior in `1.0.0rc1`.\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nNA\r\n\r\n** Stack trace/error message **\r\nNA\r\n\r\n## Expected Behavior\r\nNA\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc1\r\n- **Python version** : NA\r\n- **Virtual environment type and version** : NA\r\n- **Operating system** : NA\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/678/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/678/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/657", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/657/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/657/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/657/events", "html_url": "https://github.com/facebookresearch/hydra/issues/657", "id": 634831911, "node_id": "MDU6SXNzdWU2MzQ4MzE5MTE=", "number": 657, "title": "[Bug] Can not find type hints for Hydra", "user": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 0, "created_at": "2020-06-08T18:19:33Z", "updated_at": "2020-06-08T19:55:11Z", "closed_at": "2020-06-08T19:55:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nRunning `mypy` on a hydra app throws type errors.`Skipping analyzing 'hydra': found module but no type hints or library stubs`\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n* Create a file, say `test.py`\r\n* Add a single line `import hydra`\r\n* Run `mypy test.py`\r\n\r\n** Stack trace/error message **\r\n```\r\n/(hydra_types) \u279c  ~ mypy test.py\r\ntest.py:1: error: Skipping analyzing 'hydra': found module but no type hints or library stubs\r\ntest.py:1: note: See https://mypy.readthedocs.io/en/latest/running_mypy.html#missing-imports\r\nFound 1 error in 1 file (checked 1 source file)\r\n```\r\n\r\n## Expected Behavior\r\nType tests should pass\r\n\r\n## System information\r\n- **Hydra Version** :  Master and pip (1.0rc)\r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : Conda 4.5.8\r\n- **Operating system** : Linux\r\n\r\n## Additional context\r\n\r\nhttps://mypy.readthedocs.io/en/latest/running_mypy.html#missing-type-hints-for-third-party-library\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/657/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/650", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/650/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/650/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/650/events", "html_url": "https://github.com/facebookresearch/hydra/issues/650", "id": 631720669, "node_id": "MDU6SXNzdWU2MzE3MjA2Njk=", "number": 650, "title": "[Bug] Hydra fails to instantiate objects in specific cases", "user": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 13, "created_at": "2020-06-05T16:11:54Z", "updated_at": "2020-06-29T20:44:19Z", "closed_at": "2020-06-28T03:00:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nHydra fails to instantiate when the caller expects an arg called `params` and the value is not a supported primitive type.\r\n\r\n## To reproduce\r\n\r\nhttps://colab.research.google.com/drive/16jOM9kKwSpu1DdUcJETMe6LOz0G9Gnqh?usp=sharing\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\nUnsupportedValueType: Value 'Parameter' is not a supported primitive type\r\n\tfull_key: params[0]\r\n\treference_type=Optional[List[Any]]\r\n\tobject_type=list\r\n```\r\n\r\n## Expected Behavior\r\n\r\nNo Exception\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0rc1\r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : NA\r\n- **Operating system** : Ubuntu\r\n\r\n## Additional context\r\nNA\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/650/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/650/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/647", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/647/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/647/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/647/events", "html_url": "https://github.com/facebookresearch/hydra/issues/647", "id": 631105575, "node_id": "MDU6SXNzdWU2MzExMDU1NzU=", "number": 647, "title": "[Bug] config access errors in the code should include stack trace", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 7, "created_at": "2020-06-04T19:55:59Z", "updated_at": "2021-08-04T11:46:09Z", "closed_at": "2020-07-16T15:42:42Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "When the user is making a config access error in the code the stack trace should include the offending file+line.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/647/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/647/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/646", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/646/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/646/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/646/events", "html_url": "https://github.com/facebookresearch/hydra/issues/646", "id": 631102561, "node_id": "MDU6SXNzdWU2MzExMDI1NjE=", "number": 646, "title": "[Bug] error merging with a structured config that contains a frozen object.", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 1, "created_at": "2020-06-04T19:50:25Z", "updated_at": "2020-06-19T21:31:41Z", "closed_at": "2020-06-19T21:31:40Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "1. Structured configs containing frozen node can't be used even if nothing is being merged into the node,\r\n2. full_key is wrong.\r\n\r\n```\r\nomegaconf.errors.ReadonlyConfigError: Cannot merge into read-only node : {'abc': ['a', 'b']}\r\n        full_key:\r\n        reference_type=Optional[Config]\r\n        object_type=Config\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/646/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/624", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/624/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/624/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/624/events", "html_url": "https://github.com/facebookresearch/hydra/issues/624", "id": 627438151, "node_id": "MDU6SXNzdWU2Mjc0MzgxNTE=", "number": 624, "title": "submitit fails on python3.6", "user": {"login": "jieru-hu", "id": 4642412, "node_id": "MDQ6VXNlcjQ2NDI0MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/4642412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieru-hu", "html_url": "https://github.com/jieru-hu", "followers_url": "https://api.github.com/users/jieru-hu/followers", "following_url": "https://api.github.com/users/jieru-hu/following{/other_user}", "gists_url": "https://api.github.com/users/jieru-hu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieru-hu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieru-hu/subscriptions", "organizations_url": "https://api.github.com/users/jieru-hu/orgs", "repos_url": "https://api.github.com/users/jieru-hu/repos", "events_url": "https://api.github.com/users/jieru-hu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieru-hu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 2169716916, "node_id": "MDU6TGFiZWwyMTY5NzE2OTE2", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/plugin", "name": "plugin", "color": "e59e90", "default": false, "description": "Plugins realted issues"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-05-29T17:56:25Z", "updated_at": "2020-10-19T07:42:18Z", "closed_at": "2020-10-19T07:41:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It seems like it's related to the fact the hydra project is typed, reason being: 1) same tests worked on https://github.com/fairinternal/hydra-fair-plugins (no typing) 2) error message\r\n\r\n```python3\r\n(pytest36) jieru-mbp:example jieru$ python my_app.py task=1,2,3 -m\r\n[2020-05-29 10:34:33,074][HYDRA] Sweep output dir : multirun/2020-05-29/10-34-33\r\n[2020-05-29 10:34:33,074][HYDRA]        #0 : task=1\r\n[2020-05-29 10:34:33,075][HYDRA]        #1 : task=2\r\n[2020-05-29 10:34:33,075][HYDRA]        #2 : task=3\r\nTraceback (most recent call last):\r\n  File \"my_app.py\", line 20, in <module>\r\n    my_app()\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/main.py\", line 37, in decorated_main\r\n    strict=strict,\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/_internal/utils.py\", line 261, in run_hydra\r\n    lambda: hydra.multirun(\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/_internal/utils.py\", line 185, in run_and_report\r\n    func()\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/_internal/utils.py\", line 264, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/_internal/hydra.py\", line 135, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/_internal/core_plugins/basic_sweeper.py\", line 113, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/plugins/hydra_submitit_launcher/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 139, in launch\r\n    return [j.results()[0] for j in jobs]\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/plugins/hydra_submitit_launcher/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 139, in <listcomp>\r\n    return [j.results()[0] for j in jobs]\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/core.py\", line 286, in results\r\n    outcome, result = self._get_outcome_and_result()\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/core.py\", line 366, in _get_outcome_and_result\r\n    f\"Job {self.job_id} (task: {self.task_id}) with path {self.paths.result_pickle}\\n\"\r\nsubmitit.core.utils.UncompletedJobError: Job 80923 (task: 0) with path /Users/jieru/workspace/hydra-fork/hydra/plugins/hydra_submitit_launcher/example/multirun/2020-05-29/10-34-33/.local/80923_0_result.pkl\r\nhas not produced any output (state: FINISHED)\r\nError stream produced:\r\n----------------------\r\nsubmitit ERROR (2020-05-29 10:34:34,657) - Could not dump error:\r\nCan't pickle typing.Dict[str, str]: it's not the same object as typing.Dict\r\n\r\nbecause of A temporary saved file already exists.\r\nsubmitit ERROR (2020-05-29 10:34:34,657) - Submitted job triggered an exception\r\nTraceback (most recent call last):\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/_submit.py\", line 11, in <module>\r\n    submitit_main()\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/submission.py\", line 65, in submitit_main\r\n    process_job(args.folder)\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/submission.py\", line 58, in process_job\r\n    raise error\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/submission.py\", line 49, in process_job\r\n    utils.pickle_dump((\"success\", result), tmppath)\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/utils.py\", line 278, in pickle_dump\r\n    pickle.dump(obj, ofile, pickle.HIGHEST_PROTOCOL)\r\n_pickle.PicklingError: Can't pickle typing.Dict[str, str]: it's not the same object as typing.Dict\r\n\r\n(pytest36) jieru-mbp:example jieru$ python my_app.py task=1,2,3 -m\r\n[2020-05-29 10:35:45,059][HYDRA] Sweep output dir : multirun/2020-05-29/10-35-45\r\n[2020-05-29 10:35:45,060][HYDRA]        #0 : task=1\r\n[2020-05-29 10:35:45,060][HYDRA]        #1 : task=2\r\n[2020-05-29 10:35:45,060][HYDRA]        #2 : task=3\r\nTraceback (most recent call last):\r\n  File \"my_app.py\", line 20, in <module>\r\n    my_app()\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/main.py\", line 37, in decorated_main\r\n    strict=strict,\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/_internal/utils.py\", line 261, in run_hydra\r\n    lambda: hydra.multirun(\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/_internal/utils.py\", line 185, in run_and_report\r\n    func()\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/_internal/utils.py\", line 264, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/_internal/hydra.py\", line 135, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/hydra/_internal/core_plugins/basic_sweeper.py\", line 113, in sweep\r\n    results = self.launcher.launch(batch, initial_job_idx=initial_job_idx)\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/plugins/hydra_submitit_launcher/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 139, in launch\r\n    return [j.results()[0] for j in jobs]\r\n  File \"/Users/jieru/workspace/hydra-fork/hydra/plugins/hydra_submitit_launcher/hydra_plugins/hydra_submitit_launcher/submitit_launcher.py\", line 139, in <listcomp>\r\n    return [j.results()[0] for j in jobs]\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/core.py\", line 286, in results\r\n    outcome, result = self._get_outcome_and_result()\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/core.py\", line 366, in _get_outcome_and_result\r\n    f\"Job {self.job_id} (task: {self.task_id}) with path {self.paths.result_pickle}\\n\"\r\nsubmitit.core.utils.UncompletedJobError: Job 81029 (task: 0) with path /Users/jieru/workspace/hydra-fork/hydra/plugins/hydra_submitit_launcher/example/multirun/2020-05-29/10-35-45/.local/81029_0_result.pkl\r\nhas not produced any output (state: FINISHED)\r\nError stream produced:\r\n----------------------\r\nsubmitit ERROR (2020-05-29 10:35:46,642) - Could not dump error:\r\nCan't pickle typing.Dict[str, str]: it's not the same object as typing.Dict\r\n\r\nbecause of A temporary saved file already exists.\r\nsubmitit ERROR (2020-05-29 10:35:46,643) - Submitted job triggered an exception\r\nTraceback (most recent call last):\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/_submit.py\", line 11, in <module>\r\n    submitit_main()\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/submission.py\", line 65, in submitit_main\r\n    process_job(args.folder)\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/submission.py\", line 58, in process_job\r\n    raise error\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/submission.py\", line 49, in process_job\r\n    utils.pickle_dump((\"success\", result), tmppath)\r\n  File \"/Users/jieru/opt/anaconda3/envs/pytest36/lib/python3.6/site-packages/submitit/core/utils.py\", line 278, in pickle_dump\r\n    pickle.dump(obj, ofile, pickle.HIGHEST_PROTOCOL)\r\n_pickle.PicklingError: Can't pickle typing.Dict[str, str]: it's not the same object as typing.Dict\r\n\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/624/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/624/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/608", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/608/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/608/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/608/events", "html_url": "https://github.com/facebookresearch/hydra/issues/608", "id": 625135015, "node_id": "MDU6SXNzdWU2MjUxMzUwMTU=", "number": 608, "title": "joblib example crashes with \"Input config does not have a cls field\"", "user": {"login": "immanuelweber", "id": 1731035, "node_id": "MDQ6VXNlcjE3MzEwMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1731035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/immanuelweber", "html_url": "https://github.com/immanuelweber", "followers_url": "https://api.github.com/users/immanuelweber/followers", "following_url": "https://api.github.com/users/immanuelweber/following{/other_user}", "gists_url": "https://api.github.com/users/immanuelweber/gists{/gist_id}", "starred_url": "https://api.github.com/users/immanuelweber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/immanuelweber/subscriptions", "organizations_url": "https://api.github.com/users/immanuelweber/orgs", "repos_url": "https://api.github.com/users/immanuelweber/repos", "events_url": "https://api.github.com/users/immanuelweber/events{/privacy}", "received_events_url": "https://api.github.com/users/immanuelweber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-26T19:24:03Z", "updated_at": "2020-05-26T19:58:35Z", "closed_at": "2020-05-26T19:28:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nI installed hydra using pip from github and the joblib plugin as described here [https://hydra.cc/docs/next/plugins/joblib_launcher](https://hydra.cc/docs/next/plugins/joblib_launcher)\r\nWhen trying the provided example for the joblib launcher with \"-m task=1,2,3,4,5\" I get this error:\r\n`Input config does not have a cls field`.\r\nDigging into the lib code and printing it, the config causing this error looks like this:\r\n`{'cls': '???', 'params': {'n_jobs': 10}}` (as far as I understand this comes from the hydra/launcher/joblib.yaml configuration from the example)\r\nWithout the multirun flag the code executes.\r\n\r\n## To reproduce\r\n\r\nit's just the example from the plugin\r\n\r\n\r\n## Stack trace/error message \r\n\r\n```\r\n  File \"my_app.py\", line 20, in <module>\r\n    my_app()\r\n  File \"/home/user/miniconda3/envs/dev_pytorch15/lib/python3.7/site-packages/hydra/main.py\", line 29, in decorated_main\r\n    strict=strict,\r\n  File \"/home/user/miniconda3/envs/dev_pytorch15/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 261, in run_hydra\r\n    lambda: hydra.multirun(\r\n  File \"/home/user/miniconda3/envs/dev_pytorch15/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 185, in run_and_report\r\n    func()\r\n  File \"/home/user/miniconda3/envs/dev_pytorch15/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 264, in <lambda>\r\n    overrides=args.overrides,\r\n  File \"/home/user/miniconda3/envs/dev_pytorch15/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 132, in multirun\r\n    config=cfg, config_loader=self.config_loader, task_function=task_function\r\n  File \"/home/user/miniconda3/envs/dev_pytorch15/lib/python3.7/site-packages/hydra/core/plugins.py\", line 117, in instantiate_sweeper\r\n    config=config, config_loader=config_loader, task_function=task_function\r\n  File \"/home/user/miniconda3/envs/dev_pytorch15/lib/python3.7/site-packages/hydra/_internal/core_plugins/basic_sweeper.py\", line 71, in setup\r\n    config=config, config_loader=config_loader, task_function=task_function\r\n  File \"/home/user/miniconda3/envs/dev_pytorch15/lib/python3.7/site-packages/hydra/core/plugins.py\", line 130, in instantiate_launcher\r\n    launcher = self._instantiate(config.hydra.launcher)\r\n  File \"/home/user/miniconda3/envs/dev_pytorch15/lib/python3.7/site-packages/hydra/core/plugins.py\", line 73, in _instantiate\r\n    classname = internal_utils._get_cls_name(config)\r\n  File \"/home/user/miniconda3/envs/dev_pytorch15/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 490, in _get_cls_name\r\n    raise ValueError(\"Input config does not have a cls field\")\r\nValueError: Input config does not have a cls field\r\n```\r\n\r\n## Expected Behavior\r\nThe example should launch multiple processes for each job.\r\n\r\n## System information\r\n- **Hydra Version** :  1.0.0-rc1\r\n- **Python version** :  Python 3.7.6\r\n- **Virtual environment type and version** :  miniconda/conda 4.8.3\r\n- **Operating system** : Ubuntu 18.04\r\n\r\n## Additional context\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/608/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/601", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/601/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/601/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/601/events", "html_url": "https://github.com/facebookresearch/hydra/issues/601", "id": 623698401, "node_id": "MDU6SXNzdWU2MjM2OTg0MDE=", "number": 601, "title": "Where is hydra_nevergrad_sweeper?", "user": {"login": "vict0rsch", "id": 9283470, "node_id": "MDQ6VXNlcjkyODM0NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/9283470?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vict0rsch", "html_url": "https://github.com/vict0rsch", "followers_url": "https://api.github.com/users/vict0rsch/followers", "following_url": "https://api.github.com/users/vict0rsch/following{/other_user}", "gists_url": "https://api.github.com/users/vict0rsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/vict0rsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vict0rsch/subscriptions", "organizations_url": "https://api.github.com/users/vict0rsch/orgs", "repos_url": "https://api.github.com/users/vict0rsch/repos", "events_url": "https://api.github.com/users/vict0rsch/events{/privacy}", "received_events_url": "https://api.github.com/users/vict0rsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-23T16:51:23Z", "updated_at": "2020-05-24T13:37:51Z", "closed_at": "2020-05-23T17:01:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nIn the docs, it is written that `pip install hydra_nevergrad_sweeper` should allow me to use nevergrad as sweeper (after having installed hydra from master).\r\n\r\nThis package however does not exist. What's the preferred way to use Nevergrad then? \r\n\r\nThanks!\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/601/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/601/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/597", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/597/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/597/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/597/events", "html_url": "https://github.com/facebookresearch/hydra/issues/597", "id": 621584901, "node_id": "MDU6SXNzdWU2MjE1ODQ5MDE=", "number": 597, "title": "[What a fxxk doc you write? Even can't run office example correctly!!]", "user": {"login": "ImMrMa", "id": 24520617, "node_id": "MDQ6VXNlcjI0NTIwNjE3", "avatar_url": "https://avatars.githubusercontent.com/u/24520617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ImMrMa", "html_url": "https://github.com/ImMrMa", "followers_url": "https://api.github.com/users/ImMrMa/followers", "following_url": "https://api.github.com/users/ImMrMa/following{/other_user}", "gists_url": "https://api.github.com/users/ImMrMa/gists{/gist_id}", "starred_url": "https://api.github.com/users/ImMrMa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ImMrMa/subscriptions", "organizations_url": "https://api.github.com/users/ImMrMa/orgs", "repos_url": "https://api.github.com/users/ImMrMa/repos", "events_url": "https://api.github.com/users/ImMrMa/events{/privacy}", "received_events_url": "https://api.github.com/users/ImMrMa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-05-20T08:55:13Z", "updated_at": "2020-05-20T09:28:44Z", "closed_at": "2020-05-20T09:05:52Z", "author_association": "NONE", "active_lock_reason": "too heated", "body": "# \ud83d\udc1b Bug\r\n\r\ncan't run office example correctly.\r\nhttps://hydra.cc/docs/configure_hydra/logging\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nconfig.yaml\r\ndefaults:\r\n  - hydra/job_logging: custom\r\nfiles\r\n![image](https://user-images.githubusercontent.com/24520617/82426441-707c2480-9aba-11ea-9aa5-05555116f0b7.png)\r\n\r\n File \"my_app.py\", line 11, in <module>\r\n    my_app()\r\n  File \"/data00/home/mayingxin/anaconda3/envs/pysot/lib/python3.7/site-packages/hydra/main.py\", line 24, in decorated_main\r\n    strict=strict,\r\n  File \"/data00/home/mayingxin/anaconda3/envs/pysot/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 174, in run_hydra\r\n    overrides=args.overrides,\r\n  File \"/data00/home/mayingxin/anaconda3/envs/pysot/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 86, in run\r\n    job_subdir_key=None,\r\n  File \"/data00/home/mayingxin/anaconda3/envs/pysot/lib/python3.7/site-packages/hydra/plugins/common/utils.py\", line 101, in run_job\r\n    configure_log(config.hydra.job_logging, config.hydra.verbose)\r\n  File \"/data00/home/mayingxin/anaconda3/envs/pysot/lib/python3.7/site-packages/hydra/plugins/common/utils.py\", line 24, in configure_log\r\n    logging.config.dictConfig(conf)\r\n  File \"/data00/home/mayingxin/anaconda3/envs/pysot/lib/python3.7/logging/config.py\", line 800, in dictConfig\r\n    dictConfigClass(config).configure()\r\n  File \"/data00/home/mayingxin/anaconda3/envs/pysot/lib/python3.7/logging/config.py\", line 496, in configure\r\n    raise ValueError(\"dictionary doesn't specify a version\")\r\nValueError: dictionary doesn't specify a version\r\n\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\n\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  \r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\nI think your tutorials are dogshit!\r\nhttps://hydra.cc/docs/configure_hydra/logging\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/597/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/597/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/592", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/592/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/592/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/592/events", "html_url": "https://github.com/facebookresearch/hydra/issues/592", "id": 619845006, "node_id": "MDU6SXNzdWU2MTk4NDUwMDY=", "number": 592, "title": "Fish completion is not working", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-18T01:20:18Z", "updated_at": "2020-05-18T15:56:27Z", "closed_at": "2020-05-18T15:56:13Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Fish completion does not seem to work:\r\n\r\n```\r\n$ python my_app.py -sc install=fish | source\r\n$ python my_app.py <TAB> string split: Unknown option \u201c-n\u201d\r\n- (line 2):                        \r\nstring split -n ' ' $COMP_LINE\r\n^                          \r\nin command substitution             \r\n        called on line 0 of file -\r\n                                \r\nin function \u201chydra_fish_completion\u201d\r\n        called on standard input\r\n                      \r\nin command substitution\r\n        called on standard input\r\n                                                                     \r\n\r\n       stringstring - manipulate strings\r\n        -                          \r\n\r\n   Synopsis                        \r\n       string escape [(-n | --no-quoted)] [--style=xxx] [STRING...]\r\n       string join [(-q | --quiet)] SEP [STRING...]\r\n       string length [(-q | --quiet)] [STRING...]\r\n       string lower [(-q | --quiet)] [STRING...]\r\n       string match [(-a | --all)] [((-e | --entire)] [(-i | --ignore-case)] [(-r | --regex)]\r\n                    [(-n | --index)] [(-q |\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/592/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/592/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/591", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/591/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/591/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/591/events", "html_url": "https://github.com/facebookresearch/hydra/issues/591", "id": 619798684, "node_id": "MDU6SXNzdWU2MTk3OTg2ODQ=", "number": 591, "title": "[Bug] Running Hydra with Pytest yields `NotImplementedError` error", "user": {"login": "vict0rsch", "id": 9283470, "node_id": "MDQ6VXNlcjkyODM0NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/9283470?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vict0rsch", "html_url": "https://github.com/vict0rsch", "followers_url": "https://api.github.com/users/vict0rsch/followers", "following_url": "https://api.github.com/users/vict0rsch/following{/other_user}", "gists_url": "https://api.github.com/users/vict0rsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/vict0rsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vict0rsch/subscriptions", "organizations_url": "https://api.github.com/users/vict0rsch/orgs", "repos_url": "https://api.github.com/users/vict0rsch/repos", "events_url": "https://api.github.com/users/vict0rsch/events{/privacy}", "received_events_url": "https://api.github.com/users/vict0rsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 16, "created_at": "2020-05-17T21:15:49Z", "updated_at": "2020-06-15T06:46:53Z", "closed_at": "2020-05-25T23:05:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nRunning Hydra with Pytest yields `NotImplementedError` error\r\n\r\n## To reproduce\r\n\r\n```\r\ndirectory structure:\r\n\thydra/\r\n\t\tconf/\r\n\t\t\t__init__.py\r\n\t\t\tconfig.yaml\r\n\ttests/\r\n\t\ttest_hydra.py\r\n```\r\n\r\n```\r\n# test_hydra.py \r\nimport unittest\r\nfrom hydra.experimental import compose, initialize\r\n\r\n\r\nfrom pathlib import Path\r\n\r\n\r\nclass FullUnitTest(unittest.TestCase):\r\n\r\n    def test_hydra_is_loaded(self):\r\n\r\n        conf_path = Path(__file__).parent.parent / \"hydra\" / \"conf\"\r\n        conf_path = conf_path.resolve()\r\n        print()\r\n        print(\">>>>>>>\", conf_path)\r\n        print(\">>>>>>>\", conf_path.exists())\r\n        print(\">>>>>>>\", str(conf_path))\r\n        initialize(config_dir=str(conf_path))\r\n        conf = compose(str(conf_path / \"config.yaml\"))\r\n        print(conf.pretty())\r\n\r\n```\r\n\r\n** Stack trace/error message **\r\n\r\n```\r\n$ pytest -s\r\n============================================================= test session starts ==============================================================\r\nplatform darwin -- Python 3.7.4, pytest-5.4.2, py-1.8.1, pluggy-0.13.1\r\nrootdir: /Users/victor/Documents/Experiments/python-exps/tests\r\ncollected 1 item                                                                                                                               \r\n\r\ntest_hydra.py \r\n>>>>>>> /Users/victor/Documents/Experiments/python-exps/hydra/conf\r\n>>>>>>> True\r\n>>>>>>> /Users/victor/Documents/Experiments/python-exps/hydra/conf\r\nF\r\n\r\n=================================================================== FAILURES ===================================================================\r\n______________________________________________________ FullUnitTest.test_hydra_is_loaded _______________________________________________________\r\n\r\nis_pkg = True, filename = 'test_hydra//Users/victor/Documents/Experiments/python-exps/hydra/conf'\r\n\r\n    @staticmethod\r\n    def _exists(is_pkg, filename):\r\n        if is_pkg:\r\n            module_name, resource_name = ConfigLoader._split_module_and_resource(\r\n                filename\r\n            )\r\n            try:\r\n>               ret = resource_exists(module_name, resource_name)\r\n\r\n../exp-env/lib/python3.7/site-packages/hydra/_internal/config_loader.py:365: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <pkg_resources.ResourceManager object at 0x105486750>, package_or_requirement = 'test_hydra'\r\nresource_name = '/Users/victor/Documents/Experiments/python-exps/hydra/conf'\r\n\r\n    def resource_exists(self, package_or_requirement, resource_name):\r\n        \"\"\"Does the named resource exist?\"\"\"\r\n>       return get_provider(package_or_requirement).has_resource(resource_name)\r\n\r\n../exp-env/lib/python3.7/site-packages/pkg_resources/__init__.py:1134: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <pkg_resources.NullProvider object at 0x1054be550>, resource_name = '/Users/victor/Documents/Experiments/python-exps/hydra/conf'\r\n\r\n    def has_resource(self, resource_name):\r\n>       return self._has(self._fn(self.module_path, resource_name))\r\n\r\n../exp-env/lib/python3.7/site-packages/pkg_resources/__init__.py:1404: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <pkg_resources.NullProvider object at 0x1054be550>\r\npath = '/Users/victor/Documents/Experiments/python-exps/tests/Users/victor/Documents/Experiments/python-exps/hydra/conf'\r\n\r\n    def _has(self, path):\r\n        raise NotImplementedError(\r\n>           \"Can't perform this operation for unregistered loader type\"\r\n        )\r\nE       NotImplementedError: Can't perform this operation for unregistered loader type\r\n\r\n../exp-env/lib/python3.7/site-packages/pkg_resources/__init__.py:1457: NotImplementedError\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nself = <test_hydra.FullUnitTest testMethod=test_hydra_is_loaded>\r\n\r\n    def test_hydra_is_loaded(self):\r\n    \r\n        conf_path = Path(__file__).parent.parent / \"hydra\" / \"conf\"\r\n        conf_path = conf_path.resolve()\r\n        print()\r\n        print(\">>>>>>>\", conf_path)\r\n        print(\">>>>>>>\", conf_path.exists())\r\n        print(\">>>>>>>\", str(conf_path))\r\n>       initialize(config_dir=str(conf_path))\r\n\r\ntest_hydra.py:19: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n../exp-env/lib/python3.7/site-packages/hydra/experimental/compose.py:16: in initialize\r\n    calling_file, calling_module, config_dir, strict\r\n../exp-env/lib/python3.7/site-packages/hydra/_internal/hydra.py:51: in create_main_hydra_file_or_module\r\n    calling_file, calling_module, config_dir\r\n../exp-env/lib/python3.7/site-packages/hydra/_internal/utils.py:117: in create_automatic_config_search_path\r\n    if search_path_dir is not None and not ConfigLoader.exists(search_path_dir):\r\n../exp-env/lib/python3.7/site-packages/hydra/_internal/config_loader.py:132: in exists\r\n    return ConfigLoader._exists(is_pkg, path)\r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nis_pkg = True, filename = 'test_hydra//Users/victor/Documents/Experiments/python-exps/hydra/conf'\r\n\r\n    @staticmethod\r\n    def _exists(is_pkg, filename):\r\n        if is_pkg:\r\n            module_name, resource_name = ConfigLoader._split_module_and_resource(\r\n                filename\r\n            )\r\n            try:\r\n                ret = resource_exists(module_name, resource_name)\r\n            except ImportError:\r\n                ret = False\r\n            except ValueError:  # Python 2.7 throws ValueError empty module name sometimes.\r\n                ret = False\r\n            except NotImplementedError:\r\n                raise NotImplementedError(\r\n                    \"Unable to load {}/{}, are you missing an __init__.py?\".format(\r\n>                       module_name, resource_name\r\n                    )\r\n                )\r\nE               NotImplementedError: Unable to load test_hydra//Users/victor/Documents/Experiments/python-exps/hydra/conf, are you missing an __init__.py?\r\n\r\n../exp-env/lib/python3.7/site-packages/hydra/_internal/config_loader.py:373: NotImplementedError\r\n=============================================================== warnings summary ===============================================================\r\ntest_hydra.py::FullUnitTest::test_hydra_is_loaded\r\n  /Users/victor/Documents/Experiments/python-exps/exp-env/lib/python3.7/site-packages/pkg_resources/__init__.py:1134: DeprecationWarning: Use of .. or absolute path in a resource path is not allowed and will raise exceptions in a future release.\r\n    return get_provider(package_or_requirement).has_resource(resource_name)\r\n\r\n-- Docs: https://docs.pytest.org/en/latest/warnings.html\r\n=========================================================== short test summary info ============================================================\r\nFAILED test_hydra.py::FullUnitTest::test_hydra_is_loaded - NotImplementedError: Unable to load test_hydra//Users/victor/Documents/Experiments...\r\n========================================================= 1 failed, 1 warning in 0.43s =========================================================\r\n```\r\n\r\n## Expected Behavior\r\n\r\nI'd like to understand how to use Hydra in a testing environment, considering that I can't wrap this `test_hydra_is_loaded` function with `@hydra.main()`\r\n\r\n## System information\r\n- **Hydra Version** :  0.11.3\r\n- **Python version** : Python 3.7.4\r\n- **Virtual environment type and version** : Pyenv 1.2.13\r\n- **Operating system** : macOS\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/591/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/559", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/559/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/559/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/559/events", "html_url": "https://github.com/facebookresearch/hydra/issues/559", "id": 608528417, "node_id": "MDU6SXNzdWU2MDg1Mjg0MTc=", "number": 559, "title": "[Bug] Paths not properly configured when packaged", "user": {"login": "jbohnslav", "id": 17788259, "node_id": "MDQ6VXNlcjE3Nzg4MjU5", "avatar_url": "https://avatars.githubusercontent.com/u/17788259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbohnslav", "html_url": "https://github.com/jbohnslav", "followers_url": "https://api.github.com/users/jbohnslav/followers", "following_url": "https://api.github.com/users/jbohnslav/following{/other_user}", "gists_url": "https://api.github.com/users/jbohnslav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbohnslav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbohnslav/subscriptions", "organizations_url": "https://api.github.com/users/jbohnslav/orgs", "repos_url": "https://api.github.com/users/jbohnslav/repos", "events_url": "https://api.github.com/users/jbohnslav/events{/privacy}", "received_events_url": "https://api.github.com/users/jbohnslav/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-04-28T18:35:27Z", "updated_at": "2023-02-21T04:41:06Z", "closed_at": "2020-04-28T19:04:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nI'm releasing my app as a pip package. I want users to be able to type \"my_app\" at the command line. I want this main script to take a Hydra configuration as input. \r\n\r\nWhat works: \r\n`python -m my_app.gui.main`\r\nWhat doesn't work: \r\n`my_app`\r\n\r\nIn my_app\\gui\\main:\r\n```python\r\n@hydra.main(config_path='../conf/gui.yaml')\r\ndef run(cfg: DictConfig) -> None:\r\n    log.info('CWD: {}'.format(os.getcwd()))\r\n```\r\n\r\nIn my setup.py: \r\n```python\r\nentry_points={\r\n        'console_scripts':[\r\n            'my_app= my_app.gui.main:run']\r\n    },\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\deg\\Scripts\\my_app-script.py\", line 11, in <module>\r\n    load_entry_point('my_app==0.0.1', 'console_scripts', 'my_app')()\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\deg\\lib\\site-packages\\hydra\\main.py\", line 24, in decorated_main\r\n    strict=strict,\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\deg\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 147, in run_hydra\r\n    calling_file, calling_module, config_dir\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\deg\\lib\\site-packages\\hydra\\_internal\\utils.py\", line 120, in create_automatic_config_search_path\r\n    message=\"Primary config dir not found: {}\".format(search_path_dir),\r\nhydra.errors.MissingConfigException: Primary config dir not found: C:\\ProgramData\\Anaconda3\\envs\\deg\\Scripts\\conf\r\n```\r\n\r\n\r\n## System information\r\n- **Hydra Version** : hydra-core         0.11.3  \r\n- **Python version** : 3.7.6\r\n- **Virtual environment type and version** : conda 4.8.2\r\n- **Operating system** : Windows\r\n\r\n## Additional context\r\nI tried to follow the [formula outlined in this issue here](https://github.com/facebookresearch/hydra/issues/92)", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/559/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/540", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/540/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/540/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/540/events", "html_url": "https://github.com/facebookresearch/hydra/issues/540", "id": 600997221, "node_id": "MDU6SXNzdWU2MDA5OTcyMjE=", "number": 540, "title": "[Bug] variables in params not resolved when using hydra.utils.call", "user": {"login": "dhpollack", "id": 368699, "node_id": "MDQ6VXNlcjM2ODY5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/368699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhpollack", "html_url": "https://github.com/dhpollack", "followers_url": "https://api.github.com/users/dhpollack/followers", "following_url": "https://api.github.com/users/dhpollack/following{/other_user}", "gists_url": "https://api.github.com/users/dhpollack/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhpollack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhpollack/subscriptions", "organizations_url": "https://api.github.com/users/dhpollack/orgs", "repos_url": "https://api.github.com/users/dhpollack/repos", "events_url": "https://api.github.com/users/dhpollack/events{/privacy}", "received_events_url": "https://api.github.com/users/dhpollack/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-16T12:12:14Z", "updated_at": "2020-04-16T14:15:14Z", "closed_at": "2020-04-16T14:15:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nWhen one uses the `call`/`instantiate` function, if a variable is in one of the params then it does not get resolved before the object is instantiated / called.  This might have more to do with OmegaConf than hydra, but I'm not exactly sure when / where the variable resolution / interpolation takes place.\r\n\r\n## To reproduce\r\n\r\nmodels.py\r\n```\r\nclass Dummy:\r\n    def __init__(self, x):\r\n        self.x = x\r\n\r\n    def reveal(self):\r\n        print(f\"x: {self.x}\")\r\n```\r\nconfig.yaml\r\n```\r\nmodel:\r\n  cls: models.Dummy\r\n  params:\r\n    x: 10\r\n\r\nx: 15\r\n\r\nmodel_resolve:\r\n  cls: models.Dummy\r\n  params:\r\n    x: $x\r\n```\r\napp.py\r\n```\r\nimport hydra\r\n\r\n\r\n@hydra.main(config_path=\"config.yaml\")\r\ndef app(cfg):\r\n    model = hydra.utils.call(cfg.model)\r\n    model.reveal()\r\n\r\n    model_resolve = hydra.utils.call(cfg.model_resolve)\r\n    model_resolve.reveal()\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    app()\r\n```\r\nThis will output\r\n```\r\n# python app.py\r\nx: 10\r\nx: $x\r\n```\r\nThe string `$x` is not resolved to `15`.\r\n\r\n\r\n## Expected Behavior\r\n\r\n```\r\n# python app.py\r\nx: 10\r\nx: 15\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  master  \r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : anaconda \r\n- **Operating system** : arch linux\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/540/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/540/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/533", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/533/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/533/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/533/events", "html_url": "https://github.com/facebookresearch/hydra/issues/533", "id": 599932823, "node_id": "MDU6SXNzdWU1OTk5MzI4MjM=", "number": 533, "title": "[Bug] hydra.utils.to_absolute_path() does not work properly with the joblib launcher plugin", "user": {"login": "jbragg", "id": 2238344, "node_id": "MDQ6VXNlcjIyMzgzNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2238344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbragg", "html_url": "https://github.com/jbragg", "followers_url": "https://api.github.com/users/jbragg/followers", "following_url": "https://api.github.com/users/jbragg/following{/other_user}", "gists_url": "https://api.github.com/users/jbragg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbragg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbragg/subscriptions", "organizations_url": "https://api.github.com/users/jbragg/orgs", "repos_url": "https://api.github.com/users/jbragg/repos", "events_url": "https://api.github.com/users/jbragg/events{/privacy}", "received_events_url": "https://api.github.com/users/jbragg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 5, "created_at": "2020-04-15T00:10:03Z", "updated_at": "2020-04-20T04:12:48Z", "closed_at": "2020-04-17T00:36:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n.to_absolute_path() works but not inside a multirun with the joblib launcher plugin\r\n\r\n## To reproduce\r\n\r\nIf main.py contains something like \r\n`hydra.utils.to_absolute_path('./some_file.txt')`\r\n\r\nThis will work when running \r\n`python main.py foo=bar`\r\n\r\nbut not\r\n`python main.py -m foo=bar`\r\n\r\nIn the second case, the expanded version of `some_file.txt` is not in the same directory as `main.py` but is in the multirun output directory instead.\r\n\r\nThis problem only seems to occur when using the joblib launcher with\r\n```\r\ndefaults:\r\n  - hydra/launcher: joblib\r\n```\r\n\r\n## System information\r\n- **Hydra Version** :  `hydra-core==1.0.0rc1` and `hydra-joblib-launcher==1.0.2`\r\n- **Python version** : 3.7.7\r\n- **Virtual environment type and version** : Miniconda\r\n- **Operating system** : Mac OS X\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/533/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/526", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/526/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/526/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/526/events", "html_url": "https://github.com/facebookresearch/hydra/issues/526", "id": 598509035, "node_id": "MDU6SXNzdWU1OTg1MDkwMzU=", "number": 526, "title": "[Bug] Colorlog brokes in master.", "user": {"login": "lkhphuc", "id": 12573521, "node_id": "MDQ6VXNlcjEyNTczNTIx", "avatar_url": "https://avatars.githubusercontent.com/u/12573521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lkhphuc", "html_url": "https://github.com/lkhphuc", "followers_url": "https://api.github.com/users/lkhphuc/followers", "following_url": "https://api.github.com/users/lkhphuc/following{/other_user}", "gists_url": "https://api.github.com/users/lkhphuc/gists{/gist_id}", "starred_url": "https://api.github.com/users/lkhphuc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lkhphuc/subscriptions", "organizations_url": "https://api.github.com/users/lkhphuc/orgs", "repos_url": "https://api.github.com/users/lkhphuc/repos", "events_url": "https://api.github.com/users/lkhphuc/events{/privacy}", "received_events_url": "https://api.github.com/users/lkhphuc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-12T15:24:43Z", "updated_at": "2020-04-12T16:04:08Z", "closed_at": "2020-04-12T15:43:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nColorlog plugin not working on master.\r\n\r\n** Stack trace/error message **\r\n```\r\nMissingConfigException: Could not load hydra/hydra_logging/colorlog, available options:\r\nhydra/hydra_logging:\r\n        default\r\n        disabled\r\n        hydra_debug\r\n```\r\n\r\n## System information\r\n- **Hydra Version** : master  \r\n- **Python version** : 3.7\r\n\r\n## Additional context\r\nI tried reinstall colorlog with `pip install -U hydra_colorlog` after install hydra from master but it still not working.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/526/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/526/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/524", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/524/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/524/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/524/events", "html_url": "https://github.com/facebookresearch/hydra/issues/524", "id": 598294159, "node_id": "MDU6SXNzdWU1OTgyOTQxNTk=", "number": 524, "title": "[Bug]", "user": {"login": "lkhphuc", "id": 12573521, "node_id": "MDQ6VXNlcjEyNTczNTIx", "avatar_url": "https://avatars.githubusercontent.com/u/12573521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lkhphuc", "html_url": "https://github.com/lkhphuc", "followers_url": "https://api.github.com/users/lkhphuc/followers", "following_url": "https://api.github.com/users/lkhphuc/following{/other_user}", "gists_url": "https://api.github.com/users/lkhphuc/gists{/gist_id}", "starred_url": "https://api.github.com/users/lkhphuc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lkhphuc/subscriptions", "organizations_url": "https://api.github.com/users/lkhphuc/orgs", "repos_url": "https://api.github.com/users/lkhphuc/repos", "events_url": "https://api.github.com/users/lkhphuc/events{/privacy}", "received_events_url": "https://api.github.com/users/lkhphuc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-11T15:48:19Z", "updated_at": "2020-04-11T16:22:50Z", "closed_at": "2020-04-11T16:19:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nInstantiate object with optional arguments modified the original config.\r\n\r\n## To reproduce\r\n```\r\nmy_function:\r\n  class: main.dummy\r\n  params:\r\n    first: 1\r\n    second: 10\r\n----\r\ndef dummy(first, second):\r\n  return first + second\r\n\r\n a = hydra.utils.instantiate(cfg.my_function)\r\n b = hydra.utils.instantiate(cfg.my_function, second=20)\r\n c = hydra.utils.instantiate(cfg.my_function)\r\n```\r\nPrint a,b,c yields 11,21,21\r\n\r\n## Expected Behavior\r\nprint a, b, c will yield 11, 21, 11\r\n\r\n## Additional context\r\nI'm not sure if this behavior is desired or not but it's definitely not expected from the docs nor intuitive.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/524/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/513", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/513/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/513/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/513/events", "html_url": "https://github.com/facebookresearch/hydra/issues/513", "id": 593097663, "node_id": "MDU6SXNzdWU1OTMwOTc2NjM=", "number": 513, "title": "[Bug] Unable to debug using pdbpp", "user": {"login": "binshengliu", "id": 441707, "node_id": "MDQ6VXNlcjQ0MTcwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/441707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binshengliu", "html_url": "https://github.com/binshengliu", "followers_url": "https://api.github.com/users/binshengliu/followers", "following_url": "https://api.github.com/users/binshengliu/following{/other_user}", "gists_url": "https://api.github.com/users/binshengliu/gists{/gist_id}", "starred_url": "https://api.github.com/users/binshengliu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binshengliu/subscriptions", "organizations_url": "https://api.github.com/users/binshengliu/orgs", "repos_url": "https://api.github.com/users/binshengliu/repos", "events_url": "https://api.github.com/users/binshengliu/events{/privacy}", "received_events_url": "https://api.github.com/users/binshengliu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-04-03T05:49:32Z", "updated_at": "2020-04-04T16:17:00Z", "closed_at": "2020-04-03T07:23:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nHi, thanks for creating this wonderful tool! I encountered a problem when using [pdbpp](https://github.com/pdbpp/pdbpp) to debug code. Pdbpp's `sticky` mode (typing `sticky` command in debugging interface) shows source code for debugging. But if the function is decorated with `@hydra.main`, entering `sticky` mode triggers this error:\r\n\r\n`** Error in inspect.getsourcelines: source code not available **`\r\n\r\nI'm not sure if this is related to hydra or pdbpp. Any suggestions?\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```\r\npip install pdbpp\r\npip install hydra-core\r\n```\r\n```\r\nimport pdb\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\n\r\n@hydra.main(config_path=\"config.yaml\")\r\ndef main(cfg: DictConfig) -> None:\r\n    pdb.set_trace()\r\n    print(cfg.pretty())\r\n\r\n    return\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n$ python test.py\r\n[5] > /home/bsl/code/tmp/outputs/2020-04-03/16-31-47/test.py(9)main()                                                                                         \r\n(Pdb++) sticky                                                                                                                                                \r\n> /home/bsl/code/tmp/outputs/2020-04-03/16-31-47/test.py(9)                                                                                                   \r\n\r\n** Error in inspect.getsourcelines: source code not available **\r\n(Pdb++)\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nA window with source code showing for debugging.\r\n\r\n## System information\r\n- **Hydra Version** :  `0.11.3`\r\n- **Python version** : `3.7.6`\r\n- **Virtual environment type and version** : `conda 4.7.12`\r\n- **Operating system** : `Linux debian 4.19.0-8-amd64 #1 SMP Debian 4.19.98-1 (2020-01-26) x86_64 GNU/Linux`\r\n\r\n## Additional context\r\n- **Pdbpp version** : `0.10.2`\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/513/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/500", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/500/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/500/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/500/events", "html_url": "https://github.com/facebookresearch/hydra/issues/500", "id": 584131639, "node_id": "MDU6SXNzdWU1ODQxMzE2Mzk=", "number": 500, "title": "[Bug] utils.instantiate fails with dict kwarg inputs", "user": {"login": "jbragg", "id": 2238344, "node_id": "MDQ6VXNlcjIyMzgzNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2238344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbragg", "html_url": "https://github.com/jbragg", "followers_url": "https://api.github.com/users/jbragg/followers", "following_url": "https://api.github.com/users/jbragg/following{/other_user}", "gists_url": "https://api.github.com/users/jbragg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbragg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbragg/subscriptions", "organizations_url": "https://api.github.com/users/jbragg/orgs", "repos_url": "https://api.github.com/users/jbragg/repos", "events_url": "https://api.github.com/users/jbragg/events{/privacy}", "received_events_url": "https://api.github.com/users/jbragg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 6, "created_at": "2020-03-19T03:10:26Z", "updated_at": "2020-03-19T07:00:10Z", "closed_at": "2020-03-19T07:00:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n`utils.instantiate` fails with dict kwarg inputs\r\n\r\n## To reproduce\r\n\r\n**Minimal Code/Config snippet to reproduce**\r\n\r\nSuppose I have a config group file\r\n```yaml\r\nmodel:\r\n  class: models.Net\r\n  params:\r\n    some: 0\r\n    values: 1\r\n```\r\n\r\nLet's say I want to pass in a dictionary to `models.Net` as follows:\r\n`utils.instantiate(cfg.model, some_config_argument={'test': 'dict'})`\r\n\r\n**Stack trace/error message**\r\n\r\nThis will throw `KeyError: 'Accessing unknown key in a struct : model.params.test'`\r\n\r\nfrom `params.merge_with(OmegaConf.create(kwargs))` in the instantiate function.\r\n\r\n## Expected Behavior\r\nExpected to succeed and pass in the dict kwarg to the class constructor\r\n\r\n## System information\r\n- **Hydra Version** :  0.11.0\r\n- **Python version** : 3.7.6\r\n- **Virtual environment type and version** :  Conda \r\n- **Operating system** : OS X\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/500/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/500/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/497", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/497/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/497/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/497/events", "html_url": "https://github.com/facebookresearch/hydra/issues/497", "id": 583809278, "node_id": "MDU6SXNzdWU1ODM4MDkyNzg=", "number": 497, "title": "[Bug] Compose API does not parse Hydra configs", "user": {"login": "msalvaris", "id": 6794993, "node_id": "MDQ6VXNlcjY3OTQ5OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/6794993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msalvaris", "html_url": "https://github.com/msalvaris", "followers_url": "https://api.github.com/users/msalvaris/followers", "following_url": "https://api.github.com/users/msalvaris/following{/other_user}", "gists_url": "https://api.github.com/users/msalvaris/gists{/gist_id}", "starred_url": "https://api.github.com/users/msalvaris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msalvaris/subscriptions", "organizations_url": "https://api.github.com/users/msalvaris/orgs", "repos_url": "https://api.github.com/users/msalvaris/repos", "events_url": "https://api.github.com/users/msalvaris/events{/privacy}", "received_events_url": "https://api.github.com/users/msalvaris/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-03-18T15:25:51Z", "updated_at": "2020-03-18T19:01:34Z", "closed_at": "2020-03-18T19:01:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nWhen using the experimental Compose API the configs for hydra don't seem to be parsed. This manifests in my particular instance as the logging not being correct. \r\n\r\n## Expected Behavior\r\nThat the hydra configs are parsed and it behaves the same as calling function decorated with hydra.main\r\n\r\n## System information\r\n- **Hydra Version** :  0.11.3\r\n- **Python version** : 3.6\r\n- **Virtual environment type and version** :  Anaconda\r\n- **Operating system** :  Ubuntu 16.04\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/497/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/497/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/496", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/496/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/496/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/496/events", "html_url": "https://github.com/facebookresearch/hydra/issues/496", "id": 582682134, "node_id": "MDU6SXNzdWU1ODI2ODIxMzQ=", "number": 496, "title": "[Bug] get_original_cwd breaks without hydra", "user": {"login": "SunQpark", "id": 31339583, "node_id": "MDQ6VXNlcjMxMzM5NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/31339583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SunQpark", "html_url": "https://github.com/SunQpark", "followers_url": "https://api.github.com/users/SunQpark/followers", "following_url": "https://api.github.com/users/SunQpark/following{/other_user}", "gists_url": "https://api.github.com/users/SunQpark/gists{/gist_id}", "starred_url": "https://api.github.com/users/SunQpark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SunQpark/subscriptions", "organizations_url": "https://api.github.com/users/SunQpark/orgs", "repos_url": "https://api.github.com/users/SunQpark/repos", "events_url": "https://api.github.com/users/SunQpark/events{/privacy}", "received_events_url": "https://api.github.com/users/SunQpark/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 4, "created_at": "2020-03-17T00:55:01Z", "updated_at": "2020-04-12T04:38:19Z", "closed_at": "2020-04-12T04:38:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n`get_original_cwd` and `to_absolute_path` raises AttributeError, when used without hydra.\r\nHere is the [definition](https://github.com/facebookresearch/hydra/blob/8ffc4f22ce865d0142c06722a4809e5fe2703c96/hydra/utils.py#L60) of `get_original_cwd` in `utils.py` \r\n```python\r\ndef get_original_cwd() -> str:\r\n    ret = HydraConfig.instance().hydra.runtime.cwd # AttributeError\r\n    assert ret is not None and isinstance(ret, str) # assertion is not catching anything\r\n    return ret\r\n```\r\nSince `HydraConfig.instance().hydra` is already None when hydra is not on. Accessing the `runtime` attribute raises AttributeError here.\r\nIt shoud be changed to \r\n```python\r\ndef get_original_cwd():\r\n    hydra_cfg = hydra.utils.HydraConfig().hydra\r\n    if hydra_cfg is not None:\r\n        ret = Path(hydra_cfg.runtime.cwd)\r\n    else:\r\n        ret = Path.cwd()\r\n    return ret\r\n```\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## To reproduce\r\n** Minimal Code/Config snippet to reproduce **\r\n```python\r\nimport hydra\r\n\r\nhydra.utils.get_original_cwd() # Attribute Error\r\nhydra.utils.to_absolute_path('some_path') # this also breaks due to the same error\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-24-3c0b668b9ce4> in <module>\r\n----> 1 hydra.utils.to_absolute_path('something')\r\n\r\n/opt/conda/lib/python3.7/site-packages/hydra/utils.py in to_absolute_path(path)\r\n     77         ret = path\r\n     78     else:\r\n---> 79         ret = Path(get_original_cwd()) / path\r\n     80     return str(ret)\r\n\r\n/opt/conda/lib/python3.7/site-packages/hydra/utils.py in get_original_cwd()\r\n     62 \r\n     63 def get_original_cwd():\r\n---> 64     return HydraConfig().hydra.runtime.cwd\r\n     65 \r\n     66 \r\n\r\nAttributeError: 'NoneType' object has no attribute 'runtime'\r\n```\r\n\r\n## Expected Behavior\r\n\r\nI expect `get_original_cwd` to just return cwd, and `to_absolute_path` works fine even if hydra config is not set.\r\n\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  '0.11.3'\r\n- **Python version** : 3.7.4\r\n- **Virtual environment type and version** : \r\n- **Operating system** : Ubuntu 18.04.3 LTS (GNU/Linux 4.20.13-1.el7.elrepo.x86_64 x86_64)\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/496/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/496/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/493", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/493/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/493/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/493/events", "html_url": "https://github.com/facebookresearch/hydra/issues/493", "id": 579830093, "node_id": "MDU6SXNzdWU1Nzk4MzAwOTM=", "number": 493, "title": "Use of required fields leads to RecursionError", "user": {"login": "cmnrd", "id": 6460123, "node_id": "MDQ6VXNlcjY0NjAxMjM=", "avatar_url": "https://avatars.githubusercontent.com/u/6460123?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmnrd", "html_url": "https://github.com/cmnrd", "followers_url": "https://api.github.com/users/cmnrd/followers", "following_url": "https://api.github.com/users/cmnrd/following{/other_user}", "gists_url": "https://api.github.com/users/cmnrd/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmnrd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmnrd/subscriptions", "organizations_url": "https://api.github.com/users/cmnrd/orgs", "repos_url": "https://api.github.com/users/cmnrd/repos", "events_url": "https://api.github.com/users/cmnrd/events{/privacy}", "received_events_url": "https://api.github.com/users/cmnrd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-03-12T10:14:04Z", "updated_at": "2020-03-13T08:36:44Z", "closed_at": "2020-03-13T08:34:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n## To reproduce\r\n\r\nI have a conf directory that contains `conf/default.yaml`:\r\n```\r\ndefaults:\r\n  - x: default\r\n\r\nout_file: \"${x.name}.txt\"\r\n```\r\n\r\nand `conf/x/default.yaml`:\r\n```\r\nx:\r\n  name: ???\r\n```\r\n\r\nThe python script I am running is this one: `test.py`\r\n```\r\nimport hydra\r\n\r\n@hydra.main(\"conf/default.yaml\")\r\ndef main(cfg):\r\n    with open(cfg[\"out_file\"], \"w\") as f:\r\n        f.write(\"Hello Hydra!\")\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\nRunning `python test.py -c job` gives:\r\n``` \r\nout_file: ${x.name}.txt\r\nx:\r\n  name: ???\r\n``` \r\n\r\n** Stack trace/error message **\r\n\r\nRunning `python test.py` produces a RecursionError exception:\r\n```\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 141, in __contains__\r\n    self._resolve_with_default(key, node, None)\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/config.py\", line 151, in _resolve_with_default\r\n    raise MissingMandatoryValue(self.get_full_key(key))\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/config.py\", line 168, in get_full_key\r\n    for parent_key, v in parent.items():\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 185, in items\r\n    return MyItems(self)\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 156, in __init__\r\n    self.iterator = iter(m)\r\nRecursionError: maximum recursion depth exceeded!\r\n```\r\n\r\nRunning `python test.py x.name=test -c job` also produces a RecursionError exception:\r\n```\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/config.py\", line 168, in get_full_key\r\n    for parent_key, v in parent.items():\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 162, in __next__\r\n    k, v = self._next_pair()\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 177, in _next_pair\r\n    v = self.map.get(k)\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 99, in get\r\n    default_value=default_value,\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/config.py\", line 153, in _resolve_with_default\r\n    return self._resolve_single(value) if isinstance(value, str) else value\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/site-packages/omegaconf/config.py\", line 479, in _resolve_single\r\n    match_list = list(re.finditer(key_prefix + legal_characters, value))\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/re.py\", line 230, in finditer\r\n    return _compile(pattern, flags).finditer(string)\r\n  File \"/home/cmenard/virtualenvs/hydra/lib/python3.7/re.py\", line 273, in _compile\r\n    if isinstance(flags, RegexFlag):\r\nRecursionError: maximum recursion depth exceeded while calling a Python object\r\n```\r\nNote that I shortened the trace and only included the last lines since they are very long due to the recursion.\r\n\r\n## Expected Behavior\r\n\r\nRunning `python test.py` is expected to fail as `x.name` is not set. I would expect, however, a clear error message instead of RecursionError. Moreover, I expect the script to work when `x.name` is set via command line parameter, but both `python test.py x.name=test` and `python test.py x.name=test -c job` fail with an RecursionError.\r\n\r\n## System information\r\n- **Hydra Version** :  0.11.3\r\n- **Python version** : 3.7\r\n- **Virtual environment type and version** : virtualenv 16.1.0\r\n- **Operating system** : Manjaro Linux\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/493/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/493/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/482", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/482/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/482/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/482/events", "html_url": "https://github.com/facebookresearch/hydra/issues/482", "id": 577547392, "node_id": "MDU6SXNzdWU1Nzc1NDczOTI=", "number": 482, "title": "[Bug] plugins are imported twice during discovery", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-08T18:56:58Z", "updated_at": "2020-03-08T23:18:06Z", "closed_at": "2020-03-08T23:18:06Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The examples plugins have something like the following in their `__init__.py` file:\r\n```python\r\n# Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved\r\nfrom .example_searchpath_plugin import ExampleSearchPathPlugin\r\n\r\n__all__ = [\"ExampleSearchPathPlugin\"]\r\n```\r\n\r\nThis causes the plugins to be imported twice during plugin discovery, making any slowdown from slow plugin import twice as bad.\r\n\r\nThis is not necessary and is actually harmful.\r\nThis should be fixed in all plugins (official and unofficial).\r\n\r\nFor official plugins (in the Hydra repository), that `__init__.py` should be empty:\r\n```python\r\n# Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/482/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/482/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/481", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/481/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/481/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/481/events", "html_url": "https://github.com/facebookresearch/hydra/issues/481", "id": 577307110, "node_id": "MDU6SXNzdWU1NzczMDcxMTA=", "number": 481, "title": "[Bug] %run magic with jupyter notebook", "user": {"login": "noklam", "id": 18221871, "node_id": "MDQ6VXNlcjE4MjIxODcx", "avatar_url": "https://avatars.githubusercontent.com/u/18221871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noklam", "html_url": "https://github.com/noklam", "followers_url": "https://api.github.com/users/noklam/followers", "following_url": "https://api.github.com/users/noklam/following{/other_user}", "gists_url": "https://api.github.com/users/noklam/gists{/gist_id}", "starred_url": "https://api.github.com/users/noklam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noklam/subscriptions", "organizations_url": "https://api.github.com/users/noklam/orgs", "repos_url": "https://api.github.com/users/noklam/repos", "events_url": "https://api.github.com/users/noklam/events{/privacy}", "received_events_url": "https://api.github.com/users/noklam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 10, "created_at": "2020-03-07T09:24:50Z", "updated_at": "2020-04-14T02:06:49Z", "closed_at": "2020-04-14T02:06:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nExpect to run hydra in a notebook cell and get realtime output like in Terminal.\r\n\r\nTwo ways of running a python file in Jupyter\r\n!python (calling the terminal directly) -> but cannot get real time output\r\n%run (Jupyter way of running python file, but does not seems compatible with Hydra directly)\r\n\r\nI am expecting this can run `%run runner.py exp_name=abc`\r\n\r\n## To reproduce\r\nhydra_tqdm_notebook.py\r\n```\r\nimport hydra\r\n@hydra.main(config_path=\"configs/config.yaml\")\r\ndef experiment_runner(cfg) -> None:\r\n    from tqdm import tqdm_notebook as tqdm\r\n\r\n\r\n    for i in tqdm(range(5)):\r\n        import time\r\n        time.sleep(0.02)\r\n        print('helloworld')\r\n\r\nif __name__ == \"__main__\":\r\n    experiment_runner()\r\n```\r\n\r\n** Stack trace/error message **\r\n![image](https://user-images.githubusercontent.com/18221871/76141436-2d0b4000-609f-11ea-8b6b-c8111d851d2f.png)\r\n\r\n\r\n\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nThe only difference between `test_hydra_tqdm_notebook.py` and `test_tqdm_notebook.py` is I wrapped it inside the Hydra runner. I expect the output to be the same.\r\n![image](https://user-images.githubusercontent.com/18221871/76141432-2381d800-609f-11ea-9367-bd092c113fbb.png)\r\n\r\n\r\n## System information\r\n- **Hydra Version** :  \r\n- **Python version** : \r\n- **Virtual environment type and version** : \r\n- **Operating system** : \r\n\r\n## Additional context\r\ntest_tqdm_notebook.py\r\n```\r\nfrom tqdm import tqdm_notebook as tqdm\r\nfor i in tqdm(range(100)):\r\n    import time\r\n    time.sleep(0.02)\r\n    print('helloworld')\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/481/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/481/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/476", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/476/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/476/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/476/events", "html_url": "https://github.com/facebookresearch/hydra/issues/476", "id": 576697709, "node_id": "MDU6SXNzdWU1NzY2OTc3MDk=", "number": 476, "title": "[Bug] Hydra ax sweeper is slowing Hydra startup down", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shagunsodhani", "id": 1321193, "node_id": "MDQ6VXNlcjEzMjExOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1321193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shagunsodhani", "html_url": "https://github.com/shagunsodhani", "followers_url": "https://api.github.com/users/shagunsodhani/followers", "following_url": "https://api.github.com/users/shagunsodhani/following{/other_user}", "gists_url": "https://api.github.com/users/shagunsodhani/gists{/gist_id}", "starred_url": "https://api.github.com/users/shagunsodhani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shagunsodhani/subscriptions", "organizations_url": "https://api.github.com/users/shagunsodhani/orgs", "repos_url": "https://api.github.com/users/shagunsodhani/repos", "events_url": "https://api.github.com/users/shagunsodhani/events{/privacy}", "received_events_url": "https://api.github.com/users/shagunsodhani/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-06T04:53:33Z", "updated_at": "2020-03-26T03:38:43Z", "closed_at": "2020-03-26T03:38:43Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Please follow the examples in the [submitit](https://github.com/fairinternal/hydra-fair-plugins/blob/master/plugins/hydra-submitit/hydra_plugins/submitit/submitit_launcher.py) and fairtask plugins for late importing of expensive modules.\r\n\r\nWithout Hydra ax sweeper:\r\n```\r\n~/dev/hydra $ time python examples/tutorial/5_composition/my_app.py > /dev/null\r\nreal    0m0.675s\r\nuser    0m1.198s\r\nsys     0m0.248s\r\n```\r\n\r\nWith Hydra ax sweeper:\r\n```\r\n~/dev/hydra $ pip install plugins/hydra_ax_sweeper/\r\n...\r\n~/dev/hydra $  time python examples/tutorial/5_composition/my_app.py > /dev/null\r\nreal    0m2.410s\r\nuser    0m3.260s\r\nsys     0m0.672s\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/476/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/476/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/466", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/466/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/466/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/466/events", "html_url": "https://github.com/facebookresearch/hydra/issues/466", "id": 575515883, "node_id": "MDU6SXNzdWU1NzU1MTU4ODM=", "number": 466, "title": "[Bug] setuptools finds and installs tests/ as a top-level package in site-packages/", "user": {"login": "bcdarwin", "id": 164148, "node_id": "MDQ6VXNlcjE2NDE0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/164148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bcdarwin", "html_url": "https://github.com/bcdarwin", "followers_url": "https://api.github.com/users/bcdarwin/followers", "following_url": "https://api.github.com/users/bcdarwin/following{/other_user}", "gists_url": "https://api.github.com/users/bcdarwin/gists{/gist_id}", "starred_url": "https://api.github.com/users/bcdarwin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bcdarwin/subscriptions", "organizations_url": "https://api.github.com/users/bcdarwin/orgs", "repos_url": "https://api.github.com/users/bcdarwin/repos", "events_url": "https://api.github.com/users/bcdarwin/events{/privacy}", "received_events_url": "https://api.github.com/users/bcdarwin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 3, "created_at": "2020-03-04T15:42:43Z", "updated_at": "2020-03-05T03:11:19Z", "closed_at": "2020-03-05T03:10:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/466/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/466/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/454", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/454/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/454/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/454/events", "html_url": "https://github.com/facebookresearch/hydra/issues/454", "id": 573297273, "node_id": "MDU6SXNzdWU1NzMyOTcyNzM=", "number": 454, "title": "[Bug] Cannot override default constructor parameters without duplicating them in config", "user": {"login": "erip", "id": 2348806, "node_id": "MDQ6VXNlcjIzNDg4MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/2348806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erip", "html_url": "https://github.com/erip", "followers_url": "https://api.github.com/users/erip/followers", "following_url": "https://api.github.com/users/erip/following{/other_user}", "gists_url": "https://api.github.com/users/erip/gists{/gist_id}", "starred_url": "https://api.github.com/users/erip/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erip/subscriptions", "organizations_url": "https://api.github.com/users/erip/orgs", "repos_url": "https://api.github.com/users/erip/repos", "events_url": "https://api.github.com/users/erip/events{/privacy}", "received_events_url": "https://api.github.com/users/erip/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-02-29T13:37:29Z", "updated_at": "2020-03-05T00:58:10Z", "closed_at": "2020-03-05T00:58:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nWhen using `hydra.utils.instantiate`, if the class to be constructed has default params it cannot be overridden unless the params are duplicated in config:\r\n\r\n## To reproduce\r\n\r\n```python\r\n# app/my_class.py\r\nclass MyClass:\r\n    def __init__(self, a: int=42, b: str=\"hello\"):\r\n        self.a = a\r\n        self.b = b\r\n```\r\n\r\n```yaml\r\n# conf/conf.yaml\r\nmodel:\r\n    class: app.my_class.MyClass\r\n    params:\r\n```\r\n\r\n# `my_app.py`\r\n```python\r\n#!/usr/bin/env python3\r\n\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\n@hydra.main(config_path=\"conf/conf.yaml\")\r\ndef my_app(cfg: DictConfig) -> None:\r\n    my_class = hydra.utils.instantiate(cfg.model)\r\n    print(my_class.a, my_class.b)\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\n$ ./my_app.py model.params.a=1\r\nTraceback (most recent call last):\r\n  File \"./my_app.py\", line 12, in <module>\r\n    my_app()\r\n  File \"/Users/erip/miniconda3/envs/hydra/lib/python3.6/site-packages/hydra/main.py\", line 24, in decorated_main\r\n    strict=strict,\r\n  File \"/Users/erip/miniconda3/envs/hydra/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 174, in run_hydra\r\n    overrides=args.overrides,\r\n  File \"/Users/erip/miniconda3/envs/hydra/lib/python3.6/site-packages/hydra/_internal/hydra.py\", line 79, in run\r\n    config_file=config_file, overrides=overrides, with_log_configuration=True\r\n  File \"/Users/erip/miniconda3/envs/hydra/lib/python3.6/site-packages/hydra/_internal/hydra.py\", line 343, in compose_config\r\n    config_file=config_file, overrides=overrides, strict=strict\r\n  File \"/Users/erip/miniconda3/envs/hydra/lib/python3.6/site-packages/hydra/_internal/config_loader.py\", line 82, in load_configuration\r\n    cfg.merge_with_dotlist(remaining_overrides)\r\n  File \"/Users/erip/miniconda3/envs/hydra/lib/python3.6/site-packages/omegaconf/config.py\", line 278, in merge_with_dotlist\r\n    self.update(key, value)\r\n  File \"/Users/erip/miniconda3/envs/hydra/lib/python3.6/site-packages/omegaconf/config.py\", line 299, in update\r\n    root[last] = value\r\n  File \"/Users/erip/miniconda3/envs/hydra/lib/python3.6/site-packages/omegaconf/dictconfig.py\", line 41, in __setitem__\r\n    \"Accessing unknown key in a struct : {}\".format(self.get_full_key(key))\r\nKeyError: 'Accessing unknown key in a struct : model.params.a'\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- **Hydra Version** :  `hydra-core==0.11.3`\r\n- **Python version** :  Python 3.6.10 :: Anaconda, Inc.\r\n- **Virtual environment type and version** : conda version : 4.8.2\r\n- **Operating system** : OS X\r\n\r\n## Additional context\r\n\r\nRemoving `model.params` yields a similar issue.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/454/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/454/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/428", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/428/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/428/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/428/events", "html_url": "https://github.com/facebookresearch/hydra/issues/428", "id": 568386835, "node_id": "MDU6SXNzdWU1NjgzODY4MzU=", "number": 428, "title": "_pickle.PicklingError: Can't pickle typing.Union[str, NoneType]: it's not the same object as typing.Union", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-02-20T15:37:11Z", "updated_at": "2022-04-29T11:13:59Z", "closed_at": "2020-05-13T08:17:45Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Opening a dedicated issue to discuss an error from CloudPickle on 3.6 (spinoff from #421).\r\nWill look into it in more details after #415 lands:\r\nThat PR is adding a method for users to define their configuration.\r\nAs a part of the PR, I am porting the joblib plugin configuration to the new method and this is where I saw the issue on 3.6.\r\nI am many users to follow this pattern in the next version of Hydra.\r\n\r\nIn fact I already ran into the same issue while working on OmegaConf with the unit tests for regular Pickle and I worked around it somehow.\r\nI am not sure this is a cloudpickle issue (unclear what is the relation between the standard pickle and cloudpickle).\r\n\r\nContext:\r\n\r\n> >     Unrelated to the joblib issue on 3.6, I ran into a new issue in a branch I will land now that will give me another reason to block 3.6 for this plugin.\r\n> >     This is probably a week or so from landing. If you start seeing errors about:\r\n> >     _pickle.PicklingError: Can't pickle typing.Union[str, NoneType]: it's not the same object as typing.Union\r\n> > \r\n> \r\n> This might be related to this bug that was just fixed in master by @pierreglaser: cloudpipe/cloudpickle#347\r\n> \r\n> This is about silently dropping type annotations on dynamic classes in Python 3.6. If you really need to pickle type annotations on dynamic functions or classes (without silent drop), then there is this PR but it's quite complex and I don't have time to review it at the moment.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/428/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/421", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/421/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/421/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/421/events", "html_url": "https://github.com/facebookresearch/hydra/issues/421", "id": 565828689, "node_id": "MDU6SXNzdWU1NjU4Mjg2ODk=", "number": 421, "title": "[Bug] sporadic segfaults from joblib tests in CircleCI", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2020-02-16T00:20:33Z", "updated_at": "2020-05-13T08:16:34Z", "closed_at": "2020-05-13T08:16:34Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Example:\r\n\r\nhttps://app.circleci.com/jobs/github/facebookresearch/hydra/8035\r\n\r\n@jan-matthis, can you take a look? this one is specifically on Linux.\r\n\r\n1. I think we need to report to joblib.\r\n2. I suspect threading (even before looking at the stacktrace). we might want to disable the threading test temporarily.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/421/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/421/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/420", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/420/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/420/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/420/events", "html_url": "https://github.com/facebookresearch/hydra/issues/420", "id": 565823470, "node_id": "MDU6SXNzdWU1NjU4MjM0NzA=", "number": 420, "title": "[Bug] Shell completion does not work as described.", "user": {"login": "yycho0108", "id": 14655667, "node_id": "MDQ6VXNlcjE0NjU1NjY3", "avatar_url": "https://avatars.githubusercontent.com/u/14655667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yycho0108", "html_url": "https://github.com/yycho0108", "followers_url": "https://api.github.com/users/yycho0108/followers", "following_url": "https://api.github.com/users/yycho0108/following{/other_user}", "gists_url": "https://api.github.com/users/yycho0108/gists{/gist_id}", "starred_url": "https://api.github.com/users/yycho0108/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yycho0108/subscriptions", "organizations_url": "https://api.github.com/users/yycho0108/orgs", "repos_url": "https://api.github.com/users/yycho0108/repos", "events_url": "https://api.github.com/users/yycho0108/events{/privacy}", "received_events_url": "https://api.github.com/users/yycho0108/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-02-15T23:23:53Z", "updated_at": "2020-02-16T02:53:30Z", "closed_at": "2020-02-16T02:48:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nShell completion install script does not work as described in the [documentation](https://hydra.cc/docs/tutorial/tab_completion/).\r\n\r\n## To reproduce\r\n\r\nIn this case I'm invoking a custom [app](https://github.com/yycho0108/DRLND_Core/blob/master/drlnd/app/main.py), but I'm (hopefully) not doing anything peculiar in terms of configuration. The repository can be found in the [link](https://github.com/yycho0108/DRLND_Core) for direct testing, if that would be useful.\r\nI'm adding the full instruction below just in case it will be useful to test it directly:\r\n\r\n(Specific for the app, but likely not really required for debugging the issue)\r\n```\r\n# Setup dependencies ...\r\n# python3 -m venv env # Uncomment if working with a virtualenv\r\n# source env/bin/activate\r\n# git clone https://github.com/yycho0108/DRLND_Core.git DRLND_Core\r\n# cd DRLND_Core\r\n# pip3 install -e git+https://github.com/openai/baselines.git\r\n# pip3 install -r requirements.txt\r\n```\r\n\r\nAnd the actually relevant portion here is:\r\n```\r\n$ python drlnd/app/main.py --hydra-help\r\n```\r\n\r\nWhich shows (only copying the relevant part here):\r\n```\r\n--shell_completion,-sc : Install or Uninstall shell completion:\r\n    Install:\r\n    eval \"$(python drlnd/app/main.py -sc install=SHELL_NAME)\"\r\n\r\n    Uninstall:\r\n    eval \"$(python drlnd/app/main.py -sc uninstall=SHELL_NAME)\"\r\n```\r\n\r\nThen running the command as described:\r\n```\r\n$ eval \"$(python drlnd/app/main.py -sc install=bash)\"\r\n```\r\n\r\nThen `hydra_bash_completion` evaluates to:\r\n```\r\n$ type hydra_bash_completion \r\nhydra_bash_completion is a function\r\nhydra_bash_completion()\r\n{\r\n    words=($COMP_LINE)\r\n    if [ \"${words[0]}\" == \"python\" ]; then\r\n        if (( ${#words[@]} < 2 )); then\r\n            return\r\n        fi\r\n        file_path=$(pwd)/${words[1]}\r\n        if [ ! -f \"$file_path\" ]; then\r\n            return\r\n        fi\r\n        grep \"@hydra.main\" $file_path -q\r\n        helper=\"${words[0]} ${words[1]}\"\r\n    else\r\n        helper=\"${words[0]}\"\r\n        true\r\n    fi\r\n\r\n    if ! [ -x \"$(command -v $helper)\" ]; then\r\n        false\r\n    fi\r\n\r\n    if [ $? == 0 ]; then\r\n        options=$( COMP_POINT=$COMP_POINT COMP_LINE=$COMP_LINE $helper -sc query=bash)\r\n        word=${words[$COMP_CWORD]}\r\n\r\n        if [ \"$HYDRA_COMP_DEBUG\" == \"1\" ]; then\r\n            printf \"\\n\"\r\n            printf \"COMP_LINE='$COMP_LINE'\\n\"\r\n            printf \"COMP_POINT='$COMP_POINT'\\n\"\r\n            printf \"Word='$word'\\n\"\r\n            printf \"Output suggestions:\\n\"\r\n            printf \"\\t%s\\n\" ${options[@]}\r\n        fi\r\n        COMPREPLY=($( compgen -o nospace -o default -W '$options' -- \"$word\" ));\r\n    fi\r\n}\r\n\r\nCOMP_WORDBREAKS=${COMP_WORDBREAKS//=}\r\nCOMP_WORDBREAKS=$COMP_WORDBREAKS complete -o nospace -o default -F hydra_bash_completion python\r\n```\r\nThe relevant file here is `hydra/_internal/core_plugins/bash_completion.py`.\r\n\r\nHere the `helper` string evaluates to the following:\r\n```\r\nhelper=\"python drlnd/app/main.py\"\r\n```\r\n\r\nSo the issue is [this line](https://github.com/facebookresearch/hydra/blob/master/hydra/_internal/core_plugins/bash_completion.py#L38) that causes an early exit:\r\n```\r\n    if ! [ -x \"$(command -v $helper)\" ]; then\r\n        false\r\n    fi\r\n```\r\n\r\n```\r\nhelper=\"python drlnd/app/main.py\"\r\nif ! [ -x \"$(command -v $helper)\" ]; then\r\n    false;\r\nfi\r\necho $?\r\n>> 1 # == false\r\n```\r\n\r\n## Expected Behavior\r\nIf I remove the `command -v` check, the script works as expected:\r\n```\r\n$ python drlnd/app/main.py #[TAB]\r\nagent=    agent.    env=      hydra/    hydra.    model=    network=  network.  test.     train.\r\n$ python drlnd/app/main.py train.#[TAB]\r\ntrain.directory=     train.load=          train.num_env=       \r\ntrain.enabled=       train.log_period=    train.num_episodes=  \r\n```\r\n\r\n## System information\r\n- Hydra Version\r\n```\r\npython3 -c 'import hydra; print(hydra.__version__)'\r\n0.11.3\r\n```\r\n- Python Version\r\n```\r\n$ python3 --version\r\nPython 3.6.9\r\n```\r\n- OS\r\n```\r\n$ lsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID:\tUbuntu\r\nDescription:\tUbuntu 18.04.4 LTS\r\nRelease:\t18.04\r\nCodename:\tbionic\r\n```\r\n- Shell\r\n```\r\n$ echo $SHELL\r\n/bin/bash\r\n```\r\n## Additional context\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/420/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/409", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/409/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/409/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/409/events", "html_url": "https://github.com/facebookresearch/hydra/issues/409", "id": 563199801, "node_id": "MDU6SXNzdWU1NjMxOTk4MDE=", "number": 409, "title": "[Bug] unable to use hydra with click module ", "user": {"login": "KosukeMizufune", "id": 26458792, "node_id": "MDQ6VXNlcjI2NDU4Nzky", "avatar_url": "https://avatars.githubusercontent.com/u/26458792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KosukeMizufune", "html_url": "https://github.com/KosukeMizufune", "followers_url": "https://api.github.com/users/KosukeMizufune/followers", "following_url": "https://api.github.com/users/KosukeMizufune/following{/other_user}", "gists_url": "https://api.github.com/users/KosukeMizufune/gists{/gist_id}", "starred_url": "https://api.github.com/users/KosukeMizufune/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KosukeMizufune/subscriptions", "organizations_url": "https://api.github.com/users/KosukeMizufune/orgs", "repos_url": "https://api.github.com/users/KosukeMizufune/repos", "events_url": "https://api.github.com/users/KosukeMizufune/events{/privacy}", "received_events_url": "https://api.github.com/users/KosukeMizufune/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471574, "node_id": "MDU6TGFiZWwxNDAzNDcxNTc0", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-02-11T13:16:28Z", "updated_at": "2022-07-25T21:00:45Z", "closed_at": "2020-02-11T16:40:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nI tried to use hydra with click module for creating CLI tools, but got an error.\r\n\r\n## To reproduce\r\n```\r\nimport click\r\nimport hydra\r\n\r\n\r\n@click.command()\r\n@click.option('--foo', default='foo')\r\ndef main(**kwargs):\r\n    my_app()\r\n    print('hoge')\r\n    print(kwargs)\r\n\r\n\r\n@hydra.main(config_path='config.yml')\r\ndef my_app(cfg):\r\n    print(cfg.pretty())\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nhydra.errors.MissingConfigException: Cannot find primary config file: config.yml\r\nSearch path:\r\n\tpkg://hydra.conf (from hydra)\r\n\tpkg://click (from main)\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- hydra-core==0.11.3\r\n- Click==7.0\r\n- python 3.6.10\r\n\r\n## Additional context\r\nThis error might be due to the arguement `3` of this line:\r\nhttps://github.com/facebookresearch/hydra/blob/2a9916133693247775472a4968904b7a05cca1c1/hydra/_internal/utils.py#L142\r\n\r\nIf I change this argument to `-1`, then it works well. \r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/409/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/407", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/407/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/407/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/407/events", "html_url": "https://github.com/facebookresearch/hydra/issues/407", "id": 563013448, "node_id": "MDU6SXNzdWU1NjMwMTM0NDg=", "number": 407, "title": "[Bug] return configuration variable from hydra.main function", "user": {"login": "noklam", "id": 18221871, "node_id": "MDQ6VXNlcjE4MjIxODcx", "avatar_url": "https://avatars.githubusercontent.com/u/18221871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noklam", "html_url": "https://github.com/noklam", "followers_url": "https://api.github.com/users/noklam/followers", "following_url": "https://api.github.com/users/noklam/following{/other_user}", "gists_url": "https://api.github.com/users/noklam/gists{/gist_id}", "starred_url": "https://api.github.com/users/noklam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noklam/subscriptions", "organizations_url": "https://api.github.com/users/noklam/orgs", "repos_url": "https://api.github.com/users/noklam/repos", "events_url": "https://api.github.com/users/noklam/events{/privacy}", "received_events_url": "https://api.github.com/users/noklam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1403471574, "node_id": "MDU6TGFiZWwxNDAzNDcxNTc0", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-02-11T07:05:23Z", "updated_at": "2020-12-13T02:07:22Z", "closed_at": "2020-02-11T07:25:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Hydra return config variable\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nI try to return the config from a function but get a None return instead. I am trying to keep the config as a global variable for other modules to import the config\r\n\r\n## To reproduce\r\n```\r\nimport hydra\r\nfrom omegaconf import DictConfig\r\n\r\nfrom runner import Runner\r\n\r\n\r\n@hydra.main(config_path=\"config_hydra/config.yaml\")\r\ndef my_app(cfg : DictConfig) -> DictConfig:\r\n    # print(cfg.pretty())\r\n    return cfg\r\n\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    cfg = my_app()\r\n    print(cfg)\r\n\r\n```\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\nNone\r\n// Paste the bad output here!\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- <!-- Hydra Version -->\r\n- <!-- Python version -->\r\n- <!-- Operating system -->\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/407/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/407/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/402", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/402/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/402/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/402/events", "html_url": "https://github.com/facebookresearch/hydra/issues/402", "id": 561656217, "node_id": "MDU6SXNzdWU1NjE2NTYyMTc=", "number": 402, "title": "[Bug]", "user": {"login": "noklam", "id": 18221871, "node_id": "MDQ6VXNlcjE4MjIxODcx", "avatar_url": "https://avatars.githubusercontent.com/u/18221871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noklam", "html_url": "https://github.com/noklam", "followers_url": "https://api.github.com/users/noklam/followers", "following_url": "https://api.github.com/users/noklam/following{/other_user}", "gists_url": "https://api.github.com/users/noklam/gists{/gist_id}", "starred_url": "https://api.github.com/users/noklam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noklam/subscriptions", "organizations_url": "https://api.github.com/users/noklam/orgs", "repos_url": "https://api.github.com/users/noklam/repos", "events_url": "https://api.github.com/users/noklam/events{/privacy}", "received_events_url": "https://api.github.com/users/noklam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-07T14:03:54Z", "updated_at": "2020-02-07T14:18:44Z", "closed_at": "2020-02-07T14:18:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nCannot use integer as dictionary key in the config file.\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\nfrom omegaconf import OmegaConf\r\nconf = OmegaConf.create( dict([(1, 2), (3, 4)]))\r\nprint(conf.pretty())\r\n\r\n** Stack trace/error message **\r\n```\r\n  File \"C:\\ProgramData\\Anaconda3\\lib\\site-packages\\omegaconf\\dictconfig.py\", line 35, in __setitem__\r\n    assert isinstance(key, str)\r\nAssertionError\r\n// Paste the bad output here!\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- <!-- Hydra Version -->\r\n- <!-- Python version -->\r\n- <!-- Operating system -->\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/402/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/402/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/400", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/400/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/400/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/400/events", "html_url": "https://github.com/facebookresearch/hydra/issues/400", "id": 561513598, "node_id": "MDU6SXNzdWU1NjE1MTM1OTg=", "number": 400, "title": "[Bug] issues with named arguments in hydra.utils.instantiate", "user": {"login": "stepelu", "id": 6617696, "node_id": "MDQ6VXNlcjY2MTc2OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/6617696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stepelu", "html_url": "https://github.com/stepelu", "followers_url": "https://api.github.com/users/stepelu/followers", "following_url": "https://api.github.com/users/stepelu/following{/other_user}", "gists_url": "https://api.github.com/users/stepelu/gists{/gist_id}", "starred_url": "https://api.github.com/users/stepelu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stepelu/subscriptions", "organizations_url": "https://api.github.com/users/stepelu/orgs", "repos_url": "https://api.github.com/users/stepelu/repos", "events_url": "https://api.github.com/users/stepelu/events{/privacy}", "received_events_url": "https://api.github.com/users/stepelu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4", "html_url": "https://github.com/facebookresearch/hydra/milestone/4", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/4/labels", "id": 4822770, "node_id": "MDk6TWlsZXN0b25lNDgyMjc3MA==", "number": 4, "title": "1.0.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 126, "state": "closed", "created_at": "2019-11-07T04:31:21Z", "updated_at": "2020-09-08T19:00:25Z", "due_on": null, "closed_at": "2020-09-08T19:00:25Z"}, "comments": 1, "created_at": "2020-02-07T09:17:47Z", "updated_at": "2020-02-27T05:49:13Z", "closed_at": "2020-02-27T05:49:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "`hydra.utils.instantiate` converts to OmegaConf named arguments, making it impossible to use the named arguments syntax for arguments which cannot be represented in OmegaConf.\r\n\r\n## To reproduce:\r\n\r\n`conf.yaml`:\r\n\r\n```yaml\r\nclass: torch.optim.Adam\r\nparams:\r\n  lr: 1E-4\r\n```\r\n\r\n`test.py`:\r\n\r\n```python\r\nimport hydra\r\nimport torch\r\nimport torchvision\r\n\r\n@hydra.main(config_path=\"conf.yaml\")\r\ndef my_app(cfg):\r\n    print(cfg.pretty())\r\n    model = torchvision.models.alexnet()\r\n    hydra.utils.instantiate(cfg, model.parameters())  # OK\r\n    hydra.utils.instantiate(cfg, params=model.parameters())  # FAILS\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nValueError: key params: generator is not a primitive type\r\n```\r\n\r\nAs a side note, the fact that `hydra.utils.instantiate` takes as input an argument named `config` makes it impossible to instantiate an object which expects the same argument using named arguments, which seems an unnecessary restriction.\r\n\r\n## The following solves both issues:\r\n\r\n```python\r\ndef instantiate_f(config):\r\n    assert config is not None, \"Input config is None\"\r\n    class_name = config[\"class\"]\r\n    clazz = get_class(class_name)\r\n    params = config.params if \"params\" in config else OmegaConf.create()\r\n    assert isinstance(\r\n        params, DictConfig\r\n    ), \"Input config params are expected to be a mapping, found {}\".format(\r\n        type(config.params)\r\n    )\r\n    params = OmegaConf.to_container(params, resolve=True)\r\n\r\n    def f(*args, **kwargs):\r\n        try:\r\n            kwargs = {**params, **kwargs}\r\n            return clazz(*args, **kwargs)\r\n        except Exception as e:\r\n            log.error(\"Error instantiating {} : {}\".format(class_name, e))\r\n            raise e\r\n\r\n    return f\r\n\r\n@hydra.main(config_path=\"conf.yaml\")\r\ndef my_app(cfg):\r\n    print(cfg.pretty())\r\n    model = torchvision.models.alexnet()\r\n    instantiate_f(cfg)(params=model.parameters())  # OK\r\n    instantiate_f(cfg)(model.parameters())  # OK\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```\r\n\r\nA note in the documentation should be added explaining the behavior wrt `config`, as it gets resolved immediately.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/400/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/351", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/351/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/351/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/351/events", "html_url": "https://github.com/facebookresearch/hydra/issues/351", "id": 546442029, "node_id": "MDU6SXNzdWU1NDY0NDIwMjk=", "number": 351, "title": "[Bug] system.exit(code) is not respected in Hydra", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-07T18:36:40Z", "updated_at": "2020-01-07T21:44:45Z", "closed_at": "2020-01-07T21:44:45Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/351/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/351/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/346", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/346/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/346/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/346/events", "html_url": "https://github.com/facebookresearch/hydra/issues/346", "id": 544496055, "node_id": "MDU6SXNzdWU1NDQ0OTYwNTU=", "number": 346, "title": "[Bug] Overriding default config respects default config order", "user": {"login": "Noezor", "id": 8218350, "node_id": "MDQ6VXNlcjgyMTgzNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/8218350?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Noezor", "html_url": "https://github.com/Noezor", "followers_url": "https://api.github.com/users/Noezor/followers", "following_url": "https://api.github.com/users/Noezor/following{/other_user}", "gists_url": "https://api.github.com/users/Noezor/gists{/gist_id}", "starred_url": "https://api.github.com/users/Noezor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Noezor/subscriptions", "organizations_url": "https://api.github.com/users/Noezor/orgs", "repos_url": "https://api.github.com/users/Noezor/repos", "events_url": "https://api.github.com/users/Noezor/events{/privacy}", "received_events_url": "https://api.github.com/users/Noezor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-02T09:03:37Z", "updated_at": "2020-01-07T06:38:19Z", "closed_at": "2020-01-07T06:38:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nHi, let me illustrate with an example.\r\n\r\ntrain.py\r\n```\r\n@hydra.main(config_path=\"../conf/config.yaml\")\r\ndef main(cfg):\r\n    print(cfg.pretty())\r\n```\r\n\r\n../conf/config.yaml\r\n```\r\ndefaults:\r\n    - dataset: seven_stairs\r\n    - model: default\r\n```\r\n\r\nOutputs default config as expected\r\n\r\n```\r\npython3 train.py\r\ndataset: Seven_Scenes_Stairs(Path(\"/home/pionn/research/bla/data/7scenes/stairs\"))\r\nmodel:\r\n  distance_scoring_layer: false\r\n  top_k_scores: 20\r\n```\r\n\r\nNow let's say I want to have a dataset which also needs to have a specific model. In ../conf/dataset/ I create synthetic.yaml\r\n```\r\ndataset: Synthetic_Dataset_Triangle()\r\nmodel:\r\n    distance_scoring_layer: True\r\n```\r\n\r\nAnd now specify this config when running train\r\n```\r\npython3 train.py dataset=synthetic\r\ndataset: **Synthetic_Dataset_Triangle()** as expected\r\nmodel:\r\n  distance_scoring_layer: **false** not as expected\r\n  top_k_scores: 20\r\n```\r\n\r\nOn the other hand, if I change ../conf/config.yaml to \r\n```\r\ndefaults:\r\n    - model: default\r\n    - dataset: seven_stairs\r\n```\r\n\r\nThen I obtain \r\n```\r\npython3 train.py dataset=synthetic\r\ndataset: **Synthetic_Dataset_Triangle()** as expected\r\nmodel:\r\n  distance_scoring_layer: **true**  as expected\r\n  top_k_scores: 20\r\n```\r\n\r\nIt seems that hydra runs each file in its default in an order, and after running each file tries to replace the default by what was given from the CLI. I expected it to run each config in the default in the specified order, and then overrule each of those by the configs given in the CLI.\r\n\r\nI'm not sure it is a feature or a bug. If it is a feature, maybe it should be explained in https://hydra.cc/docs/tutorial/composition ?\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n## System information\r\n- 0.11.3\r\n- 3.7.2\r\n- Ubuntu\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/346/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/346/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/334", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/334/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/334/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/334/events", "html_url": "https://github.com/facebookresearch/hydra/issues/334", "id": 543369530, "node_id": "MDU6SXNzdWU1NDMzNjk1MzA=", "number": 334, "title": "Pin 0.11 branch to OmegaConf 1.4", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-12-29T12:00:46Z", "updated_at": "2019-12-29T14:15:55Z", "closed_at": "2019-12-29T14:15:55Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "OmegaConf 2.0 will break compatibility (for example by dropping Python 2.7 support).\r\nPin Hydra 0.11 to OmegaConf 1.4", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/334/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/333", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/333/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/333/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/333/events", "html_url": "https://github.com/facebookresearch/hydra/issues/333", "id": 543339872, "node_id": "MDU6SXNzdWU1NDMzMzk4NzI=", "number": 333, "title": "[Bug] unable to pass additional parameter than cfg in main", "user": {"login": "arisliang", "id": 1115503, "node_id": "MDQ6VXNlcjExMTU1MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1115503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arisliang", "html_url": "https://github.com/arisliang", "followers_url": "https://api.github.com/users/arisliang/followers", "following_url": "https://api.github.com/users/arisliang/following{/other_user}", "gists_url": "https://api.github.com/users/arisliang/gists{/gist_id}", "starred_url": "https://api.github.com/users/arisliang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arisliang/subscriptions", "organizations_url": "https://api.github.com/users/arisliang/orgs", "repos_url": "https://api.github.com/users/arisliang/repos", "events_url": "https://api.github.com/users/arisliang/events{/privacy}", "received_events_url": "https://api.github.com/users/arisliang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-12-29T08:48:58Z", "updated_at": "2022-10-18T17:51:35Z", "closed_at": "2019-12-29T21:28:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nUnable to pass additional parameters than cfg in main function.\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```@hydra.main(config_path='config.yaml')\r\ndef main_with_param(cfg: omegaconf.DictConfig, count: int):\r\n    return count\r\n\r\n\r\nif __name__ == '__main__':\r\n    always_none = main_with_param(count=10)\r\n    print(always_none)\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n// Paste the bad output here!\r\nTypeError: decorated_main() got an unexpected keyword argument 'count'\r\n```\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nExpects additional parameter to be able to pass along with cfg.\r\n\r\n## System information\r\n- Hydra 0.11.2\r\n- Python 3.6.6\r\n- Ubuntu 18.04\r\n\r\n## Additional context\r\nAdd any other context about the problem here.\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/333/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/333/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/332", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/332/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/332/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/332/events", "html_url": "https://github.com/facebookresearch/hydra/issues/332", "id": 543330294, "node_id": "MDU6SXNzdWU1NDMzMzAyOTQ=", "number": 332, "title": "[Bug] Unable to return any value from main function", "user": {"login": "arisliang", "id": 1115503, "node_id": "MDQ6VXNlcjExMTU1MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1115503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arisliang", "html_url": "https://github.com/arisliang", "followers_url": "https://api.github.com/users/arisliang/followers", "following_url": "https://api.github.com/users/arisliang/following{/other_user}", "gists_url": "https://api.github.com/users/arisliang/gists{/gist_id}", "starred_url": "https://api.github.com/users/arisliang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arisliang/subscriptions", "organizations_url": "https://api.github.com/users/arisliang/orgs", "repos_url": "https://api.github.com/users/arisliang/repos", "events_url": "https://api.github.com/users/arisliang/events{/privacy}", "received_events_url": "https://api.github.com/users/arisliang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-12-29T07:14:28Z", "updated_at": "2022-08-18T12:57:42Z", "closed_at": "2019-12-29T21:27:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nOnce marked with @hydra.main, the function always returns None.\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n```\r\n@hydra.main(config_path='config.yaml')\r\ndef main(cfg):\r\n    return 1\r\n\r\nif __name__ == '__main__':\r\n    always_none = main()\r\n    print(always_none)   # always print None\r\n```\r\n\r\n\r\n\r\n## Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nExpects value to be returned like the usual functions do.\r\n\r\n## System information\r\n- Hydra 0.11.2\r\n\r\n- Python 3.6.6\r\n\r\n- Ubuntu 18.04\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/332/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/332/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/307", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/307/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/307/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/307/events", "html_url": "https://github.com/facebookresearch/hydra/issues/307", "id": 527464892, "node_id": "MDU6SXNzdWU1Mjc0NjQ4OTI=", "number": 307, "title": "[Bug] website does not update", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, {"login": "3janeAI", "id": 55730900, "node_id": "MDQ6VXNlcjU1NzMwOTAw", "avatar_url": "https://avatars.githubusercontent.com/u/55730900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/3janeAI", "html_url": "https://github.com/3janeAI", "followers_url": "https://api.github.com/users/3janeAI/followers", "following_url": "https://api.github.com/users/3janeAI/following{/other_user}", "gists_url": "https://api.github.com/users/3janeAI/gists{/gist_id}", "starred_url": "https://api.github.com/users/3janeAI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/3janeAI/subscriptions", "organizations_url": "https://api.github.com/users/3janeAI/orgs", "repos_url": "https://api.github.com/users/3janeAI/repos", "events_url": "https://api.github.com/users/3janeAI/events{/privacy}", "received_events_url": "https://api.github.com/users/3janeAI/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-22T23:38:14Z", "updated_at": "2019-11-24T08:26:59Z", "closed_at": "2019-11-24T08:26:59Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Example, a PR that changed only the website failed to detect and push it:\r\n\r\nhttps://app.circleci.com/jobs/github/facebookresearch/hydra/5679", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/307/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/307/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/304", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/304/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/304/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/304/events", "html_url": "https://github.com/facebookresearch/hydra/issues/304", "id": 527046687, "node_id": "MDU6SXNzdWU1MjcwNDY2ODc=", "number": 304, "title": "[Bug] --cfg not working", "user": {"login": "YannDubs", "id": 24327668, "node_id": "MDQ6VXNlcjI0MzI3NjY4", "avatar_url": "https://avatars.githubusercontent.com/u/24327668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YannDubs", "html_url": "https://github.com/YannDubs", "followers_url": "https://api.github.com/users/YannDubs/followers", "following_url": "https://api.github.com/users/YannDubs/following{/other_user}", "gists_url": "https://api.github.com/users/YannDubs/gists{/gist_id}", "starred_url": "https://api.github.com/users/YannDubs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YannDubs/subscriptions", "organizations_url": "https://api.github.com/users/YannDubs/orgs", "repos_url": "https://api.github.com/users/YannDubs/repos", "events_url": "https://api.github.com/users/YannDubs/events{/privacy}", "received_events_url": "https://api.github.com/users/YannDubs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-22T08:03:13Z", "updated_at": "2019-11-22T09:02:11Z", "closed_at": "2019-11-22T09:02:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nwhen running `python main.py --cfg hydra`\r\n\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 576, in <module>\r\n    main()\r\n  File \"/private/home/yannd/.conda/envs/assl/lib/python3.7/site-packages/hydra/main.py\", line 24, in decorated_main\r\n    strict=strict,\r\n  File \"/private/home/yannd/.conda/envs/assl/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 183, in run_hydra\r\n    hydra.show_cfg(overrides=args.overrides, cfg_type=args.cfg)\r\n  File \"/private/home/yannd/.conda/envs/assl/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 116, in show_cfg\r\n    cfg = self.compose_config(overrides, with_log_configuration=True)\r\nTypeError: compose_config() missing 1 required positional argument: 'overrides'\r\n```\r\n\r\n## System information\r\n- Hydra 0.11\r\n- Python : 3.7", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/304/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/304/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/303", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/303/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/303/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/303/events", "html_url": "https://github.com/facebookresearch/hydra/issues/303", "id": 526288057, "node_id": "MDU6SXNzdWU1MjYyODgwNTc=", "number": 303, "title": "test_sweep_1_job_strict_and_bad_key is failing on Submitit", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-11-21T00:11:33Z", "updated_at": "2019-11-21T00:30:34Z", "closed_at": "2019-11-21T00:30:34Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "The exception thrown by Submitit it is not the underlying exception.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/303/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/303/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/283", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/283/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/283/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/283/events", "html_url": "https://github.com/facebookresearch/hydra/issues/283", "id": 521282511, "node_id": "MDU6SXNzdWU1MjEyODI1MTE=", "number": 283, "title": "[Bug] example of override fail in multirun", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/3", "html_url": "https://github.com/facebookresearch/hydra/milestone/3", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/3/labels", "id": 4772111, "node_id": "MDk6TWlsZXN0b25lNDc3MjExMQ==", "number": 3, "title": "0.11.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2019-10-21T22:59:17Z", "updated_at": "2019-11-20T01:04:21Z", "due_on": null, "closed_at": "2019-11-20T01:04:21Z"}, "comments": 2, "created_at": "2019-11-12T01:56:10Z", "updated_at": "2019-11-15T09:45:17Z", "closed_at": "2019-11-15T09:45:17Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "This fails\r\n\r\n`python examples/tutorial/5_composition/my_app.py -m db=mysql,postgresql db.user=omry`", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/283/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/283/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/278", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/278/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/278/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/278/events", "html_url": "https://github.com/facebookresearch/hydra/issues/278", "id": 519258231, "node_id": "MDU6SXNzdWU1MTkyNTgyMzE=", "number": 278, "title": "[Bug] Documentation inconsistency for `utils.get_original_cwd`", "user": {"login": "dhpollack", "id": 368699, "node_id": "MDQ6VXNlcjM2ODY5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/368699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhpollack", "html_url": "https://github.com/dhpollack", "followers_url": "https://api.github.com/users/dhpollack/followers", "following_url": "https://api.github.com/users/dhpollack/following{/other_user}", "gists_url": "https://api.github.com/users/dhpollack/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhpollack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhpollack/subscriptions", "organizations_url": "https://api.github.com/users/dhpollack/orgs", "repos_url": "https://api.github.com/users/dhpollack/repos", "events_url": "https://api.github.com/users/dhpollack/events{/privacy}", "received_events_url": "https://api.github.com/users/dhpollack/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/3", "html_url": "https://github.com/facebookresearch/hydra/milestone/3", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/3/labels", "id": 4772111, "node_id": "MDk6TWlsZXN0b25lNDc3MjExMQ==", "number": 3, "title": "0.11.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2019-10-21T22:59:17Z", "updated_at": "2019-11-20T01:04:21Z", "due_on": null, "closed_at": "2019-11-20T01:04:21Z"}, "comments": 2, "created_at": "2019-11-07T13:12:56Z", "updated_at": "2019-11-08T00:47:06Z", "closed_at": "2019-11-08T00:47:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nThe tutorial for working directories has a few commands for setting the working directory [see here](https://cli.dev/docs/tutorial/working_directory), but the version of hydra on pip does not have these functions.  Additionally, the install instructions do not include instructions on how to install from source (even if that's fairly trivial).  The simple solution is to update the wheels on pip.  Another alternative would be to put on the installation page that hydra is rapidly developing and suggest that one can install from source directly.\r\n\r\n## System information\r\n- 0.10.0 from pip\r\n- python 3.7\r\n- arch linux\r\n\r\n## One more thing...\r\nThis is very minor but the pip version is `0.10.0` and the github master version is also `0.10.0`, but they not the same as evidenced by this issue.  You should probably bump the version of git master.  Keep up the good work, I think this is a great idea.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/278/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/278/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/271", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/271/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/271/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/271/events", "html_url": "https://github.com/facebookresearch/hydra/issues/271", "id": 517565113, "node_id": "MDU6SXNzdWU1MTc1NjUxMTM=", "number": 271, "title": "[Bug] handle yaml file with dot in the name", "user": {"login": "yjxiao", "id": 8785914, "node_id": "MDQ6VXNlcjg3ODU5MTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8785914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yjxiao", "html_url": "https://github.com/yjxiao", "followers_url": "https://api.github.com/users/yjxiao/followers", "following_url": "https://api.github.com/users/yjxiao/following{/other_user}", "gists_url": "https://api.github.com/users/yjxiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/yjxiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yjxiao/subscriptions", "organizations_url": "https://api.github.com/users/yjxiao/orgs", "repos_url": "https://api.github.com/users/yjxiao/repos", "events_url": "https://api.github.com/users/yjxiao/events{/privacy}", "received_events_url": "https://api.github.com/users/yjxiao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/3", "html_url": "https://github.com/facebookresearch/hydra/milestone/3", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/3/labels", "id": 4772111, "node_id": "MDk6TWlsZXN0b25lNDc3MjExMQ==", "number": 3, "title": "0.11.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2019-10-21T22:59:17Z", "updated_at": "2019-11-20T01:04:21Z", "due_on": null, "closed_at": "2019-11-20T01:04:21Z"}, "comments": 3, "created_at": "2019-11-05T06:05:01Z", "updated_at": "2019-11-06T05:57:09Z", "closed_at": "2019-11-06T05:57:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\nWhen creating yaml file that has dot in the base name, `config_loader.py` erroneously misses the `.yaml` extension which results in a `hydra.errors.MissingConfigException`.\r\n\r\n## To reproduce\r\nconfiguration groups:\r\n```\r\n\u251c\u2500\u2500 conf\r\n\u2502   \u2514\u2500\u2500 lr\r\n\u2502       \u251c\u2500\u2500 0.1.yaml\r\n\u2502       \u2514\u2500\u2500 0.01.yaml\r\n\u2514\u2500\u2500 my_app.py\r\n```\r\nwith minimum `my_app.py` setup same as in the tutorial\r\n```\r\npython my_app.py lr=0.1\r\n```\r\nTraceback:\r\n```\r\nTraceback (most recent call last):\r\n  File \"app.py\", line 9, in <module>\r\n    app()\r\n  File \"/home/yjxiao/miniconda3/lib/python3.7/site-packages/hydra/main.py\", line 24, in decorated_main\r\n    strict=strict,\r\n  File \"/home/yjxiao/miniconda3/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 56, in run_hydra\r\n    hydra.run(overrides=args.overrides)\r\n  File \"/home/yjxiao/miniconda3/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 103, in run\r\n    cfg = self._load_config(overrides)\r\n  File \"/home/yjxiao/miniconda3/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 345, in _load_config\r\n    cfg = self.config_loader.load_configuration(overrides)\r\n  File \"/home/yjxiao/miniconda3/lib/python3.7/site-packages/hydra/_internal/config_loader.py\", line 56, in load_configuration\r\n    cfg = self._merge_defaults(hydra_cfg, defaults, split_at)\r\n  File \"/home/yjxiao/miniconda3/lib/python3.7/site-packages/hydra/_internal/config_loader.py\", line 395, in _merge_defaults\r\n    cfg = merge_defaults(cfg, user_list)\r\n  File \"/home/yjxiao/miniconda3/lib/python3.7/site-packages/hydra/_internal/config_loader.py\", line 374, in merge_defaults\r\n    required=not is_optional,\r\n  File \"/home/yjxiao/miniconda3/lib/python3.7/site-packages/hydra/_internal/config_loader.py\", line 301, in _merge_config\r\n    raise MissingConfigException(msg, new_cfg, options)\r\nhydra.errors.MissingConfigException: Could not load lr/0.1, available options:\r\nlr:\r\n\t0.01\r\n\t0.1\r\n```\r\n## Questions\r\n- Currently, I have to edit `config_loader.py` file to add the `.yaml` extension whenever it is missing. Would this cause any unwanted behavior with other features? \r\n- Is it generally not advisable to name config files with, say, float values? Are there better ways to incorporate float values in the config?", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/271/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/267", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/267/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/267/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/267/events", "html_url": "https://github.com/facebookresearch/hydra/issues/267", "id": 516880545, "node_id": "MDU6SXNzdWU1MTY4ODA1NDU=", "number": 267, "title": "[Bug] value interpolation does not work in list", "user": {"login": "YannDubs", "id": 24327668, "node_id": "MDQ6VXNlcjI0MzI3NjY4", "avatar_url": "https://avatars.githubusercontent.com/u/24327668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YannDubs", "html_url": "https://github.com/YannDubs", "followers_url": "https://api.github.com/users/YannDubs/followers", "following_url": "https://api.github.com/users/YannDubs/following{/other_user}", "gists_url": "https://api.github.com/users/YannDubs/gists{/gist_id}", "starred_url": "https://api.github.com/users/YannDubs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YannDubs/subscriptions", "organizations_url": "https://api.github.com/users/YannDubs/orgs", "repos_url": "https://api.github.com/users/YannDubs/repos", "events_url": "https://api.github.com/users/YannDubs/events{/privacy}", "received_events_url": "https://api.github.com/users/YannDubs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-11-03T20:00:57Z", "updated_at": "2019-11-04T00:12:04Z", "closed_at": "2019-11-04T00:12:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Value interpolation does not seem to work in list e.g.:\r\n\r\n```\r\nchckpnt_dirnames: \r\n  - ${base_dir}/${model.name}/\r\n  - .\r\n```\r\n\r\nDoesn't replace `model.name` and `base_dir`", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/267/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/266", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/266/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/266/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/266/events", "html_url": "https://github.com/facebookresearch/hydra/issues/266", "id": 514654150, "node_id": "MDU6SXNzdWU1MTQ2NTQxNTA=", "number": 266, "title": "[Bug] cant pass arg value that contains the char '=' ", "user": {"login": "giladw", "id": 3014897, "node_id": "MDQ6VXNlcjMwMTQ4OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/3014897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/giladw", "html_url": "https://github.com/giladw", "followers_url": "https://api.github.com/users/giladw/followers", "following_url": "https://api.github.com/users/giladw/following{/other_user}", "gists_url": "https://api.github.com/users/giladw/gists{/gist_id}", "starred_url": "https://api.github.com/users/giladw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/giladw/subscriptions", "organizations_url": "https://api.github.com/users/giladw/orgs", "repos_url": "https://api.github.com/users/giladw/repos", "events_url": "https://api.github.com/users/giladw/events{/privacy}", "received_events_url": "https://api.github.com/users/giladw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/3", "html_url": "https://github.com/facebookresearch/hydra/milestone/3", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/3/labels", "id": 4772111, "node_id": "MDk6TWlsZXN0b25lNDc3MjExMQ==", "number": 3, "title": "0.11.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2019-10-21T22:59:17Z", "updated_at": "2019-11-20T01:04:21Z", "due_on": null, "closed_at": "2019-11-20T01:04:21Z"}, "comments": 1, "created_at": "2019-10-30T13:05:58Z", "updated_at": "2019-11-06T03:48:15Z", "closed_at": "2019-11-06T03:48:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nwhen passing argument value that contains the char '=' an error is thrown:\r\nValueError: too many values to unpack (expected 2)\r\n\r\n## To reproduce\r\n\r\npython example.py input_path=s3://rawData/year=2019/month=10/day=29/data_raw_joined.parquet \r\n\r\n\r\n** Stack trace/error message **\r\n```\r\n  File \"/anaconda3/lib/python3.6/site-packages/hydra/_internal/config_loader.py\", line 136, in _apply_defaults_overrides\r\n    key, value = override.split(\"=\")```\r\n**Optional video**\r\nIf applicable, record a short [video](https://asciinema.org) with to help explain your problem.\r\nYou can also \r\n\r\n## Expected Behavior\r\nI expect way to pass an argument that contains '=' in some other way\r\n\r\n## System information\r\n- 0.10.0\r\n- macOS\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/266/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/266/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/264", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/264/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/264/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/264/events", "html_url": "https://github.com/facebookresearch/hydra/issues/264", "id": 513178980, "node_id": "MDU6SXNzdWU1MTMxNzg5ODA=", "number": 264, "title": "[Bug] Customizing logging: creates empty folder if log to filesystem is disabled", "user": {"login": "svenw3", "id": 50365433, "node_id": "MDQ6VXNlcjUwMzY1NDMz", "avatar_url": "https://avatars.githubusercontent.com/u/50365433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svenw3", "html_url": "https://github.com/svenw3", "followers_url": "https://api.github.com/users/svenw3/followers", "following_url": "https://api.github.com/users/svenw3/following{/other_user}", "gists_url": "https://api.github.com/users/svenw3/gists{/gist_id}", "starred_url": "https://api.github.com/users/svenw3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svenw3/subscriptions", "organizations_url": "https://api.github.com/users/svenw3/orgs", "repos_url": "https://api.github.com/users/svenw3/repos", "events_url": "https://api.github.com/users/svenw3/events{/privacy}", "received_events_url": "https://api.github.com/users/svenw3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-28T09:07:30Z", "updated_at": "2019-10-28T12:13:42Z", "closed_at": "2019-10-28T12:11:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nI try to deactive the logging on file system as described by: https://cli.dev/docs/configure_hydra/logging \r\n\r\nThis provides error [1] (see stack trace). \r\n\r\nAfter changing it into  https://github.com/facebookresearch/hydra/tree/master/examples/configure_hydra/logging, an empty folder is created for each run (outputs/{date}/{time}). \r\n\r\n## To reproduce\r\n\r\nconf/hydra/job_logging/custom.yaml:\r\n```\r\nhydra:\r\n  # python logging configuration for tasks\r\n  job_logging:\r\n    version: 1\r\n    formatters:\r\n      simple:\r\n        format: '[%(levelname)s] - %(message)s'\r\n    handlers:\r\n      console:\r\n        class: logging.StreamHandler\r\n        formatter: simple\r\n        stream: ext://sys.stdout\r\n    root:\r\n      handlers: [console]\r\n\r\n    disable_existing_loggers: False\r\n\r\n```\r\n** Stack trace/error message **\r\nError 1: Sample code from https://cli.dev/docs/configure_hydra/logging\r\n```\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 16, in <module>\r\n    sys.exit(experiment())\r\n  File \"*.pyenv/versions/3.7.4/lib/python3.7/site-packages/hydra/main.py\", line 24, in decorated_main\r\n    strict=strict,\r\n  File \"*.pyenv/versions/3.7.4/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 56, in run_hydra\r\n    hydra.run(overrides=args.overrides)\r\n  File \"*.pyenv/versions/3.7.4/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 114, in run\r\n    job_subdir_key=None,\r\n  File \"*.pyenv/versions/3.7.4/lib/python3.7/site-packages/hydra/plugins/common/utils.py\", line 85, in run_job\r\n    configure_log(config.hydra.job_logging, config.hydra.verbose)\r\n  File \"*.pyenv/versions/3.7.4/lib/python3.7/site-packages/hydra/plugins/common/utils.py\", line 22, in configure_log\r\n    logging.config.dictConfig(conf)\r\n  File \"*.pyenv/versions/3.7.4/lib/python3.7/logging/config.py\", line 799, in dictConfig\r\n    dictConfigClass(config).configure()\r\n  File \"*.pyenv/versions/3.7.4/lib/python3.7/logging/config.py\", line 495, in configure\r\n    raise ValueError(\"dictionary doesn't specify a version\")\r\nValueError: dictionary doesn't specify a version\r\n```\r\n\r\n## Expected Behavior\r\nI would expect that \"Outputs only to stdout (no log file)\" does not create any folders. \r\n\r\n## System information\r\n- hydra-core: 0.10.0\r\n- python: 3.7.4\r\n- MacOS\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/264/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/264/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/261", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/261/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/261/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/261/events", "html_url": "https://github.com/facebookresearch/hydra/issues/261", "id": 512769950, "node_id": "MDU6SXNzdWU1MTI3Njk5NTA=", "number": 261, "title": "[Bug] merging if individual files (not in group) happens in wrong order", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/3", "html_url": "https://github.com/facebookresearch/hydra/milestone/3", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/3/labels", "id": 4772111, "node_id": "MDk6TWlsZXN0b25lNDc3MjExMQ==", "number": 3, "title": "0.11.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2019-10-21T22:59:17Z", "updated_at": "2019-11-20T01:04:21Z", "due_on": null, "closed_at": "2019-11-20T01:04:21Z"}, "comments": 0, "created_at": "2019-10-26T00:48:54Z", "updated_at": "2019-11-05T04:46:35Z", "closed_at": "2019-11-05T04:46:35Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "something like:\r\n```\r\ndefaults:\r\n   - group: opt1\r\n   - file\r\n```\r\n\r\ncaused the file to be merged in before the group.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/261/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/261/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/243", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/243/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/243/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/243/events", "html_url": "https://github.com/facebookresearch/hydra/issues/243", "id": 508894549, "node_id": "MDU6SXNzdWU1MDg4OTQ1NDk=", "number": 243, "title": "[Bug] ModuleNotFoundError: no module named 'logging.config'", "user": {"login": "bhaprayan", "id": 8630642, "node_id": "MDQ6VXNlcjg2MzA2NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/8630642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bhaprayan", "html_url": "https://github.com/bhaprayan", "followers_url": "https://api.github.com/users/bhaprayan/followers", "following_url": "https://api.github.com/users/bhaprayan/following{/other_user}", "gists_url": "https://api.github.com/users/bhaprayan/gists{/gist_id}", "starred_url": "https://api.github.com/users/bhaprayan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bhaprayan/subscriptions", "organizations_url": "https://api.github.com/users/bhaprayan/orgs", "repos_url": "https://api.github.com/users/bhaprayan/repos", "events_url": "https://api.github.com/users/bhaprayan/events{/privacy}", "received_events_url": "https://api.github.com/users/bhaprayan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}, {"id": 1620049642, "node_id": "MDU6TGFiZWwxNjIwMDQ5NjQy", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/awaiting_response", "name": "awaiting_response", "color": "edac74", "default": false, "description": "Awaiting response"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-10-18T07:05:06Z", "updated_at": "2019-10-21T20:48:36Z", "closed_at": "2019-10-21T20:48:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\n## To reproduce\r\nfollowing tutorial: https://cli.dev/docs/tutorial/logging\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n```\r\n#!/usr/bin/env python\r\n# -*- coding: utf-8 -*-\r\n\r\nimport logging\r\nimport hydra\r\n\r\nlog = logging.getLogger(__name__)\r\n\r\n\r\n@hydra.main()\r\ndef my_app(_cfg):\r\n    log.info('info level message')\r\n    log.debug('debug level message')\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\nTraceback (most recent call last):\r\n  File \"logging.py\", line 4, in <module>\r\n    import logging\r\n  File \"$HOME/workspace/hydra_test/logging.py\", line 5, in <module>\r\n    import hydra\r\n  File \"$HOME/miniconda3/lib/python3.7/site-packages/hydra/__init__.py\", line 2, in <module>\r\n    from . import utils\r\n  File \"$HOME/miniconda3/lib/python3.7/site-packages/hydra/utils.py\", line 2, in <module>\r\n    import logging.config\r\nModuleNotFoundError: No module named 'logging.config'; 'logging' is not a package\r\n\r\n```\r\n\r\n## Expected Behavior\r\nexecutes successfully (without package import error)\r\n\r\n## System information\r\n- <!-- Hydra Version -->\r\n0.90\r\n- <!-- Operating system -->\r\nLinux 4.19.0-6-amd64 #1 SMP Debian 4.19.67-2+deb10u1 (2019-09-20) x86_64 GNU/Linux", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/243/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/243/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/217", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/217/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/217/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/217/events", "html_url": "https://github.com/facebookresearch/hydra/issues/217", "id": 505042585, "node_id": "MDU6SXNzdWU1MDUwNDI1ODU=", "number": 217, "title": "[Bug] enabling tab completion fails in strict mode", "user": {"login": "tamuhey", "id": 24998666, "node_id": "MDQ6VXNlcjI0OTk4NjY2", "avatar_url": "https://avatars.githubusercontent.com/u/24998666?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamuhey", "html_url": "https://github.com/tamuhey", "followers_url": "https://api.github.com/users/tamuhey/followers", "following_url": "https://api.github.com/users/tamuhey/following{/other_user}", "gists_url": "https://api.github.com/users/tamuhey/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamuhey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamuhey/subscriptions", "organizations_url": "https://api.github.com/users/tamuhey/orgs", "repos_url": "https://api.github.com/users/tamuhey/repos", "events_url": "https://api.github.com/users/tamuhey/events{/privacy}", "received_events_url": "https://api.github.com/users/tamuhey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-10T05:25:51Z", "updated_at": "2019-10-10T08:15:54Z", "closed_at": "2019-10-10T07:46:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nhydra version: 0.9.0\r\n\r\n```bash\r\n$ eval \"$(python my_app.py -sc install=bash)\"\r\n```\r\n\r\nfails. Stderr:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"my_app.py\", line 8, in <module>\r\n    my_app()\r\n  File \"/Users/my_name/.local/share/virtualenvs/ner4-htIaskrI/lib/python3.7/site-packages/hydra/main.py\", line 25, in decorated_main\r\n    strict,\r\n  File \"/Users/my_name/.local/share/virtualenvs/ner4-htIaskrI/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 54, in run_hydra\r\n    hydra.shell_completion(overrides=args.overrides)\r\n  File \"/Users/my_name/.local/share/virtualenvs/ner4-htIaskrI/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 156, in shell_completion\r\n    cfg = self._load_config(overrides)\r\n  File \"/Users/my_name/.local/share/virtualenvs/ner4-htIaskrI/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 271, in _load_config\r\n    cfg = self.config_loader.load_configuration(overrides)\r\n  File \"/Users/my_name/.local/share/virtualenvs/ner4-htIaskrI/lib/python3.7/site-packages/hydra/_internal/config_loader.py\", line 66, in load_configuration\r\n    cfg.merge_with_dotlist(remaining_overrides)\r\n  File \"/Users/my_name/.local/share/virtualenvs/ner4-htIaskrI/lib/python3.7/site-packages/omegaconf/config.py\", line 240, in merge_with_dotlist\r\n    self.update(key, value)\r\n  File \"/Users/my_name/.local/share/virtualenvs/ner4-htIaskrI/lib/python3.7/site-packages/omegaconf/config.py\", line 260, in update\r\n    root[last] = value\r\n  File \"/Users/my_name/.local/share/virtualenvs/ner4-htIaskrI/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 28, in __setitem__\r\n    raise KeyError(\"Accessing unknown key in a struct : {}\".format(self.get_full_key(key)))\r\nKeyError: 'Accessing unknown key in a struct : install'\r\n```\r\n\r\nThe content of `my_app.py` is below.\r\n\r\n```python\r\nimport hydra\r\n  \r\n@hydra.main(config_path='config.yaml')\r\ndef my_app(cfg):\r\n    print(cfg.pretty())\r\n\r\nif __name__ == \"__main__\":\r\n    my_app()\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/217/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/217/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/213", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/213/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/213/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/213/events", "html_url": "https://github.com/facebookresearch/hydra/issues/213", "id": 504390655, "node_id": "MDU6SXNzdWU1MDQzOTA2NTU=", "number": 213, "title": "[Bug] Tab completion fails if app name is similar to foo.par", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-09T03:32:12Z", "updated_at": "2019-10-09T22:54:45Z", "closed_at": "2019-10-09T22:54:45Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/213/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/213/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/209", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/209/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/209/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/209/events", "html_url": "https://github.com/facebookresearch/hydra/issues/209", "id": 503139040, "node_id": "MDU6SXNzdWU1MDMxMzkwNDA=", "number": 209, "title": "Update examples to mirror website structure", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/2", "html_url": "https://github.com/facebookresearch/hydra/milestone/2", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/2/labels", "id": 4723362, "node_id": "MDk6TWlsZXN0b25lNDcyMzM2Mg==", "number": 2, "title": "0.10.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-10-05T05:05:04Z", "updated_at": "2019-10-21T01:41:47Z", "due_on": null, "closed_at": "2019-10-21T01:41:47Z"}, "comments": 0, "created_at": "2019-10-06T18:17:52Z", "updated_at": "2019-10-06T19:55:49Z", "closed_at": "2019-10-06T19:55:49Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "tutorials directory in the repo represent a mixture of multiple parts of the website and it's confusing.\r\nUpdate it to mirror the structure of the website docs.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/209/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/206", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/206/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/206/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/206/events", "html_url": "https://github.com/facebookresearch/hydra/issues/206", "id": 502873300, "node_id": "MDU6SXNzdWU1MDI4NzMzMDA=", "number": 206, "title": "[Bug] Sweeping when some defaults refer others through interpolation fails", "user": {"login": "natolambert", "id": 10695622, "node_id": "MDQ6VXNlcjEwNjk1NjIy", "avatar_url": "https://avatars.githubusercontent.com/u/10695622?v=4", "gravatar_id": "", "url": "https://api.github.com/users/natolambert", "html_url": "https://github.com/natolambert", "followers_url": "https://api.github.com/users/natolambert/followers", "following_url": "https://api.github.com/users/natolambert/following{/other_user}", "gists_url": "https://api.github.com/users/natolambert/gists{/gist_id}", "starred_url": "https://api.github.com/users/natolambert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/natolambert/subscriptions", "organizations_url": "https://api.github.com/users/natolambert/orgs", "repos_url": "https://api.github.com/users/natolambert/repos", "events_url": "https://api.github.com/users/natolambert/events{/privacy}", "received_events_url": "https://api.github.com/users/natolambert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/2", "html_url": "https://github.com/facebookresearch/hydra/milestone/2", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/2/labels", "id": 4723362, "node_id": "MDk6TWlsZXN0b25lNDcyMzM2Mg==", "number": 2, "title": "0.10.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-10-05T05:05:04Z", "updated_at": "2019-10-21T01:41:47Z", "due_on": null, "closed_at": "2019-10-21T01:41:47Z"}, "comments": 1, "created_at": "2019-10-04T22:44:15Z", "updated_at": "2019-10-06T00:04:53Z", "closed_at": "2019-10-05T23:46:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nWhen sweeping over configs, and using those config values to load different config files based on the value of the swept parameters, the defaults are not loaded correctly. \r\n\r\n## To reproduce\r\nTo mirror my codebase, I made this structure:\r\n```\r\n.\r\n\u251c\u2500\u2500 a.py\r\n\u251c\u2500\u2500 conf\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 config.yaml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dynamics_model\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 de.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 d.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 env.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 pe.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 p.yaml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 env\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 cartpole.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 halfcheetah.yaml\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 env_details\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 cartpole\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 dynamics_model\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 de.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 d.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 pe.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 p.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 optimizer\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 cem.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 random.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 halfcheetah\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 dynamics_model\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 de.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 d.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 pe.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 p.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 optimizer\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 cem.yaml\r\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2514\u2500\u2500 random.yaml\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 optimizer\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 cem.yaml\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 random.yaml\r\n\r\n```\r\nFiles found here: https://drive.google.com/file/d/1Nl2umsvEwOKjkVlYe1QBapWKpZMMl9Ly/view?usp=sharing\r\n\r\nAnd base config:\r\n```\r\ndefaults:\r\n  - env: ???\r\n  - dynamics_model: pe\r\n  - env_details: ${defaults.0.env}/dynamics_model/${defaults.1.dynamics_model}\r\n  - optimizer: cem\r\n  - env_details: ${defaults.0.env}/optimizer/${defaults.3.optimizer}\r\n```\r\n\r\nRunning the code (on the newest version) produces an error:\r\n```\r\npython a.py -m env=cartpole optimizer=random,cem\r\n```\r\nAnd this code runs:\r\n```\r\npython a.py -m env=cartpole optimizer=random\r\n```\r\n\r\n** Stack trace/error message **\r\n```\r\n  File \"a.py\", line 7, in <module>\r\n    fo()\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/hydra/main.py\", line 25, in decorated_main\r\n    strict,\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/hydra/_internal/utils.py\", line 50, in run_hydra\r\n    hydra.multirun(overrides=args.overrides)\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/hydra/_internal/hydra.py\", line 115, in multirun\r\n    cfg = self._load_config(overrides)\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/hydra/_internal/hydra.py\", line 271, in _load_config\r\n    cfg = self.config_loader.load_configuration(overrides)\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/hydra/_internal/config_loader.py\", line 56, in load_configuration\r\n    cfg = self._merge_defaults(hydra_cfg, defaults, split_at)\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/hydra/_internal/config_loader.py\", line 394, in _merge_defaults\r\n    cfg = merge_defaults(cfg, user_list)\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/hydra/_internal/config_loader.py\", line 367, in merge_defaults\r\n    name = default1[family]\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/omegaconf/dictconfig.py\", line 75, in __getitem__\r\n    return self.__getattr__(key)\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/omegaconf/dictconfig.py\", line 67, in __getattr__\r\n    return self.get(key=key, default_value=None)\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/omegaconf/dictconfig.py\", line 78, in get\r\n    return self._resolve_with_default(key=key, value=self.get_node(key, default_value), default_value=default_value)\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/omegaconf/config.py\", line 132, in _resolve_with_default\r\n    return self._resolve_single(value) if isinstance(value, str) else value\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/omegaconf/config.py\", line 433, in _resolve_single\r\n    new_val = Config._resolve_value(root, match.group(1), match.group(2))\r\n  File \"/private/home/nol/.conda/envs/pets/lib/python3.6/site-packages/omegaconf/config.py\", line 408, in _resolve_value\r\n    raise KeyError(\"{} interpolation key '{}' not found\".format(inter_type, inter_key))\r\nKeyError: \"str interpolation key 'defaults.3.optimizer' not found\"\r\n\r\n```\r\n## Expected Behavior\r\nStarting multiple jobs swept over the parameters, with new configs loaded from the directories\r\n\r\n## System information\r\n- <0.9.0>\r\n- <macOS 10.14.6, linux as well>\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/206/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/206/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/203", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/203/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/203/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/203/events", "html_url": "https://github.com/facebookresearch/hydra/issues/203", "id": 501831739, "node_id": "MDU6SXNzdWU1MDE4MzE3Mzk=", "number": 203, "title": "[Bug] Tab completion error : python foo.py<space><space><tab>", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-03T03:33:49Z", "updated_at": "2019-10-04T06:38:01Z", "closed_at": "2019-10-04T06:38:01Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/203/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/203/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/189", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/189/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/189/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/189/events", "html_url": "https://github.com/facebookresearch/hydra/issues/189", "id": 501168838, "node_id": "MDU6SXNzdWU1MDExNjg4Mzg=", "number": 189, "title": "[Bug] error installing bash completion if config cannot be created due to missing overrides", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, {"login": "3janeAI", "id": 55730900, "node_id": "MDQ6VXNlcjU1NzMwOTAw", "avatar_url": "https://avatars.githubusercontent.com/u/55730900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/3janeAI", "html_url": "https://github.com/3janeAI", "followers_url": "https://api.github.com/users/3janeAI/followers", "following_url": "https://api.github.com/users/3janeAI/following{/other_user}", "gists_url": "https://api.github.com/users/3janeAI/gists{/gist_id}", "starred_url": "https://api.github.com/users/3janeAI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/3janeAI/subscriptions", "organizations_url": "https://api.github.com/users/3janeAI/orgs", "repos_url": "https://api.github.com/users/3janeAI/repos", "events_url": "https://api.github.com/users/3janeAI/events{/privacy}", "received_events_url": "https://api.github.com/users/3janeAI/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/2", "html_url": "https://github.com/facebookresearch/hydra/milestone/2", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/2/labels", "id": 4723362, "node_id": "MDk6TWlsZXN0b25lNDcyMzM2Mg==", "number": 2, "title": "0.10.0", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 7, "state": "closed", "created_at": "2019-10-05T05:05:04Z", "updated_at": "2019-10-21T01:41:47Z", "due_on": null, "closed_at": "2019-10-21T01:41:47Z"}, "comments": 1, "created_at": "2019-10-01T22:00:56Z", "updated_at": "2019-10-05T14:59:06Z", "closed_at": "2019-10-05T14:59:06Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": " eval \"$(python tutorial/050_composition/my_app.py -sc hydra.shell.install=bash)\"", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/189/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/187", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/187/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/187/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/187/events", "html_url": "https://github.com/facebookresearch/hydra/issues/187", "id": 501151893, "node_id": "MDU6SXNzdWU1MDExNTE4OTM=", "number": 187, "title": "Sweeping over an unspecified mandatory config group fails", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-10-01T21:19:28Z", "updated_at": "2019-10-02T03:31:57Z", "closed_at": "2019-10-02T03:31:57Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "```\r\n$ python tutorial/50_composition/my_app.py schema=warehouse,support,school -m\r\nTraceback (most recent call last):\r\n..\r\nomegaconf.errors.MissingMandatoryValue: defaults[2].schema\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/187/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/181", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/181/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/181/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/181/events", "html_url": "https://github.com/facebookresearch/hydra/issues/181", "id": 500569236, "node_id": "MDU6SXNzdWU1MDA1NjkyMzY=", "number": 181, "title": "[Bug] Cannot perform a multirun when the strict option is enforced and the default yaml does not contain the config over which multirun performs a sweep", "user": {"login": "neha191091", "id": 12333401, "node_id": "MDQ6VXNlcjEyMzMzNDAx", "avatar_url": "https://avatars.githubusercontent.com/u/12333401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neha191091", "html_url": "https://github.com/neha191091", "followers_url": "https://api.github.com/users/neha191091/followers", "following_url": "https://api.github.com/users/neha191091/following{/other_user}", "gists_url": "https://api.github.com/users/neha191091/gists{/gist_id}", "starred_url": "https://api.github.com/users/neha191091/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neha191091/subscriptions", "organizations_url": "https://api.github.com/users/neha191091/orgs", "repos_url": "https://api.github.com/users/neha191091/repos", "events_url": "https://api.github.com/users/neha191091/events{/privacy}", "received_events_url": "https://api.github.com/users/neha191091/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-30T23:01:18Z", "updated_at": "2019-10-01T02:49:37Z", "closed_at": "2019-10-01T02:49:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "# \ud83d\udc1b Bug\r\n\r\nCannot perform a multirun on the minimal example from hydra tutorial when the strict option is enforced and the default yaml does not contain the configuration over which multirun performs a sweep\r\n\r\n## To reproduce\r\n\r\n** Minimal Code/Config snippet to reproduce **\r\n\r\n[hydra.zip](https://github.com/facebookresearch/hydra/files/3673714/hydra.zip)\r\nunzip attached folder\r\n$ cd hydra\r\n$ python my_app.py -m exp=1,2\r\n\r\n** Stack trace/error message **\r\n```\r\n(tutorial_env) dasneha@devfair0254:~/tutorials/hydra$ python my_app.py -m exp=1,2\r\nTraceback (most recent call last):\r\n  File \"my_app.py\", line 7, in <module>\r\n    my_app()\r\n  File \"/private/home/dasneha/.conda/envs/tutorial_env/lib/python3.7/site-packages/hydra/main.py\", line 25, in decorated_main\r\n    strict,\r\n  File \"/private/home/dasneha/.conda/envs/tutorial_env/lib/python3.7/site-packages/hydra/_internal/utils.py\", line 52, in run_hydra\r\n    hydra.multirun(overrides=args.overrides)\r\n  File \"/private/home/dasneha/.conda/envs/tutorial_env/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 113, in multirun\r\n    cfg = self._load_config(overrides)\r\n  File \"/private/home/dasneha/.conda/envs/tutorial_env/lib/python3.7/site-packages/hydra/_internal/hydra.py\", line 259, in _load_config\r\n    cfg = self.config_loader.load_configuration(overrides)\r\n  File \"/private/home/dasneha/.conda/envs/tutorial_env/lib/python3.7/site-packages/hydra/_internal/config_loader.py\", line 66, in load_configuration\r\n    cfg.merge_with_dotlist(remaining_overrides)\r\n  File \"/private/home/dasneha/.conda/envs/tutorial_env/lib/python3.7/site-packages/omegaconf/config.py\", line 240, in merge_with_dotlist\r\n    self.update(key, value)\r\n  File \"/private/home/dasneha/.conda/envs/tutorial_env/lib/python3.7/site-packages/omegaconf/config.py\", line 260, in update\r\n    root[last] = value\r\n  File \"/private/home/dasneha/.conda/envs/tutorial_env/lib/python3.7/site-packages/omegaconf/dictconfig.py\", line 28, in __setitem__\r\n    raise KeyError(\"Accessing unknown key in a struct : {}\".format(self.get_full_key(key)))\r\nKeyError: 'Accessing unknown key in a struct : exp'\r\n```\r\n## Expected Behavior\r\nmultirun should work\r\n\r\n## System information\r\n- hydra-core==0.1.5\r\n- Ubuntu 18.04.1 LTS\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/181/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/168", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/168/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/168/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/168/events", "html_url": "https://github.com/facebookresearch/hydra/issues/168", "id": 499707021, "node_id": "MDU6SXNzdWU0OTk3MDcwMjE=", "number": 168, "title": "Improve test coverage for launcher plugins", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1", "html_url": "https://github.com/facebookresearch/hydra/milestone/1", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1/labels", "id": 4562677, "node_id": "MDk6TWlsZXN0b25lNDU2MjY3Nw==", "number": 1, "title": "Initial OSS release", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2019-08-10T08:14:04Z", "updated_at": "2019-10-05T05:03:52Z", "due_on": "2019-10-01T07:00:00Z", "closed_at": "2019-10-05T05:03:52Z"}, "comments": 0, "created_at": "2019-09-28T01:04:55Z", "updated_at": "2019-09-28T03:21:35Z", "closed_at": "2019-09-28T03:21:35Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Launcher plugins are lacking a unified test suite that will help testing new launchers.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/168/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/168/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/167", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/167/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/167/events", "html_url": "https://github.com/facebookresearch/hydra/issues/167", "id": 499706520, "node_id": "MDU6SXNzdWU0OTk3MDY1MjA=", "number": 167, "title": "Demos directory should be removed", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1", "html_url": "https://github.com/facebookresearch/hydra/milestone/1", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1/labels", "id": 4562677, "node_id": "MDk6TWlsZXN0b25lNDU2MjY3Nw==", "number": 1, "title": "Initial OSS release", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2019-08-10T08:14:04Z", "updated_at": "2019-10-05T05:03:52Z", "due_on": "2019-10-01T07:00:00Z", "closed_at": "2019-10-05T05:03:52Z"}, "comments": 0, "created_at": "2019-09-28T01:01:53Z", "updated_at": "2019-09-28T03:21:45Z", "closed_at": "2019-09-28T03:21:45Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Finalize demos cleanup, fix all tests.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/167/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/161", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/161/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/161/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/161/events", "html_url": "https://github.com/facebookresearch/hydra/issues/161", "id": 498578021, "node_id": "MDU6SXNzdWU0OTg1NzgwMjE=", "number": 161, "title": "-v verbose logging should default to __main__", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1", "html_url": "https://github.com/facebookresearch/hydra/milestone/1", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1/labels", "id": 4562677, "node_id": "MDk6TWlsZXN0b25lNDU2MjY3Nw==", "number": 1, "title": "Initial OSS release", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2019-08-10T08:14:04Z", "updated_at": "2019-10-05T05:03:52Z", "due_on": "2019-10-01T07:00:00Z", "closed_at": "2019-10-05T05:03:52Z"}, "comments": 0, "created_at": "2019-09-25T23:53:12Z", "updated_at": "2019-09-30T00:13:59Z", "closed_at": "2019-09-30T00:13:59Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Update documentation when done.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/161/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/160", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/160/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/160/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/160/events", "html_url": "https://github.com/facebookresearch/hydra/issues/160", "id": 498569476, "node_id": "MDU6SXNzdWU0OTg1Njk0NzY=", "number": 160, "title": "output/hydra.yaml is wrong", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "3janeAI", "id": 55730900, "node_id": "MDQ6VXNlcjU1NzMwOTAw", "avatar_url": "https://avatars.githubusercontent.com/u/55730900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/3janeAI", "html_url": "https://github.com/3janeAI", "followers_url": "https://api.github.com/users/3janeAI/followers", "following_url": "https://api.github.com/users/3janeAI/following{/other_user}", "gists_url": "https://api.github.com/users/3janeAI/gists{/gist_id}", "starred_url": "https://api.github.com/users/3janeAI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/3janeAI/subscriptions", "organizations_url": "https://api.github.com/users/3janeAI/orgs", "repos_url": "https://api.github.com/users/3janeAI/repos", "events_url": "https://api.github.com/users/3janeAI/events{/privacy}", "received_events_url": "https://api.github.com/users/3janeAI/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "3janeAI", "id": 55730900, "node_id": "MDQ6VXNlcjU1NzMwOTAw", "avatar_url": "https://avatars.githubusercontent.com/u/55730900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/3janeAI", "html_url": "https://github.com/3janeAI", "followers_url": "https://api.github.com/users/3janeAI/followers", "following_url": "https://api.github.com/users/3janeAI/following{/other_user}", "gists_url": "https://api.github.com/users/3janeAI/gists{/gist_id}", "starred_url": "https://api.github.com/users/3janeAI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/3janeAI/subscriptions", "organizations_url": "https://api.github.com/users/3janeAI/orgs", "repos_url": "https://api.github.com/users/3janeAI/repos", "events_url": "https://api.github.com/users/3janeAI/events{/privacy}", "received_events_url": "https://api.github.com/users/3janeAI/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1", "html_url": "https://github.com/facebookresearch/hydra/milestone/1", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1/labels", "id": 4562677, "node_id": "MDk6TWlsZXN0b25lNDU2MjY3Nw==", "number": 1, "title": "Initial OSS release", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2019-08-10T08:14:04Z", "updated_at": "2019-10-05T05:03:52Z", "due_on": "2019-10-01T07:00:00Z", "closed_at": "2019-10-05T05:03:52Z"}, "comments": 1, "created_at": "2019-09-25T23:19:09Z", "updated_at": "2019-09-27T23:42:05Z", "closed_at": "2019-09-27T23:42:05Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "hydra.yaml in output directory is malformed (not rooted at hydra.)", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/160/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/160/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/145", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/145/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/145/events", "html_url": "https://github.com/facebookresearch/hydra/issues/145", "id": 496568319, "node_id": "MDU6SXNzdWU0OTY1NjgzMTk=", "number": 145, "title": "completion bug when completion unresolved values", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1", "html_url": "https://github.com/facebookresearch/hydra/milestone/1", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1/labels", "id": 4562677, "node_id": "MDk6TWlsZXN0b25lNDU2MjY3Nw==", "number": 1, "title": "Initial OSS release", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2019-08-10T08:14:04Z", "updated_at": "2019-10-05T05:03:52Z", "due_on": "2019-10-01T07:00:00Z", "closed_at": "2019-10-05T05:03:52Z"}, "comments": 1, "created_at": "2019-09-20T22:19:45Z", "updated_at": "2019-09-28T04:48:05Z", "closed_at": "2019-09-28T04:48:04Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "`python demos/6_sweep/experiment.py  hydra/launcher=fairtask hydra.launcher.params.queue=local hydra.launcher.params.queues.slurm.params.<TAB>`\r\n\r\n->\r\nKeyError: \"str interpolation key 'hydra.job.num_jobs' not found\"", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/145/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/145/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/139", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/139/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/139/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/139/events", "html_url": "https://github.com/facebookresearch/hydra/issues/139", "id": 495425067, "node_id": "MDU6SXNzdWU0OTU0MjUwNjc=", "number": 139, "title": "Objects demo not working in python 2.7", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1", "html_url": "https://github.com/facebookresearch/hydra/milestone/1", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1/labels", "id": 4562677, "node_id": "MDk6TWlsZXN0b25lNDU2MjY3Nw==", "number": 1, "title": "Initial OSS release", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2019-08-10T08:14:04Z", "updated_at": "2019-10-05T05:03:52Z", "due_on": "2019-10-01T07:00:00Z", "closed_at": "2019-10-05T05:03:52Z"}, "comments": 1, "created_at": "2019-09-18T19:56:48Z", "updated_at": "2019-09-18T22:51:26Z", "closed_at": "2019-09-18T22:51:25Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "Also there is no unit test for this demo.", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/139/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/139/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/133", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/133/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/133/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/133/events", "html_url": "https://github.com/facebookresearch/hydra/issues/133", "id": 492446652, "node_id": "MDU6SXNzdWU0OTI0NDY2NTI=", "number": 133, "title": "submitit job names are not informative", "user": {"login": "bamos", "id": 707462, "node_id": "MDQ6VXNlcjcwNzQ2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/707462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bamos", "html_url": "https://github.com/bamos", "followers_url": "https://api.github.com/users/bamos/followers", "following_url": "https://api.github.com/users/bamos/following{/other_user}", "gists_url": "https://api.github.com/users/bamos/gists{/gist_id}", "starred_url": "https://api.github.com/users/bamos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bamos/subscriptions", "organizations_url": "https://api.github.com/users/bamos/orgs", "repos_url": "https://api.github.com/users/bamos/repos", "events_url": "https://api.github.com/users/bamos/events{/privacy}", "received_events_url": "https://api.github.com/users/bamos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1", "html_url": "https://github.com/facebookresearch/hydra/milestone/1", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1/labels", "id": 4562677, "node_id": "MDk6TWlsZXN0b25lNDU2MjY3Nw==", "number": 1, "title": "Initial OSS release", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2019-08-10T08:14:04Z", "updated_at": "2019-10-05T05:03:52Z", "due_on": "2019-10-01T07:00:00Z", "closed_at": "2019-10-05T05:03:52Z"}, "comments": 4, "created_at": "2019-09-11T20:18:50Z", "updated_at": "2019-09-14T18:19:05Z", "closed_at": "2019-09-14T18:19:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "From #128 -- may be something specific to my setup as I haven't tested this on smaller examples yet:\r\n\r\n----\r\n\r\nI'd like to kill off some of my experiments on the cluster by name but can't because all of the names on the cluster are showing up as submitit -- that's what this issue is referring to, right? Is there a hack I can add in to make the task name hydra.name or something?\r\n\r\nMy current solution is to go into the .slurm directory and kill all the jobs with:\r\n\r\n```bash\r\nls * | awk -F'_' '{print $1}' | uniq | xargs -I{} -n1 scancel {}\r\n```", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/133/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/133/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/132", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/132/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/132/events", "html_url": "https://github.com/facebookresearch/hydra/issues/132", "id": 490870533, "node_id": "MDU6SXNzdWU0OTA4NzA1MzM=", "number": 132, "title": "hydra_app_example does not work correctly when installed with -e", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1", "html_url": "https://github.com/facebookresearch/hydra/milestone/1", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1/labels", "id": 4562677, "node_id": "MDk6TWlsZXN0b25lNDU2MjY3Nw==", "number": 1, "title": "Initial OSS release", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2019-08-10T08:14:04Z", "updated_at": "2019-10-05T05:03:52Z", "due_on": "2019-10-01T07:00:00Z", "closed_at": "2019-10-05T05:03:52Z"}, "comments": 2, "created_at": "2019-09-09T04:31:21Z", "updated_at": "2019-09-17T13:41:55Z", "closed_at": "2019-09-17T13:41:13Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "pip install -e demos/hydra_app_example/", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/132/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/132/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/129", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/129/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/129/events", "html_url": "https://github.com/facebookresearch/hydra/issues/129", "id": 489900128, "node_id": "MDU6SXNzdWU0ODk5MDAxMjg=", "number": 129, "title": "Error when using strict mode and multirun", "user": {"login": "bamos", "id": 707462, "node_id": "MDQ6VXNlcjcwNzQ2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/707462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bamos", "html_url": "https://github.com/bamos", "followers_url": "https://api.github.com/users/bamos/followers", "following_url": "https://api.github.com/users/bamos/following{/other_user}", "gists_url": "https://api.github.com/users/bamos/gists{/gist_id}", "starred_url": "https://api.github.com/users/bamos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bamos/subscriptions", "organizations_url": "https://api.github.com/users/bamos/orgs", "repos_url": "https://api.github.com/users/bamos/repos", "events_url": "https://api.github.com/users/bamos/events{/privacy}", "received_events_url": "https://api.github.com/users/bamos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1", "html_url": "https://github.com/facebookresearch/hydra/milestone/1", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1/labels", "id": 4562677, "node_id": "MDk6TWlsZXN0b25lNDU2MjY3Nw==", "number": 1, "title": "Initial OSS release", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2019-08-10T08:14:04Z", "updated_at": "2019-10-05T05:03:52Z", "due_on": "2019-10-01T07:00:00Z", "closed_at": "2019-10-05T05:03:52Z"}, "comments": 2, "created_at": "2019-09-05T17:25:56Z", "updated_at": "2019-09-14T20:23:52Z", "closed_at": "2019-09-14T20:23:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Modifying the `6_sweep` example to have `@hydra.main(config_path=\"conf/config.yaml\", strict=True)` causes this error:\r\n\r\n```python3\r\n6_sweep(master*)$ python3 experiment.py -m\r\nTraceback (most recent call last):\r\n  File \"experiment.py\", line 15, in <module>\r\n    experiment()\r\n  File \"/private/home/bda/repos/hydra/hydra/main.py\", line 62, in decorated_main\r\n    run_hydra(get_args(), task_function, config_path, strict)\r\n  File \"/private/home/bda/repos/hydra/hydra/_internal/utils.py\", line 57, in run_hydra\r\n    hydra.multirun(overrides=args.overrides)\r\n  File \"/private/home/bda/repos/hydra/hydra/_internal/hydra.py\", line 124, in multirun\r\n    return sweeper.sweep(arguments=task_overrides)\r\n  File \"/private/home/bda/repos/hydra/hydra/plugins/step_sweeper.py\", line 63, in sweep\r\n    results = self.launcher.launch(batch)\r\n  File \"/private/home/bda/repos/hydra/plugins/submitit/hydra_plugins/submitit/submitit_launcher.py\", line 67, in launch\r\n    self.config.hydra.job.num_jobs = num_jobs\r\n  File \"/private/home/bda/anaconda3/lib/python3.7/site-packages/omegaconf-1.3.0-py3.7.egg/omegaconf/dictconfig.py\", line 59, in __setattr__\r\n    self.__setitem__(key, value)\r\n  File \"/private/home/bda/anaconda3/lib/python3.7/site-packages/omegaconf-1.3.0-py3.7.egg/omegaconf/dictconfig.py\", line 28, in __setitem__\r\n    raise KeyError(\"Accessing unknown key in a struct : {}\".format(self.get_full_key(key)))\r\nKeyError: 'Accessing unknown key in a struct : hydra.job.num_jobs'\r\n```\r\n\r\n---\r\n\r\nPerhaps hydra needs to add the right placeholders in the config here for the plugins to modify/write into, or the plugin needs to have a temporarily config that's not locked?", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/129/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/128", "repository_url": "https://api.github.com/repos/facebookresearch/hydra", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/issues/128/labels{/name}", "comments_url": "https://api.github.com/repos/facebookresearch/hydra/issues/128/comments", "events_url": "https://api.github.com/repos/facebookresearch/hydra/issues/128/events", "html_url": "https://github.com/facebookresearch/hydra/issues/128", "id": 489615014, "node_id": "MDU6SXNzdWU0ODk2MTUwMTQ=", "number": 128, "title": "Task name lost with submitit and fairtask", "user": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1403471560, "node_id": "MDU6TGFiZWwxNDAzNDcxNTYw", "url": "https://api.github.com/repos/facebookresearch/hydra/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1", "html_url": "https://github.com/facebookresearch/hydra/milestone/1", "labels_url": "https://api.github.com/repos/facebookresearch/hydra/milestones/1/labels", "id": 4562677, "node_id": "MDk6TWlsZXN0b25lNDU2MjY3Nw==", "number": 1, "title": "Initial OSS release", "description": "", "creator": {"login": "omry", "id": 376455, "node_id": "MDQ6VXNlcjM3NjQ1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/376455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omry", "html_url": "https://github.com/omry", "followers_url": "https://api.github.com/users/omry/followers", "following_url": "https://api.github.com/users/omry/following{/other_user}", "gists_url": "https://api.github.com/users/omry/gists{/gist_id}", "starred_url": "https://api.github.com/users/omry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omry/subscriptions", "organizations_url": "https://api.github.com/users/omry/orgs", "repos_url": "https://api.github.com/users/omry/repos", "events_url": "https://api.github.com/users/omry/events{/privacy}", "received_events_url": "https://api.github.com/users/omry/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 55, "state": "closed", "created_at": "2019-08-10T08:14:04Z", "updated_at": "2019-10-05T05:03:52Z", "due_on": "2019-10-01T07:00:00Z", "closed_at": "2019-10-05T05:03:52Z"}, "comments": 3, "created_at": "2019-09-05T08:48:35Z", "updated_at": "2019-09-19T01:50:32Z", "closed_at": "2019-09-19T01:50:32Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "body": "", "reactions": {"url": "https://api.github.com/repos/facebookresearch/hydra/issues/128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/facebookresearch/hydra/issues/128/timeline", "performed_via_github_app": null, "state_reason": "completed"}]