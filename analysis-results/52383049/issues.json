[{"url": "https://api.github.com/repos/apache/buildstream/issues/1762", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1762/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1762/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1762/events", "html_url": "https://github.com/apache/buildstream/issues/1762", "id": 1384195738, "node_id": "I_kwDOE_tNMc5SgSaa", "number": 1762, "title": "bst2: Impossible to track origin with fallback to mirror", "user": {"login": "nanonyme", "id": 348449, "node_id": "MDQ6VXNlcjM0ODQ0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/348449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nanonyme", "html_url": "https://github.com/nanonyme", "followers_url": "https://api.github.com/users/nanonyme/followers", "following_url": "https://api.github.com/users/nanonyme/following{/other_user}", "gists_url": "https://api.github.com/users/nanonyme/gists{/gist_id}", "starred_url": "https://api.github.com/users/nanonyme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nanonyme/subscriptions", "organizations_url": "https://api.github.com/users/nanonyme/orgs", "repos_url": "https://api.github.com/users/nanonyme/repos", "events_url": "https://api.github.com/users/nanonyme/events{/privacy}", "received_events_url": "https://api.github.com/users/nanonyme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/3", "html_url": "https://github.com/apache/buildstream/milestone/3", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/3/labels", "id": 7687468, "node_id": "MI_kwDOE_tNMc4AdU0s", "number": 3, "title": "BuildStream 2.0 stable blockers", "description": "This milestone is intended to record sensible blockers to an actual 2.0 stable release of BuildStream.\r\n", "creator": {"login": "gtristan", "id": 1928351, "node_id": "MDQ6VXNlcjE5MjgzNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1928351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtristan", "html_url": "https://github.com/gtristan", "followers_url": "https://api.github.com/users/gtristan/followers", "following_url": "https://api.github.com/users/gtristan/following{/other_user}", "gists_url": "https://api.github.com/users/gtristan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtristan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtristan/subscriptions", "organizations_url": "https://api.github.com/users/gtristan/orgs", "repos_url": "https://api.github.com/users/gtristan/repos", "events_url": "https://api.github.com/users/gtristan/events{/privacy}", "received_events_url": "https://api.github.com/users/gtristan/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "open", "created_at": "2022-02-17T04:49:22Z", "updated_at": "2022-10-11T08:10:47Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2022-09-23T19:02:20Z", "updated_at": "2022-10-11T08:10:47Z", "closed_at": "2022-10-11T08:10:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We in freedesktop-sdk project need BuildStream 2 to support tracking model where origin is tracked first, then mirror. This allows us to discover updates through tracking while preserving functionality if origin goes away. The controls https://docs.buildstream.build/master/using_config.html#track-controls provides make this impossible. This is a regression from bst1. I propose instead changing track in following way\r\n\r\n```\r\ntrack:\r\n  source:\r\n  - aliases\r\n  - mirrors\r\n  - user\r\n```\r\nso the order is *explicit* and user can define how it works.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1762/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1762/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1730", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1730/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1730/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1730/events", "html_url": "https://github.com/apache/buildstream/issues/1730", "id": 1345175282, "node_id": "I_kwDOE_tNMc5QLb7y", "number": 1730, "title": "Failure dropping to shell on broken build", "user": {"login": "nanonyme", "id": 348449, "node_id": "MDQ6VXNlcjM0ODQ0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/348449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nanonyme", "html_url": "https://github.com/nanonyme", "followers_url": "https://api.github.com/users/nanonyme/followers", "following_url": "https://api.github.com/users/nanonyme/following{/other_user}", "gists_url": "https://api.github.com/users/nanonyme/gists{/gist_id}", "starred_url": "https://api.github.com/users/nanonyme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nanonyme/subscriptions", "organizations_url": "https://api.github.com/users/nanonyme/orgs", "repos_url": "https://api.github.com/users/nanonyme/repos", "events_url": "https://api.github.com/users/nanonyme/events{/privacy}", "received_events_url": "https://api.github.com/users/nanonyme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 3841320027, "node_id": "LA_kwDOE_tNMc7k9eRb", "url": "https://api.github.com/repos/apache/buildstream/labels/needinfo", "name": "needinfo", "color": "C5DEF5", "default": false, "description": "Requires additional information to investigate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-08-20T14:13:47Z", "updated_at": "2022-09-16T18:22:06Z", "closed_at": "2022-09-16T18:22:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "bst2 emits `Error while attempting to create interactive shell: Buildtree is not cached locally or in available remote`. I have locally built the project, nothing helps.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1730/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1730/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1683", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1683/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1683/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1683/events", "html_url": "https://github.com/apache/buildstream/issues/1683", "id": 1304497299, "node_id": "I_kwDOE_tNMc5NwQyT", "number": 1683, "title": "Conditionals in the root of project.conf cause an error", "user": {"login": "abderrahim", "id": 100109, "node_id": "MDQ6VXNlcjEwMDEwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/100109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abderrahim", "html_url": "https://github.com/abderrahim", "followers_url": "https://api.github.com/users/abderrahim/followers", "following_url": "https://api.github.com/users/abderrahim/following{/other_user}", "gists_url": "https://api.github.com/users/abderrahim/gists{/gist_id}", "starred_url": "https://api.github.com/users/abderrahim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abderrahim/subscriptions", "organizations_url": "https://api.github.com/users/abderrahim/orgs", "repos_url": "https://api.github.com/users/abderrahim/repos", "events_url": "https://api.github.com/users/abderrahim/events{/privacy}", "received_events_url": "https://api.github.com/users/abderrahim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-14T09:14:13Z", "updated_at": "2022-07-25T05:50:50Z", "closed_at": "2022-07-25T05:50:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Having the following in a `project.conf` causes an error\r\n```\r\n(?):\r\n- target_arch == \"riscv64\":\r\n    environment-nocache:\r\n    - G_SLICE\r\n```\r\n\r\nI get the following error:\r\n```\r\nError loading project: project.conf [line 67 column 0]: Unexpected key: (?)\r\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1683/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1683/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1582", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1582/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1582/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1582/events", "html_url": "https://github.com/apache/buildstream/issues/1582", "id": 1123752588, "node_id": "I_kwDOE_tNMc5C-xqM", "number": 1582, "title": "BuildGrid tests failing", "user": {"login": "gtristan", "id": 1928351, "node_id": "MDQ6VXNlcjE5MjgzNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1928351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtristan", "html_url": "https://github.com/gtristan", "followers_url": "https://api.github.com/users/gtristan/followers", "following_url": "https://api.github.com/users/gtristan/following{/other_user}", "gists_url": "https://api.github.com/users/gtristan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtristan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtristan/subscriptions", "organizations_url": "https://api.github.com/users/gtristan/orgs", "repos_url": "https://api.github.com/users/gtristan/repos", "events_url": "https://api.github.com/users/gtristan/events{/privacy}", "received_events_url": "https://api.github.com/users/gtristan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}, {"id": 2709109561, "node_id": "MDU6TGFiZWwyNzA5MTA5NTYx", "url": "https://api.github.com/repos/apache/buildstream/labels/remote%20execution", "name": "remote execution", "color": "44AD8E", "default": false, "description": "Related to remote execution"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/2", "html_url": "https://github.com/apache/buildstream/milestone/2", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/2/labels", "id": 6382580, "node_id": "MDk6TWlsZXN0b25lNjM4MjU4MA==", "number": 2, "title": "BuildStream 2.0 API Freeze", "description": "This milestone represents issues which need to be solved in order to reach an establish stable API for BuildStream 2.0.\r\n\r\nAfter completing these tasks it will be a good time to release an initial BuildStream 2.0 beta release and start focusing on fixing issues leading up to an actual 2.0 stable.\r\n", "creator": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 29, "state": "open", "created_at": "2021-02-02T13:29:00Z", "updated_at": "2022-04-15T09:15:44Z", "due_on": null, "closed_at": null}, "comments": 10, "created_at": "2022-02-04T02:43:07Z", "updated_at": "2022-03-10T08:54:00Z", "closed_at": "2022-03-10T08:54:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While trying to merge #1570 I came across a few problems:\r\n\r\n* The github runners are utter garbage again, so CI just **wont run** completely, timing out after a mere 30/40 minutes and citing that *\"this will happen when there is resource starvation on the runner\"*, indicating to me that these runners just dont make the cut.\r\n* Running CI locally works except I noticed the buildgrid test now fails, but reports a successful error code\r\n  * This might likely happen if ever the buildbarn test were to fail too\r\n\r\nTo reproduce this, run the following locally in a BuildStream checkout:\r\n\r\n```sh\r\n./.github/run-ci.sh -s buildgrid\r\necho $?\r\n```\r\n\r\nNotice there are various failures in the buildgrid test, but the return status of the script is `0`\r\n\r\nSome relevant snips from the log:\r\n```\r\n...\r\ntests/remoteexecution/buildfail.py::test_build_remote_failure PASSED                                                                                                                   [ 83%]\r\ntests/remoteexecution/buildtree.py::test_buildtree_remote PASSED                                                                                                                       [ 83%]\r\ntests/remoteexecution/junction.py::test_junction_build_remote PASSED                                                                                                                   [ 83%]\r\ntests/remoteexecution/remotecache.py::test_remote_autotools_build FAILED                                                                                                               [ 83%]\r\ntests/remoteexecution/simple.py::test_remote_autotools_build PASSED                                                                                                                    [ 83%]\r\ntests/remoteexecution/simple.py::test_remote_autotools_run PASSED                                                                                                                      [ 83%]\r\ntests/remoteexecution/workspace.py::test_workspace_build[content] PASSED                                                                                                               [ 83%]\r\ntests/remoteexecution/workspace.py::test_workspace_build[content] ERROR                                                                                                                [ 83%]\r\ntests/remoteexecution/workspace.py::test_workspace_build[time] ERROR                                                                                                                   [ 83%]\r\n...\r\ntox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/build_checkout.py::test_fetch_build_checkout[git-strict] PASSED                                     [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/build_checkout.py::test_fetch_build_checkout[git-strict] ERROR                                      [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/build_checkout.py::test_fetch_build_checkout[git-non-strict] ERROR                                  [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/build_checkout.py::test_fetch_build_checkout[bzr-strict] ERROR                                      [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/build_checkout.py::test_fetch_build_checkout[bzr-non-strict] ERROR                                  [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/build_checkout.py::test_fetch_build_checkout[tar-strict] ERROR                                      [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/build_checkout.py::test_fetch_build_checkout[tar-non-strict] ERROR                                  [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/build_checkout.py::test_fetch_build_checkout[zip-strict] ERROR                                      [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/build_checkout.py::test_fetch_build_checkout[zip-non-strict] ERROR                                  [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch[git] ERROR                                                                     [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch[bzr] ERROR                                                                     [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch[tar] ERROR                                                                     [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch[zip] ERROR                                                                     [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch_cross_junction[git-inline] ERROR                                               [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch_cross_junction[git-project.refs] ERROR                                         [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch_cross_junction[bzr-inline] ERROR                                               [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch_cross_junction[bzr-project.refs] ERROR                                         [ 93%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch_cross_junction[tar-inline] ERROR                                               [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch_cross_junction[tar-project.refs] ERROR                                         [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch_cross_junction[zip-inline] ERROR                                               [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/fetch.py::test_fetch_cross_junction[zip-project.refs] ERROR                                         [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_fetch[git] ERROR                                                             [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_fetch[bzr] ERROR                                                             [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_fetch[tar] ERROR                                                             [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_fetch[zip] ERROR                                                             [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_fetch_upstream_absent[git] ERROR                                             [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_fetch_upstream_absent[bzr] ERROR                                             [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_fetch_upstream_absent[tar] ERROR                                             [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_fetch_upstream_absent[zip] ERROR                                             [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_from_includes[git] ERROR                                                     [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_from_includes[bzr] ERROR                                                     [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_from_includes[tar] ERROR                                                     [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_from_includes[zip] ERROR                                                     [ 94%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_junction_from_includes[git] ERROR                                            [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_junction_from_includes[bzr] ERROR                                            [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_junction_from_includes[tar] ERROR                                            [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_junction_from_includes[zip] ERROR                                            [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_track_upstream_present[git] ERROR                                            [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_track_upstream_present[bzr] ERROR                                            [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_track_upstream_present[tar] ERROR                                            [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_track_upstream_present[zip] ERROR                                            [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_track_upstream_absent[git] ERROR                                             [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_track_upstream_absent[bzr] ERROR                                             [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_track_upstream_absent[tar] ERROR                                             [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/mirror.py::test_mirror_track_upstream_absent[zip] ERROR                                             [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/source_determinism.py::test_deterministic_source_umask[git] ERROR                                   [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/source_determinism.py::test_deterministic_source_umask[bzr] ERROR                                   [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/source_determinism.py::test_deterministic_source_umask[tar] ERROR                                   [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/source_determinism.py::test_deterministic_source_umask[zip] ERROR                                   [ 95%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track[git-inline] ERROR                                                              [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track[git-project.refs] ERROR                                                        [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track[bzr-inline] ERROR                                                              [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track[bzr-project.refs] ERROR                                                        [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track[tar-inline] ERROR                                                              [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track[tar-project.refs] ERROR                                                        [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track[zip-inline] ERROR                                                              [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track[zip-project.refs] ERROR                                                        [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse[git-1] ERROR                                                           [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse[git-10] ERROR                                                          [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse[bzr-1] ERROR                                                           [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse[bzr-10] ERROR                                                          [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse[tar-1] ERROR                                                           [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse[tar-10] ERROR                                                          [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse[zip-1] ERROR                                                           [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse[zip-10] ERROR                                                          [ 96%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse_except[git] ERROR                                                      [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse_except[bzr] ERROR                                                      [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse_except[tar] ERROR                                                      [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_recurse_except[zip] ERROR                                                      [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_cross_junction[git-inline] ERROR                                                     [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_cross_junction[git-project.refs] ERROR                                               [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_cross_junction[bzr-inline] ERROR                                                     [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_cross_junction[bzr-project.refs] ERROR                                               [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_cross_junction[tar-inline] ERROR                                                     [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_cross_junction[tar-project.refs] ERROR                                               [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_cross_junction[zip-inline] ERROR                                                     [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_cross_junction[zip-project.refs] ERROR                                               [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include[git-inline] ERROR                                                      [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include[git-project.refs] ERROR                                                [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include[bzr-inline] ERROR                                                      [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include[bzr-project.refs] ERROR                                                [ 97%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include[tar-inline] ERROR                                                      [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include[tar-project.refs] ERROR                                                [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include[zip-inline] ERROR                                                      [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include[zip-project.refs] ERROR                                                [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include_junction[git-inline] ERROR                                             [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include_junction[git-project.refs] ERROR                                       [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include_junction[bzr-inline] ERROR                                             [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include_junction[bzr-project.refs] ERROR                                       [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include_junction[tar-inline] ERROR                                             [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include_junction[tar-project.refs] ERROR                                       [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include_junction[zip-inline] ERROR                                             [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_include_junction[zip-project.refs] ERROR                                       [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_junction_included[git-inline] ERROR                                            [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_junction_included[git-project.refs] ERROR                                      [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_junction_included[bzr-inline] ERROR                                            [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_junction_included[bzr-project.refs] ERROR                                      [ 98%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_junction_included[tar-inline] ERROR                                            [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_junction_included[tar-project.refs] ERROR                                      [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_junction_included[zip-inline] ERROR                                            [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track.py::test_track_junction_included[zip-project.refs] ERROR                                      [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track_cross_junction.py::test_cross_junction_multiple_projects[git] ERROR                           [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track_cross_junction.py::test_cross_junction_multiple_projects[bzr] ERROR                           [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track_cross_junction.py::test_cross_junction_multiple_projects[tar] ERROR                           [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track_cross_junction.py::test_cross_junction_multiple_projects[zip] ERROR                           [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track_cross_junction.py::test_track_exceptions[git] ERROR                                           [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track_cross_junction.py::test_track_exceptions[bzr] ERROR                                           [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track_cross_junction.py::test_track_exceptions[tar] ERROR                                           [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/track_cross_junction.py::test_track_exceptions[zip] ERROR                                           [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/workspace.py::test_open[git] ERROR                                                                  [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/workspace.py::test_open[bzr] ERROR                                                                  [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/workspace.py::test_open[tar] ERROR                                                                  [ 99%]\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_sourcetests/workspace.py::test_open[zip] ERROR                                                                  [100%]\r\n\r\n=========================================================================================== ERRORS ===========================================================================================\r\n_____________________________________________________________________ ERROR at teardown of test_workspace_build[content] _____________________________________________________________________\r\n\r\ndefault_thread_number = 1\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n        assert has_no_unexpected_background_threads(default_thread_number)\r\n        yield\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:53: AssertionError\r\n------------------------------------------------------------------------------------ Captured stdout call ------------------------------------------------------------------------------------\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 workspace open --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/workspace autotools/amhello.bst\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][        ][    main:core activity                 ] START   Checking sources\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Checking sources\r\n[--:--:--][        ][    main:core activity                 ] START   Preparing work plan\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Preparing work plan\r\n\r\n    1 of 1 subtasks processed\r\n\r\n[--:--:--][c9c40f65][   fetch:autotools/amhello.bst         ] START   test/autotools-amhello/c9c40f65-fetch.99.log\r\n[--:--:--][c9c40f65][   fetch:autotools/amhello.bst         ] START   Fetching file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/files/amhello.tar.gz\r\n[00:00:00][c9c40f65][   fetch:autotools/amhello.bst         ] SUCCESS Fetching file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/files/amhello.tar.gz\r\n[00:00:00][c9c40f65][   fetch:autotools/amhello.bst         ] SUCCESS test/autotools-amhello/c9c40f65-fetch.99.log\r\n[--:--:--][        ][    main:core activity                 ] INFO    Creating workspace for element autotools/amhello.bst\r\n[--:--:--][c9c40f65][    main:autotools/amhello.bst         ] START   Staging sources to /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/workspace\r\n[00:00:00][c9c40f65][    main:autotools/amhello.bst         ] SUCCESS Staging sources to /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/workspace\r\n[--:--:--][        ][    main:core activity                 ] INFO    Created a workspace for element: autotools/amhello.bst\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 --cache-buildtrees always build autotools/amhello.bst\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Build\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Checking sources\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Checking sources\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][        ][    main:core activity                 ] START   Preparing work plan\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Preparing work plan\r\n\r\n    3 of 3 subtasks processed\r\n\r\n\r\nBuildStream Version 1.93.6+222.gebab0cb40\r\n    Session Start: Friday, 04-02-2022 at 02:20:09\r\n    Project:       test (/home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0)\r\n    Targets:       autotools/amhello.bst\r\n\r\nUser Configuration\r\n    Configuration File:      /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf\r\n    Cache Directory:         /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache\r\n    Log Files:               /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/logs\r\n    Source Mirrors:          /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/sources\r\n    Build Area:              /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/build\r\n    Strict Build Plan:       Yes\r\n    Maximum Fetch Tasks:     10\r\n    Maximum Build Tasks:     4\r\n    Maximum Push Tasks:      4\r\n    Maximum Network Retries: 2\r\n\r\nRemote Execution Configuration\r\n    Execution Service:    http://localhost:50051\r\n    Storage Service:      http://localhost:50051\r\n    Action Cache Service: http://localhost:50051\r\n\r\nProject: test\r\n\r\n    Project Options\r\n        arch:  x86-64\r\n        linux: 1\r\n\r\n    Element Plugins\r\n        autotools: core plugin\r\n        stack:     core plugin\r\n        import:    core plugin\r\n\r\n    Source Plugins\r\n        workspace: core plugin\r\n        tar:       core plugin\r\n\r\nPipeline\r\nfetch needed 456b61e83c339afb408d03df9db50efdeb0962ffea3cce6a2291a89a89248443 base/base-alpine.bst \r\n     waiting 7a43f178642961ce8afe6aa7dfe9b0978aecc69b0f6b367a690b90e3bc335cfb base.bst \r\n     waiting 3da737a54d46131d5d5b2173ea258526fef43ccbc2dc1b8226bc23fec7d49c8e autotools/amhello.bst Workspace: /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/workspace\r\n===============================================================================\r\n[--:--:--][3da737a5][   fetch:autotools/amhello.bst         ] START   test/autotools-amhello/3da737a5-fetch.99.log\r\n[--:--:--][7a43f178][   fetch:base.bst                      ] START   test/base/7a43f178-fetch.99.log\r\n[--:--:--][456b61e8][   fetch:base/base-alpine.bst          ] START   test/base-base-alpine/456b61e8-fetch.99.log\r\n[--:--:--][456b61e8][   fetch:base/base-alpine.bst          ] START   Fetching https://bst-integration-test-images.ams3.cdn.digitaloceanspaces.com/integration-tests-base.v1.x86_64.tar.xz\r\n[00:00:00][7a43f178][   fetch:base.bst                      ] SUCCESS test/base/7a43f178-fetch.99.log\r\n[00:00:00][3da737a5][   fetch:autotools/amhello.bst         ] SUCCESS test/autotools-amhello/3da737a5-fetch.99.log\r\n[00:00:07][456b61e8][   fetch:base/base-alpine.bst          ] SUCCESS Fetching https://bst-integration-test-images.ams3.cdn.digitaloceanspaces.com/integration-tests-base.v1.x86_64.tar.xz\r\n[00:00:13][456b61e8][   fetch:base/base-alpine.bst          ] SUCCESS test/base-base-alpine/456b61e8-fetch.99.log\r\n[--:--:--][456b61e8][   build:base/base-alpine.bst          ] START   test/base-base-alpine/456b61e8-build.99.log\r\n[--:--:--][456b61e8][   build:base/base-alpine.bst          ] INFO    Using a remote sandbox for artifact base/base-alpine.bst with directory '/home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/build/base-base-alpine-pkavag3r'\r\n[--:--:--][456b61e8][   build:base/base-alpine.bst          ] START   Staging sources\r\n[00:00:00][456b61e8][   build:base/base-alpine.bst          ] SUCCESS Staging sources\r\n[--:--:--][456b61e8][   build:base/base-alpine.bst          ] START   Caching artifact\r\n[00:00:00][456b61e8][   build:base/base-alpine.bst          ] SUCCESS Caching artifact\r\n[00:00:00][456b61e8][   build:base/base-alpine.bst          ] SUCCESS test/base-base-alpine/456b61e8-build.99.log\r\n[--:--:--][7a43f178][   build:base.bst                      ] START   test/base/7a43f178-build.99.log\r\n[--:--:--][7a43f178][   build:base.bst                      ] INFO    Using a remote sandbox for artifact base.bst with directory '/home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/build/base-ukfln963'\r\n[--:--:--][7a43f178][   build:base.bst                      ] START   Caching artifact\r\n[00:00:00][7a43f178][   build:base.bst                      ] SUCCESS Caching artifact\r\n[00:00:00][7a43f178][   build:base.bst                      ] SUCCESS test/base/7a43f178-build.99.log\r\n[--:--:--][3da737a5][   build:autotools/amhello.bst         ] START   test/autotools-amhello/3da737a5-build.99.log\r\n[--:--:--][3da737a5][   build:autotools/amhello.bst         ] INFO    Using a remote sandbox for artifact autotools/amhello.bst with directory '/home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/build/autotools-amhello-pwviha9i'\r\n[--:--:--][3da737a5][   build:autotools/amhello.bst         ] START   Staging dependencies at: /\r\n[00:00:00][3da737a5][   build:autotools/amhello.bst         ] SUCCESS Staging dependencies at: /\r\n[--:--:--][3da737a5][   build:autotools/amhello.bst         ] START   Integrating sandbox\r\n[00:00:00][3da737a5][   build:autotools/amhello.bst         ] SUCCESS Integrating sandbox\r\n[--:--:--][3da737a5][   build:autotools/amhello.bst         ] START   Staging sources\r\n[00:00:00][3da737a5][   build:autotools/amhello.bst         ] SUCCESS Staging sources\r\n[--:--:--][3da737a5][   build:autotools/amhello.bst         ] START   Running commands\r\n\r\n    export NOCONFIGURE=1;\r\n    \r\n    if [ -x ./configure ]; then true;\r\n    elif [ -x ./autogen ]; then ./autogen;\r\n    elif [ -x ./autogen.sh ]; then ./autogen.sh;\r\n    elif [ -x ./bootstrap ]; then ./bootstrap;\r\n    elif [ -x ./bootstrap.sh ]; then ./bootstrap.sh;\r\n    else autoreconf -ivf .;\r\n    fi\r\n    ./configure --prefix=/usr \\\r\n    --exec-prefix=/usr \\\r\n    --bindir=/usr/bin \\\r\n    --sbindir=/usr/sbin \\\r\n    --sysconfdir=/etc \\\r\n    --datadir=/usr/share \\\r\n    --includedir=/usr/include \\\r\n    --libdir=/usr/lib \\\r\n    --libexecdir=/usr/libexec \\\r\n    --localstatedir=/var \\\r\n    --sharedstatedir=/usr/com \\\r\n    Message contains 25 additional lines\r\n\r\n[--:--:--][3da737a5][   build:autotools/amhello.bst         ] START   Uploading input root\r\n[00:00:00][3da737a5][   build:autotools/amhello.bst         ] SUCCESS Uploading input root\r\n[--:--:--][3da737a5][   build:autotools/amhello.bst         ] START   Waiting for the remote build to complete\r\n[00:00:08][3da737a5][   build:autotools/amhello.bst         ] SUCCESS Waiting for the remote build to complete\r\n[00:00:08][3da737a5][   build:autotools/amhello.bst         ] SUCCESS Running commands\r\n[--:--:--][3da737a5][   build:autotools/amhello.bst         ] START   Caching artifact\r\n[00:00:00][3da737a5][   build:autotools/amhello.bst         ] SUCCESS Caching artifact\r\n[00:00:08][3da737a5][   build:autotools/amhello.bst         ] SUCCESS test/autotools-amhello/3da737a5-build.99.log\r\n[00:00:22][        ][    main:core activity                 ] SUCCESS Build\r\n\r\nPipeline Summary\r\n    Total:       3\r\n    Session:     3\r\n    Fetch Queue: processed 3, skipped 0, failed 0 \r\n    Build Queue: processed 3, skipped 0, failed 0 \r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --no-verbose --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 show --deps none --format %{state} autotools/amhello.bst\r\nProgram output was:\r\ncached\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --no-verbose --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 show --deps none --format %{full-key} autotools/amhello.bst\r\nProgram output was:\r\n3da737a54d46131d5d5b2173ea258526fef43ccbc2dc1b8226bc23fec7d49c8e\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 shell --build autotools/amhello.bst --use-buildtree -- find . -mindepth 1 -exec stat -c %n::%Y {} ;\r\nProgram output was:\r\n./.bst-prepared::1643941228\r\n./.bstproject.yaml::1643941209\r\n./Makefile::1643941228\r\n./Makefile.am::1419947381\r\n./Makefile.in::1643941227\r\n./README::1419976385\r\n./aclocal.m4::1643941226\r\n./autom4te.cache::1321009871\r\n./autom4te.cache/output.0::1643941226\r\n./autom4te.cache/output.1::1643941227\r\n./autom4te.cache/requests::1643941228\r\n./autom4te.cache/traces.0::1643941226\r\n./autom4te.cache/traces.1::1643941227\r\n./build-time::1643941228\r\n./compile::1643941227\r\n./config-time::1643941228\r\n./config.h::1643941228\r\n./config.h.in::1643941228\r\n./config.log::1643941228\r\n./config.status::1643941228\r\n./configure::1643941226\r\n./configure.ac::1419947381\r\n./configure.lineno::1643941227\r\n./depcomp::1643941227\r\n./install-sh::1643941227\r\n./missing::1643941227\r\n./newfile.cfg::1643941209\r\n./src::1321009871\r\n./src/.deps::1321009871\r\n./src/.deps/main.Po::1643941228\r\n./src/Makefile::1643941228\r\n./src/Makefile.am::1419947381\r\n./src/Makefile.in::1643941227\r\n./src/hello::1643941228\r\n./src/main.c::1419947381\r\n./src/main.o::1643941228\r\n./stamp-h1::1643941228\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Staging dependencies at: /\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Staging dependencies at: /\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Integrating sandbox\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Integrating sandbox\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Staging sources\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Staging sources\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] STATUS  Running command\r\n\r\n    find . -mindepth 1 -exec stat -c %n::%Y {} ;\r\n\r\n2022-02-04T02:20:33.213+0000 [895:139874675320896] [buildboxcommon_casclient.cpp:95] [INFO] Setting d_maxBatchTotalSizeBytes = 4128768 bytes by default\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 shell --build autotools/amhello.bst --use-buildtree -- cat build-time\r\nProgram output was:\r\n1643941228\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Staging dependencies at: /\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Staging dependencies at: /\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Integrating sandbox\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Integrating sandbox\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Staging sources\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Staging sources\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] STATUS  Running command\r\n\r\n    cat build-time\r\n\r\n2022-02-04T02:20:34.900+0000 [970:140252684687424] [buildboxcommon_casclient.cpp:95] [INFO] Setting d_maxBatchTotalSizeBytes = 4128768 bytes by default\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 artifact checkout autotools/amhello.bst --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/checkout\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Staging dependencies\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Staging dependencies\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Integrating sandbox\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Integrating sandbox\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Checking out files in '/home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/checkout'\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Checking out files in '/home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/checkout'\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 --cache-buildtrees always build autotools/amhello.bst\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Build\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Checking sources\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Checking sources\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][        ][    main:core activity                 ] START   Preparing work plan\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Preparing work plan\r\n\r\n    3 of 3 subtasks processed\r\n\r\n\r\nBuildStream Version 1.93.6+222.gebab0cb40\r\n    Session Start: Friday, 04-02-2022 at 02:20:37\r\n    Project:       test (/home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0)\r\n    Targets:       autotools/amhello.bst\r\n\r\nUser Configuration\r\n    Configuration File:      /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf\r\n    Cache Directory:         /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache\r\n    Log Files:               /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/logs\r\n    Source Mirrors:          /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/sources\r\n    Build Area:              /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/build\r\n    Strict Build Plan:       Yes\r\n    Maximum Fetch Tasks:     10\r\n    Maximum Build Tasks:     4\r\n    Maximum Push Tasks:      4\r\n    Maximum Network Retries: 2\r\n\r\nRemote Execution Configuration\r\n    Execution Service:    http://localhost:50051\r\n    Storage Service:      http://localhost:50051\r\n    Action Cache Service: http://localhost:50051\r\n\r\nProject: test\r\n\r\n    Project Options\r\n        arch:  x86-64\r\n        linux: 1\r\n\r\n    Element Plugins\r\n        autotools: core plugin\r\n        stack:     core plugin\r\n        import:    core plugin\r\n\r\n    Source Plugins\r\n        workspace: core plugin\r\n        tar:       core plugin\r\n\r\nPipeline\r\n      cached 456b61e83c339afb408d03df9db50efdeb0962ffea3cce6a2291a89a89248443 base/base-alpine.bst \r\n      cached 7a43f178642961ce8afe6aa7dfe9b0978aecc69b0f6b367a690b90e3bc335cfb base.bst \r\n      cached 3da737a54d46131d5d5b2173ea258526fef43ccbc2dc1b8226bc23fec7d49c8e autotools/amhello.bst Workspace: /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/workspace\r\n===============================================================================\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Build\r\n\r\nPipeline Summary\r\n    Total:       3\r\n    Session:     3\r\n    Fetch Queue: processed 0, skipped 3, failed 0 \r\n    Build Queue: processed 0, skipped 3, failed 0 \r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --no-verbose --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 show --deps none --format %{state} autotools/amhello.bst\r\nProgram output was:\r\ncached\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --no-verbose --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 show --deps none --format %{full-key} autotools/amhello.bst\r\nProgram output was:\r\n3da737a54d46131d5d5b2173ea258526fef43ccbc2dc1b8226bc23fec7d49c8e\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 shell --build autotools/amhello.bst --use-buildtree -- find . -mindepth 1 -exec stat -c %n::%Y {} ;\r\nProgram output was:\r\n./.bst-prepared::1643941228\r\n./.bstproject.yaml::1643941209\r\n./Makefile::1643941228\r\n./Makefile.am::1419947381\r\n./Makefile.in::1643941227\r\n./README::1419976385\r\n./aclocal.m4::1643941226\r\n./autom4te.cache::1321009871\r\n./autom4te.cache/output.0::1643941226\r\n./autom4te.cache/output.1::1643941227\r\n./autom4te.cache/requests::1643941228\r\n./autom4te.cache/traces.0::1643941226\r\n./autom4te.cache/traces.1::1643941227\r\n./build-time::1643941228\r\n./compile::1643941227\r\n./config-time::1643941228\r\n./config.h::1643941228\r\n./config.h.in::1643941228\r\n./config.log::1643941228\r\n./config.status::1643941228\r\n./configure::1643941226\r\n./configure.ac::1419947381\r\n./configure.lineno::1643941227\r\n./depcomp::1643941227\r\n./install-sh::1643941227\r\n./missing::1643941227\r\n./newfile.cfg::1643941209\r\n./src::1321009871\r\n./src/.deps::1321009871\r\n./src/.deps/main.Po::1643941228\r\n./src/Makefile::1643941228\r\n./src/Makefile.am::1419947381\r\n./src/Makefile.in::1643941227\r\n./src/hello::1643941228\r\n./src/main.c::1419947381\r\n./src/main.o::1643941228\r\n./stamp-h1::1643941228\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Staging dependencies at: /\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Staging dependencies at: /\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Integrating sandbox\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Integrating sandbox\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Staging sources\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Staging sources\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] STATUS  Running command\r\n\r\n    find . -mindepth 1 -exec stat -c %n::%Y {} ;\r\n\r\n2022-02-04T02:20:38.449+0000 [1110:140453338896448] [buildboxcommon_casclient.cpp:95] [INFO] Setting d_maxBatchTotalSizeBytes = 4128768 bytes by default\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 shell --build autotools/amhello.bst --use-buildtree -- cat build-time\r\nProgram output was:\r\n1643941228\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Staging dependencies at: /\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Staging dependencies at: /\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Integrating sandbox\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Integrating sandbox\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] START   Staging sources\r\n[00:00:00][3da737a5][    main:autotools/amhello.bst         ] SUCCESS Staging sources\r\n[--:--:--][3da737a5][    main:autotools/amhello.bst         ] STATUS  Running command\r\n\r\n    cat build-time\r\n\r\n2022-02-04T02:20:40.117+0000 [1185:140236168775744] [buildboxcommon_casclient.cpp:95] [INFO] Setting d_maxBatchTotalSizeBytes = 4128768 bytes by default\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 --cache-buildtrees always build autotools/amhello.bst\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Build\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Checking sources\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Checking sources\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][        ][    main:core activity                 ] START   Preparing work plan\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Preparing work plan\r\n\r\n    3 of 3 subtasks processed\r\n\r\n\r\nBuildStream Version 1.93.6+222.gebab0cb40\r\n    Session Start: Friday, 04-02-2022 at 02:20:41\r\n    Project:       test (/home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0)\r\n    Targets:       autotools/amhello.bst\r\n\r\nUser Configuration\r\n    Configuration File:      /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf\r\n    Cache Directory:         /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache\r\n    Log Files:               /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/logs\r\n    Source Mirrors:          /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/sources\r\n    Build Area:              /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/build\r\n    Strict Build Plan:       Yes\r\n    Maximum Fetch Tasks:     10\r\n    Maximum Build Tasks:     4\r\n    Maximum Push Tasks:      4\r\n    Maximum Network Retries: 2\r\n\r\nRemote Execution Configuration\r\n    Execution Service:    http://localhost:50051\r\n    Storage Service:      http://localhost:50051\r\n    Action Cache Service: http://localhost:50051\r\n\r\nProject: test\r\n\r\n    Project Options\r\n        arch:  x86-64\r\n        linux: 1\r\n\r\n    Element Plugins\r\n        autotools: core plugin\r\n        stack:     core plugin\r\n        import:    core plugin\r\n\r\n    Source Plugins\r\n        workspace: core plugin\r\n        tar:       core plugin\r\n\r\nPipeline\r\n      cached 456b61e83c339afb408d03df9db50efdeb0962ffea3cce6a2291a89a89248443 base/base-alpine.bst \r\n      cached 7a43f178642961ce8afe6aa7dfe9b0978aecc69b0f6b367a690b90e3bc335cfb base.bst \r\n   buildable 5ddd4cd54319df305e4b04e060e75116d544a2dfeeecddcdde732fc7328bc67f autotools/amhello.bst Workspace: /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/workspace\r\n===============================================================================\r\n[--:--:--][5ddd4cd5][   fetch:autotools/amhello.bst         ] START   test/autotools-amhello/5ddd4cd5-fetch.99.log\r\n[00:00:00][5ddd4cd5][   fetch:autotools/amhello.bst         ] SUCCESS test/autotools-amhello/5ddd4cd5-fetch.99.log\r\n[--:--:--][5ddd4cd5][   build:autotools/amhello.bst         ] START   test/autotools-amhello/5ddd4cd5-build.99.log\r\n[--:--:--][5ddd4cd5][   build:autotools/amhello.bst         ] INFO    Using a remote sandbox for artifact autotools/amhello.bst with directory '/home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/build/autotools-amhello-6tlco71f'\r\n[--:--:--][5ddd4cd5][   build:autotools/amhello.bst         ] START   Staging dependencies at: /\r\n[00:00:00][5ddd4cd5][   build:autotools/amhello.bst         ] SUCCESS Staging dependencies at: /\r\n[--:--:--][5ddd4cd5][   build:autotools/amhello.bst         ] START   Integrating sandbox\r\n[00:00:00][5ddd4cd5][   build:autotools/amhello.bst         ] SUCCESS Integrating sandbox\r\n[--:--:--][5ddd4cd5][   build:autotools/amhello.bst         ] START   Staging sources\r\n[--:--:--][5ddd4cd5][   build:autotools/amhello.bst         ] INFO    Incremental build\r\n[00:00:00][5ddd4cd5][   build:autotools/amhello.bst         ] SUCCESS Staging sources\r\n[--:--:--][5ddd4cd5][   build:autotools/amhello.bst         ] START   Running commands\r\n\r\n    make\r\n    date +%s > build-time\r\n    make -j1 DESTDIR=\"/buildstream-install\" install\r\n    if false || false; then\r\n      find \"/buildstream-install\" -name \"*.la\" -print0 | while read -d '' -r file; do\r\n        if grep '^shouldnotlink=yes$' \"${file}\" &>/dev/null; then\r\n          if false; then\r\n            echo \"Removing ${file}.\"\r\n            rm \"${file}\"\r\n          else\r\n            echo \"Not removing ${file}.\"\r\n          fi\r\n        else\r\n          if false; then\r\n            echo \"Removing ${file}.\"\r\n            rm \"${file}\"\r\n          else\r\n            echo \"Not removing ${file}.\"\r\n          fi\r\n        fi\r\n    Message contains 2 additional lines\r\n\r\n[--:--:--][5ddd4cd5][   build:autotools/amhello.bst         ] START   Uploading input root\r\n[00:00:00][5ddd4cd5][   build:autotools/amhello.bst         ] SUCCESS Uploading input root\r\n[--:--:--][5ddd4cd5][   build:autotools/amhello.bst         ] START   Waiting for the remote build to complete\r\n[00:00:03][5ddd4cd5][   build:autotools/amhello.bst         ] SUCCESS Waiting for the remote build to complete\r\n[00:00:04][5ddd4cd5][   build:autotools/amhello.bst         ] SUCCESS Running commands\r\n[--:--:--][5ddd4cd5][   build:autotools/amhello.bst         ] START   Caching artifact\r\n[00:00:00][5ddd4cd5][   build:autotools/amhello.bst         ] SUCCESS Caching artifact\r\n[00:00:04][5ddd4cd5][   build:autotools/amhello.bst         ] SUCCESS test/autotools-amhello/5ddd4cd5-build.99.log\r\n[00:00:04][        ][    main:core activity                 ] SUCCESS Build\r\n\r\nPipeline Summary\r\n    Total:       3\r\n    Session:     3\r\n    Fetch Queue: processed 1, skipped 2, failed 0 \r\n    Build Queue: processed 1, skipped 2, failed 0 \r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 shell --build autotools/amhello.bst --use-buildtree -- find . -mindepth 1 -exec stat -c %n::%Y {} ;\r\nProgram output was:\r\n./.bst-prepared::1643941228\r\n./.bstproject.yaml::1643941209\r\n./Makefile::1643941228\r\n./Makefile.am::1419947381\r\n./Makefile.in::1643941227\r\n./README::1419976385\r\n./aclocal.m4::1643941226\r\n./autom4te.cache::1321009871\r\n./autom4te.cache/output.0::1643941226\r\n./autom4te.cache/output.1::1643941227\r\n./autom4te.cache/requests::1643941228\r\n./autom4te.cache/traces.0::1643941226\r\n./autom4te.cache/traces.1::1643941227\r\n./build-time::1643941243\r\n./compile::1643941227\r\n./config-time::1643941228\r\n./config.h::1643941228\r\n./config.h.in::1643941228\r\n./config.log::1643941228\r\n./config.status::1643941228\r\n./configure::1643941226\r\n./configure.ac::1419947381\r\n./configure.lineno::1643941227\r\n./depcomp::1643941227\r\n./install-sh::1643941227\r\n./missing::1643941227\r\n./newfile.cfg::1643941209\r\n./src::1321009871\r\n./src/.deps::1321009871\r\n./src/.deps/main.Po::1643941243\r\n./src/Makefile::1643941228\r\n./src/Makefile.am::1419947381\r\n./src/Makefile.in::1643941227\r\n./src/hello::1643941243\r\n./src/main.c::1643941241\r\n./src/main.o::1643941243\r\n./stamp-h1::1643941228\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][5ddd4cd5][    main:autotools/amhello.bst         ] START   Staging dependencies at: /\r\n[00:00:00][5ddd4cd5][    main:autotools/amhello.bst         ] SUCCESS Staging dependencies at: /\r\n[--:--:--][5ddd4cd5][    main:autotools/amhello.bst         ] START   Integrating sandbox\r\n[00:00:00][5ddd4cd5][    main:autotools/amhello.bst         ] SUCCESS Integrating sandbox\r\n[--:--:--][5ddd4cd5][    main:autotools/amhello.bst         ] START   Staging sources\r\n[00:00:00][5ddd4cd5][    main:autotools/amhello.bst         ] SUCCESS Staging sources\r\n[--:--:--][5ddd4cd5][    main:autotools/amhello.bst         ] STATUS  Running command\r\n\r\n    find . -mindepth 1 -exec stat -c %n::%Y {} ;\r\n\r\n2022-02-04T02:20:46.438+0000 [1254:140234959738944] [buildboxcommon_casclient.cpp:95] [INFO] Setting d_maxBatchTotalSizeBytes = 4128768 bytes by default\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_workspace_build_content_0 shell --build autotools/amhello.bst --use-buildtree -- cat build-time\r\nProgram output was:\r\n1643941243\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:autotools/amhello.bst         ] START   Staging local files\r\n[00:00:00][        ][    main:autotools/amhello.bst         ] SUCCESS Staging local files\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][5ddd4cd5][    main:autotools/amhello.bst         ] START   Staging dependencies at: /\r\n[00:00:00][5ddd4cd5][    main:autotools/amhello.bst         ] SUCCESS Staging dependencies at: /\r\n[--:--:--][5ddd4cd5][    main:autotools/amhello.bst         ] START   Integrating sandbox\r\n[00:00:00][5ddd4cd5][    main:autotools/amhello.bst         ] SUCCESS Integrating sandbox\r\n[--:--:--][5ddd4cd5][    main:autotools/amhello.bst         ] START   Staging sources\r\n[00:00:00][5ddd4cd5][    main:autotools/amhello.bst         ] SUCCESS Staging sources\r\n[--:--:--][5ddd4cd5][    main:autotools/amhello.bst         ] STATUS  Running command\r\n\r\n    cat build-time\r\n\r\n2022-02-04T02:20:48.230+0000 [1329:140367466801216] [buildboxcommon_casclient.cpp:95] [INFO] Setting d_maxBatchTotalSizeBytes = 4128768 bytes by default\r\n\r\n________________________________________________________________________ ERROR at setup of test_workspace_build[time] ________________________________________________________________________\r\n\r\ndefault_thread_number = 1\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at teardown of test_fetch_build_checkout[git-strict] _________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n        assert has_no_unexpected_background_threads(default_thread_number)\r\n        yield\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:53: AssertionError\r\n------------------------------------------------------------------------------------ Captured stdout call ------------------------------------------------------------------------------------\r\nInitialized empty Git repository in /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/repo/.git/\r\n[master (root-commit) 2abde3f] Initial commit\r\n 1 file changed, 12 insertions(+)\r\n create mode 100644 usr/include/pony.h\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --no-verbose --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0 show --deps none --format %{state} build-test-git.bst\r\nProgram output was:\r\nfetch needed\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    1 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:build-test-git.bst            ] WARNING [unaliased-url]: git source at build-test-git.bst [line 3 column 2]: Use of unaliased source download URL: file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/repo\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    1 of 1 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0 build build-test-git.bst\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Build\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    1 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:build-test-git.bst            ] WARNING [unaliased-url]: git source at build-test-git.bst [line 3 column 2]: Use of unaliased source download URL: file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/repo\r\n[--:--:--][        ][    main:build-test-git.bst            ] STATUS  Running host command\r\n\r\n    /usr/bin/git --version\r\n\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    1 of 1 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Checking sources\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Checking sources\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][        ][    main:core activity                 ] START   Preparing work plan\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Preparing work plan\r\n\r\n    1 of 1 subtasks processed\r\n\r\n\r\nBuildStream Version 1.93.6+222.gebab0cb40\r\n    Session Start: Friday, 04-02-2022 at 02:21:00\r\n    Project:       test (/home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0)\r\n    Targets:       build-test-git.bst\r\n\r\nUser Configuration\r\n    Configuration File:      /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/buildstream.conf\r\n    Cache Directory:         /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache\r\n    Log Files:               /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/logs\r\n    Source Mirrors:          /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/sources\r\n    Build Area:              /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/build\r\n    Strict Build Plan:       Yes\r\n    Maximum Fetch Tasks:     10\r\n    Maximum Build Tasks:     4\r\n    Maximum Push Tasks:      4\r\n    Maximum Network Retries: 2\r\n\r\nProject: test\r\n\r\n    Project Options\r\n        arch:  x86-64\r\n        linux: 1\r\n\r\n    Element Plugins\r\n        import: core plugin\r\n\r\n    Source Plugins\r\n        git: core plugin\r\n\r\nPipeline\r\nfetch needed 29139f2488505d248ac32f22b7558d6a4e400b1b8ff378e39ea205ea8f2c5732 build-test-git.bst \r\n===============================================================================\r\n[--:--:--][29139f24][   fetch:build-test-git.bst            ] START   test/build-test-git/29139f24-fetch.99.log\r\n[--:--:--][29139f24][   fetch:build-test-git.bst            ] WARNING [unaliased-url]: git source at build-test-git.bst [line 3 column 2]: Use of unaliased source download URL: file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/repo\r\n[--:--:--][29139f24][   fetch:build-test-git.bst            ] START   Fetching from file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/repo\r\n[00:00:00][29139f24][   fetch:build-test-git.bst            ] SUCCESS Fetching from file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/repo\r\n[--:--:--][29139f24][   fetch:build-test-git.bst            ] STATUS  Running host command\r\n\r\n    /usr/bin/git show 2abde3f5dd1611de18c48ad51dc16457f5c47f55:.gitmodules\r\n\r\n[--:--:--][29139f24][   fetch:build-test-git.bst            ] STATUS  Running host command\r\n\r\n    /usr/bin/git branch --list master --contains 2abde3f5dd1611de18c48ad51dc16457f5c47f55\r\n\r\n[--:--:--][29139f24][   fetch:build-test-git.bst            ] START   Staging file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/repo\r\n[00:00:00][29139f24][   fetch:build-test-git.bst            ] SUCCESS Staging file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/repo\r\n[00:00:00][29139f24][   fetch:build-test-git.bst            ] SUCCESS test/build-test-git/29139f24-fetch.99.log\r\n[--:--:--][29139f24][   build:build-test-git.bst            ] START   test/build-test-git/29139f24-build.99.log\r\n[--:--:--][29139f24][   build:build-test-git.bst            ] START   Staging sources\r\n[00:00:00][29139f24][   build:build-test-git.bst            ] SUCCESS Staging sources\r\n[--:--:--][29139f24][   build:build-test-git.bst            ] START   Caching artifact\r\n[00:00:00][29139f24][   build:build-test-git.bst            ] SUCCESS Caching artifact\r\n[00:00:00][29139f24][   build:build-test-git.bst            ] SUCCESS test/build-test-git/29139f24-build.99.log\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Build\r\n\r\nPipeline Summary\r\n    Total:       1\r\n    Session:     1\r\n    Fetch Queue: processed 1, skipped 0, failed 0 \r\n    Build Queue: processed 1, skipped 0, failed 0 \r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --no-verbose --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0 show --deps none --format %{state} build-test-git.bst\r\nProgram output was:\r\ncached\r\n\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    1 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:build-test-git.bst            ] WARNING [unaliased-url]: git source at build-test-git.bst [line 3 column 2]: Use of unaliased source download URL: file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/repo\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    1 of 1 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n\r\nBuildStream exited with code 0 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0 artifact checkout build-test-git.bst --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/checkout\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    1 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[--:--:--][        ][    main:build-test-git.bst            ] WARNING [unaliased-url]: git source at build-test-git.bst [line 3 column 2]: Use of unaliased source download URL: file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/repo\r\n[--:--:--][        ][    main:build-test-git.bst            ] STATUS  Running host command\r\n\r\n    /usr/bin/git --version\r\n\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    1 of 1 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][29139f24][    main:build-test-git.bst            ] START   Staging dependencies\r\n[00:00:00][29139f24][    main:build-test-git.bst            ] SUCCESS Staging dependencies\r\n[--:--:--][29139f24][    main:build-test-git.bst            ] START   Integrating sandbox\r\n[00:00:00][29139f24][    main:build-test-git.bst            ] SUCCESS Integrating sandbox\r\n[--:--:--][29139f24][    main:build-test-git.bst            ] START   Checking out files in '/home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/checkout'\r\n[00:00:00][29139f24][    main:build-test-git.bst            ] SUCCESS Checking out files in '/home/testuser/buildstream/.tox/py310-nocover/tmp/test_fetch_build_checkout_git_0/cache/checkout'\r\n\r\n------------------------------------------------------------------------------------ Captured stderr call ------------------------------------------------------------------------------------\r\nhint: Using 'master' as the name for the initial branch. This default branch name\r\nhint: is subject to change. To configure the initial branch name to use in all\r\nhint: of your new repositories, which will suppress this warning, call:\r\nhint: \r\nhint: \tgit config --global init.defaultBranch <name>\r\nhint: \r\nhint: Names commonly chosen instead of 'master' are 'main', 'trunk' and\r\nhint: 'development'. The just-created branch can be renamed via this command:\r\nhint: \r\nhint: \tgit branch -m <name>\r\n________________________________________________________________ ERROR at setup of test_fetch_build_checkout[git-non-strict] _________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_fetch_build_checkout[bzr-strict] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________ ERROR at setup of test_fetch_build_checkout[bzr-non-strict] _________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_fetch_build_checkout[tar-strict] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________ ERROR at setup of test_fetch_build_checkout[tar-non-strict] _________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_fetch_build_checkout[zip-strict] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________ ERROR at setup of test_fetch_build_checkout[zip-non-strict] _________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_____________________________________________________________________________ ERROR at setup of test_fetch[git] ______________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_____________________________________________________________________________ ERROR at setup of test_fetch[bzr] ______________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_____________________________________________________________________________ ERROR at setup of test_fetch[tar] ______________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_____________________________________________________________________________ ERROR at setup of test_fetch[zip] ______________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_fetch_cross_junction[git-inline] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_______________________________________________________________ ERROR at setup of test_fetch_cross_junction[git-project.refs] ________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_fetch_cross_junction[bzr-inline] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_______________________________________________________________ ERROR at setup of test_fetch_cross_junction[bzr-project.refs] ________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_fetch_cross_junction[tar-inline] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_______________________________________________________________ ERROR at setup of test_fetch_cross_junction[tar-project.refs] ________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_fetch_cross_junction[zip-inline] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_______________________________________________________________ ERROR at setup of test_fetch_cross_junction[zip-project.refs] ________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________________ ERROR at setup of test_mirror_fetch[git] __________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________________ ERROR at setup of test_mirror_fetch[bzr] __________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________________ ERROR at setup of test_mirror_fetch[tar] __________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________________ ERROR at setup of test_mirror_fetch[zip] __________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_mirror_fetch_upstream_absent[git] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_mirror_fetch_upstream_absent[bzr] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_mirror_fetch_upstream_absent[tar] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_mirror_fetch_upstream_absent[zip] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_mirror_from_includes[git] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_mirror_from_includes[bzr] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_mirror_from_includes[tar] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_mirror_from_includes[zip] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_mirror_junction_from_includes[git] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_mirror_junction_from_includes[bzr] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_mirror_junction_from_includes[tar] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_mirror_junction_from_includes[zip] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_mirror_track_upstream_present[git] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_mirror_track_upstream_present[bzr] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_mirror_track_upstream_present[tar] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_mirror_track_upstream_present[zip] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_mirror_track_upstream_absent[git] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_mirror_track_upstream_absent[bzr] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_mirror_track_upstream_absent[tar] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_mirror_track_upstream_absent[zip] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n___________________________________________________________________ ERROR at setup of test_deterministic_source_umask[git] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n___________________________________________________________________ ERROR at setup of test_deterministic_source_umask[bzr] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n___________________________________________________________________ ERROR at setup of test_deterministic_source_umask[tar] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n___________________________________________________________________ ERROR at setup of test_deterministic_source_umask[zip] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________________ ERROR at setup of test_track[git-inline] __________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_______________________________________________________________________ ERROR at setup of test_track[git-project.refs] _______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________________ ERROR at setup of test_track[bzr-inline] __________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_______________________________________________________________________ ERROR at setup of test_track[bzr-project.refs] _______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________________ ERROR at setup of test_track[tar-inline] __________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_______________________________________________________________________ ERROR at setup of test_track[tar-project.refs] _______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________________ ERROR at setup of test_track[zip-inline] __________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_______________________________________________________________________ ERROR at setup of test_track[zip-project.refs] _______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_recurse[git-1] _________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_recurse[git-10] ________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_recurse[bzr-1] _________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_recurse[bzr-10] ________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_recurse[tar-1] _________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_recurse[tar-10] ________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_recurse[zip-1] _________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_recurse[zip-10] ________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_track_recurse_except[git] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_track_recurse_except[bzr] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_track_recurse_except[tar] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_track_recurse_except[zip] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_____________________________________________________________________ ERROR at setup of test_cross_junction[git-inline] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_cross_junction[git-project.refs] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_____________________________________________________________________ ERROR at setup of test_cross_junction[bzr-inline] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_cross_junction[bzr-project.refs] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_____________________________________________________________________ ERROR at setup of test_cross_junction[tar-inline] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_cross_junction[tar-project.refs] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_____________________________________________________________________ ERROR at setup of test_cross_junction[zip-inline] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n__________________________________________________________________ ERROR at setup of test_cross_junction[zip-project.refs] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_track_include[git-inline] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n___________________________________________________________________ ERROR at setup of test_track_include[git-project.refs] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_track_include[bzr-inline] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n___________________________________________________________________ ERROR at setup of test_track_include[bzr-project.refs] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_track_include[tar-inline] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n___________________________________________________________________ ERROR at setup of test_track_include[tar-project.refs] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________ ERROR at setup of test_track_include[zip-inline] ______________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n___________________________________________________________________ ERROR at setup of test_track_include[zip-project.refs] ___________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_track_include_junction[git-inline] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________ ERROR at setup of test_track_include_junction[git-project.refs] _______________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_track_include_junction[bzr-inline] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________ ERROR at setup of test_track_include_junction[bzr-project.refs] _______________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_track_include_junction[tar-inline] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________ ERROR at setup of test_track_include_junction[tar-project.refs] _______________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_track_include_junction[zip-inline] __________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________ ERROR at setup of test_track_include_junction[zip-project.refs] _______________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_track_junction_included[git-inline] _________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________ ERROR at setup of test_track_junction_included[git-project.refs] ______________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_track_junction_included[bzr-inline] _________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________ ERROR at setup of test_track_junction_included[bzr-project.refs] ______________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_track_junction_included[tar-inline] _________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________ ERROR at setup of test_track_junction_included[tar-project.refs] ______________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n_________________________________________________________________ ERROR at setup of test_track_junction_included[zip-inline] _________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________ ERROR at setup of test_track_junction_included[zip-project.refs] ______________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________ ERROR at setup of test_cross_junction_multiple_projects[git] ________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________ ERROR at setup of test_cross_junction_multiple_projects[bzr] ________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________ ERROR at setup of test_cross_junction_multiple_projects[tar] ________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________ ERROR at setup of test_cross_junction_multiple_projects[zip] ________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_exceptions[git] ________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_exceptions[bzr] ________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_exceptions[tar] ________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n________________________________________________________________________ ERROR at setup of test_track_exceptions[zip] ________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________________ ERROR at setup of test_open[git] ______________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________________ ERROR at setup of test_open[bzr] ______________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________________ ERROR at setup of test_open[tar] ______________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n______________________________________________________________________________ ERROR at setup of test_open[zip] ______________________________________________________________________________\r\n\r\ndefault_thread_number = 5\r\n\r\n    @pytest.fixture(autouse=True)\r\n    def thread_check(default_thread_number):\r\n>       assert has_no_unexpected_background_threads(default_thread_number)\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/_fixtures.py:51: AssertionError\r\n========================================================================================== FAILURES ==========================================================================================\r\n________________________________________________________________________________ test_remote_autotools_build _________________________________________________________________________________\r\n\r\ncli = <buildstream.testing.runcli.CliRemote object at 0x7f9931eb9330>, datafiles = local('/home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0')\r\nremote_services = <tests.conftest.RemoteServices object at 0x7f9943129630>\r\n\r\n    @pytest.mark.datafiles(DATA_DIR)\r\n    def test_remote_autotools_build(cli, datafiles, remote_services):\r\n        project = str(datafiles)\r\n        checkout = os.path.join(cli.directory, \"checkout\")\r\n        element_name = \"autotools/amhello.bst\"\r\n    \r\n        services = cli.ensure_services()\r\n        assert set(services) == set([\"action-cache\", \"execution\", \"storage\"])\r\n    \r\n        # Enable remote cache and remove explicit remote execution CAS configuration.\r\n        config_without_remote_cache = copy.deepcopy(cli.config)\r\n        cli.configure({\"cache\": {\"storage-service\": {\"url\": remote_services.storage_service}}})\r\n        del cli.config[\"remote-execution\"][\"storage-service\"]\r\n        config_with_remote_cache = cli.config\r\n    \r\n        # Build element with remote execution.\r\n        result = cli.run(project=project, args=[\"build\", element_name])\r\n>       result.assert_success()\r\n\r\ntests/remoteexecution/remotecache.py:37: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <buildstream.testing.runcli.Result object at 0x7f99400aa2c0>, fail_message = ''\r\n\r\n    def assert_success(self, fail_message=\"\"):\r\n>       assert self.exit_code == 0, fail_message\r\nE       AssertionError\r\n\r\n.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/testing/runcli.py:107: AssertionError\r\n------------------------------------------------------------------------------------ Captured stdout call ------------------------------------------------------------------------------------\r\nBuildStream exited with code -1 for invocation:\r\n\tbst --no-colors --config /home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0/cache/buildstream.conf --directory /home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0 build autotools/amhello.bst\r\nProgram stderr was:\r\n[--:--:--][        ][    main:core activity                 ] START   Build\r\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\r\n\r\n    3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n\r\n    3 of 3 subtasks processed\r\n\r\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[--:--:--][        ][    main:core activity                 ] START   Checking sources\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Checking sources\r\n[--:--:--][        ][    main:core activity                 ] START   Query cache\r\n[--:--:--][456b61e8][cache-query:base/base-alpine.bst          ] START   test/base-base-alpine/456b61e8-cache-query.99.log\r\n[00:00:00][456b61e8][cache-query:base/base-alpine.bst          ] SUCCESS test/base-base-alpine/456b61e8-cache-query.99.log\r\n[--:--:--][7a43f178][cache-query:base.bst                      ] START   test/base/7a43f178-cache-query.99.log\r\n[00:00:00][7a43f178][cache-query:base.bst                      ] SUCCESS test/base/7a43f178-cache-query.99.log\r\n[--:--:--][c9c40f65][cache-query:autotools/amhello.bst         ] START   test/autotools-amhello/c9c40f65-cache-query.99.log\r\n[00:00:00][c9c40f65][cache-query:autotools/amhello.bst         ] SUCCESS test/autotools-amhello/c9c40f65-cache-query.99.log\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Query cache\r\n[--:--:--][        ][    main:core activity                 ] START   Preparing work plan\r\n[00:00:00][        ][    main:core activity                 ] SUCCESS Preparing work plan\r\n\r\n    3 of 3 subtasks processed\r\n\r\n\r\nBuildStream Version 1.93.6+222.gebab0cb40\r\n    Session Start: Friday, 04-02-2022 at 02:18:58\r\n    Project:       test (/home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0)\r\n    Targets:       autotools/amhello.bst\r\n\r\nUser Configuration\r\n    Configuration File:      /home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0/cache/buildstream.conf\r\n    Cache Directory:         /home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0/cache\r\n    Log Files:               /home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0/cache/logs\r\n    Source Mirrors:          /home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0/cache/sources\r\n    Build Area:              /home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0/cache/build\r\n    Strict Build Plan:       Yes\r\n    Maximum Fetch Tasks:     10\r\n    Maximum Build Tasks:     4\r\n    Maximum Push Tasks:      4\r\n    Maximum Network Retries: 2\r\n    Cache Storage Service:   http://localhost:50051\r\n\r\nRemote Execution Configuration\r\n    Execution Service:    http://localhost:50051\r\n    Storage Service:      http://localhost:50051\r\n    Action Cache Service: http://localhost:50051\r\n\r\nProject: test\r\n\r\n    Project Options\r\n        arch:  x86-64\r\n        linux: 1\r\n\r\n    Element Plugins\r\n        autotools: core plugin\r\n        stack:     core plugin\r\n        import:    core plugin\r\n\r\n    Source Plugins\r\n        tar: core plugin\r\n\r\nPipeline\r\nfetch needed 456b61e83c339afb408d03df9db50efdeb0962ffea3cce6a2291a89a89248443 base/base-alpine.bst \r\n     waiting 7a43f178642961ce8afe6aa7dfe9b0978aecc69b0f6b367a690b90e3bc335cfb base.bst \r\nfetch needed c9c40f6563b468bce646b1398df1cc5e1fb1d90a179f8da42728819d04293412 autotools/amhello.bst \r\n===============================================================================\r\n[--:--:--][456b61e8][   fetch:base/base-alpine.bst          ] START   test/base-base-alpine/456b61e8-fetch.99.log\r\n[--:--:--][7a43f178][   fetch:base.bst                      ] START   test/base/7a43f178-fetch.99.log\r\n[--:--:--][c9c40f65][   fetch:autotools/amhello.bst         ] START   test/autotools-amhello/c9c40f65-fetch.99.log\r\n[--:--:--][456b61e8][   fetch:base/base-alpine.bst          ] START   Fetching https://bst-integration-test-images.ams3.cdn.digitaloceanspaces.com/integration-tests-base.v1.x86_64.tar.xz\r\n[--:--:--][c9c40f65][   fetch:autotools/amhello.bst         ] START   Fetching file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0/files/amhello.tar.gz\r\n[00:00:00][7a43f178][   fetch:base.bst                      ] SUCCESS test/base/7a43f178-fetch.99.log\r\n[00:00:00][c9c40f65][   fetch:autotools/amhello.bst         ] SUCCESS Fetching file:///home/testuser/buildstream/.tox/py310-nocover/tmp/test_remote_autotools_build0/files/amhello.tar.gz\r\n[00:00:00][c9c40f65][   fetch:autotools/amhello.bst         ] SUCCESS test/autotools-amhello/c9c40f65-fetch.99.log\r\n[00:00:11][456b61e8][   fetch:base/base-alpine.bst          ] SUCCESS Fetching https://bst-integration-test-images.ams3.cdn.digitaloceanspaces.com/integration-tests-base.v1.x86_64.tar.xz\r\n[00:00:17][456b61e8][   fetch:base/base-alpine.bst          ] BUG     Fetch\r\n\r\n    An unhandled exception occured:\r\n    \r\n    Traceback (most recent call last):\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_scheduler/jobs/job.py\", line 441, in child_action\r\n        result = self.child_process()  # pylint: disable=assignment-from-no-return\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 92, in child_process\r\n        return self._action_cb(self._element)\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_scheduler/queues/fetchqueue.py\", line 77, in _fetch_not_original\r\n        element._fetch(fetch_original=False)\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/element.py\", line 2182, in _fetch\r\n        self.__sources.fetch()\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_elementsources.py\", line 225, in fetch\r\n        self.fetch_sources()\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_elementsources.py\", line 254, in fetch_sources\r\n        self._fetch_source(source)\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_elementsources.py\", line 438, in _fetch_source\r\n        self._sourcecache.commit(source)\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_sourcecache.py\", line 80, in commit\r\n        vdir.import_files(tmpdir, can_link=True)\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/storage/_casbaseddirectory.py\", line 535, in import_files\r\n        digest = self.cas_cache.import_directory(external_pathspec, properties=properties)\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_cas/cascache.py\", line 426, in import_directory\r\n        response = local_cas.CaptureTree(request)\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/grpc/_channel.py\", line 946, in __call__\r\n        return _end_unary_response_blocking(state, call, False, None)\r\n      File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/grpc/_channel.py\", line 849, in _end_unary_response_blocking\r\n        raise _InactiveRpcError(state)\r\n    grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:\r\n    \tstatus = StatusCode.UNKNOWN\r\n    \tdetails = \"Unexpected error in RPC handling\"\r\n    \tdebug_error_string = \"{\"created\":\"@1643941156.370521100\",\"description\":\"Error received from peer unix:/tmp/buildstreamwqzlncyy/cas/casserver-pq3n8f70.sock\",\"file\":\"src/core/lib/surface/call.cc\",\"file_line\":1066,\"grpc_message\":\"Unexpected error in RPC handling\",\"grpc_status\":2}\"\r\n    >\r\n\r\n[00:00:17][        ][    main:core activity                 ] FAILURE Build\r\n\r\nFailure Summary\r\n    base/base-alpine.bst:\r\n    [00:00:17][456b61e8][   fetch:base/base-alpine.bst          ] BUG     Fetch\r\n\r\n        An unhandled exception occured:\r\n    \r\n        Traceback (most recent call last):\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_scheduler/jobs/job.py\", line 441, in child_action\r\n            result = self.child_process()  # pylint: disable=assignment-from-no-return\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 92, in child_process\r\n            return self._action_cb(self._element)\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_scheduler/queues/fetchqueue.py\", line 77, in _fetch_not_original\r\n            element._fetch(fetch_original=False)\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/element.py\", line 2182, in _fetch\r\n            self.__sources.fetch()\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_elementsources.py\", line 225, in fetch\r\n            self.fetch_sources()\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_elementsources.py\", line 254, in fetch_sources\r\n            self._fetch_source(source)\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_elementsources.py\", line 438, in _fetch_source\r\n            self._sourcecache.commit(source)\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_sourcecache.py\", line 80, in commit\r\n            vdir.import_files(tmpdir, can_link=True)\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/storage/_casbaseddirectory.py\", line 535, in import_files\r\n            digest = self.cas_cache.import_directory(external_pathspec, properties=properties)\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/buildstream/_cas/cascache.py\", line 426, in import_directory\r\n            response = local_cas.CaptureTree(request)\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/grpc/_channel.py\", line 946, in __call__\r\n            return _end_unary_response_blocking(state, call, False, None)\r\n          File \"/home/testuser/buildstream/.tox/py310-nocover/lib64/python3.10/site-packages/grpc/_channel.py\", line 849, in _end_unary_response_blocking\r\n            raise _InactiveRpcError(state)\r\n        grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:\r\n        \tstatus = StatusCode.UNKNOWN\r\n        \tdetails = \"Unexpected error in RPC handling\"\r\n        \tdebug_error_string = \"{\"created\":\"@1643941156.370521100\",\"description\":\"Error received from peer unix:/tmp/buildstreamwqzlncyy/cas/casserver-pq3n8f70.sock\",\"file\":\"src/core/lib/surface/call.cc\",\"file_line\":1066,\"grpc_message\":\"Unexpected error in RPC handling\",\"grpc_status\":2}\"\r\n        >\r\n\r\nPipeline Summary\r\n    Total:       3\r\n    Session:     3\r\n    Fetch Queue: processed 2, skipped 0, failed 1 \r\n    Build Queue: processed 0, skipped 0, failed 0 \r\n\r\n\r\n\r\n====================================================================================== warnings summary ======================================================================================\r\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1582/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1465", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1465/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1465/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1465/events", "html_url": "https://github.com/apache/buildstream/issues/1465", "id": 837004040, "node_id": "MDU6SXNzdWU4MzcwMDQwNDA=", "number": 1465, "title": "Output directory structure had no digest attached.", "user": {"login": "abderrahim", "id": 100109, "node_id": "MDQ6VXNlcjEwMDEwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/100109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abderrahim", "html_url": "https://github.com/abderrahim", "followers_url": "https://api.github.com/users/abderrahim/followers", "following_url": "https://api.github.com/users/abderrahim/following{/other_user}", "gists_url": "https://api.github.com/users/abderrahim/gists{/gist_id}", "starred_url": "https://api.github.com/users/abderrahim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abderrahim/subscriptions", "organizations_url": "https://api.github.com/users/abderrahim/orgs", "repos_url": "https://api.github.com/users/abderrahim/repos", "events_url": "https://api.github.com/users/abderrahim/events{/privacy}", "received_events_url": "https://api.github.com/users/abderrahim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/3", "html_url": "https://github.com/apache/buildstream/milestone/3", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/3/labels", "id": 7687468, "node_id": "MI_kwDOE_tNMc4AdU0s", "number": 3, "title": "BuildStream 2.0 stable blockers", "description": "This milestone is intended to record sensible blockers to an actual 2.0 stable release of BuildStream.\r\n", "creator": {"login": "gtristan", "id": 1928351, "node_id": "MDQ6VXNlcjE5MjgzNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1928351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtristan", "html_url": "https://github.com/gtristan", "followers_url": "https://api.github.com/users/gtristan/followers", "following_url": "https://api.github.com/users/gtristan/following{/other_user}", "gists_url": "https://api.github.com/users/gtristan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtristan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtristan/subscriptions", "organizations_url": "https://api.github.com/users/gtristan/orgs", "repos_url": "https://api.github.com/users/gtristan/repos", "events_url": "https://api.github.com/users/gtristan/events{/privacy}", "received_events_url": "https://api.github.com/users/gtristan/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "open", "created_at": "2022-02-17T04:49:22Z", "updated_at": "2022-10-11T08:10:47Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2021-03-21T07:12:22Z", "updated_at": "2022-07-05T19:06:10Z", "closed_at": "2022-07-05T19:06:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "So I'm seeing this failure sporadically, it doesn't seem to be reproducible \u2013 it goes away when I retry \u2013 but here is what I get.\r\n```\r\n[00:00:46] FAILURE core/gnome-session.bst: Running commands\r\n[00:00:46] FAILURE [18a20e19] core/gnome-session.bst: Integrating sandbox\r\n[00:01:13] FAILURE [18a20e19] core/gnome-session.bst: Output directory structure had no digest attached.\r\n```\r\n\r\n The rest of the log ([18a20e19-build.2525812.log.txt](https://github.com/apache/buildstream/files/6176986/18a20e19-build.2525812.log.txt)) doesn't show anything suspicious.\r\n\r\nAs I'm filing this, I noticed it happens more often when the system load is very high (it could be a coincidence though).", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1465/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1465/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1461", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1461/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1461/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1461/events", "html_url": "https://github.com/apache/buildstream/issues/1461", "id": 836305124, "node_id": "MDU6SXNzdWU4MzYzMDUxMjQ=", "number": 1461, "title": "`bst artifact delete` doesn't remove cached failed build", "user": {"login": "abderrahim", "id": 100109, "node_id": "MDQ6VXNlcjEwMDEwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/100109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abderrahim", "html_url": "https://github.com/abderrahim", "followers_url": "https://api.github.com/users/abderrahim/followers", "following_url": "https://api.github.com/users/abderrahim/following{/other_user}", "gists_url": "https://api.github.com/users/abderrahim/gists{/gist_id}", "starred_url": "https://api.github.com/users/abderrahim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abderrahim/subscriptions", "organizations_url": "https://api.github.com/users/abderrahim/orgs", "repos_url": "https://api.github.com/users/abderrahim/repos", "events_url": "https://api.github.com/users/abderrahim/events{/privacy}", "received_events_url": "https://api.github.com/users/abderrahim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/3", "html_url": "https://github.com/apache/buildstream/milestone/3", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/3/labels", "id": 7687468, "node_id": "MI_kwDOE_tNMc4AdU0s", "number": 3, "title": "BuildStream 2.0 stable blockers", "description": "This milestone is intended to record sensible blockers to an actual 2.0 stable release of BuildStream.\r\n", "creator": {"login": "gtristan", "id": 1928351, "node_id": "MDQ6VXNlcjE5MjgzNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1928351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtristan", "html_url": "https://github.com/gtristan", "followers_url": "https://api.github.com/users/gtristan/followers", "following_url": "https://api.github.com/users/gtristan/following{/other_user}", "gists_url": "https://api.github.com/users/gtristan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtristan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtristan/subscriptions", "organizations_url": "https://api.github.com/users/gtristan/orgs", "repos_url": "https://api.github.com/users/gtristan/repos", "events_url": "https://api.github.com/users/gtristan/events{/privacy}", "received_events_url": "https://api.github.com/users/gtristan/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "open", "created_at": "2022-02-17T04:49:22Z", "updated_at": "2022-10-11T08:10:47Z", "due_on": null, "closed_at": null}, "comments": 3, "created_at": "2021-03-19T19:46:24Z", "updated_at": "2022-07-22T04:40:26Z", "closed_at": "2022-07-22T04:38:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "So I'm trying to force a rebuild, so I delete the artifact. bst thinks the artifact is no longer there:\r\n```\r\n> bst artifact delete core-deps/qemu.bst\r\n[09:58:48][        ][    main:core activity                 ] START   Loading elements\r\n[09:58:49][        ][    main:core activity                 ] SUCCESS Loading elements\r\n[09:58:49][        ][    main:core activity                 ] START   Resolving elements\r\n[09:58:49][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n[09:58:49][        ][    main:core activity                 ] START   Initializing remote caches\r\n[09:58:49][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[09:58:49][        ][    main:core activity                 ] START   Initializing remote caches\r\n[09:58:49][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[09:58:49][        ][    main:core activity                 ] START   Initializing remote caches\r\n[09:58:49][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[09:58:49][        ][    main:core activity                 ] START   Resolving cached state\r\n[09:58:51][        ][    main:core activity                 ] SUCCESS Resolving cached state\r\n[09:58:51][        ][    main:core activity                 ] WARNING Could not find ref 'gnome/core-deps-qemu/1f8cae77deb53f389a3270906f51a7ee74728d2d1e2054b57430600bf4a14d04'\r\n[09:58:51][        ][    main:core activity                 ] WARNING Could not find ref 'gnome/core-deps-qemu/3cc7d21a81a42d813e870960a0aca98f8ad23b77a55ca8bc42f3e90a06a3d235'\r\n[09:58:51][        ][    main:core activity                 ] INFO    No artifacts were removed\r\n[09:58:52][        ][    main:core activity                 ] START   Terminating buildbox-casd\r\n[09:58:53][        ][    main:core activity                 ] SUCCESS Terminating buildbox-casd\r\n```\r\nyet trying to build again, I'm presented with the cached failure:\r\n```\r\n> bst build --ignore-project-artifact-remotes core-deps/qemu.bst\r\n[09:59:55][        ][    main:core activity                 ] START   Build\r\n[09:59:55][        ][    main:core activity                 ] START   Loading elements\r\n[09:59:56][        ][    main:core activity                 ] SUCCESS Loading elements\r\n[09:59:56][        ][    main:core activity                 ] START   Resolving elements\r\n[09:59:56][        ][    main:core activity                 ] SUCCESS Resolving elements\r\n[09:59:56][        ][    main:core activity                 ] START   Initializing remote caches\r\n[09:59:56][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[09:59:56][        ][    main:core activity                 ] START   Initializing remote caches\r\n[09:59:56][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[09:59:56][        ][    main:core activity                 ] START   Initializing remote caches\r\n[09:59:56][        ][    main:core activity                 ] SUCCESS Initializing remote caches\r\n[09:59:56][        ][    main:core activity                 ] START   Resolving cached state\r\n[09:59:58][        ][    main:core activity                 ] SUCCESS Resolving cached state\r\n[09:59:58][        ][    main:core activity                 ] START   Checking sources\r\n[09:59:58][        ][    main:core activity                 ] SUCCESS Checking sources\r\n[09:59:58][        ][    main:core activity                 ] START   Preparing work plan\r\n[09:59:58][        ][    main:core activity                 ] SUCCESS Preparing work plan\r\n\r\nBuildStream Version 1.93.6+0.g0ce60336e.dirty\r\n    Session Start: Friday, 19-03-2021 at 09:59:58\r\n    Project:       gnome (/home/abderrahim/Projects/gbm-bst2)\r\n    Targets:       core-deps/qemu.bst\r\n\r\nUser Configuration\r\n    Configuration File:      /home/abderrahim/.config/buildstream2.conf\r\n    Cache Directory:         /home/abderrahim/.cache/buildstream\r\n    Log Files:               /home/abderrahim/.cache/buildstream/logs\r\n    Source Mirrors:          /data/bstsource\r\n    Build Area:              /home/abderrahim/.cache/buildstream/build\r\n    Strict Build Plan:       No\r\n    Maximum Fetch Tasks:     10\r\n    Maximum Build Tasks:     2\r\n    Maximum Push Tasks:      4\r\n    Maximum Network Retries: 2\r\n\r\nProject: gnome\r\n\r\n    Project Options\r\n        arch:    x86_64\r\n        toolbox: 0\r\n\r\n    Element Plugins\r\n        junction:  core plugin\r\n        autotools: core plugin\r\n        meson:     python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n\r\n    Source Plugins\r\n        workspace: core plugin\r\n        tar:       core plugin\r\n        git_tag:   python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n        local:     core plugin\r\n\r\nProject: freedesktop-sdk\r\n    Junction path: freedesktop-sdk.bst\r\n    Loaded by:     project.conf [line 320 column 4]\r\n\r\n    Project Options\r\n        bootstrap_build_arch: x86_64\r\n        import_bootstrap:     0\r\n        pipewire:             0\r\n        snap_grade:           devel\r\n        target_arch:          x86_64\r\n\r\n    Element Plugins\r\n        stack:            core plugin\r\n        manual:           core plugin\r\n        filter:           core plugin\r\n        import:           core plugin\r\n        autotools:        core plugin\r\n        script:           core plugin\r\n        pip:              python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n        distutils:        python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n        meson:            python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n        cmake:            python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n        make:             python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n        collect_manifest: python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n        makemaker:        python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n\r\n    Source Plugins\r\n        git_tag: python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n        ostree:  python package 'bst-plugins-experimental 1.93.4' at: /home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages\r\n        local:   core plugin\r\n        patch:   core plugin\r\n        tar:     core plugin\r\n        zip:     core plugin\r\n\r\nPipeline\r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:bootstrap/build/base-sdk/image-x86_64.bst \r\n      cached b52cb139ee938204fa8201969952e639222898d6f49d9117334b6a9321369ec7 freedesktop-sdk.bst:bootstrap/build/base-sdk/filtered.bst \r\n      cached f0daa6fca6ff2f904b68bd915cd6bbab09b8dd2b84fac31c57049ada871c0524 freedesktop-sdk.bst:bootstrap/build/base-sdk/symlinks.bst \r\n      cached 5035da8939c311e9eb585d86f6f4b3749751ca17a6e72af4f8ee5299de03f43b freedesktop-sdk.bst:bootstrap/build/base-sdk.bst \r\n      cached a282914586a2bdc576f9eec4cbe28a90625a48f0292713c486a9d8da87552218 freedesktop-sdk.bst:bootstrap/gnu-config.bst \r\n      cached 56d4220b1993e5e153516b3e4cc565eb84a454b0ffdd8d1d63e8d3c581c3eba5 freedesktop-sdk.bst:bootstrap/linux-headers.bst \r\n      cached 018b971428a63af93163f844663e34c166c121848731e46586f6a7cfcb37cc38 freedesktop-sdk.bst:bootstrap/symlinks.bst \r\n      cached 16446b9b0114e51bbef10064a48db7df6ad2f4e4aa0681d882376762d261fb0e freedesktop-sdk.bst:bootstrap/build/dwz-build.bst \r\n      cached b1c810c7ee00d9e2beccdda1fc4d00042b1a92f05cebffb065f9d08952cbd2df freedesktop-sdk.bst:bootstrap/build/tools-lib-path.bst \r\n      cached ac00b7fdb551e53d3950a5f5b18140a75df815b875d9801d23414248f8cf0346 freedesktop-sdk.bst:bootstrap/build/elfutils-build.bst \r\n      cached bd532dd09e7f9bf7e1ae9028d40e39350319f8dbb636d46834c0f5df97a88a5a freedesktop-sdk.bst:bootstrap/build/file-stage1.bst \r\n      cached 3029a07ba6032960b1bef31dc98f48af28396edb04558d31c0dae0a5cf015b7c freedesktop-sdk.bst:bootstrap/build/debugedit-build.bst \r\n      cached 108daff357c2e6e7e50b1a395047e731fe719171f509724e3958cd3fbf63a7d1 freedesktop-sdk.bst:bootstrap/build/stripper.bst \r\n      cached cddf3953db5cac491db50abf13411d46b8420b8b95edd3cd1d45c0cdd8216af4 freedesktop-sdk.bst:bootstrap/build/debug-utils.bst \r\n      cached e0db66480a2bdfc7025ac76d37f55859cc0cd07e1839ec0146276c368ab4afb2 freedesktop-sdk.bst:bootstrap/build/binutils-stage1.bst \r\n      cached a6c2898a5931b1d82ee05368e0c9514b06cd87e18cf9e13f0b278ac34e67510d freedesktop-sdk.bst:bootstrap/build/gcc-stage1.bst \r\n      cached db045fa087556b88b4c7ad854932c48f1e7913fb9496ba77a54138c6c2ba2322 freedesktop-sdk.bst:bootstrap/glibc.bst \r\n      cached 6afa4a3334b053b144ddebdb8f71355f613d23045117497ec5aef8be4d5c2c6f freedesktop-sdk.bst:bootstrap/build/gcc-stage2.bst \r\n      cached 9bbfc83aca8eac0a3536c1a29e48d9ed80d40a9b345c02d2cc9cbc17485da841 freedesktop-sdk.bst:bootstrap/attr.bst \r\n      cached b782e0f35afc92b19dafcac99320c070e800ac5313ec00a44cc287a6999389e8 freedesktop-sdk.bst:bootstrap/acl.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:bootstrap/build/ncurses-stage1.bst \r\n      cached f2d38bdcdd888d19d9bbd3432a3658a85c13b97fe543bde3b8eaba9d035a2b88 freedesktop-sdk.bst:bootstrap/ncurses.bst \r\n      cached 3eeddbe627a0a4af342d3a4b041cea712e1b0017b95422f1e656b5b9f3c4873c freedesktop-sdk.bst:bootstrap/readline.bst \r\n      cached a77eccd61dd4d9a38c4e140755de7fc6c19ef26cab89639fa22548a835caa78f freedesktop-sdk.bst:bootstrap/bash.bst \r\n      cached d076ec2d246f7cd8c3a1cedcb113d4c40bd40043a855b94d4753ffcee638a767 freedesktop-sdk.bst:bootstrap/zlib.bst \r\n      cached 808e1ce4d8c9954f923cd4a7d46911019cfb0602981858c45e8b4dd134564aae freedesktop-sdk.bst:bootstrap/binutils-build-deps.bst \r\n      cached 225cc609339baf0c3b18ca9f4b0f4ec032e41cc580eaa5dd968ae30a1657bb7b freedesktop-sdk.bst:bootstrap/binutils.bst \r\n      cached 991e47d2ecc0dbea85a54e6bcec6330860ad65669a3aa8f691261f79bb0bced4 freedesktop-sdk.bst:bootstrap/bzip2.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:bootstrap/build/coreutils-manpages.bst \r\n      cached 2a4c84b4dc1d93ab72f8929f4f840c196c0fbdb91b42301795a2bca233e600b0 freedesktop-sdk.bst:bootstrap/coreutils.bst \r\n      cached 2cd58f9619efd769f4edfcee3506c5f447a99a79ec6b2b27178233732ba26c39 freedesktop-sdk.bst:bootstrap/elfutils.bst \r\n      cached 081f7f0c06594cebb2cea079d917565196352ba0a898db3f7cdaded4b46b1694 freedesktop-sdk.bst:bootstrap/file.bst \r\n      cached 7f470f59da0337d1ef43610b29ab43b3d46ab82e218a40e8eac69031aae09ec4 freedesktop-sdk.bst:bootstrap/openssl.bst \r\n      cached ab32862520d9c8d74917cdf7861c9fcaaec719f6246fca25eca5ce877e296ea9 freedesktop-sdk.bst:bootstrap/popt.bst \r\n      cached b8e920603b5d06ace5638a06c7a44524b1c2a231d06342c60fbfce42dfd1c985 freedesktop-sdk.bst:bootstrap/debugedit.bst \r\n      cached 8d321988e02ffeaad3f7e2aad9a0c3b86626d41c93ce50fea57ef01857495786 freedesktop-sdk.bst:bootstrap/diffutils.bst \r\n      cached 8d109405af57a5898862eb92069511272b06ec649f215effdc9c7587c917de56 freedesktop-sdk.bst:bootstrap/dwz.bst \r\n      cached b41358d37806166ace48160bb18e80c1deea94a3ebda36eb381f0813aa8c01fc freedesktop-sdk.bst:bootstrap/findutils.bst \r\n      cached 79eb367acdf6ddfac20666055b35c355f271fc0b8a618299c7fe3020246ead1c freedesktop-sdk.bst:bootstrap/gawk.bst \r\n      cached e37aedd650408875b7ca57cf62af910db6ea59cd3753d9a54422c7a4bc69e287 freedesktop-sdk.bst:bootstrap/gcc.bst \r\n      cached aa5f7fbfa8800133678d265b2f14bf6518fd590578b6580011345053c1acbfc5 freedesktop-sdk.bst:bootstrap/pcre.bst \r\n      cached 0fbffd1bf8557dc738299760283acf8ed70aaa2c6cb723f46e920405d5f3f381 freedesktop-sdk.bst:bootstrap/grep.bst \r\n      cached 2bf37cd0fbc39413b1ac34be1428cf1ea4996ff9fcaec6fb27dab7413e5bcf2c freedesktop-sdk.bst:bootstrap/make.bst \r\n      cached f99a6df22e6e1d2c92f80c8872e1705128761002a75e2691a4b51dc08fce320a freedesktop-sdk.bst:bootstrap/sed.bst \r\n      cached f8b6727ea6192b4c40b316ac1b27bbd506e741a5a3834520e3dba02e8518f4ca freedesktop-sdk.bst:bootstrap/xz.bst \r\n      cached 1d53b537a85e1fa8d1ec3a510bc399f034ff5420cf1de5125ef5f23477934143 freedesktop-sdk.bst:bootstrap/stripper.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:bootstrap/build/glibc-stage1.bst \r\n      cached 4d9d3b387678fe91c0f2a2de2f2897de7974d5de5c75f11dbbf2fc4de70c2e58 freedesktop-sdk.bst:bootstrap/utf-locale.bst \r\n      cached 50a92123cf7cb43116a95cbe6dfe9060d49da9dcce3608cce99a84c8e71b3926 freedesktop-sdk.bst:bootstrap/bootstrap.bst \r\n      cached 76bb2103927a69216220c67fc6715c55872026d9102a1a1631c06fda949e1957 freedesktop-sdk.bst:bootstrap-import.bst \r\n      cached a8589cace3d858be40200bd308719c403102febcd93f79b96047a98a47c9c2fb freedesktop-sdk.bst:components/perl.bst \r\n      cached f4c3a3ac35a7373b50a8cdca5133746d4065085b26e40f9dcc15e9e8fe043f58 freedesktop-sdk.bst:components/bluez-headers.bst \r\n      cached 091a7a0d2dc2a0e3c4b8652791785f9abb32b3bd96b70a64b8ee46f2218abf62 freedesktop-sdk.bst:components/gdbm.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:components/tcl.bst \r\n      cached 2fae2dd4644e04776e6207d6b3473b5eb095cd71473a531bee25a60b7f626757 freedesktop-sdk.bst:components/sqlite.bst \r\n      cached 0848321badf02a587c0d9552d3357c5b398e3c9abb5447fc86bdc3183b42864a freedesktop-sdk.bst:components/autoconf-archive.bst \r\n      cached f712b11a2ccb311b2d0f2746239424b58d40d80c8f4c255fbfced8781b77e257 freedesktop-sdk.bst:components/m4.bst \r\n      cached 5ea40a909e66d5cc8e88f27a6392621848ce367902e66438c5c024ee150d232a freedesktop-sdk.bst:components/autoconf.bst \r\n      cached 9a227f90cb45989f6599e3aa3b68486bde57a18e2d4582382c1014373a2f5d38 freedesktop-sdk.bst:components/automake.bst \r\n      cached 18748202dd2afcca301c148159a3c257b7104b34549678f7ef891093219593ca freedesktop-sdk.bst:components/gzip.bst \r\n      cached cec9669660be74adf30160d429d5251ddcda99c05ff6eec00fb9200dd43fc2c6 freedesktop-sdk.bst:components/tar.bst \r\n      cached 780bab8bdde19bda6ebca5216f62f9950df4e8dfe4a86a19a9e0d62101e19058 freedesktop-sdk.bst:components/gettext.bst \r\n      cached 28f4da52865f4efd3cc48a416e3bb04103a0038966a3d0e5731dcb15d7a6e541 freedesktop-sdk.bst:components/libtool.bst \r\n      cached 349198a51cc72a9a2d709651bd1c6a88d498085f0ff21dcf2ffcb1eba64e5883 freedesktop-sdk.bst:components/pkg-config.bst \r\n      cached f115abf37225a5d8ddab05e305d89940dee8f80e1218d8a808defcb029fed4e4 freedesktop-sdk.bst:components/which.bst \r\n      cached abb5fd776975007064c5617ec1e1586346d075971e2d185dcdd4d5eb479053c4 freedesktop-sdk.bst:public-stacks/buildsystem-autotools.bst \r\n      cached 3548171843dc7889d09d29824b9720803495bcc5df74c4af93f9607054d489a3 freedesktop-sdk.bst:components/expat.bst \r\n      cached 83cfd4110bb8d02915db5b450d78f575e731aa1425f86382cd6aff2dcf3145e0 freedesktop-sdk.bst:components/texinfo.bst \r\n      cached db686e535b78a0d08a4be8016c4210a42e1301561da4dd68a180f2d863784e2b freedesktop-sdk.bst:components/libffi.bst \r\n      cached 926a259f0655c4f52f2699f1f114d22e50deb9e11b77c59f91cdb10e0e9c9e89 freedesktop-sdk.bst:components/python3.bst \r\n      cached 61a091bad75031ea3054934aeef4e20b2c540eb04e9b5aed4c6915b19504794d freedesktop-sdk.bst:components/git-minimal.bst \r\n      cached 2f493887989622dc0b263c8d7a441258704182ac1254d87de9ab8b61b11d9b03 freedesktop-sdk.bst:components/help2man.bst \r\n      cached e6d8f29f7be2ae94d70e82bc810c778ba530e2fa591c48fa0d9e75f782c06e21 freedesktop-sdk.bst:components/flex-base.bst \r\n      cached 9f7b3531768ce7118e2afe2a9dce6a2e60f42f529ebc37b719d9e679ec4b8280 freedesktop-sdk.bst:components/libfl.bst \r\n      cached 771e167dafb3e2e808561ef640ae149f1abf6e2181ccbd08bac93419aab2284a freedesktop-sdk.bst:components/flex.bst \r\n      cached 93969feffa8ab341885a5744382ed782aa3e79e2c8b038dbef5216085159b8b1 freedesktop-sdk.bst:components/bison.bst \r\n      cached 3c29c6a742e1b154ba036a11da4cb3a140354555a3bf66cb3283efed2b75fae5 freedesktop-sdk.bst:components/util-linux.bst \r\n      cached a8f98dfd5d23b9ded3585dcd5bdaf9989bf752381910291dfca99cb74e5e49e9 freedesktop-sdk.bst:components/python3-setuptools.bst \r\n      cached 5ee346f2c4f3faf427a37b2ed0e7889e45226163e202a4f05a890c8e8567690f freedesktop-sdk.bst:components/python3-pip.bst \r\n      cached cb3e7341ff408b46d0daba05fca917602b90dd8eba6333d6e3a8279570f89a61 freedesktop-sdk.bst:components/python3-wheel.bst \r\n      cached b6734b302140ab3a4dd2b1c13811cc300c108f0e96b465e7e5542790ee41b284 freedesktop-sdk.bst:components/meson.bst \r\n      cached 86af713aa91707daef2116529916a6ee1f15234b94988fd205356057f9e6b120 freedesktop-sdk.bst:components/ninja.bst \r\n      cached 1151fb750b4cbaa5729ed7b21ea2e44eb254a08f34f91cceed6f4595adac282e freedesktop-sdk.bst:public-stacks/buildsystem-meson.bst \r\n      cached 0d4ce0cc310920a2e56eb0578dfb8565b4f4f98f70fd3434844e7761403e8982 freedesktop-sdk.bst:components/python3-mako.bst \r\n      cached 664b832617ada28e1977c73b85ff567a9733763f254c1f62b43452f033041991 freedesktop-sdk.bst:components/xorg-util-macros.bst \r\n      cached 1aa418811dff9791232964fee48ac6919b8156b3db5257242d670618689d80cc freedesktop-sdk.bst:components/xorg-lib-pciaccess.bst \r\n      cached ff7384705be02c305e1cba4a79dd976bbf36b2295330a9fa446c973e7adc1313 freedesktop-sdk.bst:components/libdrm.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:extensions/mesa/libdrm.bst \r\n      cached d4e35c3994476051a683211ead77ec900a669c1a9b9690bcaf85f569b53d6a32 freedesktop-sdk.bst:components/dummy-gbm.bst \r\n      cached 99c0ef53302989a05e0cbbeeb2b14762f0d72cce3fe4f19d46599daae250621f freedesktop-sdk.bst:components/libxml2.bst \r\n      cached 1651423f84fd2a74e87cf1bc076dcbbe9283c23229ad180e937fca9ab4c3cd9c freedesktop-sdk.bst:components/clean-xml-catalog.bst \r\n      cached 6dfc0576ba83f5c8fa46c226354797147b76dc400a8f14a8d3a0db1c31f29eb6 freedesktop-sdk.bst:components/docbook-xml.bst \r\n      cached c8ece3c36a64551b8251a225989229b0d7db74bebac892b5e0c9c30d29353198 freedesktop-sdk.bst:components/docbook-xsl.bst \r\n      cached 10ae3c6a8291a213aa72b2064e6068f7be7abd990bd46d2cea108b2fbcebbf99 freedesktop-sdk.bst:components/libxslt.bst \r\n      cached 2fdf1590e2ebd8c32b95f0b6ca62067de6b001b416b5ef2eed0b514807ce4de7 freedesktop-sdk.bst:components/itstool.bst \r\n      cached 068715969365c166051448b3158cf4fb28606a8b884ba1438bbdce5cdb10e9ce freedesktop-sdk.bst:components/python3-pygments.bst \r\n      cached e41b58650d455fb2ab92971ca3f15cf46f32af4511a441bfa64bac9134ebcc5a freedesktop-sdk.bst:components/gtk-doc.bst \r\n      cached 5f137f21faba62d03f5391b86143cb64f9e7ae7e042ed675e089f99949a347c1 freedesktop-sdk.bst:components/glib.bst \r\n      cached a924cbbebb43cced0bdd94203f9928cb4c2fd8e9188e1d8dedea148a36255465 freedesktop-sdk.bst:components/libcap.bst \r\n      cached 96a649229d730a1294d46d39a3a4f4efc4f6a8225d20426d0d9f9d670323f930 freedesktop-sdk.bst:components/libpng.bst \r\n      cached 0a9444669b05cd3ab3e752bbce48c07b158dfaec90aed780c141998a13eef490 freedesktop-sdk.bst:components/pixman.bst \r\n      cached 0b897068fdcf172216670f32b9443e182fd8e2a8218a03747ef813d1d5ac2223 freedesktop-sdk.bst:components/gnu-efi.bst \r\n      cached b1f06a05dae4784b7202921b651e6d518a059132ee75b8887988df0246045b59 freedesktop-sdk.bst:components/gnu-efi-maybe.bst \r\n      cached f32595bdafc197eb3dea4508ae1075487a48737e52173c7c67deec671e26171f freedesktop-sdk.bst:components/cmake.bst \r\n      cached bf357e776e862fcb4fa41bcc304013dc5b509697e8b40b11f4bf3bcdd62a4ffd freedesktop-sdk.bst:public-stacks/buildsystem-cmake.bst \r\n      cached ba1abc6ff0294cec137f4387da76daf64d12316d2d6b8fdbc6b6a50bb2309a38 freedesktop-sdk.bst:components/json-c.bst \r\n      cached f810c4b4c73893beb83a393711c9e10b1cee3454ccd98d8250dfcd4c08ad09be freedesktop-sdk.bst:components/libaio.bst \r\n      cached d80e8742c2125c31afe3507723d8d1aa85b1936e283292adccdc3cdd8f02e3b1 freedesktop-sdk.bst:components/lvm2-stage1.bst \r\n      cached 06f59a90c3a156d1740a81a068a74eb4ea9305b2764aff3ac96d21ee1ec9f941 freedesktop-sdk.bst:components/libidn2.bst \r\n      cached 4e198a9996f4d0904829bc9582bb96a135503bd7b1b7d44c3d72b5946db03273 freedesktop-sdk.bst:components/patch.bst \r\n      cached 6f4a3361306856da2f93b42b18b963c6ec8864cd325c609610a8006ae296a17d freedesktop-sdk.bst:components/libtasn1.bst \r\n      cached be4b21db73d6217ff08e183eb40bf34121289addc7568f8cbe5dcb56cf75ef78 freedesktop-sdk.bst:components/libunistring.bst \r\n      cached 396f761b031c57347bb4d63127a1ce56f501c585c1ab1a59c245d6ee692d8164 freedesktop-sdk.bst:components/gmp.bst \r\n      cached aa14b9f4a9362232edbcb4d0631cae6465d3307e152b5fc2d425070c05f44d83 freedesktop-sdk.bst:components/nettle.bst \r\n      cached 152562c1036e2bdf1da2b879a70f649962839037f6b8b776ba2234a62ce525e2 freedesktop-sdk.bst:components/p11-kit.bst \r\n      cached d3fe57662747ade434d00322dd0967b7c4d81d1fa3f61f983168aeba01bbc1b0 freedesktop-sdk.bst:components/gnutls.bst \r\n      cached 79d6da319bc7fb5437cac145c03476ec59f19189f4e300ebef950aa223618537 freedesktop-sdk.bst:components/nspr.bst \r\n      cached acb215cc1b0c6ea9f75bd9d2cdc009dd82cabbb62bea6a1ce0403316d401ec2a freedesktop-sdk.bst:components/gyp.bst \r\n      cached cbf91993d721e180e5c3825c63e5800df4d6ca50a2599524d0212b28cb6bf761 freedesktop-sdk.bst:components/nss.bst \r\n      cached 241107e5e93e7cff97fe644410951108bfaa3312f377ce47bc5c2576f243f5e8 freedesktop-sdk.bst:components/curl.bst \r\n      cached 7fae4103c2f9705b513073abe4c637d064653b8276ac91ecc800cc0d585d0152 freedesktop-sdk.bst:components/cracklib.bst \r\n      cached 9429df78d4b6cbc32212545695edb24704d148b4847d3430c804e96e50650f17 freedesktop-sdk.bst:components/linux-pam-base.bst \r\n      cached 670eeab1df8b21bc5a597fc0aab753cae876d67b8c127a8ae8b008b39d268db2 freedesktop-sdk.bst:components/pwquality.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:components/cryptsetup-base.bst \r\n      cached fa26ce3d204b810840aac2ba4537b7e2a22225268b1414096ffa4d179f5f7d02 freedesktop-sdk.bst:components/cryptsetup-manifest.bst \r\n      cached 52f625ca555893a9a0bc2eea5b6c47e48b2f5217815a1cc8a5197ed9024da159 freedesktop-sdk.bst:components/cryptsetup-lvm2-stage1.bst \r\n      cached 20f7c20ed8b4289ff7db9a484d29a81f0621700a79a70ae59ae41eaa7a572a40 freedesktop-sdk.bst:components/gperf.bst \r\n      cached ac8b5a29e5ac3d7ebe52f42e16889339730d6b56d543373e858582109757b20f freedesktop-sdk.bst:components/kmod.bst \r\n      cached d319a43551cccdbd5a6c605cd14abfde0fd97e08c1fc580c171f7354199c550a freedesktop-sdk.bst:components/libgpg-error.bst \r\n      cached 7ada96538dd47867725855dcf726c19405de0f0f48bf9be82772e78846c34ccb freedesktop-sdk.bst:components/libgcrypt.bst \r\n      cached 16b07b2c7dc3274f7e3513b8d98e96fda3835affa67ce05d37c5551b357a091e freedesktop-sdk.bst:components/lz4.bst \r\n      cached 70a9cb1a6ce9d07f271ff95ed5f117a2d5820a953636339433494179b04abf4a freedesktop-sdk.bst:components/linux-pam.bst \r\n      cached bd1856a64d31c640e3695063c7f93a287a1df15406ed333cb2de63d4f682cb01 freedesktop-sdk.bst:components/systemd-base.bst \r\n      cached 98c48c0e31ebb5f93d9654e9a949642151f56889b1276769642fe7b70f66bf22 freedesktop-sdk.bst:components/systemd-manifest.bst \r\n      cached 505050cb81de1d6402f4a929534503a5e07396cfac912858b5a543436fc7f431 freedesktop-sdk.bst:components/systemd-libs.bst \r\n      cached 4b9fa96a3dd58a803e3c86b9390abba39377caf180967750ed7e9f35387c86f8 freedesktop-sdk.bst:components/kbd.bst \r\n      cached f3091a74e0641aab44e3696636d71bf9821b74cfab3b05d4eda8bb3b32a0dae0 freedesktop-sdk.bst:components/shadow.bst \r\n      cached c4716c7bf381d5a922b5cf61e4e2f50ab23b1c2d8578ecd885228131406943af freedesktop-sdk.bst:components/tzdata.bst \r\n      cached 382e0630ba0b3daea338b91eb84883a59b2b767f66b910131f0d70cc7c4f5798 freedesktop-sdk.bst:components/systemd-lvm2-stage1.bst \r\n      cached 0738fd3970709fdab97cc18399443c85ea341efe4d9347346e8566cfea80351f freedesktop-sdk.bst:components/lvm2.bst \r\n      cached 074e8be86fe7d44a236b1b603151f76016f456865e9d1dfc86e70420bcc1276b freedesktop-sdk.bst:components/cryptsetup.bst \r\n      cached 339474da34138687cee274dd2971645cde839ae2e8e78b1f065a6bdce0b757eb freedesktop-sdk.bst:components/systemd.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:components/dbus-base.bst \r\n      cached 92115d5cceeeb4dbbd62319644ce769b162728f890e2ad4218e6a6e989a70f1d freedesktop-sdk.bst:components/dbus-manifest.bst \r\n      cached e7763204c3707e413f8d73e6fb74fc8597174e7d9ccf3c6905cee0d602a511fc freedesktop-sdk.bst:components/libdbus.bst \r\n      cached fd589300838970ea333ba84624c12809b9ff013a7a025a49fa0fff4f85efb39b freedesktop-sdk.bst:components/alsa-lib.bst \r\n      cached c3a31b71ff75520e153f1cd051c789f68232a33f260449126d3a9dffca060190 freedesktop-sdk.bst:components/dbus.bst \r\n      cached 994fa6807140e984224942e49114a6eb3d615bb5de8e13046fe290c262ef59ce freedesktop-sdk.bst:components/fftw.bst \r\n      cached dff4c9e39e16c88579c0c6601933da54351bbf799ab877066d032f767931e700 freedesktop-sdk.bst:components/perl-xml-parser.bst \r\n      cached d2f513d139e5cd8879469b6f98b9d0dcfbd8d81ec9199a30f5af2c99dae8c833 freedesktop-sdk.bst:components/python3-markdown.bst \r\n      cached 7583233ccbaf23e5fb10d480a1bda5119c382379bc6b6ca2cc75be4158383dc2 freedesktop-sdk.bst:components/gobject-introspection.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:components/vala-bootstrap.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:components/vala.bst \r\n      cached 69de9d20cf9fc006dfd47c09eb0d68a6ab41e08a1225e3da2063e2df01cfe4b1 freedesktop-sdk.bst:components/libical.bst \r\n      cached d029e3e5a4754942e94e8975b90f5570f5bafb7552bbd42d68083ab896f2aa54 freedesktop-sdk.bst:components/bluez.bst \r\n      cached d237966998b6dca9fa3fdb3b3103ef4e32afa16fa14c560d324e37ca67425a51 freedesktop-sdk.bst:components/atk.bst \r\n      cached e7146014308b879acc6586be72328b3ef72e23cf045c31a5d54b24a705bd839a freedesktop-sdk.bst:components/at-spi2-core.bst \r\n      cached 674bb86b1d6f972e799c38168f66f850607e2be67c3cbb1ea40e82d410a7c6b6 freedesktop-sdk.bst:components/at-spi2-atk.bst \r\n      cached 1620ebfcd3ec25dd289c52a905b2931041a4933aba68e8a734b8fccdf1151ca5 freedesktop-sdk.bst:components/xorg-proto-xorgproto.bst \r\n      cached 6efabdec42db96f36865a93a9fb856310f2376c0e26ae018027b8581bf99893a freedesktop-sdk.bst:components/xorg-lib-xau.bst \r\n      cached 06b3d50d00b21c477ebff6aaf95e8ce8041ce03421619fdcfc3eb317d86a6824 freedesktop-sdk.bst:components/xorg-proto-xcb.bst \r\n      cached 54014f6f8242117d85a5c1884f277fb1e2baca2822ed859adeff387a31a72dee freedesktop-sdk.bst:components/xorg-lib-xcb.bst \r\n      cached b52bf08ff43fca254813a5dcce66615cf247682625e76b66f483abcdeaf47ae5 freedesktop-sdk.bst:components/xorg-lib-xtrans.bst \r\n      cached 62f368d0c84c64e9ca402237df43b1a8a9b17f9098ef1c5c569f2d07a2f26cea freedesktop-sdk.bst:components/xorg-lib-x11.bst \r\n      cached 5e08d71334aa6bc3ed1c5789e51f2085a7cfb291c6450a42396042aed710b590 freedesktop-sdk.bst:components/xorg-lib-xext.bst \r\n      cached 5e8c43923f7a3ce3f1ba8d2c29e0f6a4f54c94b5da4cd0729f06697ef28d0d30 freedesktop-sdk.bst:components/freetype-stage1.bst \r\n      cached 3ff2e39732afca5effd7f0d34235bbd769c2df46cf7583824be18901d158a9f3 freedesktop-sdk.bst:components/wayland.bst \r\n      cached 8b2ac65b2a7583c292c17d06147375db25422eaa18d5c1fcc82f06a68fcfa597 freedesktop-sdk.bst:components/xorg-lib-xrender.bst \r\n      cached 287e425b3041362d77855a4b4f7a164469fa71def2bdbc622419cf128fdee1f4 freedesktop-sdk.bst:components/xorg-lib-xrandr.bst \r\n      cached 56460612592186740f87b3840084eb9ec7967dbdac2008a4c0e37ca559972da4 freedesktop-sdk.bst:components/graphite2.bst \r\n      cached 830a76eb8f703e6dd29c4dd804a03874645b6f251456c328553f753eed197235 freedesktop-sdk.bst:components/icu.bst \r\n      cached 9e45de84d31427ce8196ada513e9a6b91f9bd6027ebd0ec71860410cbfc85df3 freedesktop-sdk.bst:components/harfbuzz.bst \r\n      cached fbbbb981a75c5d3a69550457ff5aa4ad4e1503daf0c0d62ca6fc5260e6b7d545 freedesktop-sdk.bst:components/freetype.bst \r\n      cached 9f8433a10a134ece2930339bbe2cd48567525d60ecfd3a895db8237bb13be88d freedesktop-sdk.bst:components/fontconfig.bst \r\n      cached 37c463a9f949dcf8d8f76f9cf5e53ca63e3dd711c30dbd7438c79a9bd25d39ac freedesktop-sdk.bst:components/cairo.bst \r\n      cached 7264458b2274b20b18b6b58af95590b4c0560b716552c13329efb1ba177394d7 freedesktop-sdk.bst:components/asciidoc.bst \r\n      cached c57770252ca42601c40f88b24984118bbccc614e95e330eda8471d51fc1804a3 freedesktop-sdk.bst:components/groff.bst \r\n      cached 4a87304fed8b008cf2261d60377f8b96a6d7f20e55976b5cb2054868d8fdfa8a freedesktop-sdk.bst:components/xmlto.bst \r\n      cached fc89186cf7a76d48745dd9db75ddae97a8d956a6312e254102a4cc1190df2a10 freedesktop-sdk.bst:components/nasm.bst \r\n      cached cc99fe794c1f99aa0a4b5108e0e7ce53070a292cd66e785ee7404e791db509ec freedesktop-sdk.bst:components/jpeg.bst \r\n      cached 469ceaf528930dae146e72f93f3a82dd9c9afc092a54bc74d5b87460f323a634 freedesktop-sdk.bst:components/libtiff.bst \r\n      cached ae99a078953e1d9e07b42e2c6a7824ac6fdc13722e4254c37a1d0104fddce875 freedesktop-sdk.bst:components/shared-mime-info.bst \r\n      cached 698f3cc9f726b41dc720f126a5d579f2ff0851b6dba6c9dc11841ae73b11db6f freedesktop-sdk.bst:components/gdk-pixbuf.bst \r\n      cached 7a3ad30f312cd3f5edca4bbe0547429b6b93ffbc2b9eb26e2db2f7c81c8cf23f freedesktop-sdk.bst:components/gsettings-desktop-schemas.bst \r\n      cached 3a074e0e0882dd34d1af2c9728b1602fb1301a32b2bd3bbbbc4f72f2600c3b6c freedesktop-sdk.bst:components/hicolor-icon-theme.bst \r\n      cached 9b07c728768ea0c3a1589247b0faeabd532e8851d768b93c539d113d7f9ac586 freedesktop-sdk.bst:components/libglvnd.bst \r\n      cached 197bf74806fd9c0f7a4b37e9b08256100ec9ac0b39a9bfd7fa31f70692afce76 freedesktop-sdk.bst:components/mesa-headers.bst \r\n      cached 81b07071ac7a0aa9ca6df301c931b6e29b0384d6a90994a15d741b440b0727d5 freedesktop-sdk.bst:components/libepoxy.bst \r\n      cached 39f57c69724139cef62d749ddae3a12cc24518849312a6c7ed8c0d1fc4682e1d freedesktop-sdk.bst:components/wayland-protocols.bst \r\n      cached 1f55d7235fa1ba720f7eac1151fd35399f477cee2be566935101a12835fb418c freedesktop-sdk.bst:components/xorg-lib-xkbfile.bst \r\n      cached 98f80d6be64113f203370d83ecf37f2489cfea0d72ef2c2e8d3296c1b5e82b8a freedesktop-sdk.bst:components/xorg-app-xkbcomp.bst \r\n      cached 138b839998b38ba53d16d3d2903158f9d933e85b4ff0d55d89363c0b1ac69163 freedesktop-sdk.bst:components/xorg-data-xkeyboard-config.bst \r\n      cached 22c3f21b4866c5f419fe37972c946afca5c5451087bd989f26a1d04bd268da5a freedesktop-sdk.bst:components/libxkbcommon.bst \r\n      cached 7bed7b9a20c5737dee77d31c652c2eee8a50043a607ed4687ca3ff707cf9a12f freedesktop-sdk.bst:components/fribidi.bst \r\n      cached f4c6465cb1c536d5cbe8f0f1ec6fb5263681944d9e0163ab51d679e3f9adbd2b freedesktop-sdk.bst:components/libdatrie.bst \r\n      cached efb7455e5df0935dc806ee6c68d52983f8a5891cf6e9a3e8286e2716a5fbc387 freedesktop-sdk.bst:components/libthai.bst \r\n      cached 7baaee3888f2d1bea3b0c152f187ec78a3ca24c73f766de88692d7b9fae7b7f7 freedesktop-sdk.bst:components/pango.bst \r\n      cached d978f1cbfcecdafda7f2d832c88b1145d124f9fa870765ce134bbf3de6dad3ab freedesktop-sdk.bst:components/xorg-lib-xfixes.bst \r\n      cached 6cdfdadf355f83cabcfc4f41622bee0674349aad8fe6b7d74f0b7f34cb274857 freedesktop-sdk.bst:components/xorg-lib-xcomposite.bst \r\n      cached 739062296cab4db15091cbd0710485ec294a6ed8e7796c9c4390d41e7fb851af freedesktop-sdk.bst:components/xorg-lib-xdamage.bst \r\n      cached 187156f24a97eb0b1ae38a5a5722ec00874edc7deaf5b4a295bcb929cf782fb0 freedesktop-sdk.bst:components/xorg-lib-xi.bst \r\n      cached aa0d48714a933121c3a578940bf09ce4f0f8a322dcdcaa3d9b12f6f09408888e freedesktop-sdk.bst:components/xorg-lib-xinerama.bst \r\n      cached 1c153454550528d6c1ee4df70763d65d3bb5334a96ebe1aeb38318cc805236b6 freedesktop-sdk.bst:components/gtk3.bst \r\n      cached 72fa3b7f855e8543552bdef055bfcf7d8fde8ff42dd74e1b70d2fa16076f5d3e freedesktop-sdk.bst:components/orc.bst \r\n      cached 179ad44986f371e62767ce6339ca8d109da86c69d672fbb9ed2c491d2cec3540 freedesktop-sdk.bst:components/libogg.bst \r\n      cached 2030adb6be076ee04d86002b23d1a32165628f73215274bfe33db3fb471890ab freedesktop-sdk.bst:components/libflac.bst \r\n      cached c5eedaf4c411331a3e6e067ef5d891529084d6f4f265c1514911bae38c9bfbd1 freedesktop-sdk.bst:components/libvorbis.bst \r\n      cached 834c3337509479cf4e4f3c43187ee5aea28e76de12d5a0248146455171c0ef90 freedesktop-sdk.bst:components/sndfile.bst \r\n      cached 0804d8186cff37e32a6d5a7645c7196b60a8cd364292dba9633a95b1b27a0251 freedesktop-sdk.bst:components/sbc.bst \r\n      cached ca0fd6c2a14e70cc6229fabcb0ad73cf8b5bdc8c80b2b8c88a0e7063cc3d5d52 freedesktop-sdk.bst:components/speexdsp.bst \r\n      cached 5d1c50d975d1f1c746ce0a34a6dd507aa25e8efd55621655b55cbb18735cc9bd freedesktop-sdk.bst:components/webrtc-audio-processing.bst \r\n      cached a172417b2580843860d134cc1e7b41c488b6ebf43cb0e24575c53b16065f088d freedesktop-sdk.bst:components/xorg-lib-ice.bst \r\n      cached 6d8bc1726b30ff36d86c384a009b7e3250a7aed1f52c510d86bed6102f4b09ad freedesktop-sdk.bst:components/xorg-lib-sm.bst \r\n      cached f6820a2602d7eada25b8f343f3643a8b2ea750612e8b74d4d37420cbd5bdc6b1 freedesktop-sdk.bst:components/xorg-lib-xtst.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:components/pulseaudio-base.bst \r\n      cached 2cc867f02df1f0cab614d9a0aa9806c8c34d525cb4fef16f08c03186922e8632 freedesktop-sdk.bst:components/libpulse.bst \r\n      cached 1ae39620d08d17342539b61ae1901877c3df171a807c1019451dd4946fc8930d freedesktop-sdk.bst:components/libsamplerate.bst \r\n      cached b470d162993b93a7839f2bae040ca2801133a7eca32edb49c98ba0270dbec031 freedesktop-sdk.bst:components/extra-cmake-modules.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:components/fcitx.bst \r\n      cached cf0eaf9eeac6070506cb0446be5f53fa893f053b3ad548f447bd6e103bf6955d freedesktop-sdk.bst:components/iso-codes.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:components/ibus.bst \r\n      cached ae01f75130d8c006ddd688020d75d6a174b8f6b1241a9a661eee303a3ddbf346 freedesktop-sdk.bst:components/xorg-lib-xcursor.bst \r\n      cached 4c2e3e60ad176e3559aeae1cad7931b08560e037e34590966f3d51d7544b7191 freedesktop-sdk.bst:components/sdl2.bst \r\n      cached a2d5a2d4cfe623fe0feb1ed388bb869581c93935a044fcc25a006059390b41a5 freedesktop-sdk.bst:components/giflib.bst \r\n      cached b6a3cf84ce5a0754d772704ebe210687f17fc943db7c579a51adcfe715b05da6 freedesktop-sdk.bst:components/libwebp.bst \r\n      cached 94df06477a1f1395126aee88f72a61c39d597b4a9a56641f90131ccdc7996edc freedesktop-sdk.bst:components/sdl2-image.bst \r\n      cached e670e173b8778ba1c1f76b35f0c56158b87299bdbcd6f23da17929ab47ba5ab3 sdk/gtk-doc.bst \r\n      cached 2b25abe545c91bd768cb8f022ec5de8866081d18eea1214a6bea91c33f700487 sdk/glib.bst \r\n      cached 3b054217f13c1ccc0595336d3d4850534952dbe6c17e9521f8c23c0bcecc4a9e core-deps/libcacard.bst \r\n      cached d11cc9a9f809239527f5684ac3ca34eeb5fb012e47537d075f5b96a675a363fa core-deps/spice-protocol.bst \r\n      cached 4ce6a7b0171ad4de805289db6b6520384e2f128bc8cdcdef2d78293d3b41cb22 freedesktop-sdk.bst:components/opus.bst \r\n      cached 7ed32361c274419c2623fe6851cc7cb76d67b486816a44dcfd16025890725591 core-deps/spice.bst \r\n      cached 0e19088e469cce9f72592a4b1d6602ed50a9051d4788e397ae798a6d7f609fa6 freedesktop-sdk.bst:components/libusb.bst \r\n      cached 2f04784aadd557eb9d7097480e7f0841133e01951221e2c9056d7097e53c520d core-deps/usbredir.bst \r\n     waiting ???????????????????????????????????????????????????????????????? freedesktop-sdk.bst:components/cups-base.bst \r\n      cached 17b6fdb60cdde3d0984fda5ba112701d5701f724fb63a8f56eb20c0be82de1a1 freedesktop-sdk.bst:components/cups-manifest.bst \r\n      cached e83d81a03eb4c1d4ddab58912ecc1510a62d9e4266267ba1c60614b173d3781d freedesktop-sdk.bst:components/cups.bst \r\n      cached db59bb177938d4dfe93c65907847d3e50e8ed342ff9410a82e947bdec33bd9a2 sdk/gobject-introspection.bst \r\n      cached df45d389b721b47576ed4b33295cc0522a30f38f5f4bbecce23c6ca04efe2c84 sdk/atk.bst \r\n      cached 3da666abd07cf8a500f2023cdb4caad8799355ac254cfb64476b39dfa5cc1841 sdk/at-spi2-core.bst \r\n      cached 567a6ca7677fcef09801ad00b41e3b754bff11a0028760b456785961d78c8c55 sdk/at-spi2-atk.bst \r\n      cached be7ebbc083fb6489c45ed11b3f3236b969b2337eda7a21546896c1ec7eed1b92 sdk/gdk-pixbuf.bst \r\n      cached 8af8f438fa80333f925e8e9b10c79da550ce63e35935e61e6cf5a0949d1c7ab0 freedesktop-sdk.bst:components/xorg-lib-xft.bst \r\n      cached aa384c8ab6da0ef0c71188275a862bb44a7db4f3af52da6e93c9cc3728b21224 sdk/pango.bst \r\n      cached e9534b95add68a0b34d0aabc8dccea846baae30b3553d6ceafe4e8c1963f6acd sdk/json-glib.bst \r\n      cached 979706c5f5486d40b04df677ae615cf6b1632f8a0d20c06a8f782f912dda0474 sdk/vala-tarball.bst \r\n      cached 182418e94c7c394e03730d2c4f7f4edb92273005043b9d94bdf9ab230101dce7 sdk/vala.bst \r\n      cached 673877105f2d07970b8d46a97231d7183030c5536d354226ad7caa33360208f9 freedesktop-sdk.bst:components/ed.bst \r\n      cached 466167c86bf9ccfea5a187479f5e27e40b802785d68a83182184f2250c82ea7f freedesktop-sdk.bst:components/bc.bst \r\n      cached 24b46f9bc4f083657a2bc51e8dc12ee6d467b08fbb3435672b4cade82c0b8aa1 freedesktop-sdk.bst:components/brotli.bst \r\n      cached 290541f60db6b2c181cfc74e813af4a7593dd0a07215a8d7c27858c948d1e159 freedesktop-sdk.bst:components/libpsl.bst \r\n      cached d536518b433c8607225f9d70bd39a9debd00ca8ef1ea148902e5f757fd08b865 freedesktop-sdk.bst:components/e2fsprogs.bst \r\n      cached 97338ef07ca0e60e0a864c0c9435a24fc6f7361cea001d89fd90a4a1f85b78fd sdk/krb5.bst \r\n      cached 68d8fb58e64fef343fcc09a2700c5d8b4c6fd7fb055713bac7729d749d0bd29a freedesktop-sdk.bst:components/ca-certificates.bst \r\n      cached 47d6ec391ee1fb419fd131726497ef1998b5db7fb8bcc29314d0c63077ab8a3d freedesktop-sdk.bst:components/libproxy.bst \r\n      cached ed1ceb9ed5112c262b76a3db406f43032d14cf01df49ac9b098ce26624125efb sdk/gsettings-desktop-schemas.bst \r\n      cached 16902c99aeb016739013dadb30f6a13559697243addeec9ccdb42d7f116bb63a sdk/glib-networking.bst \r\n      cached 9c7910eac6b328029a2b6586044fe7c2a3177aa74129cbf863f386f5339bce80 sdk/libsoup-2.4.bst \r\n      cached bbcf7a1dbd0579a29ac7c959769215e38f14807f7af3b58b37c2b2e380c9d062 sdk/tracker.bst \r\n      cached ecb2d93c3ca17bc1aace6f26cb6a5135c21dd2ee6d7bfcad8a9c730e3037e4ce freedesktop-sdk.bst:components/libarchive.bst \r\n      cached 8e621b6f030297c247e83345ab5271c35057000b9c74e7a074d7a89380caa661 sdk/gcab.bst \r\n      cached 3b7b5a93de1458479c5ff68ff95e2ce0306106b94c6b9938384715c0fa1c3757 sdk/appstream-glib.bst \r\n      cached 6e8f441bd078dd979d594f44e640d432d89217973838b8d9f554ed014fb372b6 sdk/cantarell-fonts.bst \r\n      cached 24089b492ddffb228b5490a952dfadce36ce40e5a24f3e7a02d6cfb56a60cd5f sdk/gtk+-3.bst \r\n      failed 3cc7d21a81a42d813e870960a0aca98f8ad23b77a55ca8bc42f3e90a06a3d235 core-deps/qemu.bst \r\n===============================================================================\r\n\r\nBuild failure on element: core-deps/qemu.bst\r\n\r\nChoose one of the following options:\r\n  (c)ontinue  - Continue queueing jobs as much as possible\r\n  (q)uit      - Exit after all ongoing jobs complete\r\n  (t)erminate - Terminate any ongoing jobs and exit\r\n  (r)etry     - Retry this job\r\n  (l)og       - View the full log file\r\n  (s)hell     - Drop into a shell in the failed build sandbox\r\n\r\nPressing ^C will terminate jobs and exit\r\n```\r\n\r\nAgain, I'm using non-strict mode. I'm kind of suspecting this may be the same as #1460, but since it looks different I'm reporting it as a separate issue until it is investigated.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1461/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1455", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1455/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1455/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1455/events", "html_url": "https://github.com/apache/buildstream/issues/1455", "id": 831522719, "node_id": "MDU6SXNzdWU4MzE1MjI3MTk=", "number": 1455, "title": "BUG when trying to access an element through junction on the command line", "user": {"login": "abderrahim", "id": 100109, "node_id": "MDQ6VXNlcjEwMDEwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/100109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abderrahim", "html_url": "https://github.com/abderrahim", "followers_url": "https://api.github.com/users/abderrahim/followers", "following_url": "https://api.github.com/users/abderrahim/following{/other_user}", "gists_url": "https://api.github.com/users/abderrahim/gists{/gist_id}", "starred_url": "https://api.github.com/users/abderrahim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abderrahim/subscriptions", "organizations_url": "https://api.github.com/users/abderrahim/orgs", "repos_url": "https://api.github.com/users/abderrahim/repos", "events_url": "https://api.github.com/users/abderrahim/events{/privacy}", "received_events_url": "https://api.github.com/users/abderrahim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/3", "html_url": "https://github.com/apache/buildstream/milestone/3", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/3/labels", "id": 7687468, "node_id": "MI_kwDOE_tNMc4AdU0s", "number": 3, "title": "BuildStream 2.0 stable blockers", "description": "This milestone is intended to record sensible blockers to an actual 2.0 stable release of BuildStream.\r\n", "creator": {"login": "gtristan", "id": 1928351, "node_id": "MDQ6VXNlcjE5MjgzNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1928351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtristan", "html_url": "https://github.com/gtristan", "followers_url": "https://api.github.com/users/gtristan/followers", "following_url": "https://api.github.com/users/gtristan/following{/other_user}", "gists_url": "https://api.github.com/users/gtristan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtristan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtristan/subscriptions", "organizations_url": "https://api.github.com/users/gtristan/orgs", "repos_url": "https://api.github.com/users/gtristan/repos", "events_url": "https://api.github.com/users/gtristan/events{/privacy}", "received_events_url": "https://api.github.com/users/gtristan/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "open", "created_at": "2022-02-17T04:49:22Z", "updated_at": "2022-10-11T08:10:47Z", "due_on": null, "closed_at": null}, "comments": 3, "created_at": "2021-03-15T07:44:11Z", "updated_at": "2022-07-26T05:28:48Z", "closed_at": "2022-07-26T05:28:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Steps to reproduce:\r\n- have a junction `junction.bst` with `overrides`\r\n- use `bst show` or `bst build` on an element in the junction `junction.bst:element.bst`\r\n\r\nI get the following error:\r\n\r\n```\r\n    Traceback (most recent call last):\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/bin/bst\", line 8, in <module>\r\n        sys.exit(cli())\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/click/core.py\", line 829, in __call__\r\n        return self.main(*args, **kwargs)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/buildstream/_frontend/cli.py\", line 258, in override_main\r\n        original_main(self, args=args, prog_name=prog_name, complete_var=None, standalone_mode=standalone_mode, **extra)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/click/core.py\", line 782, in main\r\n        rv = self.invoke(ctx)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/click/core.py\", line 1259, in invoke\r\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/click/core.py\", line 1066, in invoke\r\n        return ctx.invoke(self.callback, **ctx.params)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/click/core.py\", line 610, in invoke\r\n        return callback(*args, **kwargs)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/click/decorators.py\", line 33, in new_func\r\n        return f(get_current_context().obj, *args, **kwargs)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/buildstream/_frontend/cli.py\", line 607, in show\r\n        dependencies = app.stream.load_selection(elements, selection=deps, except_targets=except_)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/buildstream/_stream.py\", line 166, in load_selection\r\n        target_objects = self._load(\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/buildstream/_stream.py\", line 1566, in _load\r\n        elements, except_elements, artifacts = self._load_elements_from_targets(\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/buildstream/_stream.py\", line 1399, in _load_elements_from_targets\r\n        elements, except_elements = self._load_elements([element_names, except_targets])\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/buildstream/_stream.py\", line 1349, in _load_elements\r\n        elements = self._project.load_elements(targets)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/buildstream/_project.py\", line 429, in load_elements\r\n        load_elements = self.loader.load(targets)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/buildstream/_loader/loader.py\", line 136, in load\r\n        _junction, name, loader = self._parse_name(target, None)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/buildstream/_loader/loader.py\", line 1000, in _parse_name\r\n        loader = self.get_loader(junction_path[-2], provenance_node, load_subprojects=load_subprojects)\r\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.9/site-packages/buildstream/_loader/loader.py\", line 219, in get_loader\r\n        del self._loader_search_provenances[name]\r\n    KeyError: 'freedesktop-sdk.bst'\r\n```\r\n\r\n~~I bisected it to 16e2966dacb716456bb9f105a9c05c4dea024c72 (part of [!2078](https://gitlab.com/BuildStream/buildstream/-/merge_requests/2078))~~ Edit: it seems the elements overrides was implemented after this change.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1455/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1414", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1414/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1414/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1414/events", "html_url": "https://github.com/apache/buildstream/issues/1414", "id": 800983007, "node_id": "MDU6SXNzdWU4MDA5ODMwMDc=", "number": 1414, "title": "Race condition in resolving underlying CAS connection", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 3841320027, "node_id": "LA_kwDOE_tNMc7k9eRb", "url": "https://api.github.com/repos/apache/buildstream/labels/needinfo", "name": "needinfo", "color": "C5DEF5", "default": false, "description": "Requires additional information to investigate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-04T06:39:29Z", "updated_at": "2022-02-17T05:35:57Z", "closed_at": "2022-02-17T05:35:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1414)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Dec 10, 2020, 13:51\n\nIn [this recent pipeline](https://gitlab.com/BuildStream/buildstream/-/jobs/902850792), we can observe a spurious error from `tests/integration/cachedfail.py::test_push_failed_missing_shell[continue]`\n\n```\nTraceback (most recent call last):\n  File \"/builds/BuildStream/buildstream/src/buildstream/testing/runcli.py\", line 386, in _invoke\n    cli_object.main(args=args or (), prog_name=cli_object.name)\n  File \"/builds/BuildStream/buildstream/src/buildstream/_frontend/cli.py\", line 238, in override_main\n    original_main(self, args=args, prog_name=prog_name, complete_var=None, standalone_mode=standalone_mode, **extra)\n  File \"/builds/BuildStream/buildstream/.tox/py36/lib/python3.6/site-packages/click/core.py\", line 782, in main\n    rv = self.invoke(ctx)\n  File \"/builds/BuildStream/buildstream/.tox/py36/lib/python3.6/site-packages/click/core.py\", line 1259, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/builds/BuildStream/buildstream/.tox/py36/lib/python3.6/site-packages/click/core.py\", line 1066, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/builds/BuildStream/buildstream/.tox/py36/lib/python3.6/site-packages/click/core.py\", line 610, in invoke\n    return callback(*args, **kwargs)\n  File \"/builds/BuildStream/buildstream/.tox/py36/lib/python3.6/site-packages/click/decorators.py\", line 33, in new_func\n    return f(get_current_context().obj, *args, **kwargs)\n  File \"/builds/BuildStream/buildstream/src/buildstream/_frontend/cli.py\", line 552, in show\n    dependencies = app.stream.load_selection(elements, selection=deps, except_targets=except_)\n  File \"/builds/BuildStream/buildstream/src/buildstream/_stream.py\", line 161, in load_selection\n    load_artifacts=load_artifacts,\n  File \"/builds/BuildStream/buildstream/src/buildstream/_stream.py\", line 1321, in _load\n    self._pipeline.resolve_elements(self.targets)\n  File \"/builds/BuildStream/buildstream/src/buildstream/_pipeline.py\", line 102, in resolve_elements\n    element._initialize_state()\n  File \"/builds/BuildStream/buildstream/src/buildstream/element.py\", line 1364, in _initialize_state\n    self.__update_cache_keys()\n  File \"/builds/BuildStream/buildstream/src/buildstream/element.py\", line 3250, in __update_cache_keys\n    self.__update_artifact_state()\n  File \"/builds/BuildStream/buildstream/src/buildstream/element.py\", line 3294, in __update_artifact_state\n    self.__schedule_assembly_when_necessary()\n  File \"/builds/BuildStream/buildstream/src/buildstream/element.py\", line 1619, in __schedule_assembly_when_necessary\n    if not self.__should_schedule():\n  File \"/builds/BuildStream/buildstream/src/buildstream/element.py\", line 1588, in __should_schedule\n    processing = self.__assemble_scheduled or self.__assemble_done or self._pull_pending()\n  File \"/builds/BuildStream/buildstream/src/buildstream/element.py\", line 1871, in _pull_pending\n    if self._cached() and self.__artifact._cache_key == self.__strict_cache_key:\n  File \"/builds/BuildStream/buildstream/src/buildstream/element.py\", line 1185, in _cached\n    return self.__artifact.cached()\n  File \"/builds/BuildStream/buildstream/src/buildstream/_artifact.py\", line 582, in cached\n    if not self._cas.contains_files(digests):\n  File \"/builds/BuildStream/buildstream/src/buildstream/_cas/cascache.py\", line 155, in contains_files\n    return len(self.missing_blobs(digests)) == 0\n  File \"/builds/BuildStream/buildstream/src/buildstream/_cas/cascache.py\", line 454, in missing_blobs\n    response = cas.FindMissingBlobs(request)\nAttributeError: 'NoneType' object has no attribute 'FindMissingBlobs'\n```\n\nSuspicion is that this is a new race introduced by the threaded scheduler... some brief IRC log:\n\n```\n<tristan> juergbi, I think this is new: https://gitlab.com/BuildStream/buildstream/-/jobs/902850792\n<tristan> It appears to be spurious failure where the internal CasCache's internal cas object might not be resolved on time\n<juergbi> hm, missing_blobs() calls get_cas(), which is supposed to do the right thing\n<juergbi> and this is in the main thread, afaict, so should also not be a thread-related race condition\n<tristan> https://gitlab.com/BuildStream/buildstream/-/snippets/2048752\n<tristan> I thought it might be on my side (even I didnt play with that part)...\n<tristan> but running that test locally passes\n<tristan> tests/integration/cachedfail.py::test_push_failed_missing_shell[continue]\n<juergbi> looking at casdprocessmanager.py, I see a potential race condition\n<juergbi> in that get_cas() checks whether self._casd_channel is None but not whether self._casd_cas is None\n<tristan> The other tests in the same pipeline passed, save for fedora 31 which failed on a well known spurious error\n<tristan> So, this might not be because of your recent CASCache changes of course :)\n<tristan> Just thought, since you just just landed that, might be related\n<tristan> could be just very rare\n<juergbi> my changes shouldn't change anything with regards to establishing the connection, so I'd rather suspect the thread-based scheduler\n<juergbi> however, as this is not happening in a job thread, I also don't see right now how this can happen\n<juergbi> although, it might be that establish_connection() is running in a background thread (e.g. the usage monitor thread)\n<juergbi> we should definitely replace the casd_channel check with something that is not prone to this race condition\n<juergbi> can't be sure whether that's the issue here, though\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1414/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1414/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1411", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1411/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1411/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1411/events", "html_url": "https://github.com/apache/buildstream/issues/1411", "id": 800982078, "node_id": "MDU6SXNzdWU4MDA5ODIwNzg=", "number": 1411, "title": "Commands which accept artifact names and element targets are ambiguous", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/2", "html_url": "https://github.com/apache/buildstream/milestone/2", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/2/labels", "id": 6382580, "node_id": "MDk6TWlsZXN0b25lNjM4MjU4MA==", "number": 2, "title": "BuildStream 2.0 API Freeze", "description": "This milestone represents issues which need to be solved in order to reach an establish stable API for BuildStream 2.0.\r\n\r\nAfter completing these tasks it will be a good time to release an initial BuildStream 2.0 beta release and start focusing on fixing issues leading up to an actual 2.0 stable.\r\n", "creator": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 29, "state": "open", "created_at": "2021-02-02T13:29:00Z", "updated_at": "2022-04-15T09:15:44Z", "due_on": null, "closed_at": null}, "comments": 0, "created_at": "2021-02-04T06:37:53Z", "updated_at": "2021-10-14T08:21:48Z", "closed_at": "2021-10-14T08:21:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1411)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 19, 2020, 07:06\n\nWe need something more explicit for commands which support both artifact names and element names, and then additionally support globbing of the provided artifact names and element names.\n\n\n## Background\n\nGlob patterns were originally added when adding the artifact commands, and at the same time, it was decided that it would be convenient to also support element names in artifact commands.\n\nIn the case that the user is interested in the artifact which a project element currently produces (which is a likely case), then supporting element names in artifact commands provides a short cut so that the user need not manually discover the cache key and derive the artifact name.\n\nOriginally, there was a hidden *\"trick\"* being done under the hood, which cause only glob patterns ending in *\".bst\"* to be matched against elements - this is sneaky and ugly, and provides a worse experience for commands which accept elements but do not accept artifacts, like `bst show`, which also support glob patterns, but would report no results if the user did not know about specifying this hacky *\".bst\"* required suffix to the glob pattern.\n\nWhen fixing the above, we discovered that we now have commands which ambiguously match the same glob pattern to both element targets and artifact names, so we caused this to be an error.\n\n\n## Original comment reference\n\nThe following discussion from !2102 should be addressed:\n\n- [ ] [[Gitlab user @juergbi]](https://gitlab.com/juergbi) started a [discussion](https://gitlab.com/BuildStream/buildstream/-/merge_requests/2102#note_448763866): \n\n    > > globs are not discriminated against for having `.bst`\n    > >\n    > > * For a command which only supports elements, then `**` will match all elements in the project as one would expect\n    > > * For a command which supports both elements and artifacts, the pattern `**` will now match all elements **and** all artifacts\n    > \n    > I'm worried about patterns that can match both elements and artifacts. It would mean that the same pattern leads to different results for different commands (commands only accepting elements and commands accepting both). And I can't think of a reasonable use case for wanting to match both in a single pattern. Especially given that one is specific to the current project state and the other potentially matches artifacts from random projects.\n    > \n    > I think it's important to fix this before 2.0 but we don't have to block this MR on that discussion.\n    > \n    > Could it make sense to error out when a single glob matches both elements and artifacts until this is discussed and fixed properly? This would make sure nobody starts relying on this odd behavior.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1411/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1411/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1410", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1410/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1410/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1410/events", "html_url": "https://github.com/apache/buildstream/issues/1410", "id": 800981509, "node_id": "MDU6SXNzdWU4MDA5ODE1MDk=", "number": 1410, "title": "Artifacts listed redundantly in `bst artifact show` and other artifact commands.", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-04T06:36:49Z", "updated_at": "2021-02-04T06:37:45Z", "closed_at": "2021-02-04T06:37:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1410)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 13, 2020, 09:23\n\nWhen building a small sample project, and then running `bst artifact show 'test/**'` to list all the artifacts which were built (assuming the project name 'test'), we receive more results than the artifacts we built.\n\nI would expect to only have artifacts listed one, using their strong cache key, when using wildcards in artifact commands.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1410/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1398", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1398/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1398/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1398/events", "html_url": "https://github.com/apache/buildstream/issues/1398", "id": 800975002, "node_id": "MDU6SXNzdWU4MDA5NzUwMDI=", "number": 1398, "title": "Junction `overrides` feature does not resolve links", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-04T06:25:27Z", "updated_at": "2021-02-04T06:26:27Z", "closed_at": "2021-02-04T06:26:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1398)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 1, 2020, 09:12\n\nCurrently `link` elements are not acceptable in the junction `overrides` feature, because we currently perform a simple search in junctions for the junction names of the subprojects which might be overridden, ignoring the fact that the junction names specified in the `overrides` might contain `link` elements.\n\n## Working example\n\nWhen overriding a subproject directly using a link, like so:\n\n```yaml\nkind: junction\n\n# subproject-link.bst is a link element to a subproject\n# in the subproject this junction refers to\nconfig:\n  overrides: subproject-link.bst: myoverridding-junction.bst\n```\n\nThen the resolution works, because at the time we load the subproject, we are providing `subproject-link.bst` to search for in the subproject, and did not yet need to resolve the link.\n\n## Failing example\n\nWhen overriding a subsubproject using a link existing in the subproject, like so:\n\n```yaml\nkind: junction\n\n# subproject-link.bst is a link element to a subproject\n# in the subproject this junction refers to\nconfig:\n  overrides: subproject-link.bst:subsubproject.bst: myoverridding-junction.bst\n```\n\nThis fails, because `subproject-link.bst` was resolved and the actual loaded junction is `subproject.bst` (the target of `subproject-link.bst`.\n\nWhile there is an override specified for `subproject-link.bst`, and it was used in order to load the subproject (link is already resolved), it does not match the name of the loaded junction, and as such the link is ignored.\n\n## ~~Proposed fix~~\n\nThis is a bit complicated to solve, ideally, we should look up previously resolved links and substitute them in junction `overrides`, this approach would:\n\n* Fail to override the subproject work if the junction link name was used to address the subproject in the override, but not used to address elements in the subproject in question, i.e. it would depend on the link resolution to happen in advance.\n  * This is a fairly safe assumption to make; if you are addressing a subproject using a link, we should have a reasonable expectation that the link name is what is used to address that subproject\n* Avoid extra work while loading, potentially harming load performance\n  * The alternative approach would be to actually resolve the elements specified in `overrides`, this would incur additional load time especially when a pipeline of elements could otherwise be loaded without needing to load elements across the overridden junctions (this approach could lead to requiring loading of unneeded subprojects).\n\nThe caveat I can see is:\n* When a subproject gets refactored, they might decide to leave a `link` in place for one of it's subprojects, this would be a sound decision in order to avoid breaking API in the case of some element naming churn which happened.\n* At that point, it would make sense for the project to internally start using the new/real junction name, and leave the link name behind only for compatibility reasons\n* When a downstream project continues to access that junction name only in order to override it, but the sub-subproject is only ever loaded by request of the subproject's dependencies, then the override will be silently ignored (unless it happens to collide with another coexisting junction to the same project).\n\n## Better proposed fix\n\nThere should be a better algorithm to resolve links without making the tradeoff listed above.\n\nGiven that, at the time we are searching for an override for a junction we're about to load, we have loaded all parent projects already who have the right to decide, then we have the `link` elements already staged and ready to load, even if we did not happen to load them yet, it should be worth the price of simply shallow loading the elements referred to in the `overrides` list just to determine if they are links.\n\nIn general, the algorithm would run like this:\n\n* Every given `Loader` in the hierarchy would maintain a reverse lookup table of `element name` -> `link names`\n  * This way we would keep in context, every link which can resolve to any given element\n  * TBD: Maybe this needs to be maintained in the global `LoadContext`, unclear what makes most sense at this stage\n* At the time we load a junction, we traverse the `overrides` table of that junction\n  * If the override *key* is local to the project being loaded (contains no `:`), then we shallow load it with `Loader._load_file_no_deps()`\n  * If the loaded `LoadElement` is a link, we record that link in the appropriate table\n* Whenever we search for an override in advance to loading a junction, instead of the current blind matching:\n  * We build a normalized override table in the projects we search, an override table where the override keys have been resolved to full element paths\n    * This might not be real element paths, in the case that we have links which traverse junction boundaries which have not yet been loaded, but this is immaterial at this stage, and will only become material at the time of crossing those junction boundaries\n    * This alternative table needs to be reconstructed on the fly, as it might be resolved differently as we load subprojects further down the build graph\n  * We check for a match in that normalized `overrides` table instead", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1394", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1394/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1394/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1394/events", "html_url": "https://github.com/apache/buildstream/issues/1394", "id": 800973948, "node_id": "MDU6SXNzdWU4MDA5NzM5NDg=", "number": 1394, "title": "Build failure message is not printed before user prompt in interactive mode", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-04T06:23:45Z", "updated_at": "2022-07-27T05:28:39Z", "closed_at": "2022-07-27T05:28:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1394)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 20, 2020, 08:02\n\nToday while testing fdsdk ports against BuildStream master, I encountered the following in the UI:\n\n\n```\n[--:--:--][14a1ca15][   build:bootstrap/glibc.bst           ] START   freedesktop-sdk/bootstrap-glibc/14a1ca15-build.4192016.log\n[--:--:--][14a1ca15][   build:bootstrap/linux-headers.bst   ] STATUS  Staging bootstrap/linux-headers.bst/47a8467e\n\nBuild failure on element: bootstrap/glibc.bst\n\nChoose one of the following options:\n  (c)ontinue  - Continue queueing jobs as much as possible\n  (q)uit      - Exit after all ongoing jobs complete\n  (t)erminate - Terminate any ongoing jobs and exit\n  (r)etry     - Retry this job\n  (l)og       - View the full log file\n\nPressing ^C will terminate jobs and exit\n\n\nChoice: [continue]: \n\nContinuing with other non failing elements\n```\n\nAfter dismissing the prompt, I got the following:\n\n```\n[--:--:--][14a1ca15][   build:bootstrap/gnu-config.bst      ] STATUS  Staging bootstrap/gnu-config.bst/41de65c5\n[--:--:--][14a1ca15][   build:bootstrap/build/dwz-build.bst ] STATUS  Staging bootstrap/build/dwz-build.bst/54b3b542\n[--:--:--][14a1ca15][   build:bootstrap/build/tools-lib-path.bst] STATUS  Staging bootstrap/build/tools-lib-path.bst/06cd15ad\n[--:--:--][14a1ca15][   build:bootstrap/build/elfutils-build.bst] STATUS  Staging bootstrap/build/elfutils-build.bst/3ba8bb0e\n[--:--:--][14a1ca15][   build:bootstrap/build/file-stage1.bst] STATUS  Staging bootstrap/build/file-stage1.bst/81d9ec9f\n[--:--:--][14a1ca15][   build:bootstrap/build/debugedit-build.bst] STATUS  Staging bootstrap/build/debugedit-build.bst/d28b84db\n[--:--:--][14a1ca15][   build:bootstrap/build/stripper.bst  ] STATUS  Staging bootstrap/build/stripper.bst/39725ba1\n[--:--:--][14a1ca15][   build:bootstrap/build/debug-utils.bst] STATUS  Staging bootstrap/build/debug-utils.bst/9c869295\n[--:--:--][14a1ca15][   build:bootstrap/build/base-sdk/filtered.bst] STATUS  Staging bootstrap/build/base-sdk/filtered.bst/5747e62f\n[--:--:--][14a1ca15][   build:bootstrap/build/base-sdk/symlinks.bst] STATUS  Staging bootstrap/build/base-sdk/symlinks.bst/b4e168e0\n[--:--:--][14a1ca15][   build:bootstrap/build/base-sdk.bst  ] STATUS  Staging bootstrap/build/base-sdk.bst/36b8498b\n[--:--:--][14a1ca15][   build:bootstrap/build/binutils-stage1.bst] STATUS  Staging bootstrap/build/binutils-stage1.bst/8f278972\n[--:--:--][14a1ca15][   build:bootstrap/build/gcc-stage1.bst] STATUS  Staging bootstrap/build/gcc-stage1.bst/f7ebac9b\n[00:00:00][14a1ca15][   build:bootstrap/glibc.bst           ] FAILURE [overlaps]: Non-whitelisted overlaps detected\nStaged files overwrite existing files in staging area: /\n/usr/bin/dwz: bootstrap/build/base-sdk/filtered.bst is not permitted to overlap other elements, order bootstrap/build/base-sdk/filtered.bst above bootstrap/build/dwz-build.bst \n/usr/share/man/man1/dwz.1: bootstrap/build/base-sdk/filtered.bst is not permitted to overlap other elements, order bootstrap/build/base-sdk/filtered.bst above bootstrap/build/dwz-build.bst \n\n\n    Printing the last 20 lines from log file:\n    /home/tristan/.cache/buildstream/logs/freedesktop-sdk/bootstrap-glibc/14a1ca15-build.4192016.log\n    ======================================================================\n        V: '1'\n    [--:--:--] STATUS  bootstrap/linux-headers.bst: Staging bootstrap/linux-headers.bst/47a8467e\n    [--:--:--] STATUS  bootstrap/gnu-config.bst: Staging bootstrap/gnu-config.bst/41de65c5\n    [--:--:--] STATUS  bootstrap/build/dwz-build.bst: Staging bootstrap/build/dwz-build.bst/54b3b542\n    [--:--:--] STATUS  bootstrap/build/tools-lib-path.bst: Staging bootstrap/build/tools-lib-path.bst/06cd15ad\n    [--:--:--] STATUS  bootstrap/build/elfutils-build.bst: Staging bootstrap/build/elfutils-build.bst/3ba8bb0e\n    [--:--:--] STATUS  bootstrap/build/file-stage1.bst: Staging bootstrap/build/file-stage1.bst/81d9ec9f\n    [--:--:--] STATUS  bootstrap/build/debugedit-build.bst: Staging bootstrap/build/debugedit-build.bst/d28b84db\n    [--:--:--] STATUS  bootstrap/build/stripper.bst: Staging bootstrap/build/stripper.bst/39725ba1\n    [--:--:--] STATUS  bootstrap/build/debug-utils.bst: Staging bootstrap/build/debug-utils.bst/9c869295\n    [--:--:--] STATUS  bootstrap/build/base-sdk/filtered.bst: Staging bootstrap/build/base-sdk/filtered.bst/5747e62f\n    [--:--:--] STATUS  bootstrap/build/base-sdk/symlinks.bst: Staging bootstrap/build/base-sdk/symlinks.bst/b4e168e0\n    [--:--:--] STATUS  bootstrap/build/base-sdk.bst: Staging bootstrap/build/base-sdk.bst/36b8498b\n    [--:--:--] STATUS  bootstrap/build/binutils-stage1.bst: Staging bootstrap/build/binutils-stage1.bst/8f278972\n    [--:--:--] STATUS  bootstrap/build/gcc-stage1.bst: Staging bootstrap/build/gcc-stage1.bst/f7ebac9b\n    [00:00:00] FAILURE bootstrap/glibc.bst: [overlaps]: Non-whitelisted overlaps detected\n    Staged files overwrite existing files in staging area: /\n    /usr/bin/dwz: bootstrap/build/base-sdk/filtered.bst is not permitted to overlap other elements, order bootstrap/build/base-sdk/filtered.bst above bootstrap/build/dwz-build.bst \n    /usr/share/man/man1/dwz.1: bootstrap/build/base-sdk/filtered.bst is not permitted to overlap other elements, order bootstrap/build/base-sdk/filtered.bst above bootstrap/build/dwz-build.bst\n    ======================================================================\n\n[00:21:14][        ][    main:core activity                 ] FAILURE Build\n\n\nFailure Summary\n    bootstrap/glibc.bst:\n    [00:00:00][14a1ca15][   build:bootstrap/glibc.bst           ] FAILURE [overlaps]: Non-whitelisted overlaps detected\n    Staged files overwrite existing files in staging area: /\n    /usr/bin/dwz: bootstrap/build/base-sdk/filtered.bst is not permitted to overlap other elements, order bootstrap/build/base-sdk/filtered.bst above bootstrap/build/dwz-build.bst \n    /usr/share/man/man1/dwz.1: bootstrap/build/base-sdk/filtered.bst is not permitted to overlap other elements, order bootstrap/build/base-sdk/filtered.bst above bootstrap/build/dwz-build.bst \n\n\n        Printing the last 20 lines from log file:\n        /home/tristan/.cache/buildstream/logs/freedesktop-sdk/bootstrap-glibc/14a1ca15-build.4192016.log\n        ======================================================================\n            V: '1'\n        [--:--:--] STATUS  bootstrap/linux-headers.bst: Staging bootstrap/linux-headers.bst/47a8467e\n        [--:--:--] STATUS  bootstrap/gnu-config.bst: Staging bootstrap/gnu-config.bst/41de65c5\n        [--:--:--] STATUS  bootstrap/build/dwz-build.bst: Staging bootstrap/build/dwz-build.bst/54b3b542\n        [--:--:--] STATUS  bootstrap/build/tools-lib-path.bst: Staging bootstrap/build/tools-lib-path.bst/06cd15ad\n        [--:--:--] STATUS  bootstrap/build/elfutils-build.bst: Staging bootstrap/build/elfutils-build.bst/3ba8bb0e\n        [--:--:--] STATUS  bootstrap/build/file-stage1.bst: Staging bootstrap/build/file-stage1.bst/81d9ec9f\n        [--:--:--] STATUS  bootstrap/build/debugedit-build.bst: Staging bootstrap/build/debugedit-build.bst/d28b84db\n        [--:--:--] STATUS  bootstrap/build/stripper.bst: Staging bootstrap/build/stripper.bst/39725ba1\n        [--:--:--] STATUS  bootstrap/build/debug-utils.bst: Staging bootstrap/build/debug-utils.bst/9c869295\n        [--:--:--] STATUS  bootstrap/build/base-sdk/filtered.bst: Staging bootstrap/build/base-sdk/filtered.bst/5747e62f\n        [--:--:--] STATUS  bootstrap/build/base-sdk/symlinks.bst: Staging bootstrap/build/base-sdk/symlinks.bst/b4e168e0\n        [--:--:--] STATUS  bootstrap/build/base-sdk.bst: Staging bootstrap/build/base-sdk.bst/36b8498b\n        [--:--:--] STATUS  bootstrap/build/binutils-stage1.bst: Staging bootstrap/build/binutils-stage1.bst/8f278972\n        [--:--:--] STATUS  bootstrap/build/gcc-stage1.bst: Staging bootstrap/build/gcc-stage1.bst/f7ebac9b\n        [00:00:00] FAILURE bootstrap/glibc.bst: [overlaps]: Non-whitelisted overlaps detected\n        Staged files overwrite existing files in staging area: /\n        /usr/bin/dwz: bootstrap/build/base-sdk/filtered.bst is not permitted to overlap other elements, order bootstrap/build/base-sdk/filtered.bst above bootstrap/build/dwz-build.bst \n        /usr/share/man/man1/dwz.1: bootstrap/build/base-sdk/filtered.bst is not permitted to overlap other elements, order bootstrap/build/base-sdk/filtered.bst above bootstrap/build/dwz-build.bst\n        ======================================================================\n\nPipeline Summary\n    Total:       17\n    Session:     3\n    Fetch Queue: processed 1, skipped 2, failed 0 \n    Build Queue: processed 2, skipped 0, failed 1 \n\n\n[--:--:--][        ][    main:core activity                 ] START   Terminating buildbox-casd\n[00:00:02][        ][    main:core activity                 ] SUCCESS Terminating buildbox-casd\n\n```\n\nThe `FAILURE` message is somehow pushed back to the end of the message queue, instead of being printed directly before the user prompt.\n\nIt did not work like this before, I expect to see the `FAILURE` message *before* the interactive prompt, giving me some context about what failed immediately before asking me what I want to do about it.\n\nAt the end of the session, of course the collection of `FAILURE` messages are summarized again, in the above case, they same message is printed twice at the end; first the message which should have come before the prompt is printed, and then it is printed again as a part of the failure summary a couple of lines further down.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1394/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1394/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1393", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1393/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1393/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1393/events", "html_url": "https://github.com/apache/buildstream/issues/1393", "id": 800972732, "node_id": "MDU6SXNzdWU4MDA5NzI3MzI=", "number": 1393, "title": "Task name not showing correct element in UI", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-04T06:21:31Z", "updated_at": "2021-02-04T06:23:37Z", "closed_at": "2021-02-04T06:23:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1393)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 20, 2020, 07:27\n\nOne of our most frequently regressing problems has appeared once again.\n\nTesting the latest port of `freedesktop-sdk` with master today I observed the following:\n\n```\n[--:--:--][f7ebac9b][   build:bootstrap/build/gcc-stage1.bst] START   freedesktop-sdk/bootstrap-build-gcc-stage1/f7ebac9b-build.4071769.log\n[--:--:--][f7ebac9b][   build:bootstrap/gnu-config.bst      ] STATUS  Staging bootstrap/gnu-config.bst/41de65c5\n[--:--:--][f7ebac9b][   build:bootstrap/build/base-sdk/filtered.bst] STATUS  Staging bootstrap/build/base-sdk/filtered.bst/5747e62f\n[--:--:--][f7ebac9b][   build:bootstrap/build/base-sdk/symlinks.bst] STATUS  Staging bootstrap/build/base-sdk/symlinks.bst/b4e168e0\n[--:--:--][f7ebac9b][   build:bootstrap/build/base-sdk.bst  ] STATUS  Staging bootstrap/build/base-sdk.bst/36b8498b\n[--:--:--][f7ebac9b][   build:bootstrap/build/binutils-stage1.bst] STATUS  Staging bootstrap/build/binutils-stage1.bst/8f278972\n```\n\nHere we can see that we are staging a bunch of elements in order to build `bootstrap/build/gcc-stage1.bst`.\n\nNote:\n* The cache key of `gcc-stage1.bst` is correctly printed for all lines\n* The message content shows the correct elements being staged\n* The element name shown in the UI is **incorrect**\n  * Even though we issue log messages on dependency elements, we are supposed to be stamping those messages with the `task_id`\n  * The frontend is supposed to favor the `task_id` to print the element name here if one is present, instead of the `plugin_id`\n\nAs a secondary note, I think that these messages are supposed to be `silent_nested=True`, I think this is a bit overly verbose.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1393/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1393/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1390", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1390/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1390/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1390/events", "html_url": "https://github.com/apache/buildstream/issues/1390", "id": 800971916, "node_id": "MDU6SXNzdWU4MDA5NzE5MTY=", "number": 1390, "title": "Source caches loses blobs along the way?", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 3841320027, "node_id": "LA_kwDOE_tNMc7k9eRb", "url": "https://api.github.com/repos/apache/buildstream/labels/needinfo", "name": "needinfo", "color": "C5DEF5", "default": false, "description": "Requires additional information to investigate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-04T06:20:06Z", "updated_at": "2022-02-17T05:51:22Z", "closed_at": "2022-02-17T05:51:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1390)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Aug 30, 2020, 10:13\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nI was trying to ingest my sources before running my builds.\nI have plenty enough of disk space (200GB free, while trying FSDK), and my cache has no quota.\n\nFor this I did:\n\n```\nbst source fetch my_target.bst\nbst source push --deps all my_target.bst\n```\n\nI expected this to succeed and be able to build without any external connection.\n\nI however got a few sources that failed to be pushed with errors as seen below. (Size does not seem to affect the success rate).\n\nI tried a second `bst source push --deps all my_target.bst`, and it started downloading sources again? And failing again to upload them.\n\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nI get:\n\n```\n[--:--:--] START   cross-compilers/freedesktop-sdk-arm.bst:bootstrap/build/dwz-build.bst: Src-push\n[--:--:--] STATUS  cross-compilers/freedesktop-sdk-arm.bst:bootstrap/build/dwz-build.bst: Pushing data for source 46b59054 -> http://bst-source-cache:8000\n[--:--:--] BUG     cross-compilers/freedesktop-sdk-arm.bst:bootstrap/build/dwz-build.bst: Src-push    An unhandled exception occured:    Traceback (most recent call last):\n      File \"/home/buildstream/workspace/buildstream/src/buildstream/_scheduler/jobs/job.py\", line 650, in child_action\n        result = self.child_process()  # pylint: disable=assignment-from-no-return\n      File \"/home/buildstream/workspace/buildstream/src/buildstream/_scheduler/jobs/elementjob.py\", line 93, in child_process\n        return self._action_cb(self._element)\n      File \"/home/buildstream/workspace/buildstream/src/buildstream/_scheduler/queues/sourcepushqueue.py\", line 44, in _push_or_skip\n        if not element._source_push():\n      File \"/home/buildstream/workspace/buildstream/src/buildstream/element.py\", line 1753, in _source_push\n        return self.__sources.push()\n      File \"/home/buildstream/workspace/buildstream/src/buildstream/_elementsources.py\", line 140, in push\n        if self._sourcecache.push(source):\n      File \"/home/buildstream/workspace/buildstream/src/buildstream/_sourcecache.py\", line 204, in push\n        self.cas._send_directory(remote, source_proto.files)\n      File \"/home/buildstream/workspace/buildstream/src/buildstream/_cas/cascache.py\", line 672, in _send_directory\n        self.send_blobs(remote, required_blobs)\n      File \"/home/buildstream/workspace/buildstream/src/buildstream/_cas/cascache.py\", line 661, in send_blobs\n        for digest in digests:\n      File \"/home/buildstream/workspace/buildstream/src/buildstream/_cas/cascache.py\", line 456, in required_blobs_for_directory\n        with open(self.objpath(directory_digest), \"rb\") as f:\n    FileNotFoundError: [Errno 2] No such file or directory: '/home/buildstream/.cache/buildstream/cas/objects/53/307cae796d1262c6834ef9814d41563b10d30731423e17059cd68bf5d37cc9'\n```\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nI should have all my sources synced and pushed\n\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1390/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1386", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1386/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1386/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1386/events", "html_url": "https://github.com/apache/buildstream/issues/1386", "id": 800970671, "node_id": "MDU6SXNzdWU4MDA5NzA2NzE=", "number": 1386, "title": "Ensure that all elements include build directory in the cache key", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/2", "html_url": "https://github.com/apache/buildstream/milestone/2", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/2/labels", "id": 6382580, "node_id": "MDk6TWlsZXN0b25lNjM4MjU4MA==", "number": 2, "title": "BuildStream 2.0 API Freeze", "description": "This milestone represents issues which need to be solved in order to reach an establish stable API for BuildStream 2.0.\r\n\r\nAfter completing these tasks it will be a good time to release an initial BuildStream 2.0 beta release and start focusing on fixing issues leading up to an actual 2.0 stable.\r\n", "creator": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 29, "state": "open", "created_at": "2021-02-02T13:29:00Z", "updated_at": "2022-04-15T09:15:44Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2021-02-04T06:17:55Z", "updated_at": "2021-02-04T06:18:39Z", "closed_at": "2021-02-04T06:18:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1386)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 20, 2020, 06:03\n\nAs it was recently discovered, the *\"build-root\"* is not currently considered in cache key calculations, meaning that we can have binary output variance with the same cache key, especially when debug mode is enabled in builds, which typically encode source directories into the output binaries for the sake of debuggers looking for this.\n\nAs a part of [this proposal](https://lists.apache.org/thread.html/ra2d1bf680a55105d87c9f5711315e5aca1bfc2c34e5485daeb246af0%40%3Cdev.buildstream.apache.org%3E), it was agreed that this must block 2.0.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1386/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1383", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1383/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1383/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1383/events", "html_url": "https://github.com/apache/buildstream/issues/1383", "id": 800969224, "node_id": "MDU6SXNzdWU4MDA5NjkyMjQ=", "number": 1383, "title": "BuildStream fails at runtime if it was built without git tags", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-04T06:15:16Z", "updated_at": "2021-02-04T06:16:40Z", "closed_at": "2021-02-04T06:16:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1383)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Aug 11, 2020, 21:52\n\n## Summary\n\nIf the BuildStream source/binary pacakge is not built from a git checkout without any tags, BuildStream will successfully build and install. However, it will complain at runtime like so:\n\n```\n$ bst -C doc/examples/first-project show\nError loading user configuration: Your git repository has no tags - BuildStream can't determine its version. Please run `git fetch --tags`.\n```\n\nI think this is worth fixing because this seems like a common pitfall. Here are a few reasons why this might happen:\n\n* CI systems often clone a single commit by default for performance reasons\n* `git push` doesn't push tags by default, so someone naively creating a mirror for BuildStream might fall into this trap\n* Some integration systems (like BuildStream itself!) do not track tags by default, so someone building BuildStream with BuildStream would also remember to turn on a separate knob\n\nI will gladly admit that I have personally done all these mistakes at least once and know that some others have too. So, I think we should ensure that this error is reported at build time.\n\nReporting it at runtime is also a bit misguided because running `git fetch --tags` at that time isn't going to solve anything. The package is already built and installed. We should at least mention to reinstall BuildStream after fetching tags.\n\n## Steps to reproduce\n\n```bash\n# Create a shallow clone.\ngit clone --depth=1 https://gitlab.com/buildstream/buildstream\n\n# Install BuildStream\n# Note that `-e` option does not really matter here,\n# failure behavior is the same in both cases.\npip install buildstream\n\n# Try to run BuildStream.\nbst -C buildstream/doc/examples/first-project show\n\n# See the following error message:\n#\n# Error loading user configuration: Your git repository has no tags - BuildStream can't determine its version. Please run `git fetch --tags`.\n```\n\n## What is the current bug behavior?\n\nBuildStream throws a not-very-helpful error at runtime.\n\n\n## What is the expected correct behavior?\n\n* This is reported at build time so that it's not possible to install BuildStream without a proper version.\n* BuildStream throws a bettter error at runtime in case that somehow it happens anyway.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1383/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1369", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1369/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1369/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1369/events", "html_url": "https://github.com/apache/buildstream/issues/1369", "id": 800962523, "node_id": "MDU6SXNzdWU4MDA5NjI1MjM=", "number": 1369, "title": "Heading get's printed multiple times during the load", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-04T06:02:49Z", "updated_at": "2021-02-04T06:04:03Z", "closed_at": "2021-02-04T06:04:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1369)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jul 21, 2020, 10:37\n\nCurrently when running any buildstream session with junctions (i.e. most real sessions), we get the heading printed multiple times at startup.\n\nNote that the information is quite bogus, one might expect that we are printing a project specific heading for each project and just annoyingly including a lot of redundant information in there, but we are not, as we can see `Project:   foo (/full/path)` is printed twice, indicating that we are in fact printing the same toplevel project heading once for each project that gets loaded during the load process.\n\nHere is a random sample taken from `tests/format/junctions.py::test_build_tar_cross_junction_names`:\n\n```\ntests/format/junctions.py::test_build_tar_cross_junction_names BuildStream exited with code 0 for invocation:\n\tbst --no-colors --config /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache/buildstream.conf --directory /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/use-repo build base.bst:target.bst\nProgram stderr was:\n[--:--:--][        ][    main:core activity                 ] START   Build\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\n\nBuildStream Version 1.93.4+80.g73b928e92\n  Session Start: Tuesday, 21-07-2020 at 18:32:18\n  Project:       foo (/codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/use-repo)\n  Targets:       \n\nUser Configuration\n  Configuration File:      /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache/buildstream.conf\n  Cache Directory:         /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache\n  Log Files:               /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache/logs\n  Source Mirrors:          /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache/sources\n  Build Area:              /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache/build\n  Strict Build Plan:       Yes\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nLoaded Plugins\n  Element Plugins\n    - junction\n  Source Plugins\n    - tar\n\nPipeline\n\n===============================================================================\nCoverage.py warning: No data was collected. (no-data-collected)\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\n\n    1 subtasks processed\n\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\n\n    1 of 1 subtasks processed\n\n[--:--:--][        ][    main:core activity                 ] START   Resolving cached state\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving cached state\n\n    1 of 1 subtasks processed\n\n[--:--:--][        ][    main:core activity                 ] START   Checking sources\n[00:00:00][        ][    main:core activity                 ] SUCCESS Checking sources\n\nBuildStream Version 1.93.4+80.g73b928e92\n  Session Start: Tuesday, 21-07-2020 at 18:32:18\n  Project:       foo (/codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/use-repo)\n  Targets:       target.bst\n\nUser Configuration\n  Configuration File:      /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache/buildstream.conf\n  Cache Directory:         /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache\n  Log Files:               /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache/logs\n  Source Mirrors:          /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache/sources\n  Build Area:              /codethink/GNOME/buildstream/.tox/py37/tmp/test_build_tar_cross_junction_0/cache/build\n  Strict Build Plan:       Yes\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nLoaded Plugins\n  Element Plugins\n    - junction\n  Source Plugins\n    - tar\n\nPipeline\n   buildable 92ed62ecf3c09d900a44b13efea05f5597e9e3448cc51bc97314beedce3a02cc base.bst:target.bst \n===============================================================================\nCoverage.py warning: No data was collected. (no-data-collected)\nCoverage.py warning: No data was collected. (no-data-collected)\n[--:--:--][92ed62ec][   fetch:base.bst:target.bst           ] START   base/target/92ed62ec-fetch.23227.log\n[00:00:00][92ed62ec][   fetch:base.bst:target.bst           ] SUCCESS base/target/92ed62ec-fetch.23227.log\n[--:--:--][92ed62ec][   build:base.bst:target.bst           ] START   base/target/92ed62ec-build.23233.log\n[--:--:--][92ed62ec][   build:base.bst:target.bst           ] START   Staging sources\n[00:00:00][92ed62ec][   build:base.bst:target.bst           ] SUCCESS Staging sources\n[--:--:--][92ed62ec][   build:base.bst:target.bst           ] START   Caching artifact\n[00:00:00][92ed62ec][   build:base.bst:target.bst           ] SUCCESS Caching artifact\n[00:00:00][92ed62ec][   build:base.bst:target.bst           ] SUCCESS base/target/92ed62ec-build.23233.log\n[00:00:00][        ][    main:core activity                 ] SUCCESS Build\n\nPipeline Summary\n  Total:       1\n  Session:     1\n  Fetch Queue: processed 1, skipped 0, failed 0 \n  Build Queue: processed 1, skipped 0, failed 0 \n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1369/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1367", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1367/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1367/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1367/events", "html_url": "https://github.com/apache/buildstream/issues/1367", "id": 800961603, "node_id": "MDU6SXNzdWU4MDA5NjE2MDM=", "number": 1367, "title": "`artifact checkout` crashes when no arguments are supplied", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-04T06:01:01Z", "updated_at": "2021-02-04T06:01:52Z", "closed_at": "2021-02-04T06:01:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1367)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Jul 17, 2020, 14:13\n\n## Summary\n\nWhen `bst artifact checkout` is run without any arguments, it just throws a stack trace (rather embarrisingly).\n\n## Steps to reproduce\n\n```bash\n# From the root of this repository\n$ cd doc/examples/first-project\n$ bst artifact checkout\nTraceback (most recent call last):\n  File \"/home/kote/.venvs/bst/bin/bst\", line 8, in <module>\n    sys.exit(cli())\n  File \"/home/kote/.venvs/bst/lib64/python3.7/site-packages/click/core.py\", line 764, in __call__\n    return self.main(*args, **kwargs)\n  File \"/home/kote/buildstream/buildstream/src/buildstream/_frontend/cli.py\", line 238, in override_main\n    original_main(self, args=args, prog_name=prog_name, complete_var=None, standalone_mode=standalone_mode, **extra)\n  File \"/home/kote/.venvs/bst/lib64/python3.7/site-packages/click/core.py\", line 717, in main\n    rv = self.invoke(ctx)\n  File \"/home/kote/.venvs/bst/lib64/python3.7/site-packages/click/core.py\", line 1137, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/home/kote/.venvs/bst/lib64/python3.7/site-packages/click/core.py\", line 1137, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/home/kote/.venvs/bst/lib64/python3.7/site-packages/click/core.py\", line 956, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/home/kote/.venvs/bst/lib64/python3.7/site-packages/click/core.py\", line 555, in invoke\n    return callback(*args, **kwargs)\n  File \"/home/kote/.venvs/bst/lib64/python3.7/site-packages/click/decorators.py\", line 27, in new_func\n    return f(get_current_context().obj, *args, **kwargs)\n  File \"/home/kote/buildstream/buildstream/src/buildstream/_frontend/cli.py\", line 1239, in artifact_checkout\n    location = os.path.abspath(os.path.join(os.getcwd(), target))\n  File \"/usr/lib64/python3.7/posixpath.py\", line 94, in join\n    genericpath._check_arg_types('join', a, *p)\n  File \"/usr/lib64/python3.7/genericpath.py\", line 149, in _check_arg_types\n    (funcname, s.__class__.__name__)) from None\nTypeError: join() argument must be str or bytes, not 'NoneType'\n```\n\n## What is the current bug behavior?\n\nA stack trace is shown.\n\n## What is the expected correct behavior?\n\nBuildStream can either do nothing (similar to what happens when you do `bst artifact delete` with no arguments) or an error is displayed that at least one element/artifact must be specified. I'd be leaning towards the latter option since that's symmetrical to what happens when you don't provide any options to `bst source checkout`.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1367/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1367/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1361", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1361/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1361/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1361/events", "html_url": "https://github.com/apache/buildstream/issues/1361", "id": 800959527, "node_id": "MDU6SXNzdWU4MDA5NTk1Mjc=", "number": 1361, "title": "bst artifact checkout removes \".bst\" from end of directory names", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-04T05:56:51Z", "updated_at": "2021-02-04T05:57:43Z", "closed_at": "2021-02-04T05:57:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1361)\nIn GitLab by [[Gitlab user @DouglasWinship]](https://gitlab.com/DouglasWinship) on Jul 10, 2020, 12:27\n\n## Summary\n\nbst artifact checkout cannot checkout to a directory that ends with \".bst\". The \".bst\" is stripped off of the end of the directory path, and artifacts are checked out to a directory with the shortened path.\n\n\n## Steps to reproduce\n\n1. Open a buildstream-2 project (eg the [freedesktop-sdk-20.08beta.1-buildstream2/](https://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/commits/freedesktop-sdk-20.08beta.1-buildstream2/) branch of freedesktop-sdk)\n2. Check out and element, to a directory ending in \".bst\", eg:\n```\nbst artifact checkout bootstrap/build/base-sdk/symlinks.bst --directory checkout_here.bst\n```\n\n\n## What is the current bug behavior?\n\nCheckout command succesfully checks out the files, but check them out in the wrong directory.\n```\nChecking out files in 'checkout_here'\n```\n\n## What is the expected correct behavior?\nFiles should be checked out into the directory name specified (ending with '.bst')\n```\nChecking out files in 'checkout_here.bst'\n```\n\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.93.4 (and probably earlier).\n* It only seems to happen with '.bst', and only when it's at the end of the directory name.\n  - `--directory here.bst    ` --> `Checking out files in 'here'`\n  - `--directory here        ` --> `Checking out files in 'here'`\n  - `--directory here.foo    ` --> `Checking out files in 'here.foo'`\n  - `--directory here.bst_   ` --> `Checking out files in 'here.bst_'`\n  - `--directory here.bst.bst` --> `Checking out files in 'here.bst'`\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1361/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1361/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1340", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1340/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1340/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1340/events", "html_url": "https://github.com/apache/buildstream/issues/1340", "id": 800949265, "node_id": "MDU6SXNzdWU4MDA5NDkyNjU=", "number": 1340, "title": "Overlap whitelist broken with multiple projects", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-04T05:37:03Z", "updated_at": "2021-02-04T05:38:10Z", "closed_at": "2021-02-04T05:38:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1340)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jun 6, 2020, 09:34\n\nThe overlap whitelist feature is not properly functional when used in conjunction with multiple projects, as the algorithm is based on simple element names and not element full paths.\n\nThis will break down in scenarios where multiple junctioned projects bear the same element names.\n\nConsider the current approximate algorithm in `Element.stage_dependency_artifacts()`, observe the `XXX` comments I added in the fragment below:\n\n```python\n\n\n    for dep in self.dependencies(scope):\n        result = dep.stage_artifact(sandbox, path=path, include=include, exclude=exclude, orphans=orphans)\n        if result.overwritten:\n            for overwrite in result.overwritten:\n                # Completely new overwrite\n                if overwrite not in overlaps:\n                    # Find the overwritten element by checking where we've\n                    # written the element before\n                    for elm, contents in files_written.items():\n                        if overwrite in contents:\n                            #\n                            # XXX Here we take note of the Element's name, local to it's project\n                            #\n                            overlaps[overwrite] = [elm, dep.name]\n                else:\n                    overlaps[overwrite].append(dep.name)\n        files_written[dep.name] = result.files_written\n\n        if result.ignored:\n            ignored[dep.name] = result.ignored\n\n    if overlaps:\n        overlap_warning = False\n        warning_detail = \"Staged files overwrite existing files in staging area:\\n\"\n        for f, elements in overlaps.items():\n            overlap_warning_elements = []\n            # The bottom item overlaps nothing\n            overlapping_elements = elements[1:]\n            for elm in overlapping_elements:\n                #\n                # XXX Here we use `Element.search()` with a project-local element name,\n                #     which may not be unique in the dependency graph.\n                #\n                element = cast(Element, self.search(scope, elm))\n                if not element.__file_is_whitelisted(f):\n                    overlap_warning_elements.append(elm)\n                    overlap_warning = True\n\n            warning_detail += _overlap_error_detail(f, overlap_warning_elements, elements)\n\n        if overlap_warning:\n            self.warn(\n                \"Non-whitelisted overlaps detected\", detail=warning_detail, warning_token=CoreWarnings.OVERLAPS\n            )\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1340/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1340/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1332", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1332/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1332/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1332/events", "html_url": "https://github.com/apache/buildstream/issues/1332", "id": 800942726, "node_id": "MDU6SXNzdWU4MDA5NDI3MjY=", "number": 1332, "title": "Needless requirement for ports in Execution service definition", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-04T05:23:20Z", "updated_at": "2022-02-17T07:08:12Z", "closed_at": "2022-02-17T07:08:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1332)\nIn GitLab by [[Gitlab user @pointswaves]](https://gitlab.com/pointswaves) on May 31, 2020, 23:18\n\n## Summary\n\n```\n    cat > ~/.config/buildstream.conf << EOF \n    remote-execution:\n      execution-service:\n        url: https://remotebuild.pointswaves.co.uk:443\n        client-key: $CLIENT_KEY\n        client-cert: $CLIENT_CERT\n      storage-service:\n        url: https://cache.pointswaves.co.uk:443\n        client-key: $CLIENT_KEY\n        client-cert: $CLIENT_CERT\n      action-cache-service:\n        url: https://cache.pointswaves.co.uk:443\n        client-key: $CLIENT_KEY\n        client-cert: $CLIENT_CERT\n    EOF \n\n```\n\nMissing off the `:443` Causes:\n\n```\n[00:00:11][9f42840b][   build:freedesktop-sdk.bst:bootstrap/build/debugedit-build.bst] FAILURE You must supply a protocol and port number in the action-cache-service url, for example: http://buildservice:50051.\n```\n\nThis seems very odd when\n```\n    cat > ~/.config/buildstream.conf << EOF \n    artifacts:\n    - url: https://cache.pointswaves.co.uk\n      client-key: $CLIENT_KEY\n      client-cert: $CLIENT_CERT\n      push: true\n    EOF \n\n```\nworks fine\n\nPlease see https://gitlab.com/pointswaves/embbeded-selfy/-/jobs/574850671 for more details", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1332/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1332/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1311", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1311/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1311/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1311/events", "html_url": "https://github.com/apache/buildstream/issues/1311", "id": 800933594, "node_id": "MDU6SXNzdWU4MDA5MzM1OTQ=", "number": 1311, "title": "BuildStream doesn't properly check if buildbox-casd process died", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-04T05:02:54Z", "updated_at": "2021-02-04T05:03:37Z", "closed_at": "2021-02-04T05:03:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1311)\nIn GitLab by [[Gitlab user @chiaratolentino]](https://gitlab.com/chiaratolentino) on May 14, 2020, 14:36\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nAs a result of the change to relax buildbox-casd timeout in https://gitlab.com/BuildStream/buildstream/-/merge_requests/1889, we end up waiting for the full timeout period (5min) without realising that buildbox-casd has died.\n\nSince we're listening to a child process, the buildbox-casd process is not killed until we reap it, resulting in it having 'zombie' status for which `psutil.is_running()` will still return true (see: https://psutil.readthedocs.io/en/latest/#psutil.Process.is_running)\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n- `chown` to a different user for `~/.cache/buildstream`\n- `bst build`\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\nWhen checking if buildbox-casd has died, we should also check that the buildbox-casd process's status is not `psutil.STATUS_ZOMBIE`\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1311/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1310", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1310/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1310/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1310/events", "html_url": "https://github.com/apache/buildstream/issues/1310", "id": 800932562, "node_id": "MDU6SXNzdWU4MDA5MzI1NjI=", "number": 1310, "title": "Problem around resolving with variables", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-02-04T05:00:34Z", "updated_at": "2021-02-04T05:02:46Z", "closed_at": "2021-02-04T05:02:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1310)\nIn GitLab by [[Gitlab user @willsalmon]](https://gitlab.com/willsalmon) on May 14, 2020, 13:39\n\n## Summary\n\nProjects like freedesktop-sdk can not build due to a problem around resolving with variables that appeared with their automatic expansion\n\nThis seems to be caused by https://gitlab.com/BuildStream/buildstream/-/merge_requests/1919 and should be fixed by https://gitlab.com/BuildStream/buildstream/-/merge_requests/1929\n\n## Steps to reproduce\n\nUse variables in you elements\n\n\n## What is the current bug behavior?\n\nhttps://gitlab.com/celduin/bsps/example-app/-/jobs/55090600", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1310/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1308", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1308/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1308/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1308/events", "html_url": "https://github.com/apache/buildstream/issues/1308", "id": 800931373, "node_id": "MDU6SXNzdWU4MDA5MzEzNzM=", "number": 1308, "title": "Dependencies are duplicated in `bst show --format %{deps}`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-04T04:57:58Z", "updated_at": "2021-02-04T04:59:15Z", "closed_at": "2021-02-04T04:59:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1308)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on May 13, 2020, 16:10\n\n## Summary\n\nThe `%{deps}` format option claims to give a list of all dependencies. However, if a dependency is both a build and runtime dependency, it is currently printed twice.\n\n\n## Steps to reproduce\n\n```bash\n$ bst -C doc/examples/autotools show --format \"%{name} %{deps}\"\nbase/alpine.bst []\nbase.bst [base/alpine.bst, base/alpine.bst]\nhello.bst [base.bst, base.bst]\n```\n\nNote that `base.bst` and `base/alpine.bst` are repeated twice in the respective output lines.\n\n## What is the current bug behavior?\n\nElements that are both build and runtime dependencies are listed twice.\n\n\n## What is the expected correct behavior?\n\nThey are deduplicated.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1308/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1308/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1307", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1307/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1307/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1307/events", "html_url": "https://github.com/apache/buildstream/issues/1307", "id": 800930830, "node_id": "MDU6SXNzdWU4MDA5MzA4MzA=", "number": 1307, "title": "format strings are not doing robust checks", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-04T04:56:38Z", "updated_at": "2021-02-04T04:57:45Z", "closed_at": "2021-02-04T04:57:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1307)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on May 13, 2020, 15:53\n\n## Summary\r\n\r\nI wasn't sure how to title this issue, so feel free to rephrase it if you have a better title in mind.\r\n\r\nHer's the gist of the issue - if you pass some things to `bst show --format` that is not quite expecting, it will throw a stack trace. Also, in some cases where it doesn't throw a stack trace, it may not produce the right output.\r\n\r\n\r\n## Steps to reproduce\r\n\r\nHere are a few examples:\r\n\r\n1.  ~~When a `$` character is used, some things are chopped of from the output that shouldn't be. For example, in this case the output should been `hello.bst ${build-deps}`. Since we don't consider `$` as a special character, it should be printed literally.~~\r\n\r\nEDIT: this is not a real bug, this was my mistake of using double quotes instead of single quotes.\r\n\r\n    ```bash\r\n    $ bst -C doc/examples/first-project show --format \"%{name} ${build-deps}\"\r\n    hello.bst deps\r\n    ```\r\n\r\n2. When a `%` prefix is not used, we should again expect to have it rendered literally. But that's not what happens:\r\n\r\n    ```bash\r\n        $ bst -C doc/examples/first-project show --format \"%{name} {build-deps}\"\r\n\r\n            Traceback (most recent call last):\r\n              File \"/home/kote/.venvs/bst/bin/bst\", line 8, in <module>\r\n                sys.exit(cli())\r\n              File \"/home/kote/.venvs/bst/lib64/python3.7/site-packages/click/core.py\", line 764, in __call__\r\n                return self.main(*args, **kwargs)\r\n              ...\r\n              File \"/home/kote/buildstream/buildstream/src/buildstream/_frontend/profile.py\", line 76, in fmt_subst\r\n                return re.sub(r\"%(\\{(\" + varname + r\")[^%]*\\})\", subst_callback, text)\r\n              File \"/usr/lib64/python3.7/re.py\", line 192, in sub\r\n                return _compile(pattern, flags).sub(repl, string, count)\r\n              File \"/home/kote/buildstream/buildstream/src/buildstream/_frontend/profile.py\", line 70, in subst_callback\r\n                formatted = inner_token.format(**{varname: value})\r\n            KeyError: 'build-deps'\r\n    ```\r\n\r\n3. There are probably more edge cases that I haven't considered.\r\n\r\n\r\n## What is the current bug behavior?\r\n\r\nBuildStream either throws a stack trace or prints incorrect output.\r\n\r\n\r\n## What is the expected correct behavior?\r\n\r\nBuildStream never throws a stack trace, no matter the input. If the input format is irrevocably messed up, we give a nice error message. And, for everything else, we should get the output in the expected format.\r\n\r\n\r\n## Possible fixes\r\n\r\n[[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) mentioned that the greediness of our regexes might be at play here. If that's the issue, we can look into making them miser searches instead.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1307/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1307/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1295", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1295/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1295/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1295/events", "html_url": "https://github.com/apache/buildstream/issues/1295", "id": 800927551, "node_id": "MDU6SXNzdWU4MDA5Mjc1NTE=", "number": 1295, "title": "Specifying `command-subdir` doesn't change the element's cache key", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-04T04:48:16Z", "updated_at": "2021-02-04T04:49:29Z", "closed_at": "2021-02-04T04:49:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1295)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Apr 28, 2020, 08:55\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThe `command-subdir` variable from any BuildElement is not taken into account in the cache key's calculation, making it possible to have two elements share the same key.\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n```\ngit clone https://gitlab.com/BenjaminSchubert/bst-bugs\ncd bst-bugs/\nbst show\n```\n\nBoth `elem1` and `elem2` will have the same cache key. Although their command-subdir is different.\n\nThose are dummy elements just for demonstration purposes, but real life scenarios might require multiple sources checked out and then build from one of them. It is therefore possible to get conflicts in real projects.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1295/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1286", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1286/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1286/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1286/events", "html_url": "https://github.com/apache/buildstream/issues/1286", "id": 800923499, "node_id": "MDU6SXNzdWU4MDA5MjM0OTk=", "number": 1286, "title": "Failed to track git repo: \"Empty reply from server\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-04T04:38:19Z", "updated_at": "2021-02-04T04:39:00Z", "closed_at": "2021-02-04T04:39:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1286)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Apr 11, 2020, 18:32\n\nCloning the repo directly with git is ok, but when we try to track it fails:\n\n```\n> bst track bootstrap/build/rsync.bst\n[--:--:--] START   bootstrap/build/rsync.bst-0: Tracking master from https://git.samba.org/rsync.git\n    Running host command /home/jjardon/freedesktop-sdk/freedesktop-sdk: /usr/bin/git clone --mirror -n https://git.samba.org/rsync.git /home/jjardon/.cache/buildstream/sources/git_tag/tmp3v2wfqm2\n    [--:--:--] STATUS  bootstrap/build/rsync.bst-0: Running host command\n\n        /usr/bin/git clone --mirror -n https://git.samba.org/rsync.git /home/jjardon/.cache/buildstream/sources/git_tag/tmp3v2wfqm2\n    Cloning into bare repository '/home/jjardon/.cache/buildstream/sources/git_tag/tmp3v2wfqm2'...\n    Running host command /home/jjardon/.cache/buildstream/sources/git_tag/https___git_samba_org_rsync_git: /usr/bin/git fetch origin --prune --tags --force\n    [--:--:--] STATUS  bootstrap/build/rsync.bst-0: Running host command\n\n        /usr/bin/git fetch origin --prune --tags --force\n    fatal: unable to access 'https://git.samba.org/rsync.git/': Empty reply from server\n    [00:00:07] FAILURE bootstrap/build/rsync.bst-0: Tracking master from https://git.samba.org/rsync.git\n    [00:00:07] FAILURE bootstrap/build/rsync.bst: git_tag source at bootstrap/build/rsync.bst [line 14 column 2]: Failed to fetch from remote git repository: https://git.samba.org/rsync.git\n    ======================================================================\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1286/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1286/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1283", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1283/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1283/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1283/events", "html_url": "https://github.com/apache/buildstream/issues/1283", "id": 800921821, "node_id": "MDU6SXNzdWU4MDA5MjE4MjE=", "number": 1283, "title": "Seems tests fail on modern distributions (or they run extremely slow)", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-04T04:34:10Z", "updated_at": "2021-02-04T04:35:52Z", "closed_at": "2021-02-04T04:35:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1283)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Apr 4, 2020, 22:25\n\n- Archlinux: https://gitlab.com/BuildStream/buildstream-docker-images/-/jobs/498943572\n- Fedora 32: https://gitlab.com/BuildStream/buildstream-docker-images/-/jobs/498776727\n- Ubuntu 20.04: https://gitlab.com/BuildStream/buildstream-docker-images/-/jobs/498827818", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1283/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1283/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1270", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1270/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1270/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1270/events", "html_url": "https://github.com/apache/buildstream/issues/1270", "id": 800916418, "node_id": "MDU6SXNzdWU4MDA5MTY0MTg=", "number": 1270, "title": "bst checkout fails to find the correct artifact in non strict mode", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/2", "html_url": "https://github.com/apache/buildstream/milestone/2", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/2/labels", "id": 6382580, "node_id": "MDk6TWlsZXN0b25lNjM4MjU4MA==", "number": 2, "title": "BuildStream 2.0 API Freeze", "description": "This milestone represents issues which need to be solved in order to reach an establish stable API for BuildStream 2.0.\r\n\r\nAfter completing these tasks it will be a good time to release an initial BuildStream 2.0 beta release and start focusing on fixing issues leading up to an actual 2.0 stable.\r\n", "creator": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 29, "state": "open", "created_at": "2021-02-02T13:29:00Z", "updated_at": "2022-04-15T09:15:44Z", "due_on": null, "closed_at": null}, "comments": 4, "created_at": "2021-02-04T04:21:23Z", "updated_at": "2022-02-22T08:47:34Z", "closed_at": "2022-02-22T08:47:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1270)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Mar 23, 2020, 06:12\n\n## Summary\n\n\n\n\n## Steps to reproduce\n\nNot sure it is reproducible, but here is what happens with me. I'm using gnome-build-meta commit 6f538b0529b288b0af257906f0f2b11a34a8e5fb, and have the following in my config.\n\n```\nprojects:\n  freedesktop-sdk:\n    strict: False\n  gnome:\n    strict: False\n```\n\n```\n> bst build vm/image.bst\n> bst checkout vm/image.bst # => error\n> bst --strict build vm/image.bst\n> bst checkout vm/image.bst # => error\n> bst --strict checkout vm/image.bst # => works\n```\n\n## Relevant logs and/or screenshots\n\n[bst-show.log](/uploads/c3b14a0f32ec81498418508dedbd6ad3/bst-show.log)\n[bst--strict-show.log](/uploads/eadff80450e4e2ee6377aab2e3c98a04/bst--strict-show.log)\n\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.4\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1270/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1263", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1263/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1263/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1263/events", "html_url": "https://github.com/apache/buildstream/issues/1263", "id": 800912178, "node_id": "MDU6SXNzdWU4MDA5MTIxNzg=", "number": 1263, "title": "Caching buildtrees only works with BuildElement (cannot enter a shell after a failed build)", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/3", "html_url": "https://github.com/apache/buildstream/milestone/3", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/3/labels", "id": 7687468, "node_id": "MI_kwDOE_tNMc4AdU0s", "number": 3, "title": "BuildStream 2.0 stable blockers", "description": "This milestone is intended to record sensible blockers to an actual 2.0 stable release of BuildStream.\r\n", "creator": {"login": "gtristan", "id": 1928351, "node_id": "MDQ6VXNlcjE5MjgzNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1928351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtristan", "html_url": "https://github.com/gtristan", "followers_url": "https://api.github.com/users/gtristan/followers", "following_url": "https://api.github.com/users/gtristan/following{/other_user}", "gists_url": "https://api.github.com/users/gtristan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtristan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtristan/subscriptions", "organizations_url": "https://api.github.com/users/gtristan/orgs", "repos_url": "https://api.github.com/users/gtristan/repos", "events_url": "https://api.github.com/users/gtristan/events{/privacy}", "received_events_url": "https://api.github.com/users/gtristan/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "open", "created_at": "2022-02-17T04:49:22Z", "updated_at": "2022-10-11T08:10:47Z", "due_on": null, "closed_at": null}, "comments": 9, "created_at": "2021-02-04T04:12:06Z", "updated_at": "2022-08-11T13:54:12Z", "closed_at": "2022-08-11T13:54:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1263)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Feb 15, 2020, 14:16\n\n## Summary\n\nWhen I try to enter a shell on a build failure, I get an error instead.\n\n## Steps to reproduce\n\n- default configuration of buildstream\n- try to build an element that fails\n- enter `s` at the prompt\n\n\n## What is the current bug behavior?\n\n```\nBuild failure on element: vm/repo.bst\n\nChoose one of the following options:\n  (c)ontinue  - Continue queueing jobs as much as possible\n  (q)uit      - Exit after all ongoing jobs complete\n  (t)erminate - Terminate any ongoing jobs and exit\n  (r)etry     - Retry this job\n  (l)og       - View the full log file\n  (s)hell     - Drop into a shell in the failed build sandbox\n\nPressing ^C will terminate jobs and exit\n\n\nChoice: [continue]: s\n\nDropping into an interactive shell in the failed build sandbox\n\nError while attempting to create interactive shell: Buildtree is not cached locally or in available remotes\n```\n\n## What is the expected correct behavior?\n\na shell into the failed build.\n\n\n## Other relevant information\n\n* BuildStream version affected: 0591b0c8b038aa9f054b295748f3423384711d50\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1263/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1249", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1249/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1249/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1249/events", "html_url": "https://github.com/apache/buildstream/issues/1249", "id": 800907366, "node_id": "MDU6SXNzdWU4MDA5MDczNjY=", "number": 1249, "title": "On build error, can't enter twice in the shell", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-04T04:01:19Z", "updated_at": "2021-02-04T04:02:20Z", "closed_at": "2021-02-04T04:02:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1249)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Jan 13, 2020, 17:42\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen building a BuildStream element and an error happen, we get offered to enter in a shell to debug.\n\nIf we enter this shell, exit it immediately, and re-enter it, we get a huge stack trace.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n- Build an element that will fail\n- choose 'shell' at the prompt\n- `exit`\n- choose 'shell' again\n- crash\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nWe get a huge stack trace.\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nWe should re-enter the shell\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\n[--:--:--][        ][    main:core activity                 ] BUG\n\n    Traceback (most recent call last):\n      File \"/opt/bb/lib/python3.7/asyncio/events.py\", line 88, in _run\n        self._context.run(self._callback, *self._args)\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/_scheduler/jobs/job.py\", line 451, in _parent_child_completed\n        self._scheduler.job_completed(self, status)\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/_scheduler/scheduler.py\", line 334, in job_completed\n        self._notify(notification)\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/_scheduler/scheduler.py\", line 584, in _notify\n        self._notifier()\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/_stream.py\", line 1648, in _scheduler_notification_handler\n        self._state.fail_task(notification.job_action, notification.full_name, notification.element)\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/_state.py\", line 337, in fail_task\n        cb(action_name, full_name, element)\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/_frontend/app.py\", line 620, in _job_failed\n        self._handle_failure(element, action_name, failure, full_name)\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/_frontend/app.py\", line 690, in _handle_failure\n        None, Scope.BUILD, prompt, isolate=True, usebuildtree=\"always\", unique_id=unique_id\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/_stream.py\", line 261, in shell\n        scope, directory, mounts=mounts, isolate=isolate, prompt=prompt, command=command, usebuildtree=buildtree\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/element.py\", line 1922, in _shell\n        with self._prepare_sandbox(scope, directory, shell=True, usebuildtree=usebuildtree) as sandbox:\n      File \"/opt/bb/lib/python3.7/contextlib.py\", line 112, in __enter__\n        return next(self.gen)\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/element.py\", line 1384, in _prepare_sandbox\n        self.stage(sandbox)\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/buildelement.py\", line 232, in stage\n        self.stage_sources(sandbox, self.get_variable(\"build-root\"))\n      File \"/home/bschubert/buildstream/buildstream/src/buildstream/element.py\", line 880, in stage_sources\n        assert self.__staged_sources_directory is None\n    AssertionError\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1249/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1244", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1244/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1244/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1244/events", "html_url": "https://github.com/apache/buildstream/issues/1244", "id": 800905125, "node_id": "MDU6SXNzdWU4MDA5MDUxMjU=", "number": 1244, "title": "Don't use psutil.Process.cpu_affinity on platform not supporting it", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-04T03:55:25Z", "updated_at": "2021-02-04T03:56:44Z", "closed_at": "2021-02-04T03:56:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1244)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Dec 18, 2019, 18:10\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nSome platforms like AIX/Solaris don't support `get_cpu_affinity`, however, the base platform assumes every thing not `darwin` supports it.\n\nThis results in an exception being thrown on those platforms when trying to do anything.\n\nThis is used at: https://gitlab.com/BuildStream/buildstream/blob/master/src/buildstream/_platform/platform.py#L125\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1244/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1240", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1240/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1240/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1240/events", "html_url": "https://github.com/apache/buildstream/issues/1240", "id": 800903522, "node_id": "MDU6SXNzdWU4MDA5MDM1MjI=", "number": 1240, "title": "Commands to disable remote cache are being ignored / they do not work", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-04T03:50:47Z", "updated_at": "2021-02-04T03:52:31Z", "closed_at": "2021-02-04T03:52:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1240)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Dec 13, 2019, 10:59\n\n## Summary\nIt is not possible to disable remote cache from command line: Seems --fetchers option is not working\n\n## Steps to reproduce\n- `bst --fetchers 0 --pushers 0 build <bst file>`\n\n## What is the current bug behavior?\n-  Artifacts are being pulled from the remote cache\n\n## What is the expected correct behavior?\n- No artifacts are pulled / pushed to the remote cache\n\n\n## Relevant logs and/or screenshots\n\nhttps://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/377427226\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1240/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1240/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1222", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1222/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1222/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1222/events", "html_url": "https://github.com/apache/buildstream/issues/1222", "id": 800897397, "node_id": "MDU6SXNzdWU4MDA4OTczOTc=", "number": 1222, "title": "Frequent failures  with\"timeout waiting for buildbox-casd\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-04T03:34:59Z", "updated_at": "2021-02-04T03:36:56Z", "closed_at": "2021-02-04T03:36:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1222)\nIn GitLab by [[Gitlab user @coldtom]](https://gitlab.com/coldtom) on Nov 26, 2019, 15:49\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\nI've been running bst master a lot recently, and frequently come across a time out while waiting for buildbox-casd to become ready. I'd say this behaviour happens about half the times I invoke bst, at least. This mainly happens when I invoke bst from within podman, I can't remember if it was as bad when I was running buildstream on my host system.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nI get this behaviour pretty consistently when running `bst foo` from inside a buildstream/buildstream:nightly docker image, using podman. Once buildbox-casd starts properly once the rate of failures goes down. I tend to mount a cache into the image too, if that affects the behaviour.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\nHere's the most common example:\n\n```\n[--:--:--][        ][    main:core activity                 ] START   Push                                                                                                                                                                    \n[--:--:--][        ][    main:core activity                 ] START   Loading elements                                                                                                                                                        \n[00:00:14][        ][    main:core activity                 ] FAILURE Loading elements                                                                                                                                                        \n                                                                                                                       \n[00:00:15][        ][    main:core activity                 ] FAILURE Push                                                                                                                                                                    \n                                                                                                                                                                                                                                              \nTimed out waiting for buildbox-casd to become ready                                                                                                                                                                                           \n[--:--:--][        ][    main:core activity                 ] START   Terminating buildbox-casd                                                                                                                                               \n[00:00:00][        ][    main:core activity                 ] SUCCESS Terminating buildbox-casd   \n```\n\nHowever sometimes a stack trace is also included:\n\n```\n[--:--:--][        ][    main:core activity                 ] START   Push                                                                                                                                                                    \n[--:--:--][        ][    main:core activity                 ] START   Loading elements                                                                                                                                                        \nProcess Process-1:                                                                                                                                                                                                                            \nTraceback (most recent call last):                                                                                                                                                                                                            \n  File \"/usr/lib64/python3.7/multiprocessing/process.py\", line 297, in _bootstrap                                                                                                                                                             \n    self.run()                                                                                                                                                                                                                                \n  File \"/usr/lib64/python3.7/multiprocessing/process.py\", line 99, in run                                                                                                                                                                     \n    self._target(*self._args, **self._kwargs)                                                                                                                                                                                                 \n  File \"/usr/local/lib64/python3.7/site-packages/buildstream/_cas/cascache.py\", line 1018, in _subprocess_run                                                                                                                                 \n    local_cas = self._connection.get_local_cas()                                                                                                                                                                                              \n  File \"/usr/local/lib64/python3.7/site-packages/buildstream/_cas/casdprocessmanager.py\", line 213, in get_local_cas                                                                                                                          \n    self._establish_connection()                                                                                                                                                                                                              \n  File \"/usr/local/lib64/python3.7/site-packages/buildstream/_cas/casdprocessmanager.py\", line 190, in _establish_connection                                                                                                                  \n    raise CASCacheError(\"Timed out waiting for buildbox-casd to become ready\")                                                                                                                                                                \nbuildstream._exceptions.CASCacheError: Timed out waiting for buildbox-casd to become ready                                                                                                                                                    \n[00:00:14][        ][    main:core activity                 ] FAILURE Loading elements                                                                                                                                                        \n[00:00:15][        ][    main:core activity                 ] FAILURE Push                                                                                                                                                                    \n                                                                                                                                                                                                                                              \nTimed out waiting for buildbox-casd to become ready                                                                                                                                                                                           \n[--:--:--][        ][    main:core activity                 ] START   Terminating buildbox-casd                                                                                                                                               \n[00:00:00][        ][    main:core activity                 ] SUCCESS Terminating buildbox-casd           \n```\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nBuildstream starts properly\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\nOne workaround could be a longer timeout, but that seems to be hiding the problem rather than removing it\n\n## Other relevant information\n\nRunning buildstream/buildstream:nightly-master-98530279 in podman 1.6.2 on arch linux.\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1222/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1222/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1206", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1206/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1206/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1206/events", "html_url": "https://github.com/apache/buildstream/issues/1206", "id": 800885163, "node_id": "MDU6SXNzdWU4MDA4ODUxNjM=", "number": 1206, "title": "Pylint configuration is busted", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-04T03:05:43Z", "updated_at": "2021-02-04T03:06:37Z", "closed_at": "2021-02-04T03:06:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1206)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Nov 13, 2019, 13:23\n\n## Summary\n\nIt seems like we should be getting certain warnings from `pylint` about our codebase but we aren't. I think this is happening because we messed up our pylint configuration when we moved sources into a `src` directory (I can take the blame for that).\n\nWe currently invoke pylint as `pylint src/buildstream tests`. Locally, I tried `pylint src tests` by accident and got a few warnings on master, which was surprising. Later I realized that my invocation was more correct and the warnings were real things that we need to fix.\n\n\n## Steps to reproduce\n\n```\n# This is what we currentl do - everything's fine!\n(lint) root[[Gitlab user @2428e3458936]](https://gitlab.com/2428e3458936):/src# pylint src/buildstream tests\n\n-------------------------------------------------------------------\nYour code has been rated at 10.00/10 (previous run: 9.99/10, +0.01)\n\n# This is what I tried and got new warnings\n(lint) root[[Gitlab user @2428e3458936]](https://gitlab.com/2428e3458936):/src# pylint src tests\n************* Module buildstream.plugins.sources.patch\nsrc/buildstream/plugins/sources/patch.py:83:4: W0221: Parameters differ from overridden 'fetch' method (arguments-differ)\n************* Module buildstream.plugins.sources.bzr\nsrc/buildstream/plugins/sources/bzr.py:104:4: W0221: Parameters differ from overridden 'track' method (arguments-differ)\nsrc/buildstream/plugins/sources/bzr.py:118:4: W0221: Parameters differ from overridden 'fetch' method (arguments-differ)\n************* Module buildstream.plugins.sources.tar\nsrc/buildstream/plugins/sources/tar.py:83:8: W0201: Attribute '__permission' defined outside __init__ (attribute-defined-outside-init)\n************* Module buildstream.plugins.sources.local\nsrc/buildstream/plugins/sources/local.py:78:4: W0221: Parameters differ from overridden 'fetch' method (arguments-differ)\nsrc/buildstream/plugins/sources/local.py:42:0: W0611: Unused utils imported from buildstream (unused-import)\n************* Module buildstream.plugins.sources._downloadablefilesource\nsrc/buildstream/plugins/sources/_downloadablefilesource.py:114:4: W0221: Parameters differ from overridden 'track' method (arguments-differ)\nsrc/buildstream/plugins/sources/_downloadablefilesource.py:131:4: W0221: Parameters differ from overridden 'fetch' method (arguments-differ)\n************* Module buildstream.plugins.sources.pip\nsrc/buildstream/plugins/sources/pip.py:158:4: W0221: Parameters differ from overridden 'track' method (arguments-differ)\nsrc/buildstream/plugins/sources/pip.py:180:4: W0221: Parameters differ from overridden 'fetch' method (arguments-differ)\n************* Module buildstream.plugins.sources.workspace\nsrc/buildstream/plugins/sources/workspace.py:61:4: W0221: Parameters differ from overridden 'track' method (arguments-differ)\nsrc/buildstream/plugins/sources/workspace.py:91:4: W0221: Parameters differ from overridden 'fetch' method (arguments-differ)\nsrc/buildstream/plugins/sources/workspace.py:38:0: W0611: Unused import os (unused-import)\nsrc/buildstream/plugins/sources/workspace.py:40:0: W0611: Unused CasBasedDirectory imported from buildstream.storage._casbaseddirectory (unused-import)\nsrc/buildstream/plugins/sources/workspace.py:42:0: W0611: Unused utils imported from buildstream (unused-import)\n\n-----------------------------------\nYour code has been rated at 9.99/10\n```\n\n\n## What is the current bug behavior?\n\nPylint warnings get hidden.\n\n\n## What is the expected correct behavior?\n\nPylint warnings are reported correctly.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1206/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1206/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1205", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1205/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1205/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1205/events", "html_url": "https://github.com/apache/buildstream/issues/1205", "id": 800884635, "node_id": "MDU6SXNzdWU4MDA4ODQ2MzU=", "number": 1205, "title": "Improve messaging around state of junction elements", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-04T03:04:22Z", "updated_at": "2021-02-04T03:05:36Z", "closed_at": "2021-02-04T03:05:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1205)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Nov 12, 2019, 20:15\n\n## Summary\n\nWhen you (in most cases, an unsuspecting new user) run `bst show` on a junction element, BuildStream will report its status as `buildable`. \"buildable\" quite literally means that it can be built. However, if you try to `bst build` it, BuildStream will tell you that junction elements can't be built.\n\nAs a BuildStream developer I understand why this happens. Nevertheless it's not obvious to new users. It's also not a great UX.\n\n\n## Steps to reproduce\n\nFind a junction element. Run `bst show` and `bst build` on it.\n\n\n## What is the current bug behavior?\n\nBuildStream tells user than an element is \"buildable\" but refuses to build it.\n\n\n## What is the expected correct behavior?\n\nBuildStream either builds it, or doesn't say it's \"buildable\" while reporting its status.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1205/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1205/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1200", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1200/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1200/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1200/events", "html_url": "https://github.com/apache/buildstream/issues/1200", "id": 800882994, "node_id": "MDU6SXNzdWU4MDA4ODI5OTQ=", "number": 1200, "title": "`bst init` does not respect `--no-colors`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-04T03:00:01Z", "updated_at": "2021-02-04T03:01:38Z", "closed_at": "2021-02-04T03:01:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1200)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Nov 11, 2019, 22:51\n\n## Summary\n\nUpon running `bst --no-colors init`, one would expect BuildStream to not print any colored output, but it still does.\n\n\n## Steps to reproduce\n\nRun `bst --no-colors init /tmp/temporary-project`.\n\n\n## What is the current bug behavior?\n\nWe get colored output.\n\n\n## What is the expected correct behavior?\n\nWe don't get colors in the ouput.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1200/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1189", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1189/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1189/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1189/events", "html_url": "https://github.com/apache/buildstream/issues/1189", "id": 800878998, "node_id": "MDU6SXNzdWU4MDA4Nzg5OTg=", "number": 1189, "title": "Check versions of buildbox", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/3", "html_url": "https://github.com/apache/buildstream/milestone/3", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/3/labels", "id": 7687468, "node_id": "MI_kwDOE_tNMc4AdU0s", "number": 3, "title": "BuildStream 2.0 stable blockers", "description": "This milestone is intended to record sensible blockers to an actual 2.0 stable release of BuildStream.\r\n", "creator": {"login": "gtristan", "id": 1928351, "node_id": "MDQ6VXNlcjE5MjgzNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1928351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtristan", "html_url": "https://github.com/gtristan", "followers_url": "https://api.github.com/users/gtristan/followers", "following_url": "https://api.github.com/users/gtristan/following{/other_user}", "gists_url": "https://api.github.com/users/gtristan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtristan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtristan/subscriptions", "organizations_url": "https://api.github.com/users/gtristan/orgs", "repos_url": "https://api.github.com/users/gtristan/repos", "events_url": "https://api.github.com/users/gtristan/events{/privacy}", "received_events_url": "https://api.github.com/users/gtristan/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "open", "created_at": "2022-02-17T04:49:22Z", "updated_at": "2022-10-11T08:10:47Z", "due_on": null, "closed_at": null}, "comments": 9, "created_at": "2021-02-04T02:49:43Z", "updated_at": "2022-08-16T14:33:35Z", "closed_at": "2022-08-16T14:33:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1189)\nIn GitLab by [[Gitlab user @traveltissues]](https://gitlab.com/traveltissues) on Nov 1, 2019, 12:18\n\nA number of issues have been reported with buildstream which were resolved by changing buildbox versions. This is not clearly suggested/indicated to the user. If possible buildstream should attempt to check the versions of buildbox that will be used before doing any work.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1189/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1179", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1179/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1179/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1179/events", "html_url": "https://github.com/apache/buildstream/issues/1179", "id": 800873457, "node_id": "MDU6SXNzdWU4MDA4NzM0NTc=", "number": 1179, "title": "tests/sources/keytest.py is buggy", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-04T02:34:59Z", "updated_at": "2021-02-04T02:36:00Z", "closed_at": "2021-02-04T02:36:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1179)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Oct 22, 2019, 15:32\n\n## Summary\n\nIn `tests/sources/keytest.py`, we try to test that BuildStream never calls `get_unique_key()` on sources before their refs are resolved. We try to do a `soure track` and a `build`. While the tests asserts that the operations were successful, they do not assert that they indeed did what they were suppposed to do.\n\nFor example, in this case,  if you `bst source track key-test.bst` you'd expect its state to go from inconsistent to resolved, but that's not what happens. Similarly, after `bst build key-test.bst`, you'd expect its state to go from resolved to cached, but that doesn't happen either. The state remains inconsistent even after building.\n\nLooking more into it, it seems like the build is never scheduled, `bst build` only ends scheduling one track operation and nothing else. (See terminal output at the bottom)\n\n## Steps to reproduce\n\n```bash\n# Take a fresh clone of buildstream\ncd tests/sources/project_key_test\nbst build --track key-test.bst\nbst show key-test.bst\n# At this point, we expect it to be cached, but it is still inconsistent\n```\n\n## What is the current bug behavior?\n\nThe state of `key-test.bst` _does not_ update correctly after tracking and building.\n\n## What is the expected correct behavior?\n\nThe state of `key-test.bst` does update correctly after tracking and building.\n\n## Possible fixes\n\nThe immediate reason this is happening because the custom plugin used by these tests does not behave correctly. However, even when plugins are misbehaving, BuildStream must cope with that correclty.\n\n## Terminal output\n\n```\n$ bst build --track key-test.bst\n[--:--:--][        ][    main:core activity                 ] START   Build\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving cached state\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving cached state\n[--:--:--][        ][    main:core activity                 ] START   Checking sources\n[00:00:00][        ][    main:core activity                 ] SUCCESS Checking sources\n\nBuildStream Version 1.91.1+21.g27d3c61a\n  Session Start: Tuesday, 22-10-2019 at 15:31:59\n  Project:       key-test (/Users/csingh43/buildstream/bst-tmp/tests/sources/project_key_test)\n  Targets:       key-test.bst\n\nUser Configuration\n  Configuration File:      Default Configuration\n  Cache Directory:         /tmp/bst/buildstream\n  Log Files:               /tmp/bst/buildstream/logs\n  Source Mirrors:          /tmp/bst/buildstream/sources\n  Build Area:              /tmp/bst/buildstream/build\n  Strict Build Plan:       Yes\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nLoaded Plugins\n  Source Plugins\n    - key-test\n\nPipeline\nno reference ???????????????????????????????????????????????????????????????? key-test.bst\n===============================================================================\n[--:--:--][????????][   track:key-test.bst                  ] START   key-test/key-test/????????-track.37166.log\n[00:00:00][????????][   track:key-test.bst                  ] SUCCESS key-test/key-test/????????-track.37166.log\n[00:00:00][        ][    main:core activity                 ] SUCCESS Build\n\nPipeline Summary\n  Total:       1\n  Session:     1\n  Track Queue: processed 1, skipped 0, failed 0\n  Fetch Queue: processed 0, skipped 0, failed 0\n  Build Queue: processed 0, skipped 0, failed 0\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1179/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1179/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1178", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1178/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1178/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1178/events", "html_url": "https://github.com/apache/buildstream/issues/1178", "id": 800873027, "node_id": "MDU6SXNzdWU4MDA4NzMwMjc=", "number": 1178, "title": "BuildStream doesn't check that the artifact remotes has the required capabilities", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-04T02:33:56Z", "updated_at": "2021-02-04T02:34:52Z", "closed_at": "2021-02-04T02:34:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1178)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Oct 22, 2019, 10:19\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nAs seen in https://gitlab.com/BuildStream/buildstream/-/jobs/327518918, when trying to connecting to remote artifact caches that\nare for bst1, BuildStream doesn't check the capabilities and skip them anymore\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nBuildStream fails when a remote artifact cache is missing some capabilities\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\nBuildStream should check for capabilities whenever trying a remote artifact cache", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1178/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1176", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1176/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1176/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1176/events", "html_url": "https://github.com/apache/buildstream/issues/1176", "id": 800871973, "node_id": "MDU6SXNzdWU4MDA4NzE5NzM=", "number": 1176, "title": "Interactive bst operations fail with open workspaces", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-04T02:31:27Z", "updated_at": "2021-02-04T02:32:06Z", "closed_at": "2021-02-04T02:32:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1176)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Oct 18, 2019, 17:46\n\n## Summary\n\nWhen doing any `bst` operations involving an element with open workspace, BuildStream throws an `AssertionError`. Interestingly, this only happens when running `bst` interactively (i.e. when attached to a tty).\n\nThis is probably a regression introduced by the \"Workspaces via CAS\" effort.\n\n## Steps to reproduce\n\n```bash\n# Clone https://gitlab.com/BuildStream/buildstream and cd into it\n#\ncd tests/frontend/project\nbst workspace open import-bin.bst --directory dir\nbst show import-bin.bst\n# Watch bst throw an assertion error\n# Included stack trace at the bottom\n\n# Funnily enough, the following command succeeds\nbst show imort-bin.bst | tee\n# All good!\n```\n\n## What is the current bug behavior?\n\n`bst` throws assertion errors when running any commands on a workspaced element.\n\n\n## What is the expected correct behavior?\n\nWe don't get an assertion error and the command succeeds.\n\n\n## Relevant logs and/or screenshots\n\n```\n# Bad\n/src/tests/frontend/project> bst show import-bin.bst\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving cached state\n[--:--:--][        ][    main:core activity                 ] BUG\n\n    Traceback (most recent call last):\n      File \"/usr/local/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 764, in __call__\n        return self.main(*args, **kwargs)\n      File \"/src/src/buildstream/_frontend/cli.py\", line 244, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 717, in main\n        rv = self.invoke(ctx)\n      File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 1137, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 956, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/usr/local/lib/python3.7/site-packages/click/core.py\", line 555, in invoke\n        return callback(*args, **kwargs)\n      File \"/usr/local/lib/python3.7/site-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/src/src/buildstream/_frontend/cli.py\", line 537, in show\n        except_targets=except_)\n      File \"/src/src/buildstream/_stream.py\", line 151, in load_selection\n        load_refs=load_refs)\n      File \"/src/src/buildstream/_stream.py\", line 1283, in _load\n        self._pipeline.resolve_elements(self.targets)\n      File \"/src/src/buildstream/_pipeline.py\", line 163, in resolve_elements\n        task.add_current_progress()\n      File \"/src/src/buildstream/_state.py\", line 407, in add_current_progress\n        self.set_current_progress(new_progress)\n      File \"/src/src/buildstream/_state.py\", line 392, in set_current_progress\n        self._render_cb()\n      File \"/src/src/buildstream/_messenger.py\", line 424, in _render_status\n        self._render_status_cb()\n      File \"/src/src/buildstream/_frontend/app.py\", line 503, in _maybe_render_status\n        self._status.render()\n      File \"/src/src/buildstream/_frontend/status.py\", line 141, in render\n        text = self._header.render(self._term_width, elapsed)\n      File \"/src/src/buildstream/_frontend/status.py\", line 422, in render\n        usage = cas.get_cache_usage()\n      File \"/src/src/buildstream/_cas/cascache.py\", line 1049, in get_cache_usage\n        self._cache_usage_monitor = _CASCacheUsageMonitor(self)\n      File \"/src/src/buildstream/_cas/cascache.py\", line 1112, in __init__\n        assert utils._is_single_threaded() and not cas.has_open_grpc_channels()\n    AssertionError\n\n# Good\n/src/tests/frontend/project> bst show import-bin.bst | tee\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving cached state\n[00:00:01][        ][    main:core activity                 ] SUCCESS Resolving cached state\n      cached 6c44373cb1ad54802520e6dbea14bedaa2f52f1db33cda96598cadd901d191a2 import-bin.bst Workspace: /src/tests/frontend/project/dir\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1176/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1176/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1175", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1175/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1175/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1175/events", "html_url": "https://github.com/apache/buildstream/issues/1175", "id": 800870967, "node_id": "MDU6SXNzdWU4MDA4NzA5Njc=", "number": 1175, "title": "buildobx-casd doesn't exit cleanly after some BuildStream errors", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-04T02:30:38Z", "updated_at": "2021-02-04T02:31:20Z", "closed_at": "2021-02-04T02:31:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1175)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Oct 18, 2019, 15:07\n\n## Summary\n\nOnce BuildStream throws certain errors, `buildbox-casd` sometimes doesn't exit cleanly. One situation where this is very easy to reproduce is when you run any `bst` commmand in a directory that doesn't have a `project.conf`.\n\n## Steps to reproduce\n\n* Change working directory to anywhere that isn't a BuildStream project\n* Run `bst show`\n\n```\n~> cd /tmp\n/tmp> bst show\nNo project found. You can create a new project like so:\n\n    bst init\n\nError loading project: None of ['project.conf', '.bstproject.yaml'] found in '/tmp' or any of its parent directories\n[--:--:--][        ][    main:core activity                 ] BUG     Buildbox-casd didn't exit cleanly. Exit code: -15, Logs: /root/.cache/buildstream/cas/logs/1571407597.8691778.log\n```\n\n## What is the current bug behavior?\n\n`buildbox-casd` doesn't exit cleanly.\n\n\n## What is the expected correct behavior?\n\n`buildbox-casd` doesn't die.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1175/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1175/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1165", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1165/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1165/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1165/events", "html_url": "https://github.com/apache/buildstream/issues/1165", "id": 800863788, "node_id": "MDU6SXNzdWU4MDA4NjM3ODg=", "number": 1165, "title": "Architecture support should not be hardcoded in the tool", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-04T02:15:55Z", "updated_at": "2021-02-04T02:17:19Z", "closed_at": "2021-02-04T02:17:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1165)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Oct 8, 2019, 23:22\n\n## Summary\nSeems the architectures buildstream supports are now hardcoded in the code (It used to not be the case), so if you try to build for some arch that is not in the list the build fail\n\n## Steps to reproduce\n- Try to build freedesktop-sdk for powerpc64le, for example\n\n## What is the current bug behavior?\n- Build fails reporting the arch is not supported\n\n\n## What is the expected correct behavior?\n- While the easy solution would be to add the new arch to the list inside buildstream code, I think this is something independen from buildstream code and should not be harcoded inside buildstream, but problably in a external file on the specific project", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1165/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1164", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1164/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1164/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1164/events", "html_url": "https://github.com/apache/buildstream/issues/1164", "id": 800863481, "node_id": "MDU6SXNzdWU4MDA4NjM0ODE=", "number": 1164, "title": "OSTree plugin fails with: `TypeError: OSTree.Repo.remote_gpg_import() takes exactly 5 arguments (6 given)`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-04T02:15:08Z", "updated_at": "2021-02-04T02:15:47Z", "closed_at": "2021-02-04T02:15:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1164)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Oct 8, 2019, 15:41\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nOSTree/GObject seem to have changed and now cause BuildStream 1.4's OSTree plugin to fail when importing gpg keys.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n1. Build any old project with an ostree source plugin\n2. Fail\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nA BUG message as pasted below.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nA nice and comfortable build\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n```\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/home/tlater/Documents/Work/buildstream/buildstream-1/buildstream/_scheduler/jobs/job.py\", line 413, in _child_action\n        result = self.child_process()\n      File \"/home/tlater/Documents/Work/buildstream/buildstream-1/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n        return self._action_cb(self._element)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream-1/buildstream/_scheduler/queues/fetchqueue.py\", line 46, in process\n        source._fetch(previous_sources)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream-1/buildstream/source.py\", line 695, in _fetch\n        self.__do_fetch()\n      File \"/home/tlater/Documents/Work/buildstream/buildstream-1/buildstream/source.py\", line 1014, in __do_fetch\n        self.fetch(**kwargs)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream-1/buildstream/plugins/sources/ostree.py\", line 126, in fetch\n        remote_name = self.ensure_remote(self.url)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream-1/buildstream/plugins/sources/ostree.py\", line 194, in ensure_remote\n        _ostree.configure_remote(self.repo, remote_name, url, key_url=gpg_key)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream-1/buildstream/_ostree.py\", line 274, in configure_remote\n        repo.remote_gpg_import(remote, stream, None, 0, None)\n    TypeError: OSTree.Repo.remote_gpg_import() takes exactly 5 arguments (6 given)\n```\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nThe following diff does the trick:\n\n```diff\ndiff --git a/buildstream/_ostree.py b/buildstream/_ostree.py\nindex 5a4039f2..a0c05629 100644\n--- a/buildstream/_ostree.py\n+++ b/buildstream/_ostree.py\n[[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) -271,6 +271,6 [[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) def configure_remote(repo, remote, url, key_url=None):\n         try:\n             gfile = Gio.File.new_for_uri(key_url)\n             stream = gfile.read()\n-            repo.remote_gpg_import(remote, stream, None, 0, None)\n+            repo.remote_gpg_import(remote, stream, None, None)\n         except GLib.GError as e:\n             raise OSTreeError(\"Failed to add gpg key from url '{}': {}\".format(key_url, e.message)) from e\n```\n\n*Unfortunately* it isn't quite so simple, because this will probably break with old ostree/gobject combos. Having done some sleuthing, it seems like this function never changed on the OSTree side, so I suspect this is a GObject change, but I don't have the time to dig into this further right now.\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.2 /milestone %\"BuildStream_v1.4\" /milestone %\"BuildStream_v1.6\" \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1164/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1149", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1149/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1149/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1149/events", "html_url": "https://github.com/apache/buildstream/issues/1149", "id": 800854902, "node_id": "MDU6SXNzdWU4MDA4NTQ5MDI=", "number": 1149, "title": "Autocompletion without buildbox-casd will stacktrace", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-04T01:53:38Z", "updated_at": "2021-02-04T01:54:22Z", "closed_at": "2021-02-04T01:54:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1149)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Oct 2, 2019, 11:07\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nAutocompletion without buildbox-casd will stacktrace\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n1. Install BuildStream without buildbox-casd\n2. Source bash completion (`source src/buildstream/data/bst`)\n3. Type `bst artifact delete <tab> <tab>` when shelled into a project directory\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nStacktrace\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nWe should see a list of files and artifact refs.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\nError instantiating artifact cache: Did not find 'buildbox-casd' in PATH: /home/tlater/Documents/Work/buildstream/.tox/venv/bin:/home/tlater/.local/usr/bin:/home/tlater/.lo\ncal/bin:/usr/lib/llvm/8/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin\ntlater[[Gitlab user @ren]](https://gitlab.com/ren) /home/tlater/Documents/Work/buildstream/tests/integration/project $ bst artifact delete Traceback (most recent call last):\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/bin/bst\", line 11, in <module>\n    sys.exit(cli())\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/click/core.py\", line 764, in __call__\n    return self.main(*args, **kwargs)\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_frontend/cli.py\", line 196, in override_main\n    if main_bashcomplete(self, prog_name, partial(override_completions, args)):\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_frontend/complete.py\", line 335, in main_bashcomplete\n    do_complete(cmd, prog_name, override)\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_frontend/complete.py\", line 325, in do_complete\n    for item in get_choices(cli, prog_name, args, incomplete, override):\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_frontend/complete.py\", line 294, in get_choices\n    choices.extend(get_user_autocompletions(all_args, incomplete, ctx.command, cmd_param, override))\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_frontend/complete.py\", line 243, in get_user_autocompletions\n    incomplete=incomplete)\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_frontend/cli.py\", line 185, in override_completions\n    return complete_artifact(orig_args, args, incomplete)\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_frontend/cli.py\", line 157, in complete_artifact\n    complete_list.extend(ref for ref in ctx.artifactcache.list_artifacts() if ref.startswith(incomplete))\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_context.py\", line 381, in artifactcache\n    self._artifactcache = ArtifactCache(self)\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_artifactcache.py\", line 143, in __init__\n    super().__init__(context)\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_basecache.py\", line 52, in __init__\n    self.cas = context.get_cascache()\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_context.py\", line 512, in get_cascache\n    self._cascache = CASCache(self.cachedir, cache_quota=self.config_cache_quota)\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/_cas/cascache.py\", line 75, in __init__\n    casd_args = [utils.get_host_tool('buildbox-casd')]\n  File \"/home/tlater/Documents/Work/buildstream/.tox/venv/lib/python3.6/site-packages/buildstream/utils.py\", line 480, in get_host_tool\n    raise ProgramNotFoundError(\"Did not find '{}' in PATH: {}\".format(name, search_path))\nbuildstream.utils.ProgramNotFoundError: Did not find 'buildbox-casd' in PATH: /home/tlater/Documents/Work/buildstream/.tox/venv/bin:/home/tlater/.local/usr/bin:/home/tlater\n/.local/bin:/usr/lib/llvm/8/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/bin\n```\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nDon't check for `buildbox-casd` when performing auto-completion\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1149/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1145", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1145/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1145/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1145/events", "html_url": "https://github.com/apache/buildstream/issues/1145", "id": 800853782, "node_id": "MDU6SXNzdWU4MDA4NTM3ODI=", "number": 1145, "title": "When building an artifact with no build-tree generated, an exception is thrown", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-04T01:50:32Z", "updated_at": "2021-02-04T01:51:15Z", "closed_at": "2021-02-04T01:51:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1145)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Sep 26, 2019, 10:54\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen trying to build an artifact fails and no buildtree is generated (e.g. missing a shell in the element), an exception is thrown when trying to push the build-tree.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n- Configure a remote artifact cache\n- Create an element with no build dependencies\n- try building it\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nAn assertion is thrown\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nNothing, an error happened and no build tree was generated, this is expected.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_scheduler/jobs/job.py\", line 775, in child_action\n        result = self.child_process()  # pylint: disable=assignment-from-no-return\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_scheduler/jobs/elementjob.py\", line 105, in child_process\n        return self._action_cb(self._element)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_scheduler/queues/artifactpushqueue.py\", line 46, in _push_or_skip\n        if not element._push():\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/element.py\", line 1937, in _push\n        pushed = self.__artifacts.push(self, self.__artifact)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_artifactcache.py\", line 260, in push\n        if self._push_artifact_blobs(artifact, remote):\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_artifactcache.py\", line 563, in _push_artifact_blobs\n        self.cas._send_directory(remote, artifact_proto.files)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_cas/cascache.py\", line 908, in _send_directory\n        missing_blobs = self.remote_missing_blobs_for_directory(remote, digest)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_cas/cascache.py\", line 508, in remote_missing_blobs_for_directory\n        return self.remote_missing_blobs(remote, required_blobs)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_cas/cascache.py\", line 528, in remote_missing_blobs\n        for required_digest in required_blobs_group:\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_cas/cascache.py\", line 578, in required_blobs_for_directory\n        with open(self.objpath(directory_digest), 'rb') as f:\n    IsADirectoryError: [Errno 21] Is a directory: '/home/buildstream/.cache/buildstream/cas/objects/'\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1145/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1145/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1144", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1144/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1144/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1144/events", "html_url": "https://github.com/apache/buildstream/issues/1144", "id": 800853553, "node_id": "MDU6SXNzdWU4MDA4NTM1NTM=", "number": 1144, "title": "bst shell -b ${ELEMENT} throws assertion when source not present", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-04T01:49:56Z", "updated_at": "2021-02-04T01:50:24Z", "closed_at": "2021-02-04T01:50:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1144)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Sep 26, 2019, 10:38\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen running `bst shell -b ${element}` on an element that is not cached locally, an assertion is thrown\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\n```\nbuildstream[[Gitlab user @be88ff14eeb6]](https://gitlab.com/be88ff14eeb6):~/project$ bst shell -b boost.bst\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving cached state\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving cached state\n[--:--:--][        ][    main:boost.bst                     ] START   Staging dependencies\n[00:00:00][        ][    main:boost.bst                     ] SUCCESS Staging dependencies\n[--:--:--][        ][    main:boost.bst                     ] START   Integrating sandbox\n[00:00:00][        ][    main:boost.bst                     ] SUCCESS Integrating sandbox\n[--:--:--][        ][    main:boost.bst                     ] START   Staging sources\n[--:--:--][        ][    main:core activity                 ] START   Terminating buildbox-casd\n[00:00:00][        ][    main:core activity                 ] SUCCESS Terminating buildbox-casd\n[--:--:--][        ][    main:core activity                 ] BUG     \n\n    Traceback (most recent call last):\n      File \"/usr/local/bin/bst\", line 10, in <module>\n        sys.exit(cli())\n      File \"/usr/local/lib/python3.7/dist-packages/click/core.py\", line 764, in __call__\n        return self.main(*args, **kwargs)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/cli.py\", line 235, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/usr/local/lib/python3.7/dist-packages/click/core.py\", line 717, in main\n        rv = self.invoke(ctx)\n      File \"/usr/local/lib/python3.7/dist-packages/click/core.py\", line 1137, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/usr/local/lib/python3.7/dist-packages/click/core.py\", line 956, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/usr/local/lib/python3.7/dist-packages/click/core.py\", line 555, in invoke\n        return callback(*args, **kwargs)\n      File \"/usr/local/lib/python3.7/dist-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/cli.py\", line 667, in shell\n        pull_dependencies=pull_dependencies)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_stream.py\", line 234, in shell\n        usebuildtree=buildtree)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/element.py\", line 1964, in _shell\n        with self._prepare_sandbox(scope, directory, shell=True, usebuildtree=usebuildtree) as sandbox:\n      File \"/usr/lib/python3.7/contextlib.py\", line 112, in __enter__\n        return next(self.gen)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/element.py\", line 1430, in _prepare_sandbox\n        self.stage(sandbox)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/buildelement.py\", line 233, in stage\n        self.stage_sources(sandbox, self.get_variable('build-root'))\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/element.py\", line 903, in stage_sources\n        self._stage_sources_in_sandbox(sandbox, directory)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/element.py\", line 1463, in _stage_sources_in_sandbox\n        self._stage_sources_at(host_vdirectory, usebuildtree=sandbox._usebuildtree)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/element.py\", line 1500, in _stage_sources_at\n        assert self._source_cached()\n    AssertionError\n```\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nA nice error is shown", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1144/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1142", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1142/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1142/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1142/events", "html_url": "https://github.com/apache/buildstream/issues/1142", "id": 800852251, "node_id": "MDU6SXNzdWU4MDA4NTIyNTE=", "number": 1142, "title": "Autocompletion of artifacts is throwing stack traces", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-04T01:46:22Z", "updated_at": "2021-02-04T01:47:16Z", "closed_at": "2021-02-04T01:47:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1142)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Sep 24, 2019, 16:19\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen trying to autocomplete an artifact, BuildStream throws an exception\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n`bst artifact delete <TAB> <TAB>`\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\nbuildstream[[Gitlab user @d09513488e77]](https://gitlab.com/d09513488e77):~/project$ bst artifact delete Traceback (most recent call last):\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_cas/cascache.py\", line 183, in release_resources\n    self._casd_process.wait(timeout=0.5)\n  File \"/usr/lib/python3.7/subprocess.py\", line 990, in wait\n    return self._wait(timeout=timeout)\n  File \"/usr/lib/python3.7/subprocess.py\", line 1616, in _wait\n    raise TimeoutExpired(self.args, timeout)\nsubprocess.TimeoutExpired: Command '['/usr/local/bin/buildbox-casd', '--bind=unix:/tmp/buildstreamkhholy_4/casd.sock', '/home/buildstream/.cache/buildstream']' timed out after 0.5 seconds\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/bin/bst\", line 10, in <module>\n    sys.exit(cli())\n  File \"/usr/local/lib/python3.7/dist-packages/click/core.py\", line 764, in __call__\n    return self.main(*args, **kwargs)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/cli.py\", line 196, in override_main\n    if main_bashcomplete(self, prog_name, partial(override_completions, args)):\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/complete.py\", line 335, in main_bashcomplete\n    do_complete(cmd, prog_name, override)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/complete.py\", line 325, in do_complete\n    for item in get_choices(cli, prog_name, args, incomplete, override):\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/complete.py\", line 294, in get_choices\n    choices.extend(get_user_autocompletions(all_args, incomplete, ctx.command, cmd_param, override))\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/complete.py\", line 243, in get_user_autocompletions\n    incomplete=incomplete)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/cli.py\", line 185, in override_completions\n    return complete_artifact(orig_args, args, incomplete)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/cli.py\", line 159, in complete_artifact\n    return complete_list\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_context.py\", line 193, in __exit__\n    self._cascache.release_resources(self.messenger)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_cas/cascache.py\", line 189, in release_resources\n    with cm:\n  File \"/usr/lib/python3.7/contextlib.py\", line 112, in __enter__\n    return next(self.gen)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_messenger.py\", line 168, in timed_activity\n    self.message(message)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_messenger.py\", line 123, in message\n    assert self._message_handler\nAssertionError\n```\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1142/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1142/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1136", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1136/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1136/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1136/events", "html_url": "https://github.com/apache/buildstream/issues/1136", "id": 800850546, "node_id": "MDU6SXNzdWU4MDA4NTA1NDY=", "number": 1136, "title": "Buildstream should fail if it tries to build a project with a BST_FORMAT_VERSION not supported anymore", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-04T01:42:12Z", "updated_at": "2021-02-04T01:43:06Z", "closed_at": "2021-02-04T01:43:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1136)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Sep 12, 2019, 13:00\n\n## Summary\nSimilar to when we fail when the format_version of the project is greater than BST_FORMAT_VERSION, we should fail when the format_version of the project is below the lowes format supported by current version of buildstream\n\n\n## Steps to reproduce\nTry to build https://gitlab.gnome.org/GNOME/gnome-build-meta/ with buildstream master\n\n\n## What is the current bug behavior?\nbuildstream fails with strange errors as It's trying to build a format it can not undertand anymore\n\n\n## What is the expected correct behavior?\nbuildstream should fail early with a descriptive message announcing it can not build a project with that specific format version", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1136/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1136/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1131", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1131/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1131/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1131/events", "html_url": "https://github.com/apache/buildstream/issues/1131", "id": 800848761, "node_id": "MDU6SXNzdWU4MDA4NDg3NjE=", "number": 1131, "title": "Error loading elements for freedesktop-sdk", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-04T01:37:38Z", "updated_at": "2021-02-04T01:39:45Z", "closed_at": "2021-02-04T01:39:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1131)\nIn GitLab by [[Gitlab user @traveltissues]](https://gitlab.com/traveltissues) on Sep 9, 2019, 15:33\n\n## Summary\nBuildstream fails to load elements in the process of setting up the local cache quota. Affects buildstream master.\n\n## Steps to reproduce\n* clone freedesktop: `git clone https://gitlab.com/freedesktop-sdk/freedesktop-sdk` and checkout `973d7bb340e605a2a143f2b1d3f2fdbf286dfd77`\n* apply https://gitlab.com/snippets/1893382\n* Setup a bst-artifact-server\n* `bst build bootstrap/linux-headers.bst`\n* fails to load elements: https://gitlab.com/snippets/1893394\n\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1131/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1129", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1129/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1129/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1129/events", "html_url": "https://github.com/apache/buildstream/issues/1129", "id": 800848010, "node_id": "MDU6SXNzdWU4MDA4NDgwMTA=", "number": 1129, "title": "Error when src-push to a remote: Message larger than max", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-04T01:35:41Z", "updated_at": "2021-02-04T01:36:52Z", "closed_at": "2021-02-04T01:36:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1129)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Sep 9, 2019, 11:01\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen trying to push sources to a `bst-artifact-server`, the job fails with a grpc error.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n- clone freedesktop: `git clone https://gitlab.com/freedesktop-sdk/freedesktop-sdk\n- Setup a bst-artifact-server\n- bst build linux-headers.bst\n- fail\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\n[00:00:24][a508b55d][src-push:stage0/freedesktop-junction.bst:bootstrap/linux-headers.bst] BUG     Src-push\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_scheduler/jobs/job.py\", line 775, in child_action\n        result = self.child_process()  # pylint: disable=assignment-from-no-return\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_scheduler/jobs/elementjob.py\", line 105, in child_process\n        return self._action_cb(self._element)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_scheduler/queues/sourcepushqueue.py\", line 44, in _push_or_skip\n        if not element._source_push():\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/element.py\", line 1904, in _source_push\n        if not self.__sourcecache.push(source):\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_sourcecache.py\", line 257, in push\n        self.cas._send_directory(remote, source_proto.files)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_cas/cascache.py\", line 968, in _send_directory\n        self.send_blobs(remote, missing_blobs)\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_cas/cascache.py\", line 962, in send_blobs\n        batch.send()\n      File \"/usr/local/lib/python3.7/dist-packages/buildstream/_cas/casremote.py\", line 328, in send\n        batch_response = local_cas.UploadMissingBlobs(self._request)\n      File \"/usr/local/lib/python3.7/dist-packages/grpc/_channel.py\", line 565, in __call__\n        return _end_unary_response_blocking(state, call, False, None)\n      File \"/usr/local/lib/python3.7/dist-packages/grpc/_channel.py\", line 467, in _end_unary_response_blocking\n        raise _Rendezvous(state, None, None, deadline)\n    grpc._channel._Rendezvous: <_Rendezvous of RPC that terminated with:\n        status = StatusCode.RESOURCE_EXHAUSTED\n        details = \"Received message larger than max (4660631 vs. 4194304)\"\n        debug_error_string = \"{\"created\":\"[[Gitlab user @1568022618]](https://gitlab.com/1568022618).298376400\",\"description\":\"Error received from peer unix:/tmp/buildstreamlzh5pivm/casd.sock\",\"file\":\"src/core/lib/surface/call.cc\",\"file_line\":1052,\"grpc_message\":\"Received message larger than max (4660631 vs. 4194304)\",\"grpc_status\":8}\"\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1129/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1128", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1128/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1128/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1128/events", "html_url": "https://github.com/apache/buildstream/issues/1128", "id": 800847685, "node_id": "MDU6SXNzdWU4MDA4NDc2ODU=", "number": 1128, "title": "Exception thrown when retrying a task", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-04T01:34:52Z", "updated_at": "2021-02-04T01:35:33Z", "closed_at": "2021-02-04T01:35:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1128)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Sep 9, 2019, 10:39\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen trying to retry a failed task, it is possible that a stack trace is shown and BuildStream becomes blocked.\n\nI had more success with reproducing the bug when pushing to an artifact server and waiting a few minutes before\npressing 'c' to continue\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n- Build a failing artifact\n- At the question prompt, wait a bit\n- hit continue\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nA strack trace is thrown\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThere should be no stacktrace and the underlying problem should be handled\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n```\nPush failure on element: stage0/freedesktop-junction.bst:bootstrap/build/base-sdk/filtered.bst\n\nChoose one of the following options:\n  (c)ontinue  - Continue queueing jobs as much as possible\n  (q)uit      - Exit after all ongoing jobs complete\n  (t)erminate - Terminate any ongoing jobs and exit\n  (r)etry     - Retry this job\n  (l)og       - View the full log file\n\nPressing ^C will terminate jobs and exit\n\nChoice: [continue]: r\n\nRetrying failed job\n\nUnknown exception in SIGCHLD handler\nTraceback (most recent call last):\n  File \"/usr/lib/python3.7/asyncio/unix_events.py\", line 876, in _sig_chld\n    self._do_waitpid_all()\n  File \"/usr/lib/python3.7/asyncio/unix_events.py\", line 942, in _do_waitpid_all\n    self._do_waitpid(pid)\n  File \"/usr/lib/python3.7/asyncio/unix_events.py\", line 976, in _do_waitpid\n    callback(pid, returncode, *args)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_scheduler/jobs/job.py\", line 516, in _parent_child_completed\n    self._scheduler.job_completed(self, status)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_scheduler/scheduler.py\", line 251, in job_completed\n    self._state.fail_task(job.action_name, job.name, element=element_info)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_state.py\", line 331, in fail_task\n    cb(action_name, full_name, element)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/app.py\", line 581, in _job_failed\n    self._handle_failure(element, action_name, failure, full_name)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_frontend/app.py\", line 667, in _handle_failure\n    self.stream._failure_retry(action_name, unique_id)\n  File \"/usr/local/lib/python3.7/dist-packages/buildstream/_stream.py\", line 1338, in _failure_retry\n    queue._task_group.failed_tasks.remove(element._get_full_name())\nValueError: list.remove(x): x not in list\n[00:12:33][11e5e5ba][   fetch:stage0/freedesktop-junction.bst:bootstrap/build/binutils-stage1.bst] BUG     Fetch\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1128/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1126", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1126/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1126/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1126/events", "html_url": "https://github.com/apache/buildstream/issues/1126", "id": 800845863, "node_id": "MDU6SXNzdWU4MDA4NDU4NjM=", "number": 1126, "title": "Cache resolution is slow", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109199, "node_id": "MDU6TGFiZWwyNzA5MTA5MTk5", "url": "https://api.github.com/repos/apache/buildstream/labels/optimization", "name": "optimization", "color": "A295AA", "default": false, "description": "Make BuildStream faster and use less resources"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-02-04T01:30:17Z", "updated_at": "2021-02-04T01:32:53Z", "closed_at": "2021-02-04T01:32:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1126)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Sep 8, 2019, 13:15\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThe new cache state resolution is too slow.\n\nIt is able of resolving the state of locally cached elements at the speed of roughly 7/s.\n\nOn a project with hundred/thousands of packages, this makes is unusable\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n- Take any reasonable sized project\n- Build everything\n- bst show... and wait\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n \nThis takes ages\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThis should be as fast as bst1 at least.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1126/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1123", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1123/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1123/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1123/events", "html_url": "https://github.com/apache/buildstream/issues/1123", "id": 800845339, "node_id": "MDU6SXNzdWU4MDA4NDUzMzk=", "number": 1123, "title": "test failures on wsl", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-04T01:28:47Z", "updated_at": "2021-02-04T01:29:38Z", "closed_at": "2021-02-04T01:29:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1123)\nIn GitLab by [[Gitlab user @traveltissues]](https://gitlab.com/traveltissues) on Sep 6, 2019, 19:32\n\nthere seem to currently be at least three failures in local testing with py36: \n* tests/sandboxes/mounting/mount_simple.py::test_bind_mount\n  - https://gitlab.com/snippets/1892870\n\nthese seem to be due to casd api change:\n* tests/artifactcache/expiry.py::test_invalid_cache_quota[1-success-None]\n* tests/artifactcache/expiry.py::test_invalid_cache_quota[0-success-None]\n  - https://gitlab.com/snippets/1892871", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1123/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1123/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1121", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1121/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1121/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1121/events", "html_url": "https://github.com/apache/buildstream/issues/1121", "id": 800844407, "node_id": "MDU6SXNzdWU4MDA4NDQ0MDc=", "number": 1121, "title": "pytest fails to import `testing/_sourcetests/conftest.py` when running without usedevelop", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-04T01:26:15Z", "updated_at": "2021-02-04T01:27:59Z", "closed_at": "2021-02-04T01:27:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1121)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Sep 5, 2019, 17:34\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen running the test suite with `tox -e <py>-nocover`, pytest will get confused with the two different `conftest.py` variants that end up in its path and blow up.\n\n## Steps to reproduce\n\n1. Run `tox -e <py>-nocover`\n2. ???\n3. No, seriously, ???\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n\n## What is the current bug behavior?\n\nPytest blows up.\n\n[//]: # (What actually happens)\n\n\n## What is the expected correct behavior?\n\nPytest should test my terrible code and tell me what's wrong with it.\n\n[//]: # (What you should see instead)\n\n\n## Relevant logs and/or screenshots\n\nhttps://hastebin.com/ujubacozes.cs\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nThis seems to be related to not setting `usedevelop` in the tox config - [[Gitlab user @juergbi]](https://gitlab.com/juergbi) and I doubt that we *want* `usedevelop` to be disabled for `nocover`, so simply disabling that might solve the problem. It'd be nice to figure out why this happens though.\n\n----\n[//]: # (To review information about possible relevant labels for this issue please view the list of labels: https://gitlab.com/BuildStream/buildstream/labels)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1121/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1120", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1120/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1120/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1120/events", "html_url": "https://github.com/apache/buildstream/issues/1120", "id": 800843922, "node_id": "MDU6SXNzdWU4MDA4NDM5MjI=", "number": 1120, "title": "Interrupt handling during a task that involves cascache grpc processes is very flaky", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-04T01:25:00Z", "updated_at": "2021-02-04T01:26:07Z", "closed_at": "2021-02-04T01:26:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1120)\nIn GitLab by [[Gitlab user @tpollard]](https://gitlab.com/tpollard) on Sep 4, 2019, 16:29\n\n## Summary\n\nManually interrupting a task/job that involves interaction with local cascache's grpc calls (such as a fetch, which in turn leads to source caching) very rarely leaves bst in a state to continue once the user has instructed the interrupt to exit & continue as an unhandled exception is thrown. I've also seen this occur on non source cache operations, such as when element artifacts are being cached.\n\n\n## Steps to reproduce\n\n* Build something that isn't cached (I usually uses /docs/examples/autotools hello.bst for testing)\n* ctrl+c out when the UI is showing that fetch jobs are on-going\n* submit `c` to continue & release the interrupt\n\n## What is the current bug behavior?\n\n[//]: # An unhandled grpc exception is thrown leaving bst in a state which it can't recover from\n\n\n## What is the expected correct behavior?\n\n[//]: # bst handles the exception and can continue operating\n\n\n## Relevant logs and/or screenshots\n\n```\n[--:--:--][96c13701][   fetch:base/alpine.bst               ] START   autotools/base-alpine/96c13701-fetch.18085.log\n[--:--:--][f3b6a558][   fetch:hello.bst                     ] START   autotools/hello/f3b6a558-fetch.18087.log\n[--:--:--][96c13701][   fetch:base/alpine.bst               ] START   Fetching https://bst-integration-test-images.ams3.cdn.digitaloceanspaces.com/integration-tests-base.v1.x86_64.tar.xz\n[--:--:--][f3b6a558][   fetch:hello.bst                     ] START   Fetching http://ftpmirror.gnu.org/gnu/automake/automake-1.16.tar.gz\n[00:00:02][96c13701][   fetch:base/alpine.bst               ] SUCCESS Fetching https://bst-integration-test-images.ams3.cdn.digitaloceanspaces.com/integration-tests-base.v1.x86_64.tar.xz\n[--:--:--][96c13701][    main:base/alpine.bst               ] STATUS  Fetch suspending\n[--:--:--][f3b6a558][    main:hello.bst                     ] STATUS  Fetch suspending\n\nUser interrupted with ^C\n\nChoose one of the following options:\n  (c)ontinue  - Continue queueing jobs as much as possible\n  (q)uit      - Exit after all ongoing jobs complete\n  (t)erminate - Terminate any ongoing jobs and exit\n\nPressing ^C again will terminate jobs and exit\n\nChoice: [continue]: c\n\nContinuing\n\n[--:--:--][96c13701][    main:base/alpine.bst               ] STATUS  Fetch resuming\n[--:--:--][f3b6a558][    main:hello.bst                     ] STATUS  Fetch resuming\n[00:00:02][f3b6a558][   fetch:hello.bst                     ] SUCCESS Fetching http://ftpmirror.gnu.org/gnu/automake/automake-1.16.tar.gz\n[00:00:08][f3b6a558][   fetch:hello.bst                     ] BUG     Fetch\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/job.py\", line 775, in child_action\n        result = self.child_process()  # pylint: disable=assignment-from-no-return\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 105, in child_process\n        return self._action_cb(self._element)\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/_scheduler/queues/fetchqueue.py\", line 87, in _fetch_not_original\n        element._fetch(fetch_original=False)\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/element.py\", line 2192, in _fetch\n        self.__cache_sources()\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/element.py\", line 3095, in __cache_sources\n        self.__sourcecache.commit(source, [])\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/_sourcecache.py\", line 154, in commit\n        vdir.import_files(tmpdir, can_link=True)\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/storage/_casbaseddirectory.py\", line 391, in import_files\n        result=result, can_link=can_link)\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/storage/_casbaseddirectory.py\", line 281, in _import_files_from_directory\n        can_link=can_link)\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/storage/_casbaseddirectory.py\", line 295, in _import_files_from_directory\n        can_link=can_link)\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/storage/_casbaseddirectory.py\", line 142, in _add_file\n        entry.digest = self.cas_cache.add_object(path=path, link_directly=can_link)\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/_cas/cascache.py\", line 467, in add_object\n        local_cas = self._get_local_cas()\n      File \"/home/tom/.local/lib/python3.7/site-packages/buildstream/_cas/cascache.py\", line 111, in _get_local_cas\n        capabilities.GetCapabilities(remote_execution_pb2.GetCapabilitiesRequest())\n      File \"/home/tom/.local/lib/python3.7/site-packages/grpc/_channel.py\", line 562, in __call__\n        return _end_unary_response_blocking(state, call, False, None)\n      File \"/home/tom/.local/lib/python3.7/site-packages/grpc/_channel.py\", line 466, in _end_unary_response_blocking\n        raise _Rendezvous(state, None, None, deadline)\n    grpc._channel._Rendezvous: <_Rendezvous of RPC that terminated with:\n    \tstatus = StatusCode.UNAVAILABLE\n    \tdetails = \"Connect Failed\"\n    \tdebug_error_string = \"{\"created\":\"[[Gitlab user @1567609606]](https://gitlab.com/1567609606).864711857\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2715,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1567609606]](https://gitlab.com/1567609606).825517201\",\"description\":\"failed to connect to all addresses\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":456,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1567609606]](https://gitlab.com/1567609606).825507706\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":963,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1567609606]](https://gitlab.com/1567609606).825475671\",\"description\":\"Connection refused\",\"errno\":111,\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":313,\"os_error\":\"Connection refused\",\"syscall\":\"connect\"}]}]}]}\"\n```\n\n## Other relevant information\n\n[//]: Occuring on bst master, 15ae343800a356", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1120/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1119", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1119/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1119/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1119/events", "html_url": "https://github.com/apache/buildstream/issues/1119", "id": 800843584, "node_id": "MDU6SXNzdWU4MDA4NDM1ODQ=", "number": 1119, "title": "BuildStream fails to detect missing source alias if already cached", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-04T01:24:09Z", "updated_at": "2021-08-10T05:43:46Z", "closed_at": "2021-08-08T16:18:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1119)\nIn GitLab by [[Gitlab user @palvarez89]](https://gitlab.com/palvarez89) on Sep 4, 2019, 16:19\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\nIf you use in your elements an alias, that isn't defined in your `project.conf`, and you happen to have that source cached, BuildStream will just use the cached source. This behaviour is confusing, as I had some builds working locally and only detected this error when sending my work to the CI.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n```bash\n# 1 Clone freedesktop sdk\ngit clone https://gitlab.com/freedesktop-sdk/freedesktop-sdk.git\ncd freedesktop-sdk\n\n# 2 Force build glib element, to cache glib sources\nvim element/components/glib.bst # Add 'echo 1' into the integration commands\nbst build components/glib.bst\n\n# 3 Remove 'gnome:' alias\nsed -i -e 's/gnome.*//' include/aliases.yml\n\n# 5 Force rebuild of glib, to reproduce the bug\nvim element/components/glib.bst # Add 'echo 2' into the integration commands\nbst build components/glib.bst\n\n# 6 Remove cached glib source\nfind ~/.cache/buildstream/sources/ -name gnome_glib -exec rm -rf \"{}\" \\;\n\n# 7 Attempt to force rebuild glib\nvim element/components/glib.bst # Add 'echo 3' into the integration commands\nbst build components/glib.bst\n```\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\nAfter step 5, BuildStream builds `glib` successfully.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\nStep 5 should fail, as it doesn't have the `gnome:` alias defined.\n\nIn some cases, you might find yourself copying elements from one project to\nanother, after building some of these elements from the former. The new\nproject will not have the aliases needed for those elements, but the\nbuild will succeed. You will only notice these failures when building\nin a clean environment (e.g. CI)\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %\"BuildStream_v1.4\"\n\n----\n[//]: # (To review information about possible relevant labels for this issue please view the list of labels: https://gitlab.com/BuildStream/buildstream/labels)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1119/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1118", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1118/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1118/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1118/events", "html_url": "https://github.com/apache/buildstream/issues/1118", "id": 800843097, "node_id": "MDU6SXNzdWU4MDA4NDMwOTc=", "number": 1118, "title": "ProvenanceInformation has no attribute `toplevel`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-04T01:22:55Z", "updated_at": "2021-02-04T01:24:01Z", "closed_at": "2021-02-04T01:24:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1118)\nIn GitLab by [[Gitlab user @traveltissues]](https://gitlab.com/traveltissues) on Sep 3, 2019, 17:46\n\ntrying to call `scalar_at` or `mapping_at` of a SequenceNode will produce an attribute error for `toplevel` in `path = [\"[{}]\".format(p) for p in provenance.toplevel._find(self)] + [\"[{}]\".format(index)]` on `toplevel`.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1118/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1115", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1115/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1115/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1115/events", "html_url": "https://github.com/apache/buildstream/issues/1115", "id": 800841222, "node_id": "MDU6SXNzdWU4MDA4NDEyMjI=", "number": 1115, "title": "No instructions to use BuildStream from master", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-04T01:18:29Z", "updated_at": "2021-02-04T01:19:51Z", "closed_at": "2021-02-04T01:19:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1115)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 31, 2019, 12:22\n\n## Summary\n\nAs also outlined at https://gitlab.com/BuildGrid/buildbox/buildbox-common/issues/15 (seems that `buildbox-common` and `buildbox-casd` are also lacking documentation on how to obtain dependencies and install), since the recent move to `buildbox-casd`, it is no longer clear how to run BuildStream master on your host, or even how to run `tox` locally to run the tests.\n\n## Steps to reproduce\n\nBe a user or developer and update your branch to `master`, now try to do anything, like running BuildStream or the tests under `tox`.\n\n## What is the current bug behavior?\n\nThe tests break because there is no `buildbox-casd` in the `PATH`.\n\n## What is the expected correct behavior?\n\nBuildStream works, or provides you with documentation to make it work (of course \"just working\" is often preferable if it can be managed).\n\n## Possible fixes\n\nAmend the `CONTRIBUTING.rst` with a clear explanation of:\n* What dependencies you will need from your distro, e.g. the grpc C++ stuff\n* What dependencies you will need to build and install manually, e.g. `buildbox-common` and `buildbox-casd` projects\n* Links to documentation on how to install the required dependencies\n* Probably some documentation about *what branch* of the buildbox projects should be used\n* Would be nice to have some recommendation about using a local user specific install prefix for these, like `${HOME}/.local`", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1115/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1115/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1109", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1109/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1109/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1109/events", "html_url": "https://github.com/apache/buildstream/issues/1109", "id": 800838716, "node_id": "MDU6SXNzdWU4MDA4Mzg3MTY=", "number": 1109, "title": "bst-artifact-server misconfigured options", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546549, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "The issue is not a bug, or not a BuildStream bug"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-04T01:12:26Z", "updated_at": "2021-02-04T01:12:54Z", "closed_at": "2021-02-04T01:12:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1109)\nIn GitLab by [[Gitlab user @adds68]](https://gitlab.com/adds68) on Aug 19, 2019, 18:44\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nbst-artifact-server provides inconsistent errors based on the options provided.\n\nI was trying to start a new push/pull server, I was under the impression that a push/pull server could be configured for users without *and* with push certificates.\n\nHowever providing these arguments:\n\n```\nbst-artifact-server --port 1102 --server-key /etc/dehydrated/certs/cache.alvarezpiedehierro.com/server.key --server-cert /etc/dehydrated/certs/cache.alvarezpiedehierro.com/server.crt --client-certs /etc/dehydrated/certs/cache.alvarezpiedehierro.com/authorized.crt --enable-push /mnt/volume_ams3_01/repos/artifacts\n```\n\nResulted in:\n\n```\nE0819 17:03:21.349444618    9095 ssl_transport_security.cc:1237] Handshake failed with fatal error SSL_ERROR_SSL: error:100000c0:SSL routines:OPENSSL_internal:PEER_DID_NOT_RETURN_A_CERTIFICATE.\n```\n\nWhich made me think my SSL certificates were invalid.\n\nI then tried to disable pushing and just use port 1101:\n\n```\nbst-artifact-server --port 1101 --server-key /etc/dehydrated/certs/cache.alvarezpiedehierro.com/server.key --server-cert /etc/dehydrated/certs/cache.alvarezpiedehierro.com/server.crt --client-certs /etc/dehydrated/certs/cache.alvarezpiedehierro.com/authorized.crt /mnt/volume_ams3_01/repos/artifacts\n```\nThis also reported:\n\n```\nE0819 17:03:21.349444618    9095 ssl_transport_security.cc:1237] Handshake failed with fatal error SSL_ERROR_SSL: error:100000c0:SSL routines:OPENSSL_internal:PEER_DID_NOT_RETURN_A_CERTIFICATE.\n```\n\nAfter speaking with [[Gitlab user @tlater]](https://gitlab.com/tlater) on IRC, he stated that error seems most likely due to the bst client not returning the push certificate the bst-artifact-server was expecting, which confused me as i had disables *--enable-push* ?\n\nI then realised even though i had disabled push i was still passing *--client-certs*, which seems to still enable the server as a push/pull configuration?\n\nI know this is a stupid error, however i did not realise you needed separate instances for push/pull.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n```\nbst-artifact-server --port 1101 --server-key /etc/dehydrated/certs/cache.alvarezpiedehierro.com/server.key --server-cert /etc/dehydrated/certs/cache.alvarezpiedehierro.com/server.crt --client-certs /etc/dehydrated/certs/cache.alvarezpiedehierro.com/authorized.crt /mnt/volume_ams3_01/repos/artifacts\n```\n\nThis should not create a push/pull server\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nWhen the server is started without *--enable-push* but WITH *--client-certs* the server incorrectly starts as a push/pull server.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThe should either start in a default pull server mode, or warn the users they are passing client certs to a server that isn't configured for pushing.\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----\n[//]: # (To review information about possible relevant labels for this issue please view the list of labels: https://gitlab.com/BuildStream/buildstream/labels)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1109/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1096", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1096/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1096/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1096/events", "html_url": "https://github.com/apache/buildstream/issues/1096", "id": 800829993, "node_id": "MDU6SXNzdWU4MDA4Mjk5OTM=", "number": 1096, "title": "BuildStream cannot show logs of a workspaced build", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-04T00:52:54Z", "updated_at": "2021-02-04T00:55:09Z", "closed_at": "2021-02-04T00:55:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1096)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Jul 31, 2019, 18:28\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen trying to run `bst artifact log` on a workspaced element, BuildStream crashes.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\nhttps://gitlab.com/BuildStream/buildstream/commit/df50bf766070449211540d69c851aad18e868847 is a reproduction", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1096/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1096/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1095", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1095/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1095/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1095/events", "html_url": "https://github.com/apache/buildstream/issues/1095", "id": 800829636, "node_id": "MDU6SXNzdWU4MDA4Mjk2MzY=", "number": 1095, "title": "BuildStream crashes when trying to push a non-build artifact", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-04T00:52:00Z", "updated_at": "2021-02-04T00:52:46Z", "closed_at": "2021-02-04T00:52:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1095)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Jul 31, 2019, 14:39\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen trying to push elements and at least an element is not 'cached', BuildStream crashes horribly\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n- create a new bst element\n- bst push your_element\n\nA test has been pushed to trigger the bug: https://gitlab.com/BuildStream/buildstream/commit/52f140d388a731d48aa0ea32e07c9840e9f73286\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nWe get a stacktrace with `AttributeError`\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nA nice error message/silence\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\n(venv) me[[Gitlab user @myhost]](https://gitlab.com/myhost) $ bst --config user.conf artifact push --remote http://localhost:8000\n[--:--:--][        ][    main:core activity                 ] START   Push\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\n[00:00:04][        ][    main:core activity                 ] SUCCESS Loading elements\n\n    29 subtasks processed\n\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\n\n    29 of 29 subtasks processed\n\n[--:--:--][        ][    main:core activity                 ] START   Initializing remote caches\n[00:00:00][        ][    main:core activity                 ] SUCCESS Initializing remote caches\n[--:--:--][        ][    main:core activity                 ] START   Resolving cached state\n[00:00:05][        ][    main:core activity                 ] SUCCESS Resolving cached state\n[--:--:--][        ][    main:core activity                 ] START   Checking sources\n[00:00:00][        ][    main:core activity                 ] SUCCESS Checking sources\n[--:--:--][        ][    main:core activity                 ] BUG     'NoneType' object has no attribute 'was_workspaced'\n\n    Traceback (most recent call last):\n      File \"/usr/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 764, in __call__\n        return self.main(*args, **kwargs)\n      File \"/home/tellendil/buildstreamgit/re/buildstream/src/buildstream/_frontend/cli.py\", line 223, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 717, in main\n        rv = self.invoke(ctx)\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 1137, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 1137, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 956, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 555, in invoke\n        return callback(*args, **kwargs)\n      File \"/usr/lib/python3.6/site-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/home/tellendil//buildstream/src/buildstream/_frontend/cli.py\", line 1155, in artifact_push\n        ignore_junction_targets=ignore_junction_targets)\n      File \"/home/tellendil//buildstream/src/buildstream/_stream.py\", line 490, in push\n        self._enqueue_plan(elements, queue=push_queue)\n      File \"/home/tellendil/buildstream/src/buildstream/_stream.py\", line 1265, in _enqueue_plan\n        queue.enqueue(plan)\n      File \"/home/tellendil/buildstream/src/buildstream/_scheduler/queues/queue.py\", line 183, in enqueue\n        self._enqueue_element(elt)\n      File \"/home/tellendil/buildstream/src/buildstream/_scheduler/queues/queue.py\", line 367, in _enqueue_element\n        status = self.status(element)\n      File \"/home/tellendil/buildstream/src/buildstream/_scheduler/queues/artifactpushqueue.py\", line 39, in status\n        if element._skip_push():\n      File \"/home/tellendil/buildstream/src/buildstream/element.py\", line 1869, in _skip_push\n        if self.__get_tainted():\n      File \"/home/tellendil/buildstream/src/buildstream/element.py\", line 2507, in __get_tainted\n        workspaced = self.__artifact.get_metadata_workspaced()\n      File \"/home/tellendil/buildstream/src/buildstream/_artifact.py\", line 311, in get_metadata_workspaced\n        self._metadata_workspaced = artifact.was_workspaced\n    AttributeError: 'NoneType' object has no attribute 'was_workspaced'\n```\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1095/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1095/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1086", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1086/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1086/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1086/events", "html_url": "https://github.com/apache/buildstream/issues/1086", "id": 800821330, "node_id": "MDU6SXNzdWU4MDA4MjEzMzA=", "number": 1086, "title": "bst workspace open: `--force` and `--no-checkout` don't work well together", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-04T00:31:56Z", "updated_at": "2021-02-04T00:33:59Z", "closed_at": "2021-02-04T00:33:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1086)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Jul 18, 2019, 18:01\n\n## Summary\n\nWhen opening a workspace with both `--force` and `--no-checokut` options set, I would expect that the contents of the workspace untouched (due to the `--no-checkout` flag) and that BuildStream updates the workspace metadata. However that's not what happens. BuildStream ends up removing all contents of the workspace directory, leaving only the `.bstproject.yaml` file in it.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n```bash\n# Following steps assume that you are running inside a fresh checkout\n# of the BuildStream repository.\n$ cd tests/frontend/project\n\n# Open workspace for the first time (no issues here)\n$ bst workspace open --directory workspace import-bin.bst\n$ find workspace\nworkspace\nworkspace/usr\nworkspace/usr/bin\nworkspace/usr/bin/hello\nworkspace/.bstproject.yaml\n\n# Now re-open it with `--force` and `--no-checkout` (this is where the bug is)\n$ bst workspace open --force --no-checkout --directory workspace import-bin.bst\n$ find workspace\nworkspace\nworkspace/.bstproject.yaml\n```\n\n## What is the current bug behavior?\n\nThe \"workspace\" directory is empty but for the `.bstproject.yaml` file.\n\n\n## What is the expected correct behavior?\n\nThe contents of the \"workspace\" directory should not change after the second `workspace open` command.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1086/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1086/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1084", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1084/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1084/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1084/events", "html_url": "https://github.com/apache/buildstream/issues/1084", "id": 800820845, "node_id": "MDU6SXNzdWU4MDA4MjA4NDU=", "number": 1084, "title": "stack trace with python 3.7 when exiting client with `^C`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-04T00:30:53Z", "updated_at": "2021-02-04T00:31:29Z", "closed_at": "2021-02-04T00:31:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1084)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jul 17, 2019, 15:36\n\n## Summary\n\nWhen using `^C` to terminate all jobs and quit immediately, I am now seeing this new stack trace.\n[//]: # (Summarize the bug encountered concisely)\n\n\n## Steps to reproduce\n\nLaunch a build and interrupt it with `^C`\n\n```\nUser interrupted with ^C\n\nChoose one of the following options:\n  (c)ontinue  - Continue queueing jobs as much as possible\n  (q)uit      - Exit after all ongoing jobs complete\n  (t)erminate - Terminate any ongoing jobs and exit\n\nPressing ^C again will terminate jobs and exit\n\nChoice: [continue]:\n```\n\nWaiting for input... so far so good, now hit `^C` again:\n\n```\nChoice: [continue]:^CException in callback Scheduler._interrupt_event()\nhandle: <Handle Scheduler._interrupt_event()>\nKeyboardInterrupt\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.7/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/scheduler.py\", line 475, in _interrupt_event\n    self._interrupt_callback()\n  File \"/codethink/GNOME/buildstream/buildstream/_frontend/app.py\", line 506, in _interrupt_handler\n    default='continue', err=True)\n  File \"/home/tristan/.local/lib/python3.7/site-packages/click/termui.py\", line 116, in prompt\n    value = prompt_func(prompt)\n  File \"/home/tristan/.local/lib/python3.7/site-packages/click/termui.py\", line 100, in prompt_func\n    return f('')\nSystemError: PyEval_EvalFrameEx returned a result with an error set\n```\n\nOops, ugly stack trace, and we still didnt quit... now we're hanging... hit `^C` one more time:\n```\n^C\nAborted!\n```\n\nNow we're done, but we never actually even terminate ongoing jobs, we've just brutally interrupted and exited the main process.\n\n## What is the current bug behavior?\n\nStack traces.\n\n## What is the expected correct behavior?\n\nCleanly handle the `^C` interrupt as intended and terminate jobs and then exit.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1084/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1084/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1083", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1083/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1083/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1083/events", "html_url": "https://github.com/apache/buildstream/issues/1083", "id": 800820206, "node_id": "MDU6SXNzdWU4MDA4MjAyMDY=", "number": 1083, "title": "source checkout fails when parent directory is not writable", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-04T00:29:26Z", "updated_at": "2021-02-04T00:30:46Z", "closed_at": "2021-02-04T00:30:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1083)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Jul 17, 2019, 13:53\n\n## Summary\r\n\r\nIf you look around [here](https://gitlab.com/BuildStream/buildstream/blob/d55b9e398ca4d95e2ffe70580cddf7911c161d20/buildstream/_stream.py#L1200), you will notice that `_stream.py:_source_checkout()` incorrectly assumes that the parent directory of the destination is going to be writable. This is not a valid assumption and currently results in an ugly stacktrace when it happens:\r\n\r\n```\r\n    Traceback (most recent call last):\r\n      File \"/usr/bin/bst\", line 10, in <module>\r\n        sys.exit(cli())\r\n      File \"/usr/lib/python3.7/site-packages/click/core.py\", line 764, in __call__\r\n        return self.main(*args, **kwargs)\r\n      File \"/usr/lib/python3.7/site-packages/buildstream/_frontend/cli.py\", line 195, in override_main\r\n        standalone_mode=standalone_mode, **extra)\r\n      File \"/usr/lib/python3.7/site-packages/click/core.py\", line 717, in main\r\n        rv = self.invoke(ctx)\r\n      File \"/usr/lib/python3.7/site-packages/click/core.py\", line 1137, in invoke\r\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n      File \"/usr/lib/python3.7/site-packages/click/core.py\", line 1137, in invoke\r\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n      File \"/usr/lib/python3.7/site-packages/click/core.py\", line 956, in invoke\r\n        return ctx.invoke(self.callback, **ctx.params)\r\n      File \"/usr/lib/python3.7/site-packages/click/core.py\", line 555, in invoke\r\n        return callback(*args, **kwargs)\r\n      File \"/usr/lib/python3.7/site-packages/click/decorators.py\", line 27, in new_func\r\n        return f(get_current_context().obj, *args, **kwargs)\r\n      File \"/usr/lib/python3.7/site-packages/buildstream/_frontend/cli.py\", line 792, in source_checkout\r\n        include_build_scripts=build_scripts)\r\n      File \"/usr/lib/python3.7/site-packages/buildstream/_stream.py\", line 660, in source_checkout\r\n        fetch, tar, include_build_scripts)\r\n      File \"/usr/lib/python3.7/site-packages/buildstream/_stream.py\", line 1352, in _source_checkout\r\n        temp_source_dir = tempfile.TemporaryDirectory(dir=location_parent)\r\n      File \"/usr/lib/python3.7/tempfile.py\", line 788, in __init__\r\n        self.name = mkdtemp(suffix, prefix, dir)\r\n      File \"/usr/lib/python3.7/tempfile.py\", line 366, in mkdtemp\r\n        _os.mkdir(file, 0o700)\r\n    PermissionError: [Errno 13] Permission denied: '/tmpj050eb3g'\r\n```\r\n\r\n## Steps to reproduce\r\n\r\n* Find a BuildStream project to test against\r\n* Pick your favorite element\r\n* Run `bst source checkout ELEMENT DIRECTORY`\r\n\r\nwhere DIRECTORY is a location such that you have write permissions there but not for its parent.\r\n\r\n## What is the current bug behavior?\r\n\r\nBuildStream throws a stack trace.\r\n\r\n\r\n## What is the expected correct behavior?\r\n\r\nI get my sources correctly.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1083/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1083/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1081", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1081/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1081/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1081/events", "html_url": "https://github.com/apache/buildstream/issues/1081", "id": 800819526, "node_id": "MDU6SXNzdWU4MDA4MTk1MjY=", "number": 1081, "title": "BuildStream throws an exception on Linux when fuse is unavailable", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-04T00:27:50Z", "updated_at": "2021-02-04T00:29:04Z", "closed_at": "2021-02-04T00:29:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1081)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Jul 14, 2019, 15:11\n\n## Summary\n\nWhen running on a Linux machine without fuse, BuildStream currently throws an exception. (Technically, it's the fuse library throwing it, and BuildStream is failing to suppress it.)\n\nAn example of this can be found in [this CI job](https://gitlab.com/BuildStream/bst-plugins-container/-/jobs/251232522) for bst-plugins-container repository. That CI environment isn't expected to have fuse, since it doesn't contain plugins that require it. It used to work fine until 2 days ago.\n\n## What is the expected correct behavior?\n\nBuildStream doesn't throw an exception when fuse is unavailable.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1081/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1081/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1077", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1077/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1077/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1077/events", "html_url": "https://github.com/apache/buildstream/issues/1077", "id": 800817867, "node_id": "MDU6SXNzdWU4MDA4MTc4Njc=", "number": 1077, "title": "Build skipped when element has duplicate build dependencies.", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-04T00:24:05Z", "updated_at": "2021-02-04T00:25:22Z", "closed_at": "2021-02-04T00:25:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1077)\nIn GitLab by [[Gitlab user @shashwatdalal]](https://gitlab.com/shashwatdalal) on Jul 11, 2019, 17:11\n\n## Summary\nWhen there are duplicate build dependencies (through either `depends` or `build-depends`) for any element kind, its build is skipped.\n \n## Steps to reproduce\nCreate the following files:\n### ./test.bst\n```yaml\nkind: import\nsources:\n- kind: local\n  path: project.conf\n```\n\n### ./multi-build-depends.bst\n```yaml\nkind: <import, stack, compose ...>\n\nsources:\n- kind: local\n  path: project.conf\n\n<depends, build-depends> :\n- test.bst\n- test.bst\n```\nand run `bst build multi-build-depends.bst`\n\n## What is the current bug behavior?\nBuild succeeds without building anything, as it skips `multi-build-depends.bst`.\nRunning `bst build multi-build-depends.bst` multiple times yields: \n```bash\nPipeline\n      cached a3f09bb29fee71f1e2d39e81c4a178fac764514648daf80b1e4c60a4cea54201 test.bst \n     waiting b205458bc8a64e031f76e1bf3003e5fdaa019908ad82cc1909e02787d8e7d9fe dependencies.bst \n===============================================================================\n[00:00:00][        ][    main:core activity                 ] SUCCESS Build\n\nPipeline Summary\n  Total:       2\n  Session:     1\n  Fetch Queue: processed 0, skipped 1, failed 0 \n  Build Queue: processed 0, skipped 0, failed 0 \n```\nAdditionally if a duplicate build-dependency does not exist, and the element is successfully built, but then a duplicate build-dependency is then added, BuildStream does not complain as it sees the element as cached. \n\n## What is the expected correct behavior?\nEither \n1. BuildStream throws an error warning users that there are duplicate build-dependencies \n2. Build is not skipped and BuildStream appropriately deals with duplicate build-dependencies.\n\n/label ~bug\n", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1077/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1077/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1075", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1075/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1075/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1075/events", "html_url": "https://github.com/apache/buildstream/issues/1075", "id": 800816774, "node_id": "MDU6SXNzdWU4MDA4MTY3NzQ=", "number": 1075, "title": "Stack elements permit `build-depends`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-04T00:21:41Z", "updated_at": "2021-02-04T00:23:30Z", "closed_at": "2021-02-04T00:23:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1075)\nIn GitLab by [[Gitlab user @shashwatdalal]](https://gitlab.com/shashwatdalal) on Jul 11, 2019, 16:40\n\n## Summary\nStack elements permit `build-depends` field.\n## Steps to reproduce\nCreate elements with the following configurations\n### ./stack.bst\n```yaml\nkind: stack\nbuild-depends: dependency.bst\n```\n### ./dependency.bst\n```yaml\nkind: import\nsource: \n- kind: local\n  path: project.conf\n```\nand run `bst build stack.bst`\n\n## What is the current bug behavior?\nCurrently there is no error being thrown at `stack.bst` for having a `build-depends` field. Having `build-depends` as a field is incorrect as running `bst artifact checkout stack.bst` will show that the artifact produced is empty rather than containing `project.conf`.\n\n## What is the expected correct behavior?\nAttempting to `bst build` a stack element that contains `build-depends` should fails as it is semantically nonsensical. Instead an error message should be printed suggesting perhaps to change `build-depends` to `depends`.\n\n\n## Possible fixes\nSet `BST_FORBID_BDEPENDS` to `True` for the stack element.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1075/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1075/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1063", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1063/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1063/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1063/events", "html_url": "https://github.com/apache/buildstream/issues/1063", "id": 800802412, "node_id": "MDU6SXNzdWU4MDA4MDI0MTI=", "number": 1063, "title": "Some tests fail on systems without microsecond resolution", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T23:55:33Z", "updated_at": "2021-02-03T23:56:13Z", "closed_at": "2021-02-03T23:56:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1063)\nIn GitLab by [[Gitlab user @willsalmon]](https://gitlab.com/willsalmon) on Jul 4, 2019, 10:25\n\n## Summary\n\nTest `def test_never_delete_required(cli, datafiles):` in `tests/artifactcache/expiry.py`\n\nFails on systems with a mtime resolution of 1second\n\nThis should not be the case and is probably exposing a underlying bug.\n\n\n## Steps to reproduce\n\nRun the test suit on a file system with 1sec mtimes", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1063/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1059", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1059/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1059/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1059/events", "html_url": "https://github.com/apache/buildstream/issues/1059", "id": 800797003, "node_id": "MDU6SXNzdWU4MDA3OTcwMDM=", "number": 1059, "title": "Regression: Unhelpful error message on missing variables", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T23:51:22Z", "updated_at": "2021-02-03T23:53:12Z", "closed_at": "2021-02-03T23:53:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1059)\nIn GitLab by [[Gitlab user @jennis]](https://gitlab.com/jennis) on Jun 28, 2019, 10:19\n\n## Summary\n\nIf a .bst file fails to specify a required variable, we receive a very unhelpful error message.\n\nThis has been reported before in https://gitlab.com/BuildStream/buildstream/issues/253 and was supposedly fixed by !449, however, I am seeing this behaviour on current master.\n\n## Steps to reproduce\nI commented out the url of the tarball for the source of the hello.bst element in our [autotools example](https://gitlab.com/BuildStream/buildstream/tree/master/doc/examples/autotools)\n\n```\n $ cat elements/hello.bst \nkind: autotools\ndescription: |\n\n  Hello world example from automake\n\nvariables:\n\n  # The hello world example lives in the doc/amhello folder.\n  #\n  # Set the %{command-subdir} variable to that location\n  # and just have the autotools element run its commands there.\n  #\n  command-subdir: doc/amhello\n\nsources:\n- kind: tar\n  # url: gnu:automake-1.16.tar.gz\n  ref: 80da43bb5665596ee389e6d8b64b4f122ea4b92a685b1dbd813cd1f0e0c2d83f\n\ndepends:\n- base.bst\n\n $ bst show hello.bst \n[--:--:--][        ][    main:core activity                 ] START   Loading elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\n[00:00:00][        ][    main:core activity                 ] FAILURE Resolving elements\n\nautotools.yaml [synthetic node]: Dictionary did not contain expected key 'url'\n\n```\n\n## What is the expected correct behavior?\n\nWe should at the very least get the filename.\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1059/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1059/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1052", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1052/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1052/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1052/events", "html_url": "https://github.com/apache/buildstream/issues/1052", "id": 800790468, "node_id": "MDU6SXNzdWU4MDA3OTA0Njg=", "number": 1052, "title": "BuildStream chokes when staging tarfiles with hardlinks that point outside of a chosen base directory", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-03T23:43:28Z", "updated_at": "2021-02-03T23:45:25Z", "closed_at": "2021-02-03T23:45:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1052)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Jun 24, 2019, 15:01\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen BuildStream stages a tarfile, it will remove the first couple of characters from certain file names to extract things correctly. This is all fine and dandy, however, the code as-is, fails to extract certain kinds of hardlinks, as duly documented [in the plugin itself](https://gitlab.com/BuildStream/buildstream/blob/master/src/buildstream/plugins/sources/tar.py#L142).\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n1. Create a tarfile with a hardlink that points outside its base directory.\n2. Stage it.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nBuildStream reports a BUG and stops building. \n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nBuildStream should continue building!\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\npy37 develop-inst-noop: /home/tlater/Documents/Work/buildstream/buildstream\npy37 installed: apipkg==1.5,arpy==1.1.1,astroid==2.1.0,atomicwrites==1.3.0,attrs==18.2.0,-e git+git[[Gitlab user @gitlab]](https://gitlab.com/gitlab).com:BuildStream/buildstream.git[[Gitlab user @f61f47cd519fa2402ff0b7d7e4a91ce63b84b0c3]](https://gitlab.com/f61f47cd519fa2402ff0b7d7e4a91ce63b84b0c3)#egg=BuildStream,Click==7.0,coverage==4.4,Cython==0.29.7,execnet==1.5.0,grpcio==1.17.1,isort==4.3.9,Jinja2==2.10,lazy-object-proxy==1.3.1,MarkupSafe==1.1.0,mccabe==0.6.1,more-itertools==6.0.0,pathlib2==2.3.3,pluggy==0.9.0,pluginbase==0.7,protobuf==3.6.1,psutil==5.4.8,py==1.8.0,pycodestyle==2.5.0,pyftpdlib==1.5.4,pylint==2.2.2,pyroaring==0.2.6,pytest==4.3.0,pytest-cov==2.6.1,pytest-datafiles==2.0,pytest-env==0.6.2,pytest-forked==1.0.2,pytest-timeout==1.3.3,pytest-xdist==1.26.1,ruamel.yaml==0.15.51,six==1.12.0,typed-ast==1.3.1,ujson==1.35,wrapt==1.11.1\npy37 run-test-pre: PYTHONHASHSEED='2994009352'\npy37 run-test: commands[0] | pytest --basetemp /home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/tmp --cov=buildstream --cov-config .coveragerc --integration -m integration --no-cov -x --lf\n============================= test session starts ==============================\nplatform linux -- Python 3.7.3, pytest-4.3.0, py-1.8.0, pluggy-0.9.0 -- /home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/bin/python\ncachedir: .tox/py37/.pytest_cache\nrootdir: /home/tlater/Documents/Work/buildstream/buildstream, inifile: setup.cfg\nplugins: xdist-1.26.1, timeout-1.3.3, forked-1.0.2, env-0.6.2, datafiles-2.0, cov-2.6.1\ncollecting ... collected 1292 items / 1291 deselected / 1 selected\nrun-last-failure: rerun previous 2 failures\n\ntests/examples/autotools.py::test_autotools_build FAILED                 [100%]\n\n=================================== FAILURES ===================================\n_____________________________ test_autotools_build _____________________________\n\ncli = <buildstream.testing.runcli.CliIntegration object at 0x7f9b78f73828>\ndatafiles = local('/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/tmp/test_autotools_build0')\n\n    [[Gitlab user @pytest]](https://gitlab.com/pytest).mark.skipif(MACHINE_ARCH != 'x86-64',\n                        reason='Examples are written for x86-64')\n    [[Gitlab user @pytest]](https://gitlab.com/pytest).mark.skipif(not IS_LINUX or not HAVE_BWRAP, reason='Only available on linux with bubblewrap')\n    [[Gitlab user @pytest]](https://gitlab.com/pytest).mark.datafiles(DATA_DIR)\n    def test_autotools_build(cli, datafiles):\n        project = str(datafiles)\n        checkout = os.path.join(cli.directory, 'checkout')\n    \n        # Check that the project can be built correctly.\n        result = cli.run(project=project, args=['build', 'hello.bst'])\n>       result.assert_success()\n\ntests/examples/autotools.py:29: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <buildstream.testing.runcli.Result object at 0x7f9b78f7dda0>\nfail_message = ''\n\n    def assert_success(self, fail_message=''):\n>       assert self.exit_code == 0, fail_message\nE       AssertionError\n\nsrc/buildstream/testing/runcli.py:115: AssertionError\n----------------------------- Captured stdout call -----------------------------\nBuildStream exited with code -1 for invocation:\n\tbst --no-colors --config /home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/tmp/test_autotools_build0/cache/buildstream.conf --directory /home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/tmp/test_autotools_build0 build hello.bst\nProgram stderr was:\n[--:--:--][        ][    main:core activity                 ] START   Build\n[--:--:--][        ][    main:core activity                 ] START   Loading elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving elements\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][    main:core activity                 ] START   Resolving cached state\n[00:00:00][        ][    main:core activity                 ] SUCCESS Resolving cached state\n[--:--:--][        ][    main:core activity                 ] START   Checking sources\n[00:00:00][        ][    main:core activity                 ] SUCCESS Checking sources\n\nBuildStream Version 1.3.0+2355.gf61f47cd.dirty\n  Session Start: Monday, 24-06-2019 at 13:40:01\n  Project:       autotools (/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/tmp/test_autotools_build0)\n  Targets:       hello.bst\n  Cache Usage:   12K / None (0%)\n\nUser Configuration\n  Configuration File:      /home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/tmp/test_autotools_build0/cache/buildstream.conf\n  Cache Directory:         /home/tlater/Documents/Work/buildstream/buildstream/integration-cache/cache-9kfotmgf\n  Log Files:               /home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/tmp/test_autotools_build0/cache/logs\n  Source Mirrors:          /home/tlater/Documents/Work/buildstream/buildstream/integration-cache/sources\n  Build Area:              /home/tlater/Documents/Work/buildstream/buildstream/integration-cache/cache-9kfotmgf/build\n  Strict Build Plan:       Yes\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nPipeline\n   buildable 7ea72715664f3125eac3063c5120c47ffe4327f90b61af0d809b6f153f617b49 base/freedesktop.bst \n     waiting d098691a4af90e544427c18b3c051a738fc81558cb7b664287a43fa82a0fff61 base.bst \n     waiting b4cda6988d11b1606e330a55aad1d2e9f1468b623e448bd09ae7e931f3e60d81 hello.bst \n===============================================================================\n[--:--:--][7ea72715][   fetch:base/freedesktop.bst          ] START   autotools/base-freedesktop/7ea72715-fetch.5780.log\n[--:--:--][b4cda698][   fetch:hello.bst                     ] START   autotools/hello/b4cda698-fetch.5782.log\n[00:00:00][b4cda698][   fetch:hello.bst                     ] SUCCESS autotools/hello/b4cda698-fetch.5782.log\n[00:00:18][7ea72715][   fetch:base/freedesktop.bst          ] BUG     Fetch\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/_scheduler/jobs/job.py\", line 699, in child_action\n        result = self.child_process()  # pylint: disable=assignment-from-no-return\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/_scheduler/jobs/elementjob.py\", line 108, in child_process\n        return self._action_cb(self._element)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/_scheduler/queues/fetchqueue.py\", line 45, in process\n        element._fetch(fetch_original=self._fetch_original)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/element.py\", line 2183, in _fetch\n        self.__cache_sources()\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/element.py\", line 2932, in __cache_sources\n        self.__sourcecache.commit(source, [])\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/_sourcecache.py\", line 160, in commit\n        source._stage(tmpdir)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/source.py\", line 740, in _stage\n        self.stage(directory)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/plugins/sources/tar.py\", line 117, in stage\n        tar.extractall(path=directory, members=self._extract_members(tar, base_dir))\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/tarfile.py\", line 2002, in extractall\n        numeric_owner=numeric_owner)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/tarfile.py\", line 2044, in extract\n        numeric_owner=numeric_owner)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/tarfile.py\", line 2122, in _extract_member\n        self.makelink(tarinfo, targetpath)\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/tarfile.py\", line 2210, in makelink\n        self._extract_member(self._find_link_target(tarinfo),\n      File \"/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/tarfile.py\", line 2380, in _find_link_target\n        raise KeyError(\"linkname %r not found\" % linkname)\n    KeyError: \"linkname 'c/ssl/ct_log_list.cnf' not found\"\n\n[00:00:18][        ][    main:core activity                 ] FAILURE Build\n\nFailure Summary\n  base/freedesktop.bst:\n    [00:00:18][7ea72715][   fetch:base/freedesktop.bst          ] BUG     Fetch\n\n        An unhandled exception occured:\n    \n        Traceback (most recent call last):\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/_scheduler/jobs/job.py\", line 699, in child_action\n            result = self.child_process()  # pylint: disable=assignment-from-no-return\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/_scheduler/jobs/elementjob.py\", line 108, in child_process\n            return self._action_cb(self._element)\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/_scheduler/queues/fetchqueue.py\", line 45, in process\n            element._fetch(fetch_original=self._fetch_original)\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/element.py\", line 2183, in _fetch\n            self.__cache_sources()\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/element.py\", line 2932, in __cache_sources\n            self.__sourcecache.commit(source, [])\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/_sourcecache.py\", line 160, in commit\n            source._stage(tmpdir)\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/source.py\", line 740, in _stage\n            self.stage(directory)\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/src/buildstream/plugins/sources/tar.py\", line 117, in stage\n            tar.extractall(path=directory, members=self._extract_members(tar, base_dir))\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/tarfile.py\", line 2002, in extractall\n            numeric_owner=numeric_owner)\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/tarfile.py\", line 2044, in extract\n            numeric_owner=numeric_owner)\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/tarfile.py\", line 2122, in _extract_member\n            self.makelink(tarinfo, targetpath)\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/tarfile.py\", line 2210, in makelink\n            self._extract_member(self._find_link_target(tarinfo),\n          File \"/home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/tarfile.py\", line 2380, in _find_link_target\n            raise KeyError(\"linkname %r not found\" % linkname)\n        KeyError: \"linkname 'c/ssl/ct_log_list.cnf' not found\"\n\nPipeline Summary\n  Total:       3\n  Session:     3\n  Fetch Queue: processed 1, skipped 1, failed 1 \n  Build Queue: processed 0, skipped 0, failed 0 \n\n\n\n=============================== warnings summary ===============================\n.tox/py37/lib/python3.7/site-packages/pluginbase.py:439\n  /home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/site-packages/pluginbase.py:439: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated, and in 3.8 it will stop working\n    fromlist, level)\n\n-- Docs: https://docs.pytest.org/en/latest/warnings.html\nWARNING: Coverage disabled via --no-cov switch!\n========================== slowest 20 test durations ===========================\n18.60s call     tests/examples/autotools.py::test_autotools_build\n0.06s teardown tests/examples/autotools.py::test_autotools_build\n\n(0.00 durations hidden.  Use -vv to show these durations.)\n=========================== warnings summary (final) ===========================\n.tox/py37/lib/python3.7/site-packages/pytest_cov/plugin.py:253\n  /home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/lib/python3.7/site-packages/pytest_cov/plugin.py:253: PytestWarning: Coverage disabled via --no-cov switch!\n    warnings.warn(pytest.PytestWarning(message))\n\n-- Docs: https://docs.pytest.org/en/latest/warnings.html\n============ 1 failed, 1291 deselected, 2 warnings in 25.13 seconds ============\nERROR: InvocationError for command /home/tlater/Documents/Work/buildstream/buildstream/.tox/py37/bin/pytest --basetemp .tox/py37/tmp --cov=buildstream --cov-config .coveragerc --integration -m integration --no-cov -x --lf (exited with code 1)\n___________________________________ summary ____________________________________\nERROR:   py37: commands failed\n```\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.2 BuildStream_v2.0\n\n----\n[//]: # (To review information about possible relevant labels for this issue please view the list of labels: https://gitlab.com/BuildStream/buildstream/labels)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1052/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1052/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1049", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1049/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1049/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1049/events", "html_url": "https://github.com/apache/buildstream/issues/1049", "id": 800788085, "node_id": "MDU6SXNzdWU4MDA3ODgwODU=", "number": 1049, "title": "overnigth tests are failing: failure in [main:core activity]", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T23:38:29Z", "updated_at": "2021-02-03T23:39:00Z", "closed_at": "2021-02-03T23:39:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1049)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Jun 23, 2019, 05:06\n\nJob [#238142465](https://gitlab.com/BuildStream/buildstream/-/jobs/238142465) failed for 2d57e14bdd8ac83ddf054ee25c1b97ceb2a2bfaf:\n\nThe only error reported seems to be:\n```\n[00:36:34][        ][    main:core activity                 ] FAILURE Build\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1049/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1040", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1040/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1040/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1040/events", "html_url": "https://github.com/apache/buildstream/issues/1040", "id": 800769987, "node_id": "MDU6SXNzdWU4MDA3Njk5ODc=", "number": 1040, "title": "BUG: Message handling out of sync", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T23:02:05Z", "updated_at": "2021-02-04T07:15:17Z", "closed_at": "2021-02-04T07:15:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1040)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on May 30, 2019, 15:35\n\nThis error always appear on the schedule jobs:\n\n```\nBUG: Message handling out of sync, unable to retrieve failure message for element import element at bootstrap/build/base-sdk/image.bst \n```\n\n[line 1 column 0] Job [#221880084](https://gitlab.com/BuildStream/buildstream/-/jobs/221880084) failed for 4b450f664b1bdd0f342f36453f8e46edbd0c887a\n\nMaybe related with #560?", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1040/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1030", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1030/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1030/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1030/events", "html_url": "https://github.com/apache/buildstream/issues/1030", "id": 800751751, "node_id": "MDU6SXNzdWU4MDA3NTE3NTE=", "number": 1030, "title": "bst show asks the user to fetch a workspaced junction", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T22:27:20Z", "updated_at": "2021-02-03T22:29:16Z", "closed_at": "2021-02-03T22:29:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1030)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 22, 2019, 12:36\n\n## Summary\n\nThis painful experience is somewhat similar to #691, but different.\n\nWhen running `bst show` on a project with a workspaced junction, `bst` complains if it does not have the ref cached for that junction.\n\n## Steps to reproduce\n\nTwo ways to reproduce\n\n### Clean state\n\n* Obtain a project with a junction\n* Never have built that project before\n* Obtain the junctioned project in an adjacent directory, separately\n* Open a workspace on that junction, with `--no-checkout`\n  * Note that this path ensures that BuildStream does not go an cache the junctioned project inadvertently, BuildStream has never downloaded the sources itself, you have cloned the junction project separately and intend to work on both projects in parallel with an open junction.\n* Now run `bst show target.bst` in the toplevel project with the open workspace\n\n### Out of sync state\n\n* Obtain a project with a junction\n* Open a junction on the workspace, without `--no-checkout`\n  * Note that in this case, it doesnt matter whether you have built it before or not, opening the workspace will ensure that BuildStream owns a locally cached copy of the junctioned project.\n* Allow a few weeks to go by\n* Now update your local branch of the main project to the upstream master version\n  * Note that here it is **important** that the new update has updated it's `junction.refs` file to a new version of the junctioned project, which **did not exist** at the time you initially opened the workspace\n* Now run `bst show target.bst` in the toplevel project with the open workspace\n\n\n## What is the current bug behavior?\n\nBuildStream reports an error at early load time:\n\n```\nSubproject fetch needed for junction: example.bst\n\n    Try fetching the project with `bst fetch example.bst`\n```\n\nAt which point you go ahead and run `bst fetch example.bst`, regardless of how ridiculous you know that is... and just as you would expect... BuildStream starts up and quite correctly does nothing at all in the session - the junction is workspaced so `bst fetch` has nothing to do at all (#846 indicates it might be wise to actually perform a fetch even if there is a workspace, but this is unrelated to the issue at hand really).\n\n## What is the expected correct behavior?\n\nNo warning, we have a workspace open on the junction, there should be no requirement whatsoever to have the junction fetched.\n\n## Workaround\n\nThis part is pretty obvious, but flabbergasting... and quite embarrassing:\n\n* Close the open workspace on the junction\n* Fetch the junction.\n  * Now that the workspace is closed, BuildStream will fetch the junction\n* Reopen the workspace (probably using `--no-checkout`, but that's not relevant)\n* Now run `bst show target.bst` again.\n\nNo more complaints, BuildStream has happily cached a copy of the junction and now stops whining.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1030/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1030/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1027", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1027/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1027/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1027/events", "html_url": "https://github.com/apache/buildstream/issues/1027", "id": 800749886, "node_id": "MDU6SXNzdWU4MDA3NDk4ODY=", "number": 1027, "title": "bst build --track documentation is unclear", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-03T22:24:16Z", "updated_at": "2021-02-03T22:24:49Z", "closed_at": "2021-02-03T22:24:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1027)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 22, 2019, 08:18\n\n## Summary\n\nAccording to `bst build --help` output, the `--track` option can be specified multiple times to specify which elements to track.\n\nThis is not entirely true, the `--track` option is recursive, and must be used in conjunction with `--track-except`.\n\nThis is actually quite destructive when the user doesn't know in advance (as I had forgotten).\n\nIt would be better to have a separate option for tracking single elements from the option for tracking recursively, but at least the help output (and consequently documentation and man pages), needs to be fixed.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1027/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1020", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1020/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1020/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1020/events", "html_url": "https://github.com/apache/buildstream/issues/1020", "id": 800735073, "node_id": "MDU6SXNzdWU4MDA3MzUwNzM=", "number": 1020, "title": "Invalid \"Ignoring redundant source references\" warnings for git sources", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-03T22:00:44Z", "updated_at": "2021-02-03T22:01:44Z", "closed_at": "2021-02-03T22:01:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1020)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 9, 2019, 07:55\n\nWhen using a git source and `ref-storage == project.refs`, we get unconditional invalid warnings for all git sources.\n\nThis is because of commit 8251310950e72f18c2d171de375051fb0e126655:\n\n```\n    git source plugin: Track git tags and save them to reproduce a minimum shallow repository\n    \n    Instead of tag information being fetched which can change with time,\n    they are tracked and saved in the projects.refs/.bst. Then we re-tag\n    automatically the closest tag so that `git describe` works and is\n    reproducible.\n    \n    This new feature is opt-in with the new `track-tags` configuration,\n    and must be used to fix modules which are broken by our new policy\n    of omitting the `.git/` repository when staging git sources.\n    \n    This fixes issue #487\n```\n\nWhich does not respect the rule about returning `None` values from `Source.get_ref()` when there is no ref set, as clearly stated in the docs:\n\n```python\n    def get_ref(self):\n        \"\"\"Fetch the internal ref, however it is represented\n\n        Returns:\n           (simple object): The internal source reference, or ``None``\n\n        .. note::\n\n           The reference is the user provided (or track resolved) value\n           the plugin uses to represent a specific input, like a commit\n           in a VCS or a tarball's checksum. Usually the reference is a string,\n           but the plugin may choose to represent it with a tuple or such.\n\n           Implementations *must* return a ``None`` value in the case that\n           the ref was not loaded. E.g. a ``(None, None)`` tuple is not acceptable.\n        \"\"\"\n        raise ImplError(\"Source plugin '{}' does not implement get_ref()\".format(self.get_kind()))\n```\n\nThe result is that the core does not correctly recognize unset refs loaded from `git` sources and issues a warning.\n\nThis happens only on `master` and not in `bst-1.2`", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1020/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1019", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1019/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1019/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1019/events", "html_url": "https://github.com/apache/buildstream/issues/1019", "id": 800733598, "node_id": "MDU6SXNzdWU4MDA3MzM1OTg=", "number": 1019, "title": "Buildstream fails to spot bad project.conf", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-03T21:58:49Z", "updated_at": "2021-02-03T22:00:36Z", "closed_at": "2021-02-03T22:00:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1019)\nIn GitLab by [[Gitlab user @pointswaves]](https://gitlab.com/pointswaves) on May 8, 2019, 16:12\n\n## Summary\n\nSome mal formed project.conf files cause bst to think there is no project and ask if you want to make a new one.\nbut if you decline they then tell you about your project.conf file being bad.\n\n\n## Steps to reproduce\n\nI don't have a minimal reproducible test but something like this https://gitlab.com/pointswaves/bootable-images/blob/bug/project.conf#L23 should be able to be simplified to a test case.\n\n## What is the current bug behavior?\n\nbst should report the issue with the project.conf and not think there is no porject\n\n\n## What is the expected correct behavior?\nreport a problem with the project.conf\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1019/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1018", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1018/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1018/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1018/events", "html_url": "https://github.com/apache/buildstream/issues/1018", "id": 800732486, "node_id": "MDU6SXNzdWU4MDA3MzI0ODY=", "number": 1018, "title": "BuildStream crashes on junctions in non-strict mode", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-03T21:56:58Z", "updated_at": "2021-02-03T21:58:37Z", "closed_at": "2021-02-03T21:58:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1018)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 8, 2019, 12:05\n\n## Summary\n\nBuildStream crashes on junctions in non-strict mode\n\n## Steps to reproduce\n\nBuild or fetch any project which has a junction, in non-strict mode.\n\n## What is the current bug behavior?\n\n\n```\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/testing/runcli.py\", line 393, in _invoke\n    cli_object.main(args=args or (), prog_name=cli_object.name)\n  File \"/codethink/GNOME/buildstream/buildstream/_frontend/cli.py\", line 195, in override_main\n    standalone_mode=standalone_mode, **extra)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/click/core.py\", line 717, in main\n    rv = self.invoke(ctx)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/click/core.py\", line 1137, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/click/core.py\", line 1137, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/click/core.py\", line 956, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/click/core.py\", line 555, in invoke\n    return callback(*args, **kwargs)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/click/decorators.py\", line 27, in new_func\n    return f(get_current_context().obj, *args, **kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_frontend/cli.py\", line 672, in source_fetch\n    remote=remote)\n  File \"/codethink/GNOME/buildstream/buildstream/_stream.py\", line 324, in fetch\n    source_remote_url=remote)\n  File \"/codethink/GNOME/buildstream/buildstream/_stream.py\", line 1061, in _load\n    fetch_subprojects=fetch_subprojects)\n  File \"/codethink/GNOME/buildstream/buildstream/_pipeline.py\", line 113, in load\n    fetch_subprojects=fetch_subprojects)\n  File \"/codethink/GNOME/buildstream/buildstream/_project.py\", line 455, in load_elements\n    fetch_subprojects=fetch_subprojects)\n  File \"/codethink/GNOME/buildstream/buildstream/_loader/loader.py\", line 114, in load\n    element = loader._load_file(name, rewritable, ticker, fetch_subprojects)\n  File \"/codethink/GNOME/buildstream/buildstream/_loader/loader.py\", line 258, in _load_file\n    fetch_subprojects=fetch_subprojects, provenance=dep.provenance)\n  File \"/codethink/GNOME/buildstream/buildstream/_loader/loader.py\", line 569, in _get_loader\n    filename, element._get_cache_key())\n  File \"/usr/local/lib/python3.6/posixpath.py\", line 94, in join\n    genericpath._check_arg_types('join', a, *p)\n  File \"/usr/local/lib/python3.6/genericpath.py\", line 149, in _check_arg_types\n    (funcname, s.__class__.__name__)) from None\nTypeError: join() argument must be str or bytes, not 'NoneType'\n\n```\n\n## What is the expected correct behavior?\n\nNo crashes please, just happily load the junction cache key.\n\n## Additional information\n\nThis only happens with `master`, not in `bst-1.2`.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1018/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1018/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1017", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1017/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1017/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1017/events", "html_url": "https://github.com/apache/buildstream/issues/1017", "id": 800731102, "node_id": "MDU6SXNzdWU4MDA3MzExMDI=", "number": 1017, "title": "Last successful workspace build can go missing", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-03T21:54:45Z", "updated_at": "2021-02-03T21:56:51Z", "closed_at": "2021-02-03T21:56:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1017)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 6, 2019, 07:47\n\nIf the user removes/wipes their artifact cache, or if a cleanup procedure automatically deletes the artifact because it is not marked as *required* in the current session, the related workspace metadata is not updated as a result.\n\nSince we do not handle the case where the last successful build artifact has gone missing, we run into bugs which give the user no obvious recourse - the only way out is to close the related workspace, however the user doesn't really know this.\n\nThis currently results in the incorrectly reported error message (as described in #1016):\n\n```\n[00:00:00][????????][build:sdk/glib.bst                  ] FAILURE Attempt to access unavailable artifact: [Errno 2] No such file or directory: '/home/tristan/.cache/buildstream/artifacts/cas/refs/heads/gnome/sdk-glib/d371839c675f4be8c70f9f212093531699e77baf6500e8e56d8dbd7270607068'\n```\n\nMarking this critical as it results in a situation where the user is stuck and cannot move forward without in depth knowledge of BuildStream.\n\nThe workaround currently is to close the related workspace.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1017/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1012", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1012/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1012/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1012/events", "html_url": "https://github.com/apache/buildstream/issues/1012", "id": 800726824, "node_id": "MDU6SXNzdWU4MDA3MjY4MjQ=", "number": 1012, "title": "Traceback when tracking an element", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T21:47:42Z", "updated_at": "2021-02-03T21:49:27Z", "closed_at": "2021-02-03T21:49:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1012)\nIn GitLab by [[Gitlab user @bochecha]](https://gitlab.com/bochecha) on Apr 26, 2019, 20:57\n\n## Summary\n\nWith Buildstream 1.2.5, as well as the tip of the bst-1.2 branch, I get a traceback when tracking an element.\n\n## Steps to reproduce\n\n0. Use Buildstream 1.2 (I have not tried reproducing with the master branch)\n1. `git clone https://gitlab.com/freedesktop-sdk/freedesktop-sdk`\n2. `cd freedesktop-sdk`\n3. `git checkout master`\n4. `bst track components/libglvnd.bst`\n\n## What is the current bug behavior?\n\nThe tracking seems to have worked fine, however I get a traceback.\n\nIt seems to be in the codewhich prints messages to the console.\n\n## What is the expected correct behavior?\n\nTracking works, no traceback.\n\n## Relevant logs and/or screenshots\n\n```\n$ bst track components/libglvnd.bst \n[--:--:--][][] START   Track\n[--:--:--][][] START   Loading elements\n[00:00:00][][] SUCCESS Loading elements\n[--:--:--][][] START   Resolving elements\n[00:00:00][][] SUCCESS Resolving elements\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\n\nBuildStream Version 1.2.5+62.g162c4166\n  Session Start: Friday, 26-04-2019 at 21:54:57\n  Project:       freedesktop-sdk (/home/mathieu/Projects/desktop/freedesktop-sdk)\n  Targets:       \n  Cache Usage:   11.7G / infinity (6%)\n\nUser Configuration\n  Configuration File:      Default Configuration\n  Log Files:               /home/mathieu/.cache/buildstream/logs\n  Source Mirrors:          /home/mathieu/.cache/buildstream/sources\n  Build Area:              /home/mathieu/.cache/buildstream/build\n  Artifact Cache:          /home/mathieu/.cache/buildstream/artifacts\n  Strict Build Plan:       Yes\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nProject Options\n  bootstrap_build_arch: x86_64\n  snap_grade:           devel\n  target_arch:          x86_64\n\nLoaded Plugins\n  Source Plugins\n    - git_tag\n\nPipeline\n\n===============================================================================\n[--:--:--][????????][track:components/libglvnd.bst       ] START   freedesktop-sdk/components-libglvnd/????????-track.15689.log\nException in callback Job._parent_recv()\nhandle: <Handle Job._parent_recv()>\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.7/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/job.py\", line 642, in _parent_recv\n    self._parent_process_queue()\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/job.py\", line 634, in _parent_process_queue\n    self._parent_process_envelope(envelope)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/job.py\", line 606, in _parent_process_envelope\n    self._scheduler.context.message(envelope.message)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_context.py\", line 376, in message\n    self._message_handler(message, context=self)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_frontend/app.py\", line 701, in _message_handler\n    text = self.logger.render(message)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_frontend/widget.py\", line 593, in render\n    return self._render(message)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_frontend/widget.py\", line 628, in _render\n    text += widget.render(message)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_frontend/widget.py\", line 227, in render\n    plugin = Plugin._lookup(element_id)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/plugin.py\", line 659, in _lookup\n    assert unique_id in cls.__TABLE, \"Could not find plugin with ID {}\".format(unique_id)\nAssertionError: Could not find plugin with ID 215\nException in callback Job._parent_recv()\nhandle: <Handle Job._parent_recv()>\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.7/asyncio/events.py\", line 88, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/job.py\", line 642, in _parent_recv\n    self._parent_process_queue()\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/job.py\", line 634, in _parent_process_queue\n    self._parent_process_envelope(envelope)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/job.py\", line 606, in _parent_process_envelope\n    self._scheduler.context.message(envelope.message)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_context.py\", line 376, in message\n    self._message_handler(message, context=self)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_frontend/app.py\", line 701, in _message_handler\n    text = self.logger.render(message)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_frontend/widget.py\", line 593, in render\n    return self._render(message)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_frontend/widget.py\", line 628, in _render\n    text += widget.render(message)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/_frontend/widget.py\", line 227, in render\n    plugin = Plugin._lookup(element_id)\n  File \"/home/mathieu/.local/lib/python3.7/site-packages/buildstream/plugin.py\", line 659, in _lookup\n    assert unique_id in cls.__TABLE, \"Could not find plugin with ID {}\".format(unique_id)\nAssertionError: Could not find plugin with ID 215\n[--:--:--][        ][track:components/libglvnd.bst-0     ] INFO    Found new revision: v1.1.1-0-gbc9990b7bede44899627354d0c356f48950f4ad1\n[00:00:00][????????][track:components/libglvnd.bst       ] SUCCESS freedesktop-sdk/components-libglvnd/????????-track.15689.log\n[00:00:02][][] SUCCESS Track\n\nResolved key Summary\n     waiting 3d8725eac964652be6b2238c9ab2ad5aed5d1d087d4a3becd62095e35794dcf9 components/libglvnd.bst \n\nPipeline Summary\n  Total:       0\n  Session:     1\n  Track Queue: processed 1, skipped 0, failed 0 \n```\n\n* BuildStream version affected: /milestone %BuildStream_v1.2\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1012/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1010", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1010/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1010/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1010/events", "html_url": "https://github.com/apache/buildstream/issues/1010", "id": 800722946, "node_id": "MDU6SXNzdWU4MDA3MjI5NDY=", "number": 1010, "title": "Bst track can't track when multiple sources are on the same element without ref.", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2021-02-03T21:41:32Z", "updated_at": "2021-02-03T21:45:27Z", "closed_at": "2021-02-03T21:45:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1010)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Apr 24, 2019, 11:27\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nBuildStream can never track sources that require refs on the previous sources if the previous sources don't have ref set.\n\nThis will prevent using bst track entirely on a previous element until we set a dummy ref.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nhttps://gitlab.com/BuildStream/buildstream/commit/8ae41d533d2b8a8148f8cf536eeabcb3d5806fb2 is modifying the test that was checking for this behaviour in order to remove the corner case the test was actually testing.\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nSource can't be traccked with `CONSISTENCY.INCONSISTENT`\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nboth sources should have their ref updated\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1010/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/1008", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/1008/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/1008/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/1008/events", "html_url": "https://github.com/apache/buildstream/issues/1008", "id": 800719788, "node_id": "MDU6SXNzdWU4MDA3MTk3ODg=", "number": 1008, "title": "Data files are missing from python package", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2021-02-03T21:36:32Z", "updated_at": "2021-02-03T21:39:28Z", "closed_at": "2021-02-03T21:39:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/1008)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Apr 19, 2019, 23:05\n\n## Summary\n\nSince !1261 was merged, the source distribution created by the standard `python3 setup.py sdist` is not including the data files for the plugins. This means that BuildStream is completely unusable if installed from current state of the repository.\n\nSeems like this is due to the `include_package_date=True` option added to `setup.py` in https://gitlab.com/BuildStream/buildstream/commit/16a28c0316a64189cb8c396c43b570764a83d33b. Without that option, we seem to be correctly including the necessary files. More precisely, here's the list of files that are missing from the source distribution:\n\n```diff\ndiff --git a/new b/old\nindex 872f4e59..8704414d 100644\n--- a/new\n+++ b/old\n[[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) -169,58 +169,8 [[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) buildstream/_yaml.py\n buildstream/buildelement.py\n buildstream/data/\n buildstream/data/bst\n-buildstream/data/build-all.sh.in\n-buildstream/data/build-module.sh.in\n-buildstream/data/projectconfig.yaml\n-buildstream/data/userconfig.yaml\n buildstream/element.py\n buildstream/plugin.py\n-buildstream/plugins/\n-buildstream/plugins/elements/\n-buildstream/plugins/elements/__init__.py\n-buildstream/plugins/elements/autotools.py\n-buildstream/plugins/elements/autotools.yaml\n-buildstream/plugins/elements/cmake.py\n-buildstream/plugins/elements/cmake.yaml\n-buildstream/plugins/elements/compose.py\n-buildstream/plugins/elements/compose.yaml\n-buildstream/plugins/elements/distutils.py\n-buildstream/plugins/elements/distutils.yaml\n-buildstream/plugins/elements/filter.py\n-buildstream/plugins/elements/filter.yaml\n-buildstream/plugins/elements/import.py\n-buildstream/plugins/elements/import.yaml\n-buildstream/plugins/elements/junction.py\n-buildstream/plugins/elements/make.py\n-buildstream/plugins/elements/make.yaml\n-buildstream/plugins/elements/makemaker.py\n-buildstream/plugins/elements/makemaker.yaml\n-buildstream/plugins/elements/manual.py\n-buildstream/plugins/elements/manual.yaml\n-buildstream/plugins/elements/meson.py\n-buildstream/plugins/elements/meson.yaml\n-buildstream/plugins/elements/modulebuild.py\n-buildstream/plugins/elements/modulebuild.yaml\n-buildstream/plugins/elements/pip.py\n-buildstream/plugins/elements/pip.yaml\n-buildstream/plugins/elements/qmake.py\n-buildstream/plugins/elements/qmake.yaml\n-buildstream/plugins/elements/script.py\n-buildstream/plugins/elements/script.yaml\n-buildstream/plugins/elements/stack.py\n-buildstream/plugins/sources/\n-buildstream/plugins/sources/__init__.py\n-buildstream/plugins/sources/_downloadablefilesource.py\n-buildstream/plugins/sources/bzr.py\n-buildstream/plugins/sources/deb.py\n-buildstream/plugins/sources/git.py\n-buildstream/plugins/sources/local.py\n-buildstream/plugins/sources/ostree.py\n-buildstream/plugins/sources/patch.py\n-buildstream/plugins/sources/pip.py\n-buildstream/plugins/sources/remote.py\n-buildstream/plugins/sources/tar.py\n-buildstream/plugins/sources/zip.py\n buildstream/sandbox/\n buildstream/sandbox/__init__.py\n buildstream/sandbox/_config.py\n```\n\n## Steps to reproduce\n\nRun `python3 setup.py sdist` and investigate the files included in the resulting tarball using something like `tar tf dist/*.tar.gz`.\n\n\n## What is the current bug behavior?\n\nNecessary YAML files and plugin files are missing from the source distribution.\n\n\n## What is the expected correct behavior?\n\nSuch files are included correctly.\n\n\n## Possible fixes\n\nAs mentioned in [setuptools documentation](https://setuptools.readthedocs.io/en/latest/setuptools.html?highlight=include_package_data#including-data-files):\n\n> If using the setuptools-specific include_package_data argument, files specified by package_data will not be automatically added to the manifest unless they are listed in the MANIFEST.in file\n\nSo, to fix this, we should either:\n\n* Remove `include_package_data=True` argument, or\n* Remove use of `package_data` argument, and instead list those files in `MANIFEST.in`\n\n---\n\nAdditionally, it seems rather concerning that such a major issue went unnoticed by our testing and CI setup. Since the current directory is always added to `sys.path` in Python, BuildStream is able to find these files correctly during the tests, even though they are not included in the installed package. To mitigate this in future, I would suggest moving our source code inside a `src` directory. This layout has several advantages as mentioned [here](https://blog.ionelmc.ro/2014/05/25/python-packaging/#the-structure).", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/1008/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/1008/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/999", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/999/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/999/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/999/events", "html_url": "https://github.com/apache/buildstream/issues/999", "id": 800715824, "node_id": "MDU6SXNzdWU4MDA3MTU4MjQ=", "number": 999, "title": "Warnings and errors whenever overriding subproject junction configurations", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T21:29:59Z", "updated_at": "2021-02-03T21:30:45Z", "closed_at": "2021-02-03T21:30:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/999)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Apr 16, 2019, 06:28\n\n## Summary\n\nWhen junctioning in a subproject, we want to have absolute certainty that the for a given ref and combination of project options of the subproject, we will be using exactly the same artifacts as we would get if we had built that subproject directly. \n\nHowever, with even slightly complicated inter-project dependency graphs, we have situations where we override a subproject's junction configuration to a common sub-project dependency - and we do this without triggering any warnings or errors.\n\nWhile it is impossible to automatically keep all project junction points in sync, overwriting the junction configuration without the user explicitly asking, and without any feedback, is a very bad thing and will result in users building things which they did not expect, without knowing why.\n\n## Background\n\nIt was pointed out in [this discussion](https://mail.gnome.org/archives/buildstream-list/2019-April/msg00012.html) recently that when junctioned subprojects share common dependency subprojects, there is opportunity to have projects which are out of sync, and even more concerning is that the [only current solution](https://docs.buildstream.build/elements/junction.html#nested-junctions) to synchronize these subprojects results in the subproject's references to their subprojects being overwritten by the highest level project, instead of being derived from subprojects.\n\nThe problem arises when you have a dependency on two subprojects, and one day one of your subprojects starts to have a dependency on the other subproject:\n\n```\n       (A)\n      /   \\\n     /     \\\n   (B)---->(C)\n```\n\nPart of the solution will be to allow the topmost project to *derive* it's declaration of one subproject from another, such that in the above example; project (A) will use the junction ref and configuration from project (B) in order to access project (C), this will be implemented in !1293.\n\nHowever, this solution alone is not sufficient to ensure parity across more complex inter-project dependency pattern.\n\nFor instance, consider a project dependency graph with a diamond pattern:\n\n```\n       (A)\n      / | \\\n     /  |  \\\n   (B)  |  (C)\n     \\  |  /\n      \\ | /\n       (D)\n```\n\nIn the above case, project (A) absolutely must declare a junction to (D) in order to reconcile the common references\nto (D) from projects (B) and (C).\n\n* Currently the (A)->(D) junction declaration will *override* both of the (B)->(D) and (C)->(D) junction declarations, causing projects (B) and (C) to no longer be configured exactly how they were advertized.\n\n* After !1293, project (A) can *choose* to derive the common junction configuration to (D) from either (B) or (C), but there will *still* remain a case where we silently overwrite the configuration of the other, unchosen junction.\n\n## Task description\n\n* [ ] Configurable warning when a project overrides a subproject junction configuration with one that does not match.\n\n  If configured to be fatal, it is only fatal if the calling project overrides a subproject.\n\n  After !1293 is implemented, considering the examples shown above; even if the higher level project (A) is inheriting it's (A)->(D) junction configuration from (B), it is still considered to be fatal that the (C)->(D) junction gets overridden by (A)'s derivation of (B)'s junction.\n\n  This implies that we must have an algorithm which actually compares junction configurations, i.e. if the junction configurations (B)->(D) and (C)->(D) are a match, then it is not a warning or an error at all.\n\n* [ ] Ability to whitelist which junctions are allowed to be overridden, disabling the warning/error completely.\n\n  Similar to file overlap whitelists, we should have a way for the project author of (A) be allowed to explicitly whitelist a subproject junction which it allows to be overwritten.\n\n  Considering the above diamond example, this would mean that after !1293 is implemented, one could decide that:\n  * Project (A) *derives* it's (A)->(D) junction from project (B)\n  * Project (A) *explicitly overwrites* the (C)->(D) junction with whatever configuration it happens to have derived from (B)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/999/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/998", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/998/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/998/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/998/events", "html_url": "https://github.com/apache/buildstream/issues/998", "id": 800715211, "node_id": "MDU6SXNzdWU4MDA3MTUyMTE=", "number": 998, "title": "Stack elements output empty \"bst\" directory", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-03T21:28:52Z", "updated_at": "2021-02-03T21:29:52Z", "closed_at": "2021-02-03T21:29:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/998)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Apr 15, 2019, 12:47\n\n## Summary\n\nAny stack element (with 0 or more dependencies) seems to output a `bst` directory that is empty, when none of its dependencies are providing that.\n\n\n## Steps to reproduce\n\n```bash\n# Go to a temporary directory\nmkdir test; cd test\n\n# Create a BuildStream project\nbst init --project-name test\n\n# Create hello.txt to serve as input\necho hello > hello.txt\n\n# Create our import element\ncat >elements/hello.bst <<EOF\nkind: import\nsources:\n- kind: local\n  path: hello.txt\nEOF\n\n# Create our stack element\ncat >elements/target.bst <<EOF\nkind: stack\ndepends:\n- hello.bst\nEOF\n\n# Build the target\nbst build target.bst\n```\n\n\n## What is the current bug behavior?\n\nChecking out `target.bst` produces a `hello.txt` as expected, but also contains an empty `bst` directory.\n\n```bash\n# Checkout original element to sanity check\n$ bst artifact checkout --directory orig hello.bst\n$ find orig\norig\norig/hello.txt\n\n# Now, checkout our target\n$ bst artifact checkout --directory target target.bst\n$ find target\ntarget\ntarget/hello.txt\ntarget/bst\n```\n\nThe same bug can also be reproduced with a stack element that has no dependencies, so something like the following also produces the same error:\n\n```bash\n# Write a test target with no deps\n$ cat >elements/newtarget.bst <<EOF\nkind: stack\nEOF\n\n# Build, checkout\n$ bst build newtarget.bst\n$ bst artifact checkout --directory newtarget newtarget.bst\n$ find newtarget\nnewtarget\nnewtarget/bst\n```\n\n## What is the expected correct behavior?\n\nThe output of stack element should not include the `bst` directory unless one of the dependencies include it explicitly.\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: master [[Gitlab user @]](https://gitlab.com/) b9eec0ca\n\n----\n[//]: # (To review information about possible relevant labels for this issue please view the list of labels: https://gitlab.com/BuildStream/buildstream/labels)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/998/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/996", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/996/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/996/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/996/events", "html_url": "https://github.com/apache/buildstream/issues/996", "id": 800713914, "node_id": "MDU6SXNzdWU4MDA3MTM5MTQ=", "number": 996, "title": "Cache quota shouldn't be computed until we know we need to write to the cache", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109199, "node_id": "MDU6TGFiZWwyNzA5MTA5MTk5", "url": "https://api.github.com/repos/apache/buildstream/labels/optimization", "name": "optimization", "color": "A295AA", "default": false, "description": "Make BuildStream faster and use less resources"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-03T21:26:41Z", "updated_at": "2021-02-03T21:28:24Z", "closed_at": "2021-02-03T21:28:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/996)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Apr 15, 2019, 11:44\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nCurrently cache cas initilization calculates the cache quota. This information is only needed when we will be writing to the cache, and as such should not be calculated until the last possible moment since it is expensive to calculate.\n\nFor example. on Windows WSL, it could increase `bst show` time to element load by 10-20 seconds, when the rest of the operations in `bst show` would take roulghy 0.2s.\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n- Have many things in your cache\n- `bst show`, consider the time before the \"loading element\" message.\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nCas quota is computed unneccessarily for read only operations on the cache.\n\nFor example, the following commands don't need to write anything and we could therefore save 20s on their invocation:\n\n- `bst show`\n- `bst workspace *`\n- `bst shell`\n- `bst push`\n- `bst source {checkout,push}`\n- `bst checkout`\n- `bst artifact log`\n- `bst artifact delete` (maybe? arguably)\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nInstantaneous startup, we don't care about the cache size in those scenarios, we shouldn't be losing time computing them.\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\nTimings from the import of \"bst\" to the moment in code when this was called.\n\n```\ncli: function entry 0.19205307960510254\napp: context loaded 0.19537138938903809\napp: platform instantiated 0.20264530181884766\napp: logger ready 0.20321416854858398\nbase cache: init 0.20326685905456543\nbase cache: cas cache initialized 0.20374846458435059\nbase cache: cas quota set 11.165070295333862 <<< CACHE QUOTA COMPUTED\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/996/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/995", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/995/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/995/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/995/events", "html_url": "https://github.com/apache/buildstream/issues/995", "id": 800712481, "node_id": "MDU6SXNzdWU4MDA3MTI0ODE=", "number": 995, "title": "Cannot choose what tests to run", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-03T21:24:28Z", "updated_at": "2021-02-03T21:26:34Z", "closed_at": "2021-02-03T21:26:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/995)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Apr 15, 2019, 10:30\n\n## Summary\n\nWhile developing a feature or fixing an issue, it is important to be able to run a single test or a group of tests, without running the entire suite.\n\nThe regular ways to do this, for example to run only the frontend tests are:\n\n```shell\npython3 setup.py test --addopts 'tests/frontend'\n```\n\nOr now that we have a `tox` layer, also:\n\n```shell\ntox -e py36 -- tests/frontend\n```\n\nBut this has now regressed\n\n## Steps to reproduce\n\nRun one of the said commands above to select which tests to run.\n\n## What is the current bug behavior?\n\nAfter running the selected tests, it starts iterating into new tests, starting with paths such as `buildstream/plugintestutils/...`\n\n## What is the expected correct behavior?\n\nThat only the selected tests should be run.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/995/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/993", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/993/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/993/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/993/events", "html_url": "https://github.com/apache/buildstream/issues/993", "id": 800706731, "node_id": "MDU6SXNzdWU4MDA3MDY3MzE=", "number": 993, "title": "BUG when building a project with junctions in non-strict mode", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T21:15:52Z", "updated_at": "2021-02-03T21:16:44Z", "closed_at": "2021-02-03T21:16:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/993)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Apr 11, 2019, 21:37\n\n## Summary\n\nA stack trace when loading the project with a junction in non-strict mode.\n\n\n## Steps to reproduce\n\nUse gnome-build-meta branch `juerg/strip-variables` (or any project with junction), and try `bst --no-strict build core.bst`.\n\n\n## What is the current bug behavior?\nI get the following stack trace:\n\n```\nBUG     join() argument must be str or bytes, not 'NoneType'\n\n    Traceback (most recent call last):\n      File \"/home/abderrahim/.virtualenvs/bst-master/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.7/site-packages/click/core.py\", line 764, in __call__\n        return self.main(*args, **kwargs)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_frontend/cli.py\", line 195, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.7/site-packages/click/core.py\", line 717, in main\n        rv = self.invoke(ctx)\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.7/site-packages/click/core.py\", line 1137, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.7/site-packages/click/core.py\", line 956, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.7/site-packages/click/core.py\", line 555, in invoke\n        return callback(*args, **kwargs)\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.7/site-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_frontend/cli.py\", line 387, in build\n        remote=remote)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_stream.py\", line 242, in build\n        dynamic_plan=True)\n      File \"/home/abderrahim/dev/bst-master/buildstream/utils.py\", line 1303, in _gc_disabled\n        return func(*args, **kwargs)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_stream.py\", line 1041, in _load\n        fetch_subprojects=fetch_subprojects)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_pipeline.py\", line 113, in load\n        fetch_subprojects=fetch_subprojects)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_project.py\", line 456, in load_elements\n        fetch_subprojects=fetch_subprojects)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_loader/loader.py\", line 114, in load\n        element = loader._load_file(name, rewritable, ticker, fetch_subprojects)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_loader/loader.py\", line 263, in _load_file\n        fetch_subprojects, dep.provenance)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_loader/loader.py\", line 263, in _load_file\n        fetch_subprojects, dep.provenance)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_loader/loader.py\", line 263, in _load_file\n        fetch_subprojects, dep.provenance)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_loader/loader.py\", line 258, in _load_file\n        fetch_subprojects=fetch_subprojects, provenance=dep.provenance)\n      File \"/home/abderrahim/dev/bst-master/buildstream/_loader/loader.py\", line 559, in _get_loader\n        filename, element._get_cache_key())\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.7/posixpath.py\", line 94, in join\n        genericpath._check_arg_types('join', a, *p)\n      File \"/home/abderrahim/.virtualenvs/bst-master/lib/python3.7/genericpath.py\", line 149, in _check_arg_types\n        (funcname, s.__class__.__name__)) from None\n    TypeError: join() argument must be str or bytes, not 'NoneType'\n```\n\n## Possible fixes\n\nBisecting this gives it started happening in 352f4ad9a360ca4f8f3a0b7a68106d0131eeb374. It seems element._get_cache_key() is returning `None` for some reason.\n\n## Other relevant information\n\n* BuildStream version affected: current master 887461a584613c304064a636cbda8f4c863f35f9\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/993/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/992", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/992/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/992/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/992/events", "html_url": "https://github.com/apache/buildstream/issues/992", "id": 800706029, "node_id": "MDU6SXNzdWU4MDA3MDYwMjk=", "number": 992, "title": "Default targets don't work correctly when element-path is \".\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T21:14:53Z", "updated_at": "2021-02-03T21:15:45Z", "closed_at": "2021-02-03T21:15:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/992)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Apr 10, 2019, 14:37\n\n## Summary\r\n\r\nWhen `element-path` of a project is configured to `.`, i.e. the project directory, our logic for finding default elements breaks down. Since we stage junctions in `.bst` directory, the current logic tries to find all `.bst` files inside the junction, which is not expected. It's worse than that because it mangles the path and then tries to look for those elements in `bst` directory instead of `.bst`, and fails subsequently.\r\n\r\n\r\n## Steps to reproduce\r\n\r\n1. Create a project with `element-path: .`.\r\n2. Create a junction on some other project.\r\n3. Run `bst show`, everything should be fine this time as we won't have `.bst` directory to begin with.\r\n4. Run `bst show` again, watch it fail, as this time `bst` tries to find elements in the staged junctions.\r\n\r\n## What is the current bug behavior?\r\n\r\n`bst show` or any other commands fail on all subsequent runs when no target is specified.\r\n\r\n\r\n## What is the expected correct behavior?\r\n\r\n`bst show` and other commands should not attempt to find elements from staged junctions, and not error out in either case.\r\n\r\n\r\n## Relevant logs and/or screenshots\r\n\r\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/992/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/992/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/989", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/989/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/989/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/989/events", "html_url": "https://github.com/apache/buildstream/issues/989", "id": 800702986, "node_id": "MDU6SXNzdWU4MDA3MDI5ODY=", "number": 989, "title": "Overnigth jobs are failing: 'Node' object has no attribute 'get'", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T21:10:08Z", "updated_at": "2021-02-03T21:11:10Z", "closed_at": "2021-02-03T21:11:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/989)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Apr 5, 2019, 14:42\n\nAs in #984, this seems a problem with the master using a plugin from bst-external, which is meant to be bst-1.2 only at the moment.\n\nA fix might be done in bst-external keeping backward compatibility\n\nJob [#190989239](https://gitlab.com/BuildStream/buildstream/-/jobs/190989239) failed for 19bbc4c449adadfa4956ab568e6b289cab8d16ca:\n\n```\n      File \"/builds/BuildStream/buildstream/src/bst-ext/bst_external/elements/flatpak_image.py\", line 51, in configure\n        for section, pairs in node.get('metadata').items():\n    AttributeError: 'Node' object has no attribute 'get'\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/989/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/989/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/984", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/984/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/984/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/984/events", "html_url": "https://github.com/apache/buildstream/issues/984", "id": 800685785, "node_id": "MDU6SXNzdWU4MDA2ODU3ODU=", "number": 984, "title": "Overnigth jobs are failing: BUG: Attempt to do `checkout in Node ...", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T20:45:24Z", "updated_at": "2021-02-03T20:47:25Z", "closed_at": "2021-02-03T20:47:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/984)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Apr 3, 2019, 01:01\n\nJob [#189317157](https://gitlab.com/BuildStream/buildstream/-/jobs/189317157) failed for 9605f798022a02ff92f089d54f031c12bfbe6a00:\n\n```\n[--:--:--][  ][main:core activity] BUG  BUG: Attempt to do `checkout in Node(value={'checkout': Node(value='True', file_index=6, line=35, column=16), 'url': Node(value='gnome:libglnx.git', file_index=6, line=36, column=11)}, file_index=6, line=35, column=6)` test\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/984/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/984/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/978", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/978/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/978/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/978/events", "html_url": "https://github.com/apache/buildstream/issues/978", "id": 800666347, "node_id": "MDU6SXNzdWU4MDA2NjYzNDc=", "number": 978, "title": "Incorrect ref used in junctions", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T20:16:05Z", "updated_at": "2021-02-03T20:16:41Z", "closed_at": "2021-02-03T20:16:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/978)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 29, 2019, 08:14\n\n## Summary\n\nWhen building a project which uses a junction, BuildStream does not always use the correct ref.\n\n## Steps to reproduce\n\nI reproduced this with `bst-1.2` and `master`, using the following steps:\n\n* Add a new element to `gnome-build-meta` to build a VM image which uses new additions to freedesktop-sdk\n* Build `gnome-build-meta`\n\nThe result I get in both scenarios, when running `bst build vm/desktop-vm-image-x86_64.bst` in `gnome-build-meta` (an element that I have added locally) is:\n\n```\nvm/desktop-vm.bst [line 37 column 2]: Could not find element 'vm/linux-vm-boot/weston.bst' in project referred to by junction element 'freedesktop-sdk.bst'\n```\n\nNote that we use `project.refs` ref storage and so the refs are stored in `junction.refs`\n\nI will create a test case to prove this more clearly. I also have a suspicion that in master, we might be staging junctions in subproject `.bst/staged-junctions` directories instead of always consulting the toplevel project directory for where to stage a junction, in the case of deeply nested projects (will have to verify this).\n\n## What is the current bug behavior?\n\nWe do not stage the ref indicated by `junction.refs`.\n\nI verified this in `bst-1.2` branch by commenting out some code which cleans up the staged junction.\n\nThe staged freedesktop-sdk junction was at the tip of my local copy of `18.08`, and not at the ref indicated in the junction.refs file.\n\nIn master, I tried to verify this but I could not find a `.bst/staged-junctions` directory in the project where I launched `bst`.\n\n\n## What is the expected correct behavior?\n\nIt should use the ref indicated in `junction.refs` all the time.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/978/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/966", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/966/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/966/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/966/events", "html_url": "https://github.com/apache/buildstream/issues/966", "id": 800642613, "node_id": "MDU6SXNzdWU4MDA2NDI2MTM=", "number": 966, "title": "tests load user's configuration", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T19:40:41Z", "updated_at": "2021-02-03T19:42:06Z", "closed_at": "2021-02-03T19:42:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/966)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 20, 2019, 06:59\n\nI stumbled upon this because I had setup a demo with a config file which relocated my environment, and this caused tests to break when running tests on `master` with the following error:\n\n```\nself = <buildstream._context.Context object at 0x7f5310deb978>, config = '/home/tristan/.config/buildstream.conf'\n\n    def load(self, config=None):\n        profile_start(Topics.LOAD_CONTEXT, 'load')\n    \n        # If a specific config file is not specified, default to trying\n        # a $XDG_CONFIG_HOME/buildstream.conf file\n        #\n        if not config:\n            default_config = os.path.join(os.environ['XDG_CONFIG_HOME'],\n                                          'buildstream.conf')\n            if os.path.exists(default_config):\n                config = default_config\n    \n        # Load default config\n        #\n        defaults = _yaml.load(_site.default_user_config)\n    \n        if config:\n            self.config_origin = os.path.abspath(config)\n            user_config = _yaml.load(config)\n            _yaml.composite(defaults, user_config)\n    \n        # Give obsoletion warnings\n        if defaults.get('builddir'):\n            raise LoadError(LoadErrorReason.INVALID_DATA,\n>                           \"builddir is obsolete, use cachedir\")\nE           buildstream._exceptions.LoadError: builddir is obsolete, use cachedir\n\nbuildstream/_context.py:202: LoadError\n```\n\nThe problem is simply that we are not overriding the `XDG_` family of environment variables for tests, so the tests can be affected by the host environment.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/966/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/959", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/959/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/959/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/959/events", "html_url": "https://github.com/apache/buildstream/issues/959", "id": 800626561, "node_id": "MDU6SXNzdWU4MDA2MjY1NjE=", "number": 959, "title": "bst show expands '*' to artifact refs", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-02-03T19:22:42Z", "updated_at": "2021-02-03T19:25:10Z", "closed_at": "2021-02-03T19:25:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/959)\nIn GitLab by [[Gitlab user @aevri]](https://gitlab.com/aevri) on Mar 13, 2019, 18:26\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nIf you try `bst show '*'`, then you will be presented with an error like:\n\n```\nCannot perform this operation with artifact refs:\n\n    running-commands/hello/8276376b077eda104c812e6ec2f488c7c9eea211ce572c83d734c10bf241209f\n    running-commands/hello/5c4ed6545bfab8fde4a19fe01e8b1d5534ad3f5419f3c17eb558109c86432cea\n```\n\nIf you try instead with `bst show '*.bst'` then you get what you might expect:\n\n```\n      cached d23ade23cf21ef256f1b1c6c7e25af5d0a69346cacb38a411d1eeed279f548da alpine.bst\n      cached eaa9ad447253da4a89215c783b73d68de8e62212174d81d04ccc7e6dcc088dde base.bst\n      cached 8276376b077eda104c812e6ec2f488c7c9eea211ce572c83d734c10bf241209f hello.bst\n```\n\n\nThe artifact refs are invalid input for `bst show`, as such we should not have the CLI expand wildcards to existing artifact refs for this command.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/959/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/959/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/951", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/951/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/951/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/951/events", "html_url": "https://github.com/apache/buildstream/issues/951", "id": 800619952, "node_id": "MDU6SXNzdWU4MDA2MTk5NTI=", "number": 951, "title": "Running tox fails with stack trace", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T19:13:56Z", "updated_at": "2021-02-03T19:14:40Z", "closed_at": "2021-02-03T19:14:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/951)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 9, 2019, 10:43\n\nSince very recently in master, running `tox` fails with a stack trace.\n\nLuckily, it will run the tests first and then crash later.\n\nHere is some sample output of the crashes:\n\n```\n\n... passing tests ...\n\n======================================================================================== 19 passed in 8.62 seconds =========================================================================================\npy36 runtests: commands[1] | pip3 install -e /codethink/GNOME/buildstream\nObtaining file:///codethink/GNOME/buildstream\nRequirement already satisfied: Click>=7.0 in ./.tox/py36/lib/python3.6/site-packages (from BuildStream==1.3.0+1760.g00be9019.dirty) (7.0)\nRequirement already satisfied: grpcio>=1.10 in ./.tox/py36/lib/python3.6/site-packages (from BuildStream==1.3.0+1760.g00be9019.dirty) (1.17.1)\nRequirement already satisfied: Jinja2>=2.10 in ./.tox/py36/lib/python3.6/site-packages (from BuildStream==1.3.0+1760.g00be9019.dirty) (2.10)\nRequirement already satisfied: pluginbase in ./.tox/py36/lib/python3.6/site-packages (from BuildStream==1.3.0+1760.g00be9019.dirty) (0.7)\nRequirement already satisfied: protobuf>=3.6 in ./.tox/py36/lib/python3.6/site-packages (from BuildStream==1.3.0+1760.g00be9019.dirty) (3.6.1)\nRequirement already satisfied: psutil in ./.tox/py36/lib/python3.6/site-packages (from BuildStream==1.3.0+1760.g00be9019.dirty) (5.4.8)\nRequirement already satisfied: ruamel.yaml<0.15.52,>=0.15.41 in ./.tox/py36/lib/python3.6/site-packages (from BuildStream==1.3.0+1760.g00be9019.dirty) (0.15.51)\nRequirement already satisfied: setuptools in ./.tox/py36/lib/python3.6/site-packages (from BuildStream==1.3.0+1760.g00be9019.dirty) (39.0.1)\nRequirement already satisfied: pyroaring in ./.tox/py36/lib/python3.6/site-packages (from BuildStream==1.3.0+1760.g00be9019.dirty) (0.2.6)\nRequirement already satisfied: ujson in ./.tox/py36/lib/python3.6/site-packages (from BuildStream==1.3.0+1760.g00be9019.dirty) (1.35)\nRequirement already satisfied: six>=1.5.2 in ./.tox/py36/lib/python3.6/site-packages (from grpcio>=1.10->BuildStream==1.3.0+1760.g00be9019.dirty) (1.12.0)\nRequirement already satisfied: MarkupSafe>=0.23 in ./.tox/py36/lib/python3.6/site-packages (from Jinja2>=2.10->BuildStream==1.3.0+1760.g00be9019.dirty) (1.1.0)\nInstalling collected packages: BuildStream\n  Found existing installation: BuildStream 1.3.0+1760.g00be9019.dirty\n    Uninstalling BuildStream-1.3.0+1760.g00be9019.dirty:\n      Successfully uninstalled BuildStream-1.3.0+1760.g00be9019.dirty\n  Running setup.py develop for BuildStream\nSuccessfully installed BuildStream-1.3.0+1753.gea34b8c5.dirty\nYou are using pip version 18.1, however version 19.0.3 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\npy36 runtests: commands[2] | /codethink/GNOME/buildstream/.tox/py36/bin/python /codethink/GNOME/buildstream/tests/external_plugins.py /codethink/GNOME/buildstream/.tox/py36/tmp --cov=buildstrean --cov-append tests/format/junctions.py\nCloning repo bst-plugins-template to /codethink/GNOME/buildstream/.tox/py36/tmp...\nCloning into '/codethink/GNOME/buildstream/.tox/py36/tmp/bst-plugins-template'...\nremote: Enumerating objects: 21, done.        \nremote: Counting objects: 100% (21/21), done.        \nremote: Compressing objects: 100% (16/16), done.        \nremote: Total 21 (delta 0), reused 0 (delta 0)        \nUnpacking objects: 100% (21/21), done.\nInstalling bst-plugins-template...\nProcessing ./.tox/py36/tmp/bst-plugins-template\nRequirement already satisfied: requests in ./.tox/py36/lib/python3.6/site-packages (from bst-plugins-template==0.1.0) (2.21.0)\nRequirement already satisfied: setuptools in ./.tox/py36/lib/python3.6/site-packages (from bst-plugins-template==0.1.0) (39.0.1)\nRequirement already satisfied: certifi>=2017.4.17 in ./.tox/py36/lib/python3.6/site-packages (from requests->bst-plugins-template==0.1.0) (2018.11.29)\nRequirement already satisfied: chardet<3.1.0,>=3.0.2 in ./.tox/py36/lib/python3.6/site-packages (from requests->bst-plugins-template==0.1.0) (3.0.4)\nRequirement already satisfied: idna<2.9,>=2.5 in ./.tox/py36/lib/python3.6/site-packages (from requests->bst-plugins-template==0.1.0) (2.8)\nRequirement already satisfied: urllib3<1.25,>=1.21.1 in ./.tox/py36/lib/python3.6/site-packages (from requests->bst-plugins-template==0.1.0) (1.24.1)\nInstalling collected packages: bst-plugins-template\n  Found existing installation: bst-plugins-template 0.1.0\n    Uninstalling bst-plugins-template-0.1.0:\n      Successfully uninstalled bst-plugins-template-0.1.0\n  Running setup.py install for bst-plugins-template ... done\nSuccessfully installed bst-plugins-template-0.1.0\nYou are using pip version 18.1, however version 19.0.3 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\nTesting bst-plugins-template...\nmatching pattern:  /codethink/GNOME/buildstream/.tox/py36/tmp/bst-plugins-template/tests\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 430, in _importconftest\n    return self._conftestpath2mod[conftestpath]\nKeyError: local('/codethink/GNOME/buildstream/.tox/py36/tmp/bst-plugins-template/conftest.py')\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/tests/external_plugins.py\", line 91, in <module>\n    exit_code = run_repo_tests(plugin, tmpdir, pytest_args)\n  File \"/codethink/GNOME/buildstream/tests/external_plugins.py\", line 68, in run_repo_tests\n    return repo.test(pytest_args)\n  File \"/codethink/GNOME/buildstream/tests/external_plugins.py\", line 45, in test\n    return pytest.main(pytest_args + test_files)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 61, in main\n    config = _prepareconfig(args, plugins)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 196, in _prepareconfig\n    pluginmanager=pluginmanager, args=args\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/hooks.py\", line 289, in __call__\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 68, in _hookexec\n    return self._inner_hookexec(hook, methods, kwargs)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 62, in <lambda>\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 203, in _multicall\n    gen.send(outcome)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/helpconfig.py\", line 93, in pytest_cmdline_parse\n    config = outcome.get_result()\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 80, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 187, in _multicall\n    res = hook_impl.function(*args)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 655, in pytest_cmdline_parse\n    self.parse(args)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 871, in parse\n    self._preparse(args, addopts=addopts)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 827, in _preparse\n    early_config=self, args=args, parser=self._parser\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/hooks.py\", line 289, in __call__\n    return self._hookexec(self, self.get_hookimpls(), kwargs)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 68, in _hookexec\n    return self._inner_hookexec(hook, methods, kwargs)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 62, in <lambda>\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 208, in _multicall\n    return outcome.get_result()\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 80, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 187, in _multicall\n    res = hook_impl.function(*args)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 718, in pytest_load_initial_conftests\n    self.pluginmanager._set_initial_conftests(early_config.known_args_namespace)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 373, in _set_initial_conftests\n    self._try_load_conftest(anchor)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 379, in _try_load_conftest\n    self._getconftestmodules(anchor)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 414, in _getconftestmodules\n    mod = self._importconftest(conftestpath.realpath())\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 464, in _importconftest\n    self.consider_conftest(mod)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 503, in consider_conftest\n    self.register(conftestmodule, name=conftestmodule.__file__)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/__init__.py\", line 311, in register\n    ret = super(PytestPluginManager, self).register(plugin, name)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 102, in register\n    hook._maybe_apply_history(hookimpl)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/hooks.py\", line 336, in _maybe_apply_history\n    res = self._hookexec(self, [method], kwargs)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 68, in _hookexec\n    return self._inner_hookexec(hook, methods, kwargs)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 62, in <lambda>\n    firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 208, in _multicall\n    return outcome.get_result()\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 80, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 187, in _multicall\n    res = hook_impl.function(*args)\n  File \"/codethink/GNOME/buildstream/.tox/py36/tmp/bst-plugins-template/conftest.py\", line 35, in pytest_addoption\n    help='Run integration tests')\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/argparsing.py\", line 72, in addoption\n    self._anonymous.addoption(*opts, **attrs)\n  File \"/codethink/GNOME/buildstream/.tox/py36/lib/python3.6/site-packages/_pytest/config/argparsing.py\", line 303, in addoption\n    raise ValueError(\"option names %s already added\" % conflict)\nValueError: option names {'--integration'} already added\nERROR: InvocationError for command '/codethink/GNOME/buildstream/.tox/py36/bin/python /codethink/GNOME/buildstream/tests/external_plugins.py /codethink/GNOME/buildstream/.tox/py36/tmp --cov=buildstrean --cov-append tests/format/junctions.py' (exited with code 1)\n_________________________________________________________________________________________________ summary __________________________________________________________________________________________________\nERROR:   py36: commands failed\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/951/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/951/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/947", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/947/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/947/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/947/events", "html_url": "https://github.com/apache/buildstream/issues/947", "id": 800615987, "node_id": "MDU6SXNzdWU4MDA2MTU5ODc=", "number": 947, "title": "Errors lack context when files are not found", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2021-02-03T19:08:27Z", "updated_at": "2021-02-03T19:11:40Z", "closed_at": "2021-02-03T19:11:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/947)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 6, 2019, 09:29\n\n## Summary\n\nWhen specifying a dependency that does not exist, the resulting error lacks the required provenance at the beginning, so the user is left to painfully grep through the project to find where the reference to the non-existent element is.\n\nFurther, when specifying a sub-project (cross junction) element as a dependency, the error message is even more confusing, as it refers to the temporary cache directory where the junction project is staged instead of referring to the project by it's junction name, e.g, today I got this message:\n\n```\nCould not find element 'vm/linux-vm-boot/systemd.bst' in elements directory '/home/tristan/.cache/buildstream/build/freedesktop-sdk-oew_pua6/elements'\n```\n\nThe above error should look more like:\n\n```\n[vm/desktop-vm.bst line: 19 column 12]: Could not find element 'vm/linux-vm-boot/systemd.bst' in subproject 'freedesktop-sdk.bst'\n```\n\n## Steps to reproduce\n\nCreate a project with a dependency to a non-existing element\n\n## What is the current bug behavior?\n\nError message lacks provenance and refers to a staged element directory instead of the junction name in the case of a cross-junction element.\n\n## What is the expected correct behavior?\n\nA fully qualified error targeted at making the users life easier.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\nLooking at the loader code, it looks like the `_load_file()` method and perhaps also the `_get_loader()` method should both take a provenance argument.\n\nThe provenance argument would be expected to be `None` in the case of toplevel target elements, in which case the provenance can be safely omitted from the error message (as it was directly specified by the user on the command line).", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/947/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/947/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/946", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/946/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/946/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/946/events", "html_url": "https://github.com/apache/buildstream/issues/946", "id": 800615127, "node_id": "MDU6SXNzdWU4MDA2MTUxMjc=", "number": 946, "title": "Local source allows inclusion of random/data data", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T19:07:13Z", "updated_at": "2022-02-18T09:03:24Z", "closed_at": "2022-02-18T09:03:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/946)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 6, 2019, 06:58\n\n## Summary\r\n\r\nThere is a general desire to encode project source (elements and refs for example) into the output, such that one can easily discover how the source code was built. In the absence of better support, it can lead people to try to hack things into their artifacts using `local` sources in an unreliable way, e.g.: Encoding the `project.refs` or `elements/` directory into an artifact directly.\r\n\r\nThis is unreliable in popular CI scenarios where we want to build the latest of everything, and use `bst build --track-all <target.bst>` in CI to pickup the latest of everything maintained by a given working group and try to build it. These build scenarios are also where the likelihood of such hacks are higher, because it is easier to store a `project.refs` file than to example the master log file and view the tracking results of individual elements.\r\n\r\nNote: this is very similar to #195 which was mostly fixed.\r\n\r\n# Why is this unreliable ?\r\n\r\nWhat will happen when encoding a `project.refs` file into an artifact using a `local` source with build time tracking enabled is as follows:\r\n\r\n* BuildStream will startup and calculate the cache key components for all local sources early in the process\r\n* Next we will run the elements through the queues in the regular ways, causing selected elements to be tracked before building\r\n* These tracking results will result in modifications to the `project.refs` file (or `element.bst` files, depending on the project ref storage configuration)\r\n* At some random point, whenever an element which uses the said `local` source is built, the *changed* `project.refs` file will be added to an artifact\r\n* The resulting artifact contains data which does not match the cache key it was created for\r\n\r\n# What is the right way to get provenance information ?\r\n\r\nThe correct way to address this is need of encoded provenance information is to encode the data into the artifact outside of the payload, and to allow examination of this data through the `bst artifact` commands.\r\n\r\n# What is a reasonable workaround ?\r\n\r\nIf for example, you are running CI using gitlab, then it makes sense to copy over the resulting `project.refs` into the *gitlab artifact*, such that you can view it after a build.\r\n\r\nIn the same way that people likely store the log files, we can also store a modified project.refs (this is probably a good idea regardless of the presence of more fancy `bst artifact` commands).\r\n\r\n## Steps to reproduce\r\n\r\nBuild a project with tracking enabled, using an element like this:\r\n\r\n```yaml\r\nkind: import\r\n\r\nsources:\r\n- kind: local\r\n  path: project.refs\r\n```\r\n\r\n## What is the current bug behavior?\r\n\r\nBuildStream simply allows this behavior.\r\n\r\n## What is the expected correct behavior?\r\n\r\nBuildStream should error out in the case that the project author tries to encode data which BuildStream knows can change as a result of a build.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/946/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/946/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/943", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/943/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/943/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/943/events", "html_url": "https://github.com/apache/buildstream/issues/943", "id": 800604466, "node_id": "MDU6SXNzdWU4MDA2MDQ0NjY=", "number": 943, "title": "BuildStream gets slower with a high number of runners", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109199, "node_id": "MDU6TGFiZWwyNzA5MTA5MTk5", "url": "https://api.github.com/repos/apache/buildstream/labels/optimization", "name": "optimization", "color": "A295AA", "default": false, "description": "Make BuildStream faster and use less resources"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T18:54:36Z", "updated_at": "2021-02-03T18:55:20Z", "closed_at": "2021-02-03T18:55:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/943)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Mar 5, 2019, 11:58\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nI've been running some benchmarks on BuildStream and have a surprising behavior.\n\nThe machine used to run the benchmarks has a 6 physical / 12 virtual CPU cores, 32Go of DDR4 RAM and a sata ssd.\n\nthe command tested is `bst --builders ${BUILDERS} build essential-stack.bst` from http://gitlab.com/jennis/debian-stretch-bst.\nEach run has been done 6 times, with the first one discarded, to take into account kernel caching.\nThe machine had only this and minimal software stack running during the tests (systemd/NetworkManager/tmux) and was a Fedora 29 fully updated as of the 1st of march.\nThe buildstream cache was busted between each run and the yaml cache was pre-populated.\n\nHere is the results:\n\n|builders|min|max|mean|\n|--------|--:|--:|---:|\n|4|185.00|186.22|185.586|\n|8|158.70|161.94|160.346|\n|12|245.02|248.35|246.360|\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nI'm putting a way of reproducing this locally, but it's mainly running bst build, with the different number of builders.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nBuildStream gets way slower with 12 builders than with 8\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\nBuildStream should be able to scale over 8 workers", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/943/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/936", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/936/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/936/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/936/events", "html_url": "https://github.com/apache/buildstream/issues/936", "id": 800600554, "node_id": "MDU6SXNzdWU4MDA2MDA1NTQ=", "number": 936, "title": "Tests fail if host tools are not in a standard directory", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T18:49:07Z", "updated_at": "2021-02-03T18:49:53Z", "closed_at": "2021-02-03T18:49:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/936)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Feb 28, 2019, 18:28\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nIf `git` is not in `[\"git\", \"/bin/git\", \"/usr/bin/git\"]`, but in another directory (like `/opt/git/git`), the tests will fail with `FileNotFoundError: [Errno 2] No such file or directory: 'git': 'git'`. The \"HAVE_GIT\" variable however finds git normally so tests are not skipped.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\ninstall git in a non-standard path (/opt/git)\ntox -e py3X\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nTests fail with obscure error about missing git\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nTests should succeed. We have git in path\n\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nrename variables from \"HAVE_{TOOL}\" to \"{TOOL}\", containing the full path to the tool and use this instead.\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/936/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/936/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/931", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/931/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/931/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/931/events", "html_url": "https://github.com/apache/buildstream/issues/931", "id": 800593901, "node_id": "MDU6SXNzdWU4MDA1OTM5MDE=", "number": 931, "title": "Support cross-junction elements in Element.search()", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 27, "created_at": "2021-02-03T18:39:47Z", "updated_at": "2021-02-03T18:43:49Z", "closed_at": "2021-02-03T18:43:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/931)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Feb 25, 2019, 21:45\n\n## Background\n\nFollow-up from https://gitlab.com/BuildStream/buildstream/merge_requests/998#note_144601678.\n\nNow that both the CLI and element declarations support `JUNCTION:ELEMENT` style to refer to cross-junction elements inline, it might also be nice to support it via `Element.search()`.\n\nOriginal comment for reference:\n\n> One more thing which came to mind while working on creating a bootable image...\n>\n> Some element implementations (like `x86Image` for example, or script elements), expose configurations which allow specifying an element name, the implementations later use `Element.search()` to obtain the dependency specified by the user.\n>\n> I think it would be very useful to automatically support cross junction elements specified with a `:` in `Element.search()`.\n\n## Task description\n\n[//]: # (Short summary of the action to be executed)\n\n* [ ] `Element.search()` works with cross-junction dependencies, with `:` as separator for names of the junction and the element.\n\n## Acceptance Criteria\n\n[//]: # (Acceptance criteria should follow the S.M.A.R.T. principle https://en.wikipedia.org/wiki/SMART_criteria )\n\n`Element.search()` works with cross-junction dependencies, with `:` as separator for names of the junction and the element.\n\n----\n[//]: # (To review information about possible relevant labels for this issue please view the list of labels: https://gitlab.com/BuildStream/buildstream/labels)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/931/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/929", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/929/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/929/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/929/events", "html_url": "https://github.com/apache/buildstream/issues/929", "id": 800591206, "node_id": "MDU6SXNzdWU4MDA1OTEyMDY=", "number": 929, "title": "Spurious blockingio error", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2021-02-03T18:36:03Z", "updated_at": "2021-02-03T18:39:25Z", "closed_at": "2021-02-03T18:39:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/929)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Feb 23, 2019, 07:51\n\n## Summary\n\nToday it happened to me that I could not use BuildStream due to a stack trace which happens at the beginning of the session.\n\nAfter applying an `fcntl` workaround which clears the file descriptor flags on stderr/stdio, BuildStream started working again.\n\nAfter *removing* the workaround, BuildStream no longer produces the unreproducible error.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nNone.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nSpurious stack traces which rarely happen.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nNo spurious stack traces\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\nHere is a sample of the log file:\n\n```\n      cached 15d0d536e33e473b6cdc71fce2c8d935cefa2480aa53e1c13e7d5878ff8fe6e8 freedesktop-sdk.bst:base/libassuan.bst \n      cached 63c47a9a99233e6c20f720202a952cee77d278edd4578c5807493a35d05aa19b freedesktop-sdk.bst:base/libksba.bst \n      cached e8b2afa8d69c88aeb6e148af8290c80eea616c11b6ef10bb3a85a6770d24bf07 freedesktop-sdk.bst:base/npth.bst \n      cached 0277075af66ca787c632cfeb8633dcdbe8fb20875a8cdf55159b56205b8ec38d freedesktop-sdk.bst:base/gnupg.bst \n      cached 7043a1feb89f7c416525cce0b315dbaccb2d61de92fca1994a545c5d952cb1b1 freedesktop-sdk.bst:base/pcre2.bst \n      cached bf4f16eebdd80ff8b70a4fdd4e10f8a922db73e6f6b69a7c663c6638f932a527 freedesktop-sdk.bst:base/git.bst \n      cached 61a91a356e8af39cd6f448cda9b621859b56293c414c9de309423e9040f8ca3d[--:--:--][][] BUG     [Errno 11] write could not complete without blocking\n\n    Traceback (most recent call last):\n      File \"/home/tristan/.local/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/home/tristan/.local/lib/python3.5/site-packages/click/core.py\", line 764, in __call__\n        return self.main(*args, **kwargs)\n      File \"/codethink/GNOME/buildstream/buildstream/_frontend/cli.py\", line 162, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/home/tristan/.local/lib/python3.5/site-packages/click/core.py\", line 717, in main\n        rv = self.invoke(ctx)\n      File \"/home/tristan/.local/lib/python3.5/site-packages/click/core.py\", line 1137, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/home/tristan/.local/lib/python3.5/site-packages/click/core.py\", line 956, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/home/tristan/.local/lib/python3.5/site-packages/click/core.py\", line 555, in invoke\n        return callback(*args, **kwargs)\n      File \"/home/tristan/.local/lib/python3.5/site-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/codethink/GNOME/buildstream/buildstream/_frontend/cli.py\", line 330, in build\n        build_all=all_)\n      File \"/codethink/GNOME/buildstream/buildstream/_stream.py\", line 213, in build\n        self._run()\n      File \"/codethink/GNOME/buildstream/buildstream/_stream.py\", line 1006, in _run\n        self._session_start_callback()\n      File \"/codethink/GNOME/buildstream/buildstream/_frontend/app.py\", line 637, in session_start_cb\n        styling=self.colors)\n      File \"/codethink/GNOME/buildstream/buildstream/_frontend/widget.py\", line 498, in print_heading\n        click.echo(text, color=styling, nl=False, err=True)\n      File \"/home/tristan/.local/lib/python3.5/site-packages/click/utils.py\", line 260, in echo\n        file.write(message)\n    BlockingIOError: [Errno 11] write could not complete without blocking\n```\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nClear file descriptor flags unconditionally at startup, can't say right now that this workaround is completely safe. \n\nThe idea for the workaround was taken from a [similar issue](https://github.com/travis-ci/travis-ci/issues/8920#issuecomment-352767521)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/929/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/926", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/926/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/926/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/926/events", "html_url": "https://github.com/apache/buildstream/issues/926", "id": 800589252, "node_id": "MDU6SXNzdWU4MDA1ODkyNTI=", "number": 926, "title": "Subproject overlap policy is inherited by including projects", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T18:33:06Z", "updated_at": "2021-02-03T18:34:39Z", "closed_at": "2021-02-03T18:34:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/926)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Feb 21, 2019, 10:15\n\n## Summary\n\nWhen building something on top of a project which has turned overlap warnings into errors, the project including the subproject will get errors even if that project did not ask for errors.\n\n## Steps to reproduce\n\nI discovered this while trying to build a GNOME VM, since the `freedesktop-sdk` project enables the errors, the\n`gnome-build-meta` project is *forced* to whitelist any overlapping files and can not treat these overlaps as\nwarnings, even though `gnome-build-meta` did not as for errors here.\n\nOverlaps while building the subproject with errors enabled should be errors, overlaps from the including project which did not enable errors should be warnings.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/926/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/926/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/919", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/919/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/919/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/919/events", "html_url": "https://github.com/apache/buildstream/issues/919", "id": 800580465, "node_id": "MDU6SXNzdWU4MDA1ODA0NjU=", "number": 919, "title": "'bst build <elem>' does not assemble all required elements in some circumstances", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 35, "created_at": "2021-02-03T18:20:20Z", "updated_at": "2021-02-03T18:25:44Z", "closed_at": "2021-02-03T18:25:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/919)\nIn GitLab by [[Gitlab user @matthew-yates]](https://gitlab.com/matthew-yates) on Feb 18, 2019, 13:57\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThere seems to be a problem with how the build pipeline is constructed when a workspace is open on a depedency of the element I requested a build for. `bst build` seems to just build up to the workspace element and stops there (exiting with 0 too). It's a little hard to explain - see 'Steps to reproduce'. I've tested this with v1.2.3 and current head of master (1.3.0).\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nI've set up a project that demonstrates the issue here: https://gitlab.com/matthew-yates/bst-workspace-issue\n\n```\n$ bst workspace open elem1.bst\n$ bst build elem3.bst\n```\n\nThis should build `elem1.bst` and `elem3.bst`, but only elem1.bst is built and `elem3.bst` is left in a `'waiting'` state.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n```\n[myates[[Gitlab user @myates-uk-rdlabs-hpecorp-net]](https://gitlab.com/myates-uk-rdlabs-hpecorp-net) workspace_issue]$ bst --version\n1.3.0+1559.gef85e3b2                                                    \n[myates[[Gitlab user @myates-uk-rdlabs-hpecorp-net]](https://gitlab.com/myates-uk-rdlabs-hpecorp-net) workspace_issue]$ bst workspace open elem1.bst\n[--:--:--][        ][ main:core activity                 ] START   Loading elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving cached state\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving cached state\n[--:--:--][        ][ main:core activity                 ] START   Checking sources\n[00:00:00][        ][ main:core activity                 ] SUCCESS Checking sources\n[--:--:--][        ][ main:core activity                 ] INFO    Creating workspace for element elem1.bst\n[--:--:--][e8ed8241][ main:elem1.bst                     ] START   Staging sources to /var/home/myates/workspace_issue/elem1\n[--:--:--][        ][ main:elem1.bst-0                   ] START   Staging local files at files/file1\n[00:00:00][        ][ main:elem1.bst-0                   ] SUCCESS Staging local files at files/file1\n[00:00:00][e8ed8241][ main:elem1.bst                     ] SUCCESS Staging sources to /var/home/myates/workspace_issue/elem1\n[--:--:--][        ][ main:core activity                 ] INFO    Created a workspace for element: elem1.bst\n[myates[[Gitlab user @myates-uk-rdlabs-hpecorp-net]](https://gitlab.com/myates-uk-rdlabs-hpecorp-net) workspace_issue]$ bst build elem3.bst\n[--:--:--][        ][ main:core activity                 ] START   Build\n[--:--:--][        ][ main:core activity                 ] START   Loading elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving cached state\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving cached state\n[--:--:--][        ][ main:core activity                 ] START   Checking sources\n[00:00:00][        ][ main:core activity                 ] SUCCESS Checking sources\n\nBuildStream Version 1.3.0+1559.gef85e3b2\n  Session Start: Monday, 18-02-2019 at 12:57:26\n  Project:       workspace_issue_test (/var/home/myates/workspace_issue)\n  Targets:       elem3.bst\n  Cache Usage:   11.2G / infinity (6%)\n\nUser Configuration\n  Configuration File:      Default Configuration\n  Log Files:               /home/myates/.cache/buildstream/logs\n  Source Mirrors:          /home/myates/.cache/buildstream/sources\n  Build Area:              /home/myates/.cache/buildstream/build\n  Artifact Cache:          /home/myates/.cache/buildstream/artifacts\n  Strict Build Plan:       Yes\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nPipeline\n   buildable ???????????????????????????????????????????????????????????????? elem1.bst Workspace: /var/home/myates/workspace_issue/elem1\n      cached 0b26d694fcb7affb69ae8a1ff181978fcfcf089623b4065835c64b952a69e1c8 elem2.bst \n     waiting ???????????????????????????????????????????????????????????????? stack.bst \n     waiting ???????????????????????????????????????????????????????????????? elem3.bst \n===============================================================================\n[--:--:--][????????][build:elem1.bst                     ] START   workspace_issue_test/elem1/????????-build.19601.log\n[--:--:--][????????][build:elem1.bst                     ] START   Staging sources\n[00:00:00][????????][build:elem1.bst                     ] SUCCESS Staging sources\n[--:--:--][????????][build:elem1.bst                     ] START   Caching artifact\n[00:00:00][????????][build:elem1.bst                     ] SUCCESS Caching artifact\n[00:00:00][????????][build:elem1.bst                     ] SUCCESS workspace_issue_test/elem1/????????-build.19601.log\n[00:00:00][        ][ main:core activity                 ] SUCCESS Build\n\nResolved key Summary\n      cached eef33afd91c11513ced818c07952b816a5bf1c51654e3b64819133a688c2c181 elem1.bst Workspace: /var/home/myates/workspace_issue/elem1\n     waiting 413a90aa56674ed5567274a37c1c85a09278322809715c070077f7b2e9cfe054 elem3.bst \n   buildable ec34b50b61fccf50eb9f4115a2db0bf1e59f8ec68c4f3f73f48cd7490b643520 stack.bst \n\nPipeline Summary\n  Total:       4\n  Session:     3\n  Fetch Queue: processed 0, skipped 1, failed 0 \n  Build Queue: processed 1, skipped 0, failed 0 \n[myates[[Gitlab user @myates-uk-rdlabs-hpecorp-net]](https://gitlab.com/myates-uk-rdlabs-hpecorp-net) workspace_issue]$ bst show elem3.bst\n[--:--:--][        ][ main:core activity                 ] START   Loading elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving cached state\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving cached state\n      cached eef33afd91c11513ced818c07952b816a5bf1c51654e3b64819133a688c2c181 elem1.bst Workspace: /var/home/myates/workspace_issue/elem1\n      cached 0b26d694fcb7affb69ae8a1ff181978fcfcf089623b4065835c64b952a69e1c8 elem2.bst \n   buildable ec34b50b61fccf50eb9f4115a2db0bf1e59f8ec68c4f3f73f48cd7490b643520 stack.bst \n     waiting 413a90aa56674ed5567274a37c1c85a09278322809715c070077f7b2e9cfe054 elem3.bst \n```\n\nSo despite asking `elem3.bst` to be built, it's still not built. But if i call `bst build elem3.bst` again, it is built.\nPresumably because the strong cache key for `elem1.bst` is now resolved.\n\n```\n[myates[[Gitlab user @myates-uk-rdlabs-hpecorp-net]](https://gitlab.com/myates-uk-rdlabs-hpecorp-net) workspace_issue]$ bst build elem3.bst\n[--:--:--][        ][ main:core activity                 ] START   Build\n[--:--:--][        ][ main:core activity                 ] START   Loading elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving cached state\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving cached state\n[--:--:--][        ][ main:core activity                 ] START   Checking sources\n[00:00:00][        ][ main:core activity                 ] SUCCESS Checking sources\n\nBuildStream Version 1.3.0+1559.gef85e3b2\n  Session Start: Monday, 18-02-2019 at 13:03:07\n  Project:       workspace_issue_test (/var/home/myates/workspace_issue)\n  Targets:       elem3.bst\n  Cache Usage:   11.2G / infinity (6%)\n\nUser Configuration\n  Configuration File:      Default Configuration\n  Log Files:               /home/myates/.cache/buildstream/logs\n  Source Mirrors:          /home/myates/.cache/buildstream/sources\n  Build Area:     [myates[[Gitlab user @myates-uk-rdlabs-hpecorp-net]](https://gitlab.com/myates-uk-rdlabs-hpecorp-net) workspace_issue]$ bst build elem3.bst\n[--:--:--][        ][ main:core activity                 ] START   Build\n[--:--:--][        ][ main:core activity                 ] START   Loading elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving cached state\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving cached state\n[--:--:--][        ][ main:core activity                 ] START   Checking sources\n[00:00:00][        ][ main:core activity                 ] SUCCESS Checking sources\n\nBuildStream Version 1.3.0+1559.gef85e3b2\n  Session Start: Monday, 18-02-2019 at 13:03:07\n  Project:       workspace_issue_test (/var/home/myates/workspace_issue)\n  Targets:       elem3.bst\n  Cache Usage:   11.2G / infinity (6%)\n\nUser Configuration[myates[[Gitlab user @myates-uk-rdlabs-hpecorp-net]](https://gitlab.com/myates-uk-rdlabs-hpecorp-net) workspace_issue]$ bst build elem3.bst\n[--:--:--][        ][ main:core activity                 ] START   Build\n[--:--:--][        ][ main:core activity                 ] START   Loading elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Loading elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving elements\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving elements\n[--:--:--][        ][ main:core activity                 ] START   Resolving cached state\n[00:00:00][        ][ main:core activity                 ] SUCCESS Resolving cached state\n[--:--:--][        ][ main:core activity                 ] START   Checking sources\n[00:00:00][        ][ main:core activity                 ] SUCCESS Checking sources\n\nBuildStream Version 1.3.0+1559.gef85e3b2\n  Session Start: Monday, 18-02-2019 at 13:03:07\n  Project:       workspace_issue_test (/var/home/myates/workspace_issue)\n  Targets:       elem3.bst\n  Cache Usage:   11.2G / infinity (6%)\n\nUser Configuration\n  Configuration File:      Default Configuration\n  Log Files:               /home/myates/.cache/buildstream/logs\n  Source Mirrors:          /home/myates/.cache/buildstream/sources\n  Build Area:              /home/myates/.cache/buildstream/build\n  Artifact Cache:          /home/myates/.cache/buildstream/artifacts\n  Strict Build Plan:       Yes\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nPipeline\n      cached eef33afd91c11513ced818c07952b816a5bf1c51654e3b64819133a688c2c181 elem1.bst Workspace: /var/home/myates/workspace_issue/elem1\n      cached 0b26d694fcb7affb69ae8a1ff181978fcfcf089623b4065835c64b952a69e1c8 elem2.bst \n      cached ec34b50b61fccf50eb9f4115a2db0bf1e59f8ec68c4f3f73f48cd7490b643520 stack.bst \n      cached 413a90aa56674ed5567274a37c1c85a09278322809715c070077f7b2e9cfe054 elem3.bst \n===============================================================================\n[00:00:00][        ][ main:core activity                 ] SUCCESS Build\n\nPipeline Summary\n  Total:       4\n  Session:     0\n  Fetch Queue: processed 0, skipped 0, failed 0 \n\n  Configuration File:      Default Configuration\n  Log Files:               /home/myates/.cache/buildstream/logs\n  Source Mirrors:          /home/myates/.cache/buildstream/sources\n  Build Area:              /home/myates/.cache/buildstream/build\n  Artifact Cache:          /home/myates/.cache/buildstream/artifacts\n  Strict Build Plan:       Yes\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nPipeline\n      cached eef33afd91c11513ced818c07952b816a5bf1c51654e3b64819133a688c2c181 elem1.bst Workspace: /var/home/myates/workspace_issue/elem1\n      cached 0b26d694fcb7affb69ae8a1ff181978fcfcf089623b4065835c64b952a69e1c8 elem2.bst \n      cached ec34b50b61fccf50eb9f4115a2db0bf1e59f8ec68c4f3f73f48cd7490b643520 stack.bst \n      cached 413a90aa56674ed5567274a37c1c85a09278322809715c070077f7b2e9cfe054 elem3.bst \n===============================================================================\n[00:00:00][        ][ main:core activity                 ] SUCCESS Build\n\nPipeline Summary\n  Total:       4\n  Session:     0\n  Fetch Queue: processed 0, skipped 0, failed 0 \n         /home/myates/.cache/buildstream/build\n  Artifact Cache:          /home/myates/.cache/buildstream/artifacts\n  Strict Build Plan:       Yes\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nPipeline\n      cached eef33afd91c11513ced818c07952b816a5bf1c51654e3b64819133a688c2c181 elem1.bst Workspace: /var/home/myates/workspace_issue/elem1\n      cached 0b26d694fcb7affb69ae8a1ff181978fcfcf089623b4065835c64b952a69e1c8 elem2.bst \n      cached ec34b50b61fccf50eb9f4115a2db0bf1e59f8ec68c4f3f73f48cd7490b643520 stack.bst \n      cached 413a90aa56674ed5567274a37c1c85a09278322809715c070077f7b2e9cfe054 elem3.bst \n===============================================================================\n[00:00:00][        ][ main:core activity                 ] SUCCESS Build\n\nPipeline Summary\n  Total:       4\n  Session:     0\n  Fetch Queue: processed 0, skipped 0, failed 0 \n```\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThat I only have to invoke 'bst build elem3.bst' once.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\nSee above.\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nNo idea - Element._update_state() looks suspicious though. \n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.2.3\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/919/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/918", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/918/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/918/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/918/events", "html_url": "https://github.com/apache/buildstream/issues/918", "id": 800579661, "node_id": "MDU6SXNzdWU4MDA1Nzk2NjE=", "number": 918, "title": "requirements makefile adds pkg-resources 0.0.0", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T18:19:06Z", "updated_at": "2021-02-03T18:20:13Z", "closed_at": "2021-02-03T18:20:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/918)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Feb 18, 2019, 10:19\n\n## Summary\n\nRegeneration of the requirements `.txt` files results in requirements files that do not work.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nRun `make -C requirements`\n\n## What is the current bug behavior?\n\nAfter updating the requirements and running `tox`, I get the following error:\n\n\n```\n\nCollecting Click==7.0 (from -r requirements/requirements.txt (line 1))\n  Using cached https://files.pythonhosted.org/packages/fa/37/45185cb5abbc30d7257104c434fe0b07e5a195a6847506c074527aa599ec/Click-7.0-py2.py3-none-any.whl\nCollecting grpcio==1.17.1 (from -r requirements/requirements.txt (line 2))\n  Using cached https://files.pythonhosted.org/packages/34/91/e3027ebb8e42ed14830488d4c82f6ceb8e47c811dd1e4a4dd87be151b570/grpcio-1.17.1-cp37-cp37m-manylinux1_x86_64.whl\nCollecting Jinja2==2.10 (from -r requirements/requirements.txt (line 3))\n  Using cached https://files.pythonhosted.org/packages/7f/ff/ae64bacdfc95f27a016a7bed8e8686763ba4d277a78ca76f32659220a731/Jinja2-2.10-py2.py3-none-any.whl\nCollecting pluginbase==0.7 (from -r requirements/requirements.txt (line 4))\n  Using cached https://files.pythonhosted.org/packages/6e/f4/1db0a26c1c7fad81a1214ad1b02839a7bd98d8ba68f782f6edcc3d343441/pluginbase-0.7.tar.gz\nCollecting protobuf==3.6.1 (from -r requirements/requirements.txt (line 5))\n  Using cached https://files.pythonhosted.org/packages/3a/30/289ead101f94998d88e8961a3548aea29417ae0057be23972483cddebf4f/protobuf-3.6.1-cp37-cp37m-manylinux1_x86_64.whl\nCollecting psutil==5.4.8 (from -r requirements/requirements.txt (line 6))\n  Using cached https://files.pythonhosted.org/packages/e3/58/0eae6e4466e5abf779d7e2b71fac7fba5f59e00ea36ddb3ed690419ccb0f/psutil-5.4.8.tar.gz\nCollecting ruamel.yaml==0.15.51 (from -r requirements/requirements.txt (line 14))\n  Using cached https://files.pythonhosted.org/packages/fb/f4/a889830fe33284fc9a04c5d1ff699b6200a7ddd8527c6329dc541add022a/ruamel.yaml-0.15.51-cp37-cp37m-manylinux1_x86_64.whl\nCollecting setuptools==39.0.1 (from -r requirements/requirements.txt (line 15))\n  Using cached https://files.pythonhosted.org/packages/20/d7/04a0b689d3035143e2ff288f4b9ee4bf6ed80585cc121c90bfd85a1a8c2e/setuptools-39.0.1-py2.py3-none-any.whl\nCollecting pyroaring==0.2.6 (from -r requirements/requirements.txt (line 16))\n  Using cached https://files.pythonhosted.org/packages/c0/64/c9f6a46aa52f05681a3a57bfadaec71d06d5c8d958b86f053eeca7bacbeb/pyroaring-0.2.6.tar.gz\nCollecting ujson==1.35 (from -r requirements/requirements.txt (line 17))\n  Using cached https://files.pythonhosted.org/packages/16/c4/79f3409bc710559015464e5f49b9879430d8f87498ecdc335899732e5377/ujson-1.35.tar.gz\nCollecting MarkupSafe==1.1.0 (from -r requirements/requirements.txt (line 19))\n  Using cached https://files.pythonhosted.org/packages/e4/c4/adcc2d6f2ac2146cc04e076f14f1006c1de8e1e747fa067668b6573000b8/MarkupSafe-1.1.0-cp37-cp37m-manylinux1_x86_64.whl\nCollecting six==1.12.0 (from -r requirements/requirements.txt (line 20))\n  Using cached https://files.pythonhosted.org/packages/73/fb/00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9/six-1.12.0-py2.py3-none-any.whl\nCollecting coverage==4.5.2 (from -r requirements/dev-requirements.txt (line 1))\n  Using cached https://files.pythonhosted.org/packages/d0/a1/ea743f1facd8d287c2088d47fc80b06e042833041ba906fdd5c8f5d291bb/coverage-4.5.2-cp37-cp37m-manylinux1_x86_64.whl\nCollecting pylint==2.2.2 (from -r requirements/dev-requirements.txt (line 2))\n  Using cached https://files.pythonhosted.org/packages/a5/06/ecef826f319055e6b231716730d7f9047dd7524ffda224b521d989f085b6/pylint-2.2.2-py3-none-any.whl\nCollecting pycodestyle==2.5.0 (from -r requirements/dev-requirements.txt (line 3))\n  Using cached https://files.pythonhosted.org/packages/0e/0c/04a353e104d2f324f8ee5f4b32012618c1c86dd79e52a433b64fceed511b/pycodestyle-2.5.0-py2.py3-none-any.whl\nCollecting pytest==4.2.1 (from -r requirements/dev-requirements.txt (line 4))\n  Using cached https://files.pythonhosted.org/packages/11/e9/dc9a7269a7e1fed46de7d5864da6a86370256c791bf263dd0c7d7e8f1ff1/pytest-4.2.1-py2.py3-none-any.whl\nCollecting pytest-cov==2.6.1 (from -r requirements/dev-requirements.txt (line 5))\n  Using cached https://files.pythonhosted.org/packages/7d/b5/92f32674ab954f80499ac73347bfeb815545ea295439c12b0ef3ac8f0975/pytest_cov-2.6.1-py2.py3-none-any.whl\nCollecting pytest-datafiles==2.0 (from -r requirements/dev-requirements.txt (line 6))\n  Using cached https://files.pythonhosted.org/packages/21/a2/7da7d04eeca8def8062480e6696570aefde1c378152d2da9d5f3870649fb/pytest_datafiles-2.0-py2.py3-none-any.whl\nCollecting pytest-env==0.6.2 (from -r requirements/dev-requirements.txt (line 7))\n  Using cached https://files.pythonhosted.org/packages/f9/6e/31efb8dc1d17052c12f39262223e94038bfcc4cc7a124235630a6d50f166/pytest-env-0.6.2.tar.gz\nCollecting pytest-xdist==1.26.1 (from -r requirements/dev-requirements.txt (line 8))\n  Using cached https://files.pythonhosted.org/packages/fb/24/b71217c2083beca1f3b1fb8b32030c68ef189a718034bafe6b5895daf6a8/pytest_xdist-1.26.1-py2.py3-none-any.whl\nCollecting pytest-timeout==1.3.3 (from -r requirements/dev-requirements.txt (line 9))\n  Using cached https://files.pythonhosted.org/packages/58/92/f60ea2e27074d6f97c8aaf21e34d1f838eb623e4b8070680846c65318a10/pytest_timeout-1.3.3-py2.py3-none-any.whl\nCollecting pyftpdlib==1.5.4 (from -r requirements/dev-requirements.txt (line 10))\n  Using cached https://files.pythonhosted.org/packages/0d/64/eb0daca74956d0e6849b71c5ba99ab873ec59b888a1d7651d92fb686ee04/pyftpdlib-1.5.4.tar.gz\nCollecting apipkg==1.5 (from -r requirements/dev-requirements.txt (line 12))\n  Using cached https://files.pythonhosted.org/packages/67/08/4815a09603fc800209431bec5b8bd2acf2f95abdfb558a44a42507fb94da/apipkg-1.5-py2.py3-none-any.whl\nCollecting astroid==2.1.0 (from -r requirements/dev-requirements.txt (line 13))\n  Using cached https://files.pythonhosted.org/packages/fc/53/8809bc008bad0300897281a7b320b286dc0e84e836396c0cff6279841e8a/astroid-2.1.0-py3-none-any.whl\nCollecting atomicwrites==1.3.0 (from -r requirements/dev-requirements.txt (line 14))\n  Using cached https://files.pythonhosted.org/packages/52/90/6155aa926f43f2b2a22b01be7241be3bfd1ceaf7d0b3267213e8127d41f4/atomicwrites-1.3.0-py2.py3-none-any.whl\nCollecting attrs==18.2.0 (from -r requirements/dev-requirements.txt (line 15))\n  Using cached https://files.pythonhosted.org/packages/3a/e1/5f9023cc983f1a628a8c2fd051ad19e76ff7b142a0faf329336f9a62a514/attrs-18.2.0-py2.py3-none-any.whl\nCollecting execnet==1.5.0 (from -r requirements/dev-requirements.txt (line 16))\n  Using cached https://files.pythonhosted.org/packages/f9/76/3343e69a2a1602052f587898934e5fea395d22310d39c07955596597227c/execnet-1.5.0-py2.py3-none-any.whl\nCollecting isort==4.3.4 (from -r requirements/dev-requirements.txt (line 17))\n  Using cached https://files.pythonhosted.org/packages/1f/2c/22eee714d7199ae0464beda6ad5fedec8fee6a2f7ffd1e8f1840928fe318/isort-4.3.4-py3-none-any.whl\nCollecting lazy-object-proxy==1.3.1 (from -r requirements/dev-requirements.txt (line 18))\n  Using cached https://files.pythonhosted.org/packages/55/08/23c0753599bdec1aec273e322f277c4e875150325f565017f6280549f554/lazy-object-proxy-1.3.1.tar.gz\nCollecting mccabe==0.6.1 (from -r requirements/dev-requirements.txt (line 19))\n  Using cached https://files.pythonhosted.org/packages/87/89/479dc97e18549e21354893e4ee4ef36db1d237534982482c3681ee6e7b57/mccabe-0.6.1-py2.py3-none-any.whl\nCollecting more-itertools==6.0.0 (from -r requirements/dev-requirements.txt (line 20))\n  Using cached https://files.pythonhosted.org/packages/ae/d4/d6bad4844831943dd667510947712750004525c5807711982f4ec390da2b/more_itertools-6.0.0-py3-none-any.whl\nCollecting pathlib2==2.3.3 (from -r requirements/dev-requirements.txt (line 21))\n  Using cached https://files.pythonhosted.org/packages/2a/46/c696dcf1c7aad917b39b875acdc5451975e3a9b4890dca8329983201c97a/pathlib2-2.3.3-py2.py3-none-any.whl\nCollecting pkg-resources==0.0.0 (from -r requirements/dev-requirements.txt (line 22))\n  Could not find a version that satisfies the requirement pkg-resources==0.0.0 (from -r requirements/dev-requirements.txt (line 22)) (from versions: )\nNo matching distribution found for pkg-resources==0.0.0 (from -r requirements/dev-requirements.txt (line 22))\nYou are using pip version 18.1, however version 19.0.2 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n```\n\n## What is the expected correct behavior?\n\nThe tests might fail after updating the requirements, but only because of an back-compat issue in a dependency: It should definitely not fail to setup the new environment for testing.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/918/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/906", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/906/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/906/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/906/events", "html_url": "https://github.com/apache/buildstream/issues/906", "id": 800559241, "node_id": "MDU6SXNzdWU4MDA1NTkyNDE=", "number": 906, "title": "The logic to calculate the disk quota seems to be wrong", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T17:49:46Z", "updated_at": "2021-02-03T17:50:48Z", "closed_at": "2021-02-03T17:50:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/906)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Feb 12, 2019, 12:37\n\n## Summary\nWe got the following error in the overnight job:\n\n```\n\nError instantiating artifact cache: Your system does not have enough available space to support the cache quota specified.\n\n    You have specified a quota of infinity total disk space.\n    The filesystem containing /root/.cache/buildstream/artifacts only has 618G total disk space.\n```\n\nSeems that either\n- The logic to calculate free space is wrong\n- The login to parse the quota options is wrong (It should not possible to request \"infinite\")\n\n## Steps to reproduce\nsimply check any of the `overnight-tests` jobs\n\n## Relevant logs and/or screenshots\n\nhttps://gitlab.com/BuildStream/buildstream/-/jobs/159768027\n\n## Other relevant information\n- BuildStream version affected: master", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/906/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/906/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/886", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/886/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/886/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/886/events", "html_url": "https://github.com/apache/buildstream/issues/886", "id": 800536650, "node_id": "MDU6SXNzdWU4MDA1MzY2NTA=", "number": 886, "title": "Handshake timed out in cache server", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T17:22:50Z", "updated_at": "2022-02-18T09:28:30Z", "closed_at": "2022-02-18T09:28:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/886)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Jan 28, 2019, 20:47\n\nThis happened today during a build:\n\n```\n[00:03:32][08be102d][build:flatpak-images/sdk-debug.bst  ] SUCCESS freedesktop-sdk/flatpak-images-sdk-debug/08be102d-build.9671.log\n[01:51:55][][] FAILURE Build\n\nFailure Summary\n  desktop-image.bst:\n    [00:00:20][539a0bec][ push:desktop-image.bst             ] BUG     Push\n\n        An unhandled exception occured:\n    \n        Traceback (most recent call last):\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/_scheduler/jobs/job.py\", line 415, in _child_action\n            result = self.child_process()\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n            return self._action_cb(self._element)\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/_scheduler/queues/pushqueue.py\", line 37, in process\n            if not element._push():\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/element.py\", line 1714, in _push\n            pushed = self.__artifacts.push(self, self.__get_cache_keys_for_commit())\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/_artifactcache/cascache.py\", line 321, in push\n            remote.init()\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/_artifactcache/cascache.py\", line 1015, in init\n            response = self.capabilities.GetCapabilities(request)\n          File \"/usr/local/lib64/python3.6/site-packages/grpc/_channel.py\", line 514, in __call__\n            return _end_unary_response_blocking(state, call, False, None)\n          File \"/usr/local/lib64/python3.6/site-packages/grpc/_channel.py\", line 448, in _end_unary_response_blocking\n            raise _Rendezvous(state, None, None, deadline)\n        grpc._channel._Rendezvous: <_Rendezvous of RPC that terminated with:\n        \tstatus = StatusCode.UNAVAILABLE\n        \tdetails = \"Connect Failed\"\n        \tdebug_error_string = \"{\"created\":\"[[Gitlab user @1548706034]](https://gitlab.com/1548706034).761381561\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2608,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1548706034]](https://gitlab.com/1548706034).761373271\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":234,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1548706034]](https://gitlab.com/1548706034).760864621\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":663,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1548706034]](https://gitlab.com/1548706034).760734330\",\"description\":\"Handshake read failed\",\"file\":\"src/core/lib/security/transport/security_handshaker.cc\",\"file_line\":321,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1548706034]](https://gitlab.com/1548706034).760579333\",\"description\":\"FD Shutdown\",\"file\":\"src/core/lib/iomgr/lockfree_event.cc\",\"file_line\":190,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1548706034]](https://gitlab.com/1548706034).760574053\",\"description\":\"Handshake timed out\",\"file\":\"src/core/lib/channel/handshaker.cc\",\"file_line\":290}]}]}]}]}]}\"\n        >\n\n```\n\n\nSee https://gitlab.com/freedesktop-sdk/freedesktop-sdk/issues/620", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/886/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/884", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/884/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/884/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/884/events", "html_url": "https://github.com/apache/buildstream/issues/884", "id": 800534559, "node_id": "MDU6SXNzdWU4MDA1MzQ1NTk=", "number": 884, "title": "Traceback with current master (564cb2450a8657762e16c1d26d1373987dc4a6c5)", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T17:20:11Z", "updated_at": "2021-02-03T17:21:25Z", "closed_at": "2021-02-03T17:21:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/884)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Jan 28, 2019, 14:23\n\nAfter following the instructions to install current master (commit 564cb2450a8657762e16c1d26d1373987dc4a6c5) from source using pip (https://buildstream.build/source_install.html#install_git), I'm getting the following:\n\n```\n# bst help\nTraceback (most recent call last):\n  File \"/root/.local/bin/bst\", line 5, in <module>\n    from buildstream._frontend import cli\n  File \"/root/.local/lib/python3.7/site-packages/buildstream/__init__.py\", line 30, in <module>\n    from .sandbox import Sandbox, SandboxFlags, SandboxCommandError\n  File \"/root/.local/lib/python3.7/site-packages/buildstream/sandbox/__init__.py\", line 21, in <module>\n    from ._sandboxremote import SandboxRemote\n  File \"/root/.local/lib/python3.7/site-packages/buildstream/sandbox/_sandboxremote.py\", line 37, in <module>\n    from .._protos.google.rpc import code_pb2\n  File \"/root/.local/lib/python3.7/site-packages/buildstream/_protos/google/rpc/code_pb2.py\", line 23, in <module>\n    serialized_pb=_b('\\n\\x15google/rpc/code.proto\\x12\\ngoogle.rpc*\\xb7\\x02\\n\\x04\\x43ode\\x12\\x06\\n\\x02OK\\x10\\x00\\x12\\r\\n\\tCANCELLED\\x10\\x01\\x12\\x0b\\n\\x07UNKNOWN\\x10\\x02\\x12\\x14\\n\\x10INVALID_ARGUMENT\\x10\\x03\\x12\\x15\\n\\x11\\x44\\x45\\x41\\x44LINE_EXCEEDED\\x10\\x04\\x12\\r\\n\\tNOT_FOUND\\x10\\x05\\x12\\x12\\n\\x0e\\x41LREADY_EXISTS\\x10\\x06\\x12\\x15\\n\\x11PERMISSION_DENIED\\x10\\x07\\x12\\x13\\n\\x0fUNAUTHENTICATED\\x10\\x10\\x12\\x16\\n\\x12RESOURCE_EXHAUSTED\\x10\\x08\\x12\\x17\\n\\x13\\x46\\x41ILED_PRECONDITION\\x10\\t\\x12\\x0b\\n\\x07\\x41\\x42ORTED\\x10\\n\\x12\\x10\\n\\x0cOUT_OF_RANGE\\x10\\x0b\\x12\\x11\\n\\rUNIMPLEMENTED\\x10\\x0c\\x12\\x0c\\n\\x08INTERNAL\\x10\\r\\x12\\x0f\\n\\x0bUNAVAILABLE\\x10\\x0e\\x12\\r\\n\\tDATA_LOSS\\x10\\x0f\\x42X\\n\\x0e\\x63om.google.rpcB\\tCodeProtoP\\x01Z3google.golang.org/genproto/googleapis/rpc/code;code\\xa2\\x02\\x03RPCb\\x06proto3')\nTypeError: __init__() got an unexpected keyword argument 'serialized_options'\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/884/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/883", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/883/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/883/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/883/events", "html_url": "https://github.com/apache/buildstream/issues/883", "id": 800532337, "node_id": "MDU6SXNzdWU4MDA1MzIzMzc=", "number": 883, "title": "Filter element unintentionally stages its indirect runtime dependencies recursively", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2021-02-03T17:17:21Z", "updated_at": "2021-02-03T17:20:03Z", "closed_at": "2021-02-03T17:20:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/883)\nIn GitLab by [[Gitlab user @doraskayo]](https://gitlab.com/doraskayo) on Jan 25, 2019, 23:48\n\n## Summary\nInstead of only staging and filtering its single build-dependency's files as [originally intended](https://gitlab.com/BuildStream/buildstream/issues/214#note_59947315) (\"Only stages the direct build-dependency, skipping indirect dependencies.\"), the filter element also stages its indirect dependencies recursively. This creates a situation in which a filtered element can contain more files than the element it filters.\n\n## Steps to reproduce\n1. Download the following [minimal reproduction example](/uploads/4732946e1a1a09471a3b0940bc4db78d/bst-filter-test.tar.gz) and extract it. Its element dependency graph is the following:\n   ```\n                           filters                  runtime-depends\n   output-include.bst -----------------> input.bst -----------------> base.bst\n   ```\n2. Use the following commands inside the extracted directory:\n   ```\n   bst build --track-all output-include.bst\n   bst checkout --deps none --hardlinks output-include.bst checkout/output-include.bst\n   bst checkout --deps none --hardlinks input.bst checkout/input.bst\n   ```\n3. The contents of the checkout directory would then be the following:\n   ```\n   checkout/output-include.bst\n   checkout/output-include.bst/foo\n   checkout/output-include.bst/bar\n   checkout/output-include.bst/base-system <--- from base.bst\n   checkout/input.bst\n   checkout/input.bst/foo\n   checkout/input.bst/bar\n   checkout/input.bst/baz\n   ```\n## What is the current bug behavior?\nAs can be seen above, output-include.bst would additionally contain `base-system`, which was staged from base.bst.\n\n## What is the expected correct behavior?\nbase.bst is an indirect dependency of output-include.bst and should not have been staged nor filtered by output-include.bst.\n\n## Possible fixes\nSee MR below.\n\n## Other relevant information\n* BuildStream version affected: %BuildStream_v1.2, %\"BuildStream\\_v1.4\"", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/883/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/883/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/882", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/882/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/882/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/882/events", "html_url": "https://github.com/apache/buildstream/issues/882", "id": 800530902, "node_id": "MDU6SXNzdWU4MDA1MzA5MDI=", "number": 882, "title": "\"StatusCode.RESOURCE_EXHAUSTED has type StatusCode, but expected one of: int, long\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T17:15:35Z", "updated_at": "2021-02-03T17:17:08Z", "closed_at": "2021-02-03T17:17:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/882)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Jan 23, 2019, 10:15\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThis job has failed: https://gitlab.com/BuildStream/buildstream/-/jobs/149530767\n\nWith gRPC error:\n```\n<_Rendezvous of RPC that terminated with:\n    \tstatus = StatusCode.UNKNOWN\n    \tdetails = \"Exception calling application: <StatusCode.RESOURCE_EXHAUSTED: (8, 'resource exhausted')> has type StatusCode, but expected one of: int, long\"\n    \tdebug_error_string = \"{\"created\":\"[[Gitlab user @1548183434]](https://gitlab.com/1548183434).373545620\",\"description\":\"Error received from peer\",\"file\":\"src/core/lib/surface/call.cc\",\"file_line\":1036,\"grpc_message\":\"Exception calling application: <StatusCode.RESOURCE_EXHAUSTED: (8, 'resource exhausted')> has type StatusCode, but expected one of: int, long\",\"grpc_status\":2}\"\n    >\n```\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/882/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/873", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/873/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/873/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/873/events", "html_url": "https://github.com/apache/buildstream/issues/873", "id": 800521708, "node_id": "MDU6SXNzdWU4MDA1MjE3MDg=", "number": 873, "title": "Tests are failing on aarch64", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-03T17:04:25Z", "updated_at": "2021-02-03T17:05:57Z", "closed_at": "2021-02-03T17:05:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/873)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Jan 17, 2019, 19:08\n\nJob [#146847841](https://gitlab.com/BuildStream/buildstream/-/jobs/146847841) failed for 17f6e5a89c2c9a5190b6445112d34b57334fec74:\n\nThis was reported at #755 but seems they have started failing again", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/873/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/873/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/871", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/871/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/871/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/871/events", "html_url": "https://github.com/apache/buildstream/issues/871", "id": 800520398, "node_id": "MDU6SXNzdWU4MDA1MjAzOTg=", "number": 871, "title": "build shell on an element should fail right reason when \"fetch needed\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T17:02:48Z", "updated_at": "2021-02-03T17:03:57Z", "closed_at": "2021-02-03T17:03:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/871)\nIn GitLab by [[Gitlab user @gokcennurlu]](https://gitlab.com/gokcennurlu) on Jan 17, 2019, 17:46\n\n## Summary\n\nI cloned the the repo recently (d34a4fd17028e87d5b9402e59e84b803aa475635) and was playing with examples. Starting from an absolutely clean state, launching a `bst shell -b` on an element with non-yet-fetched sources fails, but for the wrong reason.\n\n## Steps to reproduce\n\n```bash\n$ cd /buildstream/doc/examples/autotools\n$ bst show base/alpine.bst\n\n[--:--:--][][] START   Loading elements\n[00:00:00][][] SUCCESS Loading elements\n[--:--:--][][] START   Resolving elements\n[00:00:00][][] SUCCESS Resolving elements\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\nfetch needed fc05961cf6dfded6a2818cdbc603ff91e72e18d518a6315a19b106d85f1a42e3 base/alpine.bst\n\n\n$ bst shell -b base/alpine.bst\n\n# fails expectedly but with a not-really-expected reason:\n\n[--:--:--][][] START   Loading elements\n[00:00:00][][] SUCCESS Loading elements\n[--:--:--][][] START   Resolving elements\n[00:00:00][][] SUCCESS Resolving elements\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\n[--:--:--][fc05961c][ main:base/alpine.bst               ] STATUS  Running command\n\n    sh -i\n\n\nError launching shell: Staged artifacts do not provide command 'sh'\n```\n\nIt might sound weird to try to open a build shell on an import element. Probably something worth raising as topic to discuss. Not to sidetrack, let's change that file to `kind: make` (I named it `test.bst`):\n\n```bash\n$ bst shell -b test.bst\n[--:--:--][][] START   Loading elements\n[00:00:00][][] SUCCESS Loading elements\n[--:--:--][][] START   Resolving elements\n[00:00:00][][] SUCCESS Resolving elements\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\n[--:--:--][20a9f559][ main:test.bst                      ] START   Staging dependencies\n[00:00:00][20a9f559][ main:test.bst                      ] SUCCESS Staging dependencies\n[--:--:--][20a9f559][ main:test.bst                      ] START   Integrating sandbox\n[00:00:00][20a9f559][ main:test.bst                      ] SUCCESS Integrating sandbox\n[--:--:--][20a9f559][ main:test.bst                      ] START   Staging sources\n[00:00:00][20a9f559][ main:test.bst                      ] FAILURE Staging sources\n\nError launching shell: tar source at test.bst [line 7 column 2]: Error staging source: [Errno 2] No such file or directory: '/root/.cache/buildstream/sources/tar/alpine_integration_tests_base_v1_x86_64_tar_xz/3eb559250ba82b64a68d86d0636a6b127aa5f6d25d3601a79f79214dc9703639'\n```\n\nThis error is a bit better, but it shouldn't even have reached to `Staging sources` stage when fetch was needed.\n\n## What is the current bug behavior?\n\nSee above.\n\n\n## What is the expected correct behavior?\n\nBuildStream complaining about `fetch-needed`.\n\n## Possible fixes\n\nI think it should terminate with the right suggestion. Ideally as early as possible, even before checking the state of dependencies.\n\nPossibly, right here: https://gitlab.com/BuildStream/buildstream/blob/ce91ce5d2eb73295d1862aa8514e631b6231300e/buildstream/_stream.py#L143\n\n\n```diff\n    def shell(self, element, scope, prompt, *,\n              directory=None,\n              mounts=None,\n              isolate=False,\n              command=None,\n              usebuildtree=False):\n\n        # Assert we have everything we need built, unless the directory is specified\n        # in which case we just blindly trust the directory, using the element\n        # definitions to control the execution environment only.\n        if directory is None:\n+           if scope == Scope.BUILD:\n+               self._pipeline.assert_sources_cached([element])\n+\n            missing_deps = [\n                dep._get_full_name()\n                for dep in self._pipeline.dependencies([element], scope)\n                if not dep._cached()\n            ]\n            if missing_deps:\n                raise StreamError(\"Elements need to be built or downloaded before staging a shell environment\",\n                                  detail=\"\\n\".join(missing_deps))\n\n        return element._shell(scope, directory, mounts=mounts, isolate=isolate, prompt=prompt, command=command,\n                              usebuildtree=usebuildtree)\n\n```\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: 1.3.0+1291.gd34a4fd1 (and probably goes earlier)\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/871/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/871/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/868", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/868/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/868/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/868/events", "html_url": "https://github.com/apache/buildstream/issues/868", "id": 800501141, "node_id": "MDU6SXNzdWU4MDA1MDExNDE=", "number": 868, "title": "bzr plugin doesnt parallelize well", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T16:40:08Z", "updated_at": "2021-02-03T16:41:46Z", "closed_at": "2021-02-03T16:41:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/868)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 17, 2019, 00:08\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThe `bzr` plugin does some \"atomic\" operations and makes a backup and such which is not very atomic, this causes errors when moving directories which cause builds to fail when concurrent track/fetch operations on the bzr source cache directory are done.\n\n## Steps to reproduce\n\nRun the `test_track_recurse[bzr]` many times until it fails.\n\n## What is the current bug behavior?\n\nThe test sometimes fails, locally and in CI.\n\n## What is the expected correct behavior?\n\nIt never fails.\n\n## Relevant logs and/or screenshots\n\nHere is are [some example](https://gitlab.com/BuildStream/buildstream/-/jobs/146913328) [failed CI jobs](https://gitlab.com/BuildStream/buildstream/-/jobs/146844002)\n\nA sample of the culprit failure looks like this:\n\n```\n[00:00:00] FAILURE track-test-target-bzr.bst: bzr source at track-test-target-bzr.bst [line 3 column 2]: Failed to move srcdir '/builds/BuildStream/buildstream/.tox/py36/tmp/test_track_recurse_bzr_0/cache/sources/bzr/tmpzurr_ye6' to mirror dir '/builds/BuildStream/buildstream/.tox/py36/tmp/test_track_recurse_bzr_0/cache/sources/bzr/file____builds_BuildStream_buildstream__tox_py36_tmp_test_track_recurse_bzr_0_repo'\n\n```\n\n## Possible fixes\n\nFix `plugins/sources/bzr.py` `_atomic_replace_mirrordir` to handle the atomic swapping atomically... this requires understanding why there is a backup directory.\n\nOne tip is that `utils.move_atomic()` should be employed and `DirectoryExistsError` should be handled to determine if the directory exists, the first check if the directory exists is a race with the nested rename, instead the `else` block which follows should be an `except` if the directory existed.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/868/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/868/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/864", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/864/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/864/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/864/events", "html_url": "https://github.com/apache/buildstream/issues/864", "id": 800497746, "node_id": "MDU6SXNzdWU4MDA0OTc3NDY=", "number": 864, "title": "Local cache doesn't cleanup properly", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T16:36:01Z", "updated_at": "2021-02-03T16:37:16Z", "closed_at": "2021-02-03T16:37:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/864)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Jan 15, 2019, 09:31\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nTrying to build a project with no maximum size for the cache (hence defaults), I get:\n\n```\n[bschubert[[Gitlab user @me]](https://gitlab.com/me) $MYELEMENT]$ cat eb0beee1-build.31021.log\n[--:--:--] START   MYELEMENT.bst: Build\n[--:--:--] LOG     MYELEMENT.bst: Build environment for element MYELEMENT.bst\n\n    HOME: /tmp\n    LC_ALL: C\n    LOGNAME: tomjon\n    PATH: /usr/bin:/bin:/usr/sbin:/sbin\n    SHELL: /bin/sh\n    SOURCE_DATE_EPOCH: '1320937200'\n    TERM: dumb\n    TZ: UTC\n    USER: tomjon\n    USERNAME: tomjon\n[--:--:--] BUG     MYELEMENT.bst: Build\n\n    An unhandled exception occured:\n\n    Traceback (most recent call last):\n      File \"/home/bschubert/.local/lib/python3.6/site-packages/buildstream/_scheduler/jobs/job.py\", line 417, in _child_action\n        result = self.child_process()  # pylint: disable=assignment-from-no-return\n      File \"/home/bschubert/.local/lib/python3.6/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n        return self._action_cb(self._element)\n      File \"/home/bschubert/.local/lib/python3.6/site-packages/buildstream/_scheduler/queues/buildqueue.py\", line 71, in process\n        return element._assemble()\n      File \"/home/1/.local/lib/python3.6/site-packages/buildstream/element.py\", line 1572, in _assemble\n        self.__sandbox(rootdir, output_file, output_file, self.__sandbox_config) as sandbox:  # nopep8\n      File \"/opt/rh/rh-python36/root/usr/lib64/python3.6/contextlib.py\", line 81, in __enter__\n        return next(self.gen)\n      File \"/home/bschubert/.local/lib/python3.6/site-packages/buildstream/element.py\", line 2252, in __sandbox\n        allow_real_directory=not self.BST_VIRTUAL_DIRECTORY)\n      File \"/home/bschubert/.local/lib/python3.6/site-packages/buildstream/_platform/linux.py\", line 69, in create_sandbox\n        return self._create_bwrap_sandbox(*args, **kwargs)\n      File \"/home/bschubert/.local/lib/python3.6/site-packages/buildstream/_platform/linux.py\", line 130, in _create_bwrap_sandbox\n        return SandboxBwrap(*args, **kwargs)\n      File \"/home/bschubert/.local/lib/python3.6/site-packages/buildstream/sandbox/_sandboxbwrap.py\", line 56, in __init__\n        super().__init__(*args, **kwargs)\n      File \"/home/bschubert/.local/lib/python3.6/site-packages/buildstream/sandbox/sandbox.py\", line 145, in __init__\n        os.makedirs(directory_, exist_ok=True)\n      File \"/opt/rh/rh-python36/root/usr/lib64/python3.6/os.py\", line 220, in makedirs\n        mkdir(name, mode)\n    OSError: [Errno 28] No space left on device: '/home/bschubert/.cache/buildstream/build/rmtfetickpublish-librmtfetickpublish-dev-f97w5sj6/root'\n```\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n- Create a small partition to use as your cache\n- Build a project that will fill it up\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\nThe cache cleaning doesn't kick in\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\nOld entries in the cache should be removed\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/864/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/854", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/854/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/854/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/854/events", "html_url": "https://github.com/apache/buildstream/issues/854", "id": 800491203, "node_id": "MDU6SXNzdWU4MDA0OTEyMDM=", "number": 854, "title": "Coverage data seems to get lost, maybe", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-03T16:28:37Z", "updated_at": "2021-02-03T16:28:45Z", "closed_at": "2021-02-03T16:28:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/854)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 10, 2019, 18:53\n\n## Summary\n\nWhen running tests and viewing the output, you can see warnings from `coverage.py`:\n```\nCoverage.py warning: No data was collected. (no-data-collected)\n```\n\nRelated: [upstream pytest-cov issue](https://github.com/pytest-dev/pytest-cov/issues/98)\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nRun the tests and view the output with `-s`, for example:\n\n```sh\ntox -e py36 -- -e tests/frontend/buildcheckout.py\n```\n\n## What is the current bug behavior?\n\nWarnings about coverage not being collected are being shown a lot while BuildStream is running, almost once per child task launched.\n\n## What is the expected correct behavior?\n\nNo warnings.\n\n## Relevant logs and/or screenshots\n\nI have a sample log but it's big, the part you're looking for is:\n\n```\n...\n\n[--:--:--][f58a8949][fetch:build-test-bzr.bst            ] START   test/build-test-bzr/f58a8949-fetch.26118.log\n[--:--:--][f58a8949][fetch:build-test-bzr.bst            ] START   Fetching file:///codethink/GNOME/buildstream/.tox/py35/tmp/test_fetch_build_checkout_stri1/repo\n[00:00:00][f58a8949][fetch:build-test-bzr.bst            ] SUCCESS Fetching file:///codethink/GNOME/buildstream/.tox/py35/tmp/test_fetch_build_checkout_stri1/repo\n[00:00:00][f58a8949][fetch:build-test-bzr.bst            ] SUCCESS test/build-test-bzr/f58a8949-fetch.26118.log\nCoverage.py warning: No data was collected. (no-data-collected)\n[--:--:--][f58a8949][build:build-test-bzr.bst            ] START   test/build-test-bzr/f58a8949-build.26141.log\n[--:--:--][f58a8949][build:build-test-bzr.bst            ] START   Staging sources\n[00:00:00][f58a8949][build:build-test-bzr.bst            ] SUCCESS Staging sources\n[--:--:--][f58a8949][build:build-test-bzr.bst            ] START   Caching artifact\n[00:00:00][f58a8949][build:build-test-bzr.bst            ] SUCCESS Caching artifact\n[00:00:00][f58a8949][build:build-test-bzr.bst            ] SUCCESS test/build-test-bzr/f58a8949-build.26141.log\nCoverage.py warning: No data was collected. (no-data-collected)\n[00:00:00][][] SUCCESS Build\n```\n\n\n## Other relevant information\n\nIt's unclear how long this has been happening, after migrating to tox and ironing out the coverage integration, we have the same coverage as before at around `86%`.\n\nIs it possible that we have not been counting code which runs in child processes in the coverage reports ?", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/854/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/854/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/851", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/851/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/851/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/851/events", "html_url": "https://github.com/apache/buildstream/issues/851", "id": 800487804, "node_id": "MDU6SXNzdWU4MDA0ODc4MDQ=", "number": 851, "title": "BuildElement without install root  are disallowed by remote execution build", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-03T16:24:47Z", "updated_at": "2021-02-03T16:25:43Z", "closed_at": "2021-02-03T16:25:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/851)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Jan 9, 2019, 14:12\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nFreedesktop SDK has element `split-locales.bst` of kind `manual` which does not create the `install-root` directory but has some integration commands. This fails to build.\n\nThis works for local builds, but not remote builds.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nBuild Freedesktop SDK with remote execution.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nBuild fails with the following error.\n\n```\n[00:00:32][80243ad6][build:split-locales.bst             ] FAILURE Directory '/buildstream-install' was not found inside the sandbox, unable to collect artifact contents\n```\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nIt should behave the same way as without remote execution. That is succeed.\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.4\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/851/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/851/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/845", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/845/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/845/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/845/events", "html_url": "https://github.com/apache/buildstream/issues/845", "id": 800483865, "node_id": "MDU6SXNzdWU4MDA0ODM4NjU=", "number": 845, "title": "bst artifact log fails if project options are invalid", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T16:20:18Z", "updated_at": "2022-02-18T09:50:05Z", "closed_at": "2022-02-18T09:50:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/845)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 6, 2019, 18:00\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen running `bst artifact log <artifact name>`, BuildStream will try to resolve the project options of the toplevel project (this most probably can only happen if BuildStream is trying to load the project) - if the defaults are invalid options, then `bst artifact log <artifact name>` will fail.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nFirst, have a project with the following in the project.conf, perhaps adding this to an existing project can help reproduce:\n\n```yaml\noptions:\n  build_arch:\n    type: arch\n    description: Build architecture\n    values:\n      - arm\n      - aarch64\n```\n\nOr, use the `freedesktop-sdk` project which has these options.\n\nThen, try to read a log file from the artifact cache on an intel machine.\n\nNotice that the project option uses an `arch` option with only `arm` arches, and the default is left up to BuildStream to guess with `uname`.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nBuildStream exits with an error status and prints the following:\n\n```\nError loading project: Invalid value for arch option 'build_arch': x86-64\nValid values: arm, aarch64\n```\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nBuildStream should just show the log file of the artifact.\n\nBuildStream does not need to load the project when given an artifact name, it need only load the project when given an element name.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nDidn't look at the implementation yet, perhaps the code currently tries loading an element and falls back to trying the artifact cache ?\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/845/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/844", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/844/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/844/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/844/events", "html_url": "https://github.com/apache/buildstream/issues/844", "id": 800482149, "node_id": "MDU6SXNzdWU4MDA0ODIxNDk=", "number": 844, "title": "Coverage reports inacurate with multiple runs of `tox`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T16:18:17Z", "updated_at": "2021-02-03T16:20:05Z", "closed_at": "2021-02-03T16:20:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/844)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 4, 2019, 16:32\n\n## Summary\n\nWhen running `tox` without specifying an environment list, and `tox` runs `pytest` in more than one python environment, we only collect the coverage report from the last `pytest` invocation.\n\n[//]: # (Summarize the bug encountered concisely)\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n* Install multiple versions of python\n* Run `tox` in your BuildStream checkout\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nCoverage outputs a report to a `.coverage` file, if the `.coverage` file exists then it is overwritten. Effectively we only end up collecting the report from the last run.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nWe extract all relevant coverage.\n\nIdeally after running `tox`, there is one `.coverage` file with combined coverage from all of the runs, this way the .coverage file feeds perfectly into the `.gitlab-ci.yml` mechanics which further combine that report with reports on other machines.\n\nOr, we can change the `.gitlab-ci.yml` to accommodate a scenario where running `tox` produces multiple coverage files.\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nHere are some fixes and notes on them:\n\n* Use an envlist trick with additional environments\n\n  I've spotted an example where someone setup a \"testenv:start\" and \"testenv:end\" to cleanup\n  and record state between runs and then combine at the end.\n\n  This is undesirable because we want to be able to invoke specific test environments like\n  `tox -e py36`, `tox -e py36,lint` or `tox -e docs`\n\n* Set the `parallel` option to `true`\n\n  This is advertised to output a process specific report, however it seems this has no\n  effect since we already set `parallelism = multiprocessing` which seems to automate\n  the per process report collation already.\n\n* Enable the `append` option\n\n  I cant find a configuration file option for this but there is a CLI option which\n  says that an existing `.coverage` file is not wiped but instead appended to.\n\n  This would be dangerous if we succeed to parallelize environment runs, not sure\n  if coverage expects this scenario.\n\n[[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) suggests that we give each environment a separate directory to write to.\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/844/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/844/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/842", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/842/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/842/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/842/events", "html_url": "https://github.com/apache/buildstream/issues/842", "id": 800479095, "node_id": "MDU6SXNzdWU4MDA0NzkwOTU=", "number": 842, "title": "File with invalid characters prevents Windows from checking out master", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-03T16:14:53Z", "updated_at": "2021-02-03T16:17:03Z", "closed_at": "2021-02-03T16:17:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/842)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Jan 2, 2019, 22:18\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nhttps://gitlab.com/BuildStream/buildstream/blob/master/tests/frontend/project/elements/invalid-chars%7C%3C%3E-in-name.bst\n\ncontains invalid characters for Windows, making it impossible to checkout the repository.\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nOn windows: git checkout master && git pull\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nThe git process dies mid process\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nI should be on master\n\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n- Create the file on the fly and only on non-windows systems\n- Remove the file from the history\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/842/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/842/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/836", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/836/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/836/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/836/events", "html_url": "https://github.com/apache/buildstream/issues/836", "id": 800473418, "node_id": "MDU6SXNzdWU4MDA0NzM0MTg=", "number": 836, "title": "fix-pyc-timestamps obsolete and actively harmful on Python 3.7+", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2021-02-03T16:08:24Z", "updated_at": "2021-10-10T05:42:06Z", "closed_at": "2021-10-10T05:42:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/836)\nIn GitLab by [[Gitlab user @nanonyme]](https://gitlab.com/nanonyme) on Jan 1, 2019, 10:52\n\nCreated as per suggestion from https://gitlab.com/freedesktop-sdk/freedesktop-sdk/merge_requests/816\n\nBasically with Python 3.7 and higher, if SOURCE_DATE_EPOCH is set, Python uses invalidation method CHECKED_HASH for bytecode. Since there's no timestamp involved, there is nothing to fix. In addition, bytecode format changes with Python 3.7 so fix-pyc-timestamps will do incorrect thing resulting in always invalid bytecode. When using Python 3.7 or newer, the right solution is to just make sure SOURCE_DATE_EPOCH is set.\n\nNote that on older versions of Python fix-pyc-timestamps is still useful.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/836/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/833", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/833/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/833/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/833/events", "html_url": "https://github.com/apache/buildstream/issues/833", "id": 800469421, "node_id": "MDU6SXNzdWU4MDA0Njk0MjE=", "number": 833, "title": "Tests are broken on CentOS", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2021-02-03T16:03:57Z", "updated_at": "2021-02-03T16:07:42Z", "closed_at": "2021-02-03T16:07:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/833)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Dec 21, 2018, 14:16\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nTrying to add a new runner which is CentOS, we can see that multiple tests fail.\nhttps://gitlab.com/BuildStream/buildstream/-/jobs/137741349 is the job failing when trying to add a CentOS runner\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nRun tests on CentOS\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\ntests fail\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nthey should succeed\n\n\nThis is done when:\n\n- [ ] the tests pass on CentOS\n- [ ] We run the tests on CentOS everytime to prevent regression\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/833/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/816", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/816/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/816/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/816/events", "html_url": "https://github.com/apache/buildstream/issues/816", "id": 800445487, "node_id": "MDU6SXNzdWU4MDA0NDU0ODc=", "number": 816, "title": "Unexpected caching behaviour with bst plugin", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T15:37:21Z", "updated_at": "2021-02-03T15:38:44Z", "closed_at": "2021-02-03T15:38:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/816)\nIn GitLab by [[Gitlab user @adds68]](https://gitlab.com/adds68) on Dec 10, 2018, 21:33\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nI have been developing a plugin for bst, which gathers json manifests as part of a pipeline. I have a version of this, which is already cached in our shared bst cache server on freedesktop-sdk. However when modifying this plugin locally, bst has been pulling the cached version, which has lead to a lot of confusion, when trying to debug a change I made locally, as the updated local version was not being applied, instead the cached plugin was used. \n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nThe branch [here](https://gitlab.com/freedesktop-sdk/freedesktop-sdk/commits/adamjones/manifest) could be modified locally and rebuilt, which would then show how the local changes are not applied, bst instead seems to pull the old version from the cache.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nWhen rebuilding a plugin locally bst does not seem to calculate the plugin has changed locally and pulls an old version from the cache.\n\nI have tried removing my local cache, but bst will just fetch from the remote. I have also tried increasing the version number found in the project.conf definition, which did not stop bst from pulling the older version from the cache.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\nThe local changes should rebuilt/applied, which will prevent any confusion for the user when they receive the wrong output, from an older version.\n\nThe fact the plugin source changed and i was still receiving invalid values caused me a lot of confusion, i use the self.status() method in bst to log debug info, which appeared to suppressed by bst, however it wasn't, it was actually just not being called at all.\n\n## Relevant logs and/or screenshots\n\nIn this [this](https://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/131954837) build, however the plugin logic has changed to fix this indexing issue, and was rebased on top of the old logic. You can see from the logs that the plugin was cached and the build then failed with the original python error that was actually fixed locally.\n\nIn [this](https://gitlab.com/freedesktop-sdk/freedesktop-sdk/commit/ee61004d23a6514ffc6c9174049cb1069b9e5c80) build you can see how i changed the required version of the plugin, but bst still decided to pull the cached version.\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.2.3\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/816/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/816/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/806", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/806/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/806/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/806/events", "html_url": "https://github.com/apache/buildstream/issues/806", "id": 800427821, "node_id": "MDU6SXNzdWU4MDA0Mjc4MjE=", "number": 806, "title": "overnight tests are failing: \"Error loading project: Invalid value for arch\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-03T15:18:17Z", "updated_at": "2021-02-03T15:19:47Z", "closed_at": "2021-02-03T15:19:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/806)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Dec 6, 2018, 10:00\n\n## Summary\nSeems an incompatible change has landed and is not possible to build freedesktop-sdk anymore\n\n\n## Relevant logs and/or screenshots\n\nhttps://gitlab.com/BuildStream/buildstream/-/jobs/130386894", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/806/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/801", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/801/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/801/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/801/events", "html_url": "https://github.com/apache/buildstream/issues/801", "id": 800404115, "node_id": "MDU6SXNzdWU4MDA0MDQxMTU=", "number": 801, "title": "bst pull silently failed when there is a network timeout (duplicate of #423)", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T14:52:19Z", "updated_at": "2021-02-03T14:52:55Z", "closed_at": "2021-02-03T14:52:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/801)\nIn GitLab by [[Gitlab user @finnball]](https://gitlab.com/finnball) on Dec 4, 2018, 10:20\n\n## Summary\n\nIf for some reason a remote cache request timeout, the puller print `success` and buildstream fallback to a local build.\n\n\n## Steps to reproduce\n\nSend a request to a server which never responds.\n\n\n## What is the current bug behavior?\n\nFreezes.\n\n\n## What is the expected correct behavior?\n\nFail gracefully.\n\n## Possible fixes\n\n* Wrap all calls to server in a new function which uses the timeout parameter.\n* Raise error with a retry\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/801/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/800", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/800/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/800/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/800/events", "html_url": "https://github.com/apache/buildstream/issues/800", "id": 800402471, "node_id": "MDU6SXNzdWU4MDA0MDI0NzE=", "number": 800, "title": "There is no clear way to disable batching of prepare+assemble in BuildElement", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-03T14:50:32Z", "updated_at": "2021-02-03T14:52:12Z", "closed_at": "2021-02-03T14:52:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/800)\nIn GitLab by [[Gitlab user @gokcennurlu]](https://gitlab.com/gokcennurlu) on Dec 3, 2018, 18:23\n\n## Summary\n\nI have a plugin based on BuildElement that extends `configure_sandbox()`, `prepare()` and `assemble()` by overriding and calling corresponding `super().func()` functions at some point.\n\n[Command batching](https://gitlab.com/BuildStream/buildstream/commit/127d332f33e0badbba3526548d9089640ee95ed1) broke my plugin because I was doing some additional file checks at some points both in `prepare()` and `assemble()`. The batching of `prepare()` and `assemble()` _individually_ actually helped me, but [wrapping them into a single batch context](https://gitlab.com/BuildStream/buildstream/commit/7827ac5039f7d7cd80e3937d0b3c81e462524c78#ecad1ef0b2d7e0597dd3d592a7617f7c23465911_1566_1592) is the thing that actually broke my plugin.\n\nAt the moment, my workaround is using\n```python\nself._Element__batch_prepare_assemble = False\n```\nin my overridden `configure_sandbox()` and looks bad.\n\nI am not aware of any further roadmap items for this feature so I apologize if I repeat them: __I think we should provide a clean way to enable/disable this feature without hacks.__", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/800/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/800/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/795", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/795/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/795/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/795/events", "html_url": "https://github.com/apache/buildstream/issues/795", "id": 800395657, "node_id": "MDU6SXNzdWU4MDAzOTU2NTc=", "number": 795, "title": "BuildStream crashes when we try to use the same junction twice, but named differently", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-02-03T14:43:14Z", "updated_at": "2021-02-03T14:45:57Z", "closed_at": "2021-02-03T14:45:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/795)\nIn GitLab by [[Gitlab user @jennis]](https://gitlab.com/jennis) on Nov 29, 2018, 11:41\n\nI have a BuildStream project that depends on two junctions (junctionA and junctionB). JunctionA **also** depends on junctionB.\r\n\r\nNow, if in my project I declare the junction element '*junction-B.bst*', and in the junctionA project I declare the junction element '*junction-B-diff-name.bst*' (i.e. a junction element representing the same junction but just with a different *filename*) BuildStream will crash when trying to use things from junctionB via my project (e.g. junction-b.bst:foo.bst) **and** via junctionA's junction to junctionB (e.g. junction-A.bst:junction-B.bst:bar.bst).\r\n\r\nI appreciate it's hard to picture what I've described above, so I've created a project which replicates this bug here:\r\nhttps://gitlab.com/jennis/bstjunctionsbug\r\n\r\nThis is what happens when I try to build something that depends on the same junction in two different ways:\r\n```\r\n $ bst build use-junctions.bst \r\n[--:--:--][][] START   Build\r\n[--:--:--][][] START   Loading elements\r\n[00:00:00][][] FAILURE Loading elements\r\n[00:00:00][][] FAILURE Build\r\n\r\n\r\nbase.bst [line 3 column 2]: Dictionary did not contain expected key 'kind'\r\n\r\n```\r\n\r\nI'm 100% sure that base.bst does contain kind. This exists in junctionB and I'm able to build it in the junctionB project.\r\n1. This error is misleading/incorrect\r\n2. BuildStream shouldn't crash when the junction is named differently in two projects\r\n\r\n### Important note\r\nBare in mind that if we change the junction element name in our project from 'junction-B.bst' to 'junction-B-diff-name.bst'\r\nBuildStream won't crash. However, IMO I think BuildStream should be able to handle inconsistent naming.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/795/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/795/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/791", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/791/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/791/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/791/events", "html_url": "https://github.com/apache/buildstream/issues/791", "id": 800392592, "node_id": "MDU6SXNzdWU4MDAzOTI1OTI=", "number": 791, "title": "bst shell --build is using a buildtree that is cached after a staging failure", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T14:39:47Z", "updated_at": "2021-02-03T14:40:35Z", "closed_at": "2021-02-03T14:40:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/791)\nIn GitLab by [[Gitlab user @gokcennurlu]](https://gitlab.com/gokcennurlu) on Nov 27, 2018, 15:18\n\n## Summary\n\nI have a source plugin that fails during staging. While it needs to be fixed, I found `bst build` and `bst shell -b` are also behaving interesting when `staging` of the plugin fails.\n\n__It is caching a buildtree that failed at `Staging` and implicitly using it in a following `bst shell -b` and 2nd `bst build` with `(r)etry - Retry this job`__\n\n## Steps to reproduce\n\nHave a source plugin failing at `stage()`, use that in `A.bst`.\n\n```bash\n$ bst build A.bst\n..\n[--:--:--][5002f532][build:A.bst                 ] START   project/A.log\n[--:--:--][5002f532][build:A.bst                 ] START   Staging dependencies\n[00:00:00][5002f532][build:A.bst                 ] SUCCESS Staging dependencies\n[--:--:--][5002f532][build:A.bst                 ] START   Integrating sandbox\n[00:00:00][5002f532][build:A.bst                 ] SUCCESS Integrating sandbox\n[--:--:--][5002f532][build:A.bst                 ] START   Staging sources\n[00:00:00][5002f532][build:A.bst                 ] FAILURE Staging XXYYZZ\n[00:00:00][5002f532][build:A.bst                 ] FAILURE Staging sources # Ok, plugin failed\n[--:--:--][5002f532][build:A.bst                 ] START   Caching artifact # But why cache??\n[00:00:00][5002f532][build:A.bst                 ] SUCCESS Caching artifact\n\n# when asked, pick (t)erminate.\n```\n\nThe problem starts here (caused by implicit preference of cached buildtree, captured here https://gitlab.com/BuildStream/buildstream/issues/740)\n```bash\n$ bst shell -b A.bst\n[--:--:--][][] START   Loading elements\n[00:00:00][][] SUCCESS Loading elements\n[--:--:--][][] START   Resolving elements\n[00:00:00][][] SUCCESS Resolving elements\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\n[--:--:--][5002f532][build:A.bst                 ] START   Staging dependencies\n[00:00:00][5002f532][build:A.bst                 ] SUCCESS Staging dependencies\n[--:--:--][5002f532][build:A.bst                 ] START   Integrating sandbox\n[00:00:00][5002f532][build:A.bst                 ] SUCCESS Integrating sandbox\n[--:--:--][5002f532][build:A.bst                 ] START   Staging sources\n[00:00:00][5002f532][build:A.bst                 ] SUCCESS Staging sources # SHOULD HAVE FAILED?\n[--:--:--][5002f532][build:A.bst                 ] STATUS  Running command\n\n    sh -i\n\n```\n\nSimilar behaviour can also be seen here, in a second `bst build` attempt, but with `(r)etry` option.\n\n```bash\n$ bst build A.bst\n[--:--:--][][] START   Build\n[--:--:--][][] START   Loading elements\n[00:00:00][][] SUCCESS Loading elements\n[--:--:--][][] START   Resolving elements\n[00:00:00][][] SUCCESS Resolving elements\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\n[--:--:--][][] START   Checking sources\n[00:00:00][][] SUCCESS Checking sources\n\nBuildStream Version 1.3.0+882.g327b19dd\n  Session Start: Tuesday, 27-11-2018 at 11:50:24\n\n..\n..\n\nPipeline\n      failed 5002f5324a330e6584005fc35bb7ae1aada7b16d04ef9491188517eb7f4726dd A.bst\n===============================================================================\n[00:00:00][5002f532][build:A.bst                 ] FAILURE XXYYZZ source at A.bst [line18 column 2]: Failed to checkout git ref A_REF_THAT_DOES_NOT_EXIST_IN_LOCAL_MIRROR\n\nBuild failure on element: A.bst\n\n# It is actually ok so far.\n\nChoose one of the following options:\n  (c)ontinue  - Continue queueing jobs as much as possible\n  (q)uit      - Exit after all ongoing jobs complete\n  (t)erminate - Terminate any ongoing jobs and exit\n  (r)etry     - Retry this job\n\nPressing ^C will terminate jobs and exit\n\nChoice: [continue]: r\n\nRetrying failed job\n\n[--:--:--][5002f532][build:A.bst                 ] START   A.log\n[--:--:--][5002f532][build:A.bst                 ] START   Staging dependencies\n[00:00:00][5002f532][build:A.bst                 ] SUCCESS Staging dependencies\n[--:--:--][5002f532][build:A.bst                 ] START   Integrating sandbox\n[00:00:00][5002f532][build:A.bst                 ] SUCCESS Integrating sandbox\n[--:--:--][5002f532][build:A.bst                 ] START   Staging sources\n[00:00:00][5002f532][build:A.bst                 ] SUCCESS Staging sources # SHOULD HAVE FAILED?\n[--:--:--][5002f532][build:A.bst                 ] START   Running build-commands\n[--:--:--][5002f532][build:A.bst                 ] STATUS  Running build-commands\n\n    some_shell_script_to_run.sh\n\n[00:00:00][5002f532][build:A.bst                 ] FAILURE Running build-commands\n[--:--:--][5002f532][build:A.bst                 ] START   Caching artifact\n[00:00:00][5002f532][build:A.bst                 ] SUCCESS Caching artifact\n[00:00:00][5002f532][build:A.bst                 ] FAILURE Staged artifacts do not provide command\n 'sh' # Don't mind this error. I just omitted a platform.bst.\n\n```\n## What is the current bug behavior?\n\nIt is caching a buildtree from a build attempt if it failed at __staging__ and implicitly prefers to use it during `bst shell -b` and `bst build /w (r)etry`.\n\n## What is the expected correct behavior?\n\nIt shouldn't cache if it failed at __staging__ by default.\n\nIn case it caches (i.e. we want to keep that behaviour), it shouldn't __use__ it by default unless user specifically asks for it (this is already captured by https://gitlab.com/BuildStream/buildstream/issues/740)\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\nThis seems to happen at [`Element._assemble()`](https://gitlab.com/BuildStream/buildstream/blob/7827ac5039f7d7cd80e3937d0b3c81e462524c78/buildstream/element.py#L1551)\n\nMore specifically, when [`self.stage(sandbox)`](https://gitlab.com/BuildStream/buildstream/blob/7827ac5039f7d7cd80e3937d0b3c81e462524c78/buildstream/element.py#L1584) fails in the `try .. except` block, a buildtree-caching gets [triggered](https://gitlab.com/BuildStream/buildstream/blob/7827ac5039f7d7cd80e3937d0b3c81e462524c78/buildstream/element.py#L1622).\n\nWe briefly discussed with [[Gitlab user @juergbi]](https://gitlab.com/juergbi) and [[Gitlab user @willsalmon]](https://gitlab.com/willsalmon) and it seems like\n\n```python\n                    # Step 1 - Configure\n                    self.__configure_sandbox(sandbox)\n                    # Step 2 - Stage\n                    self.stage(sandbox)\n```\n\nshould live out of that `try .. except`.\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: BuildStream Version 1.3.0+882.g327b19dd\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/791/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/791/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/790", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/790/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/790/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/790/events", "html_url": "https://github.com/apache/buildstream/issues/790", "id": 800390796, "node_id": "MDU6SXNzdWU4MDAzOTA3OTY=", "number": 790, "title": "KeyError: 'depends' in _extract_depends_from_node", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T14:37:44Z", "updated_at": "2021-02-03T14:39:39Z", "closed_at": "2021-02-03T14:39:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/790)\nIn GitLab by [[Gitlab user @kerrick1]](https://gitlab.com/kerrick1) on Nov 27, 2018, 03:19\n\n## Summary\n\nWhen parsing a .bst file that does not have a 'depends' entry, one gets the following error:\n```\n...\n  File \"/usr/lib/python3.7/site-packages/buildstream/_loader/loadelement.py\", line 77, in __init__\n    self.deps = _extract_depends_from_node(self.node)\n  File \"/usr/lib/python3.7/site-packages/buildstream/_loader/loadelement.py\", line 169, in _extract_depends_from_node\n    del node[Symbol.DEPENDS]\n  File \"/usr/lib/python3.7/site-packages/ruamel/yaml/comments.py\", line 810, in __delitem__\n    ordereddict.__delitem__(self, key)\nKeyError: 'depends'\n```\n\nNote that this output comes from a released version of BuildStream but the same issue happens on the Git version.\n\n\n## Steps to reproduce\n\n```\ncd $(mktemp -d)\ngit clone https://gitlab.gnome.org/GNOME/gnome-build-meta.git\ncd gnome-build-meta\nbst build --track-all sdk/gtk+-3.bst\n```\n\n## What is the current bug behavior?\n\nBuildstream crashes.\n\n## What is the expected correct behavior?\n\nBuildStream does not crash.\n\n## Possible fixes\n\nhttps://gitlab.com/BuildStream/buildstream/blob/54d89aa1/buildstream/_loader/loadelement.py#L186\n\nThis line should be changed to\n```\nnode.pop(key, None)\n```\n\n## Other relevant information\n\n* BuildStream version affected: latest Git\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/790/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/790/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/779", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/779/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/779/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/779/events", "html_url": "https://github.com/apache/buildstream/issues/779", "id": 800376758, "node_id": "MDU6SXNzdWU4MDAzNzY3NTg=", "number": 779, "title": "It should be possible to disable error and message lines completely", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-02-03T14:22:29Z", "updated_at": "2021-02-03T14:24:56Z", "closed_at": "2021-02-03T14:24:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/779)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Nov 22, 2018, 14:46\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nCurrently, `--message-lines 0` and `--error-lines 0` will still output one line showing how many lines have not been shown.\n\nI would have expected this to not show _anything_\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n- Build any element with `--message-lines 0 --error-lines 0`\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\n`Message contains additional X lines` is shown on the screen instead of nothing\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\nNothing should be printed, we said we weren't interested in message nor errors.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/779/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/778", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/778/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/778/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/778/events", "html_url": "https://github.com/apache/buildstream/issues/778", "id": 800374775, "node_id": "MDU6SXNzdWU4MDAzNzQ3NzU=", "number": 778, "title": "bst example html in the doc's is out of date and is hard to maintain", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T14:20:20Z", "updated_at": "2021-02-03T14:22:22Z", "closed_at": "2021-02-03T14:22:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/778)\nIn GitLab by [[Gitlab user @willsalmon]](https://gitlab.com/willsalmon) on Nov 22, 2018, 14:39\n\n## Summary\n\nMaintaining the .run files and there output is harder than it needs to be and the cached versions are not being updated.\n\n\n## Steps to reproduce\n\nExample output like this\nhttps://buildstream.gitlab.io/buildstream/examples/flatpak-autotools.html#build-the-hello-bst-element\nis not only out of date intrms of reporting version numbers much older than the docs but the general output has changed some what, for instance it should read `Loading elements`  rather than `Loading pipeline`\n\nand examples like\nhttps://buildstream.gitlab.io/buildstream/developing/workspaces.html#opening-a-workspace\nthat have had there .run files updated for the new command line are not updated.\n\n\n## What is the current bug behavior?\n\nThere are two related issues, the current behaviour of `make -C doc` dose not update the bst2html output if a html file exists, this means that you must force all the .run files to be built to update a single one. this means people avoid updates. Because we do not run bst2html in CI and we are not keeping the cache upto date the docs are now out of date.\n\n\n## What is the expected correct behavior?\n\nThe Doc's should reflect current bst behaviour.\n\nIt should be easy to update .run files.\n\n## Relevant logs and/or screenshots\n\nhttps://buildstream.gitlab.io/buildstream/developing/workspaces.html#opening-a-workspace\nhttps://buildstream.gitlab.io/buildstream/examples/flatpak-autotools.html#build-the-hello-bst-element\nbut any example run in https://buildstream.gitlab.io/buildstream/\n\n## Possible fixes\n\nI propose to run bst2html when the CI makes the doc's and to make bst2hmlt cacheing less aggressive.\n\nThe CI already runs bst2html but the .run files are not present, i propose to have the .run files present and remove the cached copies from the repo.\n\n## Other relevant information\n\n\n* BuildStream version affected: website / master/all\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/778/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/768", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/768/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/768/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/768/events", "html_url": "https://github.com/apache/buildstream/issues/768", "id": 800360888, "node_id": "MDU6SXNzdWU4MDAzNjA4ODg=", "number": 768, "title": "Overnigth tests are failing for bst-1.2 branch", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108620, "node_id": "MDU6TGFiZWwyNzA5MTA4NjIw", "url": "https://api.github.com/repos/apache/buildstream/labels/infrastructure", "name": "infrastructure", "color": "AD8D43", "default": false, "description": "An issue related to project CI, website, etc infrastructure"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T14:05:09Z", "updated_at": "2021-02-03T14:05:53Z", "closed_at": "2021-02-03T14:05:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/768)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Nov 15, 2018, 17:18\n\nFrom pipeline: https://gitlab.com/BuildStream/buildstream/pipelines/36741800\n\nJob [#121057968](https://gitlab.com/BuildStream/buildstream/-/jobs/121057968) failed for 603490729b4bb766327095ef283b29cde680597d:", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/768/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/768/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/764", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/764/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/764/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/764/events", "html_url": "https://github.com/apache/buildstream/issues/764", "id": 800357368, "node_id": "MDU6SXNzdWU4MDAzNTczNjg=", "number": 764, "title": "Stack trace when integrating a local plugin", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-03T14:01:18Z", "updated_at": "2021-02-03T14:02:27Z", "closed_at": "2021-02-03T14:02:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/764)\nIn GitLab by [[Gitlab user @adds68]](https://gitlab.com/adds68) on Nov 13, 2018, 11:51\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\nA stack trace is produced when trying to build with a local plugin installed.\n\n## Steps to reproduce\n\nInstall collect_manifest.bst from bst-external\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nProduces a stack trace.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nFail with a helpful error message\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\nFailure Summary\n  platform-manifest.bst:\n    [00:00:01][06efeae7][build:platform-manifest.bst         ] BUG     Build\n\n        An unhandled exception occured:\n\n        Traceback (most recent call last):\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/job.py\", line 415, in _child_action\n            result = self.child_process()\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n            return self._action_cb(self._element)\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_scheduler/queues/buildqueue.py\", line 35, in process\n            return element._assemble()\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/element.py\", line 1498, in _assemble\n            collect = self.assemble(sandbox)\n          File \"/home/adds68/git-repos/freedesktop-sdk/plugins/elements/collect_manifest.py\", line 145, in assemble\n            self.set_public_data('cpe-manifest', manifest)\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/element.py\", line 855, in set_public_data\n            data = _yaml.node_copy(data)\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_yaml.py\", line 1082, in node_copy\n            copy[key] = list_copy(value)\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_yaml.py\", line 1097, in list_copy\n            copy.append(node_copy(item))\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_yaml.py\", line 1080, in node_copy\n            copy[key] = node_copy(value)\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_yaml.py\", line 1084, in node_copy\n            copy[key] = value.clone()\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_yaml.py\", line 105, in clone\n            for member_name, member in self.members.items()\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_yaml.py\", line 105, in <dictcomp>\n            for member_name, member in self.members.items()\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_yaml.py\", line 130, in clone\n            provenance.elements = [e.clone() for e in self.elements]\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_yaml.py\", line 130, in <listcomp>\n            provenance.elements = [e.clone() for e in self.elements]\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_yaml.py\", line 155, in clone\n            provenance.elements = [e.clone for e in self.elements]\n          File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_yaml.py\", line 155, in <listcomp>\n            provenance.elements = [e.clone for e in self.elements]\n        AttributeError: 'function' object has no attribute 'clone'\n\n```\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n\n.bst file where is fails\n```\nkind: collect_manifest\n\nconfig:\n  path: \"%{prefix}/manifest.json\"\n\ndepends:\n  - filename: desktop-platform.bst\n    type: build\n  - filename: bootstrap-manifest.bst\n    junction: bootstrap-junction.bst\n    type: build\n```\n\n* BuildStream version affected: /milestone %BuildStream_v1.2.3\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/764/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/761", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/761/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/761/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/761/events", "html_url": "https://github.com/apache/buildstream/issues/761", "id": 800354694, "node_id": "MDU6SXNzdWU4MDAzNTQ2OTQ=", "number": 761, "title": "cmake: CMAKE_INSTALL_LIBDIR isn't properly set", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T13:58:12Z", "updated_at": "2021-02-03T13:58:52Z", "closed_at": "2021-02-03T13:58:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/761)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Nov 10, 2018, 09:20\n\n## Summary\n\nThe cmake plugin sets `-DCMAKE_INSTALL_LIBDIR=lib/x86_64-linux-gnu`. While this is sensible, it cmake sometimes misinterprets it as relative to the directory where cmake is called rather than relative to the prefix.\n\nSee freedesktop-sdk/freedesktop-sdk#431\n\n## Possible fixes\n\nSetting the type, i.e. using `-DCMAKE_INSTALL_LIBDIR:PATH=lib/x86_64-linux-gnu` seems to fix the issue.\n\n## Other relevant information\n\n* BuildStream version affected: /milestone %BuildStream_v1.4\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/761/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/761/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/756", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/756/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/756/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/756/events", "html_url": "https://github.com/apache/buildstream/issues/756", "id": 800350995, "node_id": "MDU6SXNzdWU4MDAzNTA5OTU=", "number": 756, "title": "overnigth tests are failing on building base/locales.bst: OSError: [Errno 39] Directory not empty: '/root/.cache/buildstream/build/base-locales-2adia6f7/root/tmp'", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T13:54:01Z", "updated_at": "2021-02-03T13:54:57Z", "closed_at": "2021-02-03T13:54:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/756)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Nov 8, 2018, 08:00\n\nFor commit https://gitlab.com/BuildStream/buildstream/commit/f24e20e991df21a50298cd75bd0c02004550b213, See:\n- https://gitlab.com/BuildStream/buildstream/-/jobs/117733301\n- https://gitlab.com/BuildStream/buildstream/-/jobs/117733300", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/756/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/756/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/755", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/755/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/755/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/755/events", "html_url": "https://github.com/apache/buildstream/issues/755", "id": 800347919, "node_id": "MDU6SXNzdWU4MDAzNDc5MTk=", "number": 755, "title": "Some tests are failing on aarch64", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108620, "node_id": "MDU6TGFiZWwyNzA5MTA4NjIw", "url": "https://api.github.com/repos/apache/buildstream/labels/infrastructure", "name": "infrastructure", "color": "AD8D43", "default": false, "description": "An issue related to project CI, website, etc infrastructure"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-02-03T13:51:24Z", "updated_at": "2021-02-03T13:53:53Z", "closed_at": "2021-02-03T13:53:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/755)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Nov 7, 2018, 22:33\n\nSeems the failures are the same independently of the distro being used: \n\n```\ntests/examples/autotools.py::test_autotools_build FAILED                 \ntests/examples/autotools.py::test_autotools_run FAILED                                                     \ntests/examples/developing.py::test_autotools_build FAILED                \ntests/examples/developing.py::test_run_unmodified_hello FAILED                           \ntests/examples/developing.py::test_make_change_in_workspace FAILED                                                                       \ntests/examples/flatpak-autotools.py::test_autotools_build FAILED         \ntests/examples/flatpak-autotools.py::test_autotools_run FAILED           \ntests/examples/integration-commands.py::test_integration_commands_build FAILED \ntests/examples/integration-commands.py::test_integration_commands_run FAILED \ntests/examples/junctions.py::test_build FAILED                           \ntests/examples/junctions.py::test_shell_call_hello FAILED                \ntests/examples/running-commands.py::test_running_commands_build FAILED\ntests/examples/running-commands.py::test_running_commands_run FAILED\ntests/format/listdirectiveerrors.py::test_project_error FAILED\ntests/integration/autotools.py::test_autotools_build FAILED             \ntests/integration/autotools.py::test_autotools_confroot_build FAILED \ntests/integration/autotools.py::test_autotools_run FAILED       \ntests/integration/build-tree.py::test_buildtree_staged FAILED   \ntests/integration/build-tree.py::test_buildtree_from_failure FAILED \ntests/integration/build-tree.py::test_buildtree_pulled FAILED  \ntests/integration/build-uid.py::test_build_uid_overridden FAILED  \ntests/integration/build-uid.py::test_build_uid_in_project FAILED  \ntests/integration/build-uid.py::test_build_uid_default FAILED  \ntests/integration/cachedfail.py::test_build_checkout_cached_fail FAILED\ntests/integration/cmake.py::test_cmake_build FAILED   \ntests/integration/cmake.py::test_cmake_confroot_build FAILED    \ntests/integration/cmake.py::test_cmake_run FAILED     \ntests/integration/compose.py::test_compose_include[include_domains0-exclude_domains0-expected0] FAILED\ntests/integration/compose.py::test_compose_include[include_domains1-exclude_domains1-expected1] FAILED\ntests/integration/compose.py::test_compose_include[include_domains2-exclude_domains2-expected2] FAILED\ntests/integration/compose.py::test_compose_include[include_domains3-exclude_domains3-expected3] FAILED\ntests/integration/compose.py::test_compose_include[include_domains4-exclude_domains4-expected4] FAILED\ntests/integration/compose.py::test_compose_include[include_domains5-exclude_domains5-expected5] FAILED\ntests/integration/compose.py::test_compose_include[include_domains6-exclude_domains6-expected6] FAILED\ntests/integration/compose.py::test_compose_include[include_domains7-exclude_domains7-expected7] FAILED\ntests/integration/compose.py::test_compose_include[include_domains8-exclude_domains8-expected8] FAILED\ntests/integration/make.py::test_make_build FAILED  \ntests/integration/make.py::test_make_run FAILED        \ntests/integration/manual.py::test_manual_element FAILED     \ntests/integration/manual.py::test_manual_element_environment FAILED  \ntests/integration/manual.py::test_manual_element_noparallel FAILED  \ntests/integration/pip_element.py::test_pip_build FAILED\ntests/integration/pip_element.py::test_pip_run FAILED\n```\n\nSee\n- https://gitlab.com/BuildStream/buildstream/-/jobs/117780376 (Debian 9)\n- https://gitlab.com/BuildStream/buildstream/-/jobs/117780379 (Fedora 28)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/755/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/755/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/751", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/751/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/751/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/751/events", "html_url": "https://github.com/apache/buildstream/issues/751", "id": 800342491, "node_id": "MDU6SXNzdWU4MDAzNDI0OTE=", "number": 751, "title": "test for import failures for auto completes", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-03T13:45:15Z", "updated_at": "2021-02-03T13:45:53Z", "closed_at": "2021-02-03T13:45:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/751)\nIn GitLab by [[Gitlab user @willsalmon]](https://gitlab.com/willsalmon) on Nov 6, 2018, 11:48\n\n## Summary\n\nbst is invoked sufficiently differently at complete time (on my Debian install with the standard install from source) that _stream.py can not be imported and if you import it into _frontend/cli.py then bst will crash for auto complete.\n\nwhile this is not a bug as we do not currently import _stream.py in to _frontend/cli.py the failure is not catch by our tests.\n\nI got some code quite close to getting merged before i noticed this behavour and so i think it would make a good subject of a regression test.\n\n\n## Steps to reproduce\n\nimport _stream.py in to _frontend/cli.py and then try to use auto complete.\nNote: i am not preposing to fix the bug but just to have a test that would catch it if any one tried to merge such a change.\n\n\n## What is the current bug behaviour?\n\nThis class of error is not caught by the tests:\n\n```\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 buildstream \ue0b1 buildstream \ue0b0 willsalmon/defaultWorkspaces \ue0b0 ? \ue0b0 1 \ue0b0 $ \ue0b0 bst sTraceback (most recent call last):\n  File \"/home/will/.local/bin/bst\", line 5, in <module>\n    from buildstream._frontend import cli\n  File \"/home/will/projects/buildstream/buildstream/buildstream/_frontend/__init__.py\", line 20, in <module>\n    from .cli import cli\n  File \"/home/will/projects/buildstream/buildstream/buildstream/_frontend/cli.py\", line 9, in <module>\n    from .._stream import DirectoryDescription\n  File \"/home/will/projects/buildstream/buildstream/buildstream/_stream.py\", line 33, in <module>\n    from ._scheduler import Scheduler, SchedStatus, TrackQueue, FetchQueue, BuildQueue, PullQueue, PushQueue\n  File \"/home/will/projects/buildstream/buildstream/buildstream/_scheduler/__init__.py\", line 22, in <module>\n    from .queues.fetchqueue import FetchQueue\n  File \"/home/will/projects/buildstream/buildstream/buildstream/_scheduler/queues/fetchqueue.py\", line 22, in <module>\n    from ... import Consistency\nImportError: cannot import name 'Consistency'\n```\n\n\n## What is the expected correct behaviour?\n\nThis should be caught by the tests.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/751/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/751/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/749", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/749/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/749/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/749/events", "html_url": "https://github.com/apache/buildstream/issues/749", "id": 800338897, "node_id": "MDU6SXNzdWU4MDAzMzg4OTc=", "number": 749, "title": "Script element corrupts cache when using layout and enables integration commands", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2021-02-03T13:41:07Z", "updated_at": "2021-02-03T13:44:27Z", "closed_at": "2021-02-03T13:44:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/749)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Nov 5, 2018, 12:39\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nScript element allows to overwrite files directly in the cache corrupting it. This happens when running integration commands.\n\nThis issue happens on both 1.2 and master.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n- element base.bst is the base image\n- element a.bst has an integration command that modifies a file that exists in base.bst\n- element b.bst is a script element with base.bst and b.bst in dependencies. The element has a layout, and base.bst is mounted at '/'.\n\nBuild b.bst. Then checkout base.bst, you will see the file is modified.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nThe file in cache is modified and does not correspond its object hash.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nFiles in the cache should be immutable.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/749/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/748", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/748/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/748/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/748/events", "html_url": "https://github.com/apache/buildstream/issues/748", "id": 800338138, "node_id": "MDU6SXNzdWU4MDAzMzgxMzg=", "number": 748, "title": "Unhandled exception freezing the build", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T13:40:16Z", "updated_at": "2021-02-03T13:40:55Z", "closed_at": "2021-02-03T13:40:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/748)\nIn GitLab by [[Gitlab user @bochecha]](https://gitlab.com/bochecha) on Nov 4, 2018, 19:20\n\n## Summary\n\nWe encountered an error in the Freedesktop Sdk CI.\n\nAfter the traceback, the build got stuck in that state for a long time, until we manually killed it.\n\n## Steps to reproduce\n\nThis is the first time it ever happens to us, we have no idea how to reproduce it.\n\n## What is the current bug behavior?\n\nInvalid text printed to stdout, a Python exception leading to a second Python exception, and a build stuck seemingly forever.\n\n## What is the expected correct behavior?\n\nThe build should have completed. (and given how far along it was, it most likely would have succeeded)\n\n## Relevant logs and/or screenshots\n\n```\n$ bst --colors -o target_arch x86_64 build all.bst\n[\u2026 snip \u2026]\nx\u0003\ufffd\u0006\u001f\u007f\ufffd\ufffd\b\u001f\u007f\ufffd\b\u001f\u007fH\ufffd\ufffd\ufffd\u001e\u007f\b\ufffd\ufffd\ufffd\u001e\u007fH\ufffd\ufffd\ufffd\u001e\u007fP\ufffd^\ufffd\ufffdUD\ufffd\ufffd\u0007\u001f\u007f\b\ufffd\ufffd\u0006\u001f[00:00:37][65fa531c][build:desktop-platform-image.bst    ] BUG     Build\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/_fuse/mount.py\", line 148, in mounted\n        yield\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/sandbox/_mount.py\", line 84, in mounted\n        yield\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/sandbox/_mount.py\", line 142, in mounted\n        yield\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/sandbox/_sandboxbwrap.py\", line 212, in run\n        self.try_remove_device(device_path)\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/sandbox/_sandboxbwrap.py\", line 390, in try_remove_device\n        os.unlink(device_path)\n    OSError: [Errno 107] Transport endpoint is not connected: '/builds/freedesktop-sdk/freedesktop-sdk/cache/buildstream/build/desktop-platform-image-v278qds4/scratch/_/mount/dev/full'\n    \n    During handling of the above exception, another exception occurred:\n    \n    Traceback (most recent call last):\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/_scheduler/jobs/job.py\", line 415, in _child_action\n        result = self.child_process()\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n        return self._action_cb(self._element)\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/_scheduler/queues/buildqueue.py\", line 35, in process\n        return element._assemble()\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/element.py\", line 1498, in _assemble\n        collect = self.assemble(sandbox)\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/plugins/elements/compose.py\", line 125, in assemble\n        dep.integrate(sandbox)\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/element.py\", line 794, in integrate\n        exitcode = sandbox.run(['sh', '-e', '-c', cmd], 0, env=environment, cwd='/')\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/sandbox/_sandboxbwrap.py\", line 247, in run\n        pass\n      File \"/usr/lib64/python3.6/contextlib.py\", line 380, in __exit__\n        raise exc_details[1]\n      File \"/usr/lib64/python3.6/contextlib.py\", line 365, in __exit__\n        if cb(*exc_details):\n      File \"/usr/lib64/python3.6/contextlib.py\", line 284, in _exit_wrapper\n        return cm_exit(cm, *exc_details)\n      File \"/usr/lib64/python3.6/contextlib.py\", line 99, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/sandbox/_mount.py\", line 142, in mounted\n        yield\n      File \"/usr/lib64/python3.6/contextlib.py\", line 380, in __exit__\n        raise exc_details[1]\n      File \"/usr/lib64/python3.6/contextlib.py\", line 365, in __exit__\n        if cb(*exc_details):\n      File \"/usr/lib64/python3.6/contextlib.py\", line 284, in _exit_wrapper\n        return cm_exit(cm, *exc_details)\n      File \"/usr/lib64/python3.6/contextlib.py\", line 99, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/sandbox/_mount.py\", line 84, in mounted\n        yield\n      File \"/usr/lib64/python3.6/contextlib.py\", line 99, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/_fuse/mount.py\", line 150, in mounted\n        self.unmount()\n      File \"/root/.local/lib/python3.6/site-packages/buildstream/_fuse/mount.py\", line 128, in unmount\n        .format(type(self).__name__, self.__process.exitcode))\n    buildstream._fuse.mount.FuseMountError: SafeHardlinks reported exit code -11 when unmounting\n```\n\nSee the full build log at https://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/116255830\n\n## Possible fixes\n\nNo idea.\n\n* BuildStream version affected: 1.2.3\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/748/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/748/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/746", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/746/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/746/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/746/events", "html_url": "https://github.com/apache/buildstream/issues/746", "id": 800336402, "node_id": "MDU6SXNzdWU4MDAzMzY0MDI=", "number": 746, "title": "SandboxRemote causes bugs instead of errors", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109345, "node_id": "MDU6TGFiZWwyNzA5MTA5MzQ1", "url": "https://api.github.com/repos/apache/buildstream/labels/refactoring", "name": "refactoring", "color": "AD4363", "default": false, "description": "Reduce the cost of ownership of our codebase"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T13:38:11Z", "updated_at": "2021-02-03T13:39:33Z", "closed_at": "2021-02-03T13:39:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/746)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 1, 2018, 14:43\n\nSandboxRemote class introduces it's very own brand of `SandboxError`, instead of using the one from `_exceptions` module, which is a derivative of `BstError` and is handled as a fatal error to be reported to the user.\n\nInstead, SandboxError issued from SandboxRemote will be a standard unhandled error, which will result in BUG messages being issued to the user.\n\nPinging [[Gitlab user @jmacarthur]](https://gitlab.com/jmacarthur) on this as he is the author.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/746/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/746/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/741", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/741/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/741/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/741/events", "html_url": "https://github.com/apache/buildstream/issues/741", "id": 800329865, "node_id": "MDU6SXNzdWU4MDAzMjk4NjU=", "number": 741, "title": "Artifact cache configuration should have certs and keys expanded", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T13:30:26Z", "updated_at": "2021-02-03T13:31:07Z", "closed_at": "2021-02-03T13:31:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/741)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Oct 30, 2018, 18:15\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThe configuration for `client-key`, `client-cert` and `server-cert` do not expanduser(), which means a key like \"~/.config/buildstream-client.cert\" will never be found\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n- Add an artifact cache with a `client-cert` like \"~/.config/buildstream-client.cert\".\n- create the key at the correct location\n- Watch the remote failing to initialize because the key doesn't exist.\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n`~` is not expanded for paths\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n`~` should be expanded\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/741/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/737", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/737/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/737/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/737/events", "html_url": "https://github.com/apache/buildstream/issues/737", "id": 800321018, "node_id": "MDU6SXNzdWU4MDAzMjEwMTg=", "number": 737, "title": "Buildstream local cache doesn't get cleanup automatically when the disk is full", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-02-03T13:19:01Z", "updated_at": "2021-02-03T13:21:25Z", "closed_at": "2021-02-03T13:21:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/737)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Oct 29, 2018, 15:38\n\n## Summary\nIf the disk gets fill up, build will fail and the only solution is to `rm -r` the buildstream cache folder\n\n## What is the expected correct behavior?\nIf the disk is full, buildstream should automatically cleanup, similar to what what happen when you set a quota\n\n## Possible fixes\nA possible solution would be (when we fix #733) to change the defaults from\n```\nquota: infinity\n```\nto\n```\nquota: 100%\n```\n* BuildStream version affected: 1.2.3", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/737/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/737/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/736", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/736/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/736/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/736/events", "html_url": "https://github.com/apache/buildstream/issues/736", "id": 800319841, "node_id": "MDU6SXNzdWU4MDAzMTk4NDE=", "number": 736, "title": "Integration tests are leaking into each others", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T13:17:32Z", "updated_at": "2021-02-03T13:18:53Z", "closed_at": "2021-02-03T13:18:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/736)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Oct 29, 2018, 14:51\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nIntegration tests in BuildStream are not completely separate and are leaking information into each other.\n\nCurrently, the `Platform` is instantiated only once and then shared accross all integration tests which can lead to some failures if we want to change the environment for some tests.\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nAdd the following to a file and run pytest on it:\n\n```python\nimport os\nimport pytest\nfrom tests.testutils import cli\nfrom tests.testutils.site import IS_LINUX\n\nfrom buildstream import _yaml\nfrom buildstream._exceptions import ErrorDomain\n\n\n# Project directory\nDATA_DIR = os.path.join(\n    os.path.dirname(os.path.realpath(__file__)),\n    'project',\n)\n\n\n[[Gitlab user @pytest]](https://gitlab.com/pytest).mark.integration\n[[Gitlab user @pytest]](https://gitlab.com/pytest).mark.skipif(not IS_LINUX, reason='Only available on Linux')\n[[Gitlab user @pytest]](https://gitlab.com/pytest).mark.datafiles(DATA_DIR)\ndef test_missing_brwap_has_nice_error_message(cli, datafiles):\n    project = os.path.join(datafiles.dirname, datafiles.basename)\n    element_path = os.path.join(project, 'elements', 'element.bst')\n\n    # Write out our test target\n    element = {\n        'kind': 'script',\n        'depends': [\n            {\n                'filename': 'base.bst',\n                'type': 'build',\n            },\n        ],\n        'config': {\n            'commands': [\n                'false',\n            ],\n        },\n    }\n    _yaml.dump(element, element_path)\n\n    # Build without access to host tools, this should fail with a nice error\n    result = cli.run(\n        project=project, args=['build', 'element.bst'], env={'PATH': ''})\n    result.assert_task_error(ErrorDomain.SANDBOX, 'unavailable-local-sandbox')\n    assert \"not found\" in result.stderr\n\n\n[[Gitlab user @pytest]](https://gitlab.com/pytest).mark.integration\n[[Gitlab user @pytest]](https://gitlab.com/pytest).mark.skipif(not IS_LINUX, reason='Only available on Linux')\n[[Gitlab user @pytest]](https://gitlab.com/pytest).mark.datafiles(DATA_DIR)\ndef test_old_brwap_has_nice_error_message(cli, datafiles, tmp_path):\n    # import buildstream._platform\n    # buildstream._platform.Platform._instance = None\n\n    bwrap = tmp_path.joinpath('bin/bwrap')\n    bwrap.parent.mkdir()\n    with bwrap.open('w') as fp:\n        fp.write('''\n            #!/bin/bash\n            echo bubblewrap 0.0.1\n        '''.strip())\n\n    bwrap.chmod(0o755)\n\n    project = os.path.join(datafiles.dirname, datafiles.basename)\n    element_path = os.path.join(project, 'elements', 'element3.bst')\n\n    # Write out our test target\n    element = {\n        'kind': 'script',\n        'depends': [\n            {\n                'filename': 'base.bst',\n                'type': 'build',\n            },\n        ],\n        'config': {\n            'commands': [\n                'true && true && false',\n            ],\n        },\n    }\n    _yaml.dump(element, element_path)\n\n    # Build without access to host tools, this should fail with a nice error\n    result = cli.run(\n        project=project,\n        args=['--debug', '--verbose', 'build', 'element3.bst'],\n        env={'PATH': str(tmp_path.joinpath('bin'))})\n    result.assert_task_error(ErrorDomain.SANDBOX, 'unavailable-local-sandbox')\n    assert \"too old\" in result.stderr\n```\n\nTo make the test pass, uncomment the two lines at the start of `test_old_brwap_has_nice_error_message`\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nThe second test fails with \"missing bwrap\"\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThe second test should pass\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n- have a fixture resetting Platform between every integration tests\n- rework the platform to not act as a \"god object\"\n- store the platform in the context instead\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/736/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/736/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/733", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/733/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/733/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/733/events", "html_url": "https://github.com/apache/buildstream/issues/733", "id": 800315646, "node_id": "MDU6SXNzdWU4MDAzMTU2NDY=", "number": 733, "title": "quota config parameter should be the maximum amount of cache allowed, not the minimum", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-03T13:11:50Z", "updated_at": "2021-02-03T13:13:58Z", "closed_at": "2021-02-03T13:13:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/733)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Oct 28, 2018, 01:32\n\n## Summary\nhttps://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/113482710 suggest that is I specify 35GB of quota, It doesn't mean that 35GB is the maximum, but the minimum for buildstream to run\n\n## What is the expected correct behavior?\nquota should be the maximum allow to use by buildstream, not the minimum\n\n* BuildStream version affected: 1.2.4", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/733/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/733/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/732", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/732/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/732/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/732/events", "html_url": "https://github.com/apache/buildstream/issues/732", "id": 800314870, "node_id": "MDU6SXNzdWU4MDAzMTQ4NzA=", "number": 732, "title": "Linting always fails when missing FUSE", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546542, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQy", "url": "https://api.github.com/repos/apache/buildstream/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-03T13:10:44Z", "updated_at": "2021-02-03T13:11:43Z", "closed_at": "2021-02-03T13:11:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/732)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Oct 26, 2018, 17:50\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen running tests, it's impossible to lint the `fuse.py` file, since it raises an exception when imported if fuse is not available on the host.\n\nThis means it's impossible to run the tests successfully on Windows.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n- Run the tests in Windows\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n- fuse.py throws an exception when imported with missing fuse libs\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nTests on windows should pass\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\nfuse.py offers a method to lazy load the required parts and this method is called by anything that needs to import fuse.\n\n\nI realise that might be controversial, but it would be nice to be able to run the basic tests on Windows :)\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/732/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/732/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/728", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/728/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/728/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/728/events", "html_url": "https://github.com/apache/buildstream/issues/728", "id": 800312132, "node_id": "MDU6SXNzdWU4MDAzMTIxMzI=", "number": 728, "title": "SandboxBwrap incorrectly checks its arguments type for command", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T13:07:08Z", "updated_at": "2021-02-03T13:08:25Z", "closed_at": "2021-02-03T13:08:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/728)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Oct 25, 2018, 14:51\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nRelevant code: https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/sandbox/_sandboxbwrap.py#L69-76\n\nThe conversion from string to list for the command happens after we checked that the command exist. That means that any command that is a string will be always invalid.\n\nI suggest that we remove this conversion and require a list. This is what the current behavior is doing de-facto anyways.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\nThe conversion from string to list for the command happens after we checked that the command exist. That means that any command that is a string will be always invalid.\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n- we should do the check after the conversion\n- we could remove the conversion entirely (I'm in favor of this)\n\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/728/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/728/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/727", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/727/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/727/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/727/events", "html_url": "https://github.com/apache/buildstream/issues/727", "id": 800311120, "node_id": "MDU6SXNzdWU4MDAzMTExMjA=", "number": 727, "title": "Don't cache host tools failures", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T13:05:54Z", "updated_at": "2021-02-03T13:07:01Z", "closed_at": "2021-02-03T13:07:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/727)\nIn GitLab by [[Gitlab user @BenjaminSchubert]](https://gitlab.com/BenjaminSchubert) on Oct 24, 2018, 18:50\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen building a project in BuildStream and a host tool is missing or failing (for example, bwrap wasn't installed before running), the error will get cached and subsequent runs (after installing bwrap) will fail in the same way.\n\nThis behavior is counter intuitive and has already bitten multiple developers.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n1) uninstall bubblewrap\n2) bst build whatever.bst  # this fails\n3) reinstall bubblewrap\n4) bst build whatever.bst  # this fails... again\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nHost tools failures are cached\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nSince they are dependent on the external environment, we shouldn't cache host tools failures.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\nI added a MR to reproduce the bug (!895) and can fix the bug if the issue is accepted.\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/727/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/727/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/721", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/721/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/721/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/721/events", "html_url": "https://github.com/apache/buildstream/issues/721", "id": 800301866, "node_id": "MDU6SXNzdWU4MDAzMDE4NjY=", "number": 721, "title": "overlap-whitelist tests paths without the leading /", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2021-02-03T12:53:46Z", "updated_at": "2021-02-03T12:56:23Z", "closed_at": "2021-02-03T12:56:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/721)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Oct 22, 2018, 17:22\n\n## Summary\n\nThe overlap-whitelist property seems not to work. On closer inspections, it does work but I cannot use the `%{prefix}` variable because the paths buildstream tests don't have a leading slash.\n\nI suppose this is a bug because the [documentation](https://docs.buildstream.build/format_public.html#overlap-whitelist) is using the leading slash.\n\n\n## Steps to reproduce\n\nI'm using the following overlap-whitelist\nhttps://gitlab.gnome.org/GNOME/gnome-build-meta/blob/c5f9311c24d9ebc29991206bd6f4e13bf9bbebdc/elements/sdk/gtk+.bst#L31\n\n\n## What is the current bug behavior?\n\nBuildstream is still reporting non-whitelisted overlaps. See\nhttps://gitlab.gnome.org/GNOME/gnome-build-meta/-/jobs/128446\n\n\n## What is the expected correct behavior?\n\nthe overlaps should be whitelisted.\n\n\n## Possible fixes\n\ntrying to print `pattern` from the `__file_is_whitelisted` function at https://gitlab.com/BuildStream/buildstream/blob/bst-1.2/buildstream/element.py#L2318, I see that the files are tested without the leading slash e.g. `usr/share/gettext/its/gtkbuilder.its`\n\n## Other relevant information\n\n* BuildStream version affected: /milestone %BuildStream_v1.2\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/721/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/721/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/717", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/717/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/717/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/717/events", "html_url": "https://github.com/apache/buildstream/issues/717", "id": 800293385, "node_id": "MDU6SXNzdWU4MDAyOTMzODU=", "number": 717, "title": "Interactive `bst init` doesn't create user provided `element-path` folder", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T12:42:25Z", "updated_at": "2021-02-03T12:43:11Z", "closed_at": "2021-02-03T12:43:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/717)\nIn GitLab by [[Gitlab user @gokcennurlu]](https://gitlab.com/gokcennurlu) on Oct 18, 2018, 15:27\n\n## Summary\n\nSpotted this while trying to make use of `bst init` in some kind integration testing with [[Gitlab user @chiaratolentino]](https://gitlab.com/chiaratolentino)\n\nIt asks for the `element-path`. It uses it in the generated `project.conf`, but creates the folder with the default name `elements` and we actually end up with a wrong configuration.\n\n## Steps to reproduce\n\n```bash\n$ bst init\n# enter a project name\n# enter version\n# enter an element-path different than `elements`, like `custom`.\n\n$ cat project.conf\n.. # contents of project.conf\nelement-path: custom\n..\n\n$ ls -l\nelements project.conf # ??\n```\n\n\n## What is the current bug behavior?\n\nSee above\n\n\n## What is the expected correct behavior?\n\nWith the same reproduce steps above,\n\n```bash\n$ cat project.conf\n.. # contents of project.conf\nelement-path: custom\n..\n\n$ ls -l\ncustom project.conf\n```\n\n## Possible fixes\n\nThis seems like caused by the very similar naming of two variables (elements_path, element_path) [here](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_frontend/app.py#L305) in `app.init_project()`\n\nI think easiest fix would be moving\n\n```python\nelements_path = os.path.join(directory, element_path)\n```\n\nclose to the creation of that dir, for example:\n\n```python\n            elements_path = os.path.join(directory, element_path)\n            try:\n                os.makedirs(elements_path, exist_ok=True)\n            except IOError as e:\n                raise AppError(\"Error creating elements sub-directory {}: {}\"\n                               .format(elements_path, e)) from e\n```\n\n## Other relevant information\n\n* BuildStream version affected: 1.3.0+703.g892866e1\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/717/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/717/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/715", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/715/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/715/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/715/events", "html_url": "https://github.com/apache/buildstream/issues/715", "id": 800292133, "node_id": "MDU6SXNzdWU4MDAyOTIxMzM=", "number": 715, "title": "Kind 'tar' only stages the contents of the first directory in a tar file", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-03T12:40:37Z", "updated_at": "2021-02-03T12:41:10Z", "closed_at": "2021-02-03T12:41:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/715)\nIn GitLab by [[Gitlab user @ben-brewer-ct]](https://gitlab.com/ben-brewer-ct) on Oct 16, 2018, 10:51\n\n## Summary\n\nWhen a tar file is staged, BuildStream assumes it will contain a single directory (i.e. not a tar-bomb) and will only stage the contents of the first directory.\n\n## Steps to reproduce\n\nAttempt to stage a tar file with multiple top-level directories.\n\n\n## What is the current bug behavior?\n\nCurrently only the contents of the first directory are staged.\n\n\n## What is the expected correct behavior?\n\nOne of the following:\n1. An error should be produced warning that tar files with multiple top-level directories are not supported\n2. There needs to be a method to define how the archive should be staged\n3. There needs to be a default behaviour which allows the staging of multiple directories.\n\n\n## Relevant logs and/or screenshots\n\nMy specific example cannot be shown as it contains sensitive information, however this is very easy to reproduce.\n\n\n## Other relevant information\n\nI'm reporting this as a bug, because often we don't get to choose what the tar files we stage contains. In this case I'm staging a tar file provided by a customer of a customer, while it is possible to untar it and host another copy locally, it's not a very nice solution in the long run.\n\n* BuildStream version affected: /milestone %BuildStream_v1.2.3\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/715/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/715/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/714", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/714/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/714/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/714/events", "html_url": "https://github.com/apache/buildstream/issues/714", "id": 800291115, "node_id": "MDU6SXNzdWU4MDAyOTExMTU=", "number": 714, "title": "The 'url' field in kind 'tar' doesn't accept local paths", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T12:39:07Z", "updated_at": "2021-02-03T12:40:29Z", "closed_at": "2021-02-03T12:40:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/714)\nIn GitLab by [[Gitlab user @ben-brewer-ct]](https://gitlab.com/ben-brewer-ct) on Oct 16, 2018, 10:34\n\n## Summary\n\nThe 'url' field in kind 'tar' doesn't accept a local path, where it does for kind 'git'.\n\n\n## Steps to reproduce\n\nSet a path to a local tar file without \"file://\" at the beginning.\n\n\n## What is the current bug behavior?\n\nCurrently BuildStream produces a stack trace which indicates a failure to resolve the URL.\n\n\n## What is the expected correct behavior?\n\nEither produce a readable error to say that only URLs are supported for kind tar, or allow local paths.\n\n\n## Relevant logs and/or screenshots\n\nCannot post logs as they contain sensitive information.\n\n\n## Other relevant information\n\nI'm filing this as a bug because in the documentation it shows using a prefix \"upstream:\", which is what I was doing, so it's non-obvious to the user that there should be any difference between tar and git behaviour in this case:\nhttps://buildstream.gitlab.io/buildstream/sources/tar.html\n\n* BuildStream version affected: /milestone %BuildStream_v1.2.3\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/714/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/714/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/712", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/712/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/712/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/712/events", "html_url": "https://github.com/apache/buildstream/issues/712", "id": 800285801, "node_id": "MDU6SXNzdWU4MDAyODU4MDE=", "number": 712, "title": "BuildStream spends a long time pulling/looking to pull before doing anything useful", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109199, "node_id": "MDU6TGFiZWwyNzA5MTA5MTk5", "url": "https://api.github.com/repos/apache/buildstream/labels/optimization", "name": "optimization", "color": "A295AA", "default": false, "description": "Make BuildStream faster and use less resources"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 29, "created_at": "2021-02-03T12:31:57Z", "updated_at": "2021-02-03T12:36:31Z", "closed_at": "2021-02-03T12:36:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/712)\nIn GitLab by [[Gitlab user @jennis]](https://gitlab.com/jennis) on Oct 15, 2018, 11:05\n\n## Context\n* I have just set up a remote artifact cache on a VM, which I intend to push built artifacts to from a project with ~1800 elements.\n* Many of the elements in this project depend on a junction project which, in turn, contains ~12000 elements.\n* I wish to push the ~1800 elements (and their junctioned dependencies) to the remote cache.\n* My `project.conf` file was configured to push to the remote cache.\n* I wrote an ad hoc stack element that `depends:` on all ~1800 elements. Then tried `bst build <stack_element>.bst`\n\n## Summary\n* First we found that building the entire stack was taking an extremely long time and this lead to uncover #703 \n* However, to bypass #703, I wrote a wrapper for BuildStream's frontend, which `bst builds` elements in batches of 100.\n* A `bst build` of 100 elements in the first project, with dependencies, produces a pipeline of ~1000 jobs.\n* Now, BuildStream spends hours trying to pull, element by element, the ~1000 elements from the empty cache, and performs very few fetch jobs in the mean time.\n\n\n## Steps to reproduce\n* Initialise a remote artifact server on a VM: `bst-artifact-server --enable-push --port 8080 <REPO>`\n* Try to build a big project (e.g. freedesktop or gnome-build-meta) with a `project.conf` which includes:\n\n```\nartifacts:\n  url: <ip>:<port>\n  push: true\n```\n\n* Record how long it takes to pull\n\n## Possible fixes\n1. We perform a batch request to the server saying 'here are all the elements/cache keys I'm looking for'.\n2. Ensure that fetch jobs get a higher priority than pull jobs\n    - As suggested by [[Gitlab user @juergbi]](https://gitlab.com/juergbi) on our IRC channel.\n    - Note that we have tried a quick hack for this and the result was that the overall build time was longer.\n3. We are able to disable a cache for a build run, build locally and then `bst push`.\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/712/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/711", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/711/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/711/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/711/events", "html_url": "https://github.com/apache/buildstream/issues/711", "id": 800281698, "node_id": "MDU6SXNzdWU4MDAyODE2OTg=", "number": 711, "title": "Cache key calculation fails to take dependency type into account in some cases", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 31, "created_at": "2021-02-03T12:26:58Z", "updated_at": "2021-02-03T12:31:44Z", "closed_at": "2021-02-03T12:31:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/711)\nIn GitLab by [[Gitlab user @ben-brewer-ct]](https://gitlab.com/ben-brewer-ct) on Oct 12, 2018, 13:33\n\n## Summary\n\nWhen changing the type of a dependency, the cache key for the element doesn't always change.\n\n## Steps to reproduce\n\nFor any artifact which currently has a dependency which is \"type: build\":\nRemove the \"type: build\" so that it's type is \"runtime+build\".\nThe cache key will not change.\n\n## What is the current bug behavior?\n\nThe cache key doesn't change when switching between \"build\" and \"build+runtime\" dependency types.\n\n## What is the expected correct behavior?\n\nThe cache key should change because the behaviour of the build changes.\n\n## Relevant logs and/or screenshots\n\nI can't post the logs due to non-disclosure, but I may attempt to create an example if it's required.\n\n## Possible fixes\n\nUnconditionally add the dependency type to the cache key calculation.\n\n## Other relevant information\n\nIn buildstream there are 3 dependency types:\n* build which happens with \"type: build\"\n* runtime which happens with \"type: runtime\"\n* build+runtime which happens when there's no type field\n\nIt would be easy to believe that \"build\" and \"build+runtime\" would cause the element to be identical and as such the cache key wouldn't change, because you'd think that \"runtime\" depends have no effect at build-time, however this is not the case:\n\nFor example imagine a gcc runtime dependency, it will be included at build time by anything which builds gcc, because gcc would need that to run.\n\nStated clearly:\n* If A build depends on B and B build depends on C. C is not staged at build time for A.\n* If A build depends on B and B build+runtime depends on C. C is staged at build time for A because it's needed to run B.\n\nSo the difference between \"build\" and \"build+runtime\" manifests at build time, and needs to be handled by buildstream.\n\nThis error is very likely to be encountered in any situation where you're aiming for a minimal set of dependencies. As it makes sense to start out having everything as a build-depend until you know that it's needed as a build+runtime dependency.\n\nIn my case I now have to delete cache elements to force a rebuild to see the correct behaviour.\n\nThis bug has directly caused builds that should fail to succeeed on my machine.\n\n* BuildStream version affected: /milestone %BuildStream_v1.2.3\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/711/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/711/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/693", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/693/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/693/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/693/events", "html_url": "https://github.com/apache/buildstream/issues/693", "id": 800266307, "node_id": "MDU6SXNzdWU4MDAyNjYzMDc=", "number": 693, "title": "User is promted a second time when force terminating with ^C", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T12:05:35Z", "updated_at": "2021-02-03T12:07:04Z", "closed_at": "2021-02-03T12:07:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/693)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 3, 2018, 11:09\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen the user decides to terminate the build forcefully, BuildStream asks the user again if they want to terminate instead of just going ahead and terminating.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n* Start a build\n* Hit `^C`\n* BuildStream will give you a prompt, informing you that if you choose to terminate or hit `^C` again, it will terminate all tasks and exit\n* Hit `^C` again\n* BuildStream now says were \"Terminating all jobs at user request\"... so far so good\n* Now BuildStream does terminate the jobs\n  * But, there are messages which indicate that maybe we double-terminated them, these messages are from python core and say *\"Unknown child process pid 13280, will report returncode 255\"*\n* Now we get another, second prompt, saying again *\"User interrupted with ^C\"*\n* We can no longer hit `^C`, because we block `SIGINT` intentionally so that the user cannot interrupt our termination of tasks\n* At this point, if you hit `ENTER`, BuildStream will *\"Continue\"*, and this will finally result in termination\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nWe are falling into the `SIGINT` trap a second time, even though we already terminated\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nWe should not get asked a second time after terminating tasks.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\nHere is the output of a sample session:\n\n```\nUser interrupted with ^C\n\nChoose one of the following options:\n  (c)ontinue  - Continue queueing jobs as much as possible\n  (q)uit      - Exit after all ongoing jobs complete\n  (t)erminate - Terminate any ongoing jobs and exit\n\nPressing ^C again will terminate jobs and exit\n\nChoice: [continue]: ^C\n\nTerminating all jobs at user request\n\n[--:--:--][0ea88a4b][ main:sdk/gtk+-3.bst                ] STATUS  Pull terminating\n[--:--:--][0ca2699c][ main:sdk/fcitx.bst                 ] STATUS  Pull terminating\n[--:--:--][f7fcc6ed][ main:sdk/sdl2.bst                  ] STATUS  Pull terminating\n[--:--:--][4677d74b][ main:sdk/ffmpeg.bst                ] STATUS  Pull terminating\n[--:--:--][09e1bccf][ main:sdk/geoclue.bst               ] STATUS  Pull terminating\n[--:--:--][43069f6c][ main:sdk/gst-libav.bst             ] STATUS  Pull terminating\n[--:--:--][38935dcd][ main:core-deps/NetworkManager.bst  ] STATUS  Pull terminating\n[--:--:--][2733fc38][ main:sdk/WebKitGTK+.bst            ] STATUS  Pull terminating\n[--:--:--][cdb31ebf][ main:core-deps/libgsf.bst          ] STATUS  Pull terminating\n[--:--:--][d8e26177][ main:sdk/gcr.bst                   ] STATUS  Pull terminating\nUnknown child process pid 13280, will report returncode 255\nUnknown child process pid 13298, will report returncode 255\nUnknown child process pid 13268, will report returncode 255\nUnknown child process pid 13270, will report returncode 255\nUnknown child process pid 13272, will report returncode 255\nUnknown child process pid 13284, will report returncode 255\nUnknown child process pid 13290, will report returncode 255\nUnknown child process pid 13276, will report returncode 255\nUnknown child process pid 13300, will report returncode 255\nUnknown child process pid 13294, will report returncode 255\n\nUser interrupted with ^C\n\nChoose one of the following options:\n  (c)ontinue  - Continue queueing jobs as much as possible\n  (q)uit      - Exit after all ongoing jobs complete\n  (t)erminate - Terminate any ongoing jobs and exit\n\nPressing ^C again will terminate jobs and exit\n\nChoice: [continue]: ^C\n\n\nTerminating all jobs at user request\n\n[00:00:15][][] WARNING Build Terminated\n\nPipeline Summary\n  Total:       489\n  Session:     136\n  Pull Queue:  processed 0, skipped 10, failed 0 \n  Fetch Queue: processed 0, skipped 0,  failed 0 \n  Build Queue: processed 0, skipped 0,  failed 0 \n```\n\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/693/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/692", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/692/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/692/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/692/events", "html_url": "https://github.com/apache/buildstream/issues/692", "id": 800265828, "node_id": "MDU6SXNzdWU4MDAyNjU4Mjg=", "number": 692, "title": "SSL root certificate error when configuring a cache", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T12:04:57Z", "updated_at": "2021-02-03T12:05:27Z", "closed_at": "2021-02-03T12:05:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/692)\nIn GitLab by [[Gitlab user @adds68]](https://gitlab.com/adds68) on Oct 2, 2018, 18:39\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen configuring a cache to use SSL, i am seeing a root certificate error, even though the certificates are supplied\nby a trusted authority.\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nConfigure the cache via the systemd file as shown in the docs, but with certificates supplied by Lets Encrypt\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nThe cache fails to start on push/pull\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThe cache should be able to receive artifacts from a client that has access to the correct push certificate\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\nOct 02 17:29:49 CAS-server-fedora-s-3vcpu-1gb-ams3-01 systemd[1]: Started Buildstream Artifact pul/push server.\nOct 02 17:29:50 CAS-server-fedora-s-3vcpu-1gb-ams3-01 bst-artifact-server[921]: E1002 17:29:50.693824757     921 ssl_transport_security.cc:619] Could not add root certificate to ssl context.\nOct 02 17:29:50 CAS-server-fedora-s-3vcpu-1gb-ams3-01 bst-artifact-server[921]: E1002 17:29:50.694320068     921 ssl_transport_security.cc:1849] Invalid verification certs.\nOct 02 17:29:50 CAS-server-fedora-s-3vcpu-1gb-ams3-01 bst-artifact-server[921]: E1002 17:29:50.694386114     921 security_connector.cc:1160] Handshaker factory creation failed with TSI_INTERNAL_ERROR.\nOct 02 17:29:50 CAS-server-fedora-s-3vcpu-1gb-ams3-01 bst-artifact-server[921]: E1002 17:29:50.694442632     921 server_secure_chttp2.cc:84] {\"created\":\"[[Gitlab user @1538501390]](https://gitlab.com/1538501390).694407335\",\"description\":\"Unable to create secure server with credentials of type Ssl.\",\"file\":\"src/core/ext/transport/chttp2/server/secure/server_secure_chttp2.cc\",\"file_line\":63,\"security_status\":1}\n```\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/692/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/692/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/691", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/691/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/691/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/691/events", "html_url": "https://github.com/apache/buildstream/issues/691", "id": 800265340, "node_id": "MDU6SXNzdWU4MDAyNjUzNDA=", "number": 691, "title": "BuildStream does not automatically fetch a junction within a junction / displays an inaccurate helper", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-03T12:04:21Z", "updated_at": "2021-02-03T12:04:49Z", "closed_at": "2021-02-03T12:04:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/691)\nIn GitLab by [[Gitlab user @jennis]](https://gitlab.com/jennis) on Oct 2, 2018, 17:45\n\nI have a project which contains a junction element (junction-A.bst). Within the junctioned project (A), there is another junction, junction-B.bst.\n\nIn my current project, I have an element (foo.bst) that depends on an element within junction A (bar.bst), and this element, in turn, depends on an element in junction B (baz.bst).\n\nNow, with a fresh clone of my initial project, I will try to execute `bst show foo.bst`.\n\nThis will fail, as expected, and prompt me to fetch junction-A.\n\n```\n $ bst show foo.bst \n[--:--:--][][] START   Loading elements\n[00:00:00][][] FAILURE Loading elements\n\nSubproject fetch needed for junction: junction-A.bst\n\n    Try fetching the project with `bst fetch junction-A.bst`\n```\n\nNow, I `bst fetch junction-A.bst`:\n\n```\n $ bst fetch junction-A.bst \n[--:--:--][][] START   Fetch\n[--:--:--][][] START   Loading elements\n[00:00:00][][] SUCCESS Loading elements\n[--:--:--][][] START   Resolving elements\n[00:00:00][][] SUCCESS Resolving elements\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\n[--:--:--][][] START   Checking sources\n[00:00:00][][] SUCCESS Checking sources\n\nBuildStream Version 1.3.0+608.g0458bc4e\n  Session Start: Tuesday, 02-10-2018 at 16:28:01\n  Project:       Project (/home/jennis/bst_projects/project)\n  Targets:       junction-A.bst\n\nUser Configuration\n  Configuration File:      Default Configuration\n  Log Files:               /home/jennis/.cache/buildstream/logs\n  Source Mirrors:          /home/jennis/.cache/buildstream/sources\n  Build Area:              /home/jennis/.cache/buildstream/build\n  Artifact Cache:          /home/jennis/.cache/buildstream/artifacts\n  Strict Build Plan:       Yes\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nPipeline\n   buildable 951a30a9a9daafa7035fc68ce7967ea8031fcbde902ec0f1b67f4842f3a04e53 junction-A.bst \n===============================================================================\n[00:00:00][][] SUCCESS Fetch\n\nPipeline Summary\n  Total:       1\n  Session:     0\n  Fetch Queue: processed 0, skipped 0, failed 0 \n```\n\nAll good.\n\nNow I will try the first command again, `bst show foo.bst`:\n\n```\n $ bst show alertproxy_stack.bst \n[--:--:--][][] START   Loading elements\n[00:00:00][][] FAILURE Loading elements\n\nSubproject fetch needed for junction: junction-B.bst\n\n    Try fetching the project with `bst fetch junction-B.bst`\n```\n\nNow, junction-B.bst is not an element that actually exists in my project. It exists in project A (via junction-A.bst).\n\nSo, executing what is suggested (`bst fetch junction-B.bst`) fails, as expected:\n\n```\n $ \u25b6 bst fetch junction-B.bst\n[--:--:--][][] START   Fetch\n[--:--:--][][] START   Loading elements\n[00:00:00][][] FAILURE Loading elements\n[00:00:00][][] FAILURE Fetch\n\nCould not find element 'junction-B.bst' in elements directory '/home/jennis/bst_projects/project/elements'\n```\n\nNow, with knowledge of junctions, remedying this is simple. We need only execute:\n\n```\nbst fetch junction-A.bst:junction-B.bst\n```\n\nBut we cannot assume that the user has this knowledge of junctions and if we could, they're still receiving an inaccurate hint: 'Try fetching the project with `bst fetch junction-B.bst`'\n\nSo, I think there are two options here:\n\n1) We ensure that the helper message is correct, i.e. it suggests we fetch junction-A.bst:junction-B.bst\n2) We recursively fetch junctions (preferable)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/691/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/691/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/684", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/684/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/684/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/684/events", "html_url": "https://github.com/apache/buildstream/issues/684", "id": 800257890, "node_id": "MDU6SXNzdWU4MDAyNTc4OTA=", "number": 684, "title": "Staging OSTree sources with very strict permissions fails", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-03T11:54:24Z", "updated_at": "2022-08-22T06:28:50Z", "closed_at": "2022-08-22T06:28:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/684)\nIn GitLab by [[Gitlab user @juergbi]](https://gitlab.com/juergbi) on Sep 28, 2018, 10:26\n\n## Summary\n\nWhen trying to build an element whose sources contain files without read/write permissions (e.g., 0111), staging sources fails. This has been observed with an OSTree source, however, the issue may be independent of the source plugin.\n\n## Steps to reproduce\n\nRun `bst build centos.bst` in the attached project [repro.tar.gz](/uploads/053c0099e7bff5370f30a797193a22c1/repro.tar.gz), from https://gitlab.com/BuildStream/buildstream/issues/429#note_104869069.\n\n## What is the current bug behavior?\n\nStaging sources fails with a BUG message.\n\n## What is the expected correct behavior?\n\nStaging sources succeeds.\n\n## Relevant logs and/or screenshots\n\nhttps://gitlab.com/BuildStream/buildstream/snippets/1758155\n\n## Possible fixes\n\n`git bisect` result:\n\n```\n849724ce197850afb4094a5484a5aabbb8a192e4 is the first bad commit\ncommit 849724ce197850afb4094a5484a5aabbb8a192e4\nAuthor: Jim MacArthur <jim.macarthur[[Gitlab user @codethink]](https://gitlab.com/codethink).co.uk>\nDate:   Tue May 8 16:19:22 2018 +0100\n\n    element.py: Conversion to use virtual directories\n```\n\n## Other relevant information\n\nThis is a regression in BuildStream master (1.3). It works in BuildStream 1.2.\n\nSee also #429.\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/684/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/684/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/682", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/682/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/682/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/682/events", "html_url": "https://github.com/apache/buildstream/issues/682", "id": 800256512, "node_id": "MDU6SXNzdWU4MDAyNTY1MTI=", "number": 682, "title": "Handle rogue plugin exceptions.", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T11:52:26Z", "updated_at": "2021-02-03T11:53:02Z", "closed_at": "2021-02-03T11:53:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/682)\nIn GitLab by [[Gitlab user @finnball]](https://gitlab.com/finnball) on Sep 27, 2018, 12:52\n\n## Summary\n\nAs summarised here:\n\nhttps://gitlab.com/BuildStream/bst-external/issues/19\n\nBst crashes badly when the exception isn't caught in this plugin.\n\n\n## Steps to reproduce\n\nUse the above plugin and try a fetch for a URL which doesn't work.\n\n\n## What is the current bug behavior?\n\nBst crashes, requiring a manual kill.\n\n\n## What is the expected correct behavior?\n\nShould gracefully exit.\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/682/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/682/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/681", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/681/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/681/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/681/events", "html_url": "https://github.com/apache/buildstream/issues/681", "id": 800255439, "node_id": "MDU6SXNzdWU4MDAyNTU0Mzk=", "number": 681, "title": "Search functionality in the Documentation has stopped working", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T11:50:55Z", "updated_at": "2021-02-03T11:52:18Z", "closed_at": "2021-02-03T11:52:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/681)\nIn GitLab by [[Gitlab user @adds68]](https://gitlab.com/adds68) on Sep 25, 2018, 13:48\n\n## Summary\n## Steps to reproduce\n\nGot to this link and wait for nothing to return:\n\nhttps://buildstream.gitlab.io/buildstream/search.html?q=junctions&check_keywords=yes&area=default\n\n\n## What is the current bug behavior?\n\nNothing.\n\n\n## What is the expected correct behavior?\n\nThings containing the search term are returned\n\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/681/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/681/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/673", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/673/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/673/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/673/events", "html_url": "https://github.com/apache/buildstream/issues/673", "id": 800245899, "node_id": "MDU6SXNzdWU4MDAyNDU4OTk=", "number": 673, "title": "Silverblue: Specified path 'elements' must not lead outside of the project directory", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2021-02-03T11:37:33Z", "updated_at": "2021-02-03T11:40:34Z", "closed_at": "2021-02-03T11:40:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/673)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Sep 22, 2018, 21:26\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nOn Silverblue, `/home` is a simlink to `/var/home`. And this causes issue in detecting that files are inside project.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nOn non Silverblue system, you can easily reproduce this way:\n\n```\nln -s $HOME/.cache /tmp/cache\nexport XDG_CACHE_HOME=/tmp/cache\nbst build ...\n```\n\nBuilding Freedesktop SDK, you get error:\n```\n/tmp/cache/buildstream/build/bootstrap-junction-2atdruz7/project.conf [line 15 column 14]: Specified path 'elements' must not lead outside of the project directory\n```\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nAn error when the requested file is actually inside the project.\n\nThis issue was found by [[Gitlab user @seppo]](https://gitlab.com/seppo).yliolli.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nNo error.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\nThis affects 1.2.1.\n\nWork-around in Silverblue is to define `XDG_CACHE_HOME=/var/$HOME/.cache`.\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/673/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/673/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/670", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/670/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/670/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/670/events", "html_url": "https://github.com/apache/buildstream/issues/670", "id": 800235824, "node_id": "MDU6SXNzdWU4MDAyMzU4MjQ=", "number": 670, "title": "`--deps none` does not work for `bst checkout`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-02-03T11:23:53Z", "updated_at": "2021-02-03T11:26:26Z", "closed_at": "2021-02-03T11:26:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/670)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Sep 21, 2018, 22:42\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\n`bst checkout --deps none element.bst directory` currently produces empty output regardless of the element and the directory specified.\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n```bash\n$ cd tests/integration/project\n$ cat > elements/hello.bst <<EOF\nkind: import\nbuild-depends:\n- base.bst\nsources:\n  - kind: local\n    path: files/workspace-mount-src/\nEOF\n\n$ bst build hello.bst\n\n# Works as expected\n$ bst checkout hello.bst deps && find deps\ndeps\ndeps/hello.c\n\n# BUG - produces empty directory\n$ bst checkout --deps none hello.bst deps-none && find deps-none\ndeps-none\n```\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nEmpty directory is produced as output.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nWith `--deps none` specified, just the specified element should be checked out.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/670/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/670/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/666", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/666/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/666/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/666/events", "html_url": "https://github.com/apache/buildstream/issues/666", "id": 800231165, "node_id": "MDU6SXNzdWU4MDAyMzExNjU=", "number": 666, "title": "Crash in `bst fetch` with mirroring configured and project.refs storage", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T11:17:30Z", "updated_at": "2021-02-03T11:18:37Z", "closed_at": "2021-02-03T11:18:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/666)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 21, 2018, 05:56\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nBuildStream crashes with a BUG message and stack trace when fetching a source that:\n\n* Uses `ref-storage: project.refs`\n* Does have a ref listed for the given source in the `project.refs`\n* Has a mirror configured with at least one redirected alias\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\nFailure Summary\n  sdk/brotli.bst:\n    [00:00:00][d17fe05b][fetch:sdk/brotli.bst                ] BUG     Fetch\n\n        An unhandled exception occured:\n    \n        Traceback (most recent call last):\n          File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 407, in _child_action\n            result = self.child_process()\n          File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n            return self._action_cb(self._element)\n          File \"/codethink/GNOME/buildstream/buildstream/_scheduler/queues/fetchqueue.py\", line 44, in process\n            source._fetch()\n          File \"/codethink/GNOME/buildstream/buildstream/source.py\", line 630, in _fetch\n            new_source.fetch()\n          File \"/codethink/GNOME/buildstream/buildstream/plugins/sources/_downloadablefilesource.py\", line 80, in fetch\n            if os.path.isfile(self._get_mirror_file()):\n          File \"/codethink/GNOME/buildstream/buildstream/plugins/sources/_downloadablefilesource.py\", line 171, in _get_mirror_file\n            return os.path.join(self._get_mirror_dir(), sha or self.ref)\n          File \"/usr/lib/python3.5/posixpath.py\", line 89, in join\n            genericpath._check_arg_types('join', a, *p)\n          File \"/usr/lib/python3.5/genericpath.py\", line 143, in _check_arg_types\n            (funcname, s.__class__.__name__)) from None\n        TypeError: join() argument must be str or bytes, not 'NoneType'\n```\n\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nFix source re-instantiation involved with fetching with mirroring enabled, such that the resulting newly instantiated Source has passed through the same loading codepaths as it does normally.\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/666/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/666/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/665", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/665/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/665/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/665/events", "html_url": "https://github.com/apache/buildstream/issues/665", "id": 800230235, "node_id": "MDU6SXNzdWU4MDAyMzAyMzU=", "number": 665, "title": "Buildstream tries to use message without a message handler if linux platform and no user namespace support", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T11:16:10Z", "updated_at": "2021-02-03T11:17:18Z", "closed_at": "2021-02-03T11:17:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/665)\nIn GitLab by [[Gitlab user @jonathanmaw]](https://gitlab.com/jonathanmaw) on Sep 20, 2018, 18:15\n\n## Summary\n\nIf buildstream is using the linux platform but user namespaces aren't supported, it will try to use the message handler before it's set, and fail an assertion.\n\n\n\n## Steps to reproduce\n\n1. Use a linux system that doesn't use user namespaces.\n2. Try to `bst fetch` anything.\n\nI replicated this by running the benchmark in https://gitlab.com/BuildStream/benchmarks\n(i.e. `python3 -m bst_benchmarks`)\n\n\n## What is the current bug behavior?\n\nIn App.initialized() when `bst fetch` is called, it tries to instantiate the Platform (https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_frontend/app.py#L201), and sets the message handler on line 215.\nIf the platform doesn't support user namespaces, it will try to use the message handler to print a message *before* it's set a message handler.\n\n## What is the expected correct behavior?\n\nIt does not fail an assertion that there is a message handler set before it tries to send a message.\n\n## Relevant logs and/or screenshots\n\nConsole output\n```\njonathanmaw[[Gitlab user @fafnir]](https://gitlab.com/fafnir):~/workspace/buildstream/benchmarks$ python3 -m bst_benchmarks -c configs/simple.benchmark\nINFO:root:BuildStream benchmark runner started at 2018-09-20 17:31:36.593847\nINFO:root:Preparing image 'bst_benchmarks:master'\n^C\nAborted!\njonathanmaw[[Gitlab user @fafnir]](https://gitlab.com/fafnir):~/workspace/buildstream/benchmarks$ python3 -m bst_benchmarks\nINFO:root:BuildStream benchmark runner started at 2018-09-20 17:31:43.612275\nINFO:root:Preparing image 'bst_benchmarks:1.0.1'\nINFO:root:Preparing image 'bst_benchmarks:1.1.0'\nINFO:root:Preparing image 'bst_benchmarks:stable'\nINFO:root:Preparing image 'bst_benchmarks:master'\nINFO:root:Preparing volume 'baserock-source'\nVolume setup script exited with code 1. Error output:\n+ git clone https://gitlab.com/BuildStream/bst-external/\nCloning into 'bst-external'...\nwarning: redirecting to https://gitlab.com/BuildStream/bst-external.git/\n+ cd bst-external\n+ git checkout c4cc10467d116450471ca9f756617ede7572814c\nNote: checking out 'c4cc10467d116450471ca9f756617ede7572814c'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n\n  git checkout -b <new-branch-name>\n\nHEAD is now at c4cc104 Merge branch 'sam/docker-source' into 'master'\n+ pip3 install --user .\nWARNING: Running pip install with root privileges is generally not a good idea. Try `pip3 install --user` instead.\nProcessing /bst-external\nCollecting requests (from BuildStream-external==0.1)\n  Downloading https://files.pythonhosted.org/packages/65/47/7e02164a2a3db50ed6d8a6ab1d6d60b69c4c3fdf57a284257925dfc12bda/requests-2.19.1-py2.py3-none-any.whl (91kB)\nRequirement already satisfied: setuptools in /usr/lib/python3.6/site-packages (from BuildStream-external==0.1)\nCollecting urllib3<1.24,>=1.21.1 (from requests->BuildStream-external==0.1)\n  Downloading https://files.pythonhosted.org/packages/bd/c9/6fdd990019071a4a32a5e7cb78a1d92c53851ef4f56f62a3486e6a7d8ffb/urllib3-1.23-py2.py3-none-any.whl (133kB)\nCollecting certifi>=2017.4.17 (from requests->BuildStream-external==0.1)\n  Downloading https://files.pythonhosted.org/packages/df/f7/04fee6ac349e915b82171f8e23cee63644d83663b34c539f7a09aed18f9e/certifi-2018.8.24-py2.py3-none-any.whl (147kB)\nCollecting chardet<3.1.0,>=3.0.2 (from requests->BuildStream-external==0.1)\n  Downloading https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl (133kB)\nCollecting idna<2.8,>=2.5 (from requests->BuildStream-external==0.1)\n  Downloading https://files.pythonhosted.org/packages/4b/2a/0276479a4b3caeb8a8c1af2f8e4355746a97fab05a372e4a2c6a6b876165/idna-2.7-py2.py3-none-any.whl (58kB)\nInstalling collected packages: urllib3, certifi, chardet, idna, requests, BuildStream-external\n  Running setup.py install for BuildStream-external: started\n    Running setup.py install for BuildStream-external: finished with status 'done'\nSuccessfully installed BuildStream-external-0.1 certifi-2018.8.24 chardet-3.0.4 idna-2.7 requests-2.19.1 urllib3-1.23\n+ cd ..\n+ mkdir -p /root/.config\n+ echo 'sourcedir: /src'\n+ git clone https://gitlab.com/baserock/definitions\nCloning into 'definitions'...\nwarning: redirecting to https://gitlab.com/baserock/definitions.git/\n+ cd definitions\n+ git checkout 9da3339c8b3d5080fcacc2f3f9a38178e3c9879c\nfatal: reference is not a tree: 9da3339c8b3d5080fcacc2f3f9a38178e3c9879c\n+ bst fetch gnu-toolchain/stage1-binutils.bst\nbwrap: No permissions to creating new namespace, likely because the kernel does not allow non-privileged user namespaces. On e.g. debian this can be enabled with 'sysctl kernel.unprivileged_userns_clone=1'.\nTraceback (most recent call last):\n  File \"/usr/local/bin/bst\", line 8, in <module>\n    sys.exit(cli())\n  File \"/usr/local/lib64/python3.6/site-packages/click/core.py\", line 722, in __call__\n    return self.main(*args, **kwargs)\n  File \"/usr/local/lib/python3.6/site-packages/buildstream/_frontend/cli.py\", line 162, in override_main\n    standalone_mode=standalone_mode, **extra)\n  File \"/usr/local/lib64/python3.6/site-packages/click/core.py\", line 697, in main\n    rv = self.invoke(ctx)\n  File \"/usr/local/lib64/python3.6/site-packages/click/core.py\", line 1066, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/usr/local/lib64/python3.6/site-packages/click/core.py\", line 895, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/usr/local/lib64/python3.6/site-packages/click/core.py\", line 535, in invoke\n    return callback(*args, **kwargs)\n  File \"/usr/local/lib64/python3.6/site-packages/click/decorators.py\", line 27, in new_func\n    return f(get_current_context().obj, *args, **kwargs)\n  File \"/usr/local/lib/python3.6/site-packages/buildstream/_frontend/cli.py\", line 376, in fetch\n    with app.initialized(session_name=\"Fetch\"):\n  File \"/usr/lib64/python3.6/contextlib.py\", line 81, in __enter__\n    return next(self.gen)\n  File \"/usr/local/lib/python3.6/site-packages/buildstream/_frontend/app.py\", line 201, in initialized\n    Platform.create_instance(self.context)\n  File \"/usr/local/lib/python3.6/site-packages/buildstream/_platform/platform.py\", line 61, in create_instance\n    cls._instance = PlatformImpl(*args, **kwargs)\n  File \"/usr/local/lib/python3.6/site-packages/buildstream/_platform/linux.py\", line 38, in __init__\n    self._user_ns_available = self._check_user_ns_available(context)\n  File \"/usr/local/lib/python3.6/site-packages/buildstream/_platform/linux.py\", line 82, in _check_user_ns_available\n    \"artifacts created will not be trusted for push purposes.\"))\n  File \"/usr/local/lib/python3.6/site-packages/buildstream/_context.py\", line 354, in message\n    assert self._message_handler\nAssertionError\n```\n\n## Possible fixes\n\n* Move the set_message_handler call to before creating the platform.\n\nor\n\n* Use something other than context.message() to warn that user namespaces don't work.\n\n## Other relevant information\n\n\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.4\" \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/665/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/665/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/664", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/664/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/664/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/664/events", "html_url": "https://github.com/apache/buildstream/issues/664", "id": 800226962, "node_id": "MDU6SXNzdWU4MDAyMjY5NjI=", "number": 664, "title": "Current buildstream master is failing to build freedesktop-sdk", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2021-02-03T11:12:23Z", "updated_at": "2021-02-03T11:16:02Z", "closed_at": "2021-02-03T11:16:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/664)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Sep 20, 2018, 11:44\n\n## Summary\nBuild of current release of freedesktop-sdk is failing whe trygin to use bst master (commit 667dd4ca), It builds fine with bst-1.2\n\n## Relevant logs and/or screenshots\nhttps://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/99556677", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/664/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/664/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/663", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/663/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/663/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/663/events", "html_url": "https://github.com/apache/buildstream/issues/663", "id": 800226497, "node_id": "MDU6SXNzdWU4MDAyMjY0OTc=", "number": 663, "title": "Missing cache key in log messages (workspace open)", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T11:11:43Z", "updated_at": "2022-02-20T02:29:09Z", "closed_at": "2022-02-20T02:28:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/663)\nIn GitLab by [[Gitlab user @Qinusty]](https://gitlab.com/Qinusty) on Sep 20, 2018, 10:57\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nDuring `bst workspace open`, various messages do not contain the associated elements cache key.\n \n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nOpen a workspace, observe output.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nMessages are produced without any cache key\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nAll messages associated with the operation triggered for the element should contain its cache key.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\n[--:--:--][651aa7ef][ main:5G.bst                        ] START   Staging sources to /home/joshsmith/buildstream/doc/examples/CAS-interaction/wspdir\n[--:--:--][        ][ main:5G.bst-0                      ] STATUS  Running host command\n\n    /usr/bin/git show 72b5902157316e173de2eec5b3a2772283eec3c7:.gitmodules\n\n[--:--:--][        ][ main:5G.bst-0                      ] START   Setting up workspace \"/home/joshsmith/.cache/buildstream/build/workspace-5Gr52jkhma\"\n[00:00:00][        ][ main:5G.bst-0                      ] SUCCESS Setting up workspace \"/home/joshsmith/.cache/buildstream/build/workspace-5Gr52jkhma\"\n[00:00:00][651aa7ef][ main:5G.bst                        ] SUCCESS Staging sources to /home/joshsmith/buildstream/doc/examples/CAS-interaction/wspdir\n[--:--:--][][] INFO    Saved workspace configuration\n```\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: master [[Gitlab user @]](https://gitlab.com/) 7dd74b01de22d29bcd2abd76791822fd12236ec6\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/663/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/661", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/661/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/661/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/661/events", "html_url": "https://github.com/apache/buildstream/issues/661", "id": 800225190, "node_id": "MDU6SXNzdWU4MDAyMjUxOTA=", "number": 661, "title": "descend in _filebaseddirectory.py fails if \".\" etc is in the \"subdirectory_spec\" argument", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T11:10:00Z", "updated_at": "2022-02-20T02:38:35Z", "closed_at": "2022-02-20T02:38:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/661)\nIn GitLab by [[Gitlab user @willsalmon]](https://gitlab.com/willsalmon) on Sep 18, 2018, 17:23\n\n## Summary\n\ndescend in _filebaseddirectory.py fails if `.` etc is in the `subdirectory_spec` argument\n\n\n## Steps to reproduce\n\nThis gets called if your build fails, so you need to cause your build to fail and have a `.` in subdirectory_spec.\n\n## What is the current bug behavior?\n\nIt fails to traverse the `.` directory, and raises a error.\n\n## What is the expected correct behavior?\n\nThe result should be that as if the directory had been fully resolved by the system.\n\n## Possible fixes\n\nat the top of the function use the os.path functions to resolve the path and then split it back up and run the rest of the function on the resolved path. os.path should know how to deal with `.`, `..` etc\n\nThis bug was found while working on #512 \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/661/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/661/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/658", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/658/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/658/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/658/events", "html_url": "https://github.com/apache/buildstream/issues/658", "id": 800221180, "node_id": "MDU6SXNzdWU4MDAyMjExODA=", "number": 658, "title": "Conditionals not supported in element overrides", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T11:05:08Z", "updated_at": "2021-02-03T11:06:16Z", "closed_at": "2021-02-03T11:06:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/658)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Sep 17, 2018, 21:34\n\n## Summary\n\nTrying to use a conditional inside an element override, I get an error: Value of '(?)' is not of the expected type 'str'\n\n\n## Steps to reproduce\n\nHere is a small project.conf to reproduce\n\n```\nname: testcase\n\noptions:\n  arch:\n    type: arch\n    description: architecture\n    values: [i686, x86_64]\n\nelements:\n  autotools:\n    variables:\n      (?):\n      - arch == 'i686':\n          conf-global: --host=i686-unknown-linux-gnu\n      - arch == 'x86_64':\n          conf-global: --host=x86_64-unknown-linux-gnu\n```\n\n## What is the current bug behavior?\n\n```\nproject.conf [line 13 column 6]: Value of '(?)' is not of the expected type 'str'\n```\n\n## What is the expected correct behavior?\n\nIt should work\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.2\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/658/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/652", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/652/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/652/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/652/events", "html_url": "https://github.com/apache/buildstream/issues/652", "id": 800213704, "node_id": "MDU6SXNzdWU4MDAyMTM3MDQ=", "number": 652, "title": "Workspace builds do not correctly determine that they are not cached", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-02-03T10:56:16Z", "updated_at": "2021-02-03T10:58:31Z", "closed_at": "2021-02-03T10:58:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/652)\nIn GitLab by [[Gitlab user @willsalmon]](https://gitlab.com/willsalmon) on Sep 13, 2018, 12:03\n\n## Summary\n\nIf you delete the cache file eg. \n~/.cache/buildstream/artifacts/cas/refs/heads/outOfSourceBuilds2/hello/06237fbe18a8674f5e938129cc8a8eafafa951b48082e59543e5650466e5fd01\nfor a non workspace build then it will trigger a rebuild, (this is one of the few ways to trigger a rebuild of a cached build for testing.)\n\nHowever if the element has a workspace it is unable to detect the missing cache file and trys to open it resulting in a file not found error\n\nThis bug can also be triggered by trying to build a failing element (with a workspace) twice.\n\n\n## Steps to reproduce\nsteps:\n- Create a workspace for a element you can build\n- Build the element\n- Rebuild the element, nothing will build but it will show you the key it has found\n- Go to ~/.cache/buildstream/artifacts/cas/refs/heads/projectName/elementName\n- There should be a file that has the name of the cache key, delete it.\n- Go back to your project and rebuild the element\n- You should get a bug trace with:\n```\nself, self._get_brief_display_key())\n    AssertionError: autotools element at hello.bst [line 1 column 0]: Missing artifact ????????\n```\n\n\n## What is the current bug behaviour?\n\nbug message\n\n\n## What is the expected correct behaviour?\n\nrebuild triggered, like for non workspace builds.\n\n## Relevant logs and/or screenshots\n\n```\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 \u2026 \ue0b1 doc \ue0b1 examples \ue0b1 out-of-source-build-helloworld \n\ue0b0 willsalmon/simpleOutSource \ue0b0 3\u270e \ue0b0 9? \ue0b0 $ \ue0b0 bst build hello.bst\n[--:--:--][][] START   Build\n[--:--:--][][] START   Loading elements\n[00:00:00][][] SUCCESS Loading elements\n[--:--:--][][] START   Resolving elements\n[00:00:00][][] SUCCESS Resolving elements\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\n[--:--:--][][] BUG     autotools element at hello.bst [line 1 column 0]: Missing artifact ????????\n\n    Traceback (most recent call last):\n      File \"/home/will/.local/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 722, in __call__\n        return self.main(*args, **kwargs)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_frontend/cli.py\", line 162, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 697, in main\n        rv = self.invoke(ctx)\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 895, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 535, in invoke\n        return callback(*args, **kwargs)\n      File \"/home/will/.local/lib/python3.5/site-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_frontend/cli.py\", line 330, in build\n        build_all=all_)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_stream.py\", line 184, in build\n        dynamic_plan=True)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_stream.py\", line 933, in _load\n        selected = self._pipeline.get_selection(elements, selection, silent=False)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_pipeline.py\", line 209, in get_selection\n        elements = self.plan(targets)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_pipeline.py\", line 178, in plan\n        return _Planner().plan(elements, plan_cached)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_pipeline.py\", line 485, in plan\n        self.plan_element(root, 0)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_pipeline.py\", line 476, in plan_element\n        if not element._cached_success():\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 973, in _cached_success\n        return self.__cached_success(keystrength=None)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 2643, in __cached_success\n        success, _, _ = self.__get_build_result(keystrength=keystrength)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 2635, in __get_build_result\n        self.__load_build_result(keystrength)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 2615, in __load_build_result\n        self.__assert_cached(keystrength=keystrength)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 2092, in __assert_cached\n        self, self._get_brief_display_key())\n    AssertionError: autotools element at hello.bst [line 1 column 0]: Missing artifact ????????\n\n```\n\n## Possible fixes\n\nthe element seems to think it is cached, this then triggers the fetch.\nI don't know were the non workspace path differers but it looks like it is in the determining if cached state as the elements are reporting that they are cached, I have not checked that non workspace element know they are not cached at that point.\n\n## Other relevant information\n\nThis was discovered while working on #512 but fixing this is not required to close it.\n\n* BuildStream version affected: master (c6155f8d40b5fc4564ed66b4f9d2cc0ad7144b8f) /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/652/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/652/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/651", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/651/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/651/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/651/events", "html_url": "https://github.com/apache/buildstream/issues/651", "id": 800212391, "node_id": "MDU6SXNzdWU4MDAyMTIzOTE=", "number": 651, "title": "bst source-bundle fail's for the examples.", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-03T10:54:38Z", "updated_at": "2021-02-03T10:56:09Z", "closed_at": "2021-02-03T10:56:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/651)\nIn GitLab by [[Gitlab user @willsalmon]](https://gitlab.com/willsalmon) on Sep 13, 2018, 10:26\n\n## Summary\n\nBuildstream source-bundle fail's for the examples.\n\n## Steps to reproduce\n\nsteps:\n- cd buildstream/doc/examples/flatpak-autotools\n- bst build hello.bst\n- bst source-bundle hello.bst\n\n\n## What is the current bug behaviour?\n\nbst reports a bug and:\n`\nFileNotFoundError: [Errno 2] No such file or directory: '/home/will/.cache/buildstream/build/hello-y64su587/source/base-sdk'\n`\n\n## What is the expected correct behavior?\n\nCreates a folder/zip of the sources so you can build the element yourself. (I have not got this to work but I believe it should be a bit like a workspace but without the option to build in it.)\n\n## Relevant logs and/or screenshots\n\n```\n\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 \u2026 \ue0b1 doc \ue0b1 examples \ue0b1 flatpak-autotools $ bst source-bundle hello.bst\n[--:--:--][][] START   Loading elements\n[00:00:00][][] SUCCESS Loading elements\n[--:--:--][][] START   Resolving elements\n[00:00:00][][] SUCCESS Resolving elements\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\n[--:--:--][][] INFO    Bundling sources for target hello.bst\n[--:--:--][][] START   Checking sources\n[00:00:00][][] SUCCESS Checking sources\n[--:--:--][d34ccf53][ main:base/sdk.bst                  ] START   Writing build script\n[00:00:00][d34ccf53][ main:base/sdk.bst                  ] SUCCESS Writing build script\n[--:--:--][94d6556f][ main:base/usrmerge.bst             ] START   Writing build script\n[00:00:00][94d6556f][ main:base/usrmerge.bst             ] SUCCESS Writing build script\n[--:--:--][cf34223f][ main:hello.bst                     ] START   Writing build script\n[00:00:00][cf34223f][ main:hello.bst                     ] SUCCESS Writing build script\n[--:--:--][d34ccf53][ main:base/sdk.bst                  ] START   Staging sources\n[--:--:--][][] BUG     [Errno 2] No such file or directory: '/home/will/.cache/buildstream/build/hello-y64su587/source/base-sdk'\n\n    Traceback (most recent call last):\n      File \"/home/will/.local/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 722, in __call__\n        return self.main(*args, **kwargs)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_frontend/cli.py\", line 162, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 697, in main\n        rv = self.invoke(ctx)\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 895, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 535, in invoke\n        return callback(*args, **kwargs)\n      File \"/home/will/.local/lib/python3.5/site-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_frontend/cli.py\", line 831, in source_bundle\n        except_targets=except_)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_stream.py\", line 723, in source_bundle\n        self._write_element_sources(tempdir, elements)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_stream.py\", line 1092, in _write_element_sources\n        element._stage_sources_at(element_source_dir)\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 1374, in _stage_sources_at\n        if not vdirectory.is_empty():\n      File \"/home/will/projects/buildstream/buildstream/buildstream/storage/_filebaseddirectory.py\", line 179, in is_empty\n        self._populate_index()\n      File \"/home/will/projects/buildstream/buildstream/buildstream/storage/_filebaseddirectory.py\", line 61, in _populate_index\n        for entry in os.listdir(self.external_directory):\n    FileNotFoundError: [Errno 2] No such file or directory: '/home/will/.cache/buildstream/build/hello-y64su587/source/base-sdk'\n\n```\n\n## Possible fixes\n\n...\n\n## Other relevant information\n\nThis was discovered while working on #512 but fixing this is not required to close it.\n\n* BuildStream version affected: master (c6155f8d40b5fc4564ed66b4f9d2cc0ad7144b8f) /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/651/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/647", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/647/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/647/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/647/events", "html_url": "https://github.com/apache/buildstream/issues/647", "id": 800205413, "node_id": "MDU6SXNzdWU4MDAyMDU0MTM=", "number": 647, "title": "BuildStream misorders elements in subdirectories of symlinks when link_files called in compose elements", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 39, "created_at": "2021-02-03T10:45:33Z", "updated_at": "2021-02-03T10:51:47Z", "closed_at": "2021-02-03T10:51:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/647)\nIn GitLab by [[Gitlab user @coldtom]](https://gitlab.com/coldtom) on Sep 11, 2018, 19:04\n\n## Summary\n\nOccasionally in `compose` elements BuildStream will miss a subdirectory of a symlink when hardlinking files across. This is related to split rules (I think). This causes the build to fail, as it attempts to link a file into a non-existent directory.\n\nHere is the order which some files are passed to `safe_link` from `link_files`:\n\n```\nusr/etc                             # directory                                                                  \nusr/etc/OpenCL                      # symlink to /usr/lib/GL/OpenCL/                                                               \nusr/etc/OpenCL/vendors/mesa.icd     # file (technically in /usr/lib/GL/OpenCL\n...\n...\nusr/lib/GL/OpenCL\nusr/lib/GL/OpenCL/vendors\n```\n\nThis seems to be an issue in how sorting the files works.\n\n## Steps to reproduce\n\nThis behaviour happened in [these](https://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/95985150) [pipelines](https://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/93366644) in freedesktop-sdk.\n\nBeyond rerunning these pipelines I am unsure on how to reproduce.\n\n\n## Other relevant information\n\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.2\" \n\n* Issue on freedesktop-sdk potentially blocked by this: freedesktop-sdk/freedesktop-sdk#333\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/647/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/647/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/646", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/646/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/646/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/646/events", "html_url": "https://github.com/apache/buildstream/issues/646", "id": 800204706, "node_id": "MDU6SXNzdWU4MDAyMDQ3MDY=", "number": 646, "title": "BuildStream attempts to create very long filenames after finisihing a build", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T10:44:39Z", "updated_at": "2021-02-03T10:45:20Z", "closed_at": "2021-02-03T10:45:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/646)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Sep 11, 2018, 16:17\n\n## Summary\r\n\r\n[//]: # (Summarize the bug encountered concisely)\r\n\r\nWhen building specific projects, apparently only on debian, BuildStream fails consistently with \"File name too long\" when attempting to recursively symlink debug files.\r\n\r\nThe symlink will point to a file in `/lib/debug/tools/`, but the debug base path is repeated (i.e. `/lib/debug/tools/lib/debug/tools/lib/debug/tools/.../libcc1.so.0.0.0`.\r\n\r\n## Steps to reproduce\r\n\r\n[//]: # (How one can reproduce the issue - this is very important)\r\n\r\nNo steps yet, but has been reproduced by two users. Notable similarities were the use of debian (switching to ubuntu apparently solved the issue), building a stage1 gnu toolchain and the fact that both failed to create a symlink to the same debug files.\r\n\r\n## What is the current bug behavior?\r\n\r\n[//]: # (What actually happens)\r\n\r\nBuildStream fails to build because it seems to create a recursive file path.\r\n\r\n## What is the expected correct behavior?\r\n\r\n[//]: # (What you should see instead)\r\n\r\nBuildStream should not create a recursive file path, and pass the build.\r\n\r\n## Relevant logs and/or screenshots\r\n\r\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\r\n\r\n- Reproduced in GitLab CI: https://gitlab.com/trustable/distros/minimal-distro/-/jobs/93411861\r\n- A paste of a similar error: https://paste.gnome.org/pqfh04sb2#line-2\r\n\r\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.2\"\r\n\r\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/646/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/645", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/645/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/645/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/645/events", "html_url": "https://github.com/apache/buildstream/issues/645", "id": 800199115, "node_id": "MDU6SXNzdWU4MDAxOTkxMTU=", "number": 645, "title": "Default stripping rules cause seemingly random failures", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 47, "created_at": "2021-02-03T10:37:43Z", "updated_at": "2021-02-03T10:44:32Z", "closed_at": "2021-02-03T10:44:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/645)\nIn GitLab by [[Gitlab user @ben-brewer-ct]](https://gitlab.com/ben-brewer-ct) on Sep 11, 2018, 16:13\n\n## Summary\n\nGet a very weird issue that looks like a recursive variable, or symlink resolution issue.\n\n\n## Steps to reproduce\n\nInstall Debian from full (not net-inst) ISO. Follow BuildStream install instructions.\n\n\n## What is the current bug behavior?\n\nSee the log below. An element fails to build with a pathname that is too long due to just having a postfix repeatedly applied to it.\n\n\n## What is the expected correct behavior?\n\nThe correct behavior is what happened when I ran the same runner but with Ubuntu Server installed.\nThis is the log for that: https://gitlab.com/trustable/distros/minimal-distro/-/jobs/93726439\n\n\n## Relevant logs and/or screenshots\n\nhttps://gitlab.com/trustable/distros/minimal-distro/-/jobs/93411861\n\n## Possible fixes\n\nI have no idea what could cause this issue. My guess would be that there's an undocumented dependency and Buildstream is lacking an error message to report this.\n\n\n## Other relevant information\n\n* BuildStream version affected: /milestone %BuildStream_v1.7\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/645/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/645/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/642", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/642/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/642/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/642/events", "html_url": "https://github.com/apache/buildstream/issues/642", "id": 800196846, "node_id": "MDU6SXNzdWU4MDAxOTY4NDY=", "number": 642, "title": "Incorrect error when malformed project.conf is found", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T10:34:46Z", "updated_at": "2021-02-03T10:35:35Z", "closed_at": "2021-02-03T10:35:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/642)\nIn GitLab by [[Gitlab user @adds68]](https://gitlab.com/adds68) on Sep 11, 2018, 00:01\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\nIf a malformed project.conf is present, bst reports that it could not be found, rather than reporting the error found in the file.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nUsing the latest bst-1.2 branch, cause an error in the project.conf such as `\"%{variable`, such as a missing closing quotation.\n\nRun bst inside the project directory that contains the malformed file.\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nYou will see that it can not find the project.conf, even though it is present.\n\nHowever if you pass \"n\" to the prompt, which asks if you would like bst to create one, you will then see the correct error that is causing the project.conf to be malformed.\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nDisplay the known error with project.conf, instead of reporting that it could not be found.\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.2\" \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/642/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/642/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/641", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/641/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/641/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/641/events", "html_url": "https://github.com/apache/buildstream/issues/641", "id": 800196060, "node_id": "MDU6SXNzdWU4MDAxOTYwNjA=", "number": 641, "title": "Error out if `%{max-jobs}` is substituted in `Element.node_subst_member()`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T10:33:46Z", "updated_at": "2021-02-03T10:34:38Z", "closed_at": "2021-02-03T10:34:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/641)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 10, 2018, 20:00\n\n## Background\n\nMentioning `%{max-jobs}` directly in build commands causes the generated cache keys to be different depending on the host environment and any dynamic resolution of `max-jobs`, which is why it should always be used with an `environment-nocache` env var instead.\n\nHad to fix this recently in [gnome-build-meta](https://gitlab.gnome.org/GNOME/gnome-build-meta/merge_requests/77)\n\n## Task description\n\nMake sure that `Element.node_subst_member()` raises an informative error if it ends up substituting the special, protected `max-jobs` variable.\n\n* [ ] Add the new LoadError and LoadErrorReason\n* [ ] Raise the error in the correct condition\n* [ ] Add a test case asserting we fail in the way we expect, if `max-jobs` is specified in build commands", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/641/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/641/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/634", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/634/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/634/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/634/events", "html_url": "https://github.com/apache/buildstream/issues/634", "id": 800187544, "node_id": "MDU6SXNzdWU4MDAxODc1NDQ=", "number": 634, "title": "bug in build after failed build with workspace's", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-02-03T10:23:13Z", "updated_at": "2021-02-03T10:25:43Z", "closed_at": "2021-02-03T10:25:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/634)\nIn GitLab by [[Gitlab user @willsalmon]](https://gitlab.com/willsalmon) on Sep 7, 2018, 14:36\n\n## Summary\r\n\r\nbug in build after failed build with workspace's\r\n\r\n\r\n## Steps to reproduce\r\n\r\nAs follows:\r\n* set up a workspace for a element\r\n* build element\r\n* (element fails at configure stage)\r\n* try to build element again\r\n* bst craches with a missing artifact bug report\r\n\r\n\r\n## What is the current bug behavior?\r\n\r\nBst thinks there should be a cached artifact even though the last build failed\r\nBut only for workspaces.\r\n\r\n\r\n## What is the expected correct behavior?\r\n\r\nbst should try to rebuild\r\n\r\n\r\n## Relevant logs and/or screenshots\r\n\r\n```\r\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 \u2026 \ue0b1 doc \ue0b1 examples \ue0b1 out-of-source-builds3 \ue0b0 willsalmon/outOfSourecBuild \ue0b0 \u270e \ue0b0 3? \ue0b0 $ \ue0b0 bst workspace reset hello.bst\r\nThis will remove all your changes, are you sure? [y/N]: y\r\n[--:--:--][][] START   Loading elements\r\n[00:00:00][][] SUCCESS Loading elements\r\n[--:--:--][][] START   Resolving elements\r\n[00:00:00][][] SUCCESS Resolving elements\r\n[--:--:--][][] START   Resolving cached state\r\n[00:00:00][][] SUCCESS Resolving cached state\r\n[--:--:--][????????][ main:hello.bst                     ] START   Removing workspace directory /home/will/projects/buildstream/buildstream/doc/examples/out-of-source-builds3/hlws\r\n[00:00:00][????????][ main:hello.bst                     ] SUCCESS Removing workspace directory /home/will/projects/buildstream/buildstream/doc/examples/out-of-source-builds3/hlws\r\n[--:--:--][????????][ main:hello.bst                     ] START   Staging sources to /home/will/projects/buildstream/buildstream/doc/examples/out-of-source-builds3/hlws\r\n[--:--:--][        ][ main:hello.bst-0                   ] START   Staging local files at files/hello\r\n[00:00:00][        ][ main:hello.bst-0                   ] SUCCESS Staging local files at files/hello\r\n[00:00:00][????????][ main:hello.bst                     ] SUCCESS Staging sources to /home/will/projects/buildstream/buildstream/doc/examples/out-of-source-builds3/hlws\r\n[--:--:--][][] INFO    Reset workspace for hello.bst at: /home/will/projects/buildstream/buildstream/doc/examples/out-of-source-builds3/hlws\r\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 \u2026 \ue0b1 doc \ue0b1 examples \ue0b1 out-of-source-builds3 \ue0b0 willsalmon/outOfSourecBuild \ue0b0 \u270e \ue0b0 3? \ue0b0 $ \ue0b0 bst build hello.bst\r\n[--:--:--][][] START   Build\r\n[--:--:--][][] START   Loading elements\r\n[00:00:00][][] SUCCESS Loading elements\r\n[--:--:--][][] START   Resolving elements\r\n[00:00:00][][] SUCCESS Resolving elements\r\n[--:--:--][][] START   Resolving cached state\r\n[00:00:00][][] SUCCESS Resolving cached state\r\n[--:--:--][][] START   Checking sources\r\n[00:00:00][][] SUCCESS Checking sources\r\n\r\nBuildStream Version 1.3.0+428.gc878ebe9.dirty\r\n  Session Start: Friday, 07-09-2018 at 14:23:14\r\n  Project:       outOfSourceBuilds2 (/home/will/projects/buildstream/buildstream/doc/examples/out-of-source-builds3)\r\n  Targets:       hello.bst\r\n\r\nUser Configuration\r\n  Configuration File:      Default Configuration\r\n  Log Files:               /home/will/.cache/buildstream/logs\r\n  Source Mirrors:          /home/will/.cache/buildstream/sources\r\n  Build Area:              /home/will/.cache/buildstream/build\r\n  Artifact Cache:          /home/will/.cache/buildstream/artifacts\r\n  Strict Build Plan:       Yes\r\n  Maximum Fetch Tasks:     10\r\n  Maximum Build Tasks:     4\r\n  Maximum Push Tasks:      4\r\n  Maximum Network Retries: 2\r\n\r\nPipeline\r\n      cached 7279b9cc8a468bcc07336479b67b02b8c142b1cfd34d8922c05ff9917942eafc base/alpine.bst \r\n      cached 3f746703110816af8c43534f3e76dbe61dd5661a9bef0cb1960bff4f53881186 base.bst \r\n   buildable ???????????????????????????????????????????????????????????????? hello.bst Workspace: /home/will/projects/buildstream/buildstream/doc/examples/out-of-source-builds3/hlws\r\n===============================================================================\r\n[--:--:--][????????][build:hello.bst                     ] START   outOfSourceBuilds2/hello/????????-build.7750.log\r\n[--:--:--][????????][build:hello.bst                     ] START   Staging dependencies\r\n[00:00:01][????????][build:hello.bst                     ] SUCCESS Staging dependencies\r\n[--:--:--][????????][build:hello.bst                     ] START   Integrating sandbox\r\n[00:00:00][????????][build:hello.bst                     ] SUCCESS Integrating sandbox\r\n============================================================================= 00:00:01 outOfSourceBuilds2 (1/3) =============================================================================\r\n                                                                                (Fetched:0 1 0)\u2192 (Built:0 0 0)                                                                                \r\n                                                                                   ~~~~~ Active Tasks ~~~~~                                                                                   \r\n[00:00:01][Build:hello.bst]\r\n[--:--:--][????????][build:hello.bst                     ] START   Staging sources\r\n[00:00:00][????????][build:hello.bst                     ] SUCCESS Staging sources\r\n[--:--:--][????????][build:hello.bst                     ] START   Running configure-commands\r\n[--:--:--][????????][build:hello.bst                     ] STATUS  Running configure-commands\r\n\r\n    cmake -B_builddir -H\"/buildstream/outOfSourceBuilds2/hello.bst/././\" -G\"Unix Makefiles\" -DCMAKE_INSTALL_PREFIX:PATH=\"/usr\" \\\r\n    -DCMAKE_INSTALL_LIBDIR=lib\r\n\r\n============================================================================= 00:00:01 outOfSourceBuilds2 (1/3) =============================================================================\r\n[00:00:00][????????][build:hello.bst                     ] FAILURE Running configure-commands\r\n============================================================================= 00:00:02 outOfSourceBuilds2 (1/3) =============================================================================\r\n                                                                                (Fetched:0 1 0)\u2192 (Built:0 0 0)                                                                                \r\n                                                                                   ~~~~~ Active Tasks ~~~~~                                                                                   \r\n[00:00:01][Build:hello.bst]\r\nsubdirectory_spec ['outOfSourceBuilds2', 'hello.bst']\r\nsubdirectory_spec ['hello.bst']\r\nsubdirectory_spec []\r\nsubdirectory_spec ['buildstream-install']\r\nsubdirectory_spec []\r\n[--:--:--][????????][build:hello.bst                     ] START   Caching artifact\r\n[00:00:00][????????][build:hello.bst                     ] SUCCESS Caching artifact\r\n[00:00:01][????????][build:hello.bst                     ] FAILURE Command 'cmake -B_builddir -H\"/buildstream/outOfSourceBuilds2/hello.bst/././\" -G\"Unix Makefiles\" -DCMAKE_INSTALL_PREFIX:PATH=\"/usr\" \\\r\n-DCMAKE_INSTALL_LIBDIR=lib' failed with exitcode 1\r\n\r\n    Sandbox directory: /home/will/.cache/buildstream/build/hello-csohbp7s\r\n\r\n    Printing the last 20 lines from log file:\r\n    /home/will/.cache/buildstream/logs/outOfSourceBuilds2/hello/????????-build.7750.log\r\n    ======================================================================\r\n    [00:00:01] SUCCESS base/alpine.bst: Staging base/alpine.bst/7279b9cc\r\n    [--:--:--] START   base.bst: Staging base.bst/3f746703\r\n    [00:00:00] SUCCESS base.bst: Staging base.bst/3f746703\r\n    [00:00:01] SUCCESS hello.bst: Staging dependencies\r\n    [--:--:--] START   hello.bst: Integrating sandbox\r\n    [00:00:00] SUCCESS hello.bst: Integrating sandbox\r\n    [--:--:--] START   hello.bst: Staging sources\r\n    [00:00:00] SUCCESS hello.bst: Staging sources\r\n    [--:--:--] START   hello.bst: Running configure-commands\r\n    [--:--:--] STATUS  hello.bst: Running configure-commands\r\n\r\n        cmake -B_builddir -H\"/buildstream/outOfSourceBuilds2/hello.bst/././\" -G\"Unix Makefiles\" -DCMAKE_INSTALL_PREFIX:PATH=\"/usr\" \\\r\n        -DCMAKE_INSTALL_LIBDIR=lib\r\n    CMake Error: The source directory \"/buildstream/outOfSourceBuilds2/hello.bst\" does not appear to contain CMakeLists.txt.\r\n    Specify --help for usage, or press the help button on the CMake GUI.\r\n    [00:00:00] FAILURE hello.bst: Running configure-commands\r\n    [--:--:--] START   hello.bst: Caching artifact\r\n    [00:00:00] SUCCESS hello.bst: Caching artifact\r\n    [00:00:01] FAILURE hello.bst: Command 'cmake -B_builddir -H\"/buildstream/outOfSourceBuilds2/hello.bst/././\" -G\"Unix Makefiles\" -DCMAKE_INSTALL_PREFIX:PATH=\"/usr\" \\\r\n    -DCMAKE_INSTALL_LIBDIR=lib' failed with exitcode 1\r\n    ======================================================================\r\n\r\n\r\nBuild failure on element: hello.bst\r\n\r\nChoose one of the following options:\r\n  (c)ontinue  - Continue queueing jobs as much as possible\r\n  (q)uit      - Exit after all ongoing jobs complete\r\n  (t)erminate - Terminate any ongoing jobs and exit\r\n  (r)etry     - Retry this job\r\n  (l)og       - View the full log file\r\n  (s)hell     - Drop into a shell in the failed build sandbox\r\n\r\nPressing ^C will terminate jobs and exit\r\n\r\n\r\nChoice: [continue]: t\r\n\r\nTerminating all jobs\r\n\r\n[00:00:14][][] FAILURE Build\r\n\r\n\r\nFailure Summary\r\n  hello.bst:\r\n    [00:00:00][????????][build:hello.bst                     ] FAILURE Running configure-commands\r\n    [00:00:01][????????][build:hello.bst                     ] FAILURE Command 'cmake -B_builddir -H\"/buildstream/outOfSourceBuilds2/hello.bst/././\" -G\"Unix Makefiles\" -DCMAKE_INSTALL_PREFIX:PATH=\"/usr\" \\\r\n    -DCMAKE_INSTALL_LIBDIR=lib' failed with exitcode 1\r\n\r\n        Sandbox directory: /home/will/.cache/buildstream/build/hello-csohbp7s\r\n\r\n        Printing the last 20 lines from log file:\r\n        /home/will/.cache/buildstream/logs/outOfSourceBuilds2/hello/????????-build.7750.log\r\n        ======================================================================\r\n        [00:00:01] SUCCESS base/alpine.bst: Staging base/alpine.bst/7279b9cc\r\n        [--:--:--] START   base.bst: Staging base.bst/3f746703\r\n        [00:00:00] SUCCESS base.bst: Staging base.bst/3f746703\r\n        [00:00:01] SUCCESS hello.bst: Staging dependencies\r\n        [--:--:--] START   hello.bst: Integrating sandbox\r\n        [00:00:00] SUCCESS hello.bst: Integrating sandbox\r\n        [--:--:--] START   hello.bst: Staging sources\r\n        [00:00:00] SUCCESS hello.bst: Staging sources\r\n        [--:--:--] START   hello.bst: Running configure-commands\r\n        [--:--:--] STATUS  hello.bst: Running configure-commands\r\n\r\n            cmake -B_builddir -H\"/buildstream/outOfSourceBuilds2/hello.bst/././\" -G\"Unix Makefiles\" -DCMAKE_INSTALL_PREFIX:PATH=\"/usr\" \\\r\n            -DCMAKE_INSTALL_LIBDIR=lib\r\n        CMake Error: The source directory \"/buildstream/outOfSourceBuilds2/hello.bst\" does not appear to contain CMakeLists.txt.\r\n        Specify --help for usage, or press the help button on the CMake GUI.\r\n        [00:00:00] FAILURE hello.bst: Running configure-commands\r\n        [--:--:--] START   hello.bst: Caching artifact\r\n        [00:00:00] SUCCESS hello.bst: Caching artifact\r\n        [00:00:01] FAILURE hello.bst: Command 'cmake -B_builddir -H\"/buildstream/outOfSourceBuilds2/hello.bst/././\" -G\"Unix Makefiles\" -DCMAKE_INSTALL_PREFIX:PATH=\"/usr\" \\\r\n        -DCMAKE_INSTALL_LIBDIR=lib' failed with exitcode 1\r\n        ======================================================================\r\n\r\nPipeline Summary\r\n  Total:       3\r\n  Session:     1\r\n  Fetch Queue: processed 0, skipped 1, failed 0 \r\n  Build Queue: processed 0, skipped 0, failed 1 \r\n\r\n\r\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 \u2026 \ue0b1 doc \ue0b1 examples \ue0b1 out-of-source-builds3 \ue0b0 willsalmon/outOfSourecBuild \ue0b0 \u270e \ue0b0 3? \ue0b0 $ \ue0b0 ls\r\nelements  files  hlws  project.conf\r\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 \u2026 \ue0b1 doc \ue0b1 examples \ue0b1 out-of-source-builds3 \ue0b0 willsalmon/outOfSourecBuild \ue0b0 \u270e \ue0b0 3? \ue0b0 $ \ue0b0 ls hlws/\r\nbuild  Source\r\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 \u2026 \ue0b1 doc \ue0b1 examples \ue0b1 out-of-source-builds3 \ue0b0 willsalmon/outOfSourecBuild \ue0b0 \u270e \ue0b0 3? \ue0b0 $ \ue0b0 ls hlws/Source/\r\nCMakeLists.txt  main.c\r\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 \u2026 \ue0b1 doc \ue0b1 examples \ue0b1 out-of-source-builds3 \ue0b0 willsalmon/outOfSourecBuild \ue0b0 \u270e \ue0b0 3? \ue0b0 $ \ue0b0 ls hlws/build/\r\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 \u2026 \ue0b1 doc \ue0b1 examples \ue0b1 out-of-source-builds3 \ue0b0 willsalmon/outOfSourecBuild \ue0b0 \u270e \ue0b0 3? \ue0b0 $ \ue0b0 bst build hello.bst\r\n[--:--:--][][] START   Build\r\n[--:--:--][][] START   Loading elements\r\n[00:00:00][][] SUCCESS Loading elements\r\n[--:--:--][][] START   Resolving elements\r\n[00:00:00][][] SUCCESS Resolving elements\r\n[--:--:--][][] START   Resolving cached state\r\n[00:00:00][][] SUCCESS Resolving cached state\r\n[--:--:--][][] BUG     cmake element at hello.bst [line 1 column 0]: Missing artifact ????????\r\n\r\n    Traceback (most recent call last):\r\n      File \"/home/will/.local/bin/bst\", line 8, in <module>\r\n        sys.exit(cli())\r\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 722, in __call__\r\n        return self.main(*args, **kwargs)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_frontend/cli.py\", line 162, in override_main\r\n        standalone_mode=standalone_mode, **extra)\r\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 697, in main\r\n        rv = self.invoke(ctx)\r\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke\r\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 895, in invoke\r\n        return ctx.invoke(self.callback, **ctx.params)\r\n      File \"/home/will/.local/lib/python3.5/site-packages/click/core.py\", line 535, in invoke\r\n        return callback(*args, **kwargs)\r\n      File \"/home/will/.local/lib/python3.5/site-packages/click/decorators.py\", line 27, in new_func\r\n        return f(get_current_context().obj, *args, **kwargs)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_frontend/cli.py\", line 330, in build\r\n        build_all=all_)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_stream.py\", line 184, in build\r\n        dynamic_plan=True)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_stream.py\", line 933, in _load\r\n        selected = self._pipeline.get_selection(elements, selection, silent=False)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_pipeline.py\", line 209, in get_selection\r\n        elements = self.plan(targets)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_pipeline.py\", line 178, in plan\r\n        return _Planner().plan(elements, plan_cached)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_pipeline.py\", line 485, in plan\r\n        self.plan_element(root, 0)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/_pipeline.py\", line 476, in plan_element\r\n        if not element._cached_success():\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 967, in _cached_success\r\n        return self.__cached_success(keystrength=None)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 2626, in __cached_success\r\n        success, _, _ = self.__get_build_result(keystrength=keystrength)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 2618, in __get_build_result\r\n        self.__load_build_result(keystrength)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 2598, in __load_build_result\r\n        self.__assert_cached(keystrength=keystrength)\r\n      File \"/home/will/projects/buildstream/buildstream/buildstream/element.py\", line 2108, in __assert_cached\r\n        self, self._get_brief_display_key())\r\n    AssertionError: cmake element at hello.bst [line 1 column 0]: Missing artifact ????????\r\n\r\n will \ue0b0 CT-will-S-Deb \ue0b0 ~ \ue0b0 projects \ue0b1 \u2026 \ue0b1 doc \ue0b1 examples \ue0b1 out-of-source-builds3 \ue0b0 willsalmon/outOfSourecBuild \ue0b0 \u270e \ue0b0 3? \ue0b0 $ \ue0b0 \r\n\r\n```\r\n## Possible fixes\r\n\r\nIt only happens when there is a workspace so the fix is probs already in the non workspace code.\r\n\r\n## Other relevant information\r\n\r\nNormally this would not happen becasue you would change something between trying to build but if you are hacking on bst then this is a use case, ehter way it should not crash like this\r\n\r\nCurrent master: 7b32e1ec903d658dfa75c754b0dd45a3e9331638\r\n\r\nI am actually in a branch but i think i have seen this before but not under stood.\r\n\r\n* BuildStream version affected: /milestone %BuildStream_v1.x\r\n\r\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/634/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/625", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/625/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/625/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/625/events", "html_url": "https://github.com/apache/buildstream/issues/625", "id": 800161473, "node_id": "MDU6SXNzdWU4MDAxNjE0NzM=", "number": 625, "title": "BUG without stack trace when public keys are not specified for an artifact cache using a self-signed certificate", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T09:51:40Z", "updated_at": "2021-02-03T09:53:26Z", "closed_at": "2021-02-03T09:53:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/625)\nIn GitLab by [[Gitlab user @ben-brewer-ct]](https://gitlab.com/ben-brewer-ct) on Sep 4, 2018, 15:21\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\n\n## Steps to reproduce\n\nThis issue can be reproduced by configuring an artifact cache without providing the server-cert and client-cert fields.\n\n```\nartifacts:\n  url: https://cache.trustable.io:11002\n  client-key: certificates/client.key\n  push: true\n```\n\n## What is the current bug behavior?\n\nA bug is printed without any stack trace. The bug is not particularly meaningful.\n\n```\n[--:--:--][][] BUG     expected bytes, NoneType found\n\n    TypeError: expected bytes, NoneType found\n```\n\nSee full log below.\n\n\n## What is the expected correct behavior?\n\nIt is expected that a readable error would be produced.\nAccording to #buildstream it's also expected that a stack trace would be produced.\n\n\n## Relevant logs and/or screenshots\n\nhttps://gitlab.com/trustable/distros/minimal-distro/-/jobs/94525056\n\n## Possible fixes\n\nThis isn't really a possible fix, but it'd be good if the documentation could be updated to emphasize the importance of providing public keys for self-signed certificates.\n\n## Other relevant information\n\n* BuildStream version affected: /milestone %BuildStream_v1.1.7\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/625/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/625/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/623", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/623/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/623/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/623/events", "html_url": "https://github.com/apache/buildstream/issues/623", "id": 800156212, "node_id": "MDU6SXNzdWU4MDAxNTYyMTI=", "number": 623, "title": "Stack trace when running out of disk space", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 37, "created_at": "2021-02-03T09:45:19Z", "updated_at": "2021-02-03T09:51:07Z", "closed_at": "2021-02-03T09:51:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/623)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 3, 2018, 08:13\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen running a build of GNOME using BuildStream master, instead of automatically cleaning up the artifact cache as expected, I received unhandled exceptions due to no remaining space left on my disk.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nRun a build of gnome-build-meta without enough remaining disk space to cache the new artifacts.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nStack trace\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nEither the artifact cache makes room for the new incoming artifacts by automatically cleaning it up, or I get an elegant failure message telling me that all the artifacts needed for my build don't fit on the disk.\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\n\n\n========================================================================================= 02:07:16 gnome (470/471) =========================================================================================\n                                                                 (Tracked:77 166 0)\u2192 (Pulled:0 470 0)\u2192 (Fetched:138 332 0)\u2192 (Built:107 0 0)                                                                 \n                                                                                          ~~~~~ Active Tasks ~~~~~                                                                                          \n[00:13:00][Build:freedesktop-sdk.bst:base/cmake.bst  ] [00:08:08][Build:freedesktop-sdk.bst:base/nss.bst] [00:06:29][Build:freedesktop-sdk.bst:base/gettext.bst]\n[00:03:08][Build:freedesktop-sdk.bst:base/locales.bst] \nProcess Process-1415:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/cascache.py\", line 421, in add_object\n    out.write(chunk)\n  File \"/usr/lib/python3.5/tempfile.py\", line 622, in func_wrapper\n    return func(*args, **kwargs)\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/cascache.py\", line 434, in add_object\n    os.link(out.name, objpath)\n  File \"/usr/lib/python3.5/tempfile.py\", line 640, in __exit__\n    result = self.file.__exit__(exc, value, tb)\nOSError: [Errno 28] No space left on device\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 407, in timed_activity\n    yield\n  File \"/codethink/GNOME/buildstream/buildstream/plugin.py\", line 556, in timed_activity\n    yield\n  File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1650, in _assemble\n    self.__artifacts.commit(self, assembledir, self.__get_cache_keys_for_commit())\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/cascache.py\", line 118, in commit\n    tree = self._create_tree(content)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/cascache.py\", line 640, in _create_tree\n    self._create_tree(full_path, digest=dirnode.digest)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/cascache.py\", line 640, in _create_tree\n    self._create_tree(full_path, digest=dirnode.digest)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/cascache.py\", line 640, in _create_tree\n    self._create_tree(full_path, digest=dirnode.digest)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/cascache.py\", line 640, in _create_tree\n    self._create_tree(full_path, digest=dirnode.digest)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/cascache.py\", line 640, in _create_tree\n    self._create_tree(full_path, digest=dirnode.digest)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/cascache.py\", line 644, in _create_tree\n    self.add_object(path=full_path, digest=filenode.digest)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/cascache.py\", line 441, in add_object\n    raise ArtifactError(\"Failed to hash object: {}\".format(e)) from e\nbuildstream._exceptions.ArtifactError: Failed to hash object: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 398, in _child_action\n    result = self.child_process()\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n    return self._action_cb(self._element)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/queues/buildqueue.py\", line 70, in process\n    element._assemble()\n  File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1650, in _assemble\n    self.__artifacts.commit(self, assembledir, self.__get_cache_keys_for_commit())\n  File \"/usr/lib/python3.5/contextlib.py\", line 77, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/codethink/GNOME/buildstream/buildstream/plugin.py\", line 556, in timed_activity\n    yield\n  File \"/usr/lib/python3.5/contextlib.py\", line 77, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 415, in timed_activity\n    self.message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 477, in recorded_messages\n    yield self._log_filename\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 432, in _child_action\n    logfile=filename)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 106, in message\n    **args))\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 448, in _child_action\n    self._child_shutdown(RC_OK)\n\n\n\nBUG: Message handling out of sync, unable to retrieve failure message for element autotools element at base/cmake.bst [line 1 column 0]\n\n\n\n\n\n========================================================================================= 02:07:17 gnome (470/471) =========================================================================================\n                                                                 (Tracked:77 166 0)\u2192 (Pulled:0 470 0)\u2192 (Fetched:138 332 0)\u2192 (Built:107 0 1)                                                                 \n                                                                                          ~~~~~ Active Tasks ~~~~~                                                                                          \n[00:08:09][Build:freedesktop-sdk.bst:base/nss.bst  ] [00:06:29][Build:freedesktop-sdk.bst:base/gettext.bst] [00:03:08][Build:freedesktop-sdk.bst:base/locales.bst]\n[00:00:00][Build:freedesktop-sdk.bst:base/gnupg.bst] \nProcess Process-1437:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 477, in recorded_messages\n    yield self._log_filename\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 394, in _child_action\n    self.message(MessageType.START, self.action_name, logfile=filename)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 106, in message\n    **args))\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 448, in _child_action\n    self._child_shutdown(RC_OK)\n\n\n\nBUG: Message handling out of sync, unable to retrieve failure message for element autotools element at base/gnupg.bst [line 1 column 0]\n\n\n\n\n\n========================================================================================= 02:07:17 gnome (470/471) =========================================================================================\n                                                                 (Tracked:77 166 0)\u2192 (Pulled:0 470 0)\u2192 (Fetched:138 332 0)\u2192 (Built:107 0 2)                                                                 \n                                                                                          ~~~~~ Active Tasks ~~~~~                                                                                          \n[00:08:09][Build:freedesktop-sdk.bst:base/nss.bst     ] [00:06:29][Build:freedesktop-sdk.bst:base/gettext.bst] [00:03:08][Build:freedesktop-sdk.bst:base/locales.bst]\n[00:00:00][Build:freedesktop-sdk.bst:base/automake.bst] \nProcess Process-1438:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 477, in recorded_messages\n    yield self._log_filename\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 394, in _child_action\n    self.message(MessageType.START, self.action_name, logfile=filename)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 106, in message\n    **args))\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 448, in _child_action\n    self._child_shutdown(RC_OK)\n\n\n\nBUG: Message handling out of sync, unable to retrieve failure message for element autotools element at base/automake.bst [line 1 column 0]\n\n\n\n\n\n========================================================================================= 02:07:17 gnome (470/471) =========================================================================================\n                                                                 (Tracked:77 166 0)\u2192 (Pulled:0 470 0)\u2192 (Fetched:138 332 0)\u2192 (Built:107 0 3)                                                                 \n                                                                                          ~~~~~ Active Tasks ~~~~~                                                                                          \n[00:08:09][Build:freedesktop-sdk.bst:base/nss.bst  ] [00:06:30][Build:freedesktop-sdk.bst:base/gettext.bst] [00:03:08][Build:freedesktop-sdk.bst:base/locales.bst]\n[00:00:00][Build:freedesktop-sdk.bst:base/groff.bst] \nProcess Process-1439:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 477, in recorded_messages\n    yield self._log_filename\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 394, in _child_action\n    self.message(MessageType.START, self.action_name, logfile=filename)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 106, in message\n    **args))\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 448, in _child_action\n    self._child_shutdown(RC_OK)\n\n\n\nBUG: Message handling out of sync, unable to retrieve failure message for element autotools element at base/groff.bst [line 1 column 0]\n\n\n\n\n\n========================================================================================= 02:07:17 gnome (470/471) =========================================================================================\n                                                                 (Tracked:77 166 0)\u2192 (Pulled:0 470 0)\u2192 (Fetched:138 332 0)\u2192 (Built:107 0 4)                                                                 \n                                                                                          ~~~~~ Active Tasks ~~~~~                                                                                          \n[00:08:09][Build:freedesktop-sdk.bst:base/nss.bst  ] [00:06:30][Build:freedesktop-sdk.bst:base/gettext.bst] [00:03:08][Build:freedesktop-sdk.bst:base/locales.bst]\n[00:00:00][Build:freedesktop-sdk.bst:base/bison.bst] \nProcess Process-1440:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 477, in recorded_messages\n    yield self._log_filename\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 394, in _child_action\n    self.message(MessageType.START, self.action_name, logfile=filename)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 106, in message\n    **args))\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 448, in _child_action\n    self._child_shutdown(RC_OK)\n\n\n\nBUG: Message handling out of sync, unable to retrieve failure message for element autotools element at base/bison.bst [line 1 column 0]\n\n\n\n\n\n========================================================================================= 02:07:17 gnome (470/471) =========================================================================================\n                                                                 (Tracked:77 166 0)\u2192 (Pulled:0 470 0)\u2192 (Fetched:138 332 0)\u2192 (Built:107 0 5)                                                                 \n                                                                                          ~~~~~ Active Tasks ~~~~~                                                                                          \n[00:08:09][Build:freedesktop-sdk.bst:base/nss.bst] [00:06:30][Build:freedesktop-sdk.bst:base/gettext.bst] [00:03:08][Build:freedesktop-sdk.bst:base/locales.bst]\n[00:00:00][Build:freedesktop-sdk.bst:base/ed.bst ] \nProcess Process-1441:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 477, in recorded_messages\n    yield self._log_filename\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 394, in _child_action\n    self.message(MessageType.START, self.action_name, logfile=filename)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 106, in message\n    **args))\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 448, in _child_action\n    self._child_shutdown(RC_OK)\n\n\n\nBUG: Message handling out of sync, unable to retrieve failure message for element autotools element at base/ed.bst [line 1 column 0]\n\n\n\n\n\n========================================================================================= 02:07:17 gnome (470/471) =========================================================================================\n                                                                 (Tracked:77 166 0)\u2192 (Pulled:0 470 0)\u2192 (Fetched:138 332 0)\u2192 (Built:107 0 6)                                                                 \n                                                                                          ~~~~~ Active Tasks ~~~~~                                                                                          \n[00:08:09][Build:freedesktop-sdk.bst:base/nss.bst] [00:06:30][Build:freedesktop-sdk.bst:base/gettext.bst] [00:03:09][Build:freedesktop-sdk.bst:base/locales.bst]\n[00:00:00][Build:freedesktop-sdk.bst:base/gdb.bst] \nProcess Process-1442:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 477, in recorded_messages\n    yield self._log_filename\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 394, in _child_action\n    self.message(MessageType.START, self.action_name, logfile=filename)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 106, in message\n    **args))\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 448, in _child_action\n    self._child_shutdown(RC_OK)\n\n\n\nBUG: Message handling out of sync, unable to retrieve failure message for element autotools element at base/gdb.bst [line 1 column 0]\n\n\n\n\n\n========================================================================================= 02:07:17 gnome (470/471) =========================================================================================\n                                                                 (Tracked:77 166 0)\u2192 (Pulled:0 470 0)\u2192 (Fetched:138 332 0)\u2192 (Built:107 0 7)                                                                 \n                                                                                          ~~~~~ Active Tasks ~~~~~                                                                                          \n[00:08:09][Build:freedesktop-sdk.bst:base/nss.bst     ] [00:06:30][Build:freedesktop-sdk.bst:base/gettext.bst] [00:03:09][Build:freedesktop-sdk.bst:base/locales.bst]\n[00:00:00][Build:freedesktop-sdk.bst:base/intltool.bst] \nProcess Process-1443:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 477, in recorded_messages\n    yield self._log_filename\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 394, in _child_action\n    self.message(MessageType.START, self.action_name, logfile=filename)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 106, in message\n    **args))\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 448, in _child_action\n    self._child_shutdown(RC_OK)\n\n\n\nBUG: Message handling out of sync, unable to retrieve failure message for element autotools element at base/intltool.bst [line 1 column 0]\n\n\n\n\n\n========================================================================================= 02:07:18 gnome (470/471) =========================================================================================\n                                                                 (Tracked:77 166 0)\u2192 (Pulled:0 470 0)\u2192 (Fetched:138 332 0)\u2192 (Built:107 0 8)                                                                 \n                                                                                          ~~~~~ Active Tasks ~~~~~                                                                                          \n[00:08:10][Build:freedesktop-sdk.bst:base/nss.bst   ] [00:06:30][Build:freedesktop-sdk.bst:base/gettext.bst] [00:03:09][Build:freedesktop-sdk.bst:base/locales.bst]\n[00:00:00][Build:freedesktop-sdk.bst:base/nettle.bst] \nProcess Process-1444:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 477, in recorded_messages\n    yield self._log_filename\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 394, in _child_action\n    self.message(MessageType.START, self.action_name, logfile=filename)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 106, in message\n    **args))\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 448, in _child_action\n    self._child_shutdown(RC_OK)\n\n\n\nBUG: Message handling out of sync, unable to retrieve failure message for element autotools element at base/nettle.bst [line 1 column 0]\n\n\n\n\n\nProcess Process-1434:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 407, in timed_activity\n    yield\n  File \"/codethink/GNOME/buildstream/buildstream/plugin.py\", line 556, in timed_activity\n    yield\n  File \"/codethink/GNOME/buildstream/buildstream/buildelement.py\", line 186, in assemble\n    self.__run_command(sandbox, cmd, command_name)\n  File \"/codethink/GNOME/buildstream/buildstream/buildelement.py\", line 245, in __run_command\n    collect=self.get_variable('install-root'))\nbuildstream.element.ElementError: Command 'if [ -n \"bst_build_dir\" ]; then\n  cd bst_build_dir\nfi\nmake -j1 DESTDIR=\"/buildstream-install\" install' failed with exitcode 2\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1540, in _assemble\n    collect = self.assemble(sandbox)\n  File \"/codethink/GNOME/buildstream/buildstream/buildelement.py\", line 186, in assemble\n    self.__run_command(sandbox, cmd, command_name)\n  File \"/usr/lib/python3.5/contextlib.py\", line 77, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/codethink/GNOME/buildstream/buildstream/plugin.py\", line 556, in timed_activity\n    yield\n  File \"/usr/lib/python3.5/contextlib.py\", line 77, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 415, in timed_activity\n    self.message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 398, in _child_action\n    result = self.child_process()\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n    return self._action_cb(self._element)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/queues/buildqueue.py\", line 70, in process\n    element._assemble()\n  File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1584, in _assemble\n    os.mkdir(assembledir)\nOSError: [Errno 28] No space left on device: '/home/tristan/.cache/buildstream/build/base-gettext-8l4uct30/artifact'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 477, in recorded_messages\n    yield self._log_filename\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 432, in _child_action\n    logfile=filename)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 106, in message\n    **args))\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 350, in message\n    self._record_message(message)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 552, in _record_message\n    self._log_handle.flush()\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nOSError: [Errno 28] No space left on device\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/jobs/job.py\", line 448, in _child_action\n    self._child_shutdown(RC_OK)\n  File \"/usr/lib/python3.5/contextlib.py\", line 77, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/codethink/GNOME/buildstream/buildstream/_context.py\", line 480, in recorded_messages\n    self._log_filename = None\nOSError: [Errno 28] No space left on device\n\n\n\nBUG: Message handling out of sync, unable to retrieve failure message for element autotools element at base/gettext.bst [line 1 column 0]\n```\n\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\nThe content of my `buildstream.conf` file:\n\n```yaml\n\ncache:\n  quota: 20G\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/623/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/622", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/622/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/622/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/622/events", "html_url": "https://github.com/apache/buildstream/issues/622", "id": 800155212, "node_id": "MDU6SXNzdWU4MDAxNTUyMTI=", "number": 622, "title": "Uninformative failure to launch a build shell if the sources are not fetched locally", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T09:43:59Z", "updated_at": "2022-02-20T02:46:47Z", "closed_at": "2022-02-20T02:46:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/622)\nIn GitLab by [[Gitlab user @bochecha]](https://gitlab.com/bochecha) on Sep 2, 2018, 10:48\n\n## Summary\n\nI'm trying to open a build shell on an element which was pulled from the artifacts cache, not built.\n\nThat fails because I don't have the tarball.\n\n## Steps to reproduce\n\n0.  (optional: this helps making this 100% reproducible from scratch) completely clean your Buildstream cache:\n\n    ```\n    $ rm -rf ~/.cache/buildstream\n    ```\n\n1. let's do this with the freedesktop-sdk:\n\n    ```\n    $ git clone https://gitlab.com/freedesktop-sdk/freedesktop-sdk.git\n    $ cd freedesktop-sdk\n    $ git checkout 18.08\n    ```\n\n2. pull the libdrm build artifacts:\n\n    ```\n    $ bst build base/pkg-config.bst desktop/libdrm.bst\n    ```\n\n3. try opening a build shell:\n\n    ```\n    $ bst shell --build desktop/libdrm.bst\n    ```\n\n## What is the current bug behavior?\n\n```\n$ bst shell --build desktop/libdrm.bst\n[\u2026 snip \u2026]\n[00:00:00][13b665a5][ main:desktop/libdrm.bst            ] FAILURE Staging sources\n\nError launching shell: tar source at desktop/libdrm.bst [line 26 column 4]: Error staging source: [Errno 2] No such file or directory: '/home/mathieu/.cache/buildstream/sources/tar/https___dri_freedesktop_org_libdrm_libdrm_2_4_92_tar_bz2/e9e48fdb4de139dc4d9880aa1473158a16ff6aff63d14341367bd30a51ff39fa'\n```\n\n\n## What is the expected correct behavior?\n\nA working build shell.\n\n\n## Possible fixes\n\nI guess Buildstream could download the sources itself, since that's necessary to open a build shell?\n\nHowever the Buildstream UX is usually to require the user to explicitly take actions. The problem is that in this specific case, nothing seems to tell Buildstream to download the sources\u2026\n\n## Other relevant information\n\n\u2026 for example, I tried the following:\n\n```\n$ bst fetch desktop/libdrm.bst\n```\n\nBut that did nothing, because Buildstream found that `desktop/libdrm.bst` was already built and cached.\n\n* BuildStream version affected: 1.1.7\n\n----\n\nUpdate: What happened here is that BuildStream tried to stage sources which were not previously fetched when trying to open a build shell with `bst shell --build`, and gave a confusing error message.\n\n[[Gitlab user @bochecha]](https://gitlab.com/bochecha) tried running `bst fetch --deps all desktop/libdrm.bst`, but `bst fetch --deps none desktop/libdrm.bst` should have been sufficient.\n\nWe have some precedent for suggesting exactly what command invocation should be issued in some cases, like when trying to build with unfetched junctions, we should issue such a message in this case.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/622/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/622/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/621", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/621/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/621/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/621/events", "html_url": "https://github.com/apache/buildstream/issues/621", "id": 800154654, "node_id": "MDU6SXNzdWU4MDAxNTQ2NTQ=", "number": 621, "title": "Unhandled exception when terminating failed build", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T09:43:15Z", "updated_at": "2021-02-03T09:43:52Z", "closed_at": "2021-02-03T09:43:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/621)\nIn GitLab by [[Gitlab user @adds68]](https://gitlab.com/adds68) on Aug 30, 2018, 17:35\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\nWhen terminating after a failed build i received an unhandled exception\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\nThis happened after viewing the logs for a few minutes, then exiting the logs and trying to terminate the build.\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\nStack trace is produced on termination of a job\n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nNo stack trace just terminate the job\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n```\nChoice: [continue]: t\n\nTerminating all jobs\n\n[--:--:--][7cbdafe1][ main:base/libflac.bst              ] STATUS  Fetch terminating\n[--:--:--][62825e9e][ main:desktop/xorg-lib-pciaccess.bst] STATUS  Build terminating\n[--:--:--][5980a1fe][ main:base/m4.bst                   ] STATUS  Build terminating\n[--:--:--][7a4e867d][ main:base/util-linux.bst           ] STATUS  Build terminating\n[--:--:--][18dd4527][ main:desktop/xorg-lib-xtrans.bst   ] STATUS  Build terminating\nTraceback (most recent call last):\n  File \"/usr/lib/python3.7/site-packages/psutil/_pslinux.py\", line 1459, in wrapper\n    return fun(self, *args, **kwargs)\n  File \"/usr/lib/python3.7/site-packages/psutil/_pslinux.py\", line 1641, in create_time\n    values = self._parse_stat_file()\n  File \"/usr/lib/python3.7/site-packages/psutil/_common.py\", line 340, in wrapper\n    return fun(self)\n  File \"/usr/lib/python3.7/site-packages/psutil/_pslinux.py\", line 1498, in _parse_stat_file\n    with open_binary(\"%s/%s/stat\" % (self._procfs_path, self.pid)) as f:\n  File \"/usr/lib/python3.7/site-packages/psutil/_pslinux.py\", line 205, in open_binary\n    return open(fname, \"rb\", **kwargs)\nFileNotFoundError: [Errno 2] No such file or directory: '/proc/30508/stat'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.7/site-packages/psutil/__init__.py\", line 366, in _init\n    self.create_time()\n  File \"/usr/lib/python3.7/site-packages/psutil/__init__.py\", line 697, in create_time\n    self._create_time = self._proc.create_time()\n  File \"/usr/lib/python3.7/site-packages/psutil/_pslinux.py\", line 1470, in wrapper\n    raise NoSuchProcess(self.pid, self._name)\npsutil._exceptions.NoSuchProcess: psutil.NoSuchProcess process no longer exists (pid=30508)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_signals.py\", line 40, in terminator_handler\n    terminator_()\n  File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/sandbox/_sandboxbwrap.py\", line 289, in terminate_bwrap\n    user_proc = get_user_proc(process.pid)\n  File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/sandbox/_sandboxbwrap.py\", line 276, in get_user_proc\n    bwrap_proc = psutil.Process(bwrap_pid)\n  File \"/usr/lib/python3.7/site-packages/psutil/__init__.py\", line 339, in __init__\n    self._init(pid)\n  File \"/usr/lib/python3.7/site-packages/psutil/__init__.py\", line 379, in _init\n    raise NoSuchProcess(pid, None, msg)\npsutil._exceptions.NoSuchProcess: psutil.NoSuchProcess no process found with pid 30508\nError encountered in BuildStream while processing custom SIGTERM handler: <function SandboxBwrap.run_bwrap.<locals>.terminate_bwrap at 0x7f77952c19d8>\nTraceback (most recent call last):\n  File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_signals.py\", line 40, in terminator_handler\n    terminator_()\n  File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/sandbox/_sandboxbwrap.py\", line 288, in terminate_bwrap\n    if process:\nNameError: free variable 'process' referenced before assignment in enclosing scope\nError encountered in BuildStream while processing custom SIGTERM handler: <function SandboxBwrap.run_bwrap.<locals>.terminate_bwrap at 0x7f77951f7a60>\nUnknown child process pid 29920, will report returncode 255\nUnknown child process pid 30441, will report returncode 255\nUnknown child process pid 30442, will report returncode 255\nUnknown child process pid 30443, will report returncode 255\nUnknown child process pid 31379, will report returncode 255\n\nUser interrupted with ^C\n```\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.1.7\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/621/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/619", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/619/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/619/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/619/events", "html_url": "https://github.com/apache/buildstream/issues/619", "id": 800151976, "node_id": "MDU6SXNzdWU4MDAxNTE5NzY=", "number": 619, "title": "Fail messages without logfile set cause traceback", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T09:39:44Z", "updated_at": "2021-02-03T09:41:14Z", "closed_at": "2021-02-03T09:41:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/619)\nIn GitLab by [[Gitlab user @Qinusty]](https://gitlab.com/Qinusty) on Aug 30, 2018, 11:56\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\n[widget.py:L694](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_frontend/widget.py#L694) assumes that all `FAIL` messages coming from jobs (`message.scheduler=True`) have logfile set.\n\nThis is not asserted anywhere... This should be checked in the message API. \n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nProduce a fail message from within a job without setting `logfile=` in the constructor\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nTraceback when buildstream attempts to get the last 20 lines in the log.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nYou should get an Assertion error from the message API.\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n* BuildStream version affected: master\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/619/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/619/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/618", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/618/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/618/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/618/events", "html_url": "https://github.com/apache/buildstream/issues/618", "id": 800149885, "node_id": "MDU6SXNzdWU4MDAxNDk4ODU=", "number": 618, "title": "BuildStream pulls from remote cache, even when configuration removed", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-02-03T09:37:02Z", "updated_at": "2021-02-03T09:39:37Z", "closed_at": "2021-02-03T09:39:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/618)\nIn GitLab by [[Gitlab user @coldtom]](https://gitlab.com/coldtom) on Aug 30, 2018, 11:18\n\n## Summary\r\n\r\nTrying to test freedesktop-sdk for build reproducibility, I noticed that buildstream was pulling from a remote cache I no longer had configured in project.conf. As a result testing the reproducibility was impossible. Note that the script used to test reproducibility deletes objects and refs from the local cache in an attempt to force rebuilds.\r\n\r\n\r\n## Steps to reproduce\r\n\r\nIt should be possible to reproduce by:\r\n1. Clone a repo with a remote artifact cache configured (e.g. freedesktop-sdk)\r\n2. Pull an element from the remote cache\r\n3. Remove the `artifacts` config from project.conf\r\n4. Remove the element from your local cache\r\n5. Attempt to build the element\r\n6. Notice that it's a pull job, rather than a build.\r\n\r\nThe easier way to test would be to use [this branch](https://gitlab.com/freedesktop-sdk/freedesktop-sdk/tree/coldtom/reproducible) of freedesktop-sdk and follow the instructions in `utils/reproducible.sh`. You may then check the produced reproducible.log to see that buildstream pulls from the remote cache.\r\n\r\n## What is the current bug behavior?\r\n\r\nBuildstream pulls from a remote cache, even if it's been removed from project.conf.\r\n\r\n\r\n## What is the expected correct behavior?\r\n\r\nBuildstream should build locally.\r\n\r\n\r\n## Relevant logs and/or screenshots\r\nHere is the relevant output of running reproducible.sh for just one element, note the pull job and the `fetch needed`:\r\n```\r\nUsing the default directory /home/thomascoldrick/.cache/buildstream/artifacts/cas for the content-addressable store.\r\nExtracted directory into /tmp/reproducible.uhJksQp6X6/b.\r\nUsing the default directory /home/thomascoldrick/.cache/buildstream/artifacts/cas for the content-addressable store.\r\nExtracted directory into /tmp/reproducible.j3peTSrrab/a.\r\nUsing the default directory /home/thomascoldrick/.cache/buildstream/artifacts/cas for the content-addressable store.\r\n6b2ebcac6b603db28184337930e76a2978c48a273e2c84c71ee39ae98fb6968e\r\nDeleted object and ref for freedesktop-sdk/base-expat/0f80ce9e7d9dba103e1abf0a5cf1d9de4566efc9fa6f0107100685d221153e21.\r\n[--:--:--][][] START   Build\r\n[--:--:--][][] START   Loading elements\r\n[00:00:02][][] SUCCESS Loading elements\r\n[--:--:--][][] START   Resolving elements\r\n[00:00:01][][] SUCCESS Resolving elements\r\n[--:--:--][][] START   Initializing remote caches\r\n[00:00:00][][] SUCCESS Initializing remote caches\r\n[--:--:--][][] START   Resolving cached state\r\n[00:00:00][][] SUCCESS Resolving cached state\r\n[--:--:--][][] START   Checking sources\r\n[00:00:00][][] SUCCESS Checking sources\r\n\r\nBuildStream Version 1.1.7\r\n  Session Start: Thursday, 30-08-2018 at 11:14:03\r\n  Project:       freedesktop-sdk (/home/thomascoldrick/fdo)\r\n  Targets:       base/expat.bst\r\n\r\nUser Configuration\r\n  Configuration File:      Default Configuration\r\n  Log Files:               /home/thomascoldrick/.cache/buildstream/logs\r\n  Source Mirrors:          /home/thomascoldrick/.cache/buildstream/sources\r\n  Build Area:              /home/thomascoldrick/.cache/buildstream/build\r\n  Artifact Cache:          /home/thomascoldrick/.cache/buildstream/artifacts\r\n  Strict Build Plan:       Yes\r\n  Maximum Fetch Tasks:     10\r\n  Maximum Build Tasks:     4\r\n  Maximum Push Tasks:      4\r\n  Maximum Network Retries: 2\r\n\r\nProject Options\r\n  bootstrap_build_arch: x86_64\r\n  target_arch:          x86_64\r\n\r\nPipeline\r\n      cached 81944a22f0a775c559bfde2ad3b8e1991af2a2e36b227b477d3d6f133460a3ff bootstrap-junction.bst:cross-installation-links.bst \r\n      cached d1f300b6e2b55e3b4db358e673330295e61742321c394c4e4945e329387ea44a bootstrap-junction.bst:dependencies/base-sdk-image.bst \r\n      cached dfb997eee4fd2907691086336fae1b6e5c71c7590759f68601b04a77430212e1 bootstrap-junction.bst:dependencies/base-sdk-links.bst \r\n      cached 5b7b202698332ac7be068c4d44fd282c928bbd65502ad4456b711df62c9bc798 bootstrap-junction.bst:dependencies/base-sdk.bst \r\n      cached 05e933b9501359870b7db953cf1f6899b96e692761cfa5cfa4329ae6e575b091 bootstrap-junction.bst:gnu-config.bst \r\n      cached 09333c3e684df76c5cb959c591024608cc4bf764fa0cae4b9b70fa3e53c686a7 bootstrap-junction.bst:linux-headers.bst \r\n      cached a35dafe9e964d890beec53e3991bc84ba927253305a2f965cf04129ed11ab6c4 bootstrap-junction.bst:binutils-stage1.bst \r\n      cached dd47e050c41981f657d85d4556a7922a9ad51c22986f6e9af7344c3ff4793984 bootstrap-junction.bst:tools-lib-path.bst \r\n      cached 1726d7d7414e30c2226e1e033fa931da5a510136d52a2f6299e26db031f507ee bootstrap-junction.bst:elfutils-host.bst \r\n      cached 568b8e8951347f77692fd9b20473038c5b5c60bcbdcf0caef8ba6278e9338017 bootstrap-junction.bst:file-stage1.bst \r\n      cached 990a93a1d273368147f650737f6dc89622c5845a820a260eee3b9654a6ddb0ff bootstrap-junction.bst:debugedit-host.bst \r\n      cached 2f2fce4d70afdfc6a1d10bb214dcb69ee97238d760958ee4cd50e5af4981c617 bootstrap-junction.bst:gcc-stage1.bst \r\n      cached 623e980a9518f81ce18953db59dce131707b5919e3b90abc7f26213d4a809e27 bootstrap-junction.bst:glibc.bst \r\n      cached 605a89a1f29c3509df84a458f6b4a89c5d0f90022a503971bb9485ce1a3441cd bootstrap-junction.bst:libstdc++-stage1.bst \r\n      cached 7dfee9f6bc1e16977e4ba831b7a5be00780b513670389fa28ea631947f5362a6 bootstrap-junction.bst:gcc-stage2.bst \r\n      cached f718c43585282803529937955a7d3c5fe814f2e493fa045237c8ce277bbc7239 bootstrap-junction.bst:attr.bst \r\n      cached c0dd7151d0db442385dcfaa2d542faf1f715b6555c2dc526f531a55e2e88fa67 bootstrap-junction.bst:acl.bst \r\n      cached 74fd948f26a5964108165e051b83a0c90341a4a902259bdcd59a2608bf560270 bootstrap-junction.bst:ncurses-stage1.bst \r\n      cached cd3cdf4530c8c2b9ef6d62e9578daefa589b681e2814044d950963018dfacc01 bootstrap-junction.bst:ncurses.bst \r\n      cached 0e7538848e8646c43084b1f8f587ca631b2fcc72a23335411ec5aab0c48db965 bootstrap-junction.bst:readline.bst \r\n      cached e9be2b21838d03f756af76cf64d260ac1984cecb069b4fc92a56d47a4af7ce32 bootstrap-junction.bst:bash.bst \r\n      cached 093672ea4550f2e0c69dd02515c1638c9a654beb52e084a43b2e43d005c1d43d bootstrap-junction.bst:binutils.bst \r\n      cached 2c33126fe08170f08d9614406bb318636a05eaa276d653cd26b2e81ae0d2ae6b bootstrap-junction.bst:bzip2.bst \r\n      cached 0b8f7186df8c799cc32d434dc737a41469b92046ea54f5e9f02b9b91d31685ea bootstrap-junction.bst:coreutils-manpages.bst \r\n      cached e0f26ccc9a51f65723f0e0176cfbfc06e04df6eec88da441ae5ccc9713bb2c98 bootstrap-junction.bst:coreutils.bst \r\n      cached 57ec6ff2ac8e9c231b9b65f212a3af777d457053b87707d17e33867d19b995d2 bootstrap-junction.bst:zlib.bst \r\n      cached cb9390b8fcc9a0480db1e7d7737b88fa4257b6093ef2ffad2e99588bddd95478 bootstrap-junction.bst:elfutils.bst \r\n      cached b5e24f0e041014e32c9e50b6b436cfae716f6d053fa882fb1c27b6e790259e16 bootstrap-junction.bst:file.bst \r\n      cached bcd5331628e8ae62fecb5495d1937ee54cd651c3a8db5b627db544eee3581089 bootstrap-junction.bst:openssl-static.bst \r\n      cached 70f8f2a4e681af136b579af00a03152bbd9c6b665fc79964be27a72b070bb574 bootstrap-junction.bst:popt.bst \r\n      cached 00961fd923658800cbb864c068cf3694cfebf263284e4cb2f0dd1ba20910f455 bootstrap-junction.bst:debugedit.bst \r\n      cached ca9f6a39c0f690a40badd31dfe1b9f9ddb6076381730eb08dab71bc766b38ad7 bootstrap-junction.bst:diffutils.bst \r\n      cached ad34ddbadf29f193acae03f58432260c5cd598de5320fc975f5be9f4c3ec90d2 bootstrap-junction.bst:findutils.bst \r\n      cached 8b4ba4cfec5a6d4eca6c7109b90107fe7f91541c376f6e105a656b9d8bc036cc bootstrap-junction.bst:gawk.bst \r\n      cached b41ee47c78d657bbd02bd7236ab12265b5b15dd610361fa4aa96d6ec8a7f2be9 bootstrap-junction.bst:gcc.bst \r\n      cached cbb0389cea5c689595870b796b9674f9f0e440cea8312f062d372deb9de2ffee bootstrap-junction.bst:grep.bst \r\n      cached 27ea4d0e76f9c6ba082e28ca2fc9f5ae1173aadaa14ac4dfc45c4709cb8febd9 bootstrap-junction.bst:make.bst \r\n      cached 43151056a155ebcd4012fbfd59a452f8e27c4ed166da65d37bf4148179ddefdd bootstrap-junction.bst:procps.bst \r\n      cached f39f3d9219fe1f3b72bf170a0195787aac8e99f45547e5147ae053466116ef5c bootstrap-junction.bst:sed.bst \r\n      cached 505b6fe98295b24470ecb1752c05f6a815372617197c3880bb75a968705208a1 bootstrap-junction.bst:glibc-stage1.bst \r\n      cached ed565f4ed49606d1f7b16987acfe03cc998881a43a17c37747ca587ea022e74a bootstrap-junction.bst:utf-locale.bst \r\n      cached 872e92481892bbdb7ddd1264534b178842c6df0b7b5b7a00b7c5e90e6b8e78ea bootstrap-junction.bst:bootstrap.bst \r\n      cached 2837c3b7afdab8b5c5e5187ea2451044445d42af7fa9fffdbf565b88925c327b bootstrap-junction.bst:bootstrap-dev.bst \r\n      cached f4d37798889e1f0ee1c6acc96419c048a2729e2331c75b050529d9084b7a2ba7 bootstrap-junction.bst:bootstrap-dev-extract.bst \r\n      cached a7846020b57a0cdc61cfbface9d49aa16c146471c9cf65b1ecd353f34da8ae67 bootstrap-junction.bst:bootstrap-platform.bst \r\n      cached 4397126c54974f6b60d9e9c913a0ae17225ae8eef2ef965728cfe7040ce83678 bootstrap-junction.bst:bootstrap-platform-extract.bst \r\n      cached a8a138b36cedf0de80e1ef29d4870ce12ba80624b1fdadbbcfe746179d7069a2 bootstrap-junction.bst:bootstrap-extract.bst \r\n      cached 51ebb7f075c60de0f178ede3c8a1da1a7cb5e6ebfb6c530fcc1453e85fc908b6 bootstrap-import.bst \r\n     waiting 0f80ce9e7d9dba103e1abf0a5cf1d9de4566efc9fa6f0107100685d221153e21 base/expat.bst \r\n===============================================================================\r\n[--:--:--][0f80ce9e][ pull:base/expat.bst                ] START   freedesktop-sdk/base-expat/0f80ce9e-pull.28660.log\r\n[--:--:--][0f80ce9e][ pull:base/expat.bst                ] INFO    Pulling 0f80ce9e <- https://testcache.codethink.co.uk:11001\r\n[--:--:--][0f80ce9e][ pull:base/expat.bst                ] INFO    Downloaded artifact 0f80ce9e\r\n[00:00:02][0f80ce9e][ pull:base/expat.bst                ] SUCCESS freedesktop-sdk/base-expat/0f80ce9e-pull.28660.log\r\n[--:--:--][][] START   cache_size.28666.log\r\n[00:00:00][][] SUCCESS cache_size.28666.log\r\n[00:00:07][][] SUCCESS Build\r\n\r\nPipeline Summary\r\n  Total:       49\r\n  Session:     1\r\n  Pull Queue:  processed 1, skipped 0, failed 0 \r\n  Fetch Queue: processed 0, skipped 1, failed 0 \r\n  Build Queue: processed 0, skipped 1, failed 0 \r\nUsing the default directory /home/thomascoldrick/.cache/buildstream/artifacts/cas for the content-addressable store.\r\nExtracted directory into /tmp/reproducible.j3peTSrrab/b.\r\n```\r\n\r\n## Possible fixes\r\n\r\nWhile I would prefer this behaviour to be fixed in general, an additional change would be to allow a user to force a local rebuild", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/618/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/616", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/616/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/616/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/616/events", "html_url": "https://github.com/apache/buildstream/issues/616", "id": 800148440, "node_id": "MDU6SXNzdWU4MDAxNDg0NDA=", "number": 616, "title": "timed activities sometimes balanced with WARNING in place of FAILURE, when task retries are enabled", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T09:35:13Z", "updated_at": "2021-02-03T09:36:40Z", "closed_at": "2021-02-03T09:36:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/616)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 30, 2018, 09:36\n\nThis appears to be intentional since the introduction of retryable tasks in bfd822b3232f69ed9df48a20fedf31be7e0986f1, but introduces a very strange behavior for the balancing of a START message in a timed activity.\n\nA timed activity usually prints the name of the activity along with the name of the task, e.g. \"Doing something\":\n\n  * `[--:--:--][deadbeef][ task:element.bst] START  Doing something`\n\n    This indicates that *\"Doing something\"* started\n\n  * `[00:00:10][deadbeef][ task:element.bst] SUCCESS Doing something`\n\n    This indicates that *\"Doing something\"* was successful\n\n  * `[00:00:10][deadbeef][ task:element.bst] FAILURE Doing something`\n\n    This indicates that *\"Doing something\"* failed\n\n  * `[00:00:10][deadbeef][ task:element.bst] WARNING Doing something`\n\n    **This doesn't indicate anything comprehensive at all**\n\n    Rather, it seems to communicate that you should be worried that we were *\"Doing something\"* in the first place\n\nIf retries are enabled, they should retry things which have failed, they should not retry things which issued warnings; a warning is not the basis to perform a retry, rather a failure is.\n\n### Consistency of message type usages\n\nSomething I want us to ensure that we make very clear as a part of #456 is also clarity of what message types can happen for what reason. There are basically three classes of messaging:\n\n* The timed activities / tasks\n\n  These include **only**:\n\n  * `START` - Activity started\n  * `SUCCESS` - Activity succeeded\n  * `FAILURE` - Activity failed\n  * `SKIPPED` - Activity was found to be skipped while processing - this is currently not properly implemented, the `CasCache` issues `SKIPPED` messages directly, which might be helpful to the user, but rather it should be issuing an `INFO` message if this is the case, and allowing `SKIPPED` to only reflect the overall task status.\n\n* Messages which can be explicitly emitted by plugins\n\n  These include **only**:\n\n  * `LOG` - A message targeted only to the task specific log file, avoiding sending it to the main log\n  * `DEBUG` - A debugging message (this needs work, we need to provide better filtering of debug messages on a per plugin or domain basis for these messages to be useful, currently we only have a dumb `--debug` boolean switch)\n  * `STATUS` - A message about what a plugin is currently doing, hidden from the main log if verbose mode is disabled\n  * `INFO` - A message about something interesting to the user, will be printed unconditionally\n  * `WARNING` - A message that the user should be worried about something, \n\n  A plugin can only trigger the timed activity related message types by calling `Plugin.timed_activity()`\n\n* Additional messages from the core\n\n  * `BUG` - A unhandled exception occurred\n  * `ERROR` - A fatal error occurred in post processing of a task, outside of the regular timed activity\n\n### More weird behavior from source mirroring\n\nNote that in addition to the already incorrect logging behavior, when trying multiple source mirrors we also see this out of place `WARNING`, this can be observed by running `./setup.py test --addopts '-s tests/frontend/mirror.py::test_mirror_track_upstream_absent[git]'`:\n\n```\n[--:--:--][????????][track:test.bst                      ] START   test/test/????????-track.30020.log\n[--:--:--][????????][track:test.bst                      ] START   Tracking master from http://www.example.com/repo\n[00:00:00][????????][track:test.bst                      ] WARNING Tracking master from http://www.example.com/repo\n[--:--:--][????????][track:test.bst                      ] START   Tracking master from file:///codethink/GNOME/buildstream/tmp/test_mirror_track_upstream_abs0/mirror/repo\n[00:00:00][????????][track:test.bst                      ] SUCCESS Tracking master from file:///codethink/GNOME/buildstream/tmp/test_mirror_track_upstream_abs0/mirror/repo\n[--:--:--][????????][track:test.bst                      ] INFO    Found new revision: 41a3f675f212a87ef3352b20a54393ca5a335537\n[00:00:00][????????][track:test.bst                      ] SUCCESS test/test/????????-track.30020.log\n```\n\nThis happens because the `git` source times it's `track` activity, and `Source` goes ahead and handles `BstError` and tries the next mirror if the previous one fails. Because a `track` activity at the main `Job` level is considered a retryable, all invocations of `Context.timed_activity()` will result in issuing a `WARNING` instead of the appropriate `FAILURE`, this applies recursively to all timed activities within a task.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/616/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/615", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/615/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/615/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/615/events", "html_url": "https://github.com/apache/buildstream/issues/615", "id": 800147375, "node_id": "MDU6SXNzdWU4MDAxNDczNzU=", "number": 615, "title": "bst build seems to be stuck forever, not downloading anything", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}, {"id": 3841320027, "node_id": "LA_kwDOE_tNMc7k9eRb", "url": "https://api.github.com/repos/apache/buildstream/labels/needinfo", "name": "needinfo", "color": "C5DEF5", "default": false, "description": "Requires additional information to investigate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/3", "html_url": "https://github.com/apache/buildstream/milestone/3", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/3/labels", "id": 7687468, "node_id": "MI_kwDOE_tNMc4AdU0s", "number": 3, "title": "BuildStream 2.0 stable blockers", "description": "This milestone is intended to record sensible blockers to an actual 2.0 stable release of BuildStream.\r\n", "creator": {"login": "gtristan", "id": 1928351, "node_id": "MDQ6VXNlcjE5MjgzNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1928351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtristan", "html_url": "https://github.com/gtristan", "followers_url": "https://api.github.com/users/gtristan/followers", "following_url": "https://api.github.com/users/gtristan/following{/other_user}", "gists_url": "https://api.github.com/users/gtristan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtristan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtristan/subscriptions", "organizations_url": "https://api.github.com/users/gtristan/orgs", "repos_url": "https://api.github.com/users/gtristan/repos", "events_url": "https://api.github.com/users/gtristan/events{/privacy}", "received_events_url": "https://api.github.com/users/gtristan/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "open", "created_at": "2022-02-17T04:49:22Z", "updated_at": "2022-10-11T08:10:47Z", "due_on": null, "closed_at": null}, "comments": 10, "created_at": "2021-02-03T09:33:54Z", "updated_at": "2022-06-13T11:49:12Z", "closed_at": "2022-06-13T11:49:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/615)\nIn GitLab by [[Gitlab user @bochecha]](https://gitlab.com/bochecha) on Aug 29, 2018, 21:43\n\n## Summary\r\n\r\nIn the freedesktop SDK, we have a `desktop-platform-image.bst` element:\r\n\r\n```\r\n$ bst build desktop-platform-image.bst\r\n\u2026\r\n[03:49:49][Pull:desktop-platform-image.bst]\r\n```\r\n\r\nIt usually takes me about an hour to pull the artifacts for this element (which I already find incredibly slow, but that might be #554).\r\n\r\nThis time it's been pulling for almost 4 hours though\u2026\r\n\r\n## Steps to reproduce\r\n\r\nThis is the first time it happens to me, so I don't think you might reproduce it easily.\r\n\r\nBut clone the [freedesktop-sdk repo](https://gitlab.com/freedesktop-sdk/freedesktop-sdk/) then:\r\n\r\n```\r\n$ bst build desktop-platform-image.bst\r\n```\r\n\r\nIn case it helps, I'm on revision 4f415382919437f9f0b89037d893c4e6ff25031a from that repo (but I don't think it will help reproduce it).\r\n\r\n## What is the current bug behavior?\r\n\r\nBuildstream is pulling, seemingly forever.\r\n\r\nMy `~/.cache/buildstream/` is not growing at all.\r\n\r\n## What is the expected correct behavior?\r\n\r\nThis should have finished pulling about 3 hours ago.\r\n\r\n## Relevant logs and/or screenshots\r\n\r\nThe `pull.log` is completely unhelpful:\r\n\r\n```\r\n[--:--:--] START   desktop-platform-image.bst: Pull\r\n[--:--:--] LOG     desktop-platform-image.bst: Build environment for element desktop-platform-image.bst\r\n\r\n    CFLAGS: -O2 -g -fstack-protector-strong\r\n    CPPFLAGS: -O2 -D_FORTIFY_SOURCE=2\r\n    CXXFLAGS: -O2 -g -fstack-protector-strong\r\n    HOME: /tmp\r\n    LC_ALL: en_US.UTF-8\r\n    LDFLAGS: -fstack-protector-strong -Wl,-z,relro,-z,now\r\n    LOGNAME: tomjon\r\n    PATH: /usr/bin:/bin:/usr/sbin:/sbin\r\n    PYTHON: /usr/bin/python3\r\n    SHELL: /bin/sh\r\n    SOURCE_DATE_EPOCH: '1320937200'\r\n    TERM: dumb\r\n    TZ: UTC\r\n    USER: tomjon\r\n    USERNAME: tomjon\r\n[--:--:--] INFO    desktop-platform-image.bst: Pulling 0743b100 <- https://testcache.codethink.co.uk:11001\r\n```\r\n\r\nHere's a `strace` of the parent/monitoring Buildstream process:\r\n\r\n```\r\n[pid   450] epoll_wait(577, [], 2, 1000) = 0\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[1G\\33[A\", 7)  = 7\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[K\", 3)        = 3\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[1G\\33[A\", 7)  = 7\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[K\", 3)        = 3\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[1G\\33[A\", 7)  = 7\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[K\", 3)        = 3\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[1G\\33[A\", 7)  = 7\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[K\", 3)        = 3\r\n[pid   450] ioctl(1, TIOCGWINSZ, {ws_row=54, ws_col=238, ws_xpixel=0, ws_ypixel=0}) = 0\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\n\", 1)           = 1\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\n\", 1)           = 1\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\n\", 1)           = 1\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\n\", 1)           = 1\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[1G\\33[A\", 7)  = 7\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[1G\\33[A\", 7)  = 7\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[1G\\33[A\", 7)  = 7\r\n[pid   450] ioctl(2, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\n[pid   450] write(2, \"\\33[1G\\33[A\", 7)  = 7\r\n[pid   450] write(2, \"\\33[36m\\33[2m=====================================================================================================\\33[0m \\33[33m03\\33[0m\\33[36m\\33[2m:\\33[0m\\33[33m43\\33[0m\\33[36m\\33[2m:\\33[0m\\33[33m48\\33[0m \\33[33mfreedesktop-sdk\\33[0m \\33[36m\\33[2m(\\33[0m\\33[33m283\\33[0m\\33[36m\\33[2m/\\33[0m\\33[33m283\\33[0m\\33[36m\\33[2m)\\33[0m \\33[36m\\33[2m=====================================================================================================\\33[0m\\n\\33[36m\\33[2m                                                                                               \\33[0m \\33[36m\\33[2m(\\33[0m\\33[33mPulled\\33[0m\\33[36m\\33[2m:\\33[0m\\33[32m0\\33[0m \\33[33m0\\33[0m \\33[31m\\33[2m0\\33[0m\\33[36m\\33[2m)\\33[0m\\33[36m\\33[2m\\342\\206\\222 \\33[0m\\33[36m\\33[2m(\\33[0m\\33[33mFetched\\33[0m\\33[36m\\33[2m:\\33[0m\\33[32m0\\33[0m \\33[33m0\\33[0m \\33[31m\\33[2m0\\33[0m\\33[36m\\33[2m)\\33[0m\\33[36m\\33[2m\\342\\206\\222 \\33[0m\\33[36m\\33[2m(\\33[0m\\33[33mBuilt\\33[0m\\33[36m\\33[2m:\\33[0m\\33[32m0\\33[0m \\33[33m0\\33[0m \\33[31m\\33[2m0\\33[0m\\33[36m\\33[2m)\\33[0m \\33[36m\\33[2m                                                                                               \\33[0m\\n\\33[36m\\33[2m                                                                                                          \\33[0m \\33[36m\\33[2m~~~~~ \\33[0m\\33[33mActive Tasks\\33[0m\\33[36m\\33[2m ~~~~~\\33[0m \\33[36m\\33[2m                                                                                                          \\33[0m\\n\", 1216) = 1216\r\n[pid   450] write(2, \"\\33[36m\\33[2m[\\33[0m\\33[33m03\\33[0m\\33[36m\\33[2m:\\33[0m\\33[33m43\\33[0m\\33[36m\\33[2m:\\33[0m\\33[33m43\\33[0m\\33[36m\\33[2m]\\33[0m\\33[36m\\33[2m[\\33[0m\\33[33mPull\\33[0m\\33[36m\\33[2m:\\33[0m\\33[33mdesktop-platform-image.bst\\33[0m\\33[36m\\33[2m]\\33[0m\\n\", 180) = 180\r\n[pid   450] epoll_wait(577, [], 2, 1000) = 0\r\n```\r\n\r\nThat just repeats over and over again.\r\n\r\nNow here's what the child process says:\r\n\r\n```\r\nstrace: Process 467 attached with 6 threads\r\n[pid  3900] epoll_wait(592,  <unfinished ...>\r\n[pid   479] futex(0x7f56cafdfd08, FUTEX_WAIT_PRIVATE, 0, NULL <unfinished ...>\r\n[pid   470] restart_syscall(<... resuming interrupted futex ...> <unfinished ...>\r\n[pid   469] futex(0x55d4e5dd225c, FUTEX_WAIT_PRIVATE, 0, NULL <unfinished ...>\r\n[pid   468] futex(0x7f56b8001c40, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 0, NULL, 0xffffffff <unfinished ...>\r\n[pid   467] futex(0x55d4e5e2fda0, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 0, NULL, 0xffffffff <unfinished ...>\r\n[pid  3900] <... epoll_wait resumed> [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42952, tv_nsec=553847158}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574862, tv_nsec=312915411}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574862, tv_nsec=313068944}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42952, tv_nsec=554313789}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42952, tv_nsec=554378159}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42952, tv_nsec=756074305}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574862, tv_nsec=515118649}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574862, tv_nsec=515283032}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42952, tv_nsec=756537448}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42952, tv_nsec=756630777}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 200) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42952, tv_nsec=957267584}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574862, tv_nsec=716266948}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574862, tv_nsec=716349317}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42952, tv_nsec=957573896}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42952, tv_nsec=957634828}) = 0\r\n[pid  3900] epoll_wait(592,  <unfinished ...>\r\n[pid   470] <... restart_syscall resumed> ) = -1 ETIMEDOUT (Connection timed out)\r\n[pid   470] futex(0x7f56cafdfd20, FUTEX_WAKE_PRIVATE, 1) = 0\r\n[pid   470] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42952, tv_nsec=966982872}) = 0\r\n[pid   470] futex(0x7f56cafdfd08, FUTEX_WAIT_PRIVATE, 0, {tv_sec=0, tv_nsec=281336784} <unfinished ...>\r\n[pid  3900] <... epoll_wait resumed> [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=159237022}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574862, tv_nsec=918273828}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574862, tv_nsec=918413206}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=159667521}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=159725325}) = 0\r\n[pid  3900] epoll_wait(592,  <unfinished ...>\r\n[pid   470] <... futex resumed> )       = -1 ETIMEDOUT (Connection timed out)\r\n[pid   470] futex(0x7f56cafdfd20, FUTEX_WAKE_PRIVATE, 1) = 0\r\n[pid   470] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=248865120}) = 0\r\n[pid   470] futex(0x7f56cafdfd08, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>\r\n[pid   479] <... futex resumed> )       = 0\r\n[pid   470] <... futex resumed> )       = 1\r\n[pid   479] futex(0x7f56cafdfd20, FUTEX_WAIT_PRIVATE, 2, NULL <unfinished ...>\r\n[pid   470] futex(0x7f56cafdfd20, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>\r\n[pid   479] <... futex resumed> )       = -1 EAGAIN (Resource temporarily unavailable)\r\n[pid   470] <... futex resumed> )       = 0\r\n[pid   479] futex(0x7f56cafdfd20, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>\r\n[pid   470] epoll_wait(585,  <unfinished ...>\r\n[pid   479] <... futex resumed> )       = 0\r\n[pid   470] <... epoll_wait resumed> [], 100, 0) = 0\r\n[pid   479] clock_gettime(CLOCK_MONOTONIC,  <unfinished ...>\r\n[pid   470] clock_gettime(CLOCK_MONOTONIC,  <unfinished ...>\r\n[pid   479] <... clock_gettime resumed> {tv_sec=42953, tv_nsec=249155613}) = 0\r\n[pid   470] <... clock_gettime resumed> {tv_sec=42953, tv_nsec=249165006}) = 0\r\n[pid   479] futex(0x7f56cafdfd0c, FUTEX_WAIT_PRIVATE, 0, {tv_sec=0, tv_nsec=718216856} <unfinished ...>\r\n[pid   470] futex(0x7f56cafdfd0c, FUTEX_WAIT_PRIVATE, 0, NULL <unfinished ...>\r\n[pid  3900] <... epoll_wait resumed> [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=361308759}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574863, tv_nsec=120233918}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574863, tv_nsec=120304649}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=361525667}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=361576966}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=563196792}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574863, tv_nsec=322225664}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574863, tv_nsec=322368653}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=563637681}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=563721832}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=765308659}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574863, tv_nsec=524263751}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574863, tv_nsec=524397966}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=765615429}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=765666480}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=967233001}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574863, tv_nsec=726217804}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574863, tv_nsec=726362406}) = 0\r\n[pid   479] <... futex resumed> )       = -1 ETIMEDOUT (Connection timed out)\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC,  <unfinished ...>\r\n[pid   479] futex(0x7f56cafdfd20, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>\r\n[pid  3900] <... clock_gettime resumed> {tv_sec=42953, tv_nsec=967643351}) = 0\r\n[pid   479] <... futex resumed> )       = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42953, tv_nsec=967843041}) = 0\r\n[pid   479] clock_gettime(CLOCK_MONOTONIC,  <unfinished ...>\r\n[pid  3900] epoll_wait(592,  <unfinished ...>\r\n[pid   479] <... clock_gettime resumed> {tv_sec=42953, tv_nsec=967952846}) = 0\r\n[pid   479] futex(0x7f56cafdfd0c, FUTEX_WAIT_PRIVATE, 0, {tv_sec=1, tv_nsec=307743} <unfinished ...>\r\n[pid  3900] <... epoll_wait resumed> [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=169579315}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574863, tv_nsec=928542058}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574863, tv_nsec=928705124}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=169997524}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=170106394}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=371817841}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574864, tv_nsec=130856791}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574864, tv_nsec=130961008}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=372224593}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=372307521}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=573811298}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574864, tv_nsec=332769017}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574864, tv_nsec=332871439}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=574108449}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=574165746}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=775737461}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574864, tv_nsec=534704587}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574864, tv_nsec=534793153}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=776082798}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=776181926}) = 0\r\n[pid  3900] epoll_wait(592,  <unfinished ...>\r\n[pid   479] <... futex resumed> )       = -1 ETIMEDOUT (Connection timed out)\r\n[pid   479] futex(0x7f56cafdfd20, FUTEX_WAKE_PRIVATE, 1) = 0\r\n[pid   479] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=968898710}) = 0\r\n[pid   479] futex(0x7f56cafdfd0c, FUTEX_WAIT_PRIVATE, 0, {tv_sec=1, tv_nsec=360379} <unfinished ...>\r\n[pid  3900] <... epoll_wait resumed> [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=977769923}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574864, tv_nsec=736712021}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574864, tv_nsec=736773885}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=978022119}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42954, tv_nsec=978103045}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=179670046}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574864, tv_nsec=938625814}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574864, tv_nsec=938699092}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=179929925}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=179979719}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=381605547}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574865, tv_nsec=140619640}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574865, tv_nsec=140745095}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=381977292}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=382057562}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=583535714}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574865, tv_nsec=342503042}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574865, tv_nsec=342588845}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=583905796}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=584036353}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=785730249}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574865, tv_nsec=544723737}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574865, tv_nsec=544875816}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=786136399}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=786247668}) = 0\r\n[pid  3900] epoll_wait(592,  <unfinished ...>\r\n[pid   479] <... futex resumed> )       = -1 ETIMEDOUT (Connection timed out)\r\n[pid   479] futex(0x7f56cafdfd20, FUTEX_WAKE_PRIVATE, 1) = 0\r\n[pid   479] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=970016652}) = 0\r\n[pid   479] futex(0x7f56cafdfd0c, FUTEX_WAIT_PRIVATE, 0, {tv_sec=1, tv_nsec=244351} <unfinished ...>\r\n[pid  3900] <... epoll_wait resumed> [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=987950829}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574865, tv_nsec=746982198}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574865, tv_nsec=747131639}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=988425325}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42955, tv_nsec=988534437}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 200) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=189262032}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574865, tv_nsec=948301052}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574865, tv_nsec=948426614}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=189694018}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=189782689}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=391345157}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574866, tv_nsec=150305493}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574866, tv_nsec=150525641}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=391798861}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=391869161}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=593431645}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574866, tv_nsec=352406528}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574866, tv_nsec=352643467}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=593916480}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=593992537}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=795623188}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574866, tv_nsec=554618958}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574866, tv_nsec=554712443}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=795950704}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=796042604}) = 0\r\n[pid  3900] epoll_wait(592,  <unfinished ...>\r\n[pid   479] <... futex resumed> )       = -1 ETIMEDOUT (Connection timed out)\r\n[pid   479] futex(0x7f56cafdfd20, FUTEX_WAKE_PRIVATE, 1) = 0\r\n[pid   479] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=970979139}) = 0\r\n[pid   479] futex(0x7f56cafdfd0c, FUTEX_WAIT_PRIVATE, 0, {tv_sec=1, tv_nsec=345254} <unfinished ...>\r\n[pid  3900] <... epoll_wait resumed> [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=997773789}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574866, tv_nsec=756907197}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574866, tv_nsec=757115082}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=998747466}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42956, tv_nsec=998871606}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42957, tv_nsec=200510042}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574866, tv_nsec=959458801}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574866, tv_nsec=959547055}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42957, tv_nsec=200777358}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42957, tv_nsec=200838923}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42957, tv_nsec=402414884}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574867, tv_nsec=161393375}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574867, tv_nsec=161492426}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42957, tv_nsec=402756392}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42957, tv_nsec=402836764}) = 0\r\n[pid  3900] epoll_wait(592, [], 100, 201) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42957, tv_nsec=604306880}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574867, tv_nsec=363195854}) = 0\r\n[pid  3900] clock_gettime(CLOCK_REALTIME, {tv_sec=1535574867, tv_nsec=363255871}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42957, tv_nsec=604464669}) = 0\r\n[pid  3900] clock_gettime(CLOCK_MONOTONIC, {tv_sec=42957, tv_nsec=604512129}) = 0\r\n[pid  3900] epoll_wait(592, ^Cstrace: Process 467 detached\r\nstrace: Process 468 detached\r\nstrace: Process 469 detached\r\nstrace: Process 470 detached\r\nstrace: Process 479 detached\r\nstrace: Process 3900 detached\r\n <detached ...>\r\n```\r\n\r\nThat also seems to be repeating, but much faster.\r\n\r\nThe child process doesn't seem to be downloading anything at all.\r\n\r\n## Other relevant information\r\n\r\nThis is with Buildstream 1.1.7.\r\n\r\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/615/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/615/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/614", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/614/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/614/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/614/events", "html_url": "https://github.com/apache/buildstream/issues/614", "id": 800146280, "node_id": "MDU6SXNzdWU4MDAxNDYyODA=", "number": 614, "title": "Follow-up from \"Bschubert/backport log missed cache\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T09:32:34Z", "updated_at": "2021-02-03T09:33:47Z", "closed_at": "2021-02-03T09:33:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/614)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 29, 2018, 18:22\n\nThe following discussion from !752 should be addressed:\n\n- [ ] [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) started a [discussion](https://gitlab.com/BuildStream/buildstream/merge_requests/752#note_97696988): \n\n    > I realize this is already in master, and is probably the best thing to do for `bst-1.2` branch now that we're so close to release, however, this has problems and should ideally be done differently, but it will require some additional support from the core.\n    > \n    > The main problem I can see here is, if all of the artifact servers contacted did not find the artifact, then the entire task should be marked as SKIPPED.\n    > \n    > SKIPPED also usually indicates that an element in a queue is SKIPPED, which should cause the summary and status bar to show the element as skipped as well.\n    > \n    > This patch will only emit SKIPPED messages, but will not treat the element as SKIPPED in the summary.\n\nI think an interesting approach to resolving this properly is to add some semantic for the queues to raise a special exception in their processing method, allowing the main job harness to treat the entire task as SKIPPED accordingly and bookkeep it properly.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/614/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/609", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/609/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/609/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/609/events", "html_url": "https://github.com/apache/buildstream/issues/609", "id": 800130327, "node_id": "MDU6SXNzdWU4MDAxMzAzMjc=", "number": 609, "title": "CAS server doesn't seem to automatically remove artifacts so it gets fill up", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 91, "created_at": "2021-02-03T09:12:33Z", "updated_at": "2021-02-03T09:25:32Z", "closed_at": "2021-02-03T09:25:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/609)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Aug 28, 2018, 08:19\n\n## What is the current bug behavior?\nThis is a continuation of #136:\n\nEven with the new cache server implementation (CAS), the cache server gets fill up and It doesn't clean the artifacts automatically\n\nBugs in downstream projects: \n- gnome-build-meta: https://gitlab.gnome.org/GNOME/gnome-build-meta/issues/48\n- freedesktop-sdk: https://gitlab.com/freedesktop-sdk/freedesktop-sdk/issues/393\n\n## What is the expected correct behavior?\nThe server should automatically remove artifacts to have enough space\n\n\n## Relevant logs and/or screenshots\n\nhttps://gitlab.gnome.org/GNOME/gnome-build-meta/-/jobs/92168\n\nFrom the journal on the server (not messages at all from bst-artifact-server before that):\n```\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]: Exception calling application: Failed to hash object: [Errno 28] No space left on device\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]: Traceback (most recent call last):\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:   File \"/usr/local/lib/python3.6/site-packages/buildstream/_artifactcache/cascache.py\", line 398, in add_object\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:     out.write(chunk)\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:   File \"/usr/lib64/python3.6/tempfile.py\", line 483, in func_wrapper\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:     return func(*args, **kwargs)\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]: OSError: [Errno 28] No space left on device\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]: During handling of the above exception, another exception occurred:\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]: Traceback (most recent call last):\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:   File \"/usr/local/lib/python3.6/site-packages/buildstream/_artifactcache/cascache.py\", line 411, in add_object\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:     os.link(out.name, objpath)\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:   File \"/usr/lib64/python3.6/tempfile.py\", line 501, in __exit__\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:     result = self.file.__exit__(exc, value, tb)\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]: OSError: [Errno 28] No space left on device\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]: The above exception was the direct cause of the following exception:\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]: Traceback (most recent call last):\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:   File \"/usr/local/lib64/python3.6/site-packages/grpc/_server.py\", line 389, in _call_behavior\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:     return behavior(argument, context), True\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:   File \"/usr/local/lib/python3.6/site-packages/buildstream/_artifactcache/casserver.py\", line 186, in Write\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:     digest = self.cas.add_object(path=out.name)\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:   File \"/usr/local/lib/python3.6/site-packages/buildstream/_artifactcache/cascache.py\", line 418, in add_object\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]:     raise ArtifactError(\"Failed to hash object: {}\".format(e)) from e\nAug 17 21:30:52 cache-server-fedora-s-2vcpu-2gb-ams3-01 bst-artifact-server[1067]: buildstream._exceptions.ArtifactError: Failed to hash object: [Errno 28] No space left on device\n\n```\n\n## Other relevant information\n\n* BuildStream version affected: 1.1.7 (on the server)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/609/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/609/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/608", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/608/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/608/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/608/events", "html_url": "https://github.com/apache/buildstream/issues/608", "id": 800129270, "node_id": "MDU6SXNzdWU4MDAxMjkyNzA=", "number": 608, "title": "Follow-up from \"Refer readers to our tutorial before referring them to existing bst projects\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T09:11:19Z", "updated_at": "2021-02-03T09:12:26Z", "closed_at": "2021-02-03T09:12:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/608)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 25, 2018, 10:53\n\nThe following discussion from !578 should be addressed:\n\n- [x] [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) started a [discussion](https://gitlab.com/BuildStream/buildstream/merge_requests/578#note_96824224): \n\n    > Just noticed this in the install guide today.\n    > \n    > Why are we recommending that windows users use the docker install guide ?\n    > \n    > Is it even marginally possible that BuildStream will actually work with docker on windows ? Has anyone tested this ?\n    > \n    > I think we should be careful to remove this claim quickly before someone reads this an complains about it.\n\n\nNote: The above refers to the `.. note::` in the [install guide](http://buildstream.gitlab.io/buildstream/main_install.html) which currently states:\n\n> *\"BuildStream is not currently supported natively on macOS and Windows. Windows and macOS users should refer to BuildStream inside Docker.\"*\n", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/608/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/607", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/607/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/607/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/607/events", "html_url": "https://github.com/apache/buildstream/issues/607", "id": 800128359, "node_id": "MDU6SXNzdWU4MDAxMjgzNTk=", "number": 607, "title": "Non strict build causes \"Missing artifact\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T09:10:04Z", "updated_at": "2021-02-03T09:11:11Z", "closed_at": "2021-02-03T09:11:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/607)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Aug 24, 2018, 13:28\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThere is a regression in master not present in 1.2. When build non strict mode we get \"Missing artifact\" errors.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nYou need three elements:\n - `a.bst`\n - `b.bst` build depends `a.bst` with a plugin *without* `BST_STRICT_REBUILD` so *not* `compose`\n - `c.bst` build depends `b.bst` with a plugin *without* `BST_STRICT_REBUILD` so *not* `compose`\n\n1. Build `b.bst`.\n1. Modify `a.bst` to change its key.\n1. Build non-strict `c.bst`\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\n```\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+313.g8216ff8d-py3.6.egg/buildstream/element.py\", line 1511, in _assemble\n        self.stage(sandbox)\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+313.g8216ff8d-py3.6.egg/buildstream/buildelement.py\", line 165, in stage\n        self.stage_dependency_artifacts(sandbox, Scope.BUILD)\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+313.g8216ff8d-py3.6.egg/buildstream/element.py\", line 699, in stage_dependency_artifacts\n        update_mtimes=to_update)\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+313.g8216ff8d-py3.6.egg/buildstream/element.py\", line 609, in stage_artifact\n        self.__assert_cached()\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+313.g8216ff8d-py3.6.egg/buildstream/element.py\", line 2069, in __assert_cached\n        self, self._get_brief_display_key())\n    AssertionError: manual element at a.bst [line 1 column 0]: Missing artifact 4c27cb74\n    \n    During handling of the above exception, another exception occurred:\n    \n    Traceback (most recent call last):\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+313.g8216ff8d-py3.6.egg/buildstream/_scheduler/jobs/job.py\", line 398, in _child_action\n        result = self.child_process()\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+313.g8216ff8d-py3.6.egg/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n        return self._action_cb(self._element)\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+313.g8216ff8d-py3.6.egg/buildstream/_scheduler/queues/buildqueue.py\", line 70, in process\n        element._assemble()\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+313.g8216ff8d-py3.6.egg/buildstream/element.py\", line 1591, in _assemble\n        build_result_dict = {\"success\": self.__build_result[0], \"description\": self.__build_result[1]}\n    TypeError: 'NoneType' object is not subscriptable\n```\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nIt should build without error\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: master /milestone %\"BuildStream\\_v1.4\" \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/607/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/607/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/606", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/606/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/606/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/606/events", "html_url": "https://github.com/apache/buildstream/issues/606", "id": 800126222, "node_id": "MDU6SXNzdWU4MDAxMjYyMjI=", "number": 606, "title": "Mangled symlinks when importing freedesktop BasePlatform", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-02-03T09:07:23Z", "updated_at": "2021-02-03T09:09:57Z", "closed_at": "2021-02-03T09:09:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/606)\nIn GitLab by [[Gitlab user @jonathanmaw]](https://gitlab.com/jonathanmaw) on Aug 24, 2018, 13:25\n\n## Summary\r\n\r\nWhen testing bst-external locally against buildstream master, I get the error \"FAILURE base/base-system.bst: Staged artifacts do not provide command 'sh'\". Full text at [^1].\r\n\r\nOn closer investigation, in the source cache /bin/sh is a symlink to /bin/bash [^2], but in the artifact cache /bin/sh is a symlink to ../../bin/bash [^3].\r\n\r\n## Steps to reproduce\r\n\r\n* In bst-external, go to tests/project and run `bst build base.bst`\r\n  - NOTE: because of some other current issues, you may need to go into project.conf and delete everything in the `plugins:` section.\r\n\r\n\r\n## What is the current bug behavior?\r\n\r\n* A symlink from `/bin/sh` to `/bin/bash` becomes a symlink to `../../bin/bash`\r\n* Sandbox commands that use that BasePlatform fail because there's no `sh`\r\n\r\n\r\n## What is the expected correct behavior?\r\n\r\n* A symlink from `/bin/sh` to `/bin/bash` becomes a symlink to `../bin/bash` (or just `bash`\r\n* Sandbox commands that use the BasePlatform continue to run commands as normal\r\n\r\n\r\n## Relevant logs and/or screenshots\r\n\r\n[^1]:\r\n    The build output is as follows:\r\n    ```\r\n    [--:--:--][][] START   Build\r\n    [--:--:--][][] START   Loading elements\r\n    [00:00:00][][] SUCCESS Loading elements\r\n    [--:--:--][][] START   Resolving elements\r\n    [00:00:00][][] SUCCESS Resolving elements\r\n    [--:--:--][][] START   Resolving cached state\r\n    [00:00:00][][] SUCCESS Resolving cached state\r\n    [--:--:--][][] START   Checking sources\r\n    [00:00:00][][] SUCCESS Checking sources\r\n    \r\n    BuildStream Version 1.3.0+319.g255f9ee3\r\n      Session Start: Friday, 24-08-2018 at 12:38:22\r\n      Project:       test (/home/jonathanmaw/workspace/buildstream/bst-external/tests/project)\r\n      Targets:       base.bst\r\n    \r\n    User Configuration\r\n      Configuration File:      /home/jonathanmaw/.config/buildstream.conf\r\n      Log Files:               /media/jonathanmaw/external/buildstream-cache-5/logs\r\n      Source Mirrors:          /media/jonathanmaw/external/buildstream-cache-5/sources\r\n      Build Area:              /media/jonathanmaw/external/buildstream-cache-5/build\r\n      Artifact Cache:          /media/jonathanmaw/external/buildstream-cache-5/artifacts\r\n      Strict Build Plan:       Yes\r\n      Maximum Fetch Tasks:     10\r\n      Maximum Build Tasks:     4\r\n      Maximum Push Tasks:      4\r\n      Maximum Network Retries: 2\r\n    \r\n    Project Options\r\n      arch:  x86_64\r\n      linux: 1\r\n    \r\n    Pipeline\r\n    fetch needed 2526aad094f4a68f2dda3027807615960e61271eabfd12b181c441530cd7efc5 base/base-platform.bst \r\n         waiting 262f402bb7c3324f4ff0e3f032e39116080ab12238dbff4346d61d13b4f6cd8d base/base-system.bst \r\n         waiting b910b9f9162f23240ab865c4356046355833b8e5e2f911b944ea6616675141a2 base/base-configure.bst \r\n         waiting f74d6a152b932f80b0d8653b94b892da98557038b013c8bf7f2c1bda544ab26e base.bst \r\n    ===============================================================================\r\n    [--:--:--][2526aad0][fetch:base/base-platform.bst        ] START   test/base-base-platform/2526aad0-fetch.23775.log\r\n    [--:--:--][2526aad0][fetch:base/base-platform.bst        ] START   Fetching remote ref: c9d09b7250a12ef09d95952fc4f49a35e5f8c2c1dd7141b7eeada4069e6f6576 from origin: https://sdk.gnome.org/repo/\r\n    [--:--:--][2526aad0][fetch:base/base-platform.bst        ] STATUS  Receiving objects: 42% (3/7) 676 bytes\r\n    [--:--:--][2526aad0][fetch:base/base-platform.bst        ] STATUS  Receiving objects: 2% (27/1195) 70.5 kB\r\n    ---------------------------------------------------->8-SNIP->8---------------------------------------------\r\n    [--:--:--][2526aad0][fetch:base/base-platform.bst        ] STATUS  Receiving objects: 99% (10154/10159) 99.9 MB\r\n    [00:03:21][2526aad0][fetch:base/base-platform.bst        ] SUCCESS Fetching remote ref: c9d09b7250a12ef09d95952fc4f49a35e5f8c2c1dd7141b7eeada4069e6f6576 from origin: https://sdk.gnome.org/repo/\r\n    [00:03:24][2526aad0][fetch:base/base-platform.bst        ] SUCCESS test/base-base-platform/2526aad0-fetch.23775.log\r\n    [--:--:--][2526aad0][build:base/base-platform.bst        ] START   test/base-base-platform/2526aad0-build.30201.log\r\n    [--:--:--][2526aad0][build:base/base-platform.bst        ] START   Staging sources\r\n    [00:00:16][2526aad0][build:base/base-platform.bst        ] SUCCESS Staging sources\r\n    [--:--:--][2526aad0][build:base/base-platform.bst        ] START   Caching artifact\r\n    [00:00:07][2526aad0][build:base/base-platform.bst        ] SUCCESS Caching artifact\r\n    [00:00:29][2526aad0][build:base/base-platform.bst        ] SUCCESS test/base-base-platform/2526aad0-build.30201.log\r\n    [--:--:--][262f402b][build:base/base-system.bst          ] START   test/base-base-system/262f402b-build.32108.log\r\n    [--:--:--][262f402b][build:base/base-system.bst          ] START   Staging dependencies\r\n    [00:00:00][262f402b][build:base/base-system.bst          ] SUCCESS Staging dependencies\r\n    [--:--:--][262f402b][build:base/base-system.bst          ] START   Integrating sandbox\r\n    [--:--:--][262f402b][build:base/base-system.bst          ] STATUS  Running integration command\r\n    \r\n        ldconfig\r\n    \r\n    [00:00:00][262f402b][build:base/base-system.bst          ] FAILURE Integrating sandbox\r\n    [--:--:--][262f402b][build:base/base-system.bst          ] START   Caching artifact\r\n    [00:00:00][262f402b][build:base/base-system.bst          ] SUCCESS Caching artifact\r\n    [00:00:00][262f402b][build:base/base-system.bst          ] FAILURE Staged artifacts do not provide command 'sh'\r\n    \r\n        Sandbox directory: /media/jonathanmaw/external/buildstream-cache-5/build/base-base-system-gkx_is5m\r\n    \r\n        Printing the last 20 lines from log file:\r\n        /media/jonathanmaw/external/buildstream-cache-5/logs/test/base-base-system/262f402b-build.32108.log\r\n        ======================================================================\r\n            PATH: /usr/bin:/bin:/usr/sbin:/sbin\r\n            SHELL: /bin/sh\r\n            SOURCE_DATE_EPOCH: '1320937200'\r\n            TERM: dumb\r\n            TZ: UTC\r\n            USER: tomjon\r\n            USERNAME: tomjon\r\n            V: '1'\r\n        [--:--:--] START   base/base-system.bst: Staging dependencies\r\n        [--:--:--] START   base/base-platform.bst: Staging base/base-platform.bst/2526aad0\r\n        [00:00:00] SUCCESS base/base-platform.bst: Staging base/base-platform.bst/2526aad0\r\n        [00:00:00] SUCCESS base/base-system.bst: Staging dependencies\r\n        [--:--:--] START   base/base-system.bst: Integrating sandbox\r\n        [--:--:--] STATUS  base/base-platform.bst: Running integration command\r\n    \r\n            ldconfig\r\n        [00:00:00] FAILURE base/base-system.bst: Integrating sandbox\r\n        [--:--:--] START   base/base-system.bst: Caching artifact\r\n        [00:00:00] SUCCESS base/base-system.bst: Caching artifact\r\n        [00:00:00] FAILURE base/base-system.bst: Staged artifacts do not provide command 'sh'\r\n        ======================================================================\r\n    \r\n    ```\r\n\r\n[^2]:\r\n    When inspecting the BasePlatform in the source cache\r\n    ```\r\n    jonathanmaw[[Gitlab user @fafnir]](https://gitlab.com/fafnir):~/external/buildstream-cache-5/sources/ostree/gnomesdk_repo_$ ostree ls c9d09b7250a12ef09d95952fc4f49a35e5f8c2c1dd7141b7eeada4069e6f6576 files/bin/sh\r\n    l00777 0 0      0 /files/bin/sh -> /bin/bash\r\n    ```\r\n\r\n[^3]:\r\n    When inspecting the BasePlatform in the artifact cache\r\n    ```\r\n    jonathanmaw[[Gitlab user @fafnir]](https://gitlab.com/fafnir):~/external/buildstream-cache-5/artifacts/extract/test/base-base-platform/686c11b1e91f03923998c3cb1f244ac8637051d197dbcb5bed1611d790734ac1$ ls -l files/bin/sh\r\n    lrwxrwxrwx 1 jonathanmaw jonathanmaw 14 Aug 24 12:42 files/bin/sh -> ../../bin/bash\r\n    ```\r\n\r\n## Possible fixes\r\n\r\nI don't know where the fault lies (though the code to turn absolute symlinks into relative ones is in utils.py:866 \"_relative_symlink_target\").\r\n\r\nI do know *when* it happened, this behaviour occurs after commit \"eabc38998ea35f5cd07846e40460b35453a995a8\", \"Merge branch 'jmac/virtual_directories' into 'master'.\r\n\r\nNotably, bst-1.2 behaves perfectly fine.\r\n\r\n## Other relevant information\r\n\r\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\r\n\r\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.4\"\r\n\r\n----\r\n", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/606/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/606/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/605", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/605/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/605/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/605/events", "html_url": "https://github.com/apache/buildstream/issues/605", "id": 800125695, "node_id": "MDU6SXNzdWU4MDAxMjU2OTU=", "number": 605, "title": "linux.py uses context message API before initialization", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-03T09:06:42Z", "updated_at": "2021-02-03T09:07:16Z", "closed_at": "2021-02-03T09:07:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/605)\nIn GitLab by [[Gitlab user @Qinusty]](https://gitlab.com/Qinusty) on Aug 23, 2018, 20:18\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nlinux.py causes `AssertError` for message handler when ran without root.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nI witnessed this bug with a gitlab runner which was unprivileged.\n\nSee this [LOC](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_platform/linux.py#L78)\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nAn `AssertError` is raised causing the job to fail.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThe warning...\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n[The LOC causing the problem](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_platform/linux.py#L78)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nFigure out where the message handler is initialized and shift it?\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: master\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/605/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/605/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/604", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/604/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/604/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/604/events", "html_url": "https://github.com/apache/buildstream/issues/604", "id": 800124742, "node_id": "MDU6SXNzdWU4MDAxMjQ3NDI=", "number": 604, "title": "Cache not storing objects, but storing refs", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-03T09:05:29Z", "updated_at": "2021-02-03T09:06:34Z", "closed_at": "2021-02-03T09:06:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/604)\nIn GitLab by [[Gitlab user @coldtom]](https://gitlab.com/coldtom) on Aug 23, 2018, 15:39\n\n## Summary\n\nMy local CAS cache has been not storing objects to go with the ref, as far as I know only with this specific object, but it could be more. When trying to checkout an object using [this tool](https://gitlab.com/jmacarthur/cas-inspector/blob/master/castool.py), I was getting an error for the object not existing, despite buildstream telling me it was cached. Investigating further I found that the object indeed did not exist, but the entry in cas/refs/heads did.\n\nThat is:\n```\nthomascoldrick ~ $: ls ~/.cache/buildstream/artifacts/cas/refs/heads/freedesktop-sdk/bootstrap-import\n6a1b1d3443d29c04b79bc240a68a0197e538475388fbf7388709a76e590b2343\n97f1957a0e3843372fb336494e1d4b192fb880a0054588ae2981f9c68a9ca08a\nthomascoldrick ~ $: ls ~/.cache/buildstream/artifacts/cas/objects/6a | grep 1b1d3443d29c04b79bc240a68a0197e538475388fbf7388709a76e590b2343\nthomascoldrick ~ $\n```\n\nRunning bst checkout managed to check the artifact out correctly, presumably by weak key?\n\nAttempting to delete the ref and rebuild or re-pull the element resulted in the same issue - no object.\n\nIt may also be relevant that `bootstrap-import.bst` is a stack element used to get a dependency from a junction, I don't know if any other objects have this issue at present.\n\n## Steps to reproduce\n\n1.  Clone freedesktop-sdk\n2.  `bst pull --deps all all.bst`\n3.  Run the commands described above.\n\n\n## What is the current bug behavior?\n\nNo object for a ref in the cache.\n\n\n## What is the expected correct behavior?\n\nThe object, existing.\n\n## Other relevant information\n\n* BuildStream version affected: 1.1.6\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/604/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/604/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/600", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/600/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/600/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/600/events", "html_url": "https://github.com/apache/buildstream/issues/600", "id": 800116143, "node_id": "MDU6SXNzdWU4MDAxMTYxNDM=", "number": 600, "title": "Devours memory and stack traces when recursive variables defined", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-02-03T08:54:34Z", "updated_at": "2021-02-03T08:56:48Z", "closed_at": "2021-02-03T08:56:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/600)\nIn GitLab by [[Gitlab user @coldtom]](https://gitlab.com/coldtom) on Aug 21, 2018, 16:14\n\n## Summary\n\nI accidentally created a recursively defined variable in this commit [1]. Attempting to build locally gave me the following stack trace after ~15 minutes of making my machine unusable:\n```\n    Traceback (most recent call last):                                                                                                                                                                             \n      File \"/home/thomascoldrick/.local/bin/bst\", line 8, in <module>                                                                                                                                              \n        sys.exit(cli())                                                                                                                                                                                            \n      File \"/home/thomascoldrick/.local/lib/python3.5/site-packages/click/core.py\", line 722, in __call__                                                                                                          \n        return self.main(*args, **kwargs)                                                                                                                                                                          \n      File \"/home/thomascoldrick/buildstream/buildstream/_frontend/cli.py\", line 162, in override_main                                                                                                             \n        standalone_mode=standalone_mode, **extra)                                                                                                                                                                  \n      File \"/home/thomascoldrick/.local/lib/python3.5/site-packages/click/core.py\", line 697, in main                                                                                                              \n        rv = self.invoke(ctx)                                                                                                                                                                                      \n      File \"/home/thomascoldrick/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke                                                                                                           \n        return _process_result(sub_ctx.command.invoke(sub_ctx))                                                                                                                                                    \n      File \"/home/thomascoldrick/.local/lib/python3.5/site-packages/click/core.py\", line 895, in invoke                                                                                                            \n        return ctx.invoke(self.callback, **ctx.params)                                                                                                                                                             \n      File \"/home/thomascoldrick/.local/lib/python3.5/site-packages/click/core.py\", line 535, in invoke                                                                                                            \n        return callback(*args, **kwargs)                                                                                                                                                                           \n      File \"/home/thomascoldrick/.local/lib/python3.5/site-packages/click/decorators.py\", line 27, in new_func                                                                                                     \n        return f(get_current_context().obj, *args, **kwargs)                                                                                                                                                       \n      File \"/home/thomascoldrick/buildstream/buildstream/_frontend/cli.py\", line 330, in build                                                                                                                     \n        build_all=all_)                                                                                                                                                                                            \n      File \"/home/thomascoldrick/buildstream/buildstream/_stream.py\", line 184, in build                                                                                                                           \n        dynamic_plan=True)                                                                                                                                                                                         \n      File \"/home/thomascoldrick/buildstream/buildstream/_stream.py\", line 871, in _load                                                                                                                           \n        fetch_subprojects=fetch_subprojects)                                                                                                                                                                       \n      File \"/home/thomascoldrick/buildstream/buildstream/_pipeline.py\", line 111, in load                                                                                                                          \n        fetch_subprojects=fetch_subprojects)                                                                                                                                                                       \n      File \"/home/thomascoldrick/buildstream/buildstream/_project.py\", line 321, in load_elements                                                                                                                  \n        for meta in meta_elements                                                                                                                                                                                  \n      File \"/home/thomascoldrick/buildstream/buildstream/_project.py\", line 321, in <listcomp>                                                                                                                     \n        for meta in meta_elements                                                                                                                                                                                  \n      File \"/home/thomascoldrick/buildstream/buildstream/element.py\", line 926, in _new_from_meta                                                                                                                  \n        dependency = Element._new_from_meta(meta_dep, artifacts)                                                                                                                                                   \n      File \"/home/thomascoldrick/buildstream/buildstream/element.py\", line 929, in _new_from_meta                                                                                                                  \n        dependency = Element._new_from_meta(meta_dep, artifacts)                                                                                                                                                   \n      File \"/home/thomascoldrick/buildstream/buildstream/element.py\", line 909, in _new_from_meta                                                                                                                  \n        element = meta.project.create_element(artifacts, meta, first_pass=meta.first_pass)                                                                                                                         \n      File \"/home/thomascoldrick/buildstream/buildstream/_project.py\", line 232, in create_element                                                                                                                 \n        return self.config.element_factory.create(self._context, self, artifacts, meta)                                                                                                                            \n      File \"/home/thomascoldrick/buildstream/buildstream/_elementfactory.py\", line 61, in create                                                                                                                   \n        element = element_type(context, project, artifacts, meta, default_config)                                                                                                                                  \n      File \"/home/thomascoldrick/buildstream/buildstream/element.py\", line 248, in __init__                                                                                                                        \n        self.__variables = Variables(variables)                                                                                                                                                                    \n      File \"/home/thomascoldrick/buildstream/buildstream/_variables.py\", line 48, in __init__                                                                                                                      \n        self.variables = self._resolve(node)                                                                                                                                                                       \n      File \"/home/thomascoldrick/buildstream/buildstream/_variables.py\", line 148, in _resolve                                                                                                                     \n        resolved, unmatched = resolve_one(resolved)                                                                                                                                                                \n      File \"/home/thomascoldrick/buildstream/buildstream/_variables.py\", line 134, in resolve_one                                                                                                                  \n        resolved_var, item_unmatched = self._subst(value, variables)                                                                                                                                               \n      File \"/home/thomascoldrick/buildstream/buildstream/_variables.py\", line 102, in _subst                                                                                                                       \n        replacement = re.sub(_VARIABLE_MATCH, subst_callback, string)                                                                                                                                              \n      File \"/usr/lib/python3.5/re.py\", line 182, in sub                                                                                                                                                            \n        return _compile(pattern, flags).sub(repl, string, count)                                                                                                                                                   \n    MemoryError \n```\n\nHowever on the CI things failed neatly [2] despite both using 1.1.6\n\n[1] https://gitlab.com/freedesktop-sdk/freedesktop-sdk/commit/9c53d6a5ca16043ea42ac7c54c022e4397bac46b\n[2] https://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/90954727\n\n## Steps to reproduce\n\nI was reproducing this bug reliably on my machine by running `make runtime export` on the commit linked. However this may not be reproduced on every machine.\n\n\n## What is the current bug behavior?\n\nBuildstream steals all the memory and crashes, sometimes, when recursive variables are defined.\n\n\n## What is the expected correct behavior?\n\nThe nice error message which I got in the CI\n\n\n## Possible fixes\n\nPotentially a check for recursion in variables while they're being resolved?\n\n## Other relevant information\n\n* BuildStream version affected: 1.1.6\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/600/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/600/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/598", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/598/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/598/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/598/events", "html_url": "https://github.com/apache/buildstream/issues/598", "id": 800114728, "node_id": "MDU6SXNzdWU4MDAxMTQ3Mjg=", "number": 598, "title": "Fatal warnings prints None when detail not provided", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T08:52:38Z", "updated_at": "2021-02-03T08:53:20Z", "closed_at": "2021-02-03T08:53:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/598)\nIn GitLab by [[Gitlab user @Qinusty]](https://gitlab.com/Qinusty) on Aug 21, 2018, 14:16\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen a fatal-warning is triggered without detail, the exit message prints None.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nConfigure a warning as fatal.\n\nRaise it somewhere in a source with `self.warn(\"brief information\", warning_token=CoreWarnings.<warning>)`\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nBuildstream will exit and print\n\n```\nBrief information\nNone\n```\n\n## What is the expected correct behaviour?\n\n[//]: # (What you should see instead)\n\n```\nBrief information\n```\n\n* BuildStream version affected: master", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/598/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/598/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/597", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/597/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/597/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/597/events", "html_url": "https://github.com/apache/buildstream/issues/597", "id": 800112616, "node_id": "MDU6SXNzdWU4MDAxMTI2MTY=", "number": 597, "title": "Git url without alias causes ValueError", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2021-02-03T08:49:49Z", "updated_at": "2021-02-03T08:52:31Z", "closed_at": "2021-02-03T08:52:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/597)\nIn GitLab by [[Gitlab user @Qinusty]](https://gitlab.com/Qinusty) on Aug 21, 2018, 10:58\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nGetting a traceback when tracking element without alias for git source.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nHave a git source with `url: files/repo`\n\n`bst track <element>`\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nTraceback\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nFailure with a suggested fix\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\n    Traceback (most recent call last):\n      File \"/home/joshsmith/.local/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/home/joshsmith/.local/lib/python3.5/site-packages/click/core.py\", line 722, in __call__\n        return self.main(*args, **kwargs)\n      File \"/home/joshsmith/buildstream/buildstream/_frontend/cli.py\", line 162, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/home/joshsmith/.local/lib/python3.5/site-packages/click/core.py\", line 697, in main\n        rv = self.invoke(ctx)\n      File \"/home/joshsmith/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/home/joshsmith/.local/lib/python3.5/site-packages/click/core.py\", line 895, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/home/joshsmith/.local/lib/python3.5/site-packages/click/core.py\", line 535, in invoke\n        return callback(*args, **kwargs)\n      File \"/home/joshsmith/.local/lib/python3.5/site-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/home/joshsmith/buildstream/buildstream/_frontend/cli.py\", line 420, in track\n        cross_junctions=cross_junctions)\n      File \"/home/joshsmith/buildstream/buildstream/_stream.py\", line 279, in track\n        fetch_subprojects=True)\n      File \"/home/joshsmith/buildstream/buildstream/_stream.py\", line 872, in _load\n        fetch_subprojects=fetch_subprojects)\n      File \"/home/joshsmith/buildstream/buildstream/_pipeline.py\", line 111, in load\n        fetch_subprojects=fetch_subprojects)\n      File \"/home/joshsmith/buildstream/buildstream/_project.py\", line 324, in load_elements\n        for meta in meta_elements\n      File \"/home/joshsmith/buildstream/buildstream/_project.py\", line 324, in <listcomp>\n        for meta in meta_elements\n      File \"/home/joshsmith/buildstream/buildstream/element.py\", line 883, in _new_from_meta\n        first_pass=meta.first_pass)\n      File \"/home/joshsmith/buildstream/buildstream/_project.py\", line 252, in create_source\n        return self.config.source_factory.create(self._context, self, meta)\n      File \"/home/joshsmith/buildstream/buildstream/_sourcefactory.py\", line 61, in create\n        source = source_type(context, project, meta)\n      File \"/home/joshsmith/buildstream/buildstream/source.py\", line 295, in __init__\n        self.configure(self.__config)\n      File \"/home/joshsmith/buildstream/buildstream/plugins/sources/git.py\", line 310, in configure\n        self.mirror = GitMirror(self, '', self.original_url, ref)\n      File \"/home/joshsmith/buildstream/buildstream/plugins/sources/git.py\", line 111, in __init__\n        self.mark_download_url(url)\n      File \"/home/joshsmith/buildstream/buildstream/source.py\", line 224, in mark_download_url\n        alias, _ = url.split(utils._ALIAS_SEPARATOR, 1)\n    ValueError: not enough values to unpack (expected 2, got 1)\n```\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/597/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/597/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/595", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/595/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/595/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/595/events", "html_url": "https://github.com/apache/buildstream/issues/595", "id": 800111093, "node_id": "MDU6SXNzdWU4MDAxMTEwOTM=", "number": 595, "title": "BUG: Missing Artifact when checking out with --no-strict", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-03T08:47:46Z", "updated_at": "2021-02-03T08:48:14Z", "closed_at": "2021-02-03T08:48:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/595)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Aug 20, 2018, 14:30\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen building with `--no-strict` and then checking out an element that has a runtime dependency that was changed, we get a broken assertion.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n### `a.bst`\n\n```\nkind: import\nsources:\n  - kind: local\n    path: files\n```\n\n### `b.bst`\n\n```\nkind: stack\ndepends:\n  - filename: a.bst\n```\n\n### `project.conf`\n\n```\nname: test\n```\n\n### `files/a.txt`\n```\na\n```\n\nCommands to reproduce:\n\n```\nbst build b.bst\necho b >files/a.txt\nbst --no-strict build b.bst\nbst --no-strict checkout b.bst b\n```\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\n```\n[--:--:--][][] BUG     stack element at b.bst [line 1 column 0]: Missing artifact fa3f9513\n\n    Traceback (most recent call last):\n      File \"/home/valentin/.local/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/usr/lib/python3/dist-packages/click/core.py\", line 722, in __call__\n        return self.main(*args, **kwargs)\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+275.g834b3c0a.dirty-py3.6.egg/buildstream/_frontend/cli.py\", line 162, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/usr/lib/python3/dist-packages/click/core.py\", line 697, in main\n        rv = self.invoke(ctx)\n      File \"/usr/lib/python3/dist-packages/click/core.py\", line 1066, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/usr/lib/python3/dist-packages/click/core.py\", line 895, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/usr/lib/python3/dist-packages/click/core.py\", line 535, in invoke\n        return callback(*args, **kwargs)\n      File \"/usr/lib/python3/dist-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+275.g834b3c0a.dirty-py3.6.egg/buildstream/_frontend/cli.py\", line 662, in checkout\n        tar=tar)\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+275.g834b3c0a.dirty-py3.6.egg/buildstream/_stream.py\", line 409, in checkout\n        integrate=integrate) as sandbox:\n      File \"/usr/lib/python3.6/contextlib.py\", line 81, in __enter__\n        return next(self.gen)\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+275.g834b3c0a.dirty-py3.6.egg/buildstream/element.py\", line 1314, in _prepare_sandbox\n        self.stage_dependency_artifacts(sandbox, scope)\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+275.g834b3c0a.dirty-py3.6.egg/buildstream/element.py\", line 699, in stage_dependency_artifacts\n        update_mtimes=to_update)\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+275.g834b3c0a.dirty-py3.6.egg/buildstream/element.py\", line 609, in stage_artifact\n        self.__assert_cached()\n      File \"/home/valentin/.local/lib/python3.6/site-packages/BuildStream-1.3.0+275.g834b3c0a.dirty-py3.6.egg/buildstream/element.py\", line 2069, in __assert_cached\n        self, self._get_brief_display_key())\n    AssertionError: stack element at b.bst [line 1 column 0]: Missing artifact fa3f9513\n```\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nWe should get a nice \"No artifacts to stage\" error.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.2\" \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/595/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/595/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/591", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/591/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/591/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/591/events", "html_url": "https://github.com/apache/buildstream/issues/591", "id": 800106886, "node_id": "MDU6SXNzdWU4MDAxMDY4ODY=", "number": 591, "title": "Missing required key on project.conf causes wrong provenance file name on error message", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-02-03T08:42:00Z", "updated_at": "2021-02-03T08:44:29Z", "closed_at": "2021-02-03T08:44:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/591)\nIn GitLab by [[Gitlab user @tacgomes]](https://gitlab.com/tacgomes) on Aug 17, 2018, 11:28\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nIf a required key is missing on project.conf, such as `name`, BuildStream shows the wrong provenance file name on the error message when trying build the project. See below.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThe filename being shown on the error message to point to `project.conf` instead of `projectconfig.yaml`.\n\n## Relevant logs and/or screenshots\n\n```\nbst build hello.bst\n\nError loading project: /home/tiagogomes/repos/buildstream/buildstream/data/projectconfig.yaml [line 8 column 0]: Dictionary did not contain expected key 'name'\n```\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/591/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/590", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/590/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/590/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/590/events", "html_url": "https://github.com/apache/buildstream/issues/590", "id": 800106318, "node_id": "MDU6SXNzdWU4MDAxMDYzMTg=", "number": 590, "title": "An unhandled exception occured when building: OSError: [Errno 39] Directory not empty", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-03T08:41:09Z", "updated_at": "2021-02-03T08:41:48Z", "closed_at": "2021-02-03T08:41:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/590)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Aug 16, 2018, 17:08\n\n## Summary\nI'm getting the below stack trace every time I try to build my system\n\n## Relevant logs and/or screenshots\n\n```\n[00:00:03][66e00599][build:bootstrap-junction.bst:file-stage1.bst] BUG     Build\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/home/jjardon/.local/lib/python3.7/site-packages/buildstream/_artifactcache/cascache.py\", line 95, in extract\n        os.rename(checkoutdir, dest)\n    OSError: [Errno 39] Directory not empty: '/home/jjardon/.cache/buildstream/artifacts/extract/tmpx3f0n0yt/freedesktop-sdk-bootstrap/dependencies-base-sdk-image/d1f300b6e2b55e3b4db358e673330295e61742321c394c4e4945e329387ea44a' -> '/home/jjardon/.cache/buildstream/artifacts/extract/freedesktop-sdk-bootstrap/dependencies-base-sdk-image/77bddd9d7be3dd3437072b4a75463c3212817358a1e9fee9899703c5164f6a54'\n    \n    During handling of the above exception, another exception occurred:\n    \n    Traceback (most recent call last):\n      File \"/home/jjardon/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/job.py\", line 398, in _child_action\n        result = self.child_process()\n      File \"/home/jjardon/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n        return self._action_cb(self._element)\n      File \"/home/jjardon/.local/lib/python3.7/site-packages/buildstream/_scheduler/queues/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/home/jjardon/.local/lib/python3.7/site-packages/buildstream/element.py\", line 1479, in _assemble\n        self.stage(sandbox)\n      File \"/home/jjardon/.local/lib/python3.7/site-packages/buildstream/buildelement.py\", line 165, in stage\n        self.stage_dependency_artifacts(sandbox, Scope.BUILD)\n      File \"/home/jjardon/.local/lib/python3.7/site-packages/buildstream/element.py\", line 723, in stage_dependency_artifacts\n        update_mtimes=to_update)\n      File \"/home/jjardon/.local/lib/python3.7/site-packages/buildstream/element.py\", line 630, in stage_artifact\n        artifact_base, _ = self.__extract()\n      File \"/home/jjardon/.local/lib/python3.7/site-packages/buildstream/element.py\", line 2350, in __extract\n        return (self.__artifacts.extract(self, key), key)\n      File \"/home/jjardon/.local/lib/python3.7/site-packages/buildstream/_artifactcache/cascache.py\", line 102, in extract\n        if e.errno not in [os.errno.ENOTEMPTY, os.errno.EEXIST]:\n    AttributeError: module 'os' has no attribute 'errno'\n\n```\n\n## Other relevant information\n\n* BuildStream version affected: latest commit from bst-1.2, sha 87960822f8f66f4c31a89d834d80929add13887d", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/590/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/590/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/584", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/584/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/584/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/584/events", "html_url": "https://github.com/apache/buildstream/issues/584", "id": 800098157, "node_id": "MDU6SXNzdWU4MDAwOTgxNTc=", "number": 584, "title": "Slow cache, 25 seconds before anything is printed", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109199, "node_id": "MDU6TGFiZWwyNzA5MTA5MTk5", "url": "https://api.github.com/repos/apache/buildstream/labels/optimization", "name": "optimization", "color": "A295AA", "default": false, "description": "Make BuildStream faster and use less resources"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-02-03T08:29:25Z", "updated_at": "2021-02-03T08:32:00Z", "closed_at": "2021-02-03T08:32:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/584)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Aug 15, 2018, 10:59\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen running any command that creates a pipeline, BuildStream takes 25 seconds before anything happens.\n\n - My cache is 51G.\n - I have an NVMe SSD disk.\n - It does not matter if I call it again and again.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nJust populate the cache. And try to run any command.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nIt takes 25s on a high end desktop.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nIt should take 250 time less time.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n### Short term fix\n\n`du` takes .8 seconds to scan `cas`, but around 12 seconds to scan `extract`. Since all files are in `extract` are also in `cas`, skipping it would only miss the size of directories, which we would be OK to neglect given the speedup we get.\n\nHowever we can only do that when #561 is fixed.\n\n 1. Get #561 fixed.\n 1. Skip scanning of `extract` directory.\n\n### Long term fix\n\nIdeally we would do book keeping.\n - Fix #573, we will keep the size in memory and update it incrementally (question do we still need to `stat` both `cas` and `extract`?)\n - Fix cache management with multiple instances running concurrently (#585)\n - Make sure we share cache size on disk across instances (mmap'ed file?)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.2\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/584/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/584/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/583", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/583/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/583/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/583/events", "html_url": "https://github.com/apache/buildstream/issues/583", "id": 800097250, "node_id": "MDU6SXNzdWU4MDAwOTcyNTA=", "number": 583, "title": "Bst open too many files which causes `OSError`s for the next calls", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T08:28:10Z", "updated_at": "2021-02-03T08:29:18Z", "closed_at": "2021-02-03T08:29:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/583)\nIn GitLab by [[Gitlab user @alatiera]](https://gitlab.com/alatiera) on Aug 15, 2018, 09:38\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhile trying to build [gnome-build-meta][1] today, I hit the following bug. `bst` seems like it have opened too many File descriptors and the rest syscalls failed with ` OSError: [Errno 24] Too many open files`\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\nNot really sure how to reproduce it, It only happened once thus far. I had a recent checkout and build artifacts of the project, did a `git pull` and tried building again. Most of the fetches should have pulled down little if anything at all.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nFor each pull task the following happened:\nAn unhandled exception is thrown that keeps. Upon `control-C` neither `quit` nor `terminate` options seem to be able to exit.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\nBuildstream never gets to have too many files open at which point the `syscalls` start to fail.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\nI couldn't copy more than a task due to a weird bug with my terminal, but the following trace was identical for the rest of the too.\n\n```python\nUnknown exception in SIGCHLD handler\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/asyncio/unix_events.py\", line 819, in _sig_chld\n  File \"/usr/lib64/python3.6/asyncio/unix_events.py\", line 885, in _do_waitpid_all\n  File \"/usr/lib64/python3.6/asyncio/unix_events.py\", line 919, in _do_waitpid\n  File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/jobs/job.py\", line 557, in _parent_child_completed\n  File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/scheduler.py\", line 238, in job_completed\n  File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/scheduler.py\", line 288, in _schedule_queue_jobs\n  File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/queues/queue.py\", line 174, in enqueue\n  File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/queues/queue.py\", line 174, in <listcomp>\n  File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/queues/queue.py\", line 171, in create_job\n  File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 69, in __init__\n  File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/jobs/job.py\", line 112, in __init__\n[--:--:--][????????][ pull:bootstrap-junction.bst:coreutils.bst] START   freedesktop-sdk-bootstrap/coreutils/????????-pull.4976.log\n[--:--:--][????????][ pull:bootstrap-junction.bst:coreutils.bst] INFO    Pulling ???????? <- https://cache.gitlab.gnome.org:11001\n[--:--:--][????????][ pull:bootstrap-junction.bst:coreutils.bst] INFO    Pulling ???????? <- https://testcache.codethink.co.uk:11001\n[--:--:--][????????][ pull:bootstrap-junction.bst:coreutils.bst] INFO    Pulling ???????? <- https://cache.gitlab.gnome.org:11001\n[--:--:--][????????][ pull:bootstrap-junction.bst:coreutils.bst] INFO    Pulling ???????? <- https://testcache.codethink.co.uk:11001\n[00:00:01][????????][ pull:bootstrap-junction.bst:coreutils.bst] SUCCESS freedesktop-sdk-bootstrap/coreutils/????????-pull.4976.log\n[--:--:--][????????][ main:bootstrap-junction.bst:coreutils.bst] BUG     Unhandled exception in post processing\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/queues/queue.py\", line 310, in _job_done\n      File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/queues/pullqueue.py\", line 65, in done\n      File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/scheduler.py\", line 332, in _check_cache_size_real\n      File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/jobs/cachesizejob.py\", line 25, in __init__\n      File \"/usr/lib/python3.6/site-packages/buildstream/_scheduler/jobs/job.py\", line 112, in __init__\n      File \"/usr/lib64/python3.6/multiprocessing/context.py\", line 102, in Queue\n      File \"/usr/lib64/python3.6/multiprocessing/queues.py\", line 42, in __init__\n      File \"/usr/lib64/python3.6/multiprocessing/context.py\", line 67, in Lock\n      File \"/usr/lib64/python3.6/multiprocessing/synchronize.py\", line 163, in __init__\n      File \"/usr/lib64/python3.6/multiprocessing/synchronize.py\", line 60, in __init__\n    OSError: [Errno 24] Too many open files\n```\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: `1.1.6` /milestone %BuildStream_v1.1\n\n\n[1]: https://gitlab.gnome.org/GNOME/gnome-build-meta\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/583/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/583/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/578", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/578/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/578/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/578/events", "html_url": "https://github.com/apache/buildstream/issues/578", "id": 800095707, "node_id": "MDU6SXNzdWU4MDAwOTU3MDc=", "number": 578, "title": "--debug option leads to a traceback", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T08:26:05Z", "updated_at": "2021-02-03T08:26:57Z", "closed_at": "2021-02-03T08:26:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/578)\nIn GitLab by [[Gitlab user @bochecha]](https://gitlab.com/bochecha) on Aug 14, 2018, 22:15\n\n## Summary\n\nUsing `bst show TARGET` works fine, but adding `--debug` gives me a traceback.\n\n## Steps to reproduce\n\n```\n$ git clone https://gitlab.com/freedesktop-sdk/freedesktop-sdk.git\n$ cd freedesktop-sdk\n$ git checkout 18.08  # at the time of writing, that's 094c6d22f12af9e557c733aa59c9c996f5a54d5a\n$ bst --debug show all.bst\npid:14063 id:000[--:--:--][][] START   Loading elements\npid:14063 id:000[00:00:07][][] SUCCESS Loading elements\npid:14063 id:000[--:--:--][][] START   Resolving elements\npid:14063 id:000[--:--:--][][] BUG     'StackElement' object has no attribute '_Element__cache_key'\n\n    Traceback (most recent call last):\n      File \"/usr/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 721, in __call__\n        return self.main(*args, **kwargs)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_frontend/cli.py\", line 162, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 696, in main\n        rv = self.invoke(ctx)\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 1065, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 894, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/usr/lib/python3.6/site-packages/click/core.py\", line 534, in invoke\n        return callback(*args, **kwargs)\n      File \"/usr/lib/python3.6/site-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_frontend/cli.py\", line 549, in show\n        except_targets=except_)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_stream.py\", line 114, in load_selection\n        fetch_subprojects=False)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_stream.py\", line 856, in _load\n        fetch_subprojects=fetch_subprojects)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_pipeline.py\", line 111, in load\n        fetch_subprojects=fetch_subprojects)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_project.py\", line 322, in load_elements\n        for meta in meta_elements\n      File \"/usr/lib/python3.6/site-packages/buildstream/_project.py\", line 322, in <listcomp>\n        for meta in meta_elements\n      File \"/usr/lib/python3.6/site-packages/buildstream/element.py\", line 902, in _new_from_meta\n        element = meta.project.create_element(artifacts, meta, first_pass=meta.first_pass)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_project.py\", line 233, in create_element\n        return self.config.element_factory.create(self._context, self, artifacts, meta)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_elementfactory.py\", line 61, in create\n        element = element_type(context, project, artifacts, meta, default_config)\n      File \"/usr/lib/python3.6/site-packages/buildstream/element.py\", line 197, in __init__\n        super().__init__(meta.name, context, project, meta.provenance, \"element\")\n      File \"/usr/lib/python3.6/site-packages/buildstream/plugin.py\", line 170, in __init__\n        self.debug(\"Created: {}\".format(self))\n      File \"/usr/lib/python3.6/site-packages/buildstream/plugin.py\", line 451, in debug\n        self.__message(MessageType.DEBUG, brief, detail=detail)\n      File \"/usr/lib/python3.6/site-packages/buildstream/plugin.py\", line 693, in __message\n        self.__context.message(message)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_context.py\", line 425, in message\n        self._message_handler(message, context=self)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_frontend/app.py\", line 677, in _message_handler\n        text = self.logger.render(message)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_frontend/widget.py\", line 591, in render\n        return self._render(message)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_frontend/widget.py\", line 626, in _render\n        text += widget.render(message)\n      File \"/usr/lib/python3.6/site-packages/buildstream/_frontend/widget.py\", line 228, in render\n        _, key, missing = plugin._get_display_key()\n      File \"/usr/lib/python3.6/site-packages/buildstream/element.py\", line 1148, in _get_display_key\n        cache_key = self._get_cache_key()\n      File \"/usr/lib/python3.6/site-packages/buildstream/element.py\", line 1001, in _get_cache_key\n        return self.__cache_key\n    AttributeError: 'StackElement' object has no attribute '_Element__cache_key'\n```\n\n## What is the current bug behavior?\n\nA traceback.\n\n## What is the expected correct behavior?\n\nThe same as `bst show all.bst`, but with additional debug input.\n\n## Other relevant information\n\nI don't think it matters, but that's [with the Fedora package I made](https://copr.fedorainfracloud.org/coprs/bochecha/buildstream/).\n\n* BuildStream version affected: 1.1.6\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/578/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/578/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/577", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/577/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/577/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/577/events", "html_url": "https://github.com/apache/buildstream/issues/577", "id": 800093954, "node_id": "MDU6SXNzdWU4MDAwOTM5NTQ=", "number": 577, "title": "Unhandled exception when build reports \"bug\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-02-03T08:23:38Z", "updated_at": "2021-02-03T08:25:58Z", "closed_at": "2021-02-03T08:25:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/577)\nIn GitLab by [[Gitlab user @adds68]](https://gitlab.com/adds68) on Aug 14, 2018, 21:45\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen building the freedesktop sdk i encountered a stack trace for sdk-integration.bst\n\n## Steps to reproduce\n\nBuild freedesktop-sdk using the Makefile provided in the git repo using buildstream 1.1.5\n\n\n## What is the current bug behavior?\n\nA stack trace occurs related the cache\n\n\n## What is the expected correct behavior?\n\nNo stack trace to occur\n\n\n## Relevant logs and/or screenshots\n\n\n```\n[00:00:01][f98e9d70][build:sdk-integration.bst           ] BUG     Build\n\n    An unhandled exception occured:\n\n    Traceback (most recent call last):\n      File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_artifactcache/cascache.py\", line 95, in extract\n        os.rename(checkoutdir, dest)\n    OSError: [Errno 39] Directory not empty: '/home/adds68/.cache/buildstream/artifacts/extract/tmpghdzdw4u/freedesktop-sdk/base-iso-codes/f1862ecacbc713a82afc5a789b82c3015a94f49cc03f74095b47dfff90e520b6' -> '/home/adds68/.cache/buildstream/artifacts/extract/freedesktop-sdk/base-iso-codes/1ef40f5f758cacb7454fe65f3c292ccdfe2ac5af1efd256dd6fb249abb141db7'\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/job.py\", line 398, in _child_action\n        result = self.child_process()\n      File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n        return self._action_cb(self._element)\n      File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_scheduler/queues/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/element.py\", line 1463, in _assemble\n        collect = self.assemble(sandbox)\n      File \"/home/adds68/git-repos/freedesktop-sdk/plugins/elements/collect-integration.py\", line 47, in assemble\n        bstdata = dependency.get_public_data('bst')\n      File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/element.py\", line 825, in get_public_data\n        self.__load_public_data()\n      File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/element.py\", line 2476, in __load_public_data\n        artifact_base, _ = self.__extract()\n      File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/element.py\", line 2343, in __extract\n        return (self.__artifacts.extract(self, key), key)\n      File \"/home/adds68/.local/lib/python3.7/site-packages/buildstream/_artifactcache/cascache.py\", line 102, in extract\n        if e.errno not in [os.errno.ENOTEMPTY, os.errno.EEXIST]:\n    AttributeError: module 'os' has no attribute 'errno'\n```\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/577/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/577/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/576", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/576/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/576/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/576/events", "html_url": "https://github.com/apache/buildstream/issues/576", "id": 800092685, "node_id": "MDU6SXNzdWU4MDAwOTI2ODU=", "number": 576, "title": "\"Inconsitent Pipeline\" error when workspace is open", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-03T08:21:48Z", "updated_at": "2021-02-03T08:23:31Z", "closed_at": "2021-02-03T08:23:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/576)\nIn GitLab by [[Gitlab user @adds68]](https://gitlab.com/adds68) on Aug 14, 2018, 21:35\n\n## Summary\n\nWhen trying to build an element that has had a workspace open against it, i am seeing this error:\n\n```\nInconsistent pipeline\n\n    Exact versions are missing for the following elements\n    Try tracking these elements first with `bst track`\n\n      desktop/sdl2.bst\n\n```\n\n\n## Steps to reproduce\nAfter some investigation i found these steps caused the issues:\n\n* modify a .bst element\n* create a workspace \n* build the element\n* rm -r the workspace directory\n* try to build the element again\n\n## What is the current bug behavior?\n\nWhen you try to build the element after removing the workspace directory you see the error above, and running bst track on the element does not fox the dependency issue.\n\nWhen you close the bst workspace, the error no longer occurs and the element builds as expected.\n\n\n## What is the expected correct behavior?\n\nAlert the user that a workspace is open against this element and that they should close it.\n\n## Relevant logs and/or screenshots\n\nBst error\n\n```\nInconsistent pipeline\n\n    Exact versions are missing for the following elements\n    Try tracking these elements first with `bst track`\n\n      desktop/sdl2.bst\n\n```\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.2\" x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/576/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/576/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/572", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/572/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/572/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/572/events", "html_url": "https://github.com/apache/buildstream/issues/572", "id": 800086776, "node_id": "MDU6SXNzdWU4MDAwODY3NzY=", "number": 572, "title": "CAS: URLs used for blob download and upload do not match protocol spec", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-03T08:12:56Z", "updated_at": "2021-02-03T08:14:36Z", "closed_at": "2021-02-03T08:14:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/572)\nIn GitLab by [[Gitlab user @juergbi]](https://gitlab.com/juergbi) on Aug 10, 2018, 11:16\n\nThe latest remote execution API specifies `resource_name` for downloads as `{instance_name}/blobs/{hash}/{size}` and for uploads as `{instance_name}/uploads/{uuid}/blobs/{hash}/{size}`. Our implementation currently uses `{hash}/{size}` for both. `{instance_name}` is optional, however, the other parts are not.\n\nWhile this does not affect BuildStream clients talking to `bst-artifact-server`, it breaks interoperability with other CAS implementations and should be fixed as soon as possible.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/572/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/572/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/571", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/571/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/571/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/571/events", "html_url": "https://github.com/apache/buildstream/issues/571", "id": 800084317, "node_id": "MDU6SXNzdWU4MDAwODQzMTc=", "number": 571, "title": "ruamel.yaml automatically updates to 0.15.52 and breaks BuildStream", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2021-02-03T08:09:17Z", "updated_at": "2021-02-03T08:12:49Z", "closed_at": "2021-02-03T08:12:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/571)\nIn GitLab by [[Gitlab user @jmacarthur]](https://gitlab.com/jmacarthur) on Aug 9, 2018, 18:33\n\n## Summary\n\nWe don't pin a version of ruamel in our `setup.py` and the newly-released 0.15.52 version breaks BuildStream.\n\n## Steps to reproduce\n\nOn a currently installed BuildStream instance, run `pip3 install --user -e .` as per the current install instructions, then invoke `bst` (Just `bst` on the command line on its own is enough).\n\n## What is the current bug behavior?\n\nLine present in pip upgrade log:\n\n```\nCollecting ruamel.yaml (from BuildStream==1.3.0+38.g8c9fd9e4)\n  Using cached https://files.pythonhosted.org/packages/07/0f/c57e0f402f8f0b780d0cf3b5814489c30a531b7fdf21f9180a90320bc347/ruamel.yaml-0.15.52-cp36-cp36m-manylinux1_x86_64.whl\n```\n\nRunning `bst` will produce:\n\n```\nError loading user configuration: YAML file has content of type 'CommentedMap' instead of expected type 'dict': /home/jimmacarthur/bs/buildstream/buildstream/data/userconfig.yaml\n```\n\n## What is the expected correct behavior?\n\n`bst` should work as it previously did.\n\n## Possible fixes\n\nPin ruamel version number in `setup.py`, like this:\n\n```\n-          'ruamel.yaml',\n+          'ruamel.yaml <= 0.15',\n```\n\n\n## Other relevant information\n\nPinning is the current advice given by ruamel for production systems:\n\n```\nStarting with version 0.15.0 the way YAML files are loaded and dumped is changing. See the API doc for details. Currently existing functionality will throw a warning before being changed/removed. For production systems you should pin the version being used with ``ruamel.yaml<=0.15``.\n```\n\n* BuildStream version affected: /milestone %BuildStream_v1.3\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/571/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/571/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/565", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/565/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/565/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/565/events", "html_url": "https://github.com/apache/buildstream/issues/565", "id": 800074675, "node_id": "MDU6SXNzdWU4MDAwNzQ2NzU=", "number": 565, "title": "\"bst track\" of project.conf included junctions does not work", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-03T07:54:58Z", "updated_at": "2021-02-03T07:56:43Z", "closed_at": "2021-02-03T07:56:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/565)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Aug 8, 2018, 10:46\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWith include directive branch, I forgot to add a test for tracking junctions. And I broke the behavior before merge. It is impossible to track a junction if that junction was used in an include directive in `project.conf`.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nHave a junction used in an include directive in `project.conf`.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nThe junction is tracked.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nYou get a complain that you should track the junction.\n\n```\n[--:--:--][][] START   Track\n[--:--:--][][] START   Loading elements\n[00:00:00][][] SUCCESS Loading elements\n[--:--:--][][] START   Resolving elements\n[00:00:00][][] SUCCESS Resolving elements\n[00:00:00][][] FAILURE Track\n\nSubproject has no ref for junction: junction.bst\n\n    Try tracking the junction element with `bst track junction.bst`\n```\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.2\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/565/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/561", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/561/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/561/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/561/events", "html_url": "https://github.com/apache/buildstream/issues/561", "id": 800071798, "node_id": "MDU6SXNzdWU4MDAwNzE3OTg=", "number": 561, "title": "The artifacts/extract directory is never cleaned", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-03T07:50:14Z", "updated_at": "2021-02-03T07:51:56Z", "closed_at": "2021-02-03T07:51:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/561)\nIn GitLab by [[Gitlab user @tacgomes]](https://gitlab.com/tacgomes) on Aug 7, 2018, 15:17\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThe `artifacts/extract` directory is never cleaned after BuildStream terminates.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n1. `bst build $somebst`\n2. `bst checkout $somebst dir`\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nThe `artifacts/extract` directory has debris when BuildStream terminates.\n\n## What is the expected correct behavior?\n\nThe `artifacts/extract` directory is empty when BuildStream terminates.\n\n[//]: # (What you should see instead)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n* Clean directory at startup.\n* Clean the directory whenever the cache size exceeded the quota.\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/561/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/561/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/559", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/559/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/559/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/559/events", "html_url": "https://github.com/apache/buildstream/issues/559", "id": 800070344, "node_id": "MDU6SXNzdWU4MDAwNzAzNDQ=", "number": 559, "title": "Spurious error when running fedora job (the change in the MR was only on documentation)", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T07:47:50Z", "updated_at": "2021-02-03T07:48:43Z", "closed_at": "2021-02-03T07:48:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/559)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Aug 7, 2018, 09:30\n\nJob [#87321473](https://gitlab.com/BuildStream/buildstream/-/jobs/87321473) failed for 01ff01779c04877110ba4944b1286229dfe03267:\n\n```\n[00:00:00][fd215cab][build:import-dev.bst                ] SUCCESS test/import-dev/fd215cab-build.10679.log\nProcess Process-834:\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/multiprocessing/process.py\", line 258, in _bootstrap\n    self.run()\n  File \"/usr/lib64/python3.6/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/_scheduler/jobs/job.py\", line 437, in _child_action\n    self._queue.put(Envelope('child_data', self.child_process_data()))\n  File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/_scheduler/jobs/elementjob.py\", line 113, in child_process_data\n    cache_size = self._element._get_artifact_cache().calculate_cache_size()\n  File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/_artifactcache/cascache.py\", line 476, in calculate_cache_size\n    self.cache_size = utils._get_dir_size(self.casdir)\n  File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/utils.py\", line 572, in _get_dir_size\n    return get_size(path)\n  File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/utils.py\", line 568, in get_size\n    total += get_size(f.path)\n  File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/utils.py\", line 565, in get_size\n    total += f.stat(follow_symlinks=False).st_size\nFileNotFoundError: [Errno 2] No such file or directory: '/builds/BuildStream/buildstream/dist/buildstream/tmp/test_push_after_pull0/cache/artifacts/cas/tmp/tmph4th_esx'\nCoverage.py warning: No data was collected. (no-data-collected)\nCoverage.py warning: No data was collected. (no-data-collected)\n\nBUG: Message handling out of sync, unable to retrieve failure message for element import element at import-bin.bst [line 1 column 0]\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/559/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/553", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/553/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/553/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/553/events", "html_url": "https://github.com/apache/buildstream/issues/553", "id": 800063758, "node_id": "MDU6SXNzdWU4MDAwNjM3NTg=", "number": 553, "title": "Cleanup some debris incurred by !519", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-03T07:36:45Z", "updated_at": "2021-02-03T07:38:53Z", "closed_at": "2021-02-03T07:38:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/553)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 5, 2018, 08:06\n\n## Background\r\n\r\n[//]: # (Provide a background or the root/source that justifies this task or action.)\r\n\r\nRecently a workspaces example was added to the user manual, in MR !519, which has a few problems that need to be fixed.\r\n\r\n## Task description\r\n\r\n[//]: # (Short summary of the action to be executed)\r\n\r\n* [x] Fix the `.. note::` statement at the beginning of the [workspaces tutorial](http://buildstream.gitlab.io/buildstream/developing/workspaces.html), the link is not rendering and the note box is not showing.\r\n* [x] Fix the cheat invocation of `bst` with appended shell commands separated by `;`, which is just not supported and doesnt even work when building the docs (see the [online tutorial](http://buildstream.gitlab.io/buildstream/developing/workspaces.html#making-code-changes) and notice that the output of the `bst shell` invocation does **not** show the expected *\"We can use workspaces\"* text).\r\n* [x] Move the stored session html to `doc/source/sessions-stored`, where the sessions are stored\r\n\r\nAlternatively to moving the stored session html files to the place where we are storing them, one could attempt to refactor the Makefile and move all the stored session html files to `doc/source/session`, once one has ensured that docs build under every circumstance, and rebuild properly when `BST_FORCE_SESSION_REBUILD` is specified.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/553/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/551", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/551/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/551/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/551/events", "html_url": "https://github.com/apache/buildstream/issues/551", "id": 800061517, "node_id": "MDU6SXNzdWU4MDAwNjE1MTc=", "number": 551, "title": "Artifacts are being pushed just after being pulled from the CAS cache", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-02-03T07:32:54Z", "updated_at": "2022-02-20T03:01:32Z", "closed_at": "2022-02-20T03:01:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/551)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Aug 4, 2018, 02:30\n\n## Summary\nSeems artifacts are being pushed just after being pulled from the CAS cache\n\n## Steps to reproduce\nSee logs below\n\n## What is the current bug behavior?\nSeems atifacts are being pushed just after being pulled\n\n## What is the expected correct behavior?\nDo not push something it has been just pulled from the cache\n\n## Relevant logs and/or screenshots\n\nhttps://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/86787429\n\n## Possible fixes\n\n## Other relevant information\n\n* BuildStream version affected: 1.1.4+32.g58cfe019", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/551/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/551/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/550", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/550/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/550/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/550/events", "html_url": "https://github.com/apache/buildstream/issues/550", "id": 800060071, "node_id": "MDU6SXNzdWU4MDAwNjAwNzE=", "number": 550, "title": "pulling from the cache doesn't honor the fetchers setting", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-02-03T07:30:33Z", "updated_at": "2021-02-03T07:32:47Z", "closed_at": "2021-02-03T07:32:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/550)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Aug 3, 2018, 09:54\n\n## Summary\n\nAt least when pulling from the cache, bst doesn't seem to honor the `fetchers` setting.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\nI have this in my config\n```\nscheduler:\n  fetchers: 2\n  builders: 2\n```\nand try to build something (e.g. from freedesktop-sdk).\n\n## What is the current bug behavior?\n\npulling from the cache uses 4 parallel jobs.\n\n## What is the expected correct behavior?\n\npulling from the cache should use 2 parallel jobs.\n\n## Relevant logs and/or screenshots\n\n\n## Possible fixes\n\n\n## Other relevant information\n\n* BuildStream version affected: /milestone %BuildStream_v1.2\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/550/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/550/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/547", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/547/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/547/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/547/events", "html_url": "https://github.com/apache/buildstream/issues/547", "id": 800057340, "node_id": "MDU6SXNzdWU4MDAwNTczNDA=", "number": 547, "title": "Ugly unhandled exception when cache server restarted", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107764, "node_id": "MDU6TGFiZWwyNzA5MTA3NzY0", "url": "https://api.github.com/repos/apache/buildstream/labels/cache%20server", "name": "cache server", "color": "69D100", "default": false, "description": "Issue related to cache server interactions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T07:26:27Z", "updated_at": "2021-02-03T07:27:18Z", "closed_at": "2021-02-03T07:27:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/547)\nIn GitLab by [[Gitlab user @coldtom]](https://gitlab.com/coldtom) on Aug 2, 2018, 17:59\n\n## Summary\n\nOver on freedesktop-sdk I recently had a pipeline fail when [[Gitlab user @jjardon]](https://gitlab.com/jjardon) restarted the cache server, with an ugly stack trace. \n\n## Steps to reproduce\n\nRestart a server while an artifact is being pulled.\n\n\n## What is the current bug behavior?\n\nThe build/pull will fail with an ugly stack trace\n\n\n## What is the expected correct behavior?\n\n- A polite error message\n- (better) Do not fail at all: continue the build even if the cache server fails for some reason\n\n\n## Relevant logs and/or screenshots\n\n```\n\u001b[36m\u001b[2m[\u001b[0m\u001b[33m00\u001b[0m\u001b[36m\u001b[2m:\u001b[0m\u001b[33m00\u001b[0m\u001b[36m\u001b[2m:\u001b[0m\u001b[33m20\u001b[0m\u001b[36m\u001b[2m][\u001b[0m\u001b[31m\u001b[2m29a0ed0c\u001b[0m\u001b[36m\u001b[2m][\u001b[0m\u001b[33m pull\u001b[0m\u001b[36m\u001b[2m:\u001b[0m\u001b[33mdesktop/xorg-lib-xxf86vm.bst  \u001b[0m\u001b[36m\u001b[2m] \u001b[0m\u001b[31m\u001b[1m\u001b[2mBUG    \u001b[0m\u001b[36m\u001b[2m \u001b[0mPull\n\n    \u001b[31m\u001b[1m\u001b[2m    An unhandled exception occured:\n    \n        Traceback (most recent call last):\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/_scheduler/jobs/job.py\", line 398, in _child_action\n            result = self.child_process()\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/_scheduler/jobs/elementjob.py\", line 94, in child_process\n            return self._action_cb(self._element)\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/_scheduler/queues/pullqueue.py\", line 36, in process\n            return element._pull()\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/element.py\", line 1616, in _pull\n            pulled = self._pull_strong(progress=progress)\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/element.py\", line 1580, in _pull_strong\n            if not self.__artifacts.pull(self, key, progress=progress):\n          File \"/root/.local/lib/python3.6/site-packages/buildstream/_artifactcache/cascache.py\", line 226, in pull\n            response = remote.ref_storage.GetReference(request)\n          File \"/usr/local/lib64/python3.6/site-packages/grpc/_channel.py\", line 514, in __call__\n            return _end_unary_response_blocking(state, call, False, None)\n          File \"/usr/local/lib64/python3.6/site-packages/grpc/_channel.py\", line 448, in _end_unary_response_blocking\n            raise _Rendezvous(state, None, None, deadline)\n        grpc._channel._Rendezvous: <_Rendezvous of RPC that terminated with:\n        \tstatus = StatusCode.UNAVAILABLE\n        \tdetails = \"Connect Failed\"\n        \tdebug_error_string = \"{\"created\":\"[[Gitlab user @1533226823]](https://gitlab.com/1533226823).557230502\",\"description\":\"Failed to create subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":2673,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1533226823]](https://gitlab.com/1533226823).557203181\",\"description\":\"Pick Cancelled\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":210,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1533226823]](https://gitlab.com/1533226823).556671571\",\"description\":\"Connect Failed\",\"file\":\"src/core/ext/filters/client_channel/subchannel.cc\",\"file_line\":641,\"grpc_status\":14,\"referenced_errors\":[{\"created\":\"[[Gitlab user @1533226823]](https://gitlab.com/1533226823).556559218\",\"description\":\"Failed to connect to remote host: FD Shutdown\",\"file\":\"src/core/lib/iomgr/lockfree_event.cc\",\"file_line\":190,\"os_error\":\"Timeout occurred\",\"referenced_errors\":[{\"created\":\"[[Gitlab user @1533226823]](https://gitlab.com/1533226823).556518428\",\"description\":\"connect() timed out\",\"file\":\"src/core/lib/iomgr/tcp_client_posix.cc\",\"file_line\":114}],\"target_address\":\"ipv4:209.97.137.202:11002\"}]}]}]}\"\n        >\u001b[0m\n\n\u001b[33m\u001b[1mPipeline Summary\n\u001b[0m\u001b[36m\u001b[2m  Total:       \u001b[0m\u001b[33m330\u001b[0m\n\u001b[36m\u001b[2m  Session:     \u001b[0m\u001b[33m330\u001b[0m\n\u001b[36m\u001b[2m  Pull Queue:  \u001b[0m\u001b[33mprocessed \u001b[0m\u001b[32m78\u001b[0m\u001b[36m\u001b[2m, \u001b[0m\u001b[33mskipped \u001b[0m\u001b[33m140\u001b[0m\u001b[36m\u001b[2m, \u001b[0m\u001b[33mfailed \u001b[0m\u001b[31m\u001b[2m37\u001b[0m \n\u001b[36m\u001b[2m  Fetch Queue: \u001b[0m\u001b[33mprocessed \u001b[0m\u001b[32m81\u001b[0m\u001b[36m\u001b[2m, \u001b[0m\u001b[33mskipped \u001b[0m\u001b[33m73\u001b[0m\u001b[36m\u001b[2m, \u001b[0m \u001b[33mfailed \u001b[0m\u001b[31m\u001b[2m0\u001b[0m  \n\u001b[36m\u001b[2m  Build Queue: \u001b[0m\u001b[33mprocessed \u001b[0m\u001b[32m0\u001b[0m\u001b[36m\u001b[2m, \u001b[0m \u001b[33mskipped \u001b[0m\u001b[33m50\u001b[0m\u001b[36m\u001b[2m, \u001b[0m \u001b[33mfailed \u001b[0m\u001b[31m\u001b[2m0\u001b[0m  \n\u001b[36m\u001b[2m  Push Queue:  \u001b[0m\u001b[33mprocessed \u001b[0m\u001b[32m42\u001b[0m\u001b[36m\u001b[2m, \u001b[0m\u001b[33mskipped \u001b[0m\u001b[33m8\u001b[0m\u001b[36m\u001b[2m, \u001b[0m  \u001b[33mfailed \u001b[0m\u001b[31m\u001b[2m0\u001b[0m  \n\n\nsection_end:1533227474:build_script\n\u001b[0Ksection_start:1533227474:after_script\n\u001b[0Ksection_end:1533227477:after_script\n\u001b[0Ksection_start:1533227477:upload_artifacts\n\u001b[0K\u001b[32;1mUploading artifacts...\u001b[0;m\n/builds/freedesktop-sdk/freedesktop-sdk/cache/buildstream/logs: found 942 matching files\u001b[0;m \nUploading artifacts to coordinator... ok          \u001b[0;m  id\u001b[0;m=86395870 responseStatus\u001b[0;m=201 Created token\u001b[0;m=bDX_5r6K\nsection_end:1533227482:upload_artifacts\n\u001b[0K\u001b[31;1mERROR: Job failed: exit code 1\n\u001b[0;m\n```\nThat stack trace but several times over.\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/547/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/547/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/545", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/545/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/545/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/545/events", "html_url": "https://github.com/apache/buildstream/issues/545", "id": 800054899, "node_id": "MDU6SXNzdWU4MDAwNTQ4OTk=", "number": 545, "title": "remote source plugin can introduce non-determinism", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-03T07:22:50Z", "updated_at": "2021-02-03T07:25:02Z", "closed_at": "2021-02-03T07:25:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/545)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 2, 2018, 13:57\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nSimilarly to #527, and discussed already here https://gitlab.com/BuildStream/buildstream/merge_requests/581#note_91185598 and in following comments, the `remote` source will store a downloaded file locally in the source cache, which it will later stage; without ensuring that the mode bits of the file are deterministic, even though the mode of the file itself is dependent on the user's `umask`.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/545/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/544", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/544/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/544/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/544/events", "html_url": "https://github.com/apache/buildstream/issues/544", "id": 800052294, "node_id": "MDU6SXNzdWU4MDAwNTIyOTQ=", "number": 544, "title": "bzr source plugin can introduce non-determinism", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2021-02-03T07:19:39Z", "updated_at": "2021-02-03T07:22:43Z", "closed_at": "2021-02-03T07:22:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/544)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 2, 2018, 13:53\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen staging the `bzr` checkout at Source.stage() time, we are not making any effort to ensure that the staged files have deterministic file attributes.\n\nAs far as I can see, similar to issue #527 and more similar to #543, the checkout will result in file permissions which depend on the user's `umask`.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/544/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/544/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/543", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/543/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/543/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/543/events", "html_url": "https://github.com/apache/buildstream/issues/543", "id": 800050008, "node_id": "MDU6SXNzdWU4MDAwNTAwMDg=", "number": 543, "title": "git source plugin can introduce non-determinism", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2021-02-03T07:16:23Z", "updated_at": "2021-02-03T07:19:31Z", "closed_at": "2021-02-03T07:19:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/543)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 2, 2018, 13:51\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen cloning the `git` repository at `Source.stage()` time, we are not making any effort to ensure that the staged files have deterministic file attributes.\n\nAs far as I can see, similar to issue #527, the checkout will result in file permissions which depend on the user's `umask`.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/543/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/543/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/542", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/542/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/542/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/542/events", "html_url": "https://github.com/apache/buildstream/issues/542", "id": 800048574, "node_id": "MDU6SXNzdWU4MDAwNDg1NzQ=", "number": 542, "title": "deb source plugin can introduce non determinism", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T07:14:10Z", "updated_at": "2021-02-03T07:16:16Z", "closed_at": "2021-02-03T07:16:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/542)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 2, 2018, 13:47\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThis is in the same vein as issue #540 for tar sources, as this source will simply treat the `deb` as an archive and extract it.\n\nThe result of extracting it, or at least staging it to the sandbox, should be guaranteed to be deterministic.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/542/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/542/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/541", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/541/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/541/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/541/events", "html_url": "https://github.com/apache/buildstream/issues/541", "id": 800047164, "node_id": "MDU6SXNzdWU4MDAwNDcxNjQ=", "number": 541, "title": "zip source can introduce non-determinism", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-03T07:12:05Z", "updated_at": "2021-02-03T07:14:02Z", "closed_at": "2021-02-03T07:14:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/541)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 2, 2018, 13:39\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nAlong the same vein as #540 for the tar source, this needs some investigation.\n\nIf `zip` extractions can result in any different result based on the user's `umask` or whether BuildStream is being run as a super user, this needs to be addressed.\n\nAfter investigation, if the file attributes are found to be exactly the same in all host environments, we can close this.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/541/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/540", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/540/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/540/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/540/events", "html_url": "https://github.com/apache/buildstream/issues/540", "id": 800045637, "node_id": "MDU6SXNzdWU4MDAwNDU2Mzc=", "number": 540, "title": "tar source introduces non-determinism", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-03T07:09:41Z", "updated_at": "2021-02-03T07:11:57Z", "closed_at": "2021-02-03T07:11:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/540)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Aug 2, 2018, 13:37\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nSimilarly to #527, there is a concern that sources do not always stage the same thing depending on the host environment.\n\nFor the case of `tar`, it is known to behave differently depending on whether it is run by root or not. All ownership bits are stripped, file types which the user is not allowed to create are ignored, as well as extended attributes which the user cannot create.\n\nIn the short term, we should ensure determinism when running BuildStream as root; in the future, we should be able to stage these files into the CAS based SourceCache (as described in #521) and will eventually be able to inform the source cache of the attributes which should appear in the sandbox without needing permissions to set the attributes on the actual underlying filesystem.\n\nWith all problems solved including #38, extracting a tarball should end up always having the effect of being root from the point of view of the sandbox, even when BuildStream is run as a regular user.\n", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/540/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/540/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/538", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/538/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/538/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/538/events", "html_url": "https://github.com/apache/buildstream/issues/538", "id": 800032246, "node_id": "MDU6SXNzdWU4MDAwMzIyNDY=", "number": 538, "title": "ostree mirror fallback breaks assertion", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2021-02-03T06:49:27Z", "updated_at": "2021-02-03T06:53:06Z", "closed_at": "2021-02-03T06:53:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/538)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Aug 1, 2018, 16:37\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen trying to fetch from ostree mirror when upstream is down, fetchqueue fails with a broken assertion.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n - Have a setup with an upstream and a mirror ostree repositories.\n - Take down upstream.\n - Fetch.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\n```\n        Traceback (most recent call last):\n          File \"/home/valentin/repos/buildstream/buildstream/_scheduler/queues/queue.py\", line 310, in _job_done\n            processed = self.done(job, element, result, success)\n          File \"/home/valentin/repos/buildstream/buildstream/_scheduler/queues/fetchqueue.py\", line 78, in done\n            assert element._get_consistency() == Consistency.CACHED\n        AssertionError\n```\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nNo error.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.2\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/538/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/538/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/537", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/537/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/537/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/537/events", "html_url": "https://github.com/apache/buildstream/issues/537", "id": 800030065, "node_id": "MDU6SXNzdWU4MDAwMzAwNjU=", "number": 537, "title": "Mirror fallback does not work for git", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2021-02-03T06:46:11Z", "updated_at": "2021-02-03T06:49:20Z", "closed_at": "2021-02-03T06:49:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/537)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Aug 1, 2018, 16:35\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nMirror fallback does not work for git. The git plugin tries to get the list of submodules from locally cloned repository that is taken from upstream. If upstream is not available, then fetch does not happen because it fails while getting the fetchers.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n - Have an upstream and mirror for a git repository.\n - Take down the upstream mirror.\n - Make sure you do not have any repository or remove download cache.\n - Try to fetch.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nIt fails and never tries to download from mirror.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nIt should fallback to the mirror.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.2\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/537/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/537/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/535", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/535/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/535/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/535/events", "html_url": "https://github.com/apache/buildstream/issues/535", "id": 800028180, "node_id": "MDU6SXNzdWU4MDAwMjgxODA=", "number": 535, "title": "BuildStream doesn't fix the version of its dependencies", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T06:43:19Z", "updated_at": "2021-02-03T06:44:56Z", "closed_at": "2021-02-03T06:44:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/535)\nIn GitLab by [[Gitlab user @palvarez89]](https://gitlab.com/palvarez89) on Aug 1, 2018, 10:27\n\n## Summary\n\nBuildStream is installing a broken version of ruamel.yaml.\n\n## Steps to reproduce\n\nSee defs2bst log: https://gitlab.com/baserock/definitions/-/jobs/85875464\n\n\n## What is the current bug behavior?\n\nWhen installing BuildStream there is not fixed version of the dependencies to install (see [setup.py](https://gitlab.com/BuildStream/buildstream/blob/0ddbf0e0d0ecb69d3ae830740295e757e38eeddf/setup.py#L251)). Making possible to install some broken dependencies. Sometimes some projects will change their APIs which will also result in a broken BuildStream.\n\n\n## What is the expected correct behavior? (Possible fixes)\n\nWe should fix the versions of the dependencies, so that if in a year I come back and try to use the same version of BuildStream, I have a working tool, and the same results.\n\n* BuildStream version affected: all (master, 1.0.1, 1.1.3, etc)\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/535/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/534", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/534/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/534/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/534/events", "html_url": "https://github.com/apache/buildstream/issues/534", "id": 800026460, "node_id": "MDU6SXNzdWU4MDAwMjY0NjA=", "number": 534, "title": "Failed builds not pushing artifacts on quit", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2021-02-03T06:40:30Z", "updated_at": "2022-08-20T07:53:36Z", "closed_at": "2022-08-20T07:53:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/534)\nIn GitLab by [[Gitlab user @knownexus]](https://gitlab.com/knownexus) on Aug 1, 2018, 10:12\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nIf, when a build fails, the user quits instead of continuing, the artifact will not be pushed\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\nBuild a project that fails,\n\nWhen given the options of (t)terminate, (q)quit, (c)continue\n\nselect `q`\n\nCheck for the artifact in the cache\n\nThe artifact should be missing\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\nThe failed build artifact should be cached even when the quit option is selected\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\nOne option is to have the artifact be cached at the point of the build failing, so at the point of choosing whether or not to continue, it is already cached\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.4\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/534/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/534/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/533", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/533/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/533/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/533/events", "html_url": "https://github.com/apache/buildstream/issues/533", "id": 800025172, "node_id": "MDU6SXNzdWU4MDAwMjUxNzI=", "number": 533, "title": "Warning instead of error when failing to write tracking results", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-03T06:38:18Z", "updated_at": "2021-02-03T06:40:18Z", "closed_at": "2021-02-03T06:40:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/533)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Aug 1, 2018, 09:27\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nError while writing tracking result into files does not end up as an error, but as a warning.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nRemove writing rights for an element file's directory.\n\n```\nchmod 0555 elements\n```\n\nThen run `track`.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nPrints:\n\n```\n[00:00:00][][] SUCCESS Track\n```\n\nNote: The file has not been modified, which is fine.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nShould print:\n\n```\n[00:00:00][][] FAILURE Track\n```\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.1\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/533/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/531", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/531/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/531/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/531/events", "html_url": "https://github.com/apache/buildstream/issues/531", "id": 800022990, "node_id": "MDU6SXNzdWU4MDAwMjI5OTA=", "number": 531, "title": "Fetch jobs resume despite \"terminate\" option on CTRL-C", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-02-03T06:34:46Z", "updated_at": "2021-02-03T06:37:12Z", "closed_at": "2021-02-03T06:37:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/531)\nIn GitLab by [[Gitlab user @Qinusty]](https://gitlab.com/Qinusty) on Jul 31, 2018, 15:10\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen first attempting to terminate buildstream mid fetch, buildstream appears to continue/restart the fetch operation.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n- cd into `doc/examples/flatpak-autotools`\n- Ensure your `~/.cache/buildstream/artifacts` is cleared\n- Run `bst build hello.bst`\n- Wait for `fetch:base/sdk.bst` to start\n- Press `CTRL-C` followed by `t` to terminate\n    - Observe as the `STATUS` messages begin to start coming in again \n- Repeating the previous step will terminate the session as expected.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nBuildStream fails to terminate during a fetch job on the first attempt.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nBuildStream should terminate any ongoing jobs and exit as specified.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n![Screenshot_from_2018-07-31_15-08-58](/uploads/6fa43c359b5076381658f0c139b7f056/Screenshot_from_2018-07-31_15-08-58.png)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: master\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/531/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/531/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/527", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/527/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/527/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/527/events", "html_url": "https://github.com/apache/buildstream/issues/527", "id": 800015364, "node_id": "MDU6SXNzdWU4MDAwMTUzNjQ=", "number": 527, "title": "local source plugin can introduce non-determinism", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2021-02-03T06:22:02Z", "updated_at": "2021-02-03T06:25:14Z", "closed_at": "2021-02-03T06:25:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/527)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jul 30, 2018, 13:30\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nIt came to light while discussing potential new features for the new remote plugin in !581, that we might be relying on the user's `umask` to determine what permissions `local` sources will have when staged.\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nThe result of staging local sources can depend on how the BuildStream project was stored or obtained (was it in a tarball ? was it cloned in a git repository ?), or local host configuration (what is the user's `umask` ?).\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThe result of staging local sources should always be deterministic\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nNot sure what the solution for this will be, perhaps we need:\n* A sane default:\n  * Fully deterministic mode bits set at stage time, accounting only for whether the `local` file is executable or not\n  * This approach makes a reasonable assumption that whatever way you obtained your project, the local files inside the project directory at least retained the information of whether the file was executable or not.\n  * This would by default, e.g. use always `0755` for executable files, and `0644` for non-executable files\n* Some way to control the permission bits for individual files, only for the case where the user asks for that\n\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.4\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/527/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/525", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/525/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/525/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/525/events", "html_url": "https://github.com/apache/buildstream/issues/525", "id": 800011654, "node_id": "MDU6SXNzdWU4MDAwMTE2NTQ=", "number": 525, "title": "'quit' option doesn't work when interrupting a build", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T06:15:48Z", "updated_at": "2021-02-03T06:17:30Z", "closed_at": "2021-02-03T06:17:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/525)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Jul 28, 2018, 13:13\n\n## Summary\n\nInterrupting the build and choosing `quit` doesn't work.\n\n## Steps to reproduce\n\n- Interrupt a build using ^C\n- type `q` (for `quit`)\n\n## What is the current bug behavior?\n\nThe build continues normally.\n\n## What is the expected correct behavior?\n\nThe build stops after finishing currently started jobs.\n\n## Relevant logs and/or screenshots\n\nN/A\n\n## Possible fixes\n\n?\n\n## Other relevant information\n\nI'm not sure if it also happens when the build is interrupted by an error.\n\n* BuildStream version affected: 1.1.4 /milestone %BuildStream_v1.2\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/525/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/525/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/524", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/524/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/524/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/524/events", "html_url": "https://github.com/apache/buildstream/issues/524", "id": 800010434, "node_id": "MDU6SXNzdWU4MDAwMTA0MzQ=", "number": 524, "title": "fetching from ostree repos sometimes fails with a gpg error", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-02-03T06:13:42Z", "updated_at": "2021-09-08T05:29:35Z", "closed_at": "2021-09-08T05:29:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/524)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Jul 27, 2018, 21:40\n\n## Summary\n\nfetching from ostree repos sometimes fails with a gpg error (Too many open files)\n\n## Steps to reproduce\n\nI have been unable to reproduce this locally, but it happens consistently in the gitlab CI of gnome-build-meta when trying to fetch `dependencies/base-sdk-images.bst` from the bootstrap project of freedesktop-sdk. (despite my attempts to upgrade gnupg/gpgme).\n\n## What is the current bug behavior?\n\nthe fetch fails with the following error:\n\"GPG: Unable to complete signature verification: GPGME: Too many open files\"\n\n\n## What is the expected correct behavior?\n\nthe fetch succeeds\n\n## Relevant logs and/or screenshots\n\nhttps://gitlab.gnome.org/GNOME/gnome-build-meta/-/jobs/72861\n\nhttps://gitlab.gnome.org/GNOME/gnome-build-meta/-/jobs/72764\n\nhttps://gitlab.gnome.org/GNOME/gnome-build-meta/-/jobs/72101\n\nhttps://gitlab.gnome.org/GNOME/gnome-build-meta/-/jobs/72084\n\n## Possible fixes\n\nNo idea.\n\n## Other relevant information\n\nA workaround for this is to `bst fetch` a small number of elements (including the ostree repo) before running the full pipeline.\n\n* BuildStream version affected: 1.1.4 /milestone %\"BuildStream\\_v1.2\"\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/524/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/523", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/523/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/523/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/523/events", "html_url": "https://github.com/apache/buildstream/issues/523", "id": 800009303, "node_id": "MDU6SXNzdWU4MDAwMDkzMDM=", "number": 523, "title": "BuildStream doesn't hit the cache when building foreign arches", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T06:11:43Z", "updated_at": "2021-02-03T06:13:34Z", "closed_at": "2021-02-03T06:13:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/523)\nIn GitLab by [[Gitlab user @bochecha]](https://gitlab.com/bochecha) on Jul 27, 2018, 16:39\n\n## Summary\n\nI'm building org.freedesktop.Sdk/arm/unstable on my x86_64 laptop. The exact same Git revision has already been built in the CI.\n\nYet BuildStream doesn't pull from the cache, it rebuilds everything instead.\n\n## Steps to reproduce\n\n1.  Set up qemu/binfmt on your x86_64 machine, so that building for ARM just works\n2.  `git clone https://gitlab.com/freedesktop-sdk/freedesktop-sdk`\n3.  `cd freedesktop-sdk`\n4.  `git checkout bochecha/qemu-bash`\n\n    this is the branch I'm trying to build, I won't force-push so that it remains stable, which will help test more easily than on a moving \"master\"\n5.  `cd sdk`\n6.  `bst -o bootstrap_build_arch aarch64 -o target_arch arm build all.bst`\n\n## What is the current bug behavior?\n\nBuildStream will pull some things, and then proceed to rebuilding pretty much everything.\n\n## What is the expected correct behavior?\n\nBuildStream should have pulled everything from the shared cache, since everything has already been built by our CI.\n\n## Relevant logs and/or screenshots\n\nHere is an extract from [the CI build logs](https://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/84611375) (just a few random lines) :\n\n```\nfetch needed 40d8f66436c808e0d2803207cb611944d6bfa92df3e2149cf4ea8b4a6c2c8c68 bootstrap-junction.bst:coreutils.bst\n     waiting 21ecc5bf231e2a2e4a8332f418729b413feb12c70d10e54df949beccff270767 bootstrap-junction.bst:diffutils.bst\nfetch needed 2ada674ab2eb535bf757c75b883a73258b062c34a7eae357556cd01b257db414 bootstrap-junction.bst:files-stage1.bst\n     waiting 459339a2b4c1db0948e7f3d9168f0bfd9dc06cea0f5d3a6d3929189cc6251973 bootstrap-junction.bst:zlib.bst\nfetch needed 1a28b1601c89b3ffe1c106a25046b8dc66360ec48c9be47943e65c4917121fbe bootstrap-junction.bst:file.bst\n     waiting f711791e4f17914f7abe0da876627d09bfca8b43f7d64195cbe4386b57a1a5e1 bootstrap-junction.bst:findutils.bst\nfetch needed b1af27320610e2738c0ca6f99c71672bf8d8395003f549fe185ce63e5227384a bootstrap-junction.bst:gawk.bst\n     waiting e92e604dbff0f1a6006775b3faed944c6f2a2b00d649c8b4f8c186f86e34cc64 bootstrap-junction.bst:gcc.bst\n```\n\nAnd here is an extract (the same 8 lines) from what I get on my laptop right now, running `bst -o bootstrap_build_arch aarch64 -o target_arch arm build all.bst`: \n\n```\n     waiting 495f1f280a527df0b1b0fa2a83b887a31228bb5efc941112eb9b9150dffd8c00 bootstrap-junction.bst:coreutils.bst \n      cached ddb03abe3928bd9d7e2dc9d4e40d39ad0390aef293cebf6857be65a972c69872 bootstrap-junction.bst:diffutils.bst \n     waiting 05000dd93ec34d64b6cad910a7d12c2ed6fb2f38c9e7417b4652634cfca93794 bootstrap-junction.bst:files-stage1.bst \n      cached 887e19680fd9568f3387438e6720c0cbd2f5be08ba44c2b8023919c6b9193262 bootstrap-junction.bst:zlib.bst \n     waiting 805f803d01a8151b1bb2259482d1a25e22b8343fdb09117c8b74f5aae1648ab7 bootstrap-junction.bst:file.bst \n     waiting 375a0032b05c89619f022783960f6def87597de540a38f03fd52927d8421c814 bootstrap-junction.bst:findutils.bst \n     waiting b9f24859a032a4faaada15c55762feed3e644caeea23910713911633fdaab2b3 bootstrap-junction.bst:gawk.bst \n     waiting a77694f1bd40ada7fbf416dac1597aa49c1db65339081d1770798dd3fae140d4 bootstrap-junction.bst:gcc.bst \n```\n\nAs you can see, the cache keys are different.\n\nI can't figure out what difference between my laptop and the CI could cause this though. They have the same `project.conf` and `buildstream.conf`, the same version of `bst` and `bst-external`.\n\nThe only difference seems to be the arch of the host, but I don't think that should be considered when computing the cache key.\n\n\n* BuildStream version affected: bc5a40e3dccbe1cb8066171fc2c0a4a5abeaa31e to 1.2.0 at least (I haven't tried with master)\n\n[[Gitlab user @jjardon]](https://gitlab.com/jjardon)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/523/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/523/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/520", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/520/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/520/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/520/events", "html_url": "https://github.com/apache/buildstream/issues/520", "id": 800007573, "node_id": "MDU6SXNzdWU4MDAwMDc1NzM=", "number": 520, "title": "Race condition when calculating disk usage", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T06:08:41Z", "updated_at": "2021-02-03T06:10:26Z", "closed_at": "2021-02-03T06:10:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/520)\nIn GitLab by [[Gitlab user @tacgomes]](https://gitlab.com/tacgomes) on Jul 27, 2018, 10:55\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThere's an apparent race condition when calculating disk usage on a directory. See the log.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n1. Clone [freekdesktop-sdk](https://gitlab.com/freedesktop-sdk/freedesktop-sdk).\n2. Remove artifact servers configuration from `bootstrap/project.conf` and `sdk/project.conf`.\n3. Run `make`\n\nNote: I only reproduced this bug when running the above steps in the CI. It build successfully on my local machine in the first attempt.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\n## Relevant logs and/or screenshots\n\nhttps://gitlab.com/BuildStream/buildstream/-/jobs/84724566\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/520/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/520/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/519", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/519/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/519/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/519/events", "html_url": "https://github.com/apache/buildstream/issues/519", "id": 800006604, "node_id": "MDU6SXNzdWU4MDAwMDY2MDQ=", "number": 519, "title": "Issue with refs accros junctions", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T06:07:02Z", "updated_at": "2021-02-03T06:08:29Z", "closed_at": "2021-02-03T06:08:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/519)\nIn GitLab by [[Gitlab user @willsalmon]](https://gitlab.com/willsalmon) on Jul 26, 2018, 18:04\n\n## Summary\n\nThere seems to be a issue with junctions.\n\n## Steps to reproduce\n\nI clone https://gitlab.com/willsalmon/buildstream-kicad\n\nI run:\n    bst track kicad.bst\n    bst build kicad.bst\n\nInterestingly if you track the junctions before running\n\n    bst build kicad.bst\n\nThen you get different errors.\n\n\n## What is the current bug behavior?\n\nBst exits because that the ref's do not match.\n\n\n## What is the expected correct behavior?\n\nIt should down load all of the dependencies and try to build them\n\n(I dont think the project will build atm but it should at least try. And it is not getting close.)\n\n## Relevant logs and/or screenshots\n\nhttps://hastebin.com/odegehogaq.md\n\n```\n[00:00:24][784d4223][fetch:freedesktop-sdk.bst:base/gnutls.bst] WARNING Try #2 failed, retrying\n[--:--:--][784d4223][fetch:freedesktop-sdk.bst:base/gnutls.bst] START   base-sdk/base-gnutls/784d4223-fetch.15971.log\n[--:--:--][784d4223][fetch:freedesktop-sdk.bst:base/gnutls.bst] START   Fetching https://www.gnupg.org/ftp/gcrypt/gnutls/v3.6/gnutls-3.6.2.tar.xz\n[00:00:26][593520fe][fetch:freedesktop-sdk.bst:base/gnupg.bst] FAILURE Fetching https://www.gnupg.org/ftp/gcrypt/gnupg/gnupg-2.2.8.tar.bz2\n[00:00:26][593520fe][fetch:freedesktop-sdk.bst:base/gnupg.bst] FAILURE File downloaded from https://www.gnupg.org/ftp/gcrypt/gnupg/gnupg-2.2.8.tar.bz2 has sha256sum '777b4cb8ced21965a5053d4fa20fe11484f0a478f3d011cef508a1a49db50dcd', not '747e1632271bd6aa852b9c40be15a12614adad257e4a765261355812d110558e'!\n\n    Printing the last 20 lines from log file:\n    /home/will/.cache/buildstream/logs/base-sdk/base-gnupg/593520fe-fetch.15969.log\n    ======================================================================\n\n        CFLAGS: -O2 -g -fstack-protector-strong\n        CPPFLAGS: -O2 -D_FORTIFY_SOURCE=2\n        CXXFLAGS: -O2 -g -fstack-protector-strong\n        HOME: /tmp\n        LC_ALL: en_US.UTF-8\n        LDFLAGS: -fstack-protector-strong -Wl,-z,relro,-z,now\n        LOGNAME: tomjon\n        MAKEFLAGS: -j4\n        PATH: /usr/bin:/bin:/usr/sbin:/sbin\n        SHELL: /bin/sh\n        SOURCE_DATE_EPOCH: '1320937200'\n        TERM: dumb\n        TZ: UTC\n        USER: tomjon\n        USERNAME: tomjon\n        V: '1'\n    [--:--:--] START   base/gnupg.bst-0: Fetching https://www.gnupg.org/ftp/gcrypt/gnupg/gnupg-2.2.8.tar.bz2\n    [00:00:26] FAILURE base/gnupg.bst-0: Fetching https://www.gnupg.org/ftp/gcrypt/gnupg/gnupg-2.2.8.tar.bz2\n    [00:00:26] FAILURE base/gnupg.bst: File downloaded from https://www.gnupg.org/ftp/gcrypt/gnupg/gnupg-2.2.8.tar.bz2 has sha256sum '777b4cb8ced21965a5053d4fa20fe11484f0a478f3d011cef508a1a49db50dcd', not '747e1632271bd6aa852b9c40be15a12614adad257e4a765261355812d110558e'!\n    ======================================================================\n```\n\n## Other relevant information\n\n* BuildStream version affected: current master ie. f62b6cb7420c91c2f87b3ebba4dcfcf16b4d6f0a\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/519/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/516", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/516/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/516/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/516/events", "html_url": "https://github.com/apache/buildstream/issues/516", "id": 800004089, "node_id": "MDU6SXNzdWU4MDAwMDQwODk=", "number": 516, "title": "BuildStream can not build from non-numeric tags", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T06:02:49Z", "updated_at": "2021-02-03T06:04:39Z", "closed_at": "2021-02-03T06:04:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/516)\nIn GitLab by [[Gitlab user @franred]](https://gitlab.com/franred) on Jul 26, 2018, 11:33\n\n## Background\r\n\r\n[//]: # Trying to build with BuildStream tag PRE_CAS_MERGE_JULY_2018 doesn't work\r\n\r\n## Task description\r\n\r\n[//]: # Summary:\r\n\r\n* Please see the log and follow the steps shown on it\r\n\r\n## Acceptance Criteria\r\n\r\n[//]: # BuildStream should build from any tag in the respository if documentation says you can use BuildStream from source\r\n\r\n## Error log and Steps to reproduce\r\n\r\n* NOTE: the user had buildstream installed in the system using \"pip3 install --user -e .\" in previous versions\r\n\r\n```\r\n$ cd buildstream\r\n\r\n$ git checkout PRE_CAS_MERGE_JULY_2018\r\nNote: checking out 'PRE_CAS_MERGE_JULY_2018'.\r\n\r\nYou are in 'detached HEAD' state. You can look around, make experimental\r\nchanges and commit them, and you can discard any commits you make in this\r\nstate without impacting any branches by performing another checkout.\r\n\r\nIf you want to create a new branch to retain commits you create, you may\r\ndo so (now or later) by using -b with the checkout command again. Example:\r\n\r\n  git checkout -b <new-branch-name>\r\n\r\nHEAD is now at 4c6512d6... Only redirect elements for workspace and track operations\r\n\r\n$ pip3 uninstall buildstream\r\nUninstalling BuildStream-1.1.3+235.g1016dcb4:\r\n  /home/levy/.local/lib/python3.5/site-packages/BuildStream.egg-link\r\nProceed (y/n)? y\r\n  Successfully uninstalled BuildStream-1.1.3+235.g1016dcb4\r\n\r\n$ pip3 install --user -e .\r\nObtaining file:///home/levy/repositories/buildstream\r\nCollecting setuptools (from BuildStream===PRE-CAS-MERGE-JULY-2018)\r\n  Using cached https://files.pythonhosted.org/packages/ff/f4/385715ccc461885f3cedf57a41ae3c12b5fec3f35cce4c8706b1a112a133/setuptools-40.0.0-py2.py3-none-any.whl\r\nCollecting psutil (from BuildStream===PRE-CAS-MERGE-JULY-2018)\r\nCollecting ruamel.yaml (from BuildStream===PRE-CAS-MERGE-JULY-2018)\r\n  Using cached https://files.pythonhosted.org/packages/03/4d/c3f1fa742b627ebe97e63ed71e2dedd23462a1369df374944270f75bb1e2/ruamel.yaml-0.15.44-cp35-cp35m-manylinux1_x86_64.whl\r\nCollecting pluginbase (from BuildStream===PRE-CAS-MERGE-JULY-2018)\r\nCollecting Click (from BuildStream===PRE-CAS-MERGE-JULY-2018)\r\n  Using cached https://files.pythonhosted.org/packages/34/c1/8806f99713ddb993c5366c362b2f908f18269f8d792aff1abfd700775a77/click-6.7-py2.py3-none-any.whl\r\nCollecting blessings (from BuildStream===PRE-CAS-MERGE-JULY-2018)\r\n  Using cached https://files.pythonhosted.org/packages/03/74/489f85a78247609c6b4f13733cbf3ba0d864b11aa565617b645d6fdf2a4a/blessings-1.7-py3-none-any.whl\r\nCollecting jinja2>=2.10 (from BuildStream===PRE-CAS-MERGE-JULY-2018)\r\n  Using cached https://files.pythonhosted.org/packages/7f/ff/ae64bacdfc95f27a016a7bed8e8686763ba4d277a78ca76f32659220a731/Jinja2-2.10-py2.py3-none-any.whl\r\nCollecting six (from blessings->BuildStream===PRE-CAS-MERGE-JULY-2018)\r\n  Using cached https://files.pythonhosted.org/packages/67/4b/141a581104b1f6397bfa78ac9d43d8ad29a7ca43ea90a2d863fe3056e86a/six-1.11.0-py2.py3-none-any.whl\r\nCollecting MarkupSafe>=0.23 (from jinja2>=2.10->BuildStream===PRE-CAS-MERGE-JULY-2018)\r\nInstalling collected packages: setuptools, psutil, ruamel.yaml, pluginbase, Click, six, blessings, MarkupSafe, jinja2, BuildStream\r\n  Running setup.py develop for BuildStream\r\nSuccessfully installed BuildStream Click-6.7 MarkupSafe-1.0 blessings-1.7 jinja2-2.10 pluginbase-0.7 psutil-5.4.6 ruamel.yaml-0.15.44 setuptools-40.0.0 six-1.11.0\r\n\r\n$ git clone git[[Gitlab user @gitlab]](https://gitlab.com/gitlab).com:baserock/definitions.git\r\n\r\n$ cd definitions\r\n\r\n$ bst --verbose --debug build systems/minimal-system-image-x86_64.bst \r\npid:12253 id:000[--:--:--][][] START   Build\r\npid:12253 id:000[--:--:--][][] START   Loading pipeline\r\npid:12253 id:000[00:00:01][][] SUCCESS Loading pipeline\r\npid:12253 id:000[--:--:--][][] START   Resolving pipeline\r\npid:12253 id:000[--:--:--][][] BUG     invalid literal for int() with base 10: 'PRE_CAS_MERGE_JULY_2018'\r\n\r\n    Traceback (most recent call last):\r\n      File \"/home/levy/.local/bin/bst\", line 8, in <module>\r\n        sys.exit(cli())\r\n      File \"/home/levy/.local/lib/python3.5/site-packages/click/core.py\", line 722, in __call__\r\n        return self.main(*args, **kwargs)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_frontend/cli.py\", line 162, in override_main\r\n        standalone_mode=standalone_mode, **extra)\r\n      File \"/home/levy/.local/lib/python3.5/site-packages/click/core.py\", line 697, in main\r\n        rv = self.invoke(ctx)\r\n      File \"/home/levy/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke\r\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n      File \"/home/levy/.local/lib/python3.5/site-packages/click/core.py\", line 895, in invoke\r\n        return ctx.invoke(self.callback, **ctx.params)\r\n      File \"/home/levy/.local/lib/python3.5/site-packages/click/core.py\", line 535, in invoke\r\n        return callback(*args, **kwargs)\r\n      File \"/home/levy/.local/lib/python3.5/site-packages/click/decorators.py\", line 27, in new_func\r\n        return f(get_current_context().obj, *args, **kwargs)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_frontend/cli.py\", line 328, in build\r\n        build_all=all_)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_stream.py\", line 184, in build\r\n        dynamic_plan=True)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_stream.py\", line 820, in _load\r\n        fetch_subprojects=fetch_subprojects)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_pipeline.py\", line 122, in load\r\n        for meta in meta_elements\r\n      File \"/home/levy/repositories/buildstream/buildstream/_pipeline.py\", line 122, in <listcomp>\r\n        for meta in meta_elements\r\n      File \"/home/levy/repositories/buildstream/buildstream/element.py\", line 894, in _new_from_meta\r\n        element = project.create_element(artifacts, meta)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_project.py\", line 184, in create_element\r\n        element = self._element_factory.create(self._context, self, artifacts, meta)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_elementfactory.py\", line 56, in create\r\n        element_type, default_config = self.lookup(meta.kind)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_plugincontext.py\", line 74, in lookup\r\n        return self._ensure_plugin(kind)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_plugincontext.py\", line 158, in _ensure_plugin\r\n        self._types[kind] = self._load_plugin(source, kind, defaults)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_plugincontext.py\", line 189, in _load_plugin\r\n        self._assert_version(kind, plugin_type)\r\n      File \"/home/levy/repositories/buildstream/buildstream/_plugincontext.py\", line 211, in _assert_version\r\n        bst_major, bst_minor = utils.get_bst_version()\r\n      File \"/home/levy/repositories/buildstream/buildstream/utils.py\", line 478, in get_bst_version\r\n        return (int(versions[0]), int(versions[1]))\r\n    ValueError: invalid literal for int() with base 10: 'PRE_CAS_MERGE_JULY_2018'\r\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/516/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/516/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/515", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/515/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/515/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/515/events", "html_url": "https://github.com/apache/buildstream/issues/515", "id": 800003786, "node_id": "MDU6SXNzdWU4MDAwMDM3ODY=", "number": 515, "title": "`bst push` will report success even if the local artifacts don't exist (and therefore aren't pushed)", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-03T06:02:18Z", "updated_at": "2021-02-03T06:02:41Z", "closed_at": "2021-02-03T06:02:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/515)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Jul 25, 2018, 16:25\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nSimilar to #501, BuildStream will currently happily print `SUCCESS` with `bst push`, even when it doesn't do anything.\n\nIn this case, BuildStream won't push a non-existent artifact, but it will succeed anyway. This seems wrong.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n1. Have a project with no cached artifacts\n2. Run `bst push` on any element\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nBuildStream will print `SUCCESS` doing nothing (all to-be-pushed elements will be \"waiting\").\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nBuildStream should probably print `FAILED`, and `SKIPPED` for any artifact it doesn't push.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.2\" \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/515/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/512", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/512/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/512/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/512/events", "html_url": "https://github.com/apache/buildstream/issues/512", "id": 799999131, "node_id": "MDU6SXNzdWU3OTk5OTkxMzE=", "number": 512, "title": "Workspace builds are unable to preserve intermediate results not stored in the source directory.", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2021-02-03T05:54:25Z", "updated_at": "2021-02-03T05:58:07Z", "closed_at": "2021-02-03T05:58:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/512)\nIn GitLab by [[Gitlab user @richardmaw-codethink]](https://gitlab.com/richardmaw-codethink) on Jul 25, 2018, 14:19\n\n## Summary\n\nIt's not unusual to have projects whose build system stores their intermediate results in a different directory to the source directory. e.g. have a C project put its object files in a directory called `../o` relative to the source directory.\n\n`directory` may be used to stage into a relative sub-directory and leave space to have an objects directory, but since workspace builds just bind-mount the source directory into the sandbox, object files outside of the sandbox are not preserved.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n\n## What is the current bug behavior?\n\nContrary to the expectation of workspace builds preserving intermediate files, only intermediate files in the source directory are preserved.\n\n## What is the expected correct behavior?\n\nIntermediate files from previous builds of that workspace are available in the sandbox to be reused by the build.\n\n## Possible fixes\n\n1.  If the element's source layout matches the workspace's layout, bind-mount a parent directory, rather than the source itself, into the sandbox.\n\n    Probably not a useful solution since it requires the user to change how they arrange their workspace to support it.\n\n2.  Add a new workspace command or a new option to `workspace open` to link a directory to be bind-mounted in with the source directory.\n\n3.  Store those intermediate objects in artifacts in the cache and stage them in addition to mounting the workspace's source directory.\n\nCaching and staging the intermediate files appeals from a cleanliness POV, but is a big difference in behaviour from how workspaces normally work, since it's expected that the intermediate files are around to inspect.\n\nThere were also suggestions that it was wanted that these intermediate files may appear anywhere on the filesystem rather than alongside the source directory, which may require a filesystem watcher or overlayfs to handle efficiently.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/512/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/512/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/510", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/510/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/510/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/510/events", "html_url": "https://github.com/apache/buildstream/issues/510", "id": 799998214, "node_id": "MDU6SXNzdWU3OTk5OTgyMTQ=", "number": 510, "title": "message format in user configuration is undocumented", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T05:52:54Z", "updated_at": "2021-02-03T05:53:33Z", "closed_at": "2021-02-03T05:53:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/510)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jul 25, 2018, 13:32\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhile inspecting #509, we noticed that the `message-format` configuration is not properly documented.\n\nWe need to explain how this works in the [user configuration docs](http://buildstream.gitlab.io/buildstream/using_config.html), and ensure that we've listed and explained all of the possible identifiers which are valid for the message format.\n\nThe identifiers can be gleaned from the source currently at: https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_frontend/widget.py#L328", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/510/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/510/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/507", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/507/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/507/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/507/events", "html_url": "https://github.com/apache/buildstream/issues/507", "id": 799995332, "node_id": "MDU6SXNzdWU3OTk5OTUzMzI=", "number": 507, "title": "Some log lines appear to be duplicates", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2021-02-03T05:47:48Z", "updated_at": "2021-02-03T05:51:16Z", "closed_at": "2021-02-03T05:51:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/507)\nIn GitLab by [[Gitlab user @devcurmudgeon]](https://gitlab.com/devcurmudgeon) on Jul 25, 2018, 13:10\n\ne.g. from https://gitlab.com/trustable/distros/minimal-distro/-/jobs/84011212\n\n```\n[--:--:--][015c97b1][build:core/git-minimal.bst          ] START   Running build-commands\n[--:--:--][015c97b1][build:core/git-minimal.bst          ] START   Running build-commands\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/507/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/503", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/503/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/503/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/503/events", "html_url": "https://github.com/apache/buildstream/issues/503", "id": 799992874, "node_id": "MDU6SXNzdWU3OTk5OTI4NzQ=", "number": 503, "title": "spurious failures in test_build_track", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T05:43:11Z", "updated_at": "2021-02-03T05:44:34Z", "closed_at": "2021-02-03T05:44:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/503)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jul 25, 2018, 12:26\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen running tests, the test_build_track now fails spuriously, this seems to have started happening since landing the new CAS artifact cache.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nRun tests in CI\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nSometimes it will break, sometimes it will pass.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nTests should always pass\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\nThis log shows a failure: https://gitlab.com/BuildStream/buildstream/-/jobs/84240353\n\nNote that the error log is either misleading, or, we could be seeing two problems at the same time.\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nThe test case in question uses the same git repo for multiple elements, and it would seem that since we are cloning to the same git source cache, the `mv` operation is failing. Instead, similarly to how `_downloadablefilesource.py` uses an atomic rename at the end, we should assume that if we had to clone the repository because the repo didn't exist initially, that it was created in parallel and will already be up to date.\n\nThe above is reflected in this part of the log:\n\n```\n    [00:00:00][????????][track:5.bst                         ] FAILURE git source at 5.bst [line 3 column 2]: Failed to move cloned git repository file:///builds/BuildStream/buildstream/dist/buildstream\n/tmp/test_build_track_track_targets2/repo from '/builds/BuildStream/buildstream/dist/buildstream\n/tmp/test_build_track_track_targets2/cache/sources/git/tmpqgc5l0wd' to '/builds/BuildStream/buildstream\n/dist/buildstream/tmp/test_build_track_track_targets2/cache/sources\n/git/file____builds_BuildStream_buildstream_dist_buildstream_tmp_test_build_track_track_targets2_repo'\n```\n\nBut this is not the only relevant error, we are also seeing a stack trace from the test case itself when removing the artifact using `cli.remove_artifact_from_cache()`, ultimately that error boils down to the following error being raised from `shutil.rmtree()`:\n\n```\nFileNotFoundError: [Errno 2] No such file or directory: '/builds/BuildStream/buildstream/dist/buildstream/tmp/test_build_track_track_targets2/cache/artifacts/cas/refs/heads/test/6'\n```\n\nThis part of the failure seems to point to the fact that, since we use the same git repo for multiple tests, we have some artifacts which have identical content, and one hypothesis is that attempting to remove the artifact is failing because `cli.remove_artifact_from_cache()` is doing something misguided; perhaps it needs to be brought more inline with how `_artifactcache/cascache.py` implements `ArtifactCache.remove()`.\n\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.x\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/503/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/502", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/502/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/502/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/502/events", "html_url": "https://github.com/apache/buildstream/issues/502", "id": 799991761, "node_id": "MDU6SXNzdWU3OTk5OTE3NjE=", "number": 502, "title": "Unhandled excpetions within CASCache on grpc errors", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-03T05:41:16Z", "updated_at": "2021-02-03T05:43:03Z", "closed_at": "2021-02-03T05:43:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/502)\nIn GitLab by [[Gitlab user @Qinusty]](https://gitlab.com/Qinusty) on Jul 25, 2018, 11:13\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nThere are situations where unhandled exceptions could occur from operations within cascache.py\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nN/A\n\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nThere are a few cases within cascache.py where `raise` is called within `except grpc.RpcError as e:` meaning a grpc error could be raised and not handled elsewhere. \n\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThese errors should be raised as ArtifactError which are then caught and handled elsewhere within the system.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/502/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/501", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/501/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/501/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/501/events", "html_url": "https://github.com/apache/buildstream/issues/501", "id": 799990885, "node_id": "MDU6SXNzdWU3OTk5OTA4ODU=", "number": 501, "title": "Misleading info message for CASCache pull", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T05:39:38Z", "updated_at": "2021-02-03T05:41:08Z", "closed_at": "2021-02-03T05:41:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/501)\nIn GitLab by [[Gitlab user @Qinusty]](https://gitlab.com/Qinusty) on Jul 25, 2018, 11:04\n\n## Background\n\n[//]: # (Provide a background or the root/source that justifies this task or action.)\n\ncascache.py: There is a misleading info message within pull()\n\nSee: https://gitlab.com/BuildStream/buildstream/commit/1d36df25de46979245a13f4a9149ca1eec30c4eb#note_90219145\n\n## Task description\n\n[//]: # (Short summary of the action to be executed)\n\n* [x] Remove or correct the info message in question.\n\n## Acceptance Criteria\n\n[//]: # (Acceptance criteria should follow the S.M.A.R.T. principle https://en.wikipedia.org/wiki/SMART_criteria )\n\nBuildStream shall no longer output a misleading info message when grpc errors occur during a pull.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/501/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/500", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/500/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/500/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/500/events", "html_url": "https://github.com/apache/buildstream/issues/500", "id": 799989613, "node_id": "MDU6SXNzdWU3OTk5ODk2MTM=", "number": 500, "title": "While caching build artifact:  \"Cannot extract [path to socket file] into staging-area. Unsupported type.\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-02-03T05:37:10Z", "updated_at": "2021-02-03T05:39:31Z", "closed_at": "2021-02-03T05:39:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/500)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Jul 25, 2018, 10:44\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nSocket files in build directory fail to be stored in build artifact.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nCreate a socket file in build directory. Probably pipe would also fail.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nYou get an error like:\n\n```\n    [00:00:41] FAILURE base/gpgme.bst: Cannot extract /home/valentin/.cache/buildstream/build/base-gpgme-_z05id4i/root/buildstream/base-sdk/base/gpgme.bst/bst_build_dir/tests/gpg/S.gpg-agent into staging-area. Unsupported type.\n```\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nSocket file is just ignored.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nIgnore special files in build artifacts.\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.4\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/500/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/500/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/498", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/498/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/498/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/498/events", "html_url": "https://github.com/apache/buildstream/issues/498", "id": 799987762, "node_id": "MDU6SXNzdWU3OTk5ODc3NjI=", "number": 498, "title": "Environment variables not properly propagated in the sandbox environment", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-02-03T05:33:52Z", "updated_at": "2021-02-03T05:36:11Z", "closed_at": "2021-02-03T05:36:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/498)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Jul 25, 2018, 09:11\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen setting environment variable `LD_LIBRARY_PATH` to an element, this variable is not used.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nThis element fails:\n\n```\nkind: manual\n\ndepends:\n  - filename: base.bst\n    junction: freedesktop-sdk.bst\n    type: build\n\nenvironment:\n  LD_LIBRARY_PATH: /foo/bar\n\nconfig:\n  build-commands:\n    - |\n      [ \"${LD_LIBRARY_PATH}\" = /foo/bar ]\n```\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nThe build of the element fails.\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThe build of the element does not fail.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nThe current way environment variables are used is to call Bubblewrap with it instead of telling it to use that environment for the command run by Bubblewrap.\n\nThere might be other, consequence for this approach. For instance if the local installation of Bubblewrap requires some environment variable to be set to run correctly, this will not be the case. Bubblewrap will be run with the environment for the element.\n\nHere is what need to be fixed:\n\n * Use `--settenv` and `--unsetenv` in Bubblewrap command line to set environment.\n * Use user environment to call Bubblewrap.\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %BuildStream_v1.2\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/498/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/495", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/495/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/495/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/495/events", "html_url": "https://github.com/apache/buildstream/issues/495", "id": 799986212, "node_id": "MDU6SXNzdWU3OTk5ODYyMTI=", "number": 495, "title": "utils.link_files()/utils.copy_files() APIs do not fail for non-existing source", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-03T05:31:03Z", "updated_at": "2021-02-03T05:31:19Z", "closed_at": "2021-02-03T05:31:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/495)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jul 23, 2018, 15:10\n\n## Background\n\n[//]: # (Provide a background or the root/source that justifies this task or action.)\n\nMostly these APIs conform to their advertised API contract, except for the case when:\n* The caller does not specify a specific list, meaning the list of files should be derived from the source directory\n* The caller does not ask to ignore missing files\n* The source directory does not exist at all\n\nSince this is public API and we found ourselves working around this unexpected behavior today in !560, it would be better to correct this rather than to leave the current behavior.\n\n## Task description\n\n[//]: # (Short summary of the action to be executed)\n\nEnsure that the `utils.link_files()` and `utils.copy_files()` raise an UtilError() indicating that the source directory did not exist, unless `ignore_missing` was passed, and ensure that tests still pass.\n\n\n## Acceptance Criteria\n\n[//]: # (Acceptance criteria should follow the S.M.A.R.T. principle https://en.wikipedia.org/wiki/SMART_criteria )\n\n`utils.link_files()` and `utils.copy_files()` behave as advertised.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/492", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/492/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/492/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/492/events", "html_url": "https://github.com/apache/buildstream/issues/492", "id": 799981885, "node_id": "MDU6SXNzdWU3OTk5ODE4ODU=", "number": 492, "title": "ostree is not a core dependency of buildstream anymore", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T05:23:09Z", "updated_at": "2021-02-03T05:24:15Z", "closed_at": "2021-02-03T05:24:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/492)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Jul 23, 2018, 10:45\n\n## Background\nWith the move to the CAS-based cache, we do not depend on ostree anymore (only for the ostree source plugin)\n\n## Task description\n- Update docs\n\n## Acceptance Criteria\nDocumentation is updated", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/492/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/491", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/491/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/491/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/491/events", "html_url": "https://github.com/apache/buildstream/issues/491", "id": 799980105, "node_id": "MDU6SXNzdWU3OTk5ODAxMDU=", "number": 491, "title": "Users can specify an artifact cache quota larger than their disk size", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2021-02-03T05:19:42Z", "updated_at": "2021-02-03T05:23:01Z", "closed_at": "2021-02-03T05:23:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/491)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Jul 23, 2018, 10:27\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nUsers can specify an artifact cache quota larger than their disk size. This makes no sense.\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nSet\n\n```\ncache:\n  quota: *value > current disk space*\n```\n\nin `~/.config/buildstream.conf`. Now build a system larger than the remaining disk space.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nBuilds will be allowed to run despite running out of disk space.\n\n## What is the expected correct behavior?\n\nBuildstream should tell me that my quota is too large and do *something* that isn't building as if I had a much larger disk than I have.\n\n[//]: # (What you should see instead)\n\n## Possible fixes\n\nWhile parsing somewhere around [here](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_context.py#L208), we should check if the disk quota exceeds the amount of drive space available.\n\nIf you're feeling particularly fancy, you can make buildstream figure out how much space its cache uses, then figure out how full the drive is, and then check if `quota > remaining + cache`. If not, simply checking if `quota > disk space` might be enough.\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.3\" \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/491/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/487", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/487/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/487/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/487/events", "html_url": "https://github.com/apache/buildstream/issues/487", "id": 799976896, "node_id": "MDU6SXNzdWU3OTk5NzY4OTY=", "number": 487, "title": "Implement a mechanism to allow builds to leverage git describe", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2021-02-03T05:13:20Z", "updated_at": "2021-02-03T05:16:38Z", "closed_at": "2021-02-03T05:16:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/487)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jul 20, 2018, 14:01\n\nThis is further technical debt introduced indirectly by #21 (!556), as it was unacceptable to cache git repositories as a part of the build tree, and parallel work on using the build trees needed to be unblocked.\n\n## Background\n\nMore and more modules are using `git describe` at build time in order to derive their version number from the git history, this functionality is no longer working as of landing !556 for issue #455.\n\n## Task description\n\nNeed to find a way to allow modules to continue using `git describe` in the build sandbox, some research was done to allow staging of minimal history to allow this with the caveat of less determinism of builds, indeed having the `.git` history available alone introduces some non determinism.\n\n\n## Acceptance Criteria\n\nIdeally, we have a mechanism where `git describe` works and builds are entirely deterministic, but seeing as this is difficult to achieve and also that using `git describe` is very popular, a less than perfect approach of generating a condensed history when staging `git` sources will be acceptable as a first step, this approach is already prototyped at https://gitlab.com/BuildStream/buildstream/snippets/1731497.\n\nIf the implemented solution introduces non-determinism, it should be *opt in* with a new option on the `git plugin`, at least until a better solution can be achieved.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/487/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/487/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/484", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/484/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/484/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/484/events", "html_url": "https://github.com/apache/buildstream/issues/484", "id": 799973901, "node_id": "MDU6SXNzdWU3OTk5NzM5MDE=", "number": 484, "title": "Artifact cache expiry relies on granular mtimes", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T05:07:37Z", "updated_at": "2021-02-03T05:09:04Z", "closed_at": "2021-02-03T05:09:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/484)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Jul 19, 2018, 15:58\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen artifacts are produced in very quick succession, this can cause the ordering of a later expiry operation to go awry if the underlying file system does not support sub-second mtimes.\n\nThis is probably exceptionally rare in practice, and even then doesn't cause any particular issue, but is at least an annoyance for developers using regular GitLab runners (i.e., not our special fancy ones).\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\n1. Run a system with non-sub-second mtime support\n2. Run the test suite's expiry ordering test\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nThe test will fail (most of the time)\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThe test should pass\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n```\n>       assert (tuple(cli.get_element_state(project, element) for element in\n                      ('unrelated.bst', 'target.bst', 'target2.bst', 'dep.bst', 'expire.bst')) ==\n                ('buildable', 'buildable', 'buildable', 'cached', 'cached', ))\nE       AssertionError: assert ('cached', 'b...le', 'cached') == ('buildable', ...ed', 'cached')\nE         At index 0 diff: 'cached' != 'buildable'\nE         Full diff:\nE         - ('cached', 'buildable', 'buildable', 'buildable', 'cached')\nE         ?  ----------\nE         + ('buildable', 'buildable', 'buildable', 'cached', 'cached')\nE         ?                                         ++++++++++\n\ntests/artifactcache/expiry.py:145: AssertionError\n```\n\nOn the same machine:\n\n```\n$ echo 'Hello' > test\n$ stat test\n  File: test\n  Size: 6         \tBlocks: 16         IO Block: 4096   regular file\nDevice: 809h/2057d\tInode: 2092237     Links: 1\nAccess: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)\nAccess: 2018-07-19 14:47:07.000000000 +0000\nModify: 2018-07-19 14:47:07.000000000 +0000\nChange: 2018-07-19 14:47:07.000000000 +0000\n Birth: -\n$ sleep 120\n$ touch -m test\n$ stat test\n  File: test\n  Size: 6         \tBlocks: 16         IO Block: 4096   regular file\nDevice: 809h/2057d\tInode: 2092237     Links: 1\nAccess: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)\nAccess: 2018-07-19 14:47:07.000000000 +0000\nModify: 2018-07-19 14:49:08.000000000 +0000\nChange: 2018-07-19 14:49:08.000000000 +0000\n Birth: -\n```\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nSince buildstream internally relies on mtimes to determine artifact events, the \"correct\" way to fix this is to throw that out and keep a manifest with less coarse timestamps. This may not be worth the effort considering the bug probably has no practical impact outside of CI.\n\nPerhaps we can use `pytest` to skip the relevant test on machines that lack sub-second precision instead...\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.2\" \n* BuildStream version affected: /milestone %\"BuildStream\\_v1.3\" \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/484/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/484/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/481", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/481/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/481/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/481/events", "html_url": "https://github.com/apache/buildstream/issues/481", "id": 799968425, "node_id": "MDU6SXNzdWU3OTk5Njg0MjU=", "number": 481, "title": "Misleading SUCCESS status when artifact push is skipped", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-03T04:56:58Z", "updated_at": "2021-02-03T04:59:13Z", "closed_at": "2021-02-03T04:59:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/481)\nIn GitLab by [[Gitlab user @Qinusty]](https://gitlab.com/Qinusty) on Jul 18, 2018, 17:45\n\n## Summary\r\n\r\nThe `bst push` command provides misleading info text regarding the status of the pushing of an artifact.\r\n\r\n\r\n## Steps to reproduce\r\n\r\n- Set up a remote artifact server (I had mine set up locally using http)\r\n    - `bst-artifact-server --port 11001 --enable-push artifacts`\r\n- Set up a simple buildstream project and add an artifact cache as instructed [here](https://buildstream.gitlab.io/buildstream/install_artifacts.html#user-configuration)\r\n- Attempt to `bst push <element>`\r\n\r\n## What is the current bug behavior?\r\n\r\nOn skipping of caching an artifact, it is reported as SUCCESS as shown on line 37 of [1]. However at the bottom is does clearly represent that the artifact was skipped but this would be an issue if individual artifacts were skipped in a large collection.\r\n\r\n## What is the expected correct behavior?\r\n\r\nIt should be made more clear to the user that the artifact was skipped during caching. e.g. `SKIPPED Push`\r\n\r\n## Relevant logs and/or screenshots\r\n\r\n[1] : [Paste](https://www.paste.org/94114)\r\n\r\n## Possible fixes\r\n\r\njob.py: Adapt Job._child_action as it currently displays anything which isn't an exception as a success.\r\n\r\n## Other relevant information\r\n\r\n\r\n* BuildStream version affected: BuildStream_v1.1.4\r\n\r\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/481/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/481/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/479", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/479/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/479/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/479/events", "html_url": "https://github.com/apache/buildstream/issues/479", "id": 799967170, "node_id": "MDU6SXNzdWU3OTk5NjcxNzA=", "number": 479, "title": "Incorrect summary when terminating builds", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-03T04:54:05Z", "updated_at": "2021-02-03T04:55:52Z", "closed_at": "2021-02-03T04:55:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/479)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jul 18, 2018, 13:01\n\nSince landing the local artifact cache expiry code (!347 / !548), the tally of failed elements in the queue summary is now incorrect.\n\nBefore the branch, it would not display forcefully terminated jobs as *failed*.\n\nNow after the branch you have a confusing number of failed elements when hitting `^C` and terminating, the terminated jobs are accounted as *failed* but should not be.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/479/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/471", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/471/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/471/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/471/events", "html_url": "https://github.com/apache/buildstream/issues/471", "id": 799960853, "node_id": "MDU6SXNzdWU3OTk5NjA4NTM=", "number": 471, "title": "Missing track parameter in sources should raise appropriate error", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 46, "created_at": "2021-02-03T04:39:05Z", "updated_at": "2021-02-03T04:45:50Z", "closed_at": "2021-02-03T04:45:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/471)\nIn GitLab by [[Gitlab user @finnball]](https://gitlab.com/finnball) on Jul 13, 2018, 10:48\n\n## Background\nTried building something like the following:\n                                                                                                                                                                    \n    kind: autotools\n\n    sources:\n    - kind: git\n      url: https://github.com/foo/bar.git\n      ref:\n\nIt's missing the track parameter, so it outputs:\n\n    Inconsistent pipeline\n\n        Exact versions are missing for the following elements\n        Try tracking these elements first with `bst track`\n    \n          baz.bst\n\nIt should instead tell the user that the `track` parameter is missing as the suggested command does nothing to resolve the situation.\n\n## Task description\n\n[//]: # (Short summary of the action to be executed)\n\n* Error message telling the user to include a `track`\n* Unittested", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/471/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/471/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/469", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/469/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/469/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/469/events", "html_url": "https://github.com/apache/buildstream/issues/469", "id": 799958342, "node_id": "MDU6SXNzdWU3OTk5NTgzNDI=", "number": 469, "title": "BuildStream seems to need the repository which has been install from after installation", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-03T04:32:45Z", "updated_at": "2021-02-03T04:33:29Z", "closed_at": "2021-02-03T04:33:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/469)\nIn GitLab by [[Gitlab user @franred]](https://gitlab.com/franred) on Jul 10, 2018, 16:21\n\n## Background\n\n[//]: # Installing buildstream from source using instructions but in a removable disk makes buildstream to fail to run\n\n## Task description\n\n[//]: # Use case\n\n* [  ] Clone the repository in USB/SDCard/external harddrive\n* [  ] Install buildstream from source following the instructions in https://buildstream.gitlab.io/buildstream/install_main.html#installing-from-source-recommended\n* [  ] Remove/Umount the USB/SDCard/external harddrive\n* [  ] bst command will fail\n\n## Logs\n```\n$ bst\nTraceback (most recent call last):\n  File \"/home/ubuntu/.local/bin/bst\", line 5, in <module>\n    from buildstream._frontend import cli\nModuleNotFoundError: No module named 'buildstream'\n\n$ sudo mount /dev/sda /mnt\n\n$ bst\nUsage: bst [OPTIONS] COMMAND [ARGS]...\n\n  Build and manipulate BuildStream projects\n\n  Most of the main options override options in the user preferences\n  configuration file.\n\nOptions:\n  --version\n  -c, --config PATH               Configuration file to use\n  -C, --directory DIRECTORY       Project directory (default: current\n                                  directory)\n  --on-error [continue|quit|terminate]\n                                  What to do when an error is encountered\n  --fetchers INTEGER              Maximum simultaneous download tasks\n  --builders INTEGER              Maximum simultaneous build tasks\n  --pushers INTEGER               Maximum simultaneous upload tasks\n  --network-retries INTEGER       Maximum retries for network tasks\n  --no-interactive                Force non interactive mode, otherwise this\n                                  is automatically decided\n  --verbose / --no-verbose        Be extra verbose\n  --debug / --no-debug            Print debugging output\n  --error-lines INTEGER           Maximum number of lines to show from a task\n                                  log\n  --message-lines INTEGER         Maximum number of lines to show in a\n                                  detailed message\n  --log-file FILENAME             A file to store the main log (allows storing\n                                  the main log while in interactive mode)\n  --colors / --no-colors          Force enable/disable ANSI color codes in\n                                  output\n  --strict / --no-strict          Elements must be rebuilt when their\n                                  dependencies have changed\n  -o, --option OPTION VALUE       Specify a project option\n  -h, --help                      Show this message and exit.\n\nCommands:\n  build          Build elements in a pipeline\n  checkout       Checkout a built artifact\n  fetch          Fetch sources in a pipeline\n  help           Print usage information\n  init           Initialize a new BuildStream project\n  pull           Pull a built artifact\n  push           Push a built artifact\n  shell          Shell into an element's sandbox environment\n  show           Show elements in the pipeline\n  source-bundle  Produce a build bundle to be manually executed\n  track          Track new source references\n  workspace      Manipulate developer workspaces\n   \n$ ls /mnt/buildstream-workspace/projects/buildstream/\nbuildstream\t  BuildStream.egg-info\tcontrib  doc\t      MAINTAINERS  MANIFEST.in\t__pycache__  setup.cfg\ttests\nBuildStream.doap  conftest.py\t\tCOPYING  HACKING.rst  man\t   NEWS\t\tREADME.rst   setup.py\tversioneer.py\n```  \n\n## Acceptance Criteria\n\n[//]: # After installing buildstream, bst command should be running even if the source directory it has been\ninstalled from changes or disappear.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/469/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/469/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/468", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/468/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/468/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/468/events", "html_url": "https://github.com/apache/buildstream/issues/468", "id": 799957335, "node_id": "MDU6SXNzdWU3OTk5NTczMzU=", "number": 468, "title": "source-bundle: --except argument is ignored", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-02-03T04:30:17Z", "updated_at": "2021-02-03T04:32:38Z", "closed_at": "2021-02-03T04:32:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/468)\nIn GitLab by [[Gitlab user @franred]](https://gitlab.com/franred) on Jul 10, 2018, 10:24\n\n## Background\n\n[//]: # In the source-bundle command --except argument is ignored\n\n## Use case to reproduce the bug\n\n* [  ] Clone https://gitlab.com/baserock/definitions.git\n* [  ] Run: bst --colors --option arch armv8l64 source-bundle bootstrap/stage3-sysroot.bst --except gnu-toolchain/stage2.bst\n* [  ] tar -tf bootstrap-stage3-sysroot.tar.gz  | grep stage2\n* [  ] Elements from stage2 are listed in the previous command\n\n## Acceptance Criteria\n\n[//]: # When elements are listed in --except they shouldn't be in the final tarball", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/468/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/468/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/461", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/461/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/461/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/461/events", "html_url": "https://github.com/apache/buildstream/issues/461", "id": 799951263, "node_id": "MDU6SXNzdWU3OTk5NTEyNjM=", "number": 461, "title": "Cache key confusion when elements depend on an open workspace", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2021-02-03T04:15:48Z", "updated_at": "2021-02-03T04:19:09Z", "closed_at": "2021-02-03T04:19:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/461)\nIn GitLab by [[Gitlab user @samthursfield]](https://gitlab.com/samthursfield) on Jul 7, 2018, 15:56\n\n## Summary\n\nIf I open a workspace for an element, BuildStream messes up the build of subsequent elements in the pipeline.\n\n## Steps to reproduce\n\nUsing the example project from https://gitlab.com/valentindavid/org.gnu.Hello/:\n\n1. bst workspace open hello.bst\n2. bst build org.gnu.Hello.bst\n3. bst checkout org.gnu.Hello.bst\n\n## What is the current bug behavior?\n\nBuildStream fails to check out the artifact for org.gnu.Hello.bst with an error like this:\n\n    AssertionError: flatpak_image element at org.gnu.Hello.bst [line 1 column 0]: Missing artifact b6790049\n\nIf you rerun the `bst build` command, it will rebuild the artifacts that depend on hello.bst and now, the `bst checkout` will succeed.\n\n## What is the expected correct behavior?\n\nNone of the cache keys for hello.bst and beyond can be calculated until hello.bst has been built, but BuildStream currently displays (incorrect) cache keys for these.\n\n## Other relevant information\n\n* BuildStream version affected: 1.1.3+172.g9067e269\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/461/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/457", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/457/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/457/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/457/events", "html_url": "https://github.com/apache/buildstream/issues/457", "id": 799949417, "node_id": "MDU6SXNzdWU3OTk5NDk0MTc=", "number": 457, "title": "Filter elements can't be checked-out because it checks out the depended-upon element instead", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T04:11:31Z", "updated_at": "2021-02-03T04:12:15Z", "closed_at": "2021-02-03T04:12:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/457)\nIn GitLab by [[Gitlab user @jonathanmaw]](https://gitlab.com/jonathanmaw) on Jul 3, 2018, 17:33\n\n## Summary\r\n\r\nWhile checking out a filter element, I appear to be redirecting the element to the element it build-depends on, instead.\r\n\r\n\r\n## Steps to reproduce\r\n\r\n1. Go to tests/plugins/filter/basic\r\n2. Execute `bst build output-include.bst`\r\n3. Execute `bst checkout output-include.bst tmp`\r\n4. Execute `ls tmp`\r\n\r\n\r\n## What is the current bug behavior?\r\n\r\nEvery file produced by input.bst is checked-out ('foo', 'bar' and 'baz')\r\n\r\n\r\n## What is the expected correct behavior?\r\n\r\nOnly the file 'foo' is checked-out\r\n\r\n\r\n## Relevant logs and/or screenshots\r\n\r\n```\r\nbst checkout output-include.bst test\r\n[--:--:--][][] START   Loading pipeline\r\n[00:00:00][][] SUCCESS Loading pipeline\r\n[--:--:--][][] START   Resolving pipeline\r\n[00:00:00][][] SUCCESS Resolving pipeline\r\n[--:--:--][][] START   Resolving cached state\r\n[00:00:00][][] SUCCESS Resolving cached state\r\n[--:--:--][][] INFO    Element 'output-include.bst' redirected to 'input.bst'\r\n[--:--:--][][] START   Staging dependencies\r\n[00:00:00][][] SUCCESS Staging dependencies\r\n[--:--:--][][] START   Integrating sandbox\r\n[00:00:00][][] SUCCESS Integrating sandbox\r\n[--:--:--][][] START   Checking out files in test\r\n[00:00:00][][] SUCCESS Checking out files in test\r\n```\r\n\r\n## Possible fixes\r\n\r\nIn _pipeline.py:217, get_selection, elements are redirected if mode == PipelineSelection.NONE\r\n\r\nIn _stream.py:370, checkout, we load the pipeline without specifying any PipelineSelection modes, so it defaults to NONE.\r\n\r\nI have a ready-made branch which contains a proposed solution to this.\r\n\r\n## Other relevant information\r\n\r\n* BuildStream version affected: /milestone %BuildStream\\_v1.1\r\n\r\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/457/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/449", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/449/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/449/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/449/events", "html_url": "https://github.com/apache/buildstream/issues/449", "id": 799935300, "node_id": "MDU6SXNzdWU3OTk5MzUzMDA=", "number": 449, "title": "'bst workspace open -f' does not behave as documented", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T03:38:02Z", "updated_at": "2021-02-03T03:39:09Z", "closed_at": "2021-02-03T03:39:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/449)\nIn GitLab by [[Gitlab user @phildawson]](https://gitlab.com/phildawson) on Jun 28, 2018, 12:19\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n1. Open a workspace for an element `bst workspace open element.bst workspace_dir`\n2. Make a change to the source code checked out to workspace_dir\n3. Close the workspace `bst workspace close element.bst`\n4. force open a new workspace in the same directory at the previous on\n   `bst workspace open -f element.bst workspace_dir`\n5. Notice the changes made at step 2 will have persisted. \n\n## What is the current bug behavior?\nIf there is an existing workspace for element.bst in the directory workspace_dir which has been closed,\nusing `bst workspace open -f element.bst workspace_dir` does not checkout an unmodified copy of the \nelements source code. I.e any changes previously make to the workspace checked out it workspace_dir\npersist, despite the force option.\n\n## What is the expected correct behavior?\n\nUsing `bst workspace open -f element.bst workspace_dir` should overwrite an existing workspace's contents with an unmodified copy of the element's source code.\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\nThis was observed in version 1.1.3+171\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/449/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/449/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/448", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/448/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/448/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/448/events", "html_url": "https://github.com/apache/buildstream/issues/448", "id": 799933855, "node_id": "MDU6SXNzdWU3OTk5MzM4NTU=", "number": 448, "title": "Autocompletion defaults to the project's root before the element path", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2021-02-03T03:34:38Z", "updated_at": "2021-02-03T03:37:55Z", "closed_at": "2021-02-03T03:37:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/448)\nIn GitLab by [[Gitlab user @jennis]](https://gitlab.com/jennis) on Jun 28, 2018, 11:02\n\n## Summary\n\nSay, I have an element name or directory that is within my project's root (in the same location as the `project.conf` file), as well as in my element path (typically an \"elements\" sub-directory), our autocompletion will default to the element or directory within the project's root.\n\n\n## Steps to reproduce\n```\n $ ls\nbase  elements  files  project.conf\n\n $ ls base/\nuselessIncorrectFile\n\n $ ls elements/base/\nalpine.bst\n\n $ bst show base/uselessIncorrectFile \n[--:--:--][][] START   Loading pipeline\n[00:00:00][][] FAILURE Loading pipeline\n\nCould not find element 'base/uselessIncorrectFile' in elements directory '/home/jamesennis/autotools/elements'\n\n```\nNote here that for `bst show`, I've used the autocompletion to complete both base/ and the file within base/ (uselessIncorrectFile)\n\nI should also note here, that `elements` is specified in the `element-path` field of the `project.conf`.\n\n## What is the expected correct behavior?\nThe autocompletion should default to looking into the `element-path` directory, providing this is specified in the `project.conf`\n\nIn this example, the autocompletion should default to the `elements/base/` directory.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/448/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/447", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/447/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/447/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/447/events", "html_url": "https://github.com/apache/buildstream/issues/447", "id": 799932226, "node_id": "MDU6SXNzdWU3OTk5MzIyMjY=", "number": 447, "title": "Strack trace shown when trying to checkout an unbuilt element", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2021-02-03T03:31:03Z", "updated_at": "2021-02-03T03:34:30Z", "closed_at": "2021-02-03T03:34:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/447)\nIn GitLab by [[Gitlab user @jennis]](https://gitlab.com/jennis) on Jun 28, 2018, 10:39\n\n## Summary\n`bst checkout <element> <directory>` on an unbuilt element will produce a stack trace.\n\n\n## Steps to reproduce\n\n```\n $ ls\nelements  files  project.conf\n\n $ ls elements/\nbase  base.bst  hello.bst  importme.bst\n\n $ bst show hello.bst \n[--:--:--][][] START   Loading pipeline\n[00:00:00][][] SUCCESS Loading pipeline\n[--:--:--][][] START   Resolving pipeline\n[00:00:00][][] SUCCESS Resolving pipeline\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\n      cached a352c93edfc55a41868b4f482758ad3ea1c21571532373542cd20b9135f0718d base/alpine.bst \n      cached a8eeb045115a4a71c18d09fe14b7b4fc3f3e838414a7d23d7c6d4c3027f28743 base.bst \nfetch needed 3f7f32d9cab049f2664b1299c07f0afdd16e8db5f8e9c6e4f6460439bad91013 hello.bst \n\n $ bst checkout hello.bst ~/checkouts/hello\n[--:--:--][][] START   Loading pipeline\n[00:00:00][][] SUCCESS Loading pipeline\n[--:--:--][][] START   Resolving pipeline\n[00:00:00][][] SUCCESS Resolving pipeline\n[--:--:--][][] START   Resolving cached state\n[00:00:00][][] SUCCESS Resolving cached state\n[--:--:--][][] START   Staging dependencies\n[--:--:--][][] BUG     autotools element at hello.bst [line 1 column 0]: Missing artifact 3f7f32d9\n\n    Traceback (most recent call last):\n      File \"/home/jamesennis/.local/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/core.py\", line 722, in __call__\n        return self.main(*args, **kwargs)\n      File \"/home/jamesennis/buildstream/buildstream/_frontend/cli.py\", line 162, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/core.py\", line 697, in main\n        rv = self.invoke(ctx)\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/core.py\", line 895, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/core.py\", line 535, in invoke\n        return callback(*args, **kwargs)\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/home/jamesennis/buildstream/buildstream/_frontend/cli.py\", line 642, in checkout\n        hardlinks=hardlinks)\n      File \"/home/jamesennis/buildstream/buildstream/_stream.py\", line 387, in checkout\n        with target._prepare_sandbox(Scope.RUN, None, integrate=integrate) as sandbox:\n      File \"/usr/lib/python3.5/contextlib.py\", line 59, in __enter__\n        return next(self.gen)\n      File \"/home/jamesennis/buildstream/buildstream/element.py\", line 1259, in _prepare_sandbox\n        self.stage_dependency_artifacts(sandbox, scope)\n      File \"/home/jamesennis/buildstream/buildstream/element.py\", line 710, in stage_dependency_artifacts\n        update_mtimes=to_update)\n      File \"/home/jamesennis/buildstream/buildstream/element.py\", line 613, in stage_artifact\n        self.__assert_cached()\n      File \"/home/jamesennis/buildstream/buildstream/element.py\", line 2025, in __assert_cached\n        assert self._cached(), \"{}: Missing artifact {}\".format(self, self.__get_brief_display_key())\n    AssertionError: autotools element at hello.bst [line 1 column 0]: Missing artifact 3f7f32d9\n\n```\n\n## What is the expected correct behavior?\n\nWe don't receive a stack trace. Instead, we output a message to inform the user that the element is unbuilt. \n\nOptional extra:\nA [y/n] option that invokes `bst build` on the element if `y` is specified.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/447/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/447/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/446", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/446/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/446/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/446/events", "html_url": "https://github.com/apache/buildstream/issues/446", "id": 799931211, "node_id": "MDU6SXNzdWU3OTk5MzEyMTE=", "number": 446, "title": "Stack trace shown if you accidentially `bst COMMAND <directory>`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109049, "node_id": "MDU6TGFiZWwyNzA5MTA5MDQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/newcomers", "name": "newcomers", "color": "731A82", "default": false, "description": "An issue suitable for a newcomer to work on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-03T03:28:53Z", "updated_at": "2021-02-03T03:30:56Z", "closed_at": "2021-02-03T03:30:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/446)\nIn GitLab by [[Gitlab user @jennis]](https://gitlab.com/jennis) on Jun 28, 2018, 10:00\n\n## Summary\nIt's not uncommon to find elements with the same name (minus the file extension) as a subdirectory within the element path, especially when we're using [stack](https://buildstream.gitlab.io/buildstream/elements/stack.html) elements.\n\nExecuting a `bst COMMAND` on a directory will produce a stack trace.\n\n## Steps to reproduce\nIf you execute the `bst show` command on a directory you'll receive something similar to the following:\n```\n $ pwd\n/home/jamesennis/autotools\n\n $ ls elements/\nbase  base.bst  hello.bst  importme.bst\n\n $ bst show base\n[--:--:--][][] START   Loading pipeline\n[--:--:--][][] BUG     [Errno 21] Is a directory: '/home/jamesennis/autotools/elements/base'\n\n    Traceback (most recent call last):\n      File \"/home/jamesennis/.local/bin/bst\", line 8, in <module>\n        sys.exit(cli())\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/core.py\", line 722, in __call__\n        return self.main(*args, **kwargs)\n      File \"/home/jamesennis/buildstream/buildstream/_frontend/cli.py\", line 162, in override_main\n        standalone_mode=standalone_mode, **extra)\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/core.py\", line 697, in main\n        rv = self.invoke(ctx)\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke\n        return _process_result(sub_ctx.command.invoke(sub_ctx))\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/core.py\", line 895, in invoke\n        return ctx.invoke(self.callback, **ctx.params)\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/core.py\", line 535, in invoke\n        return callback(*args, **kwargs)\n      File \"/home/jamesennis/.local/lib/python3.5/site-packages/click/decorators.py\", line 27, in new_func\n        return f(get_current_context().obj, *args, **kwargs)\n      File \"/home/jamesennis/buildstream/buildstream/_frontend/cli.py\", line 543, in show\n        except_targets=except_)\n      File \"/home/jamesennis/buildstream/buildstream/_stream.py\", line 114, in load_selection\n        fetch_subprojects=False)\n      File \"/home/jamesennis/buildstream/buildstream/_stream.py\", line 814, in _load\n        fetch_subprojects=fetch_subprojects)\n      File \"/home/jamesennis/buildstream/buildstream/_pipeline.py\", line 113, in load\n        meta_elements = self._loader.load(rewritable, None)\n      File \"/home/jamesennis/buildstream/buildstream/_loader/loader.py\", line 114, in load\n        loader._load_file(name, rewritable, ticker)\n      File \"/home/jamesennis/buildstream/buildstream/_loader/loader.py\", line 218, in _load_file\n        node = _yaml.load(fullpath, shortname=filename, copy_tree=rewritable)\n      File \"/home/jamesennis/buildstream/buildstream/_yaml.py\", line 182, in load\n        with open(filename) as f:\n    IsADirectoryError: [Errno 21] Is a directory: '/home/jamesennis/autotools/elements/base'\n\n```\n\n## What is the expected correct behavior?\nWe should handle this exception better. Perhaps with a message along the lines of: \"base is a directory, did you mean base.bst?\".\n\nThis is similar to how the `git` command responds to typos:\n```\n $ git feth\ngit: 'feth' is not a git command. See 'git --help'.\n\nDid you mean this?\n\tfetch\n```\n\nOptional extra:\n1. A [y/n] option, whereupon `y` we execute: `bst show base.bst`\n", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/446/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/427", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/427/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/427/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/427/events", "html_url": "https://github.com/apache/buildstream/issues/427", "id": 799883196, "node_id": "MDU6SXNzdWU3OTk4ODMxOTY=", "number": 427, "title": "pylint version too permissive", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T01:39:57Z", "updated_at": "2021-02-03T01:41:32Z", "closed_at": "2021-02-03T01:41:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/427)\nIn GitLab by [[Gitlab user @dp0]](https://gitlab.com/dp0) on Jun 18, 2018, 13:22\n\n## Summary\n\n[//]: # (Summarize the bug encountered concisely)\n\nWhen attempting to run tests locally, it appears that the version of pylint and pytest_pylint are not compatible. As a result, when these incompatible versions are used, tests are not able to run.\n\nThe change in question which causes this incompatibility can be found at https://github.com/PyCQA/pylint/commit/4210ef9b8c5d9e7b33ff0542683f18b8031193fa#diff-ade2cfcf3e840a993dbd465f517d91f5L1189 .\n\n## Steps to reproduce\n\n[//]: # (How one can reproduce the issue - this is very important)\n\nPerform a test locally. When using pytest_pylint 0.9.0 and pylint 2.0.0, the bug behavior is observed.\n\n## What is the current bug behavior?\n\n[//]: # (What actually happens)\n\nAn exception is thrown stating that pylint is being using incorrectly:\n\n```\nLinting files\nINTERNALERROR> Traceback (most recent call last):\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pytest-3.6.1-py3.6.egg/_pytest/main.py\", line 178, in wrap_session\nINTERNALERROR>     session.exitstatus = doit(config, session) or 0\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pytest-3.6.1-py3.6.egg/_pytest/main.py\", line 214, in _main\nINTERNALERROR>     config.hook.pytest_collection(session=session)\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/__init__.py\", line 617, in __call__\nINTERNALERROR>     return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/__init__.py\", line 222, in _hookexec\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/__init__.py\", line 216, in <lambda>\nINTERNALERROR>     firstresult=hook.spec_opts.get('firstresult'),\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/callers.py\", line 201, in _multicall\nINTERNALERROR>     return outcome.get_result()\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/callers.py\", line 76, in get_result\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/callers.py\", line 180, in _multicall\nINTERNALERROR>     res = hook_impl.function(*args)\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pytest-3.6.1-py3.6.egg/_pytest/main.py\", line 224, in pytest_collection\nINTERNALERROR>     return session.perform_collect()\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pytest-3.6.1-py3.6.egg/_pytest/main.py\", line 432, in perform_collect\nINTERNALERROR>     hook.pytest_collection_finish(session=self)\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/__init__.py\", line 617, in __call__\nINTERNALERROR>     return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/__init__.py\", line 222, in _hookexec\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/__init__.py\", line 216, in <lambda>\nINTERNALERROR>     firstresult=hook.spec_opts.get('firstresult'),\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/callers.py\", line 201, in _multicall\nINTERNALERROR>     return outcome.get_result()\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/callers.py\", line 76, in get_result\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pluggy-0.6.0-py3.6.egg/pluggy/callers.py\", line 180, in _multicall\nINTERNALERROR>     res = hook_impl.function(*args)\nINTERNALERROR>   File \"/home/dplayle/Code/kittyhawk/bst-build/buildstream/.eggs/pytest_pylint-0.9.0-py3.6.egg/pytest_pylint.py\", line 161, in pytest_collection_finish\nINTERNALERROR>     result = lint.Run(args_list, reporter=reporter, exit=False)\nINTERNALERROR> TypeError: __init__() got an unexpected keyword argument 'exit'\n```\n\n## What is the expected correct behavior?\n\n[//]: # (What you should see instead)\n\nThe tests should run without an exception halting the testing process.\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\nSee above.\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\nRestrict down the allowable versions of pylint.\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: issue present at 73b930024d164e076275868253f92a47593f2dd8\n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/427/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/427/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/423", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/423/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/423/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/423/events", "html_url": "https://github.com/apache/buildstream/issues/423", "id": 799880012, "node_id": "MDU6SXNzdWU3OTk4ODAwMTI=", "number": 423, "title": "bst pull silently failed when there is a network timeout", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-03T01:33:02Z", "updated_at": "2021-02-03T01:35:06Z", "closed_at": "2021-02-03T01:35:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/423)\nIn GitLab by [[Gitlab user @awacheux]](https://gitlab.com/awacheux) on Jun 12, 2018, 15:33\n\n## Summary\n\nIf for some reason a remote cache request timeout, the puller print `success` and buildstream fallback to a local build. \n\n\n## Steps to reproduce\n\nMake a cache request to timeout using a dummy tcp server accepting connections only. Use that server as a remote artifact cache in pull only mode.\n\n\n## What is the current bug behavior?\n\nAfter 1 minute, you'll notice that buildstream print `SUCCESS` for the pull operation then schedule a local build.\n\n\n## What is the expected correct behavior?\n\nBuildStream should at least print a `WARNING` to indicate that the request timed out and then fallback to a local build. It shouldn't silently fails.\n\n\n## Relevant logs and/or screenshots\n\n```\n[00:01:00][84f1db78][ pull:perl.bst          ] SUCCESS perl/84f1db78-pull.344.log\n[--:--:--][84f1db78][fetch:perl.bst          ] START   perl/84f1db78-fetch.443.log\n[--:--:--][84f1db78][fetch:perl.bst          ] START   Fetching git[[Gitlab user @github]](https://gitlab.com/github).com:perl/perl\n```\n\nNote that the pull terminated exactly after 1 minute and then a normal build has been scheduled (fetch + build). In that case, the issue was caused by a wrong system proxy configuration.\n\n\n## Other relevant information\n\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.1\" \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/423/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/421", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/421/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/421/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/421/events", "html_url": "https://github.com/apache/buildstream/issues/421", "id": 799878569, "node_id": "MDU6SXNzdWU3OTk4Nzg1Njk=", "number": 421, "title": "\"bst --debug --verbose build --track-all core/gedit.bst\" hangs and prints nothing", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-03T01:29:50Z", "updated_at": "2021-02-03T01:30:44Z", "closed_at": "2021-02-03T01:30:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/421)\nIn GitLab by [[Gitlab user @krichter]](https://gitlab.com/krichter) on Jun 12, 2018, 11:57\n\n## Summary\n\nBuilding `gedit` with `bst --debug --verbose build --track-all core/gedit.bst` hangs and prints nothing which indicates two problem: the hanging and the fact that `--verbose --debug` doesn't indicate which action is executed and probably caused the hang. `--verbose --debug` should print a ton of information no matter what.\n\n\n## Steps to reproduce\n\nFollowing https://wiki.gnome.org/Newcomers/BuildSystemComponent:\n\n```\ngit clone https://gitlab.gnome.org/GNOME/gnome-build-meta.git\ncd /path/to/gnome-build-meta\nbst --debug --verbose build --track-all core/gedit.bst\n```\n\nDownload of information (probably git clones or tarballs) regularly hang, i.e. after a portion of downloads succeed no download occurs for a long time until the process is terminated. I aborted such a download before this issue started occurring all the time.\n\n\n## What is the current bug behavior?\n\nThe process doesn't print anything to console and does't return after 10 minutes, probably never.\n\n\n## What is the expected correct behavior?\n\nThe command should start downloading dependencies or building without `--verbose --debug`. With `--verbose --debug` at least _all_ blocking tasks should be logged before running them.\n\n\n## Relevant logs and/or screenshots\n\n./.\n\n## Possible fixes\n\n./.\n\n## Other relevant information\n\n* BuildStream version affected: 1.1.3-123-g9f77cb66 (built with `python3 setup.py build && sudo python3 setup.py install`)\n* Debugging shows that the hang is caused by\n\n```\n> /usr/local/lib/python3.6/dist-packages/click-6.7-py3.6.egg/click/core.py(1066)invoke()\n-> return _process_result(sub_ctx.command.invoke(sub_ctx))\n(Pdb) l\n1061 \t                cmd_name, cmd, args = self.resolve_command(ctx, args)\n1062 \t                ctx.invoked_subcommand = cmd_name\n1063 \t                Command.invoke(self, ctx)\n1064 \t                sub_ctx = cmd.make_context(cmd_name, args, parent=ctx)\n1065 \t                with sub_ctx:\n1066 ->\t                    return _process_result(sub_ctx.command.invoke(sub_ctx))\n1067 \t\n1068 \t        # In chain mode we create the contexts step by step, but after the\n1069 \t        # base command has been invoked.  Because at that point we do not\n1070 \t        # know the subcommands yet, the invoked subcommand attribute is\n1071 \t        # set to ``*`` to inform the command that subcommands are executed\n(Pdb) n\n```\n\n----\n\nEDIT: Fixed formatting of code sample (~Chandan)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/421/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/421/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/409", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/409/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/409/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/409/events", "html_url": "https://github.com/apache/buildstream/issues/409", "id": 799857937, "node_id": "MDU6SXNzdWU3OTk4NTc5Mzc=", "number": 409, "title": "bst-artifact-receive: CLI should not throw stacktrackes when repo argument is invalid", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-03T01:04:38Z", "updated_at": "2021-02-03T01:05:35Z", "closed_at": "2021-02-03T01:05:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/409)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on May 29, 2018, 12:53\n\n## Summary\n\nThe CLI for `bst-artifact-receive` expects a `repo` argument, which is\nsupposed to be a directory, but Click currently expects it to be just\nany string. This results in stack traces like the one below when the\nargument provided is not a directory:\n\n```\n$ ~/.local/bin/bst-artifact-receive --pull-url http://foo foobaz\nTraceback (most recent call last):\n  File \"/root/.local/bin/bst-artifact-receive\", line 8, in <module>\n    sys.exit(receive_main())\n  ...\n  File \"/src/buildstream/buildstream/_artifactcache/pushreceive.py\", line 581, in __init__\n    self.repo.open(None)\nGLib.Error: g-io-error-quark: /src/buildstream/43fref: opendir(/src/buildstream/foobaz): No such file or directory (1)\n```\n\n\n## Steps to reproduce\n\n```\nbst-artifact-receive --pull-url http://foo non-existent-directory\n```\n\n\n## What is the current bug behavior?\n\nUgly stack trace.\n\n\n## What is the expected correct behavior?\n\nMore helpful error message.\n\n\n## Relevant logs and/or screenshots\n\n[//]: # (Paste any relevant logs - please use code blocks ``` to format console output, logs, and code as it's hard to read otherwise. You can also add a Snippet and link it here. Check the markdown giude on Gitlab for further tips)\n\n## Possible fixes\n\n[//]: # (If you can, link to the line of code that might be responsible for the problem)\n\n## Other relevant information\n\n[//]: # (Add the BuildStream version. Substitute below the \"x\" by \"1\", \"2\" or the right version. Add more than one version if necessary)\n\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.1\" \n\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/409/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/405", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/405/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/405/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/405/events", "html_url": "https://github.com/apache/buildstream/issues/405", "id": 799856042, "node_id": "MDU6SXNzdWU3OTk4NTYwNDI=", "number": 405, "title": "bst is still pushing artifacts it just have pulled", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-03T01:00:24Z", "updated_at": "2021-02-03T01:02:02Z", "closed_at": "2021-02-03T01:02:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/405)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on May 23, 2018, 17:24\n\n## Background\n\nSee, for example, https://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/69952759\n\nI think this was already solved with https://gitlab.com/BuildStream/buildstream/issues/233 or with https://gitlab.com/BuildStream/buildstream/issues/325, opening another issue in case this is a new issue\n\n## Task description\n\nCheck artifact exist in the server before try to push?\n\n## Acceptance Criteria\n\nbst should not push artifacts to the cache server if they are already there", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/405/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/404", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/404/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/404/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/404/events", "html_url": "https://github.com/apache/buildstream/issues/404", "id": 799854764, "node_id": "MDU6SXNzdWU3OTk4NTQ3NjQ=", "number": 404, "title": "Context directories may contain double slashes", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T00:59:06Z", "updated_at": "2021-02-03T01:00:12Z", "closed_at": "2021-02-03T01:00:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/404)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on May 23, 2018, 12:28\n\n## Summary\r\n\r\nDirectories stored by buildstream's context may currently contain double slashes (e.g. `/temp/bst_cache//buildstream/build`). These are not harmful, and in fact quite common (since we cannot predict whether a user ends their path with a `/` or not).\r\n\r\nThe tests in `tests/context/context.py` however read literal strings for paths, and in some environments will fail because a path contains double slashes.\r\n\r\n## Steps to reproduce\r\n\r\n1. Run `XDG_CACHE_HOME=/tmp/buildstream/ ./setup.py test --addopts 'tests/context/context.py'` or similar (note that the cache directory ends in a slash).\r\n2. Observe the tests failing.\r\n\r\n## What is the current bug behavior?\r\n\r\nThe test fails.\r\n\r\n## What is the expected correct behavior?\r\n\r\nThe test should succeed.\r\n\r\n## Relevant logs and/or screenshots\r\n\r\nOutput of `XDG_CACHE_HOME=\"/temp/bst_cache/\" ./setup.py test --addopts 'tests/context/context.py'` on latest master in a fresh fedora testsuite docker container:\r\n\r\n```\r\ntests/context/context.py::test_context_load FAILED                       [100%]\r\n\r\n=================================== FAILURES ===================================\r\n______________________________ test_context_load _______________________________\r\n\r\ncontext_fixture = {'context': <buildstream._context.Context object at 0x7ff3cc42d518>, 'xdg-cache': '/temp/bst_cache/'}\r\n\r\n    def test_context_load(context_fixture):\r\n        context = context_fixture['context']\r\n        cache_home = context_fixture['xdg-cache']\r\n        assert(isinstance(context, Context))\r\n    \r\n        context.load(config=os.devnull)\r\n>       assert(context.sourcedir == os.path.join(cache_home, 'buildstream', 'sources'))\r\nE       AssertionError: assert '/temp/bst_ca...tream/sources' == '/temp/bst_cac...tream/sources'\r\nE         - /temp/bst_cache//buildstream/sources\r\nE         ?                -\r\nE         + /temp/bst_cache/buildstream/sources\r\n\r\ntests/context/context.py:44: AssertionError\r\n```\r\n\r\n## Possible fixes\r\n\r\nWe could either set the assertions [here](https://gitlab.com/BuildStream/buildstream/blob/master/tests/context/context.py#L44) To use `os.path.normpath` on the parsed directories, or we could change buildstream to use that while parsing internally.\r\n\r\nI have added an MR to do the former for now, feel free to discuss whether that's just taping over the issue or whether we don't care about double slashes.\r\n\r\n\r\n## Other relevant information\r\n\r\n* BuildStream version affected: /milestone %\"BuildStream\\_v1.1\"\r\n\r\n----", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/404/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/403", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/403/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/403/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/403/events", "html_url": "https://github.com/apache/buildstream/issues/403", "id": 799853839, "node_id": "MDU6SXNzdWU3OTk4NTM4Mzk=", "number": 403, "title": "Stripping of whitespace from loaded yaml", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-03T00:57:09Z", "updated_at": "2021-02-03T00:58:58Z", "closed_at": "2021-02-03T00:58:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/403)\nIn GitLab by [[Gitlab user @dp0]](https://gitlab.com/dp0) on May 22, 2018, 13:36\n\nWhen parsing the build element YAML, we currently strip the tracking refs of whitespace. I am unclear as to what benefit this brings other than from when tracking information has been modified manually and inadvertently introduced whitespace.\n\nI raise this, as this has surprised us as we have been experimenting with new source plugins and trialling the storage of more complex tracking information that may include whitespace (such as a dependency lock file).", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/403/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/403/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/398", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/398/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/398/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/398/events", "html_url": "https://github.com/apache/buildstream/issues/398", "id": 799850756, "node_id": "MDU6SXNzdWU3OTk4NTA3NTY=", "number": 398, "title": "bst init does not respect --element-path option", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-03T00:50:00Z", "updated_at": "2021-02-03T00:50:52Z", "closed_at": "2021-02-03T00:50:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/398)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on May 11, 2018, 12:17\n\nReproduction steps: Run `bst init --element-path my-element-path` in an empty directory.\n\nExpected output: project.conf is generated that has element-path set to \"my-element-path\" and a directory named \"my-element-path\" is created.\n\nActual output: project.conf is generated that has element-path set to \"my-element-path\" BUT a directory named \"my-element-path\" is not created. Instead a directory named \"elements\" is created.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/397", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/397/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/397/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/397/events", "html_url": "https://github.com/apache/buildstream/issues/397", "id": 799849050, "node_id": "MDU6SXNzdWU3OTk4NDkwNTA=", "number": 397, "title": "Should not retry successfully downloaded files with bad checksums", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2021-02-03T00:46:18Z", "updated_at": "2021-02-03T00:49:53Z", "closed_at": "2021-02-03T00:49:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/397)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 11, 2018, 07:36\n\nCurrently `_downloadablefilesource.py` raises `SourceError()` when the checksum of a successfully downloaded file is not the expected checksum.\n\nThis is the correct thing to do, but unfortunately the `Job()` does not have any way to distinguish *why* there was an error, and if it makes sense to retry the job, so the `Job()` will continue to redownload the same bad file successfully as many times as we are configured to retry.\n\nWe probably want an additional `retry` parameter to `SourceError()` such that the plugin can inform the core whether the error is fatal or whether it makes sense to retry.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/397/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/397/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/395", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/395/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/395/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/395/events", "html_url": "https://github.com/apache/buildstream/issues/395", "id": 799847270, "node_id": "MDU6SXNzdWU3OTk4NDcyNzA=", "number": 395, "title": "Job Failed #67299002: FileExistsError", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-03T00:42:44Z", "updated_at": "2021-02-03T00:44:49Z", "closed_at": "2021-02-03T00:44:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/395)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on May 9, 2018, 15:10\n\nJob [#67299002](/BuildStream/buildstream/-/jobs/67299002) failed for 2f8082ed56ed4da12d54d00edfb0776a5eb5095c\n\n```\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/_scheduler/job.py\", line 320, in _child_action\n        result = self._action_cb(element)\n      File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/_scheduler/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/element.py\", line 1448, in _assemble\n        collect = self.assemble(sandbox)\n      File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/scriptelement.py\", line 280, in assemble\n        SandboxFlags.ROOT_READ_ONLY if self.__root_read_only else 0)\n      File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/sandbox/_sandboxbwrap.py\", line 76, in run\n        mount_map = MountMap(self, flags & SandboxFlags.ROOT_READ_ONLY)\n      File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/sandbox/_mount.py\", line 106, in __init__\n        self.mounts['/'] = Mount(sandbox, '/', not root_readonly)\n      File \"/builds/BuildStream/buildstream/dist/buildstream/buildstream/sandbox/_mount.py\", line 66, in __init__\n        os.makedirs(self.mount_source, exist_ok=True)\n      File \"/usr/lib/python3.5/os.py\", line 241, in makedirs\n        mkdir(name, mode)\n    FileExistsError: [Errno 17] File exists: '/builds/BuildStream/buildstream/dist/buildstream/tmp/test_stack0/cache/build/stack-another-hi-ii7pw49p/scratch/_/mount'\n```\n\nRelated to !452.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/395/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/393", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/393/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/393/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/393/events", "html_url": "https://github.com/apache/buildstream/issues/393", "id": 799845872, "node_id": "MDU6SXNzdWU3OTk4NDU4NzI=", "number": 393, "title": "Inconsistent \"no reference\" state shown for workspaced elements", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T00:39:45Z", "updated_at": "2021-02-03T00:40:52Z", "closed_at": "2021-02-03T00:40:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/393)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 8, 2018, 13:19\n\nA workspaced element uses a local workspace, which might not have been created using a cached source with a known ref.\n\nWhen a workspaced element has no ref (refs are not stored with the project and it has never been tracked), then it cannot be built because BuildStream complains that it's ref is unknown.\n\nThis is wrong because BuildStream does not use the upstream, project decided source for a workspaced element.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/393/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/393/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/390", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/390/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/390/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/390/events", "html_url": "https://github.com/apache/buildstream/issues/390", "id": 799844141, "node_id": "MDU6SXNzdWU3OTk4NDQxNDE=", "number": 390, "title": "\"FAILURE Failed to link ... No such file or directory\" in a compose element", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-03T00:35:57Z", "updated_at": "2021-02-03T00:37:44Z", "closed_at": "2021-02-03T00:37:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/390)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on May 5, 2018, 19:19\n\nI get the following error\n```\n        [--:--:--] INFO    [flatpak/platform-image.bst]: Composing 99414 files\n        [00:00:00] FAILURE [flatpak/platform-image.bst]: Creating composition\n        [00:00:48] FAILURE [flatpak/platform-image.bst]: Failed to link '/home/abderrahim/.cache/buildstream/build/flatpak-platform-image-b2cifeac/root -> /home/abderrahim/.cache/buildstream/build/flatpak-platform-image-b2cifeac/root/buildstream/install': [Errno 2] No such file or directory: '/home/abderrahim/.cache/buildstream/build/flatpak-platform-image-b2cifeac/root/buildstream/install/etc/avahi'\n```\n\nWhat I find weird is that it doesn't make sense to me. It tries to link `/root` into `/root/buildstream/install`, but doesn't find `/root/buildstream/install/etc/avahi`.\n\nThis happens with the `abderrahim/flatpak-sdk` branch of gnome-build-meta. Here is the full build log [build.log](/uploads/8bd7febb37ce75993276b27d506ab88d/build.log)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/390/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/386", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/386/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/386/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/386/events", "html_url": "https://github.com/apache/buildstream/issues/386", "id": 799841245, "node_id": "MDU6SXNzdWU3OTk4NDEyNDU=", "number": 386, "title": "Don't print failure summary when there are no failures", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-03T00:29:23Z", "updated_at": "2021-02-03T00:31:02Z", "closed_at": "2021-02-03T00:31:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/386)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on May 1, 2018, 23:18\n\nI had a failure, selected Retry build, and the build succeeded.\n\nBut I thought the build had failed, because BuildStream printed a big scary failure summary. The failure is from the original failed build. Note the **SUCCESS Build** at the top and the **failed 0** printed at the very bottom. All modules were built successfully in the end.\n\nLet's not include retried builds in the failure summary if the retry subsequently succeeded?\n\n```\n[02:19:18][][] SUCCESS Build\n\nFailure Summary\n  core-deps/WebKitGTK+.bst:\n    [00:41:07][2396a336][build:core-deps/WebKitGTK+.bst      ] FAILURE Running build-commands\n    [00:41:07][2396a336][build:core-deps/WebKitGTK+.bst      ] FAILURE Running build-commands\n    [00:41:39][2396a336][build:core-deps/WebKitGTK+.bst      ] FAILURE Command 'cmake --build _builddir -- ${JOBS}' failed with exitcode 1\n\n        Sandbox directory: /home/mcatanzaro/.cache/buildstream/build/core-deps-WebKitGTK+-gninasoz\n\n        Printing the last 20 lines from log file:\n        /home/mcatanzaro/.cache/buildstream/logs/gnome/core-deps-WebKitGTK+/2396a336-build.23835.log\n        ======================================================================\n        [3083/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource37.cpp.o\n        [3084/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource40.cpp.o\n        [3085/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource41.cpp.o\n        FAILED: Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource41.cpp.o \n        /usr/bin/c++  -DBUILDING_GTK__=1 -DBUILDING_WEBKIT -DBUILDING_WITH_CMAKE=1 -DBUILDING_WebKit -DDATADIR=\\\"/usr/share\\\" -DENABLE_PLUGIN_PROCESS=1 -DGETTEXT_PACKAGE=\\\"WebKit2GTK-4.0\\\" -DHAVE_CONFIG_H=1 -DJSC_GLIB_API_ENABLED -DLIBDIR=\\\"/usr/lib/x86_64-linux-gnu\\\" -DLIBEXECDIR=\\\"/usr/libexec\\\" -DLOCALEDIR=\\\"/usr/share/locale\\\" -DPKGLIBEXECDIR=\\\"/usr/libexec/webkit2gtk-4.0\\\" -DWEBKIT2_COMPILATION -DWEBKITGTK_API_VERSION_STRING=\\\"4.0\\\" -DWEBKIT_DOM_USE_UNSTABLE_API -DWebKit_EXPORTS -IDerivedSources/ForwardingHeaders/webkit2gtk -IDerivedSources/ForwardingHeaders/webkit2gtk-webextension -IDerivedSources/webkit2gtk/webkit2 -IDerivedSources/webkit2gtk -I../Source/WebKit -I../Source/WebKit/NetworkProcess -I../Source/WebKit/NetworkProcess/Cookies -I../Source/WebKit/NetworkProcess/CustomProtocols -I../Source/WebKit/NetworkProcess/Downloads -I../Source/WebKit/NetworkProcess/FileAPI -I../Source/WebKit/NetworkProcess/cache -I../Source/WebKit/NetworkProcess/capture -I../Source/WebKit/NetworkProcess/webrtc -I../Source/WebKit/Platform -I../Source/WebKit/Platform/IPC -I../Source/WebKit/PluginProcess -I../Source/WebKit/Shared -I../Source/WebKit/Shared/API -I../Source/WebKit/Shared/API/c -I../Source/WebKit/Shared/Authentication -I../Source/WebKit/Shared/CoreIPCSupport -I../Source/WebKit/Shared/Databases -I../Source/WebKit/Shared/Databases/IndexedDB -I../Source/WebKit/Shared/FileAPI -I../Source/WebKit/Shared/Gamepad -I../Source/WebKit/Shared/Plugins -I../Source/WebKit/Shared/Plugins/Netscape -I../Source/WebKit/Shared/Plugins/Netscape/x11 -I../Source/WebKit/Shared/RemoteLayerTree -I../Source/WebKit/Shared/Storage -I../Source/WebKit/Shared/WebsiteData -I../Source/WebKit/StorageProcess -I../Source/WebKit/StorageProcess/IndexedDB -I../Source/WebKit/StorageProcess/ServiceWorker -I../Source/WebKit/UIProcess -I../Source/WebKit/UIProcess/API -I../Source/WebKit/UIProcess/API/C -I../Source/WebKit/UIProcess/API/cpp -I../Source/WebKit/UIProcess/ApplePay -I../Source/WebKit/UIProcess/Authentication -I../Source/WebKit/UIProcess/Automation -I../Source/WebKit/UIProcess/Downloads -I../Source/WebKit/UIProcess/Gamepad -I../Source/WebKit/UIProcess/Launcher -I../Source/WebKit/UIProcess/Network -I../Source/WebKit/UIProcess/Network/CustomProtocols -I../Source/WebKit/UIProcess/Notifications -I../Source/WebKit/UIProcess/Plugins -I../Source/WebKit/UIProcess/RemoteLayerTree -I../Source/WebKit/UIProcess/Storage -I../Source/WebKit/UIProcess/UserContent -I../Source/WebKit/UIProcess/WebStorage -I../Source/WebKit/UIProcess/WebsiteData -I../Source/WebKit/WebProcess -I../Source/WebKit/WebProcess/ApplePay -I../Source/WebKit/WebProcess/ApplicationCache -I../Source/WebKit/WebProcess/Automation -I../Source/WebKit/WebProcess/Cache -I../Source/WebKit/WebProcess/Databases -I../Source/WebKit/WebProcess/Databases/IndexedDB -I../Source/WebKit/WebProcess/FileAPI -I../Source/WebKit/WebProcess/FullScreen -I../Source/WebKit/WebProcess/Gamepad -I../Source/WebKit/WebProcess/Geolocation -I../Source/WebKit/WebProcess/IconDatabase -I../Source/WebKit/WebProcess/InjectedBundle -I../Source/WebKit/WebProcess/InjectedBundle/API -I../Source/WebKit/WebProcess/InjectedBundle/API/c -I../Source/WebKit/WebProcess/InjectedBundle/DOM -I../Source/WebKit/WebProcess/Launching -I../Source/WebKit/WebProcess/MediaCache -I../Source/WebKit/WebProcess/MediaStream -I../Source/WebKit/WebProcess/Network -I../Source/WebKit/WebProcess/Network/webrtc -I../Source/WebKit/WebProcess/Notifications -I../Source/WebKit/WebProcess/OriginData -I../Source/WebKit/WebProcess/Plugins -I../Source/WebKit/WebProcess/Plugins/Netscape -I../Source/WebKit/WebProcess/ResourceCache -I../Source/WebKit/WebProcess/Storage -I../Source/WebKit/WebProcess/UserContent -I../Source/WebKit/WebProcess/WebCoreSupport -I../Source/WebKit/WebProcess/WebPage -I../Source/WebKit/WebProcess/WebPage/RemoteLayerTree -I../Source/WebKit/WebProcess/WebStorage -IDerivedSources/WebKit -IDerivedSources/WebKit/include -I../Source -I../WebKitLibraries -I../Source/ThirdParty/ANGLE -I../Source/ThirdParty/ANGLE/include/KHR -IDerivedSources/JavaScriptCore/javascriptcoregtk -IDerivedSources/ForwardingHeaders/JavaScriptCore -IDerivedSources/ForwardingHeaders/JavaScriptCore/glib -I../Source/WebKit/PluginProcess/unix -I../Source/WebKit/NetworkProcess/CustomProtocols/soup -I../Source/WebKit/NetworkProcess/Downloads/soup -I../Source/WebKit/NetworkProcess/gtk -I../Source/WebKit/NetworkProcess/soup -I../Source/WebKit/NetworkProcess/unix -I../Source/WebKit/Platform/IPC/glib -I../Source/WebKit/Platform/IPC/unix -I../Source/WebKit/Platform/classifier -I../Source/WebKit/Shared/API/c/gtk -I../Source/WebKit/Shared/API/glib -I../Source/WebKit/Shared/CoordinatedGraphics -I../Source/WebKit/Shared/CoordinatedGraphics/threadedcompositor -I../Source/WebKit/Shared/Plugins/unix -I../Source/WebKit/Shared/glib -I../Source/WebKit/Shared/gtk -I../Source/WebKit/Shared/linux -I../Source/WebKit/Shared/soup -I../Source/WebKit/Shared/unix -I../Source/WebKit/StorageProcess/unix -I../Source/WebKit/UIProcess/API/C/cairo -I../Source/WebKit/UIProcess/API/C/gtk -I../Source/WebKit/UIProcess/API/glib -I../Source/WebKit/UIProcess/API/gtk -I../Source/WebKit/UIProcess/Network/CustomProtocols/soup -I../Source/WebKit/UIProcess/Plugins/gtk -I../Source/WebKit/UIProcess/glib -I../Source/WebKit/UIProcess/gstreamer -I../Source/WebKit/UIProcess/gtk -I../Source/WebKit/UIProcess/linux -I../Source/WebKit/UIProcess/soup -I../Source/WebKit/WebProcess/InjectedBundle/API/glib -I../Source/WebKit/WebProcess/InjectedBundle/API/glib/DOM -I../Source/WebKit/WebProcess/InjectedBundle/API/gtk -I../Source/WebKit/WebProcess/InjectedBundle/API/gtk/DOM -I../Source/WebKit/WebProcess/Plugins/Netscape/unix -I../Source/WebKit/WebProcess/Plugins/Netscape/x11 -I../Source/WebKit/WebProcess/gtk -I../Source/WebKit/WebProcess/soup -I../Source/WebKit/WebProcess/unix -I../Source/WebKit/WebProcess/WebCoreSupport/gtk -I../Source/WebKit/WebProcess/WebCoreSupport/soup -I../Source/WebKit/WebProcess/WebPage/CoordinatedGraphics -I../Source/WebKit/WebProcess/WebPage/atk -I../Source/WebKit/WebProcess/WebPage/gtk -isystem /usr/include/cairo -isystem /usr/include/enchant-2 -isystem /usr/include/gstreamer-1.0 -isystem /usr/include/glib-2.0 -isystem /usr/lib/x86_64-linux-gnu/glib-2.0/include -isystem /usr/include/harfbuzz -isystem /usr/include/libsoup-2.4 -isystem /usr/include/gdk-pixbuf-2.0 -isystem /usr/include/gtk-3.0 -isystem /usr/include/at-spi2-atk/2.0 -isystem /usr/include/at-spi-2.0 -isystem /usr/include/dbus-1.0 -isystem /usr/lib/x86_64-linux-gnu/dbus-1.0/include -isystem /usr/include/gio-unix-2.0 -isystem /usr/include/libdrm -isystem /usr/include/pango-1.0 -isystem /usr/include/atk-1.0 -isystem /usr/include/pixman-1 -isystem /usr/include/uuid -isystem /usr/include/freetype2 -isystem /usr/include/libpng16 -isystem /usr/include/gtk-3.0/unix-print -I. -I../Source/WebCore -I../Source/WebCore/Modules/airplay -I../Source/WebCore/Modules/beacon -I../Source/WebCore/Modules/applepay -I../Source/WebCore/Modules/applepay/paymentrequest -I../Source/WebCore/Modules/cache -I../Source/WebCore/Modules/credentialmanagement -I../Source/WebCore/Modules/encryptedmedia -I../Source/WebCore/Modules/encryptedmedia/legacy -I../Source/WebCore/Modules/entriesapi -I../Source/WebCore/Modules/fetch -I../Source/WebCore/Modules/geolocation -I../Source/WebCore/Modules/indexeddb -I../Source/WebCore/Modules/indexeddb/client -I../Source/WebCore/Modules/indexeddb/server -I../Source/WebCore/Modules/indexeddb/shared -I../Source/WebCore/Modules/mediacapabilities -I../Source/WebCore/Modules/mediacontrols -I../Source/WebCore/Modules/mediasession -I../Source/WebCore/Modules/mediasource -I../Source/WebCore/Modules/mediastream -I../Source/WebCore/Modules/navigatorcontentutils -I../Source/WebCore/Modules/notifications -I../Source/WebCore/Modules/paymentrequest -I../Source/WebCore/Modules/plugins -I../Source/WebCore/Modules/quota -I../Source/WebCore/Modules/speech -I../Source/WebCore/Modules/streams -I../Source/WebCore/Modules/webaudio -I../Source/WebCore/Modules/webauthn -I../Source/WebCore/Modules/webdatabase -I../Source/WebCore/Modules/webdriver -I../Source/WebCore/Modules/websockets -I../Source/WebCore/Modules/webvr -I../Source/WebCore/accessibility -I../Source/WebCore/animation -I../Source/WebCore/bindings -I../Source/WebCore/bindings/js -I../Source/WebCore/bridge -I../Source/WebCore/bridge/c -I../Source/WebCore/bridge/jsc -I../Source/WebCore/contentextensions -I../Source/WebCore/crypto -I../Source/WebCore/crypto/algorithms -I../Source/WebCore/crypto/keys -I../Source/WebCore/crypto/parameters -I../Source/WebCore/css -I../Source/WebCore/css/parser -I../Source/WebCore/cssjit -I../Source/WebCore/dom -I../Source/WebCore/dom/default -I../Source/WebCore/dom/messageports -I../Source/WebCore/domjit -I../Source/WebCore/editing -I../Source/WebCore/fileapi -I../Source/WebCore/history -I../Source/WebCore/html -I../Source/WebCore/html/canvas -I../Source/WebCore/html/forms -I../Source/WebCore/html/parser -I../Source/WebCore/html/shadow -I../Source/WebCore/html/track -I../Source/WebCore/inspector -I../Source/WebCore/inspector/agents -I../Source/WebCore/inspector/agents/page -I../Source/WebCore/inspector/agents/worker -I../Source/WebCore/loader -I../Source/WebCore/loader/appcache -I../Source/WebCore/loader/archive -I../Source/WebCore/loader/archive/mhtml -I../Source/WebCore/loader/cache -I../Source/WebCore/loader/icon -I../Source/WebCore/mathml -I../Source/WebCore/page -I../Source/WebCore/page/animation -I../Source/WebCore/page/csp -I../Source/WebCore/page/scrolling -I../Source/WebCore/platform -I../Source/WebCore/platform/animation -I../Source/WebCore/platform/audio -I../Source/WebCore/platform/crypto -I../Source/WebCore/platform/encryptedmedia -I../Source/WebCore/platform/gamepad -I../Source/WebCore/platform/graphics -I../Source/WebCore/platform/graphics/cpu/arm -I../Source/WebCore/platform/graphics/cpu/arm/filters -I../Source/WebCore/platform/graphics/displaylists -I../Source/WebCore/platform/graphics/filters -I../Source/WebCore/platform/graphics/harfbuzz -I../Source/WebCore/platform/graphics/harfbuzz/ng -I../Source/WebCore/platform/graphics/iso -I../Source/WebCore/platform/graphics/opentype -I../Source/WebCore/platform/graphics/transforms -I../Source/WebCore/platform/mediastream -I../Source/WebCore/platform/mediastream/libwebrtc -I../Source/WebCore/platform/mock -I../Source/WebCore/platform/mock/mediasource -I../Source/WebCore/platform/network -I../Source/WebCore/platform/sql -I../Source/WebCore/platform/text -I../Source/WebCore/platform/text/icu -I../Source/WebCore/platform/vr -I../Source/WebCore/plugins -I../Source/WebCore/rendering -I../Source/WebCore/rendering/line -I../Source/WebCore/rendering/mathml -I../Source/WebCore/rendering/shapes -I../Source/WebCore/rendering/style -I../Source/WebCore/rendering/svg -I../Source/WebCore/rendering/updating -I../Source/WebCore/replay -I../Source/WebCore/storage -I../Source/WebCore/style -I../Source/WebCore/svg -I../Source/WebCore/svg/animation -I../Source/WebCore/svg/graphics -I../Source/WebCore/svg/graphics/filters -I../Source/WebCore/svg/properties -I../Source/WebCore/websockets -I../Source/WebCore/workers -I../Source/WebCore/workers/service -I../Source/WebCore/workers/service/context -I../Source/WebCore/workers/service/server -I../Source/WebCore/xml -I../Source/WebCore/xml/parser -IDerivedSources/WebCore -IDerivedSources/ForwardingHeaders/ANGLE -I../Source/WebCore/platform/graphics/gpu -I../Source/ThirdParty/xdgmime/src -I../Source/WebCore/platform/graphics/cairo -I../Source/WebCore/platform/graphics/freetype -I../Source/WebCore/platform/graphics/gstreamer -I../Source/WebCore/platform/graphics/gstreamer/mse -I../Source/WebCore/platform/graphics/gstreamer/eme -I../Source/WebCore/platform/audio/gstreamer -I../Source/WebCore/platform/image-decoders -I../Source/WebCore/platform/image-decoders/bmp -I../Source/WebCore/platform/image-decoders/gif -I../Source/WebCore/platform/image-decoders/ico -I../Source/WebCore/platform/image-decoders/jpeg -I../Source/WebCore/platform/image-decoders/png -I../Source/WebCore/platform/image-decoders/webp -I../Source/WebCore/platform/graphics/texmap -I../Source/WebCore/page/scrolling/coordinatedgraphics -I../Source/WebCore/platform/graphics/texmap/coordinated -I../Source/WebCore/platform/graphics/nicosia -I../Source/WebCore/platform/graphics/nicosia/cairo -I../Source/WebCore/accessibility/atk -I../Source/WebCore/editing/atk -I../Source/WebCore/page/gtk -I../Source/WebCore/platform/geoclue -I../Source/WebCore/platform/gtk -I../Source/WebCore/platform/graphics/egl -I../Source/WebCore/platform/graphics/glx -I../Source/WebCore/platform/graphics/gtk -I../Source/WebCore/platform/graphics/opengl -I../Source/WebCore/platform/graphics/wayland -I../Source/WebCore/platform/graphics/x11 -I../Source/WebCore/platform/mediastream/gtk -I../Source/WebCore/platform/network/gtk -I../Source/WebCore/platform/network/soup -I../Source/WebCore/platform/text/gtk -IDerivedSources/ForwardingHeaders -I../Source/bmalloc -IDerivedSources -I../Source/ThirdParty -fdiagnostics-color=always -Wno-expansion-to-defined -Wno-attributes -Wno-noexcept-type -Wno-maybe-uninitialized -Wwrite-strings -Wundef -Wpointer-arith -Wmissing-format-attribute -Wformat-security -Wcast-align -Wextra -Wall  -fno-strict-aliasing -fno-exceptions -std=c++14 -fno-rtti -O2 -g -DNDEBUG -fPIC    -include /buildstream/gnome/core-deps/WebKitGTK+.bst/Source/WebKit/WebKit2Prefix.h -Wno-unused-parameter -MD -MT Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource41.cpp.o -MF Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource41.cpp.o.d -o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource41.cpp.o -c DerivedSources/WebKit/unified-sources/UnifiedSource41.cpp\n        cc1plus: internal compiler error: Segmentation fault\n        Please submit a full bug report,\n        with preprocessed source if appropriate.\n        See <https://gcc.gnu.org/bugs/> for instructions.\n        [3086/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource38.cpp.o\n        [3087/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource39.cpp.o\n        [3088/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource42.cpp.o\n        [3089/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource43.cpp.o\n        [3090/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource44.cpp.o\n        [3091/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource46.cpp.o\n        [3092/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource45.cpp.o\n        ninja: build stopped: subcommand failed.\n        [00:41:07] FAILURE [core-deps/WebKitGTK+.bst]: Running build-commands\n        [00:41:07] FAILURE [core-deps/WebKitGTK+.bst]: Running build-commands\n        [00:41:39] FAILURE [core-deps/WebKitGTK+.bst]: Command 'cmake --build _builddir -- ${JOBS}' failed with exitcode 1\n        ======================================================================\n\n    [00:39:40][2396a336][build:core-deps/WebKitGTK+.bst      ] FAILURE Running build-commands\n    [00:39:40][2396a336][build:core-deps/WebKitGTK+.bst      ] FAILURE Running build-commands\n    [00:40:12][2396a336][build:core-deps/WebKitGTK+.bst      ] FAILURE Command 'cmake --build _builddir -- ${JOBS}' failed with exitcode 1\n\n        Sandbox directory: /home/mcatanzaro/.cache/buildstream/build/core-deps-WebKitGTK+-fgxhe8ky\n\n        Printing the last 20 lines from log file:\n        /home/mcatanzaro/.cache/buildstream/logs/gnome/core-deps-WebKitGTK+/2396a336-build.14069.log\n        ======================================================================\n        [3105/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource55.cpp.o\n        [3106/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource58.cpp.o\n        [3107/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource61.cpp.o\n        [3108/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource60.cpp.o\n        [3109/3123] Building CXX object Source/WebKit/CMakeFiles/webkit2gtkinjectedbundle.dir/WebProcess/InjectedBundle/API/glib/WebKitInjectedBundleMain.cpp.o\n        [3110/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource53.cpp.o\n        [3111/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource56.cpp.o\n        [3112/3123] Building CXX object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource59.cpp.o\n        [3113/3123] Linking CXX shared library lib/libwebkit2gtk-4.0.so.37.29.0\n        FAILED: lib/libwebkit2gtk-4.0.so.37.29.0 \n        : && /usr/bin/c++ -fPIC -fdiagnostics-color=always -Wno-expansion-to-defined -Wno-attributes -Wno-noexcept-type -Wno-maybe-uninitialized -Wwrite-strings -Wundef -Wpointer-arith -Wmissing-format-attribute -Wformat-security -Wcast-align -Wextra -Wall  -fno-strict-aliasing -fno-exceptions -std=c++14 -fno-rtti -O2 -g -DNDEBUG  -Wl,--no-undefined -L/usr/lib/x86_64-linux-gnu   -Wl,--version-script,/buildstream/gnome/core-deps/WebKitGTK+.bst/Source/WebKit/webkitglib-symbols.map -shared -Wl,-soname,libwebkit2gtk-4.0.so.37 -o lib/libwebkit2gtk-4.0.so.37.29.0 Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/Cookies/WebCookieManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/Downloads/Download.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/Downloads/DownloadManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/Downloads/PendingDownload.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/FileAPI/NetworkBlobRegistry.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkCORSPreflightChecker.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkConnectionToWebProcess.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkContentRuleListManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkDataTask.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkDataTaskBlob.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkLoad.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkLoadChecker.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkProcess.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkProcessCreationParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkProcessPlatformStrategies.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkResourceLoadParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkResourceLoader.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkSession.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/NetworkSocketStream.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/PingLoad.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/PreconnectTask.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/CacheStorageEngine.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/CacheStorageEngineCache.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/CacheStorageEngineCaches.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/CacheStorageEngineConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCache.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheBlobStorage.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheCoders.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheEntry.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheFileSystem.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheKey.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheSpeculativeLoad.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheSpeculativeLoadManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheSubresourcesEntry.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheStatistics.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/cache/NetworkCacheStorage.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/capture/NetworkCaptureEvent.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/capture/NetworkCaptureManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/capture/NetworkCaptureRecorder.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/capture/NetworkCaptureReplayer.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/capture/NetworkCaptureResource.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/capture/NetworkDataTaskReplay.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/NetworkProcess/webrtc/NetworkMDNSRegister.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/Logging.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/Module.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/ArgumentCoders.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/Attachment.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/Connection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/DataReference.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/Decoder.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/Encoder.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/MessageReceiverMap.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/MessageSender.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/StringReference.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/PluginProcess/PluginControllerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/PluginProcess/PluginCreationParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/PluginProcess/PluginProcess.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/PluginProcess/WebProcessConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/ActivityAssertion.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/AsyncRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/BlobDataFileReferenceWithSandboxExtension.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/CacheModel.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/ChildProcess.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/ContextMenuContextData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/EditorState.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/FontInfo.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/FrameInfoData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/LayerTreeContext.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/LoadParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/NavigationActionData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/PlatformPopupMenuData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/PrintInfo.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/RTCNetwork.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/RTCPacketOptions.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/SessionState.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/SessionTracker.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/ShareableBitmap.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/ShareableResource.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/SharedStringHashStore.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/SharedStringHashTableReadOnly.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/SharedStringHashTable.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/StatisticsData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/TouchBarMenuData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/TouchBarMenuItemData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/URLSchemeTaskParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/UpdateInfo.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/UserData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebBackForwardListItem.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebCompiledContentRuleList.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebCompiledContentRuleListData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebConnectionClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebContextMenuItem.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebContextMenuItemData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebCoreArgumentCoders.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebErrors.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebEvent.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebEventConversion.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebGeolocationPosition.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebHitTestResultData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebImage.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebKeyboardEvent.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebKit2Initialize.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebMediaSessionMetadata.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebMemorySampler.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebMouseEvent.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebPageCreationParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebPageGroupData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebPlatformTouchPoint.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebPopupItem.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebPreferencesDefaultValues.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebPreferencesStore.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebProcessCreationParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebRenderLayer.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebRenderObject.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebTouchEvent.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebUserContentControllerDataTypes.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebWheelEvent.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebsiteDataStoreParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebsitePoliciesData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIArray.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIDictionary.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIError.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIFrameHandle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIGeometry.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIObject.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIPageGroupHandle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIPageHandle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIURLRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/APIURLResponse.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKArray.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKCertificateInfo.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKConnectionRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKContextMenuItem.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKDeprecatedFunctions.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKDictionary.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKErrorRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKGeometry.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKImage.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKMutableArray.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKMutableDictionary.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKNumber.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKPluginInformation.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKRenderLayer.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKRenderObject.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKSecurityOriginRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKSerializedScriptValue.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKString.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKType.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKURL.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKURLRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKURLResponse.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/c/WKUserContentURLPattern.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Authentication/AuthenticationManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Databases/IndexedDB/IDBUtilities.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Databases/IndexedDB/WebIDBResult.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Gamepad/GamepadData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Plugins/NPIdentifierData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Plugins/NPObjectMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Plugins/NPObjectProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Plugins/NPRemoteObjectMap.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Plugins/NPVariantData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Plugins/PluginProcessCreationParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Plugins/Netscape/NetscapePluginModule.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Plugins/Netscape/NetscapePluginModuleNone.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Plugins/Netscape/PluginInformation.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Storage/StorageProcessCreationParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/WebsiteData/WebsiteData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/StorageProcess/StorageProcess.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/StorageProcess/StorageToWebProcessConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/StorageProcess/IndexedDB/WebIDBConnectionToClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/StorageProcess/ServiceWorker/WebSWOriginStore.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/StorageProcess/ServiceWorker/WebSWServerConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/StorageProcess/ServiceWorker/WebSWServerToContextConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/BackgroundProcessResponsivenessTimer.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/ChildProcessProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/DrawingAreaProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/FrameLoadState.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/GeolocationPermissionRequestManagerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/GeolocationPermissionRequestProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/PageLoadState.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/ProcessAssertion.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/ProcessThrottler.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/RemoteWebInspectorProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/ResourceLoadStatisticsPersistentStorage.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/ResponsivenessTimer.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/ServiceWorkerProcessProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/StatisticsRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/SuspendedPageProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/SystemPreviewController.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/TextCheckerCompletion.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/UIMessagePortChannelProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/UserMediaPermissionCheckProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/UserMediaPermissionRequestManagerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/UserMediaPermissionRequestProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/UserMediaProcessManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/VisitedLinkStore.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebBackForwardList.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebColorPicker.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebConnectionToWebProcess.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebContextClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebContextConnectionClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebContextInjectedBundleClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebContextMenuListenerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebContextMenuProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebCookieManagerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebCookieManagerProxyClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebEditCommandProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebFormClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebFormSubmissionListenerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebFrameListenerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebFramePolicyListenerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebFrameProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebFullScreenManagerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebGeolocationManagerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebGeolocationProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebGrammarDetail.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebInspectorProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebInspectorUtilities.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebNavigationState.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebOpenPanelResultListenerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebPageDiagnosticLoggingClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebPageGroup.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebPageInjectedBundleClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebPageProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebPasteboardProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebPreferences.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebProcessLifetimeObserver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebProcessLifetimeTracker.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebProcessPool.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebProcessProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebURLSchemeHandler.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebURLSchemeTask.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebViewportAttributes.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIContentRuleList.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIContentRuleListStore.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIExperimentalFeature.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIFrameInfo.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIHTTPCookieStore.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIHitTestResult.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APINavigation.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APINavigationData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIPageConfiguration.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIProcessPoolConfiguration.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIOpenPanelParameters.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APISessionState.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIURLSchemeTask.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIUserContentWorld.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIUserScript.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIUserStyleSheet.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIWebsiteDataStore.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIWebsitePolicies.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/APIWindowFeatures.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKApplicationCacheManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKAuthenticationChallenge.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKAuthenticationDecisionListener.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKBackForwardListItemRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKBackForwardListRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKContext.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKContextConfigurationRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKCookieManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKCredential.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKDownload.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKFormSubmissionListener.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKFrame.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKFrameHandleRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKFrameInfoRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKFramePolicyListener.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKGeolocationManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKGeolocationPermissionRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKGeolocationPosition.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKHitTestResult.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKIconDatabase.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKInspector.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKKeyValueStorageManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKMediaSessionMetadata.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKNavigationActionRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKNavigationDataRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKNavigationRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKNavigationResponseRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKNotification.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKNotificationManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKNotificationPermissionRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKOpenPanelParametersRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKOpenPanelResultListener.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKPage.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKPageConfigurationRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKPageGroup.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKPreferences.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKProtectionSpace.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKResourceCacheManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKSessionStateRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKTextChecker.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKUserContentControllerRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKUserMediaPermissionCheck.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKUserMediaPermissionRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKViewportAttributes.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKWebsiteDataStoreRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKWebsitePolicies.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/C/WKWindowFeaturesRef.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Authentication/AuthenticationChallengeProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Authentication/AuthenticationDecisionListener.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Authentication/WebCredential.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Authentication/WebProtectionSpace.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Automation/WebAutomationSession.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Downloads/DownloadProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Downloads/DownloadProxyMap.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Gamepad/UIGamepad.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Gamepad/UIGamepadProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Launcher/ProcessLauncher.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Network/NetworkProcessProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Notifications/NotificationPermissionRequestManagerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Notifications/WebNotification.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Notifications/WebNotificationManagerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Notifications/WebNotificationProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Plugins/PlugInAutoStartProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Plugins/PluginInfoStore.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Plugins/PluginProcessManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Plugins/PluginProcessProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Storage/StorageProcessProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/UserContent/WebScriptMessageHandler.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/UserContent/WebUserContentControllerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebStorage/LocalStorageDatabase.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebStorage/LocalStorageDatabaseTracker.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebsiteData/WebsiteDataRecord.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/WebsiteData/WebsiteDataStore.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebConnectionToUIProcess.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebProcess.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Automation/WebAutomationSessionProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Cache/WebCacheStorageConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Cache/WebCacheStorageProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Databases/WebDatabaseProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Databases/IndexedDB/WebIDBConnectionToServer.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/FileAPI/BlobRegistryProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/FullScreen/WebFullScreenManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Gamepad/WebGamepad.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Gamepad/WebGamepadProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Geolocation/GeolocationPermissionRequestManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Geolocation/WebGeolocationManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundleBackForwardList.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundleBackForwardListItem.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundleClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundleDOMWindowExtension.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundleHitTestResult.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundleNavigationAction.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundlePageContextMenuClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundlePageEditorClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundlePageFormClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundlePageFullScreenClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundlePageLoaderClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundlePagePolicyClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundlePageResourceLoadClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundlePageUIClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/InjectedBundleScriptWorld.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundleBackForwardList.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundleBackForwardListItem.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundleDOMWindowExtension.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundleFrame.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundleHitTestResult.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundleInspector.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundleNavigationAction.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundleNodeHandle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundlePage.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundlePageGroup.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundlePageOverlay.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundleRangeHandle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/c/WKBundleScriptWorld.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/DOM/InjectedBundleCSSStyleDeclarationHandle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/DOM/InjectedBundleFileHandle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/DOM/InjectedBundleNodeHandle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/DOM/InjectedBundleRangeHandle.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/MediaStream/MediaDeviceSandboxExtensions.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/MediaStream/UserMediaPermissionRequestManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/NetworkProcessConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/WebLoaderStrategy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/WebResourceLoader.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/WebSocketProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/WebSocketStream.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/webrtc/LibWebRTCProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/webrtc/LibWebRTCResolver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/webrtc/LibWebRTCSocket.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/webrtc/LibWebRTCSocketFactory.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/webrtc/WebMDNSRegister.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/webrtc/WebRTCMonitor.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/webrtc/WebRTCResolver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Network/webrtc/WebRTCSocket.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Notifications/NotificationPermissionRequestManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Notifications/WebNotificationManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Plugin.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/PluginProcessConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/PluginProcessConnectionManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/PluginProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/PluginView.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/WebPluginInfoProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/JSNPMethod.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/JSNPObject.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/NPJSObject.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/NPRuntimeObjectMap.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/NPRuntimeUtilities.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/NetscapeBrowserFuncs.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/NetscapePlugin.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/NetscapePluginNone.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/NetscapePluginStream.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Storage/ServiceWorkerClientFetch.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Storage/WebSWClientConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Storage/WebSWContextManagerConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Storage/WebSWOriginTable.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Storage/WebServiceWorkerFetchTaskClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Storage/WebServiceWorkerProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Storage/WebToStorageProcessConnection.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/UserContent/WebUserContentController.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/SessionStateConversion.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebChromeClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebColorChooser.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebContextMenuClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebDiagnosticLoggingClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebDragClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebEditorClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebFrameLoaderClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebGeolocationClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebInspectorClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebMessagePortChannelProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebNotificationClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebPerformanceLoggingClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebPlatformStrategies.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebPlugInClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebPopupMenu.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebProgressTrackerClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebSearchPopupMenu.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebCoreSupport/WebUserMediaClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/DrawingArea.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/EventDispatcher.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/FindController.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/LayerTreeHost.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/PageBanner.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/RemoteWebInspectorUI.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/VisitedLinkTableController.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebBackForwardListProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebContextMenu.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebDocumentLoader.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebFrame.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebInspector.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebInspectorInterruptDispatcher.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebInspectorFrontendAPIDispatcher.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebInspectorUI.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebOpenPanelResultListener.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebPage.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebPageGroupProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebPageOverlay.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebURLSchemeHandlerProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebURLSchemeTaskProxy.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/WebUndoStep.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebStorage/StorageAreaImpl.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebStorage/StorageAreaMap.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebStorage/StorageNamespaceImpl.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebStorage/WebStorageNamespaceProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/AutomationBackendDispatchers.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/AutomationFrontendDispatchers.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/AutomationProtocolObjects.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebPageUpdatePreferences.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebPreferencesExperimentalFeatures.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebPreferencesKeys.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebPreferencesStoreDefaultsMap.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/webkit2gtk/InspectorGResourceBundle.c.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/webkit2gtk/WebKitResourcesGResourceBundle.c.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/webkit2gtk/webkit2/WebKitEnumTypes.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/webkit2gtk/webkit2/WebKitWebProcessEnumTypes.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/webkit2gtk/WebKitWaylandClientProtocol.c.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebCookieManagerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkConnectionToWebProcessMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkContentRuleListManagerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkProcessMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkResourceLoaderMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkSocketStreamMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/CacheStorageEngineConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkMDNSRegisterMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkRTCMonitorMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkRTCProviderMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkRTCSocketMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/PluginControllerProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/PluginProcessMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebProcessConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/ChildProcessMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/AuthenticationManagerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NPObjectMessageReceiverMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/StorageProcessMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/StorageToWebProcessConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebIDBConnectionToClientMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebSWServerConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebSWServerToContextConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/DrawingAreaProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/RemoteWebInspectorProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/VisitedLinkStoreMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebCookieManagerProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebFullScreenManagerProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebGeolocationManagerProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebInspectorProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebPageProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebPasteboardProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebProcessPoolMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebProcessProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebResourceLoadStatisticsStoreMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebAutomationSessionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/DownloadProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkProcessProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/PluginProcessProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/StorageProcessProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebUserContentControllerProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/StorageManagerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebProcessMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebAutomationSessionProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebCacheStorageConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebIDBConnectionToServerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebFullScreenManagerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebGeolocationManagerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebMDNSRegisterMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebRTCMonitorMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebRTCResolverMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebRTCSocketMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/NetworkProcessConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebResourceLoaderMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebSocketStreamMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebNotificationManagerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/PluginProcessConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/PluginProcessConnectionManagerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/PluginProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/ServiceWorkerClientFetchMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebSWClientConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebSWContextManagerConnectionMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebUserContentControllerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/DrawingAreaMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/EventDispatcherMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/RemoteWebInspectorUIMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/VisitedLinkTableControllerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebInspectorMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebInspectorInterruptDispatcherMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebInspectorUIMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/WebPageMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/StorageAreaMapMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/LegacyCustomProtocolManagerMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/LegacyCustomProtocolManagerProxyMessageReceiver.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource1.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource2.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource3.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource4.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource5.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource6.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/glib/GSocketMonitor.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/unix/AttachmentUnix.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/IPC/unix/ConnectionUnix.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource7.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/glib/ModuleGlib.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/unix/LoggingUnix.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Platform/unix/SharedMemoryUnix.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/PluginProcess/unix/PluginControllerProxyUnix.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/PluginProcess/unix/PluginProcessMainUnix.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/PluginProcess/unix/PluginProcessUnix.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource8.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/glib/WebKitContextMenu.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/glib/WebKitContextMenuActions.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/glib/WebKitContextMenuItem.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/glib/WebKitHitTestResult.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/glib/WebKitURIRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/API/glib/WebKitURIResponse.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource9.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource10.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/Plugins/Netscape/unix/NetscapePluginModuleUnix.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource11.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/cairo/ShareableBitmapCairo.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/glib/ProcessExecutablePathGLib.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource12.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource13.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource14.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource15.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/soup/WebCoreArgumentCodersSoup.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource16.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/Shared/unix/ChildProcessMain.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource17.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource18.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource19.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource20.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource21.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/APIWebsiteDataStoreGLib.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/IconDatabase.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitApplicationInfo.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitAuthenticationRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitAutomationSession.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitBackForwardList.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitBackForwardListItem.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitContextMenuClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitCookieManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitCredential.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitCustomProtocolManagerClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitDownload.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitDownloadClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitEditorState.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitError.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitFaviconDatabase.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitFileChooserRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitFindController.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitFormClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitFormSubmissionRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitGeolocationPermissionRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitGeolocationProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitIconLoadingClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitInjectedBundleClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitInstallMissingMediaPluginsPermissionRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitJavascriptResult.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitMimeInfo.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitNavigationAction.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitNavigationClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitNavigationPolicyDecision.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitNetworkProxySettings.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitNotification.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitNotificationPermissionRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitNotificationProvider.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitPermissionRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitPlugin.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitPolicyDecision.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitPrivate.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitResponsePolicyDecision.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitScriptDialog.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitSecurityManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitSecurityOrigin.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitSettings.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitUIClient.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitURISchemeRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitUserContent.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitUserContentManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitUserMediaPermissionRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitWebContext.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitWebResource.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitWebView.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitWebViewSessionState.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitWebsiteData.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitWebsiteDataManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/glib/WebKitWindowProperties.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/PageClientImpl.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitAuthenticationDialog.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitColorChooser.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitColorChooserRequest.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitOptionMenu.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitOptionMenuItem.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitPopupMenu.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitPrintCustomWidget.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitPrintOperation.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitRemoteInspectorProtocolHandler.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitScriptDialogGtk.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitVersion.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitWebInspector.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitWebViewBase.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitWebViewBaseAccessible.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/API/gtk/WebKitWebViewGtk.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource22.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource23.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Launcher/glib/ProcessLauncherGLib.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource24.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource25.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/Plugins/unix/PluginProcessProxyUnix.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource26.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource27.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource28.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource29.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource30.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource31.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/gtk/AcceleratedBackingStore.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/gtk/AcceleratedBackingStoreWayland.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/gtk/AcceleratedBackingStoreX11.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/gtk/RemoteWebInspectorProxyGtk.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/gtk/TextCheckerGtk.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/gtk/WaylandCompositor.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource32.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/UIProcess/gtk/WebProcessPoolGtk.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource33.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource34.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource35.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/WebKitConsoleMessage.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/WebKitExtensionManager.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/WebKitFrame.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/WebKitScriptWorld.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/WebKitWebEditor.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/WebKitWebExtension.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/WebKitWebHitTestResult.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/WebKitWebPage.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/DOM/DOMObjectCache.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/DOM/WebKitDOMDocument.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/DOM/WebKitDOMElement.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/DOM/WebKitDOMNode.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/DOM/WebKitDOMObject.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/InjectedBundle/API/glib/DOM/WebKitDOMPrivate.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource36.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource37.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource38.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource39.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource40.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource41.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource42.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource43.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource44.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource45.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource46.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource47.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource48.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource49.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource50.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource51.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/unix/NetscapePluginUnix.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource52.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/Plugins/Netscape/x11/NetscapePluginX11.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource53.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource54.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource55.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource56.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource57.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource58.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/WebProcess/WebPage/gtk/AcceleratedSurfaceX11.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource59.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource60.cpp.o Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/WebKit/unified-sources/UnifiedSource61.cpp.o  -Wl,-rpath,/buildstream/gnome/core-deps/WebKitGTK+.bst/_builddir/lib: lib/libWebCoreGTK.a /usr/lib/x86_64-linux-gnu/libGL.so /usr/lib/x86_64-linux-gnu/libEGL.so -lrt lib/libWebCorePlatformGTK.a -lgtk-3 -lgdk-3 -lpangocairo-1.0 -lpango-1.0 -latk-1.0 -lcairo-gobject -lcairo -lgdk_pixbuf-2.0 -lgio-2.0 -lgobject-2.0 -lglib-2.0 lib/libWebCoreGTK.a -lnotify -lgdk_pixbuf-2.0 -lgio-2.0 -lgobject-2.0 -lglib-2.0 lib/libANGLESupport.a /usr/lib/x86_64-linux-gnu/libxml2.so /usr/lib/x86_64-linux-gnu/libxslt.so /usr/lib/x86_64-linux-gnu/libsqlite3.so /usr/lib/x86_64-linux-gnu/libGL.so /usr/lib/x86_64-linux-gnu/libEGL.so lib/libPAL.a lib/libjavascriptcoregtk-4.0.so.18.8.0 lib/libWTFGTK.a lib/libbmalloc.a -ldl /usr/lib/x86_64-linux-gnu/libicudata.so /usr/lib/x86_64-linux-gnu/libicuuc.so -lpthread /usr/lib/x86_64-linux-gnu/libicui18n.so /usr/lib/x86_64-linux-gnu/libwoff2dec.so lib/libxdgmime.a /usr/lib/x86_64-linux-gnu/libcairo.so /usr/lib/x86_64-linux-gnu/libfontconfig.so /usr/lib/x86_64-linux-gnu/libfreetype.so /usr/lib/x86_64-linux-gnu/libharfbuzz.so /usr/lib/x86_64-linux-gnu/libharfbuzz-icu.so /usr/lib/x86_64-linux-gnu/libgcrypt.so /usr/lib/x86_64-linux-gnu/libgstapp-1.0.so /usr/lib/x86_64-linux-gnu/libgstbase-1.0.so /usr/lib/x86_64-linux-gnu/libgstreamer-1.0.so /usr/lib/x86_64-linux-gnu/libgstpbutils-1.0.so /usr/lib/x86_64-linux-gnu/libgstaudio-1.0.so /usr/lib/x86_64-linux-gnu/libgsttag-1.0.so /usr/lib/x86_64-linux-gnu/libgstvideo-1.0.so /usr/lib/x86_64-linux-gnu/libgstgl-1.0.so /usr/lib/x86_64-linux-gnu/libgstfft-1.0.so /usr/lib/x86_64-linux-gnu/libjpeg.so /usr/lib/x86_64-linux-gnu/libpng.so /usr/lib/x86_64-linux-gnu/libwebp.so /usr/lib/x86_64-linux-gnu/libwebpdemux.so /usr/lib/x86_64-linux-gnu/libatk-1.0.so /usr/lib/x86_64-linux-gnu/libcairo.so /usr/lib/x86_64-linux-gnu/libfontconfig.so /usr/lib/x86_64-linux-gnu/libfreetype.so /usr/lib/x86_64-linux-gnu/libharfbuzz.so /usr/lib/x86_64-linux-gnu/libharfbuzz-icu.so /usr/lib/x86_64-linux-gnu/libgcrypt.so /usr/lib/x86_64-linux-gnu/libgstapp-1.0.so /usr/lib/x86_64-linux-gnu/libgstbase-1.0.so /usr/lib/x86_64-linux-gnu/libgstreamer-1.0.so /usr/lib/x86_64-linux-gnu/libgstpbutils-1.0.so /usr/lib/x86_64-linux-gnu/libgstaudio-1.0.so /usr/lib/x86_64-linux-gnu/libgsttag-1.0.so /usr/lib/x86_64-linux-gnu/libgstvideo-1.0.so /usr/lib/x86_64-linux-gnu/libgstgl-1.0.so /usr/lib/x86_64-linux-gnu/libgstfft-1.0.so /usr/lib/x86_64-linux-gnu/libjpeg.so /usr/lib/x86_64-linux-gnu/libpng.so /usr/lib/x86_64-linux-gnu/libwebp.so /usr/lib/x86_64-linux-gnu/libwebpdemux.so /usr/lib/x86_64-linux-gnu/libatk-1.0.so /usr/lib/x86_64-linux-gnu/libenchant-2.so /usr/lib/x86_64-linux-gnu/libgio-2.0.so /usr/lib/x86_64-linux-gnu/libgmodule-2.0.so /usr/lib/x86_64-linux-gnu/libgobject-2.0.so /usr/lib/x86_64-linux-gnu/libglib-2.0.so -lsecret-1 -lgio-2.0 -lgobject-2.0 -lglib-2.0 /usr/lib/x86_64-linux-gnu/libsoup-2.4.so /usr/lib/x86_64-linux-gnu/libtasn1.so /usr/lib/x86_64-linux-gnu/libhyphen.so /usr/lib/x86_64-linux-gnu/libX11.so /usr/lib/x86_64-linux-gnu/libXcomposite.so /usr/lib/x86_64-linux-gnu/libXdamage.so /usr/lib/x86_64-linux-gnu/libXrender.so /usr/lib/x86_64-linux-gnu/libXt.so /usr/lib/x86_64-linux-gnu/libz.so -lwayland-server -lwayland-egl -lwayland-client && :\n        /usr/lib/gcc/x86_64-unknown-linux-gnu/7.3.0/../../../../x86_64-unknown-linux-gnu/bin/ld: BFD (GNU Binutils) 2.30 internal error, aborting at ../../bfd/merge.c:912 in _bfd_merged_section_offset\n\n        /usr/lib/gcc/x86_64-unknown-linux-gnu/7.3.0/../../../../x86_64-unknown-linux-gnu/bin/ld: Please report this bug.\n\n        collect2: error: ld returned 1 exit status\n        ninja: build stopped: subcommand failed.\n        [00:39:40] FAILURE [core-deps/WebKitGTK+.bst]: Running build-commands\n        [00:39:40] FAILURE [core-deps/WebKitGTK+.bst]: Running build-commands\n        [00:40:12] FAILURE [core-deps/WebKitGTK+.bst]: Command 'cmake --build _builddir -- ${JOBS}' failed with exitcode 1\n        ======================================================================\n\nPipeline Summary\n  Total:       318\n  Session:     18\n  Pull Queue:  processed 0,  skipped 18, failed 0 \n  Fetch Queue: processed 0,  skipped 18, failed 0 \n  Build Queue: processed 18, skipped 0,  failed 0\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/386/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/386/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/385", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/385/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/385/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/385/events", "html_url": "https://github.com/apache/buildstream/issues/385", "id": 799838121, "node_id": "MDU6SXNzdWU3OTk4MzgxMjE=", "number": 385, "title": "Should notify when build fails", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 47, "created_at": "2021-02-03T00:22:34Z", "updated_at": "2021-02-03T00:29:15Z", "closed_at": "2021-02-03T00:29:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/385)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on May 1, 2018, 21:27\n\n[Fedora has patched gnome-terminal](https://src.fedoraproject.org/cgit/rpms/gnome-terminal.git/tree/gnome-terminal-notify-open-title-transparency.patch) to present a desktop notification when a command has completed. When I used JHBuild, I always received a notification immediately after my build succeeded or failed, so I could take appropriate action. I relied on this for productivity.\n\nWith BuildStream, there is no notification when the build fails. (I think there is a notification when it succeeds.) I'm absentminded and find that I often do not notice a build has failed until much later, sometimes hours later. Since BuildStream presents its own failure prompt to allow the user to choose what action to take, perhaps BuildStream should manually create notifications. But there's a difficultly here: notifying would be undesirable if BuildStream is running in a currently-focused terminal. So maybe integration with gnome-terminal, and investigation of how exactly the terminal notifications work, will be required. Debarshi Ray is the expert on this.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/385/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/385/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/384", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/384/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/384/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/384/events", "html_url": "https://github.com/apache/buildstream/issues/384", "id": 799837543, "node_id": "MDU6SXNzdWU3OTk4Mzc1NDM=", "number": 384, "title": "AssertionError when building element with workspace after clearing cache", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-03T00:21:31Z", "updated_at": "2022-02-20T04:15:12Z", "closed_at": "2022-02-20T04:15:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/384)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on May 1, 2018, 19:40\n\nAfter deleting my `~/.cache/buildstream`, I hit this assertion error when building glib-networking (for which I have an open workspace). BuildStream should be robust to this situation:\n\n```\n[00:00:02][????????][build:core/glib-networking.bst      ] BUG     Build\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/_scheduler/job.py\", line 320, in _child_action\n        result = self._action_cb(element)\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/_scheduler/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/element.py\", line 1409, in _assemble\n        self.stage(sandbox)\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/buildelement.py\", line 165, in stage\n        self.stage_dependency_artifacts(sandbox, Scope.BUILD)\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/element.py\", line 666, in stage_dependency_artifacts\n        old_dep_keys = self.__get_artifact_metadata_dependencies(workspace.last_successful)\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/element.py\", line 2350, in __get_artifact_metadata_dependencies\n        artifact_base, key = self.__extract(key)\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/element.py\", line 2302, in __extract\n        return (self.__artifacts.extract(self, key), key)\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/_artifactcache/ostreecache.py\", line 105, in extract\n        assert rev, \"Artifact missing for {}\".format(ref)\n    AssertionError: Artifact missing for gnome/core-glib-networking/851a17f63e24689c382960ffd56c3efb872e7e97c6533836bd5d4abbe02aba40\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/384/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/380", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/380/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/380/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/380/events", "html_url": "https://github.com/apache/buildstream/issues/380", "id": 799833641, "node_id": "MDU6SXNzdWU3OTk4MzM2NDE=", "number": 380, "title": "Uncaught ValueError when tags are not pulled into local repository", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-03T00:13:25Z", "updated_at": "2021-02-03T00:14:49Z", "closed_at": "2021-02-03T00:14:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/380)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Apr 26, 2018, 10:52\n\nExample to reproduce the issue:\n\n```\ngit clone https://gitlab.com/buildstream/buildstream.git --no-tags\ncd buildstream\npython3 setup.py test --addopts \"tests/sources/zip.py::test_no_ref\"\n```\n\nHere is an extract of the stack we get:\n\n```\n  File \"/tmp/buildstream/buildstream/_plugincontext.py\", line 190, in _load_plugin\n    self._assert_version(kind, plugin_type)\n  File \"/tmp/buildstream/buildstream/_plugincontext.py\", line 212, in _assert_version\n    bst_major, bst_minor = utils.get_bst_version()\n  File \"/tmp/buildstream/buildstream/utils.py\", line 475, in get_bst_version\n    return (int(versions[0]), int(versions[1]))\nValueError: invalid literal for int() with base 10: '0+untagged'\n```\n\nThis issue can happen to people who have done only `git pull origin master` since before there were tags.\n\nTo work around this problem, run `git fetch`.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/380/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/380/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/379", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/379/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/379/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/379/events", "html_url": "https://github.com/apache/buildstream/issues/379", "id": 799833122, "node_id": "MDU6SXNzdWU3OTk4MzMxMjI=", "number": 379, "title": "_sandboxbwrap.py: Post-bwrap cleanup shouldn't attempt to remove preexisting folders", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-03T00:12:13Z", "updated_at": "2021-02-03T00:13:18Z", "closed_at": "2021-02-03T00:13:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/379)\nIn GitLab by [[Gitlab user @gokcennurlu]](https://gitlab.com/gokcennurlu) on Apr 25, 2018, 16:19\n\n**Problem**: According to comments [here](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/sandbox/_sandboxbwrap.py#L164) and [here](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/sandbox/_sandboxbwrap.py#L210), Bubblewrap-sandbox shouldn't try to remove some special folders (dev,tmp,proc) if they already exist before `run_bwrap()`. In other words, it only should remove (as cleanup) if those folders get created during bubblewraping. But, the `if` condition [here](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/sandbox/_sandboxbwrap.py#L210) seems to be doing the opposite and one can get errors like this:\n\n```bash\n[00:00:05][febd1eb1][build:rhel6-base/rhel6-build-base.bst] BUG     Build\n\n    An unhandled exception occured:\n\n    Traceback (most recent call last):\n      File \"/usr/local/lib/python3.6/dist-packages/buildstream/_scheduler/job.py\", line 320, in _child_action\n        result = self._action_cb(element)\n      File \"/usr/local/lib/python3.6/dist-packages/buildstream/_scheduler/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/usr/local/lib/python3.6/dist-packages/buildstream/element.py\", line 1396, in _assemble\n        collect = self.assemble(sandbox)\n      File \"/usr/local/lib/python3.6/dist-packages/buildstream/buildelement.py\", line 186, in assemble\n        self.__run_command(sandbox, cmd, command_name)\n      File \"/usr/local/lib/python3.6/dist-packages/buildstream/buildelement.py\", line 242, in __run_command\n        SandboxFlags.ROOT_READ_ONLY)\n      File \"/usr/local/lib/python3.6/dist-packages/buildstream/sandbox/_sandboxbwrap.py\", line 231, in run\n        os.rmdir(base_directory)\n    OSError: [Errno 39] Directory not empty: '/root/.cache/buildstream/build/rhel6-base-rhel6-build-base-4gxmx90l/root/dev'\n```\n\nIn our case, this happened while running `bst build` on an `kind: manual` element that depends on an import element (a base image with non-empty /dev/ folder).\n\n**Solution**: According to clarification on IRC, the negation in the if clause should be removed and having an integration test to verify the behaviour should be added.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/379/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/374", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/374/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/374/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/374/events", "html_url": "https://github.com/apache/buildstream/issues/374", "id": 799827310, "node_id": "MDU6SXNzdWU3OTk4MjczMTA=", "number": 374, "title": "Bad file descriptor errors", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-02T23:59:16Z", "updated_at": "2021-02-03T00:00:56Z", "closed_at": "2021-02-03T00:00:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/374)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on Apr 22, 2018, 23:28\n\nI can reproduce this failure 100% of the time when trying to `bst build core-deps/WebKitGTK+.bst`. Note that I do have an open workspace for it.\n\n```\n[ 74%] Building C object Source/WebKit/CMakeFiles/WebKit.dir/__/__/DerivedSources/webkit2gtk/WebKitResourcesGResourceBundle.c.o\nshell-init: error retrieving current directory: getcwd: cannot access parent directories: Bad file descriptor\nchdir: error retrieving current directory: getcwd: cannot access parent directories: Success\nshell-init: error retrieving current directory: getcwd: cannot access parent directories: Bad file descriptor\n[ 74%] Linking CXX shared library ../../lib/libwebkit2gtk-4.0.so\nshell-init: error retrieving current directory: getcwd: cannot access parent directories: Bad file descriptor\nchdir: error retrieving current directory: getcwd: cannot access parent directories: Success\n../../lib/../Source/WebCore/CMakeFiles/WebCore.dir/__/__/DerivedSources/WebCore/unified-sources/UnifiedSource73.cpp.o:(.debug_info+0x1ffb3d): undefined reference to `.LASF75377'\n../../lib/../Source/WebCore/CMakeFiles/WebCore.dir/__/__/DerivedSources/WebCore/unified-sources/UnifiedSource127.cpp.o:(.debug_info+0x3fe33): undefined reference to `.LASF8252'\ncollect2: error: ld returned 1 exit status\n```\n\nThere's many more lines just like this, but it's all the same errors repeated over and over for different source files.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/374/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/367", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/367/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/367/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/367/events", "html_url": "https://github.com/apache/buildstream/issues/367", "id": 799820867, "node_id": "MDU6SXNzdWU3OTk4MjA4Njc=", "number": 367, "title": "bst track refuses to track only one element", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T23:43:57Z", "updated_at": "2021-02-02T23:45:06Z", "closed_at": "2021-02-02T23:45:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/367)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Apr 18, 2018, 15:05\n\nToday, trying `bst track core-deps/WebKitGTK+.bst`, I see that it tries to track webkit and *all its dependencies* as well. I thought the default has changed, but `bst track --deps none core-deps/WebKitGTK+.bst` gives the same result.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/367/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/367/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/365", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/365/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/365/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/365/events", "html_url": "https://github.com/apache/buildstream/issues/365", "id": 799819511, "node_id": "MDU6SXNzdWU3OTk4MTk1MTE=", "number": 365, "title": "gir1-ostree version is wrong on Debian stable", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-02T23:40:55Z", "updated_at": "2021-02-02T23:42:44Z", "closed_at": "2021-02-02T23:42:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/365)\nIn GitLab by [[Gitlab user @adds68]](https://gitlab.com/adds68) on Apr 17, 2018, 17:11\n\nWhen i try to install Buildstream, it reports that the ostree version (with python bindings) is too old to be used.\r\n\r\nI have seen this error occur multiple times, and the fix suggested in the error message does not fix the problem:\r\n\r\n`OSTree is too old.\\n    BuildStream requires OSTree >= v2017.8 with Python bindings. Install it using your package manager (usually ostree or gir1.2-ostree-1.0).\\n\"    OSTree is too old.\", \"    BuildStream requires OSTree >= v2017.8 with Python bindings. Install it using your package manager (usually ostree or gir1.2-ostree-1.0).\", \"              \r\n`\r\n\r\nHowever gir1.2-ostree-1.0 on Debian 9 installs 2016.15-5, which means i still not can not install Buildstream.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/365/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/365/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/364", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/364/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/364/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/364/events", "html_url": "https://github.com/apache/buildstream/issues/364", "id": 799819022, "node_id": "MDU6SXNzdWU3OTk4MTkwMjI=", "number": 364, "title": "bst workspace open --force doesnt work", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T23:39:49Z", "updated_at": "2021-02-02T23:40:48Z", "closed_at": "2021-02-02T23:40:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/364)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Apr 17, 2018, 08:11\n\nWhen I ran: `bst workspace open --force core/glib-networking.bst ~/GLIB_NETWORKING` and the target directory was not empty, I got the following results:\n\n```\n[--:--:--][][] START   Loading pipeline\n[00:00:01][][] SUCCESS Loading pipeline\n[--:--:--][][] START   Resolving pipeline\n[00:00:01][][] SUCCESS Resolving pipeline\n[--:--:--][][] START   Resolving cached state\n[00:00:01][][] SUCCESS Resolving cached state\n[--:--:--][][] START   Checking sources\n[00:00:00][][] SUCCESS Checking sources\n[--:--:--][][] START   Staging sources to /home/tristan/GLIB_NETWORKING\n[--:--:--][        ][ main:core/glib-networking.bst-0    ] STATUS  Running host command\n\n    /usr/bin/git show 9c03e2300eeeb2f335d5146328cd2eb8ca0b99e5:.gitmodules\n\n[--:--:--][][] START   Setting up workspace \"/home/tristan/GLIB_NETWORKING\"\n[00:00:00][][] FAILURE Setting up workspace \"/home/tristan/GLIB_NETWORKING\"\n[00:00:00][][] FAILURE Staging sources to /home/tristan/GLIB_NETWORKING\n\ngit source at core/glib-networking.bst [line 3 column 2]: Failed to clone git mirror /home/tristan/.cache/buildstream/sources/git/https___git_gnome_org_browse_glib_networking in directory: /home/tristan/GLIB_NETWORKING/\n```\n\nProbably we need to stage the sources into an empty temp directory, and use `utils.link_files()` from the temp directory instead of giving the Source implementation a non-empty directory and hoping for the best.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/364/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/364/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/352", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/352/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/352/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/352/events", "html_url": "https://github.com/apache/buildstream/issues/352", "id": 799809008, "node_id": "MDU6SXNzdWU3OTk4MDkwMDg=", "number": 352, "title": "Race condition: Incorrect saving of \"running files\" in workspaces.yml local state file", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T23:19:12Z", "updated_at": "2021-02-02T23:20:04Z", "closed_at": "2021-02-02T23:20:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/352)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Apr 10, 2018, 08:13\n\nCommit https://gitlab.com/BuildStream/buildstream/commit/1d9ea9171dbf4c3244c9acf8da7a00c6825c3217 from merge request !315 cannot be working correctly.\n\nWhat the above commit does:\n* Modifies the workspace data model in an isolated build task\n* Saves the modifications in the isolated build task\n\nThe result is that as soon as two workspaces are building in parallel, only one of the modifications can possibly be taken into account after the builds complete, the second update of the running files will discard the modifications made by the first, or rather, since the main task never updates it's data model except for doing `Workspace.clear_running_files()`, only one set of running files can ever be saved. For a session of `bst --on-error continue build ...`, it will only ever be the last modification which is saved.\n\nI noticed that `Workspace.clear_running_files()` is also called in `Element._assemble_done()`, which is called in both the isolated task and in the main process after a build completes; but this part is not problematic, because it only hits that code path from the frontend if `self_cached()` is `True`, which only happens in the frontend, I thought this was done intentionally.\n\nThe solution to this is *not* to use lock files (there shalt be no `lock/reload workspace file/modify/save/unlock` performed in the tasks), rather; the changes which a task desires to make to the `workspaces.yml` must be sent back to the main process upon completion, such that the data model is maintained in the main process and writes are serialized there.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/352/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/352/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/346", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/346/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/346/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/346/events", "html_url": "https://github.com/apache/buildstream/issues/346", "id": 799803029, "node_id": "MDU6SXNzdWU3OTk4MDMwMjk=", "number": 346, "title": "Fails to open build shell after build failure", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-02T23:11:23Z", "updated_at": "2021-02-02T23:13:03Z", "closed_at": "2021-02-02T23:13:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/346)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on Apr 8, 2018, 18:29\n\nI have a local workspace open for WebKit, and have modified it such that it fails to build. BuildStream gives me an interactive prompt to decide what to do, and I decide I want a shell:\n\n```\nBuild failure on element: core-deps/WebKit.bst\n\nChoose one of the following options:\n  (c)ontinue  - Continue queueing jobs as much as possible\n  (q)uit      - Exit after all ongoing jobs complete\n  (t)erminate - Terminate any ongoing jobs and exit\n  (r)etry     - Retry this job\n  (l)og       - View the full log file\n  (s)hell     - Drop into a shell in the failed build sandbox\n\nPressing ^C will terminate jobs and exit\n\nChoice: [continue]: s\n```\n\nProblem is it opens a runtime shell, not a build shell. I have no access to the build directory and no ability to do anything useful inside the shell. Surely that's not correct?", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/346/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/346/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/343", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/343/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/343/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/343/events", "html_url": "https://github.com/apache/buildstream/issues/343", "id": 799801376, "node_id": "MDU6SXNzdWU3OTk4MDEzNzY=", "number": 343, "title": "initial cache-key resolution should display whole key, not just a short SHA", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T23:09:03Z", "updated_at": "2021-02-02T23:09:47Z", "closed_at": "2021-02-02T23:09:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/343)\nIn GitLab by [[Gitlab user @devcurmudgeon]](https://gitlab.com/devcurmudgeon) on Apr 5, 2018, 19:50\n\nCurrent log is as below. The short shas can't used as a definitive list of what was being built. reviewing this log much later on big projects, we'd be at risk of finding clashes.\r\n\r\n```\r\nfetch needed 20b0640d gnu-toolchain/base.bst \r\nfetch needed b57571d4 gnu-toolchain/stage1-binutils.bst \r\nfetch needed 2d81f140 gnu-toolchain/stage1-gcc.bst \r\n     waiting 15871240 gnu-toolchain/stage1.bst \r\nfetch needed 1c5173b0 gnu-toolchain/stage2-fhs-dirs.bst \r\nfetch needed 238d8701 gnu-toolchain/stage2-linux-api-headers.bst \r\nfetch needed 78eddec5 gnu-toolchain/stage2-glibc.bst \r\nfetch needed 72aa4f3b gnu-toolchain/stage2-binutils.bst \r\nfetch needed dbb0b7ba gnu-toolchain/stage2-busybox.bst \r\n     waiting a4774fa2 gnu-toolchain/stage2-fake-bash.bst \r\nfetch needed 3e3f53d0 gnu-toolchain/stage2-gawk.bst \r\nfetch needed 61c71f36 gnu-toolchain/stage2-gcc-fixed-headers.bst \r\nfetch needed 8617fec8 gnu-toolchain/stage2-libstdcxx.bst \r\nfetch needed 1eb11709 gnu-toolchain/stage2-gcc.bst \r\nfetch needed af38df08 gnu-toolchain/stage2-make.bst \r\n     waiting c0ac6a25 gnu-toolchain/stage2-reset-specs.bst \r\n     waiting 362f602b gnu-toolchain/stage2.bst \r\nfetch needed 495cfcd4 gnu-toolchain/fhs-dirs.bst \r\nfetch needed 437eae39 gnu-toolchain/linux-api-headers.bst \r\nfetch needed d0efee0f gnu-toolchain/glibc.bst \r\nfetch needed fb9edf71 gnu-toolchain/zlib.bst \r\nfetch needed f3bc509b gnu-toolchain/binutils.bst \r\nfetch needed bb8dfc34 gnu-toolchain/busybox.bst \r\nfetch needed 75a98368 gnu-toolchain/ccache.bst \r\nfetch needed 41117f13 gnu-toolchain/gawk.bst \r\nfetch needed f414eabf gnu-toolchain/m4-tarball.bst \r\nfetch needed 75a261c6 gnu-toolchain/gcc.bst\r\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/343/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/343/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/338", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/338/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/338/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/338/events", "html_url": "https://github.com/apache/buildstream/issues/338", "id": 799797010, "node_id": "MDU6SXNzdWU3OTk3OTcwMTA=", "number": 338, "title": "buildstream fails with \"EOFError: Compressed file ended before the end-of-stream marker was reached\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-02T23:03:09Z", "updated_at": "2021-02-02T23:04:25Z", "closed_at": "2021-02-02T23:04:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/338)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Apr 4, 2018, 17:09\n\n```\n[00:00:03][1cbcd0f7][build:base/freedesktop-sdk-junction.bst:base/icu.bst] BUG     Build\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/_scheduler/job.py\", line 265, in child_action\n        result = self.action(element)\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/_scheduler/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/element.py\", line 1084, in _assemble\n        self.stage(sandbox)\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/buildelement.py\", line 189, in stage\n        self.stage_sources(sandbox, self.get_variable('build-root'))\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/element.py\", line 568, in stage_sources\n        self._stage_sources_in_sandbox(sandbox, directory)\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/element.py\", line 1485, in _stage_sources_in_sandbox\n        self._stage_sources_at(host_directory, mount_workspaces=mount_workspaces)\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/element.py\", line 1509, in _stage_sources_at\n        source._stage(directory)\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/source.py\", line 418, in _stage\n        self.stage(staging_directory)\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/plugins/sources/tar.py\", line 108, in stage\n        base_dir = self._find_base_dir(tar, self.base_dir)\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/plugins/sources/tar.py\", line 188, in _find_base_dir\n        matches = sorted(list(utils.glob(paths, pattern)))\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/utils.py\", line 188, in glob\n        for filename in paths:\n      File \"/usr/local/lib/python3.6/site-packages/buildstream/plugins/sources/tar.py\", line 152, in _list_tar_paths\n        for member in tar.getmembers():\n      File \"/usr/lib64/python3.6/tarfile.py\", line 1758, in getmembers\n        self._load()        # all members, we first have to\n      File \"/usr/lib64/python3.6/tarfile.py\", line 2355, in _load\n        tarinfo = self.next()\n      File \"/usr/lib64/python3.6/tarfile.py\", line 2286, in next\n        self.fileobj.seek(self.offset - 1)\n      File \"/usr/lib64/python3.6/gzip.py\", line 368, in seek\n        return self._buffer.seek(offset, whence)\n      File \"/usr/lib64/python3.6/_compression.py\", line 143, in seek\n        data = self.read(min(io.DEFAULT_BUFFER_SIZE, offset))\n      File \"/usr/lib64/python3.6/gzip.py\", line 482, in read\n        raise EOFError(\"Compressed file ended before the \"\n    EOFError: Compressed file ended before the end-of-stream marker was reached\n```\n\nFull log here: https://gitlab.gnome.org/GNOME/gnome-build-meta/-/jobs/21281", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/338/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/336", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/336/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/336/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/336/events", "html_url": "https://github.com/apache/buildstream/issues/336", "id": 799793223, "node_id": "MDU6SXNzdWU3OTk3OTMyMjM=", "number": 336, "title": "Internal python errors printed when the scheduler has too many jobs to process", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2021-02-02T22:58:28Z", "updated_at": "2021-02-02T23:02:03Z", "closed_at": "2021-02-02T23:02:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/336)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Apr 4, 2018, 00:25\n\nIn larger projects, running `bst build` can result in these errors being printed:\n\n```\nBlockingIOError: [Errno 11] Resource temporarily unavailable:\nException ignored when trying to write to the signal wakeup fd:\n```\n\n- https://gitlab.gnome.org/GNOME/gnome-build-meta/-/jobs/21193\n- https://gitlab.gnome.org/GNOME/gnome-build-meta/-/jobs/21194\n", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/336/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/335", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/335/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/335/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/335/events", "html_url": "https://github.com/apache/buildstream/issues/335", "id": 799792432, "node_id": "MDU6SXNzdWU3OTk3OTI0MzI=", "number": 335, "title": "Loader tests are broken", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T22:57:37Z", "updated_at": "2021-02-02T22:58:21Z", "closed_at": "2021-02-02T22:58:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/335)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Apr 3, 2018, 06:46\n\nNote that these tests are some of the last tests which still need to be ported to use the `Cli` fixture from `testutils`...\n\nWhen running:\n\n```sh\n./setup.py test --addoptps 'tests/loader/'\n```\n\nThe tests consistently fail with an assertion because the `Platform` instance has not been created. This is expected because these tests do not use a `Pipeline` object, which is what currently instantiates the platform.\n\nThis is also an indicator that we do not clean up state properly between tests, the only reason these tests are passing is because the `Platform` has been instantiated in a previous test.\n\nThese tests dont need to be fixed (they need to be ported to use the proper fixtures), but we would do well to clean up state better in between tests.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/335/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/331", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/331/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/331/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/331/events", "html_url": "https://github.com/apache/buildstream/issues/331", "id": 799783237, "node_id": "MDU6SXNzdWU3OTk3ODMyMzc=", "number": 331, "title": "Project configuration required is too much", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 49, "created_at": "2021-02-02T22:47:58Z", "updated_at": "2021-02-02T22:54:57Z", "closed_at": "2021-02-02T22:54:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/331)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 30, 2018, 06:36\n\nLooking at variables declared in [freedesktop-sdk](https://gitlab.com/freedesktop-sdk/freedesktop-sdk/blob/master/sdk/project.conf) and `shell` customizations in [gnome-build-meta](https://gitlab.gnome.org/GNOME/gnome-build-meta/blob/master/project.conf), it looks like this is getting out of hand.\n\nThis is the way it is because as a rule, BuildStream should not be gaining knowledge specific to the payload it is building, and the burden is already much where we can see that it is undesirable to duplicate this when makeing `gnome-build-meta` depend on `freedesktop-sdk` through a junction element.\n\nHowever, it would not make sense at all if one just wanted to build a simple a flatpak app on top of a flatpak SDK, and had to duplicate all this knowledge which is already in the SDK BuildStream project.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/331/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/325", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/325/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/325/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/325/events", "html_url": "https://github.com/apache/buildstream/issues/325", "id": 799772326, "node_id": "MDU6SXNzdWU3OTk3NzIzMjY=", "number": 325, "title": "bst is pushing artifact it just have pulled", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-02-02T22:36:28Z", "updated_at": "2021-02-02T22:39:07Z", "closed_at": "2021-02-02T22:39:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/325)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Mar 27, 2018, 15:59\n\nI think this was already solved (https://gitlab.com/BuildStream/buildstream/issues/233), opening another issue in case this is a new issue\n\nhttps://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/59662243 (using bst 1.1.1)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/325/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/325/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/323", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/323/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/323/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/323/events", "html_url": "https://github.com/apache/buildstream/issues/323", "id": 799768308, "node_id": "MDU6SXNzdWU3OTk3NjgzMDg=", "number": 323, "title": "Formatting within the using_commands documentation does not appear correct", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2021-02-02T22:32:07Z", "updated_at": "2021-02-02T22:35:11Z", "closed_at": "2021-02-02T22:35:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/323)\nIn GitLab by [[Gitlab user @jennis]](https://gitlab.com/jennis) on Mar 27, 2018, 11:20\n\n## Overview\n\nHere is the documentation for using BuildStream commands: https://buildstream.gitlab.io/buildstream/using_commands.html\n\nThis page is created using the *sphinx-click* plugin which automatically generates documentation. However, command option lists are not displaying on the webpage in the way one would expect.\n\n### Important remark\n\nNote that fixing (most of) this will require an upstream patch.\n  - An issue has already been filed for this: https://github.com/click-contrib/sphinx-click/issues/8\n\n## Problems\n\n\n1. Command options that take option arguments are not sensibly named, e.g. The `bst build --track` option shows:\n    ![image](/uploads/5852be9e7389959aa736cd549ba068fe/image.png)\n\n    Because of the way it is defined here: https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_frontend/cli.py#L173\n\n    ```python\n    [[Gitlab user @click]](https://gitlab.com/click).option('--track', 'track_', multiple=True,\n              type=click.Path(dir_okay=False, readable=True),\n              help=\"Specify elements to track during the build. Can be used \"\n                   \"repeatedly to specify multiple elements\")\n    ```\n\n    Preferably, this should show: `--track <element>`\n\n    And there are many instances of this throughout the using_commands documentation.\n\n\n2. Lists within `[[Gitlab user @click]](https://gitlab.com/click).pass_obj()` are not being converted properly when using the \\b flag.\n\n    One example is for the `bst fetch` command: https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_frontend/cli.py#L242\n    ```python\n    def fetch(app, elements, deps, track_, except_):\n         \"\"\"Fetch sources required to build the pipeline\n\n        By default this will only try to fetch sources which are\n        required for the build plan of the specified target element,\n        omitting sources for any elements which are already built\n        and available in the artifact cache.\n\n        Specify `--deps` to control which sources to fetch:\n\n        \\b\n            none:  No dependencies, just the element itself\n            plan:  Only dependencies required for the build plan\n            all:   All dependencies\n    \"\"\"\n\n    ```\n\n    Which generates the following documentation: \n\n    ![image](/uploads/794071e71607fa7f79a5eccd116cf4f8/image.png)\n\n    Notice how the list has not been generated correctly.\n\n\n3. Titles are not being generated correctly\n\n    One example is for the `bst show` command documentation: https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_frontend/cli.py#L411\n\n    Which has rendered like so:\n\n    ![image](/uploads/058b6f6877d8efa7a2ba6b9903badfb8/image.png)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/323/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/319", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/319/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/319/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/319/events", "html_url": "https://github.com/apache/buildstream/issues/319", "id": 799764360, "node_id": "MDU6SXNzdWU3OTk3NjQzNjA=", "number": 319, "title": "Improve error handling at plugin load time", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109345, "node_id": "MDU6TGFiZWwyNzA5MTA5MzQ1", "url": "https://api.github.com/repos/apache/buildstream/labels/refactoring", "name": "refactoring", "color": "AD4363", "default": false, "description": "Reduce the cost of ownership of our codebase"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T22:27:57Z", "updated_at": "2021-02-02T22:28:29Z", "closed_at": "2021-02-02T22:28:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/319)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 25, 2018, 10:47\n\nHistorically, I added `PluginError` near the beginning of the project, to test for all the odd cases where we have trouble loading malformed or broken plugin.\n\nSince then we have improved a lot in the domain of error reporting, but the existing `PluginError` does something incorrect, as it:\n* Inherits from `BstError`, and as such is treated as a simple informative message to the user.\n* Is actually used to indicate a bug in a plugin - these errors are aimed at making life easier for plugin authors.\n\n## Recommended course of action\n\nFirst, we should make `PluginError` stop inheriting from `BstError`, as it is more helpful to a plugin author to see a full stack trace in the case there is an error loading their plugin.\n\nFurther, since we have identified an opportunity (as a result of discussion about issue #317) to report a generic error to the user in the specific case that a python plugin tries to import a dependency that is not a hard dependency of BuildStream, we should raise a `LoadError` for that specific case instead of a `PluginError`, with a more informative message; such as:\n\n> \"The `foo` plugin failed to import python module `bar`, please install it with pip3 or using your distribution package manager\"\n\n## Plugins which can behave better\n\n### deb\n\nCurrently, we have the new `deb` source plugin which imports `arpy` at the toplevel (as discovered in #317), I think with a generic error about not being able to find python dependencies, such as the suggested `LoadError` above - we should not really need anything custom in the `deb` source for this.\n\nWithout the above suggested improvement in the core, it currently says something a little bit to cryptic to report to an innocent user:\n\n> Error loading pipeline: Failed to load Source plugin 'deb': No module named 'arpy'\n\n### ostree\n\nThe `ostree` plugin on the other can be installed on platforms where `ostree` is not a hard dependency of BuildStream. In this case, it would not be acceptable to just report an error about a failure to import the `gi` introspection module.\n\nIn this case, it could be interesting to do something like this at the toplevel:\n\n```python\ntry:\n    from buildstream import _ostree\nexcept ImportError as e:\n    raise SourceError(\"Informative message about installing ostree, \" +\n                       \"with a hint that it may not be available on the given platform\") from e\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/319/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/317", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/317/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/317/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/317/events", "html_url": "https://github.com/apache/buildstream/issues/317", "id": 799762095, "node_id": "MDU6SXNzdWU3OTk3NjIwOTU=", "number": 317, "title": "New deb source arpy dependency is too hard", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-02T22:25:31Z", "updated_at": "2021-02-02T22:27:21Z", "closed_at": "2021-02-02T22:27:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/317)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 25, 2018, 09:13\n\nSources by themselves are not supposed to expand on BuildStream's hard dependencies, we mostly use preflight for this.\n\nTwo things need to be done for this:\n\n* The `deb` source plugin must not `import arpy` at the toplevel\n  * It should `try / except` the import at `preflight()` time and report a sensible SourceError\n  * And `import arpy` separately in the one function where it's used.\n\n* The test suite needs to also conditionalize this, so that `./setup.py test` does not bail out in the absence of `arpy`\n  * Add `HAVE_ARPY` variable in the usual way to `tests/testutils/site.py`\n  * Conditionalize the tests which use `arpy` in the usual way\n  * Because the import statement is what causes test to bail, the `import arpy` statement in the test case probably needs to be moved into the individual test functions, too", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/317/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/317/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/316", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/316/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/316/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/316/events", "html_url": "https://github.com/apache/buildstream/issues/316", "id": 799758137, "node_id": "MDU6SXNzdWU3OTk3NTgxMzc=", "number": 316, "title": "Assertion error when building in non-strict mode", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 28, "created_at": "2021-02-02T22:21:26Z", "updated_at": "2021-02-02T22:25:24Z", "closed_at": "2021-02-02T22:25:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/316)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Mar 24, 2018, 15:09\n\nAfter I did a change early in the dependency chain and didn't want to wait for the build to complete, I interrupted it and disabled strict mode. I got the following error. The element in question is a compose\n```\n[--:--:--][????????][build:base/freedesktop-sdk-junction.bst:desktop-image.bst] START   Caching Artifact\n[00:12:11][????????][build:base/freedesktop-sdk-junction.bst:desktop-image.bst] BUG     Build\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/home/abderrahim/dev/buildstream/buildstream/_scheduler/job.py\", line 265, in child_action\n        result = self.action(element)\n      File \"/home/abderrahim/dev/buildstream/buildstream/_scheduler/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/home/abderrahim/dev/buildstream/buildstream/element.py\", line 1149, in _assemble\n        self.__artifacts.commit(self, assembledir, self.__get_cache_keys_for_commit())\n      File \"/home/abderrahim/dev/buildstream/buildstream/_artifactcache/ostreecache.py\", line 265, in commit\n        refs = [buildref(element, key) for key in keys]\n      File \"/home/abderrahim/dev/buildstream/buildstream/_artifactcache/ostreecache.py\", line 265, in <listcomp>\n        refs = [buildref(element, key) for key in keys]\n      File \"/home/abderrahim/dev/buildstream/buildstream/_artifactcache/ostreecache.py\", line 47, in buildref\n        assert key is not None\n    AssertionError\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/312", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/312/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/312/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/312/events", "html_url": "https://github.com/apache/buildstream/issues/312", "id": 799755066, "node_id": "MDU6SXNzdWU3OTk3NTUwNjY=", "number": 312, "title": "Documentation does not build with latest version of sphinx", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T22:18:04Z", "updated_at": "2021-02-02T22:18:45Z", "closed_at": "2021-02-02T22:18:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/312)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 21, 2018, 14:43\n\nToday sphinx 1.7.2 was released, and I needed to add this commit to pin sphinx to 1.7.1 and pass CI again:\n\n```\ncommit f9edceed17039df045677f7103c40f7dbadf2a5d\nAuthor: Tristan Van Berkom <tristan.vanberkom[[Gitlab user @codethink]](https://gitlab.com/codethink).co.uk>\nDate:   Wed Mar 21 23:23:28 2018 +0900\n\n    .gitlab-ci.yml: Pin the sphinx version to 1.7.1\n    \n    The new version today 1.7.2 causes the following build error:\n    \n        Warning, treated as error:\n        /builds/BuildStream/buildstream/dist/buildstream/doc/source/buildstream.sandbox.rst:document isn't included in any toctree\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/312/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/310", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/310/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/310/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/310/events", "html_url": "https://github.com/apache/buildstream/issues/310", "id": 799743567, "node_id": "MDU6SXNzdWU3OTk3NDM1Njc=", "number": 310, "title": "`bst source-bundle` should get better documentation and receive test cases", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T22:06:25Z", "updated_at": "2021-02-02T22:07:24Z", "closed_at": "2021-02-02T22:07:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/310)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Mar 20, 2018, 14:12\n\nCurrently, `bst source-bundle` only has documentation from `bst --help`, and has no tests *at all*. It makes up a fairly significant portion of our untested code.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/310/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/305", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/305/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/305/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/305/events", "html_url": "https://github.com/apache/buildstream/issues/305", "id": 799737029, "node_id": "MDU6SXNzdWU3OTk3MzcwMjk=", "number": 305, "title": "Build failure: \"Cache key missing\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T22:00:12Z", "updated_at": "2021-02-02T22:01:21Z", "closed_at": "2021-02-02T22:01:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/305)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on Mar 17, 2018, 18:46\n\nWhen I run `bst build core/epiphany.bst` today, it fails inexplicably with this error:\n\n```\n    [--:--:--] START   [core/epiphany.bst]: Caching Artifact\n    [00:00:00] FAILURE [core/epiphany.bst]: Caching Artifact\n    [00:00:38] FAILURE [core/epiphany.bst]: Cache key missing\n```\n\nI've just now reproduced it three times in a row.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/305/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/305/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/304", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/304/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/304/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/304/events", "html_url": "https://github.com/apache/buildstream/issues/304", "id": 799734691, "node_id": "MDU6SXNzdWU3OTk3MzQ2OTE=", "number": 304, "title": "Default strip-commands assume a bash shell", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-02T21:58:02Z", "updated_at": "2021-02-02T22:00:05Z", "closed_at": "2021-02-02T22:00:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/304)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on Mar 16, 2018, 17:37\n\nI see in my logs:\n\n```\n[--:--:--] STATUS  [core/glib-networking.bst]: Running strip-commands\n\n    find \"/buildstream/install\" -type f \\\n      '(' -perm -111 -o -name '*.so*' \\\n          -o -name '*.cmxs' -o -name '*.node' ')' \\\n      -exec sh -ec \\\n      'read -n4 hdr <\"$1\" # check for elf header\n       if [ \"$hdr\" != \"$(printf \\\\x7fELF)\" ]; then\n           exit 0\n       fi\n       debugfile=\"/buildstream/install/usr/lib/debug/$(basename \"$1\")\"\n       mkdir -p \"$(dirname \"$debugfile\")\"\n       objcopy --only-keep-debug --compress-debug-sections \"$1\" \"$debugfile\"\n       chmod 644 \"$debugfile\"\n       strip --remove-section=.comment --remove-section=.note --strip-unneeded \"$1\"\n       objcopy --add-gnu-debuglink \"$debugfile\" \"$1\"' - {} ';'\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n-: 1: read: Illegal option -n\n```\n\nLooks like the problem is this line: `'read -n4 hdr <\"$1\" # check for elf header`", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/304/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/304/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/302", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/302/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/302/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/302/events", "html_url": "https://github.com/apache/buildstream/issues/302", "id": 799732687, "node_id": "MDU6SXNzdWU3OTk3MzI2ODc=", "number": 302, "title": "File permissions changing inside the sandbox", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T21:56:13Z", "updated_at": "2021-02-02T21:56:49Z", "closed_at": "2021-02-02T21:56:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/302)\nIn GitLab by [[Gitlab user @jennis]](https://gitlab.com/jennis) on Mar 15, 2018, 18:09\n\n# The issue\nWhen writing the integration test (in bst-external) for the dpkg-build plugin, in order for the test to pass, *debian/rules* must be built.\n\nNow, locally executing `bst build dpkg-build/dpkg-build-test.bst` resulted in a successful build. However, when this command is launched in the sandbox, using the following test: \n\nhttps://gitlab.com/BuildStream/bst-external/blob/convert-to-new-style-integration-tests/tests/dpkg-build.py#L14\n\nThe test fails due to a permissions change of the *debian/rules* file, see failed job here:\n \nhttps://gitlab.com/BuildStream/bst-external/-/jobs/57647277 \n\n## A quick fix\nThis can be fixed by using `chmod +x <file>` to explicitly change the permission of the file and prepending this as a build command, like so:\nhttps://gitlab.com/BuildStream/bst-external/blob/convert-to-new-style-integration-tests/tests/project/elements/dpkg-build/dpkg-build-test.bst#L15\n\n## The problem\nObviously this solution is not practical for a project with many .bst files.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/302/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/302/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/301", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/301/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/301/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/301/events", "html_url": "https://github.com/apache/buildstream/issues/301", "id": 799730460, "node_id": "MDU6SXNzdWU3OTk3MzA0NjA=", "number": 301, "title": "Fix circular imports", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-02T21:54:09Z", "updated_at": "2021-02-02T21:56:05Z", "closed_at": "2021-02-02T21:56:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/301)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 15, 2018, 13:22\n\nWe have circular imports disabled by default with the new linting.\n\nUnfortunately these seem to have crept in since we have not yet fixed #146 \n\nThis is messy, and worse; it is simply not supported in all versions of python we support.\n\nMarking this as critical since BuildStream is completely unusable on LTS distros where only 3.4 is available.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/301/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/301/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/299", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/299/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/299/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/299/events", "html_url": "https://github.com/apache/buildstream/issues/299", "id": 799726509, "node_id": "MDU6SXNzdWU3OTk3MjY1MDk=", "number": 299, "title": "Build sometimes hangs forever after \"Unknown exception in SIGCHLD handler\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-02T21:50:48Z", "updated_at": "2021-02-02T21:52:45Z", "closed_at": "2021-02-02T21:52:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/299)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on Mar 13, 2018, 18:42\n\nSometimes BuildStream hits this error in job.py, after which the build will continue forever and ever until I Ctrl+C. I don't know what's needed to trigger this error condition. It happens to me every few days.\n\n```\n[00:00:00][01b48bc7][build:core/glib-networking.bst      ] SUCCESS Running strip-commands\n[00:00:15][01b48bc7][build:core/glib-networking.bst      ] BUG     Build\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/_scheduler/job.py\", line 265, in child_action\n        result = self.action(element)\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/_scheduler/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/element.py\", line 1125, in _assemble\n        self._assemble_done()\n      File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/element.py\", line 814, in _assemble_done\n        assert(self.__assemble_scheduled)\n    AssertionError\n\n======================================== 00:00:33 gnome (13/13) ========================================\n                   (Tracked:1 12 0)\u2192 (Pulled:0 13 0)\u2192 (Fetched:0 13 0)\u2192 (Built:0 12 0)                   \n                                        ~~~~~ Active Tasks ~~~~~                                        \n00:00:15[Build:core/glib-networking.bst]\nUnknown exception in SIGCHLD handler\nTraceback (most recent call last):\n  File \"/usr/lib64/python3.6/asyncio/unix_events.py\", line 810, in _sig_chld\n    self._do_waitpid_all()\n  File \"/usr/lib64/python3.6/asyncio/unix_events.py\", line 876, in _do_waitpid_all\n    self._do_waitpid(pid)\n  File \"/usr/lib64/python3.6/asyncio/unix_events.py\", line 910, in _do_waitpid\n    callback(pid, returncode, *args)\n  File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/_scheduler/job.py\", line 327, in child_complete\n    self.complete(self, returncode, element)\n  File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/_scheduler/queue.py\", line 212, in job_done\n    if self.done(element, job.result, returncode):\n  File \"/home/mcatanzaro/.local/lib/python3.6/site-packages/buildstream/_scheduler/buildqueue.py\", line 51, in done\n    element._assemble_done()\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/299/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/299/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/297", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/297/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/297/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/297/events", "html_url": "https://github.com/apache/buildstream/issues/297", "id": 799723821, "node_id": "MDU6SXNzdWU3OTk3MjM4MjE=", "number": 297, "title": "new tar source etag saved strangely", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T21:48:25Z", "updated_at": "2021-02-02T21:49:11Z", "closed_at": "2021-02-02T21:49:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/297)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 12, 2018, 06:48\n\nWhen running `bst track` on `tar` sources, we save something like this:\n\n```yaml\n  etag: '\"2c6740-53c8cf064bf9d\"'\n```\n\nThis seems quite odd; I would expect something like:\n\n```yaml\n  etag: 2c6740-53c8cf064bf9d\n```\n\n[[Gitlab user @juergbi]](https://gitlab.com/juergbi) is this intentional for some reason ?\n\nPerhaps this is a subtle regression from fixing the loader to load everything as strings ?", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/297/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/297/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/292", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/292/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/292/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/292/events", "html_url": "https://github.com/apache/buildstream/issues/292", "id": 799710823, "node_id": "MDU6SXNzdWU3OTk3MTA4MjM=", "number": 292, "title": "bst doesn't use an open workspace for a junction", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-02T21:35:09Z", "updated_at": "2021-02-02T21:36:46Z", "closed_at": "2021-02-02T21:36:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/292)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Mar 8, 2018, 14:32\n\nI have a [junction with source in git](https://gitlab.gnome.org/abderrahim/gnome-build-meta/blob/freedesktop-sdk-base/elements/base/freedesktop-sdk-junction.bst), for which I opened a workspace.\n\n- `bst build` doesn't use the workspace, and warns about that. It even complains when the ref is incorrect.\n- `bst track base/freedesktop-sdk-junction.bst` warns that the updated ref won't be used (which isn't true, but is what it should be).\n\nSo there are two things that need fixing: use the workspace when available, and don't warn that it isn't used (if the warning is still present when the first part is fixed).", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/292/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/292/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/289", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/289/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/289/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/289/events", "html_url": "https://github.com/apache/buildstream/issues/289", "id": 799707357, "node_id": "MDU6SXNzdWU3OTk3MDczNTc=", "number": 289, "title": "Need better errors when running something on nothing", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-02T21:30:57Z", "updated_at": "2021-02-02T21:32:33Z", "closed_at": "2021-02-02T21:32:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/289)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 8, 2018, 13:40\n\nWhen you try to run a manual element with no commands define, it will try to run the strip-commands.\n\nBecause the user had no clue that the runtime needed to have a shell and actually, be a runtime; at least an imported one (reasonable for a newcomer), we have a weird error.\n\nWould be better to tell the user that they need a runtime, than to just blindly execute the non-existing shell.\n\nError example:\n\n```\n\n[00:00:00][bfa2b513][build:foo.bst] FAILURE Running strip-commands\n[00:00:00][bfa2b513][build:foo.bst] FAILURE Command 'find \"/buildstream/install\" -type f \\\n  '(' -perm -111 -o -name '*.so*' \\\n      -o -name '*.cmxs' -o -name '*.node' ')' \\\n  -exec sh -ec \\\n  'read -n4 hdr <\"$1\" # check for elf header\n   if [ \"$hdr\" != \"$(printf \\\\x7fELF)\" ]; then\n       exit 0\n   fi\n   debugfile=\"/buildstream/install/usr/lib/debug/$(basename \"$1\")\"\n   mkdir -p \"$(dirname \"$debugfile\")\"\n   objcopy --only-keep-debug --compress-debug-sections \"$1\" \"$debugfile\"\n   chmod 644 \"$debugfile\"\n   strip --remove-section=.comment --remove-section=.note --strip-unneeded \"$1\"\n   objcopy --add-gnu-debuglink \"$debugfile\" \"$1\"' - {} ';'' failed with exitcode 1\n\n    Sandbox directory: /root/.cache/buildstream/build/foo-3wi0u9yf\n\n    Printing the last 20 lines from log file:\n    /root/.cache/buildstream/logs/my-project-name/foo/bfa2b513-build.33.log\n    ======================================================================\n           objcopy --only-keep-debug --compress-debug-sections \"$1\" \"$debugfile\"\n           chmod 644 \"$debugfile\"\n           strip --remove-section=.comment --remove-section=.note --strip-unneeded \"$1\"\n           objcopy --add-gnu-debuglink \"$debugfile\" \"$1\"' - {} ';'\n    bwrap: execvp sh: No such file or directory\n    [00:00:00] FAILURE [foo.bst]      : Running strip-commands\n    [00:00:00] FAILURE [foo.bst]      : Command 'find \"/buildstream/install\" -type f \\\n      '(' -perm -111 -o -name '*.so*' \\\n          -o -name '*.cmxs' -o -name '*.node' ')' \\\n      -exec sh -ec \\\n      'read -n4 hdr <\"$1\" # check for elf header\n       if [ \"$hdr\" != \"$(printf \\\\x7fELF)\" ]; then\n           exit 0\n       fi\n       debugfile=\"/buildstream/install/usr/lib/debug/$(basename \"$1\")\"\n       mkdir -p \"$(dirname \"$debugfile\")\"\n       objcopy --only-keep-debug --compress-debug-sections \"$1\" \"$debugfile\"\n       chmod 644 \"$debugfile\"\n       strip --remove-section=.comment --remove-section=.note --strip-unneeded \"$1\"\n       objcopy --add-gnu-debuglink \"$debugfile\" \"$1\"' - {} ';'' failed with exitcode 1\n    ======================================================================\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/289/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/287", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/287/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/287/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/287/events", "html_url": "https://github.com/apache/buildstream/issues/287", "id": 799703845, "node_id": "MDU6SXNzdWU3OTk3MDM4NDU=", "number": 287, "title": "Special / Magic variables are unprotected", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-02-02T21:26:44Z", "updated_at": "2021-02-02T21:29:04Z", "closed_at": "2021-02-02T21:29:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/287)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 8, 2018, 11:29\n\nWe have so far 3 magic variables, these are:\n\n* max-jobs\n* project-name\n* element-name\n\nIn the case that a user has attempted to set these to a value, we need to raise a `LoadError()` indicating the provenance of where they attempted to overwrite a magic variable.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/287/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/287/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/286", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/286/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/286/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/286/events", "html_url": "https://github.com/apache/buildstream/issues/286", "id": 799701140, "node_id": "MDU6SXNzdWU3OTk3MDExNDA=", "number": 286, "title": "Impossible to distinguish sandboxing errors from build errors", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2021-02-02T21:23:21Z", "updated_at": "2021-02-02T21:26:36Z", "closed_at": "2021-02-02T21:26:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/286)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 8, 2018, 08:11\n\nWhen building, or when running `bst shell`, it is impossible for BuildStream to distinguish and coherently report whether:\n* there was an error with the actual build or command run in the shell\n* there was an error setting up the sandbox\n\nThis requires support from `bubblewrap`, I've filed an [issue upstream](https://github.com/projectatomic/bubblewrap/issues/257) which seems relatively easy to fix, I like the approach Colin suggests by using the `--info-fd` option and extending the out-of-band machine readable data which bwrap can already return.\n\nWe should upstream a patch for this and then conditionally start using the feature in BuildStream on sites which have a recent enough version of `bwrap`.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/286/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/286/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/283", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/283/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/283/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/283/events", "html_url": "https://github.com/apache/buildstream/issues/283", "id": 799695521, "node_id": "MDU6SXNzdWU3OTk2OTU1MjE=", "number": 283, "title": "New sequence ID in messages cannot work", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T21:15:48Z", "updated_at": "2021-02-02T21:16:38Z", "closed_at": "2021-02-02T21:16:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/283)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 7, 2018, 08:06\n\nThe previous logging enhancements adds `Context.sequence_ids`, seemingly under the assumption that every timed activity message will get a unique and new `sequence_id`.\n\nThis is entirely broken, as it makes the assumption that BuildStream uses threads.\n\nChild tasks are run in child processes with copy-on-write memory, as such there is no way for a plugin to corrupt main memory or ever cause a lockup; it also means that any data communicated with a child task must be done over the IPC, memory cannot be shared.\n\nMarking this as critical, this needs to be fixed or removed before the misleading code causes other contributors to get confused.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/283/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/283/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/282", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/282/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/282/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/282/events", "html_url": "https://github.com/apache/buildstream/issues/282", "id": 799694814, "node_id": "MDU6SXNzdWU3OTk2OTQ4MTQ=", "number": 282, "title": "Status bar regression after enhancing log configurability", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T21:14:54Z", "updated_at": "2021-02-02T21:15:40Z", "closed_at": "2021-02-02T21:15:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/282)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 6, 2018, 13:41\n\nMy timestamps in the status bar are now missing brackets, e.g.:\n\n```\n00:12:08[Build:core-deps/WebKit.bst]\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/282/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/282/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/280", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/280/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/280/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/280/events", "html_url": "https://github.com/apache/buildstream/issues/280", "id": 799693483, "node_id": "MDU6SXNzdWU3OTk2OTM0ODM=", "number": 280, "title": "Messages not silenced when interrogating source caches", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T21:13:17Z", "updated_at": "2021-02-02T21:14:03Z", "closed_at": "2021-02-02T21:14:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/280)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 4, 2018, 17:16\n\nThis is a regression from centralizing state handling in the `Element` class.\n\nThe following status messages are extra verbose and intended to be silenced by default:\n\n```\n[--:--:--][        ][ main:core-deps/gstreamer.bst-0     ] STATUS  Running host command\n\n    /usr/bin/git cat-file -t a1bf0f0e6a8118eab309707f52a64e1ce2c2be95\n\n[--:--:--][        ][ main:core-deps/gstreamer.bst-0     ] STATUS  Running host command\n\n    /usr/bin/git show a1bf0f0e6a8118eab309707f52a64e1ce2c2be95:.gitmodules\n\n[--:--:--][        ][ main:core-deps/gstreamer.bst-0     ] STATUS  Running host command\n\n    /usr/bin/git ls-tree a1bf0f0e6a8118eab309707f52a64e1ce2c2be95 common\n```\n\nSince we centralized these source cache state interrogations which we run in the main process, the messages are no longer silenced by default.\n\nWe probably need a context manager for silencing the less important messages (as we have an option for in the `timed_activity` context managers), so we can do this generically from `element.py` when updating the state of an element in the main process.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/280/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/280/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/278", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/278/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/278/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/278/events", "html_url": "https://github.com/apache/buildstream/issues/278", "id": 799691104, "node_id": "MDU6SXNzdWU3OTk2OTExMDQ=", "number": 278, "title": "Filter documentation could be better", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-02T21:10:25Z", "updated_at": "2021-02-02T21:12:00Z", "closed_at": "2021-02-02T21:12:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/278)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Mar 2, 2018, 08:31\n\nThe [current documentation](http://buildstream.gitlab.io/buildstream/elements/filter.html#module-elements.filter) is hard to use, and makes assumptions about what it is for.\n\n> This is normally used to separate out the contents of an artifact into multiple artifacts and define separate sets of dependencies, in cases where a build produces multiple discrete \u201cpackages\u201d, e.g. systemd and udev; gettext and libintl.\n\nI think that coming up with the above use case is an exercise better left to the user, otherwise it is clouding the useful documentation of how to actually use the plugin, which I find lacking.\n\n> This element expects precisely one build dependency, and multiple runtime dependencies that are not the element that was the build dependency.\n\nThe above is the important part; but still fails to express how to use the plugin, and what happens with the runtime dependencies.\n\nNowhere is it mentioned that the element which is a build dependency is the one which is filtered.\n\nIt would be better to mention that a single build dependency must be set, and it is the one that will be filtered.\n\nSeparately, it would be better to mention that runtime dependencies *can* be expressed, and as such they will be propagated forward as dependencies of elements which depend on the filter element.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/278/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/278/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/276", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/276/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/276/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/276/events", "html_url": "https://github.com/apache/buildstream/issues/276", "id": 799687748, "node_id": "MDU6SXNzdWU3OTk2ODc3NDg=", "number": 276, "title": "Downloading times out; doesn't resume: \"[28] Timeout was reached\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2021-02-02T21:06:18Z", "updated_at": "2021-02-02T21:09:33Z", "closed_at": "2021-02-02T21:09:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/276)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Feb 28, 2018, 11:45\n\nThis same issue seems to have been reported in:\n- freedesktop-sdk issue: https://gitlab.com/freedesktop-sdk/freedesktop-sdk/issues/33, logs: https://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/54775812\n- flatpak: https://github.com/flatpak/flatpak/issues/1196\n- ostree: https://github.com/ostreedev/ostree/issues/878\n- curl: https://github.com/curl/curl/issues/1618#issuecomment-353128709\n\nI'm submitting this here as we are still reproducing the issue even using latest ostree. Also in case buildstream wanted to implement something about that (retries, etc...)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/276/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/276/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/275", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/275/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/275/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/275/events", "html_url": "https://github.com/apache/buildstream/issues/275", "id": 799684612, "node_id": "MDU6SXNzdWU3OTk2ODQ2MTI=", "number": 275, "title": "Indicate where artifacts are going to and comming from in the log", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2021-02-02T21:02:03Z", "updated_at": "2021-02-02T21:06:10Z", "closed_at": "2021-02-02T21:06:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/275)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Feb 27, 2018, 19:18\n\nSince we added:\n* Support for multiple artifact caches defined in project.conf\n* Support for junctions / multiple projects in one session\n\nIt's now become unclear where artifacts are coming from when being pulled, or where they are going to when they are being pushed.\n\nInstead, I still see in the master log, messages such as:\n\n```\n[--:--:--][03cd65a7][ push:element.bst] START   Pushing Artifact\n...\n[00:00:06][03cd65a7][ push:element.bst] SUCCESS Pushing Artifact\n```\n\nWe need to include the urls here.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/275/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/273", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/273/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/273/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/273/events", "html_url": "https://github.com/apache/buildstream/issues/273", "id": 799681812, "node_id": "MDU6SXNzdWU3OTk2ODE4MTI=", "number": 273, "title": "Cache keys not printed correctly with workspaced elements", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T20:58:30Z", "updated_at": "2021-02-02T20:59:45Z", "closed_at": "2021-02-02T20:59:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/273)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Feb 24, 2018, 15:10\n\nWe have some bad bugs with how cache keys are reported for workspaced elements, and worse, sometimes they are never printed at all.\n\nFor the latter part, it should probably be handled by #252 \n\nSome scenarios with bugs:\n\n## Building workspaced element\n\n* Open a workspace on an element\n* Build that element\n  * Notice that in the pipeline summary before building, the workspace has a cache key, this is the **wrong** cache key\n  * Notice that the element starts out with cache key printed as `[????????]`\n  * Notice that the real cache key which is resolved after the build completes, is **never** printed in the master log\n* Build the element again\n  * Now the cache key in the pipeline summary is correct\n\n## Running a shell on a workspaced element\n\n* Open a workspace on an element\n  * Now the element must be built at least once for it to have a cache key\n* Run `bst shell --build <workspaced-element.bst>`\n  * While staging dependencies for the workspaced element, a cache key is printed; as BuildStream cannot know the cache key at this time, it has to be the **wrong** cache key, instead it should be `[????????]`", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/273/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/271", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/271/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/271/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/271/events", "html_url": "https://github.com/apache/buildstream/issues/271", "id": 799680325, "node_id": "MDU6SXNzdWU3OTk2ODAzMjU=", "number": 271, "title": "Assert minimum version of bwrap on host", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T20:57:01Z", "updated_at": "2021-02-02T20:58:15Z", "closed_at": "2021-02-02T20:58:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/271)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Feb 24, 2018, 10:45\n\nWe check for ostree and other dependencies, right now we will just fail horribly if we encounter a version of bwrap which does not support a CLI option we use.\n\nWe need to assert that the installed version of bwrap supports the CLI options we use.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/271/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/270", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/270/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/270/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/270/events", "html_url": "https://github.com/apache/buildstream/issues/270", "id": 799677333, "node_id": "MDU6SXNzdWU3OTk2NzczMzM=", "number": 270, "title": "Compose element throws away files inside directory symlinks at integration time", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2021-02-02T20:53:07Z", "updated_at": "2021-02-02T20:56:54Z", "closed_at": "2021-02-02T20:56:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/270)\nIn GitLab by [[Gitlab user @samthursfield]](https://gitlab.com/samthursfield) on Feb 23, 2018, 17:30\n\nThere has been a regression in the compose element in the 1.1 branch.\n\nI have written a testcase which can be found in [branch sam/compose-symlinks-issue](https://gitlab.com/BuildStream/buildstream/commits/sam/compose-symlinks-issue) to demonstrate the issue.\n\nI proposed a fix in !295, but there is something funky going on as the testcase I added to guard against regressions fails in CI but passes for me locally.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/270/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/269", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/269/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/269/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/269/events", "html_url": "https://github.com/apache/buildstream/issues/269", "id": 799676579, "node_id": "MDU6SXNzdWU3OTk2NzY1Nzk=", "number": 269, "title": "buildstream hangs forever if fuse device is not present", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T20:52:05Z", "updated_at": "2021-02-02T20:52:59Z", "closed_at": "2021-02-02T20:52:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/269)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Feb 23, 2018, 16:54\n\nExample https://gitlab.gnome.org/GNOME/gnome-build-meta/-/jobs/9069", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/269/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/268", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/268/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/268/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/268/events", "html_url": "https://github.com/apache/buildstream/issues/268", "id": 799675243, "node_id": "MDU6SXNzdWU3OTk2NzUyNDM=", "number": 268, "title": "Stack trace when ostree operates in filesystem not supporting extended attributes", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-02T20:50:30Z", "updated_at": "2021-02-02T20:51:57Z", "closed_at": "2021-02-02T20:51:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/268)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Feb 23, 2018, 12:46\n\nWhen initializing an artifact cache on a volume that does not support extended attributes, like a tmpfs, instead of a human readable error message, BuildStream aborts with a stack trace:\n\n```\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/tests/testutils/runcli.py\", line 287, in invoke\n    cli.main(args=args or (), prog_name=cli.name, **extra)\n  File \"/codethink/GNOME/buildstream/buildstream/_frontend/cli.py\", line 104, in override_main\n    standalone_mode=standalone_mode, **extra)\n  File \"/usr/local/lib/python3.5/dist-packages/click/core.py\", line 697, in main\n    rv = self.invoke(ctx)\n  File \"/usr/local/lib/python3.5/dist-packages/click/core.py\", line 1066, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/usr/local/lib/python3.5/dist-packages/click/core.py\", line 895, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/usr/local/lib/python3.5/dist-packages/click/core.py\", line 535, in invoke\n    return callback(*args, **kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/click/decorators.py\", line 27, in new_func\n    return f(get_current_context().obj, *args, **kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_frontend/cli.py\", line 203, in build\n    fetch_subprojects=True)\n  File \"/codethink/GNOME/buildstream/buildstream/_frontend/main.py\", line 188, in initialize\n    rewritable=rewritable)\n  File \"/codethink/GNOME/buildstream/buildstream/_pipeline.py\", line 120, in __init__\n    Platform._create_instance(context, project)\n  File \"/codethink/GNOME/buildstream/buildstream/_platform/platform.py\", line 63, in _create_instance\n    cls._instance = PlatformImpl(*args, **kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_platform/linux.py\", line 39, in __init__\n    self._artifact_cache = OSTreeCache(context, self._user_ns_available)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/ostreecache.py\", line 74, in __init__\n    self.repo = _ostree.ensure(ostreedir, False)\n  File \"/codethink/GNOME/buildstream/buildstream/_ostree.py\", line 54, in ensure\n    repo.create(mode)\nGLib.GError: g-io-error-quark: fsetxattr(user.ostreemeta): Operation not supported (15)\n```\n\nThis should be caught and an `ArtifactError` with a reasonable error message should be raised instead.\n\nThis was discovered at the same time as #267", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/268/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/268/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/267", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/267/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/267/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/267/events", "html_url": "https://github.com/apache/buildstream/issues/267", "id": 799674011, "node_id": "MDU6SXNzdWU3OTk2NzQwMTE=", "number": 267, "title": "Integration tests dont work by default, and write outside of repo", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-02T20:48:59Z", "updated_at": "2021-02-02T20:50:22Z", "closed_at": "2021-02-02T20:50:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/267)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Feb 23, 2018, 12:43\n\nWhen running the following command, integration tests dont work:\n\n```\n./setup.py test --addopts '--integration tests/integration/shell.py'\n```\n\nThis results in tests trying to write to the tmpfs in `/tmp` on my host, where ostree fails to set extended attributes.\n\nWhich leads to the second part of this, that the integration tests leave behind debris on the host by default; that should not happen.\n\nI later discovered the env var `INTEGRATION_CACHE`, which fixes things when setting it to the `tmp/` subdir of BuildStream repo.\n\nInstead of defaulting to a place which likely wont work and leaving behind debris, it's better to default to somewhere local to the repository. If it's desirable to set `INTEGRATION_CACHE` to somewhere else, for performance reasons; this should be documented in the `HACKING.rst` file.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/267/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/266", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/266/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/266/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/266/events", "html_url": "https://github.com/apache/buildstream/issues/266", "id": 799673280, "node_id": "MDU6SXNzdWU3OTk2NzMyODA=", "number": 266, "title": "`get_unique_key()` only works with an incorrectly initialised dictionary", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T20:48:05Z", "updated_at": "2021-02-02T20:48:46Z", "closed_at": "2021-02-02T20:48:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/266)\nIn GitLab by [[Gitlab user @jennis]](https://gitlab.com/jennis) on Feb 23, 2018, 10:12\n\nThe function `get_unique_key(self)` found here: https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/plugins/elements/compose.py#L75 initialises a dictionary called \"key\" like this:\n\n```python\nkey = {}\nkey['integrate'] = self.integration, #NOTICE THE COMMA\nkey['include'] = sorted(self.include), #NOTICE THE COMMA\nkey['orphans'] = self.include_orphans\n\n# Above returns: {'orphans': True, 'include': ([],), 'integrate': (True,)}\n# Notice the tuple packing due to the commas \n\n``````\n\nThe correct way to initialise such a dictionary would be without the commas, or more simply:\n\n\n```python\nkey = {'integrate': self.integration,\n'include': sorted(self.include),\n'orphans': self.include_orphans}\n\n#Above returns: {'integrate': True, 'orphans': True, 'include': []}\n``````\n\nHowever, such initialisation will fail the `tests/cachekey/cachekey.py` integration test and produce the following error:\n\n```\n====================================================================== FAILURES ======================================================================\n___________________________________________________________________ test_cache_key ___________________________________________________________________\n\ndatafiles = local('/home/jamesennis/buildstream/tmp/test_cache_key0'), cli = <tests.testutils.runcli.Cli object at 0x7f7153a99f28>\n\n    [[Gitlab user @pytest]](https://gitlab.com/pytest).mark.skipif(not IS_LINUX, reason='Only available on linux')\n    [[Gitlab user @pytest]](https://gitlab.com/pytest).mark.skipif(HAVE_BZR is False, reason=\"bzr is not available\")\n    [[Gitlab user @pytest]](https://gitlab.com/pytest).mark.skipif(HAVE_GIT is False, reason=\"git is not available\")\n    [[Gitlab user @pytest]](https://gitlab.com/pytest).mark.skipif(HAVE_OSTREE is False, reason=\"ostree is not available\")\n    [[Gitlab user @pytest]](https://gitlab.com/pytest).mark.datafiles(DATA_DIR)\n    def test_cache_key(datafiles, cli):\n        project = os.path.join(datafiles.dirname, datafiles.basename)\n    \n        # Workaround bug in recent versions of setuptools: newer\n        # versions of setuptools fail to preserve symbolic links\n        # when creating a source distribution, causing this test\n        # to fail from a dist tarball.\n        goodbye_link = os.path.join(project, 'files', 'local',\n                                    'usr', 'bin', 'goodbye')\n        os.unlink(goodbye_link)\n        os.symlink('hello', goodbye_link)\n    \n        result = cli.run(project=project, silent=True, args=[\n            'show',\n            '--format', '%{name}::%{full-key}',\n            'target.bst'\n        ])\n        result.assert_success()\n>       assert_cache_keys(project, result.output)\n\ntests/cachekey/cachekey.py:169: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nproject_dir = '/home/jamesennis/buildstream/tmp/test_cache_key0'\noutput = 'elements/build1.bst::4fa7a6fd4c7a499208be4ce0deb26f7ae2fad3bfe2a0579f95207e01189731f4\\nelements/import1.bst::40e28a44...6339403a5d7bf8fd84569781354e2e457e989e\\ntarget.bst::ad24471b89fa5fa27ea4d355e13a687e91d2cd55aad051230190b495d2e0044a\\n'\n\n    def assert_cache_keys(project_dir, output):\n    \n        # Read in the expected keys from the cache key test directory\n        # and parse the actual keys from the `bst show` output\n        #\n        actual_keys = parse_output_keys(output)\n        expected_keys = load_expected_keys(project_dir, actual_keys)\n        mismatches = []\n    \n        for element_name in actual_keys:\n            if actual_keys[element_name] != expected_keys[element_name]:\n                mismatches.append(element_name)\n    \n        if mismatches:\n            info = \"\"\n            for element_name in mismatches:\n                info += \"  Element: {}\\n\".format(element_name) + \\\n                        \"    Expected: {}\\n\".format(expected_keys[element_name]) + \\\n                        \"    Actual: {}\\n\".format(actual_keys[element_name])\n    \n            raise AssertionError(\"Cache key mismatches occurred:\\n{}\\n\".format(info) +\n                                 \"Use tests/cachekey/update.py to automatically \" +\n>                                \"update this test case\")\nE           AssertionError: Cache key mismatches occurred:\nE             Element: elements/compose1.bst\nE               Expected: b2c1793a0cac24d0338da922de2b4890a831fe98a67248e90f1ff350d140a78d\nE               Actual: 394871caf40e79818d09b8e651b5baa1cb812d84716f4adb87cb1ca2f51a418b\nE             Element: elements/compose2.bst\nE               Expected: 95400860f5f65338faa533958403f9a39baaaa68a20ea62bf88b041042108228\nE               Actual: 78ca65e94d5fe39e67a7921cd2faf0bf8313a13a6a70e77d589ebd6d7128bf90\nE             Element: elements/compose3.bst\nE               Expected: 599097cc224cc8bb92a946de9a87cf3640e869957659af9027c6e4b8703fb2ef\nE               Actual: 3e047a78d886427ccccfccb5f8ad22ac5c79676869e9ad6929e9f1379a57905e\nE             Element: elements/compose4.bst\nE               Expected: a2d0ac6ba12a706d6fc640502a42d17928796b549eb2d49103b5593d14bd5b2e\nE               Actual: f41e670c67375c793f64b9230d19cfcd81b7d31df71be150f98b414bd917a424\nE             Element: elements/compose5.bst\nE               Expected: 6fd8485668c7028cc69f720b7fa3d8dbd47799a58ab2e943003af76d75723aca\nE               Actual: 3a492fc57b9a99af1caef95c537c8fab4e183c7e32b1ea812201dc1058229136\nE             Element: target.bst\nE               Expected: 39b234fe293405fc9ea9a7a1d6f61c2b3555d3522704b75238d99b22476fadf8\nE               Actual: ad24471b89fa5fa27ea4d355e13a687e91d2cd55aad051230190b495d2e0044a\nE           \nE           Use tests/cachekey/update.py to automatically update this test case\n\ntests/cachekey/cachekey.py:129: AssertionError\n\n``` \n\n## The problem\nUsing the correct initialisation of the dictionary (without the tuple packing) fails this test and raises the above error.\n\nDoing what the AssertionError suggests: \"Use tests/cachekey/update.py to automatically update this test case\" will temporarily solve the issue and pass the tests.\n\nHowever, no .bst files were modified and so the cache keys should not have changed -> hence this is not a good solution.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/266/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/266/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/265", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/265/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/265/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/265/events", "html_url": "https://github.com/apache/buildstream/issues/265", "id": 799673113, "node_id": "MDU6SXNzdWU3OTk2NzMxMTM=", "number": 265, "title": "SandboxFlags API allows too much control, remove some", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/2", "html_url": "https://github.com/apache/buildstream/milestone/2", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/2/labels", "id": 6382580, "node_id": "MDk6TWlsZXN0b25lNjM4MjU4MA==", "number": 2, "title": "BuildStream 2.0 API Freeze", "description": "This milestone represents issues which need to be solved in order to reach an establish stable API for BuildStream 2.0.\r\n\r\nAfter completing these tasks it will be a good time to release an initial BuildStream 2.0 beta release and start focusing on fixing issues leading up to an actual 2.0 stable.\r\n", "creator": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 29, "state": "open", "created_at": "2021-02-02T13:29:00Z", "updated_at": "2022-04-15T09:15:44Z", "due_on": null, "closed_at": null}, "comments": 2, "created_at": "2021-02-02T20:47:50Z", "updated_at": "2022-02-22T04:42:59Z", "closed_at": "2022-02-22T04:42:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/265)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Feb 22, 2018, 12:24\n\nCurrently the `SandboxFlags` argument for sandboxes allows plugins too much control on how to use a sandbox.\n\nWith the exception of `SandboxFlags.ROOT_READ_ONLY`, the remaining flags are only for internal use, so that we can control the behavior of a sandbox in a `bst shell` environment.\n\nAs a result, we should remove the remaining options from here while retaining `ROOT_READ_ONLY`, technically this is an API break; but it can only break for plugins who are doing something illegal in the first place.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/265/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/265/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/257", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/257/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/257/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/257/events", "html_url": "https://github.com/apache/buildstream/issues/257", "id": 799659480, "node_id": "MDU6SXNzdWU3OTk2NTk0ODA=", "number": 257, "title": "workspace local state file keeps getting created", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T20:31:01Z", "updated_at": "2021-02-02T20:31:52Z", "closed_at": "2021-02-02T20:31:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/257)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Feb 16, 2018, 10:40\n\nThis is a constant annoyance for me.\n\nI'm not running `bst workspace open` at all, and this pesky `.bst/workspaces.yml` file keeps getting created anyway; when I run a command like `bst build <element.bst>`, there seems to be no reason to *write* anything to disk here, we shouldnt be doing this when there is no need to do it.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/257/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/257/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/256", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/256/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/256/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/256/events", "html_url": "https://github.com/apache/buildstream/issues/256", "id": 799655780, "node_id": "MDU6SXNzdWU3OTk2NTU3ODA=", "number": 256, "title": "bst should not run autogen or autoreconf for autotools tarballs", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546542, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQy", "url": "https://api.github.com/repos/apache/buildstream/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2021-02-02T20:27:08Z", "updated_at": "2021-02-02T20:30:53Z", "closed_at": "2021-02-02T20:30:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/256)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on Feb 15, 2018, 17:44\n\nautotools.yaml contains the following code:\n\n```\n  autogen: |\n    export NOCONFIGURE=1;\n    if [ -e autogen ]; then ./autogen;\n    elif [ -e autogen.sh ]; then ./autogen.sh;\n    elif [ -e bootstrap ]; then ./bootstrap;\n    elif [ -e bootstrap.sh ]; then ./bootstrap.sh;\n    else autoreconf -ivf;\n    fi\n```\n\nThis is good for builds from git, but it is broken for builds from tarballs. Running autogen/autoreconf blows away the generated files that are distributed with the tarball, which means we have no way to know whether the recommended workflow `./configure; make; sudo make install` actually works or not.\n\nIt caused two spurious failures for the GNOME 3.27.90 release, both of which were partially BuildStream's fault:\n\n * gnome-documents's autogen.sh performs a git submodule update, which immediately fails when run outside of a git repo. autogen.sh really should not be in the dist at all, but it shouldn't matter, because BuildStream should not be executing it in the first place.\n * gedit experienced a [much more subtle build failure](https://bugzilla.gnome.org/show_bug.cgi?id=793459) caused by BuildStream running autoreconf instead of gedit's autogen.sh script. If a module contains autogen.sh, then only autogen.sh should run autoreconf: build failures are to be expected if it is run automatically. gedit properly does not dist autogen.sh, because autogen.sh is only expected to be run from git, so BuildStream went ahead and ran autoreconf anyway, which broke the build.\n\nThe fix is for BuildStream to skip running autogen/bootstrap/autoreconf if configure already exists.\n\nLastly, note that GNOME could care less whether autoreconf runs successfully on the tarball. I know Debian has started to build all its packages that way, to make sure they build cleanly with the newest autofoo. But that's not interesting for GNOME. We want to know that the tarballs build together *as released by GNOME*, generated with whatever different versions of the autotools that happened to be installed on the maintainers' computers.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/256/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/253", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/253/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/253/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/253/events", "html_url": "https://github.com/apache/buildstream/issues/253", "id": 799651814, "node_id": "MDU6SXNzdWU3OTk2NTE4MTQ=", "number": 253, "title": "Unhelpful error message on missing variables", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-02T20:23:11Z", "updated_at": "2021-02-02T20:24:17Z", "closed_at": "2021-02-02T20:24:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/253)\nIn GitLab by [[Gitlab user @jmacarthur]](https://gitlab.com/jmacarthur) on Feb 14, 2018, 14:55\n\ne.g.:\n\n```\n    Error loading pipeline: /home/jimmacarthur/.local/lib/python3.6/site-packages/buildstream/data/projectconfig.yaml [line 14 column 2]: Dictionary did not contain expected key 'python'\n```\n\nThis is caused by a missing definition for the variable `python` in an element - `python-diffoscope.bst` in this case. projectconfig.yaml is I think the last place it looks for the definition of `python`. We should report the location of the variable reference that couldn't be found instead.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/253/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/253/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/249", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/249/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/249/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/249/events", "html_url": "https://github.com/apache/buildstream/issues/249", "id": 799648069, "node_id": "MDU6SXNzdWU3OTk2NDgwNjk=", "number": 249, "title": "Impossible to remove workspace for module that no longer exists", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T20:19:03Z", "updated_at": "2021-02-02T20:20:09Z", "closed_at": "2021-02-02T20:20:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/249)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on Feb 12, 2018, 23:49\n\nI have the following workspaces open:\n\n```\n[mcatanzaro[[Gitlab user @victory-road]](https://gitlab.com/victory-road) gnome-build-meta]$ bst workspace list\nworkspaces:\n- element: apps/libgnome-games-support.bst\n  directory: /home/mcatanzaro/Projects/libgnome-games-support\n- element: core-deps/glib.bst\n  directory: /home/mcatanzaro/Projects/glib\n- element: core/epiphany.bst\n  directory: /home/mcatanzaro/Projects/epiphany\n- element: core/glib-networking.bst\n  directory: /home/mcatanzaro/Projects/glib-networking\n```\n\nI want to remove the workspace for `core/glib-networking.bst` because I deleted that element, replacing it with `core-deps/glib-networking.bst`. But it's not possible:\n\n```\n$ bst workspace close core/glib-networking.bst\n[--:--:--] START   Loading pipeline\n[00:00:00] FAILURE Loading pipeline\nError loading pipeline: Could not find file at /home/mcatanzaro/Projects/gnome-build-meta/elements/core/glib-networking.bst\n```\n\nTo close the workspace, it seems I first have to revert the commit that removed the element, then close the workspace, then undo the revert. It would be nice if that was not required.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/249/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/238", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/238/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/238/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/238/events", "html_url": "https://github.com/apache/buildstream/issues/238", "id": 799635460, "node_id": "MDU6SXNzdWU3OTk2MzU0NjA=", "number": 238, "title": "BuildStream does not abort when a configured plugin is not installed", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546553, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTUz", "url": "https://api.github.com/repos/apache/buildstream/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T20:03:45Z", "updated_at": "2021-02-02T20:04:33Z", "closed_at": "2021-02-02T20:04:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/238)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Feb 7, 2018, 18:03\n\nCurrently, BuildStream will happily continue working if a plugin defined in `project.conf` is not installed, provided it isn't used in any elements in the current pipeline. It seems that this is not considered correct, we should probably fail early.\n\nIt would also be useful to list the installed plugins should any be missing, to make debugging pip installation easier.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/238/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/238/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/233", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/233/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/233/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/233/events", "html_url": "https://github.com/apache/buildstream/issues/233", "id": 799627939, "node_id": "MDU6SXNzdWU3OTk2Mjc5Mzk=", "number": 233, "title": "Do not push artifact that have been downloaded from the cache", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109429, "node_id": "MDU6TGFiZWwyNzA5MTA5NDI5", "url": "https://api.github.com/repos/apache/buildstream/labels/regression", "name": "regression", "color": "1C3073", "default": false, "description": "This used to work and stopped working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-02T19:54:47Z", "updated_at": "2021-02-02T19:56:09Z", "closed_at": "2021-02-02T19:56:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/233)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Feb 6, 2018, 01:17\n\nFrom example, in this build: https://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/51193892 :\n\n```\n[--:--:--][af6f6965][ pull:dependencies/base-sdk-image.bst] INFO    Downloaded artifact af6f6965\n[00:01:05][af6f6965][ pull:dependencies/base-sdk-image.bst] SUCCESS base-sdk-bootstrap/dependencies-base-sdk-image/af6f6965-pull.147.log\n[--:--:--][af6f6965][ push:dependencies/base-sdk-image.bst] START   base-sdk-bootstrap/dependencies-base-sdk-image/af6f6965-push.373.log\n[--:--:--][af6f6965][ push:dependencies/base-sdk-image.bst] START   Pushing Artifact\n[--:--:--][af6f6965][ push:dependencies/base-sdk-image.bst] START   Preparing compressed archive\n[00:00:39][af6f6965][ push:dependencies/base-sdk-image.bst] SUCCESS Preparing compressed archive\n[--:--:--][af6f6965][ push:dependencies/base-sdk-image.bst] START   Sending artifact\n[00:00:54][af6f6965][ push:dependencies/base-sdk-image.bst] SUCCESS Sending artifact\n[00:01:37][af6f6965][ push:dependencies/base-sdk-image.bst] SUCCESS Pushing Artifact\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/233/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/230", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/230/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/230/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/230/events", "html_url": "https://github.com/apache/buildstream/issues/230", "id": 799624600, "node_id": "MDU6SXNzdWU3OTk2MjQ2MDA=", "number": 230, "title": "Error when trying to \"bst shell\" in a component", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T19:50:55Z", "updated_at": "2021-02-02T19:51:44Z", "closed_at": "2021-02-02T19:51:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/230)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Feb 5, 2018, 17:13\n\n```\r\n[jjardon[[Gitlab user @edoras]](https://gitlab.com/edoras) gnome-build-meta (master)]$ bst build --track-all --track-save core-deps/glib.bst\r\n[--:--:--] START   Loading pipeline\r\n[00:00:00] SUCCESS Loading pipeline\r\n[--:--:--] START   Resolving pipeline\r\n[00:00:00] SUCCESS Resolving pipeline\r\n[--:--:--] START   Initializing remote caches\r\n[00:00:00] SUCCESS Initializing remote caches\r\n[--:--:--] START   Resolving cached state\r\n[00:00:00] SUCCESS Resolving cached state\r\n\r\nBuildStream Version 1.0.1.dev87+g315c4ef\r\n  Session Start: Monday, 05-02-2018 at 17:10:53\r\n  Project:       gnome (/home/jjardon/gnome/gnome-build-meta)\r\n  Targets:       core-deps/glib.bst\r\n\r\nUser Configuration\r\n  Configuration File:      Default Configuration\r\n  Log Files:               /home/jjardon/.cache/buildstream/logs\r\n  Source Mirrors:          /home/jjardon/.cache/buildstream/sources\r\n  Build Area:              /home/jjardon/.cache/buildstream/build\r\n  Artifact Cache:          /home/jjardon/.cache/buildstream/artifacts\r\n  Maximum Fetch Tasks:     10\r\n  Maximum Build Tasks:     4\r\n  Maximum Push Tasks:      4\r\n  Maximum Network Retries: 2\r\n\r\nProject Options\r\n  arch: x86_64\r\n\r\nPipeline\r\nno reference ???????? base/base-system.bst \r\n     waiting ???????? base/base-configure.bst \r\nno reference ???????? base/linker-priority.bst \r\nno reference ???????? base/ninja.bst \r\n     waiting ???????? base.bst \r\nno reference ???????? core-deps/gettext.bst \r\nno reference ???????? core-deps/yelp-xsl.bst \r\nno reference ???????? core-deps/yelp-tools.bst \r\nno reference ???????? core-deps/gtk-doc.bst \r\nno reference ???????? core-deps/glib.bst \r\n\r\n[--:--:--] START   Starting build\r\n[--:--:--][????????][track:base/base-system.bst      ] START   gnome/base-base-system/????????-track.17983.log\r\n[--:--:--][????????][track:base/base-system.bst      ] STATUS  Creating local mirror for http://gnome7.codethink.co.uk/repo\r\n[--:--:--][????????][track:base/linker-priority.bst  ] START   gnome/base-linker-priority/????????-track.17985.log\r\n[00:00:00][????????][track:base/linker-priority.bst  ] SUCCESS gnome/base-linker-priority/????????-track.17985.log\r\n[--:--:--][????????][track:base/ninja.bst            ] START   gnome/base-ninja/????????-track.17987.log\r\n[00:00:00][????????][track:base/ninja.bst            ] SUCCESS gnome/base-ninja/????????-track.17987.log\r\n[--:--:--][????????][track:core-deps/yelp-xsl.bst    ] START   gnome/core-deps-yelp-xsl/????????-track.17992.log\r\n[--:--:--][????????][track:core-deps/yelp-xsl.bst    ] START   Tracking master from https://git.gnome.org/browse/yelp-xsl\r\n[--:--:--][????????][track:core-deps/gettext.bst     ] START   gnome/core-deps-gettext/????????-track.17994.log\r\n[--:--:--][????????][track:core-deps/gettext.bst     ] START   Tracking https://ftp.gnu.org/gnu/gettext/gettext-0.19.8.1.tar.xz\r\n[--:--:--][????????][track:core-deps/yelp-tools.bst  ] START   gnome/core-deps-yelp-tools/????????-track.17997.log\r\n[--:--:--][????????][track:core-deps/yelp-tools.bst  ] START   Tracking master from https://git.gnome.org/browse/yelp-tools\r\n[--:--:--][????????][track:core-deps/glib.bst        ] START   gnome/core-deps-glib/????????-track.18006.log\r\n[--:--:--][????????][track:core-deps/glib.bst        ] START   Tracking master from https://git.gnome.org/browse/glib\r\n[--:--:--][????????][track:core-deps/gtk-doc.bst     ] START   gnome/core-deps-gtk-doc/????????-track.18002.log\r\n[--:--:--][????????][track:core-deps/gtk-doc.bst     ] START   Tracking master from https://git.gnome.org/browse/gtk-doc\r\n[00:00:00][????????][track:core-deps/yelp-xsl.bst    ] SUCCESS Tracking master from https://git.gnome.org/browse/yelp-xsl\r\n[00:00:00][????????][track:core-deps/yelp-xsl.bst    ] SUCCESS gnome/core-deps-yelp-xsl/????????-track.17992.log\r\n[00:00:00][????????][track:core-deps/yelp-tools.bst  ] SUCCESS Tracking master from https://git.gnome.org/browse/yelp-tools\r\n[00:00:00][????????][track:core-deps/yelp-tools.bst  ] SUCCESS gnome/core-deps-yelp-tools/????????-track.17997.log\r\n[00:00:00][????????][track:core-deps/gtk-doc.bst     ] SUCCESS Tracking master from https://git.gnome.org/browse/gtk-doc\r\n[00:00:00][????????][track:core-deps/gtk-doc.bst     ] SUCCESS gnome/core-deps-gtk-doc/????????-track.18002.log\r\n[--:--:--][????????][track:base/base-system.bst      ] START   Fetching tracking ref 'debian/testing/amd64' from origin: http://gnome7.codethink.co.uk/repo\r\n[00:00:01][????????][track:core-deps/glib.bst        ] SUCCESS Tracking master from https://git.gnome.org/browse/glib\r\n[00:00:01][????????][track:core-deps/glib.bst        ] SUCCESS gnome/core-deps-glib/????????-track.18006.log\r\n[00:00:00][????????][track:base/base-system.bst      ] SUCCESS Fetching tracking ref 'debian/testing/amd64' from origin: http://gnome7.codethink.co.uk/repo\r\n[00:00:01][????????][track:base/base-system.bst      ] SUCCESS gnome/base-base-system/????????-track.17983.log\r\n[00:00:01][????????][track:core-deps/gettext.bst     ] SUCCESS Tracking https://ftp.gnu.org/gnu/gettext/gettext-0.19.8.1.tar.xz\r\n[00:00:01][????????][track:core-deps/gettext.bst     ] SUCCESS gnome/core-deps-gettext/????????-track.17994.log\r\n[00:00:02] SUCCESS Build Complete\r\n\r\nPipeline Summary\r\n  Total:       10\r\n  Session:     10\r\n  Track Queue: processed 0, skipped 10, failed 0 \r\n  Pull Queue:  processed 0, skipped 4,  failed 0 \r\n  Fetch Queue: processed 0, skipped 3,  failed 0 \r\n  Build Queue: processed 0, skipped 3,  failed 0 \r\n[jjardon[[Gitlab user @edoras]](https://gitlab.com/edoras) gnome-build-meta (master)]$ bst shell core-deps/glib.bst\r\n[--:--:--] START   Loading pipeline\r\n[00:00:00] SUCCESS Loading pipeline\r\n[--:--:--] START   Resolving pipeline\r\n[00:00:00] SUCCESS Resolving pipeline\r\n[--:--:--] START   Resolving cached state\r\n[00:00:01] SUCCESS Resolving cached state\r\n[--:--:--] START   Staging dependencies\r\nTraceback (most recent call last):\r\n  File \"/home/jjardon/.local/bin/bst\", line 8, in <module>\r\n    sys.exit(cli())\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/click/core.py\", line 722, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/buildstream/_frontend/main.py\", line 142, in override_main\r\n    standalone_mode=standalone_mode, **extra)\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/click/core.py\", line 697, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/click/core.py\", line 1066, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/click/core.py\", line 895, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/click/core.py\", line 535, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/click/decorators.py\", line 27, in new_func\r\n    return f(get_current_context().obj, *args, **kwargs)\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/buildstream/_frontend/main.py\", line 534, in shell\r\n    exitcode = app.pipeline.targets[0]._shell(scope, sysroot, command=command)\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/buildstream/element.py\", line 1354, in _shell\r\n    with self._prepare_sandbox(scope, directory) as sandbox:\r\n  File \"/usr/lib/python3.6/contextlib.py\", line 81, in __enter__\r\n    return next(self.gen)\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/buildstream/element.py\", line 1328, in _prepare_sandbox\r\n    self.stage_dependency_artifacts(sandbox, scope)\r\n  File \"/home/jjardon/.local/lib/python3.6/site-packages/buildstream/element.py\", line 486, in stage_dependency_artifacts\r\n    element_project = element._get_project()\r\nAttributeError: 'NoneType' object has no attribute '_get_project'\r\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/230/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/230/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/228", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/228/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/228/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/228/events", "html_url": "https://github.com/apache/buildstream/issues/228", "id": 799620902, "node_id": "MDU6SXNzdWU3OTk2MjA5MDI=", "number": 228, "title": "Don't print tty process group warning when exiting bst shell", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546553, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTUz", "url": "https://api.github.com/repos/apache/buildstream/labels/wontfix", "name": "wontfix", "color": "ffffff", "default": true, "description": "This will not be worked on"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T19:46:02Z", "updated_at": "2021-02-02T19:46:38Z", "closed_at": "2021-02-02T19:46:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/228)\nIn GitLab by [[Gitlab user @TheRealMichaelCatanzaro]](https://gitlab.com/TheRealMichaelCatanzaro) on Feb 5, 2018, 16:24\n\nAfter exiting a bst shell, the warning `sh: 6: Cannot set tty process group (No such process)` always prints on the command line. That shouldn't happen.\n\n```\n# exit\nsh: 6: Cannot set tty process group (No such process)\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/228/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/228/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/225", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/225/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/225/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/225/events", "html_url": "https://github.com/apache/buildstream/issues/225", "id": 799614190, "node_id": "MDU6SXNzdWU3OTk2MTQxOTA=", "number": 225, "title": "bst shell crashes when staging dependencies", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-02T19:37:57Z", "updated_at": "2021-02-02T19:39:05Z", "closed_at": "2021-02-02T19:39:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/225)\nIn GitLab by [[Gitlab user @abderrahimk]](https://gitlab.com/abderrahimk) on Feb 2, 2018, 17:17\n\nrunnig `bst shell core-deps/vala.bst` gives me this error\n\n```\n[--:--:--] START   Staging dependencies\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/pdb.py\", line 1665, in main\n    pdb._runscript(mainpyfile)\n  File \"/usr/lib/python3.5/pdb.py\", line 1546, in _runscript\n    self.run(statement)\n  File \"/usr/lib/python3.5/bdb.py\", line 431, in run\n    exec(cmd, globals, locals)\n  File \"<string>\", line 1, in <module>\n  File \"/home/abderrahim/.local/bin/bst\", line 3, in <module>\n    import sys\n  File \"/home/abderrahim/.local/lib/python3.5/site-packages/click/core.py\", line 722, in __call__\n    return self.main(*args, **kwargs)\n  File \"/home/abderrahim/dev/buildstream/buildstream/_frontend/main.py\", line 142, in override_main\n    standalone_mode=standalone_mode, **extra)\n  File \"/home/abderrahim/.local/lib/python3.5/site-packages/click/core.py\", line 697, in main\n    rv = self.invoke(ctx)\n  File \"/home/abderrahim/.local/lib/python3.5/site-packages/click/core.py\", line 1066, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/home/abderrahim/.local/lib/python3.5/site-packages/click/core.py\", line 895, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/home/abderrahim/.local/lib/python3.5/site-packages/click/core.py\", line 535, in invoke\n    return callback(*args, **kwargs)\n  File \"/home/abderrahim/.local/lib/python3.5/site-packages/click/decorators.py\", line 27, in new_func\n    return f(get_current_context().obj, *args, **kwargs)\n  File \"/home/abderrahim/dev/buildstream/buildstream/_frontend/main.py\", line 534, in shell\n    exitcode = app.pipeline.targets[0]._shell(scope, sysroot, command=command)\n  File \"/home/abderrahim/dev/buildstream/buildstream/element.py\", line 1354, in _shell\n    with self._prepare_sandbox(scope, directory) as sandbox:\n  File \"/usr/lib/python3.5/contextlib.py\", line 59, in __enter__\n    return next(self.gen)\n  File \"/home/abderrahim/dev/buildstream/buildstream/element.py\", line 1328, in _prepare_sandbox\n    self.stage_dependency_artifacts(sandbox, scope)\n  File \"/home/abderrahim/dev/buildstream/buildstream/element.py\", line 486, in stage_dependency_artifacts\n    element_project = element._get_project()\nAttributeError: 'NoneType' object has no attribute '_get_project'\n```\n\nThis simple patch solves it. I'd like to send a merge request but I'm not sure what to do about the tests.\n\n```diff\ndiff --git a/buildstream/element.py b/buildstream/element.py\nindex 8ae45d3..4b672df 100644\n--- a/buildstream/element.py\n+++ b/buildstream/element.py\n[[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) -482,7 +482,7 [[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) class Element(Plugin):\n                 # The bottom item overlaps nothing\n                 overlapping_elements = elements[1:]\n                 for elm in overlapping_elements:\n-                    element = self.search(Scope.BUILD, elm)\n+                    element = self.search(scope, elm)\n                     element_project = element._get_project()\n                     if not element.__file_is_whitelisted(f):\n                         forbidden_overlap = True\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/225/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/225/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/217", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/217/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/217/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/217/events", "html_url": "https://github.com/apache/buildstream/issues/217", "id": 799578582, "node_id": "MDU6SXNzdWU3OTk1Nzg1ODI=", "number": 217, "title": "Updating project.conf with a new url does not cause an update of the ostree config", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-02T18:56:17Z", "updated_at": "2021-02-02T18:58:10Z", "closed_at": "2021-02-02T18:58:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/217)\nIn GitLab by [[Gitlab user @benjamb]](https://gitlab.com/benjamb) on Jan 26, 2018, 16:05\n\nI initially changed the contents of buildstream.conf to update the push url to `1.2.3.4` from `4.3.2.1`, however, I forgot to update the contents of the project.conf. Resulting in the config of my ostree cache looking like:\n```\n~/.cache/buildstream/artifacts/ostree$ cat config\n[core]\nrepo_version=1\nmode=bare-user\n\n[remote \"ssh___push_1_2_3_4_artifacts_\"]\nurl=http://4.3.2.1/artifacts/\ngpg-verify=false\n```\nhowever, after updating my project.conf with:\n```\nartifacts:\n  url: http://1.2.3.4/artifacts/\n```\nthe ostree config did not update the url of the remote.\n\n[[Gitlab user @samthursfield]](https://gitlab.com/samthursfield) Took a quick look and pointed out https://github.com/ostreedev/ostree/blob/master/src/libostree/ostree-repo.h#L201, essentially, if a remote exists with that name, it won't do anything.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/217/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/217/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/216", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/216/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/216/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/216/events", "html_url": "https://github.com/apache/buildstream/issues/216", "id": 799574569, "node_id": "MDU6SXNzdWU3OTk1NzQ1Njk=", "number": 216, "title": "Spurious min-free-space-percent error", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 33, "created_at": "2021-02-02T18:51:26Z", "updated_at": "2021-02-02T18:56:09Z", "closed_at": "2021-02-02T18:56:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/216)\nIn GitLab by [[Gitlab user @allanday]](https://gitlab.com/allanday) on Jan 26, 2018, 15:34\n\nFollowing the [GNOME BuildStream tutorial](https://wiki.gnome.org/Newcomers/BuildSystemComponent), I've been hitting the following build error:\n\n    GLib.GError: g-io-error-quark: min-free-space-percent '3%' would be exceeded, 5.6 GB available (0)\n\nI've also seen it expressed as:\n\n    Failed to fetch ref 'debian/testing/amd64' from 'origin': min-free-space-percent '3%' would be exceeded, 5.3 GB available\n\nThe partition that I'm using has 15GB (7.8%) free, so I'm not sure why I'm getting the error. Setting `min-free-space-percent` to 0 in `~/.cache/buildstream/artifacts/ostree/config` doesn't have any effect.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/216/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/216/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/215", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/215/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/215/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/215/events", "html_url": "https://github.com/apache/buildstream/issues/215", "id": 799573149, "node_id": "MDU6SXNzdWU3OTk1NzMxNDk=", "number": 215, "title": "Workspace builds might not rebuild correctly when dependecies are updated", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-02T18:49:47Z", "updated_at": "2021-02-02T18:51:14Z", "closed_at": "2021-02-02T18:51:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/215)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Jan 26, 2018, 15:16\n\nAfter https://gitlab.com/BuildStream/buildstream/merge_requests/126 was landed, we realized that incremental workspace builds might not do the right thing in certain scenarios. Consider the following scenario:\r\n\r\n- Element B depends on Element A\r\n- User opens a workspace for B\r\n- User builds B, so its workspace now has all the `.o` files and the underlying build system (`make` for instance) will not rebuild it on subsequent builds\r\n- Now, the dependency A is updated so BuildStream will rebuild A and schedule B for rebuild too the next time one tries to build B\r\n- Since A doesn't has a workspace associated with it, all the updated files in A will have a timestamp from 1970 within the sanbbox\r\n- BuildStream will try to rebuild B but since it already has all the `.o` files will have a much newer timestamp than the header files form A, build systems like `make` won't do a rebuild\r\n\r\nSo to summarize, if the dependencies of a workspaced element are updated, they might not get rebuilt properly since the timestamps of all non-workspaced files will be ancient.\r\n\r\n---\r\n\r\nIf someone comes across this issue, the immediate short-term solution would be to reset the workspace when your dependencies are updated. But we will probably need a better solution for the medium to long term. Perhaps we need a manifest of some sort but I'm not sure at present.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/215/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/215/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/209", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/209/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/209/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/209/events", "html_url": "https://github.com/apache/buildstream/issues/209", "id": 799561502, "node_id": "MDU6SXNzdWU3OTk1NjE1MDI=", "number": 209, "title": "Dont run configure commands more than once for incremental workspace builds", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 35, "created_at": "2021-02-02T18:36:18Z", "updated_at": "2021-02-02T18:41:26Z", "closed_at": "2021-02-02T18:41:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/209)\nIn GitLab by [[Gitlab user @cs-shadow]](https://gitlab.com/cs-shadow) on Jan 25, 2018, 14:45\n\nThese are the steps that were identified in order for us to be able to skip configure-commands in case of workspaced builds. These steps also include slight refactoring of how workspaces work in general:\r\n\r\n* [x] Make workspaces element-wide (at present we have per-source workspaces): https://gitlab.com/BuildStream/buildstream/merge_requests/257\r\n* [x] Update .workspaces.yml format to include version numbers and make it more extensible, similar to changes proposed in https://gitlab.com/BuildStream/buildstream/merge_requests/191. Update: now complete, see https://gitlab.com/BuildStream/buildstream/merge_requests/313\r\n* [x] Add new `element.prepare()` method (that defaults to `pass`). `BuildElement` can override it by running configure-commands in this step.\r\n* [x] BuildStream should call `element.prepare()` unless its a workspace build and prepare hasn't run before\r\n* [x] Early exit in cases where we don't support .workspaces.yml format, introduced in step 2.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/209/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/203", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/203/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/203/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/203/events", "html_url": "https://github.com/apache/buildstream/issues/203", "id": 799550300, "node_id": "MDU6SXNzdWU3OTk1NTAzMDA=", "number": 203, "title": "BuildStream crashes if the dependency tree is too deep", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2021-02-02T18:23:11Z", "updated_at": "2021-02-02T18:27:05Z", "closed_at": "2021-02-02T18:27:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/203)\nIn GitLab by [[Gitlab user @awacheux]](https://gitlab.com/awacheux) on Jan 23, 2018, 11:06\n\nIf the dependency tree depth exeeds 1000, BuildStream crashes throwing a `RecursionError`.\n\nI think it shouldn't crash but print something like `The dependency tree is too deep`.\n\nBelow is the full stack trace:\n\n```\n[--:--:--] START   Loading pipeline\nTraceback (most recent call last):\n  File \"/usr/local/bin/bst\", line 11, in <module>\n    load_entry_point('BuildStream', 'console_scripts', 'bst')()\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 722, in __call__\n    return self.main(*args, **kwargs)\n  File \"/buildstream/buildstream/_frontend/main.py\", line 137, in override_main\n    standalone_mode=standalone_mode, **extra)\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 697, in main\n    rv = self.invoke(ctx)\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 1066, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 895, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/usr/lib/python3/dist-packages/click/core.py\", line 535, in invoke\n    return callback(*args, **kwargs)\n  File \"/usr/lib/python3/dist-packages/click/decorators.py\", line 27, in new_func\n    return f(get_current_context().obj, *args, **kwargs)\n  File \"/buildstream/buildstream/_frontend/main.py\", line 459, in show\n    app.initialize(elements, except_=except_, use_configured_remote_caches=downloadable)\n  File \"/buildstream/buildstream/_frontend/main.py\", line 864, in initialize\n    rewritable=rewritable)\n  File \"/buildstream/buildstream/_pipeline.py\", line 131, in __init__\n    meta_elements = loader.load(rewritable, None)\n  File \"/buildstream/buildstream/_loader.py\", line 225, in load\n    self.load_file(target, rewritable, ticker)\n  File \"/buildstream/buildstream/_loader.py\", line 282, in load_file\n    self.load_file(dep.name, rewritable, ticker)\n  File \"/buildstream/buildstream/_loader.py\", line 282, in load_file\n    self.load_file(dep.name, rewritable, ticker)\n  File \"/buildstream/buildstream/_loader.py\", line 282, in load_file\n    self.load_file(dep.name, rewritable, ticker)\n  [Previous line repeated 946 more times]\n  File \"/buildstream/buildstream/_loader.py\", line 273, in load_file\n    data = _yaml.load(fullpath, shortname=filename, copy_tree=rewritable)\n  File \"/buildstream/buildstream/_yaml.py\", line 180, in load\n    return load_data(f, shortname=shortname, copy_tree=copy_tree)\n  File \"/buildstream/buildstream/_yaml.py\", line 191, in load_data\n    contents = yaml.load(data, yaml.loader.RoundTripLoader)\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/main.py\", line 636, in load\n    return loader._constructor.get_single_data()  # type: ignore\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/constructor.py\", line 102, in get_single_data\n    node = self.composer.get_single_node()\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/composer.py\", line 75, in get_single_node\n    document = self.compose_document()\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/composer.py\", line 96, in compose_document\n    node = self.compose_node(None, None)\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/composer.py\", line 132, in compose_node\n    node = self.compose_mapping_node(anchor)\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/composer.py\", line 194, in compose_mapping_node\n    item_value = self.compose_node(node, item_key)\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/composer.py\", line 130, in compose_node\n    node = self.compose_sequence_node(anchor)\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/composer.py\", line 163, in compose_sequence_node\n    node.value.append(self.compose_node(node, index))\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/composer.py\", line 132, in compose_node\n    node = self.compose_mapping_node(anchor)\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/composer.py\", line 194, in compose_mapping_node\n    item_value = self.compose_node(node, item_key)\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/composer.py\", line 106, in compose_node\n    if self.parser.check_event(AliasEvent):\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/parser.py\", line 144, in check_event\n    self.current_event = self.state()\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/parser.py\", line 572, in parse_block_mapping_value\n    if self.scanner.check_token(ValueToken):\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/scanner.py\", line 1620, in check_token\n    self._gather_comments()\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/scanner.py\", line 1662, in _gather_comments\n    self.fetch_more_tokens()\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/scanner.py\", line 304, in fetch_more_tokens\n    if self.check_plain():\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/scanner.py\", line 788, in check_plain\n    if self.scanner_processing_version == (1, 1):\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/scanner.py\", line 152, in scanner_processing_version\n    return self.loader.processing_version  # type: ignore\n  File \"/usr/lib/python3/dist-packages/ruamel/yaml/resolver.py\", line 443, in processing_version\n    version = self.parser.yaml_version\nRecursionError: maximum recursion depth exceeded\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/203/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/203/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/201", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/201/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/201/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/201/events", "html_url": "https://github.com/apache/buildstream/issues/201", "id": 799548215, "node_id": "MDU6SXNzdWU3OTk1NDgyMTU=", "number": 201, "title": "bst track reports strange output for untrackable elements", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T18:20:50Z", "updated_at": "2021-02-02T18:21:14Z", "closed_at": "2021-02-02T18:21:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/201)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 18, 2018, 11:14\n\nRemoving the `track:` parameter from an element mostly works as expected, and can sometimes be useful for pinning a given element at a specific version, avoiding any updates at `bst track` time.\n\nHowever the output of this is strange:\n\n```\n[--:--:--][????????][track:base/ninja.bst            ] INFO    Found new revision: None\n```\n\nRather than claiming to have found a new revision; with an `INFO` message, we should just mention that tracking is skipped in a `STATUS` message.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/201/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/201/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/200", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/200/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/200/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/200/events", "html_url": "https://github.com/apache/buildstream/issues/200", "id": 799547440, "node_id": "MDU6SXNzdWU3OTk1NDc0NDA=", "number": 200, "title": "bst workspace open creates the directory and then fails.", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T18:19:56Z", "updated_at": "2021-02-02T18:20:43Z", "closed_at": "2021-02-02T18:20:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/200)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 18, 2018, 10:44\n\nIn the case that `bst workspace open` fails to do anything because the element needs to be tracked for instance; the command still has the side effect of creating the target directory.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/200/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/199", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/199/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/199/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/199/events", "html_url": "https://github.com/apache/buildstream/issues/199", "id": 799546749, "node_id": "MDU6SXNzdWU3OTk1NDY3NDk=", "number": 199, "title": "Test suite buildstream imports may be ambiguous", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T18:19:07Z", "updated_at": "2021-02-02T18:19:48Z", "closed_at": "2021-02-02T18:19:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/199)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Jan 18, 2018, 10:37\n\nWhen running `import buildstream` in our tests, python decides which buildstream to import.\n\nIf this is done on a machine with a separate buildstream installation in another path (say, a dev machine that has buildstream installed in `/usr/lib/something`), we might accidentally test the wrong version of buildstream - this would be quite hard to work around for the tester, too.\n\nWays to mitigate this would be to either use [tox](https://pypi.python.org/pypi/tox), or to use a custom `import` wrapper in testing.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/199/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/199/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/198", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/198/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/198/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/198/events", "html_url": "https://github.com/apache/buildstream/issues/198", "id": 799546009, "node_id": "MDU6SXNzdWU3OTk1NDYwMDk=", "number": 198, "title": "Cross-platform testing is not truly cross-platform", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T18:18:16Z", "updated_at": "2021-02-02T18:19:00Z", "closed_at": "2021-02-02T18:19:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/198)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Jan 18, 2018, 09:49\n\nOur integration tests currently use a [super-secret environment variable](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_platform/platform.py#L53) to run tests as if they were run on different platforms - this works to test the general code paths, but is far from ideal.\n\nNow that interest for different platforms is growing (see #190) we should add runners on machines that run the actual platforms we are testing.\n\nAfter that is done, we should remove the [super-secret environment variable](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_platform/platform.py#L53).", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/198/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/197", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/197/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/197/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/197/events", "html_url": "https://github.com/apache/buildstream/issues/197", "id": 799542216, "node_id": "MDU6SXNzdWU3OTk1NDIyMTY=", "number": 197, "title": "Status bar obscures text not printed through the logging mechanism (e.g. stack traces)", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 29, "created_at": "2021-02-02T18:13:54Z", "updated_at": "2021-02-02T18:18:09Z", "closed_at": "2021-02-02T18:18:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/197)\nIn GitLab by [[Gitlab user @jmacarthur]](https://gitlab.com/jmacarthur) on Jan 16, 2018, 16:22\n\nI would like an option such as '--simple-output' which removes the status bar and all ANSI cursor-movement escape codes from the output of `bst`. \n\nWhile developing a new buildstream project, I caused an exception in one job, which caused a backtrace to be printed. The exception is a separate issue and will need to be fixed, but it was compounded by the `bst` status bar being printed over the last two lines of the backtrace, so I couldn't see the actual error: \n\n```\n  ...\n  File \"/home/jimmacarthur/testing/buildstream/buildstream/_ostree.py\", line 203\n  , in exists\n    ref = checksum(repo, ref)\n  File \"/home/jimmacarthur/testing/buildstream/buildstream/_ostree.py\", line 232\n  =========================== 00:00:03 BSD Games (1/1) ===========================\n                                (Tracked:0 0 0)                                \n                            ~~~~~ Active Tasks ~~~~~                            \n  [00:00:03][Track:bsdgames.bst]\n```\n\nIt's possible to get the text of the backtrace by redirecting stderr, but this isn't a very obvious strategy and I have no idea what I'd do on a non-POSIX operating system.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/197/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/197/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/195", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/195/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/195/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/195/events", "html_url": "https://github.com/apache/buildstream/issues/195", "id": 799539375, "node_id": "MDU6SXNzdWU3OTk1MzkzNzU=", "number": 195, "title": "Errors are needed when referring to local things outside of the project", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2021-02-02T18:10:33Z", "updated_at": "2021-02-02T18:12:47Z", "closed_at": "2021-02-02T18:12:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/195)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 16, 2018, 13:29\n\nThis currently includes:\n* Referring to `local` plugins from `project.conf` using relative paths which lead outside of the project directory\n* Referring to files or directories which lead outside of the project directory in `local` source `path:` configuration\n\nAlso relevant, is usage of symlinks in a project directory which lead outside of the project, but are in any way required to build the project, this can happen for both of the above mentioned cases (using proper paths which refer to symlinks which instead attempt to crawl out of the project directory).\n\nIn any of these cases, BuildStream should abort early with an error message.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/195/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/195/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/190", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/190/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/190/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/190/events", "html_url": "https://github.com/apache/buildstream/issues/190", "id": 799530297, "node_id": "MDU6SXNzdWU3OTk1MzAyOTc=", "number": 190, "title": "FreeBSD support", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T18:01:01Z", "updated_at": "2021-02-02T18:02:02Z", "closed_at": "2021-02-02T18:02:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/190)\nIn GitLab by [[Gitlab user @lantw44]](https://gitlab.com/lantw44) on Jan 13, 2018, 08:44\n\nHere is the patch I used to get a simple `import` element work on FreeBSD:\nhttps://gitlab.com/snippets/1692852 \n\nThe only tested commands are `bst build` and `bst shell`. It is not ready to be merged and it is only used to show what changes may be required to get BuildStream work on FreeBSD.\n\n```diff\ndiff --git a/buildstream/sandbox/_mounter.py b/buildstream/sandbox/_mounter.py\nindex 3f82993..f48a42c 100644\n--- a/buildstream/sandbox/_mounter.py\n+++ b/buildstream/sandbox/_mounter.py\n[[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) -60,7 +60,11 [[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) class Mounter(object):\n     [[Gitlab user @classmethod]](https://gitlab.com/classmethod)\n     def _umount(cls, path, stdout=sys.stdout, stderr=sys.stderr):\n \n-        cmd = [utils.get_host_tool('umount'), '-R', path]\n+        if sys.platform.startswith('linux'):\n+            cmd = [utils.get_host_tool('umount'), '-R', path]\n+        else:\n+            cmd = [utils.get_host_tool('umount'), path]\n+\n         status, _ = utils._call(\n             cmd,\n             terminate=True,\n[[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) -131,15 +135,24 [[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) class Mounter(object):\n         def kill_proc():\n             cls._umount(dest, stdout, stderr)\n \n-        kwargs['rbind'] = True\n+        mount_type = None\n+\n+        if sys.platform.startswith('linux'):\n+            kwargs['rbind'] = True\n+        elif sys.platform.startswith('freebsd'):\n+            mount_type = 'nullfs'\n+        else:\n+            assert False, 'Please implement bind_mount function for your OS'\n+\n         options = ','.join([key for key, val in kwargs.items() if val])\n \n-        path = cls._mount(dest, src, None, stdout, stderr, options)\n+        path = cls._mount(dest, src, mount_type, stdout, stderr, options)\n \n         with _signals.terminator(kill_proc):\n             # Make the rbind a slave to avoid unmounting vital devices in\n             # /proc\n-            cls._mount(dest, flags=['--make-rslave'])\n+            if sys.platform.startswith('linux'):\n+                cls._mount(dest, flags=['--make-rslave'])\n             yield path\n \n         cls._umount(dest, stdout, stderr)\ndiff --git a/buildstream/sandbox/_sandboxchroot.py b/buildstream/sandbox/_sandboxchroot.py\nindex 0a60436..3f15e9f 100644\n--- a/buildstream/sandbox/_sandboxchroot.py\n+++ b/buildstream/sandbox/_sandboxchroot.py\n[[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) -141,7 +141,7 [[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) class SandboxChroot(Sandbox):\n                     # If you try to put gtk dialogs here Tristan (either)\n                     # will personally scald you\n                     preexec_fn=lambda: (os.chroot(rootfs), os.chdir(cwd)),\n-                    start_new_session=flags & SandboxFlags.INTERACTIVE\n+                    start_new_session=False\n                 )\n \n                 # Wait for the child process to finish, ensuring that\n[[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) -260,16 +260,28 [[Gitlab user @]](https://gitlab.com/)[[Gitlab user @]](https://gitlab.com/) class SandboxChroot(Sandbox):\n             with Mounter.bind_mount(mount_point, src=src, stdout=stdout, stderr=stderr, **kwargs):\n                 yield\n \n+        [[Gitlab user @contextmanager]](https://gitlab.com/contextmanager)\n+        def mount_fs(src, point, mount_type, **kwargs):\n+            mount_point = os.path.join(rootfs, point.lstrip(os.sep))\n+            os.makedirs(mount_point, exist_ok=True)\n+\n+            with Mounter.mount(mount_point, src=src, stdout=stdout, stderr=stderr, mount_type=mount_type, **kwargs):\n+                yield\n+\n         with ExitStack() as stack:\n             stack.enter_context(self.mount_map.mounted(self))\n \n             stack.enter_context(mount_point('/'))\n \n             if flags & SandboxFlags.INTERACTIVE:\n-                stack.enter_context(mount_src('/dev'))\n+                if sys.platform.startswith('freebsd'):\n+                    stack.enter_context(mount_fs('devfs', '/dev', 'devfs'))\n+                else:\n+                    stack.enter_context(mount_src('/dev'))\n \n-            stack.enter_context(mount_src('/tmp'))\n-            stack.enter_context(mount_src('/proc'))\n+            if not sys.platform.startswith('freebsd') and \\\n+               not sys.platform.startswith('openbsd'):\n+                stack.enter_context(mount_src('/proc'))\n \n             for mark in self._get_marked_directories():\n                 stack.enter_context(mount_point(mark['directory']))\n```\n\nReasons for the patch:\n\n1. `umount` on FreeBSD doesn't have `-R` option. I could not find a equivalent of it.\n2. `mount` on FreeBSD doesn't have `rbind` mount option. It does have a equivalent of `bind` on Linux called `nullfs`, which can be used by running `mount_nullfs`. `mount -t nullfs` runs `mount_nullfs` to do the work. Other *BSD seem to call it `mount_null` instead of `mount_nullfs`.\n3. `start_new_session` is set to False because relinquishing the controlling terminal causes `sh` to show 'sh: can't access tty; job control turned off' when it fails to open `/dev/tty`.\n4. Mounting a new `devfs` fixes 'sh: can't access tty; job control turned off' caused by `tcgetpgrp`, which fails with 'Inappropriate ioctl for device' when `/dev` is bind-mounted from the host.\n5. Bind-mounting of `/tmp` is temporarily removed to avoid serious breakage being done to the host system when the sandbox code raises an exception. It seems that an exception in the sandbox code can trigger `cleanup_tempdir` function in `buildstream/utils.py`, which removes everything in `/tmp` on the host because of bind-mounting. This breaks a lot of software, such as Xorg, GNU screen, tmux on the host because they rely on socket files put in `/tmp`.\n6. Bind-mounting of `/proc` is made optional because `procfs` is deprecated on FreeBSD. Applications relying on `/proc` being mounted should be updated to use the `sysctl` interface. I also added OpenBSD to the check because OpenBSD has removed `procfs` support from its kernel.\n\nI found that `buildstream/sandbox/_sandboxchroot.py` uses `remount`. The FreeBSD equivalent of `remount` is `update`, but it doesn't seems to work on all file systems. `mount -o update,ro` works on UFS, but I cannot get it work on ZFS, nullfs, tmpfs. I haven't checked whether this can become a problem because my simple test case doesn't reach this line of code.\n\nI also found there is a comment in `buildstream/sandbox/_sandboxchroot.py` says that not copying `/etc/resolv.conf` effectively disables network access. However, tt is interesting to see that command such as `ftp ftp.freebsd.org` does work inside `bst shell` because I have a caching DNS resolver running on localhost. I think the best way to disable network access may be using a jail instead of a chroot on FreeBSD. This requires writing new code to support FreeBSD jail.\n\nSince BuildStream is going to replace JHBuild, I hope we can support the following features in BuildStream. I haven't checked whether they are already possible with current BuildStream configuration:\n\n1. Platform-dependent default values for options. The key feature which enables us to run JHBuild on FreeBSD is `<if>` elements in JHBuild modulesets. JHBuild has different default condition sets for each supported operating system. For example, The default on Linux is `['evdev', 'gnu-elf', 'linux', 'systemd', 'udev', 'wayland', 'x11']` and the default on FreeBSD is `['bsd', 'freebsd', 'gmake', 'gnu-elf', 'x11']`. I hope we can have similar feature in BuildStream, so we don't have to ask users on FreeBSD to manually set a lot of options on the command line or in the configuration file.\n\n2. Is it possible to override the branch or tag used by an element in user configuration file? We have `branches` in jhbuildrc. It is useful when upstream developer introduces build breakage on FreeBSD which is hard to fix. I know `bst track` writes the commit used by an element back to the element file, but the output of `git diff` is going to be hard to read if I track more than 200 elements.\n\n3. Is it possible to override arguments and environment variables used by an element in user configuration file? We have `module_autogenargs`, `module_cmakeargs`, `module_mesonargs`, `module_extra_env` in jhbuildrc. They are useful to workaround build problems and enable non-default features. For example, we add `-Wno-error=format-nonliteral` to `CFLAGS` of many modules because fixing all format string errors will take a lof of time. I also enable GTK-Doc build for all modules so I can find documentation I need simply by running devhelp inside the JHBuild prefix. This also help us catch GTK-Doc-related problems early.\n\n4. Unlike most GNU/Linux distributions which use only one prefix, namely `/usr`, FreeBSD has at least two prefixes: `/usr` is the prefix reserved for the base system. All packages, which are considered third-party software, should be installed in a different prefix. The default prefix for packages is `/usr/local` and it is used by all binary packages provided by FreeBSD project. If users want to use different prefixes, they can build their own packages from FreeBSD ports. Hard-coding `/usr/local` is considered a bug in FreeBSD ports. The system compiler and linker doesn't search the prefix used by packages for headers and libraries by default, and `CPPFLAGS` and `LDFLAGS` are used to specify the path for headers and libraries, respectively. JHBuild has `extra_prefixes` in jhbuildrc which partly solve the problem. The default jhbuildrc file adds `/usr/local` to `extra_prefixes` when `sys.path` includes paths starting with `/usr/local/lib`, and JHBuild can setup many environment variables for `extra_prefixes`, including `C_INCLUDE_PATH`, `CPLUS_INCLUDE_PATH`, `LDFLAGS`. However, we cannot access `extra_prefixes` in JHBuild modulesets so we still hard-codes `/usr/local` for FreeBSD in modulesets. I hope we can support both two-prefix and three-prefix setups in BuildStream. Two-prefix is similar to one-prefix used on GNU/Linux, which is used to have better system integration and make it possible to generate VM images to test system components. Three-prefix is a JHBuild-like setup where all GNOME modules are installed into a separate prefix. It is more likely to go wrong, but it is still useful for testing and it should have less overlapping files.\n\n5. JHBuild remove libtool .la files by default, but BuildStream keeps them. Is there any reason to keep them by default? I think no GNOME modules need them and projects depending on libtool .la files because of libltdl should explicitly set an option to keep it. libtool .la files are not required for dynamic linking on ELF systems and having them installed on the system has caused many build failure because of wrong -L order on FreeBSD. Most GNU/Linux distributions also remove them.\n\ni currently use `jhbuild run gnome-session` as the primary way to test GNOME on FreeBSD. It is also the desktop environment I use on FreeBSD most of the time. I don't know whether it is a valid use cause of JHBuild and I don't expect it to be supported in BuildStream, but I think I may be able to do it with `bst checkout` in a three-prefix setup mentioned above.\n\nIn fact, JHBuild never works out of the box on FreeBSD because there are always outstanding issues preventing the build from finishing successfully, but having modulesets maintained in an official GNOME repository does make the situation much better. The list of issues is currently maintained on https://wiki.gnome.org/Projects/Jhbuild/FreeBSD. I don't expect BuildStream to reduce the number of build breakage on FreeBSD and I think we will still have to maintain a list of issues and workarounds after switching to BuildStream. The goal of FreeBSD support in BuildStream is the same as FreeBSD support in JHBuild. It enables us to catch problems very early and make debugging much easier.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/190/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/190/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/187", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/187/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/187/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/187/events", "html_url": "https://github.com/apache/buildstream/issues/187", "id": 799524271, "node_id": "MDU6SXNzdWU3OTk1MjQyNzE=", "number": 187, "title": "Incorrect overall status when failing to save a tracked reference", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/apache/buildstream/milestones/3", "html_url": "https://github.com/apache/buildstream/milestone/3", "labels_url": "https://api.github.com/repos/apache/buildstream/milestones/3/labels", "id": 7687468, "node_id": "MI_kwDOE_tNMc4AdU0s", "number": 3, "title": "BuildStream 2.0 stable blockers", "description": "This milestone is intended to record sensible blockers to an actual 2.0 stable release of BuildStream.\r\n", "creator": {"login": "gtristan", "id": 1928351, "node_id": "MDQ6VXNlcjE5MjgzNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1928351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gtristan", "html_url": "https://github.com/gtristan", "followers_url": "https://api.github.com/users/gtristan/followers", "following_url": "https://api.github.com/users/gtristan/following{/other_user}", "gists_url": "https://api.github.com/users/gtristan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gtristan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gtristan/subscriptions", "organizations_url": "https://api.github.com/users/gtristan/orgs", "repos_url": "https://api.github.com/users/gtristan/repos", "events_url": "https://api.github.com/users/gtristan/events{/privacy}", "received_events_url": "https://api.github.com/users/gtristan/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "open", "created_at": "2022-02-17T04:49:22Z", "updated_at": "2022-10-11T08:10:47Z", "due_on": null, "closed_at": null}, "comments": 5, "created_at": "2021-02-02T17:54:34Z", "updated_at": "2022-07-15T09:02:09Z", "closed_at": "2022-07-15T09:02:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/187)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 11, 2018, 11:03\n\nIf there is an error in the child tracking task, it is handled properly.\n\nIf on the other hand tracking completes successfully, and we fail to rewrite the file on disk (can be reproduced by removing write permission from the `.bst` file and it's parent directory), then we just print a message telling the user that we failed.\n\nWhat we fail to do (and this applies to any failure in a Queue implementation in the main process):\n* Report overall failure state message (last log line still says SUCCESS)\n* Report the appropriate -1 exit code (automated scripts cannot check for this kind of failure)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/187/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/186", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/186/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/186/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/186/events", "html_url": "https://github.com/apache/buildstream/issues/186", "id": 799522963, "node_id": "MDU6SXNzdWU3OTk1MjI5NjM=", "number": 186, "title": "Include initialization time in the total session time of the build log", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T17:53:12Z", "updated_at": "2021-02-02T17:54:26Z", "closed_at": "2021-02-02T17:54:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/186)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Jan 11, 2018, 00:45\n\nFor example, this build took 1min28s, but the log for the bst operations executed in that job are:\n\n```\n[00:00:31] SUCCESS Build Complete\n```\n```\n[00:00:00] SUCCESS Build Complete\n```\n\nhttps://gitlab.com/freedesktop-sdk/freedesktop-sdk/-/jobs/47487466", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/186/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/183", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/183/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/183/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/183/events", "html_url": "https://github.com/apache/buildstream/issues/183", "id": 799520392, "node_id": "MDU6SXNzdWU3OTk1MjAzOTI=", "number": 183, "title": "Plugin loading documentation is confusing", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T17:50:33Z", "updated_at": "2021-02-02T17:51:19Z", "closed_at": "2021-02-02T17:51:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/183)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 8, 2018, 07:07\n\nThe yaml fragment [currently documenting plugin loading](http://buildstream.gitlab.io/buildstream/projectconf.html#plugin-specification-format) is a copy paste job from a draft of the format between developers who already understand the context well.\n\nThis now needs to be rewritten so that it is explained and users can understand it.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/183/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/182", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/182/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/182/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/182/events", "html_url": "https://github.com/apache/buildstream/issues/182", "id": 799518654, "node_id": "MDU6SXNzdWU3OTk1MTg2NTQ=", "number": 182, "title": "Closing non-existing workspace", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-02T17:48:35Z", "updated_at": "2021-02-02T17:50:21Z", "closed_at": "2021-02-02T17:50:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/182)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 7, 2018, 12:58\n\nWhen running `bst workspace close --remove-dir core/gnome-keyring.bst`, the user is asked if they really want to remove the directory, because it can imply loss of work.\n\nAfter answering \"Yes I wanna delete that...\", BuildStream errors out with:\n\n```\nERROR: Workspace 'core/gnome-keyring.bst - 0' is currently not defined\n``` \n\nThis is backwards, the error message should come before ever prompting the user.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/182/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/182/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/181", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/181/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/181/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/181/events", "html_url": "https://github.com/apache/buildstream/issues/181", "id": 799517596, "node_id": "MDU6SXNzdWU3OTk1MTc1OTY=", "number": 181, "title": "bst build --track-except option can be specified without --track or --track-all", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T17:47:20Z", "updated_at": "2021-02-02T17:48:27Z", "closed_at": "2021-02-02T17:48:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/181)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 7, 2018, 11:26\n\nThe `--track-except` option of `bst build` is specific to building with tracking, it should produce an error immediately if specified without also specifying either the `--track` or `--track-all` options.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/181/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/180", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/180/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/180/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/180/events", "html_url": "https://github.com/apache/buildstream/issues/180", "id": 799516046, "node_id": "MDU6SXNzdWU3OTk1MTYwNDY=", "number": 180, "title": "Not failing gracefully for preflight errors", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T17:45:43Z", "updated_at": "2021-02-02T17:47:13Z", "closed_at": "2021-02-02T17:47:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/180)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 6, 2018, 08:51\n\nAs was discovered in !208, we do not catch the errors from the frontend when preflighting the pipeline, ironically preflighting the pipeline is done specifically to catch plugin raised errors, we're just letting them fall through the cracks and presenting the user with a fat stack trace.\n\nThis is most likely a regression from the various pipeline/frontend refactors.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/180/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/180/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/178", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/178/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/178/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/178/events", "html_url": "https://github.com/apache/buildstream/issues/178", "id": 799508159, "node_id": "MDU6SXNzdWU3OTk1MDgxNTk=", "number": 178, "title": "Publish documentation for each stable branch + current development (master)", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}, {"id": 2709108620, "node_id": "MDU6TGFiZWwyNzA5MTA4NjIw", "url": "https://api.github.com/repos/apache/buildstream/labels/infrastructure", "name": "infrastructure", "color": "AD8D43", "default": false, "description": "An issue related to project CI, website, etc infrastructure"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 40, "created_at": "2021-02-02T17:37:23Z", "updated_at": "2021-02-02T17:43:15Z", "closed_at": "2021-02-02T17:43:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/178)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 3, 2018, 09:36\n\nCurrently we only publish docs to master, and gitlab still lacks proper support to deploy to a separate URL depending on which branch the CI is running from.\n\nSee upstream [gitlab bug report](https://gitlab.com/gitlab-org/gitlab-ce/issues/35141).\n\nSaid upstream bug report suggests a workaround which might be plausible, which involves using the cache. The problem with this is if ever the cache gets deleted (which is supposed to be expected), we would have to manually trigger CI for every stable branch in history to regain the docs.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/178/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/177", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/177/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/177/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/177/events", "html_url": "https://github.com/apache/buildstream/issues/177", "id": 799507248, "node_id": "MDU6SXNzdWU3OTk1MDcyNDg=", "number": 177, "title": "tests/frontend/buildtrack.py::test_build_track_inconsistent() - useless broken test", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109703, "node_id": "MDU6TGFiZWwyNzA5MTA5NzAz", "url": "https://api.github.com/repos/apache/buildstream/labels/tests", "name": "tests", "color": "4200CA", "default": false, "description": "An issue with our tests, or plugin testing APIs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T17:36:24Z", "updated_at": "2021-02-02T17:37:15Z", "closed_at": "2021-02-02T17:37:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/177)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jan 1, 2018, 10:08\n\nThis test attempts to check something... not exactly clear *what* it's trying to assert; but one might expect it to assert the different results one might get when... tracking an inconsistent pipeline ?\n\nIn any case, this does a lot of loops and generates element files for each loop (takes a long time due to I/O)\n\nThen, for each loop, the test asserts that it will receive a LoadError.\n\nThe LoadErrorReason which is raised is always the same, there is no `project.conf` to be found, because I guess one was not generated.\n\nThis is just taking time (to run test) and space (loc) for nothing, best would be to figure out what the test is trying to test, and actually make it test that.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/177/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/177/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/171", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/171/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/171/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/171/events", "html_url": "https://github.com/apache/buildstream/issues/171", "id": 799496351, "node_id": "MDU6SXNzdWU3OTk0OTYzNTE=", "number": 171, "title": "bash completions are slow", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109199, "node_id": "MDU6TGFiZWwyNzA5MTA5MTk5", "url": "https://api.github.com/repos/apache/buildstream/labels/optimization", "name": "optimization", "color": "A295AA", "default": false, "description": "Make BuildStream faster and use less resources"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T17:24:51Z", "updated_at": "2021-02-02T17:26:10Z", "closed_at": "2021-02-02T17:26:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/171)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Dec 14, 2017, 14:55\n\nWhile there are some hacks to speed up the code path, buildstream bash completions are currently fairly slow - notably, it is affected by slow the `setuptools` import.\n\nWe should ensure that the completions codepath completes as quickly as possible.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/171/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/171/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/167", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/167/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/167/events", "html_url": "https://github.com/apache/buildstream/issues/167", "id": 799486630, "node_id": "MDU6SXNzdWU3OTk0ODY2MzA=", "number": 167, "title": "Workspaced element's cache keys are calculated 4 times during a build", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-02-02T17:14:53Z", "updated_at": "2021-02-02T17:16:46Z", "closed_at": "2021-02-02T17:16:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/167)\nIn GitLab by [[Gitlab user @awacheux]](https://gitlab.com/awacheux) on Nov 30, 2017, 18:42\n\nWhen you run `bst build` on a workspaced element, the cache key of this element is effectively calculated 4 time.\n\nTo reproduce this issue:\n1. Create an empty buildstream project\n2. Add an element that just import a dummy folder or file\n3. Apply, [the following diff](https://gitlab.com/bloomberg/bst/buildstream/snippets/1686911) to get cache key specific outputs\n4. Open a workspace on the created element\n5. `bst build --debug` the element\n\nYou should see something similar to\n\n```\nroot[[Gitlab user @e9568cd70324]](https://gitlab.com/e9568cd70324):/src/integration_candidate# bst --debug build project_0.bst \nDEBUG: Early enablement of messages\nLoading:   001\n[pid:11    id:001][--:--:--][        ][ main:project_0.bst                 ] DEBUG   Created: import element at project_0.bst [line 1 column 0]\n[pid:11    id:002][--:--:--][        ][ main:project_0.bst-0               ] DEBUG   Created: local source at project_0.bst [line 8 column 4]\n\n[project_0.bst] Recalculating cache keys\n[pid:11    id:002][--:--:--][        ][ main:project_0.bst-0               ] DEBUG   get_workspace_key called : 248b7c61-5d77-42a3-806b-9b286ad4e85f\n[pid:11    id:002][--:--:--][        ][ main:project_0.bst-0               ] DEBUG   get_workspace_key called : 9b11dcf4-cb13-4a06-ab2a-99cf0720eab9\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n\nBuildStream Version 1.0\n  Session Start: Thursday, 30-11-2017 at 18:04:58\n  Project:       dummy_ic (/src/integration_candidate)\n  Targets:       project_0.bst\n\nUser Configuration\n  Configuration File:      Default Configuration\n  Log Files:               /root/.cache/buildstream/logs\n  Source Mirrors:          /root/.cache/buildstream/sources\n  Build Area:              /root/.cache/buildstream/build\n  Artifact Cache:          /root/.cache/buildstream/artifacts\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nPipeline\n   buildable 5a56ee9e project_0.bst Workspaces: /src/integration_candidate/prj\n\n[pid:11    id:000][--:--:--] START   Starting build\n======================================================================================================================================================================== 00:00:00 dummy_ic (1/1) ========================================================================================================================================================================\n                                                                                                                                                                      (Fetched:0 1 0)\u2192 (Built:0 0 0)                                                                                                                                                                      \n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[pid:18    id:001][--:--:--][5a56ee9e][build:project_0.bst  ] START   dummy_ic/project_0/5a56ee9e-build.18.log\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[pid:18    id:001][--:--:--][5a56ee9e][build:project_0.bst  ] START   Staging sources\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[pid:18    id:001][00:00:00][5a56ee9e][build:project_0.bst  ] SUCCESS Staging sources\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[pid:18    id:001][--:--:--][5a56ee9e][build:project_0.bst  ] DEBUG   [project_0.bst] Force cache key calculation\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[pid:18    id:002][--:--:--][5a56ee9e][build:project_0.bst  ] DEBUG   get_workspace_key called : 8743f64d-3eaa-4dae-b41e-b76a1f281fec\n======================================================================================================================================================================== 00:00:00 dummy_ic (1/1) ========================================================================================================================================================================\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[pid:18    id:001][--:--:--][5a56ee9e][build:project_0.bst  ] START   Caching Artifact\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[pid:18    id:001][--:--:--][5a56ee9e][build:project_0.bst  ] DEBUG   [project_0.bst] Force cache key calculation\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[pid:18    id:002][--:--:--][5a56ee9e][build:project_0.bst  ] DEBUG   get_workspace_key called : 4f830a03-ce1e-4125-90c8-384298501d7d\n======================================================================================================================================================================== 00:00:00 dummy_ic (1/1) ========================================================================================================================================================================\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[pid:18    id:001][00:00:00][5a56ee9e][build:project_0.bst  ] SUCCESS Caching Artifact\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[project_0.bst] Returning STRONG cache key : 5a56ee9e0a4fb7e930039e3f4227c0a9a37b2a0967d068d5cc892ad0cf74fd74\n[pid:18    id:001][00:00:00][5a56ee9e][build:project_0.bst  ] SUCCESS dummy_ic/project_0/5a56ee9e-build.18.log\n======================================================================================================================================================================== 00:00:00 dummy_ic (1/1) ========================================================================================================================================================================\n                                                                                                                                                                      (Fetched:0 1 0)\u2192 (Built:0 0 0)                                                                                                                                                                      \n                                                                                                                                                                         ~~~~~ Active Tasks ~~~~~                                                                                                                                                                         \n[pid:11    id:000][00:00:00] SUCCESS Build Complete\n\nPipeline Summary\n  Total:       1\n  Session:     1\n  Fetch Queue: processed 0, skipped 1, failed 0 \n  Build Queue: processed 1, skipped 0, failed 0 \nDEBUG: Destroyed: import element at project_0.bst [line 1 column 0]\nDEBUG: Destroyed: local source at project_0.bst [line 8 column 4]\n```\n\nEverytime `DEBUG   get_workspace_key called` is printed, that's mean that the cache key is recalculated. The UUID at the end has been added to make sure that this is not any kind of duplicated display.\n\nFist of all, `_get_cache_key` is called and calculate 2 cache keys : the [strong](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/element.py#L925) and the [weak](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/element.py#L940) one. `__calculate_cache_key` indirectly call `get_workspace_key` regardless the type of cache key being calculated.\n\nThen, the cache key is re-calculated via `_get_cache_key_for_build`, [once during the build](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/element.py#L1140) and [once more when caching the element](https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_artifactcache/ostreecache.py#L232)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/167/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/166", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/166/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/166/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/166/events", "html_url": "https://github.com/apache/buildstream/issues/166", "id": 799483107, "node_id": "MDU6SXNzdWU3OTk0ODMxMDc=", "number": 166, "title": "bst sometimes modifies source `track` parameters", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2021-02-02T17:11:31Z", "updated_at": "2021-02-02T17:14:45Z", "closed_at": "2021-02-02T17:14:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/166)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Nov 30, 2017, 12:18\n\nI ran into this attempting to build the baserock project - it seems that sometimes bst will modify the track parameter of a source.\n\nUsing `bst track busybox.bst` on the following mini-project:\n\nproject.conf:\n```yaml\nname: baserock\n\naliases:\n  upstream: git://git.baserock.org/delta/\n\n# All the elements go here\nelement-path: ./elements\n```\n\nelements/busybox.bst:\n```yaml\nkind: manual\n\nsources:\n- kind: git\n  url: upstream:busybox\n  track: 1_23_1\n  ref: 1ecfe811fe2f70380170ef7d820e8150054e88ca\n```\n\nResults in the following changes:\n\n```diff\n6,7c6,7\n<   track: 1_23_1\n<   ref: 1ecfe811fe2f70380170ef7d820e8150054e88ca\n---\n>   track: 1_2_3_1\n>   ref: 1231a93bd05f8999fb25560fae17e7bc1d272a4f\n```\n\nThe `ref` update is expected, but the given branch does not exist, and actually running a build results in a failure since the commit does not exist.\n\nPresumably this happens due to `ruamel.yaml` attempting to escape something when writing back the element after acquiring a new ref. The bug is probably in that project, but we should look a bit deeper into it before reporting :)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/166/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/158", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/158/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/158/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/158/events", "html_url": "https://github.com/apache/buildstream/issues/158", "id": 799469656, "node_id": "MDU6SXNzdWU3OTk0Njk2NTY=", "number": 158, "title": "Support for lzip is missing", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-02T16:59:07Z", "updated_at": "2021-02-02T17:00:24Z", "closed_at": "2021-02-02T17:00:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/158)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Nov 20, 2017, 21:50\n\nlzip is the only compression method used for GNU ed releases. Python's tarfile does not support it.\n\nSee https://ftp.gnu.org/gnu/ed/", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/158/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/157", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/157/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/157/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/157/events", "html_url": "https://github.com/apache/buildstream/issues/157", "id": 799468986, "node_id": "MDU6SXNzdWU3OTk0Njg5ODY=", "number": 157, "title": "Missing accept header in http resquests leads to \"HTTP Error 406: Not Acceptable\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T16:58:25Z", "updated_at": "2021-02-02T16:58:59Z", "closed_at": "2021-02-02T16:58:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/157)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Nov 20, 2017, 21:47\n\nWhen using the tar source plugin for this file:\nhttps://alioth.debian.org/frs/download.php/file/3979/chrpath-0.16.tar.gz\n\nIt fails with this error:\nError mirroring https://alioth.debian.org/frs/download.php/file/3979/chrpath-0.16.tar.gz: HTTP Error 406: Not Acceptable\n\nThe reason is that buildstream uses urllib.request.urlretrieve from python, and this does not set the Accept header. The accept header needs to be set to */*.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/157/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/155", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/155/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/155/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/155/events", "html_url": "https://github.com/apache/buildstream/issues/155", "id": 799466593, "node_id": "MDU6SXNzdWU3OTk0NjY1OTM=", "number": 155, "title": "Stack trace encountered when staging a tarball", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T16:56:47Z", "updated_at": "2021-02-02T16:57:30Z", "closed_at": "2021-02-02T16:57:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/155)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 15, 2017, 09:22\n\nSo far this is an incident, not sure how to reproduce:\n\n```\n[00:01:15][67f528b9][build:core/adwaita-icon-theme.bst   ] BUG     gnome/core-adwaita-icon-theme/67f528b9-build.15748.log\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/codethink/GNOME/buildstream/buildstream/_scheduler/job.py\", line 265, in child_action\n        result = self.action(element)\n      File \"/codethink/GNOME/buildstream/buildstream/_scheduler/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1074, in _assemble\n        self.stage(sandbox)\n      File \"/codethink/GNOME/buildstream/buildstream/buildelement.py\", line 177, in stage\n        self.stage_sources(sandbox, self.get_variable('build-root'))\n      File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 481, in stage_sources\n        self._stage_sources_at(host_directory)\n      File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1406, in _stage_sources_at\n        source._stage(directory)\n      File \"/codethink/GNOME/buildstream/buildstream/source.py\", line 316, in _stage\n        self.stage(directory)\n      File \"/codethink/GNOME/buildstream/buildstream/plugins/sources/tar.py\", line 78, in stage\n        tar.extractall(path=directory, members=self._extract_members(tar, base_dir))\n      File \"/usr/lib/python3.5/tarfile.py\", line 1998, in extractall\n        numeric_owner=numeric_owner)\n      File \"/usr/lib/python3.5/tarfile.py\", line 2040, in extract\n        numeric_owner=numeric_owner)\n      File \"/usr/lib/python3.5/tarfile.py\", line 2118, in _extract_member\n        self.makelink(tarinfo, targetpath)\n      File \"/usr/lib/python3.5/tarfile.py\", line 2205, in makelink\n        self._extract_member(self._find_link_target(tarinfo),\n      File \"/usr/lib/python3.5/tarfile.py\", line 2372, in _find_link_target\n        raise KeyError(\"linkname %r not found\" % linkname)\n    KeyError: \"linkname 'adwaita-icon-theme-3.26.0/Adwaita/cursors/6407b0e94181790501fd1e167b474872' not found\"\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/155/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/155/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/153", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/153/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/153/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/153/events", "html_url": "https://github.com/apache/buildstream/issues/153", "id": 799463750, "node_id": "MDU6SXNzdWU3OTk0NjM3NTA=", "number": 153, "title": "Unhandled exception in utils._force_rmtree()", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-02T16:54:33Z", "updated_at": "2021-02-02T16:56:03Z", "closed_at": "2021-02-02T16:56:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/153)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 13, 2017, 10:24\n\nThis happened today during a GNOME build:\n\n```\n[--:--:--] BUG     [apps/qqwing.bst]: Build\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/codethink/GNOME/buildstream/buildstream/_scheduler/job.py\", line 265, in child_action\n        result = self.action(element)\n      File \"/codethink/GNOME/buildstream/buildstream/_scheduler/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1135, in _assemble\n        cleanup_rootdir()\n      File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1058, in cleanup_rootdir\n        utils._force_rmtree(rootdir)\n      File \"/codethink/GNOME/buildstream/buildstream/utils.py\", line 481, in _force_rmtree\n        shutil.rmtree(rootpath, **kwargs)\n      File \"/usr/lib/python3.5/shutil.py\", line 480, in rmtree\n        _rmtree_safe_fd(fd, path, onerror)\n      File \"/usr/lib/python3.5/shutil.py\", line 418, in _rmtree_safe_fd\n        _rmtree_safe_fd(dirfd, fullname, onerror)\n      File \"/usr/lib/python3.5/shutil.py\", line 418, in _rmtree_safe_fd\n        _rmtree_safe_fd(dirfd, fullname, onerror)\n      File \"/usr/lib/python3.5/shutil.py\", line 438, in _rmtree_safe_fd\n        onerror(os.unlink, fullname, sys.exc_info())\n      File \"/usr/lib/python3.5/shutil.py\", line 436, in _rmtree_safe_fd\n        os.unlink(name, dir_fd=topfd)\n    IsADirectoryError: [Errno 21] Is a directory: 'mount'\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/153/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/153/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/152", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/152/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/152/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/152/events", "html_url": "https://github.com/apache/buildstream/issues/152", "id": 799463050, "node_id": "MDU6SXNzdWU3OTk0NjMwNTA=", "number": 152, "title": "Inaccurate pipeline summary at startup", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}, {"id": 2709108737, "node_id": "MDU6TGFiZWwyNzA5MTA4NzM3", "url": "https://api.github.com/repos/apache/buildstream/labels/logging", "name": "logging", "color": "e96feb", "default": false, "description": "An issue related to logging output"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T16:53:52Z", "updated_at": "2021-02-02T16:54:25Z", "closed_at": "2021-02-02T16:54:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/152)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 11, 2017, 11:03\n\nWhen running: `bst build` on the GNOME project, knowing that the base system is cached and need not be locally built, the pipeline summary is incorrect:\n\n```\ntristan[[Gitlab user @think]](https://gitlab.com/think):~/codethink/GNOME/gnome-modulesets$ bst build apps/meta-gnome-apps-tested.bst core/meta-gnome-core.bst\nLoading:   245\nResolving: 245/245\nFetching artifact list from https://gnome7.codethink.co.uk/artifacts\nChecking:  245/245\n\nBuildStream Version 0.1.dev1510+g02539b8\n  Session Start: Saturday, 11-11-2017 at 19:59:19\n  Project:       gnome (/codethink/GNOME/gnome-modulesets)\n  Targets:       apps/meta-gnome-apps-tested.bst, core/meta-gnome-core.bst\n\nUser Configuration\n  Configuration File:      /home/tristan/.config/buildstream.conf\n  Log Files:               /home/tristan/.cache/buildstream/logs\n  Source Mirrors:          /home/tristan/.cache/buildstream/sources\n  Build Area:              /home/tristan/.cache/buildstream/build\n  Artifact Cache:          /home/tristan/.cache/buildstream/artifacts\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nProject Options\n  arch: x86_64\n\nPipeline\ndownloadable 76ebb4bb base/base-system.bst \ndownloadable 9f432ec5 base/base-configure.bst \n      cached 3d363598 base/linker-priority.bst \n      cached e0372368 base/ninja.bst \n      cached f5c063a8 base/polkit-workaround.bst \n      cached f89419a4 base.bst \n     waiting 96cf2a1f core-deps/gettext.bst \n     waiting 61d4d541 core-deps/yelp-xsl.bst \n     ...\n     ...\n```\n\nHere we are showing `base/base-system.bst` as downloadable, it is; except it's not going to be downloaded because it's a build-only dependency of `base/base-configure.bst`\n\nThe program works correctly and does not try to download the extra runtime artifact, but the pipeline summary somehow includes elements which are to be excluded form the session.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/152/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/152/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/150", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/150/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/150/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/150/events", "html_url": "https://github.com/apache/buildstream/issues/150", "id": 799461605, "node_id": "MDU6SXNzdWU3OTk0NjE2MDU=", "number": 150, "title": "Network retries configuration seems to not apply to pushing artifacts", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546549, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQ5", "url": "https://api.github.com/repos/apache/buildstream/labels/invalid", "name": "invalid", "color": "e4e669", "default": true, "description": "The issue is not a bug, or not a BuildStream bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T16:52:25Z", "updated_at": "2021-02-02T16:53:04Z", "closed_at": "2021-02-02T16:53:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/150)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 10, 2017, 10:48\n\nMaybe this is also the case for pulling artifacts, haven't checked.\n\nI did get some failures with pushing artifacts during a build session, and no retries were attempted.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/149", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/149/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/149/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/149/events", "html_url": "https://github.com/apache/buildstream/issues/149", "id": 799459972, "node_id": "MDU6SXNzdWU3OTk0NTk5NzI=", "number": 149, "title": "Busyloop while calculating cache keys in `bst build --track`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709109199, "node_id": "MDU6TGFiZWwyNzA5MTA5MTk5", "url": "https://api.github.com/repos/apache/buildstream/labels/optimization", "name": "optimization", "color": "A295AA", "default": false, "description": "Make BuildStream faster and use less resources"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T16:50:51Z", "updated_at": "2021-02-02T16:52:17Z", "closed_at": "2021-02-02T16:52:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/149)\nIn GitLab by [[Gitlab user @samthursfield]](https://gitlab.com/samthursfield) on Nov 8, 2017, 16:36\n\nWith BuildStream commit 34ba445fd1963acada0733c196483c98a57fd753 and gnome-modulesets.git commit d9eb944fce94d31f5320cbf6e41e5f29159f3e7b I can cause a busyloop.\n\nFirst run: `bst build --track apps.bst`\n\nThen hit CTRL+C at some point.\n\nEventually all status output will stop, and the main `bst` progress will peg a CPU at around 100% forever. CTRL+C is ignored in this state, `kill -9` seems the only way to stop the process.\n\nAttaching a debugger shows that we are stuck in `Element._get_cache_key()` for one of the elements that had a track job recently succeed.\n\nHere's a partial, rough Python traceback that I came up with while investigating the issue:\n```\n# this is element causing the hang; this method never completes.\nElement._cached ()\nPullQueue.skip()\nlist comprehension in queue.py:152\n# the elts argument will contain the element causing the hang\nQueue.enqueue(self=PullQueue(), elts=[CMakeElement(name='apps/evolution.bst')])\nScheduler.sched()\nbuildstream._scheduler.Queue.job_done()\n# the element argument here will be the element causing the hang\nbuildstream._scheduler.job.Job.child_complete()\n# the 'pid' argument here will correspond to the track process for the element causing the hang\nasyncio.unix_events.SafeChildWatcher._do_waitpid()\nasyncio.unix_events.SafeChildWatcher._do_waitpid_all()\nasyncio.unix_events.BaseChildWatcher._sig_chld()\nscheduler.loop.run_forever()\nScheduler.run()\n_pipeline.Pipeline.build()\n```\n\nIt seems that the issue is: an element tracks successfully, so we try to add it to the pull queue. We check if it's cached in order to find out whether we should pull it, which requires calculating its cache key, which gets stuck in an infinite loop presumably because some of its dependencies are inconsistent.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/149/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/148", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/148/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/148/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/148/events", "html_url": "https://github.com/apache/buildstream/issues/148", "id": 799458126, "node_id": "MDU6SXNzdWU3OTk0NTgxMjY=", "number": 148, "title": "Leaked directories when failing to push", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-02T16:49:00Z", "updated_at": "2021-02-02T16:50:43Z", "closed_at": "2021-02-02T16:50:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/148)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 8, 2017, 10:23\n\nIn the case that there is a failure to push an artifact, the staged compressed ostree repo that is temporarily created in the artifact owned directory (e.g. `push-repo-_im6a3e3`) is left behind without being cleaned up.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/148/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/148/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/147", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/147/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/147/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/147/events", "html_url": "https://github.com/apache/buildstream/issues/147", "id": 799456684, "node_id": "MDU6SXNzdWU3OTk0NTY2ODQ=", "number": 147, "title": "Compose element loses symlink modifications from integration commands", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T16:47:36Z", "updated_at": "2021-02-02T16:48:52Z", "closed_at": "2021-02-02T16:48:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/147)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 8, 2017, 08:57\n\nCurrently, if you replace an existing directory with a symbolic link as a part of integration commands, this modification is lost in the result of a `compose` element which purports to retain the results of integration commands.\n\nThis is because of the current way things are setup, which are the way they are because splitting artifacts and running integration commands is a delicate business; in the case that we integrate and split artifacts; we currently do the following:\n* First stage everything without splitting to `/`\n  * This is because we cannot assume that we can run integration commands with partial artifacts, tools and files may be missing\n* Snapshot the sandbox, recording file existence and timestamps\n* Run the integration commands on the fully staged dependencies\n* Snapshot the sandbox again, observing what files have been updated\n* Stage the artifacts again, but this time applying split rules and staging into `%{install-root}`\n* Copy over the files which have changed as a result of integration commands into `%{install-root}`, overwriting files from staged artifacts which have changed as a result of integration (and adding newly created files which resulted from integration)\n\nAs you can notice, in this case we miss out on symlink modifications.\n\n## Proposed Change\n\nThe gist of the change here is that instead of re-staging the files from their originating artifacts into `%{install-root}` and applying splitting rules, we gather the manifest using the split rules and use that to instead move files from `/` into `%{install-root}`\n\nThis change will be safer for the symbolic link cases, and as a bonus it should also be more optimized.\n\nIt will require:\n* Public API for the `Element` to report a manifest of it's artifact with split rules applied\n* An option to `utils.move_files()` which allows ignoring `EEXIST` errors on source files (in case files have already been moved)\n* For the compose element to use the split manifests of each dependencies to move files over from `/` to `%{install-root}`, ignoring EEXIST on sources\n* Test cases to ensure that replacement of a directory with a symbolic link works with a compose element's output\n\n\n## Note\n\nThis approach should also have the interesting side effect of preserving any intentionally created hardlinks in integration commands, which currently is meaningless, but will become interesting if and when:\n* We resolve issue #38 \n* We fix upstream ostree or work around ostree in order to preserve information about hardlinks at artifact creation time, upstream [ostree issue here](https://github.com/ostreedev/ostree/issues/925)\n\n", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/147/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/145", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/145/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/145/events", "html_url": "https://github.com/apache/buildstream/issues/145", "id": 799454492, "node_id": "MDU6SXNzdWU3OTk0NTQ0OTI=", "number": 145, "title": "Tar Source should normalize leading `.`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T16:45:21Z", "updated_at": "2021-02-02T16:46:02Z", "closed_at": "2021-02-02T16:46:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/145)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 2, 2017, 17:19\n\nSome tarballs are created with records that have a leading `./` in their paths, others are not.\n\nFor the most part, this does not effect `tar` Sources, except when you want to use the `base-dir` glob pattern.\n\nThe tar source should strip any leading `./` from tar records when performing the glob, so that the behavior of using the same glob with a tarball created with or without `./` is the same.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/145/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/145/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/144", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/144/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/144/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/144/events", "html_url": "https://github.com/apache/buildstream/issues/144", "id": 799453206, "node_id": "MDU6SXNzdWU3OTk0NTMyMDY=", "number": 144, "title": "Possible race condition - inconsistent passing test", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T16:43:58Z", "updated_at": "2021-02-02T16:45:13Z", "closed_at": "2021-02-02T16:45:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/144)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Nov 2, 2017, 17:13\n\nThis test failed:\nhttps://gitlab.com/BuildStream/buildstream/-/jobs/38687858\n\nAnd this test passed:\nhttps://gitlab.com/BuildStream/buildstream/-/jobs/38698246\n\nExactly the same master branch, at 557a08d0b3f6101f8452cce25096b310de0f596e\n\nIt looks like we have a race condition, and cannot trust that what we have just built will be reported as `cached` after immediately interrogating the artifact cache - looks like gitlab slow I/O helps to give us a chance in a million of reproducing this...\n\n\nFailed test report:\n\n```\n=================================== FAILURES ===================================\n______________________________ test_push_pull_all ______________________________\n\ncli = <tests.testutils.runcli.Cli object at 0x7fb29dd045f8>\ntmpdir = local('/builds/BuildStream/buildstream/tmp/test_push_pull_all0')\ndatafiles = local('/builds/BuildStream/buildstream/tmp/test_push_pull_all0')\n\n    [[Gitlab user @pytest]](https://gitlab.com/pytest).mark.skipif(not IS_LINUX, reason='Only available on linux')\n    [[Gitlab user @pytest]](https://gitlab.com/pytest).mark.datafiles(DATA_DIR)\n    def test_push_pull_all(cli, tmpdir, datafiles):\n        project = os.path.join(datafiles.dirname, datafiles.basename)\n        share = create_artifact_share(os.path.join(str(tmpdir), 'artifactshare'))\n    \n        # First build it without the artifact cache configured\n        result = cli.run(project=project, args=['build', 'target.bst'])\n        assert result.exit_code == 0\n    \n        # Assert that we are now cached locally\n        state = cli.get_element_state(project, 'target.bst')\n        assert state == 'cached'\n    \n        # Configure artifact share\n        cli.configure({\n            #\n            # FIXME: This test hangs \"sometimes\" if we allow\n            #        concurrent push.\n            #\n            #        It's not too bad to ignore since we're\n            #        using the local artifact cache functionality\n            #        only, but it should probably be fixed.\n            #\n            'scheduler': {\n                'pushers': 1\n            },\n            'artifacts': {\n                'pull-url': share.repo,\n                'push-url': share.repo,\n            }\n        })\n    \n        # Now try bst push\n        result = cli.run(project=project, args=['push', '--deps', 'all', 'target.bst'])\n        assert result.exit_code == 0\n    \n        # And finally assert that the artifact is in the share\n        all_elements = ['target.bst', 'import-bin.bst', 'import-dev.bst', 'compose-all.bst']\n        for element_name in all_elements:\n            assert_shared(cli, share, project, element_name)\n    \n        # Make sure we update the summary in our artifact share,\n        # we dont have a real server around to do it\n        #\n        share.update_summary()\n    \n        # Now we've pushed, delete the user's local artifact cache\n        # directory and try to redownload it from the share\n        #\n        artifacts = os.path.join(cli.directory, 'artifacts')\n        shutil.rmtree(artifacts)\n    \n        # Assert that we are now in a downloadable state, nothing\n        # is cached locally anymore\n        for element_name in all_elements:\n            state = cli.get_element_state(project, element_name)\n            assert state == 'downloadable'\n    \n        # Now try bst pull\n        result = cli.run(project=project, args=['pull', '--deps', 'all', 'target.bst'])\n        assert result.exit_code == 0\n    \n        # And assert that it's again in the local cache, without having built\n        for element_name in all_elements:\n            state = cli.get_element_state(project, element_name)\n>           assert state == 'cached'\nE           AssertionError: assert 'downloadable' == 'cached'\nE             - downloadable\nE             + cached\n\ntests/frontend/pull.py:178: AssertionError\n----------------------------- Captured stdout call -----------------------------\nBuildStream exited with code 0 for invocation:\n\tbst --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 build target.bst\nProgram output was:\nLoading....\nResolving 4 elements....\nChecking 4 elements....\n\nBuildStream Version 0.1.dev1455+g557a08d\n  Session Start:       Thursday, 02-11-2017 at 10:07:21\n  Project:             test (/builds/BuildStream/buildstream/tmp/test_push_pull_all0)\n  Target:              target.bst\n  Host Architecture:   x86_64\n  Target Architecture: x86_64\n\nUser Configuration\n  Configuration File:      /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf\n  Log Files:               /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/logs\n  Source Mirrors:          /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/sources\n  Build Area:              /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/build\n  Artifact Cache:          /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/artifacts\n  Maximum Fetch Tasks:     10\n  Maximum Build Tasks:     4\n  Maximum Push Tasks:      4\n  Maximum Network Retries: 2\n\nPipeline\n   buildable ffc58366 import-bin.bst \n   buildable 5918952a import-dev.bst \n     waiting 0237b356 compose-all.bst \n     waiting 7e82e12a target.bst \n\n[--:--:--] START   Starting build\n[--:--:--][ffc58366][build:import-bin.bst  ] START   test/import-bin/ffc58366-build.606.log\n[--:--:--][ffc58366][build:import-bin.bst  ] START   Staging sources\n[00:00:00][ffc58366][build:import-bin.bst  ] SUCCESS Staging sources\n[--:--:--][5918952a][build:import-dev.bst  ] START   test/import-dev/5918952a-build.607.log\n[--:--:--][5918952a][build:import-dev.bst  ] START   Staging sources\n[00:00:00][5918952a][build:import-dev.bst  ] SUCCESS Staging sources\n[--:--:--][ffc58366][build:import-bin.bst  ] START   Caching Artifact\n[--:--:--][5918952a][build:import-dev.bst  ] START   Caching Artifact\n[00:00:00][ffc58366][build:import-bin.bst  ] SUCCESS Caching Artifact\n[00:00:00][ffc58366][build:import-bin.bst  ] SUCCESS test/import-bin/ffc58366-build.606.log\n[00:00:00][5918952a][build:import-dev.bst  ] SUCCESS Caching Artifact\n[00:00:00][5918952a][build:import-dev.bst  ] SUCCESS test/import-dev/5918952a-build.607.log\n[--:--:--][0237b356][build:compose-all.bst ] START   test/compose-all/0237b356-build.610.log\n[--:--:--][0237b356][build:compose-all.bst ] START   Staging dependencies\n[00:00:00][0237b356][build:compose-all.bst ] SUCCESS Staging dependencies\n[--:--:--][0237b356][build:compose-all.bst ] START   Caching Artifact\n[00:00:00][0237b356][build:compose-all.bst ] SUCCESS Caching Artifact\n[00:00:00][0237b356][build:compose-all.bst ] SUCCESS test/compose-all/0237b356-build.610.log\n[--:--:--][7e82e12a][build:target.bst      ] START   test/target/7e82e12a-build.612.log\n[--:--:--][7e82e12a][build:target.bst      ] START   Caching Artifact\n[00:00:00][7e82e12a][build:target.bst      ] SUCCESS Caching Artifact\n[00:00:00][7e82e12a][build:target.bst      ] SUCCESS test/target/7e82e12a-build.612.log\n[00:00:00] SUCCESS Build Complete\n\nPipeline Summary\n  Total:       4\n  Session:     4\n  Fetch Queue: processed 0, skipped 4, failed 0 \n  Build Queue: processed 4, skipped 0, failed 0 \n\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{state} --downloadable target.bst\nProgram output was:\ncached\n\nBuildStream exited with code 0 for invocation:\n\tbst --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 push --deps all target.bst\nProgram output was:\nLoading....\nResolving 4 elements....\nFetching artifact list from /builds/BuildStream/buildstream/tmp/test_push_pull_all0/artifactshare/repo\nChecking 4 elements....\n[--:--:--] START   Pushing 4 artifacts\n[--:--:--][ffc58366][ push:import-bin.bst  ] START   test/import-bin/ffc58366-push.621.log\n[--:--:--][ffc58366][ push:import-bin.bst  ] START   Pushing Artifact\n[00:00:00][ffc58366][ push:import-bin.bst  ] SUCCESS Pushing Artifact\n[00:00:00][ffc58366][ push:import-bin.bst  ] SUCCESS test/import-bin/ffc58366-push.621.log\n[--:--:--][5918952a][ push:import-dev.bst  ] START   test/import-dev/5918952a-push.628.log\n[--:--:--][5918952a][ push:import-dev.bst  ] START   Pushing Artifact\n[00:00:00][5918952a][ push:import-dev.bst  ] SUCCESS Pushing Artifact\n[00:00:00][5918952a][ push:import-dev.bst  ] SUCCESS test/import-dev/5918952a-push.628.log\n[--:--:--][0237b356][ push:compose-all.bst ] START   test/compose-all/0237b356-push.634.log\n[--:--:--][0237b356][ push:compose-all.bst ] START   Pushing Artifact\n[00:00:00][0237b356][ push:compose-all.bst ] SUCCESS Pushing Artifact\n[00:00:00][0237b356][ push:compose-all.bst ] SUCCESS test/compose-all/0237b356-push.634.log\n[--:--:--][7e82e12a][ push:target.bst      ] START   test/target/7e82e12a-push.641.log\n[--:--:--][7e82e12a][ push:target.bst      ] START   Pushing Artifact\n[00:00:00][7e82e12a][ push:target.bst      ] SUCCESS Pushing Artifact\n[00:00:00][7e82e12a][ push:target.bst      ] SUCCESS test/target/7e82e12a-push.641.log\n[00:00:01] SUCCESS Pushed 4 complete\n\n\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{full-key} target.bst\nProgram output was:\n7e82e12a9f01d10b73a2d13e894756635924800e7c8ee8114aa19661cd7bfdc9\n\n37511fd037ee1bd4421830812078a7a404d32a96c4f988caa9804ef0316523b0\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{full-key} import-bin.bst\nProgram output was:\nffc58366eca61e646beb150556f384fb7c1402e40f3d00e942e6bf1fdfaf0301\n\n4c99d677aaf2be39873d8205c4bd3476507f5ab3a5d05d8291f6fc11b22d006e\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{full-key} import-dev.bst\nProgram output was:\n5918952aff40478e2fa7dadf48cc6f8d024e748fedc4cddb46a2fbda6c81db7e\n\n785abafcadda8c6c341edc42665fccf4ce0786b1de6a409718b852db896f5db4\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{full-key} compose-all.bst\nProgram output was:\n0237b356ed2aef07b8d947e42a55b8a430f086619767574de85e6f7ee2bdd13b\n\n46a2cdc22683c935bdcc6098e980136a404f2341185976a5e8a56d8f89e823af\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{state} --downloadable target.bst\nProgram output was:\ndownloadable\n\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{state} --downloadable import-bin.bst\nProgram output was:\ndownloadable\n\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{state} --downloadable import-dev.bst\nProgram output was:\ndownloadable\n\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{state} --downloadable compose-all.bst\nProgram output was:\ndownloadable\n\nBuildStream exited with code 0 for invocation:\n\tbst --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 pull --deps all target.bst\nProgram output was:\nLoading....\nResolving 4 elements....\nFetching artifact list from /builds/BuildStream/buildstream/tmp/test_push_pull_all0/artifactshare/repo\nChecking 4 elements....\n[--:--:--] START   Pulling 4 artifacts\n[--:--:--][ffc58366][ pull:import-bin.bst  ] START   test/import-bin/ffc58366-pull.684.log\n[--:--:--][5918952a][ pull:import-dev.bst  ] START   test/import-dev/5918952a-pull.685.log\n[--:--:--][ffc58366][ pull:import-bin.bst  ] INFO    Downloaded artifact ffc58366\n[00:00:00][ffc58366][ pull:import-bin.bst  ] SUCCESS test/import-bin/ffc58366-pull.684.log\n[--:--:--][0237b356][ pull:compose-all.bst ] START   test/compose-all/0237b356-pull.686.log\n[--:--:--][7e82e12a][ pull:target.bst      ] START   test/target/7e82e12a-pull.688.log\n[--:--:--][5918952a][ pull:import-dev.bst  ] INFO    Downloaded artifact 5918952a\n[00:00:00][5918952a][ pull:import-dev.bst  ] SUCCESS test/import-dev/5918952a-pull.685.log\n[--:--:--][7e82e12a][ pull:target.bst      ] INFO    Downloaded artifact 7e82e12a\n[00:00:00][7e82e12a][ pull:target.bst      ] SUCCESS test/target/7e82e12a-pull.688.log\n[--:--:--][0237b356][ pull:compose-all.bst ] INFO    Downloaded artifact 0237b356\n[00:00:00][0237b356][ pull:compose-all.bst ] SUCCESS test/compose-all/0237b356-pull.686.log\n[00:00:00] SUCCESS Pulled 4 complete\n\n\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{state} --downloadable target.bst\nProgram output was:\ncached\n\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{state} --downloadable import-bin.bst\nProgram output was:\ncached\n\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{state} --downloadable import-dev.bst\nProgram output was:\ncached\n\nBuildStream exited with code 0 for invocation:\n\tbst --no-verbose --config /builds/BuildStream/buildstream/tmp/test_push_pull_all0/cache/buildstream.conf --directory /builds/BuildStream/buildstream/tmp/test_push_pull_all0 show --deps none --format %{state} --downloadable compose-all.bst\nProgram output was:\ndownloadable\n\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/144/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/143", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/143/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/143/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/143/events", "html_url": "https://github.com/apache/buildstream/issues/143", "id": 799450292, "node_id": "MDU6SXNzdWU3OTk0NTAyOTI=", "number": 143, "title": "mmap does not work properly on SafeHardlinks", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2021-02-02T16:40:56Z", "updated_at": "2021-02-02T16:43:45Z", "closed_at": "2021-02-02T16:43:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/143)\nIn GitLab by [[Gitlab user @valentindavid]](https://gitlab.com/valentindavid) on Nov 2, 2017, 10:32\n\nCombination of open (with O_CREAT) + write + mmap makes an unaccessible memory region. This works correctly outside of the mount.\n\nThis bug is triggered by localedef when the locale archive does not yet exist, or sometimes when it needs to grow.\n\n[bug.c](/uploads/ff3141a5e9f04f97563290176f41814a/bug.c)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/143/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/142", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/142/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/142/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/142/events", "html_url": "https://github.com/apache/buildstream/issues/142", "id": 799448124, "node_id": "MDU6SXNzdWU3OTk0NDgxMjQ=", "number": 142, "title": "Potentially printing provenance more than once in LoadErrors", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-02-02T16:38:30Z", "updated_at": "2021-02-02T16:40:48Z", "closed_at": "2021-02-02T16:40:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/142)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 31, 2017, 07:07\n\nAs discovered in MR !129, it is possible that by way of resolving option expressions, we end up prepending provenance to errors which already have provenance, resulting in errors such as:\n\n```\nelement.bst [line 11 column 4]: element.bst [line 11 column 4]: Oh crap something went wrong here\n```\n\nThis is due to how `_options/optionpool.py` prepends provenance to error messages. As described in [this comment](https://gitlab.com/BuildStream/buildstream/merge_requests/129/diffs#note_45173680), that prepending is intended to add provenance only when a `LoadError` is raised from `self.evaluate()`, the `_yaml.composite()` line should be moved out of the try / except block so as to avoid this.\n\nHowever, it's not entirely that simple, making this change will also cause the error message introduced by MR !129 to regress and lack provenance information, so both of these must be fixed together.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/142/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/142/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/141", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/141/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/141/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/141/events", "html_url": "https://github.com/apache/buildstream/issues/141", "id": 799446351, "node_id": "MDU6SXNzdWU3OTk0NDYzNTE=", "number": 141, "title": "Stack trace when aborting fetching of artifact list", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-02T16:36:32Z", "updated_at": "2021-02-02T16:38:23Z", "closed_at": "2021-02-02T16:38:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/141)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 29, 2017, 08:27\n\nWhen launching a command which has no justification whatsoever for downloading the remote artifact list, it is highly likely for the user to hit `^C` a few times while BuildStream is taking an eternity to do a useless thing.\n\nIn this case, a really ugly thing happens.\n\nThe first `^C` prints \"Aborted!\", but buildstream does not return control to the calling shell:\n\n```\n$ bst track base/base-system.bst\nLoading:   001\nResolving: 001/001\nFetching artifact list from https://gnome7.codethink.co.uk/artifacts\n^C\nAborted!\n```\n\nThe second `^C` does this ugly stack trace:\n```\n^CError in atexit._run_exitfuncs:\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/popen_fork.py\", line 29, in poll\n    pid, sts = os.waitpid(self.pid, flag)\nKeyboardInterrupt\n```\n\nAt this point, you might think you are rid of this... but a child process has been orphaned, it's still trying to talk to the artifact server, how stubborn !\n\n```\n$ ps axf\n\n[...]\n 7262 pts/2    Sl     0:00 /usr/bin/python3 /home/tristan/.local/bin/bst track base/base-system.bst\n```\n\nYou wont notice the above if you're not looking for it... but it will come and surprise you seconds later, possibly while you are doing something else in your shell:\n\n```\n$ Process Process-1:\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/ostreecache.py\", line 286, in child_action\n    q.put((True, _ostree.list_remote_refs(self.repo, remote=remote)))\n  File \"/codethink/GNOME/buildstream/buildstream/_ostree.py\", line 354, in list_remote_refs\n    _, refs = repo.remote_list_refs(remote)\nKeyboardInterrupt\n\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/141/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/140", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/140/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/140/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/140/events", "html_url": "https://github.com/apache/buildstream/issues/140", "id": 799445457, "node_id": "MDU6SXNzdWU3OTk0NDU0NTc=", "number": 140, "title": "Unneeded pauses - Fetching artifact list", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T16:35:33Z", "updated_at": "2021-02-02T16:36:25Z", "closed_at": "2021-02-02T16:36:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/140)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 29, 2017, 08:18\n\nThis is utterly obnoxious - to the point where I really wonder why I'm using buildstream, I'd rather use a non deterministic tool for my development purposes, as long as it doesn't make me wait for a few **seconds** for *every single invocation*.\n\nDepending on your internet connection, your mileage will vary; if you happen to be in Manchester, where `gnome7.codethink.co.uk` physically is, then this annoyance might go unnoticed - here in Seoul; it takes anywhere from 3 to 10 seconds on *every invocation* to download a list of artifacts I just dont need.\n\nConsider, why do we need to fetch the artifact list ?\n\n* For `bst build` to construct a proper build plan\n  * This is acceptable and necessary\n* For `bst push` and `bst pull` to know what needs to be uploaded or downloaded\n  * This is acceptable and necessary\n* For `bst track` when fetching new source references\n  * Wasting seconds of user time might allow us to see downloadable state in the summary\n  * Absolutely no reason we should be obnoxiously wasting user time and causing frustration for this\n* For `bst fetch` to ensure we obtain sources\n  * Wasting seconds of user time might allow us to see downloadable state in the summary\n  * Absolutely no reason we should be obnoxiously wasting user time and causing frustration for this\n* For `bst show` to show downloadable state\n  * Do we really want to refresh the list every time ?\n  * On the one hand, we can't know downloadable state without checking, on the other hand; the user probably doesnt care about knowing this 99% of the time\n  * Lets make an explicit CLI option for force refreshing local knowledge of what is downloadable from the remote cache ?\n* For `bst shell`\n  * Absolutely no reason we should be obnoxiously wasting user time and causing frustration for this\n* For `bst checkout`\n  * Absolutely no reason we should be obnoxiously wasting user time and causing frustration for this\n* For `bst workspace <anything>`\n  * Absolutely no reason we should be obnoxiously wasting user time and causing frustration for this\n* For `bst source-bundle`\n  * I dont use this, and it's not a frequent command so it matters much less, but also I dont see why this refresh would be needed", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/140/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/138", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/138/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/138/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/138/events", "html_url": "https://github.com/apache/buildstream/issues/138", "id": 799441218, "node_id": "MDU6SXNzdWU3OTk0NDEyMTg=", "number": 138, "title": "aborting bst push command causes stack trace", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2021-02-02T16:31:10Z", "updated_at": "2021-02-02T16:34:27Z", "closed_at": "2021-02-02T16:34:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/138)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 27, 2017, 18:15\n\nWhen running\n\n> bst push --deps all apps/meta-gnome-apps-tested.bst\n\nAnd things are failing, perhaps connectivity reasons, I tried `retry` option once, it failed, and decided to hit \\^C on the next prompt.\n\nThe result is an ugly unhandled exception:\n```\n00:00:00][b1dbab84][ push:apps/accerciser.bst           ] FAILURE Sending artifact\n[00:00:08][b1dbab84][ push:apps/accerciser.bst           ] FAILURE Pushing Artifact\n[00:00:08][b1dbab84][ push:apps/accerciser.bst           ] FAILURE gnome/apps-accerciser/b1dbab84-push.19019.log\n\n    Failed to push artifact gnome/apps-accerciser/b1dbab84ef8722a28a2062314171155f16e8f6a954395e25dc52bcb6ee4bb003: Expected reply, got none\n\n    \n        PKG_CONFIG_PATH: /usr/local/lib/pkgconfig:/usr/lib/pkgconfig\n        SHELL: /bin/sh\n        SOURCE_DATE_EPOCH: '1320937200'\n        TERM: dumb\n        TZ: UTC\n        USER: tomjon\n        USERNAME: tomjon\n        V: '1'\n    [--:--:--] START   [apps/accerciser.bst]: Pushing Artifact\n    [--:--:--] START   [apps/accerciser.bst]: Preparing compressed archive\n    [00:00:07] SUCCESS [apps/accerciser.bst]: Preparing compressed archive\n    [--:--:--] START   [apps/accerciser.bst]: Sending artifact\n    pushreceive: INFO: Executing ssh -l artifacts -p 10007 gnome7.codethink.co.uk bst-artifact-receive --verbose artifacts\n    pushreceive: INFO: Receiving repository information\n    ssh: connect to host gnome7.codethink.co.uk port 10007: Connection refused\n    [00:00:00] FAILURE [apps/accerciser.bst]: Sending artifact\n    [00:00:08] FAILURE [apps/accerciser.bst]: Pushing Artifact\n    [00:00:08] FAILURE [apps/accerciser.bst]: Push\n    \n        Failed to push artifact gnome/apps-accerciser/b1dbab84ef8722a28a2062314171155f16e8f6a954395e25dc52bcb6ee4bb003: Expected reply, got none\n\n[--:--:--][d621e192][ main:apps/evolution.bst            ] STATUS  Push suspending\n[--:--:--][7a00f6e6][ main:apps/ghex.bst                 ] STATUS  Push suspending\n[--:--:--][6e4be59e][ main:apps/libgit2-glib.bst         ] STATUS  Push suspending\n\nPush failure on element: apps/accerciser.bst\n\nChoose one of the following options:\n  continue  - Continue queueing jobs as much as possible\n  quit      - Exit after all ongoing jobs complete\n  terminate - Terminate any ongoing jobs and exit\n  retry     - Retry this job\n  log       - View the full log file\n\nPressing ^C will terminate jobs and exit\n\nChoice: [continue]: ^C\n\nTerminating all jobs\n\n[--:--:--][d621e192][ main:apps/evolution.bst            ] STATUS  Push resuming\n[--:--:--][7a00f6e6][ main:apps/ghex.bst                 ] STATUS  Push resuming\n[--:--:--][6e4be59e][ main:apps/libgit2-glib.bst         ] STATUS  Push resuming\n[--:--:--][d621e192][ main:apps/evolution.bst            ] STATUS  Push terminating\n[--:--:--][7a00f6e6][ main:apps/ghex.bst                 ] STATUS  Push terminating\n[--:--:--][6e4be59e][ main:apps/libgit2-glib.bst         ] STATUS  Push terminating\n[--:--:--][d2fca14e][ main:apps/gitg.bst                 ] STATUS  Push terminating\nProcess Process-13:\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/ostreecache.py\", line 352, in push\n    [ref, weak_ref], output_file)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/pushreceive.py\", line 675, in push\n    pusher.run()\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/pushreceive.py\", line 459, in run\n    args = self.reader.receive_info()\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/pushreceive.py\", line 266, in receive_info\n    cmdtype, args = self.receive([PushCommandType.info])\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/pushreceive.py\", line 260, in receive\n    raise PushException('Expected reply, got none')\nbuildstream._artifactcache.pushreceive.PushException: Expected reply, got none\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/job.py\", line 265, in child_action\n    result = self.action(element)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/pushqueue.py\", line 39, in process\n    return element._push()\n  File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1173, in _push\n    return self.__artifacts.push(self)\n  File \"/codethink/GNOME/buildstream/buildstream/_artifactcache/ostreecache.py\", line 354, in push\n    raise _ArtifactError(\"Failed to push artifact {}: {}\".format(ref, e)) from e\nbuildstream.exceptions._ArtifactError: Failed to push artifact gnome/apps-evolution/d621e19297b2df27ed9607cb0a355a7dafcab6f92a5417bc6bbd78ad48666fab: Expected reply, got none\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1289, in _logging_enabled\n    yield self.__log_path\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/job.py\", line 281, in child_action\n    self.child_shutdown(1)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/job.py\", line 314, in child_shutdown\n    sys.exit(exit_code)\nSystemExit: 1\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/codethink/GNOME/buildstream/buildstream/_scheduler/job.py\", line 297, in child_action\n    logfile=filename)\n  File \"/usr/lib/python3.5/contextlib.py\", line 77, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1291, in _logging_enabled\n    self.__log_path = None\n  File \"/codethink/GNOME/buildstream/buildstream/_signals.py\", line 37, in terminator_handler\n    terminator()\n  File \"/codethink/GNOME/buildstream/buildstream/element.py\", line 1282, in flush_log\n    .format(action_name, self.name))\nValueError: I/O operation on closed file.\n^C^C\n\n[00:00:29][9ac8d8be][ main:apps/meta-gnome-apps-tested.bst] FAILURE Push failed\nERROR: \n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/138/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/138/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/137", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/137/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/137/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/137/events", "html_url": "https://github.com/apache/buildstream/issues/137", "id": 799440143, "node_id": "MDU6SXNzdWU3OTk0NDAxNDM=", "number": 137, "title": "buildstream hangs in operations with --except", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T16:30:03Z", "updated_at": "2021-02-02T16:31:02Z", "closed_at": "2021-02-02T16:31:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/137)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 27, 2017, 09:26\n\nI was wondering what the hangs are, when buildstream is clearly doing nothing, now I find it is 100% reproducible.\n\nAny command where `--except` is specified and the scheduler is run, it will result in a hang.\n\nFor example with the GNOME project:\n\n> bst track --deps all --except base.bst core/meta-gnome-core.bst\n\nThis will consistently result in a hang.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/137/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/137/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/133", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/133/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/133/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/133/events", "html_url": "https://github.com/apache/buildstream/issues/133", "id": 799430440, "node_id": "MDU6SXNzdWU3OTk0MzA0NDA=", "number": 133, "title": "Bash completions dont complete `--except` arguments", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T16:19:47Z", "updated_at": "2021-02-02T16:20:26Z", "closed_at": "2021-02-02T16:20:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/133)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 26, 2017, 12:05\n\nAs the title says, we have code in place which completes element names nicely, it fails to complete for `--except` parameters.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/133/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/133/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/132", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/132/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/132/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/132/events", "html_url": "https://github.com/apache/buildstream/issues/132", "id": 799429118, "node_id": "MDU6SXNzdWU3OTk0MjkxMTg=", "number": 132, "title": "Loading external plugins works without explicit requirement in project.conf", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T16:18:25Z", "updated_at": "2021-02-02T16:19:39Z", "closed_at": "2021-02-02T16:19:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/132)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 26, 2017, 09:34\n\nThis is confusing and shouldnt happen, it looks like BuildStream is loading random plugins discovered via pip without even having been instructed to do so with the `project.conf`.\n\nFor example, looking at the integration tests for `dpkg-build-test` in the `bst-external` repository shows that one was able to load the dpkg elements without specifying from whence they came:\n\n> https://gitlab.com/BuildStream/bst-external/blob/master/integration-tests/dpkg-build-test/project.conf", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/132/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/132/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/131", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/131/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/131/events", "html_url": "https://github.com/apache/buildstream/issues/131", "id": 799427822, "node_id": "MDU6SXNzdWU3OTk0Mjc4MjI=", "number": 131, "title": "Behavior of --except argument is frustrating and confusing", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T16:17:04Z", "updated_at": "2021-02-02T16:18:17Z", "closed_at": "2021-02-02T16:18:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/131)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 26, 2017, 09:17\n\nCurrently, given any recursive operation with an `--except` option, the behavior is to scan the loaded pipeline and remove the except dependencies recursively.\n\nThe problem is once you have a fairly large project, like the GNOME modulesets for instance, there are many elements to choose from, when I run a command such as:\n```\nbst track --deps all --except core/meta-gnome-core.bst apps/meta-gnome-apps-tested.bst\n```\n\nI naturally expect that BuildStream will track all of the `meta-gnome-apps-tested.bst` except for the elements in `core/meta-gnome-core.bst`, these two virtual targets (stacks), basically represent what we release in terms of the apps layer and the core layer, *however*, `apps/meta-gnome-apps-tested.bst` does not depend on `core/meta-gnome-core.bst`.\n\nThis is impractical, any larger projects will run into this, and it's too tedious to examine the common dependencies of both virtual targets and supply `--except` options for each intersection manually, this defeats the convenience purpose of the `--except` option altogether.\n\nTo make matters worse, the error message the user receives in this case is `No element named core/meta-gnome-core.bst`, leading the user to suspect a buildstream bug, since clearly there *is* an element with that name in their project.\n\nInstead; BuildStream should actually load the `--except` targets specified, and subtract the intersection from the pipeline targets - making the above example invocation *just work*.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/131/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/128", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/128/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/128/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/128/events", "html_url": "https://github.com/apache/buildstream/issues/128", "id": 799424138, "node_id": "MDU6SXNzdWU3OTk0MjQxMzg=", "number": 128, "title": "Status ticker fails to update periodically on some builds", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-02-02T16:13:10Z", "updated_at": "2021-02-02T16:14:42Z", "closed_at": "2021-02-02T16:14:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/128)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Oct 24, 2017, 15:14\n\nIssue #107 appears to have been two independent issues.\n\nThe second part of this issue not targeted by buildstream/107-failing-child-processes-when-tracking-missing-git-branches is a UI freeze that occurs during certain builds.\n\nOccasionally, during tracking, any timers in the status area may stop to count by themselves, only being updated by messages written to the main log. If run through `bst build --track`, this will correct itself once an actual build starts.\n\nI have not been able to track down the exact cause, but I believe this might be caused by a track job failing and the user choosing 'continue' or anything that causes  [https://gitlab.com/BuildStream/buildstream/blob/master/buildstream/_scheduler/job.py#L275](this error).\n\nI have been able to quite consistently reproduce this issue building gnome-modulesets (one of its sources currently fails to track due to an outdated SSL certificate), but I have been unable to reproduce it otherwise.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/128/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/127", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/127/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/127/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/127/events", "html_url": "https://github.com/apache/buildstream/issues/127", "id": 799423034, "node_id": "MDU6SXNzdWU3OTk0MjMwMzQ=", "number": 127, "title": "Error when trying to use list prepend to replace pre-* commands in project.conf", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T16:12:02Z", "updated_at": "2021-02-02T16:13:02Z", "closed_at": "2021-02-02T16:13:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/127)\nIn GitLab by [[Gitlab user @hashpling]](https://gitlab.com/hashpling) on Oct 24, 2017, 09:03\n\nFollowing issue #121, I was looking to replace a use of a `pre-` command in the `elements` section of a project.conf. The intention is to add an extra step project-wide for a particular kind of build, in this case the built in \"autotools\" kind.\n\nVery cut down, this project.conf demonstrates the issue:\n\n```yaml\nname: testcase\n\n# [...]\n\nelements:\n  autotools:\n    config:\n      pre-configure-commands:\n      - echo \"About to configure!\"\n```\n\nThis works correctly and my custom command is run before the configure step. If I change this as follows I get an error: \"Error loading project: /src/project.conf [line 17 column 8]: Attempt to override non-existing list\".\n\n```yaml\nelements:\n  autotools:\n    config:\n      configure-commands:\n        (<):\n        - echo \"About to configure!\"\n```\n\nIf I remove the `(<):` line then my custom command replaces the autotools plugin `configure-commands` and the project does not build correctly.\n\nIs this a bug or have I misunderstood the configuration composition or the list directives?", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/127/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/127/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/125", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/125/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/125/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/125/events", "html_url": "https://github.com/apache/buildstream/issues/125", "id": 799421717, "node_id": "MDU6SXNzdWU3OTk0MjE3MTc=", "number": 125, "title": "Regression after handling ^C in bst shell", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T16:10:29Z", "updated_at": "2021-02-02T16:11:01Z", "closed_at": "2021-02-02T16:11:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/125)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 22, 2017, 10:16\n\nThis is a regression from merging !106\n\nWhen `subprocess.poll()` is called after a process has already been reaped with `os.waitpid()`, the subprocess module will complain and return 255, and will mess with stdout by logging something like:\n\n> Unknown child process pid 30015, will report returncode 255\n\nThis is happening due to calling `os.waitpid()` more than once on an exited process which has already been reaped; `subprocess.poll()` will also call it.\n\nThis is my fault for being in a hurry to merge this, sorry.\n\nSo, to fix this, I think we'd better live with [subprocess's API](https://docs.python.org/3/library/subprocess.html#subprocess.CompletedProcess.returncode) and consider < 0 a signaled death", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/125/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/121", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/121/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/121/events", "html_url": "https://github.com/apache/buildstream/issues/121", "id": 799414155, "node_id": "MDU6SXNzdWU3OTk0MTQxNTU=", "number": 121, "title": "Remove pre-/post- command prefix support", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2021-02-02T16:01:48Z", "updated_at": "2021-02-02T16:04:47Z", "closed_at": "2021-02-02T16:04:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/121)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 19, 2017, 14:45\n\nThis is no longer needed with the addition of declarative array composition directives.\n\nBetter to not send a mixed signal about how to prepend/append statements to command lists.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/121/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/120", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/120/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/120/events", "html_url": "https://github.com/apache/buildstream/issues/120", "id": 799412987, "node_id": "MDU6SXNzdWU3OTk0MTI5ODc=", "number": 120, "title": "Remove 'arches' conditionals", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-02T16:00:33Z", "updated_at": "2021-02-02T16:01:40Z", "closed_at": "2021-02-02T16:01:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/120)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 19, 2017, 14:43\n\nThis is replaced by project options.\n\nOne should use 'arch' type project options to implement arch specific conditionals.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/120/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/118", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/118/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/118/events", "html_url": "https://github.com/apache/buildstream/issues/118", "id": 799411070, "node_id": "MDU6SXNzdWU3OTk0MTEwNzA=", "number": 118, "title": "BuildStream fails to timeout in network activities", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T15:58:27Z", "updated_at": "2021-02-02T15:59:27Z", "closed_at": "2021-02-02T15:59:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/118)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 18, 2017, 12:38\n\nThis is starting to become a common theme, and even though it may be a bit costly, we should address it.\n\nIdeally we should have a user configuration somewhere close to `network-retries`, and use it to apply a timeout in any network related activity; this could be a convention for Source implementations to honor.\n\nToday I see that gnome7 has been sleeping on a `bst track` command for a very long time:\n```\n13696 ?        S      0:00  \\_ /usr/sbin/CRON -f\n13700 ?        Ss     0:00  |   \\_ /bin/sh -c /home/builder/jhbuild2bst/autoconvert/launch-autotrack.sh\n13701 ?        S      0:00  |       \\_ /bin/bash /home/builder/jhbuild2bst/autoconvert/launch-autotrack.sh\n24832 ?        SN     0:00  |           \\_ /bin/bash /home/builder/jhbuild2bst/autoconvert/autoconvert.sh --jhbuild2bst /home/builder/jhbuild2bst --modulesets /home/builder/gnome-modulesets --source upstr\n26799 ?        RN   1015:16  |               \\_ /usr/bin/python3 /usr/local/bin/bst --arch aarch64 --on-error continue track --deps all core.bst --except base.bst\n```\n\nstracing the process tells me it's not doing anything.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/118/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/116", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/116/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/116/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/116/events", "html_url": "https://github.com/apache/buildstream/issues/116", "id": 799405007, "node_id": "MDU6SXNzdWU3OTk0MDUwMDc=", "number": 116, "title": "BuildStream usually requires fusermount", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T15:51:48Z", "updated_at": "2021-02-02T15:52:44Z", "closed_at": "2021-02-02T15:52:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/116)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 16, 2017, 18:17\n\nBecause libfuse will fallback into calling the expected suid fusermount binary.\n\nWe should update documentation at least, and probably have a smart check for fusermount in setup.py", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/116/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/112", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/112/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/112/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/112/events", "html_url": "https://github.com/apache/buildstream/issues/112", "id": 799394977, "node_id": "MDU6SXNzdWU3OTkzOTQ5Nzc=", "number": 112, "title": "Artifact configuration is confusing and fragile, need canonical push/pull urls.", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T15:40:45Z", "updated_at": "2021-02-02T15:41:37Z", "closed_at": "2021-02-02T15:41:37Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/112)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 12, 2017, 08:48\n\nCurrently artifact cache configuration is confusing because we need to set the push and pull urls separately.\n\nThis leads users to believe that one can set the push and pull URLs to different artifact caches; however in order for BuildStream to know what needs to be pushed and what can be pulled from a given artifact cache; it is essential that BuildStream rely on knowing that the push/pull url refer to the *same* remote artifact cache.\n\nThis is closely related to issue #111", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/112/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/112/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/111", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/111/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/111/events", "html_url": "https://github.com/apache/buildstream/issues/111", "id": 799394034, "node_id": "MDU6SXNzdWU3OTkzOTQwMzQ=", "number": 111, "title": "Unix platform cannot interact with artifact shares", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T15:39:39Z", "updated_at": "2021-02-02T15:40:38Z", "closed_at": "2021-02-02T15:40:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/111)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Oct 12, 2017, 08:41\n\nThis was left out initially because BuildStream is still usable on non-Linux unix platforms without this, and it will require an alternative protocol for communicating with remote artifact caches, which is non trivial.\n\nHowever it is a bug that one of our platforms does not support the features that buildstream purports to provide.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/111/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/110", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/110/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/110/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/110/events", "html_url": "https://github.com/apache/buildstream/issues/110", "id": 799393440, "node_id": "MDU6SXNzdWU3OTkzOTM0NDA=", "number": 110, "title": "Stacktrace when loading plugin installed in 'develop' mode", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709107834, "node_id": "MDU6TGFiZWwyNzA5MTA3ODM0", "url": "https://api.github.com/repos/apache/buildstream/labels/critical", "name": "critical", "color": "CC0033", "default": false, "description": "The tool is unusable in a certain scenario, or causes data loss"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T15:39:00Z", "updated_at": "2021-02-02T15:39:31Z", "closed_at": "2021-02-02T15:39:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/110)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Oct 11, 2017, 13:44\n\nLoading a plugin installed through `pip install -e` or `setup.py develop` results in particularly cryptic error messages: [pip_e.txt](/uploads/98626cf3499664a6ea6774875c3bf8c0/pip_e.txt).\n\nSince users writing plugins will presumably often use this method of installation for convenience, this error should either be fixed or at least result in a slightly more understandable error message.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/110/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/110/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/107", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/107/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/107/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/107/events", "html_url": "https://github.com/apache/buildstream/issues/107", "id": 799388094, "node_id": "MDU6SXNzdWU3OTkzODgwOTQ=", "number": 107, "title": "Failing child processes when tracking missing git branches", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2021-02-02T15:32:52Z", "updated_at": "2021-02-02T15:34:56Z", "closed_at": "2021-02-02T15:34:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/107)\nIn GitLab by [[Gitlab user @tlater]](https://gitlab.com/tlater) on Oct 6, 2017, 16:00\n\nSome child processes appear to crash when continuing after an element fails to track its git branch due to a missing branch, resulting in buildstream getting stuck waiting for their completion.\n\nSee this log of the stderr of `bst --on-error continue build --track base-system.bst` on the booting-base-system-scratch branch of\nbuildstream-tests: [error.log](/uploads/20fc29095a6f9eb7989cb2c3b9d59850/bPWASDNk)\n\nA minimal test case for my system:\n\n## project.conf:\n```yaml\nname: test-weird-crashes\n\nelement-path: elements\n```\n\n## elements/test.bst:\n```yaml\nkind: manual\n\ndepends:\n  - another_test.bst\n  - another_test1.bst\n  - another_test2.bst\n  - another_test3.bst\n  - another_test4.bst\n  - another_test5.bst\n  - another_test6.bst\n\nsources:\n- kind: git\n  url: git://git.baserock.org/delta/busybox\n  track: 1_2_3_1\n\n  ref: 1231a93bd05f8999fb25560fae17e7bc1d272a4f\nconfig:\n  configure-commands:\n    - echo 'Test'\n```\n\n## elements/another_test{1..6}.bst:\n```yaml\nkind: manual\n\nconfig:\n  configure-commands:\n    - echo 'This is only here to be a dependency...'\n```\n\nRunning `bst --on-error continue build --track test.bst`, you should see messages like these:\n\n```\nUnknown child process pid 3158, will report returncode 255\nUnknown child process pid 3162, will report returncode 255\n```\n\nThis seems like a very specific multithreading issue, so it is probably hard to reproduce...", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/107/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/107/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/98", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/98/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/98/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/98/events", "html_url": "https://github.com/apache/buildstream/issues/98", "id": 799374838, "node_id": "MDU6SXNzdWU3OTkzNzQ4Mzg=", "number": 98, "title": "CTRL+C doesn't properly kill a non-interactive shell", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-02T15:18:09Z", "updated_at": "2021-02-02T15:19:17Z", "closed_at": "2021-02-02T15:19:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/98)\nIn GitLab by [[Gitlab user @bochecha]](https://gitlab.com/bochecha) on Sep 30, 2017, 16:47\n\nDuring development, I'm running a just-built web app in a `bst shell`. I can test the app in a browser as I work on it.\n\nThis gives me the following processes:\n\n```\n  PID TTY      STAT   TIME COMMAND\n 1075 ?        Ss     0:01 /usr/lib/systemd/systemd --user\n 2120 ?        Rsl   26:43  \\_ /usr/libexec/gnome-terminal-server\n32328 pts/4    Ss     0:00  |   \\_ bash\n14880 pts/4    Sl+    0:01  |   |   \\_ /usr/bin/python3 /home/mathieu/.local/bin/bst shell app.bst ideascube\n14890 ?        Ss     0:00  |   |       \\_ /usr/bin/python3 /home/mathieu/.local/bin/bst shell app.bst ideascube\n14893 pts/4    S+     0:00  |   |       \\_ /usr/bin/bwrap ...\n14894 pts/4    S+     0:00  |   |           \\_ /usr/bin/bwrap ...\n14895 pts/4    Sl+    0:00  |   |               \\_ /usr/bin/python3.6 /usr/bin/ideascube\n```\n\nThe `systemd` one is just my user session, the `gnome-terminal-server` is because I use GNOME Terminal, and the `bash` one is the interactive shell in which I'm running `bst shell ...`. I included them to show the process hierarchy, as it shows something further down.\n\nWhen I'm done, I hit `ctrl`+`c` to kill the app, which printed `Aborted!` in the console, terminating the app.\n\nHowever, this does **not** give me back my bash prompt, `bst` is just hung there:\n\n```\n  PID TTY      STAT   TIME COMMAND\n 1075 ?        Ss     0:01 /usr/lib/systemd/systemd --user\n 2120 ?        Ssl   26:49  \\_ /usr/libexec/gnome-terminal-server\n32328 pts/4    Ss     0:00  |   \\_ bash\n14880 pts/4    Sl+    0:01  |   |   \\_ /usr/bin/python3 /home/mathieu/.local/bin/bst shell app.bst ideascube\n14890 ?        Ss     0:00  |   |       \\_ /usr/bin/python3 /home/mathieu/.local/bin/bst shell app.bst ideascube\n```\n\nIf I press `ctrl`+`c` a second time, then the parent `bst` process gets stopped, and I get back to a prompt.\n\nHowever, something is left lingering:\n\n```\n  PID TTY      STAT   TIME COMMAND\n 1075 ?        Ss     0:01 /usr/lib/systemd/systemd --user\n 2120 ?        Ssl   26:49  \\_ /usr/libexec/gnome-terminal-server\n32328 pts/4    Ss     0:00  |   \\_ bash\n14890 ?        Ss     0:00  \\_ /usr/bin/python3 /home/mathieu/.local/bin/bst shell app.bst ideascube\n```\n\nOne of the BuildStream processes never exited, and it got reparented to the session `systemd` process.\n\n---\n\nI found about #40, but that was for interactive shells, whereas here I'm running a non-interactive command.\n\nI would pretty much expect BuildStream to just pass the `ctrl`+`c` to the child command. In most cases, the child command would exit.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/98/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/98/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/93", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/93/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/93/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/93/events", "html_url": "https://github.com/apache/buildstream/issues/93", "id": 799368301, "node_id": "MDU6SXNzdWU3OTkzNjgzMDE=", "number": 93, "title": "Creating a child task can fail and raise a stack trace", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2021-02-02T15:10:43Z", "updated_at": "2021-02-02T15:12:23Z", "closed_at": "2021-02-02T15:12:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/93)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 25, 2017, 06:30\n\nIn situations where the OS starts to refuse to create new processes, buildstream will print a variety of stack traces, here are some samples from an automated run of buildstream on a host which had no more pids to hand out:\n\n```\n[00:00:00][????????][track:base/ninja.bst            ] BUG     gnome/base-ninja/????????-track.15200.log\n\n    An unhandled exception occured:\n    \n    Traceback (most recent call last):\n      File \"/usr/local/lib/python3.5/dist-packages/buildstream/_scheduler/job.py\", line 265, in child_action\n        result = self.action(element)\n      File \"/usr/local/lib/python3.5/dist-packages/buildstream/_scheduler/trackqueue.py\", line 46, in process\n        return element._track()\n      File \"/usr/local/lib/python3.5/dist-packages/buildstream/element.py\", line 1012, in _track\n        new_ref = source._track()\n      File \"/usr/local/lib/python3.5/dist-packages/buildstream/source.py\", line 265, in _track\n        new_ref = self.track()\n      File \"/usr/local/lib/python3.5/dist-packages/buildstream/plugins/sources/git.py\", line 265, in track\n        self.mirror.fetch()\n      File \"/usr/local/lib/python3.5/dist-packages/buildstream/plugins/sources/git.py\", line 114, in fetch\n        cwd=self.mirror)\n      File \"/usr/local/lib/python3.5/dist-packages/buildstream/plugin.py\", line 403, in call\n        exit_code, _ = self.__call(*popenargs, fail=fail, **kwargs)\n      File \"/usr/local/lib/python3.5/dist-packages/buildstream/plugin.py\", line 514, in __call\n        exit_code, output = utils._call(*popenargs, **kwargs)\n      File \"/usr/local/lib/python3.5/dist-packages/buildstream/utils.py\", line 805, in _call\n        process = subprocess.Popen(*popenargs, **kwargs)\n      File \"/usr/lib/python3.5/subprocess.py\", line 947, in __init__\n        restore_signals, start_new_session)\n      File \"/usr/lib/python3.5/subprocess.py\", line 1490, in _execute_child\n        restore_signals, start_new_session, preexec_fn)\n    BlockingIOError: [Errno 11] Resource temporarily unavailable\n\n```\n\n```\nProcess Process-5:\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 249, in _bootstrap\n    self.run()\n  File \"/usr/lib/python3.5/multiprocessing/process.py\", line 93, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_scheduler/job.py\", line 297, in child_action\n    logfile=filename)\n  File \"/usr/lib/python3.5/contextlib.py\", line 77, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_signals.py\", line 124, in suspendable\n    yield\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_scheduler/job.py\", line 297, in child_action\n    logfile=filename)\n  File \"/usr/lib/python3.5/contextlib.py\", line 77, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/element.py\", line 1281, in _logging_enabled\n    yield self.__log_path\n  File \"/usr/lib/python3.5/contextlib.py\", line 77, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_signals.py\", line 64, in terminator\n    yield\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/element.py\", line 1281, in _logging_enabled\n    yield self.__log_path\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_scheduler/job.py\", line 253, in child_action\n    logfile=filename)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_scheduler/job.py\", line 217, in message\n    **args))\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/context.py\", line 271, in _message\n    self._message_handler(message, context=self)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_scheduler/job.py\", line 368, in child_message_handler\n    self.queue.put(Envelope('message', message))\n  File \"/usr/lib/python3.5/multiprocessing/queues.py\", line 87, in put\n    self._start_thread()\n  File \"/usr/lib/python3.5/multiprocessing/queues.py\", line 169, in _start_thread\n    self._thread.start()\n  File \"/usr/lib/python3.5/threading.py\", line 844, in start\n    _start_new_thread(self._bootstrap, ())\nRuntimeError: can't start new thread\n\n```\n\n```\nException in callback Job.parent_recv()\nhandle: <Handle Job.parent_recv()>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/asyncio/events.py\", line 125, in _run\n    self._callback(*self._args)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_scheduler/job.py\", line 393, in parent_recv\n    self.parent_process_queue()\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_scheduler/job.py\", line 390, in parent_process_queue\n    self.parent_process_envelope(envelope)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_scheduler/job.py\", line 380, in parent_process_envelope\n    self.scheduler.context._message(envelope.message)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/context.py\", line 271, in _message\n    self._message_handler(message, context=self)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_frontend/main.py\", line 902, in message_handler\n    text = self.logger.render(message)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_frontend/widget.py\", line 375, in render\n    log_content = self.read_last_lines(message.logfile)\n  File \"/usr/local/lib/python3.5/dist-packages/buildstream/_frontend/widget.py\", line 392, in read_last_lines\n    output = subprocess.check_output([tail_command, '-n', str(self.log_lines), logfile])\n  File \"/usr/lib/python3.5/subprocess.py\", line 626, in check_output\n    **kwargs).stdout\n  File \"/usr/lib/python3.5/subprocess.py\", line 693, in run\n    with Popen(*popenargs, **kwargs) as process:\n  File \"/usr/lib/python3.5/subprocess.py\", line 947, in __init__\n    restore_signals, start_new_session)\n  File \"/usr/lib/python3.5/subprocess.py\", line 1490, in _execute_child\n    restore_signals, start_new_session, preexec_fn)\nBlockingIOError: [Errno 11] Resource temporarily unavailable\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/93/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/93/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/92", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/92/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/92/events", "html_url": "https://github.com/apache/buildstream/issues/92", "id": 799365889, "node_id": "MDU6SXNzdWU3OTkzNjU4ODk=", "number": 92, "title": "Handle kernels which lack CONFIG_USER_NS", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2021-02-02T15:07:57Z", "updated_at": "2021-02-02T15:10:35Z", "closed_at": "2021-02-02T15:10:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/92)\nIn GitLab by [[Gitlab user @jonathanmaw]](https://gitlab.com/jonathanmaw) on Sep 21, 2017, 15:23\n\nThe error raised is \"Creating new namespace failed, likely because the kernel does not support user namespaces.  bwrap must be installed setuid on such systems.\" Ensuring that the bwrap binary is setuid does not solve this problem.\n\nSince the sandbox implementation won't work without being able to do user namespaces, the most appropriate course of action seems to be to raise that error a lot sooner, and in a less confusing way.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/92/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/92/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/91", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/91/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/91/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/91/events", "html_url": "https://github.com/apache/buildstream/issues/91", "id": 799365020, "node_id": "MDU6SXNzdWU3OTkzNjUwMjA=", "number": 91, "title": "bst-artifact-receive does not require bubblewrap", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T15:06:56Z", "updated_at": "2021-02-02T15:07:50Z", "closed_at": "2021-02-02T15:07:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/91)\nIn GitLab by [[Gitlab user @bochecha]](https://gitlab.com/bochecha) on Sep 8, 2017, 15:13\n\nI just tried installing BuildStream on the server which will be hosting my artefacts cache.\n\n```\n$ python3 setup.py install --user\nBubblewrap not found: BuildStream requires Bubblewrap (bwrap) for sandboxing the build environment. Install it using your package manager (usually bwrap or bubblewrap)\n```\n\nHaving a way to install only `bst-artifact-receive`, or even a way to bypass the check for bubblewrap would be nice. :smiley:", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/91/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/91/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/90", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/90/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/90/events", "html_url": "https://github.com/apache/buildstream/issues/90", "id": 799364228, "node_id": "MDU6SXNzdWU3OTkzNjQyMjg=", "number": 90, "title": "bst build bails if it cannot push to the artifact cache", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T15:05:56Z", "updated_at": "2021-02-02T15:06:47Z", "closed_at": "2021-02-02T15:06:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/90)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 6, 2017, 19:36\n\nIt seems that if an artifact `push-url` is configured and buildstream cannot reach it or push to it; bst build will just error out.\n\nThis seems wrong considering that we cache the offline state in places and such.\n\nIf we cannot push we should probably warn about it at startup and construct the scheduler without a push queue.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/90/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/90/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/89", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/89/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/89/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/89/events", "html_url": "https://github.com/apache/buildstream/issues/89", "id": 799360781, "node_id": "MDU6SXNzdWU3OTkzNjA3ODE=", "number": 89, "title": "Absolute build directories should be unique per element", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2021-02-02T15:01:57Z", "updated_at": "2021-02-02T15:05:48Z", "closed_at": "2021-02-02T15:05:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/89)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 6, 2017, 19:22\n\nAs [[Gitlab user @hashpling]](https://gitlab.com/hashpling) points out on issue #67 [here](https://gitlab.com/BuildStream/buildstream/issues/67#note_39332790), the path to where a source file was built can be significant and end up encoded in the artifacts, an example being the paths to source files embedded into debugging information.\n\nIt would be more correct if by default, buildstream resolved `%{build-root}` dynamically for each element.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/89/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/89/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/87", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/87/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/87/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/87/events", "html_url": "https://github.com/apache/buildstream/issues/87", "id": 799359367, "node_id": "MDU6SXNzdWU3OTkzNTkzNjc=", "number": 87, "title": "Projects should have a say in their artifact caches", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-02-02T15:00:27Z", "updated_at": "2021-02-02T15:01:19Z", "closed_at": "2021-02-02T15:01:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/87)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 5, 2017, 23:54\n\nThe configuration for artifact caches is currently global on a per user basis.\n\nThis means if you build multiple projects for different organizations you would have to use separate config files for each project; when in fact the authors of a given project should have a good idea where an artifact share exists, or which one(s) should be used for a given branch of that buildstream project.\n\nInstead we should reverse this and say:\n* The project advertises it's artifact push and pull URLs\n* The user can decide where to push and pull artifacts from on a per project basis\n  * This can be done with a dictionary in the user configuration, so we can override artifact caches on a per project name basis\n  * This can be done by adding local configuration to buildstream. We already have workspaces which store data in `<project>/.bst/`, we could add a key-value store in `<project>/.bst/config` and have a generic `bst config` CLI (similar to git), where we could configure the push/pull urls to use on a *per checkout* basis\n  * Similar to the above option, instead of generic configuration we could add custom commands for configuring *remotes*, seems that a `bst remote` family of commands would fit naturally with `bst push` and `bst pull`\n\n\nMarking this blocker as it constitutes a CLI api change and I would rather not make our first stable release stuck with this approach.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/87/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/87/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/86", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/86/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/86/events", "html_url": "https://github.com/apache/buildstream/issues/86", "id": 799358512, "node_id": "MDU6SXNzdWU3OTkzNTg1MTI=", "number": 86, "title": "bst shell --command requires a shell", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T14:59:28Z", "updated_at": "2021-02-02T15:00:19Z", "closed_at": "2021-02-02T15:00:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/86)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 5, 2017, 23:40\n\nI think instead, the default command of `bst shell` should be `sh -i`\n\nWe should be able to run things inside a sandbox without the assistance of a shell inside the sandbox, regardless of whether the artifacts staged in the sandbox provide a shell.\n\nMarking this as blocker because it means changing user facing CLI api.\n", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/86/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/86/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/84", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/84/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/84/events", "html_url": "https://github.com/apache/buildstream/issues/84", "id": 799355860, "node_id": "MDU6SXNzdWU3OTkzNTU4NjA=", "number": 84, "title": "File attributes not considered in cache key calculations (workspaces & local sources)", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-02-02T14:56:32Z", "updated_at": "2021-02-02T14:58:18Z", "closed_at": "2021-02-02T14:58:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/84)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Sep 3, 2017, 05:57\n\nFor both workspaces and local sources we use a recursive directory walk to generate a cache key with the content of files found in those directories and their respective filenames.\n\nCurrently we dont take file attributes into account, which is wrong because you want file executable-ness and such to effect your cache key and cause a rebuild. It's also tricky because you wouldnt want file mtimes to effect the build; and it's unclear if we can get into xattrs, and if we do have xattrs; they would have to only be used where xattrs exist.\n\nConsidering xattrs, they *could* be considered on linux but at the same time it's unclear if a buildstream project (i.e. containing a local source data) can be revisioned with something that will recall the xattrs (does git ?).", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/84/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/84/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/83", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/83/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/83/events", "html_url": "https://github.com/apache/buildstream/issues/83", "id": 799354706, "node_id": "MDU6SXNzdWU3OTkzNTQ3MDY=", "number": 83, "title": "FUSE SafeHardlinkOps filesystem doesn't work on ppc64", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T14:55:20Z", "updated_at": "2021-02-02T14:56:25Z", "closed_at": "2021-02-02T14:56:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/83)\nIn GitLab by [[Gitlab user @samthursfield]](https://gitlab.com/samthursfield) on Sep 1, 2017, 15:06\n\nI was hitting strange errors running BuildStream on a ppc64 machine, where integration commands and `bst shell` would fail with `execvp sh: Exec format error`.\r\n\r\nThis turned out to be because [fusepy](https://github.com/terencehonles/fusepy/) didn't know the `struct stat` layout on that architecture and so was falling back to the layout it uses on i686 platforms, causing all sorts of crazy behaviour from the safe-hardlinks filesystem.\r\n\r\nI've sent a pull request for fusepy to fix this issue: https://github.com/terencehonles/fusepy/pull/72\r\n\r\nHowever, the project seems inactive and since it's only one file it might make more sense to bundle the file with BuildStream. Without this fix BuildStream is basically unusable on powerpc64 machines.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/83/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/83/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/81", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/81/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/81/events", "html_url": "https://github.com/apache/buildstream/issues/81", "id": 799350489, "node_id": "MDU6SXNzdWU3OTkzNTA0ODk=", "number": 81, "title": "Non-empty read-only directories not handled during 'bst build' and others", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2021-02-02T14:50:33Z", "updated_at": "2021-02-02T14:53:14Z", "closed_at": "2021-02-02T14:53:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/81)\nIn GitLab by [[Gitlab user @aevri]](https://gitlab.com/aevri) on Aug 31, 2017, 15:40\n\nIt seems that non-empty read-only directories are not handled as expected.\n\nIf I construct a tar file like so:\n\n```\nmkdir files\ntouch files/{a,b}\nchmod ugo-w files\ntar cvf files.tar files\n```\n\nI cannot use it in an 'import' element as I would expect:\n\n```\ncat > tar.bst <<EOF\nkind: import\ndescription: Import shell\n\nsources:\n- kind: tar\n  url: file:///src/files.tar\n  base-dir: ''\nEOF\n\nbst track tar.bst\nbst build tar.bst\n```\n\nThe 'bst build' step fails. After re-creating the read-only directory, `os.link` fails to create a link in it:\n```\n[--:--:--][991e5007][ main:tar.bst  ] START   Starting build\n[--:--:--][991e5007][build:tar.bst  ] START   hello-buildstream/tar/991e5007-build.92.log\n[--:--:--][991e5007][build:tar.bst  ] START   Staging sources\n[00:00:00][991e5007][build:tar.bst  ] SUCCESS Staging sources\n[00:00:00][991e5007][build:tar.bst  ] BUG     hello-buildstream/tar/991e5007-build.92.log\n\n    An unhandled exception occured:\n\n    Traceback (most recent call last):\n      File \"/src/buildstream/buildstream/_scheduler/job.py\", line 265, in child_action\n        result = self.action(element)\n      File \"/src/buildstream/buildstream/_scheduler/buildqueue.py\", line 34, in process\n        element._assemble()\n      File \"/src/buildstream/buildstream/element.py\", line 1093, in _assemble\n        utils.link_files(collectdir, filesdir)\n      File \"/src/buildstream/buildstream/utils.py\", line 386, in link_files\n        _process_list(src, dest, files, safe_link, result, ignore_missing=ignore_missing)\n      File \"/src/buildstream/buildstream/utils.py\", line 553, in _process_list\n        actionfunc(srcpath, destpath, result=result)\n      File \"/src/buildstream/buildstream/utils.py\", line 250, in safe_link\n        os.link(src, dest)\n    PermissionError: [Errno 13] Permission denied: '/tmp/home/.cache/buildstream/build/tar-5djrnjyl/root/output/files/a' -> '/tmp/home/.cache/buildstream/build/tar-5djrnjyl/root/tmpwf74shc0/files/files/a'\n```\n\nIf you do this as root user, it of course succeeds because root ignores permissions. Interestingly, a subsequent `bst checkout` as root will fail with a similar error though. Perhaps it copies as user 'tomjon', and inside the sandbox.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/81/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/81/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/80", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/80/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/80/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/80/events", "html_url": "https://github.com/apache/buildstream/issues/80", "id": 799349784, "node_id": "MDU6SXNzdWU3OTkzNDk3ODQ=", "number": 80, "title": "Awkward to recover after manually deleting workspace dir", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T14:49:46Z", "updated_at": "2021-02-02T14:50:25Z", "closed_at": "2021-02-02T14:50:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/80)\nIn GitLab by [[Gitlab user @aevri]](https://gitlab.com/aevri) on Aug 31, 2017, 10:51\n\nIf I do this:\n\n```\nbst workspace open myelement.bst ../myelement\nrm -rf ../myelement\n```\n\nI can't use `bst` to close the workspace:\n\n```\nbst workspace close myelement.bst\nLoading:   020\nResolving: 020/020\nError loading pipeline: Failed loading workspace. Did you remove the workspace directory? [Errno 2] No such file or directory: '/src/myelement'\n```\n\nTo recover, I can `mkdir ../myelement`, and then close the workspace. It feels a bit awkward to have to do so though, I simply want to remove it :)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/80/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/80/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/75", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/75/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/75/events", "html_url": "https://github.com/apache/buildstream/issues/75", "id": 799339315, "node_id": "MDU6SXNzdWU3OTkzMzkzMTU=", "number": 75, "title": "source-bundle: generated script fails when a build element has no source", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T14:37:37Z", "updated_at": "2021-02-02T14:38:13Z", "closed_at": "2021-02-02T14:38:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/75)\nIn GitLab by [[Gitlab user @hashpling]](https://gitlab.com/hashpling) on Aug 24, 2017, 14:31\n\nIf a build element doesn't have any sources, then the tarball won't contain a source directory for that element but the generate `build-` script will attempt to copy the contents of the directory to `/buildstream/build` and will error out due to `set -e`.\n\nThe simplest fix would seem to be to check for the existence of the source directory before attempting the copy in the `build-module.sh.in` template, but the exact shape of that change depends on the choice of fix to issue #67.\n\n(Perhaps I should be using kind `script` instead of kind `manual` for an element without sources, but I think that these elements are omitted from `source-bundle` generated tarballs?)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/75/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/75/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/74", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/74/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/74/events", "html_url": "https://github.com/apache/buildstream/issues/74", "id": 799338166, "node_id": "MDU6SXNzdWU3OTkzMzgxNjY=", "number": 74, "title": "Prevent artifacts from containing files in `/buildstream/build`", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T14:36:20Z", "updated_at": "2021-02-02T14:37:29Z", "closed_at": "2021-02-02T14:37:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/74)\nIn GitLab by [[Gitlab user @samthursfield]](https://gitlab.com/samthursfield) on Aug 24, 2017, 13:33\n\nSomehow, GENIVI AudioManager manages to install a file into `$DESTDIR/buildstream/build`. If this gets included in the artifact then subsequent builds fail (because Git refuses to clone the source repo into a non-empty directory).\n\nWe should check for this and error out when creating the problematic artifact.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/74/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/74/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/67", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/67/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/67/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/67/events", "html_url": "https://github.com/apache/buildstream/issues/67", "id": 799331946, "node_id": "MDU6SXNzdWU3OTkzMzE5NDY=", "number": 67, "title": "source-bundle: %{build-root} is not expanded to where the generated scripts run the builds", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-02T14:29:08Z", "updated_at": "2021-02-02T14:30:15Z", "closed_at": "2021-02-02T14:30:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/67)\nIn GitLab by [[Gitlab user @hashpling]](https://gitlab.com/hashpling) on Aug 21, 2017, 17:05\n\nGiven the following demo bst file:\n\n```\nkind: manual\n\ndepends:\n- debian-stretch.bst\n\nconfig:\n  build-commands:\n  - echo hello >world\n\n  install-commands:\n  - cp %{build-root}/world %{install-root}/world\n```\n\nThe build and install commands work correctly in a normal sandboxed `bst build`, but the build script that `bst source-bundle` creates contains the following sequence of commands:\n\n```\ncp -a \"$SRCDIR/hello-world\" '/buildstream/build/hello-world'\ncd '/buildstream/build/hello-world'\n\nexport PREFIX='/buildstream/install'\n\nexport HOME=/tmp LC_ALL=C LOGNAME=tomjon MAKEFLAGS=-j6 PATH=/usr/bin:/bin:/usr/sbin:/sbin SHELL=/bin/sh TERM=dumb TZ=UTC USER=tomjon USERNAME=tomjon V=1\n\n# Build the module\n(set -ex; echo hello >world\n) || exit 1\n(set -ex; cp /buildstream/build/world /buildstream/install/world\n) || exit 1\n(set -ex; :\n) || exit 1\n```\n\nIt seems that either the sources should be copied to `/buildstream/build` and not `/buildstream/build/<build-name>` (the whole directory is cleaned in any case), or `%{build-root}` should be expanded to the subdirectory that is actually used for the build.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/67/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/67/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/64", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/64/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/64/events", "html_url": "https://github.com/apache/buildstream/issues/64", "id": 799328256, "node_id": "MDU6SXNzdWU3OTkzMjgyNTY=", "number": 64, "title": "Clarify about plugins importing other plugins", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2708546540, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTQw", "url": "https://api.github.com/repos/apache/buildstream/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T14:24:54Z", "updated_at": "2021-02-02T14:26:29Z", "closed_at": "2021-02-02T14:26:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/64)\nIn GitLab by [[Gitlab user @samthursfield]](https://gitlab.com/samthursfield) on Aug 15, 2017, 10:09\n\nI have in my head that we discourage importing plugins from other plugins.\n\nIt does appear to be possible currently, e.g. the following appears to work:\n\n```\nfrom . import dpkg_build\n\n# Element implementation for the 'my_dpkg_build' kind.\nclass MyDpkgElement(dpkg_build.DpkgElement):\n      pass\n\n# Plugin entry point\ndef setup():\n    return MyDpkgElement\n```\n\nThere is another way people might try this, which is to do `from buildstream.plugins.elements.dpkg_build import DpkgElement`. That produces a confusing error, due to the way [pluginbase](http://pluginbase.pocoo.org/) creates unique namespaces for plugin modules:\n\n```\n...\n  File \"/home/sam/.local/lib/python3.5/site-packages/pluginbase-0.5-py3.5.egg/pluginbase.py\", line 410, in plugin_import\n    fromlist, level)\n  File \"/home/shared/src/buildstream/buildstream/plugins/elements/mydpkgelement.py\", line 1, in <module>\n    from buildstream.plugins.elements.dpkg_build import DpkgElement\n  File \"/home/sam/.local/lib/python3.5/site-packages/pluginbase-0.5-py3.5.egg/pluginbase.py\", line 410, in plugin_import\n    fromlist, level)\nImportError: No module named 'pluginbase._internalspace._sp27c7c99949c6a90425f3e60eb6eb621f.elements'\n```\n\nWe need to update the docs to either say \"here is how you do this\", or \"don't do this\".\n\nML discussion: https://mail.gnome.org/archives/buildstream-list/2017-August/msg00001.html", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/64/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/64/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/52", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/52/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/52/events", "html_url": "https://github.com/apache/buildstream/issues/52", "id": 799316754, "node_id": "MDU6SXNzdWU3OTkzMTY3NTQ=", "number": 52, "title": "Error pushing artifacts: problem in identifier?", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T14:11:07Z", "updated_at": "2021-02-02T14:12:01Z", "closed_at": "2021-02-02T14:12:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/52)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Jul 26, 2017, 00:24\n\n``\nFailed to push artifact gnu-toolchain/gnu-toolchain-base-platform/c586160957bdbbc77cb6a7f28e0db8b1c014e82330ed57759073159f14a304aa: Branch gnu-toolchain/gnu-toolchain-base-platform/c586160957bdbbc77cb6a7f28e0db8b1c014e82330ed57759073159f14a304aa is at ddf42b9c311faeb0656bf60e266610fc0c283b59275bace71cb8d9cde56c9016, not 0000000000000000000000000000000000000000000000000000000000000000\n``\n\nhttps://gitlab.com/baserock/definitions/-/jobs/24470616", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/52/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/52/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/51", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/51/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/51/events", "html_url": "https://github.com/apache/buildstream/issues/51", "id": 799316110, "node_id": "MDU6SXNzdWU3OTkzMTYxMTA=", "number": 51, "title": "Error when pushing artifacts: \"BrokenPipeError: [Errno 32] Broken pipe\"", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T14:10:23Z", "updated_at": "2021-02-02T14:10:59Z", "closed_at": "2021-02-02T14:10:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/51)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Jul 25, 2017, 11:53\n\nhttps://gitlab.com/baserock/definitions/-/jobs/24166576", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/51/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/51/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/49", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/49/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/49/events", "html_url": "https://github.com/apache/buildstream/issues/49", "id": 799313906, "node_id": "MDU6SXNzdWU3OTkzMTM5MDY=", "number": 49, "title": "BuildStream needs artifact revisions", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T14:07:48Z", "updated_at": "2021-02-02T14:09:08Z", "closed_at": "2021-02-02T14:09:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/49)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jul 19, 2017, 09:39\n\nA side effect of not having artifact revisions is issue #46\n\nGeneral email outlining considerations needed for various buildstream related revisions is [available here](https://mail.gnome.org/archives/buildstream-list/2017-July/msg00016.html)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/49/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/49/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/47", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/47/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/47/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/47/events", "html_url": "https://github.com/apache/buildstream/issues/47", "id": 799312270, "node_id": "MDU6SXNzdWU3OTkzMTIyNzA=", "number": 47, "title": "\"OverflowError: int too big to convert\" when pushing artifacts", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T14:05:49Z", "updated_at": "2021-02-02T14:07:04Z", "closed_at": "2021-02-02T14:07:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/47)\nIn GitLab by [[Gitlab user @jjardon]](https://gitlab.com/jjardon) on Jul 17, 2017, 16:44\n\nhttps://gitlab.com/baserock/definitions/-/jobs/22848073", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/47/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/47/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/41", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/41/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/41/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/41/events", "html_url": "https://github.com/apache/buildstream/issues/41", "id": 799306271, "node_id": "MDU6SXNzdWU3OTkzMDYyNzE=", "number": 41, "title": "BuildStream backgrounded after exiting a temporary shell", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T13:58:57Z", "updated_at": "2021-02-02T13:59:58Z", "closed_at": "2021-02-02T13:59:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/41)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Jun 25, 2017, 12:09\n\nAfter shelling into a build directory as an option for dealing with a build failure in interactive mode, when exiting the shell; the master BuildStream process receives SIGSTOP somehow.\n\nNeed to track this down, the reason for this happening is unclear.\n\nThis does not happen with `bst shell`, only when running a pipeline where an element has failed.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/41/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/41/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/40", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/40/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/40/events", "html_url": "https://github.com/apache/buildstream/issues/40", "id": 799305826, "node_id": "MDU6SXNzdWU3OTkzMDU4MjY=", "number": 40, "title": "Ctrl+C causes `bst shell` to exit when I don't want it to", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T13:58:26Z", "updated_at": "2021-02-02T13:58:49Z", "closed_at": "2021-02-02T13:58:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/40)\nIn GitLab by [[Gitlab user @samthursfield]](https://gitlab.com/samthursfield) on Jun 21, 2017, 12:06\n\nI find that whenever I hit Ctrl+C in a `bst shell`, it exits the shell. I pretty much never want Ctrl+C to exit the shell, I'm usually pressing this to cancel a running build. I will type `exit` or hit Ctrl+D when I want to actually exit the sandbox.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/40/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/40/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/36", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/36/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/36/events", "html_url": "https://github.com/apache/buildstream/issues/36", "id": 799300206, "node_id": "MDU6SXNzdWU3OTkzMDAyMDY=", "number": 36, "title": "`bst checkout` prints a stack trace when it lacks permission to make symlinks", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-02T13:51:38Z", "updated_at": "2021-02-02T13:52:22Z", "closed_at": "2021-02-02T13:52:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/36)\nIn GitLab by [[Gitlab user @jonathanmaw]](https://gitlab.com/jonathanmaw) on Jun 1, 2017, 09:38\n\nFull stack trace is:\n<pre>\njonathanmaw[[Gitlab user @fafnir]](https://gitlab.com/fafnir):~/workspace/buildstream/buildstream-tests$ bst checkout gnome/gnome-system.bst ~/tmp/\nLoading:   511\nResolving: 511/511\nChecking:  511/511\nTraceback (most recent call last):\n  File \"/home/jonathanmaw/.local/bin/bst\", line 9, in <module>\n    load_entry_point('BuildStream==0.1.dev747-g16926bb.d20170525', 'console_scripts', 'bst')()\n  File \"/home/jonathanmaw/.local/lib/python3.4/site-packages/click/core.py\", line 722, in __call__\n    return self.main(*args, **kwargs)\n  File \"/home/jonathanmaw/.local/lib/python3.4/site-packages/click/core.py\", line 697, in main\n    rv = self.invoke(ctx)\n  File \"/home/jonathanmaw/.local/lib/python3.4/site-packages/click/core.py\", line 1066, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/home/jonathanmaw/.local/lib/python3.4/site-packages/click/core.py\", line 895, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/home/jonathanmaw/.local/lib/python3.4/site-packages/click/core.py\", line 535, in invoke\n    return callback(*args, **kwargs)\n  File \"/home/jonathanmaw/.local/lib/python3.4/site-packages/click/decorators.py\", line 27, in new_func\n    return f(get_current_context().obj, *args, **kwargs)\n  File \"/home/jonathanmaw/workspace/buildstream/buildstream/buildstream/_frontend/main.py\", line 343, in checkout\n    app.pipeline.checkout(directory, force)\n  File \"/home/jonathanmaw/workspace/buildstream/buildstream/buildstream/_pipeline.py\", line 394, in checkout\n    utils.link_files(extract, directory)\n  File \"/home/jonathanmaw/workspace/buildstream/buildstream/buildstream/utils.py\", line 270, in link_files\n    return _process_list(src, dest, files, safe_link, ignore_missing=ignore_missing)\n  File \"/home/jonathanmaw/workspace/buildstream/buildstream/buildstream/utils.py\", line 432, in _process_list\n    os.symlink(target, destpath)\nPermissionError: [Errno 13] Permission denied: 'usr/bin' -> '/home/jonathanmaw/tmp/bin'\n</pre>\n\nThe problem on my end turned out to be that ~/tmp was owned by root.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/36/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/36/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/34", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/34/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/34/events", "html_url": "https://github.com/apache/buildstream/issues/34", "id": 799299081, "node_id": "MDU6SXNzdWU3OTkyOTkwODE=", "number": 34, "title": "Master logs of integration commands are confusing", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T13:50:13Z", "updated_at": "2021-02-02T13:50:50Z", "closed_at": "2021-02-02T13:50:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/34)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 21, 2017, 10:44\n\nIntegration commands are implemented by the elements which declare them, and when a BuildElement integrates it's sandbox before a build it will iterate over the dependencies calling Element.integrate().\n\nThe element which integrates will naturally sent a message with it's own element in context and that message will appear in the master log and on the console as the integrating element, not the element which is about to build, on behalf of which the integrating element is doing work.\n\nThis results in the master log saying something like the following for an integration step of a gstreamer build:\n```\n[--:--:--][088951c6][gstreamer.bst                  ] START   Integrating sandbox\n[--:--:--][8e7c9bae][linker-priority.bst            ] STATUS  Running integration command\n\n    ldconfig\n\n[--:--:--][46c81645][base.bst                       ] STATUS  Running integration command\n\n    update-mime-database /usr/share/mime\n\n[--:--:--][46c81645][base.bst                       ] STATUS  Running integration command\n\n    update-desktop-database -v\n\n[--:--:--][f5ac9f56][glib.bst                       ] STATUS  Running integration command\n\n    glib-compile-schemas /usr/share/glib-2.0/schemas\n\n[00:00:20][088951c6][gstreamer.bst                  ] SUCCESS Integrating sandbox\n```\n\nWhile the above it certainly true (i.e. glib.bst is integrating a sandbox), we have lost the context that glib is in fact integrating a sandbox for gstreamer to build in, this is of course especially confusing when you have 4 or more builds in parallel and commands appear mixed in the master logs.\n\nTo fix this, the element emitting the message should not be used to print the message in the master log (however this perhaps should not be true for the individual build log), instead the element associated to the scheduled task should be used to print these logs.\n\nAdditionally, it would be good to have both in context, so that in the master log and terminal one can see that we are *integrating glib on behalf of the gstreamer build*, however this should be additional, the main, text aligned element and cache key should remain gstreamer for better readability purposes.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/34/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/34/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/32", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/32/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/32/events", "html_url": "https://github.com/apache/buildstream/issues/32", "id": 799297613, "node_id": "MDU6SXNzdWU3OTkyOTc2MTM=", "number": 32, "title": "bst build does not handle elements with Consistency.INCONSISTENT", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-02-02T13:48:25Z", "updated_at": "2021-02-02T13:49:25Z", "closed_at": "2021-02-02T13:49:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/32)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 19, 2017, 05:04\n\nWhen typing `bst build` with inconsistent sources (sources that have no ref and need to be tracked), BuildStream just goes ahead and starts to try building these, but will inevitably fail because there are no refs.\n\nWe could have different approaches here:\n* Just bail out with a message to the user\n* Try building any elements which could possibly be built, but omit any inconsistent elements (by prefiltering the element list)", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/32/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/32/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/31", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/31/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/31/events", "html_url": "https://github.com/apache/buildstream/issues/31", "id": 799297008, "node_id": "MDU6SXNzdWU3OTkyOTcwMDg=", "number": 31, "title": "Hitting ^C inside the shell causes stack trace in the frontend and orphaned tasks", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T13:47:44Z", "updated_at": "2021-02-02T13:48:17Z", "closed_at": "2021-02-02T13:48:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/31)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 18, 2017, 08:14\n\nAs the description says, interrupt in the shell (I think depending on what shell you are using in the sandbox, this happens with dash but I'm not sure it happens with bash) will cause a stack trace in the buildstream frontend, exit with some failure and leave ongoing tasks orphaned.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/31/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/31/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/27", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/27/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/27/events", "html_url": "https://github.com/apache/buildstream/issues/27", "id": 799294949, "node_id": "MDU6SXNzdWU3OTkyOTQ5NDk=", "number": 27, "title": "Summary output at startup makes no sence at `bst track` time", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}, {"id": 2709108205, "node_id": "MDU6TGFiZWwyNzA5MTA4MjA1", "url": "https://api.github.com/repos/apache/buildstream/labels/frontend", "name": "frontend", "color": "AA9FEF", "default": false, "description": "An issue related to the CLI or frontend UI/UX"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T13:45:14Z", "updated_at": "2021-02-02T13:45:38Z", "closed_at": "2021-02-02T13:45:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/27)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 15, 2017, 11:56\n\nWhen launching a buildstream task which uses the scheduler, a pipeline summary is printed to the console with the logging header.\n\nThis makes sense at `bst fetch` and `bst build` time, but for `bst track` the element state and cache keys are nonsensical, since the result of `bst track` will cause previously cached elements to not be cached and will cause cache keys to change.\n\nEither we should disable this summary at `bst track` time, or we should set some internal state so that the output makes more sense.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/27/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/27/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/24", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/24/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/24/events", "html_url": "https://github.com/apache/buildstream/issues/24", "id": 799292852, "node_id": "MDU6SXNzdWU3OTkyOTI4NTI=", "number": 24, "title": "Better validation for loaded YAML", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T13:42:40Z", "updated_at": "2021-02-02T13:43:06Z", "closed_at": "2021-02-02T13:43:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/24)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 12, 2017, 08:47\n\nCurrently we have very good validation for the YAML that we *do* load, but no validation on the YAML that we *don't* load.\n\nFor the YAML that we do load, if ever the reported data is an incorrect type, or if a mandatory member is missing; we raise an exception with the filename and line, column information of where things went wrong, and this is nicely reported to the user.\n\nWhat we should additionally be doing is have a method for validating dictionary nodes and ensuring that no unexpected members are encountered, it should take a list of strings to check for loaded dictionary keys and raise an exception with the filename, line and column information for where any unexpected dictionary members were declared.\n\nThis should have a base implementation in `_yaml.py` which the `_loader.py` can use for validation of the base format; additionally an API should be exposed in `plugin.py` for Element and Source plugins to use at `plugin->configure()` time to assert a correct configuration.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/24/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/24/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/22", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/22/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/22/events", "html_url": "https://github.com/apache/buildstream/issues/22", "id": 799292358, "node_id": "MDU6SXNzdWU3OTkyOTIzNTg=", "number": 22, "title": "failed to upgrade buildstream at 640a734ec1db923b5", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-02T13:42:02Z", "updated_at": "2021-02-02T13:42:23Z", "closed_at": "2021-02-02T13:42:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/22)\nIn GitLab by [[Gitlab user @devcurmudgeon]](https://gitlab.com/devcurmudgeon) on May 7, 2017, 12:49\n\n```\r\nadmin[[Gitlab user @ip-172-31-2-103]](https://gitlab.com/ip-172-31-2-103):~/src/buildstream$ pip3 install --user .\r\nUnpacking /home/admin/src/buildstream\r\n  Running setup.py (path:/tmp/pip-j55sp20f-build/setup.py) egg_info for package from file:///home/admin/src/buildstream\r\n    your setuptools is too old (<12)\r\n    setuptools_scm functionality is degraded\r\n    zip_safe flag not set; analyzing archive contents...\r\n    \r\n    Installed /tmp/pip-j55sp20f-build/pytest_runner-2.11.1-py3.4.egg\r\n    \r\n  Requirement already satisfied (use --upgrade to upgrade): BuildStream==0.1 from file:///home/admin/src/buildstream in /home/admin/.local/lib/python3.4/site-packages\r\nRequirement already satisfied (use --upgrade to upgrade): setuptools in /usr/lib/python3/dist-packages (from BuildStream==0.1)\r\nRequirement already satisfied (use --upgrade to upgrade): psutil in /home/admin/.local/lib/python3.4/site-packages (from BuildStream==0.1)\r\nRequirement already satisfied (use --upgrade to upgrade): ruamel.yaml in /usr/lib/python3/dist-packages (from BuildStream==0.1)\r\nRequirement already satisfied (use --upgrade to upgrade): pluginbase in /home/admin/.local/lib/python3.4/site-packages (from BuildStream==0.1)\r\nRequirement already satisfied (use --upgrade to upgrade): Click in /home/admin/.local/lib/python3.4/site-packages (from BuildStream==0.1)\r\nRequirement already satisfied (use --upgrade to upgrade): blessings in /home/admin/.local/lib/python3.4/site-packages (from BuildStream==0.1)\r\nRequirement already satisfied (use --upgrade to upgrade): typing in /home/admin/.local/lib/python3.4/site-packages (from ruamel.yaml->BuildStream==0.1)\r\nCleaning up...\r\nadmin[[Gitlab user @ip-172-31-2-103]](https://gitlab.com/ip-172-31-2-103):~/src/buildstream$ pip3 install --user . --upgrade\r\nUnpacking /home/admin/src/buildstream\r\n  Running setup.py (path:/tmp/pip-x7xvew4u-build/setup.py) egg_info for package from file:///home/admin/src/buildstream\r\n    your setuptools is too old (<12)\r\n    setuptools_scm functionality is degraded\r\n    zip_safe flag not set; analyzing archive contents...\r\n    \r\n    Installed /tmp/pip-x7xvew4u-build/pytest_runner-2.11.1-py3.4.egg\r\n    \r\nDownloading/unpacking setuptools from https://pypi.python.org/packages/27/45/79618f80704497f74f2de1ca62216a5c3ffdbd49f43047c81c30e126a055/setuptools-35.0.2-py2.py3-none-any.whl#md5=54a3dac8fe9b912bb884a485d9a2e9cb (from BuildStream==0.1)\r\n  Downloading setuptools-35.0.2-py2.py3-none-any.whl (390kB): 390kB downloaded\r\nRequirement already up-to-date: psutil in /home/admin/.local/lib/python3.4/site-packages (from BuildStream==0.1)\r\nDownloading/unpacking ruamel.yaml from https://pypi.python.org/packages/5a/86/8df701c9de786f25f5f290d1e0b63374becd79149298b86527ebae83f130/ruamel.yaml-0.14.11.tar.gz#md5=9db79fd50c560c2fc38a511354fabd65 (from BuildStream==0.1)\r\n  Downloading ruamel.yaml-0.14.11.tar.gz (242kB): 242kB downloaded\r\n  Running setup.py (path:/tmp/pip-build-koos95yw/ruamel.yaml/setup.py) egg_info for package ruamel.yaml\r\n    /usr/lib/python3.4/importlib/_bootstrap.py:321: UserWarning: Module _ruamel_yaml was already imported from /usr/lib/python3/dist-packages/_ruamel_yaml.cpython-34m-x86_64-linux-gnu.so, but /tmp/pip-build-koos95yw/ruamel.yaml is being added to sys.path\r\n      return f(*args, **kwds)\r\n    Traceback (most recent call last):\r\n      File \"<string>\", line 17, in <module>\r\n      File \"/tmp/pip-build-koos95yw/ruamel.yaml/setup.py\", line 858, in <module>\r\n        main()\r\n      File \"/tmp/pip-build-koos95yw/ruamel.yaml/setup.py\", line 847, in main\r\n        setup(**kw)\r\n      File \"/usr/lib/python3.4/distutils/core.py\", line 108, in setup\r\n        _setup_distribution = dist = klass(attrs)\r\n      File \"/usr/lib/python3/dist-packages/setuptools/dist.py\", line 266, in __init__\r\n        _Distribution.__init__(self,attrs)\r\n      File \"/usr/lib/python3.4/distutils/dist.py\", line 280, in __init__\r\n        self.finalize_options()\r\n      File \"/usr/lib/python3/dist-packages/setuptools/dist.py\", line 300, in finalize_options\r\n        ep.require(installer=self.fetch_build_egg)\r\n      File \"/usr/lib/python3/dist-packages/pkg_resources.py\", line 2201, in require\r\n        reqs = self.dist.requires(self.extras)\r\n      File \"/usr/lib/python3/dist-packages/pkg_resources.py\", line 2401, in requires\r\n        dm = self._dep_map\r\n      File \"/usr/lib/python3/dist-packages/pkg_resources.py\", line 2457, in __getattr__\r\n        raise AttributeError(attr)\r\n    AttributeError: _dep_map\r\n    sys.argv ['-c', 'egg_info', '--egg-base', 'pip-egg-info']\r\n    test compiling test_ruamel_yaml\r\n    Complete output from command python setup.py egg_info:\r\n    /usr/lib/python3.4/importlib/_bootstrap.py:321: UserWarning: Module _ruamel_yaml was already imported from /usr/lib/python3/dist-packages/_ruamel_yaml.cpython-34m-x86_64-linux-gnu.so, but /tmp/pip-build-koos95yw/ruamel.yaml is being added to sys.path\r\n\r\n  return f(*args, **kwds)\r\n\r\nTraceback (most recent call last):\r\n\r\n  File \"<string>\", line 17, in <module>\r\n\r\n  File \"/tmp/pip-build-koos95yw/ruamel.yaml/setup.py\", line 858, in <module>\r\n\r\n    main()\r\n\r\n  File \"/tmp/pip-build-koos95yw/ruamel.yaml/setup.py\", line 847, in main\r\n\r\n    setup(**kw)\r\n\r\n  File \"/usr/lib/python3.4/distutils/core.py\", line 108, in setup\r\n\r\n    _setup_distribution = dist = klass(attrs)\r\n\r\n  File \"/usr/lib/python3/dist-packages/setuptools/dist.py\", line 266, in __init__\r\n\r\n    _Distribution.__init__(self,attrs)\r\n\r\n  File \"/usr/lib/python3.4/distutils/dist.py\", line 280, in __init__\r\n\r\n    self.finalize_options()\r\n\r\n  File \"/usr/lib/python3/dist-packages/setuptools/dist.py\", line 300, in finalize_options\r\n\r\n    ep.require(installer=self.fetch_build_egg)\r\n\r\n  File \"/usr/lib/python3/dist-packages/pkg_resources.py\", line 2201, in require\r\n\r\n    reqs = self.dist.requires(self.extras)\r\n\r\n  File \"/usr/lib/python3/dist-packages/pkg_resources.py\", line 2401, in requires\r\n\r\n    dm = self._dep_map\r\n\r\n  File \"/usr/lib/python3/dist-packages/pkg_resources.py\", line 2457, in __getattr__\r\n\r\n    raise AttributeError(attr)\r\n\r\nAttributeError: _dep_map\r\n\r\nsys.argv ['-c', 'egg_info', '--egg-base', 'pip-egg-info']\r\n\r\ntest compiling test_ruamel_yaml\r\n\r\n----------------------------------------\r\nCleaning up...\r\nCommand python setup.py egg_info failed with error code 1 in /tmp/pip-build-koos95yw/ruamel.yaml\r\nStoring debug log for failure in /home/admin/.pip/pip.log\r\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/22/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/22/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/20", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/20/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/20/events", "html_url": "https://github.com/apache/buildstream/issues/20", "id": 799290933, "node_id": "MDU6SXNzdWU3OTkyOTA5MzM=", "number": 20, "title": "Rare exception when terminating processes", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-02-02T13:40:17Z", "updated_at": "2021-02-02T13:40:41Z", "closed_at": "2021-02-02T13:40:41Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/20)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on May 2, 2017, 11:22\n\nIn some corner cases, we are experiencing the symptoms described in this [python upstream bug report](https://bugs.python.org/issue24484)\n\nThis is mostly harmless, but is nevertheless a stack trace thrown at the user for no good reason, e.g.:\n\n```\nError in atexit._run_exitfuncs:\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/util.py\", line 288, in _exit_function\n    _run_finalizers(0)\n  File \"/usr/lib/python3.5/multiprocessing/util.py\", line 248, in _run_finalizers\n    items = [x for x in list(_finalizer_registry.items()) if f(x)]\nRuntimeError: dictionary changed size during iteration\n```", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/20/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/20/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/apache/buildstream/issues/19", "repository_url": "https://api.github.com/repos/apache/buildstream", "labels_url": "https://api.github.com/repos/apache/buildstream/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/apache/buildstream/issues/19/comments", "events_url": "https://api.github.com/repos/apache/buildstream/issues/19/events", "html_url": "https://github.com/apache/buildstream/issues/19", "id": 799290541, "node_id": "MDU6SXNzdWU3OTkyOTA1NDE=", "number": 19, "title": "Artifacts can get corrupted while running integration commands", "user": {"login": "BuildStream-Migration-Bot", "id": 72735789, "node_id": "MDQ6VXNlcjcyNzM1Nzg5", "avatar_url": "https://avatars.githubusercontent.com/u/72735789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BuildStream-Migration-Bot", "html_url": "https://github.com/BuildStream-Migration-Bot", "followers_url": "https://api.github.com/users/BuildStream-Migration-Bot/followers", "following_url": "https://api.github.com/users/BuildStream-Migration-Bot/following{/other_user}", "gists_url": "https://api.github.com/users/BuildStream-Migration-Bot/gists{/gist_id}", "starred_url": "https://api.github.com/users/BuildStream-Migration-Bot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BuildStream-Migration-Bot/subscriptions", "organizations_url": "https://api.github.com/users/BuildStream-Migration-Bot/orgs", "repos_url": "https://api.github.com/users/BuildStream-Migration-Bot/repos", "events_url": "https://api.github.com/users/BuildStream-Migration-Bot/events{/privacy}", "received_events_url": "https://api.github.com/users/BuildStream-Migration-Bot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2708546539, "node_id": "MDU6TGFiZWwyNzA4NTQ2NTM5", "url": "https://api.github.com/repos/apache/buildstream/labels/bug", "name": "bug", "color": "FC711A", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-02-02T13:39:47Z", "updated_at": "2021-02-02T13:40:15Z", "closed_at": "2021-02-02T13:40:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "[See original issue on GitLab](https://gitlab.com/BuildStream/buildstream/-/issues/19)\nIn GitLab by [[Gitlab user @tristanvb]](https://gitlab.com/tristanvb) on Apr 29, 2017, 06:57\n\nDuring each build, and at other times; we stage artifacts to a sandbox and then run a series of integration commands in the sandbox where the rootfs needs to be read-write. Integration commands can include things like `ldconfig`, `fc-cache`, `glib-compile-schemas` etc.\n\nBecause the ostree artifacts are extracted with hardlinks, and the individual extracts are subsequently staged using hardlinks; the sandbox directory rootfs is consequently populated with hardlinks which link back into the ostree repositories, so modifying those files in place will result in corruption of artifacts.\n\nTo address this, the current plan is to use fusepy in the sandbox implementation to provide a copy-on-write experience for any hardlinked files. This should only be necessary while the sandbox is running with a read-write rootfs, in other scenarios once the rootfs is integrated then the rootfs is read-only and this is not necessary.", "reactions": {"url": "https://api.github.com/repos/apache/buildstream/issues/19/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/buildstream/issues/19/timeline", "performed_via_github_app": null, "state_reason": "completed"}]